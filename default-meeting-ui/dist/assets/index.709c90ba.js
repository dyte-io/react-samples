var v3=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Sle=v3((xe,Ie)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var Rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xy={},BP={exports:{}},Sr={},bs={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=Symbol.for("react.element"),y3=Symbol.for("react.portal"),_3=Symbol.for("react.fragment"),b3=Symbol.for("react.strict_mode"),w3=Symbol.for("react.profiler"),S3=Symbol.for("react.provider"),E3=Symbol.for("react.context"),T3=Symbol.for("react.forward_ref"),k3=Symbol.for("react.suspense"),P3=Symbol.for("react.memo"),C3=Symbol.for("react.lazy"),xw=Symbol.iterator;function R3(e){return e===null||typeof e!="object"?null:(e=xw&&e[xw]||e["@@iterator"],typeof e=="function"?e:null)}var HP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GP=Object.assign,WP={};function Ld(e,t,i){this.props=e,this.context=t,this.refs=WP,this.updater=i||HP}Ld.prototype.isReactComponent={};Ld.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ld.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qP(){}qP.prototype=Ld.prototype;function Q1(e,t,i){this.props=e,this.context=t,this.refs=WP,this.updater=i||HP}var Z1=Q1.prototype=new qP;Z1.constructor=Q1;GP(Z1,Ld.prototype);Z1.isPureReactComponent=!0;var Iw=Array.isArray,JP=Object.prototype.hasOwnProperty,X1={current:null},KP={key:!0,ref:!0,__self:!0,__source:!0};function YP(e,t,i){var r,n={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)JP.call(t,r)&&!KP.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(o===1)n.children=i;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:ip,type:e,key:s,ref:a,props:n,_owner:X1.current}}function x3(e,t){return{$$typeof:ip,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function e_(e){return typeof e=="object"&&e!==null&&e.$$typeof===ip}function I3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Aw=/\/+/g;function Mf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?I3(""+e.key):t.toString(36)}function wh(e,t,i,r,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ip:case y3:a=!0}}if(a)return a=e,n=n(a),e=r===""?"."+Mf(a,0):r,Iw(n)?(i="",e!=null&&(i=e.replace(Aw,"$&/")+"/"),wh(n,t,i,"",function(d){return d})):n!=null&&(e_(n)&&(n=x3(n,i+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(Aw,"$&/")+"/")+e)),t.push(n)),1;if(a=0,r=r===""?".":r+":",Iw(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+Mf(s,o);a+=wh(s,t,i,c,n)}else if(c=R3(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+Mf(s,o++),a+=wh(s,t,i,c,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function xp(e,t,i){if(e==null)return e;var r=[],n=0;return wh(e,r,"","",function(s){return t.call(i,s,n++)}),r}function A3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bi={current:null},Sh={transition:null},O3={ReactCurrentDispatcher:Bi,ReactCurrentBatchConfig:Sh,ReactCurrentOwner:X1};Me.Children={map:xp,forEach:function(e,t,i){xp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return xp(e,function(){t++}),t},toArray:function(e){return xp(e,function(t){return t})||[]},only:function(e){if(!e_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=Ld;Me.Fragment=_3;Me.Profiler=w3;Me.PureComponent=Q1;Me.StrictMode=b3;Me.Suspense=k3;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O3;Me.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=GP({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=X1.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)JP.call(t,c)&&!KP.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=i;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:ip,type:e.type,key:n,ref:s,props:r,_owner:a}};Me.createContext=function(e){return e={$$typeof:E3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:S3,_context:e},e.Consumer=e};Me.createElement=YP;Me.createFactory=function(e){var t=YP.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:T3,render:e}};Me.isValidElement=e_;Me.lazy=function(e){return{$$typeof:C3,_payload:{_status:-1,_result:e},_init:A3}};Me.memo=function(e,t){return{$$typeof:P3,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=Sh.transition;Sh.transition={};try{e()}finally{Sh.transition=t}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(e,t){return Bi.current.useCallback(e,t)};Me.useContext=function(e){return Bi.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return Bi.current.useDeferredValue(e)};Me.useEffect=function(e,t){return Bi.current.useEffect(e,t)};Me.useId=function(){return Bi.current.useId()};Me.useImperativeHandle=function(e,t,i){return Bi.current.useImperativeHandle(e,t,i)};Me.useInsertionEffect=function(e,t){return Bi.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return Bi.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return Bi.current.useMemo(e,t)};Me.useReducer=function(e,t,i){return Bi.current.useReducer(e,t,i)};Me.useRef=function(e){return Bi.current.useRef(e)};Me.useState=function(e){return Bi.current.useState(e)};Me.useSyncExternalStore=function(e,t,i){return Bi.current.useSyncExternalStore(e,t,i)};Me.useTransition=function(){return Bi.current.useTransition()};Me.version="18.2.0";(function(e){e.exports=Me})(bs);const t_=zP(bs.exports);var QP={exports:{}},ZP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,W){var X=F.length;F.push(W);e:for(;0<X;){var De=X-1>>>1,ft=F[De];if(0<n(ft,W))F[De]=W,F[X]=ft,X=De;else break e}}function i(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var W=F[0],X=F.pop();if(X!==W){F[0]=X;e:for(var De=0,ft=F.length,ei=ft>>>1;De<ei;){var _t=2*(De+1)-1,wn=F[_t],Di=_t+1,Br=F[Di];if(0>n(wn,X))Di<ft&&0>n(Br,wn)?(F[De]=Br,F[Di]=X,De=Di):(F[De]=wn,F[_t]=X,De=_t);else if(Di<ft&&0>n(Br,X))F[De]=Br,F[Di]=X,De=Di;else break e}}return W}function n(F,W){var X=F.sortIndex-W.sortIndex;return X!==0?X:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],d=[],l=1,u=null,g=3,m=!1,f=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var W=i(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=F)r(d),W.sortIndex=W.expirationTime,t(c,W);else break;W=i(d)}}function C(F){if(w=!1,T(F),!f)if(i(c)!==null)f=!0,or(D);else{var W=i(d);W!==null&&Qn(C,W.startTime-F)}}function D(F,W){f=!1,w&&(w=!1,y(H),H=-1),m=!0;var X=g;try{for(T(W),u=i(c);u!==null&&(!(u.expirationTime>W)||F&&!ge());){var De=u.callback;if(typeof De=="function"){u.callback=null,g=u.priorityLevel;var ft=De(u.expirationTime<=W);W=e.unstable_now(),typeof ft=="function"?u.callback=ft:u===i(c)&&r(c),T(W)}else r(c);u=i(c)}if(u!==null)var ei=!0;else{var _t=i(d);_t!==null&&Qn(C,_t.startTime-W),ei=!1}return ei}finally{u=null,g=X,m=!1}}var O=!1,z=null,H=-1,ie=5,K=-1;function ge(){return!(e.unstable_now()-K<ie)}function He(){if(z!==null){var F=e.unstable_now();K=F;var W=!0;try{W=z(!0,F)}finally{W?Zt():(O=!1,z=null)}}else O=!1}var Zt;if(typeof _=="function")Zt=function(){_(He)};else if(typeof MessageChannel<"u"){var Xt=new MessageChannel,Yn=Xt.port2;Xt.port1.onmessage=He,Zt=function(){Yn.postMessage(null)}}else Zt=function(){S(He,0)};function or(F){z=F,O||(O=!0,Zt())}function Qn(F,W){H=S(function(){F(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){f||m||(f=!0,or(D))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var X=g;g=W;try{return F()}finally{g=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=g;g=F;try{return W()}finally{g=X}},e.unstable_scheduleCallback=function(F,W,X){var De=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?De+X:De):X=De,F){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=X+ft,F={id:l++,callback:W,priorityLevel:F,startTime:X,expirationTime:ft,sortIndex:-1},X>De?(F.sortIndex=X,t(d,F),i(c)===null&&F===i(d)&&(w?(y(H),H=-1):w=!0,Qn(C,X-De))):(F.sortIndex=ft,t(c,F),f||m||(f=!0,or(D))),F},e.unstable_shouldYield=ge,e.unstable_wrapCallback=function(F){var W=g;return function(){var X=g;g=W;try{return F.apply(this,arguments)}finally{g=X}}}})(ZP);(function(e){e.exports=ZP})(QP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XP=bs.exports,br=QP.exports;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e2=new Set,Su={};function Ko(e,t){wd(e,t),wd(e+"Capture",t)}function wd(e,t){for(Su[e]=t,e=0;e<t.length;e++)e2.add(t[e])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iy=Object.prototype.hasOwnProperty,M3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ow={},Mw={};function D3(e){return Iy.call(Mw,e)?!0:Iy.call(Ow,e)?!1:M3.test(e)?Mw[e]=!0:(Ow[e]=!0,!1)}function L3(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N3(e,t,i,r){if(t===null||typeof t>"u"||L3(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Hi(e,t,i,r,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var wi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wi[e]=new Hi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wi[t]=new Hi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wi[e]=new Hi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wi[e]=new Hi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wi[e]=new Hi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wi[e]=new Hi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wi[e]=new Hi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wi[e]=new Hi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wi[e]=new Hi(e,5,!1,e.toLowerCase(),null,!1,!1)});var i_=/[\-:]([a-z])/g;function r_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(i_,r_);wi[t]=new Hi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(i_,r_);wi[t]=new Hi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(i_,r_);wi[t]=new Hi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wi[e]=new Hi(e,1,!1,e.toLowerCase(),null,!1,!1)});wi.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wi[e]=new Hi(e,1,!1,e.toLowerCase(),null,!0,!0)});function n_(e,t,i,r){var n=wi.hasOwnProperty(t)?wi[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N3(t,i,n,r)&&(i=null),r||n===null?D3(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var xs=XP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ip=Symbol.for("react.element"),zc=Symbol.for("react.portal"),Bc=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),Ay=Symbol.for("react.profiler"),t2=Symbol.for("react.provider"),i2=Symbol.for("react.context"),a_=Symbol.for("react.forward_ref"),Oy=Symbol.for("react.suspense"),My=Symbol.for("react.suspense_list"),o_=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),r2=Symbol.for("react.offscreen"),Dw=Symbol.iterator;function il(e){return e===null||typeof e!="object"?null:(e=Dw&&e[Dw]||e["@@iterator"],typeof e=="function"?e:null)}var kt=Object.assign,Df;function Nl(e){if(Df===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Df=t&&t[1]||""}return`
`+Df+e}var Lf=!1;function Nf(e,t){if(!e||Lf)return"";Lf=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var c=`
`+n[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{Lf=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Nl(e):""}function U3(e){switch(e.tag){case 5:return Nl(e.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return e=Nf(e.type,!1),e;case 11:return e=Nf(e.type.render,!1),e;case 1:return e=Nf(e.type,!0),e;default:return""}}function Dy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bc:return"Fragment";case zc:return"Portal";case Ay:return"Profiler";case s_:return"StrictMode";case Oy:return"Suspense";case My:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case i2:return(e.displayName||"Context")+".Consumer";case t2:return(e._context.displayName||"Context")+".Provider";case a_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case o_:return t=e.displayName||null,t!==null?t:Dy(e.type)||"Memo";case ta:t=e._payload,e=e._init;try{return Dy(e(t))}catch{}}return null}function j3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dy(t);case 8:return t===s_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ca(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function n2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $3(e){var t=n2(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ap(e){e._valueTracker||(e._valueTracker=$3(e))}function s2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=n2(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function ug(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ly(e,t){var i=t.checked;return kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function Lw(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=Ca(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function a2(e,t){t=t.checked,t!=null&&n_(e,"checked",t,!1)}function Ny(e,t){a2(e,t);var i=Ca(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uy(e,t.type,i):t.hasOwnProperty("defaultValue")&&Uy(e,t.type,Ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Uy(e,t,i){(t!=="number"||ug(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Ul=Array.isArray;function rd(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Ca(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function jy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Uw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(J(92));if(Ul(i)){if(1<i.length)throw Error(J(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ca(i)}}function o2(e,t){var i=Ca(t.value),r=Ca(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function jw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function c2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $y(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?c2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Op,d2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Op=Op||document.createElement("div"),Op.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Op.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Eu(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V3=["Webkit","ms","Moz","O"];Object.keys(tu).forEach(function(e){V3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tu[t]=tu[e]})});function l2(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||tu.hasOwnProperty(e)&&tu[e]?(""+t).trim():t+"px"}function u2(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=l2(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var F3=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vy(e,t){if(t){if(F3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Fy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zy=null;function c_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var By=null,nd=null,sd=null;function $w(e){if(e=sp(e)){if(typeof By!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Cm(t),By(e.stateNode,e.type,t))}}function p2(e){nd?sd?sd.push(e):sd=[e]:nd=e}function h2(){if(nd){var e=nd,t=sd;if(sd=nd=null,$w(e),t)for(e=0;e<t.length;e++)$w(t[e])}}function g2(e,t){return e(t)}function m2(){}var Uf=!1;function f2(e,t,i){if(Uf)return e(t,i);Uf=!0;try{return g2(e,t,i)}finally{Uf=!1,(nd!==null||sd!==null)&&(m2(),h2())}}function Tu(e,t){var i=e.stateNode;if(i===null)return null;var r=Cm(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(J(231,t,typeof i));return i}var Hy=!1;if(ws)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){Hy=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{Hy=!1}function z3(e,t,i,r,n,s,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(i,d)}catch(l){this.onError(l)}}var iu=!1,pg=null,hg=!1,Gy=null,B3={onError:function(e){iu=!0,pg=e}};function H3(e,t,i,r,n,s,a,o,c){iu=!1,pg=null,z3.apply(B3,arguments)}function G3(e,t,i,r,n,s,a,o,c){if(H3.apply(this,arguments),iu){if(iu){var d=pg;iu=!1,pg=null}else throw Error(J(198));hg||(hg=!0,Gy=d)}}function Yo(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function v2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vw(e){if(Yo(e)!==e)throw Error(J(188))}function W3(e){var t=e.alternate;if(!t){if(t=Yo(e),t===null)throw Error(J(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return Vw(n),e;if(s===r)return Vw(n),t;s=s.sibling}throw Error(J(188))}if(i.return!==r.return)i=n,r=s;else{for(var a=!1,o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a)throw Error(J(189))}}if(i.alternate!==r)throw Error(J(190))}if(i.tag!==3)throw Error(J(188));return i.stateNode.current===i?e:t}function y2(e){return e=W3(e),e!==null?_2(e):null}function _2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_2(e);if(t!==null)return t;e=e.sibling}return null}var b2=br.unstable_scheduleCallback,Fw=br.unstable_cancelCallback,q3=br.unstable_shouldYield,J3=br.unstable_requestPaint,Ut=br.unstable_now,K3=br.unstable_getCurrentPriorityLevel,d_=br.unstable_ImmediatePriority,w2=br.unstable_UserBlockingPriority,gg=br.unstable_NormalPriority,Y3=br.unstable_LowPriority,S2=br.unstable_IdlePriority,Em=null,jn=null;function Q3(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Em,e,void 0,(e.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:eD,Z3=Math.log,X3=Math.LN2;function eD(e){return e>>>=0,e===0?32:31-(Z3(e)/X3|0)|0}var Mp=64,Dp=4194304;function jl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mg(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,a=i&268435455;if(a!==0){var o=a&~n;o!==0?r=jl(o):(s&=a,s!==0&&(r=jl(s)))}else a=i&~n,a!==0?r=jl(a):s!==0&&(r=jl(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&n)===0&&(n=r&-r,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-un(t),n=1<<i,r|=e[i],t&=~n;return r}function tD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iD(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-un(s),o=1<<a,c=n[a];c===-1?((o&i)===0||(o&r)!==0)&&(n[a]=tD(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function Wy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function E2(){var e=Mp;return Mp<<=1,(Mp&4194240)===0&&(Mp=64),e}function jf(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function rp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-un(t),e[t]=i}function rD(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-un(i),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~s}}function l_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-un(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Ye=0;function T2(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var k2,u_,P2,C2,R2,qy=!1,Lp=[],fa=null,va=null,ya=null,ku=new Map,Pu=new Map,sa=[],nD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zw(e,t){switch(e){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":ku.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(t.pointerId)}}function nl(e,t,i,r,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},t!==null&&(t=sp(t),t!==null&&u_(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function sD(e,t,i,r,n){switch(t){case"focusin":return fa=nl(fa,e,t,i,r,n),!0;case"dragenter":return va=nl(va,e,t,i,r,n),!0;case"mouseover":return ya=nl(ya,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return ku.set(s,nl(ku.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Pu.set(s,nl(Pu.get(s)||null,e,t,i,r,n)),!0}return!1}function x2(e){var t=To(e.target);if(t!==null){var i=Yo(t);if(i!==null){if(t=i.tag,t===13){if(t=v2(i),t!==null){e.blockedOn=t,R2(e.priority,function(){P2(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Jy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);zy=r,i.target.dispatchEvent(r),zy=null}else return t=sp(i),t!==null&&u_(t),e.blockedOn=i,!1;t.shift()}return!0}function Bw(e,t,i){Eh(e)&&i.delete(t)}function aD(){qy=!1,fa!==null&&Eh(fa)&&(fa=null),va!==null&&Eh(va)&&(va=null),ya!==null&&Eh(ya)&&(ya=null),ku.forEach(Bw),Pu.forEach(Bw)}function sl(e,t){e.blockedOn===t&&(e.blockedOn=null,qy||(qy=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,aD)))}function Cu(e){function t(n){return sl(n,e)}if(0<Lp.length){sl(Lp[0],e);for(var i=1;i<Lp.length;i++){var r=Lp[i];r.blockedOn===e&&(r.blockedOn=null)}}for(fa!==null&&sl(fa,e),va!==null&&sl(va,e),ya!==null&&sl(ya,e),ku.forEach(t),Pu.forEach(t),i=0;i<sa.length;i++)r=sa[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<sa.length&&(i=sa[0],i.blockedOn===null);)x2(i),i.blockedOn===null&&sa.shift()}var ad=xs.ReactCurrentBatchConfig,fg=!0;function oD(e,t,i,r){var n=Ye,s=ad.transition;ad.transition=null;try{Ye=1,p_(e,t,i,r)}finally{Ye=n,ad.transition=s}}function cD(e,t,i,r){var n=Ye,s=ad.transition;ad.transition=null;try{Ye=4,p_(e,t,i,r)}finally{Ye=n,ad.transition=s}}function p_(e,t,i,r){if(fg){var n=Jy(e,t,i,r);if(n===null)Jf(e,t,r,vg,i),zw(e,r);else if(sD(n,e,t,i,r))r.stopPropagation();else if(zw(e,r),t&4&&-1<nD.indexOf(e)){for(;n!==null;){var s=sp(n);if(s!==null&&k2(s),s=Jy(e,t,i,r),s===null&&Jf(e,t,r,vg,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else Jf(e,t,r,null,i)}}var vg=null;function Jy(e,t,i,r){if(vg=null,e=c_(r),e=To(e),e!==null)if(t=Yo(e),t===null)e=null;else if(i=t.tag,i===13){if(e=v2(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vg=e,null}function I2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K3()){case d_:return 1;case w2:return 4;case gg:case Y3:return 16;case S2:return 536870912;default:return 16}default:return 16}}var pa=null,h_=null,Th=null;function A2(){if(Th)return Th;var e,t=h_,i=t.length,r,n="value"in pa?pa.value:pa.textContent,s=n.length;for(e=0;e<i&&t[e]===n[e];e++);var a=i-e;for(r=1;r<=a&&t[i-r]===n[s-r];r++);return Th=n.slice(e,1<r?1-r:void 0)}function kh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Np(){return!0}function Hw(){return!1}function Er(e){function t(i,r,n,s,a){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Np:Hw,this.isPropagationStopped=Hw,this}return kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Np)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Np)},persist:function(){},isPersistent:Np}),t}var Nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g_=Er(Nd),np=kt({},Nd,{view:0,detail:0}),dD=Er(np),$f,Vf,al,Tm=kt({},np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==al&&(al&&e.type==="mousemove"?($f=e.screenX-al.screenX,Vf=e.screenY-al.screenY):Vf=$f=0,al=e),$f)},movementY:function(e){return"movementY"in e?e.movementY:Vf}}),Gw=Er(Tm),lD=kt({},Tm,{dataTransfer:0}),uD=Er(lD),pD=kt({},np,{relatedTarget:0}),Ff=Er(pD),hD=kt({},Nd,{animationName:0,elapsedTime:0,pseudoElement:0}),gD=Er(hD),mD=kt({},Nd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fD=Er(mD),vD=kt({},Nd,{data:0}),Ww=Er(vD),yD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_D={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bD[e])?!!t[e]:!1}function m_(){return wD}var SD=kt({},np,{key:function(e){if(e.key){var t=yD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_D[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m_,charCode:function(e){return e.type==="keypress"?kh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ED=Er(SD),TD=kt({},Tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qw=Er(TD),kD=kt({},np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m_}),PD=Er(kD),CD=kt({},Nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),RD=Er(CD),xD=kt({},Tm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ID=Er(xD),AD=[9,13,27,32],f_=ws&&"CompositionEvent"in window,ru=null;ws&&"documentMode"in document&&(ru=document.documentMode);var OD=ws&&"TextEvent"in window&&!ru,O2=ws&&(!f_||ru&&8<ru&&11>=ru),Jw=String.fromCharCode(32),Kw=!1;function M2(e,t){switch(e){case"keyup":return AD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hc=!1;function MD(e,t){switch(e){case"compositionend":return D2(t);case"keypress":return t.which!==32?null:(Kw=!0,Jw);case"textInput":return e=t.data,e===Jw&&Kw?null:e;default:return null}}function DD(e,t){if(Hc)return e==="compositionend"||!f_&&M2(e,t)?(e=A2(),Th=h_=pa=null,Hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return O2&&t.locale!=="ko"?null:t.data;default:return null}}var LD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LD[e.type]:t==="textarea"}function L2(e,t,i,r){p2(r),t=yg(t,"onChange"),0<t.length&&(i=new g_("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var nu=null,Ru=null;function ND(e){W2(e,0)}function km(e){var t=qc(e);if(s2(t))return e}function UD(e,t){if(e==="change")return t}var N2=!1;if(ws){var zf;if(ws){var Bf="oninput"in document;if(!Bf){var Qw=document.createElement("div");Qw.setAttribute("oninput","return;"),Bf=typeof Qw.oninput=="function"}zf=Bf}else zf=!1;N2=zf&&(!document.documentMode||9<document.documentMode)}function Zw(){nu&&(nu.detachEvent("onpropertychange",U2),Ru=nu=null)}function U2(e){if(e.propertyName==="value"&&km(Ru)){var t=[];L2(t,Ru,e,c_(e)),f2(ND,t)}}function jD(e,t,i){e==="focusin"?(Zw(),nu=t,Ru=i,nu.attachEvent("onpropertychange",U2)):e==="focusout"&&Zw()}function $D(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return km(Ru)}function VD(e,t){if(e==="click")return km(t)}function FD(e,t){if(e==="input"||e==="change")return km(t)}function zD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:zD;function xu(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!Iy.call(t,n)||!mn(e[n],t[n]))return!1}return!0}function Xw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eS(e,t){var i=Xw(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Xw(i)}}function j2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?j2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $2(){for(var e=window,t=ug();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ug(e.document)}return t}function v_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BD(e){var t=$2(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&j2(i.ownerDocument.documentElement,i)){if(r!==null&&v_(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=eS(i,s);var a=eS(i,r);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HD=ws&&"documentMode"in document&&11>=document.documentMode,Gc=null,Ky=null,su=null,Yy=!1;function tS(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Yy||Gc==null||Gc!==ug(r)||(r=Gc,"selectionStart"in r&&v_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),su&&xu(su,r)||(su=r,r=yg(Ky,"onSelect"),0<r.length&&(t=new g_("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Gc)))}function Up(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Wc={animationend:Up("Animation","AnimationEnd"),animationiteration:Up("Animation","AnimationIteration"),animationstart:Up("Animation","AnimationStart"),transitionend:Up("Transition","TransitionEnd")},Hf={},V2={};ws&&(V2=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function Pm(e){if(Hf[e])return Hf[e];if(!Wc[e])return e;var t=Wc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in V2)return Hf[e]=t[i];return e}var F2=Pm("animationend"),z2=Pm("animationiteration"),B2=Pm("animationstart"),H2=Pm("transitionend"),G2=new Map,iS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(e,t){G2.set(e,t),Ko(t,[e])}for(var Gf=0;Gf<iS.length;Gf++){var Wf=iS[Gf],GD=Wf.toLowerCase(),WD=Wf[0].toUpperCase()+Wf.slice(1);Ma(GD,"on"+WD)}Ma(F2,"onAnimationEnd");Ma(z2,"onAnimationIteration");Ma(B2,"onAnimationStart");Ma("dblclick","onDoubleClick");Ma("focusin","onFocus");Ma("focusout","onBlur");Ma(H2,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);Ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ko("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qD=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function rS(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,G3(r,t,void 0,e),e.currentTarget=null}function W2(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==s&&n.isPropagationStopped())break e;rS(n,o,d),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==s&&n.isPropagationStopped())break e;rS(n,o,d),s=c}}}if(hg)throw e=Gy,hg=!1,Gy=null,e}function dt(e,t){var i=t[t0];i===void 0&&(i=t[t0]=new Set);var r=e+"__bubble";i.has(r)||(q2(t,e,2,!1),i.add(r))}function qf(e,t,i){var r=0;t&&(r|=4),q2(i,e,r,t)}var jp="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[jp]){e[jp]=!0,e2.forEach(function(i){i!=="selectionchange"&&(qD.has(i)||qf(i,!1,e),qf(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jp]||(t[jp]=!0,qf("selectionchange",!1,t))}}function q2(e,t,i,r){switch(I2(t)){case 1:var n=oD;break;case 4:n=cD;break;default:n=p_}i=n.bind(null,t,i,e),n=void 0,!Hy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function Jf(e,t,i,r,n){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;o!==null;){if(a=To(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}f2(function(){var d=s,l=c_(i),u=[];e:{var g=G2.get(e);if(g!==void 0){var m=g_,f=e;switch(e){case"keypress":if(kh(i)===0)break e;case"keydown":case"keyup":m=ED;break;case"focusin":f="focus",m=Ff;break;case"focusout":f="blur",m=Ff;break;case"beforeblur":case"afterblur":m=Ff;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Gw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=PD;break;case F2:case z2:case B2:m=gD;break;case H2:m=RD;break;case"scroll":m=dD;break;case"wheel":m=ID;break;case"copy":case"cut":case"paste":m=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qw}var w=(t&4)!==0,S=!w&&e==="scroll",y=w?g!==null?g+"Capture":null:g;w=[];for(var _=d,T;_!==null;){T=_;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,y!==null&&(C=Tu(_,y),C!=null&&w.push(Au(_,C,T)))),S)break;_=_.return}0<w.length&&(g=new m(g,f,null,i,l),u.push({event:g,listeners:w}))}}if((t&7)===0){e:{if(g=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",g&&i!==zy&&(f=i.relatedTarget||i.fromElement)&&(To(f)||f[Ss]))break e;if((m||g)&&(g=l.window===l?l:(g=l.ownerDocument)?g.defaultView||g.parentWindow:window,m?(f=i.relatedTarget||i.toElement,m=d,f=f?To(f):null,f!==null&&(S=Yo(f),f!==S||f.tag!==5&&f.tag!==6)&&(f=null)):(m=null,f=d),m!==f)){if(w=Gw,C="onMouseLeave",y="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(w=qw,C="onPointerLeave",y="onPointerEnter",_="pointer"),S=m==null?g:qc(m),T=f==null?g:qc(f),g=new w(C,_+"leave",m,i,l),g.target=S,g.relatedTarget=T,C=null,To(l)===d&&(w=new w(y,_+"enter",f,i,l),w.target=T,w.relatedTarget=S,C=w),S=C,m&&f)t:{for(w=m,y=f,_=0,T=w;T;T=cc(T))_++;for(T=0,C=y;C;C=cc(C))T++;for(;0<_-T;)w=cc(w),_--;for(;0<T-_;)y=cc(y),T--;for(;_--;){if(w===y||y!==null&&w===y.alternate)break t;w=cc(w),y=cc(y)}w=null}else w=null;m!==null&&nS(u,g,m,w,!1),f!==null&&S!==null&&nS(u,S,f,w,!0)}}e:{if(g=d?qc(d):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var D=UD;else if(Yw(g))if(N2)D=FD;else{D=$D;var O=jD}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=VD);if(D&&(D=D(e,d))){L2(u,D,i,l);break e}O&&O(e,g,d),e==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&Uy(g,"number",g.value)}switch(O=d?qc(d):window,e){case"focusin":(Yw(O)||O.contentEditable==="true")&&(Gc=O,Ky=d,su=null);break;case"focusout":su=Ky=Gc=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,tS(u,i,l);break;case"selectionchange":if(HD)break;case"keydown":case"keyup":tS(u,i,l)}var z;if(f_)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else Hc?M2(e,i)&&(H="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(H="onCompositionStart");H&&(O2&&i.locale!=="ko"&&(Hc||H!=="onCompositionStart"?H==="onCompositionEnd"&&Hc&&(z=A2()):(pa=l,h_="value"in pa?pa.value:pa.textContent,Hc=!0)),O=yg(d,H),0<O.length&&(H=new Ww(H,e,null,i,l),u.push({event:H,listeners:O}),z?H.data=z:(z=D2(i),z!==null&&(H.data=z)))),(z=OD?MD(e,i):DD(e,i))&&(d=yg(d,"onBeforeInput"),0<d.length&&(l=new Ww("onBeforeInput","beforeinput",null,i,l),u.push({event:l,listeners:d}),l.data=z))}W2(u,t)})}function Au(e,t,i){return{instance:e,listener:t,currentTarget:i}}function yg(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Tu(e,i),s!=null&&r.unshift(Au(e,s,n)),s=Tu(e,t),s!=null&&r.push(Au(e,s,n))),e=e.return}return r}function cc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nS(e,t,i,r,n){for(var s=t._reactName,a=[];i!==null&&i!==r;){var o=i,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,n?(c=Tu(i,s),c!=null&&a.unshift(Au(i,c,o))):n||(c=Tu(i,s),c!=null&&a.push(Au(i,c,o)))),i=i.return}a.length!==0&&e.push({event:t,listeners:a})}var JD=/\r\n?/g,KD=/\u0000|\uFFFD/g;function sS(e){return(typeof e=="string"?e:""+e).replace(JD,`
`).replace(KD,"")}function $p(e,t,i){if(t=sS(t),sS(e)!==t&&i)throw Error(J(425))}function _g(){}var Qy=null,Zy=null;function Xy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var e0=typeof setTimeout=="function"?setTimeout:void 0,YD=typeof clearTimeout=="function"?clearTimeout:void 0,aS=typeof Promise=="function"?Promise:void 0,QD=typeof queueMicrotask=="function"?queueMicrotask:typeof aS<"u"?function(e){return aS.resolve(null).then(e).catch(ZD)}:e0;function ZD(e){setTimeout(function(){throw e})}function Kf(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),Cu(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Cu(t)}function _a(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Ud=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Ud,Ou="__reactProps$"+Ud,Ss="__reactContainer$"+Ud,t0="__reactEvents$"+Ud,XD="__reactListeners$"+Ud,eL="__reactHandles$"+Ud;function To(e){var t=e[Nn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ss]||i[Nn]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=oS(e);e!==null;){if(i=e[Nn])return i;e=oS(e)}return t}e=i,i=e.parentNode}return null}function sp(e){return e=e[Nn]||e[Ss],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Cm(e){return e[Ou]||null}var i0=[],Jc=-1;function Da(e){return{current:e}}function mt(e){0>Jc||(e.current=i0[Jc],i0[Jc]=null,Jc--)}function st(e,t){Jc++,i0[Jc]=e.current,e.current=t}var Ra={},Mi=Da(Ra),er=Da(!1),Uo=Ra;function Sd(e,t){var i=e.type.contextTypes;if(!i)return Ra;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function tr(e){return e=e.childContextTypes,e!=null}function bg(){mt(er),mt(Mi)}function cS(e,t,i){if(Mi.current!==Ra)throw Error(J(168));st(Mi,t),st(er,i)}function J2(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(J(108,j3(e)||"Unknown",n));return kt({},i,r)}function wg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ra,Uo=Mi.current,st(Mi,e),st(er,er.current),!0}function dS(e,t,i){var r=e.stateNode;if(!r)throw Error(J(169));i?(e=J2(e,t,Uo),r.__reactInternalMemoizedMergedChildContext=e,mt(er),mt(Mi),st(Mi,e)):mt(er),st(er,i)}var ns=null,Rm=!1,Yf=!1;function K2(e){ns===null?ns=[e]:ns.push(e)}function tL(e){Rm=!0,K2(e)}function La(){if(!Yf&&ns!==null){Yf=!0;var e=0,t=Ye;try{var i=ns;for(Ye=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}ns=null,Rm=!1}catch(n){throw ns!==null&&(ns=ns.slice(e+1)),b2(d_,La),n}finally{Ye=t,Yf=!1}}return null}var Kc=[],Yc=0,Sg=null,Eg=0,Cr=[],Rr=0,jo=null,gs=1,ms="";function io(e,t){Kc[Yc++]=Eg,Kc[Yc++]=Sg,Sg=e,Eg=t}function Y2(e,t,i){Cr[Rr++]=gs,Cr[Rr++]=ms,Cr[Rr++]=jo,jo=e;var r=gs;e=ms;var n=32-un(r)-1;r&=~(1<<n),i+=1;var s=32-un(t)+n;if(30<s){var a=n-n%5;s=(r&(1<<a)-1).toString(32),r>>=a,n-=a,gs=1<<32-un(t)+n|i<<n|r,ms=s+e}else gs=1<<s|i<<n|r,ms=e}function y_(e){e.return!==null&&(io(e,1),Y2(e,1,0))}function __(e){for(;e===Sg;)Sg=Kc[--Yc],Kc[Yc]=null,Eg=Kc[--Yc],Kc[Yc]=null;for(;e===jo;)jo=Cr[--Rr],Cr[Rr]=null,ms=Cr[--Rr],Cr[Rr]=null,gs=Cr[--Rr],Cr[Rr]=null}var _r=null,yr=null,yt=!1,rn=null;function Q2(e,t){var i=Or(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function lS(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_r=e,yr=_a(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_r=e,yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=jo!==null?{id:gs,overflow:ms}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Or(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,_r=e,yr=null,!0):!1;default:return!1}}function r0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function n0(e){if(yt){var t=yr;if(t){var i=t;if(!lS(e,t)){if(r0(e))throw Error(J(418));t=_a(i.nextSibling);var r=_r;t&&lS(e,t)?Q2(r,i):(e.flags=e.flags&-4097|2,yt=!1,_r=e)}}else{if(r0(e))throw Error(J(418));e.flags=e.flags&-4097|2,yt=!1,_r=e}}}function uS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_r=e}function Vp(e){if(e!==_r)return!1;if(!yt)return uS(e),yt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xy(e.type,e.memoizedProps)),t&&(t=yr)){if(r0(e))throw Z2(),Error(J(418));for(;t;)Q2(e,t),t=_a(t.nextSibling)}if(uS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){yr=_a(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}yr=null}}else yr=_r?_a(e.stateNode.nextSibling):null;return!0}function Z2(){for(var e=yr;e;)e=_a(e.nextSibling)}function Ed(){yr=_r=null,yt=!1}function b_(e){rn===null?rn=[e]:rn.push(e)}var iL=xs.ReactCurrentBatchConfig;function Qr(e,t){if(e&&e.defaultProps){t=kt({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Tg=Da(null),kg=null,Qc=null,w_=null;function S_(){w_=Qc=kg=null}function E_(e){var t=Tg.current;mt(Tg),e._currentValue=t}function s0(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function od(e,t){kg=e,w_=Qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Qi=!0),e.firstContext=null)}function jr(e){var t=e._currentValue;if(w_!==e)if(e={context:e,memoizedValue:t,next:null},Qc===null){if(kg===null)throw Error(J(308));Qc=e,kg.dependencies={lanes:0,firstContext:e}}else Qc=Qc.next=e;return t}var ko=null;function T_(e){ko===null?ko=[e]:ko.push(e)}function X2(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,T_(t)):(i.next=n.next,n.next=i),t.interleaved=i,Es(e,r)}function Es(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var ia=!1;function k_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ba(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ve&2)!==0){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Es(e,i)}return n=r.interleaved,n===null?(t.next=t,T_(r)):(t.next=n.next,n.next=t),r.interleaved=t,Es(e,i)}function Ph(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,l_(e,i)}}function pS(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?n=s=t:s=s.next=t}else n=s=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Pg(e,t,i,r){var n=e.updateQueue;ia=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=d:o.next=d,l.lastBaseUpdate=c))}if(s!==null){var u=n.baseState;a=0,l=d=c=null,o=s;do{var g=o.lane,m=o.eventTime;if((r&g)===g){l!==null&&(l=l.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,w=o;switch(g=t,m=i,w.tag){case 1:if(f=w.payload,typeof f=="function"){u=f.call(m,u,g);break e}u=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=w.payload,g=typeof f=="function"?f.call(m,u,g):f,g==null)break e;u=kt({},u,g);break e;case 2:ia=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=n.effects,g===null?n.effects=[o]:g.push(o))}else m={eventTime:m,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(d=l=m,c=u):l=l.next=m,a|=g;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;g=o,o=g.next,g.next=null,n.lastBaseUpdate=g,n.shared.pending=null}}while(1);if(l===null&&(c=u),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=l,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Vo|=a,e.lanes=a,e.memoizedState=u}}function hS(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(J(191,n));n.call(r)}}}var tC=new XP.Component().refs;function a0(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:kt({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var xm={isMounted:function(e){return(e=e._reactInternals)?Yo(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Fi(),n=Sa(e),s=_s(r,n);s.payload=t,i!=null&&(s.callback=i),t=ba(e,s,n),t!==null&&(pn(t,e,n,r),Ph(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Fi(),n=Sa(e),s=_s(r,n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=ba(e,s,n),t!==null&&(pn(t,e,n,r),Ph(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Fi(),r=Sa(e),n=_s(i,r);n.tag=2,t!=null&&(n.callback=t),t=ba(e,n,r),t!==null&&(pn(t,e,r,i),Ph(t,e,r))}};function gS(e,t,i,r,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!xu(i,r)||!xu(n,s):!0}function iC(e,t,i){var r=!1,n=Ra,s=t.contextType;return typeof s=="object"&&s!==null?s=jr(s):(n=tr(t)?Uo:Mi.current,r=t.contextTypes,s=(r=r!=null)?Sd(e,n):Ra),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function mS(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&xm.enqueueReplaceState(t,t.state,null)}function o0(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=tC,k_(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=jr(s):(s=tr(t)?Uo:Mi.current,n.context=Sd(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(a0(e,t,s,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&xm.enqueueReplaceState(n,n.state,null),Pg(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function ol(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(J(309));var r=i.stateNode}if(!r)throw Error(J(147,e));var n=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===tC&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(J(284));if(!i._owner)throw Error(J(290,e))}return e}function Fp(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fS(e){var t=e._init;return t(e._payload)}function rC(e){function t(y,_){if(e){var T=y.deletions;T===null?(y.deletions=[_],y.flags|=16):T.push(_)}}function i(y,_){if(!e)return null;for(;_!==null;)t(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function n(y,_){return y=Ea(y,_),y.index=0,y.sibling=null,y}function s(y,_,T){return y.index=T,e?(T=y.alternate,T!==null?(T=T.index,T<_?(y.flags|=2,_):T):(y.flags|=2,_)):(y.flags|=1048576,_)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,_,T,C){return _===null||_.tag!==6?(_=rv(T,y.mode,C),_.return=y,_):(_=n(_,T),_.return=y,_)}function c(y,_,T,C){var D=T.type;return D===Bc?l(y,_,T.props.children,C,T.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ta&&fS(D)===_.type)?(C=n(_,T.props),C.ref=ol(y,_,T),C.return=y,C):(C=Oh(T.type,T.key,T.props,null,y.mode,C),C.ref=ol(y,_,T),C.return=y,C)}function d(y,_,T,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=nv(T,y.mode,C),_.return=y,_):(_=n(_,T.children||[]),_.return=y,_)}function l(y,_,T,C,D){return _===null||_.tag!==7?(_=Oo(T,y.mode,C,D),_.return=y,_):(_=n(_,T),_.return=y,_)}function u(y,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=rv(""+_,y.mode,T),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ip:return T=Oh(_.type,_.key,_.props,null,y.mode,T),T.ref=ol(y,null,_),T.return=y,T;case zc:return _=nv(_,y.mode,T),_.return=y,_;case ta:var C=_._init;return u(y,C(_._payload),T)}if(Ul(_)||il(_))return _=Oo(_,y.mode,T,null),_.return=y,_;Fp(y,_)}return null}function g(y,_,T,C){var D=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:o(y,_,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ip:return T.key===D?c(y,_,T,C):null;case zc:return T.key===D?d(y,_,T,C):null;case ta:return D=T._init,g(y,_,D(T._payload),C)}if(Ul(T)||il(T))return D!==null?null:l(y,_,T,C,null);Fp(y,T)}return null}function m(y,_,T,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(T)||null,o(_,y,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ip:return y=y.get(C.key===null?T:C.key)||null,c(_,y,C,D);case zc:return y=y.get(C.key===null?T:C.key)||null,d(_,y,C,D);case ta:var O=C._init;return m(y,_,T,O(C._payload),D)}if(Ul(C)||il(C))return y=y.get(T)||null,l(_,y,C,D,null);Fp(_,C)}return null}function f(y,_,T,C){for(var D=null,O=null,z=_,H=_=0,ie=null;z!==null&&H<T.length;H++){z.index>H?(ie=z,z=null):ie=z.sibling;var K=g(y,z,T[H],C);if(K===null){z===null&&(z=ie);break}e&&z&&K.alternate===null&&t(y,z),_=s(K,_,H),O===null?D=K:O.sibling=K,O=K,z=ie}if(H===T.length)return i(y,z),yt&&io(y,H),D;if(z===null){for(;H<T.length;H++)z=u(y,T[H],C),z!==null&&(_=s(z,_,H),O===null?D=z:O.sibling=z,O=z);return yt&&io(y,H),D}for(z=r(y,z);H<T.length;H++)ie=m(z,y,H,T[H],C),ie!==null&&(e&&ie.alternate!==null&&z.delete(ie.key===null?H:ie.key),_=s(ie,_,H),O===null?D=ie:O.sibling=ie,O=ie);return e&&z.forEach(function(ge){return t(y,ge)}),yt&&io(y,H),D}function w(y,_,T,C){var D=il(T);if(typeof D!="function")throw Error(J(150));if(T=D.call(T),T==null)throw Error(J(151));for(var O=D=null,z=_,H=_=0,ie=null,K=T.next();z!==null&&!K.done;H++,K=T.next()){z.index>H?(ie=z,z=null):ie=z.sibling;var ge=g(y,z,K.value,C);if(ge===null){z===null&&(z=ie);break}e&&z&&ge.alternate===null&&t(y,z),_=s(ge,_,H),O===null?D=ge:O.sibling=ge,O=ge,z=ie}if(K.done)return i(y,z),yt&&io(y,H),D;if(z===null){for(;!K.done;H++,K=T.next())K=u(y,K.value,C),K!==null&&(_=s(K,_,H),O===null?D=K:O.sibling=K,O=K);return yt&&io(y,H),D}for(z=r(y,z);!K.done;H++,K=T.next())K=m(z,y,H,K.value,C),K!==null&&(e&&K.alternate!==null&&z.delete(K.key===null?H:K.key),_=s(K,_,H),O===null?D=K:O.sibling=K,O=K);return e&&z.forEach(function(He){return t(y,He)}),yt&&io(y,H),D}function S(y,_,T,C){if(typeof T=="object"&&T!==null&&T.type===Bc&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ip:e:{for(var D=T.key,O=_;O!==null;){if(O.key===D){if(D=T.type,D===Bc){if(O.tag===7){i(y,O.sibling),_=n(O,T.props.children),_.return=y,y=_;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ta&&fS(D)===O.type){i(y,O.sibling),_=n(O,T.props),_.ref=ol(y,O,T),_.return=y,y=_;break e}i(y,O);break}else t(y,O);O=O.sibling}T.type===Bc?(_=Oo(T.props.children,y.mode,C,T.key),_.return=y,y=_):(C=Oh(T.type,T.key,T.props,null,y.mode,C),C.ref=ol(y,_,T),C.return=y,y=C)}return a(y);case zc:e:{for(O=T.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){i(y,_.sibling),_=n(_,T.children||[]),_.return=y,y=_;break e}else{i(y,_);break}else t(y,_);_=_.sibling}_=nv(T,y.mode,C),_.return=y,y=_}return a(y);case ta:return O=T._init,S(y,_,O(T._payload),C)}if(Ul(T))return f(y,_,T,C);if(il(T))return w(y,_,T,C);Fp(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(i(y,_.sibling),_=n(_,T),_.return=y,y=_):(i(y,_),_=rv(T,y.mode,C),_.return=y,y=_),a(y)):i(y,_)}return S}var Td=rC(!0),nC=rC(!1),ap={},$n=Da(ap),Mu=Da(ap),Du=Da(ap);function Po(e){if(e===ap)throw Error(J(174));return e}function P_(e,t){switch(st(Du,t),st(Mu,e),st($n,ap),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$y(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$y(t,e)}mt($n),st($n,t)}function kd(){mt($n),mt(Mu),mt(Du)}function sC(e){Po(Du.current);var t=Po($n.current),i=$y(t,e.type);t!==i&&(st(Mu,e),st($n,i))}function C_(e){Mu.current===e&&(mt($n),mt(Mu))}var Et=Da(0);function Cg(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qf=[];function R_(){for(var e=0;e<Qf.length;e++)Qf[e]._workInProgressVersionPrimary=null;Qf.length=0}var Ch=xs.ReactCurrentDispatcher,Zf=xs.ReactCurrentBatchConfig,$o=0,Tt=null,ni=null,li=null,Rg=!1,au=!1,Lu=0,rL=0;function Ei(){throw Error(J(321))}function x_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!mn(e[i],t[i]))return!1;return!0}function I_(e,t,i,r,n,s){if($o=s,Tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ch.current=e===null||e.memoizedState===null?oL:cL,e=i(r,n),au){s=0;do{if(au=!1,Lu=0,25<=s)throw Error(J(301));s+=1,li=ni=null,t.updateQueue=null,Ch.current=dL,e=i(r,n)}while(au)}if(Ch.current=xg,t=ni!==null&&ni.next!==null,$o=0,li=ni=Tt=null,Rg=!1,t)throw Error(J(300));return e}function A_(){var e=Lu!==0;return Lu=0,e}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Tt.memoizedState=li=e:li=li.next=e,li}function $r(){if(ni===null){var e=Tt.alternate;e=e!==null?e.memoizedState:null}else e=ni.next;var t=li===null?Tt.memoizedState:li.next;if(t!==null)li=t,ni=e;else{if(e===null)throw Error(J(310));ni=e,e={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},li===null?Tt.memoizedState=li=e:li=li.next=e}return li}function Nu(e,t){return typeof t=="function"?t(e):t}function Xf(e){var t=$r(),i=t.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=e;var r=ni,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var o=a=null,c=null,d=s;do{var l=d.lane;if(($o&l)===l)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:l,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,a=r):c=c.next=u,Tt.lanes|=l,Vo|=l}d=d.next}while(d!==null&&d!==s);c===null?a=r:c.next=o,mn(r,t.memoizedState)||(Qi=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do s=n.lane,Tt.lanes|=s,Vo|=s,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function ev(e){var t=$r(),i=t.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,s=t.memoizedState;if(n!==null){i.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);mn(s,t.memoizedState)||(Qi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function aC(){}function oC(e,t){var i=Tt,r=$r(),n=t(),s=!mn(r.memoizedState,n);if(s&&(r.memoizedState=n,Qi=!0),r=r.queue,O_(lC.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||li!==null&&li.memoizedState.tag&1){if(i.flags|=2048,Uu(9,dC.bind(null,i,r,n,t),void 0,null),pi===null)throw Error(J(349));($o&30)!==0||cC(i,t,n)}return n}function cC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Tt.updateQueue,t===null?(t={lastEffect:null,stores:null},Tt.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function dC(e,t,i,r){t.value=i,t.getSnapshot=r,uC(t)&&pC(e)}function lC(e,t,i){return i(function(){uC(t)&&pC(e)})}function uC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!mn(e,i)}catch{return!0}}function pC(e){var t=Es(e,1);t!==null&&pn(t,e,1,-1)}function vS(e){var t=An();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:e},t.queue=e,e=e.dispatch=aL.bind(null,Tt,e),[t.memoizedState,e]}function Uu(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=Tt.updateQueue,t===null?(t={lastEffect:null,stores:null},Tt.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function hC(){return $r().memoizedState}function Rh(e,t,i,r){var n=An();Tt.flags|=e,n.memoizedState=Uu(1|t,i,void 0,r===void 0?null:r)}function Im(e,t,i,r){var n=$r();r=r===void 0?null:r;var s=void 0;if(ni!==null){var a=ni.memoizedState;if(s=a.destroy,r!==null&&x_(r,a.deps)){n.memoizedState=Uu(t,i,s,r);return}}Tt.flags|=e,n.memoizedState=Uu(1|t,i,s,r)}function yS(e,t){return Rh(8390656,8,e,t)}function O_(e,t){return Im(2048,8,e,t)}function gC(e,t){return Im(4,2,e,t)}function mC(e,t){return Im(4,4,e,t)}function fC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vC(e,t,i){return i=i!=null?i.concat([e]):null,Im(4,4,fC.bind(null,t,e),i)}function M_(){}function yC(e,t){var i=$r();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&x_(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function _C(e,t){var i=$r();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&x_(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function bC(e,t,i){return($o&21)===0?(e.baseState&&(e.baseState=!1,Qi=!0),e.memoizedState=i):(mn(i,t)||(i=E2(),Tt.lanes|=i,Vo|=i,e.baseState=!0),t)}function nL(e,t){var i=Ye;Ye=i!==0&&4>i?i:4,e(!0);var r=Zf.transition;Zf.transition={};try{e(!1),t()}finally{Ye=i,Zf.transition=r}}function wC(){return $r().memoizedState}function sL(e,t,i){var r=Sa(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},SC(e))EC(t,i);else if(i=X2(e,t,i,r),i!==null){var n=Fi();pn(i,e,r,n),TC(i,t,r)}}function aL(e,t,i){var r=Sa(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(SC(e))EC(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,i);if(n.hasEagerState=!0,n.eagerState=o,mn(o,a)){var c=t.interleaved;c===null?(n.next=n,T_(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}i=X2(e,t,n,r),i!==null&&(n=Fi(),pn(i,e,r,n),TC(i,t,r))}}function SC(e){var t=e.alternate;return e===Tt||t!==null&&t===Tt}function EC(e,t){au=Rg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function TC(e,t,i){if((i&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,l_(e,i)}}var xg={readContext:jr,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},oL={readContext:jr,useCallback:function(e,t){return An().memoizedState=[e,t===void 0?null:t],e},useContext:jr,useEffect:yS,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Rh(4194308,4,fC.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Rh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rh(4,2,e,t)},useMemo:function(e,t){var i=An();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=An();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sL.bind(null,Tt,e),[r.memoizedState,e]},useRef:function(e){var t=An();return e={current:e},t.memoizedState=e},useState:vS,useDebugValue:M_,useDeferredValue:function(e){return An().memoizedState=e},useTransition:function(){var e=vS(!1),t=e[0];return e=nL.bind(null,e[1]),An().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=Tt,n=An();if(yt){if(i===void 0)throw Error(J(407));i=i()}else{if(i=t(),pi===null)throw Error(J(349));($o&30)!==0||cC(r,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,yS(lC.bind(null,r,s,e),[e]),r.flags|=2048,Uu(9,dC.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=An(),t=pi.identifierPrefix;if(yt){var i=ms,r=gs;i=(r&~(1<<32-un(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Lu++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=rL++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cL={readContext:jr,useCallback:yC,useContext:jr,useEffect:O_,useImperativeHandle:vC,useInsertionEffect:gC,useLayoutEffect:mC,useMemo:_C,useReducer:Xf,useRef:hC,useState:function(){return Xf(Nu)},useDebugValue:M_,useDeferredValue:function(e){var t=$r();return bC(t,ni.memoizedState,e)},useTransition:function(){var e=Xf(Nu)[0],t=$r().memoizedState;return[e,t]},useMutableSource:aC,useSyncExternalStore:oC,useId:wC,unstable_isNewReconciler:!1},dL={readContext:jr,useCallback:yC,useContext:jr,useEffect:O_,useImperativeHandle:vC,useInsertionEffect:gC,useLayoutEffect:mC,useMemo:_C,useReducer:ev,useRef:hC,useState:function(){return ev(Nu)},useDebugValue:M_,useDeferredValue:function(e){var t=$r();return ni===null?t.memoizedState=e:bC(t,ni.memoizedState,e)},useTransition:function(){var e=ev(Nu)[0],t=$r().memoizedState;return[e,t]},useMutableSource:aC,useSyncExternalStore:oC,useId:wC,unstable_isNewReconciler:!1};function Pd(e,t){try{var i="",r=t;do i+=U3(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function tv(e,t,i){return{value:e,source:null,stack:i!=null?i:null,digest:t!=null?t:null}}function c0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var lL=typeof WeakMap=="function"?WeakMap:Map;function kC(e,t,i){i=_s(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){Ag||(Ag=!0,y0=r),c0(e,t)},i}function PC(e,t,i){i=_s(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){c0(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){c0(e,t),typeof r!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),i}function _S(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new lL;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=TL.bind(null,e,t,i),t.then(e,e))}function bS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wS(e,t,i,r,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=_s(-1,1),t.tag=2,ba(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var uL=xs.ReactCurrentOwner,Qi=!1;function Vi(e,t,i,r){t.child=e===null?nC(t,null,i,r):Td(t,e.child,i,r)}function SS(e,t,i,r,n){i=i.render;var s=t.ref;return od(t,n),r=I_(e,t,i,r,s,n),i=A_(),e!==null&&!Qi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ts(e,t,n)):(yt&&i&&y_(t),t.flags|=1,Vi(e,t,r,n),t.child)}function ES(e,t,i,r,n){if(e===null){var s=i.type;return typeof s=="function"&&!F_(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,CC(e,t,s,r,n)):(e=Oh(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var a=s.memoizedProps;if(i=i.compare,i=i!==null?i:xu,i(a,r)&&e.ref===t.ref)return Ts(e,t,n)}return t.flags|=1,e=Ea(s,r),e.ref=t.ref,e.return=t,t.child=e}function CC(e,t,i,r,n){if(e!==null){var s=e.memoizedProps;if(xu(s,r)&&e.ref===t.ref)if(Qi=!1,t.pendingProps=r=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(Qi=!0);else return t.lanes=e.lanes,Ts(e,t,n)}return d0(e,t,i,r,n)}function RC(e,t,i){var r=t.pendingProps,n=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Xc,gr),gr|=i;else{if((i&1073741824)===0)return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,st(Xc,gr),gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,st(Xc,gr),gr|=r}else s!==null?(r=s.baseLanes|i,t.memoizedState=null):r=i,st(Xc,gr),gr|=r;return Vi(e,t,n,i),t.child}function xC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function d0(e,t,i,r,n){var s=tr(i)?Uo:Mi.current;return s=Sd(t,s),od(t,n),i=I_(e,t,i,r,s,n),r=A_(),e!==null&&!Qi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ts(e,t,n)):(yt&&r&&y_(t),t.flags|=1,Vi(e,t,i,n),t.child)}function TS(e,t,i,r,n){if(tr(i)){var s=!0;wg(t)}else s=!1;if(od(t,n),t.stateNode===null)xh(e,t),iC(t,i,r),o0(t,i,r,n),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,d=i.contextType;typeof d=="object"&&d!==null?d=jr(d):(d=tr(i)?Uo:Mi.current,d=Sd(t,d));var l=i.getDerivedStateFromProps,u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==d)&&mS(t,a,r,d),ia=!1;var g=t.memoizedState;a.state=g,Pg(t,r,a,n),c=t.memoizedState,o!==r||g!==c||er.current||ia?(typeof l=="function"&&(a0(t,i,l,r),c=t.memoizedState),(o=ia||gS(t,i,o,r,g,c,d))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,eC(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Qr(t.type,o),a.props=d,u=t.pendingProps,g=a.context,c=i.contextType,typeof c=="object"&&c!==null?c=jr(c):(c=tr(i)?Uo:Mi.current,c=Sd(t,c));var m=i.getDerivedStateFromProps;(l=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||g!==c)&&mS(t,a,r,c),ia=!1,g=t.memoizedState,a.state=g,Pg(t,r,a,n);var f=t.memoizedState;o!==u||g!==f||er.current||ia?(typeof m=="function"&&(a0(t,i,m,r),f=t.memoizedState),(d=ia||gS(t,i,d,r,g,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return l0(e,t,i,r,s,n)}function l0(e,t,i,r,n,s){xC(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return n&&dS(t,i,!1),Ts(e,t,s);r=t.stateNode,uL.current=t;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Td(t,e.child,null,s),t.child=Td(t,null,o,s)):Vi(e,t,o,s),t.memoizedState=r.state,n&&dS(t,i,!0),t.child}function IC(e){var t=e.stateNode;t.pendingContext?cS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cS(e,t.context,!1),P_(e,t.containerInfo)}function kS(e,t,i,r,n){return Ed(),b_(n),t.flags|=256,Vi(e,t,i,r),t.child}var u0={dehydrated:null,treeContext:null,retryLane:0};function p0(e){return{baseLanes:e,cachePool:null,transitions:null}}function AC(e,t,i){var r=t.pendingProps,n=Et.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),st(Et,n&1),e===null)return n0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Mm(a,r,0,null),e=Oo(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=p0(i),t.memoizedState=u0,e):D_(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return pL(e,t,a,r,o,n,i);if(s){s=r.fallback,a=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ea(n,c),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=Ea(o,s):(s=Oo(s,a,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?p0(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~i,t.memoizedState=u0,r}return s=e.child,e=s.sibling,r=Ea(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function D_(e,t){return t=Mm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zp(e,t,i,r){return r!==null&&b_(r),Td(t,e.child,null,i),e=D_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pL(e,t,i,r,n,s,a){if(i)return t.flags&256?(t.flags&=-257,r=tv(Error(J(422))),zp(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,n=t.mode,r=Mm({mode:"visible",children:r.children},n,0,null),s=Oo(s,n,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&Td(t,e.child,null,a),t.child.memoizedState=p0(a),t.memoizedState=u0,s);if((t.mode&1)===0)return zp(e,t,a,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(J(419)),r=tv(s,r,void 0),zp(e,t,a,r)}if(o=(a&e.childLanes)!==0,Qi||o){if(r=pi,r!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(r.suspendedLanes|a))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Es(e,n),pn(r,e,n,-1))}return V_(),r=tv(Error(J(421))),zp(e,t,a,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=kL.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,yr=_a(n.nextSibling),_r=t,yt=!0,rn=null,e!==null&&(Cr[Rr++]=gs,Cr[Rr++]=ms,Cr[Rr++]=jo,gs=e.id,ms=e.overflow,jo=t),t=D_(t,r.children),t.flags|=4096,t)}function PS(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),s0(e.return,t,i)}function iv(e,t,i,r,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function OC(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(Vi(e,t,r.children,i),r=Et.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&PS(e,i,t);else if(e.tag===19)PS(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(st(Et,r),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Cg(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),iv(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Cg(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}iv(t,!0,i,null,s);break;case"together":iv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xh(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ts(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,i=Ea(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ea(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function hL(e,t,i){switch(t.tag){case 3:IC(t),Ed();break;case 5:sC(t);break;case 1:tr(t.type)&&wg(t);break;case 4:P_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;st(Tg,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(st(Et,Et.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?AC(e,t,i):(st(Et,Et.current&1),e=Ts(e,t,i),e!==null?e.sibling:null);st(Et,Et.current&1);break;case 19:if(r=(i&t.childLanes)!==0,(e.flags&128)!==0){if(r)return OC(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),st(Et,Et.current),r)break;return null;case 22:case 23:return t.lanes=0,RC(e,t,i)}return Ts(e,t,i)}var MC,h0,DC,LC;MC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};h0=function(){};DC=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,Po($n.current);var s=null;switch(i){case"input":n=Ly(e,n),r=Ly(e,r),s=[];break;case"select":n=kt({},n,{value:void 0}),r=kt({},r,{value:void 0}),s=[];break;case"textarea":n=jy(e,n),r=jy(e,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_g)}Vy(i,r);var a;i=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Su.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(s||(s=[]),s.push(d,i)),i=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Su.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&dt("scroll",e),s||o===c||(s=[])):(s=s||[]).push(d,c))}i&&(s=s||[]).push("style",i);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};LC=function(e,t,i,r){i!==r&&(t.flags|=4)};function cl(e,t){if(!yt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ti(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function gL(e,t,i){var r=t.pendingProps;switch(__(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(t),null;case 1:return tr(t.type)&&bg(),Ti(t),null;case 3:return r=t.stateNode,kd(),mt(er),mt(Mi),R_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,rn!==null&&(w0(rn),rn=null))),h0(e,t),Ti(t),null;case 5:C_(t);var n=Po(Du.current);if(i=t.type,e!==null&&t.stateNode!=null)DC(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Ti(t),null}if(e=Po($n.current),Vp(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[Nn]=t,r[Ou]=s,e=(t.mode&1)!==0,i){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(n=0;n<$l.length;n++)dt($l[n],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Lw(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":Uw(r,s),dt("invalid",r)}Vy(i,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&$p(r.textContent,o,e),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&$p(r.textContent,o,e),n=["children",""+o]):Su.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&dt("scroll",r)}switch(i){case"input":Ap(r),Nw(r,s,!0);break;case"textarea":Ap(r),jw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=_g)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=c2(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(i,{is:r.is}):(e=a.createElement(i),i==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,i),e[Nn]=t,e[Ou]=r,MC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Fy(i,r),i){case"dialog":dt("cancel",e),dt("close",e),n=r;break;case"iframe":case"object":case"embed":dt("load",e),n=r;break;case"video":case"audio":for(n=0;n<$l.length;n++)dt($l[n],e);n=r;break;case"source":dt("error",e),n=r;break;case"img":case"image":case"link":dt("error",e),dt("load",e),n=r;break;case"details":dt("toggle",e),n=r;break;case"input":Lw(e,r),n=Ly(e,r),dt("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=kt({},r,{value:void 0}),dt("invalid",e);break;case"textarea":Uw(e,r),n=jy(e,r),dt("invalid",e);break;default:n=r}Vy(i,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?u2(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&d2(e,c)):s==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&Eu(e,c):typeof c=="number"&&Eu(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Su.hasOwnProperty(s)?c!=null&&s==="onScroll"&&dt("scroll",e):c!=null&&n_(e,s,c,a))}switch(i){case"input":Ap(e),Nw(e,r,!1);break;case"textarea":Ap(e),jw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ca(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?rd(e,!!r.multiple,s,!1):r.defaultValue!=null&&rd(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=_g)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ti(t),null;case 6:if(e&&t.stateNode!=null)LC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(i=Po(Du.current),Po($n.current),Vp(t)){if(r=t.stateNode,i=t.memoizedProps,r[Nn]=t,(s=r.nodeValue!==i)&&(e=_r,e!==null))switch(e.tag){case 3:$p(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$p(r.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[Nn]=t,t.stateNode=r}return Ti(t),null;case 13:if(mt(Et),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yt&&yr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Z2(),Ed(),t.flags|=98560,s=!1;else if(s=Vp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(J(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Nn]=t}else Ed(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ti(t),s=!1}else rn!==null&&(w0(rn),rn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Et.current&1)!==0?si===0&&(si=3):V_())),t.updateQueue!==null&&(t.flags|=4),Ti(t),null);case 4:return kd(),h0(e,t),e===null&&Iu(t.stateNode.containerInfo),Ti(t),null;case 10:return E_(t.type._context),Ti(t),null;case 17:return tr(t.type)&&bg(),Ti(t),null;case 19:if(mt(Et),s=t.memoizedState,s===null)return Ti(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)cl(s,!1);else{if(si!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=Cg(e),a!==null){for(t.flags|=128,cl(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)s=i,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return st(Et,Et.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ut()>Cd&&(t.flags|=128,r=!0,cl(s,!1),t.lanes=4194304)}else{if(!r)if(e=Cg(a),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),cl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!yt)return Ti(t),null}else 2*Ut()-s.renderingStartTime>Cd&&i!==1073741824&&(t.flags|=128,r=!0,cl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(i=s.last,i!==null?i.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ut(),t.sibling=null,i=Et.current,st(Et,r?i&1|2:i&1),t):(Ti(t),null);case 22:case 23:return $_(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(gr&1073741824)!==0&&(Ti(t),t.subtreeFlags&6&&(t.flags|=8192)):Ti(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function mL(e,t){switch(__(t),t.tag){case 1:return tr(t.type)&&bg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kd(),mt(er),mt(Mi),R_(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return C_(t),null;case 13:if(mt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Ed()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mt(Et),null;case 4:return kd(),null;case 10:return E_(t.type._context),null;case 22:case 23:return $_(),null;case 24:return null;default:return null}}var Bp=!1,xi=!1,fL=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Zc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){It(e,t,r)}else i.current=null}function g0(e,t,i){try{i()}catch(r){It(e,t,r)}}var CS=!1;function vL(e,t){if(Qy=fg,e=$2(),v_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var a=0,o=-1,c=-1,d=0,l=0,u=e,g=null;t:for(;;){for(var m;u!==i||n!==0&&u.nodeType!==3||(o=a+n),u!==s||r!==0&&u.nodeType!==3||(c=a+r),u.nodeType===3&&(a+=u.nodeValue.length),(m=u.firstChild)!==null;)g=u,u=m;for(;;){if(u===e)break t;if(g===i&&++d===n&&(o=a),g===s&&++l===r&&(c=a),(m=u.nextSibling)!==null)break;u=g,g=u.parentNode}u=m}i=o===-1||c===-1?null:{start:o,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zy={focusedElem:e,selectionRange:i},fg=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var f=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var w=f.memoizedProps,S=f.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:Qr(t.type,w),S);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(C){It(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return f=CS,CS=!1,f}function ou(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&g0(t,i,s)}n=n.next}while(n!==r)}}function Am(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function m0(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function NC(e){var t=e.alternate;t!==null&&(e.alternate=null,NC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nn],delete t[Ou],delete t[t0],delete t[XD],delete t[eL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UC(e){return e.tag===5||e.tag===3||e.tag===4}function RS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function f0(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=_g));else if(r!==4&&(e=e.child,e!==null))for(f0(e,t,i),e=e.sibling;e!==null;)f0(e,t,i),e=e.sibling}function v0(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(v0(e,t,i),e=e.sibling;e!==null;)v0(e,t,i),e=e.sibling}var yi=null,Zr=!1;function Us(e,t,i){for(i=i.child;i!==null;)jC(e,t,i),i=i.sibling}function jC(e,t,i){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Em,i)}catch{}switch(i.tag){case 5:xi||Zc(i,t);case 6:var r=yi,n=Zr;yi=null,Us(e,t,i),yi=r,Zr=n,yi!==null&&(Zr?(e=yi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):yi.removeChild(i.stateNode));break;case 18:yi!==null&&(Zr?(e=yi,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),Cu(e)):Kf(yi,i.stateNode));break;case 4:r=yi,n=Zr,yi=i.stateNode.containerInfo,Zr=!0,Us(e,t,i),yi=r,Zr=n;break;case 0:case 11:case 14:case 15:if(!xi&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&((s&2)!==0||(s&4)!==0)&&g0(i,t,a),n=n.next}while(n!==r)}Us(e,t,i);break;case 1:if(!xi&&(Zc(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(o){It(i,t,o)}Us(e,t,i);break;case 21:Us(e,t,i);break;case 22:i.mode&1?(xi=(r=xi)||i.memoizedState!==null,Us(e,t,i),xi=r):Us(e,t,i);break;default:Us(e,t,i)}}function xS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new fL),t.forEach(function(r){var n=PL.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function Hr(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:yi=o.stateNode,Zr=!1;break e;case 3:yi=o.stateNode.containerInfo,Zr=!0;break e;case 4:yi=o.stateNode.containerInfo,Zr=!0;break e}o=o.return}if(yi===null)throw Error(J(160));jC(s,a,n),yi=null,Zr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){It(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$C(t,e),t=t.sibling}function $C(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hr(t,e),Sn(e),r&4){try{ou(3,e,e.return),Am(3,e)}catch(w){It(e,e.return,w)}try{ou(5,e,e.return)}catch(w){It(e,e.return,w)}}break;case 1:Hr(t,e),Sn(e),r&512&&i!==null&&Zc(i,i.return);break;case 5:if(Hr(t,e),Sn(e),r&512&&i!==null&&Zc(i,i.return),e.flags&32){var n=e.stateNode;try{Eu(n,"")}catch(w){It(e,e.return,w)}}if(r&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=i!==null?i.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&a2(n,s),Fy(o,a);var d=Fy(o,s);for(a=0;a<c.length;a+=2){var l=c[a],u=c[a+1];l==="style"?u2(n,u):l==="dangerouslySetInnerHTML"?d2(n,u):l==="children"?Eu(n,u):n_(n,l,u,d)}switch(o){case"input":Ny(n,s);break;case"textarea":o2(n,s);break;case"select":var g=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?rd(n,!!s.multiple,m,!1):g!==!!s.multiple&&(s.defaultValue!=null?rd(n,!!s.multiple,s.defaultValue,!0):rd(n,!!s.multiple,s.multiple?[]:"",!1))}n[Ou]=s}catch(w){It(e,e.return,w)}}break;case 6:if(Hr(t,e),Sn(e),r&4){if(e.stateNode===null)throw Error(J(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(w){It(e,e.return,w)}}break;case 3:if(Hr(t,e),Sn(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Cu(t.containerInfo)}catch(w){It(e,e.return,w)}break;case 4:Hr(t,e),Sn(e);break;case 13:Hr(t,e),Sn(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(U_=Ut())),r&4&&xS(e);break;case 22:if(l=i!==null&&i.memoizedState!==null,e.mode&1?(xi=(d=xi)||l,Hr(t,e),xi=d):Hr(t,e),Sn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!l&&(e.mode&1)!==0)for(Z=e,l=e.child;l!==null;){for(u=Z=l;Z!==null;){switch(g=Z,m=g.child,g.tag){case 0:case 11:case 14:case 15:ou(4,g,g.return);break;case 1:Zc(g,g.return);var f=g.stateNode;if(typeof f.componentWillUnmount=="function"){r=g,i=g.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(w){It(r,i,w)}}break;case 5:Zc(g,g.return);break;case 22:if(g.memoizedState!==null){AS(u);continue}}m!==null?(m.return=g,Z=m):AS(u)}l=l.sibling}e:for(l=null,u=e;;){if(u.tag===5){if(l===null){l=u;try{n=u.stateNode,d?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,c=u.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=l2("display",a))}catch(w){It(e,e.return,w)}}}else if(u.tag===6){if(l===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(w){It(e,e.return,w)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;l===u&&(l=null),u=u.return}l===u&&(l=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Hr(t,e),Sn(e),r&4&&xS(e);break;case 21:break;default:Hr(t,e),Sn(e)}}function Sn(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(UC(i)){var r=i;break e}i=i.return}throw Error(J(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Eu(n,""),r.flags&=-33);var s=RS(e);v0(e,s,n);break;case 3:case 4:var a=r.stateNode.containerInfo,o=RS(e);f0(e,o,a);break;default:throw Error(J(161))}}catch(c){It(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yL(e,t,i){Z=e,VC(e)}function VC(e,t,i){for(var r=(e.mode&1)!==0;Z!==null;){var n=Z,s=n.child;if(n.tag===22&&r){var a=n.memoizedState!==null||Bp;if(!a){var o=n.alternate,c=o!==null&&o.memoizedState!==null||xi;o=Bp;var d=xi;if(Bp=a,(xi=c)&&!d)for(Z=n;Z!==null;)a=Z,c=a.child,a.tag===22&&a.memoizedState!==null?OS(n):c!==null?(c.return=a,Z=c):OS(n);for(;s!==null;)Z=s,VC(s),s=s.sibling;Z=n,Bp=o,xi=d}IS(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,Z=s):IS(e)}}function IS(e){for(;Z!==null;){var t=Z;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:xi||Am(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xi)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:Qr(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&hS(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}hS(t,a,i)}break;case 5:var o=t.stateNode;if(i===null&&t.flags&4){i=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var l=d.memoizedState;if(l!==null){var u=l.dehydrated;u!==null&&Cu(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}xi||t.flags&512&&m0(t)}catch(g){It(t,t.return,g)}}if(t===e){Z=null;break}if(i=t.sibling,i!==null){i.return=t.return,Z=i;break}Z=t.return}}function AS(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Z=i;break}Z=t.return}}function OS(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Am(4,t)}catch(c){It(t,i,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){It(t,n,c)}}var s=t.return;try{m0(t)}catch(c){It(t,s,c)}break;case 5:var a=t.return;try{m0(t)}catch(c){It(t,a,c)}}}catch(c){It(t,t.return,c)}if(t===e){Z=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Z=o;break}Z=t.return}}var _L=Math.ceil,Ig=xs.ReactCurrentDispatcher,L_=xs.ReactCurrentOwner,Dr=xs.ReactCurrentBatchConfig,Ve=0,pi=null,Kt=null,bi=0,gr=0,Xc=Da(0),si=0,ju=null,Vo=0,Om=0,N_=0,cu=null,Ji=null,U_=0,Cd=1/0,rs=null,Ag=!1,y0=null,wa=null,Hp=!1,ha=null,Og=0,du=0,_0=null,Ih=-1,Ah=0;function Fi(){return(Ve&6)!==0?Ut():Ih!==-1?Ih:Ih=Ut()}function Sa(e){return(e.mode&1)===0?1:(Ve&2)!==0&&bi!==0?bi&-bi:iL.transition!==null?(Ah===0&&(Ah=E2()),Ah):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:I2(e.type)),e)}function pn(e,t,i,r){if(50<du)throw du=0,_0=null,Error(J(185));rp(e,i,r),((Ve&2)===0||e!==pi)&&(e===pi&&((Ve&2)===0&&(Om|=i),si===4&&aa(e,bi)),ir(e,r),i===1&&Ve===0&&(t.mode&1)===0&&(Cd=Ut()+500,Rm&&La()))}function ir(e,t){var i=e.callbackNode;iD(e,t);var r=mg(e,e===pi?bi:0);if(r===0)i!==null&&Fw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&Fw(i),t===1)e.tag===0?tL(MS.bind(null,e)):K2(MS.bind(null,e)),QD(function(){(Ve&6)===0&&La()}),i=null;else{switch(T2(r)){case 1:i=d_;break;case 4:i=w2;break;case 16:i=gg;break;case 536870912:i=S2;break;default:i=gg}i=JC(i,FC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function FC(e,t){if(Ih=-1,Ah=0,(Ve&6)!==0)throw Error(J(327));var i=e.callbackNode;if(cd()&&e.callbackNode!==i)return null;var r=mg(e,e===pi?bi:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Mg(e,r);else{t=r;var n=Ve;Ve|=2;var s=BC();(pi!==e||bi!==t)&&(rs=null,Cd=Ut()+500,Ao(e,t));do try{SL();break}catch(o){zC(e,o)}while(1);S_(),Ig.current=s,Ve=n,Kt!==null?t=0:(pi=null,bi=0,t=si)}if(t!==0){if(t===2&&(n=Wy(e),n!==0&&(r=n,t=b0(e,n))),t===1)throw i=ju,Ao(e,0),aa(e,r),ir(e,Ut()),i;if(t===6)aa(e,r);else{if(n=e.current.alternate,(r&30)===0&&!bL(n)&&(t=Mg(e,r),t===2&&(s=Wy(e),s!==0&&(r=s,t=b0(e,s))),t===1))throw i=ju,Ao(e,0),aa(e,r),ir(e,Ut()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:ro(e,Ji,rs);break;case 3:if(aa(e,r),(r&130023424)===r&&(t=U_+500-Ut(),10<t)){if(mg(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){Fi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=e0(ro.bind(null,e,Ji,rs),t);break}ro(e,Ji,rs);break;case 4:if(aa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var a=31-un(r);s=1<<a,a=t[a],a>n&&(n=a),r&=~s}if(r=n,r=Ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_L(r/1960))-r,10<r){e.timeoutHandle=e0(ro.bind(null,e,Ji,rs),r);break}ro(e,Ji,rs);break;case 5:ro(e,Ji,rs);break;default:throw Error(J(329))}}}return ir(e,Ut()),e.callbackNode===i?FC.bind(null,e):null}function b0(e,t){var i=cu;return e.current.memoizedState.isDehydrated&&(Ao(e,t).flags|=256),e=Mg(e,t),e!==2&&(t=Ji,Ji=i,t!==null&&w0(t)),e}function w0(e){Ji===null?Ji=e:Ji.push.apply(Ji,e)}function bL(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!mn(s(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function aa(e,t){for(t&=~N_,t&=~Om,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-un(t),r=1<<i;e[i]=-1,t&=~r}}function MS(e){if((Ve&6)!==0)throw Error(J(327));cd();var t=mg(e,0);if((t&1)===0)return ir(e,Ut()),null;var i=Mg(e,t);if(e.tag!==0&&i===2){var r=Wy(e);r!==0&&(t=r,i=b0(e,r))}if(i===1)throw i=ju,Ao(e,0),aa(e,t),ir(e,Ut()),i;if(i===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ro(e,Ji,rs),ir(e,Ut()),null}function j_(e,t){var i=Ve;Ve|=1;try{return e(t)}finally{Ve=i,Ve===0&&(Cd=Ut()+500,Rm&&La())}}function Fo(e){ha!==null&&ha.tag===0&&(Ve&6)===0&&cd();var t=Ve;Ve|=1;var i=Dr.transition,r=Ye;try{if(Dr.transition=null,Ye=1,e)return e()}finally{Ye=r,Dr.transition=i,Ve=t,(Ve&6)===0&&La()}}function $_(){gr=Xc.current,mt(Xc)}function Ao(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,YD(i)),Kt!==null)for(i=Kt.return;i!==null;){var r=i;switch(__(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bg();break;case 3:kd(),mt(er),mt(Mi),R_();break;case 5:C_(r);break;case 4:kd();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:E_(r.type._context);break;case 22:case 23:$_()}i=i.return}if(pi=e,Kt=e=Ea(e.current,null),bi=gr=t,si=0,ju=null,N_=Om=Vo=0,Ji=cu=null,ko!==null){for(t=0;t<ko.length;t++)if(i=ko[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var a=s.next;s.next=n,r.next=a}i.pending=r}ko=null}return e}function zC(e,t){do{var i=Kt;try{if(S_(),Ch.current=xg,Rg){for(var r=Tt.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Rg=!1}if($o=0,li=ni=Tt=null,au=!1,Lu=0,L_.current=null,i===null||i.return===null){si=1,ju=t,Kt=null;break}e:{var s=e,a=i.return,o=i,c=t;if(t=bi,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,l=o,u=l.tag;if((l.mode&1)===0&&(u===0||u===11||u===15)){var g=l.alternate;g?(l.updateQueue=g.updateQueue,l.memoizedState=g.memoizedState,l.lanes=g.lanes):(l.updateQueue=null,l.memoizedState=null)}var m=bS(a);if(m!==null){m.flags&=-257,wS(m,a,o,s,t),m.mode&1&&_S(s,d,t),t=m,c=d;var f=t.updateQueue;if(f===null){var w=new Set;w.add(c),t.updateQueue=w}else f.add(c);break e}else{if((t&1)===0){_S(s,d,t),V_();break e}c=Error(J(426))}}else if(yt&&o.mode&1){var S=bS(a);if(S!==null){(S.flags&65536)===0&&(S.flags|=256),wS(S,a,o,s,t),b_(Pd(c,o));break e}}s=c=Pd(c,o),si!==4&&(si=2),cu===null?cu=[s]:cu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=kC(s,c,t);pS(s,y);break e;case 1:o=c;var _=s.type,T=s.stateNode;if((s.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(wa===null||!wa.has(T)))){s.flags|=65536,t&=-t,s.lanes|=t;var C=PC(s,o,t);pS(s,C);break e}}s=s.return}while(s!==null)}GC(i)}catch(D){t=D,Kt===i&&i!==null&&(Kt=i=i.return);continue}break}while(1)}function BC(){var e=Ig.current;return Ig.current=xg,e===null?xg:e}function V_(){(si===0||si===3||si===2)&&(si=4),pi===null||(Vo&268435455)===0&&(Om&268435455)===0||aa(pi,bi)}function Mg(e,t){var i=Ve;Ve|=2;var r=BC();(pi!==e||bi!==t)&&(rs=null,Ao(e,t));do try{wL();break}catch(n){zC(e,n)}while(1);if(S_(),Ve=i,Ig.current=r,Kt!==null)throw Error(J(261));return pi=null,bi=0,si}function wL(){for(;Kt!==null;)HC(Kt)}function SL(){for(;Kt!==null&&!q3();)HC(Kt)}function HC(e){var t=qC(e.alternate,e,gr);e.memoizedProps=e.pendingProps,t===null?GC(e):Kt=t,L_.current=null}function GC(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=gL(i,t,gr),i!==null){Kt=i;return}}else{if(i=mL(i,t),i!==null){i.flags&=32767,Kt=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{si=6,Kt=null;return}}if(t=t.sibling,t!==null){Kt=t;return}Kt=t=e}while(t!==null);si===0&&(si=5)}function ro(e,t,i){var r=Ye,n=Dr.transition;try{Dr.transition=null,Ye=1,EL(e,t,i,r)}finally{Dr.transition=n,Ye=r}return null}function EL(e,t,i,r){do cd();while(ha!==null);if((Ve&6)!==0)throw Error(J(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(rD(e,s),e===pi&&(Kt=pi=null,bi=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Hp||(Hp=!0,JC(gg,function(){return cd(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=Dr.transition,Dr.transition=null;var a=Ye;Ye=1;var o=Ve;Ve|=4,L_.current=null,vL(e,i),$C(i,e),BD(Zy),fg=!!Qy,Zy=Qy=null,e.current=i,yL(i),J3(),Ve=o,Ye=a,Dr.transition=s}else e.current=i;if(Hp&&(Hp=!1,ha=e,Og=n),s=e.pendingLanes,s===0&&(wa=null),Q3(i.stateNode),ir(e,Ut()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(Ag)throw Ag=!1,e=y0,y0=null,e;return(Og&1)!==0&&e.tag!==0&&cd(),s=e.pendingLanes,(s&1)!==0?e===_0?du++:(du=0,_0=e):du=0,La(),null}function cd(){if(ha!==null){var e=T2(Og),t=Dr.transition,i=Ye;try{if(Dr.transition=null,Ye=16>e?16:e,ha===null)var r=!1;else{if(e=ha,ha=null,Og=0,(Ve&6)!==0)throw Error(J(331));var n=Ve;for(Ve|=4,Z=e.current;Z!==null;){var s=Z,a=s.child;if((Z.flags&16)!==0){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Z=d;Z!==null;){var l=Z;switch(l.tag){case 0:case 11:case 15:ou(8,l,s)}var u=l.child;if(u!==null)u.return=l,Z=u;else for(;Z!==null;){l=Z;var g=l.sibling,m=l.return;if(NC(l),l===d){Z=null;break}if(g!==null){g.return=m,Z=g;break}Z=m}}}var f=s.alternate;if(f!==null){var w=f.child;if(w!==null){f.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}Z=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,Z=a;else e:for(;Z!==null;){if(s=Z,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:ou(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Z=y;break e}Z=s.return}}var _=e.current;for(Z=_;Z!==null;){a=Z;var T=a.child;if((a.subtreeFlags&2064)!==0&&T!==null)T.return=a,Z=T;else e:for(a=_;Z!==null;){if(o=Z,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:Am(9,o)}}catch(D){It(o,o.return,D)}if(o===a){Z=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Z=C;break e}Z=o.return}}if(Ve=n,La(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Em,e)}catch{}r=!0}return r}finally{Ye=i,Dr.transition=t}}return!1}function DS(e,t,i){t=Pd(i,t),t=kC(e,t,1),e=ba(e,t,1),t=Fi(),e!==null&&(rp(e,1,t),ir(e,t))}function It(e,t,i){if(e.tag===3)DS(e,e,i);else for(;t!==null;){if(t.tag===3){DS(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wa===null||!wa.has(r))){e=Pd(i,e),e=PC(t,e,1),t=ba(t,e,1),e=Fi(),t!==null&&(rp(t,1,e),ir(t,e));break}}t=t.return}}function TL(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=Fi(),e.pingedLanes|=e.suspendedLanes&i,pi===e&&(bi&i)===i&&(si===4||si===3&&(bi&130023424)===bi&&500>Ut()-U_?Ao(e,0):N_|=i),ir(e,t)}function WC(e,t){t===0&&((e.mode&1)===0?t=1:(t=Dp,Dp<<=1,(Dp&130023424)===0&&(Dp=4194304)));var i=Fi();e=Es(e,t),e!==null&&(rp(e,t,i),ir(e,i))}function kL(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),WC(e,i)}function PL(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),WC(e,i)}var qC;qC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||er.current)Qi=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return Qi=!1,hL(e,t,i);Qi=(e.flags&131072)!==0}else Qi=!1,yt&&(t.flags&1048576)!==0&&Y2(t,Eg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xh(e,t),e=t.pendingProps;var n=Sd(t,Mi.current);od(t,i),n=I_(null,t,r,e,n,i);var s=A_();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tr(r)?(s=!0,wg(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,k_(t),n.updater=xm,t.stateNode=n,n._reactInternals=t,o0(t,r,e,i),t=l0(null,t,r,!0,s,i)):(t.tag=0,yt&&s&&y_(t),Vi(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(xh(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=RL(r),e=Qr(r,e),n){case 0:t=d0(null,t,r,e,i);break e;case 1:t=TS(null,t,r,e,i);break e;case 11:t=SS(null,t,r,e,i);break e;case 14:t=ES(null,t,r,Qr(r.type,e),i);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Qr(r,n),d0(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Qr(r,n),TS(e,t,r,n,i);case 3:e:{if(IC(t),e===null)throw Error(J(387));r=t.pendingProps,s=t.memoizedState,n=s.element,eC(e,t),Pg(t,r,null,i);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Pd(Error(J(423)),t),t=kS(e,t,r,i,n);break e}else if(r!==n){n=Pd(Error(J(424)),t),t=kS(e,t,r,i,n);break e}else for(yr=_a(t.stateNode.containerInfo.firstChild),_r=t,yt=!0,rn=null,i=nC(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ed(),r===n){t=Ts(e,t,i);break e}Vi(e,t,r,i)}t=t.child}return t;case 5:return sC(t),e===null&&n0(t),r=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,Xy(r,n)?a=null:s!==null&&Xy(r,s)&&(t.flags|=32),xC(e,t),Vi(e,t,a,i),t.child;case 6:return e===null&&n0(t),null;case 13:return AC(e,t,i);case 4:return P_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Td(t,null,r,i):Vi(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Qr(r,n),SS(e,t,r,n,i);case 7:return Vi(e,t,t.pendingProps,i),t.child;case 8:return Vi(e,t,t.pendingProps.children,i),t.child;case 12:return Vi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,st(Tg,r._currentValue),r._currentValue=a,s!==null)if(mn(s.value,a)){if(s.children===n.children&&!er.current){t=Ts(e,t,i);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=_s(-1,i&-i),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var l=d.pending;l===null?c.next=c:(c.next=l.next,l.next=c),d.pending=c}}s.lanes|=i,c=s.alternate,c!==null&&(c.lanes|=i),s0(s.return,i,t),o.lanes|=i;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(J(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),s0(a,i,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Vi(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,od(t,i),n=jr(n),r=r(n),t.flags|=1,Vi(e,t,r,i),t.child;case 14:return r=t.type,n=Qr(r,t.pendingProps),n=Qr(r.type,n),ES(e,t,r,n,i);case 15:return CC(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Qr(r,n),xh(e,t),t.tag=1,tr(r)?(e=!0,wg(t)):e=!1,od(t,i),iC(t,r,n),o0(t,r,n,i),l0(null,t,r,!0,e,i);case 19:return OC(e,t,i);case 22:return RC(e,t,i)}throw Error(J(156,t.tag))};function JC(e,t){return b2(e,t)}function CL(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,i,r){return new CL(e,t,i,r)}function F_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RL(e){if(typeof e=="function")return F_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===a_)return 11;if(e===o_)return 14}return 2}function Ea(e,t){var i=e.alternate;return i===null?(i=Or(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Oh(e,t,i,r,n,s){var a=2;if(r=e,typeof e=="function")F_(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Bc:return Oo(i.children,n,s,t);case s_:a=8,n|=8;break;case Ay:return e=Or(12,i,t,n|2),e.elementType=Ay,e.lanes=s,e;case Oy:return e=Or(13,i,t,n),e.elementType=Oy,e.lanes=s,e;case My:return e=Or(19,i,t,n),e.elementType=My,e.lanes=s,e;case r2:return Mm(i,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case t2:a=10;break e;case i2:a=9;break e;case a_:a=11;break e;case o_:a=14;break e;case ta:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Or(a,i,t,n),t.elementType=e,t.type=r,t.lanes=s,t}function Oo(e,t,i,r){return e=Or(7,e,r,t),e.lanes=i,e}function Mm(e,t,i,r){return e=Or(22,e,r,t),e.elementType=r2,e.lanes=i,e.stateNode={isHidden:!1},e}function rv(e,t,i){return e=Or(6,e,null,t),e.lanes=i,e}function nv(e,t,i){return t=Or(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xL(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function z_(e,t,i,r,n,s,a,o,c){return e=new xL(e,t,i,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Or(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},k_(s),e}function IL(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function KC(e){if(!e)return Ra;e=e._reactInternals;e:{if(Yo(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var i=e.type;if(tr(i))return J2(e,i,t)}return t}function YC(e,t,i,r,n,s,a,o,c){return e=z_(i,r,!0,e,n,s,a,o,c),e.context=KC(null),i=e.current,r=Fi(),n=Sa(i),s=_s(r,n),s.callback=t!=null?t:null,ba(i,s,n),e.current.lanes=n,rp(e,n,r),ir(e,r),e}function Dm(e,t,i,r){var n=t.current,s=Fi(),a=Sa(n);return i=KC(i),t.context===null?t.context=i:t.pendingContext=i,t=_s(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ba(n,t,a),e!==null&&(pn(e,n,a,s),Ph(e,n,a)),a}function Dg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function LS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function B_(e,t){LS(e,t),(e=e.alternate)&&LS(e,t)}function AL(){return null}var QC=typeof reportError=="function"?reportError:function(e){console.error(e)};function H_(e){this._internalRoot=e}Lm.prototype.render=H_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Dm(e,t,null,null)};Lm.prototype.unmount=H_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fo(function(){Dm(null,e,null,null)}),t[Ss]=null}};function Lm(e){this._internalRoot=e}Lm.prototype.unstable_scheduleHydration=function(e){if(e){var t=C2();e={blockedOn:null,target:e,priority:t};for(var i=0;i<sa.length&&t!==0&&t<sa[i].priority;i++);sa.splice(i,0,e),i===0&&x2(e)}};function G_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function NS(){}function OL(e,t,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var d=Dg(a);s.call(d)}}var a=YC(t,r,e,0,null,!1,!1,"",NS);return e._reactRootContainer=a,e[Ss]=a.current,Iu(e.nodeType===8?e.parentNode:e),Fo(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var d=Dg(c);o.call(d)}}var c=z_(e,0,!1,null,null,!1,!1,"",NS);return e._reactRootContainer=c,e[Ss]=c.current,Iu(e.nodeType===8?e.parentNode:e),Fo(function(){Dm(t,c,i,r)}),c}function Um(e,t,i,r,n){var s=i._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var c=Dg(a);o.call(c)}}Dm(t,a,e,n)}else a=OL(i,t,e,n,r);return Dg(a)}k2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=jl(t.pendingLanes);i!==0&&(l_(t,i|1),ir(t,Ut()),(Ve&6)===0&&(Cd=Ut()+500,La()))}break;case 13:Fo(function(){var r=Es(e,1);if(r!==null){var n=Fi();pn(r,e,1,n)}}),B_(e,1)}};u_=function(e){if(e.tag===13){var t=Es(e,134217728);if(t!==null){var i=Fi();pn(t,e,134217728,i)}B_(e,134217728)}};P2=function(e){if(e.tag===13){var t=Sa(e),i=Es(e,t);if(i!==null){var r=Fi();pn(i,e,t,r)}B_(e,t)}};C2=function(){return Ye};R2=function(e,t){var i=Ye;try{return Ye=e,t()}finally{Ye=i}};By=function(e,t,i){switch(t){case"input":if(Ny(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=Cm(r);if(!n)throw Error(J(90));s2(r),Ny(r,n)}}}break;case"textarea":o2(e,i);break;case"select":t=i.value,t!=null&&rd(e,!!i.multiple,t,!1)}};g2=j_;m2=Fo;var ML={usingClientEntryPoint:!1,Events:[sp,qc,Cm,p2,h2,j_]},dl={findFiberByHostInstance:To,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},DL={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=y2(e),e===null?null:e.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||AL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gp.isDisabled&&Gp.supportsFiber)try{Em=Gp.inject(DL),jn=Gp}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ML;Sr.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G_(t))throw Error(J(200));return IL(e,t,null,i)};Sr.createRoot=function(e,t){if(!G_(e))throw Error(J(299));var i=!1,r="",n=QC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=z_(e,1,!1,null,null,i,!1,r,n),e[Ss]=t.current,Iu(e.nodeType===8?e.parentNode:e),new H_(t)};Sr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=y2(t),e=e===null?null:e.stateNode,e};Sr.flushSync=function(e){return Fo(e)};Sr.hydrate=function(e,t,i){if(!Nm(t))throw Error(J(200));return Um(null,e,t,!0,i)};Sr.hydrateRoot=function(e,t,i){if(!G_(e))throw Error(J(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",a=QC;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),t=YC(t,null,e,1,i!=null?i:null,n,!1,s,a),e[Ss]=t.current,Iu(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new Lm(t)};Sr.render=function(e,t,i){if(!Nm(t))throw Error(J(200));return Um(null,e,t,!1,i)};Sr.unmountComponentAtNode=function(e){if(!Nm(e))throw Error(J(40));return e._reactRootContainer?(Fo(function(){Um(null,null,e,!1,function(){e._reactRootContainer=null,e[Ss]=null})}),!0):!1};Sr.unstable_batchedUpdates=j_;Sr.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!Nm(i))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Um(e,t,i,!1,r)};Sr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=Sr})(BP);var US=BP.exports;xy.createRoot=US.createRoot,xy.hydrateRoot=US.hydrateRoot;var ZC={exports:{}},jm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL=bs.exports,NL=Symbol.for("react.element"),UL=Symbol.for("react.fragment"),jL=Object.prototype.hasOwnProperty,$L=LL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VL={key:!0,ref:!0,__self:!0,__source:!0};function XC(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)jL.call(t,r)&&!VL.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:NL,type:e,key:s,ref:a,props:n,_owner:$L.current}}jm.Fragment=UL;jm.jsx=XC;jm.jsxs=XC;(function(e){e.exports=jm})(ZC);const W_=ZC.exports.jsx,FL=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),eR=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),zL=(e,t,i={})=>{if(e instanceof Element){const r=BL(e.classList,t,i);r!==""&&(e.className=r),Object.keys(t).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const s=n.substring(2),a=s[0].toLowerCase()+s.substring(1);tR(a)||HL(e,a,t[n])}else e[n]=t[n],typeof t[n]==="string"&&e.setAttribute(eR(n),t[n])})}},BL=(e,t,i)=>{const r=t.className||t.class,n=i.className||i.class,s=sv(e),a=sv(r?r.split(" "):[]),o=sv(n?n.split(" "):[]),c=[];return s.forEach(d=>{a.has(d)?(c.push(d),a.delete(d)):o.has(d)||c.push(d)}),a.forEach(d=>c.push(d)),c.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const tR=e=>{if(typeof document>"u")return!0;{const t="on"+e;let i=t in document;if(!i){const r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return i}},HL=(e,t,i)=>{const r=e.__events||(e.__events={}),n=r[t];n&&e.removeEventListener(t,n),e.addEventListener(t,r[t]=function(a){i&&i.call(this,a)})},sv=e=>{const t=new Map;return e.forEach(i=>t.set(i,i)),t},GL=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},WL=(...e)=>t=>{e.forEach(i=>{GL(i,t)})},qL=(e,t)=>{const i=(r,n)=>W_(e,{...Object.assign({},r,{forwardedRef:n})});return i.displayName=t,t_.forwardRef(i)};var JL=globalThis&&globalThis.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};const KL=(e,t,i,r)=>{r!==void 0&&r();const n=FL(e),s=class extends t_.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){zL(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:c,style:d,className:l,ref:u}=a,g=JL(a,["children","forwardedRef","style","className","ref"]);let m=Object.keys(g).reduce((w,S)=>{const y=g[S];if(S.indexOf("on")===0&&S[2]===S[2].toUpperCase()){const _=S.substring(2).toLowerCase();typeof document<"u"&&tR(_)&&(w[S]=y)}else{const _=typeof y;(_==="string"||_==="boolean"||_==="number")&&(w[eR(S)]=y)}return w},{});i&&(m=i(this.props,m));const f=Object.assign(Object.assign({},m),{ref:WL(c,this.setComponentElRef),style:d});return bs.exports.createElement(e,f,o)}static get displayName(){return n}};return t&&(s.contextType=t),qL(s,n)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__rest;const YL="modulepreload",QL=function(e){return"/"+e},jS={},ZL=function(t,i,r){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=QL(s),s in jS)return;jS[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let l=n.length-1;l>=0;l--){const u=n[l];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":YL,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((l,u)=>{d.addEventListener("load",l),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},XL="dyte-ui-kit";let Mh,iR,rR=!1,S0=null,E0=!1;const ks=(e,t="")=>()=>{},e6=(e,t)=>()=>{},t6="{visibility:hidden}.hydrated{visibility:inherit}",$S="http://www.w3.org/1999/xlink",VS={},i6=e=>e!=null,q_=e=>(e=typeof e,e==="object"||e==="function"),p=(e,t,...i)=>{let r=null,n=null,s=!1,a=!1;const o=[],c=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!q_(r))&&(r=String(r)),s&&a?o[o.length-1].$text$+=r:o.push(s?Lg(null,r):r),a=s)};if(c(i),t){t.key&&(n=t.key);{const l=t.className||t.class;l&&(t.class=typeof l!="object"?l:Object.keys(l).filter(u=>l[u]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,o,n6);const d=Lg(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d.$key$=n,d},Lg=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i},M={},r6=e=>e&&e.$tag$===M,n6={forEach:(e,t)=>e.map(FS).forEach(t),map:(e,t)=>e.map(FS).map(t).map(s6)},FS=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),s6=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),p(e.vtag,i,...e.vchildren||[])}const t=Lg(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},a6=(e,t)=>e!=null&&!q_(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Is=e=>Na(e).$hostElement$,Q=(e,t,i)=>{const r=Is(e);return{emit:n=>nR(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},nR=(e,t,i)=>{const r=Ii.ce(t,i);return e.dispatchEvent(r),r},zS=new WeakMap,o6=(e,t,i)=>{let r=Ug.get(e);x6&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,Ug.set(e,r)},c6=(e,t,i,r)=>{let n=sR(t);const s=Ug.get(n);if(e=e.nodeType===11?e:Ta,s)if(typeof s=="string"){e=e.head||e;let a=zS.get(e),o;a||zS.set(e,a=new Set),a.has(n)||(o=Ta.createElement("style"),o.innerHTML=s,e.insertBefore(o,e.querySelector("link")),a&&a.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},d6=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=ks("attachStyles",t.$tagName$),s=c6(i.shadowRoot?i.shadowRoot:i.getRootNode(),t);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h")),n()},sR=(e,t)=>"sc-"+e.$tagName$,BS=(e,t,i,r,n,s)=>{if(i!==r){let a=qS(e,t),o=t.toLowerCase();if(t==="class"){const c=e.classList,d=HS(i),l=HS(r);c.remove(...d.filter(u=>u&&!l.includes(u))),c.add(...l.filter(u=>u&&!d.includes(u)))}else if(t==="style"){for(const c in i)(!r||r[c]==null)&&(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(const c in r)(!i||r[c]!==i[c])&&(c.includes("-")?e.style.setProperty(c,r[c]):e.style[c]=r[c])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!a&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):qS(op,o)?t=o.slice(2):t=o[2]+t.slice(3),i&&Ii.rel(e,t,i,!1),r&&Ii.ael(e,t,r,!1);else{const c=q_(r);if((a||c&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const l=r==null?"":r;t==="list"?a=!1:(i==null||e[t]!=l)&&(e[t]=l)}}catch{}let d=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS($S,t):e.removeAttribute(t)):(!a||s&4||n)&&!c&&(r=r===!0?"":r,d?e.setAttributeNS($S,t,r):e.setAttribute(t,r))}}},l6=/\s/,HS=e=>e?e.split(l6):[],aR=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||VS,a=t.$attrs$||VS;for(r in s)r in a||BS(n,r,s[r],void 0,i,t.$flags$);for(r in a)BS(n,r,s[r],a[r],i,t.$flags$)},Ng=(e,t,i,r)=>{const n=t.$children$[i];let s=0,a,o;if(n.$text$!==null)a=n.$elm$=Ta.createTextNode(n.$text$);else if(a=n.$elm$=Ta.createElement(n.$tag$),aR(null,n,rR),i6(Mh)&&a["s-si"]!==Mh&&a.classList.add(a["s-si"]=Mh),n.$children$)for(s=0;s<n.$children$.length;++s)o=Ng(e,n,s),o&&a.appendChild(o);return a},oR=(e,t,i,r,n,s)=>{let a=e,o;for(a.shadowRoot&&a.tagName===iR&&(a=a.shadowRoot);n<=s;++n)r[n]&&(o=Ng(null,i,n),o&&(r[n].$elm$=o,a.insertBefore(o,t)))},cR=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,dR(r),n.remove())},u6=(e,t,i,r)=>{let n=0,s=0,a=0,o=0,c=t.length-1,d=t[0],l=t[c],u=r.length-1,g=r[0],m=r[u],f,w;for(;n<=c&&s<=u;)if(d==null)d=t[++n];else if(l==null)l=t[--c];else if(g==null)g=r[++s];else if(m==null)m=r[--u];else if(Wp(d,g))Cc(d,g),d=t[++n],g=r[++s];else if(Wp(l,m))Cc(l,m),l=t[--c],m=r[--u];else if(Wp(d,m))Cc(d,m),e.insertBefore(d.$elm$,l.$elm$.nextSibling),d=t[++n],m=r[--u];else if(Wp(l,g))Cc(l,g),e.insertBefore(l.$elm$,d.$elm$),l=t[--c],g=r[++s];else{for(a=-1,o=n;o<=c;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===g.$key$){a=o;break}a>=0?(w=t[a],w.$tag$!==g.$tag$?f=Ng(t&&t[s],i,a):(Cc(w,g),t[a]=void 0,f=w.$elm$),g=r[++s]):(f=Ng(t&&t[s],i,s),g=r[++s]),f&&d.$elm$.parentNode.insertBefore(f,d.$elm$)}n>c?oR(e,r[u+1]==null?null:r[u+1].$elm$,i,r,s,u):s>u&&cR(t,n,c)},Wp=(e,t)=>e.$tag$===t.$tag$?e.$key$===t.$key$:!1,Cc=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,s=t.$tag$,a=t.$text$;a===null?(s==="slot"||aR(e,t,rR),r!==null&&n!==null?u6(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),oR(i,null,t,n,0,n.length-1)):r!==null&&cR(r,0,r.length-1)):e.$text$!==a&&(i.data=a)},dR=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(dR)},p6=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||Lg(null,null),s=r6(t)?t:p(null,null,t);iR=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([a,o])=>s.$attrs$[o]=i[a])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,Mh=i["s-sc"],Cc(n,s)},lR=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(i=>e.$onRenderResolve$=i))},$m=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return lR(e,e.$ancestorComponent$),fn(()=>h6(e,t))},h6=(e,t)=>{const i=ks("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let n;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map(([s,a])=>Rd(r,s,a)),e.$queuedListeners$=null),n=Rd(r,"componentWillLoad")),i(),v6(n,()=>g6(e,r,t))},g6=async(e,t,i)=>{const r=e.$hostElement$,n=ks("update",e.$cmpMeta$.$tagName$),s=r["s-rc"];i&&d6(e);const a=ks("render",e.$cmpMeta$.$tagName$);m6(e,t),s&&(s.map(o=>o()),r["s-rc"]=void 0),a(),n();{const o=r["s-p"],c=()=>f6(e);o.length===0?c():(Promise.all(o).then(c),e.$flags$|=4,o.length=0)}},m6=(e,t,i)=>{try{S0=t,t=t.render(),e.$flags$&=-17,e.$flags$|=2,p6(e,t)}catch(r){G(r,e.$hostElement$)}return S0=null,null},GS=()=>S0,f6=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=ks("postUpdate",t),n=e.$lazyInstance$,s=e.$ancestorComponent$;Rd(n,"componentDidRender"),e.$flags$&64?r():(e.$flags$|=64,pR(i),Rd(n,"componentDidLoad"),r(),e.$onReadyResolve$(i),s||uR()),e.$onInstanceResolve$(i),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&K_(()=>$m(e,!1)),e.$flags$&=-517},WS=e=>{{const t=Na(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&$m(t,!1),i}},uR=e=>{pR(Ta.documentElement),K_(()=>nR(op,"appload",{detail:{namespace:XL}}))},Rd=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){G(r)}},v6=(e,t)=>e&&e.then?e.then(t):t(),pR=e=>e.classList.add("hydrated"),y6=(e,t)=>Na(e).$instanceValues$.get(t),_6=(e,t,i,r)=>{const n=Na(e),s=n.$hostElement$,a=n.$instanceValues$.get(t),o=n.$flags$,c=n.$lazyInstance$;i=a6(i,r.$members$[t][0]);const d=Number.isNaN(a)&&Number.isNaN(i),l=i!==a&&!d;if((!(o&8)||a===void 0)&&l&&(n.$instanceValues$.set(t,i),c)){if(r.$watchers$&&o&128){const u=r.$watchers$[t];u&&u.map(g=>{try{c[g](i,a,t)}catch(m){G(m,s)}})}(o&18)===2&&$m(n,!1)}},hR=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;if(r.map(([s,[a]])=>{a&31||i&2&&a&32?Object.defineProperty(n,s,{get(){return y6(this,s)},set(o){_6(this,s,o,t)},configurable:!0,enumerable:!0}):i&1&&a&64&&Object.defineProperty(n,s,{value(...o){const c=Na(this);return c.$onInstancePromise$.then(()=>c.$lazyInstance$[s](...o))}})}),i&1){const s=new Map;n.attributeChangedCallback=function(a,o,c){Ii.jmp(()=>{const d=s.get(a);if(this.hasOwnProperty(d))c=this[d],delete this[d];else if(n.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==c)return;this[d]=c===null&&typeof this[d]=="boolean"?!1:c})},e.observedAttributes=r.filter(([a,o])=>o[0]&15).map(([a,o])=>{const c=o[1]||a;return s.set(c,a),o[0]&512&&t.$attrsToReflect$.push([a,c]),c})}}return e},b6=async(e,t,i,r,n)=>{if((t.$flags$&32)===0){{if(t.$flags$|=32,n=R6(i),n.then){const c=e6();n=await n,c()}n.isProxied||(i.$watchers$=n.watchers,hR(n,i,2),n.isProxied=!0);const o=ks("createInstance",i.$tagName$);t.$flags$|=8;try{new n(t)}catch(c){G(c)}t.$flags$&=-9,t.$flags$|=128,o(),gR(t.$lazyInstance$)}if(n.style){let o=n.style;const c=sR(i);if(!Ug.has(c)){const d=ks("registerStyles",i.$tagName$);o6(c,o,!!(i.$flags$&1)),d()}}}const s=t.$ancestorComponent$,a=()=>$m(t,!0);s&&s["s-rc"]?s["s-rc"].push(a):a()},gR=e=>{Rd(e,"connectedCallback")},w6=e=>{if((Ii.$flags$&1)===0){const t=Na(e),i=t.$cmpMeta$,r=ks("connectedCallback",i.$tagName$);if(t.$flags$&1)mR(e,t,i.$listeners$),gR(t.$lazyInstance$);else{t.$flags$|=1;{let n=e;for(;n=n.parentNode||n.host;)if(n["s-p"]){lR(t,t.$ancestorComponent$=n);break}}i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const a=e[n];delete e[n],e[n]=a}}),b6(e,t,i)}r()}},S6=e=>{if((Ii.$flags$&1)===0){const t=Na(e),i=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0),Rd(i,"disconnectedCallback")}},E6=(e,t={})=>{const i=ks(),r=[],n=t.exclude||[],s=op.customElements,a=Ta.head,o=a.querySelector("meta[charset]"),c=Ta.createElement("style"),d=[];let l,u=!0;Object.assign(Ii,t),Ii.$resourcesUrl$=new URL(t.resourcesUrl||"./",Ta.baseURI).href,e.map(g=>{g[1].map(m=>{const f={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};f.$members$=m[2],f.$listeners$=m[3],f.$attrsToReflect$=[],f.$watchers$={};const w=f.$tagName$,S=class extends HTMLElement{constructor(y){super(y),y=this,C6(y,f),f.$flags$&1&&y.attachShadow({mode:"open"})}connectedCallback(){l&&(clearTimeout(l),l=null),u?d.push(this):Ii.jmp(()=>w6(this))}disconnectedCallback(){Ii.jmp(()=>S6(this))}componentOnReady(){return Na(this).$onReadyPromise$}};f.$lazyBundleId$=g[0],!n.includes(w)&&!s.get(w)&&(r.push(w),s.define(w,hR(S,f,1)))})}),c.innerHTML=r+t6,c.setAttribute("data-styles",""),a.insertBefore(c,o?o.nextSibling:a.firstChild),u=!1,d.length?d.map(g=>g.connectedCallback()):Ii.jmp(()=>l=setTimeout(uR,30)),i()},mR=(e,t,i,r)=>{i&&i.map(([n,s,a])=>{const o=k6(e,n),c=T6(t,a),d=P6(n);Ii.ael(o,s,c,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Ii.rel(o,s,c,d))})},T6=(e,t)=>i=>{try{e.$flags$&256?e.$lazyInstance$[t](i):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,i])}catch(r){G(r)}},k6=(e,t)=>t&8?op:e,P6=e=>(e&2)!==0,J_=new WeakMap,Na=e=>J_.get(e),V=(e,t)=>J_.set(t.$lazyInstance$=e,t),C6=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r),i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],mR(e,i,t.$listeners$),J_.set(e,i)},qS=(e,t)=>t in e,G=(e,t)=>(0,console.error)(e,t),av=new Map,R6=(e,t,i)=>{const r=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$,s=av.get(n);if(s)return s[r];if(!i||!BUILD.hotModuleReplacement){const a=o=>(av.set(n,o),o[r]);switch(n){case"dyte-meeting":return Promise.resolve().then(function(){return o8}).then(a,G);case"dyte-ai":return Promise.resolve().then(function(){return d8}).then(a,G);case"dyte-ai-chat":return Promise.resolve().then(function(){return u8}).then(a,G);case"dyte-ai-home":return Promise.resolve().then(function(){return f8}).then(a,G);case"dyte-ai-toggle":return Promise.resolve().then(function(){return y8}).then(a,G);case"dyte-ai-transcriptions":return Promise.resolve().then(function(){return b8}).then(a,G);case"dyte-breakout-rooms-manager":return Promise.resolve().then(function(){return R8}).then(a,G);case"dyte-breakout-rooms-toggle":return Promise.resolve().then(function(){return A8}).then(a,G);case"dyte-broadcast-message-modal":return Promise.resolve().then(function(){return M8}).then(a,G);case"dyte-camera-toggle":return Promise.resolve().then(function(){return L8}).then(a,G);case"dyte-chat":return Promise.resolve().then(function(){return U8}).then(a,G);case"dyte-chat-toggle":return Promise.resolve().then(function(){return $8}).then(a,G);case"dyte-clock":return Promise.resolve().then(function(){return F8}).then(a,G);case"dyte-confirmation-modal":return Promise.resolve().then(function(){return B8}).then(a,G);case"dyte-controlbar":return Promise.resolve().then(function(){return G8}).then(a,G);case"dyte-dialog-manager":return Promise.resolve().then(function(){return q8}).then(a,G);case"dyte-ended-screen":return Promise.resolve().then(function(){return K8}).then(a,G);case"dyte-fullscreen-toggle":return Promise.resolve().then(function(){return Q8}).then(a,G);case"dyte-grid":return Promise.resolve().then(function(){return o9}).then(a,G);case"dyte-grid-pagination":return Promise.resolve().then(function(){return d9}).then(a,G);case"dyte-header":return Promise.resolve().then(function(){return u9}).then(a,G);case"dyte-idle-screen":return Promise.resolve().then(function(){return h9}).then(a,G);case"dyte-image-viewer":return Promise.resolve().then(function(){return y9}).then(a,G);case"dyte-leave-button":return Promise.resolve().then(function(){return b9}).then(a,G);case"dyte-leave-meeting":return Promise.resolve().then(function(){return S9}).then(a,G);case"dyte-livestream-indicator":return Promise.resolve().then(function(){return T9}).then(a,G);case"dyte-livestream-toggle":return Promise.resolve().then(function(){return P9}).then(a,G);case"dyte-meeting-title":return Promise.resolve().then(function(){return R9}).then(a,G);case"dyte-mic-toggle":return Promise.resolve().then(function(){return I9}).then(a,G);case"dyte-mixed-grid":return Promise.resolve().then(function(){return O9}).then(a,G);case"dyte-more-toggle":return Promise.resolve().then(function(){return D9}).then(a,G);case"dyte-mute-all-button":return Promise.resolve().then(function(){return N9}).then(a,G);case"dyte-mute-all-confirmation":return Promise.resolve().then(function(){return j9}).then(a,G);case"dyte-name-tag":return Promise.resolve().then(function(){return V9}).then(a,G);case"dyte-network-indicator":return Promise.resolve().then(function(){return z9}).then(a,G);case"dyte-notifications":return Promise.resolve().then(function(){return q9}).then(a,G);case"dyte-participant-count":return Promise.resolve().then(function(){return K9}).then(a,G);case"dyte-participant-setup":return Promise.resolve().then(function(){return Q9}).then(a,G);case"dyte-participants":return Promise.resolve().then(function(){return X9}).then(a,G);case"dyte-participants-audio":return Promise.resolve().then(function(){return iU}).then(a,G);case"dyte-participants-stage-list":return Promise.resolve().then(function(){return nU}).then(a,G);case"dyte-participants-stage-queue":return Promise.resolve().then(function(){return aU}).then(a,G);case"dyte-participants-toggle":return Promise.resolve().then(function(){return cU}).then(a,G);case"dyte-participants-viewer-list":return Promise.resolve().then(function(){return lU}).then(a,G);case"dyte-participants-waiting-list":return Promise.resolve().then(function(){return pU}).then(a,G);case"dyte-permissions-message":return Promise.resolve().then(function(){return gU}).then(a,G);case"dyte-pip-toggle":return Promise.resolve().then(function(){return fU}).then(a,G);case"dyte-plugin-main":return Promise.resolve().then(function(){return yU}).then(a,G);case"dyte-plugins":return Promise.resolve().then(function(){return bU}).then(a,G);case"dyte-plugins-toggle":return Promise.resolve().then(function(){return SU}).then(a,G);case"dyte-polls":return Promise.resolve().then(function(){return TU}).then(a,G);case"dyte-polls-toggle":return Promise.resolve().then(function(){return PU}).then(a,G);case"dyte-recording-indicator":return Promise.resolve().then(function(){return RU}).then(a,G);case"dyte-recording-toggle":return Promise.resolve().then(function(){return IU}).then(a,G);case"dyte-remote-access-manager":return Promise.resolve().then(function(){return OU}).then(a,G);case"dyte-screen-share-toggle":return Promise.resolve().then(function(){return DU}).then(a,G);case"dyte-screenshare-view":return Promise.resolve().then(function(){return NU}).then(a,G);case"dyte-settings":return Promise.resolve().then(function(){return jU}).then(a,G);case"dyte-settings-toggle":return Promise.resolve().then(function(){return VU}).then(a,G);case"dyte-setup-screen":return Promise.resolve().then(function(){return zU}).then(a,G);case"dyte-sidebar":return Promise.resolve().then(function(){return HU}).then(a,G);case"dyte-simple-grid":return Promise.resolve().then(function(){return WU}).then(a,G);case"dyte-spotlight-grid":return Promise.resolve().then(function(){return JU}).then(a,G);case"dyte-stage":return Promise.resolve().then(function(){return YU}).then(a,G);case"dyte-stage-toggle":return Promise.resolve().then(function(){return ZU}).then(a,G);case"dyte-text-field":return Promise.resolve().then(function(){return ej}).then(a,G);case"dyte-viewer-count":return Promise.resolve().then(function(){return ij}).then(a,G);case"dyte-waiting-screen":return Promise.resolve().then(function(){return nj}).then(a,G);case"dyte-webinar-stage-toggle":return Promise.resolve().then(function(){return aj}).then(a,G);case"dyte-ai-caption":return Promise.resolve().then(function(){return cj}).then(a,G);case"dyte-breakout-room-manager_3":return Promise.resolve().then(function(){return pj}).then(a,G);case"dyte-chat-composer-ui_4":return Promise.resolve().then(function(){return vj}).then(a,G);case"dyte-join-stage_2":return Promise.resolve().then(function(){return bj}).then(a,G);case"dyte-livestream-player":return Promise.resolve().then(function(){return Sj}).then(a,G);case"dyte-notification":return Promise.resolve().then(function(){return Tj}).then(a,G);case"dyte-poll_2":return Promise.resolve().then(function(){return Cj}).then(a,G);case"dyte-settings-audio_2":return Promise.resolve().then(function(){return Ij}).then(a,G);case"dyte-tab-bar":return Promise.resolve().then(function(){return Oj}).then(a,G);case"dyte-audio-visualizer_2":return Promise.resolve().then(function(){return jj}).then(a,G);case"dyte-chat-message_2":return Promise.resolve().then(function(){return t$}).then(a,G);case"dyte-dialog":return Promise.resolve().then(function(){return r$}).then(a,G);case"dyte-emoji-picker":return Promise.resolve().then(function(){return o$}).then(a,G);case"dyte-participant":return Promise.resolve().then(function(){return d$}).then(a,G);case"dyte-participant-tile":return Promise.resolve().then(function(){return u$}).then(a,G);case"dyte-spotlight-indicator":return Promise.resolve().then(function(){return h$}).then(a,G);case"dyte-logo":return Promise.resolve().then(function(){return m$}).then(a,G);case"dyte-file-message_3":return Promise.resolve().then(function(){return S$}).then(a,G);case"dyte-menu_3":return Promise.resolve().then(function(){return J$}).then(a,G);case"dyte-avatar":return Promise.resolve().then(function(){return Y$}).then(a,G);case"dyte-controlbar-button":return Promise.resolve().then(function(){return Z$}).then(a,G);case"dyte-tooltip":return Promise.resolve().then(function(){return eV}).then(a,G);case"dyte-spinner":return Promise.resolve().then(function(){return iV}).then(a,G);case"dyte-button":return Promise.resolve().then(function(){return nV}).then(a,G);case"dyte-icon":return Promise.resolve().then(function(){return oV}).then(a,G)}}return ZL(()=>import(`./${n}.entry.js`),[]).then(a=>(av.set(n,a),a[r]),G)},Ug=new Map,op=typeof window<"u"?window:{},Ta=op.document||{head:{}},Ii={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},fR=e=>Promise.resolve(e),x6=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),JS=[],vR=[],I6=(e,t)=>i=>{e.push(i),E0||(E0=!0,t&&Ii.$flags$&4?K_(T0):Ii.raf(T0))},KS=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){G(i)}e.length=0},T0=()=>{KS(JS),KS(vR),(E0=JS.length>0)&&Ii.raf(T0)},K_=e=>fR().then(e),fn=I6(vR,!0),A6=()=>fR(),O6=(e,t)=>typeof window>"u"?Promise.resolve():A6().then(()=>E6(JSON.parse('[["dyte-chat",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32]}]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32],"showStageList":[32]}]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-polls",[[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32]}]]],["dyte-remote-access-manager",[[1,"dyte-remote-access-manager",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"acceptedRequestId":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-webinar-stage-toggle",[[1,"dyte-webinar-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"canPresent":[32],"requestProduce":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"t":[16]}]]],["dyte-dialog-manager",[[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32]}]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"showWebinarStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"connected":[32],"pipSupported":[32],"pipEnabled":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"middlewares":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-notifications",[[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"]]]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipEnabled":[32],"pipSupported":[32]}]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"middlewares":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"middlewares":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"canControl":[32],"viewModeEnabled":[32]}]]],["dyte-plugins",[[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugin":[32],"activatedPluginsId":[32]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[16],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"middlewares":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-livestream-indicator",[[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"participantCount":[32]}]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-participants",[[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"search":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-viewer-count",[[1,"dyte-viewer-count",{"meeting":[16],"iconPack":[16],"t":[16],"viewerCount":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat"]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"middlewares":[16],"size":[513]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"middlewares":[16],"states":[32],"newMeeting":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"maxLength":[2,"max-length"],"isScreenShare":[4,"is-screen-share"],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-livestream-player",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"latency":[32],"audioPlaybackError":[32]}]]],["dyte-notification",[[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-ai-caption",[[1,"dyte-ai-caption"]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"audioDevices":[32],"speakerDevices":[32],"canProduceAudio":[32]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoDevices":[32],"currentDevice":[32],"videoEnabled":[32]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-emoji-picker",[[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}]]],["dyte-join-stage_2",[[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-participant-tile",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-file-message_3",[[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"status":[32]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16]}]]],["dyte-chat-message_2",[[1,"dyte-chat-message",{"messageItem":[16],"isContinued":[4,"is-continued"],"isUnread":[4,"is-unread"],"observeMessage":[16],"size":[513],"iconPack":[16],"t":[16],"now":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"iconPack":[16],"t":[16],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"pagesToRender":[32],"onNewNode":[64]}]]],["dyte-chat-composer-ui_4",[[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"emojiPickerActive":[32]}],[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}]]],["dyte-audio-visualizer_2",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]]]'),t)),Be={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",height:"76px",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#more-menu":{position:"absolute",boxSizing:"border-box",top:"0",left:"0",width:"100%",transform:"translateY(-100%)",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))",padding:"16px 12px",borderRadius:"18px 18px 0 0"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-controlbar.activeMoreMenu.sm":{add:["div#more-menu"]},"dyte-controlbar.activeMoreMenu.md":{add:["div#more-menu"]},"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#more-menu":[["dyte-chat-toggle",{variant:"horizontal"}],["dyte-participants-toggle",{variant:"horizontal"}],["dyte-polls-toggle",{variant:"horizontal"}],["dyte-plugins-toggle",{variant:"horizontal"}],["dyte-fullscreen-toggle",{variant:"horizontal"}],["dyte-screen-share-toggle",{variant:"horizontal"}],["dyte-pip-toggle",{variant:"horizontal"}],["dyte-mute-all-button",{variant:"horizontal"}],["dyte-breakout-rooms-toggle",{variant:"horizontal"}],["dyte-settings-toggle",{variant:"horizontal"}],["dyte-ai-toggle",{variant:"horizontal"}]],"div#controlbar-left":["dyte-screen-share-toggle","dyte-fullscreen-toggle","dyte-pip-toggle","dyte-recording-toggle","dyte-breakout-rooms-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-mic-toggle","dyte-camera-toggle","dyte-mute-all-button","dyte-settings-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var yR=typeof global=="object"&&global&&global.Object===Object&&global,M6=typeof self=="object"&&self&&self.Object===Object&&self,Qo=yR||M6||Function("return this")(),jg=Qo.Symbol,_R=Object.prototype,D6=_R.hasOwnProperty,L6=_R.toString,ll=jg?jg.toStringTag:void 0;function N6(e){var t=D6.call(e,ll),i=e[ll];try{e[ll]=void 0;var r=!0}catch{}var n=L6.call(e);return r&&(t?e[ll]=i:delete e[ll]),n}var U6=Object.prototype,j6=U6.toString;function $6(e){return j6.call(e)}var V6="[object Null]",F6="[object Undefined]",YS=jg?jg.toStringTag:void 0;function cp(e){return e==null?e===void 0?F6:V6:YS&&YS in Object(e)?N6(e):$6(e)}function zn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function jd(e){return e!=null&&typeof e=="object"}const z6=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],B6={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},QS={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},ZS={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}},Y_=[-2,-1,0,1,2];function Dh(e){e=e.trim();let t="0",i="0",r="0";return e.length==4?(t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),[+t,+i,+r]}const H6=(e,t,i)=>{let r,n,s;if(t==0)r=n=s=i;else{const a=(d,l,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(l-d)*6*u:u<.5?l:u<.6666666666666666?d+(l-d)*(.6666666666666666-u)*6:d),o=i<.5?i*(1+t):i+t-i*t,c=2*i-o;r=a(c,o,e+1/3),n=a(c,o,e),s=a(c,o,e-1/3)}return[Math.round(r*255),Math.round(n*255),Math.round(s*255)]},G6=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),n=Math.min(e,t,i);let s,a,o=(r+n)/2;if(r==n)s=a=0;else{const c=r-n;switch(a=o>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4;break}s/=6}return[s,a,o]},W6=(e,t,i)=>{const r=n=>n.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(i)}`},bR=(e,t=Y_,i=.4)=>{const r=[],[n,s,a]=Dh(e),[o,c,d]=G6(n,s,a),l=Math.round(d*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const u=t.findIndex(S=>S===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-u,m=u+1,f=(100-l)/g,w=l/m;for(const S of t){let y;S<0?y=l+S*w*i:S>0?y=l+S*f*i:y=l;const[_,T,C]=H6(o,c,y/100);r.push(W6(_,T,C))}return r},Ha=e=>typeof e=="string"&&e.length===7&&e.startsWith("#"),q6=e=>{const[t,i,r,n,s]=bR(e,Y_);return{300:t,400:i,500:r,600:n,700:s}},J6=e=>{const[t,i,r,n,s]=bR(e,Y_);return{1e3:t,900:i,800:r,700:n,600:s}},K6=e=>{const t=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const n=document.createElement("link");n.rel="preconnect",n.setAttribute("data-dyte-font","true"),n.href="https://fonts.googleapis.com";const s=n.cloneNode(!0);s.href="https://fonts.gstatic.com",s.crossOrigin="",i.push(n,s)}const r=document.createElement("link");r.rel="stylesheet",r.setAttribute("data-dyte-font",e),r.href=encodeURI(`https://fonts.googleapis.com/css2?family=${e}:wght@${t.join(";")}&display=swap`),i.push(r),document.head.append(...i)},Y6=(e,t)=>{z6.forEach(i=>{e.style.setProperty(`--dyte-space-${i}`,`${i*t}px`)})},Q6=(e,t)=>{if(t in QS){const i=QS[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-width-${r}`,`${i[r]}px`)})}},Z6=(e,t)=>{if(t in ZS){const i=ZS[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-radius-${r}`,`${i[r]}px`)})}},XS=(e,t)=>{Object.keys(t).forEach(i=>{const r=t[i];if(typeof r=="string")if(i==="text"||i==="text-on-brand"){const n=Dh(r).join(" ");e.style.setProperty(`--dyte-colors-${i}-1000`,`${n}`),e.style.setProperty(`--dyte-colors-${i}-900`,`${n} / 0.88`),e.style.setProperty(`--dyte-colors-${i}-800`,`${n} / 0.76`),e.style.setProperty(`--dyte-colors-${i}-700`,`${n} / 0.64`),e.style.setProperty(`--dyte-colors-${i}-600`,`${n} / 0.52`)}else{const n=Dh(r).join(" ");e.style.setProperty(`--dyte-colors-${i}`,n)}else typeof r=="object"&&Object.keys(r).forEach(n=>{const s=r[n],a=Dh(s).join(" ");e.style.setProperty(`--dyte-colors-${i}-${n}`,a)})})},eE=(e,{spacingBase:t,borderRadius:i,borderWidth:r,colors:n,fontFamily:s,googleFont:a,theme:o})=>{if(typeof e!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(K6(a),e.style.setProperty("--dyte-font-family",a)),typeof s=="string"&&e.style.setProperty("--dyte-font-family",s),typeof t=="number"&&Y6(e,t),typeof r=="string"&&Q6(e,r),typeof i=="string"&&Z6(e,i),typeof o=="string"){const c=B6[o];c!=null&&XS(e,c)}typeof n=="object"&&XS(e,n)};function X6(){this.__data__=[],this.size=0}function Vm(e,t){return e===t||e!==e&&t!==t}function Fm(e,t){for(var i=e.length;i--;)if(Vm(e[i][0],t))return i;return-1}var e4=Array.prototype,t4=e4.splice;function i4(e){var t=this.__data__,i=Fm(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():t4.call(t,i,1),--this.size,!0}function r4(e){var t=this.__data__,i=Fm(t,e);return i<0?void 0:t[i][1]}function n4(e){return Fm(this.__data__,e)>-1}function s4(e,t){var i=this.__data__,r=Fm(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function As(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}As.prototype.clear=X6;As.prototype.delete=i4;As.prototype.get=r4;As.prototype.has=n4;As.prototype.set=s4;function a4(){this.__data__=new As,this.size=0}function o4(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function c4(e){return this.__data__.get(e)}function d4(e){return this.__data__.has(e)}var l4="[object AsyncFunction]",u4="[object Function]",p4="[object GeneratorFunction]",h4="[object Proxy]";function Q_(e){if(!zn(e))return!1;var t=cp(e);return t==u4||t==p4||t==l4||t==h4}var ov=Qo["__core-js_shared__"],tE=function(){var e=/[^.]+$/.exec(ov&&ov.keys&&ov.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function g4(e){return!!tE&&tE in e}var m4=Function.prototype,f4=m4.toString;function v4(e){if(e!=null){try{return f4.call(e)}catch{}try{return e+""}catch{}}return""}var y4=/[\\^$.*+?()[\]{}|]/g,_4=/^\[object .+?Constructor\]$/,b4=Function.prototype,w4=Object.prototype,S4=b4.toString,E4=w4.hasOwnProperty,T4=RegExp("^"+S4.call(E4).replace(y4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function k4(e){if(!zn(e)||g4(e))return!1;var t=Q_(e)?T4:_4;return t.test(v4(e))}function P4(e,t){return e==null?void 0:e[t]}function Z_(e,t){var i=P4(e,t);return k4(i)?i:void 0}var wR=Z_(Qo,"Map"),$u=Z_(Object,"create");function C4(){this.__data__=$u?$u(null):{},this.size=0}function R4(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var x4="__lodash_hash_undefined__",I4=Object.prototype,A4=I4.hasOwnProperty;function O4(e){var t=this.__data__;if($u){var i=t[e];return i===x4?void 0:i}return A4.call(t,e)?t[e]:void 0}var M4=Object.prototype,D4=M4.hasOwnProperty;function L4(e){var t=this.__data__;return $u?t[e]!==void 0:D4.call(t,e)}var N4="__lodash_hash_undefined__";function U4(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=$u&&t===void 0?N4:t,this}function zo(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}zo.prototype.clear=C4;zo.prototype.delete=R4;zo.prototype.get=O4;zo.prototype.has=L4;zo.prototype.set=U4;function j4(){this.size=0,this.__data__={hash:new zo,map:new(wR||As),string:new zo}}function $4(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function zm(e,t){var i=e.__data__;return $4(t)?i[typeof t=="string"?"string":"hash"]:i.map}function V4(e){var t=zm(this,e).delete(e);return this.size-=t?1:0,t}function F4(e){return zm(this,e).get(e)}function z4(e){return zm(this,e).has(e)}function B4(e,t){var i=zm(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function $d(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}$d.prototype.clear=j4;$d.prototype.delete=V4;$d.prototype.get=F4;$d.prototype.has=z4;$d.prototype.set=B4;var H4=200;function G4(e,t){var i=this.__data__;if(i instanceof As){var r=i.__data__;if(!wR||r.length<H4-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new $d(r)}return i.set(e,t),this.size=i.size,this}function Vd(e){var t=this.__data__=new As(e);this.size=t.size}Vd.prototype.clear=a4;Vd.prototype.delete=o4;Vd.prototype.get=c4;Vd.prototype.has=d4;Vd.prototype.set=G4;var $g=function(){try{var e=Z_(Object,"defineProperty");return e({},"",{}),e}catch{}}();function X_(e,t,i){t=="__proto__"&&$g?$g(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function k0(e,t,i){(i!==void 0&&!Vm(e[t],i)||i===void 0&&!(t in e))&&X_(e,t,i)}function W4(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++n];if(i(s[c],c,s)===!1)break}return t}}var q4=W4(),SR=typeof xe=="object"&&xe&&!xe.nodeType&&xe,iE=SR&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,J4=iE&&iE.exports===SR,rE=J4?Qo.Buffer:void 0,nE=rE?rE.allocUnsafe:void 0;function K4(e,t){if(t)return e.slice();var i=e.length,r=nE?nE(i):new e.constructor(i);return e.copy(r),r}var sE=Qo.Uint8Array;function Y4(e){var t=new e.constructor(e.byteLength);return new sE(t).set(new sE(e)),t}function Q4(e,t){var i=t?Y4(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Z4(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var aE=Object.create,X4=function(){function e(){}return function(t){if(!zn(t))return{};if(aE)return aE(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function eN(e,t){return function(i){return e(t(i))}}var ER=eN(Object.getPrototypeOf,Object),tN=Object.prototype;function TR(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||tN;return e===i}function iN(e){return typeof e.constructor=="function"&&!TR(e)?X4(ER(e)):{}}var rN="[object Arguments]";function oE(e){return jd(e)&&cp(e)==rN}var kR=Object.prototype,nN=kR.hasOwnProperty,sN=kR.propertyIsEnumerable,P0=oE(function(){return arguments}())?oE:function(e){return jd(e)&&nN.call(e,"callee")&&!sN.call(e,"callee")},C0=Array.isArray,aN=9007199254740991;function PR(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=aN}function eb(e){return e!=null&&PR(e.length)&&!Q_(e)}function oN(e){return jd(e)&&eb(e)}function cN(){return!1}var CR=typeof xe=="object"&&xe&&!xe.nodeType&&xe,cE=CR&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,dN=cE&&cE.exports===CR,dE=dN?Qo.Buffer:void 0,lN=dE?dE.isBuffer:void 0,RR=lN||cN,uN="[object Object]",pN=Function.prototype,hN=Object.prototype,xR=pN.toString,gN=hN.hasOwnProperty,mN=xR.call(Object);function fN(e){if(!jd(e)||cp(e)!=uN)return!1;var t=ER(e);if(t===null)return!0;var i=gN.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&xR.call(i)==mN}var vN="[object Arguments]",yN="[object Array]",_N="[object Boolean]",bN="[object Date]",wN="[object Error]",SN="[object Function]",EN="[object Map]",TN="[object Number]",kN="[object Object]",PN="[object RegExp]",CN="[object Set]",RN="[object String]",xN="[object WeakMap]",IN="[object ArrayBuffer]",AN="[object DataView]",ON="[object Float32Array]",MN="[object Float64Array]",DN="[object Int8Array]",LN="[object Int16Array]",NN="[object Int32Array]",UN="[object Uint8Array]",jN="[object Uint8ClampedArray]",$N="[object Uint16Array]",VN="[object Uint32Array]",ut={};ut[ON]=ut[MN]=ut[DN]=ut[LN]=ut[NN]=ut[UN]=ut[jN]=ut[$N]=ut[VN]=!0;ut[vN]=ut[yN]=ut[IN]=ut[_N]=ut[AN]=ut[bN]=ut[wN]=ut[SN]=ut[EN]=ut[TN]=ut[kN]=ut[PN]=ut[CN]=ut[RN]=ut[xN]=!1;function FN(e){return jd(e)&&PR(e.length)&&!!ut[cp(e)]}function zN(e){return function(t){return e(t)}}var IR=typeof xe=="object"&&xe&&!xe.nodeType&&xe,lu=IR&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,BN=lu&&lu.exports===IR,cv=BN&&yR.process,lE=function(){try{var e=lu&&lu.require&&lu.require("util").types;return e||cv&&cv.binding&&cv.binding("util")}catch{}}(),uE=lE&&lE.isTypedArray,AR=uE?zN(uE):FN;function R0(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var HN=Object.prototype,GN=HN.hasOwnProperty;function WN(e,t,i){var r=e[t];(!(GN.call(e,t)&&Vm(r,i))||i===void 0&&!(t in e))&&X_(e,t,i)}function qN(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?X_(i,o,c):WN(i,o,c)}return i}function JN(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var KN=9007199254740991,YN=/^(?:0|[1-9]\d*)$/;function OR(e,t){var i=typeof e;return t=t==null?KN:t,!!t&&(i=="number"||i!="symbol"&&YN.test(e))&&e>-1&&e%1==0&&e<t}var QN=Object.prototype,ZN=QN.hasOwnProperty;function XN(e,t){var i=C0(e),r=!i&&P0(e),n=!i&&!r&&RR(e),s=!i&&!r&&!n&&AR(e),a=i||r||n||s,o=a?JN(e.length,String):[],c=o.length;for(var d in e)(t||ZN.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||OR(d,c)))&&o.push(d);return o}function e7(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var t7=Object.prototype,i7=t7.hasOwnProperty;function r7(e){if(!zn(e))return e7(e);var t=TR(e),i=[];for(var r in e)r=="constructor"&&(t||!i7.call(e,r))||i.push(r);return i}function MR(e){return eb(e)?XN(e,!0):r7(e)}function n7(e){return qN(e,MR(e))}function s7(e,t,i,r,n,s,a){var o=R0(e,i),c=R0(t,i),d=a.get(c);if(d){k0(e,i,d);return}var l=s?s(o,c,i+"",e,t,a):void 0,u=l===void 0;if(u){var g=C0(c),m=!g&&RR(c),f=!g&&!m&&AR(c);l=c,g||m||f?C0(o)?l=o:oN(o)?l=Z4(o):m?(u=!1,l=K4(c,!0)):f?(u=!1,l=Q4(c,!0)):l=[]:fN(c)||P0(c)?(l=o,P0(o)?l=n7(o):(!zn(o)||Q_(o))&&(l=iN(c))):u=!1}u&&(a.set(c,l),n(l,c,r,s,a),a.delete(c)),k0(e,i,l)}function DR(e,t,i,r,n){e!==t&&q4(t,function(s,a){if(n||(n=new Vd),zn(s))s7(e,t,a,i,DR,r,n);else{var o=r?r(R0(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),k0(e,a,o)}},MR)}function LR(e){return e}function a7(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var pE=Math.max;function o7(e,t,i){return t=pE(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=pE(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),a7(e,this,o)}}function c7(e){return function(){return e}}var d7=$g?function(e,t){return $g(e,"toString",{configurable:!0,enumerable:!1,value:c7(t),writable:!0})}:LR,l7=800,u7=16,p7=Date.now;function h7(e){var t=0,i=0;return function(){var r=p7(),n=u7-(r-i);if(i=r,n>0){if(++t>=l7)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var g7=h7(d7);function m7(e,t){return g7(o7(e,t,LR),e+"")}function f7(e,t,i){if(!zn(i))return!1;var r=typeof t;return(r=="number"?eb(i)&&OR(t,i.length):r=="string"&&t in i)?Vm(i[t],e):!1}function v7(e){return m7(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&f7(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}var NR=v7(function(e,t,i){DR(e,t,i)});const y7=(e,t=Be)=>{let i=Object.assign({},t);return NR(i,e),i},_7=(e,t={},i={grid_pagination:!0,settings_toggle:!0})=>{var r,n,s,a,o,c,d,l,u,g,m,f;const w={showSetupScreen:!0};let S,y=["dyte-stage"],_={},T={};const C=(i==null?void 0:i.settings_toggle)!==!1,D=(i==null?void 0:i.grid_pagination)!==!1;if(!((r=e.controlBar)===null||r===void 0)&&r.isEnabled){y.push("dyte-controlbar");const{elements:H}=e.controlBar,ie=["dyte-breakout-rooms-toggle","dyte-livestream-toggle"],K=[],ge=["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-mute-all-button",...C?["dyte-settings-toggle"]:[],"dyte-leave-button"];H.fullscreen&&ie.push("dyte-fullscreen-toggle"),H.screenshare&&ie.push("dyte-screen-share-toggle"),ie.push("dyte-recording-toggle"),ie.push("dyte-pip-toggle"),H.chat&&K.push("dyte-chat-toggle"),H.polls&&K.push("dyte-polls-toggle"),H.participants&&K.push("dyte-participants-toggle"),H.plugins&&K.push("dyte-plugins-toggle"),K.push("dyte-ai-toggle");const He=ie.concat(["dyte-mute-all-button"]).concat(K);C&&He.push("dyte-settings-toggle");let Zt=!1;He.length>0&&(Zt=!0),T={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":ie,"div#controlbar-center":ge,"div#controlbar-right":K,"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-controlbar.activeMoreMenu.sm":{add:["div#more-menu"]},"dyte-controlbar.activeMoreMenu.md":{add:["div#more-menu"]},"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button",Zt&&"dyte-more-toggle"],"div#more-menu":He.map(Xt=>[Xt,{variant:"horizontal"}])}}if(!((n=e.header)===null||n===void 0)&&n.isEnabled){y.unshift("dyte-header");const{elements:H}=e.header;let ie=["dyte-recording-indicator","dyte-livestream-indicator"],K=[],ge=[];D&&ge.push("dyte-grid-pagination"),H.title&&K.push("dyte-meeting-title"),typeof H.logo=="string"&&H.logo.length>0&&(S=H.logo,ie.unshift("dyte-logo")),H.participantCount&&ge.push("dyte-participant-count","dyte-viewer-count"),H.timer&&ge.push("dyte-clock"),_={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":ie,"div#header-center":K,"div#header-right":ge,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}y.push("dyte-participants-audio","dyte-dialog-manager");let O={logo:S};e.isV2===!0?(O=e.designTokens,Ha((a=(s=e==null?void 0:e.designTokens)===null||s===void 0?void 0:s.colors)===null||a===void 0?void 0:a.textOnBrand)&&(O.colors["text-on-brand"]=(c=(o=e==null?void 0:e.designTokens)===null||o===void 0?void 0:o.colors)===null||c===void 0?void 0:c.textOnBrand),Ha((l=(d=e==null?void 0:e.designTokens)===null||d===void 0?void 0:d.colors)===null||l===void 0?void 0:l.videoBg)&&(O.colors["video-bg"]=(g=(u=e==null?void 0:e.designTokens)===null||u===void 0?void 0:u.colors)===null||g===void 0?void 0:g.videoBg)):e.colors!=null&&(O.colors={},Ha(e.colors.primary)?O.colors.brand=q6(e.colors.primary):typeof e.colors.primary=="object"&&(O.colors.brand=e.colors.primary),Ha(e.colors.secondary)?O.colors.background=J6(e.colors.secondary):typeof e.colors.secondary=="object"&&(O.colors.background=e.colors.secondary),Ha(e.colors.text)&&(O.colors.text=e.colors.text),Ha(e.colors.textPrimary)&&(O.colors["text-on-brand"]=e.colors.textPrimary),Ha(e.colors.videoBackground)&&(O.colors["video-bg"]=e.colors.videoBackground));let z={designTokens:O,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",height:"76px",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"div#more-menu":{position:"absolute",boxSizing:"border-box",top:"0",left:"0",width:"100%",transform:"translateY(-100%)",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))",padding:"16px 12px",borderRadius:"18px 18px 0 0",zIndex:"400"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":y,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},_),T),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-media",...C?["div#setupcontrols-settings"]:[]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return z=y7(t,z),w.showSetupScreen=(f=(m=e.setupScreen)===null||m===void 0?void 0:m.isEnabled)!==null&&f!==void 0?f:!0,{config:z,data:w}},b7={chat:"Chat","chat.new":"New",participants:"Participants",polls:"Polls",plugins:"Plugins",mic_off:"Mic Off",mic_on:"Mic On",video_off:"Video Off",video_on:"Video On",left_meeting:"You left the meeting",share_screen_start:"Share Screen",share_screen_stop:"Stop Sharing",leave:"Leave",dismiss:"Dismiss",page:"Page",settings:"Settings",audio:"Audio",video:"Video",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",end_meeting_for_all:"End meeting for all",cancel:"Cancel",yes:"Yes",you:"you",mute:"Mute",kick:"Kick","participant.turn_off_video":"Turn off video",perm_browser_denied:"Permission denied by browser","perm.sys_denied.message":"To enable system permission, go to Mac's System Preferences -> Security & Privacy ->  Privacy -> Select Microphone, Camera or 'Screen Recording' and allow permission for your specific browser","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_denied_title.video":"Camera permission denied","perm_denied_title.audio":"Mic permission denied","perm_denied_title.screenshare":"Screenshare permission denied","perm_denied_text.audio":"It seems like your browser or system has blocked permission for us to access microphone. Please allow this permission and reload for a smoother experience.","perm_denied_text.video":"It seems like your browser or system has blocked permission for us to access camera. Please allow this permission and reload for a smoother experience.","perm_denied_text.screenshare":"It seems like your browser or system has blocked permission for us to screenshare. Please allow this permission and reload for a smoother experience.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"To begin the webinar, please join the stage or accept a join stage request from the participants tab.","stage.empty_viewer":"Webinar has not yet been started","stage.remove_from_stage":"Remove from stage","stage.add_to_stage":"Add to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...",pip_on:"Show PiP",pip_off:"Hide PiP","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute","participants.empty_search_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",join:"Join",joined:"Joined",create:"Create",close:"Close","confirmation_modal.header":"Are you sure?",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View"},B=(e=b7)=>t=>{var i;return(i=e[t])!==null&&i!==void 0?i:t},$={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9.99906 2.16577C14.6024 2.16577 18.3341 5.89744 18.3341 10.5008C18.3341 15.1033 14.6024 18.8349 9.99906 18.8349C5.39573 18.8349 1.66406 15.1033 1.66406 10.5008C1.66406 5.89744 5.39573 2.16577 9.99906 2.16577ZM12.4482 14.2499H7.54906C8.0924 16.2616 9.0374 17.5849 9.99823 17.5849C10.9591 17.5849 11.9041 16.2616 12.4474 14.2499H12.4482ZM6.25656 14.2499H3.98656C4.79114 15.5374 5.9867 16.5335 7.39823 17.0924C6.96323 16.4091 6.60406 15.5541 6.3399 14.5799L6.2549 14.2508L6.25656 14.2499ZM16.0107 14.2499H13.7424C13.4724 15.3624 13.0824 16.3333 12.5982 17.0924C13.9206 16.5694 15.0556 15.6617 15.8566 14.4866L16.0107 14.2508V14.2499ZM5.91073 8.83327H3.11156L3.1074 8.84744C2.9781 9.38904 2.91293 9.94396 2.91323 10.5008C2.91323 11.3808 3.07406 12.2233 3.3674 13.0008H6.01156C5.81031 11.621 5.77589 10.2221 5.90906 8.83411L5.91073 8.83327ZM12.8299 8.83327H7.16823C7.02162 10.221 7.05945 11.6221 7.28073 12.9999H12.7174C12.9386 11.6221 12.9764 10.221 12.8299 8.83327ZM16.8866 8.83327H14.0882C14.1399 9.37244 14.1674 9.93077 14.1674 10.4999C14.1687 11.3366 14.108 12.1722 13.9857 12.9999H16.6299C16.9308 12.2008 17.0844 11.3538 17.0832 10.4999C17.0832 9.92577 17.0149 9.3666 16.8866 8.83327ZM7.39906 3.90827L7.3799 3.91494C5.67441 4.59596 4.29862 5.91053 3.54073 7.58327H6.08073C6.3424 6.12327 6.7974 4.8516 7.3999 3.90827H7.39906ZM9.99906 3.41577L9.9024 3.41994C8.84906 3.5166 7.82906 5.18494 7.3574 7.58327H12.6424C12.1707 5.1916 11.1566 3.52577 10.1049 3.42077L9.99906 3.4166V3.41577ZM12.5991 3.90744L12.6882 4.05327C13.2457 4.97994 13.6691 6.19661 13.9174 7.58411H16.4574C15.7339 5.98751 14.4463 4.71438 12.8416 4.0091L12.5991 3.90827V3.90744Z"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 13"><path fill="currentColor" d="M10.0309 4.00462C12.24 4.00462 14.0309 5.79549 14.0309 8.00462C14.0309 10.2138 12.24 12.0046 10.0309 12.0046C7.82174 12.0046 6.03088 10.2138 6.03088 8.00462C6.03088 5.79549 7.82174 4.00462 10.0309 4.00462ZM10.0309 5.50462C8.65017 5.50462 7.53088 6.62391 7.53088 8.00462C7.53088 9.38534 8.65017 10.5046 10.0309 10.5046C11.4116 10.5046 12.5309 9.38534 12.5309 8.00462C12.5309 6.62391 11.4116 5.50462 10.0309 5.50462ZM10.0309 0.5C14.6444 0.5 18.627 3.65001 19.732 8.06439C19.8326 8.4662 19.5884 8.87348 19.1866 8.97406C18.7848 9.07465 18.3775 8.83045 18.2769 8.42863C17.338 4.67796 13.9522 2 10.0309 2C6.10781 2 2.72098 4.68026 1.78374 8.43315C1.68337 8.83502 1.27623 9.07944 0.874363 8.97908C0.472492 8.87872 0.228071 8.47158 0.328434 8.06971C1.43153 3.65272 5.41536 0.5 10.0309 0.5Z"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>'},w7=({element:e,size:t,states:i={},config:r={}})=>{let n=[];const s=r==null?void 0:r.root[e],a=o=>{n.push(o),typeof t=="string"&&n.push(`${o}.${t}`)};if(a(e),typeof s=="object"&&!Array.isArray(s)&&s!==null){const{state:o,states:c}=s;let d=e,l=[];if(Array.isArray(c)){l=c.filter(u=>i[u]),l.sort();for(const u of l)a(`${d}.${u}`);if(l.length>1){const u=[d,...l].join(".");a(u)}}if(typeof o=="string"){const u=`${e}[${o}=${i[o]}]`;a(u);for(const g of l)a(`${u}.${g}`);if(l.length>1){const g=[u,...l].join(".");a(g)}}}return n},S7=({selectors:e,styles:t})=>{if(!Array.isArray(e)||t==null)return{};const i={};for(const r of e){const n=t[r];n!=null&&Object.assign(i,n)}return i},E7=({selectors:e,root:t})=>{if(!t||!Array.isArray(e))return[];let i=[];for(const r of e){const n=t[r];if(Array.isArray(n))i=[...n];else if(n){if(n.children&&(i=[...n.children]),Array.isArray(n.remove))for(const s of n.remove)i=i.filter(a=>typeof a=="string"?a!==s:Array.isArray(a)?a[0]!==s:!0);if(n.addBefore)for(const[s,a]of Object.entries(n.addBefore)){const o=i.findIndex(c=>typeof c=="string"?c===s:Array.isArray(c)?c[0]===s:!1);o>=0&&i.splice(o,0,...a)}Array.isArray(n.add)&&(i=i.concat(n.add)),Array.isArray(n.prepend)&&(i=n.prepend.concat(i))}}return i},qp=({elements:e,defaults:t,props:i={},deepProps:r=!1,elementProps:n={}})=>!Array.isArray(e)||e.length===0?null:e.map(s=>p($e,{element:s,defaults:t,props:i,childProps:r&&i,elementProps:n})),$e=({element:e,defaults:t,childProps:i={},props:r={},onlyChildren:n=!1,asHost:s=!1,deepProps:a=!1,elementProps:o={}},c)=>{var d;const{config:l,size:u,states:g}=t;let m,f={};Array.isArray(e)?[m,f]=e:m=e;const w=(d=l==null?void 0:l.root)===null||d===void 0?void 0:d[m];w!=null&&"props"in w&&(r=Object.assign(Object.assign({},w.props),r)),r=Object.assign(Object.assign({},r),f),m in o&&(r=Object.assign(Object.assign({},r),o[m]));const S=w7({element:m,size:u,states:g,config:l}),y=E7({selectors:S,root:l.root});if(n)return p(qp,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o});const _=S7({selectors:S,styles:l.styles});if(s)return p(M,Object.assign({},t,{style:_},r),p(qp,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o}),c);if(["dyte-header","dyte-controlbar"].includes(m)&&(r.disableRender=!0),m.startsWith("dyte-"))return p(m,Object.assign({},t,{style:_},r),p(qp,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o}),c);{const[T,C]=m.split("#");return p(T,{id:C,style:_},p(qp,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o}),c)}},hE={get:(e,t,i)=>(...r)=>{try{return Reflect.get(e,t,i).apply(e,r)}catch{return null}}};let x0;try{x0=new Proxy(localStorage,hE)}catch{x0=new Proxy({},hE)}const ka=x0,tb="dyte-prefs",UR=(e,t)=>{const i=JSON.parse(ka.getItem(tb)||"{}");i[e]=JSON.stringify(t),ka.setItem("dyte-prefs",JSON.stringify(i))},jR=e=>JSON.parse(ka.getItem(tb)||"{}")[e],T7=()=>{const e=JSON.parse(ka.getItem(tb)||"{}"),t=e["mirror-video"]?e["mirror-video"]==="true":!0,i=e["mute-notification-sounds"]?e["mute-notification-sounds"]==="true":!1;return{mirrorVideo:t,muteNotificationSounds:i}},Vg={},k7=(e,t,i)=>{const r=e.get(t);r?r.includes(i)||r.push(i):e.set(t,[i])},P7=(e,t)=>{let i;return(...r)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,e(...r)},t)}},C7=e=>!("isConnected"in e)||e.isConnected,gE=P7(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(C7))},2e3),R7=()=>{if(typeof GS!="function")return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const i=GS();i&&k7(e,t,i)},set:t=>{const i=e.get(t);i&&e.set(t,i.filter(WS)),gE(e)},reset:()=>{e.forEach(t=>t.forEach(WS)),gE(e)}}},dv=e=>typeof e=="function"?e():e,x7=(e,t=(i,r)=>i!==r)=>{const i=dv(e);let r=new Map(Object.entries(i!=null?i:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{var f;r=new Map(Object.entries((f=dv(e))!==null&&f!==void 0?f:{})),n.reset.forEach(w=>w())},a=()=>{n.dispose.forEach(f=>f()),s()},o=f=>(n.get.forEach(w=>w(f)),r.get(f)),c=(f,w)=>{const S=r.get(f);t(w,S,f)&&(r.set(f,w),n.set.forEach(y=>y(f,w,S)))},d=typeof Proxy>"u"?{}:new Proxy(i,{get(f,w){return o(w)},ownKeys(f){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(f,w){return r.has(w)},set(f,w,S){return c(w,S),!0}}),l=(f,w)=>(n[f].push(w),()=>{I7(n[f],w)});return{state:d,get:o,set:c,on:l,onChange:(f,w)=>{const S=l("set",(_,T)=>{_===f&&w(T)}),y=l("reset",()=>w(dv(e)[f]));return()=>{S(),y()}},use:(...f)=>{const w=f.reduce((S,y)=>(y.set&&S.push(l("set",y.set)),y.get&&S.push(l("get",y.get)),y.reset&&S.push(l("reset",y.reset)),y.dispose&&S.push(l("dispose",y.dispose)),S),[]);return()=>w.forEach(S=>S())},dispose:a,reset:s,forceUpdate:f=>{const w=r.get(f);n.set.forEach(S=>S(f,w,w))}}},I7=(e,t)=>{const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.length--)},A7=(e,t)=>{const i=x7(e,t);return i.use(R7()),i},{state:U,onChange:Fd}=A7({});var $R=function(){if(typeof Map<"u")return Map;function e(t,i){var r=-1;return t.some(function(n,s){return n[0]===i?(r=s,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var r=e(this.__entries__,i),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(i,r){var n=e(this.__entries__,i);~n?this.__entries__[n][1]=r:this.__entries__.push([i,r])},t.prototype.delete=function(i){var r=this.__entries__,n=e(r,i);~n&&r.splice(n,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,r){r===void 0&&(r=null);for(var n=0,s=this.__entries__;n<s.length;n++){var a=s[n];i.call(r,a[1],a[0])}},t}()}(),I0=typeof window<"u"&&typeof document<"u"&&window.document===document,Fg=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),O7=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Fg):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),M7=2;function D7(e,t){var i=!1,r=!1,n=0;function s(){i&&(i=!1,e()),r&&o()}function a(){O7(s)}function o(){var c=Date.now();if(i){if(c-n<M7)return;r=!0}else i=!0,r=!1,setTimeout(a,t);n=c}return o}var L7=20,N7=["top","right","bottom","left","width","height","size","weight"],U7=typeof MutationObserver<"u",j7=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=D7(this.refresh.bind(this),L7)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,r=i.indexOf(t);~r&&i.splice(r,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!I0||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),U7?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!I0||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,r=i===void 0?"":i,n=N7.some(function(s){return!!~r.indexOf(s)});n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),VR=function(e,t){for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},xd=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Fg},FR=Bm(0,0,0,0);function zg(e){return parseFloat(e)||0}function mE(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(r,n){var s=e["border-"+n+"-width"];return r+zg(s)},0)}function $7(e){for(var t=["top","right","bottom","left"],i={},r=0,n=t;r<n.length;r++){var s=n[r],a=e["padding-"+s];i[s]=zg(a)}return i}function V7(e){var t=e.getBBox();return Bm(0,0,t.width,t.height)}function F7(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return FR;var r=xd(e).getComputedStyle(e),n=$7(r),s=n.left+n.right,a=n.top+n.bottom,o=zg(r.width),c=zg(r.height);if(r.boxSizing==="border-box"&&(Math.round(o+s)!==t&&(o-=mE(r,"left","right")+s),Math.round(c+a)!==i&&(c-=mE(r,"top","bottom")+a)),!B7(e)){var d=Math.round(o+s)-t,l=Math.round(c+a)-i;Math.abs(d)!==1&&(o-=d),Math.abs(l)!==1&&(c-=l)}return Bm(n.left,n.top,o,c)}var z7=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof xd(e).SVGGraphicsElement}:function(e){return e instanceof xd(e).SVGElement&&typeof e.getBBox=="function"}}();function B7(e){return e===xd(e).document.documentElement}function H7(e){return I0?z7(e)?V7(e):F7(e):FR}function G7(e){var t=e.x,i=e.y,r=e.width,n=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return VR(a,{x:t,y:i,width:r,height:n,top:i,right:t+r,bottom:n+i,left:t}),a}function Bm(e,t,i,r){return{x:e,y:t,width:i,height:r}}var W7=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Bm(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=H7(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),q7=function(){function e(t,i){var r=G7(i);VR(this,{target:t,contentRect:r})}return e}(),J7=function(){function e(t,i,r){if(this.activeObservations_=[],this.observations_=new $R,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof xd(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new W7(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof xd(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;!i.has(t)||(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(r){return new q7(r.target,r.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),zR=typeof WeakMap<"u"?new WeakMap:new $R,BR=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=j7.getInstance(),r=new J7(t,i,this);zR.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){BR.prototype[e]=function(){var t;return(t=zR.get(this))[e].apply(t,arguments)}});var HR=function(){return typeof Fg.ResizeObserver<"u"?Fg.ResizeObserver:BR}();const Hm=e=>Os(e)?e.meta.viewType==="LIVESTREAM"&&e.stage.status!=="ON_STAGE":!1,K7=e=>{var t;return Os(e)?e.meta.viewType==="LIVESTREAM"&&((t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions.canLivestream):!1},Os=e=>{var t;return((t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions.isV2)&&(e==null?void 0:e.livestream)};var On;(function(e){e.BUFFERING="Buffering",e.ENDED="Ended",e.IDLE="Idle",e.PLAYING="Playing",e.READY="Ready"})(On||(On={}));var Lt;(function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.SESSION_DATA="PlayerSessionData",e.STATE_CHANGED="PlayerStateChanged",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUE="PlayerTextCue",e.TEXT_METADATA_CUE="PlayerTextMetadataCue",e.AD_CUE="PlayerAdCue",e.STREAM_SOURCE_CUE="PlayerStreamSourceCue",e.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",e.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",e.SEGMENT_METADATA="PlayerSegmentMetadata",e.PLAYER_METADATA="PlayerMetadata"})(Lt||(Lt={}));const Y7=[Lt.TIME_UPDATE,Lt.BUFFER_UPDATE,Lt.TEXT_METADATA_CUE,Lt.PLAYER_METADATA],Q7=[Lt.REBUFFERING,Lt.AUDIO_BLOCKED,Lt.PLAYBACK_BLOCKED,Lt.ERROR,Lt.RECOVERABLE_ERROR,Lt.WORKER_ERROR,Lt.NETWORK_UNAVAILABLE,Lt.ANALYTICS_EVENT,Lt.PLAYBACK_RATE_CHANGED,Lt.QUALITY_CHANGED,Lt.INITIALIZED],Z7=e=>{var t,i,r,n,s,a;return Os(e)?((i=(t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions)===null||i===void 0?void 0:i.canProduceAudio)==="ALLOWED"||((n=(r=e==null?void 0:e.self)===null||r===void 0?void 0:r.permissions)===null||n===void 0?void 0:n.canProduceScreenshare)==="ALLOWED"||((a=(s=e==null?void 0:e.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo)==="ALLOWED":!1},X7=e=>{var t,i,r,n,s,a,o,c;return Os(e)?((i=(t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions)===null||i===void 0?void 0:i.canProduceAudio)!=="NOT_ALLOWED"||((n=(r=e==null?void 0:e.self)===null||r===void 0?void 0:r.permissions)===null||n===void 0?void 0:n.canProduceScreenshare)!=="NOT_ALLOWED"||((a=(s=e==null?void 0:e.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo)!=="NOT_ALLOWED"||((c=(o=e==null?void 0:e.self)===null||o===void 0?void 0:o.permissions)===null||c===void 0?void 0:c.canLivestream):!1},e8=async e=>{if(e==null)return $;try{const t=await fetch(e);return t.ok?Object.assign({},$,await t.json()):$}catch{return $}},t8=640,i8=768,r8=1080,n8=2160,fE={sm:t8,md:i8,lg:r8,xl:n8},s8=e=>e>=fE.lg?"lg":e>=fE.md?"md":"sm",a8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}",GR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),U.meeting="joined"},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),U.meeting="waiting"},this.roomLeftListener=({state:t})=>{const i=this.states||U;if((i==null?void 0:i.roomLeftState)==="disconnected"){this.setStates({meeting:"ended",roomLeftState:t}),U.meeting="ended";return}this.setStates({meeting:"ended",roomLeftState:t}),U.meeting="ended",U.roomLeftState=t},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{if(["audio","video"].includes(t)){if(i==="ACCEPTED")return;const r={enabled:!0,kind:t};this.setStates({activePermissionsMessage:r}),U.activePermissionsMessage=r}},this.joinStateAcceptedListener=()=>{this.setStates({activeJoinStage:!0}),this.stateUpdate.emit({activeJoinStage:!0}),U.activeJoinStage=!0},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=B(),this.config=Be,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.middlewares={},this.newMeeting=void 0,this.iconPack=$}connectedCallback(){var e;this.resizeObserver=new HR(()=>this.handleResize()),this.resizeObserver.observe(this.host),this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&eE(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.initializePreferences()}clearListeners(e){e!=null&&(e.self.removeListener("roomJoined",this.roomJoinedListener),e.self.removeListener("socketServiceRoomJoined",this.roomJoinedListener),e.meta.removeListener("socketReconnected",this.roomJoinedListener),e.self.removeListener("roomLeft",this.roomLeftListener),e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.removeListener("waitlisted",this.waitlistedListener),e.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener))}disconnectedCallback(){var e;this.leaveOnUnmount&&((e=this.meeting)===null||e===void 0||e.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(e){var t,i;if(e!=null){if(this.loadConfigFromPreset&&e.self.config!=null){const r=e.self.config,{config:n,data:s}=_7(r);this.config===Be&&(this.config=n),this.showSetupScreen==null&&(this.showSetupScreen=s.showSetupScreen),e.connectedMeetings.supportsConnectedMeetings&&((t=U.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&((i=this.config)===null||i===void 0?void 0:i.designTokens)!=null&&typeof document<"u"&&eE(document.documentElement,this.config.designTokens),Hm(e)?e.self.addListener("socketServiceRoomJoined",this.roomJoinedListener):e.self.addListener("roomJoined",this.roomJoinedListener),e.self.addListener("waitlisted",this.waitlistedListener),e.self.addListener("roomLeft",this.roomLeftListener),e.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),e.connectedMeetings.supportsConnectedMeetings&&e.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),e.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),U.meeting="joined"):this.showSetupScreen&&this.newMeeting==null?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),U.meeting="setup"):e.joinRoom()}}async iconPackUrlChanged(e){this.iconPack=await e8(e)}listenState(e){e.stopPropagation(),this.setStates(e.detail)}initializePreferences(){const e=T7();this.setStates({prefs:e}),U.prefs=e}handleChangingMeeting(e){U.activeBreakoutRoomsManager=Object.assign(Object.assign({},U.activeBreakoutRoomsManager),{destinationMeetingId:e})}handleResize(){this.size=s8(this.host.clientWidth)}setStates(e){const t=Object.assign({},this.states);NR(t,e),this.states=t}render(){var e;const t={meeting:(e=this.newMeeting)!==null&&e!==void 0?e:this.meeting,size:this.size,states:this.states||U,config:this.config,iconPack:this.iconPack,t:this.t,middlewares:this.middlewares},i={"dyte-grid":{layout:this.gridLayout}};return p($e,{element:"dyte-meeting",defaults:t,asHost:!0,elementProps:i})}get host(){return Is(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};GR.style=a8;var o8=Object.freeze({__proto__:null,dyte_meeting:GR});const c8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",WR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),U.activeAI=!1},this.defaultSection="home",this.meeting=void 0,this.middlewares={},this.states=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var e,t,i,r;this.viewChanged(this.view),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.on("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.on("chatGPTReply",this.aiMessageHandler)}disconnectedCallback(){var e,t,i,r;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.off("chatGPTReply",this.aiMessageHandler)}viewChanged(e){e==="full-screen"&&(this.keydownListener=t=>{t.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(e){e==="transcriptions"&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),e==="home"&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(e){this.tab=e,U.activeSidebar=!0}transcriptionHandler(){this.tab!=="transcriptions"&&(this.newTranscriptionAvailable=!0)}aiMessageHandler(){this.tab!=="home"&&(this.newAiMessageAvailable=!0)}render(){var e;if(!this.middlewares.speech||!(!((e=this.states)===null||e===void 0)&&e.activeAI))return null;const t={meeting:this.meeting,config:this.config,states:this.states||U,size:this.size,t:this.t,iconPack:this.iconPack,middlewares:this.middlewares},i=this.middlewares.speech;return p(M,null,p("h3",{class:"title"},this.t("ai")),p("div",{id:"mobile-header"},p("dyte-button",{variant:"ghost",class:{active:this.tab==="home"},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&p("span",{class:"dot"},".")),p("dyte-button",{variant:"ghost",class:{active:this.tab==="transcriptions"},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&p("span",{class:"dot"},"."))),p("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("Close"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.tab==="home"&&p($e,{element:"dyte-ai-home",defaults:t,props:{aiClient:i,initialMessages:i.aiMesssages,meeting:this.meeting}}),this.tab==="transcriptions"&&p($e,{element:"dyte-ai-transcriptions",defaults:t,props:{aiClient:i,initialTranscriptions:i.transcriptions}}),this.tab==="personal"&&p($e,{element:"dyte-ai-chat",defaults:t}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};WR.style=c8;var d8=Object.freeze({__proto__:null,dyte_ai:WR});const l8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}",qR=class{constructor(e){V(this,e)}render(){return p(M,null,p("p",{class:"private-message"},"This conversation will just be visible to you and not to others in the call."),p("div",{class:"hint-message"},p("p",null,"Ask ",p("i",null,'"Hey AI, summarise this call"'),p("br",null)," or ",p("br",null),"Type ",p("i",null,`"Hey AI, what is today's agenda?"`))))}};qR.style=l8;var u8=Object.freeze({__proto__:null,dyte_ai_chat:qR});const JR=(e,t)=>{const i=t.getTime()-e.getTime();return Math.round(Math.abs(i/1e3/60))},p8=(e,t)=>{const i=JR(e,t);if(i<2)return"just now";if(i<60)return`${i}m ago`;const r=Math.round(i/60);if(i<90)return`about ${r}h ago`;if(r<24)return`${r}h ago`;const n=Math.round(r/24);return n<7?`${n}d ago`:`${Math.round(n/7)}w ago`},h8=e=>e.toDateString()+" "+e.toLocaleTimeString(),Zi=(e,t=20)=>e==null?"":e.length>t?`${e.substring(0,t)}...`:e,g8=e=>{const t=/^\d+$/;return/^\p{Emoji}+$/u.test(e)&&!t.test(e)},ib=e=>e!=null&&e.trim().toLowerCase().startsWith("javascript:")?"https://dyte.io":e,Lr=e=>(e=e==null?void 0:e.trim(),e===""?"Participant":e);function KR(e,t=2){return e.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,t).map(n=>n.charAt(0)).join("").toUpperCase()}const dp=({name:e,time:t,now:i})=>p("div",{class:"head"},p("div",{class:"name"},Zi(Lr(e),20)),p("div",{class:"time",title:h8(t)},p8(t,i))),Pa=(e,t=!0)=>{e!=null&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})},m8=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}`,YR=class{constructor(e){V(this,e),this.handleSubmit=t=>{var i,r;t.preventDefault(),t.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.sendMessageToChatGPT({action:"default",message:this.prompt}),this.prompt=""},this.handleSummarise=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"summarization"})},this.handleAgenda=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"agenda generation"})},this.handleMoM=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"action items generation"})},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0,this.middlewares={}}handleChatGPTReply(e){const t=this.messages.find(i=>e.action==="default"?i.id===e.id:i.id===e.id||i.action===this.mapMessageAction(e.action));t&&(t.loading||t.action!==this.mapMessageAction("default"))?this.messages=[...this.messages.map(i=>i.id===e.id||i.action===this.mapMessageAction(e.action)?Object.assign(Object.assign({},e),{action:this.mapMessageAction(e.action)}):i)]:this.messages=[...this.messages,Object.assign(Object.assign({},e),{action:this.mapMessageAction(e.action)})]}connectedCallback(){var e,t,i;this.initialMessages?this.messages=this.initialMessages.map(r=>Object.assign(Object.assign({},r),{action:this.mapMessageAction(r.action)})):!((e=this.middlewares)===null||e===void 0)&&e.speech&&setTimeout(()=>{var r;this.messages=(r=this.middlewares.speech.aiMesssages)===null||r===void 0?void 0:r.map(n=>Object.assign(Object.assign({},n),{action:this.mapMessageAction(n.action)}))},1e3),(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.on("chatGPTReply",r=>this.handleChatGPTReply(r))}disconnectedCallback(){var e,t;(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("chatGPTReply",i=>this.handleChatGPTReply(i))}messagesUpdated(){setTimeout(()=>{Pa(this.contentContainer,!1)},100)}mapMessageAction(e){switch(e){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return p(M,null,p("div",{class:"content scrollbar",ref:e=>this.contentContainer=e},p("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&p("div",{class:"hint-message"},p("p",null,"Ask ",p("i",null,'"Hey AI, summarise this call"'),p("br",null)," or ",p("br",null),"Type ",p("i",null,`"Hey AI, what is today's agenda?"`))),this.messages.length>0&&p("div",{class:""},this.messages.map(e=>p("div",{class:"message"},p(dp,{name:e.action,time:new Date(e.createdAt),now:new Date}),p("p",{class:"subtitle"},"Triggered by ",e.participantName),e.prompt&&p("div",{class:"prompt-text"},e.prompt),e.loading?p("div",{class:"loader"},p("dyte-spinner",{size:"sm"}),"\xA0\xA0Generating..."):p("div",{class:"body"},e.response))))),p("div",{class:"actions"},p("span",null,"Quick actions:"),p("div",null,p("button",{onClick:this.handleSummarise},"Summarise"),p("button",{onClick:this.handleAgenda},"Agenda"),p("button",{onClick:this.handleMoM},"MoM"))),p("form",{class:"prompt",onSubmit:this.handleSubmit},p("input",{value:this.prompt,onInput:e=>{this.prompt=e.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};YR.style=m8;var f8=Object.freeze({__proto__:null,dyte_ai_home:YR});const v8=":host{display:block}",QR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.middlewares={},this.aiActive=!1}statesChanged(e){const t=e||U;this.aiActive=t.activeAI}toggleAI(){const e=this.states||U;this.aiActive=!(e!=null&&e.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),U.activeAI=this.aiActive,U.activeMoreMenu=!1}render(){const e=this.t("ai.meeting_ai");return this.middlewares.speech?p(M,{title:e},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:e,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};QR.style=v8;var y8=Object.freeze({__proto__:null,dyte_ai_toggle:QR});const _8=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}`,ZR=class{constructor(e){V(this,e),this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=B(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0,this.middlewares={}}transcriptionHandler(e){this.transcriptions=[...this.transcriptions,e]}connectedCallback(){var e,t;this.initialTranscriptions&&(this.transcriptions=[...this.initialTranscriptions]),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.on("transcription",i=>this.transcriptionHandler(i))}disconnectedCallback(){var e,t;(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("transcription",i=>this.transcriptionHandler(i))}transcriptionsChanged(){setTimeout(()=>{Pa(this.contentContainer,!1)},100)}render(){return p(M,null,p("div",{class:"search-bar"},p("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:e=>this.participantQuery=e.target.value})),this.isProcessing&&p("div",{class:"processing"},p("p",null,"Processing audio....")),!this.isProcessing&&p("div",{class:"content scrollbar",ref:e=>this.contentContainer=e},p("div",{class:"started-message"},"Transcription started"),this.transcriptions.filter(e=>this.participantQuery?e.name.toLowerCase().includes(this.participantQuery.toLowerCase()):!0).map(e=>p("div",{class:"message"},p(dp,{name:e.name,time:new Date(e.date),now:new Date}),p("div",{class:"body"},e.transcript)))),this.captionViewEnabled&&p("dyte-ai-caption",null))}static get watchers(){return{transcriptions:["transcriptionsChanged"]}}};ZR.style=_8;var b8=Object.freeze({__proto__:null,dyte_ai_transcriptions:ZR});let XR=0;function w8(){return++XR}function S8(){XR=0}const ex="temp-";function E8(){return{id:`${ex}${Math.random().toString(36)}`,title:`Room ${w8()}`,participants:[]}}function lv(e){return e.includes(ex)}function T8(e,t){const i=e.length,r=Math.ceil(i/t),n=new Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e.slice(s,s+r),s+=r;return n.filter(a=>a.length)}function jt(e){var t;return(t=e.customParticipantId)!==null&&t!==void 0?t:e.clientSpecificId}function tx(e){const t=new Map;return[e.self,...e.participants.joined.toArray()].map(i=>{t.set(jt(i),i.picture)}),[e.connectedMeetings.parentMeeting,...e.connectedMeetings.meetings].flatMap(i=>i.participants).map(i=>({id:i.id,customParticipantId:jt(i),displayName:i.displayName,displayPictureUrl:i.displayPictureUrl!==""?i.displayPictureUrl:t.get(jt(i))}))}var hr=function(e,t,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(e,i):n?n.value=i:t.set(e,i),i},te=function(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)},k8=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i},pr,Gs,nn,sn,bo,mr,oa,an,uu,pu,ix,Bg,rx,nx,Rc;class P8{constructor(){pr.add(this),Gs.set(this,!1),nn.set(this,void 0),sn.set(this,void 0),bo.set(this,void 0),mr.set(this,void 0),oa.set(this,void 0),an.set(this,void 0),uu.set(this,void 0),pu.set(this,void 0)}get hasLocalChanges(){return te(this,Gs,"f")}get currentState(){let t,i=[];return Array.from(te(this,mr,"f").keys()).forEach(r=>{const n=te(this,an,"f").get(r);n.isParent?t=Object.assign(Object.assign({},n),{participants:te(this,pr,"m",Rc).call(this,r)}):i.push(Object.assign(Object.assign({},n),{participants:te(this,pr,"m",Rc).call(this,r)}))}),{parentMeeting:t,meetings:i}}get allConnectedMeetings(){return this.currentState.meetings.sort((t,i)=>t.title.localeCompare(i.title))}get allParticipants(){return Array.from(te(this,oa,"f").values())}get unassignedParticipants(){return te(this,pr,"m",Rc).call(this,te(this,nn,"f").parentMeeting.id)}getParticipantsForMeeting(t){return te(this,pr,"m",Rc).call(this,t)}addNewMeeting(){hr(this,Gs,!0,"f");const t=E8(),i=k8(t,["participants"]);return te(this,pr,"m",Bg).call(this,Object.assign(Object.assign({},i),{isParent:!1})),i}addNewMeetings(t){return Array.from({length:t}).map(()=>this.addNewMeeting())}updateMeetingTitle(t,i){te(this,an,"f").get(t).title=i,lv(t)||te(this,uu,"f").add(t)}deleteMeeting(t){hr(this,Gs,!0,"f");const i=te(this,an,"f").get(t),r=te(this,pr,"m",Rc).call(this,i.id).map(jt);this.assignParticipantsToMeeting(r,te(this,nn,"f").parentMeeting.id),te(this,an,"f").delete(i.id),te(this,mr,"f").delete(i.id),lv(i.id)||te(this,pu,"f").add(i.id)}assignParticipantsToMeeting(t,i){return hr(this,Gs,!0,"f"),t.forEach(r=>{const n=te(this,sn,"f").get(r);te(this,mr,"f").get(n).delete(r),te(this,mr,"f").get(i).add(r),te(this,sn,"f").set(r,i)}),this.currentState}assignParticipantsRandomly(){const t=T8(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach((i,r)=>{const n=t[r];n&&n.length!==0&&this.assignParticipantsToMeeting(n.map(s=>s.customParticipantId),i.id)}),this.currentState}unassignParticipants(t){const i=te(this,nn,"f").parentMeeting.id;return this.assignParticipantsToMeeting(t,i)}unassignAllParticipants(){const t=te(this,nn,"f").parentMeeting.id,i=this.allParticipants.map(jt);return this.assignParticipantsToMeeting(i,t)}updateCurrentState(t){te(this,Gs,"f")||te(this,pr,"m",ix).call(this,t),[t.parentMeeting,...t.meetings].forEach((i,r)=>{const n=Object.assign(Object.assign({},i),{isParent:r===0});te(this,pr,"m",Bg).call(this,n),i.participants.forEach(s=>{te(this,pr,"m",rx).call(this,s,n)})})}get meetingsToCreate(){return this.allConnectedMeetings.filter(t=>lv(t.id)).map(({id:t,title:i})=>({id:t,title:i}))}get meetingsToUpdate(){return this.allConnectedMeetings.filter(t=>te(this,uu,"f").has(t.id)).map(({id:t,title:i})=>({id:t,title:i}))}get meetingsToDelete(){return Array.from(te(this,pu,"f"))}get participantsToMove(){const t=new Map;return Array.from(te(this,sn,"f").keys()).forEach(i=>{const r=te(this,bo,"f").get(i),n=te(this,sn,"f").get(i);if(r===n)return;const s=`${r}__${n}`;t.has(s)||t.set(s,[]);const a=te(this,oa,"f").get(i);t.get(s).push(a.id)}),Array.from(t.keys()).map(i=>{const[r,n]=i.split("__");return{sourceMeetingId:r,destinationMeetingId:n,participantIds:t.get(i)}})}async applyChanges(t){const i=this.meetingsToCreate.length!==0?t.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),r=this.meetingsToUpdate.length!==0?t.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[n]=await Promise.all([i,r]);n&&n.forEach(s=>{this.meetingsToCreate.forEach(a=>{a.title===s.title&&te(this,pr,"m",nx).call(this,te(this,an,"f").get(a.id),s.id)})}),this.participantsToMove.length!==0&&this.participantsToMove.forEach(({sourceMeetingId:s,destinationMeetingId:a,participantIds:o})=>{t.connectedMeetings.moveParticipants(s,a,o)}),this.meetingsToDelete.length!==0&&t.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return hr(this,Gs,!1,"f"),this.updateCurrentState(te(this,nn,"f")),this.currentState}}Gs=new WeakMap,nn=new WeakMap,sn=new WeakMap,bo=new WeakMap,mr=new WeakMap,oa=new WeakMap,an=new WeakMap,uu=new WeakMap,pu=new WeakMap,pr=new WeakSet,ix=function(t){hr(this,nn,t,"f"),hr(this,an,new Map,"f"),hr(this,oa,new Map,"f"),hr(this,uu,new Set,"f"),hr(this,pu,new Set,"f"),hr(this,mr,new Map,"f"),hr(this,sn,new Map,"f"),hr(this,bo,new Map,"f"),hr(this,bo,new Map,"f"),te(this,nn,"f").parentMeeting.participants.forEach(i=>{te(this,bo,"f").set(jt(i),te(this,nn,"f").parentMeeting.id)}),te(this,nn,"f").meetings.forEach(i=>{i.participants.forEach(r=>{te(this,bo,"f").set(jt(r),i.id)})})},Bg=function(t){te(this,an,"f").has(t.id)||(te(this,an,"f").set(t.id,t),te(this,mr,"f").set(t.id,new Set))},rx=function(t,i){te(this,oa,"f").has(jt(t))||(te(this,oa,"f").set(jt(t),t),te(this,sn,"f").set(jt(t),i.id),te(this,mr,"f").get(i.id).add(jt(t)))},nx=function(t,i){const r=t.id;te(this,pr,"m",Bg).call(this,Object.assign(Object.assign({},t),{id:i})),te(this,an,"f").delete(r);const n=te(this,mr,"f").get(r);te(this,mr,"f").set(i,n),te(this,mr,"f").delete(r),Array.from(te(this,sn,"f").keys()).forEach(s=>{te(this,sn,"f").get(s)===r&&te(this,sn,"f").set(s,i)})},Rc=function(t){return Array.from(te(this,mr,"f").get(t)).map(r=>te(this,oa,"f").get(r))};const C8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",ul=1,sx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.updateLocalState=t=>{this.stateManager.updateCurrentState(t),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),this.roomConfig.mode==="create"&&!this.meeting.connectedMeetings.isActive&&S8(),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:t.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=t=>{const{detail:i}=t;this.stateManager.updateMeetingTitle(i.id,i.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=t=>{this.stateManager.allConnectedMeetings.find(r=>r.id===t)&&(this.stateManager.deleteMeeting(t),this.draftState=this.stateManager.currentState)},this.unassignParticipant=t=>{this.stateManager.unassignParticipants([t]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=t=>{this.selectedParticipants.length===0||this.assigningParticipants==!1||(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,t),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(t,i)=>{t.emit({activeBreakoutRoomsManager:{active:!0}}),i.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(t="start-breakout")=>{let i={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};t==="close-breakout"&&(i={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:i}),U.activeBreakoutRoomsManager={active:!1},U.activeConfirmationModal=i},this.close=()=>{var t;this.stateManager.discardChanges(),(t=this.stateUpdate)===null||t===void 0||t.emit({activeBreakoutRoomsManager:{active:!1}}),U.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=B()}onSelectedParticipantsChanged(e){e.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissions=this.meeting.self.permissions.connectedMeetings,this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.stateManager=new P8,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(e){this.ephemeralStatusText=e,setTimeout(()=>{this.ephemeralStatusText=""},3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(e){const{detail:t}=e,i=jt(t);i!=null&&this.unassignParticipant(i)}toggleDragMode(e){this.isDragMode=e.detail}assignParticipantsRandomly(){this.stateManager.unassignedParticipants.length!==0&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(e){const t=jt(this.meeting.self);this.stateManager.assignParticipantsToMeeting([t],e),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach(e=>this.stateManager.deleteMeeting(e.id)),await this.applyChanges()}updateSelectedParticipants(e){this.selectedParticipants=e.detail}updateAllParticipants(e){this.selectedParticipants=e.detail}getStatusText(){if(this.ephemeralStatusText!=="")return this.ephemeralStatusText;let e="";return this.roomConfig.mode==="create"&&(e=this.t("breakout_rooms.status.assign_multiple"),this.selectedParticipants.length!==0&&(e=this.t("breakout_rooms.status.select_room"))),e}getApproxDistribution(){const e=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||ul);return Math.max(ul,Math.round(e))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return this.permissions.canAlterConnectedMeetings===!1}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter(e=>e.id===this.meeting.meta.roomName)}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?p("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return p(M,null,p("div",{class:"room-switcher-container"},p("header",null,p("dyte-icon",{icon:this.iconPack.breakout_rooms}),p("span",null,this.t("breakout_rooms.join_breakout_header"))),p("div",{class:"rooms",ref:e=>this.selectorRef=e},this.renderMainRoomMaybe(),this.getPermittedRooms().map((e,t)=>p("dyte-breakout-room-manager",{key:e.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:t===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(e.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(e.id),onRoomJoin:()=>this.joinRoom(e.id),states:this.states,room:Object.assign({},e),iconPack:this.iconPack,t:this.t,allowDelete:!1})))))}renderLoading(){return p(M,null,p("div",{class:"loading-content"},p("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return p(M,null,p("div",{class:"room-config"},p("header",null,p("dyte-icon",{icon:this.iconPack.breakout_rooms}),p("span",null,this.t("breakout_rooms.room_config_header"))),p("div",{class:"create-room"},p("p",null,this.t("breakout_rooms.num_of_rooms")),p("dyte-counter",{value:this.roomConfig.rooms,minValue:ul,iconPack:this.iconPack,t:this.t,onValueChange:e=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+e.detail,ul)})}})),p("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",p("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),p("footer",null,p("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:this.roomConfig.rooms===0,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():this.roomConfig.step==="room-config"?this.renderRoomConfig():p(M,null,p("div",{class:"participant-config-wrapper"},p("div",{class:"participant-config"},p("aside",{part:"menu"},p("header",null,this.t("breakout_rooms.assign_participants")),p("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map(jt),selectedParticipantIds:this.selectedParticipants},p("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},p("dyte-button",{disabled:this.roomConfig.mode==="edit"||this.stateManager.unassignedParticipants.length===0,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},p("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),this.selectedParticipants.length!==0&&p("div",{class:"participants-assign-actions"},p("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),p("dyte-button",{disabled:this.roomConfig.mode==="edit",iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),p("div",{class:"assign-rooms"},p("div",{class:"row"},p("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&p("div",{class:"cta-buttons"},p("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},p("div",{onClick:this.onAddNewRoom},p("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),this.stateManager.allConnectedMeetings.flatMap(e=>e.participants).length!==0&&p("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),p("div",{class:"rooms",ref:e=>this.selectorRef=e},this.renderMainRoomMaybe(),this.getPermittedRooms().map((e,t)=>p("dyte-breakout-room-manager",{key:e.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:t===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(e.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(e.id),onRoomJoin:()=>this.joinRoom(e.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},e),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>ul})),p("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},p("div",null,p("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),p("span",null,this.t("breakout_rooms.add_room_brief"))))))),p("div",{class:"participant-config-actions"},p("div",{class:{"status-bar":!0,"ephemeral-status":this.ephemeralStatusText!==""}},this.ephemeralStatusText!==""&&p("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),p("div",{class:"breakout-actions"},this.roomConfig.mode==="create"&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),this.roomConfig.mode==="edit"&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};sx.style=C8;var R8=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:sx});const A0={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures"},x8=e=>e.connectedMeetings.supportsConnectedMeetings,Hg=e=>{var t;return Os(e)||((t=e==null?void 0:e.__internals__)===null||t===void 0?void 0:t.features.hasFeature("feat_paginated_chat"))},I8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",ax=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.breakoutRoomToggle=()=>{var t,i,r;const n=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(!((i=(t=this.states)===null||t===void 0?void 0:t.activeBreakoutRoomsManager)===null||i===void 0)&&i.active),mode:n}}),U.activeBreakoutRoomsManager={active:!(!((r=U.activeBreakoutRoomsManager)===null||r===void 0)&&r.active),mode:n}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B()}render(){const e=this.meeting.self.permissions.connectedMeetings;if(!(!e.canAlterConnectedMeetings&&!this.meeting.connectedMeetings.isActive)&&!(!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting)&&!!x8(this.meeting))return p(M,{title:this.t("breakout_rooms")},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}};ax.style=I8;var A8=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:ax});const O8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}",ox=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=B(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var e;(e=this.stateUpdate)===null||e===void 0||e.emit({activeBroadcastMessageModal:!1}),U.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout(()=>{this.close()},2e3)}render(){return p(M,null,p("div",{class:"content-col"},p("h2",null,"Broadcast message to"),p("select",{onChange:e=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:e.target.value})}},p("option",null,"Everyone"),p("option",null,"List of rooms")),p("textarea",{placeholder:"Type message here...",onInput:e=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:e.target.value})}}),this.successMessage?p("p",null,"Message sent to ",this.messagePayload.to,p("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):p("div",{class:"content-row"},p("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel"),"\u2002",p("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};ox.style=O8;var M8=Object.freeze({__proto__:null,dyte_broadcast_message_modal:ox});const D8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",cx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStateLeftListener=()=>{this.canProduceVideo=!1},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{t==="video"&&(this.cameraPermission=i)},this.toggleCamera=()=>{var t,i,r,n,s,a,o,c,d,l,u,g;if((t=this.meeting)===null||t===void 0||t.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.videoEnabled),permission:this.cameraPermission,canProduce:(a=(s=(n=this.meeting)===null||n===void 0?void 0:n.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((u=this.meeting)===null||u===void 0?void 0:u.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:f}),U.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceVideo||(m.videoEnabled?m.disableVideo():m.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c;(e=this.meeting)===null||e===void 0||e.self.removeListener("videoUpdate",this.videoUpdateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageJoined",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStateLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.updateCanProduce(e),this.cameraPermission=t.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=t.videoEnabled,t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStateLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceVideo==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceVideo=!1,n&&!a?this.canProduceVideo=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceVideo=!0),t.permissions.canProduceVideo==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceVideo=!0))}hasPermissionError(){return this.cameraPermission==="DENIED"||this.cameraPermission==="SYSTEM_DENIED"}getState(){let e="",t="",i="",r={},n=this.hasPermissionError(),s=this.cameraPermission==="COULD_NOT_START";return this.videoEnabled&&!n?(t=this.t("video_on"),i=this.iconPack.video_on):(t=this.t("video_off"),i=this.iconPack.video_off,r["red-icon"]=!0),s?e=this.t("Unable to capture video"):this.cameraPermission==="SYSTEM_DENIED"?e=this.t("perm_sys_denied"):this.cameraPermission==="DENIED"?e=this.t("perm_browser_denied"):e=this.videoEnabled?this.t("Disable Camera"):this.t("Enable Camera"),{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n||s,disable:n}}render(){if(!this.canProduceVideo)return null;const{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n,disable:s}=this.getState();return p(M,{title:t},p("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:r,variant:this.variant,label:t,icon:i,onClick:this.toggleCamera,showWarning:n,disabled:s})))}static get watchers(){return{meeting:["meetingChanged"]}}};cx.style=D8;var L8=Object.freeze({__proto__:null,dyte_camera_toggle:cx});const dx=e=>{let t=null;try{const i=JSON.parse(e.message),{target:r,message:n}=i;r===void 0||n===void 0?t=e:t=Object.assign(Object.assign({},e),{targetUserIds:r,message:n})}catch{t=e}return t};function Lh(e){return e.sort((t,i)=>t.localeCompare(i)).join("_")}function lx(e,t){if(e!=null){for(const i of e)if(i.kind==="file"){const r=i.getAsFile();i.type.startsWith("image/")?t("image",r):t("file",r)}}}const N8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.2s slide-up ease-in;animation:0.2s slide-up ease-in}dyte-chat-messages-ui{flex:1 0 0}",ux=class{constructor(e){V(this,e),this.disconnectMeeting=t=>{var i;this.isPrivateChatSupported()&&(t==null||t.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),t==null||t.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),(i=t==null?void 0:t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter(t=>this.privatePresetFilter.length===0||this.privatePresetFilter.includes(t.presetName)),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>Hg(this.meeting),this.updateUnreadCountGroups=t=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),t)},this.isPrivateChatSupported=()=>{var t,i,r;return this.canPrivateMessage&&!this.disablePrivateChat&&((r=(i=(t=this.meeting)===null||t===void 0?void 0:t.__internals__)===null||i===void 0?void 0:i.features)===null||r===void 0?void 0:r.getFeatureValue("chat_socket_server"))==="socket-service"},this.updateRecipients=t=>{if(typeof t.detail=="string")this.chatRecipientId="everyone",this.selectedParticipant=null;else{const{userId:i}=t.detail;this.chatRecipientId=i,this.selectedParticipant=this.participants.find(r=>r.userId===i)}if(this.chatRecipientId!=="everyone"){const i=[this.chatRecipientId,this.meeting.self.userId],r=Lh(i);this.selectedGroup=r}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.t=B(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0}connectedCallback(){this.meetingChanged(this.meeting),!(this.meeting&&!this.meeting.chat)&&this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",e=>{e.preventDefault(),this.dropzoneActivated=!0}),this.host.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.host.addEventListener("drop",e=>{e.preventDefault(),this.dropzoneActivated=!1,lx(e.dataTransfer.items,(t,i)=>{var r,n,s,a;switch(t){case"image":this.isFileMessagingAllowed()&&((n=(r=this.meeting)===null||r===void 0?void 0:r.chat)===null||n===void 0||n.sendImageMessage(i,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&((a=(s=this.meeting)===null||s===void 0?void 0:s.chat)===null||a===void 0||a.sendFileMessage(i,this.getRecipientPeerIds()));break}})}))}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i,r,n,s,a;t!=null&&this.disconnectMeeting(t),!(e&&!e.chat)&&e!=null&&(this.canSend=e.self.permissions.chatPublic.canSend,this.canSendTextMessage=e.self.permissions.chatPublic.text,this.canSendFiles=e.self.permissions.chatPublic.files,this.canPrivateMessage=((i=e.self.permissions.chatPrivate)===null||i===void 0?void 0:i.canSend)||((r=e.self.permissions.chatPrivate)===null||r===void 0?void 0:r.canReceive),this.canSendPrivateTexts=(n=e.self.permissions.chatPrivate)===null||n===void 0?void 0:n.text,this.canSendPrivateFiles=(s=e.self.permissions.chatPrivate)===null||s===void 0?void 0:s.files,this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:o})=>{this.addToChatGroup(o),this.chatGroups=Object.assign({},this.chatGroups)},this.onParticipantUpdate(),this.usePaginatedChat()||(a=e.chat)===null||a===void 0||a.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(e.participants.joined.addListener("participantJoined",this.onParticipantUpdate),e.participants.joined.addListener("participantLeft",this.onParticipantUpdate)))}chatGroupsChanged(e){var t,i;if(!this.isPrivateChatSupported())return;const r={};for(const n in e){const s=(t=Vg[n])!==null&&t!==void 0?t:0;r[n]=e[n].filter(a=>a.type=="chat"&&a.message.time>s&&a.message.userId!==this.meeting.self.userId).length,(n===Lh([this.meeting.self.userId,(i=this.selectedParticipant)===null||i===void 0?void 0:i.userId])||n==="everyone"&&this.selectedParticipant===null)&&(r[n]=0,Vg[n]=new Date)}this.updateUnreadCountGroups(r)}initializeChatGroups(){var e;(e=this.meeting.chat)===null||e===void 0||e.messages.forEach(t=>{this.addToChatGroup(t)})}addToChatGroup(e){var t;const i=dx(e);let r="everyone";if(((t=i.targetUserIds)===null||t===void 0?void 0:t.length)>0){const n=new Set([i.userId,...i.targetUserIds]);r=Lh(Array.from(n))}this.chatGroups[r]===void 0&&(this.chatGroups[r]=[]),this.chatGroups[r]=[...this.chatGroups[r],{type:"chat",message:i}]}getRecipientPeerIds(){let e=[];return this.chatRecipientId!=="everyone"&&(e=[this.selectedParticipant.id]),e}render(){var e,t,i,r;const n={iconPack:this.iconPack,t:this.t,size:this.size},s=(e=this.meeting)===null||e===void 0?void 0:e.self.userId,a=this.chatGroups[this.selectedGroup]||[];return p(M,null,this.isFileMessagingAllowed()&&p("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},p("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),p("p",null,this.t("Drop files/images to send"))),this.isPrivateChatSupported()&&p("dyte-chat-selector-ui",Object.assign({selfUserId:s,groups:this.participants,selectedGroupId:(t=this.selectedParticipant)===null||t===void 0?void 0:t.userId,unreadCounts:this.unreadCountGroups,onDyteChatGroupChanged:this.updateRecipients},n)),this.usePaginatedChat()?p("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):p("dyte-chat-messages-ui",Object.assign({messages:a,selfUserId:s,selectedGroup:this.selectedGroup},n)),p("dyte-chat-composer-ui",Object.assign({canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(!((r=(i=this.meeting)===null||i===void 0?void 0:i.__internals__)===null||r===void 0)&&r.features.hasFeature(A0.DISABLE_EMOJI_PICKER)),onDyteNewMessage:o=>{var c,d,l,u,g,m;const f=o.detail;switch(f.type){case"text":(d=(c=this.meeting)===null||c===void 0?void 0:c.chat)===null||d===void 0||d.sendTextMessage(f.message,this.getRecipientPeerIds());break;case"image":(u=(l=this.meeting)===null||l===void 0?void 0:l.chat)===null||u===void 0||u.sendImageMessage(f.file,this.getRecipientPeerIds());break;case"file":(m=(g=this.meeting)===null||g===void 0?void 0:g.chat)===null||m===void 0||m.sendFileMessage(f.file,this.getRecipientPeerIds());break}}},n),p("slot",{name:"chat-addon",slot:"chat-addon"})))}get host(){return Is(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};ux.style=N8;var U8=Object.freeze({__proto__:null,dyte_chat:ux});const O0=e=>{if(e&&!e.chat)return!1;const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:r}=e.self.permissions;return i.canSend||i.text||i.files||r.canSend||r.canReceive||r.files||r.text},M0=e=>{if(e&&!e.polls)return!1;const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.polls)return!1;const{polls:i}=e.self.permissions;return i.canCreate||i.canView||i.canVote},D0=e=>{var t,i;if(Os(e)&&!(!((t=e.self.permissions)===null||t===void 0)&&t.acceptPresentRequests)||e&&!e.participants)return!1;if(e.meta.viewType==="LIVESTREAM")return e.self.permissions.acceptPresentRequests||((i=e==null?void 0:e.stage)===null||i===void 0?void 0:i.status)==="ON_STAGE";const r=e==null?void 0:e.self.config;return!(r&&!r.controlBar.elements.participants)},L0=e=>{if(Hm(e)||e&&!e.plugins)return!1;if(e.meta.viewType==="LIVESTREAM")return e.stage.status==="ON_STAGE";const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.plugins)return!1;const{plugins:i}=e.self.permissions;return i.canClose||i.canStart},j8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",px=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onChatUpdate=({action:t,message:i})=>{var r;this.chatActive||t==="add"&&i.userId!==((r=this.meeting)===null||r===void 0?void 0:r.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const t=this.states||U;this.chatActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="chat"),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),U.activeSidebar=this.chatActive,U.activeMoreMenu=!1,U.sidebar=this.chatActive?"chat":"none",this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":"none",activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=O0(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Fd("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i,r;(t=(e=this.meeting)===null||e===void 0?void 0:e.chat)===null||t===void 0||t.removeListener("chatUpdate",this.onChatUpdate),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(e){var t,i,r,n;e!=null&&(Hg(e)&&((t=e.chat)===null||t===void 0||t.getMessages(new Date().getTime(),1,!0).then(s=>{var a;!((a=s==null?void 0:s.messages)===null||a===void 0)&&a.length&&(this.hasNewMessages=!0)})),this.unreadMessageCount=((i=e.chat)===null||i===void 0?void 0:i.messages.length)||0,(r=e.chat)===null||r===void 0||r.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=O0(e),(n=e==null?void 0:e.stage)===null||n===void 0||n.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||U;t!=null&&(this.chatActive=t.activeSidebar===!0&&t.sidebar==="chat")}render(){if(!!this.canViewChat)return p(M,{title:this.t("chat")},Hg(this.meeting)?this.hasNewMessages&&p("div",{class:"unread-count-dot",part:"unread-count-dot"}):this.unreadMessageCount!==0&&!this.chatActive&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};px.style=j8;var $8=Object.freeze({__proto__:null,dyte_chat_toggle:px});const V8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",uv=e=>Math.trunc(e).toString().padStart(2,"0"),hx=class{constructor(e){V(this,e),this.disconnectMeeting=()=>{var t,i;this.timeout&&clearTimeout(this.timeout),typeof this.request=="number"&&cancelAnimationFrame(this.request),(i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0||i.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var t,i,r;this.startedTime=(r=(i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0?void 0:i.meetingStartedTimestamp)===null||r===void 0?void 0:r.toISOString()},this.meeting=void 0,this.iconPack=$,this.t=B(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(e){var t,i,r;this.disconnectMeeting(),e!=null&&(this.startedTime=(i=(t=e.meta)===null||t===void 0?void 0:t.meetingStartedTimestamp)===null||i===void 0?void 0:i.toISOString(),(r=e.meta)===null||r===void 0||r.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(e){if(e!==void 0){const t=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(t))},500)};this.request=requestAnimationFrame(t)}}getFormattedTime(){if(this.timeDiff==null)return null;const e=this.timeDiff;let t="";return e>=3600&&(t=`${uv(e/3600)}:`),t+=`${uv(e%3600/60)}:${uv(e%60)}`,t}render(){return p(M,{tabIndex:0,role:"timer","aria-live":"off"},this.startedTime!==void 0&&[p("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),p("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};hx.style=V8;var F8=Object.freeze({__proto__:null,dyte_clock:hx});const z8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",gx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.close=()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),U.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClose(this.stateUpdate,U,this.meeting)},this.onConfirmation=async()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),U.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClick(this.stateUpdate,U,this.meeting)},this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=B()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var e,t;const i=this.states.activeConfirmationModal;return p(M,null,p("div",{class:"leave-modal"},p("div",{class:"header"},p("h2",{class:"title"},i.header?this.t(i.header):this.t("confirmation_modal.header"))),p("p",{class:"message"},i.content?this.t(i.content):""),p("div",{class:"content"},p("div",{class:"leave-meeting"},p("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),p("dyte-button",{onClick:()=>this.onConfirmation(),variant:(t=(e=this.states.activeConfirmationModal)===null||e===void 0?void 0:e.variant)!==null&&t!==void 0?t:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};gx.style=z8;var B8=Object.freeze({__proto__:null,dyte_confirmation_modal:gx});const H8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;height:var(--dyte-space-16, 64px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);z-index:10}",mx=class{constructor(e){V(this,e),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Be,this.states=void 0,this.iconPack=$,this.t=B(),this.middlewares={},this.size=void 0}render(){const e={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size,middlewares:this.middlewares};return p(M,null,!this.disableRender&&p($e,{element:"dyte-header",defaults:e,onlyChildren:!0}),p("slot",null))}};mx.style=H8;var G8=Object.freeze({__proto__:null,dyte_controlbar:mx});const W8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",fx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onDyteDialogClose=(t,i)=>{U[t]=i,this.stateUpdate.emit({[t]:i})},this.leaveStage=async()=>{var t,i,r;this.meeting.meta.viewType==="LIVESTREAM"&&((t=this.meeting.stage)===null||t===void 0?void 0:t.status)==="ACCEPTED_TO_JOIN_STAGE"&&await((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.leaveStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.join(),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.joinStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=Be,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B()}render(){var e,t,i,r;const n={meeting:this.meeting,states:this.states||U,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},s=this.states||U;if((s==null?void 0:s.image)!=null){const a=s.image,o=()=>{this.stateUpdate.emit({image:null}),U.image=null};return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:o,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-image-viewer",defaults:n,props:{image:a,onClose:o}})))}else{if((s==null?void 0:s.activeSettings)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-settings",defaults:n})));if((s==null?void 0:s.activeLeaveConfirmation)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-leave-meeting",defaults:n})));if(((e=s==null?void 0:s.activePermissionsMessage)===null||e===void 0?void 0:e.enabled)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-permissions-message",defaults:n})));if((s==null?void 0:s.activeRemoteAccessManager)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-remote-access-manager",defaults:n})));if(((t=s==null?void 0:s.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.active)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-breakout-rooms-manager",defaults:n,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(((i=s==null?void 0:s.activeConfirmationModal)===null||i===void 0?void 0:i.active)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-confirmation-modal",defaults:n})));if(((r=s==null?void 0:s.activeOverlayModal)===null||r===void 0?void 0:r.active)===!0)return p(M,null,p("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(s!=null&&s.activeBroadcastMessageModal)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-broadcast-message-modal",defaults:n})));if((s==null?void 0:s.activeJoinStage)===!0){const a={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:this.leaveStage,iconPack:this.iconPack,t:this.t},p("dyte-join-stage",Object.assign({dataConfig:a,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.leaveStage},n))))}else if((s==null?void 0:s.activeMuteAllConfirmation)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-mute-all-confirmation",defaults:n})))}return null}};fx.style=W8;var q8=Object.freeze({__proto__:null,dyte_dialog_manager:fx});const J8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}",vx=class{constructor(e){V(this,e),this.config=Be,this.size=void 0,this.icon=$,this.states=void 0,this.t=B(),this.iconPack=$,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),Fd("roomLeftState",()=>this.statesChanged())}getBreakoutRoomsMessage(e){var t;let i;return(e==null?void 0:e.roomLeftState)==="connected-meeting"&&(((t=U.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?i="breakout_rooms.move_reason.switch_main_room":i="breakout_rooms.move_reason.switch_room"),i}statesChanged(e){const t=e||U;if(t!=null)switch(t==null?void 0:t.roomLeftState){case"left":this.message="You left the meeting";break;case"kicked":this.message="You were removed from the meeting";break;case"disconnected":this.message="The call ended because the connection was lost.";break;case"rejected":this.message="Your request to join the meeting was denied.";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(t);break;default:this.message="The meeting ended"}}renderBreakoutRoomScreen(){return p(M,null,p("div",{class:"ctr",part:"container"},p("dyte-icon",{icon:this.iconPack.breakout_rooms}),p("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const e=this.states||U;return e.roomLeftState==="connected-meeting"?this.renderBreakoutRoomScreen():p(M,null,p("div",{class:"ctr",part:"container"},p("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),p("p",{part:"message"},this.t(this.message)),(e==null?void 0:e.roomLeftState)==="disconnected"&&p("span",{part:"description"},this.t("Please check your internet connection and try again."))))}static get watchers(){return{states:["statesChanged"]}}};vx.style=J8;var K8=Object.freeze({__proto__:null,dyte_ended_screen:vx});const yx=e=>{e!=null&&(e.requestFullscreen!=null?e.requestFullscreen():e.mozRequestFullScreen!=null?e.mozRequestFullScreen():e.webkitRequestFullscreen!=null?e.webkitRequestFullscreen():e.msRequestFullscreen!=null&&e.msRequestFullscreen())},_x=()=>{document.exitFullscreen!=null?document.exitFullscreen():document.mozExitFullScreen!=null?document.mozExitFullScreen():document.webkitExitFullscreen!=null?document.webkitExitFullscreen():document.msExitFullscreen!=null&&document.msExitFullscreen()},bx=()=>document.fullscreenElement!=null||document.webkitCurrentFullScreenElement!=null,wx=()=>typeof document<"u"?document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled:!1,Y8=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Sx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=bx()},this.toggleFullScreen=()=>{const t=document.querySelector("dyte-meeting");!t||(this.fullScreenActive?(_x(),this.fullScreenActive=!1):(yx(t),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.size=void 0,this.iconPack=$,this.t=B(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=wx(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?p(M,{title:this.t("Fullscreen")},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};Sx.style=Y8;var Q8=Object.freeze({__proto__:null,dyte_fullscreen_toggle:Sx});const ls=720,us=1280,Z8="#000000",X8=e=>{switch(e){case 0:case 1:return[us,ls];case 2:return[Math.floor(us/2),ls];case 3:case 4:return[Math.floor(us/2),Math.floor(ls/2)];case 5:case 6:return[Math.floor(us/3),Math.floor(ls/2)];default:return[Math.floor(us/3),Math.floor(ls/2)]}},e9=(e,t,i,r,n,s)=>{let a=.5,o=.5;const c=n,d=s,l=Math.min(i/c,r/d);let u=c*l,g=d*l,m,f,w,S,y=1;return u<i&&(y=i/u),Math.abs(y-1)<1e-14&&g<r&&(y=r/g),u*=y,g*=y,w=c/(u/i),S=d/(g/r),m=(c-w)*a,f=(d-S)*o,m<0&&(m=0),f<0&&(f=0),w>c&&(w=c),S>d&&(S=d),[m,f,w,S,e,t,i,r]};var Yi;(function(e){e.CAMERA="CAMERA",e.MIC="MIC",e.END="END"})(Yi||(Yi={}));class t9{constructor(){this.tracks=[],this.sources=[],this.enabled=!1}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}cleanup(){this.isSupported()&&document.exitPictureInPicture!==void 0&&document.pictureInPictureElement!==null&&document.exitPictureInPicture(),this.canvas=void 0,this.video=void 0,this.tracks=[],this.request=void 0}createCanvas(){const t=document.createElement("canvas");t.height=ls,t.width=us,this.canvas=t}setupEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("hangup",()=>{t(Yi.END)})}mountAudioEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",()=>{t(Yi.MIC)})}mountVideoEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",()=>{t(Yi.CAMERA)})}unmountAudioEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",void 0)}unmountVideoEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",void 0)}drawGrid(t,i,r){if(this.canvas===void 0)return;const n=this.canvas.getContext("2d");n.fillStyle=Z8,n.fillRect(0,0,us,ls);let s=0,a=0;for(;s<ls-5;){let o=0;for(;o<us-5&&a<r;){const c=this.tracks[a],[d,l,u,g,m,f,w,S]=e9(o,s,t,i,c.videoWidth,c.videoHeight);n.drawImage(c,d,l,u,g,m,f,w,S),a+=1,o+=t}s+=i}}paintCanvas(){const t=this.tracks.length,[i,r]=X8(t);this.drawGrid(i,r,t)}animate(){this.tracks!==void 0&&this.paintCanvas(),this.request!==void 0&&(this.request=requestAnimationFrame(()=>this.animate()))}create(t,i,r){this.cleanup(),this.createCanvas(),this.setupEvents(r);const n=document.createElement("video");n.height=ls,n.width=us,n.autoplay=!0,n.srcObject=this.canvas.captureStream(24),this.video=n,this.video.onloadedmetadata=()=>{try{t(),this.video.onleavepictureinpicture=()=>{i()}}catch(s){i(s.getMessage())}},this.paintCanvas()}updateMediaSession(t,i){navigator.mediaSession!==void 0&&(t===Yi.CAMERA&&navigator.mediaSession.setCameraActive!==void 0&&navigator.mediaSession.setCameraActive(i),t===Yi.MIC&&navigator.mediaSession.setMicrophoneActive!==void 0&&navigator.mediaSession.setMicrophoneActive(i))}updateVideoSources(){const t=Object.values(this.sources).filter(r=>r.enabled),i=[];t.map(r=>{i.push(r.element)}),this.tracks=i}enableSource(t){this.sources[t]!==void 0&&(this.sources[t].enabled=!0),this.updateVideoSources()}disableSource(t){this.sources[t]!==void 0&&(this.sources[t].enabled=!1),this.updateVideoSources()}addSource(t,i,r){this.sources[t]={element:i,enabled:r}}removeSource(t){delete this.sources[t]}removeAllSource(){this.sources=[]}enable(){this.enabled=!0,this.request=requestAnimationFrame(()=>this.animate()),this.video.requestPictureInPicture()}disable(){this.enabled=!1,cancelAnimationFrame(this.request),this.request=void 0,document.exitPictureInPicture()}}const gt=new t9;function i9({dimensions:e,count:t,aspectRatio:i,gap:r}){const{width:n,height:s,rows:a,cols:o}=r9({dimensions:e,count:t,aspectRatio:i,gap:r}),c=n9({parentDimensions:e,dimensions:{width:n,height:s},rows:a,cols:o,count:t,gap:r});return{width:n,height:s,getPosition:c}}function r9({count:e,dimensions:t,aspectRatio:i,gap:r}){let{width:n,height:s}=t;if(n===0||s===0)return{width:0,height:0,rows:1,cols:1};n-=r*2,s-=r*2;const a=r,o=e,c=s9(i);let d=0,l=0,u=1,g=1;const m=[];for(let f=1;f<=o;f++)m.push((n-a*(f-1))/f),m.push((s-a*(f-1))/(f*c));m.sort((f,w)=>w-f);for(const f of m)if(d=f,l=d*c,u=Math.floor((n+a)/(d+a)),g=Math.floor((s+a)/(l+a)),u*g>=o){g=Math.ceil(o/u);break}return{width:d,height:l,rows:g,cols:u}}function n9({parentDimensions:e,dimensions:t,rows:i,cols:r,count:n,gap:s}){const{width:a,height:o}=e,{width:c,height:d}=t,l=(o-(d*i+(i-1)*s))/2;let u=(a-(c*r+(r-1)*s))/2;const g=d+s,m=c+s;let f=0,w=0;const S=n%r;function y(_){const T=n-_;T===S&&(u=(a-(c*T+(T-1)*s))/2);const C=l+w*g,D=u+f*m;return f++,(_+1)%r===0&&(w++,f=0),{top:C,left:D}}return y}const s9=e=>{const[t,i]=e.split(":");return Number.parseInt(i)/Number.parseInt(t)},rb={spotlight:"sm",mixed:"sm"},a9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;overflow:hidden;flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition:0.4s}dyte-participant-tile{aspect-ratio:initial;box-sizing:border-box}.webinar-stage{box-sizing:border-box;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}.livestream-stage{box-sizing:border-box;margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;flex-grow:1;align-content:center;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);text-align:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",Ex=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.hideSelf=!1,this.networkUpdateListener=({event:t})=>{this.connected=t==="connected"},this.meetingDisconnectedListener=()=>{this.networkUpdateListener({event:"disconnected"})},this.meetingConnectedListener=()=>{this.networkUpdateListener({event:"connected"})},this.eventCallback=t=>{const{self:i}=this.meeting;t===Yi.CAMERA&&(i.videoEnabled?i.disableVideo():i.enableVideo()),t===Yi.MIC&&(i.audioEnabled?i.disableAudio():i.enableAudio()),t===Yi.END&&(gt.cleanup(),this.stateUpdate.emit({activePipMode:!1}),this.meeting.leaveRoom())},this.enablePipMediaControls=(t=this.meeting)=>{const i=t.self.permissions.canProduceAudio,r=t.self.permissions.canProduceVideo;i&&gt.mountAudioEvents(this.eventCallback),r&&gt.mountVideoEvents(this.eventCallback)},this.disablePipMediaControls=()=>{gt.unmountAudioEvents(),gt.unmountVideoEvents()},this.handlePipMediaControls=t=>{t==="ON_STAGE"?this.enablePipMediaControls():this.disablePipMediaControls()},this.filterParticipants=t=>{var i;if(this.overrides&&((i=this.overrides)===null||i===void 0?void 0:i.videoUnsubscribed)){const r=this.overrides.videoUnsubscribed.preset;r.length>0&&(t=t.filter(n=>!r.some(a=>n.presetName===void 0?!1:n.presetName.match(a))))}return t},this.onSelfVideoUpdateListener=({videoEnabled:t})=>{gt.updateMediaSession(Yi.CAMERA,t)},this.onSelfAudioUpdateListener=({audioEnabled:t})=>{gt.updateMediaSession(Yi.MIC,t)},this.onViewModeChanged=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onParticipantJoined=t=>{this.meeting!=null&&(this.participants.some(i=>i.id===t.id)||(this.participants=this.filterParticipants([t,...this.participants])),t.isPinned&&!this.pinnedParticipants.some(i=>i.id===t.id)&&(this.pinnedParticipants=this.pinnedParticipants.concat([t])),this.updateWebinarStage())},this.onParticipantLeft=t=>{this.participants=this.participants.filter(i=>i.id!==t.id),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter(i=>!this.participants.find(r=>r.id===i.id))),this.participants=this.filterParticipants(this.participants),this.pinnedParticipants=this.pinnedParticipants.filter(i=>i.id!==t.id),t.screenShareEnabled&&this.removeScreenShare(t),this.updateWebinarStage()},this.selfStageJoinListener=()=>{this.updateActiveParticipants()},this.selfStageLeaveListener=()=>{this.removeScreenShare(this.meeting.self),this.updateActiveParticipants()},this.onPresentationStart=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onPresentationEnd=t=>{this.meeting!=null&&(this.removePinned(t),this.removeScreenShare(t),this.updateActiveParticipants())},this.onScreenShareUpdate=t=>{t.screenShareEnabled?this.addScreenShare(t):this.removeScreenShare(t)},this.onSelfScreenShareUpdate=({screenShareEnabled:t})=>{t?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(t,{active:i})=>{i?this.plugins.some(r=>r.id===t.id)||(this.plugins=[...this.plugins,t]):this.plugins=this.plugins.filter(r=>r.id!==t.id)},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.showWebinarStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.connected=!0,this.pipSupported=!1,this.pipEnabled=!1,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.gridSize=rb,this.overrides={}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectMeeting(e){var t,i;if(e==null)return;this.participants=[],this.plugins=[];const{self:r,participants:n,plugins:s,meta:a}=e;n.active.removeListener("participantJoined",this.onParticipantJoined),n.active.removeListener("participantLeft",this.onParticipantLeft),n.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),n.joined.removeListener("peerStartedPresenting",this.onPresentationStart),n.joined.removeListener("peerStoppedPresenting",this.onPresentationEnd),r.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),s==null||s.all.removeListener("stateUpdate",this.onPluginStateUpdate),n.pinned.removeListener("participantJoined",this.onParticipantPinned),n.pinned.removeListener("participantLeft",this.onParticipantUnpinned),r.removeListener("pinned",this.onParticipantPinned),r.removeListener("unpinned",this.onParticipantUnpinned),n.removeListener("viewModeChanged",this.onViewModeChanged),r.removeListener("stageJoined",this.selfStageJoinListener),r.removeListener("stageLeft",this.selfStageLeaveListener),r.removeListener("removedFromStage",this.selfStageLeaveListener),r.removeListener("videoUpdate",this.onSelfVideoUpdateListener),r.removeListener("audioUpdate",this.onSelfAudioUpdateListener),a.removeListener("disconnected",this.meetingDisconnectedListener),a.removeListener("connected",this.meetingConnectedListener),(t=e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.handlePipMediaControls),e.self.removeListener("stageJoined",this.enablePipMediaControls),e.self.removeListener("stageLeft",this.disablePipMediaControls),(i=e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateLiveStreamStage)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}screenShareParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeScreenShare:t}),U.activeScreenShare=t}pluginsChanged(e){const t=e.length>0;this.stateUpdate.emit({activePlugin:t}),U.activePlugin=t}pinnedParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeSpotlight:t}),U.activeSpotlight=t}updateActiveParticipants(){var e,t;const{self:i,participants:r}=this.meeting,n=((e=i.config)===null||e===void 0?void 0:e.viewType)==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE",s=(t=i.permissions)===null||t===void 0?void 0:t.isRecorder;this.hideSelf=n||s||i.permissions.hiddenParticipant,this.participants=this.filterParticipants([...r.active.toArray().filter(a=>a.id!==i.id),...r.viewMode==="ACTIVE_GRID"&&!i.isPinned&&!this.hideSelf?[i]:[]]),this.pinnedParticipants=[...r.pinned.toArray().filter(a=>a.id!==i.id),...i.isPinned&&!this.hideSelf?[i]:[]],this.screenShareParticipants=r.joined.toArray().filter(a=>a.screenShareEnabled),i.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([i])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&this.meeting.meta.viewType==="WEBINAR"?this.showWebinarStage=this.participants.length===0&&this.pinnedParticipants.length===0:this.showWebinarStage=!1}updateLiveStreamStage(){this.showLiveStreamPlayer=Hm(this.meeting)}meetingChanged(e,t){var i,r,n;if(t!==null&&this.disconnectMeeting(t),e!=null){const{self:s,participants:a,plugins:o,meta:c,stage:d}=e,{config:l,permissions:u}=s,g=(l==null?void 0:l.viewType)==="WEBINAR"&&this.meeting.self.webinarStageStatus!=="ON_STAGE",m=u==null?void 0:u.isRecorder;if(this.hideSelf=g||m||u.hiddenParticipant,this.participants=this.filterParticipants([...a.active.toArray(),...!s.isPinned&&!this.hideSelf?[s]:[]]),this.pinnedParticipants=[...a.pinned.toArray(),...s.isPinned&&!this.hideSelf?[s]:[]],this.screenShareParticipants=a.joined.toArray().filter(S=>S.screenShareEnabled),this.plugins=(o==null?void 0:o.active.toArray())||[],(l==null?void 0:l.viewType)==="WEBINAR"&&(this.canCurrentPeerHost=u.acceptPresentRequests||u.canPresent,this.updateWebinarStage()),this.pipSupported=gt.isSupported()&&((i=e.self.config)===null||i===void 0?void 0:i.pipMode),this.pipSupported){const S=()=>{},y=()=>{this.stateUpdate.emit({activePipMode:!1})};gt.create(S,y,this.eventCallback),this.enablePipMediaControls(e),(r=e.stage)===null||r===void 0||r.on("stageStatusUpdate",this.handlePipMediaControls),e.self.on("stageJoined",this.enablePipMediaControls),e.self.on("stageLeft",this.disablePipMediaControls)}const f=document.pictureInPictureElement!==null,w=this.states||U;gt.isSupported()&&w.activePipMode!==f&&this.stateUpdate.emit({activePipMode:f}),a.active.addListener("participantJoined",this.onParticipantJoined),a.active.addListener("participantLeft",this.onParticipantLeft),a.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),a.joined.addListener("peerStartedPresenting",this.onPresentationStart),a.joined.addListener("peerStoppedPresenting",this.onPresentationEnd),s.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),o==null||o.all.addListener("stateUpdate",this.onPluginStateUpdate),a.pinned.addListener("participantJoined",this.onParticipantPinned),a.pinned.addListener("participantLeft",this.onParticipantUnpinned),s.addListener("pinned",this.onParticipantPinned),s.addListener("videoUpdate",this.onSelfVideoUpdateListener),s.addListener("audioUpdate",this.onSelfAudioUpdateListener),s.addListener("unpinned",this.onParticipantUnpinned),s.addListener("stageJoined",this.selfStageJoinListener),s.addListener("stageLeft",this.selfStageLeaveListener),s.addListener("removedFromStage",this.selfStageLeaveListener),c.addListener("disconnected",this.meetingDisconnectedListener),c.addListener("connected",this.meetingConnectedListener),d==null||d.addListener("stageStatusUpdate",this.updateLiveStreamStage.bind(this)),a.addListener("viewModeChanged",this.onViewModeChanged),!((n=e.stage)===null||n===void 0)&&n.status&&this.updateLiveStreamStage()}}addScreenShare(e){this.screenShareParticipants.some(t=>t.id===e.id)||(this.screenShareParticipants=[...this.screenShareParticipants,e])}removeScreenShare(e){this.screenShareParticipants=this.screenShareParticipants.filter(t=>t.id!==e.id)}removePinned(e){this.pinnedParticipants=this.pinnedParticipants.filter(t=>t.id!==e.id)}render(){const e={meeting:this.meeting,size:this.size,states:this.states||U,config:this.config,iconPack:this.iconPack,t:this.t};return!this.connected&&this.hideSelf?p("div",{class:"webinar-stage"},p("div",{class:"center"},p("h2",null,this.t("stage.reconnecting")))):this.showWebinarStage?p(M,null,p("div",{class:"webinar-stage"},p("div",{class:"center"},this.canCurrentPeerHost&&p("div",null,p("h2",null,this.t("stage.empty_host")),p("p",null,this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&p("h2",null,this.t("stage.empty_viewer"))))):this.showLiveStreamPlayer?p(M,null,p("dyte-livestream-player",{meeting:this.meeting,size:this.size})):p(M,null,p($e,{element:"dyte-grid",defaults:e,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}))}get host(){return Is(this)}static get watchers(){return{screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};Ex.style=a9;var o9=Object.freeze({__proto__:null,dyte_grid:Ex});const c9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}",Tx=class{constructor(e){V(this,e),this.onPageChanged=({currentPage:t,pageCount:i})=>{this.pageCount=i,this.page=t},this.toggleGridPagination=()=>{var t;const{self:i,participants:r}=this.meeting,{mobile:n,desktop:s}=(t=i.config)===null||t===void 0?void 0:t.maxVideoStreams,a=this.size==="sm"?n:s;r.joined.size<a?this.showPagination=!1:this.showPagination=!0},this.onParticipantJoin=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.onParticipantLeave=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.prevPage=()=>{if(this.meeting==null)return;const{participants:t}=this.meeting;this.page>1?t.setPage(this.page-=1):t.viewMode==="PAGINATED"&&t.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(this.meeting==null)return;const{participants:t}=this.meeting;this.page>0&&this.page<this.pageCount?t.setPage(this.page+=1):t.count>0&&this.pageCount===0&&t.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=$,this.t=B(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(this.meeting==null)return;const{participants:e}=this.meeting;e.removeListener("pageChanged",this.onPageChanged),e.removeListener("viewModeChanged",this.onPageChanged),e.joined.removeListener("participantJoined",this.onParticipantJoin),e.joined.removeListener("participantLeft",this.onParticipantLeave)}meetingChanged(e){if(e!=null){const{participants:t}=e;this.page=t.currentPage,this.pageCount=t.pageCount,t.addListener("viewModeChanged",this.onPageChanged),t.addListener("pageChanged",this.onPageChanged),t.joined.addListener("participantJoined",this.onParticipantJoin),t.joined.addListener("participantLeft",this.onParticipantLeave),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){if(!(this.meeting.meta.viewType==="WEBINAR"||!this.showPagination))return p(M,null,p("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:this.pageCount===0,onClick:this.prevPage,"aria-label":this.t("Previous Page"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),this.variant!=="grid"&&p("div",{class:"center"},p("span",{class:"page"},this.pageCount===0?p("dyte-tooltip",{label:this.t("Auto Layout"),iconPack:this.iconPack,t:this.t},p("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),this.pageCount!==0&&[p("span",{class:"slash"},"/"),p("span",{class:"pages"},this.pageCount)]),this.variant==="grid"&&this.pageCount>0&&p("div",{class:"dots"},[...Array(this.pageCount)].map((t,i)=>p("div",{key:`dot-${i}`,class:{dot:!0,active:i+1===this.page}}))),p("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:this.page!==0&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("Next Page"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};Tx.style=c9;var d9=Object.freeze({__proto__:null,dyte_grid_pagination:Tx});const l9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}",kx=class{constructor(e){V(this,e),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Be,this.states=void 0,this.iconPack=$,this.t=B(),this.size=void 0}render(){const e={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return p(M,null,!this.disableRender&&p($e,{element:"dyte-header",defaults:e,onlyChildren:!0}),p("slot",null))}};kx.style=l9;var u9=Object.freeze({__proto__:null,dyte_header:kx});const p9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-10, 40px);height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",Px=class{constructor(e){V(this,e),this.meeting=void 0,this.config=Be,this.iconPack=$,this.t=B()}render(){return p(M,null,p("slot",null,p("div",{class:"ctr",part:"container"},p("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),p("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};Px.style=p9;var h9=Object.freeze({__proto__:null,dyte_idle_screen:Px});const g9=e=>e.split(/[#?]/)[0].split(".").pop().trim(),m9=e=>{if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/1024**t).toFixed(2)} ${["B","kB","MB","GB","TB"][t]}`},f9=(e,t="file")=>{try{const r=new URL(e).pathname.split("/").pop();return r!=="/"?r:t}catch{return t}},nb=async(e,t)=>{e=ib(e);let i=t==null?void 0:t.name;const r=await fetch(e);if(!r.ok){window.open(e,"_blank");return}const n=URL.createObjectURL(await r.blob()),s=document.createElement("a");s.href=n,s.download=i!=null?i:f9(e,t==null?void 0:t.fallbackName),s.click()},v9=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}`,Cx=class{constructor(e){V(this,e),this.close=Q(this,"close",7),this.keypressListener=t=>{t.key==="Escape"&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=B(),this.iconPack=$}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return p(M,{class:"scrollbar",onClick:e=>e.stopPropagation()},p("div",{class:"header"},p("div",{class:"shared-by-user"},this.t("Shared by")," ",p("span",{class:"displayName"},Lr(Zi(this.image.displayName)))),p("div",{class:"actions"},p("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.full_screen_minimize,iconPack:this.iconPack,t:this.t})),p("dyte-button",{onClick:()=>nb(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"))),p("div",{class:"image-ctr"},p("img",{src:this.image.link})))}};Cx.style=v9;var y9=Object.freeze({__proto__:null,dyte_image_viewer:Cx});const _9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Rx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),U.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=$,this.t=B()}render(){const e=this.t("leave");return p(M,{label:e},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave",onClick:this.leave,icon:this.iconPack.call_end,label:e,variant:this.variant}))}};Rx.style=_9;var b9=Object.freeze({__proto__:null,dyte_leave_button:Rx});const w9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",xx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),U.activeLeaveConfirmation=!1},this.handleLeave=()=>{var t;(t=this.meeting)===null||t===void 0||t.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.roomName,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var t;(t=this.meeting)===null||t===void 0||t.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=B(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}meetingChanged(e){e!=null&&(this.canEndMeeting=e.self.permissions.kickParticipant,this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some(t=>t.id===e.meta.roomName),this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting)}render(){return p(M,null,p("div",{class:"leave-modal"},p("div",{class:"header"},p("h2",{class:"title"},this.t("leave"))),p("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),p("div",{class:"content"},p("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&p("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),p("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&p("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end_meeting_for_all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};xx.style=w9;var S9=Object.freeze({__proto__:null,dyte_leave_meeting:xx});const E9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;min-width:var(--dyte-space-14, 56px) !important;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",Ix=class{constructor(e){V(this,e),this.setIsLivestreaming=t=>{this.isLivestreaming=t==="LIVESTREAMING"},this.meeting=void 0,this.size=void 0,this.t=B(),this.isLivestreaming=void 0,this.iconPack=$}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.livestream)===null||t===void 0||t.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(e){var t,i;e!=null&&(this.setIsLivestreaming((t=this.meeting.livestream)===null||t===void 0?void 0:t.state),(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(!(!Os(this.meeting)||!this.isLivestreaming))return p(M,null,p("div",{class:"indicator","aria-label":this.t("This meeting is being livestreamed"),part:"indicator"},p("dyte-icon",{icon:this.iconPack.start_livestream}),"LIVE"))}static get watchers(){return{meeting:["meetingChanged"]}}};Ix.style=E9;var T9=Object.freeze({__proto__:null,dyte_livestream_indicator:Ix});const k9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Ax=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.dyteAPIError=Q(this,"dyteAPIError",7),this.livestreamStateListener=t=>{this.livestreamState=t,(t==="LIVESTREAMING"||t==="IDLE")&&(this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1)},this.isLoading=()=>this.meeting==null||this.livestreamState==="STARTING"||this.livestreamState==="STOPPING",this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(e){var t,i;e!=null&&(this.livestreamState=(t=this.meeting.livestream)===null||t===void 0?void 0:t.state,(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var e,t;if(this.livestreamState==="LIVESTREAMING")try{await((e=this.meeting.livestream)===null||e===void 0?void 0:e.stop())}catch{this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("Error while stopping livestream.")})}else try{await((t=this.meeting.livestream)===null||t===void 0?void 0:t.start())}catch{this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("Error while starting livestream.")})}}clearListeners(){var e;(e=this.meeting.livestream)===null||e===void 0||e.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("Go Live");case"LIVESTREAMING":return this.t("End Live");case"STARTING":return this.t("Starting");case"STOPPING":return this.t("Stopping");default:return this.t("Error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":return this.iconPack.start_livestream;case"LIVESTREAMING":return this.iconPack.stop_livestream;case"STARTING":case"STOPPING":default:return this.iconPack.stop_livestream}}render(){if(!!K7(this.meeting))return p(M,null,p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":this.livestreamState==="LIVESTREAMING"},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};Ax.style=k9;var P9=Object.freeze({__proto__:null,dyte_livestream_toggle:Ax});const C9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}",Ox=class{constructor(e){V(this,e),this.meeting=void 0,this.iconPack=$,this.t=B()}render(){var e;const t=(e=this.meeting)===null||e===void 0?void 0:e.meta.meetingTitle;return t==null?null:p(M,{tabIndex:0,role:"banner","aria-label":t},p("dyte-tooltip",{label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},p("div",{class:"title",part:"title"},t)))}};Ox.style=C9;var R9=Object.freeze({__proto__:null,dyte_meeting_title:Ox});const x9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",Mx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{t==="audio"&&(this.micPermission=i)},this.toggleMic=()=>{var t,i,r,n,s,a,o,c,d,l,u,g;if((t=this.meeting)===null||t===void 0||t.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.audioEnabled),permission:this.micPermission,canProduce:(a=(s=(n=this.meeting)===null||n===void 0?void 0:n.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceAudio}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((u=this.meeting)===null||u===void 0?void 0:u.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:f}),U.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceAudio||(m.audioEnabled?m.disableAudio():m.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c;(e=this.meeting)===null||e===void 0||e.self.removeListener("audioUpdate",this.audioUpdateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageJoined",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.canProduceAudio=t.permissions.produceAudio==="ALLOWED",this.updateCanProduce(e),this.micPermission=e.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=t.audioEnabled,t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStageLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceAudio==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,n&&!a?this.canProduceAudio=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceAudio=!0),t.permissions.canProduceAudio==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0))}hasPermissionError(){return this.micPermission==="DENIED"||this.micPermission==="SYSTEM_DENIED"}getState(){let e="",t="",i="",r={},n=this.hasPermissionError(),s=this.micPermission==="COULD_NOT_START";return this.audioEnabled&&!n?(t=this.t("mic_on"),i=this.iconPack.mic_on):(t=this.t("mic_off"),i=this.iconPack.mic_off,r["red-icon"]=!0),s?e=this.t("Unable to capture audio"):this.micPermission==="SYSTEM_DENIED"?e=this.t("perm_sys_denied"):this.micPermission==="DENIED"?e=this.t("perm_browser_denied"):e=this.audioEnabled?this.t("Disable Mic"):this.t("Enable Mic"),{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n||s,disable:n}}render(){if(!this.canProduceAudio)return null;const{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n,disable:s}=this.getState();return p(M,{title:t},p("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:r,onClick:this.toggleMic,showWarning:n,disabled:s})))}static get watchers(){return{meeting:["meetingChanged"]}}};Mx.style=x9;var I9=Object.freeze({__proto__:null,dyte_mic_toggle:Mx});const A9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}",Dx=class{constructor(e){V(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.gridSize=rb,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting.spotlight)===null||e===void 0||e.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)}meetingChanged(e){var t,i,r,n;e!=null&&(((t=e.spotlight)===null||t===void 0?void 0:t.selfActiveTab)!=null&&this.onSpotlightTabUpdate((i=e.spotlight.selfActiveTab)===null||i===void 0?void 0:i.type,(r=e.spotlight.selfActiveTab)===null||r===void 0?void 0:r.id),this.spotlightTabUpdateListener=s=>{this.onSpotlightTabUpdate(s==null?void 0:s.type,s==null?void 0:s.id)},(n=e.spotlight)===null||n===void 0||n.addListener("activeTabUpdate",this.spotlightTabUpdateListener))}screenShareParticipantsChanged(e=[]){!this.initialised&&this.activeTab!=null||(this.activeTab==null&&e.length>0?this.setActiveTab({type:"screenshare",participant:e[0]}):this.revalidateActiveTab())}pluginsChanged(e){if(!(!this.initialised&&this.activeTab!=null))if(e.length>0){const t=e.length-1;this.setActiveTab({type:"plugin",plugin:e[t]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(this.activeTab!=null)if(this.activeTab.type==="screenshare"){const{participant:e}=this.activeTab;this.screenShareParticipants.some(t=>t.id===e.id)||this.reassignActiveTab()}else{const{plugin:e}=this.activeTab;this.plugins.some(t=>t.id===e.id)||this.reassignActiveTab()}}setActiveTab(e,t=!0){var i;this.activeTab=e;const r=e.type==="screenshare"?e.participant.id:e.plugin.id;t&&((i=this.meeting.spotlight)===null||i===void 0||i.setSelfActiveTab({type:e.type,id:r},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const e=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[e]})}}onSpotlightTabUpdate(e,t){if(e!=null&&t!=null)switch(e){case"plugin":const i=this.plugins.find(n=>n.id===t);i!=null&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":const r=this.screenShareParticipants.find(n=>n.id===t);r!=null&&this.setActiveTab({type:"screenshare",participant:r},!1)}}getTabs(){const e=this.screenShareParticipants.map(i=>({type:"screenshare",participant:i})),t=this.plugins.map(i=>({type:"plugin",plugin:i}));return e.concat(t)}render(){var e;const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return p(M,null,p("main",{id:"main-view",part:"main-view"},((e=this.getTabs())===null||e===void 0?void 0:e.length)>1&&p("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:i=>this.setActiveTab(i.detail)},t)),p("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map(i=>{var r,n;return p($e,{element:"dyte-screenshare-view",defaults:t,props:{participant:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="screenshare"&&((n=this.activeTab)===null||n===void 0?void 0:n.participant.id)===i.id?"flex":"none"}},childProps:{participant:i,isScreenShare:!0},deepProps:!0})}),this.plugins.map(i=>{var r,n;return p($e,{element:"dyte-plugin-main",defaults:t,props:{plugin:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===i.id?"flex":"none"}}})}))),p($e,{element:"dyte-mixed-grid",defaults:t,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"sm",layout:"row"},onlyChildren:!0}))}get host(){return Is(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};Dx.style=A9;var O9=Object.freeze({__proto__:null,dyte_mixed_grid:Dx});const M9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Lx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!U.activeMoreMenu}),U.activeMoreMenu=!U.activeMoreMenu},this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B()}render(){const e=this.t("More"),t=this.states||U,i=(t==null?void 0:t.activeMoreMenu)===!0?this.iconPack.chevron_down:this.iconPack.chevron_up;return p(M,{title:e},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleMoreMenu(),icon:i,label:e,part:"controlbar-button"}))}};Lx.style=M9;var D9=Object.freeze({__proto__:null,dyte_more_toggle:Lx});const L9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Nx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0})},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B()}render(){var e;if(!(!((e=this.meeting)===null||e===void 0)&&e.self.permissions.canAllowParticipantAudio))return null;const t=this.t("mute_all");return p(M,{title:t},p("dyte-tooltip",{kind:"block",label:t,part:"tooltip"},p("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}};Nx.style=L9;var N9=Object.freeze({__proto__:null,dyte_mute_all_button:Nx});const U9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.body{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}",Ux=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),U.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var t;(t=this.meeting)===null||t===void 0||t.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=B(),this.allowUnmute=!0}render(){return p(M,null,p("div",{class:"leave-modal"},p("div",{class:"header"},p("h2",{class:"title"},this.t("mute_all.header"))),p("p",{class:"message"},this.t("mute_all.description")),p("div",{class:"content"},p("div",{class:"leave-meeting"},p("dyte-button",{variant:"secondary",title:this.t("Close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),p("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};Ux.style=U9;var j9=Object.freeze({__proto__:null,dyte_mute_all_confirmation:Ux});const $9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}",jx=class{constructor(e){V(this,e),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.maxLength=20,this.isScreenShare=!1,this.iconPack=$,this.t=B(),this.length=13}sizeChanged(e){this.length=e==="sm"?8:13}formatNameTag(e,t){return this.isScreenShare?t?`${this.t("Screen")} - ${Zi(e,this.length-3)} (${this.t("you")})`:`${this.t("Screen")} - ${Zi(e,this.length)}`:t?`${Zi(e,this.length-3)} (${this.t("you")})`:Zi(e,this.length)}render(){var e,t,i;const r=Lr(((e=this.participant)===null||e===void 0?void 0:e.name)||""),n=((t=this.participant)===null||t===void 0?void 0:t.id)===((i=this.meeting)===null||i===void 0?void 0:i.self.id);return p(M,{title:r},p("slot",{name:"start"}),p("span",{class:"name"},this.formatNameTag(r,n)),p("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};jx.style=$9;var V9=Object.freeze({__proto__:null,dyte_name_tag:jx});const F9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}",$x=class{constructor(e){V(this,e),this.onMediaScoreUpdate=({kind:t,isScreenshare:i,score:r})=>{(t==="video"||this.isScreenShare&&i)&&(this.score=r)},this.participant=void 0,this.meeting=void 0,this.iconPack=$,this.t=B(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(e){!e||e.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var e;(e=this.participant)===null||e===void 0||e.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){if(this.meeting&&this.meeting.self.userId===this.participant.userId)return null;let e=Math.round(this.score/2),t="good";if(e>3)return null;switch(e<1&&(e=1),e){case 3:case 2:t="poor";break;case 1:t="poorest"}return p(M,null,p("dyte-icon",{icon:this.iconPack[`signal_${e}`],class:t}),p("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};$x.style=F9;var z9=Object.freeze({__proto__:null,dyte_network_indicator:$x}),vr;(function(e){e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"})(vr||(vr={}));const Vu=console,B9={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class H9{constructor(){this.audio=document.createElement("audio"),this.audio.volume=.3}play(t,i=3e3){var r;this.playing||(this.playing=!0,this.audio.src=B9[t],this.audio.volume=.3,(r=this.audio.play())===null||r===void 0||r.catch(n=>{Vu.error(`[dyte-notifications] play() failed
`,{sound:t,duration:i},n)}),setTimeout(()=>{this.playing=!1},i))}async setDevice(t){var i,r,n;await((n=(r=(i=this.audio)===null||i===void 0?void 0:i.setSinkId)===null||r===void 0?void 0:r.call(i,t))===null||n===void 0?void 0:n.catch(s=>{Vu.error(`[dyte-notifications] setSinkId() error
`,s)}))}}const Pr=2e3,N0=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:Pr,polls:Pr,webinar:Pr,tab_sync:Pr},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10}),G9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";function W9(e){const t=Object.assign({},N0);return e==null||(Object.assign(t.notification_sounds,e.notification_sounds),Object.assign(t.notifications,e.notifications),Object.assign(t.notification_duration,e.notification_duration),t.participant_chat_message_sound_notification_limit=e.participant_chat_message_sound_notification_limit,t.participant_joined_sound_notification_limit=e.participant_joined_sound_notification_limit),t}function vE(e){return Object.keys(e).filter(t=>e[t])}const Vx=class{constructor(e){V(this,e),this.permissions=N0,this.enabledSounds=vE(N0.notification_sounds),this.addStagePeersListeners=t=>{t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.meta.addListener("disconnected",this.networkDisconnectedListener),t.meta.addListener("connected",this.networkConnectedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=t=>{t.participants.joined.removeListener("participantJoined",this.participantJoinedListener),t.meta.removeListener("disconnected",this.networkDisconnectedListener),t.meta.removeListener("connected",this.networkConnectedListener),t.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:t,type:i})=>{if(i===vr.INCOMING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(t.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${r.name}`,duration:Pr})}if(i===vr.OUTGOING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(t.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has granted remote control.`,duration:Pr})}if(i===vr.REQUEST_RECEIVED){let r=this.meeting.participants.joined.get(t.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has requested for remote control.`,duration:Pr})}if((i===vr.INCOMING_REQUEST_ENDED||i===vr.OUTGOING_REQUEST_ENDED)&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:Pr}),i===vr.REQUEST_SENT){let r=this.meeting.participants.joined.get(t.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${r.name}`,duration:Pr})}},this.onDyteNotification=t=>{this.add(t.detail);const i=t.detail.playSound;i!=null&&this.audio.play(i)},this.onRecordingUpdate=t=>{t==="RECORDING"?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:Pr}):t==="STOPPING"&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:Pr})},this.meeting=void 0,this.states=void 0,this.config=Be,this.t=B(),this.size=void 0,this.iconPack=$,this.notifications=[]}connectedCallback(){typeof document<"u"&&(document==null||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(e){var t,i,r,n,s,a,o,c,d;const l=e.meta.viewType==="LIVESTREAM";(l&&((t=e.stage)===null||t===void 0?void 0:t.status)==="ON_STAGE"||!l)&&this.removeStagePeersListeners(e),this.chatUpdateListener&&((i=e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&((r=e.polls)===null||r===void 0||r.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&e.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&e.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&e.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&e.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&e.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&((n=e.stage)===null||n===void 0||n.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&((s=e.stage)===null||s===void 0||s.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&((a=e.stage)===null||a===void 0||a.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&((o=e.stage)===null||o===void 0||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),(c=e.remote)===null||c===void 0||c.removeListener("remoteUpdate",this.onRemoteUpdate),(d=e.recording)===null||d===void 0||d.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var e;typeof document<"u"&&(document==null||document.removeEventListener("dyteNotification",this.onDyteNotification)),this.meeting!=null&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.spotlightTabUpdateListener&&((e=this.meeting.spotlight)===null||e===void 0||e.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener))}meetingChanged(e,t){var i,r,n,s,a,o,c,d,l;if(clearTimeout(this.disconnectTimeout),t!==void 0&&this.clearListeners(t),e==null)return;const u=e.meta.viewType==="LIVESTREAM";this.audio=new H9;const{notifications:g,notification_duration:m,notification_sounds:f}=this.permissions;this.participantJoinedListener=S=>{g.participant_joined&&this.add({id:`${S.id}-joined`,message:`${Lr(S.name)} just joined`,image:S.picture,duration:m.participant_joined}),f.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=S=>{g.participant_left&&this.add({id:`${S.id}-left`,message:`${Lr(S.name)} left`,image:S.picture,duration:m.participant_left}),f.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=S=>{const y=`${S.id}-joined-waitlist`;this.add({id:y,message:`${Lr(S.name)} is requesting to join the meeting`,image:S.picture,duration:m.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(S.id),this.remove(y)}}}),f.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:S})=>{const y=dx(S);if(y!=null){if(y.userId===e.self.userId)return;y.type==="text"&&(g.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${y.displayName}: ${Zi(y.message,20)}`,duration:m.chat}),f.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:S,newPoll:y})=>{y!==!1&&(g.polls&&this.meeting.self.userId!==S[S.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${S[S.length-1].createdBy}`,duration:m.polls}),f.polls&&this.meeting.self.userId!==S[S.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:S,preview:y})=>{y||(S.kind==="audiooutput"?(this.audio.setDevice(S.deviceId),this.add({id:`speaker-switched-${S.deviceId}`,message:`Connected to ${S.label}`,icon:this.iconPack.speaker,duration:5e3})):S.kind==="videoinput"?this.add({id:`camera-switched-${S.deviceId}`,message:`Connected to ${S.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${S.deviceId}`,message:`Connected to ${S.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{this.remove("network");let S;S=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("Connection lost. Trying to reconnect..."),duration:S}),this.disconnectTimeout=setTimeout(()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("Taking too long to reconnect..."),button:{text:this.t("End Meeting"),variant:"danger",onClick:()=>{var y;return(y=this.meeting)===null||y===void 0?void 0:y.leaveRoom()}}})},S)},this.networkConnectedListener=()=>{this.remove("network");let S;this.remove("network-lost"),S=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("Connection restored"),duration:S}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:S,attempt:y})=>{this.remove("socket"),S==="reconnected"?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("Connection restored"),duration:3e3})):S==="disconnected"?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("Connection lost"),duration:3e3}):S==="reconnecting"?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("Connection lost. Please check your network connection.")}):S==="reconnectFailure"?y>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("Taking too long to reconnect. Please check your network connection."),button:{text:this.t("End Meeting"),variant:"danger",onClick:()=>{var _;return(_=this.meeting)===null||_===void 0?void 0:_.leaveRoom()}}})):S==="failed"&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("Could not reconnect. Please leave the meeting and try refreshing the window.")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("Automatically leaving the meeting in 10 seconds.")}),setTimeout(()=>{var _;(_=this.meeting)===null||_===void 0||_.leaveRoom("disconnected")},1e4))},this.spotlightTabUpdateListener=S=>{if(!!g.tab_sync)switch(S.type){case"plugin":const y=e.plugins.active.toArray().find(T=>T.id==S.id);y!=null&&this.add({id:"spotlight",message:`Plugin switched to ${y.name}`,duration:m.participant_joined});break;case"screenshare":const _=e.participants.joined.toArray().filter(T=>T.screenShareEnabled).find(T=>T.id==S.id);_!=null&&this.add({id:"spotlight",message:`Now watching ${_.name}'s screen`,duration:m.webinar});break}},this.peerRequestToJoinStateListener=({id:S})=>{if(!g.webinar)return;const y=this.meeting.participants.joined.get(S);y!==void 0&&(this.add({id:`webinar-request-${S}`,message:`${y.name} is requesting to be on stage`,duration:m.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.participants.acceptAllRequestToJoinStageRequests([{id:S,requestToJoinType:"REQUEST_TO_PRESENT"}]),this.remove(`webinar-request-${S}`)}}}),f.webinar&&this.audio.play("joined"))},this.peerAcceptedToJoinStageListener=S=>{if(!g.webinar)return;const y=this.meeting.participants.joined.get(S.id);y!==void 0&&(this.add({id:`webinar-accepted-${S.id}`,message:`Approved ${y.name}'s request to join stage.`,duration:m.webinar}),f.webinar&&this.audio.play("joined"))},this.peerRejectedToJoinStageListener=S=>{if(!g.webinar)return;const y=this.meeting.participants.joined.get(S.id);y!==void 0&&this.add({id:`webinar-rejected-${S.id}`,message:`Rejected ${y.name}'s request to join stage.`,duration:m.webinar})},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:S})=>{this.add({id:"new-stage-request",message:`You have ${S} pending request${S===1?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=S=>{S==="ON_STAGE"?this.addStagePeersListeners(e):this.removeStagePeersListeners(e)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:S})=>this.socketUpdateListener({event:"reconnectFailure",attempt:S});const w=e.self.getCurrentDevices();w.speaker!=null&&this.audio.setDevice(w.speaker.deviceId),u?(i=e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(e),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.canAcceptWaitingRequests()&&e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),!Hg(e)&&((r=e.chat)===null||r===void 0||r.addListener("chatUpdate",this.chatUpdateListener)),(n=e.polls)===null||n===void 0||n.addListener("pollsUpdate",this.pollUpdateListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener),e.meta.addListener("socketReconnected",this.socketReconnectedListener),e.meta.addListener("socketDisconnected",this.socketDisconnectedListener),e.meta.addListener("socketReconnecting",this.socketReconnectingListener),e.meta.addListener("socketFailure",this.socketFailureListener),e.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),(s=e.remote)===null||s===void 0||s.addListener("remoteUpdate",this.onRemoteUpdate),(a=e.spotlight)===null||a===void 0||a.addListener("activeTabUpdate",this.spotlightTabUpdateListener),(o=e.recording)===null||o===void 0||o.addListener("recordingUpdate",this.onRecordingUpdate),(c=e.stage)===null||c===void 0||c.addListener("stageRequestApproved",this.stageRequestAccepted),(d=e.stage)===null||d===void 0||d.addListener("stageRequestRejected",this.stageRequestRejected),e.self.permissions.acceptPresentRequests&&((l=e.stage)===null||l===void 0||l.addListener("newStageRequest",this.newStageRequests))}configChanged(e){e!=null&&(e==null?void 0:e.config)!=null&&(this.permissions=W9(e.config),this.enabledSounds=vE(this.permissions.notification_sounds))}statesChanged(e){var t;if(e!=null){const i=!(!((t=e==null?void 0:e.prefs)===null||t===void 0)&&t.muteNotificationSounds);for(const r of this.enabledSounds)r in this.permissions.notification_sounds&&(this.permissions.notification_sounds[r]=i)}}apiErrorListener({detail:e}){const{trace:t,message:i}=e;this.add({id:t,message:i,duration:Pr,icon:this.iconPack.warning})}add(e){document.visibilityState==="visible"&&this.notifications.length<5&&(this.notifications=[...this.notifications,e])}remove(e){this.notifications=this.notifications.filter(t=>t.id!==e)}handleDismiss(e){e.stopPropagation();const t=e.detail,i=this.host.shadowRoot.querySelector(`[data-id="${t}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{fn(()=>{this.remove(t)})},400)}canPlayParticipantJoinedSound(){return this.permissions.participant_joined_sound_notification_limit==null||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return this.permissions.participant_chat_message_sound_notification_limit==null||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return p(M,null,this.notifications.map(e=>p("dyte-notification",{size:this.size,key:e.id,"data-id":e.id,notification:e,onDyteNotificationDismiss:t=>this.handleDismiss(t),iconPack:this.iconPack,t:this.t})))}get host(){return Is(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};Vx.style=G9;var q9=Object.freeze({__proto__:null,dyte_notifications:Vx});const J9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",Fx=class{constructor(e){V(this,e),this.disconnectMeeting=t=>{t!=null&&this.countListener!=null&&(t.participants.joined.removeListener("participantJoined",this.countListener),t.participants.joined.removeListener("participantLeft",this.countListener))},this.meeting=void 0,this.iconPack=$,this.t=B(),this.participantCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){this.disconnectMeeting(t),e!=null&&(this.countListener=()=>{this.participantCount=e.participants.joined.size+(e.self.roomJoined?1:0)},this.countListener(),e.participants.joined.addListener("participantJoined",this.countListener),e.participants.joined.addListener("participantLeft",this.countListener))}render(){return Hm(this.meeting)?null:p(M,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},p("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};Fx.style=J9;var K9=Object.freeze({__proto__:null,dyte_participant_count:Fx});const Y9=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}",zx=class{constructor(e){V(this,e),this.onVideoUpdate=t=>{this.videoState=t},this.onPinned=({isPinned:t})=>{this.isPinned=t},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=Be,this.variant="solid",this.size=void 0,this.iconPack=$,this.t=B()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned))}async participantsChanged(e){e!=null&&(this.videoState={videoEnabled:e.videoEnabled,videoTrack:e.videoTrack},this.isPinned=e.isPinned,e.addListener("videoUpdate",this.onVideoUpdate),e.addListener("pinned",this.onPinned),e.addListener("unpinned",this.onPinned))}videoStateChanged(e){if(e!=null&&this.videoEl!=null)if(e.videoEnabled){const t=new MediaStream;t.addTrack(e.videoTrack),this.videoEl.srcObject=t}else this.videoEl.srcObject=void 0}isMirrored(){var e;if(this.participant!=null&&("preview"in this.participant||this.isPreview)){const i=this.states||U,r=(e=i==null?void 0:i.prefs)===null||e===void 0?void 0:e.mirrorVideo;if(typeof r=="boolean")return r}return!1}render(){var e,t,i,r;return p(M,null,p("video",{ref:n=>this.videoEl=n,class:{visible:(e=this.videoState)===null||e===void 0?void 0:e.videoEnabled,mirror:this.isMirrored(),[(r=(i=(t=this.config)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&p("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("Pinned"),iconPack:this.iconPack,t:this.t}),p("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};zx.style=Y9;var Q9=Object.freeze({__proto__:null,dyte_participant_setup:zx});const Z9=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}`,Bx=class{constructor(t){V(this,t),this.onSearchInput=i=>{this.search=i.target.value},this.meeting=void 0,this.states=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.t=B(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting!=null}meetingChanged(t){t!=null}render(){const t={meeting:this.meeting,states:this.states||U,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return p(M,null,p("div",{class:"search",part:"search"},p("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),p("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),p("div",{class:"ctr scrollbar",part:"container"},p($e,{element:"dyte-participants-waiting-list",defaults:t}),p($e,{element:"dyte-participants-stage-queue",defaults:t}),p($e,{element:"dyte-participants-stage-list",defaults:t,props:{search:this.search}}),p($e,{element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search}})))}static get watchers(){return{meeting:["meetingChanged"]}}};Bx.style=Z9;var X9=Object.freeze({__proto__:null,dyte_participants:Bx});class eU{constructor(){this.audio=document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(t,i){this.audioTracks.some(r=>r.id===t)||(this.audioTracks.push({id:t,track:i}),this.audioStream.addTrack(i),this.play())}removeTrack(t){const i=this.audioTracks.find(r=>r.id===t);i!=null&&(this.audioStream.removeTrack(i.track),this.audioTracks=this.audioTracks.filter(r=>r.id!==t))}async play(){var t;this.audio.srcObject=this.audioStream,await((t=this.audio.play())===null||t===void 0?void 0:t.catch(i=>{i.name==="NotAllowedError"?this._onError!=null&&this._onError():i.name!=="AbortError"&&Vu.error(`[dyte-audio] play() error
`,i)}))}async setDevice(t){var i,r,n;await((n=(r=(i=this.audio).setSinkId)===null||r===void 0?void 0:r.call(i,t))===null||n===void 0?void 0:n.catch(s=>{Vu.error(`[dyte-audio] setSinkId() error
`,s)}))}onError(t){this._onError=t}}const tU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}",Hx=class{constructor(e){V(this,e),this.dialogClose=Q(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=$,this.t=B(),this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.meeting!=null&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&((e=this.meeting.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}handleAudioError(){this.audio=new eU,this.audio.onError(()=>{this.showPlayDialog=!0}),this.audio.play()}async meetingChanged(e){var t;if(e!=null){e.meta.viewType==="LIVESTREAM"&&e.stage.status!=="ON_STAGE"?(this.stageStatusUpdateListener=r=>{r==="ON_STAGE"&&this.handleAudioError()},(t=e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.stageStatusUpdateListener)):this.handleAudioError();const i=e.self.getCurrentDevices();i.speaker!=null&&await this.audio.setDevice(i.speaker.deviceId),this.audioUpdateListener=({id:r,audioEnabled:n,audioTrack:s})=>{const a=`audio-${r}`;n&&s!=null?this.audio.addTrack(a,s):this.audio.removeTrack(a)};{const r=e.participants.joined.toArray();for(const n of r)this.audioUpdateListener(n)}this.participantLeftListener=({id:r})=>{this.audio.removeTrack(`audio-${r}`),this.audio.removeTrack(`screenshare-${r}`)},this.screenShareUpdateListener=({id:r,screenShareEnabled:n,screenShareTracks:s})=>{const a=`screenshare-${r}`;n&&s.audio!=null?this.audio.addTrack(a,s.audio):this.audio.removeTrack(a)},this.deviceUpdateListener=({device:r,preview:n})=>{n||r.kind==="audiooutput"&&this.audio.setDevice(r.deviceId)},e.participants.joined.addListener("audioUpdate",this.audioUpdateListener),e.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener)}}render(){return p(M,null,this.showPlayDialog&&p("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},p("div",{class:"modal"},p("h3",null,this.t("audio_playback.title")),p("p",null,this.t("audio_playback.description")),p("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};Hx.style=tU;var iU=Object.freeze({__proto__:null,dyte_participants_audio:Hx});const rU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}",Gx=class{constructor(e){V(this,e),this.updateParticipants=()=>{this.getParticipants(this.search)},this.shouldShowStageList=()=>{var t,i,r;((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="LIVESTREAM"?this.showStageList=((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE":this.showStageList=!0},this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.view="sidebar",this.t=B(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){var e,t;const{participants:i,self:r}=this.meeting;this.meeting!=null&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),i.joined.removeListener("peerStartedPresenting",this.updateParticipants),i.joined.removeListener("peerStoppedPresenting",this.updateParticipants),r.removeListener("stageJoined",this.updateParticipants),r.removeListener("stageLeft",this.updateParticipants),r.removeListener("removedFromStage",this.updateParticipants),(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.shouldShowStageList))}meetingChanged(e){var t;e!=null&&(this.participantJoinedListener=i=>{if(this.meeting.meta.viewType==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE")return;const r=this.search.toLowerCase();!i.name.toLowerCase().includes(r)||!i.id.toLowerCase().includes(r)||(this.participants=[...this.participants.filter(n=>n.id!==i.id),i])},this.participantLeftListener=i=>{this.participants=this.participants.filter(r=>r.id!==i.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateParticipants),e.participants.joined.addListener("peerStoppedPresenting",this.updateParticipants),e.self.addListener("stageJoined",this.updateParticipants),e.self.addListener("stageLeft",this.updateParticipants),e.self.addListener("removedFromStage",this.updateParticipants),this.shouldShowStageList(),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.shouldShowStageList))}searchChanged(e){this.getParticipants(e)}getParticipants(e){let t=[this.meeting.self,...this.meeting.participants.joined.toArray()];this.meeting.meta.viewType==="WEBINAR"&&(t=t.filter(i=>i.webinarStageStatus==="ON_STAGE")),e===""?this.participants=t:this.participants=t.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!!this.showStageList)return p(M,null,p("div",{class:"participants-container"},p("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),p("ul",{class:"participants",part:"participants"},this.participants.map(e=>p("dyte-participant",{role:"listitem",key:e.id,meeting:this.meeting,participant:e,view:this.view,t:this.t,iconPack:this.iconPack})),this.participants.length===0&&p("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("Couldn't find a participant with the specified name or ID."):this.t("It looks like nobody is here.")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};Gx.style=rU;var nU=Object.freeze({__proto__:null,dyte_participants_stage_list:Gx});const sU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",Wx=class{constructor(e){V(this,e),this.peerPresentingUpdateListener=()=>{this.stageRequestedParticipants=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(t=>t.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(t=>t.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.acceptStageRequest=async t=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=t,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.acceptJoinStageRequest(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=t;await this.meeting.stage.grantAccess([i])}},this.rejectStageRequest=async t=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=t,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.rejectRequestToJoinStage(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=t;await this.meeting.stage.denyAccess([i])}},this.acceptAllStageRequest=async()=>{if(this.meeting.meta.viewType==="WEBINAR"){const t=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE").map(i=>({id:i.id,requestToJoinType:"REQUEST_TO_PRESENT"}));await this.meeting.participants.acceptAllRequestToJoinStageRequests(t),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map(t=>t.userId))},this.denyAllStageRequest=async()=>{var t;if(this.meeting.meta.viewType==="WEBINAR"){const i=this.meeting.participants.joined.toArray().filter(r=>r.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE");await Promise.all(i.map(async r=>await r.rejectRequestToJoinStage())),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await((t=this.meeting.stage)===null||t===void 0?void 0:t.denyAccess(this.stageRequestedParticipants.map(i=>i.userId)))},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var i,r,n,s;this.meeting.meta.viewType==="WEBINAR"?this.stageRequestedParticipants=(i=[this.meeting.self,...this.meeting.participants.joined.toArray()])===null||i===void 0?void 0:i.filter(a=>a.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"):this.meeting.meta.viewType==="LIVESTREAM"&&(t||(t=(s=(n=await((r=this.meeting.stage)===null||r===void 0?void 0:r.getAccessRequests()))===null||n===void 0?void 0:n.stageRequests)!==null&&s!==void 0?s:[]),this.stageRequestedParticipants=t.map(a=>Object.assign(Object.assign({},a),{name:a.displayName})))},this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.view="sidebar",this.t=B(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:e,self:t}=this.meeting;this.participantLeftListener&&e.joined.removeListener("participantLeft",this.participantLeftListener),this.peerRequestToJoinStageListener&&e.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),this.peerAcceptedToJoinStageListener&&e.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&e.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.joined.removeListener("peerStartedPresenting",this.peerPresentingUpdateListener),e.joined.removeListener("peerStoppedPresenting",this.peerPresentingUpdateListener),t.removeListener("stageJoined",this.peerPresentingUpdateListener),t.removeListener("stageLeft",this.peerPresentingUpdateListener),t.removeListener("removedFromStage",this.peerPresentingUpdateListener)}meetingChanged(e){var t;e!=null&&(this.participantLeftListener=i=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!==i.id)},this.peerRequestToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(n=>n.id!=i);const r=e.participants.joined.get(i);r!==void 0&&(this.stageRequestedParticipants=[...this.stageRequestedParticipants,r])},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.updateRequestList(),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.participants.joined.addListener("peerStartedPresenting",this.peerPresentingUpdateListener),e.participants.joined.addListener("peerStoppedPresenting",this.peerPresentingUpdateListener),(t=e.stage)===null||t===void 0||t.on("stageAccessRequestUpdate",this.updateRequestList),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.self.addListener("stageJoined",this.peerPresentingUpdateListener),e.self.addListener("stageLeft",this.peerPresentingUpdateListener),e.self.addListener("removedFromStage",this.peerPresentingUpdateListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowStageRequests()))return p("div",{class:"stage-requested-participants"},p("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),p("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map(e=>p("li",{class:"waiting-participant",key:e.id},p("div",{class:"participant-details"},p("dyte-avatar",{participant:e,size:"sm",iconPack:this.iconPack,t:this.t}),p("p",{class:"name",title:e.name},e.name)),p("div",{class:"waitlist-controls"},p("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(e),iconPack:this.iconPack,t:this.t},p("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),p("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(e)},p("dyte-icon",{class:"accept",icon:this.iconPack.checkmark}))))))),p("div",{class:"bulk-actions"},p("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),p("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};Wx.style=sU;var aU=Object.freeze({__proto__:null,dyte_participants_stage_queue:Wx});const oU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}",qx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.updateStageRequests=async t=>{var i,r,n;t||(t=(n=(r=await((i=this.meeting.stage)===null||i===void 0?void 0:i.getAccessRequests()))===null||r===void 0?void 0:r.stageRequests)!==null&&n!==void 0?n:[]),this.stageRequestedParticipants=t},this.updateCanView=()=>{this.canViewParticipants=D0(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Fd("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i;this.meeting!=null&&((t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener),(i=this.meeting.stage)===null||i===void 0||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests))}meetingChanged(e){var t;e!=null&&(this.canViewParticipants=D0(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView),e.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=e.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=i=>{this.waitlistedParticipants.some(r=>r.id===i.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,i])},this.waitlistedParticipantLeftListener=i=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(r=>r.id!==i.id)},e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),e.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.acceptPresentRequests&&(this.meeting.meta.viewType==="WEBINAR"&&(this.peerRequestToJoinStateListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(n=>n.id!=i);const r=e.participants.joined.get(i);r!==void 0&&this.stageRequestedParticipants.push(r)},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener)),this.meeting.meta.viewType==="LIVESTREAM"&&(this.updateStageRequests(),e==null||e.stage.on("stageAccessRequestUpdate",this.updateStageRequests))))}statesChanged(e){const t=e||U;t!=null&&(this.participantsActive=t.activeSidebar===!0&&t.sidebar==="participants")}toggleParticipantsTab(){const e=this.states||U;this.participantsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="participants"),U.activeSidebar=this.participantsActive,U.sidebar=this.participantsActive?"participants":"none",this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":"none",activeMoreMenu:!1,activeAI:!1}),U.activeMoreMenu=!1}render(){if(!this.canViewParticipants)return;const e=this.t("participants"),t=this.waitlistedParticipants.length+this.stageRequestedParticipants.length;return p(M,{title:e},t!==0&&!this.participantsActive&&p("div",{class:"waiting-participants-count",part:"waiting-participants-count"},p("span",null,t<=100?t:"99+")),p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};qx.style=oU;var cU=Object.freeze({__proto__:null,dyte_participants_toggle:qx});const dU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",Jx=class{constructor(e){V(this,e),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>this.meeting.meta.viewType==="WEBINAR",this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.view="sidebar",this.search="",this.t=B(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(e){e!=null&&(this.participantJoinedListener=t=>{if(t.webinarStageStatus==="ON_STAGE")return;const i=this.search.toLowerCase();!t.name.toLowerCase().includes(i)||!t.id.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter(r=>r.id!==t.id),t])},this.participantLeftListener=t=>{this.stageViewers=this.stageViewers.filter(i=>i.id!==t.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateStageViewers),e.participants.joined.addListener("peerStoppedPresenting",this.updateStageViewers),e.self.addListener("stageJoined",this.updateStageViewers),e.self.addListener("stageLeft",this.updateStageViewers),e.self.addListener("removedFromStage",this.updateStageViewers))}searchChanged(e){this.getViewers(e)}disconnectedCallback(){const{participants:e,self:t}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),e.joined.removeListener("peerStartedPresenting",this.updateStageViewers),e.joined.removeListener("peerStoppedPresenting",this.updateStageViewers),t.removeListener("stageJoined",this.updateStageViewers),t.removeListener("stageLeft",this.updateStageViewers),t.removeListener("removedFromStage",this.updateStageViewers)}getViewers(e){let t=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(i=>i.webinarStageStatus!=="ON_STAGE");e===""?this.stageViewers=t:this.stageViewers=t.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!(this.view!=="sidebar"||!this.shouldShowViewers()))return p("div",{class:"list"},p("div",{class:"heading-count",part:"heading-count"},this.t("Viewers")," (",this.stageViewers.length,")"),p("ul",{class:"participants",part:"participants"},this.stageViewers.map(e=>{if(e.webinarStageStatus!=="ON_STAGE")return p("dyte-participant",{role:"listitem",key:e.id,meeting:this.meeting,participant:e,view:this.view,iconPack:this.iconPack,t:this.t})}),this.stageViewers.length===0&&p("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("Couldn't find a viewer with the specified name or ID."):this.t("It looks like nobody is here."))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};Jx.style=dU;var lU=Object.freeze({__proto__:null,dyte_participants_viewer_list:Jx});const uU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",Kx=class{constructor(e){V(this,e),this.acceptWaitingRoomRequest=async t=>{await this.meeting.participants.acceptWaitingRoomRequest(t)},this.acceptAllWaitingRoomRequests=async()=>{const t=this.waitlistedParticipants.map(i=>this.meeting.participants.acceptWaitingRoomRequest(i.id));await Promise.all(t)},this.rejectWaitingRoomRequest=async t=>{await this.meeting.participants.rejectWaitingRoomRequest(t)},this.shouldShowWaitlist=()=>this.meeting.meta.viewType==="LIVESTREAM"?!1:this.meeting.self.permissions.acceptWaitingRequests&&this.waitlistedParticipants.length!==0,this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.view="sidebar",this.t=B(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:e}=this.meeting;this.waitlistedParticipantJoinedListener&&e.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&e.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){e!=null&&(this.waitlistedParticipants=e.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=t=>{this.waitlistedParticipants.some(i=>i.id===t.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,t])},this.waitlistedParticipantLeftListener=t=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(i=>i.id!==t.id)},e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),e.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowWaitlist()))return p("div",{class:"waiting-participants"},p("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),p("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map(e=>p("li",{class:"waiting-participant",key:e.id},p("div",{class:"participant-details"},p("dyte-avatar",{participant:e,size:"sm",iconPack:this.iconPack,t:this.t}),p("p",{class:"name",title:e.name},e.name)),p("div",{class:"waitlist-controls"},p("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(e.id)},p("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),p("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(e.id)},p("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}))))))),p("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};Kx.style=uU;var pU=Object.freeze({__proto__:null,dyte_participants_waiting_list:Kx});const hU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;width:560px;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}",Yx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),U.activePermissionsMessage={enabled:!1}},this.reload=()=>{typeof window<"u"&&window.location.reload()},this.meeting=void 0,this.t=B(),this.iconPack=$,this.states=void 0,this.device=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){e!=null&&(this.device=e.self.device)}getLink(e){let t;switch(e){case"audio":t="microphone";break;case"video":t="camera";break;default:t="screenshare";break}const i="https://www.google.com/search?q=";let r=`Allow+${t}+access`;if(this.device!=null){const{browserName:n,isMobile:s}=this.device;r+="+"+n,s&&(r+="+mobile")}return i+r}isDeniedBySystem(){var e;const t=(e=this.meeting)===null||e===void 0?void 0:e.self.mediaPermissions;return t==null?!1:!!Object.values(t).includes("SYSTEM_DENIED")}render(){var e,t,i,r,n,s,a,o,c,d,l,u;const g=this.isDeniedBySystem();return p(M,null,p("h2",null,p("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),g?this.t(`perm_sys_denied.${(i=(t=(e=this.states)===null||e===void 0?void 0:e.activePermissionsMessage)===null||t===void 0?void 0:t.kind)!==null&&i!==void 0?i:"audio"}`):this.t(`perm_denied_title.${(s=(n=(r=this.states)===null||r===void 0?void 0:r.activePermissionsMessage)===null||n===void 0?void 0:n.kind)!==null&&s!==void 0?s:"audio"}`)),p("p",null,this.t(`perm_denied_text.${(c=(o=(a=this.states)===null||a===void 0?void 0:a.activePermissionsMessage)===null||o===void 0?void 0:o.kind)!==null&&c!==void 0?c:"audio"}`)),g&&p("p",null,this.t("perm.sys_denied.message")),!g&&p("a",{class:"need-help-link",href:this.getLink((u=(l=(d=this.states)===null||d===void 0?void 0:d.activePermissionsMessage)===null||l===void 0?void 0:l.kind)!==null&&u!==void 0?u:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},p("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("Need help on how to do this?")),p("div",{class:"actions"},p("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("Continue as it is")),p("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("Reload"))),p("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};Yx.style=hU;var gU=Object.freeze({__proto__:null,dyte_permissions_message:Yx});const mU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Qx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=Be,this.iconPack=$,this.size=void 0,this.t=B(),this.pipEnabled=!1,this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){}statesChanged(e){const t=e||U;(t==null?void 0:t.activePipMode)!=null&&(this.pipEnabled=t.activePipMode)}meetingChanged(e){var t;if(e===null)return;this.pipSupported=gt.isSupported()&&((t=e.self.config)===null||t===void 0?void 0:t.pipMode);const i=this.states||U;this.pipEnabled=i.activePipMode}togglePip(){const e=this.states||U,{activePipMode:t}=e;t!==!0?(gt.updateMediaSession(Yi.CAMERA,this.meeting.self.videoEnabled),gt.updateMediaSession(Yi.MIC,this.meeting.self.audioEnabled),gt.enable(),this.stateUpdate.emit({activePipMode:!0})):(gt.disable(),this.stateUpdate.emit({activePipMode:!1})),this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1}render(){if(!!this.pipSupported)return p(M,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:this.pipEnabled?this.iconPack.pip_on:this.iconPack.pip_off,label:this.pipEnabled?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{states:["statesChanged"],meeting:["meetingChanged"]}}};Qx.style=mU;var fU=Object.freeze({__proto__:null,dyte_pip_toggle:Qx});const vU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}",Zx=class{constructor(e){V(this,e),this.meeting=void 0,this.plugin=void 0,this.iconPack=$,this.t=B(),this.canClosePlugin=!1,this.canControl=!0,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(e){var t;if(e!=null){const i=e.self.permissions,r=i.isV2?i.plugins.canEditConfig:i.plugins.canEditAcl;if(i.plugins.config!==void 0){Object.keys(i.plugins.config||{}).forEach(a=>{i.plugins.config[a.toLowerCase()]=i.plugins.config[a]});const n=this.plugin.id.replace(new RegExp("-","g"),""),s=(((t=i.plugins.config[n])===null||t===void 0?void 0:t.defaultAccess)||"blacklist")==="whitelist";this.plugin.enabledBy===e.self.userId||r?this.canControl=!0:s&&(this.canControl=!1),this.viewModeEnabled=!this.canControl}fn(()=>{this.canClosePlugin=e.self.permissions.plugins.canClose})}}pluginChanged(e){this.toggleViewModeListener=t=>{this.viewModeEnabled=t},e!=null&&(e.addPluginView(this.iframeEl),e.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var e;(e=this.plugin)===null||e===void 0||e.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return this.plugin==null?null:p(M,null,p("header",{part:"header"},p("div",null,this.plugin.name),this.canClosePlugin&&p("div",null,p("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),p("div",{class:"iframe-container"},!this.canControl&&(this.viewModeEnabled?p("div",{class:"block-inputs"}):null),p("iframe",{ref:e=>this.iframeEl=e,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};Zx.style=vU;var yU=Object.freeze({__proto__:null,dyte_plugin_main:Zx});const _U=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}`,Xx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:"none"}),U.activeSidebar=!1,U.sidebar="none"},this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.t=B(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugin=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting)===null||e===void 0||e.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(e){e!=null&&(this.canStartPlugins=e.self.permissions.plugins.canStart,this.canClosePlugin=e.self.permissions.plugins.canClose,this.plugins=e.plugins.all.toArray().filter(t=>{var i;return!(!((i=e.self.config.disabledPlugins)===null||i===void 0)&&i.includes(t.id))}),this.updateActivePlugins=()=>{this.activatedPluginsId=e.plugins.active.toArray().map(t=>t.id)},this.updateActivePlugins(),e.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return p(M,null,p("ul",{class:"scrollbar"},this.plugins.map(e=>p("li",{key:e.name,class:"plugin"},p("div",{class:"metadata"},p("img",{src:e.picture}),p("div",{class:"name"},e.name)),!this.activatedPluginsId.includes(e.id)&&this.canStartPlugins&&p("div",{class:"buttons"},p("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{e.activate(),this.close()},"aria-label":`${this.t("Activate")} ${e.name}`},p("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(e.id)&&this.canClosePlugin&&p("div",{class:"buttons"},p("dyte-button",{kind:"icon",size:"lg",onClick:()=>{e.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("Close")} ${e.name}`},p("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};Xx.style=_U;var bU=Object.freeze({__proto__:null,dyte_plugins:Xx});const wU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",e5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=L0(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),Fd("sidebar",()=>this.statesChanged())}meetingChanged(e){var t;e!=null&&(this.canViewPlugins=L0(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||U;t!=null&&(this.pluginsActive=t.activeSidebar===!0&&t.sidebar==="plugins")}togglePlugins(){const e=this.states||U;this.pluginsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="plugins"),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":"none",activeMoreMenu:!1,activeAI:!1}),U.activeSidebar=this.pluginsActive,U.sidebar=this.pluginsActive?"plugins":"none",U.activeMoreMenu=!1}render(){if(!this.canViewPlugins)return;const e=this.t("plugins");return p(M,{title:e},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};e5.style=wU;var SU=Object.freeze({__proto__:null,dyte_plugins_toggle:e5});const EU=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}`,t5=class{constructor(t){V(this,t),this.onPollsUpdate=i=>{this.polls=[...i.polls]},this.meeting=void 0,this.config=Be,this.size=void 0,this.iconPack=$,this.t=B(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.meeting!=null&&((t=this.meeting.polls)===null||t===void 0||t.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(t){t!=null&&(t&&!t.polls||(this.polls=[...t.polls.items],t.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async i=>{this.create=!1,await t.polls.create(i.question,i.options,i.anonymous,i.hideVotes)},this.onVote=async(i,r)=>{await t.polls.vote(i,r)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){Pa(this.pollEl)}render(){return p(M,null,p("div",{class:"ctr",part:"container"},p("div",{class:"polls-view scrollbar",ref:t=>this.pollEl=t,part:"polls"},this.polls.map(t=>{var i;return p("dyte-poll",{key:t.id,poll:t,onDyteVotePoll:r=>{this.onVote(r.detail.id,r.detail.index)},self:(i=this.meeting)===null||i===void 0?void 0:i.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})}),this.create&&p("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:t=>{this.onCreate(t.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&p("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("Cancel Poll Creation"):this.t("Create New Poll"))))}static get watchers(){return{meeting:["meetingChanged"]}}};t5.style=EU;var TU=Object.freeze({__proto__:null,dyte_polls:t5});const kU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",i5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:t})=>{t===!0&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=M0(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Fd("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i;(e=this.meeting.polls)===null||e===void 0||e.removeListener("pollsUpdate",this.onPollsUpdate),(i=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(e){var t;e&&e.polls&&(this.unreadPollsCount=e.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),this.canViewPolls=M0(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||U;t!=null&&(this.pollsActive=t.activeSidebar===!0&&t.sidebar==="polls")}togglePollsTab(){const e=this.states||U;this.unreadPollsCount=0,this.pollsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="polls"),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":"none",activeMoreMenu:!1,activeAI:!1}),U.activeSidebar=this.pollsActive,U.sidebar=this.pollsActive?"polls":"none",U.activeMoreMenu=!1}render(){if(!this.canViewPolls)return;const e=this.t("polls");return p(M,{title:e},this.unreadPollsCount!==0&&!this.pollsActive&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};i5.style=kU;var PU=Object.freeze({__proto__:null,dyte_polls_toggle:i5});const CU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",r5=class{constructor(e){V(this,e),this.setIsRecording=t=>{this.isRecording=t==="RECORDING"},this.meeting=void 0,this.size=void 0,this.t=B(),this.iconPack=$,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting)===null||e===void 0||e.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(e){e!=null&&(this.setIsRecording(e.recording.recordingState),this.updateRecordingStatus=t=>{this.setIsRecording(t)},e.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return p(M,null,this.isRecording&&p("div",{class:"indicator","aria-label":this.t("This meeting is being recorded"),part:"indicator"},p("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),p("span",null,this.t("REC"))))}static get watchers(){return{meeting:["meetingChanged"]}}};r5.style=CU;var RU=Object.freeze({__proto__:null,dyte_recording_indicator:r5});const xU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",n5=class{constructor(e){V(this,e),this.dyteAPIError=Q(this,"dyteAPIError",7),this.toggleRecording=async()=>{var t,i;if(!(this.isLoading()||this.disabled))switch(this.recordingState){case"IDLE":try{await((t=this.meeting)===null||t===void 0?void 0:t.recording.start());return}catch{this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("Error while starting recording.")})}return;case"RECORDING":try{await((i=this.meeting)===null||i===void 0?void 0:i.recording.stop());return}catch{this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("Error while stopping recording.")})}return;case"STARTING":case"STOPPING":default:return}},this.isLoading=()=>this.meeting==null||this.recordingState==="STARTING"||this.recordingState==="STOPPING",this.variant="button",this.meeting=void 0,this.t=B(),this.iconPack=$,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.recordingStateUpdateListener&&((e=this.meeting)===null||e===void 0||e.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener))}meetingChanged(e){e!=null&&(this.recordingState=e.recording.recordingState,this.canRecord=e.self.permissions.canRecord===!0,this.recordingStateUpdateListener=t=>{this.recordingState=t},e.recording.addListener("recordingUpdate",this.recordingStateUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return this.t("Record");case"RECORDING":return this.t("Stop Recording");case"STARTING":return this.t("Starting");case"STOPPING":return this.t("Stopping");default:return this.t("Loading")}}getIcon(){switch(this.recordingState){case"IDLE":return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording;case"STARTING":case"STOPPING":default:return this.iconPack.recording}}render(){if(!!this.canRecord)return p(M,{title:this.t("Record")},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};n5.style=xU;var IU=Object.freeze({__proto__:null,dyte_recording_toggle:n5});const AU=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3,p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}h3{margin-bottom:var(--dyte-space-4, 16px);font-size:20px;line-height:1.5}p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}p.empty-message{text-align:center;font-size:16px}label>input{margin-right:var(--dyte-space-2, 8px)}input{background-color:transparent;accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}#allow-requests-label{display:flex;align-items:center;font-size:12px}#actions{margin-top:var(--dyte-space-4, 16px);display:flex;align-items:center}dyte-button{flex:1 1 0%;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px}#participants-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-56, 224px);overflow-y:auto}.participant{box-sizing:border-box;display:flex;height:var(--dyte-space-14, 56px);align-items:center;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.participant:last-child{border-bottom-width:var(--dyte-border-width-none, 0)}.participant{cursor:pointer;font-size:14px}.participant input{margin-right:var(--dyte-space-3, 12px)}dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,s5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.acceptedRequestId=void 0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B()}disconnectedCallback(){}meetingChanged(e){var t,i,r,n,s;e!=null&&!Boolean(this.acceptedRequestId)&&Boolean((r=(i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0?void 0:i.active)===null||r===void 0?void 0:r.id)&&(this.acceptedRequestId=(s=(n=this.meeting.remote)===null||n===void 0?void 0:n.active)===null||s===void 0?void 0:s.id)}render(){var e,t,i,r;return Boolean((t=(e=this===null||this===void 0?void 0:this.meeting)===null||e===void 0?void 0:e.remote)===null||t===void 0?void 0:t.incomingRequests.toArray().length)?p(M,null,p("h3",null,this.t("The following people have requested remote control to your screen share")),p("p",null,this.t("Please select whom you want to give access to")),p("div",{class:"scrollbar"},(r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.incomingRequests.toArray().map(n=>{const s=this.meeting.participants.joined.get(n.remotePeerId);return p("label",{onClick:()=>{this.acceptedRequestId=n.id},class:"participant",htmlFor:s.id},p("input",{type:"radio",checked:this.acceptedRequestId===n.id,name:"remote-access-participant",value:n.id}),p("dyte-avatar",{participant:s,size:"sm"}),s.name)})),p("div",{id:"actions"},p("dyte-button",{disabled:!Boolean(this.acceptedRequestId),iconPack:this.iconPack,t:this.t,onClick:()=>{var n,s;(s=(n=this.meeting)===null||n===void 0?void 0:n.remote)===null||s===void 0||s.acceptControl(this.acceptedRequestId),this.stateUpdate.emit({activeRemoteAccessManager:!1})}},this.t("Grant access")))):p(M,null,p("p",{class:"empty-message"},this.t("There are no remote requests, yet.")))}static get watchers(){return{meeting:["meetingChanged"]}}};s5.style=AU;var OU=Object.freeze({__proto__:null,dyte_remote_access_manager:s5});const MU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",yE=()=>typeof navigator<"u"&&typeof navigator.mediaDevices<"u"&&"getDisplayMedia"in navigator.mediaDevices,a5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.dyteAPIError=Q(this,"dyteAPIError",7),this.selfScreenShareListener=({screenShareEnabled:t})=>{this.screenShareEnabled=t;const i=this.screenShareCount+(t?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.screenShareListener=({screenShareEnabled:t})=>{const i=this.screenShareCount+(t?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:t})=>{t&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canScreenShare=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{if(t==="screenshare"&&(this.shareScreenPermission=i,this.getState(),i==="COULD_NOT_START"&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("An error occured while starting screenshare.")}),this.hasPermissionError())){const r={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:r}),U.activePermissionsMessage=r}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var t;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const r={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:r}),U.activePermissionsMessage=r,!1}const i=(t=this.meeting)===null||t===void 0?void 0:t.self;if(this.screenShareEnabled){i.disableScreenShare();return}i==null||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await i.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("share_screen_start"),label:this.t("share_screen_start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1}}connectedCallback(){if(!yE()){Vu.error("[dyte-screenshare-toggle] Device does not support screensharing.");return}this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c,d,l;(e=this.meeting)===null||e===void 0||e.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),(t=this.meeting)===null||t===void 0||t.participants.joined.removeListener("participantLeft",this.participantLeftListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("screenShareUpdate",this.selfScreenShareListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("stageJoined",this.selfJoinStateListener),(o=this.meeting)===null||o===void 0||o.self.removeListener("stageLeft",this.selfStageLeftListener),(c=this.meeting)===null||c===void 0||c.self.removeListener("removedFromStage",this.selfJoinStateListener),(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0||l.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.updateCanProduce(e),this.maxScreenShareCount=t.config.maxScreenShareCount,this.screenShareEnabled=t.screenShareEnabled;let r=0;for(const n of e.participants.joined.toArray())n.screenShareEnabled&&r++;this.screenShareCount=r,this.getState(),e.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),e.participants.joined.addListener("screenShareUpdate",this.screenShareListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),t.addListener("screenShareUpdate",this.selfScreenShareListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStageLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceScreenshare==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canScreenShare=!1,n&&!a?this.canScreenShare=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canScreenShare=!0),t.permissions.canProduceScreenshare==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canScreenShare=!0))}hasPermissionError(){return this.shareScreenPermission==="SYSTEM_DENIED"||this.shareScreenPermission==="DENIED"}getState(){let e="",t="",i="",r={};const n=this.hasPermissionError()&&!this.screenShareEnabled,s=this.reachedMaxScreenShares()&&!this.screenShareEnabled,a=this.shareScreenPermission==="COULD_NOT_START";this.screenShareEnabled&&!n?(t=this.t("share_screen_stop"),i=this.iconPack.share_screen_stop,r["red-icon"]=!0):(t=this.t("share_screen_start"),i=this.iconPack.share_screen_start),this.shareScreenPermission==="SYSTEM_DENIED"?(e=this.t("perm_sys_denied"),r["red-icon"]=!0):e=t,s&&(e=this.t("Maximum screen share limit reached")),a&&(e=this.t("An error occurred while screen sharing, please try again.")),this.screenShareState={tooltipLabel:e,label:t,icon:i,classList:r,disable:n||s,showWarning:n||s||a}}render(){return!yE()||!this.canScreenShare?null:p(M,{title:this.screenShareState.label},p("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning})))}static get watchers(){return{meeting:["meetingChanged"]}}};a5.style=MU;var DU=Object.freeze({__proto__:null,dyte_screen_share_toggle:a5});const LU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px);opacity:0.8}#video-container{position:absolute;display:block;height:100%;width:100%}#video-container .fit-in-container{-o-object-fit:fill;object-fit:fill}video{height:100%;width:100%;-o-object-fit:contain;object-fit:contain}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}video.visible{-webkit-animation:video-fadein 0.4s ease;animation:video-fadein 0.4s ease}#controls{display:none;position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}:host(:hover) #controls,:host(:active) #controls,:host(:focus-visible) #controls{display:flex}#full-screen-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:20px;font-weight:500}:host([size='sm']) h3{font-size:16px}#self-message{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.isSelf) #self-view{flex:1 1 0%}:host(.isSelf) #video-container{position:static;aspect-ratio:auto;height:auto;width:50%;max-width:var(--dyte-space-96, 384px);border-radius:var(--dyte-border-radius-md, 8px);transition:0.6s ease}:host(.isSelf) #video-container.expand{width:60%;max-width:100%}.actions{display:flex;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px)}:host([size='sm'].isSelf) #video-container,:host([size='md'].isSelf) #video-container,:host([size='sm'].isSelf) #expand-btn,:host([size='md'].isSelf) #expand-btn{display:none}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.remote-control{z-index:10;height:100%;max-height:100%;flex:0 1 auto}#remote-control-self{position:absolute;top:var(--dyte-space-0, 0px);left:50%;z-index:10;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;box-sizing:border-box;display:flex;height:var(--dyte-space-8, 32px);align-items:center;overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transform:translateX(-50%)}#remote-control-self p{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}#remote-control-self dyte-button{height:100%;border-radius:var(--dyte-border-radius-none, 0);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));font-size:12px}:host([size='sm']) #remote-control-self{height:auto;flex-direction:column}:host([size='sm']) #remote-control-self dyte-button{width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}@-webkit-keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}@keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}",o5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.fullScreenListener=()=>{this.isFullScreen=bx()},this.onRemoteUpdate=({payload:t,type:i})=>{var r,n;let s="";i===vr.INCOMING_REQUEST_ACCEPTED&&(s=`${this.meeting.participants.joined.get(t.request.remotePeerId).name} is controlling your screen.`),i===vr.OUTGOING_REQUEST_ACCEPTED&&(s=`You are controlling ${this.meeting.participants.joined.get(t.request.hostPeerId).name}'s screen.`),(i===vr.INCOMING_REQUEST_ENDED||i===vr.OUTGOING_REQUEST_ENDED)&&(s=""),i===vr.REQUEST_RECEIVED&&!Boolean((n=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||n===void 0?void 0:n.active)&&this.stateUpdate.emit({activeRemoteAccessManager:!0}),this.remoteControlInfo=s},this.onMouseEvent=t=>{var i,r;this.shouldSkipEventTrigger()||(t.stopPropagation(),t.preventDefault(),(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.mouseEvent(t,this.videoEl))},this.onKeyDown=t=>{var i,r;this.shouldSkipEventTrigger()||(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.keyboardEvent(t)},this.toggleFullScreen=()=>{this.isFullScreen?(_x(),this.isFullScreen=!1):(yx(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=$,this.t=B(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}connectedCallback(){window==null||window.addEventListener("fullscreenchange",this.fullScreenListener),window==null||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){var e,t,i;this.screenShareListener&&((e=this.participant)===null||e===void 0||e.removeListener("screenShareUpdate",this.screenShareListener)),(i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0||i.removeListener("remoteUpdate",this.onRemoteUpdate),window==null||window.removeEventListener("fullscreenchange",this.fullScreenListener),window==null||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(e){var t,i,r,n,s;e!=null&&(this.screenShareListener=({screenShareEnabled:a,screenShareTracks:o})=>{const c=a&&o.video!=null;if(fn(()=>{this.screenShareEnabled=c}),c){const d=new MediaStream;d.addTrack(o.video),this.videoEl!=null&&(this.videoEl.srcObject=d,this.videoEl.play())}else this.videoEl!=null&&(this.videoEl.srcObject=void 0)},this.screenShareListener(e),Boolean((i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0?void 0:i.active)&&[this.meeting.remote.active.hostPeerId,this.meeting.remote.active.remotePeerId].includes(e==null?void 0:e.id)&&this.onRemoteUpdate({payload:{request:this.meeting.remote.active},type:((r=this.meeting.remote.active)===null||r===void 0?void 0:r.hostPeerId)===this.meeting.self.id?"INCOMING_REQUEST_ACCEPTED":"OUTGOING_REQUEST_ACCEPTED"}),e.addListener("screenShareUpdate",this.screenShareListener),(s=(n=this.meeting)===null||n===void 0?void 0:n.remote)===null||s===void 0||s.addListener("remoteUpdate",this.onRemoteUpdate))}shouldSkipEventTrigger(){var e,t,i;return this.meeting==null||this.participant==null?!0:!Boolean((e=this.meeting.remote)===null||e===void 0?void 0:e.active)||!Boolean(this.meeting.participants.joined.get((t=this.meeting.remote)===null||t===void 0?void 0:t.active.hostPeerId))||((i=this.meeting.remote)===null||i===void 0?void 0:i.active.hostPeerId)!=this.participant.id}render(){var e,t,i,r,n,s,a,o;const c=((e=this.participant)===null||e===void 0?void 0:e.id)===((t=this.meeting)===null||t===void 0?void 0:t.self.id),d=this.isFullScreen?this.t("Exit Fullscreen"):this.t("Fullscreen Screen Share"),l=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return p(M,{class:{isSelf:c}},Boolean(((r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.active)&&this.remoteControlInfo)&&p("div",{id:"remote-control-self",key:"remote-control-self"},p("p",{class:"remote-control-message"},this.remoteControlInfo),p("dyte-button",{onClick:()=>{var u;return(u=this.meeting.remote)===null||u===void 0?void 0:u.endControl()},iconPack:this.iconPack,t:this.t},((s=(n=this.meeting.remote)===null||n===void 0?void 0:n.active)===null||s===void 0?void 0:s.hostPeerId)===this.meeting.self.id?"Revoke access":"Stop")),p("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded},contentEditable:Boolean((a=this.meeting.remote)===null||a===void 0?void 0:a.active),onKeyDown:this.onKeyDown},p("video",{ref:u=>this.videoEl=u,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`,onMouseMove:this.onMouseEvent,onClick:this.onMouseEvent,onContextMenu:this.onMouseEvent})),p("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!c&&wx()&&p("dyte-tooltip",{label:d,iconPack:this.iconPack,t:this.t},p("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:d,iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:l,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t}))),((o=this.participant)===null||o===void 0?void 0:o.supportsRemoteControl)===!0&&p("dyte-menu",{id:"menu",key:"menu",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.more_vertical,iconPack:this.iconPack,t:this.t})),p("dyte-menu-list",{iconPack:this.iconPack,t:this.t},!c&&p("dyte-menu-item",{style:{cursor:this.participant.supportsRemoteControl?"pointer":"not-allowed"},iconPack:this.iconPack,t:this.t,onClick:()=>{var u,g;!((u=this.participant)===null||u===void 0)&&u.supportsRemoteControl&&((g=this.meeting.remote)===null||g===void 0||g.requestControl(this.participant.id))}},"Request remote control"),c&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>this.stateUpdate.emit({activeRemoteAccessManager:!0})},"Manage remote control requests")))),c&&p("div",{id:"self-message",key:"self-message"},p("h3",null,this.t("Your screen is being shared")),p("div",{class:"actions"},this.meeting!=null&&p("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("share_screen_stop")),p("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},p("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("Minimize Preview"):this.t("Expand Preview")))),p("slot",null))}get host(){return Is(this)}static get watchers(){return{participant:["participantChanged"]}}};o5.style=LU;var NU=Object.freeze({__proto__:null,dyte_screenshare_view:o5});const UU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}",c5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.selfJoinStageListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceVideo=!1},this.selfJoinStageRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&((e=this.meeting)===null||e===void 0||e.meta.removeListener("poorConnection",this.poorConnectionListener)),this.selfJoinStageListener&&((t=this.meeting)===null||t===void 0||t.self.removeListener("joinStageRequestAccepted",this.selfJoinStageListener)),this.selfJoinStageRejectedListener&&((i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestRejected",this.selfJoinStageRejectedListener)),this.selfJoinStageListener&&((r=this.meeting)===null||r===void 0||r.self.removeListener("stageJoined",this.selfJoinStageListener)),this.selfStageLeftListener&&((n=this.meeting)===null||n===void 0||n.self.removeListener("stageLeft",this.selfStageLeftListener)),this.selfJoinStageListener&&((s=this.meeting)===null||s===void 0||s.self.removeListener("removedFromStage",this.selfJoinStageListener))}meetingChanged(e){e!=null&&(this.updateCanProduce(e),this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:t})=>{t<7?this.networkStatus="poor":t<4&&(this.networkStatus="poorest"),setTimeout(()=>{this.networkStatus="good"},5e3)},e.meta.addListener("poorConnection",this.poorConnectionListener),e.self.addListener("joinStageRequestAccepted",this.selfJoinStageListener),e.self.addListener("joinStageRequestRejected",this.selfJoinStageRejectedListener),e.self.addListener("stageJoined",this.selfJoinStageListener),e.self.addListener("stageLeft",this.selfStageLeftListener),e.self.addListener("removedFromStage",this.selfJoinStageListener))}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceVideo==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";if(!s&&!a)this.canProduceVideo=n;else{const o=t.permissions.canProduceVideo==="CAN_REQUEST";(n||o&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")))&&(this.canProduceVideo=!0)}}changeTab(e){this.activeTab=e,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),U.activeSettings=!1}render(){if(this.meeting==null)return null;const e={meeting:this.meeting,states:this.states||U,iconPack:this.iconPack,t:this.t};return p(M,null,p("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},p("header",null,p("h2",null,this.t("settings"))),p("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),p("div",{class:"right"},p("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&p("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&p("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),p("div",{class:"right"},p("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&p("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),p("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),p("div",{class:"right"},p("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),p("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&p("header",null,p("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),p("h2",null,this.t(this.activeTab==="audio"?"audio":"video"))),this.activeTab==="audio"&&p("dyte-settings-audio",Object.assign({},e)),this.activeTab==="video"&&p("dyte-settings-video",Object.assign({},e))))}static get watchers(){return{meeting:["meetingChanged"]}}};c5.style=UU;var jU=Object.freeze({__proto__:null,dyte_settings:c5});const $U=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",d5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B()}toggleSettings(){var e;this.stateUpdate.emit({activeSettings:!(!((e=this.states)===null||e===void 0)&&e.activeSettings),activeMoreMenu:!1}),U.activeSettings=!U.activeSettings,U.activeMoreMenu=!1}render(){const e=this.t("settings");return p(M,{title:e},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:e,variant:this.variant}))}};d5.style=$U;var VU=Object.freeze({__proto__:null,dyte_settings_toggle:d5});const FU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}dyte-camera-toggle{margin-left:var(--dyte-space-1\\.5, 6px)}dyte-participant-tile{height:auto;width:100%;max-width:var(--dyte-space-96, 384px)}",l5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.join=async()=>{var t,i;this.displayName.trim()!==""&&!this.isJoining&&(this.isJoining=!0,(t=this.meeting)===null||t===void 0||t.self.setName(this.displayName),ka.setItem("dyte-display-name",this.displayName),await((i=this.meeting)===null||i===void 0?void 0:i.joinRoom()))},this.meeting=void 0,this.size=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){var t,i;e!=null&&(this.canEditName=(t=e.self.permissions.canEditDisplayName)!==null&&t!==void 0?t:!0,this.displayName=((i=e.self.name)===null||i===void 0?void 0:i.trim())||"")}render(){var e,t,i;const r=((e=this.displayName)===null||e===void 0?void 0:e.trim())==="",n={meeting:this.meeting,config:this.config,states:U,size:this.size,iconPack:this.iconPack,t:this.t};return p(M,null,p("div",{class:"container"},p($e,{element:"dyte-participant-tile",defaults:n,props:{participant:(t=this.meeting)===null||t===void 0?void 0:t.self,size:"md"},childProps:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},deepProps:!0}),p("div",{class:"metadata"},this.displayName.trim()===""?p("div",{class:"name"},this.t("setup_screen.join_in_as")):p("div",{class:"label"},p("p",null,this.t("setup_screen.joining_as")),p("div",{class:"name"},Zi(this.displayName,20))),this.canEditName&&p("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,autoFocus:!0,onInput:s=>{this.displayName=s.target.value},onKeyDown:s=>{s.key==="Enter"&&this.join()}}),p("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:r,iconPack:this.iconPack,t:this.t},this.isJoining?p("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")))))}static get watchers(){return{meeting:["meetingChanged"]}}};l5.style=FU;var zU=Object.freeze({__proto__:null,dyte_setup_screen:l5});const BU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}dyte-chat,dyte-participants,dyte-plugins{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",u5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),U.sidebar=this.tab},this.enabledSections=["none"],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.size=void 0,this.view="default",this.tab=this.defaultSection}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),Fd("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateEnabledSections)}meetingChanged(e){var t,i;this.updateEnabledSections(e),(i=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||i===void 0||i.on("stageStatusUpdate",this.updateEnabledSections)}statesChanged(e){const t=e||U;(t==null?void 0:t.sidebar)!=null&&(this.tab=t.sidebar)}viewChanged(e){e==="full-screen"&&(this.keydownListener=t=>{t.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}filterSections(e){if(!this.meeting.self.config)return e;const t=this.meeting.self.config;return e.filter(i=>t.controlBar.elements[i])}viewSection(e){this.tab=e,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.tab}),U.activeSidebar=!0,U.sidebar=this.tab}updateEnabledSections(e=this.meeting){const t=["none"];O0(e)&&t.push("chat"),D0(e)&&t.push("participants"),L0(e)&&t.push("plugins"),M0(e)&&t.push("polls"),this.enabledSections=t}render(){var e;const t={meeting:this.meeting,config:this.config,states:this.states||U,size:this.size,t:this.t,iconPack:this.iconPack};return((e=this.states)===null||e===void 0?void 0:e.activeSidebar)===!1||this.tab==="none"?null:p(M,null,this.view==="full-screen"&&[p("h3",{class:"title"},this.t("About Call")),p("div",{id:"mobile-header"},this.filterSections(this.enabledSections).map(i=>p("dyte-button",{key:i,variant:"ghost",class:{active:this.tab===i},onClick:()=>this.viewSection(i),iconPack:this.iconPack,t:this.t},this.t(i))))],p("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("Close"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.view!=="full-screen"&&p("h3",{class:"title"},this.t(this.tab)),this.tab==="chat"&&p($e,{element:"dyte-chat",defaults:t}),this.tab==="polls"&&p($e,{element:"dyte-polls",defaults:t}),this.tab==="participants"&&p($e,{element:"dyte-participants",defaults:t}),this.tab==="plugins"&&p($e,{element:"dyte-plugins",defaults:t}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};u5.style=BU;var HU=Object.freeze({__proto__:null,dyte_sidebar:u5});const GU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}",p5=class{constructor(e){V(this,e),this.setHostDimensions=()=>{const{clientWidth:t,clientHeight:i}=this.host;this.dimensions={width:t,height:i}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new HR(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}render(){const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:t,height:i,getPosition:r}=i9({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return p(M,null,this.participants.map((n,s)=>{const{top:a,left:o}=r(s);return p($e,{element:"dyte-participant-tile",defaults:e,props:{participant:n,style:{position:"absolute",top:`${a}px`,left:`${o}px`,width:`${t}px`,height:`${i}px`},key:n.id,"data-participant":n.id},childProps:{participant:n},deepProps:!0})}),p("slot",null))}get host(){return Is(this)}};p5.style=GU;var WU=Object.freeze({__proto__:null,dyte_simple_grid:p5});const qU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}",h5=class{constructor(e){V(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Be,this.iconPack=$,this.t=B(),this.gridSize=rb}render(){const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},t=this.participants.filter(i=>this.pinnedParticipants.some(r=>r.id!=i.id));return p(M,null,p("main",{part:"main"},p($e,{element:"dyte-simple-grid",defaults:e,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.size}})),t.length>0&&p("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},p($e,{element:"dyte-simple-grid",defaults:e,props:{part:"aside-grid",participants:t,aspectRatio:this.aspectRatio,gap:this.gap,size:this.size}})))}get host(){return Is(this)}};h5.style=qU;var JU=Object.freeze({__proto__:null,dyte_spotlight_grid:h5});const KU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}",g5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.iconPack=$,this.t=B()}render(){return p(M,null,p("slot",null))}};g5.style=KU;var YU=Object.freeze({__proto__:null,dyte_stage:g5});const QU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",m5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var t,i,r,n,s,a,o;const c=(t=this.meeting.stage)===null||t===void 0?void 0:t.status;c==="ON_STAGE"&&await((r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),c==="OFF_STAGE"&&((s=(n=this===null||this===void 0?void 0:this.meeting)===null||n===void 0?void 0:n.stage)===null||s===void 0||s.requestAccess(),Z7(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),c==="REQUESTED_TO_JOIN_STAGE"&&((o=(a=this===null||this===void 0?void 0:this.meeting)===null||a===void 0?void 0:a.stage)===null||o===void 0||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=B()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(e,t){this.stageStatus=t,t==="ACCEPTED_TO_JOIN_STAGE"&&(e.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",i=>this.stageStatusHandler(this.meeting,i))}meetingChanged(e){var t,i,r,n;e!=null&&(this.stageStatus=(t=e.stage)===null||t===void 0?void 0:t.status,this.stageStatusHandler(e,(i=e.stage)===null||i===void 0?void 0:i.status),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.on("stageStatusUpdate",s=>this.stageStatusHandler(e,s)))}getState(){let e="",t="",i=!1;switch(this.stageStatus){case"ON_STAGE":{t=this.iconPack.leave_stage,e="Leave Livestream",i=!1;break}case"ACCEPTED_TO_JOIN_STAGE":{t=this.iconPack.join_stage,e="Join Livestream",i=!0;break}case"REQUESTED_TO_JOIN_STAGE":{t=this.iconPack.join_stage,e="Requested",i=!1;break}default:{t=this.iconPack.join_stage,e="Join Livestream",i=!1;break}}return{label:e,disabled:i,icon:t}}render(){if(!!X7(this.meeting))return p(M,{title:this.state.label},p("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};m5.style=QU;var ZU=Object.freeze({__proto__:null,dyte_stage_toggle:m5});const XU=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}",f5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=$,this.t=B()}connectedCallback(){this.stateUpdate.emit({abc:!1}),U.abc=!1}get value(){return this.input.value}render(){return p(M,null,p("input",{ref:e=>this.input=e,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};f5.style=XU;var ej=Object.freeze({__proto__:null,dyte_text_field:f5});const tj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",v5=class{constructor(e){V(this,e),this.disconnectMeeting=t=>{var i;t!=null&&this.countListener!=null&&((i=t.livestream)===null||i===void 0||i.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.iconPack=$,this.t=B(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;this.disconnectMeeting(t),e!=null&&(this.countListener=()=>{var r;this.viewerCount=(r=e.livestream)===null||r===void 0?void 0:r.viewerCount},this.countListener(),(i=e.livestream)===null||i===void 0||i.addListener("viewerCountUpdate",this.countListener))}render(){return Os(this.meeting)?p(M,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},p("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};v5.style=tj;var ij=Object.freeze({__proto__:null,dyte_viewer_count:v5});const rj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}",y5=class{constructor(e){V(this,e),this.meeting=void 0,this.config=Be,this.iconPack=$,this.t=B()}render(){return p(M,null,p("slot",null,p("div",{class:"centered",part:"content"},p("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),p("p",null,this.t("waitlist.body_text")))))}};y5.style=rj;var nj=Object.freeze({__proto__:null,dyte_waiting_screen:y5});const sj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",_5=class{constructor(e){V(this,e),this.requestToJoinAcceptedListener=()=>{this.stageStatus="ACCEPTED"},this.requestToJoinRejectedListener=()=>{this.stageStatus="DENIED"},this.stageJoinedListener=()=>{this.stageStatus="ACCEPTED"},this.removeFromStageListener=()=>{this.stageStatus="NOT_REQUESTED"},this.selfStageLeftListener=()=>{this.stageStatus="NOT_REQUESTED"},this.requestStageListener=()=>{this.stageStatus="PENDING"},this.stageCallback=async()=>{var t;const i=(t=this.meeting)===null||t===void 0?void 0:t.self;if(!(i==null||!this.requestProduce&&!this.canPresent)){if(this.stageStatus==="PENDING"){await i.withdrawRequestToJoinStage();return}if(this.stageStatus==="ACCEPTED"){await i.leaveStage(),this.stageStatus="NOT_REQUESTED";return}this.canPresent?(await i.joinStage(),this.stageStatus="ACCEPTED"):(await i.requestToJoinStage(),this.stageStatus="PENDING")}},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.stageStatus="NOT_REQUESTED",this.canPresent=!1,this.requestProduce=!1}connectedCallback(){this.meetingChanged(this.meeting),this.meeting.self.addListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.addListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.addListener("stageJoined",this.stageJoinedListener),this.meeting.self.addListener("removedFromStage",this.removeFromStageListener),this.meeting.self.addListener("stageLeft",this.selfStageLeftListener),this.meeting.self.addListener("peerRequestToJoinStage",this.requestStageListener)}disconnectedCallback(){this.meeting.self.removeListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.removeListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.removeListener("removedFromStage",this.removeFromStageListener),this.meeting.self.removeListener("stageJoined",this.stageJoinedListener),this.meeting.self.removeListener("stageLeft",this.selfStageLeftListener),this.meeting.self.removeListener("peerRequestToJoinStage",this.requestStageListener)}meetingChanged(e){e!=null&&(this.requestProduce=e.self.permissions.requestProduce,this.canPresent=e.self.permissions.canPresent,(this.canPresent||e.self.webinarStageStatus==="ON_STAGE")&&(this.stageStatus="ACCEPTED"))}getState(){let e="",t="",i="",r={},n=!1;return this.stageStatus==="PENDING"?(t=this.t("stage_request.cancel_request"),e=this.t("stage_request.pending_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1):this.stageStatus==="ACCEPTED"?(t=this.t("stage_request.leave_stage"),e=this.t("stage_request.leave_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1,n=!1):this.stageStatus==="DENIED"?(t=this.t("stage_request.denied"),e=this.t("stage_request.denied_tip"),i=this.iconPack.join_stage,r["red-icon"]=!1,n=!0):(t=this.t("stage_request.request"),this.canPresent?e=this.t("stage_request.request"):e=this.t("stage_request.request_tip"),i=this.iconPack.join_stage,n=!1),{tooltipLabel:e,label:t,icon:i,classList:r,disabled:n}}render(){if(!this.requestProduce&&!this.canPresent||this.meeting.self.config.viewType!=="WEBINAR")return null;const{tooltipLabel:e,label:t,icon:i,classList:r,disabled:n}=this.getState();return p(M,{title:t},p("dyte-tooltip",{placement:"top",kind:"block",label:e,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:t,icon:i,class:r,onClick:this.stageCallback,disabled:n,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};_5.style=sj;var aj=Object.freeze({__proto__:null,dyte_webinar_stage_toggle:_5});const oj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{visibility:hidden;position:fixed;left:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px)}.caption-container{visibility:visible;position:absolute;bottom:var(--dyte-space-20, 80px);left:50%;--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:var(--dyte-border-radius-md, 8px);background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity:0.5;padding:var(--dyte-space-2, 8px)}",b5=class{constructor(e){V(this,e)}render(){return p(M,null,p("div",{class:"caption-container"},"asd"))}};b5.style=oj;var cj=Object.freeze({__proto__:null,dyte_ai_caption:b5});const dj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@-webkit-keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{-webkit-animation:bg-glow 0.8s;animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}",_E=3,w5=class{constructor(e){V(this,e),this.onParticipantsAdd=Q(this,"participantsAdd",7),this.onParticipantDelete=Q(this,"participantDelete",7),this.onRoomJoin=Q(this,"roomJoin",7),this.deleteRoom=Q(this,"delete",7),this.updateRoom=Q(this,"update",7),this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<_E)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,fn(()=>{this.inputTextEl.focus(),this.inputTextEl.select()})},this.onDrop=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.add("drop-zone-active"),t.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=$,this.t=B(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var e;this.allParticipants=tx(this.meeting),this.permissions=this.meeting.self.permissions.connectedMeetings,this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):(e=this.room)===null||e===void 0?void 0:e.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive}onDragLeave(e){e.currentTarget instanceof HTMLParagraphElement&&e.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){if(this.assigningParticipants&&this.isDragMode)return this.t("breakout_rooms.drag_drop_participants");if(this.assigningParticipants)return this.t("breakout_rooms.click_drop_participants");if(this.room.participants.length===0)return this.t("breakout_rooms.none_assigned")}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout(()=>{this.glowingCard=!1},2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(e){e.key==="Enter"&&(this.newTitle=e.target.value,this.onEditClick())}renderPeer(e){const{displayPictureUrl:t}=this.allParticipants.find(r=>jt(r)===jt(e)),i=Lr(e.displayName||"");return p("div",{class:"peer-ui-container"},p("dyte-avatar",{participant:{name:i,picture:t},size:"sm"}),p("p",{class:"name",title:i},Zi(i,16),this.meeting.self.userId===e.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&!!this.getAssignmentHint()&&!!this.permissions.canAlterConnectedMeetings)return p("div",{class:"message-container"},p("p",{class:{"compact-height":this.room.participants.length!==0},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&this.room.participants.length!==0)return p("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map(e=>p("div",{class:"participant-item",role:"listitem",key:e.id},this.renderPeer(e),this.permissions.canAlterConnectedMeetings&&p("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(e)}}))))}render(){var e,t,i;return p(M,null,p("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},p("div",{class:"header"},p("input",{ref:r=>this.inputTextEl=r,placeholder:this.t("breakout_rooms.room_name"),disabled:this.editingTitleRoomId!==this.room.id,value:this.roomTitle,minlength:_E,onChange:r=>{this.newTitle=r.target.value},onKeyPress:r=>this.onTitleChanged(r),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&p("span",{class:"participant-count"},"(",p("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),(i=(t=(e=this.room)===null||e===void 0?void 0:e.participants)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:"0",")"),this.canEditMeetingTitle&&p("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),p("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&p("dyte-tooltip",{label:this.t("Delete Room"),class:"danger",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&p("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),this.mode==="edit"&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&p("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.roomName,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.roomName?this.t("joined"):this.t("join")),!this.room.isParent&&p("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};w5.style=dj;const lj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';-webkit-clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%);clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}`,S5=class{constructor(e){V(this,e),this.onSelectedParticipantsUpdate=Q(this,"selectedParticipantsUpdate",7),this.onAllToggled=Q(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=Q(this,"participantsDragging",7),this.onSearchInput=t=>{this.search=t.target.value},this.onDragStart=t=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(t,!0)},this.onDragEnd=t=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(t,!1)},this.onClick=t=>{const i=this.selectedParticipantIds.includes(jt(t));this.updateSelectedParticipants(t,!i)},this.onToggleAll=t=>{const i=t?this.participantsToShow.map(jt):[];this.onAllToggled.emit(i)},this.meeting=void 0,this.participantIds=[],this.iconPack=$,this.t=B(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting!=null}updateSelectedParticipants(e,t){const i=jt(e);let r=[];t&&!this.selectedParticipantIds.includes(i)?r=[...this.selectedParticipantIds,i]:r=[...this.selectedParticipantIds.filter(n=>n!==i)],this.onSelectedParticipantsUpdate.emit(r)}meetingChanged(e){e!=null&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(e){this.getParticipants(e)}getParticipants(e){const t=tx(this.meeting);this.participantsToShow=t.filter(i=>{var r;return this.participantIds.includes(jt(i))&&((r=i.displayName)!==null&&r!==void 0?r:"").toLowerCase().includes(e.toLowerCase())})}renderPeer(e){const t=Lr(e.displayName||"");return p("div",{class:"peer-ui-container"},p("dyte-avatar",{participant:{name:e.displayName,picture:e.displayPictureUrl},size:"sm"}),p("p",{class:"name",title:t},Zi(t,16),this.meeting.self.userId===e.id&&` (${this.t("you")})`))}render(){return p(M,null,p("div",{class:"search-wrapper"},p("div",{class:"search",part:"search"},p("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),p("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),p("slot",{name:"shuffle-button"})),p("div",{class:"header"},p("div",{class:"title-wrapper"},p("span",null,this.t("breakout_rooms.main_room")),p("span",{class:"participant-count"},"(",p("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),this.selectedParticipantIds.length!==0&&p("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},p("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:e=>this.onToggleAll(!!e.target.checked)}))),p("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&p("ul",{class:"participants",part:"participants"},this.participantsToShow.map(e=>p("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(e),onDragStart:()=>this.onDragStart(e),onDragEnd:()=>this.onDragEnd(e),draggable:this.selectedParticipantIds.length===0,role:"listitem",key:e.id},this.renderPeer(e),!this.isDragging&&p("input",{type:"checkbox",class:{"hide-checkbox":this.selectedParticipantIds.length===0},checked:this.selectedParticipantIds.includes(jt(e))})))),this.participantsToShow.length===0&&this.search.length>0&&p("div",{class:"empty-message"},this.t("participants.empty_search_results")),this.participantsToShow.length===0&&this.search.length===0&&p("div",{class:"empty-room"},p("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),p("p",null,this.t("breakout_rooms.all_assigned")),p("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};S5.style=lj;const uj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}",E5=class{constructor(e){V(this,e),this.onChange=Q(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=$,this.t=B()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(e){this.onChange.emit(e)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return p(M,null,p("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),p("input",{type:"number",value:this.input,min:this.minValue,onInput:e=>{const t=parseInt(e.target.value,10);isNaN(t)||t<this.minValue?this.input=this.minValue.toString():this.input=t.toString()}}),p("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};E5.style=uj;var pj=Object.freeze({__proto__:null,dyte_breakout_room_manager:w5,dyte_breakout_room_participants:S5,dyte_counter:E5});const hj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column}.chat-input{z-index:10;box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{box-sizing:border-box;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea{font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:80px;font-size:14px}.chat-buttons{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));-webkit-animation:0.3s slide-up ease;animation:0.3s slide-up ease}@-webkit-keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}",T5=class{constructor(e){V(this,e),this.onNewMessage=Q(this,"dyteNewMessage",7),this.handleKeyDown=t=>{t.key==="Enter"&&t.shiftKey?this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px"):t.key==="Enter"?(t.preventDefault(),this.handleSendMessage()):t.key==="Backspace"&&(this.$textArea.value.endsWith(`
`)?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":this.$textArea.value===""&&(this.$textArea.style.height="auto"))},this.onPaste=t=>{const i=t.clipboardData||t.originalEvent.clipboardData;lx(i.items,this.sendFile)},this.sendFile=(t,i)=>{!this.canSendFiles||(t==="image"?this.onNewMessage.emit({type:"image",file:i}):this.onNewMessage.emit({type:"file",file:i}))},this.initializeTextField=t=>{this.$textArea=t;const i=ka.getItem("dyte-text-message")||"";this.$textArea.value=i},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=$,this.t=B(),this.disableEmojiPicker=!1,this.emojiPickerActive=!1}handleSendMessage(){if(!this.canSendTextMessage)return;const e=this.$textArea.value.trim();e.length>0&&(this.onNewMessage.emit({type:"text",message:e}),this.$textArea.value="",this.$textArea.style.height="auto",ka.setItem("dyte-text-message",""))}uploadFile(e){const t=document.createElement("input");t.type="file",e==="image"&&(t.accept="image/*"),t.onchange=i=>{const{validity:r,files:[n]}=i.target;r.valid&&this.sendFile(e,n)},t.click()}render(){const e={iconPack:this.iconPack,t:this.t,size:this.size};return p(M,null,this.canSendTextMessage&&this.emojiPickerActive&&p("dyte-emoji-picker",{part:"emoji-picker",onDyteEmojiClicked:t=>{this.$textArea.value+=t.detail,this.$textArea.focus()},t:this.t}),p("slot",{name:"chat-addon"}),p("div",{class:"chat-input",part:"chat-input"},this.canSendTextMessage&&p("textarea",{class:"scrollbar",part:"textarea",placeholder:"Message..",ref:this.initializeTextField,autoFocus:!0,onPaste:this.onPaste,onKeyDown:this.handleKeyDown,onInput:t=>{ka.setItem("dyte-text-message",t.target.value)}}),p("div",{class:"chat-buttons",part:"chat-buttons"},p("div",{class:"left",part:"chat-buttons-left"},this.canSendFiles&&[p("dyte-tooltip",Object.assign({label:this.t("Send a file")},e),p("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("Send a file"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.attach}))),p("dyte-tooltip",Object.assign({label:this.t("Send an image")},e),p("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("Send an image"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.image})))],this.canSendTextMessage&&!this.disableEmojiPicker&&p("dyte-tooltip",Object.assign({label:this.t("Send Emoji")},e),p("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("Send Emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},p("dyte-icon",{icon:this.iconPack.emoji_multiple})))),this.canSendTextMessage&&p("div",{class:"right",part:"chat-buttons-right"},p("dyte-tooltip",Object.assign({variant:"primary",label:this.t("Send message"),delay:2e3},e),p("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("Send message"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.send})))))))}};T5.style=hj;const gj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,k5=class{constructor(e){V(this,e),this.observingEl=[],this.onScroll=t=>{const i=t.target;fn(()=>{const{scrollTop:r,clientHeight:n,scrollHeight:s}=i;r+n+10>=s?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1})},this.scrollToBottom=()=>{Pa(this.$chat)},this.observeMessage=t=>{t&&this.observingEl.push(t);try{this.intersectionObserver.observe(t)}catch{}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var e;this.lastReadTimestamp=(e=Vg.everyone)!==null&&e!==void 0?e:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver(i=>{!document.hasFocus()||fn(()=>{for(const r of i)r.isIntersecting&&parseInt(r.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(Vg[this.selectedGroup]=new Date)})});const t=()=>{this.now=new Date,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(t))},60*1e3)};this.request=requestAnimationFrame(t),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll)}componentDidRender(){this.autoScrollEnabled?Pa(this.$chat):this.autoScrollEnabled==null&&Pa(this.$chat,!1)}chatChanged(e){if(this.$chat!=null&&!(this.autoScrollEnabled||this.$chat.clientHeight===this.$chat.scrollHeight)){for(let t=e.length-1;t>=0;t--)if(e[t].message.time>this.lastReadTimestamp&&e[t].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach(e=>{this.intersectionObserver.unobserve(e)}),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var e;let t=null,i=!1;return p(M,null,p("div",{class:"chat-container scrollbar",ref:r=>this.$chat=r,part:"container"},p("div",{class:"spacer",part:"spacer"}),p("div",{class:"chat",part:"chat"},(e=this.messages)===null||e===void 0?void 0:e.map(r=>{if(r.type==="chat"){const{message:n}=r,a=!(n.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&n.time>this.lastReadTimestamp;a&&(i=a);const o=!a&&n.userId===(t==null?void 0:t.userId)&&JR(n.time,t==null?void 0:t.time)<2;switch(t=n,n.type){case"text":return p("div",{"is-continued":o,key:r.message.id},a&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-text-message",{message:n,now:this.now,isContinued:o,"data-timestamp":n.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return p("div",{"is-continued":o,key:r.message.id},a&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-image-message",{message:n,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":n.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return p("div",{"is-continued":o,key:r.message.id},a&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-file-message",{message:n,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":n.time.getTime(),ref:this.observeMessage}))}}return null}))),p("div",{class:"show-new-messages-ctr"},p("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};k5.style=gj;const mj=":host{display:flex;flex:1 0 0px}",P5=class{constructor(e){V(this,e),this.pageSize=25,this.getChatMessages=async(t,i,r)=>{const{messages:n}=await this.meeting.chat.getMessages(t,i,r);return n},this.createChatNodes=t=>t.map(i=>{const r=i.userId===void 0;return this.createChatNode(i,r)}),this.disconnectMeeting=t=>{var i;(i=t==null?void 0:t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(t,i)=>p("dyte-chat-message",{messageItem:{type:"chat",message:t},isContinued:i,isUnread:!1,size:this.size,iconPack:this.iconPack,key:t.id}),this.chatUpdateListener=t=>{this.$paginatedListRef.onNewNode(this.createChatNode(t.message,!1))},this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=B()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;t!=null&&this.disconnectMeeting(t),!(e&&!e.chat)&&e!=null&&((i=e.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener))}render(){return p(M,null,p("dyte-paginated-list",{ref:e=>this.$paginatedListRef=e,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes}))}static get watchers(){return{meeting:["meetingChanged"]}}};P5.style=mj;const fj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);-webkit-animation:0.3s slide-down ease;animation:0.3s slide-down ease}@-webkit-keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,C5=class{constructor(e){V(this,e),this.groupChanged=Q(this,"dyteChatGroupChanged",7),this.onScopeClick=t=>{this.showParticipantsPanel=!1,this.groupChanged.emit(t)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=$,this.t=B(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))}getName(){if(!this.selectedGroupId||this.selectedGroupId==="everyone")return this.t("everyone");const e=this.groups.find(t=>t.userId===this.selectedGroupId);return e?e.name:this.t("everyone")}render(){const e=Object.keys(this.unreadCounts).reduce((t,i)=>t+this.unreadCounts[i],0);return p(M,null,p("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&p("div",{class:"participants-container"},p("div",{class:"search",part:"search"},p("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),p("input",{type:"search",autocomplete:"off",placeholder:"Search",value:this.query,onInput:t=>{this.query=t.target.value},part:"search-input"})),p("ul",{class:"scope-list scrollbar"},this.query===""&&p("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},p("div",{class:"everyone-icon"},p("dyte-icon",{icon:this.iconPack.participants})),"Everyone",this.unreadCounts.everyone>0&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,this.unreadCounts.everyone))),this.getGroups().map(t=>{const i=this.unreadCounts[Lh([this.selfUserId,t.userId])];return p("li",{class:"scope",onClick:()=>this.onScopeClick(t),key:t.userId},t.name,i>0&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,i)))}))),p("button",{onClick:()=>this.toggleParticipants()},p("span",null,`${this.t("To")} ${this.getName()}`,"  ",e>0&&p("div",{class:"unread-count selector"},p("span",null,e))),p("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};C5.style=fj;var vj=Object.freeze({__proto__:null,dyte_chat_composer_ui:T5,dyte_chat_messages_ui:k5,dyte_chat_messages_ui_paginated:P5,dyte_chat_selector_ui:C5});const yj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.webinar){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.webinar) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.webinar) .container dyte-button{margin:var(--dyte-space-3, 12px);flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.webinar) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.webinar) .summary{padding:var(--dyte-space-4, 16px)}:host(.livestream){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.livestream) dyte-participant-setup{display:flex;width:100%;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.livestream) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.livestream) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.livestream) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.livestream) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.livestream) .summary{margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-6, 24px);text-align:left;font-size:14px}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}`,R5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.joinStage=Q(this,"dyteJoinStage",7),this.leaveStage=Q(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=Be,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")}}render(){var e,t,i,r;const n={meeting:this.meeting,size:this.size,states:this.states||U,config:this.config,iconPack:this.iconPack,t:this.t};return p(M,{class:{livestream:((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="LIVESTREAM",webinar:((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="WEBINAR"}},p("header",null,p("h2",null,this.dataConfig.title)),p($e,{element:"dyte-participant-setup",defaults:n,props:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},childProps:{participant:(r=this.meeting)===null||r===void 0?void 0:r.self,size:"md"},deepProps:!0}),p("div",{class:"summary"},this.dataConfig.description),p("div",{class:"container"},p("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),p("dyte-button",{onClick:()=>this.joinStage.emit(),title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.dataConfig.label.accept)))}};R5.style=yj;const _j=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}",x5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=B()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout(()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),U.activeOverlayModal={active:!1}},this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return p(M,null,p("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),p("h2",null,this.states.activeOverlayModal.title),p("p",null,this.states.activeOverlayModal.description))}};x5.style=_j;var bj=Object.freeze({__proto__:null,dyte_join_stage:R5,dyte_overlay_modal:x5});const wj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px)}video{z-index:0;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.latency-controls{position:absolute;bottom:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);z-index:20;display:flex;flex-direction:row;align-items:center}.sync-live-stream{cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}",I5=class{constructor(e){V(this,e),this.dyteAPIError=Q(this,"dyteAPIError",7),this.showLatencyIndicator=!1,this.LoadPlayer=(t=this.ivsPlayer)=>{this.player&&t&&(t.attachHTMLVideoElement(this.player),t.setAutoplay(!0),t.setVolume(1))},this.livestreamUpdateListener=t=>{var i,r;this.livestreamState=t,t==="LIVESTREAMING"?(this.LoadPlayer(),this.getPlaybackUrl(),!((r=(i=this.meeting.__internals__)===null||i===void 0?void 0:i.browserSpecs)===null||r===void 0)&&r.isIOSMobile()||(this.fetchLatency(),this.updateLatency=setInterval(this.fetchLatency,2e3)),gt.enableSource("livestream-player")):(this.showLatencyIndicator=!1,this.updateLatency&&clearInterval(this.updateLatency),gt.disableSource("livestream-player"))},this.getLoadingState=()=>{let t="",i=!1,r=!1;switch(this.livestreamState){case"IDLE":t=this.t("Waiting to go live."),i=!0,r=!1;break;case"STARTING":t=this.t("Livestream is starting..."),i=!0,r=!0;break;case"STOPPING":t=this.t("Livestream is stopping..."),i=!0,r=!0;break;case"LIVESTREAMING":this.playerState!==On.PLAYING&&(t=this.t("Livestream is starting..."),r=!0,i=!0);break;default:i=!1,t=this.t(""),r=!0;break}return{isLoading:i,loadingMessage:t,showIcon:r}},this.getErrorState=()=>{var t,i;let r=!1,n="";return this.livestreamState!=="LIVESTREAMING"?(r=!1,n=this.t(""),{isError:r,errorMessage:n}):(this.isSupported||(r=!0,n=this.t("Player not supported.")),this.playbackUrl||(r=!0,n=this.t("Playback URL not found.")),this.playerError&&(r=!0,n=this.t((i=(t=this.playerError)===null||t===void 0?void 0:t.message)!==null&&i!==void 0?i:"An unknown error occured.")),{isError:r,errorMessage:n})},this.fetchLatency=()=>{this.ivsPlayer&&(this.latency=this.ivsPlayer.getLiveLatency())},this.stopRebuffer=t=>{this.ivsPlayer.setRebufferToLive(!1),this.latency=t,clearInterval(this.updateLatency),this.updateLatency=setInterval(this.fetchLatency,2e3)},this.resetSyncLivestream=()=>{const t=this.ivsPlayer.getLiveLatency();this.stopRebuffer(t),this.dyteAPIError.emit({trace:this.t("livestreamPlayer.rebuffer.error"),message:this.t("Could not sync livestream please try again later.")})},this.syncLiveStream=()=>{clearInterval(this.updateLatency),this.latency=-1,this.ivsPlayer.setRebufferToLive(!0);const t=setTimeout(this.resetSyncLivestream,15e3);this.updateLatency=setInterval(()=>{const i=this.ivsPlayer.getLiveLatency();i<10&&(this.stopRebuffer(i),clearTimeout(t))},1e3)},this.meeting=void 0,this.size=void 0,this.t=B(),this.iconPack=$,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=On.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.latency=0,this.audioPlaybackError=!1}AddPlayerListeners(e=this.ivsPlayer){Object.values(Object.assign(Object.assign({},Lt),On)).forEach(t=>{Y7.includes(t)||e==null||e.addEventListener(t,i=>{var r,n,s;(t===On.IDLE||t===On.PLAYING||t===Lt.ERROR||t===On.READY)&&(this.playerState=t),t===Lt.ERROR&&(this.playerError=i),t===On.IDLE&&e.isPaused()&&e.play(),t===Lt.AUDIO_BLOCKED&&(this.audioPlaybackError=!0),this.playerState===On.PLAYING&&!(!((n=(r=this.meeting.__internals__)===null||r===void 0?void 0:r.browserSpecs)===null||n===void 0)&&n.isIOSMobile())?this.showLatencyIndicator=!0:this.showLatencyIndicator=!1,this.meeting.__internals__.logger.info(`IVS.Player.${t}`,i),Q7.includes(t)&&((s=this.meeting.__internals__.callStats)===null||s===void 0||s.ivsPlayerEvent(t,i))})})}getPlaybackUrl(e=this.ivsPlayer){this.playbackUrl=this.meeting.livestream.playbackUrl,this.playbackUrl&&e&&(e.load(this.playbackUrl),e.play())}onPlayerRef(e){this.player=e,gt.addSource("livestream-player",this.player,!!this.playbackUrl),this.playbackUrl&&gt.enableSource("livestream-player")}connectedCallback(){this.meetingChanged(this.meeting),window.onDyteLivestreamPlayer=e=>{e?(this.isSupported=!0,this.ivsPlayer=e,this.AddPlayerListeners(e),this.LoadPlayer(e),this.getPlaybackUrl(e)):this.isSupported=!1},this.sendLatencyToCallStats=setInterval(()=>{var e;this.fetchLatency(),(e=this.meeting.__internals__.callStats)===null||e===void 0||e.livestreamLatency(this.latency)},1e4)}disconnectedCallback(){window.onDyteLivestreamPlayer=void 0,this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),clearInterval(this.sendLatencyToCallStats),this.ivsPlayer.load(""),this.ivsPlayer=void 0,this.player=void 0}async componentDidLoad(){const e=`
    import IVSPlayer from 'https://cdn.jsdelivr.net/npm/amazon-ivs-player@1.16.0/+esm'
    let player = undefined;
    if (IVSPlayer.isPlayerSupported) {
      player = IVSPlayer.create({
        wasmBinary:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.wasm',
        wasmWorker:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.js',
      });
    }
    window.onDyteLivestreamPlayer && window.onDyteLivestreamPlayer(player);
    `,t=document.createElement("script");t.type="module",t.innerHTML=e,document.body.appendChild(t)}meetingChanged(e){e!=null&&(this.livestreamState=this.meeting.livestream.state,this.livestreamState==="LIVESTREAMING"&&(this.LoadPlayer(),this.getPlaybackUrl(),gt.enableSource("livestream-player")),this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){if(!Os(this.meeting))return;const{isError:e,errorMessage:t}=this.getErrorState(),{isLoading:i,loadingMessage:r,showIcon:n}=this.getLoadingState();return p(M,null,p("div",{class:"player-container"},p("video",{ref:s=>this.onPlayerRef(s),playsInline:!0}),this.audioPlaybackError&&p("div",{class:"unmute-popup"},p("h3",null,this.t("audio_playback.title")),p("p",null,this.t("audio_playback.description")),p("dyte-button",{kind:"wide",onClick:()=>{this.player.muted=!1,this.audioPlaybackError=!1},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),this.showLatencyIndicator&&p("div",{class:"latency-controls"},(this.latency>10||this.latency<0)&&p("div",{class:"sync-live-stream",onClick:this.syncLiveStream},this.latency===-1?p("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"sm"}):"Skip to Live")),e&&p("div",{class:"loader"},p("dyte-icon",{icon:this.iconPack.warning,t:this.t}),p("p",null,t)),!e&&i&&p("div",{class:"loader"},n&&p("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),p("p",null,r))))}static get watchers(){return{meeting:["meetingChanged"]}}};I5.style=wj;var Sj=Object.freeze({__proto__:null,dyte_livestream_player:I5});const Ej=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));-webkit-animation:show 0.4s ease;animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px)}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){-webkit-animation:exit 0.4s ease;animation:exit 0.4s ease}@-webkit-keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@-webkit-keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}",A5=class{constructor(e){V(this,e),this.dismiss=Q(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(e){e!=null&&typeof e.duration=="number"&&setTimeout(()=>{this.dismiss.emit(e.id)},e.duration)}render(){return p(M,null,p("div",{class:"ctr"},this.notification.icon!=null&&p("dyte-icon",{class:"icon",icon:this.notification.icon,iconPack:this.iconPack,t:this.t}),this.notification.image!=null&&this.notification.icon==null&&this.imageState!=="errored"&&p("img",{src:this.notification.image,class:{loaded:this.imageState==="loaded"},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),p("p",{class:"message"},this.notification.message),p("div",{class:"right"},this.notification.button!=null&&p("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),p("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};A5.style=Ej;var Tj=Object.freeze({__proto__:null,dyte_notification:A5});const kj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:83.333333%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px)}.poll p{margin:var(--dyte-space-0, 0px)}.poll-question{font-size:12px;font-weight:700;overflow-wrap:break-word}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option label{display:flex;flex-direction:row}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,O5=class{constructor(e){V(this,e),this.onVote=Q(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=$,this.t=B()}vote(e,t){this.poll.voted.includes(this.self)?e.preventDefault():this.onVote.emit({id:this.poll.id,index:t})}render(){return p(M,null,p("div",{class:"ctr"},p("p",{class:"poll-title"},this.t("Poll by")," ",Zi(Lr(this.poll.createdBy),20)),p("div",{class:"poll"},p("p",{class:"poll-question"},this.poll.question),this.poll.options.map((e,t)=>p("div",{class:{active:e.votes.some(i=>i.id===this.self),"poll-option":!0}},p("div",{class:"poll-option-header"},p("label",null,p("input",{disabled:!this.permissions.polls.canVote,type:"checkbox",checked:e.votes.some(i=>i.id===this.self),onClick:i=>this.vote(i,t)}),p("p",null,e.text," (",e.count,")"))),p("div",{class:"votes"},e.votes.map(i=>{if(!(this.poll.anonymous&&this.self!==this.poll.createdByUserId))return p("dyte-tooltip",{label:i.name,iconPack:this.iconPack,t:this.t},p("div",{class:"vote"},KR(i.name)))})))))))}};O5.style=kj;const Pj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}`,M5=class{constructor(e){V(this,e),this.onCreate=Q(this,"dyteCreatePoll",7),this.iconPack=$,this.t=B(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(e){var t;this.options=this.options.filter((i,r)=>r!==e),((t=this.error)===null||t===void 0?void 0:t.code)===1&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(e,t){var i;this.options[t]=e.target.value,((i=this.error)===null||i===void 0?void 0:i.code)===1&&(this.error=void 0)}handleSubmit(){const e={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:this.anonymous?!0:this.hideVotes};if(!e.question){this.error={code:0,message:this.t("Question is required.")};return}if(this.options.filter(t=>t.trim()==="").length>0){this.error={code:1,message:this.t("Empty options not allowed.")};return}this.onCreate.emit(e)}render(){return p(M,null,p("div",{class:"create-poll"},p("p",null,this.t("Poll Question")),p("textarea",{onInput:()=>{this.error&&this.error.code===0&&(this.error=void 0)},ref:e=>this.question=e,placeholder:this.t("What is your poll for?")}),this.options.map((e,t)=>p("div",{class:"option"},p("input",{placeholder:this.t("Enter an option"),value:e,onInput:i=>this.updateOption(i,t)}),t>1&&p("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(t),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})))),p("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("Add an option")),p("label",null,p("input",{id:"anonymous",type:"checkbox",onChange:e=>this.anonymous=e.target.checked}),this.t("Anonymous")),p("label",null,p("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:this.anonymous?!0:this.hideVotes,onChange:e=>this.hideVotes=e.target.checked}),this.t("Hide results before voting")),p("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("Create Poll")),this.error&&p("span",{class:"error-text"},this.error.message)))}};M5.style=Pj;var Cj=Object.freeze({__proto__:null,dyte_poll:O5,dyte_poll_form:M5});const Rj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.dyte-select{width:100%;max-width:100%}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}`,D5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.stageStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.audioDevices=[],this.speakerDevices=[],this.canProduceAudio=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a;(e=this.meeting)===null||e===void 0||e.self.removeListener("joinStageRequestAccepted",this.stageStateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("stageJoined",this.stageStateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("removedFromStage",this.stageStateListener),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.removeListener("stageStatusUpdate",this.stageStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("joinStageRequestRejected",this.stageStateListener)}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceAudio==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,n?this.canProduceAudio=!0:(s||a)&&t.permissions.canProduceAudio==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0)}meetingChanged(e){e!=null&&fn(async()=>{var t,i,r,n;const{self:s,stage:a}=e,o=await e.self.getAudioDevices(),c=await e.self.getSpeakerDevices(),d=(t=e.self.getCurrentDevices())===null||t===void 0?void 0:t.audio,l=(i=e.self.getCurrentDevices())===null||i===void 0?void 0:i.speaker;this.updateCanProduce(e),s.addListener("joinStageRequestAccepted",this.stageStateListener),s.addListener("stageJoined",this.stageStateListener),s.addListener("removedFromStage",this.stageStateListener),a==null||a.addListener("stageStatusUpdate",this.stageStateListener),s.addListener("stageLeft",this.selfStageLeftListener),s.addListener("joinStageRequestRejected",this.stageStateListener),d!=null?this.audioDevices=[(r=o.find(u=>u.deviceId===d.deviceId))!==null&&r!==void 0?r:d,...o.filter(u=>u.deviceId!==d.deviceId)]:this.audioDevices=o,l!=null?this.speakerDevices=[(n=c.find(u=>u.deviceId===l.deviceId))!==null&&n!==void 0?n:l,...c.filter(u=>u.deviceId!==l.deviceId)]:this.speakerDevices=c})}testAudio(){var e;(e=this.testAudioEl)===null||e===void 0||e.play()}setDevice(e,t){var i,r;const n=e==="audio"?this.audioDevices.find(s=>s.deviceId===t):this.speakerDevices.find(s=>s.deviceId===t);n!=null&&((i=this.meeting)===null||i===void 0||i.self.setDevice(n),n.kind==="audiooutput"&&((r=this.testAudioEl)===null||r===void 0||r.setSinkId(n.deviceId)))}render(){var e,t,i;if(this.meeting==null)return null;let r=0,n=0;const s=(e=this.meeting)===null||e===void 0?void 0:e.self.getCurrentDevices(),a=this.states||U,o=((t=a==null?void 0:a.prefs)===null||t===void 0?void 0:t.muteNotificationSounds)===!0||jR("mute-notification-sounds")==="true";return p(M,null,p("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:c=>this.testAudioEl=c}),this.canProduceAudio&&p("div",{class:"group",part:"microphone-selection"},p("label",null,"Microphone (input)"),p("div",{class:"row"},p("select",{class:"dyte-select",onChange:c=>this.setDevice("audio",c.target.value)},this.audioDevices.map(({deviceId:c,label:d})=>{var l;return p("option",{value:c,selected:((l=s.audio)===null||l===void 0?void 0:l.deviceId)===c},d||`Microphone ${++r}`)})),p("dyte-audio-visualizer",{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,iconPack:this.iconPack,t:this.t}))),p("div",{class:"group",part:"speaker-selection"},this.speakerDevices.length>0&&p("div",null,p("label",null,"Speaker (output)"),p("div",{class:"row"},p("select",{class:"dyte-select",onChange:c=>this.setDevice("speaker",c.target.value)},this.speakerDevices.map(({deviceId:c,label:d})=>{var l;return p("option",{value:c,selected:((l=s.speaker)===null||l===void 0?void 0:l.deviceId)===c},d||`Speaker ${++n}`)})))),p("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),"Test")),p("div",{class:"group",part:"notification-toggle"},p("div",{class:"row"},p("label",{htmlFor:"notification-toggle"},"Notification sound"),p("dyte-switch",{id:"notification-toggle",checked:!o,onDyteChange:c=>{var d;const{checked:l}=c.target,u=!l;this.stateUpdate.emit({prefs:{muteNotificationSounds:u}}),U.prefs=Object.assign(Object.assign({},(d=U.prefs)!==null&&d!==void 0?d:{}),{muteNotificationSounds:u}),UR("mute-notification-sounds",u)},iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{meeting:["meetingChanged"]}}};D5.style=Rj;const xj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}`,L5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onVideoUpdate=t=>{this.videoEnabled=t.videoEnabled},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.videoDevices=[],this.currentDevice=void 0,this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(e){var t;e!=null&&(this.videoEnabled=e.self.videoEnabled,(t=e.self)===null||t===void 0||t.addListener("videoUpdate",this.onVideoUpdate),fn(async()=>{var i,r;const n=await e.self.getVideoDevices(),s=(i=e.self.getCurrentDevices())===null||i===void 0?void 0:i.video;s!=null?this.videoDevices=[(r=n.find(a=>a.deviceId===s.deviceId))!==null&&r!==void 0?r:s,...n.filter(a=>a.deviceId!==s.deviceId)]:this.videoDevices=n}))}disconnectedCallback(){var e;(e=this.meeting.self)===null||e===void 0||e.removeListener("videoUpdate",this.onVideoUpdate)}async setDevice(e){var t;const i=this.videoDevices.find(r=>r.deviceId===e);this.currentDevice=i,i!=null&&await((t=this.meeting)===null||t===void 0?void 0:t.self.setDevice(i))}render(){var e,t;if(this.meeting==null)return null;let i=0;const r=this.states||U,n=((e=r==null?void 0:r.prefs)===null||e===void 0?void 0:e.mirrorVideo)===!0||jR("mirror-video")==="true";return p(M,null,p("div",{class:"group",part:"tile-preview"},this.videoEnabled===!0?p("dyte-participant-tile",{participant:(t=this.meeting)===null||t===void 0?void 0:t.self,iconPack:this.iconPack,t:this.t,states:r,isPreview:!0}):p("div",{class:"camera-off-helper"},p("dyte-participant-tile",{participant:void 0},p("div",null,p("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),p("div",null,"Camera is off"))))),p("div",{class:"group",part:"camera-selection"},p("label",null,"Camera"),p("div",{class:"row"},p("select",{class:"dyte-select",onChange:s=>this.setDevice(s.target.value)},this.videoDevices.map(({deviceId:s,label:a})=>p("option",{value:s},a||`Camera ${++i}`))))),p("div",{class:"group",part:"mirror-toggle"},p("div",{class:"row"},p("label",{htmlFor:"mirror-toggle"},"Mirror my Video"),p("dyte-switch",{checked:n,iconPack:this.iconPack,t:this.t,onDyteChange:s=>{var a;const{checked:o}=s.target;this.stateUpdate.emit({prefs:{mirrorVideo:o}}),U.prefs=Object.assign(Object.assign({},(a=U.prefs)!==null&&a!==void 0?a:{}),{mirrorVideo:o}),UR("mirror-video",o)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};L5.style=xj;var Ij=Object.freeze({__proto__:null,dyte_settings_audio:D5,dyte_settings_video:L5});const Aj=":host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}",N5=class{constructor(e){V(this,e),this.tabChange=Q(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Be,this.layout="row",this.iconPack=$,this.t=B(),this.activeTab=void 0,this.tabs=[]}render(){return p(M,null,p("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map(e=>{var t,i,r,n,s;if(e.type==="screenshare"){const a=e.participant,o=Lr(a.name);return p("dyte-button",{title:`${o}'s Screen Share`,key:e.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((t=this.activeTab)===null||t===void 0?void 0:t.type)==="screenshare"&&((i=this.activeTab)===null||i===void 0?void 0:i.participant.id)===e.participant.id},onClick:()=>this.tabChange.emit(e)},p("div",{class:"center col"},p("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),p("span",{class:"name"},a.id===((r=this.meeting)===null||r===void 0?void 0:r.self.id)?this.t("You"):Zi(o,6))))}else if(e.type==="plugin"){const a=e.plugin;return p("dyte-button",{title:a.name,key:a.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((n=this.activeTab)===null||n===void 0?void 0:n.type)==="plugin"&&((s=this.activeTab)===null||s===void 0?void 0:s.plugin.id)===a.id},onClick:()=>this.tabChange.emit(e)},p("div",{class:"center col"},p("img",{src:a.picture}),p("span",{class:"name"},Zi(a.name,6))))}}))}};N5.style=Aj;var Oj=Object.freeze({__proto__:null,dyte_tab_bar:N5}),Mj=Gg;function Gg(){}Gg.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(i,r,n){this.callbacks=this.callbacks||{};var s=arguments.length===3,a=s?arguments[1]:void 0,o=s?arguments[2]:arguments[1];return o._groupName=a,(this.callbacks[i]=this.callbacks[i]||[]).push(o),this},t.once=function(i,r,n){var s=this,a=arguments.length===3,o=a?arguments[1]:void 0,c=a?arguments[2]:arguments[1];function d(){s.off(i,d),c.apply(this,arguments)}return this.on(i,o,d),this},t.releaseGroup=function(i){this.callbacks=this.callbacks||{};var r,n,s,a;for(r in this.callbacks)for(a=this.callbacks[r],n=0,s=a.length;n<s;n++)a[n]._groupName===i&&(a.splice(n,1),n--,s--);return this},t.off=function(i,r){this.callbacks=this.callbacks||{};var n=this.callbacks[i],s;return n?arguments.length===1?(delete this.callbacks[i],this):(s=n.indexOf(r),s!==-1&&(n.splice(s,1),n.length===0&&delete this.callbacks[i]),this):this},t.emit=function(i){this.callbacks=this.callbacks||{};var r=[].slice.call(arguments,1),n=this.callbacks[i],s=this.getWildcardCallbacks(i),a,o,c;if(n)for(c=n.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,r);if(s)for(o=s.length,c=s.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,[i].concat(r));return this},t.getWildcardCallbacks=function(i){this.callbacks=this.callbacks||{};var r,n,s=[];for(r in this.callbacks)n=r.split("*"),(r==="*"||n.length===2&&i.slice(0,n[0].length)===n[0])&&(s=s.concat(this.callbacks[r]));return s}};Gg.mixin(Gg);function Dj(e,t){var i=-1/0;e.getFloatFrequencyData(t);for(var r=4,n=t.length;r<n;r++)t[r]>i&&t[r]<0&&(i=t[r]);return i}var U0;typeof window<"u"&&(U0=window.AudioContext||window.webkitAudioContext);var Gr=null,Lj=function(e,r){var i=new Mj;if(!U0)return i;var r=r||{},n=r.smoothing||.1,s=r.interval||50,a=r.threshold,o=r.play,c=r.history||10,d=!0;Gr=r.audioContext||Gr||new U0;var l,u,g;g=Gr.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=n,u=new Float32Array(g.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(l=Gr.createMediaElementSource(e),typeof o>"u"&&(o=!0),a=a||-50):(l=Gr.createMediaStreamSource(e),a=a||-50),l.connect(g),o&&g.connect(Gr.destination),i.speaking=!1,i.suspend=function(){return Gr.suspend()},i.resume=function(){return Gr.resume()},Object.defineProperty(i,"state",{get:function(){return Gr.state}}),Gr.onstatechange=function(){i.emit("state_change",Gr.state)},i.setThreshold=function(w){a=w},i.setInterval=function(w){s=w},i.stop=function(){d=!1,i.emit("volume_change",-100,a),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),g.disconnect(),l.disconnect()},i.speakingHistory=[];for(var m=0;m<c;m++)i.speakingHistory.push(0);var f=function(){setTimeout(function(){if(!!d){var w=Dj(g,u);i.emit("volume_change",w,a);var S=0;if(w>a&&!i.speaking){for(var y=i.speakingHistory.length-3;y<i.speakingHistory.length;y++)S+=i.speakingHistory[y];S>=2&&(i.speaking=!0,i.emit("speaking"))}else if(w<a&&i.speaking){for(var y=0;y<i.speakingHistory.length;y++)S+=i.speakingHistory[y];S==0&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(w>a)),f()}},s)};return f(),i};const pv=(e,t)=>{if(e==null)return;const i=3,r=Math.round(i/2),n=[...Array(i)].map((m,f)=>{let w=f;return w>r-1&&(w=i-w-1),Math.round((w+1)/(r+1)*t)}),{width:s,height:a}=e,o=e.getContext("2d");let c=2;const d=4,l=s*1/n.length,u=l-d;o.clearRect(0,0,s,a),o.fillStyle="rgb(0,0,0,0.0)",o.fillRect(0,0,s,a);const g=getComputedStyle(e).getPropertyValue("color");o.fillStyle=g,o.strokeStyle=g,o.lineCap="round",o.lineWidth=4,o.beginPath();for(const m of n){const f=Math.min(-Math.abs(m*1.2/10*a)+a/2,a/2-2.5),w=Math.max((a/2-f)*2,5);o.moveTo(c+u/2,f),o.lineTo(c+u/2,f+w),c+=l}o.stroke()},Nj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-6, 24px);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",U5=class{constructor(e){V(this,e),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){pv(this.visualizer,0)}disconnectedCallback(){var e,t,i;(e=this.hark)===null||e===void 0||e.stop(),this.audioUpdateListener&&((t=this.participant)===null||t===void 0||t.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&((i=this.participant)===null||i===void 0||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(e){e!=null&&(this.audioUpdateListener=({audioEnabled:t,audioTrack:i})=>{var r;if((r=this.hark)===null||r===void 0||r.stop(),t&&i!=null){this.audioEnabled=!0;const n=new MediaStream;n.addTrack(i),this.calcVolume(n),pv(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:t,screenShareTracks:i})=>{this.audioUpdateListener({audioEnabled:t&&i.audio!=null,audioTrack:i.audio})},this.screenShareUpdateListener(e),e.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(e),e.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(e){this.hark=Lj(e,{play:!1,interval:1e3/10}),this.hark.on("volume_change",t=>{const i=this.volume;let r=Math.round(10**(t/115)*10);r<3&&(r=0);let n=Math.round((i*2+r)/3);i!==n&&(this.volume=n,pv(this.visualizer,this.volume))})}render(){return p(M,null,p("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:e=>this.visualizer=e,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&p("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t}))}static get watchers(){return{participant:["participantChanged"]}}};U5.style=Nj;const Uj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}",j5=class{constructor(e){V(this,e),this.dyteChange=Q(this,"dyteChange",4),this.onClick=()=>{!this.readonly&&!this.disabled&&(this.checked=!this.checked)},this.onKeyPress=t=>{if(!this.readonly)switch(t.key){case"Enter":case" ":this.checked=!this.checked;break}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=$,this.t=B()}checkedChange(e){this.dyteChange.emit(e)}render(){return p(M,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},p("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};j5.style=Uj;var jj=Object.freeze({__proto__:null,dyte_audio_visualizer:U5,dyte_switch:j5});const $j=":host{display:block}.file-picker{display:none}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}",$5=class{constructor(e){V(this,e),this.renderMessage=()=>{if(this.messageItem.type!=="chat")return;const t=this.messageItem.message;switch(t.type){case"text":return p("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-text-message",{message:t,now:this.now,isContinued:this.isContinued,"data-timestamp":t.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return p("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-image-message",{message:t,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":t.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return p("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-file-message",{message:t,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":t.time.getTime(),ref:this.observeMessage}))}},this.messageItem=void 0,this.isContinued=void 0,this.isUnread=void 0,this.observeMessage=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.now=new Date}render(){return p(M,null,p("slot",null),p("div",{class:"message"},this.renderMessage()))}};$5.style=$j;var Vj="[object Symbol]";function Fj(e){return typeof e=="symbol"||jd(e)&&cp(e)==Vj}var zj=/\s/;function Bj(e){for(var t=e.length;t--&&zj.test(e.charAt(t)););return t}var Hj=/^\s+/;function Gj(e){return e&&e.slice(0,Bj(e)+1).replace(Hj,"")}var bE=0/0,Wj=/^[-+]0x[0-9a-f]+$/i,qj=/^0b[01]+$/i,Jj=/^0o[0-7]+$/i,Kj=parseInt;function wE(e){if(typeof e=="number")return e;if(Fj(e))return bE;if(zn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=zn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Gj(e);var i=qj.test(e);return i||Jj.test(e)?Kj(e.slice(2),i?2:8):Wj.test(e)?bE:+e}var hv=function(){return Qo.Date.now()},Yj="Expected a function",Qj=Math.max,Zj=Math.min;function Xj(e,t,i){var r,n,s,a,o,c,d=0,l=!1,u=!1,g=!0;if(typeof e!="function")throw new TypeError(Yj);t=wE(t)||0,zn(i)&&(l=!!i.leading,u="maxWait"in i,s=u?Qj(wE(i.maxWait)||0,t):s,g="trailing"in i?!!i.trailing:g);function m(O){var z=r,H=n;return r=n=void 0,d=O,a=e.apply(H,z),a}function f(O){return d=O,o=setTimeout(y,t),l?m(O):a}function w(O){var z=O-c,H=O-d,ie=t-z;return u?Zj(ie,s-H):ie}function S(O){var z=O-c,H=O-d;return c===void 0||z>=t||z<0||u&&H>=s}function y(){var O=hv();if(S(O))return _(O);o=setTimeout(y,w(O))}function _(O){return o=void 0,g&&r?m(O):(r=n=void 0,a)}function T(){o!==void 0&&clearTimeout(o),d=0,r=c=n=o=void 0}function C(){return o===void 0?a:_(hv())}function D(){var O=hv(),z=S(O);if(r=arguments,n=this,c=O,z){if(o===void 0)return f(c);if(u)return clearTimeout(o),o=setTimeout(y,t),m(c)}return o===void 0&&(o=setTimeout(y,t)),a}return D.cancel=T,D.flush=C,D}const e$=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,V5=class{constructor(e){V(this,e),this.currentTime=()=>new Date().getTime(),this.observe=t=>{!t||this.intersectionObserver.observe(t)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.iconPack=$,this.t=B(),this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.pagesToRender=[[]]}async onNewNode(e){if(!this.shouldRenderNewNodes){this.hasNewNodesToRender=!0;return}this.addNodeToRender(e,!1),this.rerender()}connectedCallback(){this.rerender=Xj(this.rerender.bind(this),50,{maxWait:200}),this.loadPage(this.currentTime(),this.pageSize,!0,()=>Pa(this.$paginatedList,!1)),this.intersectionObserver=new IntersectionObserver(e=>{fn(()=>{for(const t of e)t.target.id==="bottom-scroll"&&(t.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),t.target.id==="top-scroll"&&t.isIntersecting&&this.loadTop()})})}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&Pa(this.$paginatedList)}loadTop(){var e,t,i;if(this.pagesToRender.length===0||this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize)return;const r=this.pagesToRender[0][0],n=(i=(t=(e=r.$attrs$)===null||e===void 0?void 0:e.messageItem)===null||t===void 0?void 0:t.message)===null||i===void 0?void 0:i.timeMs,s=()=>{var a;return(a=r.$elm$)===null||a===void 0?void 0:a.scrollIntoView()};this.loadPage(n-1,this.pageSize,!0,s)}loadBottom(){var e,t,i;if(this.pagesToRender.length===0){this.shouldRenderNewNodes=!0;return}if(this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize){this.shouldRenderNewNodes=!0;return}const r=this.pagesToRender.at(-1).at(-1),n=(i=(t=(e=r.$attrs$)===null||e===void 0?void 0:e.messageItem)===null||t===void 0?void 0:t.message)===null||i===void 0?void 0:i.timeMs,s=()=>{var a;return(a=r.$elm$)===null||a===void 0?void 0:a.scrollIntoView()};this.loadPage(n+1,this.pageSize,!1,s)}addNodeToRender(e,t){if(t){const i=this.pagesToRender[0];if(i&&(i==null?void 0:i.length)<this.pageSize)i.unshift(e);else{const r=[e];this.pagesToRender.unshift(r),this.removeLastPageIfNeeded(!1)}}else{const[i]=this.pagesToRender.slice(-1);if(i&&(i==null?void 0:i.length)<this.pageSize)i.push(e);else{const r=[e];this.pagesToRender.push(r),this.removeLastPageIfNeeded(!0)}}}async loadPage(e,t,i,r){const n=await this.fetchData(e,t,i);if(!(n!=null&&n.length)){i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0);return}const s=this.createNodes(n),a=s[s.length-1];let o=new Proxy(a,{set(c,d,l){return d==="$elm$"&&l&&!c.$elm$&&r(),c[d]=l,!0}});s[s.length-1]=o,s.forEach(c=>this.addNodeToRender(c,i)),this.rerender()}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(e){this.pagesToRender.length>this.pagesAllowed&&(e?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){return p(M,null,p("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},p("slot",null),p("div",{class:"show-new-messages-ctr"},p("dyte-button",{class:{"show-new-messages":!0,active:!this.shouldRenderNewNodes},kind:"icon",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),p("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e}),this.pagesToRender.map(e=>e.map(t=>t)),p("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e})))}};V5.style=e$;var t$=Object.freeze({__proto__:null,dyte_chat_message:$5,dyte_paginated_list:V5});const i$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}",F5=class{constructor(e){V(this,e),this.onClose=Q(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=t=>{t.key==="Escape"&&this.open&&this.close()},this.hideCloseButton=!1,this.meeting=void 0,this.config=Be,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=B(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?p(M,null,p("div",{id:"dialog",part:"container"},p("slot",null),!this.hideCloseButton&&p("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};F5.style=i$;var r$=Object.freeze({__proto__:null,dyte_dialog:F5});const n$="https://cdn.dyte.in/assets/emojis-data.json",s$=async()=>(await fetch(n$)).json(),a$=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);flex-direction:column;padding:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-0, 0px);width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:grid;grid-template-columns:repeat(7, minmax(0, 1fr));padding-bottom:var(--dyte-space-12, 48px);overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(-webkit-min-content, -webkit-max-content);grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,z5=class{constructor(e){V(this,e),this.emojiClicked=Q(this,"dyteEmojiClicked",7),this.iconPack=$,this.t=B(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){s$().then(e=>{this.emojiList=e,this.handleInputChange({value:""})})}handleInputChange(e){this.filterVal=e.value;const t=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(t)).map(i=>({name:i[1],emoji:this.emojiList.emojis[i[2]]}))}handleEmojiClick(e){this.emojiClicked.emit(e)}mapEmojiList(){var e;return((e=this.emojiList)===null||e===void 0?void 0:e.length)>0?p("div",{id:"loader"},p("dyte-spinner",{iconPack:this.iconPack,t:this.t})):p("div",{id:"emoji-grid",class:"scrollbar"},this.filteredEmojis.map(t=>p("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${t.name}`,class:"emoji",variant:"ghost",kind:"icon",title:t.name,onClick:()=>this.handleEmojiClick(t.emoji)},t.emoji)))}render(){return p(M,null,p("input",{value:this.filterVal,onInput:e=>this.handleInputChange(e.target),placeholder:this.t("Search")}),this.mapEmojiList())}};z5.style=a$;var o$=Object.freeze({__proto__:null,dyte_emoji_picker:z5});const c$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}",B5=class{constructor(e){V(this,e),this.pinnedListener=({isPinned:t})=>{this.isPinned=t},this.stageListener=({webinarStageStatus:t})=>{this.isOnStage=t==="ON_STAGE"},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=$,this.t=B(),this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){this.participant==null||this.participant.removeListener==null||(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("peerStartedPresenting",this.stageListener),this.participant.removeListener("peerStoppedPresenting",this.stageListener))}meetingChanged(e){if(e!=null){const{self:t}=e;this.canDisableParticipantAudio=t.permissions.canAllowParticipantAudio||t.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=t.permissions.canAllowParticipantVideo||t.permissions.canDisableParticipantVideo,this.canKickParticipant=t.permissions.kickParticipant,this.canPinParticipant=t.permissions.pinParticipant,this.canAllowParticipantOnStage=t.permissions.acceptPresentRequests}}participantChanged(e){if(e!=null){if(this.audioEnabled=e.audioEnabled,this.videoEnabled=e.videoEnabled,this.isPinned=e.isPinned,this.isOnStage=e.webinarStageStatus==="ON_STAGE",this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},e.addListener==null)return;e.addListener("audioUpdate",this.audioUpdateListener),e.addListener("videoUpdate",this.videoUpdateListener),e.addListener("pinned",this.pinnedListener),e.addListener("unpinned",this.pinnedListener),e.addListener("peerStartedPresenting",this.stageListener),e.addListener("peerStoppedPresenting",this.stageListener)}}render(){var e,t,i,r,n,s,a,o;const c=this.canDisableParticipantAudio||this.canDisableParticipantVideo||this.canKickParticipant||this.canPinParticipant,d=Lr(((e=this.participant)===null||e===void 0?void 0:e.name)||""),l=this.isOnStage||((i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0?void 0:i.viewType)==="GROUP_CALL";return p(M,null,p("div",{class:"left"},p("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),p("p",{class:"name",title:d},Zi(d,16)," ",((r=this.meeting)===null||r===void 0?void 0:r.self.id)===((n=this.participant)===null||n===void 0?void 0:n.id)&&this.t("(you)"))),this.view==="sidebar"&&p("div",{class:"right"},l&&p("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),l&&p("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),c&&p("dyte-menu",{iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},p("dyte-icon",{class:"more",icon:this.iconPack.more_vertical})),p("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&l&&p("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("Unpin"):this.t("Pin")),this.canDisableParticipantAudio&&l&&this.audioEnabled&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},p("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&l&&this.videoEnabled&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},p("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participant.turn_off_video")),((s=this.meeting)===null||s===void 0?void 0:s.meta.viewType)==="WEBINAR"&&this.canAllowParticipantOnStage&&((a=this.participant)===null||a===void 0?void 0:a.id)!==((o=this.meeting)===null||o===void 0?void 0:o.self.id)&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:async()=>{const u=this.participant;this.isOnStage?(u.isPinned&&u.unpin(),await u.removeFromStage()):await u.acceptJoinStageRequest(),this.isOnStage=!this.isOnStage}},p("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),this.canKickParticipant&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var u,g;(u=this.meeting)===null||u===void 0||u.participants.kick((g=this.participant)===null||g===void 0?void 0:g.id)}},p("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick"))))))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};B5.style=c$;var d$=Object.freeze({__proto__:null,dyte_participant:B5});const l$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm']) ::slotted(dyte-network-indicator){right:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}.pinned-icon{position:absolute;left:var(--dyte-space-3, 12px);top:var(--dyte-space-3, 12px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) .pinned-icon{top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}",H5=class{constructor(e){V(this,e),this.onVideoUpdate=t=>{this.videoState=t,this.participant!=null&&(t.videoEnabled?gt.enableSource(this.participant.id):gt.disableSource(this.participant.id))},this.onPinned=({isPinned:t})=>{this.isPinned=t},this.isSelf=()=>{var t;return this.isPreview||this.participant.id===((t=this.meeting)===null||t===void 0?void 0:t.self.id)},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=Be,this.variant="solid",this.size=void 0,this.iconPack=$,this.t=B()}onVideoRef(e){this.videoEl=e,!(this.isPreview||this.participant==null)&&(gt.addSource(this.participant.id,this.videoEl,this.participant.videoEnabled),this.participant.videoEnabled&&gt.enableSource(this.participant.id))}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.playTimeout&&clearTimeout(this.playTimeout),this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned),gt.removeSource(this.participant.id))}participantsChanged(e){e!=null&&(this.videoState={videoEnabled:e.videoEnabled,videoTrack:e.videoTrack},this.isPinned=e.isPinned,e.addListener("videoUpdate",this.onVideoUpdate),e.addListener("pinned",this.onPinned),e.addListener("unpinned",this.onPinned))}videoStateChanged(e){var t;if(e!=null&&this.videoEl!=null)if(e.videoEnabled){!((t=this.meeting)===null||t===void 0)&&t.__internals__.features.hasFeature(A0.LOG_PLAYING_FAILURES)&&(this.playTimeout&&clearTimeout(this.playTimeout),this.playTimeout=setTimeout(()=>{var r;(r=this.meeting)===null||r===void 0||r.__internals__.logger.log("dyte-participant-tile::playing_timeout")},6e3));const i=new MediaStream;if(e.videoTrack==null)return;i.addTrack(e.videoTrack),this.videoEl.srcObject=i}else this.playTimeout&&clearTimeout(this.playTimeout),this.videoEl.srcObject=void 0}isMirrored(){var e;if(this.participant!=null&&this.isSelf()){const t=this.states||U,i=(e=t==null?void 0:t.prefs)===null||e===void 0?void 0:e.mirrorVideo;if(typeof i=="boolean")return i}return!1}render(){var e,t,i,r;return p(M,null,p("video",{ref:n=>this.onVideoRef(n),class:{visible:(e=this.videoState)===null||e===void 0?void 0:e.videoEnabled,mirror:this.isMirrored(),[(r=(i=(t=this.config)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},onPlaying:()=>{this.playTimeout&&clearTimeout(this.playTimeout)},onPause:n=>{var s,a;this.isSelf()&&((s=this.meeting)===null||s===void 0?void 0:s.__internals__.features.hasFeature(A0.PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),(a=n==null?void 0:n.target)===null||a===void 0||a.play())},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&p("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("Pinned"),iconPack:this.iconPack,t:this.t}),p("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};H5.style=l$;var u$=Object.freeze({__proto__:null,dyte_participant_tile:H5});const p$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;height:var(--dyte-space-16, 64px);width:100%;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='md']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='lg']) #sync-button{flex-direction:row;display:flex;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}",G5=class{constructor(e){V(this,e),this.meeting=void 0,this.iconPack=$,this.t=B(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){var t,i;e!=null&&(this.canSpotlight=e.self.permissions.canSpotlight,this.isSpotlighted=(i=(t=e.spotlight)===null||t===void 0?void 0:t.spotlighted)!==null&&i!==void 0?i:!1)}updateSpotlightState(e){var t;try{(t=this.meeting.spotlight)===null||t===void 0||t.setSpotlighted(e),this.isSpotlighted=e}catch(i){console.error(i)}}render(){if(!!this.canSpotlight)return p(M,null,p("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("Any plugin or screenshare you switch to will sync the change across the meeting")},p("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},p("span",{class:"name"},"Sync"),p("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};G5.style=p$;var h$=Object.freeze({__proto__:null,dyte_spotlight_indicator:G5});const g$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",W5=class{constructor(e){V(this,e),this.logoUrl=void 0,this.config=Be,this.meeting=void 0,this.t=B()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(e){var t;if(e!=null){const i=(t=e==null?void 0:e.designTokens)===null||t===void 0?void 0:t.logo;i!=null&&this.logoUrl==null&&(this.logoUrl=i)}}meetingChanged(e){var t,i,r,n;if(e!=null){const s=(n=(r=(i=(t=e.self)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.header)===null||r===void 0?void 0:r.elements)===null||n===void 0?void 0:n.logo;s!=null&&this.logoUrl==null&&(this.logoUrl=s)}}render(){if(!this.logoUrl||this.logoUrl==="")return null;const e=this.logoUrl,t=this.t("Logo");return p(M,null,p("img",{src:e,alt:t}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};W5.style=g$;var m$=Object.freeze({__proto__:null,dyte_logo:W5});const f$=class{constructor(e){V(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=$,this.t=B()}render(){const e=ib(this.message.link);return p(M,null,!this.isContinued&&p(dp,{name:this.message.displayName,time:this.message.time,now:this.now}),p("div",{class:"body",part:"body"},p("div",{class:"file"},p("div",{class:"file-data"},p("div",{class:"name"},this.message.name),p("div",{class:"file-data-split"},p("div",{class:"ext"},g9(this.message.name)),p("span",{class:"divider"}),p("div",{class:"size"},m9(this.message.size)))),p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>nb(e,{name:this.message.name,fallbackName:"file"}),part:"button"},p("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},v$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}",q5=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=$,this.t=B(),this.status="loading"}render(){return p(M,null,!this.isContinued&&p(dp,{name:this.message.displayName,time:this.message.time,now:this.now}),p("div",{class:"body",part:"body"},p("div",{class:{image:!0,loaded:this.status==="loaded"}},p("img",{src:ib(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&(this.stateUpdate.emit({image:this.message}),U.image=this.message)}}),this.status==="loading"&&p("div",{class:"image-spinner",title:this.t("Loading image"),"aria-label":this.t("Loading image")},p("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&p("div",{class:"image-errored",title:this.t("Image not found"),"aria-label":this.t("Image not found")},p("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&p("div",{class:"actions"},p("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),U.image=this.message},iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.full_screen_maximize})),p("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>nb(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};q5.style=v$;const y$=/(https?:\/\/[^\s]+)/,_$=e=>{const t=e.split(" "),i=t.length-1;return t.map((r,n)=>y$.test(r)?p("span",null,p("a",{href:r,target:"_blank",rel:"noopener noreferrer"},r),n!==i?" ":""):`${r}${n!==i?" ":""}`)},b$=({message:e})=>e.split(`
`).map(i=>p("p",null,_$(i))),w$=class{constructor(e){V(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=$,this.t=B()}render(){return p(M,null,!this.isContinued&&p(dp,{name:this.message.displayName,time:this.message.time,now:this.now}),p("div",{class:"body",part:"body"},p("div",{class:{text:!0,emoji:g8(this.message.message)}},p(b$,{message:this.message.message}))))}};var S$=Object.freeze({__proto__:null,dyte_file_message:f$,dyte_image_message:q5,dyte_text_message:w$});function lp(e){return e.split("-")[0]}function Gm(e){return e.split("-")[1]}function up(e){return["top","bottom"].includes(lp(e))?"x":"y"}function sb(e){return e==="y"?"height":"width"}function SE(e,t,i){let{reference:r,floating:n}=e;const s=r.x+r.width/2-n.width/2,a=r.y+r.height/2-n.height/2,o=up(t),c=sb(o),d=r[c]/2-n[c]/2,l=lp(t),u=o==="x";let g;switch(l){case"top":g={x:s,y:r.y-n.height};break;case"bottom":g={x:s,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:a};break;case"left":g={x:r.x-n.width,y:a};break;default:g={x:r.x,y:r.y}}switch(Gm(t)){case"start":g[o]-=d*(i&&u?-1:1);break;case"end":g[o]+=d*(i&&u?-1:1);break}return g}const E$=async(e,t,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:a}=i,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:n}),{x:l,y:u}=SE(d,r,c),g=r,m={},f=0;for(let w=0;w<o.length;w++){const{name:S,fn:y}=o[w],{x:_,y:T,data:C,reset:D}=await y({x:l,y:u,initialPlacement:r,placement:g,strategy:n,middlewareData:m,rects:d,platform:a,elements:{reference:e,floating:t}});if(l=_!=null?_:l,u=T!=null?T:u,m={...m,[S]:{...m[S],...C}},D&&f<=50){f++,typeof D=="object"&&(D.placement&&(g=D.placement),D.rects&&(d=D.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:n}):D.rects),{x:l,y:u}=SE(d,g,c)),w=-1;continue}}return{x:l,y:u,placement:g,strategy:n,middlewareData:m}};function T$(e){return{top:0,right:0,bottom:0,left:0,...e}}function J5(e){return typeof e!="number"?T$(e):{top:e,right:e,bottom:e,left:e}}function Wg(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function K5(e,t){var i;t===void 0&&(t={});const{x:r,y:n,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:l="viewport",elementContext:u="floating",altBoundary:g=!1,padding:m=0}=t,f=J5(m),S=o[g?u==="floating"?"reference":"floating":u],y=Wg(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(S)))==null||i?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:d,rootBoundary:l,strategy:c})),_=u==="floating"?{...a.floating,x:r,y:n}:a.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),C=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},D=Wg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:T,strategy:c}):_);return{top:(y.top-D.top+f.top)/C.y,bottom:(D.bottom-y.bottom+f.bottom)/C.y,left:(y.left-D.left+f.left)/C.x,right:(D.right-y.right+f.right)/C.x}}const k$=Math.min,P$=Math.max;function j0(e,t,i){return P$(e,k$(t,i))}const C$=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:r=0}=e!=null?e:{},{x:n,y:s,placement:a,rects:o,platform:c}=t;if(i==null)return{};const d=J5(r),l={x:n,y:s},u=up(a),g=sb(u),m=await c.getDimensions(i),f=u==="y"?"top":"left",w=u==="y"?"bottom":"right",S=o.reference[g]+o.reference[u]-l[u]-o.floating[g],y=l[u]-o.reference[u],_=await(c.getOffsetParent==null?void 0:c.getOffsetParent(i));let T=_?u==="y"?_.clientHeight||0:_.clientWidth||0:0;T===0&&(T=o.floating[g]);const C=S/2-y/2,D=d[f],O=T-m[g]-d[w],z=T/2-m[g]/2+C,H=j0(D,z,O),K=Gm(a)!=null&&z!=H&&o.reference[g]/2-(z<D?d[f]:d[w])-m[g]/2<0?z<D?D-z:O-z:0;return{[u]:l[u]-K,data:{[u]:H,centerOffset:z-H}}}}),R$={left:"right",right:"left",bottom:"top",top:"bottom"};function qg(e){return e.replace(/left|right|bottom|top/g,t=>R$[t])}function x$(e,t,i){i===void 0&&(i=!1);const r=Gm(e),n=up(e),s=sb(n);let a=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=qg(a)),{main:a,cross:qg(a)}}const I$={start:"end",end:"start"};function EE(e){return e.replace(/start|end/g,t=>I$[t])}function A$(e){const t=qg(e);return[EE(e),t,EE(t)]}const Y5=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:r,middlewareData:n,rects:s,initialPlacement:a,platform:o,elements:c}=t,{mainAxis:d=!0,crossAxis:l=!0,fallbackPlacements:u,fallbackStrategy:g="bestFit",flipAlignment:m=!0,...f}=e,w=lp(r),y=u||(w===a||!m?[qg(a)]:A$(a)),_=[a,...y],T=await K5(t,f),C=[];let D=((i=n.flip)==null?void 0:i.overflows)||[];if(d&&C.push(T[w]),l){const{main:ie,cross:K}=x$(r,s,await(o.isRTL==null?void 0:o.isRTL(c.floating)));C.push(T[ie],T[K])}if(D=[...D,{placement:r,overflows:C}],!C.every(ie=>ie<=0)){var O,z;const ie=((O=(z=n.flip)==null?void 0:z.index)!=null?O:0)+1,K=_[ie];if(K)return{data:{index:ie,overflows:D},reset:{placement:K}};let ge="bottom";switch(g){case"bestFit":{var H;const He=(H=D.map(Zt=>[Zt,Zt.overflows.filter(Xt=>Xt>0).reduce((Xt,Yn)=>Xt+Yn,0)]).sort((Zt,Xt)=>Zt[1]-Xt[1])[0])==null?void 0:H[0].placement;He&&(ge=He);break}case"initialPlacement":ge=a;break}if(r!==ge)return{reset:{placement:ge}}}return{}}}};async function O$(e,t){const{placement:i,platform:r,elements:n}=e,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),a=lp(i),o=Gm(i),c=up(i)==="x",d=["left","top"].includes(a)?-1:1,l=s&&c?-1:1,u=typeof t=="function"?t(e):t;let{mainAxis:g,crossAxis:m,alignmentAxis:f}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return o&&typeof f=="number"&&(m=o==="end"?f*-1:f),c?{x:m*l,y:g*d}:{x:g*d,y:m*l}}const Q5=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:r}=t,n=await O$(t,e);return{x:i+n.x,y:r+n.y,data:n}}}};function M$(e){return e==="x"?"y":"x"}const Z5=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:n}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:S=>{let{x:y,y:_}=S;return{x:y,y:_}}},...c}=e,d={x:i,y:r},l=await K5(t,c),u=up(lp(n)),g=M$(u);let m=d[u],f=d[g];if(s){const S=u==="y"?"top":"left",y=u==="y"?"bottom":"right",_=m+l[S],T=m-l[y];m=j0(_,m,T)}if(a){const S=g==="y"?"top":"left",y=g==="y"?"bottom":"right",_=f+l[S],T=f-l[y];f=j0(_,f,T)}const w=o.fn({...t,[u]:m,[g]:f});return{...w,data:{x:w.x-i,y:w.y-r}}}}};function Mr(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bn(e){return Mr(e).getComputedStyle(e)}function xa(e){return eI(e)?(e.nodeName||"").toLowerCase():""}let Jp;function X5(){if(Jp)return Jp;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Jp=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Jp):navigator.userAgent}function Ps(e){return e instanceof Mr(e).HTMLElement}function Ia(e){return e instanceof Mr(e).Element}function eI(e){return e instanceof Mr(e).Node}function TE(e){if(typeof ShadowRoot>"u")return!1;const t=Mr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Wm(e){const{overflow:t,overflowX:i,overflowY:r,display:n}=Bn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(n)}function D$(e){return["table","td","th"].includes(xa(e))}function ab(e){const t=/firefox/i.test(X5()),i=Bn(e),r=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(r?r!=="none":!1)||t&&i.willChange==="filter"||t&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(n=>i.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const s=i.contain;return s!=null?s.includes(n):!1})}function tI(){return!/^((?!chrome|android).)*safari/i.test(X5())}function ob(e){return["html","body","#document"].includes(xa(e))}const kE=Math.min,hu=Math.max,Jg=Math.round;function iI(e){const t=Bn(e);let i=parseFloat(t.width),r=parseFloat(t.height);const n=e.offsetWidth,s=e.offsetHeight,a=Jg(i)!==n||Jg(r)!==s;return a&&(i=n,r=s),{width:i,height:r,fallback:a}}function rI(e){return Ia(e)?e:e.contextElement}const nI={x:1,y:1};function dd(e){const t=rI(e);if(!Ps(t))return nI;const i=t.getBoundingClientRect(),{width:r,height:n,fallback:s}=iI(t);let a=(s?Jg(i.width):i.width)/r,o=(s?Jg(i.height):i.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}function Fu(e,t,i,r){var n,s;t===void 0&&(t=!1),i===void 0&&(i=!1);const a=e.getBoundingClientRect(),o=rI(e);let c=nI;t&&(r?Ia(r)&&(c=dd(r)):c=dd(e));const d=o?Mr(o):window,l=!tI()&&i;let u=(a.left+(l&&((n=d.visualViewport)==null?void 0:n.offsetLeft)||0))/c.x,g=(a.top+(l&&((s=d.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=a.width/c.x,f=a.height/c.y;if(o){const w=Mr(o),S=r&&Ia(r)?Mr(r):r;let y=w.frameElement;for(;y&&r&&S!==w;){const _=dd(y),T=y.getBoundingClientRect(),C=getComputedStyle(y);T.x+=(y.clientLeft+parseFloat(C.paddingLeft))*_.x,T.y+=(y.clientTop+parseFloat(C.paddingTop))*_.y,u*=_.x,g*=_.y,m*=_.x,f*=_.y,u+=T.x,g+=T.y,y=Mr(y).frameElement}}return{width:m,height:f,top:g,right:u+m,bottom:g+f,left:u,x:u,y:g}}function Ua(e){return((eI(e)?e.ownerDocument:e.document)||window.document).documentElement}function qm(e){return Ia(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function sI(e){return Fu(Ua(e)).left+qm(e).scrollLeft}function L$(e,t,i){const r=Ps(t),n=Ua(t),s=Fu(e,!0,i==="fixed",t);let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&i!=="fixed")if((xa(t)!=="body"||Wm(n))&&(a=qm(t)),Ps(t)){const c=Fu(t,!0);o.x=c.x+t.clientLeft,o.y=c.y+t.clientTop}else n&&(o.x=sI(n));return{x:s.left+a.scrollLeft-o.x,y:s.top+a.scrollTop-o.y,width:s.width,height:s.height}}function zu(e){if(xa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(TE(e)?e.host:null)||Ua(e);return TE(t)?t.host:t}function PE(e){return!Ps(e)||Bn(e).position==="fixed"?null:e.offsetParent}function N$(e){let t=zu(e);for(;Ps(t)&&!ob(t);){if(ab(t))return t;t=zu(t)}return null}function CE(e){const t=Mr(e);let i=PE(e);for(;i&&D$(i)&&Bn(i).position==="static";)i=PE(i);return i&&(xa(i)==="html"||xa(i)==="body"&&Bn(i).position==="static"&&!ab(i))?t:i||N$(e)||t}function U$(e){return iI(e)}function j$(e){let{rect:t,offsetParent:i,strategy:r}=e;const n=Ps(i),s=Ua(i);if(i===s)return t;let a={scrollLeft:0,scrollTop:0},o={x:1,y:1};const c={x:0,y:0};if((n||!n&&r!=="fixed")&&((xa(i)!=="body"||Wm(s))&&(a=qm(i)),Ps(i))){const d=Fu(i);o=dd(i),c.x=d.x+i.clientLeft,c.y=d.y+i.clientTop}return{width:t.width*o.x,height:t.height*o.y,x:t.x*o.x-a.scrollLeft*o.x+c.x,y:t.y*o.y-a.scrollTop*o.y+c.y}}function $$(e,t){const i=Mr(e),r=Ua(e),n=i.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(n){s=n.width,a=n.height;const d=tI();(d||!d&&t==="fixed")&&(o=n.offsetLeft,c=n.offsetTop)}return{width:s,height:a,x:o,y:c}}function V$(e){var t;const i=Ua(e),r=qm(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=hu(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=hu(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0);let o=-r.scrollLeft+sI(e);const c=-r.scrollTop;return Bn(n||i).direction==="rtl"&&(o+=hu(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:a,x:o,y:c}}function aI(e){const t=zu(e);return ob(t)?e.ownerDocument.body:Ps(t)&&Wm(t)?t:aI(t)}function oI(e,t){var i;t===void 0&&(t=[]);const r=aI(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),s=Mr(r);return n?t.concat(s,s.visualViewport||[],Wm(r)?r:[]):t.concat(r,oI(r))}function F$(e,t){const i=Fu(e,!0,t==="fixed"),r=i.top+e.clientTop,n=i.left+e.clientLeft,s=Ps(e)?dd(e):{x:1,y:1},a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=n*s.x,d=r*s.y;return{top:d,left:c,right:c+a,bottom:d+o,x:c,y:d,width:a,height:o}}function RE(e,t,i){return t==="viewport"?Wg($$(e,i)):Ia(t)?F$(t,i):Wg(V$(Ua(e)))}function z$(e,t){const i=t.get(e);if(i)return i;let r=oI(e).filter(o=>Ia(o)&&xa(o)!=="body"),n=null;const s=Bn(e).position==="fixed";let a=s?zu(e):e;for(;Ia(a)&&!ob(a);){const o=Bn(a),c=ab(a);(s?!c&&!n:!c&&o.position==="static"&&!!n&&["absolute","fixed"].includes(n.position))?r=r.filter(l=>l!==a):n=o,a=zu(a)}return t.set(e,r),r}function B$(e){let{element:t,boundary:i,rootBoundary:r,strategy:n}=e;const a=[...i==="clippingAncestors"?z$(t,this._c):[].concat(i),r],o=a[0],c=a.reduce((d,l)=>{const u=RE(t,l,n);return d.top=hu(u.top,d.top),d.right=kE(u.right,d.right),d.bottom=kE(u.bottom,d.bottom),d.left=hu(u.left,d.left),d},RE(t,o,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const H$={getClippingRect:B$,convertOffsetParentRelativeRectToViewportRelativeRect:j$,isElement:Ia,getDimensions:U$,getOffsetParent:CE,getDocumentElement:Ua,getScale:dd,async getElementRects(e){let{reference:t,floating:i,strategy:r}=e;const n=this.getOffsetParent||CE,s=this.getDimensions;return{reference:L$(t,await n(i),r),floating:{x:0,y:0,...await s(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Bn(e).direction==="rtl"},cI=(e,t,i)=>{const r=new Map,n={platform:H$,...i},s={...n.platform,_c:r};return E$(e,t,{...n,platform:s})},G$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}",dI=class{constructor(t){V(this,t),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.iconPack=$,this.t=B()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){cI(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[Q5(10),Y5(),Z5({padding:5})]}).then(({x:t,y:i})=>{Object.assign(this.menuListEl.style,{left:`${t}px`,top:`${i}px`})})}render(){return p(M,null,p("span",{id:"trigger",ref:t=>this.triggerEl=t,onClick:()=>{this.clickedThis=!0,this.menuListEl.style.display!=="block"?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},p("slot",{name:"trigger"})),p("span",{part:"menu-list",id:"menu-list",ref:t=>this.menuListEl=t},p("slot",null)))}};dI.style=G$;const W$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",lI=class{constructor(e){V(this,e),this.size=void 0,this.iconPack=$,this.t=B()}render(){return p(M,null,p("slot",{name:"start"}),p("slot",null),p("slot",{name:"end"}))}};lI.style=W$;const q$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-webkit-max-content;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}",uI=class{constructor(e){V(this,e),this.iconPack=$,this.t=B()}render(){return p(M,null,p("slot",null))}};uI.style=q$;var J$=Object.freeze({__proto__:null,dyte_menu:dI,dyte_menu_item:lI,dyte_menu_list:uI});const K$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));overflow:hidden;border-radius:9999px}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([size='sm']){height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);font-size:20px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}",pI=class{constructor(e){V(this,e),this.getAvatar=()=>{var t;const i=Lr(((t=this.participant)===null||t===void 0?void 0:t.name)||"");let r;if(this.participant!=null&&"picture"in this.participant&&(r=this.participant.picture),r&&r.length>0&&this.imageState!=="errored")return p("div",{class:"image-ctr"},this.imageState==="loading"&&p("dyte-spinner",{iconPack:this.iconPack,t:this.t}),p("img",{src:r,class:{loaded:this.imageState==="loaded"},loading:"lazy",title:i,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const n=KR(i);return p("div",{class:"initials",title:i,part:"initials"},n)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=$,this.t=B(),this.imageState="loading"}render(){return p(M,null,this.getAvatar())}};pI.style=K$;var Y$=Object.freeze({__proto__:null,dyte_avatar:pI});const Q$=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(
    --dyte-controlbar-button-background-color,
    rgb(var(--dyte-colors-background-1000, 8 8 8))
  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px)}:host([variant='horizontal']) .label{display:block;font-size:14px}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}`,hI=class{constructor(e){V(this,e),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=$,this.t=B(),this.brandIcon=!1}render(){return p(M,null,p("button",{"aria-label":this.label,part:"button"},this.isLoading?p("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):p("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),p("span",{class:"label",part:"label"},this.label),this.showWarning&&p("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};hI.style=Q$;var Z$=Object.freeze({__proto__:null,dyte_controlbar_button:hI});const X$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip,#arrow{position:absolute;background-color:var(--background-color)}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}:host([kind='block']){display:block}",gI=class{constructor(e){V(this,e),this.dyteOpenChange=Q(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout(()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),this.size==="sm"&&setTimeout(()=>{this.isInFocus&&this.hideMenu()},1e3))},this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=$,this.t=B(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),fn(()=>{this.openChanged(this.open)})}openChanged(e){e?this.showMenu():this.hideMenu()}update(){cI(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[Q5(8),Y5(),Z5({padding:5}),C$({element:this.arrowEl})]}).then(({x:e,y:t,placement:i,middlewareData:r})=>{Object.assign(this.tooltipEl.style,{left:`${e}px`,top:`${t}px`});const{x:n,y:s}=r.arrow,a={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:n!=null?`${n}px`:"",top:s!=null?`${s}px`:"",right:"",bottom:"",[a]:"-4px"})})}render(){return p(M,null,p("span",{part:"trigger",id:"trigger",ref:e=>this.triggerEl=e},p("slot",null)),p("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:e=>this.tooltipEl=e},p("div",{id:"arrow",ref:e=>this.arrowEl=e,part:"arrow"}),this.label,p("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};gI.style=X$;var eV=Object.freeze({__proto__:null,dyte_tooltip:gI});const tV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@-webkit-keyframes spin{to{transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}.spinner{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;-webkit-animation-duration:0.7s;animation-duration:0.7s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",mI=class{constructor(e){V(this,e),this.iconPack=$,this.size="md",this.t=B()}render(){return p(M,null,p("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};mI.style=tV;var iV=Object.freeze({__proto__:null,dyte_spinner:mI});const rV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}",fI=class{constructor(e){V(this,e),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=$,this.t=B()}render(){return p(M,null,p("button",{part:"button"},p("span",{class:"start"},p("slot",{name:"start"})),p("span",{class:"content",part:"content"},p("slot",null)),p("span",{class:"end"},p("slot",{name:"end"}))))}};fI.style=rV;var nV=Object.freeze({__proto__:null,dyte_button:fI});const sV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}",aV=e=>{try{return JSON.parse(e)}catch{return e}},vI=class{constructor(e){V(this,e),this.icon=void 0,this.iconPack=$,this.t=B()}render(){return p(M,null,p("div",{class:"icon-wrapper",innerHTML:aV(this.icon),part:"wrapper"}))}};vI.style=sV;var oV=Object.freeze({__proto__:null,dyte_icon:vI});(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();O6();const cV=KL("dyte-meeting");var yI=typeof global=="object"&&global&&global.Object===Object&&global,dV=typeof self=="object"&&self&&self.Object===Object&&self,zd=yI||dV||Function("return this")(),Kg=zd.Symbol,_I=Object.prototype,lV=_I.hasOwnProperty,uV=_I.toString,pl=Kg?Kg.toStringTag:void 0;function pV(e){var t=lV.call(e,pl),i=e[pl];try{e[pl]=void 0;var r=!0}catch{}var n=uV.call(e);return r&&(t?e[pl]=i:delete e[pl]),n}var hV=Object.prototype,gV=hV.toString;function mV(e){return gV.call(e)}var fV="[object Null]",vV="[object Undefined]",xE=Kg?Kg.toStringTag:void 0;function Jm(e){return e==null?e===void 0?vV:fV:xE&&xE in Object(e)?pV(e):mV(e)}function Zo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function pp(e){return e!=null&&typeof e=="object"}function yV(){this.__data__=[],this.size=0}function Km(e,t){return e===t||e!==e&&t!==t}function Ym(e,t){for(var i=e.length;i--;)if(Km(e[i][0],t))return i;return-1}var _V=Array.prototype,bV=_V.splice;function wV(e){var t=this.__data__,i=Ym(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():bV.call(t,i,1),--this.size,!0}function SV(e){var t=this.__data__,i=Ym(t,e);return i<0?void 0:t[i][1]}function EV(e){return Ym(this.__data__,e)>-1}function TV(e,t){var i=this.__data__,r=Ym(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function Ms(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Ms.prototype.clear=yV;Ms.prototype.delete=wV;Ms.prototype.get=SV;Ms.prototype.has=EV;Ms.prototype.set=TV;function kV(){this.__data__=new Ms,this.size=0}function PV(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function CV(e){return this.__data__.get(e)}function RV(e){return this.__data__.has(e)}var xV="[object AsyncFunction]",IV="[object Function]",AV="[object GeneratorFunction]",OV="[object Proxy]";function cb(e){if(!Zo(e))return!1;var t=Jm(e);return t==IV||t==AV||t==xV||t==OV}var gv=zd["__core-js_shared__"],IE=function(){var e=/[^.]+$/.exec(gv&&gv.keys&&gv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function MV(e){return!!IE&&IE in e}var DV=Function.prototype,LV=DV.toString;function NV(e){if(e!=null){try{return LV.call(e)}catch{}try{return e+""}catch{}}return""}var UV=/[\\^$.*+?()[\]{}|]/g,jV=/^\[object .+?Constructor\]$/,$V=Function.prototype,VV=Object.prototype,FV=$V.toString,zV=VV.hasOwnProperty,BV=RegExp("^"+FV.call(zV).replace(UV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function HV(e){if(!Zo(e)||MV(e))return!1;var t=cb(e)?BV:jV;return t.test(NV(e))}function GV(e,t){return e==null?void 0:e[t]}function db(e,t){var i=GV(e,t);return HV(i)?i:void 0}var bI=db(zd,"Map"),Bu=db(Object,"create");function WV(){this.__data__=Bu?Bu(null):{},this.size=0}function qV(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var JV="__lodash_hash_undefined__",KV=Object.prototype,YV=KV.hasOwnProperty;function QV(e){var t=this.__data__;if(Bu){var i=t[e];return i===JV?void 0:i}return YV.call(t,e)?t[e]:void 0}var ZV=Object.prototype,XV=ZV.hasOwnProperty;function eF(e){var t=this.__data__;return Bu?t[e]!==void 0:XV.call(t,e)}var tF="__lodash_hash_undefined__";function iF(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Bu&&t===void 0?tF:t,this}function Bo(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Bo.prototype.clear=WV;Bo.prototype.delete=qV;Bo.prototype.get=QV;Bo.prototype.has=eF;Bo.prototype.set=iF;function rF(){this.size=0,this.__data__={hash:new Bo,map:new(bI||Ms),string:new Bo}}function nF(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Qm(e,t){var i=e.__data__;return nF(t)?i[typeof t=="string"?"string":"hash"]:i.map}function sF(e){var t=Qm(this,e).delete(e);return this.size-=t?1:0,t}function aF(e){return Qm(this,e).get(e)}function oF(e){return Qm(this,e).has(e)}function cF(e,t){var i=Qm(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function Bd(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Bd.prototype.clear=rF;Bd.prototype.delete=sF;Bd.prototype.get=aF;Bd.prototype.has=oF;Bd.prototype.set=cF;var dF=200;function lF(e,t){var i=this.__data__;if(i instanceof Ms){var r=i.__data__;if(!bI||r.length<dF-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Bd(r)}return i.set(e,t),this.size=i.size,this}function Hd(e){var t=this.__data__=new Ms(e);this.size=t.size}Hd.prototype.clear=kV;Hd.prototype.delete=PV;Hd.prototype.get=CV;Hd.prototype.has=RV;Hd.prototype.set=lF;var Yg=function(){try{var e=db(Object,"defineProperty");return e({},"",{}),e}catch{}}();function lb(e,t,i){t=="__proto__"&&Yg?Yg(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function $0(e,t,i){(i!==void 0&&!Km(e[t],i)||i===void 0&&!(t in e))&&lb(e,t,i)}function uF(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++n];if(i(s[c],c,s)===!1)break}return t}}var pF=uF(),wI=typeof xe=="object"&&xe&&!xe.nodeType&&xe,AE=wI&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,hF=AE&&AE.exports===wI,OE=hF?zd.Buffer:void 0,ME=OE?OE.allocUnsafe:void 0;function gF(e,t){if(t)return e.slice();var i=e.length,r=ME?ME(i):new e.constructor(i);return e.copy(r),r}var DE=zd.Uint8Array;function mF(e){var t=new e.constructor(e.byteLength);return new DE(t).set(new DE(e)),t}function fF(e,t){var i=t?mF(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function vF(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var LE=Object.create,yF=function(){function e(){}return function(t){if(!Zo(t))return{};if(LE)return LE(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function _F(e,t){return function(i){return e(t(i))}}var SI=_F(Object.getPrototypeOf,Object),bF=Object.prototype;function EI(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||bF;return e===i}function wF(e){return typeof e.constructor=="function"&&!EI(e)?yF(SI(e)):{}}var SF="[object Arguments]";function NE(e){return pp(e)&&Jm(e)==SF}var TI=Object.prototype,EF=TI.hasOwnProperty,TF=TI.propertyIsEnumerable,V0=NE(function(){return arguments}())?NE:function(e){return pp(e)&&EF.call(e,"callee")&&!TF.call(e,"callee")},F0=Array.isArray,kF=9007199254740991;function kI(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kF}function ub(e){return e!=null&&kI(e.length)&&!cb(e)}function PF(e){return pp(e)&&ub(e)}function CF(){return!1}var PI=typeof xe=="object"&&xe&&!xe.nodeType&&xe,UE=PI&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,RF=UE&&UE.exports===PI,jE=RF?zd.Buffer:void 0,xF=jE?jE.isBuffer:void 0,CI=xF||CF,IF="[object Object]",AF=Function.prototype,OF=Object.prototype,RI=AF.toString,MF=OF.hasOwnProperty,DF=RI.call(Object);function LF(e){if(!pp(e)||Jm(e)!=IF)return!1;var t=SI(e);if(t===null)return!0;var i=MF.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&RI.call(i)==DF}var NF="[object Arguments]",UF="[object Array]",jF="[object Boolean]",$F="[object Date]",VF="[object Error]",FF="[object Function]",zF="[object Map]",BF="[object Number]",HF="[object Object]",GF="[object RegExp]",WF="[object Set]",qF="[object String]",JF="[object WeakMap]",KF="[object ArrayBuffer]",YF="[object DataView]",QF="[object Float32Array]",ZF="[object Float64Array]",XF="[object Int8Array]",ez="[object Int16Array]",tz="[object Int32Array]",iz="[object Uint8Array]",rz="[object Uint8ClampedArray]",nz="[object Uint16Array]",sz="[object Uint32Array]",pt={};pt[QF]=pt[ZF]=pt[XF]=pt[ez]=pt[tz]=pt[iz]=pt[rz]=pt[nz]=pt[sz]=!0;pt[NF]=pt[UF]=pt[KF]=pt[jF]=pt[YF]=pt[$F]=pt[VF]=pt[FF]=pt[zF]=pt[BF]=pt[HF]=pt[GF]=pt[WF]=pt[qF]=pt[JF]=!1;function az(e){return pp(e)&&kI(e.length)&&!!pt[Jm(e)]}function oz(e){return function(t){return e(t)}}var xI=typeof xe=="object"&&xe&&!xe.nodeType&&xe,gu=xI&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,cz=gu&&gu.exports===xI,mv=cz&&yI.process,$E=function(){try{var e=gu&&gu.require&&gu.require("util").types;return e||mv&&mv.binding&&mv.binding("util")}catch{}}(),VE=$E&&$E.isTypedArray,II=VE?oz(VE):az;function z0(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var dz=Object.prototype,lz=dz.hasOwnProperty;function uz(e,t,i){var r=e[t];(!(lz.call(e,t)&&Km(r,i))||i===void 0&&!(t in e))&&lb(e,t,i)}function pz(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?lb(i,o,c):uz(i,o,c)}return i}function hz(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var gz=9007199254740991,mz=/^(?:0|[1-9]\d*)$/;function AI(e,t){var i=typeof e;return t=t==null?gz:t,!!t&&(i=="number"||i!="symbol"&&mz.test(e))&&e>-1&&e%1==0&&e<t}var fz=Object.prototype,vz=fz.hasOwnProperty;function yz(e,t){var i=F0(e),r=!i&&V0(e),n=!i&&!r&&CI(e),s=!i&&!r&&!n&&II(e),a=i||r||n||s,o=a?hz(e.length,String):[],c=o.length;for(var d in e)(t||vz.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||AI(d,c)))&&o.push(d);return o}function _z(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var bz=Object.prototype,wz=bz.hasOwnProperty;function Sz(e){if(!Zo(e))return _z(e);var t=EI(e),i=[];for(var r in e)r=="constructor"&&(t||!wz.call(e,r))||i.push(r);return i}function OI(e){return ub(e)?yz(e,!0):Sz(e)}function Ez(e){return pz(e,OI(e))}function Tz(e,t,i,r,n,s,a){var o=z0(e,i),c=z0(t,i),d=a.get(c);if(d){$0(e,i,d);return}var l=s?s(o,c,i+"",e,t,a):void 0,u=l===void 0;if(u){var g=F0(c),m=!g&&CI(c),f=!g&&!m&&II(c);l=c,g||m||f?F0(o)?l=o:PF(o)?l=vF(o):m?(u=!1,l=gF(c,!0)):f?(u=!1,l=fF(c,!0)):l=[]:LF(c)||V0(c)?(l=o,V0(o)?l=Ez(o):(!Zo(o)||cb(o))&&(l=wF(c))):u=!1}u&&(a.set(c,l),n(l,c,r,s,a),a.delete(c)),$0(e,i,l)}function MI(e,t,i,r,n){e!==t&&pF(t,function(s,a){if(n||(n=new Hd),Zo(s))Tz(e,t,a,i,MI,r,n);else{var o=r?r(z0(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),$0(e,a,o)}},OI)}function DI(e){return e}function kz(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var FE=Math.max;function Pz(e,t,i){return t=FE(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=FE(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),kz(e,this,o)}}function Cz(e){return function(){return e}}var Rz=Yg?function(e,t){return Yg(e,"toString",{configurable:!0,enumerable:!1,value:Cz(t),writable:!0})}:DI,xz=800,Iz=16,Az=Date.now;function Oz(e){var t=0,i=0;return function(){var r=Az(),n=Iz-(r-i);if(i=r,n>0){if(++t>=xz)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Mz=Oz(Rz);function Dz(e,t){return Mz(Pz(e,t,DI),e+"")}function Lz(e,t,i){if(!Zo(i))return!1;var r=typeof t;return(r=="number"?ub(i)&&AI(t,i.length):r=="string"&&t in i)?Km(i[t],e):!1}function Nz(e){return Dz(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&Lz(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}Nz(function(e,t,i){MI(e,t,i)});const zE={get:(e,t,i)=>(...r)=>{try{return Reflect.get(e,t,i).apply(e,r)}catch{return null}}};let BE;try{BE=new Proxy(localStorage,zE)}catch{BE=new Proxy({},zE)}var Kp,Uz=new Uint8Array(16);function jz(){if(!Kp&&(Kp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Kp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kp(Uz)}const $z=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pb(e){return typeof e=="string"&&$z.test(e)}var mi=[];for(var fv=0;fv<256;++fv)mi.push((fv+256).toString(16).substr(1));function Vz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(mi[e[t+0]]+mi[e[t+1]]+mi[e[t+2]]+mi[e[t+3]]+"-"+mi[e[t+4]]+mi[e[t+5]]+"-"+mi[e[t+6]]+mi[e[t+7]]+"-"+mi[e[t+8]]+mi[e[t+9]]+"-"+mi[e[t+10]]+mi[e[t+11]]+mi[e[t+12]]+mi[e[t+13]]+mi[e[t+14]]+mi[e[t+15]]).toLowerCase();if(!pb(i))throw TypeError("Stringified UUID is invalid");return i}function Zm(e,t,i){e=e||{};var r=e.random||(e.rng||jz)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return Vz(r)}var LI={exports:{}},hb={exports:{}},NI=function(t,i){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return t.apply(i,n)}},Fz=NI,ja=Object.prototype.toString;function gb(e){return Array.isArray(e)}function B0(e){return typeof e>"u"}function zz(e){return e!==null&&!B0(e)&&e.constructor!==null&&!B0(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function UI(e){return ja.call(e)==="[object ArrayBuffer]"}function Bz(e){return ja.call(e)==="[object FormData]"}function Hz(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&UI(e.buffer),t}function Gz(e){return typeof e=="string"}function Wz(e){return typeof e=="number"}function jI(e){return e!==null&&typeof e=="object"}function Nh(e){if(ja.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function qz(e){return ja.call(e)==="[object Date]"}function Jz(e){return ja.call(e)==="[object File]"}function Kz(e){return ja.call(e)==="[object Blob]"}function $I(e){return ja.call(e)==="[object Function]"}function Yz(e){return jI(e)&&$I(e.pipe)}function Qz(e){return ja.call(e)==="[object URLSearchParams]"}function Zz(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Xz(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function mb(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),gb(e))for(var i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function H0(){var e={};function t(n,s){Nh(e[s])&&Nh(n)?e[s]=H0(e[s],n):Nh(n)?e[s]=H0({},n):gb(n)?e[s]=n.slice():e[s]=n}for(var i=0,r=arguments.length;i<r;i++)mb(arguments[i],t);return e}function eB(e,t,i){return mb(t,function(n,s){i&&typeof n=="function"?e[s]=Fz(n,i):e[s]=n}),e}function tB(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var rr={isArray:gb,isArrayBuffer:UI,isBuffer:zz,isFormData:Bz,isArrayBufferView:Hz,isString:Gz,isNumber:Wz,isObject:jI,isPlainObject:Nh,isUndefined:B0,isDate:qz,isFile:Jz,isBlob:Kz,isFunction:$I,isStream:Yz,isURLSearchParams:Qz,isStandardBrowserEnv:Xz,forEach:mb,merge:H0,extend:eB,trim:Zz,stripBOM:tB},dc=rr;function HE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var VI=function(t,i,r){if(!i)return t;var n;if(r)n=r(i);else if(dc.isURLSearchParams(i))n=i.toString();else{var s=[];dc.forEach(i,function(c,d){c===null||typeof c>"u"||(dc.isArray(c)?d=d+"[]":c=[c],dc.forEach(c,function(u){dc.isDate(u)?u=u.toISOString():dc.isObject(u)&&(u=JSON.stringify(u)),s.push(HE(d)+"="+HE(u))}))}),n=s.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},iB=rr;function Xm(){this.handlers=[]}Xm.prototype.use=function(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Xm.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Xm.prototype.forEach=function(t){iB.forEach(this.handlers,function(r){r!==null&&t(r)})};var rB=Xm,nB=rr,sB=function(t,i){nB.forEach(t,function(n,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(t[i]=n,delete t[s])})},FI=function(t,i,r,n,s){return t.config=i,r&&(t.code=r),t.request=n,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},vv,GE;function zI(){if(GE)return vv;GE=1;var e=FI;return vv=function(i,r,n,s,a){var o=new Error(i);return e(o,r,n,s,a)},vv}var yv,WE;function aB(){if(WE)return yv;WE=1;var e=zI();return yv=function(i,r,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?i(n):r(e("Request failed with status code "+n.status,n.config,null,n.request,n))},yv}var _v,qE;function oB(){if(qE)return _v;qE=1;var e=rr;return _v=e.isStandardBrowserEnv()?function(){return{write:function(r,n,s,a,o,c){var d=[];d.push(r+"="+encodeURIComponent(n)),e.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),e.isString(a)&&d.push("path="+a),e.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),_v}var bv,JE;function cB(){return JE||(JE=1,bv=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),bv}var wv,KE;function dB(){return KE||(KE=1,wv=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),wv}var Sv,YE;function lB(){if(YE)return Sv;YE=1;var e=cB(),t=dB();return Sv=function(r,n){return r&&!e(n)?t(r,n):n},Sv}var Ev,QE;function uB(){if(QE)return Ev;QE=1;var e=rr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ev=function(r){var n={},s,a,o;return r&&e.forEach(r.split(`
`),function(d){if(o=d.indexOf(":"),s=e.trim(d.substr(0,o)).toLowerCase(),a=e.trim(d.substr(o+1)),s){if(n[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?n[s]=(n[s]?n[s]:[]).concat([a]):n[s]=n[s]?n[s]+", "+a:a}}),n},Ev}var Tv,ZE;function pB(){if(ZE)return Tv;ZE=1;var e=rr;return Tv=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function s(a){var o=a;return i&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(o){var c=e.isString(o)?s(o):o;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}(),Tv}var kv,XE;function ef(){if(XE)return kv;XE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,kv=e,kv}var Pv,eT;function tT(){if(eT)return Pv;eT=1;var e=rr,t=aB(),i=oB(),r=VI,n=lB(),s=uB(),a=pB(),o=zI(),c=tf(),d=ef();return Pv=function(u){return new Promise(function(m,f){var w=u.data,S=u.headers,y=u.responseType,_;function T(){u.cancelToken&&u.cancelToken.unsubscribe(_),u.signal&&u.signal.removeEventListener("abort",_)}e.isFormData(w)&&delete S["Content-Type"];var C=new XMLHttpRequest;if(u.auth){var D=u.auth.username||"",O=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";S.Authorization="Basic "+btoa(D+":"+O)}var z=n(u.baseURL,u.url);C.open(u.method.toUpperCase(),r(z,u.params,u.paramsSerializer),!0),C.timeout=u.timeout;function H(){if(!!C){var K="getAllResponseHeaders"in C?s(C.getAllResponseHeaders()):null,ge=!y||y==="text"||y==="json"?C.responseText:C.response,He={data:ge,status:C.status,statusText:C.statusText,headers:K,config:u,request:C};t(function(Xt){m(Xt),T()},function(Xt){f(Xt),T()},He),C=null}}if("onloadend"in C?C.onloadend=H:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(H)},C.onabort=function(){!C||(f(o("Request aborted",u,"ECONNABORTED",C)),C=null)},C.onerror=function(){f(o("Network Error",u,null,C)),C=null},C.ontimeout=function(){var ge=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",He=u.transitional||c.transitional;u.timeoutErrorMessage&&(ge=u.timeoutErrorMessage),f(o(ge,u,He.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},e.isStandardBrowserEnv()){var ie=(u.withCredentials||a(z))&&u.xsrfCookieName?i.read(u.xsrfCookieName):void 0;ie&&(S[u.xsrfHeaderName]=ie)}"setRequestHeader"in C&&e.forEach(S,function(ge,He){typeof w>"u"&&He.toLowerCase()==="content-type"?delete S[He]:C.setRequestHeader(He,ge)}),e.isUndefined(u.withCredentials)||(C.withCredentials=!!u.withCredentials),y&&y!=="json"&&(C.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&C.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(_=function(K){!C||(f(!K||K&&K.type?new d("canceled"):K),C.abort(),C=null)},u.cancelToken&&u.cancelToken.subscribe(_),u.signal&&(u.signal.aborted?_():u.signal.addEventListener("abort",_))),w||(w=null),C.send(w)})},Pv}var Cv,iT;function tf(){if(iT)return Cv;iT=1;var e=rr,t=sB,i=FI,r={"Content-Type":"application/x-www-form-urlencoded"};function n(c,d){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=d)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=tT()),c}function a(c,d,l){if(e.isString(c))try{return(d||JSON.parse)(c),e.trim(c)}catch(u){if(u.name!=="SyntaxError")throw u}return(l||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(d,l){return t(l,"Accept"),t(l,"Content-Type"),e.isFormData(d)||e.isArrayBuffer(d)||e.isBuffer(d)||e.isStream(d)||e.isFile(d)||e.isBlob(d)?d:e.isArrayBufferView(d)?d.buffer:e.isURLSearchParams(d)?(n(l,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):e.isObject(d)||l&&l["Content-Type"]==="application/json"?(n(l,"application/json"),a(d)):d}],transformResponse:[function(d){var l=this.transitional||o.transitional,u=l&&l.silentJSONParsing,g=l&&l.forcedJSONParsing,m=!u&&this.responseType==="json";if(m||g&&e.isString(d)&&d.length)try{return JSON.parse(d)}catch(f){if(m)throw f.name==="SyntaxError"?i(f,this,"E_JSON_PARSE"):f}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(d){o.headers[d]={}}),e.forEach(["post","put","patch"],function(d){o.headers[d]=e.merge(r)}),Cv=o,Cv}var hB=rr,gB=tf(),mB=function(t,i,r){var n=this||gB;return hB.forEach(r,function(a){t=a.call(n,t,i)}),t},Rv,rT;function BI(){return rT||(rT=1,Rv=function(t){return!!(t&&t.__CANCEL__)}),Rv}var nT=rr,xv=mB,fB=BI(),vB=tf(),yB=ef();function Iv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yB("canceled")}var _B=function(t){Iv(t),t.headers=t.headers||{},t.data=xv.call(t,t.data,t.headers,t.transformRequest),t.headers=nT.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),nT.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var i=t.adapter||vB.adapter;return i(t).then(function(n){return Iv(t),n.data=xv.call(t,n.data,n.headers,t.transformResponse),n},function(n){return fB(n)||(Iv(t),n&&n.response&&(n.response.data=xv.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},cr=rr,HI=function(t,i){i=i||{};var r={};function n(l,u){return cr.isPlainObject(l)&&cr.isPlainObject(u)?cr.merge(l,u):cr.isPlainObject(u)?cr.merge({},u):cr.isArray(u)?u.slice():u}function s(l){if(cr.isUndefined(i[l])){if(!cr.isUndefined(t[l]))return n(void 0,t[l])}else return n(t[l],i[l])}function a(l){if(!cr.isUndefined(i[l]))return n(void 0,i[l])}function o(l){if(cr.isUndefined(i[l])){if(!cr.isUndefined(t[l]))return n(void 0,t[l])}else return n(void 0,i[l])}function c(l){if(l in i)return n(t[l],i[l]);if(l in t)return n(void 0,t[l])}var d={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return cr.forEach(Object.keys(t).concat(Object.keys(i)),function(u){var g=d[u]||s,m=g(u);cr.isUndefined(m)&&g!==c||(r[u]=m)}),r},Av,sT;function GI(){return sT||(sT=1,Av={version:"0.25.0"}),Av}var bB=GI().version,fb={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){fb[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var aT={};fb.transitional=function(t,i,r){function n(s,a){return"[Axios v"+bB+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return function(s,a,o){if(t===!1)throw new Error(n(a," has been removed"+(i?" in "+i:"")));return i&&!aT[a]&&(aT[a]=!0,console.warn(n(a," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(s,a,o):!0}};function wB(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),n=r.length;n-- >0;){var s=r[n],a=t[s];if(a){var o=e[s],c=o===void 0||a(o,s,e);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(i!==!0)throw Error("Unknown option "+s)}}var SB={assertOptions:wB,validators:fb},WI=rr,EB=VI,oT=rB,cT=_B,rf=HI,qI=SB,lc=qI.validators;function hp(e){this.defaults=e,this.interceptors={request:new oT,response:new oT}}hp.prototype.request=function(t,i){if(typeof t=="string"?(i=i||{},i.url=t):i=t||{},!i.url)throw new Error("Provided config url is not valid");i=rf(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&qI.assertOptions(r,{silentJSONParsing:lc.transitional(lc.boolean),forcedJSONParsing:lc.transitional(lc.boolean),clarifyTimeoutError:lc.transitional(lc.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(s=s&&m.synchronous,n.unshift(m.fulfilled,m.rejected))});var a=[];this.interceptors.response.forEach(function(m){a.push(m.fulfilled,m.rejected)});var o;if(!s){var c=[cT,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(a),o=Promise.resolve(i);c.length;)o=o.then(c.shift(),c.shift());return o}for(var d=i;n.length;){var l=n.shift(),u=n.shift();try{d=l(d)}catch(g){u(g);break}}try{o=cT(d)}catch(g){return Promise.reject(g)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};hp.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=rf(this.defaults,t),EB(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};WI.forEach(["delete","get","head","options"],function(t){hp.prototype[t]=function(i,r){return this.request(rf(r||{},{method:t,url:i,data:(r||{}).data}))}});WI.forEach(["post","put","patch"],function(t){hp.prototype[t]=function(i,r,n){return this.request(rf(n||{},{method:t,url:i,data:r}))}});var TB=hp,Ov,dT;function kB(){if(dT)return Ov;dT=1;var e=ef();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var n=this;this.promise.then(function(s){if(!!n._listeners){var a,o=n._listeners.length;for(a=0;a<o;a++)n._listeners[a](s);n._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){n.subscribe(c),a=c}).then(s);return o.cancel=function(){n.unsubscribe(a)},o},i(function(a){n.reason||(n.reason=new e(a),r(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}},t.source=function(){var r,n=new t(function(a){r=a});return{token:n,cancel:r}},Ov=t,Ov}var Mv,lT;function PB(){return lT||(lT=1,Mv=function(t){return function(r){return t.apply(null,r)}}),Mv}var Dv,uT;function CB(){if(uT)return Dv;uT=1;var e=rr;return Dv=function(i){return e.isObject(i)&&i.isAxiosError===!0},Dv}var pT=rr,RB=NI,Uh=TB,xB=HI,IB=tf();function JI(e){var t=new Uh(e),i=RB(Uh.prototype.request,t);return pT.extend(i,Uh.prototype,t),pT.extend(i,t),i.create=function(n){return JI(xB(e,n))},i}var qn=JI(IB);qn.Axios=Uh;qn.Cancel=ef();qn.CancelToken=kB();qn.isCancel=BI();qn.VERSION=GI().version;qn.all=function(t){return Promise.all(t)};qn.spread=PB();qn.isAxiosError=CB();hb.exports=qn;hb.exports.default=qn;(function(e){e.exports=hb.exports})(LI);const Qg=zP(LI.exports),AB={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},KI={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Ot={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ji={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ws={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class j{static getFirstMatch(t,i){const r=i.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,i){const r=i.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,i,r){if(t.test(i))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,i,r=!1){const n=j.getVersionPrecision(t),s=j.getVersionPrecision(i);let a=Math.max(n,s),o=0;const c=j.map([t,i],d=>{const l=a-j.getVersionPrecision(d),u=d+new Array(l+1).join(".0");return j.map(u.split("."),g=>new Array(20-g.length).join("0")+g).reverse()});for(r&&(o=a-Math.min(n,s)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(t,i){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(t,i);for(n=0;n<t.length;n+=1)r.push(i(t[n]));return r}static find(t,i){let r,n;if(Array.prototype.find)return Array.prototype.find.call(t,i);for(r=0,n=t.length;r<n;r+=1){const s=t[r];if(i(s,r))return s}}static assign(t,...i){const r=t;let n,s;if(Object.assign)return Object.assign(t,...i);for(n=0,s=i.length;n<s;n+=1){const a=i[n];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return t}static getBrowserAlias(t){return AB[t]}static getBrowserTypeByAlias(t){return KI[t]||""}}const tt=/version\/(\d+(\.?_?\d+)+)/i,OB=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},i=j.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},i=j.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},i=j.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},i=j.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},i=j.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},i=j.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},i=j.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},i=j.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=j.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},i=j.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},i=j.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},i=j.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},i=j.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},i=j.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},i=j.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},i=j.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},i=j.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},i=j.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},i=j.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},i=j.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},i=j.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},i=j.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},i=j.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},i=j.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},i=j.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},i=j.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},i=j.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t={name:"Android Browser"},i=j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},i=j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},i=j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,n=e.search("\\(")!==-1?i:t;return{name:j.getFirstMatch(n,e),version:j.getSecondMatch(n,e)}}}],MB=[{test:[/Roku\/DVP/],describe(e){const t=j.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:ji.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=j.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:ji.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=j.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=j.getWindowsVersionName(t);return{name:ji.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:ji.iOS},i=j.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return i&&(t.version=i),t}},{test:[/macintosh/i],describe(e){const t=j.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=j.getMacOSVersionName(t),r={name:ji.MacOS,version:t};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=j.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:ji.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t=j.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=j.getAndroidVersionName(t),r={name:ji.Android,version:t};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=j.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:ji.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=j.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||j.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||j.getFirstMatch(/\bbb(\d+)/i,e);return{name:ji.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=j.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:ji.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=j.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:ji.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:ji.Linux}}},{test:[/CrOS/],describe(){return{name:ji.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=j.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:ji.PlayStation4,version:t}}}],DB=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=j.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:Ot.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Ot.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Ot.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Ot.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Ot.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Ot.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Ot.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe(e){const t=j.getFirstMatch(/(ipod|iphone)/i,e);return{type:Ot.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Ot.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Ot.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:Ot.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:Ot.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:Ot.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:Ot.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:Ot.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:Ot.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:Ot.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:Ot.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:Ot.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:Ot.tv}}}],LB=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Ws.Blink};const i=j.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ws.EdgeHTML,version:i}}},{test:[/trident/i],describe(e){const t={name:Ws.Trident},i=j.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Ws.Presto},i=j.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe(e){const t={name:Ws.Gecko},i=j.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ws.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Ws.WebKit},i=j.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];class hT{constructor(t,i=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=j.find(OB,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=j.find(MB,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:i}=this.getOS();return t?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:i}=this.getPlatform();return t?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const t=j.find(DB,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=j.find(LB,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return j.assign({},this.parsedResult)}satisfies(t){const i={};let r=0;const n={};let s=0;if(Object.keys(t).forEach(o=>{const c=t[o];typeof c=="string"?(n[o]=c,s+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=j.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const d=j.find(o,l=>this.isPlatform(l));if(d){const l=this.satisfies(i[d]);if(l!==void 0)return l}}if(s>0){const o=Object.keys(n),c=j.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(n[c])}}isBrowser(t,i=!1){const r=this.getBrowserName().toLowerCase();let n=t.toLowerCase();const s=j.getBrowserTypeByAlias(n);return i&&s&&(n=s.toLowerCase()),n===r}compareVersion(t){let i=[0],r=t,n=!1;const s=this.getBrowserVersion();if(typeof s=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(n=!0,r=t.substr(2)):i=[],t[0]===">"?i.push(1):i.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(n=!0,r=t.substr(1)),i.indexOf(j.compareVersions(s,r,n))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,i=!1){return this.isBrowser(t,i)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class vb{static getParser(t,i=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new hT(t,i)}static parse(t){return new hT(t).getResult()}static get BROWSER_MAP(){return KI}static get ENGINE_MAP(){return Ws}static get OS_MAP(){return ji}static get PLATFORMS_MAP(){return Ot}}var YI={},yb={exports:{}},gT=yb.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(gT).forEach(function(e){var t=gT[e];t.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});(function(e){var t=function(o){return String(Number(o))===o?Number(o):o},i=function(o,c,d,l){if(l&&!d)c[l]=t(o[1]);else for(var u=0;u<d.length;u+=1)o[u+1]!=null&&(c[d[u]]=t(o[u+1]))},r=function(o,c,d){var l=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:l&&!c[o.name]&&(c[o.name]={});var u=o.push?{}:l?c[o.name]:c;i(d.match(o.reg),u,o.names,o.name),o.push&&c[o.push].push(u)},n=yb.exports,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var c={},d=[],l=c;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(u){var g=u[0],m=u.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),l=d[d.length-1]);for(var f=0;f<(n[g]||[]).length;f+=1){var w=n[g][f];if(w.reg.test(m))return r(w,l,m)}}),c.media=d,c};var a=function(o,c){var d=c.split(/=(.+)/,2);return d.length===2?o[d[0]]=t(d[1]):d.length===1&&c.length>1&&(o[d[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var c=[],d=o.split(" ").map(t),l=0;l<d.length;l+=3)c.push({component:d[l],ip:d[l+1],port:d[l+2]});return c},e.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(d){var l,u=!1;return d[0]!=="~"?l=t(d):(l=t(d.substring(1,d.length)),u=!0),{scid:l,paused:u}})})}})(YI);var Lv=yb.exports,NB=/%[sdv%]/g,UB=function(e){var t=1,i=arguments,r=i.length;return e.replace(NB,function(n){if(t>=r)return n;var s=i[t];switch(t+=1,n){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},hl=function(e,t,i){var r=t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format,n=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var a=t.names[s];t.name?n.push(i[t.name][a]):n.push(i[t.names[s]])}else n.push(i[t.name]);return UB.apply(null,n)},jB=["v","o","s","i","u","e","p","c","b","t","r","z","a"],$B=["i","c","b","a"],VB=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var i=t.outerOrder||jB,r=t.innerOrder||$B,n=[];return i.forEach(function(s){Lv[s].forEach(function(a){a.name in e&&e[a.name]!=null?n.push(hl(s,a,e)):a.push in e&&e[a.push]!=null&&e[a.push].forEach(function(o){n.push(hl(s,a,o))})})}),e.media.forEach(function(s){n.push(hl("m",Lv.m[0],s)),r.forEach(function(a){Lv[a].forEach(function(o){o.name in s&&s[o.name]!=null?n.push(hl(a,o,s)):o.push in s&&s[o.push]!=null&&s[o.push].forEach(function(c){n.push(hl(a,o,c))})})})}),n.join(`\r
`)+`\r
`},Xo=YI,FB=VB,hn=FB,be=Xo.parse,QI=Xo.parseParams;Xo.parseFmtpConfig;Xo.parsePayloads;Xo.parseRemoteCandidates;Xo.parseImageAttributes;var ZI=Xo.parseSimulcastStreamList,zB=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Co="1.4.1",mT=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function BB(e){var t=new Set([e]),i=new Set,r=e.match(mT);if(!r)return function(){return!1};var n={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(n.prerelease!=null)return function(c){return c===e};function s(o){return i.add(o),!1}function a(o){return t.add(o),!0}return function(c){if(t.has(c))return!0;if(i.has(c))return!1;var d=c.match(mT);if(!d)return s(c);var l={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return l.prerelease!=null||n.major!==l.major?s(c):n.major===0?n.minor===l.minor&&n.patch<=l.patch?a(c):s(c):n.minor<=l.minor?a(c):s(c)}}var HB=BB(Co),GB=Co.split(".")[0],Hu=Symbol.for("opentelemetry.js.api."+GB),Gu=zB;function gp(e,t,i,r){var n;r===void 0&&(r=!1);var s=Gu[Hu]=(n=Gu[Hu])!==null&&n!==void 0?n:{version:Co};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return i.error(a.stack||a.message),!1}if(s.version!==Co){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+Co);return i.error(a.stack||a.message),!1}return s[e]=t,i.debug("@opentelemetry/api: Registered a global for "+e+" v"+Co+"."),!0}function Ho(e){var t,i,r=(t=Gu[Hu])===null||t===void 0?void 0:t.version;if(!(!r||!HB(r)))return(i=Gu[Hu])===null||i===void 0?void 0:i[e]}function mp(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Co+".");var i=Gu[Hu];i&&delete i[e]}var WB=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},qB=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},JB=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("verbose",this._namespace,t)},e}();function gl(e,t,i){var r=Ho("diag");if(!!r)return i.unshift(t),r[e].apply(r,qB([],WB(i),!1))}var Ke;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ke||(Ke={}));function KB(e,t){e<Ke.NONE?e=Ke.NONE:e>Ke.ALL&&(e=Ke.ALL),t=t||{};function i(r,n){var s=t[r];return typeof s=="function"&&e>=n?s.bind(t):function(){}}return{error:i("error",Ke.ERROR),warn:i("warn",Ke.WARN),info:i("info",Ke.INFO),debug:i("debug",Ke.DEBUG),verbose:i("verbose",Ke.VERBOSE)}}var YB=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},QB=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},ZB="diag",Hn=function(){function e(){function t(n){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=Ho("diag");if(!!o)return o[n].apply(o,QB([],YB(s),!1))}}var i=this,r=function(n,s){var a,o,c;if(s===void 0&&(s={logLevel:Ke.INFO}),n===i){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof s=="number"&&(s={logLevel:s});var l=Ho("diag"),u=KB((o=s.logLevel)!==null&&o!==void 0?o:Ke.INFO,n);if(l&&!s.suppressOverrideMessage){var g=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+g),u.warn("Current logger will overwrite one already registered from "+g)}return gp("diag",u,i,!0)};i.setLogger=r,i.disable=function(){mp(ZB,i)},i.createComponentLogger=function(n){return new JB(n)},i.verbose=t("verbose"),i.debug=t("debug"),i.info=t("info"),i.warn=t("warn"),i.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),XB=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},eH=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tH=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var i=this._entries.get(t);if(!!i)return Object.assign({},i)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var i=XB(t,2),r=i[0],n=i[1];return[r,n]})},e.prototype.setEntry=function(t,i){var r=new e(this._entries);return r._entries.set(t,i),r},e.prototype.removeEntry=function(t){var i=new e(this._entries);return i._entries.delete(t),i},e.prototype.removeEntries=function(){for(var t,i,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=new e(this._entries);try{for(var a=eH(r),o=a.next();!o.done;o=a.next()){var c=o.value;s._entries.delete(c)}}catch(d){t={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),iH=Symbol("BaggageEntryMetadata"),rH=Hn.instance();function nH(e){return e===void 0&&(e={}),new tH(new Map(Object.entries(e)))}function XI(e){return typeof e!="string"&&(rH.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:iH,toString:function(){return e}}}function _b(e){return Symbol.for(e)}var sH=function(){function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(r){return i._currentContext.get(r)},i.setValue=function(r,n){var s=new e(i._currentContext);return s._currentContext.set(r,n),s},i.deleteValue=function(r){var n=new e(i._currentContext);return n._currentContext.delete(r),n}}return e}(),Ir=new sH,Gd=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),aH=function(){function e(){}return e.prototype.createHistogram=function(t,i){return mH},e.prototype.createCounter=function(t,i){return gH},e.prototype.createUpDownCounter=function(t,i){return fH},e.prototype.createObservableGauge=function(t,i){return yH},e.prototype.createObservableCounter=function(t,i){return vH},e.prototype.createObservableUpDownCounter=function(t,i){return _H},e.prototype.addBatchObservableCallback=function(t,i){},e.prototype.removeBatchObservableCallback=function(t){},e}(),bb=function(){function e(){}return e}(),oH=function(e){Gd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(i,r){},t}(bb),cH=function(e){Gd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(i,r){},t}(bb),dH=function(e){Gd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(i,r){},t}(bb),wb=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),lH=function(e){Gd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wb),uH=function(e){Gd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wb),pH=function(e){Gd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wb),hH=new aH,gH=new oH,mH=new dH,fH=new cH,vH=new lH,yH=new uH,_H=new pH,bH={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},wH={set:function(e,t,i){e!=null&&(e[t]=i)}},SH=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},EH=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},TH=function(){function e(){}return e.prototype.active=function(){return Ir},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return i.call.apply(i,EH([r],SH(n),!1))},e.prototype.bind=function(t,i){return i},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),kH=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},PH=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},Nv="context",CH=new TH,nf=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return gp(Nv,t,Hn.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,i,r){for(var n,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(n=this._getContextManager()).with.apply(n,PH([t,i,r],kH(s),!1))},e.prototype.bind=function(t,i){return this._getContextManager().bind(t,i)},e.prototype._getContextManager=function(){return Ho(Nv)||CH},e.prototype.disable=function(){this._getContextManager().disable(),mp(Nv,Hn.instance())},e}(),Cs;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Cs||(Cs={}));var eA="0000000000000000",tA="00000000000000000000000000000000",iA={traceId:tA,spanId:eA,traceFlags:Cs.NONE},mu=function(){function e(t){t===void 0&&(t=iA),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,i){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,i){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,i){},e}(),Sb=_b("OpenTelemetry Context Key SPAN");function Eb(e){return e.getValue(Sb)||void 0}function RH(){return Eb(nf.getInstance().active())}function Tb(e,t){return e.setValue(Sb,t)}function xH(e){return e.deleteValue(Sb)}function IH(e,t){return Tb(e,new mu(t))}function rA(e){var t;return(t=Eb(e))===null||t===void 0?void 0:t.spanContext()}var AH=/^([0-9a-f]{32})$/i,OH=/^[0-9a-f]{16}$/i;function nA(e){return AH.test(e)&&e!==tA}function MH(e){return OH.test(e)&&e!==eA}function sf(e){return nA(e.traceId)&&MH(e.spanId)}function DH(e){return new mu(e)}var Uv=nf.getInstance(),sA=function(){function e(){}return e.prototype.startSpan=function(t,i,r){r===void 0&&(r=Uv.active());var n=Boolean(i==null?void 0:i.root);if(n)return new mu;var s=r&&rA(r);return LH(s)&&sf(s)?new mu(s):new mu},e.prototype.startActiveSpan=function(t,i,r,n){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(s=i,o=r):(s=i,a=r,o=n);var c=a!=null?a:Uv.active(),d=this.startSpan(t,s,c),l=Tb(c,d);return Uv.with(l,o,void 0,d)}},e}();function LH(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var NH=new sA,UH=function(){function e(t,i,r,n){this._provider=t,this.name=i,this.version=r,this.options=n}return e.prototype.startSpan=function(t,i,r){return this._getTracer().startSpan(t,i,r)},e.prototype.startActiveSpan=function(t,i,r,n){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):NH},e}(),jH=function(){function e(){}return e.prototype.getTracer=function(t,i,r){return new sA},e}(),$H=new jH,fT=function(){function e(){}return e.prototype.getTracer=function(t,i,r){var n;return(n=this.getDelegateTracer(t,i,r))!==null&&n!==void 0?n:new UH(this,t,i,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:$H},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,i,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,i,r)},e}(),Zg;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Zg||(Zg={}));var G0;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(G0||(G0={}));var W0;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(W0||(W0={}));var Mo=nf.getInstance(),ke=Hn.instance(),VH=function(){function e(){}return e.prototype.getMeter=function(t,i,r){return hH},e}(),FH=new VH,jv="metrics",zH=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return gp(jv,t,Hn.instance())},e.prototype.getMeterProvider=function(){return Ho(jv)||FH},e.prototype.getMeter=function(t,i,r){return this.getMeterProvider().getMeter(t,i,r)},e.prototype.disable=function(){mp(jv,Hn.instance())},e}(),BH=zH.getInstance(),HH=function(){function e(){}return e.prototype.inject=function(t,i){},e.prototype.extract=function(t,i){return t},e.prototype.fields=function(){return[]},e}(),kb=_b("OpenTelemetry Baggage Key");function aA(e){return e.getValue(kb)||void 0}function GH(){return aA(nf.getInstance().active())}function WH(e,t){return e.setValue(kb,t)}function qH(e){return e.deleteValue(kb)}var $v="propagation",JH=new HH,KH=function(){function e(){this.createBaggage=nH,this.getBaggage=aA,this.getActiveBaggage=GH,this.setBaggage=WH,this.deleteBaggage=qH}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return gp($v,t,Hn.instance())},e.prototype.inject=function(t,i,r){return r===void 0&&(r=wH),this._getGlobalPropagator().inject(t,i,r)},e.prototype.extract=function(t,i,r){return r===void 0&&(r=bH),this._getGlobalPropagator().extract(t,i,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){mp($v,Hn.instance())},e.prototype._getGlobalPropagator=function(){return Ho($v)||JH},e}(),ld=KH.getInstance(),Vv="trace",YH=function(){function e(){this._proxyTracerProvider=new fT,this.wrapSpanContext=DH,this.isSpanContextValid=sf,this.deleteSpan=xH,this.getSpan=Eb,this.getActiveSpan=RH,this.getSpanContext=rA,this.setSpan=Tb,this.setSpanContext=IH}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var i=gp(Vv,this._proxyTracerProvider,Hn.instance());return i&&this._proxyTracerProvider.setDelegate(t),i},e.prototype.getTracerProvider=function(){return Ho(Vv)||this._proxyTracerProvider},e.prototype.getTracer=function(t,i){return this.getTracerProvider().getTracer(t,i)},e.prototype.disable=function(){mp(Vv,Hn.instance()),this._proxyTracerProvider=new fT},e}(),on=YH.getInstance();const Yp={context:Mo,diag:ke,metrics:BH,propagation:ld,trace:on};var oA=_b("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function QH(e){return e.setValue(oA,!0)}function Pb(e){return e.getValue(oA)===!0}var ZH="=",q0=";",J0=",",Fv="baggage",XH=180,eG=4096,tG=8192,iG=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function rG(e){return e.reduce(function(t,i){var r=""+t+(t!==""?J0:"")+i;return r.length>tG?t:r},"")}function nG(e){return e.getAllEntries().map(function(t){var i=iG(t,2),r=i[0],n=i[1],s=encodeURIComponent(r)+"="+encodeURIComponent(n.value);return n.metadata!==void 0&&(s+=q0+n.metadata.toString()),s})}function sG(e){var t=e.split(q0);if(!(t.length<=0)){var i=t.shift();if(!!i){var r=i.split(ZH);if(r.length===2){var n=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim()),a;return t.length>0&&(a=XI(t.join(q0))),{key:n,value:s,metadata:a}}}}}var aG=function(){function e(){}return e.prototype.inject=function(t,i,r){var n=ld.getBaggage(t);if(!(!n||Pb(t))){var s=nG(n).filter(function(o){return o.length<=eG}).slice(0,XH),a=rG(s);a.length>0&&r.set(i,Fv,a)}},e.prototype.extract=function(t,i,r){var n=r.get(i,Fv),s=Array.isArray(n)?n.join(J0):n;if(!s)return t;var a={};if(s.length===0)return t;var o=s.split(J0);return o.forEach(function(c){var d=sG(c);if(d){var l={value:d.value};d.metadata&&(l.metadata=d.metadata),a[d.key]=l}}),Object.entries(a).length===0?t:ld.setBaggage(t,ld.createBaggage(a))},e.prototype.fields=function(){return[Fv]},e}(),cA=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oG=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function jh(e){var t,i,r={};if(typeof e!="object"||e==null)return r;try{for(var n=cA(Object.entries(e)),s=n.next();!s.done;s=n.next()){var a=oG(s.value,2),o=a[0],c=a[1];if(!cG(o)){ke.warn("Invalid attribute key: "+o);continue}if(!dA(c)){ke.warn("Invalid attribute value set for key: "+o);continue}Array.isArray(c)?r[o]=c.slice():r[o]=c}}catch(d){t={error:d}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function cG(e){return typeof e=="string"&&e.length>0}function dA(e){return e==null?!0:Array.isArray(e)?dG(e):lA(e)}function dG(e){var t,i,r;try{for(var n=cA(e),s=n.next();!s.done;s=n.next()){var a=s.value;if(a!=null){if(!r){if(lA(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!0}function lA(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function lG(){return function(e){ke.error(uG(e))}}function uG(e){return typeof e=="string"?e:JSON.stringify(pG(e))}function pG(e){for(var t={},i=e;i!==null;)Object.getOwnPropertyNames(i).forEach(function(r){if(!t[r]){var n=i[r];n&&(t[r]=String(n))}}),i=Object.getPrototypeOf(i);return t}var hG=lG();function Xg(e){try{hG(e)}catch{}}var Mn;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(Mn||(Mn={}));var uA=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},gG=",",mG=["OTEL_SDK_DISABLED"];function fG(e){return mG.indexOf(e)>-1}var vG=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function yG(e){return vG.indexOf(e)>-1}var _G=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function bG(e){return _G.indexOf(e)>-1}var K0=1/0,Y0=128,wG=128,SG=128,pA={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ke.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:K0,OTEL_ATTRIBUTE_COUNT_LIMIT:Y0,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:K0,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Y0,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:wG,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:SG,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Mn.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function EG(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]=r.toLowerCase()==="true"}}function TG(e,t,i,r,n){if(r===void 0&&(r=-1/0),n===void 0&&(n=1/0),typeof i[e]<"u"){var s=Number(i[e]);isNaN(s)||(s<r?t[e]=r:s>n?t[e]=n:t[e]=s)}}function kG(e,t,i,r){r===void 0&&(r=gG);var n=i[e];typeof n=="string"&&(t[e]=n.split(r).map(function(s){return s.trim()}))}var PG={ALL:Ke.ALL,VERBOSE:Ke.VERBOSE,DEBUG:Ke.DEBUG,INFO:Ke.INFO,WARN:Ke.WARN,ERROR:Ke.ERROR,NONE:Ke.NONE};function CG(e,t,i){var r=i[e];if(typeof r=="string"){var n=PG[r.toUpperCase()];n!=null&&(t[e]=n)}}function Q0(e){var t={};for(var i in pA){var r=i;switch(r){case"OTEL_LOG_LEVEL":CG(r,t,e);break;default:if(fG(r))EG(r,t,e);else if(yG(r))TG(r,t,e);else if(bG(r))kG(r,t,e);else{var n=e[r];typeof n<"u"&&n!==null&&(t[r]=String(n))}}}return t}function RG(){return typeof process<"u"&&process&&process.env?Q0(process.env):Q0(uA)}function fr(){var e=Q0(uA);return Object.assign({},pA,e)}var ud=performance,xG="1.10.0",Ga={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},Xr={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},IG={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},uc,zv=(uc={},uc[Xr.TELEMETRY_SDK_NAME]="opentelemetry",uc[Xr.PROCESS_RUNTIME_NAME]="browser",uc[Xr.TELEMETRY_SDK_LANGUAGE]=IG.WEBJS,uc[Xr.TELEMETRY_SDK_VERSION]=xG,uc),AG=9,OG=6,MG=Math.pow(10,OG),Z0=Math.pow(10,AG);function ed(e){var t=e/1e3,i=Math.trunc(t),r=Math.round(e%1e3*MG);return[i,r]}function hA(){var e=ud.timeOrigin;if(typeof e!="number"){var t=ud;e=t.timing&&t.timing.fetchStart}return e}function DG(e){var t=ed(hA()),i=ed(typeof e=="number"?e:ud.now());return mA(t,i)}function LG(e,t){var i=t[0]-e[0],r=t[1]-e[1];return r<0&&(i-=1,r+=Z0),[i,r]}function gA(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function vT(e){return gA(e)||typeof e=="number"||e instanceof Date}function mA(e,t){var i=[e[0]+t[0],e[1]+t[1]];return i[1]>=Z0&&(i[1]-=Z0,i[0]+=1),i}var X0;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(X0||(X0={}));var NG=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UG=function(){function e(t){t===void 0&&(t={});var i;this._propagators=(i=t.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,n){return r.concat(n)},[])))}return e.prototype.inject=function(t,i,r){var n,s;try{for(var a=NG(this._propagators),o=a.next();!o.done;o=a.next()){var c=o.value;try{c.inject(t,i,r)}catch(d){ke.warn("Failed to inject with "+c.constructor.name+". Err: "+d.message)}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}},e.prototype.extract=function(t,i,r){return this._propagators.reduce(function(n,s){try{return s.extract(n,i,r)}catch(a){ke.warn("Failed to inject with "+s.constructor.name+". Err: "+a.message)}return n},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),e1="[_0-9a-z-*/]",jG="[a-z]"+e1+"{0,255}",$G="[a-z0-9]"+e1+"{0,240}@[a-z]"+e1+"{0,13}",VG=new RegExp("^(?:"+jG+"|"+$G+")$"),FG=/^[ -~]{0,255}[!-~]$/,zG=/,|=/;function BG(e){return VG.test(e)}function HG(e){return FG.test(e)&&!zG.test(e)}var yT=32,GG=512,_T=",",bT="=",WG=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,i){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,i),r},e.prototype.unset=function(t){var i=this._clone();return i._internalState.delete(t),i},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(i,r){return i.push(r+bT+t.get(r)),i},[]).join(_T)},e.prototype._parse=function(t){t.length>GG||(this._internalState=t.split(_T).reverse().reduce(function(i,r){var n=r.trim(),s=n.indexOf(bT);if(s!==-1){var a=n.slice(0,s),o=n.slice(s+1,r.length);BG(a)&&HG(o)&&i.set(a,o)}return i},new Map),this._internalState.size>yT&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,yT))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Bv="traceparent",Hv="tracestate",qG="00",JG="(?!ff)[\\da-f]{2}",KG="(?![0]{32})[\\da-f]{32}",YG="(?![0]{16})[\\da-f]{16}",QG="[\\da-f]{2}",ZG=new RegExp("^\\s?("+JG+")-("+KG+")-("+YG+")-("+QG+")(-.*)?\\s?$");function XG(e){var t=ZG.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var eW=function(){function e(){}return e.prototype.inject=function(t,i,r){var n=on.getSpanContext(t);if(!(!n||Pb(t)||!sf(n))){var s=qG+"-"+n.traceId+"-"+n.spanId+"-0"+Number(n.traceFlags||Cs.NONE).toString(16);r.set(i,Bv,s),n.traceState&&r.set(i,Hv,n.traceState.serialize())}},e.prototype.extract=function(t,i,r){var n=r.get(i,Bv);if(!n)return t;var s=Array.isArray(n)?n[0]:n;if(typeof s!="string")return t;var a=XG(s);if(!a)return t;a.isRemote=!0;var o=r.get(i,Hv);if(o){var c=Array.isArray(o)?o.join(","):o;a.traceState=new WG(typeof c=="string"?c:void 0)}return on.setSpanContext(t,a)},e.prototype.fields=function(){return[Bv,Hv]},e}(),tW="[object Object]",iW="[object Null]",rW="[object Undefined]",nW=Function.prototype,fA=nW.toString,sW=fA.call(Object),aW=oW(Object.getPrototypeOf,Object),vA=Object.prototype,yA=vA.hasOwnProperty,wo=Symbol?Symbol.toStringTag:void 0,_A=vA.toString;function oW(e,t){return function(i){return e(t(i))}}function wT(e){if(!cW(e)||dW(e)!==tW)return!1;var t=aW(e);if(t===null)return!0;var i=yA.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&fA.call(i)===sW}function cW(e){return e!=null&&typeof e=="object"}function dW(e){return e==null?e===void 0?rW:iW:wo&&wo in Object(e)?lW(e):uW(e)}function lW(e){var t=yA.call(e,wo),i=e[wo],r=!1;try{e[wo]=void 0,r=!0}catch{}var n=_A.call(e);return r&&(t?e[wo]=i:delete e[wo]),n}function uW(e){return _A.call(e)}var pW=20;function hW(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=e.shift(),r=new WeakMap;e.length>0;)i=bA(i,e.shift(),0,r);return i}function Gv(e){return em(e)?e.slice():e}function bA(e,t,i,r){i===void 0&&(i=0);var n;if(!(i>pW)){if(i++,$h(e)||$h(t)||wA(t))n=Gv(t);else if(em(e)){if(n=e.slice(),em(t))for(var s=0,a=t.length;s<a;s++)n.push(Gv(t[s]));else if(ml(t))for(var o=Object.keys(t),s=0,a=o.length;s<a;s++){var c=o[s];n[c]=Gv(t[c])}}else if(ml(e))if(ml(t)){if(!gW(e,t))return t;n=Object.assign({},e);for(var o=Object.keys(t),s=0,a=o.length;s<a;s++){var c=o[s],d=t[c];if($h(d))typeof d>"u"?delete n[c]:n[c]=d;else{var l=n[c],u=d;if(ST(e,c,r)||ST(t,c,r))delete n[c];else{if(ml(l)&&ml(u)){var g=r.get(l)||[],m=r.get(u)||[];g.push({obj:e,key:c}),m.push({obj:t,key:c}),r.set(l,g),r.set(u,m)}n[c]=bA(n[c],d,i,r)}}}}else n=t;return n}}function ST(e,t,i){for(var r=i.get(e[t])||[],n=0,s=r.length;n<s;n++){var a=r[n];if(a.key===t&&a.obj===e)return!0}return!1}function em(e){return Array.isArray(e)}function wA(e){return typeof e=="function"}function ml(e){return!$h(e)&&!em(e)&&!wA(e)&&typeof e=="object"}function $h(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function gW(e,t){return!(!wT(e)||!wT(t))}var mW=function(){function e(){var t=this;this._promise=new Promise(function(i,r){t._resolve=i,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),fW=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},vW=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},yW=function(){function e(t,i){this._callback=t,this._that=i,this._isCalled=!1,this._deferred=new mW}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,vW([this._that],fW(r),!1))).then(function(s){return i._deferred.resolve(s)},function(s){return i._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},e}(),_W="exception",bW=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wW=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},SW=function(){function e(t,i,r,n,s,a,o,c,d){o===void 0&&(o=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:W0.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=n,this.parentSpanId=a,this.kind=s,this.links=o;var l=Date.now();this._performanceStartTime=ud.now(),this._performanceOffset=l-(this._performanceStartTime+hA()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c!=null?c:l),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,i),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,i){return i==null||this._isSpanEnded()?this:t.length===0?(ke.warn("Invalid attribute key: "+t),this):dA(i)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(i),this):(ke.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var i,r;try{for(var n=bW(Object.entries(t)),s=n.next();!s.done;s=n.next()){var a=wW(s.value,2),o=a[0],c=a[1];this.setAttribute(o,c)}}catch(d){i={error:d}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return this},e.prototype.addEvent=function(t,i,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return ke.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(ke.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),vT(i)&&(vT(r)||(r=i),i=void 0);var n=jh(i);return this.events.push({name:t,attributes:n,time:this._getTime(r),droppedAttributesCount:0}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){ke.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=LG(this.startTime,this.endTime),this._duration[0]<0&&(ke.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(t){if(typeof t=="number"&&t<ud.now())return DG(t+this._performanceOffset);if(typeof t=="number")return ed(t);if(t instanceof Date)return ed(t.getTime());if(gA(t))return t;if(this._startTimeProvided)return ed(Date.now());var i=ud.now()-this._performanceStartTime;return mA(this.startTime,ed(i))},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,i){var r={};typeof t=="string"?r[Ga.EXCEPTION_MESSAGE]=t:t&&(t.code?r[Ga.EXCEPTION_TYPE]=t.code.toString():t.name&&(r[Ga.EXCEPTION_TYPE]=t.name),t.message&&(r[Ga.EXCEPTION_MESSAGE]=t.message),t.stack&&(r[Ga.EXCEPTION_STACKTRACE]=t.stack)),r[Ga.EXCEPTION_TYPE]||r[Ga.EXCEPTION_MESSAGE]?this.addEvent(_W,r,i):ke.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&ke.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,i){return t.length<=i?t:t.substr(0,i)},e.prototype._truncateToSize=function(t){var i=this,r=this._attributeValueLengthLimit;return r<=0?(ke.warn("Attribute value limit must be positive, got "+r),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(function(n){return typeof n=="string"?i._truncateToLimitUtil(n,r):n}):t},e}(),Id;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Id||(Id={}));var tm=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Id.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),pd=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Id.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Wv=function(){function e(t){var i,r,n,s;this._root=t.root,this._root||(Xg(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new pd),this._remoteParentSampled=(i=t.remoteParentSampled)!==null&&i!==void 0?i:new pd,this._remoteParentNotSampled=(r=t.remoteParentNotSampled)!==null&&r!==void 0?r:new tm,this._localParentSampled=(n=t.localParentSampled)!==null&&n!==void 0?n:new pd,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new tm}return e.prototype.shouldSample=function(t,i,r,n,s,a){var o=on.getSpanContext(t);return!o||!sf(o)?this._root.shouldSample(t,i,r,n,s,a):o.isRemote?o.traceFlags&Cs.SAMPLED?this._remoteParentSampled.shouldSample(t,i,r,n,s,a):this._remoteParentNotSampled.shouldSample(t,i,r,n,s,a):o.traceFlags&Cs.SAMPLED?this._localParentSampled.shouldSample(t,i,r,n,s,a):this._localParentNotSampled.shouldSample(t,i,r,n,s,a)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),ET=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,i){return{decision:nA(i)&&this._accumulate(i)<this._upperBound?Id.RECORD_AND_SAMPLED:Id.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var i=0,r=0;r<t.length/8;r++){var n=r*8,s=parseInt(t.slice(n,n+8),16);i=(i^s)>>>0}return i},e}(),EW=fr(),TW=Mn.AlwaysOn,pc=1;function SA(){return{sampler:EA(EW),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:fr().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:fr().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:fr().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:fr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:fr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:fr().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:fr().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:fr().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function EA(e){switch(e===void 0&&(e=fr()),e.OTEL_TRACES_SAMPLER){case Mn.AlwaysOn:return new pd;case Mn.AlwaysOff:return new tm;case Mn.ParentBasedAlwaysOn:return new Wv({root:new pd});case Mn.ParentBasedAlwaysOff:return new Wv({root:new tm});case Mn.TraceIdRatio:return new ET(TT(e));case Mn.ParentBasedTraceIdRatio:return new Wv({root:new ET(TT(e))});default:return ke.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+TW+'".'),new pd}}function TT(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return ke.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+pc+"."),pc;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(ke.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+pc+"."),pc):t<0||t>1?(ke.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+pc+"."),pc):t}function kW(e){var t={sampler:EA()},i=SA(),r=Object.assign({},i,t,e);return r.generalLimits=Object.assign({},i.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},i.spanLimits,e.spanLimits||{}),r}function PW(e){var t,i,r,n,s,a,o,c,d,l,u,g,m=Object.assign({},e.spanLimits),f=RG();return m.attributeCountLimit=(a=(s=(n=(i=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&i!==void 0?i:(r=e.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&n!==void 0?n:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:f.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:Y0,m.attributeValueLengthLimit=(g=(u=(l=(c=(o=e.spanLimits)===null||o===void 0?void 0:o.attributeValueLengthLimit)!==null&&c!==void 0?c:(d=e.generalLimits)===null||d===void 0?void 0:d.attributeValueLengthLimit)!==null&&l!==void 0?l:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&u!==void 0?u:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&g!==void 0?g:K0,Object.assign({},e,{spanLimits:m})}var CW=function(){function e(t,i){this._exporter=t,this._finishedSpans=[],this._droppedSpansCount=0;var r=fr();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new yW(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ke.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,i){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&Cs.SAMPLED)!==0&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&ke.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(ke.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},e.prototype._flushAll=function(){var t=this;return new Promise(function(i,r){for(var n=[],s=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),a=0,o=s;a<o;a++)n.push(t._flushOneBatch());Promise.all(n).then(function(){i()}).catch(r)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(i,r){var n=setTimeout(function(){r(new Error("Timeout"))},t._exportTimeoutMillis);Mo.with(QH(Mo.active()),function(){var s=t._finishedSpans.splice(0,t._maxExportBatchSize),a=function(){return t._exporter.export(s,function(c){var d;clearTimeout(n),c.code===X0.SUCCESS?i():r((d=c.error)!==null&&d!==void 0?d:new Error("BatchSpanProcessor: span export failed"))})},o=s.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});o.length===0?a():Promise.all(o.map(function(c){var d;return(d=c.waitForAsyncAttributes)===null||d===void 0?void 0:d.call(c)})).then(a,function(c){Xg(c),r(c)})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(i){Xg(i)})},this._scheduledDelayMillis),this._timer,void 0)},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),RW=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),TA=function(e){RW(t,e);function t(i,r){var n=e.call(this,i,r)||this;return n.onInit(r),n}return t.prototype.onInit=function(i){var r=this;(i==null?void 0:i.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&r.forceFlush()},this._pageHideListener=function(){r.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(CW),xW=8,IW=16,AW=function(){function e(){this.generateTraceId=kT(IW),this.generateSpanId=kT(xW)}return e}(),Qp=Array(32);function kT(e){return function(){for(var i=0;i<e*2;i++)Qp[i]=Math.floor(Math.random()*16)+48,Qp[i]>=58&&(Qp[i]+=39);return String.fromCharCode.apply(null,Qp.slice(0,e*2))}}var OW=function(){function e(t,i,r){this._tracerProvider=r;var n=kW(i);this._sampler=n.sampler,this._generalLimits=n.generalLimits,this._spanLimits=n.spanLimits,this._idGenerator=i.idGenerator||new AW,this.resource=r.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,i,r){var n,s,a;i===void 0&&(i={}),r===void 0&&(r=Mo.active()),i.root&&(r=on.deleteSpan(r));var o=on.getSpan(r);if(Pb(r)){ke.debug("Instrumentation suppressed, returning Noop Span");var c=on.wrapSpanContext(iA);return c}var d=o==null?void 0:o.spanContext(),l=this._idGenerator.generateSpanId(),u,g,m;!d||!on.isSpanContextValid(d)?u=this._idGenerator.generateTraceId():(u=d.traceId,g=d.traceState,m=d.spanId);var f=(n=i.kind)!==null&&n!==void 0?n:G0.INTERNAL,w=((s=i.links)!==null&&s!==void 0?s:[]).map(function(O){return{context:O.context,attributes:jh(O.attributes)}}),S=jh(i.attributes),y=this._sampler.shouldSample(r,u,t,f,S,w);g=(a=y.traceState)!==null&&a!==void 0?a:g;var _=y.decision===Zg.RECORD_AND_SAMPLED?Cs.SAMPLED:Cs.NONE,T={traceId:u,spanId:l,traceFlags:_,traceState:g};if(y.decision===Zg.NOT_RECORD){ke.debug("Recording is off, propagating context in a non-recording span");var c=on.wrapSpanContext(T);return c}var C=new SW(this,r,t,T,f,m,w,i.startTime),D=jh(Object.assign(S,y.attributes));return C.setAttributes(D),C},e.prototype.startActiveSpan=function(t,i,r,n){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(s=i,o=r):(s=i,a=r,o=n);var c=a!=null?a:Mo.active(),d=this.startSpan(t,s,c),l=on.setSpan(c,d);return Mo.with(l,o,void 0,d)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();function MW(){return"unknown_service"}var ra=globalThis&&globalThis.__assign||function(){return ra=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ra.apply(this,arguments)},DW=globalThis&&globalThis.__awaiter||function(e,t,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{d(r.next(l))}catch(u){a(u)}}function c(l){try{d(r.throw(l))}catch(u){a(u)}}function d(l){l.done?s(l.value):n(l.value).then(o,c)}d((r=r.apply(e,t||[])).next())})},LW=globalThis&&globalThis.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],n=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},NW=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},PT=function(){function e(t,i){var r=this;this._attributes=t,this.asyncAttributesPending=i!=null,this._syncAttributes=t,this._asyncAttributesPromise=i==null?void 0:i.then(function(n){return r._attributes=Object.assign({},r._attributes,n),r.asyncAttributesPending=!1,n},function(n){return ke.debug("a resource's async attributes promise rejected: %s",n),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[Xr.SERVICE_NAME]=MW(),t[Xr.TELEMETRY_SDK_LANGUAGE]=zv[Xr.TELEMETRY_SDK_LANGUAGE],t[Xr.TELEMETRY_SDK_NAME]=zv[Xr.TELEMETRY_SDK_NAME],t[Xr.TELEMETRY_SDK_VERSION]=zv[Xr.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){return this.asyncAttributesPending&&ke.error("Accessing resource attributes before async attributes settled"),this._attributes},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return DW(this,void 0,void 0,function(){return LW(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var i=this,r;if(!t)return this;var n=ra(ra({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(a){var o,c=NW(a,2),d=c[0],l=c[1];return ra(ra(ra(ra({},i._syncAttributes),d),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes),l)});return new e(n,s)},e.EMPTY=new e({}),e}(),Zp=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UW=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,i,r=[];try{for(var n=Zp(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;r.push(a.forceFlush())}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return new Promise(function(o){Promise.all(r).then(function(){o()}).catch(function(c){Xg(c||new Error("MultiSpanProcessor: forceFlush failed")),o()})})},e.prototype.onStart=function(t,i){var r,n;try{for(var s=Zp(this._spanProcessors),a=s.next();!a.done;a=s.next()){var o=a.value;o.onStart(t,i)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.onEnd=function(t){var i,r;try{for(var n=Zp(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;a.onEnd(t)}}catch(o){i={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}},e.prototype.shutdown=function(){var t,i,r=[];try{for(var n=Zp(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;r.push(a.shutdown())}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return new Promise(function(o,c){Promise.all(r).then(function(){o()},c)})},e}(),jW=function(){function e(){}return e.prototype.onStart=function(t,i){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),So;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(So||(So={}));var $W=function(){function e(t){t===void 0&&(t={});var i;this._registeredSpanProcessors=[],this._tracers=new Map;var r=hW({},SA(),PW(t));this.resource=(i=r.resource)!==null&&i!==void 0?i:PT.empty(),this.resource=PT.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var n=this._buildExporterFromEnv();if(n!==void 0){var s=new TA(n);this.activeSpanProcessor=s}else this.activeSpanProcessor=new jW}return e.prototype.getTracer=function(t,i,r){var n=t+"@"+(i||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(n)||this._tracers.set(n,new OW({name:t,version:i,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(i){return ke.error("Error while trying to shutdown current span processor",i)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new UW(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),on.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Mo.setGlobalContextManager(t.contextManager),t.propagator&&ld.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,i=this._registeredSpanProcessors.map(function(r){return new Promise(function(n){var s,a=setTimeout(function(){n(new Error("Span processor did not completed within timeout period of "+t+" ms")),s=So.timeout},t);r.forceFlush().then(function(){clearTimeout(a),s!==So.timeout&&(s=So.resolved,n(s))}).catch(function(o){clearTimeout(a),s=So.error,n(o)})})});return new Promise(function(r,n){Promise.all(i).then(function(s){var a=s.filter(function(o){return o!==So.resolved});a.length>0?n(a):r()}).catch(function(s){return n([s])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var i;return(i=this.constructor._registeredPropagators.get(t))===null||i===void 0?void 0:i()},e.prototype._getSpanExporter=function(t){var i;return(i=this.constructor._registeredExporters.get(t))===null||i===void 0?void 0:i()},e.prototype._buildPropagatorFromEnv=function(){var t=this,i=Array.from(new Set(fr().OTEL_PROPAGATORS)),r=i.map(function(s){var a=t._getPropagator(s);return a||ke.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),a}),n=r.reduce(function(s,a){return a&&s.push(a),s},[]);if(n.length!==0)return i.length===1?n[0]:new UG({propagators:n})},e.prototype._buildExporterFromEnv=function(){var t=fr().OTEL_TRACES_EXPORTER;if(!(t==="none"||t==="")){var i=this._getSpanExporter(t);return i||ke.error('Exporter "'+t+'" requested through environment variable is unavailable.'),i}},e._registeredPropagators=new Map([["tracecontext",function(){return new eW}],["baggage",function(){return new aG}]]),e._registeredExporters=new Map,e}(),VW=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},FW=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},kA=function(){function e(){this._enabled=!1,this._currentContext=Ir}return e.prototype._bindFunction=function(t,i){t===void 0&&(t=Ir);var r=this,n=function(){for(var s=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(t,function(){return i.apply(s,a)})};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),n},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(t,i){return t===void 0&&(t=this.active()),typeof i=="function"?this._bindFunction(t,i):i},e.prototype.disable=function(){return this._currentContext=Ir,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=Ir,this)},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._currentContext;this._currentContext=t||Ir;try{return i.call.apply(i,FW([r],VW(n),!1))}finally{this._currentContext=a}},e}(),zW=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),BW=function(e){zW(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;if(i.contextManager)throw"contextManager should be defined in register method not in constructor";if(i.propagator)throw"propagator should be defined in register method not in constructor";return r}return t.prototype.register=function(i){i===void 0&&(i={}),i.contextManager===void 0&&(i.contextManager=new kA),i.contextManager&&i.contextManager.enable(),e.prototype.register.call(this,i)},t}($W),HW="=",CT=";",GW=",";globalThis&&globalThis.__read;function WW(e){var t=e.split(CT);if(!(t.length<=0)){var i=t.shift();if(!!i){var r=i.split(HW);if(r.length===2){var n=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim()),a;return t.length>0&&(a=XI(t.join(CT))),{key:n,value:s,metadata:a}}}}}function PA(e){return typeof e!="string"||e.length===0?{}:e.split(GW).map(function(t){return WW(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,i){return t[i.key]=i.value,t},{})}var t1;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(t1||(t1={}));var qW=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},JW=",",KW=["OTEL_SDK_DISABLED"];function YW(e){return KW.indexOf(e)>-1}var QW=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function ZW(e){return QW.indexOf(e)>-1}var XW=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function eq(e){return XW.indexOf(e)>-1}var RT=1/0,xT=128,tq=128,iq=128,CA={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ke.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:RT,OTEL_ATTRIBUTE_COUNT_LIMIT:xT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:RT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:xT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:tq,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:iq,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:t1.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function rq(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]=r.toLowerCase()==="true"}}function nq(e,t,i,r,n){if(r===void 0&&(r=-1/0),n===void 0&&(n=1/0),typeof i[e]<"u"){var s=Number(i[e]);isNaN(s)||(s<r?t[e]=r:s>n?t[e]=n:t[e]=s)}}function sq(e,t,i,r){r===void 0&&(r=JW);var n=i[e];typeof n=="string"&&(t[e]=n.split(r).map(function(s){return s.trim()}))}var aq={ALL:Ke.ALL,VERBOSE:Ke.VERBOSE,DEBUG:Ke.DEBUG,INFO:Ke.INFO,WARN:Ke.WARN,ERROR:Ke.ERROR,NONE:Ke.NONE};function oq(e,t,i){var r=i[e];if(typeof r=="string"){var n=aq[r.toUpperCase()];n!=null&&(t[e]=n)}}function cq(e){var t={};for(var i in CA){var r=i;switch(r){case"OTEL_LOG_LEVEL":oq(r,t,e);break;default:if(YW(r))rq(r,t,e);else if(ZW(r))nq(r,t,e);else if(eq(r))sq(r,t,e);else{var n=e[r];typeof n<"u"&&n!==null&&(t[r]=String(n))}}}return t}function ca(){var e=cq(qW);return Object.assign({},CA,e)}function fu(e){for(var t=e.length,i="",r=0;r<t;r+=2){var n=e.substring(r,r+2),s=parseInt(n,16);i+=String.fromCharCode(s)}return btoa(i)}var dq=9,lq=Math.pow(10,dq);function i1(e){return e[0]*lq+e[1]}var td;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(td||(td={}));var uq=function(){function e(){var t=this;this._promise=new Promise(function(i,r){t._resolve=i,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),pq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},hq=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},gq=function(){function e(t,i){this._callback=t,this._that=i,this._isCalled=!1,this._deferred=new uq}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,hq([this._that],pq(r),!1))).then(function(s){return i._deferred.resolve(s)},function(s){return i._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},e}(),mq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},RA=1e4,fq=5,vq=1e3,yq=5e3,_q=1.5;function bq(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(i){var r=mq(i,2),n=r[0],s=r[1];typeof s<"u"?t[n]=String(s):ke.warn('Header "'+n+'" has wrong value and will be ignored')}),t}function wq(e,t){return e.endsWith("/")||(e=e+"/"),e+t}function Sq(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return ke.warn("Could not parse export URL: '"+e+"'"),e}}function Eq(e){return typeof e=="number"?e<=0?xA(e,RA):e:Tq()}function Tq(){var e,t=Number((e=ca().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:ca().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?xA(t,RA):t}function xA(e,t){return ke.warn("Timeout must be greater than 0",e),t}function kq(e){var t=[429,502,503,504];return t.includes(e)}function Pq(e){if(e==null)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;var i=new Date(e).getTime()-Date.now();return i>=0?i:0}var Cq=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new gq(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=Eq(t.timeoutMillis),this.onInit(t)}return e.prototype.export=function(t,i){if(this._shutdownOnce.isCalled){i({code:td.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){i({code:td.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){i({code:td.SUCCESS})}).catch(function(r){i({code:td.FAILED,error:r})})},e.prototype._export=function(t){var i=this;return new Promise(function(r,n){try{ke.debug("items to be sent",t),i.send(t,r,n)}catch(s){n(s)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return ke.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},e}(),Rq=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vl=function(e){Rq(t,e);function t(i,r,n){var s=e.call(this,i)||this;return s.name="OTLPExporterError",s.data=n,s.code=r,s}return t}(Error),im=globalThis&&globalThis.__assign||function(){return im=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},im.apply(this,arguments)},xq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function Iq(e,t,i,r,n){if(navigator.sendBeacon(t,new Blob([e],i)))ke.debug("sendBeacon - can send",e),r();else{var s=new Vl("sendBeacon - cannot send "+e);n(s)}}function Aq(e,t,i,r,n,s){var a,o,c=!1,d=setTimeout(function(){if(clearTimeout(a),c=!0,o.readyState===XMLHttpRequest.DONE){var u=new Vl("Request Timeout");s(u)}else o.abort()},r),l=function(u,g){u===void 0&&(u=fq),g===void 0&&(g=vq),o=new XMLHttpRequest,o.open("POST",t);var m={Accept:"application/json","Content-Type":"application/json"};Object.entries(im(im({},m),i)).forEach(function(f){var w=xq(f,2),S=w[0],y=w[1];o.setRequestHeader(S,y)}),o.send(e),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&c===!1)if(o.status>=200&&o.status<=299)ke.debug("xhr success",e),n(),clearTimeout(d),clearTimeout(a);else if(o.status&&kq(o.status)&&u>0){var f=void 0;g=_q*g,o.getResponseHeader("Retry-After")?f=Pq(o.getResponseHeader("Retry-After")):f=Math.round(Math.random()*(yq-g)+g),a=setTimeout(function(){l(u-1,g)},f)}else{var w=new Vl("Failed to export with XHR (status: "+o.status+")",o.status);s(w),clearTimeout(d),clearTimeout(a)}},o.onabort=function(){if(c){var f=new Vl("Request Timeout");s(f)}clearTimeout(d),clearTimeout(a)},o.onerror=function(){if(c){var f=new Vl("Request Timeout");s(f)}clearTimeout(d),clearTimeout(a)}};l()}var Oq=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mq=function(e){Oq(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;return r._useXHR=!1,r._useXHR=!!i.headers||typeof navigator.sendBeacon!="function",r._useXHR?r._headers=Object.assign({},bq(i.headers),PA(ca().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return t.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},t.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},t.prototype.send=function(i,r,n){var s=this;if(this._shutdownOnce.isCalled){ke.debug("Shutdown already started. Cannot send objects");return}var a=this.convert(i),o=JSON.stringify(a),c=new Promise(function(l,u){s._useXHR?Aq(o,s.url,s._headers,s.timeoutMillis,l,u):Iq(o,s.url,{type:"application/json"},l,u)}).then(r,n);this._sendingPromises.push(c);var d=function(){var l=s._sendingPromises.indexOf(c);s._sendingPromises.splice(l,1)};c.then(d,d)},t}(Cq),Dq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function af(e){return Object.keys(e).map(function(t){return IA(t,e[t])})}function IA(e,t){return{key:e,value:AA(t)}}function AA(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(AA)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(i){var r=Dq(i,2),n=r[0],s=r[1];return IA(n,s)})}}:{}}function Lq(e,t){var i,r=e.spanContext(),n=e.status,s=t?e.parentSpanId:e.parentSpanId!=null?fu(e.parentSpanId):void 0;return{traceId:t?r.traceId:fu(r.traceId),spanId:t?r.spanId:fu(r.spanId),parentSpanId:s,traceState:(i=r.traceState)===null||i===void 0?void 0:i.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:i1(e.startTime),endTimeUnixNano:i1(e.endTime),attributes:af(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(Uq),droppedEventsCount:e.droppedEventsCount,status:{code:n.code,message:n.message},links:e.links.map(function(a){return Nq(a,t)}),droppedLinksCount:e.droppedLinksCount}}function Nq(e,t){var i;return{attributes:e.attributes?af(e.attributes):[],spanId:t?e.context.spanId:fu(e.context.spanId),traceId:t?e.context.traceId:fu(e.context.traceId),traceState:(i=e.context.traceState)===null||i===void 0?void 0:i.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}function Uq(e){return{attributes:e.attributes?af(e.attributes):[],name:e.name,timeUnixNano:i1(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var jq=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$q=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function Vq(e,t){return{resourceSpans:zq(e,t)}}function Fq(e){var t,i,r=new Map;try{for(var n=jq(e),s=n.next();!s.done;s=n.next()){var a=s.value,o=r.get(a.resource);o||(o=new Map,r.set(a.resource,o));var c=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),d=o.get(c);d||(d=[],o.set(c,d)),d.push(a)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function zq(e,t){for(var i=Fq(e),r=[],n=i.entries(),s=n.next();!s.done;){for(var a=$q(s.value,2),o=a[0],c=a[1],d=[],l=c.values(),u=l.next();!u.done;){var g=u.value;if(g.length>0){var m=g[0].instrumentationLibrary,f=m.name,w=m.version,S=m.schemaUrl,y=g.map(function(T){return Lq(T,t)});d.push({scope:{name:f,version:w},spans:y,schemaUrl:S})}u=l.next()}var _={resource:{attributes:af(o.attributes),droppedAttributesCount:0},scopeSpans:d,schemaUrl:void 0};r.push(_),s=n.next()}return r}var Bq=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),OA="v1/traces",Hq="http://localhost:4318/"+OA,Gq=function(e){Bq(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;return r._headers=Object.assign(r._headers,PA(ca().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),r}return t.prototype.convert=function(i){return Vq(i,!0)},t.prototype.getDefaultUrl=function(i){return typeof i.url=="string"?i.url:ca().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?Sq(ca().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):ca().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?wq(ca().OTEL_EXPORTER_OTLP_ENDPOINT,OA):Hq},t}(Mq);function Wq(e){return e===void 0&&(e={}),typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"}var IT="OT_ZONE_CONTEXT",qq=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(t){return t&&t.get(IT)||Ir},e.prototype._bindFunction=function(t,i){var r=this,n=function(){for(var s=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(t,function(){return i.apply(s,a)})};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),n},e.prototype._bindListener=function(t,i){var r=i;return r.__ot_listeners!==void 0||(r.__ot_listeners={},typeof r.addEventListener=="function"&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,t)),typeof r.removeEventListener=="function"&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),i},e.prototype._createZoneName=function(){this._zoneCounter++;var t=Math.random();return this._zoneCounter+"-"+t},e.prototype._createZone=function(t,i){var r;return Zone.current.fork({name:t,properties:(r={},r[IT]=i,r)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(t,i,r){var n=this;return function(s,a,o){t.__ot_listeners===void 0&&(t.__ot_listeners={});var c=t.__ot_listeners[s];c===void 0&&(c=new WeakMap,t.__ot_listeners[s]=c);var d=n.bind(r,a);return c.set(a,d),i.call(this,s,d,o)}},e.prototype._patchRemoveEventListener=function(t,i){return function(r,n){if(t.__ot_listeners===void 0||t.__ot_listeners[r]===void 0)return i.call(this,r,n);var s=t.__ot_listeners[r],a=s.get(n);return s.delete(n),i.call(this,r,a||n)}},e.prototype.active=function(){if(!this._enabled)return Ir;var t=this._getActiveZone(),i=this._activeContextFromZone(t);return i||Ir},e.prototype.bind=function(t,i){return t===void 0&&(t=this.active()),typeof i=="function"?this._bindFunction(t,i):(Wq(i)&&this._bindListener(t,i),i)},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._createZoneName(),o=this._createZone(a,t);return o.run(i,r,n)},e}(),en={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Jq={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},Kq="1.13.0",hc,qv=(hc={},hc[en.TELEMETRY_SDK_NAME]="opentelemetry",hc[en.PROCESS_RUNTIME_NAME]="browser",hc[en.TELEMETRY_SDK_LANGUAGE]=Jq.WEBJS,hc[en.TELEMETRY_SDK_VERSION]=Kq,hc);function Yq(){return"unknown_service"}var na=globalThis&&globalThis.__assign||function(){return na=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},na.apply(this,arguments)},Qq=globalThis&&globalThis.__awaiter||function(e,t,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{d(r.next(l))}catch(u){a(u)}}function c(l){try{d(r.throw(l))}catch(u){a(u)}}function d(l){l.done?s(l.value):n(l.value).then(o,c)}d((r=r.apply(e,t||[])).next())})},Zq=globalThis&&globalThis.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],n=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Xq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},eJ=function(){function e(t,i){var r=this,n;this._attributes=t,this.asyncAttributesPending=i!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=i==null?void 0:i.then(function(s){return r._attributes=Object.assign({},r._attributes,s),r.asyncAttributesPending=!1,s},function(s){return ke.debug("a resource's async attributes promise rejected: %s",s),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[en.SERVICE_NAME]=Yq(),t[en.TELEMETRY_SDK_LANGUAGE]=qv[en.TELEMETRY_SDK_LANGUAGE],t[en.TELEMETRY_SDK_NAME]=qv[en.TELEMETRY_SDK_NAME],t[en.TELEMETRY_SDK_VERSION]=qv[en.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&ke.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return Qq(this,void 0,void 0,function(){return Zq(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var i=this,r;if(!t)return this;var n=na(na({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(a){var o,c=Xq(a,2),d=c[0],l=c[1];return na(na(na(na({},i._syncAttributes),d),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes),l)});return new e(n,s)},e.EMPTY=new e({}),e}();function Cb(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function tJ(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}let ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),of=[];for(let e=0;e<ps.length;e++)of[ps[e].charCodeAt(0)]=e;of["-".charCodeAt(0)]=ps.indexOf("+");of["_".charCodeAt(0)]=ps.indexOf("/");function iJ(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let i=new Uint8Array(t),r=0,n=0,s,a=0;for(let o=0;o<e.length;o++){if(s=of[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":n=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(n){case 0:a=s,n=1;break;case 1:i[r++]=a<<2|(s&48)>>4,a=s,n=2;break;case 2:i[r++]=(a&15)<<4|(s&60)>>2,a=s,n=3;break;case 3:i[r++]=(a&3)<<6|s,n=0;break}}if(n==1)throw Error("invalid base64 string.");return i.subarray(0,r)}function rJ(e){let t="",i=0,r,n=0;for(let s=0;s<e.length;s++)switch(r=e[s],i){case 0:t+=ps[r>>2],n=(r&3)<<4,i=1;break;case 1:t+=ps[n|r>>4],n=(r&15)<<2,i=2;break;case 2:t+=ps[n|r>>6],t+=ps[r&63],i=0;break}return i&&(t+=ps[n],t+="=",i==1&&(t+="=")),t}var rm;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(i,r,n,s,a)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:n,wireType:s,data:a})},e.onWrite=(i,r,n)=>{for(let{no:s,wireType:a,data:o}of e.list(r))n.tag(s,a).raw(o)},e.list=(i,r)=>{if(t(i)){let n=i[e.symbol];return r?n.filter(s=>s.no==r):n}return[]},e.last=(i,r)=>e.list(i,r).slice(-1)[0];const t=i=>i&&Array.isArray(i[e.symbol])})(rm||(rm={}));var Dt;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Dt||(Dt={}));function nJ(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(n&127)<<r,(n&128)==0)return this.assertBounds(),[e,t]}let i=this.buf[this.pos++];if(e|=(i&15)<<28,t=(i&112)>>4,(i&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(n&127)<<r,(n&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Jv(e,t,i){for(let s=0;s<28;s=s+7){const a=e>>>s,o=!(a>>>7==0&&t==0),c=(o?a|128:a)&255;if(i.push(c),!o)return}const r=e>>>28&15|(t&7)<<4,n=t>>3!=0;if(i.push((n?r|128:r)&255),!!n){for(let s=3;s<31;s=s+7){const a=t>>>s,o=a>>>7!=0,c=(o?a|128:a)&255;if(i.push(c),!o)return}i.push(t>>>31&1)}}const Vh=(1<<16)*(1<<16);function MA(e){let t=e[0]=="-";t&&(e=e.slice(1));const i=1e6;let r=0,n=0;function s(a,o){const c=Number(e.slice(a,o));n*=i,r=r*i+c,r>=Vh&&(n=n+(r/Vh|0),r=r%Vh)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,n]}function r1(e,t){if(t<=2097151)return""+(Vh*t+(e>>>0));let i=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,n=t>>16&65535,s=i+r*6777216+n*6710656,a=r+n*8147497,o=n*2,c=1e7;s>=c&&(a+=Math.floor(s/c),s%=c),a>=c&&(o+=Math.floor(a/c),a%=c);function d(l,u){let g=l?String(l):"";return u?"0000000".slice(g.length)+g:g}return d(o,0)+d(a,o)+d(s,1)}function AT(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let i=0;i<9;i++)t.push(e&127|128),e=e>>7;t.push(1)}}function sJ(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let i=5;(e&128)!==0&&i<10;i++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function aJ(){const e=new DataView(new ArrayBuffer(8));return globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}const nt=aJ();function DA(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const LA=/^-?[0-9]+$/,nm=(1<<16)*(1<<16);class NA{constructor(t,i){this.lo=t|0,this.hi=i|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let t=this.hi*nm+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}}class Oi extends NA{static from(t){if(nt)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=nt.C(t);case"number":if(t===0)return this.ZERO;t=nt.C(t);case"bigint":if(!t)return this.ZERO;if(t<nt.UMIN)throw new Error("signed value for ulong");if(t>nt.UMAX)throw new Error("ulong too large");return nt.V.setBigUint64(0,t,!0),new Oi(nt.V.getInt32(0,!0),nt.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!LA.test(t))throw new Error("string is no integer");let[i,r,n]=MA(t);if(i)throw new Error("signed value");return new Oi(r,n);case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new Oi(t,t/nm)}throw new Error("unknown value "+typeof t)}toString(){return nt?this.toBigInt().toString():r1(this.lo,this.hi)}toBigInt(){return DA(nt),nt.V.setInt32(0,this.lo,!0),nt.V.setInt32(4,this.hi,!0),nt.V.getBigUint64(0,!0)}}Oi.ZERO=new Oi(0,0);class at extends NA{static from(t){if(nt)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=nt.C(t);case"number":if(t===0)return this.ZERO;t=nt.C(t);case"bigint":if(!t)return this.ZERO;if(t<nt.MIN)throw new Error("ulong too small");if(t>nt.MAX)throw new Error("ulong too large");return nt.V.setBigInt64(0,t,!0),new at(nt.V.getInt32(0,!0),nt.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!LA.test(t))throw new Error("string is no integer");let[i,r,n]=MA(t),s=new at(r,n);return i?s.negate():s;case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new at(t,t/nm):new at(-t,-t/nm).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return(this.hi&2147483648)!==0}negate(){let t=~this.hi,i=this.lo;return i?i=~i+1:t+=1,new at(i,t)}toString(){if(nt)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+r1(t.lo,t.hi)}return r1(this.lo,this.hi)}toBigInt(){return DA(nt),nt.V.setInt32(0,this.lo,!0),nt.V.setInt32(4,this.hi,!0),nt.V.getBigInt64(0,!0)}}at.ZERO=new at(0,0);const OT={readUnknownField:!0,readerFactory:e=>new cJ(e)};function oJ(e){return e?Object.assign(Object.assign({},OT),e):OT}class cJ{constructor(t,i){this.varint64=nJ,this.uint32=sJ,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=i!=null?i:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let t=this.uint32(),i=t>>>3,r=t&7;if(i<=0||r<0||r>5)throw new Error("illegal tag: field no "+i+" wire type "+r);return[i,r]}skip(t){let i=this.pos;switch(t){case Dt.Varint:for(;this.buf[this.pos++]&128;);break;case Dt.Bit64:this.pos+=4;case Dt.Bit32:this.pos+=4;break;case Dt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Dt.StartGroup:let n;for(;(n=this.tag()[1])!==Dt.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return new at(...this.varint64())}uint64(){return new Oi(...this.varint64())}sint64(){let[t,i]=this.varint64(),r=-(t&1);return t=(t>>>1|(i&1)<<31)^r,i=i>>>1^r,new at(t,i)}bool(){let[t,i]=this.varint64();return t!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Oi(this.sfixed32(),this.sfixed32())}sfixed64(){return new at(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),i=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(i,i+t)}string(){return this.textDecoder.decode(this.bytes())}}function We(e,t){if(!e)throw new Error(t)}const dJ=34028234663852886e22,lJ=-34028234663852886e22,uJ=4294967295,pJ=2147483647,hJ=-2147483648;function vu(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>pJ||e<hJ)throw new Error("invalid int 32: "+e)}function sm(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>uJ||e<0)throw new Error("invalid uint 32: "+e)}function Rb(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(!!Number.isFinite(e)&&(e>dJ||e<lJ))throw new Error("invalid float 32: "+e)}const MT={writeUnknownFields:!0,writerFactory:()=>new mJ};function gJ(e){return e?Object.assign(Object.assign({},MT),e):MT}class mJ{constructor(t){this.stack=[],this.textEncoder=t!=null?t:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let n=0;n<this.chunks.length;n++)t+=this.chunks[n].length;let i=new Uint8Array(t),r=0;for(let n=0;n<this.chunks.length;n++)i.set(this.chunks[n],r),r+=this.chunks[n].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,i){return this.uint32((t<<3|i)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(sm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return vu(t),AT(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let i=this.textEncoder.encode(t);return this.uint32(i.byteLength),this.raw(i)}float(t){Rb(t);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,t,!0),this.raw(i)}double(t){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,t,!0),this.raw(i)}fixed32(t){sm(t);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,t,!0),this.raw(i)}sfixed32(t){vu(t);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,t,!0),this.raw(i)}sint32(t){return vu(t),t=(t<<1^t>>31)>>>0,AT(t,this.buf),this}sfixed64(t){let i=new Uint8Array(8),r=new DataView(i.buffer),n=at.from(t);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(i)}fixed64(t){let i=new Uint8Array(8),r=new DataView(i.buffer),n=Oi.from(t);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(i)}int64(t){let i=at.from(t);return Jv(i.lo,i.hi,this.buf),this}sint64(t){let i=at.from(t),r=i.hi>>31,n=i.lo<<1^r,s=(i.hi<<1|i.lo>>>31)^r;return Jv(n,s,this.buf),this}uint64(t){let i=Oi.from(t);return Jv(i.lo,i.hi,this.buf),this}}const DT={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},LT={ignoreUnknownFields:!1};function fJ(e){return e?Object.assign(Object.assign({},LT),e):LT}function vJ(e){return e?Object.assign(Object.assign({},DT),e):DT}const yJ=Symbol.for("protobuf-ts/message-type");function NT(e){let t=!1;const i=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);n=="_"?t=!0:/\d/.test(n)?(i.push(n),t=!0):t?(i.push(n.toUpperCase()),t=!1):r==0?i.push(n.toLowerCase()):i.push(n)}return i.join("")}var L;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(L||(L={}));var Vn;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"})(Vn||(Vn={}));var am;(function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"})(am||(am={}));function _J(e){var t,i,r,n;return e.localName=(t=e.localName)!==null&&t!==void 0?t:NT(e.name),e.jsonName=(i=e.jsonName)!==null&&i!==void 0?i:NT(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:am.NO,e.opt=(n=e.opt)!==null&&n!==void 0?n:e.repeat||e.oneof?!1:e.kind=="message",e}function bJ(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}class wJ{constructor(t){var i;this.fields=(i=t.fields)!==null&&i!==void 0?i:[]}prepare(){if(this.data)return;const t=[],i=[],r=[];for(let n of this.fields)if(n.oneof)r.includes(n.oneof)||(r.push(n.oneof),t.push(n.oneof),i.push(n.oneof));else switch(i.push(n.localName),n.kind){case"scalar":case"enum":(!n.opt||n.repeat)&&t.push(n.localName);break;case"message":n.repeat&&t.push(n.localName);break;case"map":t.push(n.localName);break}this.data={req:t,known:i,oneofs:Object.values(r)}}is(t,i,r=!1){if(i<0)return!0;if(t==null||typeof t!="object")return!1;this.prepare();let n=Object.keys(t),s=this.data;if(n.length<s.req.length||s.req.some(a=>!n.includes(a))||!r&&n.some(a=>!s.known.includes(a)))return!1;if(i<1)return!0;for(const a of s.oneofs){const o=t[a];if(!bJ(o))return!1;if(o.oneofKind===void 0)continue;const c=this.fields.find(d=>d.localName===o.oneofKind);if(!c||!this.field(o[o.oneofKind],c,r,i))return!1}for(const a of this.fields)if(a.oneof===void 0&&!this.field(t[a.localName],a,r,i))return!1;return!0}field(t,i,r,n){let s=i.repeat;switch(i.kind){case"scalar":return t===void 0?i.opt:s?this.scalars(t,i.T,n,i.L):this.scalar(t,i.T,i.L);case"enum":return t===void 0?i.opt:s?this.scalars(t,L.INT32,n):this.scalar(t,L.INT32);case"message":return t===void 0?!0:s?this.messages(t,i.T(),r,n):this.message(t,i.T(),r,n);case"map":if(typeof t!="object"||t===null)return!1;if(n<2)return!0;if(!this.mapKeys(t,i.K,n))return!1;switch(i.V.kind){case"scalar":return this.scalars(Object.values(t),i.V.T,n,i.V.L);case"enum":return this.scalars(Object.values(t),L.INT32,n);case"message":return this.messages(Object.values(t),i.V.T(),r,n)}break}return!0}message(t,i,r,n){return r?i.isAssignable(t,n):i.is(t,n)}messages(t,i,r,n){if(!Array.isArray(t))return!1;if(n<2)return!0;if(r){for(let s=0;s<t.length&&s<n;s++)if(!i.isAssignable(t[s],n-1))return!1}else for(let s=0;s<t.length&&s<n;s++)if(!i.is(t[s],n-1))return!1;return!0}scalar(t,i,r){let n=typeof t;switch(i){case L.UINT64:case L.FIXED64:case L.INT64:case L.SFIXED64:case L.SINT64:switch(r){case Vn.BIGINT:return n=="bigint";case Vn.NUMBER:return n=="number"&&!isNaN(t);default:return n=="string"}case L.BOOL:return n=="boolean";case L.STRING:return n=="string";case L.BYTES:return t instanceof Uint8Array;case L.DOUBLE:case L.FLOAT:return n=="number"&&!isNaN(t);default:return n=="number"&&Number.isInteger(t)}}scalars(t,i,r,n){if(!Array.isArray(t))return!1;if(r<2)return!0;if(Array.isArray(t)){for(let s=0;s<t.length&&s<r;s++)if(!this.scalar(t[s],i,n))return!1}return!0}mapKeys(t,i,r){let n=Object.keys(t);switch(i){case L.INT32:case L.FIXED32:case L.SFIXED32:case L.SINT32:case L.UINT32:return this.scalars(n.slice(0,r).map(s=>parseInt(s)),i,r);case L.BOOL:return this.scalars(n.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),i,r);default:return this.scalars(n,i,r,Vn.STRING)}}}function ln(e,t){switch(t){case Vn.BIGINT:return e.toBigInt();case Vn.NUMBER:return e.toNumber();default:return e.toString()}}class SJ{constructor(t){this.info=t}prepare(){var t;if(this.fMap===void 0){this.fMap={};const i=(t=this.info.fields)!==null&&t!==void 0?t:[];for(const r of i)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(t,i,r){if(!t){let n=Cb(r);throw(n=="number"||n=="boolean")&&(n=r.toString()),new Error(`Cannot parse JSON ${n} for ${this.info.typeName}#${i}`)}}read(t,i,r){this.prepare();const n=[];for(const[s,a]of Object.entries(t)){const o=this.fMap[s];if(!o){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const c=o.localName;let d;if(o.oneof){if(n.includes(o.oneof))throw new Error(`Multiple members of the oneof group "${o.oneof}" of ${this.info.typeName} are present in JSON.`);n.push(o.oneof),d=i[o.oneof]={oneofKind:c}}else d=i;if(o.kind=="map"){if(a===null)continue;this.assert(tJ(a),o.name,a);const l=d[c];for(const[u,g]of Object.entries(a)){this.assert(g!==null,o.name+" map value",null);let m;switch(o.V.kind){case"message":m=o.V.T().internalJsonRead(g,r);break;case"enum":if(m=this.enum(o.V.T(),g,o.name,r.ignoreUnknownFields),m===!1)continue;break;case"scalar":m=this.scalar(g,o.V.T,o.V.L,o.name);break}this.assert(m!==void 0,o.name+" map value",g);let f=u;o.K==L.BOOL&&(f=f=="true"?!0:f=="false"?!1:f),f=this.scalar(f,o.K,Vn.STRING,o.name).toString(),l[f]=m}}else if(o.repeat){if(a===null)continue;this.assert(Array.isArray(a),o.name,a);const l=d[c];for(const u of a){this.assert(u!==null,o.name,null);let g;switch(o.kind){case"message":g=o.T().internalJsonRead(u,r);break;case"enum":if(g=this.enum(o.T(),u,o.name,r.ignoreUnknownFields),g===!1)continue;break;case"scalar":g=this.scalar(u,o.T,o.L,o.name);break}this.assert(g!==void 0,o.name,a),l.push(g)}}else switch(o.kind){case"message":if(a===null&&o.T().typeName!="google.protobuf.Value"){this.assert(o.oneof===void 0,o.name+" (oneof member)",null);continue}d[c]=o.T().internalJsonRead(a,r,d[c]);break;case"enum":let l=this.enum(o.T(),a,o.name,r.ignoreUnknownFields);if(l===!1)continue;d[c]=l;break;case"scalar":d[c]=this.scalar(a,o.T,o.L,o.name);break}}}enum(t,i,r,n){if(t[0]=="google.protobuf.NullValue"&&We(i===null,`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} only accepts null.`),i===null)return 0;switch(typeof i){case"number":return We(Number.isInteger(i),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${i}.`),i;case"string":let s=i;t[2]&&i.substring(0,t[2].length)===t[2]&&(s=i.substring(t[2].length));let a=t[1][s];return typeof a>"u"&&n?!1:(We(typeof a=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} has no value for "${i}".`),a)}We(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof i}".`)}scalar(t,i,r,n){let s;try{switch(i){case L.DOUBLE:case L.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""){s="empty string";break}if(typeof t=="string"&&t.trim().length!==t.length){s="extra whitespace";break}if(typeof t!="string"&&typeof t!="number")break;let a=Number(t);if(Number.isNaN(a)){s="not a number";break}if(!Number.isFinite(a)){s="too large or small";break}return i==L.FLOAT&&Rb(a),a;case L.INT32:case L.FIXED32:case L.SFIXED32:case L.SINT32:case L.UINT32:if(t===null)return 0;let o;if(typeof t=="number"?o=t:t===""?s="empty string":typeof t=="string"&&(t.trim().length!==t.length?s="extra whitespace":o=Number(t)),o===void 0)break;return i==L.UINT32?sm(o):vu(o),o;case L.INT64:case L.SFIXED64:case L.SINT64:if(t===null)return ln(at.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return ln(at.from(t),r);case L.FIXED64:case L.UINT64:if(t===null)return ln(Oi.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return ln(Oi.from(t),r);case L.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case L.STRING:if(t===null)return"";if(typeof t!="string"){s="extra whitespace";break}try{encodeURIComponent(t)}catch(c){c="invalid UTF8";break}return t;case L.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return iJ(t)}}catch(a){s=a.message}this.assert(!1,n+(s?" - "+s:""),t)}}class EJ{constructor(t){var i;this.fields=(i=t.fields)!==null&&i!==void 0?i:[]}write(t,i){const r={},n=t;for(const s of this.fields){if(!s.oneof){let d=this.field(s,n[s.localName],i);d!==void 0&&(r[i.useProtoFieldName?s.name:s.jsonName]=d);continue}const a=n[s.oneof];if(a.oneofKind!==s.localName)continue;const o=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},i),{emitDefaultValues:!0}):i;let c=this.field(s,a[s.localName],o);We(c!==void 0),r[i.useProtoFieldName?s.name:s.jsonName]=c}return r}field(t,i,r){let n;if(t.kind=="map"){We(typeof i=="object"&&i!==null);const s={};switch(t.V.kind){case"scalar":for(const[c,d]of Object.entries(i)){const l=this.scalar(t.V.T,d,t.name,!1,!0);We(l!==void 0),s[c.toString()]=l}break;case"message":const a=t.V.T();for(const[c,d]of Object.entries(i)){const l=this.message(a,d,t.name,r);We(l!==void 0),s[c.toString()]=l}break;case"enum":const o=t.V.T();for(const[c,d]of Object.entries(i)){We(d===void 0||typeof d=="number");const l=this.enum(o,d,t.name,!1,!0,r.enumAsInteger);We(l!==void 0),s[c.toString()]=l}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(n=s)}else if(t.repeat){We(Array.isArray(i));const s=[];switch(t.kind){case"scalar":for(let c=0;c<i.length;c++){const d=this.scalar(t.T,i[c],t.name,t.opt,!0);We(d!==void 0),s.push(d)}break;case"enum":const a=t.T();for(let c=0;c<i.length;c++){We(i[c]===void 0||typeof i[c]=="number");const d=this.enum(a,i[c],t.name,t.opt,!0,r.enumAsInteger);We(d!==void 0),s.push(d)}break;case"message":const o=t.T();for(let c=0;c<i.length;c++){const d=this.message(o,i[c],t.name,r);We(d!==void 0),s.push(d)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(n=s)}else switch(t.kind){case"scalar":n=this.scalar(t.T,i,t.name,t.opt,r.emitDefaultValues);break;case"enum":n=this.enum(t.T(),i,t.name,t.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":n=this.message(t.T(),i,t.name,r);break}return n}enum(t,i,r,n,s,a){if(t[0]=="google.protobuf.NullValue")return null;if(i===void 0){We(n);return}if(!(i===0&&!s&&!n))return We(typeof i=="number"),We(Number.isInteger(i)),a||!t[1].hasOwnProperty(i)?i:t[2]?t[2]+t[1][i]:t[1][i]}message(t,i,r,n){return i===void 0?n.emitDefaultValues?null:void 0:t.internalJsonWrite(i,n)}scalar(t,i,r,n,s){if(i===void 0){We(n);return}const a=s||n;switch(t){case L.INT32:case L.SFIXED32:case L.SINT32:return i===0?a?0:void 0:(vu(i),i);case L.FIXED32:case L.UINT32:return i===0?a?0:void 0:(sm(i),i);case L.FLOAT:Rb(i);case L.DOUBLE:return i===0?a?0:void 0:(We(typeof i=="number"),Number.isNaN(i)?"NaN":i===Number.POSITIVE_INFINITY?"Infinity":i===Number.NEGATIVE_INFINITY?"-Infinity":i);case L.STRING:return i===""?a?"":void 0:(We(typeof i=="string"),i);case L.BOOL:return i===!1?a?!1:void 0:(We(typeof i=="boolean"),i);case L.UINT64:case L.FIXED64:We(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let o=Oi.from(i);return o.isZero()&&!a?void 0:o.toString();case L.INT64:case L.SFIXED64:case L.SINT64:We(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let c=at.from(i);return c.isZero()&&!a?void 0:c.toString();case L.BYTES:return We(i instanceof Uint8Array),i.byteLength?rJ(i):a?"":void 0}}}function n1(e,t=Vn.STRING){switch(e){case L.BOOL:return!1;case L.UINT64:case L.FIXED64:return ln(Oi.ZERO,t);case L.INT64:case L.SFIXED64:case L.SINT64:return ln(at.ZERO,t);case L.DOUBLE:case L.FLOAT:return 0;case L.BYTES:return new Uint8Array(0);case L.STRING:return"";default:return 0}}class TJ{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){const i=(t=this.info.fields)!==null&&t!==void 0?t:[];this.fieldNoToField=new Map(i.map(r=>[r.no,r]))}}read(t,i,r,n){this.prepare();const s=n===void 0?t.len:t.pos+n;for(;t.pos<s;){const[a,o]=t.tag(),c=this.fieldNoToField.get(a);if(!c){let g=r.readUnknownField;if(g=="throw")throw new Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let m=t.skip(o);g!==!1&&(g===!0?rm.onRead:g)(this.info.typeName,i,a,o,m);continue}let d=i,l=c.repeat,u=c.localName;switch(c.oneof&&(d=d[c.oneof],d.oneofKind!==u&&(d=i[c.oneof]={oneofKind:u})),c.kind){case"scalar":case"enum":let g=c.kind=="enum"?L.INT32:c.T,m=c.kind=="scalar"?c.L:void 0;if(l){let S=d[u];if(o==Dt.LengthDelimited&&g!=L.STRING&&g!=L.BYTES){let y=t.uint32()+t.pos;for(;t.pos<y;)S.push(this.scalar(t,g,m))}else S.push(this.scalar(t,g,m))}else d[u]=this.scalar(t,g,m);break;case"message":if(l){let S=d[u],y=c.T().internalBinaryRead(t,t.uint32(),r);S.push(y)}else d[u]=c.T().internalBinaryRead(t,t.uint32(),r,d[u]);break;case"map":let[f,w]=this.mapEntry(c,t,r);d[u][f]=w;break}}}mapEntry(t,i,r){let n=i.uint32(),s=i.pos+n,a,o;for(;i.pos<s;){let[c,d]=i.tag();switch(c){case 1:t.K==L.BOOL?a=i.bool().toString():a=this.scalar(i,t.K,Vn.STRING);break;case 2:switch(t.V.kind){case"scalar":o=this.scalar(i,t.V.T,t.V.L);break;case"enum":o=i.int32();break;case"message":o=t.V.T().internalBinaryRead(i,i.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${d}) in map entry for ${this.info.typeName}#${t.name}`)}}if(a===void 0){let c=n1(t.K);a=t.K==L.BOOL?c.toString():c}if(o===void 0)switch(t.V.kind){case"scalar":o=n1(t.V.T,t.V.L);break;case"enum":o=0;break;case"message":o=t.V.T().create();break}return[a,o]}scalar(t,i,r){switch(i){case L.INT32:return t.int32();case L.STRING:return t.string();case L.BOOL:return t.bool();case L.DOUBLE:return t.double();case L.FLOAT:return t.float();case L.INT64:return ln(t.int64(),r);case L.UINT64:return ln(t.uint64(),r);case L.FIXED64:return ln(t.fixed64(),r);case L.FIXED32:return t.fixed32();case L.BYTES:return t.bytes();case L.UINT32:return t.uint32();case L.SFIXED32:return t.sfixed32();case L.SFIXED64:return ln(t.sfixed64(),r);case L.SINT32:return t.sint32();case L.SINT64:return ln(t.sint64(),r)}}}class kJ{constructor(t){this.info=t}prepare(){if(!this.fields){const t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort((i,r)=>i.no-r.no)}}write(t,i,r){this.prepare();for(const s of this.fields){let a,o,c=s.repeat,d=s.localName;if(s.oneof){const l=t[s.oneof];if(l.oneofKind!==d)continue;a=l[d],o=!0}else a=t[d],o=!1;switch(s.kind){case"scalar":case"enum":let l=s.kind=="enum"?L.INT32:s.T;if(c)if(We(Array.isArray(a)),c==am.PACKED)this.packed(i,l,s.no,a);else for(const u of a)this.scalar(i,l,s.no,u,!0);else a===void 0?We(s.opt):this.scalar(i,l,s.no,a,o||s.opt);break;case"message":if(c){We(Array.isArray(a));for(const u of a)this.message(i,r,s.T(),s.no,u)}else this.message(i,r,s.T(),s.no,a);break;case"map":We(typeof a=="object"&&a!==null);for(const[u,g]of Object.entries(a))this.mapEntry(i,r,s,u,g);break}}let n=r.writeUnknownFields;n!==!1&&(n===!0?rm.onWrite:n)(this.info.typeName,t,i)}mapEntry(t,i,r,n,s){t.tag(r.no,Dt.LengthDelimited),t.fork();let a=n;switch(r.K){case L.INT32:case L.FIXED32:case L.UINT32:case L.SFIXED32:case L.SINT32:a=Number.parseInt(n);break;case L.BOOL:We(n=="true"||n=="false"),a=n=="true";break}switch(this.scalar(t,r.K,1,a,!0),r.V.kind){case"scalar":this.scalar(t,r.V.T,2,s,!0);break;case"enum":this.scalar(t,L.INT32,2,s,!0);break;case"message":this.message(t,i,r.V.T(),2,s);break}t.join()}message(t,i,r,n,s){s!==void 0&&(r.internalBinaryWrite(s,t.tag(n,Dt.LengthDelimited).fork(),i),t.join())}scalar(t,i,r,n,s){let[a,o,c]=this.scalarInfo(i,n);(!c||s)&&(t.tag(r,a),t[o](n))}packed(t,i,r,n){if(!n.length)return;We(i!==L.BYTES&&i!==L.STRING),t.tag(r,Dt.LengthDelimited),t.fork();let[,s]=this.scalarInfo(i);for(let a=0;a<n.length;a++)t[s](n[a]);t.join()}scalarInfo(t,i){let r=Dt.Varint,n,s=i===void 0,a=i===0;switch(t){case L.INT32:n="int32";break;case L.STRING:a=s||!i.length,r=Dt.LengthDelimited,n="string";break;case L.BOOL:a=i===!1,n="bool";break;case L.UINT32:n="uint32";break;case L.DOUBLE:r=Dt.Bit64,n="double";break;case L.FLOAT:r=Dt.Bit32,n="float";break;case L.INT64:a=s||at.from(i).isZero(),n="int64";break;case L.UINT64:a=s||Oi.from(i).isZero(),n="uint64";break;case L.FIXED64:a=s||Oi.from(i).isZero(),r=Dt.Bit64,n="fixed64";break;case L.BYTES:a=s||!i.byteLength,r=Dt.LengthDelimited,n="bytes";break;case L.FIXED32:r=Dt.Bit32,n="fixed32";break;case L.SFIXED32:r=Dt.Bit32,n="sfixed32";break;case L.SFIXED64:a=s||at.from(i).isZero(),r=Dt.Bit64,n="sfixed64";break;case L.SINT32:n="sint32";break;case L.SINT64:a=s||at.from(i).isZero(),n="sint64";break}return[r,n,s||a]}}function PJ(e){const t={};Object.defineProperty(t,yJ,{enumerable:!1,value:e});for(let i of e.fields){let r=i.localName;if(!i.opt)if(i.oneof)t[i.oneof]={oneofKind:void 0};else if(i.repeat)t[r]=[];else switch(i.kind){case"scalar":t[r]=n1(i.T,i.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function Kv(e,t,i){let r,n=i,s;for(let a of e.fields){let o=a.localName;if(a.oneof){const c=n[a.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(r=c[o],s=t[a.oneof],s.oneofKind=c.oneofKind,r==null){delete s[o];continue}}else if(r=n[o],s=t,r==null)continue;switch(a.repeat&&(s[o].length=r.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let d=0;d<r.length;d++)s[o][d]=r[d];else s[o]=r;break;case"message":let c=a.T();if(a.repeat)for(let d=0;d<r.length;d++)s[o][d]=c.create(r[d]);else s[o]===void 0?s[o]=c.create(r):c.mergePartial(s[o],r);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(s[o],r);break;case"message":let d=a.V.T();for(let l of Object.keys(r))s[o][l]=d.create(r[l]);break}break}}}function CJ(e,t,i){if(t===i)return!0;if(!t||!i)return!1;for(let r of e.fields){let n=r.localName,s=r.oneof?t[r.oneof][n]:t[n],a=r.oneof?i[r.oneof][n]:i[n];switch(r.kind){case"enum":case"scalar":let o=r.kind=="enum"?L.INT32:r.T;if(!(r.repeat?UT(o,s,a):UA(o,s,a)))return!1;break;case"map":if(!(r.V.kind=="message"?jT(r.V.T(),Xp(s),Xp(a)):UT(r.V.kind=="enum"?L.INT32:r.V.T,Xp(s),Xp(a))))return!1;break;case"message":let c=r.T();if(!(r.repeat?jT(c,s,a):c.equals(s,a)))return!1;break}}return!0}const Xp=Object.values;function UA(e,t,i){if(t===i)return!0;if(e!==L.BYTES)return!1;let r=t,n=i;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=n[s])return!1;return!0}function UT(e,t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!UA(e,t[r],i[r]))return!1;return!0}function jT(e,t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],i[r]))return!1;return!0}class x{constructor(t,i,r){this.defaultCheckDepth=16,this.typeName=t,this.fields=i.map(_J),this.options=r!=null?r:{},this.refTypeCheck=new wJ(this),this.refJsonReader=new SJ(this),this.refJsonWriter=new EJ(this),this.refBinReader=new TJ(this),this.refBinWriter=new kJ(this)}create(t){let i=PJ(this);return t!==void 0&&Kv(this,i,t),i}clone(t){let i=this.create();return Kv(this,i,t),i}equals(t,i){return CJ(this,t,i)}is(t,i=this.defaultCheckDepth){return this.refTypeCheck.is(t,i,!1)}isAssignable(t,i=this.defaultCheckDepth){return this.refTypeCheck.is(t,i,!0)}mergePartial(t,i){Kv(this,t,i)}fromBinary(t,i){let r=oJ(i);return this.internalBinaryRead(r.readerFactory(t),t.byteLength,r)}fromJson(t,i){return this.internalJsonRead(t,fJ(i))}fromJsonString(t,i){let r=JSON.parse(t);return this.fromJson(r,i)}toJson(t,i){return this.internalJsonWrite(t,vJ(i))}toJsonString(t,i){var r;let n=this.toJson(t,i);return JSON.stringify(n,null,(r=i==null?void 0:i.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(t,i){let r=gJ(i);return this.internalBinaryWrite(t,r.writerFactory(),r).finish()}internalJsonRead(t,i,r){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){let n=r!=null?r:this.create();return this.refJsonReader.read(t,n,i),n}throw new Error(`Unable to parse message ${this.typeName} from JSON ${Cb(t)}.`)}internalJsonWrite(t,i){return this.refJsonWriter.write(t,i)}internalBinaryWrite(t,i,r){return this.refBinWriter.write(t,i,r),i}internalBinaryRead(t,i,r,n){let s=n!=null?n:this.create();return this.refBinReader.read(t,s,r,i),s}}var Do={},cf={},s1={exports:{}},Yv,$T;function RJ(){if($T)return Yv;$T=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,s=r*365.25;Yv=function(l,u){u=u||{};var g=typeof l;if(g==="string"&&l.length>0)return a(l);if(g==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(!!u){var g=parseFloat(u[1]),m=(u[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*n;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*t;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=i?Math.round(l/i)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=i?d(l,u,i,"hour"):u>=t?d(l,u,t,"minute"):u>=e?d(l,u,e,"second"):l+" ms"}function d(l,u,g,m){var f=u>=g*1.5;return Math.round(l/g)+" "+m+(f?"s":"")}return Yv}function xJ(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=n,i.enabled=a,i.humanize=RJ(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let u=0;for(let g=0;g<l.length;g++)u=(u<<5)-u+l.charCodeAt(g),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(l){let u,g=null,m,f;function w(...S){if(!w.enabled)return;const y=w,_=Number(new Date),T=_-(u||_);y.diff=T,y.prev=u,y.curr=_,u=_,S[0]=i.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let C=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(O,z)=>{if(O==="%%")return"%";C++;const H=i.formatters[z];if(typeof H=="function"){const ie=S[C];O=H.call(y,ie),S.splice(C,1),C--}return O}),i.formatArgs.call(y,S),(y.log||i.log).apply(y,S)}return w.namespace=l,w.useColors=i.useColors(),w.color=i.selectColor(l),w.extend=r,w.destroy=i.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(l)),f),set:S=>{g=S}}),typeof i.init=="function"&&i.init(w),w}function r(l,u){const g=i(this.namespace+(typeof u>"u"?":":u)+l);return g.log=this.log,g}function n(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let u;const g=(typeof l=="string"?l:"").split(/[\s,]+/),m=g.length;for(u=0;u<m;u++)!g[u]||(l=g[u].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...i.names.map(o),...i.skips.map(o).map(u=>"-"+u)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let u,g;for(u=0,g=i.skips.length;u<g;u++)if(i.skips[u].test(l))return!1;for(u=0,g=i.names.length;u<g;u++)if(i.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var IJ=xJ;(function(e,t){t.formatArgs=r,t.save=n,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(u=l))}),c.splice(u,0,d)}t.log=console.debug||console.log||(()=>{});function n(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=IJ(t);const{formatters:o}=e.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(s1,s1.exports);var AJ=Rw&&Rw.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});cf.Logger=void 0;const gc=AJ(s1.exports),mc="awaitqueue";class OJ{constructor(t){t?(this._debug=(0,gc.default)(`${mc}:${t}`),this._warn=(0,gc.default)(`${mc}:WARN:${t}`),this._error=(0,gc.default)(`${mc}:ERROR:${t}`)):(this._debug=(0,gc.default)(mc),this._warn=(0,gc.default)(`${mc}:WARN`),this._error=(0,gc.default)(`${mc}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}cf.Logger=OJ;Object.defineProperty(Do,"__esModule",{value:!0});var jA=Do.AwaitQueue=Do.AwaitQueueRemovedTaskError=Do.AwaitQueueStoppedError=void 0;const MJ=cf,js=new MJ.Logger;class df extends Error{constructor(t){super(t!=null?t:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,df)}}Do.AwaitQueueStoppedError=df;class lf extends Error{constructor(t){super(t!=null?t:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,lf)}}Do.AwaitQueueRemovedTaskError=lf;class DJ{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(t,i){if(i=i!=null?i:t.name,js.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((r,n)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),js.debug(`resolving task [name:${s.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),js.debug(`rejecting task [name:${s.name}]: %s`,String(a)),n(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){js.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())js.debug(`stop() | stopping task [name:${t.name}]`),t.reject(new df);this.stopping=!1}remove(t){js.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){js.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new lf)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:t-r.enqueuedAt,executionTime:r.executedAt?t-r.executedAt:0}))}async execute(t){if(js.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}jA=Do.AwaitQueue=DJ;const Gn=Object.create(null);Gn.open="0";Gn.close="1";Gn.ping="2";Gn.pong="3";Gn.message="4";Gn.upgrade="5";Gn.noop="6";const Fh=Object.create(null);Object.keys(Gn).forEach(e=>{Fh[Gn[e]]=e});const LJ={type:"error",data:"parser error"},NJ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",UJ=typeof ArrayBuffer=="function",jJ=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,$A=({type:e,data:t},i,r)=>NJ&&t instanceof Blob?i?r(t):VT(t,r):UJ&&(t instanceof ArrayBuffer||jJ(t))?i?r(t):VT(new Blob([t]),r):r(Gn[e]+(t||"")),VT=(e,t)=>{const i=new FileReader;return i.onload=function(){const r=i.result.split(",")[1];t("b"+(r||""))},i.readAsDataURL(e)},FT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<FT.length;e++)Fl[FT.charCodeAt(e)]=e;const $J=e=>{let t=e.length*.75,i=e.length,r,n=0,s,a,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),l=new Uint8Array(d);for(r=0;r<i;r+=4)s=Fl[e.charCodeAt(r)],a=Fl[e.charCodeAt(r+1)],o=Fl[e.charCodeAt(r+2)],c=Fl[e.charCodeAt(r+3)],l[n++]=s<<2|a>>4,l[n++]=(a&15)<<4|o>>2,l[n++]=(o&3)<<6|c&63;return d},VJ=typeof ArrayBuffer=="function",VA=(e,t)=>{if(typeof e!="string")return{type:"message",data:FA(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:FJ(e.substring(1),t)}:Fh[i]?e.length>1?{type:Fh[i],data:e.substring(1)}:{type:Fh[i]}:LJ},FJ=(e,t)=>{if(VJ){const i=$J(e);return FA(i,t)}else return{base64:!0,data:e}},FA=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},zA=String.fromCharCode(30),zJ=(e,t)=>{const i=e.length,r=new Array(i);let n=0;e.forEach((s,a)=>{$A(s,!1,o=>{r[a]=o,++n===i&&t(r.join(zA))})})},BJ=(e,t)=>{const i=e.split(zA),r=[];for(let n=0;n<i.length;n++){const s=VA(i[n],t);if(r.push(s),s.type==="error")break}return r},BA=4;function Yt(e){if(e)return HJ(e)}function HJ(e){for(var t in Yt.prototype)e[t]=Yt.prototype[t];return e}Yt.prototype.on=Yt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Yt.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Yt.prototype.off=Yt.prototype.removeListener=Yt.prototype.removeAllListeners=Yt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Yt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,t)}return this};Yt.prototype.emitReserved=Yt.prototype.emit;Yt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Yt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const xr=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function HA(e,...t){return t.reduce((i,r)=>(e.hasOwnProperty(r)&&(i[r]=e[r]),i),{})}const GJ=xr.setTimeout,WJ=xr.clearTimeout;function uf(e,t){t.useNativeTimers?(e.setTimeoutFn=GJ.bind(xr),e.clearTimeoutFn=WJ.bind(xr)):(e.setTimeoutFn=xr.setTimeout.bind(xr),e.clearTimeoutFn=xr.clearTimeout.bind(xr))}const qJ=1.33;function JJ(e){return typeof e=="string"?KJ(e):Math.ceil((e.byteLength||e.size)*qJ)}function KJ(e){let t=0,i=0;for(let r=0,n=e.length;r<n;r++)t=e.charCodeAt(r),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(r++,i+=4);return i}class YJ extends Error{constructor(t,i,r){super(t),this.description=i,this.context=r,this.type="TransportError"}}class GA extends Yt{constructor(t){super(),this.writable=!1,uf(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,i,r){return super.emitReserved("error",new YJ(t,i,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=VA(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}}const WA="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a1=64,QJ={};let zT=0,eh=0,BT;function HT(e){let t="";do t=WA[e%a1]+t,e=Math.floor(e/a1);while(e>0);return t}function qA(){const e=HT(+new Date);return e!==BT?(zT=0,BT=e):e+"."+HT(zT++)}for(;eh<a1;eh++)QJ[WA[eh]]=eh;function JA(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function ZJ(e){let t={},i=e.split("&");for(let r=0,n=i.length;r<n;r++){let s=i[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}let KA=!1;try{KA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const XJ=KA;function YA(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||XJ))return new XMLHttpRequest}catch{}if(!t)try{return new xr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function eK(){}const tK=function(){return new YA({xdomain:!1}).responseType!=null}();class iK extends GA{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==r}const i=t&&t.forceBase64;this.supportsBinary=tK&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||i()})),this.writable||(r++,this.once("drain",function(){--r||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};BJ(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,zJ(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const i=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=qA()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const n=JA(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Fn(this.uri(),t)}doWrite(t,i){const r=this.request({method:"POST",data:t});r.on("success",i),r.on("error",(n,s)=>{this.onError("xhr post error",n,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,r)=>{this.onError("xhr poll error",i,r)}),this.pollXhr=t}}class Fn extends Yt{constructor(t,i){super(),uf(this,i),this.opts=i,this.method=i.method||"GET",this.uri=t,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const t=HA(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const i=this.xhr=new YA(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Fn.requestsCount++,Fn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=eK,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Fn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Fn.requestsCount=0;Fn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",GT);else if(typeof addEventListener=="function"){const e="onpagehide"in xr?"pagehide":"unload";addEventListener(e,GT,!1)}}function GT(){for(let e in Fn.requests)Fn.requests.hasOwnProperty(e)&&Fn.requests[e].abort()}const QA=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0))(),th=xr.WebSocket||xr.MozWebSocket,WT=!0,rK="arraybuffer",qT=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class nK extends GA{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),i=this.opts.protocols,r=qT?{}:HA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=WT&&!qT?i?new th(t,i):new th(t):new th(t,i,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||rK,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const r=t[i],n=i===t.length-1;$A(r,this.supportsBinary,s=>{const a={};try{WT&&this.ws.send(s)}catch{}n&&QA(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const i=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=qA()),this.supportsBinary||(t.b64=1);const n=JA(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!th}}const sK={websocket:nK,polling:iK},aK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function o1(e){const t=e,i=e.indexOf("["),r=e.indexOf("]");i!=-1&&r!=-1&&(e=e.substring(0,i)+e.substring(i,r).replace(/:/g,";")+e.substring(r,e.length));let n=aK.exec(e||""),s={},a=14;for(;a--;)s[oK[a]]=n[a]||"";return i!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=cK(s,s.path),s.queryKey=dK(s,s.query),s}function cK(e,t){const i=/\/{2,9}/g,r=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function dK(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,s){n&&(i[n]=s)}),i}class da extends Yt{constructor(t,i={}){super(),this.writeBuffer=[],t&&typeof t=="object"&&(i=t,t=null),t?(t=o1(t),i.hostname=t.host,i.secure=t.protocol==="https"||t.protocol==="wss",i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=o1(i.host).host),uf(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ZJ(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=BA,i.transport=t,this.id&&(i.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new sK[t](r)}open(){let t;if(this.opts.rememberUpgrade&&da.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(t){let i=this.createTransport(t),r=!1;da.priorWebsocketSuccess=!1;const n=()=>{r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",u=>{if(!r)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;da.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=i.name,this.emitReserved("upgradeError",g)}}))};function s(){r||(r=!0,l(),i.close(),i=null)}const a=u=>{const g=new Error("probe error: "+u);g.transport=i.name,s(),this.emitReserved("upgradeError",g)};function o(){a("transport closed")}function c(){a("socket closed")}function d(u){i&&u.name!==i.name&&s()}const l=()=>{i.removeListener("open",n),i.removeListener("error",a),i.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};i.once("open",n),i.once("error",a),i.once("close",o),this.once("close",c),this.once("upgrading",d),i.open()}onOpen(){if(this.readyState="open",da.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const i=this.upgrades.length;for(;t<i;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(i+=JJ(n)),r>0&&i>this.maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}write(t,i,r){return this.sendPacket("message",t,i,r),this}send(t,i,r){return this.sendPacket("message",t,i,r),this}sendPacket(t,i,r,n){if(typeof i=="function"&&(n=i,i=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:i,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){da.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const i=[];let r=0;const n=t.length;for(;r<n;r++)~this.transports.indexOf(t[r])&&i.push(t[r]);return i}}da.protocol=BA;function lK(e,t="",i){let r=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),r=o1(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(i&&i.port===r.port?"":":"+r.port),r}const uK=typeof ArrayBuffer=="function",pK=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ZA=Object.prototype.toString,hK=typeof Blob=="function"||typeof Blob<"u"&&ZA.call(Blob)==="[object BlobConstructor]",gK=typeof File=="function"||typeof File<"u"&&ZA.call(File)==="[object FileConstructor]";function xb(e){return uK&&(e instanceof ArrayBuffer||pK(e))||hK&&e instanceof Blob||gK&&e instanceof File}function zh(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(zh(e[i]))return!0;return!1}if(xb(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return zh(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&zh(e[i]))return!0;return!1}function mK(e){const t=[],i=e.data,r=e;return r.data=c1(i,t),r.attachments=t.length,{packet:r,buffers:t}}function c1(e,t){if(!e)return e;if(xb(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let r=0;r<e.length;r++)i[r]=c1(e[r],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=c1(e[r],t));return i}return e}function fK(e,t){return e.data=d1(e.data,t),delete e.attachments,e}function d1(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=d1(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=d1(e[i],t));return e}const vK=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],yK=5;var Le;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class _K{constructor(t){this.replacer=t}encode(t){return(t.type===Le.EVENT||t.type===Le.ACK)&&zh(t)?this.encodeAsBinary({type:t.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===Le.BINARY_EVENT||t.type===Le.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=mK(t),r=this.encodeAsString(i.packet),n=i.buffers;return n.unshift(r),n}}function JT(e){return Object.prototype.toString.call(e)==="[object Object]"}class Ib extends Yt{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const r=i.type===Le.BINARY_EVENT;r||i.type===Le.BINARY_ACK?(i.type=r?Le.EVENT:Le.ACK,this.reconstructor=new bK(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(xb(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const r={type:Number(t.charAt(0))};if(Le[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Le.BINARY_EVENT||r.type===Le.BINARY_ACK){const s=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const a=t.substring(s,i);if(a!=Number(a)||t.charAt(i)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(t.charAt(i+1)==="/"){const s=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););r.nsp=t.substring(s,i)}else r.nsp="/";const n=t.charAt(i+1);if(n!==""&&Number(n)==n){const s=i+1;for(;++i;){const a=t.charAt(i);if(a==null||Number(a)!=a){--i;break}if(i===t.length)break}r.id=Number(t.substring(s,i+1))}if(t.charAt(++i)){const s=this.tryParse(t.substr(i));if(Ib.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case Le.CONNECT:return JT(i);case Le.DISCONNECT:return i===void 0;case Le.CONNECT_ERROR:return typeof i=="string"||JT(i);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&vK.indexOf(i[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bK{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=fK(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wK=Object.freeze(Object.defineProperty({__proto__:null,protocol:yK,get PacketType(){return Le},Encoder:_K,Decoder:Ib},Symbol.toStringTag,{value:"Module"}));function tn(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const SK=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class XA extends Yt{constructor(t,i,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[tn(t,"open",this.onopen.bind(this)),tn(t,"packet",this.onpacket.bind(this)),tn(t,"error",this.onerror.bind(this)),tn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(SK.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:Le.EVENT,data:i};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const a=this.ids++,o=i.pop();this._registerAckCallback(a,o),r.id=a}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,i){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[t]=i;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...a)=>{this.io.clearTimeoutFn(s),i.apply(this,[null,...a])}}emitWithAck(t,...i){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,s)=>{i.push((a,o)=>r?a?s(a):n(o):n(a)),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...s)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(n)):(this._queue.shift(),i&&i(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Le.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(t);break;case Le.ACK:case Le.BINARY_ACK:this.onack(t);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const r of i)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let r=!1;return function(...n){r||(r=!0,i.packet({type:Le.ACK,id:t,data:n}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(i.apply(this,t.data),delete this.acks[t.id])}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const r of i)r.apply(this,t.data)}}}function Wd(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Wd.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-i:e+i}return Math.min(e,this.max)|0};Wd.prototype.reset=function(){this.attempts=0};Wd.prototype.setMin=function(e){this.ms=e};Wd.prototype.setMax=function(e){this.max=e};Wd.prototype.setJitter=function(e){this.jitter=e};class l1 extends Yt{constructor(t,i){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,uf(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((r=i.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Wd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const n=i.parser||wK;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new da(this.uri,this.opts);const i=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=tn(i,"open",function(){r.onopen(),t&&t()}),s=tn(i,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),t?t(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&n();const o=this.setTimeoutFn(()=>{n(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(n),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(tn(t,"ping",this.onping.bind(this)),tn(t,"data",this.ondata.bind(this)),tn(t,"error",this.onerror.bind(this)),tn(t,"close",this.onclose.bind(this)),tn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){QA(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new XA(this,t,i),this.nsps[t]=r),r}_destroy(t){const i=Object.keys(this.nsps);for(const r of i)if(this.nsps[r].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let r=0;r<i.length;r++)this.engine.write(i[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},i);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fl={};function Bh(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=lK(e,t.path||"/socket.io"),r=i.source,n=i.id,s=i.path,a=fl[n]&&s in fl[n].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return o?c=new l1(r,t):(fl[n]||(fl[n]=new l1(r,t)),c=fl[n]),i.query&&!t.query&&(t.query=i.queryKey),c.socket(i.path,t)}Object.assign(Bh,{Manager:l1,Socket:XA,io:Bh,connect:Bh});const EK=e=>(t,i)=>(e.set(t,i),i),KT=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,eO=536870912,YT=eO*2,TK=(e,t)=>i=>{const r=t.get(i);let n=r===void 0?i.size:r<YT?r+1:0;if(!i.has(n))return e(i,n);if(i.size<eO){for(;i.has(n);)n=Math.floor(Math.random()*YT);return e(i,n)}if(i.size>KT)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(n);)n=Math.floor(Math.random()*KT);return e(i,n)},tO=new WeakMap,kK=EK(tO),ih=TK(kK,tO),PK=e=>e.method!==void 0&&e.method==="call",CK=e=>e.error===null&&typeof e.id=="number",RK=e=>{const t=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),r=new Map,n=new Worker(e);return n.addEventListener("message",({data:d})=>{if(PK(d)){const{params:{timerId:l,timerType:u}}=d;if(u==="interval"){const g=t.get(l);if(typeof g=="number"){const m=r.get(g);if(m===void 0||m.timerId!==l||m.timerType!==u)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g();else throw new Error("The timer is in an undefined state.")}else if(u==="timeout"){const g=i.get(l);if(typeof g=="number"){const m=r.get(g);if(m===void 0||m.timerId!==l||m.timerType!==u)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g(),i.delete(l);else throw new Error("The timer is in an undefined state.")}}else if(CK(d)){const{id:l}=d,u=r.get(l);if(u===void 0)throw new Error("The timer is in an undefined state.");const{timerId:g,timerType:m}=u;r.delete(l),m==="interval"?t.delete(g):i.delete(g)}else{const{error:{message:l}}=d;throw new Error(l)}}),{clearInterval:d=>{const l=ih(r);r.set(l,{timerId:d,timerType:"interval"}),t.set(d,l),n.postMessage({id:l,method:"clear",params:{timerId:d,timerType:"interval"}})},clearTimeout:d=>{const l=ih(r);r.set(l,{timerId:d,timerType:"timeout"}),i.set(d,l),n.postMessage({id:l,method:"clear",params:{timerId:d,timerType:"timeout"}})},setInterval:(d,l)=>{const u=ih(t);return t.set(u,()=>{d(),typeof t.get(u)=="function"&&n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"interval"}})}),n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"interval"}}),u},setTimeout:(d,l)=>{const u=ih(i);return i.set(u,d),n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"timeout"}}),u}}},xK=(e,t)=>{let i=null;return()=>{if(i!==null)return i;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return i=e(n),setTimeout(()=>URL.revokeObjectURL(n)),i}},IK=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,iO=xK(RK,IK),rO=e=>iO().clearInterval(e),nO=(e,t)=>iO().setInterval(e,t);var AK=Object.defineProperty,OK=(e,t,i)=>t in e?AK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,v=(e,t,i)=>(OK(e,typeof t!="symbol"?t+"":t,i),i),Ab=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},h=(e,t,i)=>(Ab(e,t,"read from private field"),i?i.call(e):t.get(e)),I=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},A=(e,t,i,r)=>(Ab(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),Nt=(e,t,i)=>(Ab(e,t,"access private method"),i),ce;(function(e){e[e.MAJOR_EVENT=0]="MAJOR_EVENT",e[e.MINOR_EVENT=1]="MINOR_EVENT"})(ce||(ce={}));var q;(function(e){e.PRECALL_TEST_BEGIN="precall_begin",e.PRECALL_TEST_COMPLETE="precall_end",e.CALL_JOIN_BEGIN="call_join",e.NET_QUALITY_TEST_BEGIN="net_quality_test_begin",e.NET_QUALITY_TEST_END="net_quality_test_end",e.WEBSOCKET_CONNECTED="websocket_connected",e.TRANSPORT_CONNECTED="transport_connected",e.AUDIO_ON="audio_on",e.AUDIO_OFF="audio_off",e.VIDEO_ON="video_on",e.VIDEO_OFF="video_off",e.PARTICIPANT_ROLE="participant_role",e.PING_STAT="ping_stat",e.DISCONNECT="disconnect",e.RECONNECT_ATTEMPT="reconnect_attempt",e.SCREENSHARE_START_REQUESTED="screenshare_start_requested",e.SCREENSHARE_STARTED="screenshare_started",e.SCREENSHARE_STOPPED="screenshare_stopped",e.TAB_CHANGE="tab_change",e.BROWSER_BACKGROUNDED="browser_backgrounded",e.BROWSER_FOREGROUNDED="browser_foregrounded",e.DOMINANT_SPEAKER="dominant_speaker",e.AUDIO_DEVICES_UPDATES="audio_devices_updates",e.VIDEO_DEVICES_UPDATES="video_devices_updates",e.SPEAKER_DEVICES_UPDATES="speaker_devices_updates",e.SELECTED_MICROHPONE_UPDATE="selected_microphone_update",e.SELECTED_CAMERA_UPDATE="selected_camera_update",e.SELECTED_SPEAKER_UPDATE="selected_speaker_update",e.MEDIA_PERMISSION="camera_permission",e.LEGACY_SWITCH="legacy_switch",e.AUDIO_PLAY_FAILED="audio_play_failed",e.VIDEO_PLAY_FAILED="video_play_failed",e.AUDIO_TRACK_MUTED="audio_track_muted",e.VIDEO_TRACK_MUTED="video_track_muted",e.IVS_PLAYER_REBUFFERING="ivs_player_rebuffering",e.IVS_PLAYER_AUDIO_BLOCKED="ivs_player_audio_blocked",e.IVS_PLAYER_PLAYBACK_BLOCKED="ivs_player_playback_blocked",e.IVS_PLAYER_ERROR="ivs_player_error",e.IVS_PLAYER_RECOVERABLE_ERROR="ivs_player_recoverable_error",e.IVS_PLAYER_WORKER_ERROR="ivs_player_worker_error",e.IVS_PLAYER_NETWORK_UNAVAILABLE="ivs_player_network_unavailable",e.LIVESTREAM_LATENCY="livestream_latency",e.IVS_PLAYER_ANALYTICS_EVENT="ivs_player_analytics_event",e.IVS_PLAYER_PLAYBACK_RATE_CHANGED="ivs_player_playback_rate_changed",e.IVS_PLAYER_QUALITY_CHANGED="ivs_player_quality_changed",e.IVS_PLAYER_INITIALIZED="ivs_player_initialized"})(q||(q={}));const MK=new Map([[q.PRECALL_TEST_BEGIN,ce.MINOR_EVENT],[q.PRECALL_TEST_COMPLETE,ce.MINOR_EVENT],[q.CALL_JOIN_BEGIN,ce.MAJOR_EVENT],[q.NET_QUALITY_TEST_BEGIN,ce.MINOR_EVENT],[q.NET_QUALITY_TEST_END,ce.MINOR_EVENT],[q.WEBSOCKET_CONNECTED,ce.MINOR_EVENT],[q.TRANSPORT_CONNECTED,ce.MAJOR_EVENT],[q.AUDIO_ON,ce.MINOR_EVENT],[q.AUDIO_OFF,ce.MINOR_EVENT],[q.VIDEO_ON,ce.MINOR_EVENT],[q.VIDEO_OFF,ce.MINOR_EVENT],[q.PARTICIPANT_ROLE,ce.MINOR_EVENT],[q.PING_STAT,ce.MAJOR_EVENT],[q.DISCONNECT,ce.MAJOR_EVENT],[q.RECONNECT_ATTEMPT,ce.MAJOR_EVENT],[q.SCREENSHARE_START_REQUESTED,ce.MINOR_EVENT],[q.SCREENSHARE_STARTED,ce.MINOR_EVENT],[q.SCREENSHARE_STOPPED,ce.MINOR_EVENT],[q.TAB_CHANGE,ce.MINOR_EVENT],[q.BROWSER_BACKGROUNDED,ce.MINOR_EVENT],[q.BROWSER_FOREGROUNDED,ce.MINOR_EVENT],[q.DOMINANT_SPEAKER,ce.MINOR_EVENT],[q.AUDIO_DEVICES_UPDATES,ce.MINOR_EVENT],[q.VIDEO_DEVICES_UPDATES,ce.MINOR_EVENT],[q.SPEAKER_DEVICES_UPDATES,ce.MINOR_EVENT],[q.SELECTED_MICROHPONE_UPDATE,ce.MINOR_EVENT],[q.SELECTED_CAMERA_UPDATE,ce.MINOR_EVENT],[q.SELECTED_SPEAKER_UPDATE,ce.MINOR_EVENT],[q.MEDIA_PERMISSION,ce.MINOR_EVENT],[q.LEGACY_SWITCH,ce.MINOR_EVENT],[q.AUDIO_PLAY_FAILED,ce.MINOR_EVENT],[q.VIDEO_PLAY_FAILED,ce.MINOR_EVENT],[q.AUDIO_TRACK_MUTED,ce.MINOR_EVENT],[q.VIDEO_TRACK_MUTED,ce.MINOR_EVENT],[q.IVS_PLAYER_REBUFFERING,ce.MAJOR_EVENT],[q.IVS_PLAYER_AUDIO_BLOCKED,ce.MAJOR_EVENT],[q.IVS_PLAYER_PLAYBACK_BLOCKED,ce.MAJOR_EVENT],[q.IVS_PLAYER_ERROR,ce.MAJOR_EVENT],[q.IVS_PLAYER_RECOVERABLE_ERROR,ce.MAJOR_EVENT],[q.IVS_PLAYER_WORKER_ERROR,ce.MAJOR_EVENT],[q.IVS_PLAYER_NETWORK_UNAVAILABLE,ce.MAJOR_EVENT],[q.LIVESTREAM_LATENCY,ce.MAJOR_EVENT],[q.IVS_PLAYER_ANALYTICS_EVENT,ce.MINOR_EVENT],[q.IVS_PLAYER_PLAYBACK_RATE_CHANGED,ce.MINOR_EVENT],[q.IVS_PLAYER_QUALITY_CHANGED,ce.MINOR_EVENT],[q.IVS_PLAYER_INITIALIZED,ce.MINOR_EVENT]]);var u1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zi={},DK={get exports(){return zi},set exports(e){zi=e}},hd=typeof Reflect=="object"?Reflect:null,QT=hd&&typeof hd.apply=="function"?hd.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Hh;hd&&typeof hd.ownKeys=="function"?Hh=hd.ownKeys:Object.getOwnPropertySymbols?Hh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Hh=function(e){return Object.getOwnPropertyNames(e)};function LK(e){console&&console.warn&&console.warn(e)}var sO=Number.isNaN||function(e){return e!==e};function Xe(){Xe.init.call(this)}DK.exports=Xe;zi.once=$K;Xe.EventEmitter=Xe;Xe.prototype._events=void 0;Xe.prototype._eventsCount=0;Xe.prototype._maxListeners=void 0;var ZT=10;function pf(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Xe,"defaultMaxListeners",{enumerable:!0,get:function(){return ZT},set:function(e){if(typeof e!="number"||e<0||sO(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ZT=e}});Xe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||sO(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function aO(e){return e._maxListeners===void 0?Xe.defaultMaxListeners:e._maxListeners}Xe.prototype.getMaxListeners=function(){return aO(this)};Xe.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=n[e];if(o===void 0)return!1;if(typeof o=="function")QT(o,this,t);else for(var c=o.length,d=uO(o,c),i=0;i<c;++i)QT(d[i],this,t);return!0};function oO(e,t,i,r){var n,s,a;if(pf(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),a===void 0)a=s[t]=i,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),n=aO(e),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,LK(o)}return e}Xe.prototype.addListener=function(e,t){return oO(this,e,t,!1)};Xe.prototype.on=Xe.prototype.addListener;Xe.prototype.prependListener=function(e,t){return oO(this,e,t,!0)};function NK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function cO(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=NK.bind(r);return n.listener=i,r.wrapFn=n,n}Xe.prototype.once=function(e,t){return pf(t),this.on(e,cO(this,e,t)),this};Xe.prototype.prependOnceListener=function(e,t){return pf(t),this.prependListener(e,cO(this,e,t)),this};Xe.prototype.removeListener=function(e,t){var i,r,n,s,a;if(pf(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():UK(i,n),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};Xe.prototype.off=Xe.prototype.removeListener;Xe.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),s;for(r=0;r<n.length;++r)s=n[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function dO(e,t,i){var r=e._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?jK(n):uO(n,n.length)}Xe.prototype.listeners=function(e){return dO(this,e,!0)};Xe.prototype.rawListeners=function(e){return dO(this,e,!1)};Xe.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):lO.call(e,t)};Xe.prototype.listenerCount=lO;function lO(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Xe.prototype.eventNames=function(){return this._eventsCount>0?Hh(this._events):[]};function uO(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function UK(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function jK(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function $K(e,t){return new Promise(function(i,r){function n(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),i([].slice.call(arguments))}pO(e,t,s,{once:!0}),t!=="error"&&VK(e,n,{once:!0})})}function VK(e,t,i){typeof e.on=="function"&&pO(e,"error",t,i)}function pO(e,t,i,r){if(typeof e.on=="function")r.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){r.once&&e.removeEventListener(t,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var XT;(function(e){e.CHROMIUM="chromum",e.FIREFOX="firefox",e.SAFARI="safari"})(XT||(XT={}));var Wu;(function(e){e.DEV="dev",e.STAGING="staging",e.PRODUCTION="production"})(Wu||(Wu={}));var kr;(function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SPEAKER="SPEAKER"})(kr||(kr={}));var ga;(function(e){e[e.INIT=0]="INIT",e[e.ACCEPTED=1]="ACCEPTED",e[e.DENIED=2]="DENIED",e[e.SYS_DENIED=3]="SYS_DENIED",e[e.FAILED=4]="FAILED",e[e.NOTFOUND=5]="NOTFOUND",e[e.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(ga||(ga={}));class FK{constructor(){v(this,"currentChunk"),v(this,"flushedChunks"),this.currentChunk={entries:[]},this.flushedChunks=[]}add(t){this.currentChunk.entries.push(t)}flush(){const t=this.currentChunk;return this.currentChunk={entries:[]},this.flushedChunks.push(t),t}}class zK extends zi{constructor({logger:t,peerId:i,env:r}){super(),v(this,"logger"),v(this,"peerId"),v(this,"eventStore"),v(this,"apiEndpoint"),this.logger=t,this.peerId=i,r===Wu.PRODUCTION?this.apiEndpoint="https://collector.prod.da.dyte.io/api/v1/message":this.apiEndpoint="https://collector.non-prod.da.dyte.io/api/v1/message",this.eventStore=new FK}async sendEventsChunkToServer(t){const i={payload:t,peerId:this.peerId};try{return await fetch(this.apiEndpoint,{method:"POST",body:JSON.stringify(i)}),!0}catch(r){return this.logger.error("callStats::sendEventsChunkToServer::catch",{error:r}),!1}}callEvent(t){t.timestamp=new Date,this.eventStore.add(t),this.emit(t.event,t.metaData),MK.get(t.event)===ce.MAJOR_EVENT&&this.flush()}async flush(){var t;const i=this.eventStore.flush();return(t=i==null?void 0:i.entries)!=null&&t.length?(await this.sendEventsChunkToServer(i),!0):!1}}class Rs{constructor(t){v(this,"pc1"),v(this,"pc2"),v(this,"constrainVideoBitrateKbps"),v(this,"constrainOfferToRemoveVideoFec",!1),v(this,"iceCandidateFilter");const i=new RTCPeerConnection(t),r=new RTCPeerConnection(t);this.pc1=i,this.pc2=r,this.iceCandidateFilter=Rs.noFilter,this.pc1.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc1))}static parseCandidate(t){const i="candidate:",r=t.indexOf(i)+i.length,n=t.substr(r).split(" ");return{type:n[7],protocol:n[2],address:n[4]}}static isNotHostCandidate(t){return t.type!=="host"}static isHost(t){return t.type==="host"}static isRelay(t){return t.type==="relay"}static isReflexive(t){return t.type==="srflx"}static noFilter(t){return!0}onIceCandidate(t,i){if(i.candidate){const r=Rs.parseCandidate(i.candidate.candidate);this.iceCandidateFilter(r)&&t.addIceCandidate(i.candidate)}}setIceCandidateFilter(t){this.iceCandidateFilter=t}constrainVideoBitrate(t){this.constrainVideoBitrateKbps=t}disableVideoFec(){this.constrainOfferToRemoveVideoFec=!0}gotOffer(t){this.constrainOfferToRemoveVideoFec&&(t.sdp=t.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),t.sdp=t.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(t),this.pc2.setRemoteDescription(t),this.pc2.createAnswer().then(this.gotAnswer.bind(this),this.reportFatal.bind(this))}gotAnswer(t){this.constrainVideoBitrateKbps&&(t.sdp=t.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${this.constrainVideoBitrateKbps}\r
`)),this.pc2.setLocalDescription(t),this.pc1.setRemoteDescription(t)}establishConnection(){this.pc1.createOffer().then(this.gotOffer.bind(this),this.reportFatal.bind(this))}reportFatal(t){console.error("Error:",t)}async getRoundTripTime(){const[t,i]=await Promise.all([this.pc1.getStats(),this.pc2.getStats()]);let r,n;if(t.forEach(s=>{s.type==="candidate-pair"&&s.nominated===!0&&s.bytesSent>0&&(r=s)}),i.forEach(s=>{s.type==="candidate-pair"&&s.nominated===!0&&s.bytesReceived>0&&(n=s)}),r&&n)try{if(r.currentRoundTripTime&&n.currentRoundTripTime)return{rtt:r.currentRoundTripTime,backendRTT:n.currentRoundTripTime};const s=(n.lastPacketReceivedTimestamp-r.lastPacketSentTimestamp)/1e3;return{rtt:s,backendRTT:s}}catch{return}}close(){this.pc1.close(),this.pc2.close()}}class hO extends zi{constructor(t){super(),v(this,"call"),v(this,"timeOut"),this.call=new Rs(t)}start(t=1e4){this.call.establishConnection(),this.timeOut=setTimeout(this.testFailed.bind(this),t)}testComplete(t){clearTimeout(this.timeOut),this.call.close(),this.emit("done",t)}testFailed(t){console.warn("Test failed, ",t),this.call.close(),this.emit("failed",t)}}const BK=8,HK=1/1e3;class GK extends hO{constructor(t){super(t),v(this,"senderChannel"),v(this,"recieveChannel"),v(this,"startTime"),v(this,"lastBitrateMeasureTime"),v(this,"sentPayloadBytes",0),v(this,"recievedPayloadBytes",0),v(this,"lastReceivedPayloadBytes",0),v(this,"stopSending",!1),v(this,"testProgress",0),v(this,"samplePacket",""),v(this,"finalBitrateSum",0),v(this,"bitRateSampels",0),v(this,"maxNumberOfPacketsToSend",0),v(this,"bytesToKeepBuffered",0),v(this,"testDurationSeconds",5),this.call.setIceCandidateFilter(Rs.isNotHostCandidate),this.senderChannel=this.call.pc1.createDataChannel(null);for(let i=0;i<1024*256;i+=1)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.testDurationSeconds=4,this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onRecieverChannel.bind(this))}sendingStep(){const t=new Date;this.startTime||(this.startTime=t,this.lastBitrateMeasureTime=t);for(let r=0;r!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);r+=1){this.sentPayloadBytes+=this.samplePacket.length;try{this.senderChannel.send(this.samplePacket)}catch{}}const i=t.getTime()-this.startTime.getTime();i>=1e3*this.testDurationSeconds?(this.stopSending=!0,this.testProgress=100):(this.testProgress=i/(10*this.testDurationSeconds),setTimeout(this.sendingStep.bind(this),1))}onMessageRecieved(t){this.recievedPayloadBytes+=t.data.length;const i=new Date,r=i.getTime()-this.lastBitrateMeasureTime.getTime();if(r>=1e3){const n=(this.recievedPayloadBytes-this.lastReceivedPayloadBytes)*BK/(r/1e3);this.finalBitrateSum+=n,this.bitRateSampels+=1,this.lastReceivedPayloadBytes=this.recievedPayloadBytes,this.lastBitrateMeasureTime=i}if(this.stopSending&&this.sentPayloadBytes===this.recievedPayloadBytes){const n=this.finalBitrateSum/this.bitRateSampels;this.testComplete({throughput:Math.round(n*HK)})}}testComplete(t){this.call.getRoundTripTime().then(({rtt:i,backendRTT:r})=>super.testComplete({RTT:i,backendRTT:r,throughput:t.throughput}))}onRecieverChannel(t){this.recieveChannel=t.channel,this.recieveChannel.addEventListener("message",this.onMessageRecieved.bind(this))}}class Ob extends hO{constructor(t,i=Rs.noFilter){super(t),v(this,"ch1"),v(this,"ch2"),this.call.setIceCandidateFilter(i);const r=this.call.pc1.createDataChannel(null);this.ch1=r,r.addEventListener("open",()=>{r.send("hello")}),r.addEventListener("message",this.onCh1Recieve.bind(this)),this.call.pc2.addEventListener("datachannel",this.dataChannelHandler.bind(this))}onCh1Recieve(t){t.data!=="world"?this.hangup("Invalid data transmitted."):this.testComplete({connectivity:!0})}onCh2Recieve(t){if(t.data!=="hello")this.hangup("Invalid data transmitted.");else try{this.ch2.send("world")}catch{}}dataChannelHandler(t){const i=t.channel;this.ch2=i,i.addEventListener("message",this.onCh2Recieve.bind(this))}hangup(t){this.testFailed(t)}}class WK extends Ob{constructor(t){super(t,Rs.isHost)}}class qK extends Ob{constructor(t){super(t,Rs.isRelay)}}class JK extends Ob{constructor(t){super(t,Rs.isReflexive)}}class KK{constructor(){v(this,"ipInformation",null)}async getIPDetails({peerId:t}){var i;if(!this.ipInformation){try{const n=await(await fetch("https://media-location.dyte.io")).json();if(((i=n.loc)==null?void 0:i.length)>5)return this.ipInformation=n,n;throw Error("Insufficient data")}catch{}const r=await fetch(`https://location-service.dyte.io/?token=3c493932b0624c&peerId=${t}`,{method:"POST"});this.ipInformation=await r.json()}return this.ipInformation}}const Mb=new KK,ek=[{urls:"turn:turn.dyte.in:443?transport=tcp",username:"dyte",credential:"dytein",credentialType:"password"},{urls:"turn:turn.dyte.in:3478?transport=udp",username:"dyte",credential:"dytein",credentialType:"password"}];function YK(e){const[t,i]=e.split(",");return{coords:{latitude:Number(t),longitude:Number(i)}}}class gO{constructor(){v(this,"transport"),v(this,"candidatePair"),v(this,"outboundVideoRtp",new Map),v(this,"inboundVideoRtp",new Map),v(this,"outboundAudioRtp",new Map),v(this,"inboundAudioRtp",new Map),v(this,"remoteInboundRtp",new Map),v(this,"producerStreamMap",new Map),v(this,"consumerStreamMap",new Map),v(this,"staleProducerStreamMap",!1),v(this,"staleConsumerStreamMap",!1)}}class mO{constructor(){v(this,"outboundProducerMap",new Map),v(this,"inboundConsumerMap",new Map),v(this,"consumerPeerIdMap",new Map),v(this,"overallProducingTransportsStatsMap",{}),v(this,"overallConsumingTransportsStatsMap",{}),v(this,"overallConsumersStatsMap",{}),v(this,"overallProducersStatsMap",{}),v(this,"consumerIdsWithFreezedVideo",new Set),v(this,"consumerIdsWithFreezedAudio",new Set),v(this,"producerIdsWithFreezedVideo",new Set),v(this,"producerIdsWithFreezedAudio",new Set),v(this,"freezedProducingTransportIds",new Set),v(this,"freezedConsumingTransportIds",new Set),v(this,"ipDetails"),v(this,"callStatsInstance")}async registerProducer(t){await this.generateProducerStreamMap(t),t.observer.on("close",this.deregisterProducer.bind(this,t))}processInboundConsumerVideoStats(t,i,r){var n,s;const a=((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.get(t))||{};i.totalVideoPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedVideo.add(t),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoFreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_video_status","pause",t))):(i.totalVideoPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedVideo.has(t)&&(this.consumerIdsWithFreezedVideo.delete(t),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoDefreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_video_status","resume",t))))}processInboundConsumerAudioStats(t,i,r){var n,s;const a=((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.get(t))||{};i.totalAudioPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedAudio.add(t),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioFreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","pause",t))):(i.totalAudioPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedAudio.has(t)&&(this.consumerIdsWithFreezedAudio.delete(t),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioDefreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","resume",t))))}processOutboundProducerVideoStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{};i.totalVideoPacketsSent===r.packetsSent?(this.producerIdsWithFreezedVideo.add(t),this.callStatsInstance&&s.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoFreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_video_status","pause",t))):(i.totalVideoPacketsSent=r.packetsSent,this.producerIdsWithFreezedVideo.has(t)&&(this.producerIdsWithFreezedVideo.delete(t),this.callStatsInstance&&s.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoDefreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_video_status","resume",t))))}processOutboundProducerAudioStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{};i.totalAudioPacketsSent===r.packetsSent?(this.producerIdsWithFreezedAudio.add(t),this.callStatsInstance&&s.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioFreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_audio_status","pause",t))):(i.totalAudioPacketsSent=r.packetsSent,this.producerIdsWithFreezedAudio.has(t)&&(this.producerIdsWithFreezedAudio.delete(t),this.callStatsInstance&&s.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioDefreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_audio_status","resume",t))))}processProducingTransportStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{},{audio:a,video:o,screen:c}=s,d=a||o||c;i.totalPacketsSent===r.packetsSent?(this.freezedProducingTransportIds.add(t),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportFreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("producing_transport_status","pause",t))):(i.totalPacketsSent=r.packetsSent,this.freezedProducingTransportIds.has(t)&&(this.freezedProducingTransportIds.delete(t),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportDefreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("producing_transport_status","resume",t))))}processConsumingTransportStats(t,i,r){var n,s;const a=!!Array.from(((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.values())||[]).reduce((o,c)=>o||c.audio||c.video||c.screen,!1);i.totalPacketsReceived===r.packetsSent?(this.freezedConsumingTransportIds.add(t),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportFreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","pause",t))):(i.totalPacketsReceived=r.packetsSent,this.freezedConsumingTransportIds.has(t)&&(this.freezedConsumingTransportIds.delete(t),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportDefreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","resume",t))))}async registerConsumer(t){await this.generateConsumerStreamMap(t),this.consumerPeerIdMap.set(t.id,{producerId:t.producerId,peerId:t.appData.peerId}),t.observer.on("close",this.deregisterConsumer.bind(this,t))}async generateProducerStreamMap(t,i=!1){const r=await t.getStats(),n=i?this.getProducerStatsFromReport(this.parseRTCReport(r,["outbound-rtp","remote-inbound-rtp"],!1,t.id))[0]:void 0;for(const s of r.values())switch(s.type){case"outbound-rtp":{this.outboundProducerMap.set(s.id,t.id);break}}return n}async generateConsumerStreamMap(t,i=!1){const r=await t.getStats(),n=i?this.getConsumerStatsFromReport(this.parseRTCReport(r,["inbound-rtp"],!1,t.id))[0]:void 0;for(const s of r.values())switch(s.type){case"inbound-rtp":{this.inboundConsumerMap.set(s.id,t.id);break}}return n}deregisterProducer(t){this.outboundProducerMap.forEach((i,r)=>{i===t.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(t){this.inboundConsumerMap.forEach((i,r)=>{i===t.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(t.id)}parseRTCReport(t,i=[],r=!1,n=void 0,s=void 0){const a=t,o=new gO,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const l=d,u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=u;break}break}case"transport":{const l=d;s&&(s.producing&&(this.overallProducingTransportsStatsMap[s.id]||(this.overallProducingTransportsStatsMap[s.id]={totalPacketsSent:0})),s.consuming&&(this.overallConsumingTransportsStatsMap[s.id]||(this.overallConsumingTransportsStatsMap[s.id]={totalPacketsReceived:0})));const u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=u,s){if(s.producing){const g=this.overallProducingTransportsStatsMap[s.id];this.processProducingTransportStats(s.id,g,u)}if(s.consuming){const g=this.overallConsumingTransportsStatsMap[s.id];this.processConsumingTransportStats(s.id,g,u)}}break}case"remote-inbound-rtp":{const l=d,u={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,u);break}case"outbound-rtp":{const l=d,u=n||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[u]||(this.overallProducersStatsMap[u]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(u)||o.producerStreamMap.set(u,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.targetBitrate,totalPacketSendDelay:f.totalPacketSendDelay,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(d.id,w),o.producerStreamMap.get(u).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(d.id,w),o.producerStreamMap.get(u).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(u,g,w)}}break}case"inbound-rtp":{const l=d,u=n||this.inboundConsumerMap.get(d.id);if(l.ssrc===1234)break;this.overallConsumersStatsMap[u]||(this.overallConsumersStatsMap[u]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(u)||o.consumerStreamMap.set(u,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(u,g,w)}}break}}}if(o.outboundVideoRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,l=0;o.remoteInboundRtp.forEach((u,g)=>{u.roundTripTime&&u.roundTripTime>d&&(d=u.roundTripTime,l=u.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=l}return o}async getProducersReport(t){const i=t.map(r=>this.generateProducerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getConsumersReport(t){const i=t.map(r=>this.generateConsumerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getTransportReport(t){return t.getStats()}async getProcessedStats(t,i,r){const n=await this.getTransportReport(t),s={producing:r,consuming:i,id:t.id},a=n,o=this.parseRTCReport(a,["transport","candidate-pair","inbound-rtp","outbound-rtp","remote-inbound-rtp"],!1,void 0,s);if(!o)return;const c={stats:o.transport,transportId:t.id,consuming:i,producing:r},d=o.staleProducerStreamMap?void 0:this.getProducerStatsFromReport(o),l=o.staleConsumerStreamMap?void 0:this.getConsumerStatsFromReport(o);return{transportReport:c,producerReport:d,consumerReport:l}}getProducerStatsFromReport(t){const i=[];try{t.producerStreamMap.forEach((r,n)=>{var s,a;i.push({producerId:n,videoStats:r.outboundVideoRtpId.map(o=>t.outboundVideoRtp.get(o)),audioStats:r.outboundAudioRtpId.map(o=>t.outboundAudioRtp.get(o)),appData:((a=(s=this.callStatsInstance.producers)==null?void 0:s.get(n))==null?void 0:a.appData)||null})})}catch(r){this.callStatsInstance.logger.error("callStats::measurements::getProducerStatsFromReport",{error:{reason:r.reason,message:r.message}})}return i}getConsumerStatsFromReport(t){const i=[];try{t.consumerStreamMap.forEach((r,n)=>{const{peerId:s,producerId:a}=this.consumerPeerIdMap.get(n);i.push({consumerId:n,peerId:s,producerId:a,videoStats:r.inboundVideoRtpId.map(o=>t.inboundVideoRtp.get(o)),audioStats:r.inboundAudioRtpId.map(o=>t.inboundAudioRtp.get(o))})})}catch(r){console.error("getConsumersReport: ",r,t)}return i}async getUserLocation(){return new Promise((t,i)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{t(r)}):i()}catch(r){i(r)}})}async getConnectivity(t){try{const i={iceServers:t||ek},r=new Promise((d,l)=>{try{const u=new WK(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),n=new Promise((d,l)=>{try{const u=new qK(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),s=new Promise((d,l)=>{try{const u=new JK(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),[a,o,c]=await Promise.all([r,n,s]);return{host:a==null?void 0:a.connectivity,relay:o==null?void 0:o.connectivity,reflexive:c==null?void 0:c.connectivity}}catch{return{host:!1,relay:!1,reflexive:!1}}}async getThroughput(t){try{const i=await new Promise((r,n)=>{try{const s={iceServers:t||ek},a=new GK(s);a.addListener("done",r),a.addListener("failed",n),a.start(1e4)}catch(s){n(s)}});return{throughput:i.throughput,fractionalLoss:0,RTT:i.RTT,jitter:0,backendRTT:i.backendRTT}}catch{return}}async getIPDetails(){var t;try{return this.ipDetails||(this.ipDetails=await Mb.getIPDetails({peerId:(t=this.callStatsInstance)==null?void 0:t.peerId})),this.ipDetails}catch{return}}async getNetworkQuality(t){const[i,r]=await Promise.all([this.getConnectivity(t),this.getThroughput(t)]);return{connectivity:i,throughput:r==null?void 0:r.throughput,fractionalLoss:r==null?void 0:r.fractionalLoss,RTT:r==null?void 0:r.RTT,jitter:r==null?void 0:r.jitter,backendRTT:r==null?void 0:r.backendRTT}}async getNetworkInfo(t){var i;const[r,n,s]=await Promise.all([this.getConnectivity(t),this.getThroughput(t),this.getIPDetails()]);return{ipDetails:s,effectiveNetworkType:(i=navigator.connection)==null?void 0:i.effectiveType,location:s.loc?YK(s.loc):void 0,turnConnectivity:r?r.host||r.relay||r.reflexive:!1,connectivity:r,throughput:n==null?void 0:n.throughput,fractionalLoss:n==null?void 0:n.fractionalLoss,RTT:n==null?void 0:n.RTT,jitter:n==null?void 0:n.jitter,backendRTT:n==null?void 0:n.backendRTT}}}class QK extends mO{}class fO extends mO{constructor(){super(...arguments),v(this,"producerMap",new Map),v(this,"consumerMap",new Map)}async registerProducer(t){this.producerMap.set(t.id,t),await this.generateProducerStreamMap(t),t.observer.on("close",this.deregisterProducer.bind(this,t))}async registerConsumer(t){this.consumerMap.set(t.id,t),await this.generateConsumerStreamMap(t),this.consumerPeerIdMap.set(t.id,{producerId:t.producerId,peerId:t.appData.peerId}),t.observer.on("close",this.deregisterConsumer.bind(this,t))}async generateConsumerStreamMap(t,i=!1){const r=await t.getStats(),n=this.parseRTCReport(r,["inbound-rtp"],!1,t.id),s=[...n.consumerStreamMap.values()][0],a=i?this.getConsumerStatsFromParsedConsumerStats(n,s,t.id):void 0;for(const o of r.values())switch(o.type){case"inbound-rtp":{this.inboundConsumerMap.set(o.id,t.id);break}}return a}deregisterProducer(t){this.producerMap.delete(t.id),this.outboundProducerMap.forEach((i,r)=>{i===t.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(t){this.consumerMap.delete(t.id),this.inboundConsumerMap.forEach((i,r)=>{i===t.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(t.id)}parseRTCReport(t,i=[],r=!1,n=void 0,s=void 0){const a=t,o=new gO,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const l=d,u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=u;break}break}case"transport":{const l=d;s&&(s.producing&&(this.overallProducingTransportsStatsMap[s.id]||(this.overallProducingTransportsStatsMap[s.id]={totalPacketsSent:0})),s.consuming&&(this.overallConsumingTransportsStatsMap[s.id]||(this.overallConsumingTransportsStatsMap[s.id]={totalPacketsReceived:0})));const u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=u,s){if(s.producing){const g=this.overallProducingTransportsStatsMap[s.id];this.processProducingTransportStats(s.id,g,u)}if(s.consuming){const g=this.overallConsumingTransportsStatsMap[s.id];this.processConsumingTransportStats(s.id,g,u)}}break}case"remote-inbound-rtp":{const l=d,u={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,u);break}case"outbound-rtp":{const l=d,u=n||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[u]||(this.overallProducersStatsMap[u]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(u)||o.producerStreamMap.set(u,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.totalEncodeTime,totalPacketSendDelay:f.totalEncodeTime,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(d.id,w),o.producerStreamMap.get(u).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(d.id,w),o.producerStreamMap.get(u).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(u,g,w)}}break}case"inbound-rtp":{const l=d,u=n||this.inboundConsumerMap.get(d.id);this.overallConsumersStatsMap[u]||(this.overallConsumersStatsMap[u]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(u)||o.consumerStreamMap.set(u,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(u,g,w)}}break}}}if(o.outboundVideoRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.bytesReceived=o.candidatePair.bytesReceived,o.transport.bytesSent=o.candidatePair.bytesSent,o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,l=0;o.remoteInboundRtp.forEach((u,g)=>{u.roundTripTime&&u.roundTripTime>d&&(d=u.roundTripTime,l=u.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=l}return o}getProducerStatsFromReport(t){const i=[];try{t.producerStreamMap.forEach((r,n)=>{const s=this.producerMap.get(n).track.getSettings(),a=r.outboundVideoRtpId.map(c=>{const d=t.outboundVideoRtp.get(c);return d.frameHeight||(d.frameHeight=s.height,d.frameWidth=s.width,d.framesPerSecond=s.frameRate),d}),o={producerId:n,videoStats:a,audioStats:r.outboundAudioRtpId.map(c=>t.outboundAudioRtp.get(c))};i.push(o)})}catch(r){console.error("getProducersReport: ",r,t)}return i}getConsumerStatsFromParsedConsumerStats(t,i,r){let n;try{const{peerId:s,producerId:a}=this.consumerPeerIdMap.get(r),o=i==null?void 0:i.inboundVideoRtpId.map(c=>{const d=this.consumerMap.get(r).track.getSettings(),l=t.inboundVideoRtp.get(c);return l.frameHeight||(l.frameHeight=d.height,l.frameWidth=d.width,l.framesPerSecond=d.frameRate),l});n={consumerId:r,peerId:s,producerId:a,videoStats:o,audioStats:i==null?void 0:i.inboundAudioRtpId.map(c=>t.inboundAudioRtp.get(c))}}catch(s){console.error("getConsumerStatsFromParsedConsumerStats: ",s,t)}return n}getConsumerStatsFromReport(t){const i=[];try{t.consumerStreamMap.forEach((r,n)=>{i.push(this.getConsumerStatsFromParsedConsumerStats(t,r,n))})}catch(r){console.error("getConsumerStatsFromReport: ",r,t)}return i}}class ZK extends fO{}function om(e,t,i,r){if(typeof i=="function"&&r instanceof t)i.call(null,r,e);else throw r}function tk(e,t,i){const r=e.value;return e.value=function(...n){try{const s=r.apply(this,n);return s&&s instanceof Promise?s.catch(a=>{om(this,t,i,a)}):s}catch(s){om(this,t,i,s)}return null},e}const fe=(e,t)=>(i,r,n)=>{const s=n.value;return n.value=function(...a){try{const o=s.apply(this,a);return o&&o instanceof Promise?o.catch(c=>{om(this,e,t,c)}):o}catch(o){om(this,e,t,o)}return null},n},XK=(e,t)=>(i,r,n)=>{if(n)return tk(n,e,t);for(const s of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,s);a.value instanceof Function&&Object.defineProperty(i.prototype,s,tk(a,e,t))}};var pe=globalThis&&globalThis.__decorate||function(e,t,i,r){var n=arguments.length,s=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,i,s):a(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const he=console;let le=class{constructor(e="https://api.testingv3.dyte.in",t="Blink",i=Wu.PRODUCTION,r,n,s){switch(v(this,"eventHandler"),v(this,"measurements"),v(this,"producingTransport"),v(this,"consumingTransport"),v(this,"producers",new Map),v(this,"consumers",new Map),v(this,"iceServers"),v(this,"connectionInfoPromise"),v(this,"pingStatsTimeout"),v(this,"logger"),v(this,"env"),v(this,"peerId"),v(this,"consumerSharedMediaStatesMap",new Map),v(this,"currentUserMediaStates",{}),this.env=i,this.logger=n,this.peerId=s,this.eventHandler=new zK({logger:n,peerId:s,env:i}),this.logger.debug("callStats::engineName: ",{engineName:t}),t){case"Blink":this.measurements=new QK;break;case"Gecko":this.measurements=new fO;break;case"WebKit":this.measurements=new ZK;break;default:throw Error(`Unknown engineName! ${t}`)}this.measurements.callStatsInstance=this,this.registerProducer=this.registerProducer.bind(this),this.registerConsumer=this.registerConsumer.bind(this)}registerIceServers(e){this.iceServers=e}registerConsumer(e){var t;this.consumerSharedMediaStatesMap.has(e.id)||this.consumerSharedMediaStatesMap.set(e.id,{}),this.consumers.set(e.id,e),this.measurements.registerConsumer(e),this.logger.debug("callStats::registerConsumer",{consumerId:e.id,consumerkind:e.kind,isScreenShare:!!((t=e.appData)!=null&&t.screenShare)}),e.observer.on("close",this.deRegisterConsumer.bind(this,e))}registerProducer(e){var t;this.producers.set(e.id,e),this.measurements.registerProducer(e),this.logger.debug("callStats::registerProducer",{producerId:e.id,producerKind:e.kind,isScreenShare:!!((t=e.appData)!=null&&t.screenShare)}),e.observer.on("close",this.deRegisterProducer.bind(this,e))}sendConsumerSharedMediaStateEvent(e,t){this.consumerSharedMediaStatesMap.has(e)||this.consumerSharedMediaStatesMap.set(e,{});const i=this.consumerSharedMediaStatesMap.get(e);this.consumerSharedMediaStatesMap.set(e,Object.assign(i,t))}registerProducingTransport(e){var t;this.producingTransport=e,e.observer.on("close",this.disconnectProducingTransport.bind(this,e)),e.observer.on("disconnect",this.disconnectProducingTransport.bind(this,e)),Array.from(((t=e._producers)==null?void 0:t.values())||[]).forEach(i=>{this.registerProducer(i)}),e.observer.on("newproducer",this.registerProducer)}registerConsumingTransport(e){var t;this.consumingTransport=e,e.observer.on("close",this.disconnectConsumingTransport.bind(this,e)),e.observer.on("disconnect",this.disconnectConsumingTransport.bind(this,e)),Array.from(((t=e._consumers)==null?void 0:t.values())||[]).forEach(i=>{this.registerConsumer(i)}),e.observer.on("newconsumer",this.registerConsumer)}deRegisterConsumer(e){this.consumers.delete(e.id)}deRegisterProducer(e){this.producers.delete(e.id)}disconnectConsumingTransport(){this.consumingTransport=void 0}disconnectProducingTransport(){this.producingTransport=void 0}callEvent(e){this.eventHandler.callEvent(e)}sendPreCallTestBeginEvent(){this.connectionInfoPromise=this.measurements.getNetworkInfo(this.iceServers),this.eventHandler.callEvent({event:q.PRECALL_TEST_BEGIN,timestamp:new Date}),this.connectionInfoPromise&&this.connectionInfoPromise.then(e=>{this.eventHandler.callEvent({event:q.PRECALL_TEST_COMPLETE,metaData:{connectionInfo:e},timestamp:new Date})})}sendScreenShareToggleEvent(e,t){this.currentUserMediaStates.screen=e,this.eventHandler.callEvent({event:e?q.SCREENSHARE_STARTED:q.SCREENSHARE_STOPPED,metaData:{ssrc:t},timestamp:new Date})}sendScreenShareRequestedEvent(){this.eventHandler.callEvent({event:q.SCREENSHARE_START_REQUESTED,timestamp:new Date})}sendActiveSpeakerEvent(e){this.eventHandler.callEvent({event:q.DOMINANT_SPEAKER,metaData:{peerId:e},timestamp:new Date})}devices(e,t){this.eventHandler.callEvent({event:e===kr.AUDIO&&q.AUDIO_DEVICES_UPDATES||e===kr.VIDEO&&q.VIDEO_DEVICES_UPDATES||e===kr.SPEAKER&&q.SPEAKER_DEVICES_UPDATES,metaData:{deviceList:t},timestamp:new Date})}selectedDevice(e,t){this.eventHandler.callEvent({event:e===kr.AUDIO&&q.SELECTED_MICROHPONE_UPDATE||e===kr.VIDEO&&q.SELECTED_CAMERA_UPDATE||e===kr.SPEAKER&&q.SELECTED_SPEAKER_UPDATE,metaData:{device:t},timestamp:new Date})}mediaPermission(e,t){this.eventHandler.callEvent({event:q.MEDIA_PERMISSION,metaData:{deviceType:e,permission:t},timestamp:new Date})}mediaPlaybackFailed(e){this.eventHandler.callEvent({event:e===kr.AUDIO&&q.AUDIO_PLAY_FAILED||e===kr.VIDEO&&q.VIDEO_PLAY_FAILED,metaData:{deviceType:e},timestamp:new Date})}mediaTrackMuted(e){this.eventHandler.callEvent({event:e===kr.AUDIO&&q.AUDIO_TRACK_MUTED||e===kr.VIDEO&&q.VIDEO_TRACK_MUTED,metaData:{deviceType:e},timestamp:new Date})}tabChanged(e){this.eventHandler.callEvent({event:q.TAB_CHANGE,metaData:{isMeetingsTabActive:e},timestamp:new Date})}browserBackgrounded(){this.eventHandler.callEvent({event:q.BROWSER_BACKGROUNDED,timestamp:new Date})}browserForegrounded(){this.eventHandler.callEvent({event:q.BROWSER_FOREGROUNDED,timestamp:new Date})}legacySwitch(e){this.eventHandler.callEvent({event:q.LEGACY_SWITCH,metadata:{on:e},timestamp:new Date})}async getPreCallTestResults(){return this.connectionInfoPromise}sendCallJoinBeginEvent(e){e={...e,meetingEnv:this.env},e.deviceInfo={...e.deviceInfo,userAgent:navigator.userAgent,cpus:navigator.hardwareConcurrency,memory:navigator.deviceMemory},this.eventHandler.callEvent({event:q.CALL_JOIN_BEGIN,metaData:{peerMetaData:e},timestamp:new Date})}sendNetworkQualityTestBeginEvent(e){this.eventHandler.callEvent({event:q.NET_QUALITY_TEST_BEGIN,timestamp:new Date}),new Promise(async(t,i)=>{const r=[];try{for(const n of e)try{if(n.iceServers&&n.iceServers.length>0){const s=await this.measurements.getNetworkQuality(n.iceServers);r.push({...n,networkResults:s})}}catch(s){console.warn("Error handling ",s)}t({regionData:r})}catch(n){console.warn("Error in callstats, ",n),i(n)}}).then(t=>{this.eventHandler.callEvent({event:q.NET_QUALITY_TEST_END,timestamp:new Date,metaData:t})})}sendWebSocketConnectedEvent(){this.eventHandler.callEvent({event:q.WEBSOCKET_CONNECTED,timestamp:new Date})}sendTransportConnectedEvent(){this.eventHandler.callEvent({event:q.TRANSPORT_CONNECTED,timestamp:new Date})}sendAudioToggleEvent(e){this.currentUserMediaStates.audio=e;let t;e?t=q.AUDIO_ON:t=q.AUDIO_OFF,this.eventHandler.callEvent({event:t,timestamp:new Date})}sendVideoToggleEvent(e){this.currentUserMediaStates.video=e;let t;e?t=q.VIDEO_ON:t=q.VIDEO_OFF,this.eventHandler.callEvent({event:t,timestamp:new Date})}sendParticipantRoleToggleEvent(e){this.eventHandler.callEvent({event:q.PARTICIPANT_ROLE,timestamp:new Date,metaData:e})}startPingStats(e=7e3){this.sendPingStatsEvent(!1),this.pingStatsTimeout=setInterval(this.sendPingStatsEvent.bind(this),e)}stopPingStats(){clearInterval(this.pingStatsTimeout)}async sendPingStatsEvent(e=!0){let t,i;if(this.producingTransport&&(t=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),!t||!(t!=null&&t.producerReport))){this.logger.debug("callStats::sendPingStatsEvent::staleProducingTransport",{disclaimer:"Stale producer? Regenerating Stream Maps!"});const n=await this.measurements.getProducersReport([...this.producers.values()]);t&&n?t.producerReport=n:(t=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),(!t||!(t!=null&&t.producerReport))&&this.logger.debug("callStats::sendPingStatsEvent::noProducingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}if(this.consumingTransport&&(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),!i||!i.consumerReport)){this.logger.debug("callStats::sendPingStatsEvent::staleConsumingTransport",{disclaimer:"Stale consumer? Regenerating Stream Maps!"});const n=await this.measurements.getConsumersReport([...this.consumers.values()]);i&&n?i.consumerReport=n:(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),(!i||!i.consumerReport)&&this.logger.debug("callStats::sendPingStatsEvent::noConsumingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}const r={producingTransportStats:t?t==null?void 0:t.transportReport:void 0,consumingTransportStats:i?i==null?void 0:i.transportReport:void 0,producerStats:[].concat((t==null?void 0:t.producerReport)||[]).concat((i==null?void 0:i.producerReport)||[]),consumerStats:[].concat((i==null?void 0:i.consumerReport)||[]).concat((t==null?void 0:t.consumerReport)||[])};if(e&&r.producerStats.length===0&&r.consumerStats.length===0){await this.eventHandler.flush();return}this.eventHandler.callEvent({event:q.PING_STAT,metaData:r,timestamp:new Date})}sendIVSPlayerRebufferEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_REBUFFERING,timestamp:new Date})}sendIVSPlayerAudioBlockEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_AUDIO_BLOCKED,timestamp:new Date})}sendIVSPlayerPlaybackBlockedEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_PLAYBACK_BLOCKED,timestamp:new Date})}sendIVSPlayerNetworkUnavailableEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_NETWORK_UNAVAILABLE,timestamp:new Date})}sendIVSPlayerInitializedEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_INITIALIZED,timestamp:new Date})}sendIVSPlayerWorkerErrorEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_WORKER_ERROR,timestamp:new Date})}sendIVSPlayerErrorEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_ERROR,timestamp:new Date,metaData:e})}sendIVSPlayerRecoverableErrorEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_RECOVERABLE_ERROR,timestamp:new Date,metaData:e})}sendIVSPlayerAnalyticsEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_ANALYTICS_EVENT,timestamp:new Date,metaData:e})}sendIVSPlayerPlaybackRateChangedEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_PLAYBACK_RATE_CHANGED,timestamp:new Date,metaData:{updatedPlaybackRate:e}})}sendIVSPlayerQualityChanged(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_QUALITY_CHANGED,timestamp:new Date,metaData:e})}sendPlayerLiveLatency(e){this.eventHandler.callEvent({event:q.LIVESTREAM_LATENCY,timestamp:new Date,metaData:{latency:e}})}sendDisconnectEvent(){this.eventHandler.callEvent({event:q.DISCONNECT,timestamp:new Date})}sendReconnectEvent(){this.eventHandler.callEvent({event:q.RECONNECT_ATTEMPT,timestamp:new Date})}};pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerIceServers",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerConsumer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerProducer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendConsumerSharedMediaStateEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerProducingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerConsumingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"deRegisterConsumer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"deRegisterProducer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"disconnectConsumingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"disconnectProducingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendPreCallTestBeginEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendScreenShareToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendScreenShareRequestedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendActiveSpeakerEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"devices",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"selectedDevice",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"mediaPermission",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"mediaPlaybackFailed",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"mediaTrackMuted",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"tabChanged",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"browserBackgrounded",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"browserForegrounded",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"legacySwitch",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"getPreCallTestResults",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendCallJoinBeginEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendNetworkQualityTestBeginEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendWebSocketConnectedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendTransportConnectedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendAudioToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendVideoToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendParticipantRoleToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"startPingStats",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"stopPingStats",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendPingStatsEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerRebufferEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerAudioBlockEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerPlaybackBlockedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerNetworkUnavailableEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerInitializedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerWorkerErrorEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerErrorEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerRecoverableErrorEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerAnalyticsEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerPlaybackRateChangedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerQualityChanged",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendPlayerLiveLatency",null);le=pe([XK(TypeError,(e,t)=>he.error(t,e))],le);const eY=le;class tY extends zi{constructor(){super(...arguments),v(this,"stats"),v(this,"roomURL"),v(this,"peerId"),v(this,"backend"),v(this,"iceServers"),v(this,"initialized",!1),v(this,"stalled",!1),v(this,"ipInformation"),v(this,"logger")}async initialize({peerId:t,engineName:i,env:r=Wu.PRODUCTION,iceServers:n,apiBase:s="https://api.cluster.dyte.in",flags:a,logger:o=console}){var c,d,l;try{this.peerId=t,this.logger=o,this.ipInformation=await Mb.getIPDetails({peerId:t}),this.backend=new eY(s,i,r,a,o,t),this.iceServers=n,(c=this.backend)==null||c.registerIceServers(this.iceServers),this.initialized=!0,(l=(d=this.backend)==null?void 0:d.eventHandler)==null||l.emit("initialized",this.ipInformation),this.emit("initialized",this.ipInformation),this.startPreCallTest()}catch(u){this.logger.error("callStats::CallStatsIntegration: ",{error:{reason:u.reason}}),this.stallCallStats()}}setRoomName(t){this.roomURL=t}configureSendTransport(t){var i;(i=this.backend)==null||i.registerProducingTransport(t)}configureRecvTransport(t){var i;(i=this.backend)==null||i.registerConsumingTransport(t)}async candidateRegionalNetworkQualityTest(t){var i;try{(i=this.backend)==null||i.sendNetworkQualityTestBeginEvent(t)}catch(r){this.logger.error("callStats::sendNetworkQualityTestBeginEvent",{error:{reason:r.reason}})}}async roomJoined(t){var i,r;(i=this.backend)==null||i.sendCallJoinBeginEvent(t),this.backend,(r=this.backend)==null||r.startPingStats()}audioOff(){var t;(t=this.backend)==null||t.sendAudioToggleEvent(!1)}audioOn(){var t;(t=this.backend)==null||t.sendAudioToggleEvent(!0)}videoOff(){var t;(t=this.backend)==null||t.sendVideoToggleEvent(!1)}videoOn(){var t;(t=this.backend)==null||t.sendVideoToggleEvent(!0)}callEnded(){var t,i;(t=this.backend)==null||t.stopPingStats(),(i=this.backend)==null||i.sendDisconnectEvent()}screenShareStart(t){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!0,t)}consumerSharedMediaState(t,i){var r;(r=this.backend)==null||r.sendConsumerSharedMediaStateEvent(t,i)}screenShareStop(t){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!1,t)}screenShareRequested(){var t;(t=this.backend)==null||t.sendScreenShareRequestedEvent()}activeSpeaker(t){var i;t===this.peerId&&((i=this.backend)==null||i.sendActiveSpeakerEvent(t))}devices(t,i){var r;(r=this.backend)==null||r.devices(t,i)}selectedDevice(t,i){var r;(r=this.backend)==null||r.selectedDevice(t,i)}mediaPermission(t,i){var r;(r=this.backend)==null||r.mediaPermission(t,i)}mediaPlaybackFailed(t){var i;(i=this.backend)==null||i.mediaPlaybackFailed(t)}mediaTrackMuted(t){var i;(i=this.backend)==null||i.mediaTrackMuted(t)}tabChanged(t=!1){var i;(i=this.backend)==null||i.tabChanged(t)}browserBackgrounded(){var t;(t=this.backend)==null||t.browserBackgrounded()}browserForegrounded(){var t;(t=this.backend)==null||t.browserForegrounded()}legacySwitch(t){var i;(i=this.backend)==null||i.legacySwitch(t)}async startPreCallTest(){var t;(t=this.backend)==null||t.sendPreCallTestBeginEvent()}onPreCallTestResults(t){var i;return(i=this.backend)==null||i.eventHandler.once("precall_end",t),t}onReceivingConsumerAudioStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consumer_audio_status",t)}onReceivingConsumerVideoStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consumer_video_status",t)}onReceivingProducerAudioStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producer_audio_status",t)}onReceivingProducerVideoStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producer_video_status",t)}onReceivingProducingTransportStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producing_transport_status",t)}onReceivingConsumingTransportStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consuming_transport_status",t)}onSafeInitialization(t){if(this.initialized)t(this.ipInformation,!1);else if(!this.stalled){const i=r=>{t(r,!0)};return this.once("initialized",i),i}return()=>{}}removeInitializationListener(t){this.removeListener("initialized",t)}stallCallStats(){this.stalled=!0,this.removeAllListeners("initialized")}ivsPlayerEvent(t,i){var r,n,s,a,o,c,d,l,u,g,m;switch(t){case"PlayerRebuffering":(r=this.backend)==null||r.sendIVSPlayerRebufferEvent();break;case"PlayerAudioBlocked":(n=this.backend)==null||n.sendIVSPlayerAudioBlockEvent();break;case"PlayerPlaybackBlocked":(s=this.backend)==null||s.sendIVSPlayerPlaybackBlockedEvent();break;case"PlayerNetworkUnavailable":(a=this.backend)==null||a.sendIVSPlayerNetworkUnavailableEvent();break;case"PlayerInitialized":(o=this.backend)==null||o.sendIVSPlayerInitializedEvent();break;case"PlayerWorkerError":(c=this.backend)==null||c.sendIVSPlayerWorkerErrorEvent();break;case"PlayerError":(d=this.backend)==null||d.sendIVSPlayerErrorEvent(i);break;case"PlayerRecoverableError":(l=this.backend)==null||l.sendIVSPlayerRecoverableErrorEvent(i);break;case"PlayerAnalyticsEvent":(u=this.backend)==null||u.sendIVSPlayerAnalyticsEvent(i);break;case"PlayerPlaybackRateChanged":(g=this.backend)==null||g.sendIVSPlayerPlaybackRateChangedEvent(i);break;case"PlayerQualityChanged":(m=this.backend)==null||m.sendIVSPlayerQualityChanged(i);break}}livestreamLatency(t){var i;(i=this.backend)==null||i.sendPlayerLiveLatency(t)}}const Y=new tY;Y.setMaxListeners(30);function iY(e){const{length:t}=this,i=e>=0?e:t+e;return i<0||i>=t?void 0:this[i]}Array.prototype.at||Object.assign(Array.prototype,{at:iY});function rY(e){const{length:t}=this,i=e>=0?e:t+e;return i<0||i>=t?void 0:this[i]}String.prototype.at||Object.assign(String.prototype,{at:rY});var qu;(function(e){e.skip="SKIP",e.onAccept="ON_ACCEPT",e.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",e.skipOnAccept="SKIP_ON_ACCEPT"})(qu||(qu={}));var Go;(function(e){e.none="NONE",e.recorder="RECORDER",e.livestreamer="LIVESTREAMER"})(Go||(Go={}));var cm;(function(e){e.groupCall="GROUP_CALL",e.webinar="WEBINAR",e.audioRoom="AUDIO_ROOM",e.livestream="LIVESTREAM"})(cm||(cm={}));var ik;(function(e){e.SKIP="skip",e.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",e.ON_ACCEPT="skipOnAccept",e.SKIP_ON_ACCEPT="skipOnAccept"})(ik||(ik={}));cm.groupCall,qu.skipOnAccept,Go.none;cm.groupCall,Go.none,qu.skipOnAccept;let vO="hXgU8Wc8pwuGNq9ms5q9Hh";var rk;typeof process<"u"&&(rk=process==null?void 0:process.env)!=null&&rk.FLAGSMITH_ENVIRONMENT_KEY&&(vO={}.FLAGSMITH_ENVIRONMENT_KEY);function nY(e=[]){const t={};return e.forEach(i=>{t[i.feature.name]={enabled:i.enabled,value:i.feature_state_value}}),t}class sY{constructor(t=vO){v(this,"flags",{}),v(this,"environmentKey",null),this.environmentKey=t,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(t,i={},r=!1,n=5e3){const s=JSON.parse(JSON.stringify(i)),a=Object.entries(s).map(o=>({trait_key:o[0],trait_value:o[1]}));try{const o="_"+(Math.random()+1).toString(36).substring(2),c=await Qg.post("https://edge.api.flagsmith.com/api/v1/identities/",{identifier:t+(r?o:""),traits:a},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:n});this.flags=nY(c.data.flags||[])}catch{}return this.flags}getValue(t){return this.flags&&this.flags[t]&&this.flags[t].value}hasFeature(t){return this.flags&&this.flags[t]&&this.flags[t].enabled}getAllFlags(){return this.flags}}const ee=new sY,yO=[-2,-1,0,1,2],aY=[0,1,2,3,4];function oY(e){let t="0",i="0",r="0";if(e.length==4)t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3];else if(e.length==7)t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6];else throw new Error("[dyte] Invalid hex color code provided");return[+t,+i,+r]}const cY=(e,t,i)=>{let r,n,s;if(t==0)r=n=s=i;else{const a=(d,l,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(l-d)*6*u:u<.5?l:u<.6666666666666666?d+(l-d)*(.6666666666666666-u)*6:d),o=i<.5?i*(1+t):i+t-i*t,c=2*i-o;r=a(c,o,e+1/3),n=a(c,o,e),s=a(c,o,e-1/3)}return[Math.round(r*255),Math.round(n*255),Math.round(s*255)]},dY=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),n=Math.min(e,t,i);let s,a;const o=(r+n)/2;if(r==n)s=a=0;else{const c=r-n;switch(a=o>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4;break}s/=6}return[s,a,o]},lY=(e,t,i)=>{const r=n=>n.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(i)}`},_O=(e,t=yO,i=.4)=>{const r=[],[n,s,a]=oY(e),[o,c,d]=dY(n,s,a),l=Math.round(d*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const u=t.findIndex(S=>S===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-u,m=u+1,f=(100-l)/g,w=l/m;for(const S of t){let y;S<0?y=l+S*w*i:S>0?y=l+S*f*i:y=l;const[_,T,C]=cY(o,c,y/100);r.push(lY(_,T,C))}return r},uY=e=>{const[t,i,r,n,s]=_O(e,yO);return{300:t,400:i,500:r,600:n,700:s}},pY=e=>{const[t,i,r,n,s]=_O(e,aY);return{1e3:t,900:i,800:r,700:n,600:s}};function hY(){this.__data__=[],this.size=0}function bO(e,t){return e===t||e!==e&&t!==t}function hf(e,t){for(var i=e.length;i--;)if(bO(e[i][0],t))return i;return-1}var gY=Array.prototype,mY=gY.splice;function fY(e){var t=this.__data__,i=hf(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():mY.call(t,i,1),--this.size,!0}function vY(e){var t=this.__data__,i=hf(t,e);return i<0?void 0:t[i][1]}function yY(e){return hf(this.__data__,e)>-1}function _Y(e,t){var i=this.__data__,r=hf(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function Ds(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Ds.prototype.clear=hY;Ds.prototype.delete=fY;Ds.prototype.get=vY;Ds.prototype.has=yY;Ds.prototype.set=_Y;function bY(){this.__data__=new Ds,this.size=0}function wY(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function SY(e){return this.__data__.get(e)}function EY(e){return this.__data__.has(e)}var TY=typeof global=="object"&&global&&global.Object===Object&&global;const wO=TY;var kY=typeof self=="object"&&self&&self.Object===Object&&self,PY=wO||kY||Function("return this")();const yn=PY;var CY=yn.Symbol;const Ad=CY;var SO=Object.prototype,RY=SO.hasOwnProperty,xY=SO.toString,vl=Ad?Ad.toStringTag:void 0;function IY(e){var t=RY.call(e,vl),i=e[vl];try{e[vl]=void 0;var r=!0}catch{}var n=xY.call(e);return r&&(t?e[vl]=i:delete e[vl]),n}var AY=Object.prototype,OY=AY.toString;function MY(e){return OY.call(e)}var DY="[object Null]",LY="[object Undefined]",nk=Ad?Ad.toStringTag:void 0;function qd(e){return e==null?e===void 0?LY:DY:nk&&nk in Object(e)?IY(e):MY(e)}function Aa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var NY="[object AsyncFunction]",UY="[object Function]",jY="[object GeneratorFunction]",$Y="[object Proxy]";function EO(e){if(!Aa(e))return!1;var t=qd(e);return t==UY||t==jY||t==NY||t==$Y}var VY=yn["__core-js_shared__"];const Qv=VY;var sk=function(){var e=/[^.]+$/.exec(Qv&&Qv.keys&&Qv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FY(e){return!!sk&&sk in e}var zY=Function.prototype,BY=zY.toString;function ec(e){if(e!=null){try{return BY.call(e)}catch{}try{return e+""}catch{}}return""}var HY=/[\\^$.*+?()[\]{}|]/g,GY=/^\[object .+?Constructor\]$/,WY=Function.prototype,qY=Object.prototype,JY=WY.toString,KY=qY.hasOwnProperty,YY=RegExp("^"+JY.call(KY).replace(HY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QY(e){if(!Aa(e)||FY(e))return!1;var t=EO(e)?YY:GY;return t.test(ec(e))}function ZY(e,t){return e==null?void 0:e[t]}function tc(e,t){var i=ZY(e,t);return QY(i)?i:void 0}var XY=tc(yn,"Map");const Ju=XY;var eQ=tc(Object,"create");const Ku=eQ;function tQ(){this.__data__=Ku?Ku(null):{},this.size=0}function iQ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var rQ="__lodash_hash_undefined__",nQ=Object.prototype,sQ=nQ.hasOwnProperty;function aQ(e){var t=this.__data__;if(Ku){var i=t[e];return i===rQ?void 0:i}return sQ.call(t,e)?t[e]:void 0}var oQ=Object.prototype,cQ=oQ.hasOwnProperty;function dQ(e){var t=this.__data__;return Ku?t[e]!==void 0:cQ.call(t,e)}var lQ="__lodash_hash_undefined__";function uQ(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ku&&t===void 0?lQ:t,this}function Wo(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Wo.prototype.clear=tQ;Wo.prototype.delete=iQ;Wo.prototype.get=aQ;Wo.prototype.has=dQ;Wo.prototype.set=uQ;function pQ(){this.size=0,this.__data__={hash:new Wo,map:new(Ju||Ds),string:new Wo}}function hQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gf(e,t){var i=e.__data__;return hQ(t)?i[typeof t=="string"?"string":"hash"]:i.map}function gQ(e){var t=gf(this,e).delete(e);return this.size-=t?1:0,t}function mQ(e){return gf(this,e).get(e)}function fQ(e){return gf(this,e).has(e)}function vQ(e,t){var i=gf(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function $a(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}$a.prototype.clear=pQ;$a.prototype.delete=gQ;$a.prototype.get=mQ;$a.prototype.has=fQ;$a.prototype.set=vQ;var yQ=200;function _Q(e,t){var i=this.__data__;if(i instanceof Ds){var r=i.__data__;if(!Ju||r.length<yQ-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new $a(r)}return i.set(e,t),this.size=i.size,this}function Jd(e){var t=this.__data__=new Ds(e);this.size=t.size}Jd.prototype.clear=bY;Jd.prototype.delete=wY;Jd.prototype.get=SY;Jd.prototype.has=EY;Jd.prototype.set=_Q;function bQ(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var wQ=function(){try{var e=tc(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ak=wQ;function TO(e,t,i){t=="__proto__"&&ak?ak(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var SQ=Object.prototype,EQ=SQ.hasOwnProperty;function kO(e,t,i){var r=e[t];(!(EQ.call(e,t)&&bO(r,i))||i===void 0&&!(t in e))&&TO(e,t,i)}function mf(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?TO(i,o,c):kO(i,o,c)}return i}function TQ(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}function Kd(e){return e!=null&&typeof e=="object"}var kQ="[object Arguments]";function ok(e){return Kd(e)&&qd(e)==kQ}var PO=Object.prototype,PQ=PO.hasOwnProperty,CQ=PO.propertyIsEnumerable,RQ=ok(function(){return arguments}())?ok:function(e){return Kd(e)&&PQ.call(e,"callee")&&!CQ.call(e,"callee")};const CO=RQ;var xQ=Array.isArray;const ff=xQ;function IQ(){return!1}var RO=typeof xe=="object"&&xe&&!xe.nodeType&&xe,ck=RO&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,AQ=ck&&ck.exports===RO,dk=AQ?yn.Buffer:void 0,OQ=dk?dk.isBuffer:void 0,MQ=OQ||IQ;const Db=MQ;var DQ=9007199254740991,LQ=/^(?:0|[1-9]\d*)$/;function NQ(e,t){var i=typeof e;return t=t==null?DQ:t,!!t&&(i=="number"||i!="symbol"&&LQ.test(e))&&e>-1&&e%1==0&&e<t}var UQ=9007199254740991;function xO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=UQ}var jQ="[object Arguments]",$Q="[object Array]",VQ="[object Boolean]",FQ="[object Date]",zQ="[object Error]",BQ="[object Function]",HQ="[object Map]",GQ="[object Number]",WQ="[object Object]",qQ="[object RegExp]",JQ="[object Set]",KQ="[object String]",YQ="[object WeakMap]",QQ="[object ArrayBuffer]",ZQ="[object DataView]",XQ="[object Float32Array]",eZ="[object Float64Array]",tZ="[object Int8Array]",iZ="[object Int16Array]",rZ="[object Int32Array]",nZ="[object Uint8Array]",sZ="[object Uint8ClampedArray]",aZ="[object Uint16Array]",oZ="[object Uint32Array]",ht={};ht[XQ]=ht[eZ]=ht[tZ]=ht[iZ]=ht[rZ]=ht[nZ]=ht[sZ]=ht[aZ]=ht[oZ]=!0;ht[jQ]=ht[$Q]=ht[QQ]=ht[VQ]=ht[ZQ]=ht[FQ]=ht[zQ]=ht[BQ]=ht[HQ]=ht[GQ]=ht[WQ]=ht[qQ]=ht[JQ]=ht[KQ]=ht[YQ]=!1;function cZ(e){return Kd(e)&&xO(e.length)&&!!ht[qd(e)]}function Lb(e){return function(t){return e(t)}}var IO=typeof xe=="object"&&xe&&!xe.nodeType&&xe,yu=IO&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,dZ=yu&&yu.exports===IO,Zv=dZ&&wO.process,lZ=function(){try{var e=yu&&yu.require&&yu.require("util").types;return e||Zv&&Zv.binding&&Zv.binding("util")}catch{}}();const Od=lZ;var lk=Od&&Od.isTypedArray,uZ=lk?Lb(lk):cZ;const AO=uZ;var pZ=Object.prototype,hZ=pZ.hasOwnProperty;function OO(e,t){var i=ff(e),r=!i&&CO(e),n=!i&&!r&&Db(e),s=!i&&!r&&!n&&AO(e),a=i||r||n||s,o=a?TQ(e.length,String):[],c=o.length;for(var d in e)(t||hZ.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||NQ(d,c)))&&o.push(d);return o}var gZ=Object.prototype;function vf(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||gZ;return e===i}function MO(e,t){return function(i){return e(t(i))}}var mZ=MO(Object.keys,Object);const fZ=mZ;var vZ=Object.prototype,yZ=vZ.hasOwnProperty;function DO(e){if(!vf(e))return fZ(e);var t=[];for(var i in Object(e))yZ.call(e,i)&&i!="constructor"&&t.push(i);return t}function Nb(e){return e!=null&&xO(e.length)&&!EO(e)}function Ub(e){return Nb(e)?OO(e):DO(e)}function _Z(e,t){return e&&mf(t,Ub(t),e)}function bZ(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var wZ=Object.prototype,SZ=wZ.hasOwnProperty;function EZ(e){if(!Aa(e))return bZ(e);var t=vf(e),i=[];for(var r in e)r=="constructor"&&(t||!SZ.call(e,r))||i.push(r);return i}function jb(e){return Nb(e)?OO(e,!0):EZ(e)}function TZ(e,t){return e&&mf(t,jb(t),e)}var LO=typeof xe=="object"&&xe&&!xe.nodeType&&xe,uk=LO&&typeof Ie=="object"&&Ie&&!Ie.nodeType&&Ie,kZ=uk&&uk.exports===LO,pk=kZ?yn.Buffer:void 0,hk=pk?pk.allocUnsafe:void 0;function PZ(e,t){if(t)return e.slice();var i=e.length,r=hk?hk(i):new e.constructor(i);return e.copy(r),r}function CZ(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}function RZ(e,t){for(var i=-1,r=e==null?0:e.length,n=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[n++]=a)}return s}function NO(){return[]}var xZ=Object.prototype,IZ=xZ.propertyIsEnumerable,gk=Object.getOwnPropertySymbols,AZ=gk?function(e){return e==null?[]:(e=Object(e),RZ(gk(e),function(t){return IZ.call(e,t)}))}:NO;const $b=AZ;function OZ(e,t){return mf(e,$b(e),t)}function UO(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var MZ=MO(Object.getPrototypeOf,Object);const jO=MZ;var DZ=Object.getOwnPropertySymbols,LZ=DZ?function(e){for(var t=[];e;)UO(t,$b(e)),e=jO(e);return t}:NO;const $O=LZ;function NZ(e,t){return mf(e,$O(e),t)}function VO(e,t,i){var r=t(e);return ff(e)?r:UO(r,i(e))}function UZ(e){return VO(e,Ub,$b)}function jZ(e){return VO(e,jb,$O)}var $Z=tc(yn,"DataView");const p1=$Z;var VZ=tc(yn,"Promise");const h1=VZ;var FZ=tc(yn,"Set");const g1=FZ;var zZ=tc(yn,"WeakMap");const m1=zZ;var mk="[object Map]",BZ="[object Object]",fk="[object Promise]",vk="[object Set]",yk="[object WeakMap]",_k="[object DataView]",HZ=ec(p1),GZ=ec(Ju),WZ=ec(h1),qZ=ec(g1),JZ=ec(m1),no=qd;(p1&&no(new p1(new ArrayBuffer(1)))!=_k||Ju&&no(new Ju)!=mk||h1&&no(h1.resolve())!=fk||g1&&no(new g1)!=vk||m1&&no(new m1)!=yk)&&(no=function(e){var t=qd(e),i=t==BZ?e.constructor:void 0,r=i?ec(i):"";if(r)switch(r){case HZ:return _k;case GZ:return mk;case WZ:return fk;case qZ:return vk;case JZ:return yk}return t});const yf=no;var KZ=Object.prototype,YZ=KZ.hasOwnProperty;function QZ(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&YZ.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var ZZ=yn.Uint8Array;const bk=ZZ;function Vb(e){var t=new e.constructor(e.byteLength);return new bk(t).set(new bk(e)),t}function XZ(e,t){var i=t?Vb(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var eX=/\w*$/;function tX(e){var t=new e.constructor(e.source,eX.exec(e));return t.lastIndex=e.lastIndex,t}var wk=Ad?Ad.prototype:void 0,Sk=wk?wk.valueOf:void 0;function iX(e){return Sk?Object(Sk.call(e)):{}}function rX(e,t){var i=t?Vb(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var nX="[object Boolean]",sX="[object Date]",aX="[object Map]",oX="[object Number]",cX="[object RegExp]",dX="[object Set]",lX="[object String]",uX="[object Symbol]",pX="[object ArrayBuffer]",hX="[object DataView]",gX="[object Float32Array]",mX="[object Float64Array]",fX="[object Int8Array]",vX="[object Int16Array]",yX="[object Int32Array]",_X="[object Uint8Array]",bX="[object Uint8ClampedArray]",wX="[object Uint16Array]",SX="[object Uint32Array]";function EX(e,t,i){var r=e.constructor;switch(t){case pX:return Vb(e);case nX:case sX:return new r(+e);case hX:return XZ(e,i);case gX:case mX:case fX:case vX:case yX:case _X:case bX:case wX:case SX:return rX(e,i);case aX:return new r;case oX:case lX:return new r(e);case cX:return tX(e);case dX:return new r;case uX:return iX(e)}}var Ek=Object.create,TX=function(){function e(){}return function(t){if(!Aa(t))return{};if(Ek)return Ek(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();const kX=TX;function PX(e){return typeof e.constructor=="function"&&!vf(e)?kX(jO(e)):{}}var CX="[object Map]";function RX(e){return Kd(e)&&yf(e)==CX}var Tk=Od&&Od.isMap,xX=Tk?Lb(Tk):RX;const IX=xX;var AX="[object Set]";function OX(e){return Kd(e)&&yf(e)==AX}var kk=Od&&Od.isSet,MX=kk?Lb(kk):OX;const DX=MX;var LX=1,NX=2,UX=4,FO="[object Arguments]",jX="[object Array]",$X="[object Boolean]",VX="[object Date]",FX="[object Error]",zO="[object Function]",zX="[object GeneratorFunction]",BX="[object Map]",HX="[object Number]",BO="[object Object]",GX="[object RegExp]",WX="[object Set]",qX="[object String]",JX="[object Symbol]",KX="[object WeakMap]",YX="[object ArrayBuffer]",QX="[object DataView]",ZX="[object Float32Array]",XX="[object Float64Array]",eee="[object Int8Array]",tee="[object Int16Array]",iee="[object Int32Array]",ree="[object Uint8Array]",nee="[object Uint8ClampedArray]",see="[object Uint16Array]",aee="[object Uint32Array]",rt={};rt[FO]=rt[jX]=rt[YX]=rt[QX]=rt[$X]=rt[VX]=rt[ZX]=rt[XX]=rt[eee]=rt[tee]=rt[iee]=rt[BX]=rt[HX]=rt[BO]=rt[GX]=rt[WX]=rt[qX]=rt[JX]=rt[ree]=rt[nee]=rt[see]=rt[aee]=!0;rt[FX]=rt[zO]=rt[KX]=!1;function Gh(e,t,i,r,n,s){var a,o=t&LX,c=t&NX,d=t&UX;if(i&&(a=n?i(e,r,n,s):i(e)),a!==void 0)return a;if(!Aa(e))return e;var l=ff(e);if(l){if(a=QZ(e),!o)return CZ(e,a)}else{var u=yf(e),g=u==zO||u==zX;if(Db(e))return PZ(e,o);if(u==BO||u==FO||g&&!n){if(a=c||g?{}:PX(e),!o)return c?NZ(e,TZ(a,e)):OZ(e,_Z(a,e))}else{if(!rt[u])return n?e:{};a=EX(e,u,o)}}s||(s=new Jd);var m=s.get(e);if(m)return m;s.set(e,a),DX(e)?e.forEach(function(S){a.add(Gh(S,t,i,S,e,s))}):IX(e)&&e.forEach(function(S,y){a.set(y,Gh(S,t,i,y,e,s))});var f=d?c?jZ:UZ:c?jb:Ub,w=l?void 0:f(e);return bQ(w||e,function(S,y){w&&(y=S,S=e[y]),kO(a,y,Gh(S,t,i,y,e,s))}),a}var oee=1,cee=4;function Fb(e){return Gh(e,oee|cee)}var dee="[object Symbol]";function lee(e){return typeof e=="symbol"||Kd(e)&&qd(e)==dee}var uee="Expected a function";function dm(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(uee);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=e.apply(this,r);return i.cache=s.set(n,a)||s,a};return i.cache=new(dm.Cache||$a),i}dm.Cache=$a;var gn;(function(e){e.GroupCall="GROUP_CALL",e.Webinar="WEBINAR",e.AudioRoom="AUDIO_ROOM",e.Livestream="LIVESTREAM"})(gn||(gn={}));var lm;(function(e){e.Skip="SKIP",e.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",e.SkipOnAccept="SKIP_ON_ACCEPT"})(lm||(lm={}));var di;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED",e.CanRequest="CAN_REQUEST"})(di||(di={}));var um;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED"})(um||(um={}));var Pk;(function(e){e.FULL_ACCESS="FULL_ACCESS",e.VIEW_ONLY="VIEW_ONLY"})(Pk||(Pk={}));const pee={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:uY("#2160FD"),background:pY("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function HO(){return Fb(pee)}const hee={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:lm.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:di.Allowed,can_consume:um.Allowed},audio:{can_produce:di.Allowed},screenshare:{can_produce:di.Allowed,can_consume:um.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Go.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{oldTheme:{setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",textPrimary:"#EEEEEE",videoBackground:"#1A1A1A"},dimensions:{mode:"fillParent"},grid:{multi:{maxVideoCount:6,videoFit:"cover"},single:{maxVideoCount:6,videoFit:"cover"},defaultView:"MULTI"},controls:{pip_toggle:!1},plugins:[]},design_tokens:HO(),config_diff:{}},config:{view_type:gn.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"hybrid"};function gee(){return Fb(hee)}Go.none,qu.skip;const mee={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:lm.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:di.Allowed},audio:{can_produce:di.Allowed},screenshare:{can_produce:di.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Go.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{design_tokens:HO(),config_diff:{}},config:{view_type:gn.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"2.0.0"};function zb(){return Fb(mee)}var cn={},fee={get exports(){return cn},set exports(e){cn=e}},Xv,Ck;function vee(){if(Ck)return Xv;Ck=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,s=r*365.25;Xv=function(l,u){u=u||{};var g=typeof l;if(g==="string"&&l.length>0)return a(l);if(g==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var g=parseFloat(u[1]),m=(u[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*n;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*t;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=i?Math.round(l/i)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=i?d(l,u,i,"hour"):u>=t?d(l,u,t,"minute"):u>=e?d(l,u,e,"second"):l+" ms"}function d(l,u,g,m){var f=u>=g*1.5;return Math.round(l/g)+" "+m+(f?"s":"")}return Xv}function yee(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=n,i.enabled=a,i.humanize=vee(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let u=0;for(let g=0;g<l.length;g++)u=(u<<5)-u+l.charCodeAt(g),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(l){let u,g=null,m,f;function w(...S){if(!w.enabled)return;const y=w,_=Number(new Date),T=_-(u||_);y.diff=T,y.prev=u,y.curr=_,u=_,S[0]=i.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let C=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(D,O)=>{if(D==="%%")return"%";C++;const z=i.formatters[O];if(typeof z=="function"){const H=S[C];D=z.call(y,H),S.splice(C,1),C--}return D}),i.formatArgs.call(y,S),(y.log||i.log).apply(y,S)}return w.namespace=l,w.useColors=i.useColors(),w.color=i.selectColor(l),w.extend=r,w.destroy=i.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(l)),f),set:S=>{g=S}}),typeof i.init=="function"&&i.init(w),w}function r(l,u){const g=i(this.namespace+(typeof u>"u"?":":u)+l);return g.log=this.log,g}function n(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let u;const g=(typeof l=="string"?l:"").split(/[\s,]+/),m=g.length;for(u=0;u<m;u++)g[u]&&(l=g[u].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...i.names.map(o),...i.skips.map(o).map(u=>"-"+u)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let u,g;for(u=0,g=i.skips.length;u<g;u++)if(i.skips[u].test(l))return!1;for(u=0,g=i.names.length;u<g;u++)if(i.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var _ee=yee;(function(e,t){t.formatArgs=r,t.save=n,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(u=l))}),c.splice(u,0,d)}t.log=console.debug||console.log||(()=>{});function n(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=_ee(t);const{formatters:o}=e.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(fee,cn);const fc="mediasoup-client";let nr=class{constructor(e){e?(this._debug=cn(`${fc}:${e}`),this._warn=cn(`${fc}:WARN:${e}`),this._error=cn(`${fc}:ERROR:${e}`)):(this._debug=cn(fc),this._warn=cn(`${fc}:WARN`),this._error=cn(`${fc}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const bee=new nr("EnhancedEventEmitter");let Vr=class extends zi.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...t){return super.emit(e,...t)}safeEmit(e,...t){const i=super.listenerCount(e);try{return super.emit(e,...t)}catch(r){return bee.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,r),Boolean(i)}}on(e,t){return super.on(e,t),this}off(e,t){return super.off(e,t),this}addListener(e,t){return super.on(e,t),this}prependListener(e,t){return super.prependListener(e,t),this}once(e,t){return super.once(e,t),this}prependOnceListener(e,t){return super.prependOnceListener(e,t),this}removeListener(e,t){return super.off(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}},qi=class GO extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,GO):this.stack=new Error(t).stack}},vt=class WO extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,WO):this.stack=new Error(t).stack}};function Qt(e,t){return typeof e>"u"?t:JSON.parse(JSON.stringify(e))}function ey(){return Math.round(Math.random()*1e7)}var f1={};(function(e){const t=cn("h264-profile-level-id");t.log=console.info.bind(console);const i=1,r=2,n=3,s=4,a=5;e.ProfileConstrainedBaseline=i,e.ProfileBaseline=r,e.ProfileMain=n,e.ProfileConstrainedHigh=s,e.ProfileHigh=a;const o=0,c=10,d=11,l=12,u=13,g=20,m=21,f=22,w=30,S=31,y=32,_=40,T=41,C=42,D=50,O=51,z=52;e.Level1_b=o,e.Level1=c,e.Level1_1=d,e.Level1_2=l,e.Level1_3=u,e.Level2=g,e.Level2_1=m,e.Level2_2=f,e.Level3=w,e.Level3_1=S,e.Level3_2=y,e.Level4=_,e.Level4_1=T,e.Level4_2=C,e.Level5=D,e.Level5_1=O,e.Level5_2=z;class H{constructor(W,X){this.profile=W,this.level=X}}e.ProfileLevelId=H;const ie=new H(i,S),K=16;class ge{constructor(W){this._mask=~Xt("x",W),this._maskedValue=Xt("1",W)}isMatch(W){return this._maskedValue===(W&this._mask)}}class He{constructor(W,X,De){this.profile_idc=W,this.profile_iop=X,this.profile=De}}const Zt=[new He(66,new ge("x1xx0000"),i),new He(77,new ge("1xxx0000"),i),new He(88,new ge("11xx0000"),i),new He(66,new ge("x0xx0000"),r),new He(88,new ge("10xx0000"),r),new He(77,new ge("0x0x0000"),n),new He(100,new ge("00000000"),a),new He(100,new ge("00001100"),s)];e.parseProfileLevelId=function(F){if(typeof F!="string"||F.length!==6)return null;const W=parseInt(F,16);if(W===0)return null;const X=W&255,De=W>>8&255,ft=W>>16&255;let ei;switch(X){case d:{ei=De&K?o:d;break}case c:case l:case u:case g:case m:case f:case w:case S:case y:case _:case T:case C:case D:case O:case z:{ei=X;break}default:return t("parseProfileLevelId() | unrecognized level_idc:%s",X),null}for(const _t of Zt)if(ft===_t.profile_idc&&_t.profile_iop.isMatch(De))return new H(_t.profile,ei);return t("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},e.profileLevelIdToString=function(F){if(F.level==o)switch(F.profile){case i:return"42f00b";case r:return"42100b";case n:return"4d100b";default:return t("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",F.profile),null}let W;switch(F.profile){case i:{W="42e0";break}case r:{W="4200";break}case n:{W="4d00";break}case s:{W="640c";break}case a:{W="6400";break}default:return t("profileLevelIdToString() | unrecognized profile:%s",F.profile),null}let X=F.level.toString(16);return X.length===1&&(X=`0${X}`),`${W}${X}`},e.parseSdpProfileLevelId=function(F={}){const W=F["profile-level-id"];return W?e.parseProfileLevelId(W):ie},e.isSameProfile=function(F={},W={}){const X=e.parseSdpProfileLevelId(F),De=e.parseSdpProfileLevelId(W);return Boolean(X&&De&&X.profile===De.profile)},e.generateProfileLevelIdForAnswer=function(F={},W={}){if(!F["profile-level-id"]&&!W["profile-level-id"])return t("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const X=e.parseSdpProfileLevelId(F),De=e.parseSdpProfileLevelId(W);if(!X)throw new TypeError("invalid local_profile_level_id");if(!De)throw new TypeError("invalid remote_profile_level_id");if(X.profile!==De.profile)throw new TypeError("H264 Profile mismatch");const ft=Qn(F)&&Qn(W),ei=X.level,_t=De.level,wn=or(ei,_t),Di=ft?ei:wn;return t("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",X.profile,Di),e.profileLevelIdToString(new H(X.profile,Di))};function Xt(F,W){return(W[0]===F)<<7|(W[1]===F)<<6|(W[2]===F)<<5|(W[3]===F)<<4|(W[4]===F)<<3|(W[5]===F)<<2|(W[6]===F)<<1|(W[7]===F)<<0}function Yn(F,W){return F===o?W!==c&&W!==o:W===o?F!==c:F<W}function or(F,W){return Yn(F,W)?F:W}function Qn(F={}){const W=F["level-asymmetry-allowed"];return W===1||W==="1"}})(f1);const wee="probator",See=1234,Eee=127;function ty(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)Tee(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)kee(t)}function Tee(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(e.kind=i[1].toLowerCase(),e.preferredPayloadType&&typeof e.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");e.kind==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const r of Object.keys(e.parameters)){let n=e.parameters[r];if(n===void 0&&(e.parameters[r]="",n=""),typeof n!="string"&&typeof n!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${n}]`);if(r==="apt"&&typeof n!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const r of e.rtcpFeedback)qO(r)}function qO(e){if(typeof e!="object")throw new TypeError("fb is not an object");if(!e.type||typeof e.type!="string")throw new TypeError("missing fb.type");(!e.parameter||typeof e.parameter!="string")&&(e.parameter="")}function kee(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(e.kind!=="audio"&&e.kind!=="video")throw new TypeError("invalid ext.kind");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.preferredId!="number")throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&typeof e.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&typeof e.direction!="string")throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function Bb(e){if(typeof e!="object")throw new TypeError("params is not an object");if(e.mid&&typeof e.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)Pee(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)Cee(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)Ree(t);if(e.rtcp&&typeof e.rtcp!="object")throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),xee(e.rtcp)}function Pee(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof e.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const r of Object.keys(e.parameters)){let n=e.parameters[r];if(n===void 0&&(e.parameters[r]="",n=""),typeof n!="string"&&typeof n!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${n}]`);if(r==="apt"&&typeof n!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const r of e.rtcpFeedback)qO(r)}function Cee(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.id!="number")throw new TypeError("missing ext.id");if(e.encrypt&&typeof e.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const t of Object.keys(e.parameters)){let i=e.parameters[t];if(i===void 0&&(e.parameters[t]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function Ree(e){if(typeof e!="object")throw new TypeError("encoding is not an object");if(e.ssrc&&typeof e.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(e.rid&&typeof e.rid!="string")throw new TypeError("invalid encoding.rid");if(e.rtx&&typeof e.rtx!="object")throw new TypeError("invalid encoding.rtx");if(e.rtx&&typeof e.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!e.dtx||typeof e.dtx!="boolean")&&(e.dtx=!1),e.scalabilityMode&&typeof e.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function xee(e){if(typeof e!="object")throw new TypeError("rtcp is not an object");if(e.cname&&typeof e.cname!="string")throw new TypeError("invalid rtcp.cname");(!e.reducedSize||typeof e.reducedSize!="boolean")&&(e.reducedSize=!0)}function Iee(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(!e.numStreams||typeof e.numStreams!="object")throw new TypeError("missing caps.numStreams");Aee(e.numStreams)}function Aee(e){if(typeof e!="object")throw new TypeError("numStreams is not an object");if(typeof e.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof e.MIS!="number")throw new TypeError("missing numStreams.MIS")}function Rk(e){if(typeof e!="object")throw new TypeError("params is not an object");if(typeof e.streamId!="number")throw new TypeError("missing params.streamId");let t=!1;if(typeof e.ordered=="boolean"?t=!0:e.ordered=!0,e.maxPacketLifeTime&&typeof e.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&typeof e.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!t&&(e.maxPacketLifeTime||e.maxRetransmits)&&(e.ordered=!1),e.label&&typeof e.label!="string")throw new TypeError("invalid params.label");if(e.protocol&&typeof e.protocol!="string")throw new TypeError("invalid params.protocol")}function Oee(e,t){const i={codecs:[],headerExtensions:[]};for(const r of t.codecs||[]){if(_u(r))continue;const n=(e.codecs||[]).find(a=>JO(a,r,{strict:!0,modify:!0}));if(!n)continue;const s={mimeType:n.mimeType,kind:n.kind,clockRate:n.clockRate,channels:n.channels,localPayloadType:n.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:r.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:n.parameters,remoteParameters:r.parameters,rtcpFeedback:Uee(n,r)};i.codecs.push(s)}for(const r of i.codecs){const n=e.codecs.find(a=>_u(a)&&a.parameters.apt===r.localPayloadType),s=t.codecs.find(a=>_u(a)&&a.parameters.apt===r.remotePayloadType);n&&s&&(r.localRtxPayloadType=n.preferredPayloadType,r.remoteRtxPayloadType=s.preferredPayloadType)}for(const r of t.headerExtensions){const n=e.headerExtensions.find(a=>Nee(a,r));if(!n)continue;const s={kind:r.kind,uri:r.uri,sendId:n.preferredId,recvId:r.preferredId,encrypt:n.preferredEncrypt,direction:"sendrecv"};switch(r.direction){case"sendrecv":s.direction="sendrecv";break;case"recvonly":s.direction="sendonly";break;case"sendonly":s.direction="recvonly";break;case"inactive":s.direction="inactive";break}i.headerExtensions.push(s)}return i}function Mee(e){const t={codecs:[],headerExtensions:[]};for(const i of e.codecs){const r={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(t.codecs.push(r),!i.remoteRtxPayloadType)continue;const n={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};t.codecs.push(n)}for(const i of e.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const r={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};t.headerExtensions.push(r)}return t}function Fr(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of t.codecs){if(r.kind!==e)continue;const n={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(n),r.localRtxPayloadType){const s={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const r of t.headerExtensions){if(r.kind&&r.kind!==e||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const n={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(n)}return i}function Wn(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of t.codecs){if(r.kind!==e)continue;const n={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.remoteParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(n),r.localRtxPayloadType){const s={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const r of t.headerExtensions){if(r.kind&&r.kind!==e||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const n={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(n)}if(i.headerExtensions.some(r=>r.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="goog-remb");else if(i.headerExtensions.some(r=>r.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="transport-cc");else for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="transport-cc"&&n.type!=="goog-remb");return i}function vn(e,t){const i=[];if(!t)i.push(e[0]),_u(e[1])&&i.push(e[1]);else{for(let r=0;r<e.length;++r)if(JO(e[r],t)){i.push(e[r]),_u(e[r+1])&&i.push(e[r+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function Dee(e){e=Qt(e,{}),Bb(e);const t={mid:wee,codecs:[],headerExtensions:[],encodings:[{ssrc:See}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=Eee,t.headerExtensions=e.headerExtensions,t}function xk(e,t){return t.codecs.some(i=>i.kind===e)}function Lee(e,t){if(Bb(e),e.codecs.length===0)return!1;const i=e.codecs[0];return t.codecs.some(r=>r.remotePayloadType===i.payloadType)}function _u(e){return e?/.+\/rtx$/i.test(e.mimeType):!1}function JO(e,t,{strict:i=!1,modify:r=!1}={}){const n=e.mimeType.toLowerCase(),s=t.mimeType.toLowerCase();if(n!==s||e.clockRate!==t.clockRate||e.channels!==t.channels)return!1;switch(n){case"video/h264":{if(i){const a=e.parameters["packetization-mode"]||0,o=t.parameters["packetization-mode"]||0;if(a!==o||!f1.isSameProfile(e.parameters,t.parameters))return!1;let c;try{c=f1.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch{return!1}r&&(c?(e.parameters["profile-level-id"]=c,t.parameters["profile-level-id"]=c):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const a=e.parameters["profile-id"]||0,o=t.parameters["profile-id"]||0;if(a!==o)return!1}break}}return!0}function Nee(e,t){return!(e.kind&&t.kind&&e.kind!==t.kind||e.uri!==t.uri)}function Uee(e,t){const i=[];for(const r of e.rtcpFeedback||[]){const n=(t.rtcpFeedback||[]).find(s=>s.type===r.type&&(s.parameter===r.parameter||!s.parameter&&!r.parameter));n&&i.push(n)}return i}var Lo={},_f={},jee=u1&&u1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});_f.Logger=void 0;const vc=jee(cn),yc="awaitqueue";let $ee=class{constructor(e){e?(this._debug=(0,vc.default)(`${yc}:${e}`),this._warn=(0,vc.default)(`${yc}:WARN:${e}`),this._error=(0,vc.default)(`${yc}:ERROR:${e}`)):(this._debug=(0,vc.default)(yc),this._warn=(0,vc.default)(`${yc}:WARN`),this._error=(0,vc.default)(`${yc}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};_f.Logger=$ee;Object.defineProperty(Lo,"__esModule",{value:!0});var KO=Lo.AwaitQueue=Lo.AwaitQueueRemovedTaskError=Lo.AwaitQueueStoppedError=void 0;const Vee=_f,$s=new Vee.Logger;class Hb extends Error{constructor(t){super(t!=null?t:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Hb)}}Lo.AwaitQueueStoppedError=Hb;class bf extends Error{constructor(t){super(t!=null?t:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,bf)}}Lo.AwaitQueueRemovedTaskError=bf;class Fee{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(t,i){if(i=i!=null?i:t.name,$s.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((r,n)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),$s.debug(`resolving task [name:${s.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),$s.debug(`rejecting task [name:${s.name}]: %s`,String(a)),n(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){$s.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())$s.debug(`stop() | stopping task [name:${t.name}]`);this.stopping=!1}remove(t){$s.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){$s.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new bf)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:t-r.enqueuedAt,executionTime:r.executedAt?t-r.executedAt:0}))}async execute(t){if($s.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}KO=Lo.AwaitQueue=Fee;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Ik;var iy=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:u1):e=>(Ik||(Ik=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const En=new nr("Producer");let zee=class extends Vr{constructor({id:e,localId:t,rtpSender:i,track:r,rtpParameters:n,stopTracks:s,disableTrackOnPause:a,zeroRtpOnPause:o,appData:c}){super(),this._closed=!1,this._observer=new Vr,En.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=i,this._track=r,this._kind=r.kind,this._rtpParameters=n,this._paused=a?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=a,this._zeroRtpOnPause=o,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(En.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(En.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new vt("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(En.debug("pause()"),this._closed){En.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@pause",e,t)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(En.debug("resume()"),this._closed){En.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@resume",e,t)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(En.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch{}throw new vt("closed")}else if(e&&e.readyState==="ended")throw new vt("track ended");if(e===this._track){En.debug("replaceTrack() | same track, ignored");return}await new Promise((t,i)=>{this.safeEmit("@replacetrack",e,t,i)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new vt("closed");if(this._kind!=="video")throw new qi("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((t,i)=>{this.safeEmit("@setmaxspatiallayer",e,t,i)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new vt("closed");if(typeof e!="object")throw new TypeError("invalid params");await new Promise((t,i)=>{this.safeEmit("@setrtpencodingparameters",e,t,i)})}onTrackEnded(){En.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};const Tn=new nr("Consumer");let Bee=class extends Vr{constructor({id:e,localId:t,producerId:i,rtpReceiver:r,track:n,rtpParameters:s,appData:a}){super(),this._closed=!1,this._observer=new Vr,Tn.debug("constructor()"),this._id=e,this._localId=t,this._producerId=i,this._rtpReceiver=r,this._track=n,this._rtpParameters=s,this._paused=!n.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Tn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Tn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new vt("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(Tn.debug("pause()"),this._closed){Tn.error("pause() | Consumer closed");return}if(this._paused){Tn.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Tn.debug("resume()"),this._closed){Tn.error("resume() | Consumer closed");return}if(!this._paused){Tn.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Tn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};const Xn=new nr("DataProducer");class Hee extends Vr{constructor({id:t,dataChannel:i,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new Vr,Xn.debug("constructor()"),this._id=t,this._dataChannel=i,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(t){this._dataChannel.bufferedAmountLowThreshold=t}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Xn.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Xn.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(t){if(Xn.debug("send()"),this._closed)throw new vt("closed");this._dataChannel.send(t)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Xn.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",t=>{if(this._closed)return;let{error:i}=t;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Xn.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Xn.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Xn.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||Xn.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}const Wa=new nr("DataConsumer");class Gee extends Vr{constructor({id:t,dataProducerId:i,dataChannel:r,sctpStreamParameters:n,appData:s}){super(),this._closed=!1,this._observer=new Vr,Wa.debug("constructor()"),this._id=t,this._dataProducerId=i,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(t){this._dataChannel.binaryType=t}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Wa.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Wa.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Wa.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",t=>{if(this._closed)return;let{error:i}=t;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Wa.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Wa.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Wa.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",t=>{this._closed||this.safeEmit("message",t.data)})}}const ti=new nr("Transport");class Wee{constructor(t){this.consumerOptions=t,this.promise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}}let qee=class extends Vr{constructor({direction:e,id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l,handlerFactory:u,extendedRtpCapabilities:g,canProduceByKind:m}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new KO,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new Vr,ti.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=g,this._canProduceByKind=m,this._maxSctpMessageSize=s?s.maxMessageSize:null,c=Qt(c,{}),delete c.iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=u(),this._handler.run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:g}),this._appData=l||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}get producers(){return this._producers}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){ti.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new vt("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(ti.debug("restartIce()"),this._closed)throw new vt("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(ti.debug("updateIceServers()"),this._closed)throw new vt("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:i,codec:r,stopTracks:n=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(ti.debug("produce() [track:%o]",e),this._closed)throw new vt("closed");if(e){if(this._direction!=="send")throw new qi("not a sending Transport");if(this._canProduceByKind[e.kind]){if(e.readyState==="ended")throw new vt("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new qi(`cannot produce ${e.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let c;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&t.length===0?c=void 0:t&&(c=t.map(g=>{const m={active:!0};return g.active===!1&&(m.active=!1),typeof g.dtx=="boolean"&&(m.dtx=g.dtx),typeof g.scalabilityMode=="string"&&(m.scalabilityMode=g.scalabilityMode),typeof g.scaleResolutionDownBy=="number"&&(m.scaleResolutionDownBy=g.scaleResolutionDownBy),typeof g.maxBitrate=="number"&&(m.maxBitrate=g.maxBitrate),typeof g.maxFramerate=="number"&&(m.maxFramerate=g.maxFramerate),typeof g.adaptivePtime=="boolean"&&(m.adaptivePtime=g.adaptivePtime),typeof g.priority=="string"&&(m.priority=g.priority),typeof g.networkPriority=="string"&&(m.networkPriority=g.networkPriority),m}));const{localId:d,rtpParameters:l,rtpSender:u}=await this._handler.send({track:e,encodings:c,codecOptions:i,codec:r});try{Bb(l);const{id:g}=await new Promise((f,w)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:l,appData:o},f,w)}),m=new zee({id:g,localId:d,rtpSender:u,track:e,rtpParameters:l,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o});return this._producers.set(m.id,m),this.handleProducer(m),this._observer.safeEmit("newproducer",m),m}catch(g){throw this._handler.stopSending(d).catch(()=>{}),g}},"transport.produce()").catch(c=>{if(n)try{e.stop()}catch{}throw c})}async consume({id:e,producerId:t,kind:i,rtpParameters:r,streamId:n,appData:s={}}){if(ti.debug("consume()"),r=Qt(r,void 0),this._closed)throw new vt("closed");if(this._direction!=="recv")throw new qi("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing id");if(typeof t!="string")throw new TypeError("missing producerId");if(i!=="audio"&&i!=="video")throw new TypeError(`invalid kind '${i}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object");if(!Lee(r,this._extendedRtpCapabilities))throw new qi("cannot consume this Producer");const a=new Wee({id:e,producerId:t,kind:i,rtpParameters:r,streamId:n,appData:s});return this._pendingConsumerTasks.push(a),iy(()=>{if(this._closed)throw new vt("closed");this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),a.promise}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:i,label:r="",protocol:n="",appData:s={}}={}){if(ti.debug("produceData()"),this._closed)throw new vt("closed");if(this._direction!=="send")throw new qi("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new qi("SCTP not enabled by remote Transport");return(t||i)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:i,label:r,protocol:n});Rk(o);const{id:c}=await new Promise((l,u)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:r,protocol:n,appData:s},l,u)}),d=new Hee({id:c,dataChannel:a,sctpStreamParameters:o,appData:s});return this._dataProducers.set(d.id,d),this.handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d},"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:i,label:r="",protocol:n="",appData:s={}}){if(ti.debug("consumeData()"),i=Qt(i,void 0),this._closed)throw new vt("closed");if(this._direction!=="recv")throw new qi("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof e!="string")throw new TypeError("missing id");if(typeof t!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new qi("SCTP not enabled by remote Transport");return Rk(i),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:i,label:r,protocol:n}),o=new Gee({id:e,dataProducerId:t,dataChannel:a,sctpStreamParameters:i,appData:s});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){ti.debug("createPendingConsumers() | there is no Consumer to be created");return}const e=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let t;const i=[];for(const r of e){const{id:n,kind:s,rtpParameters:a,streamId:o}=r.consumerOptions;i.push({trackId:n,kind:s,rtpParameters:a,streamId:o})}try{const r=await this._handler.receive(i);for(let n=0;n<r.length;n++){const s=e[n],a=r[n],{id:o,producerId:c,kind:d,rtpParameters:l,appData:u}=s.consumerOptions,{localId:g,rtpReceiver:m,track:f}=a,w=new Bee({id:o,localId:g,producerId:c,rtpReceiver:m,track:f,rtpParameters:l,appData:u});this._consumers.set(w.id,w),this.handleConsumer(w),!this._probatorConsumerCreated&&!t&&d==="video"&&(t=w),this._observer.safeEmit("newconsumer",w),s.resolve(w)}}catch(r){for(const n of e)n.reject(r)}if(t)try{const r=Dee(t.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:r}]),ti.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(r){ti.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",r)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){ti.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const t=e.map(i=>i.localId);await this._handler.pauseReceiving(t)}catch(t){ti.error("pausePendingConsumers() | failed to pause Consumers:",t)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){ti.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const t=e.map(i=>i.localId);await this._handler.resumeReceiving(t)}catch(t){ti.error("resumePendingConsumers() | failed to resume Consumers:",t)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){ti.debug("closePendingConsumers() | there is no Consumer to be closed");return}const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(t=>t.localId))}catch(t){ti.error("closePendingConsumers() | failed to close Consumers:",t)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:t},i,r)=>{if(this._closed){r(new vt("closed"));return}this.safeEmit("connect",{dtlsParameters:t},i,r)}),e.on("@connectionstatechange",t=>{t!==this._connectionState&&(ti.debug("connection state changed to %s",t),this._connectionState=t,this._closed||this.safeEmit("connectionstatechange",t))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(e.localId),"producer @close event").catch(t=>ti.warn("producer.close() failed:%o",t))}),e.on("@pause",(t,i)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(e.localId),"producer @pause event").then(t).catch(i)}),e.on("@resume",(t,i)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(e.localId),"producer @resume event").then(t).catch(i)}),e.on("@replacetrack",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(e.localId,t),"producer @replacetrack event").then(i).catch(r)}),e.on("@setmaxspatiallayer",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(e.localId,t),"producer @setmaxspatiallayer event").then(i).catch(r)}),e.on("@setrtpencodingparameters",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(e.localId,t),"producer @setrtpencodingparameters event").then(i).catch(r)}),e.on("@getstats",(t,i)=>{if(this._closed)return i(new vt("closed"));this._handler.getSenderStats(e.localId).then(t).catch(i)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),!this._closed&&(this._pendingCloseConsumers.set(e.id,e),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),iy(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),iy(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),e.on("@getstats",(t,i)=>{if(this._closed)return i(new vt("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(i)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}};const _i=new nr("Device");function Jee(){var e,t,i,r;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){_i.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(_i.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(_i.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){let n=navigator.userAgent;n=n==null?void 0:n.replace("motorola edge","motorola x");const s=vb.getParser(n),a=s.getEngine();if(s.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(s.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(s.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(s.satisfies({firefox:">=60"}))return"Firefox60";if(s.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||s.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||((t=(e=s.parsedResult)===null||e===void 0?void 0:e.os)===null||t===void 0?void 0:t.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(s.satisfies({"microsoft edge":">=11"})&&s.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(a.name&&a.name.toLowerCase()==="blink"){const o=n.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(o){const c=Number(o[1]);return c>=111?"Chrome111":c>=74?"Chrome74":"Chrome70"}else return"Chrome111"}else{if(((r=(i=s.parsedResult)===null||i===void 0?void 0:i.os)===null||r===void 0?void 0:r.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||a.name&&a.name.toLowerCase()==="webkit"&&a.version&&parseFloat(a.version)>605)return"Safari12";_i.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",s.getBrowserName(),s.getBrowserVersion());return}}else{_i.warn("this._detectDevice() | unknown device");return}}class Kee{constructor({handlerName:t,handlerFactory:i,Handler:r}={}){if(this._loaded=!1,this._observer=new Vr,_i.debug("constructor()"),r)if(_i.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof r=="string")t=r;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)_i.debug("constructor() | handler given: %s",t);else if(t=Jee(),t)_i.debug("constructor() | detected handler: %s",t);else throw new qi("device not supported");this.switchDevice(t)}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new vt("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new vt("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:t}){_i.debug("load() [routerRtpCapabilities:%o]",t),t=Qt(t,void 0);let i;try{if(this._loaded)throw new vt("already loaded");ty(t),i=this._handlerFactory();const r=await i.getNativeRtpCapabilities();_i.debug("load() | got native RTP capabilities:%o",r),ty(r),this._extendedRtpCapabilities=Oee(r,t),_i.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=xk("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=xk("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=Mee(this._extendedRtpCapabilities),ty(this._recvRtpCapabilities),_i.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await i.getNativeSctpCapabilities(),_i.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Iee(this._sctpCapabilities),_i.debug("load() succeeded"),this._loaded=!0,i.close()}catch(r){throw i&&i.close(),r}}canProduce(t){if(this._loaded){if(t!=="audio"&&t!=="video")throw new TypeError(`invalid kind "${t}"`)}else throw new vt("not loaded");return this._canProduceByKind[t]}createSendTransport({id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l}){return _i.debug("createSendTransport()"),this.createTransport({direction:"send",id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l})}createRecvTransport({id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l}){return _i.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l})}createTransport({direction:t,id:i,iceParameters:r,iceCandidates:n,dtlsParameters:s,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:l,appData:u}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof r!="object")throw new TypeError("missing iceParameters");if(Array.isArray(n)){if(typeof s!="object")throw new TypeError("missing dtlsParameters");if(a&&typeof a!="object")throw new TypeError("wrong sctpParameters");if(u&&typeof u!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new vt("not loaded");const g=new qee({direction:t,id:i,iceParameters:r,iceCandidates:n,dtlsParameters:s,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:l,appData:u,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",g),g}}function fp({sdpObject:e}){const t=new Map,i=[];let r=!1,n=!1;for(const s of e.media){const a=s.type;switch(a){case"audio":{if(r)continue;r=!0;break}case"video":{if(n)continue;n=!0;break}default:continue}for(const o of s.rtp){const c={kind:a,mimeType:`${a}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};t.set(c.preferredPayloadType,c)}for(const o of s.fmtp||[]){const c=QI(o.config),d=t.get(o.payload);d&&(c&&c.hasOwnProperty("profile-level-id")&&(c["profile-level-id"]=String(c["profile-level-id"])),d.parameters=c)}for(const o of s.rtcpFb||[]){const c={type:o.type,parameter:o.subtype};if(c.parameter||delete c.parameter,o.payload!=="*"){const d=t.get(o.payload);if(!d)continue;d.rtcpFeedback.push(c)}else for(const d of t.values())d.kind===a&&!/.+\/rtx$/i.test(d.mimeType)&&d.rtcpFeedback.push(c)}for(const o of s.ext||[]){if(o["encrypt-uri"])continue;const c={kind:a,uri:o.uri,preferredId:o.value};i.push(c)}}return{codecs:Array.from(t.values()),headerExtensions:i}}function vp({sdpObject:e}){const t=(e.media||[]).find(n=>n.iceUfrag&&n.port!==0);if(!t)throw new Error("no active media section found");const i=t.fingerprint||e.fingerprint;let r;switch(t.setup){case"active":r="client";break;case"passive":r="server";break;case"actpass":r="auto";break}return{role:r,fingerprints:[{algorithm:i.type,value:i.hash}]}}function yp({offerMediaObject:e}){const t=(e.ssrcs||[]).find(i=>i.attribute==="cname");return t?t.value:""}function _p({offerRtpParameters:e,answerMediaObject:t}){for(const i of e.codecs){const r=i.mimeType.toLowerCase();if(r!=="audio/opus"||!(t.rtp||[]).find(a=>a.payload===i.payloadType))continue;t.fmtp=t.fmtp||[];let n=t.fmtp.find(a=>a.payload===i.payloadType);n||(n={payload:i.payloadType,config:""},t.fmtp.push(n));const s=QI(n.config);switch(r){case"audio/opus":{const a=i.parameters["sprop-stereo"];a!==void 0&&(s.stereo=a?1:0);break}}n.config="";for(const a of Object.keys(s))n.config&&(n.config+=";"),n.config+=`${a}=${s[a]}`}}function Oa({offerMediaObject:e}){const t=new Set;for(const n of e.ssrcs||[]){const s=n.id;t.add(s)}if(t.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const n of e.ssrcGroups||[]){if(n.semantics!=="FID")continue;let[s,a]=n.ssrcs.split(/\s+/);s=Number(s),a=Number(a),t.has(s)&&(t.delete(s),t.delete(a),i.set(s,a))}for(const n of t)i.set(n,null);const r=[];for(const[n,s]of i){const a={ssrc:n};s&&(a.rtx={ssrc:s}),r.push(a)}return r}function pm({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const i=(e.ssrcs||[]).find(u=>u.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[r,n]=i.value.split(" "),s=i.id;let a;(e.ssrcGroups||[]).some(u=>{if(u.semantics!=="FID")return!1;const g=u.ssrcs.split(/\s+/);return Number(g[0])===s?(a=Number(g[1]),!0):!1});const o=e.ssrcs.find(u=>u.attribute==="cname");if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,d=[],l=[];for(let u=0;u<t;++u)d.push(s+u),a&&l.push(a+u);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let u=0;u<d.length;++u){const g=d[u];e.ssrcs.push({id:g,attribute:"cname",value:c}),e.ssrcs.push({id:g,attribute:"msid",value:`${r} ${n}`})}for(let u=0;u<l.length;++u){const g=d[u],m=l[u];e.ssrcs.push({id:m,attribute:"cname",value:c}),e.ssrcs.push({id:m,attribute:"msid",value:`${r} ${n}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${g} ${m}`})}}let Yd=class extends Vr{constructor(){super()}};class YO{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,t&&this.setIceParameters(t),i){this._mediaObject.candidates=[];for(const s of i){const a={};a.component=1,a.foundation=s.foundation,a.ip=s.ip,a.port=s.port,a.priority=s.priority,a.transport=s.protocol,a.type=s.type,s.tcpType&&(a.tcptype=s.tcpType),this._mediaObject.candidates.push(a)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(t){this._mediaObject.iceUfrag=t.usernameFragment,this._mediaObject.icePwd=t.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}muxSimulcastStreams(t){if(this._mediaObject.simulcast&&this._mediaObject.simulcast.list1){const i={};t.forEach(s=>{s.rid&&(i[s.rid]=s)});const r=this._mediaObject.simulcast.list1,n=ZI(r);n.forEach(s=>{s.forEach(a=>{var o;a.paused=!(!((o=i[a.scid])===null||o===void 0)&&o.active)})}),this._mediaObject.simulcast.list1=n.map(s=>s.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}}class Ak extends YO{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:d,codecOptions:l,extmapAllowMixed:u=!1,forceGoogConference:g=!1}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const m of d.codecs){const f={payload:m.payloadType,codec:v1(m),rate:m.clockRate};m.channels>1&&(f.encoding=m.channels),this._mediaObject.rtp.push(f);const w=Qt(m.parameters,{});if(l){const{opusStereo:y,opusFec:_,opusDtx:T,opusMaxPlaybackRate:C,opusMaxAverageBitrate:D,opusPtime:O,videoGoogleStartBitrate:z,videoGoogleMaxBitrate:H,videoGoogleMinBitrate:ie}=l,K=c.codecs.find(ge=>ge.payloadType===m.payloadType);switch(m.mimeType.toLowerCase()){case"audio/opus":{y!==void 0&&(K.parameters["sprop-stereo"]=y?1:0,w.stereo=y?1:0),_!==void 0&&(K.parameters.useinbandfec=_?1:0,w.useinbandfec=_?1:0),T!==void 0&&(K.parameters.usedtx=T?1:0,w.usedtx=T?1:0),C!==void 0&&(w.maxplaybackrate=C),D!==void 0&&(w.maxaveragebitrate=D),O!==void 0&&(K.parameters.ptime=O,w.ptime=O);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{z!==void 0&&(w["x-google-start-bitrate"]=z),H!==void 0&&(w["x-google-max-bitrate"]=H),ie!==void 0&&(w["x-google-min-bitrate"]=ie);break}}}const S={payload:m.payloadType,config:""};for(const y of Object.keys(w))S.config&&(S.config+=";"),S.config+=`${y}=${w[y]}`;S.config&&this._mediaObject.fmtp.push(S);for(const y of m.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:m.payloadType,type:y.type,subtype:y.parameter})}this._mediaObject.payloads=d.codecs.map(m=>m.payloadType).join(" "),this._mediaObject.ext=[];for(const m of d.headerExtensions)(o.ext||[]).some(f=>f.uri===m.uri)&&this._mediaObject.ext.push({uri:m.uri,value:m.id});if(u&&o.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",(this._planB||g)&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof o.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize});break}}}setDtlsRole(t){switch(t){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(t){var i;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const a of t)a.rid&&(r[a.rid]=a);const n=this._mediaObject.simulcast.list1,s=ZI(n);for(const a of s)for(const o of a)o.paused=!(!((i=r[o.scid])===null||i===void 0)&&i.active);this._mediaObject.simulcast.list1=s.map(a=>a.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}class Ok extends YO{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1,mid:o,kind:c,offerRtpParameters:d,streamId:l,trackId:u,oldDataChannelSpec:g=!1}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o),this._mediaObject.type=c,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},n?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${l||"-"} ${u}`);for(const S of d.codecs){const y={payload:S.payloadType,codec:v1(S),rate:S.clockRate};S.channels>1&&(y.encoding=S.channels),this._mediaObject.rtp.push(y);const _={payload:S.payloadType,config:""};for(const T of Object.keys(S.parameters))_.config&&(_.config+=";"),_.config+=`${T}=${S.parameters[T]}`;_.config&&this._mediaObject.fmtp.push(_);for(const T of S.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:S.payloadType,type:T.type,subtype:T.parameter})}this._mediaObject.payloads=d.codecs.map(S=>S.payloadType).join(" "),this._mediaObject.ext=[];for(const S of d.headerExtensions)this._mediaObject.ext.push({uri:S.uri,value:S.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const m=d.encodings[0],f=m.ssrc,w=m.rtx&&m.rtx.ssrc?m.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],d.rtcp.cname&&this._mediaObject.ssrcs.push({id:f,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:f,attribute:"msid",value:`${l||"-"} ${u}`}),w&&(d.rtcp.cname&&this._mediaObject.ssrcs.push({id:w,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:w,attribute:"msid",value:`${l||"-"} ${u}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${w}`}));break}case"application":{g?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize);break}}}setDtlsRole(t){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:t,streamId:i,trackId:r}){const n=t.encodings[0],s=n.ssrc,a=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const c of t.codecs){if(o.includes(String(c.payloadType)))continue;const d={payload:c.payloadType,codec:v1(c),rate:c.clockRate};c.channels>1&&(d.encoding=c.channels),this._mediaObject.rtp.push(d);const l={payload:c.payloadType,config:""};for(const u of Object.keys(c.parameters))l.config&&(l.config+=";"),l.config+=`${u}=${c.parameters[u]}`;l.config&&this._mediaObject.fmtp.push(l);for(const u of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:u.type,subtype:u.parameter})}this._mediaObject.payloads+=` ${t.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),t.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${i||"-"} ${r}`}),a&&(t.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${i||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${s} ${a}`}))}planBStopReceiving({offerRtpParameters:t}){const i=t.encodings[0],r=i.ssrc,n=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(s=>s.id!==r&&s.id!==n),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(s=>s.ssrcs!==`${r} ${n}`))}}function v1(e){const t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}const ry=new nr("RemoteSdp");class bp{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=t,this._iceCandidates=i,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=s,this._planB=a,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},t&&t.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const o=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[o-1].algorithm,hash:r.fingerprints[o-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}updateIceParameters(t){ry.debug("updateIceParameters() [iceParameters:%o]",t),this._iceParameters=t,this._sdpObject.icelite=t.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(t)}updateDtlsRole(t){ry.debug("updateDtlsRole() [role:%s]",t),this._dtlsParameters.role=t;for(const i of this._mediaSections)i.setDtlsRole(t)}getNextMediaSectionIdx(){for(let t=0;t<this._mediaSections.length;++t){const i=this._mediaSections[t];if(i.closed)return{idx:t,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:t,reuseMid:i,offerRtpParameters:r,answerRtpParameters:n,codecOptions:s,extmapAllowMixed:a=!1,forceGoogConference:o=!1}){const c=new Ak({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:s,extmapAllowMixed:a,forceGoogConference:o});i?this._replaceMediaSection(c,i):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}receive({mid:t,kind:i,offerRtpParameters:r,streamId:n,trackId:s}){const a=this._midToIndex.get(t);let o;if(a!==void 0&&(o=this._mediaSections[a]),o)o.planBReceive({offerRtpParameters:r,streamId:n,trackId:s}),this._replaceMediaSection(o);else{o=new Ok({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:t,kind:i,offerRtpParameters:r,streamId:n,trackId:s});const c=this._mediaSections.find(d=>d.closed);c?this._replaceMediaSection(o,c.mid):this._addMediaSection(o)}}pauseMediaSection(t){this._findMediaSection(t).pause()}resumeSendingMediaSection(t){this._findMediaSection(t).resume()}resumeReceivingMediaSection(t){this._findMediaSection(t).resume()}disableMediaSection(t){this._findMediaSection(t).disable()}closeMediaSection(t){const i=this._findMediaSection(t);return t===this._firstMid?(ry.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",t),this.disableMediaSection(t),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(t,i){const r=this._midToIndex.get(t);if(r===void 0)throw new Error(`no media section found with mid '${t}'`);const n=this._mediaSections[r];if(n===void 0)throw new Error(`no media section found with idx '${r}'`);n.muxSimulcastStreams(i),this._replaceMediaSection(n)}planBStopReceiving({mid:t,offerRtpParameters:i}){const r=this._findMediaSection(t);r.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:t}){const i=new Ak({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:t});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:t=!1}={}){const i=new Ok({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:t});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,hn(this._sdpObject)}_addMediaSection(t){this._firstMid||(this._firstMid=t.mid),this._mediaSections.push(t),this._midToIndex.set(t.mid,this._mediaSections.length-1),this._sdpObject.media.push(t.getObject()),this._regenerateBundleMids()}_replaceMediaSection(t,i){if(typeof i=="string"){const r=this._midToIndex.get(i);if(r===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const n=this._mediaSections[r];this._mediaSections[r]=t,this._midToIndex.delete(n.mid),this._midToIndex.set(t.mid,r),this._sdpObject.media[r]=t.getObject(),this._regenerateBundleMids()}else{const r=this._midToIndex.get(t.mid);if(r===void 0)throw new Error(`no media section found with mid '${t.mid}'`);this._mediaSections[r]=t,this._sdpObject.media[r]=t.getObject()}}_findMediaSection(t){const i=this._midToIndex.get(t);if(i===void 0)throw new Error(`no media section found with mid '${t}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(t=>!t.closed).map(t=>t.mid).join(" "))}}const Yee=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function wp(e){const t=Yee.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}const we=new nr("Chrome70"),Mk={OS:1024,MIS:1024};class Gb extends Yd{static createFactory(){return()=>new Gb}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(we.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){we.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return fp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return we.debug("getNativeSctpCapabilities()"),{numStreams:Mk}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){we.debug("run()"),this._direction=t,this._remoteSdp=new bp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fr("audio",l),video:Fr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Wn("audio",l),video:Wn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(we.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){we.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(we.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});we.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;this.assertSendDirection(),we.debug("send() [kind:%s, track.id:%s]",t.kind,t.id);const a=Qt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=vn(a.codecs,n);const o=Qt(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=vn(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=be(l.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u}),i&&i.length>1&&(we.debug("send() | enabling legacy simulcast"),u=be(l.sdp),g=u.media[c.idx],pm({offerMediaObject:g,numStreams:i.length}),l={type:"offer",sdp:hn(u)});let m=!1;const f=wp((i||[{}])[0].scalabilityMode);if(i&&i.length===1&&f.spatialLayers>1&&a.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(we.debug("send() | enabling legacy simulcast for VP9 SVC"),m=!0,u=be(l.sdp),g=u.media[c.idx],pm({offerMediaObject:g,numStreams:f.spatialLayers}),l={type:"offer",sdp:hn(u)}),we.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),i){we.debug("send() | applying given encodings");const y=d.sender.getParameters();for(let _=0;_<(y.encodings||[]).length;++_){const T=y.encodings[_],C=i[_];if(!C)break;y.encodings[_]=Object.assign(T,C)}await d.sender.setParameters(y)}const w=d.mid;if(a.mid=w,u=be(this._pc.localDescription.sdp),g=u.media[c.idx],a.rtcp.cname=yp({offerMediaObject:g}),a.encodings=Oa({offerMediaObject:g}),i)for(let y=0;y<a.encodings.length;++y)i[y]&&Object.assign(a.encodings[y],i[y]);if(m&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const y of a.encodings)y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return we.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(w,d),{localId:w,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),we.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();we.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){}async resumeSending(t){}async replaceTrack(t,i){this.assertSendDirection(),i?we.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):we.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),we.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();we.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),we.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();we.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:r,protocol:s};we.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Mk.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),we.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;we.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);_p({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:hn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),we.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){we.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){}async resumeReceiving(t){}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:c,protocol:r};we.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}we.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=vp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}const se=new nr("Chrome74"),Dk={OS:1024,MIS:1024};let Qee=class QO extends Yd{static createFactory(){return()=>new QO}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(se.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){se.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return fp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return se.debug("getNativeSctpCapabilities()"),{numStreams:Dk}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){se.debug("run()"),this._direction=t,this._remoteSdp=new bp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fr("audio",l),video:Fr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Wn("audio",l),video:Wn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(se.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(t){se.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(se.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});se.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s,a;this.assertSendDirection(),se.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&i.length>1&&i.forEach((_,T)=>{_.rid=`r${T}`});const o=Qt(this._sendingRtpParametersByKind[t.kind],{});o.codecs=vn(o.codecs,n);const c=Qt(this._sendingRemoteRtpParametersByKind[t.kind],{});c.codecs=vn(c.codecs,n);const d=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i});let u=await this._pc.createOffer(),g=be(u.sdp),m;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:g});let f=!1;const w=wp((i||[{}])[0].scalabilityMode);i&&i.length===1&&w.spatialLayers>1&&o.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(se.debug("send() | enabling legacy simulcast for VP9 SVC"),f=!0,g=be(u.sdp),m=g.media[d.idx],pm({offerMediaObject:m,numStreams:w.spatialLayers}),u={type:"offer",sdp:hn(g)}),se.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const S=l.mid;if(o.mid=S,g=be(this._pc.localDescription.sdp),m=g.media[d.idx],o.rtcp.cname=yp({offerMediaObject:m}),!i)o.encodings=Oa({offerMediaObject:m});else if(i.length===1){let _=Oa({offerMediaObject:m});Object.assign(_[0],i[0]),f&&(_=[_[0]]),o.encodings=_}else o.encodings=i;if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _ of o.encodings)_.scalabilityMode?_.scalabilityMode=`L1T${w.temporalLayers}`:_.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,reuseMid:d.reuseMid,offerRtpParameters:o,answerRtpParameters:c,codecOptions:r,extmapAllowMixed:!0,forceGoogConference:(a=r==null?void 0:r.forceGoogConference)!==null&&a!==void 0?a:!1});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return se.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(S,l),{localId:S,rtpParameters:o,rtpSender:l.sender}}async stopSending(t){this.assertSendDirection(),se.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();se.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),se.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();se.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),se.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(this._remoteSdp.resumeSendingMediaSection(t),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();se.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?se.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):se.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),se.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();se.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),se.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();se.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};se.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Dk.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),se.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;se.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);_p({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:hn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),se.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){se.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){se.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){se.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};se.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=vp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const oe=new nr("Chrome111"),Lk={OS:1024,MIS:1024};class Wb extends Yd{static createFactory(){return()=>new Wb}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(oe.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){oe.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return fp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return oe.debug("getNativeSctpCapabilities()"),{numStreams:Lk}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){oe.debug("run()"),this._direction=t,this._remoteSdp=new bp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fr("audio",l),video:Fr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Wn("audio",l),video:Wn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(oe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(t){oe.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(oe.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});oe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;if(this.assertSendDirection(),oe.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&i.length>1){i.forEach((y,_)=>{y.rid=`r${_}`});let w=1,S=1;for(const y of i){const _=y.scalabilityMode?wp(y.scalabilityMode).temporalLayers:3;_>S&&(S=_)}for(const y of i)y.rid=`r${w++}`,y.scalabilityMode=`L1T${S}`}const a=Qt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=vn(a.codecs,n);const o=Qt(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=vn(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),l=await this._pc.createOffer();let u=be(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u}),oe.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const g=d.mid;a.mid=g,u=be(this._pc.localDescription.sdp);const m=u.media[c.idx];if(a.rtcp.cname=yp({offerMediaObject:m}),!i)a.encodings=Oa({offerMediaObject:m});else if(i.length===1){const w=Oa({offerMediaObject:m});Object.assign(w[0],i[0]),a.encodings=w}else a.encodings=i;this._remoteSdp.send({offerMediaObject:m,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});const f={type:"answer",sdp:this._remoteSdp.getSdp()};return oe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.set(g,d),{localId:g,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),oe.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();oe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),oe.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();oe.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),oe.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(this._remoteSdp.resumeSendingMediaSection(t),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();oe.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?oe.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):oe.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),oe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();oe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),oe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();oe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};oe.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Lk.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),oe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;oe.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);_p({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:hn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),oe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){oe.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){oe.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){oe.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};oe.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=vp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}function Zee(){const e=RTCRtpReceiver.getCapabilities(),t=Qt(e,{});for(const i of t.codecs){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType||`${i.kind}/${i.name}`,i.parameters){const r=i.parameters;r.apt&&(r.apt=Number(r.apt)),r["packetization-mode"]&&(r["packetization-mode"]=Number(r["packetization-mode"]))}for(const r of i.rtcpFeedback||[])r.parameter||(r.parameter="")}return t}function Nk(e){const t=Qt(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);for(const i of t.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return t}const qe=new nr("Edge11");class qb extends Yd{static createFactory(){return()=>new qb}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){qe.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const t of this._rtpSenders.values())try{t.stop()}catch{}for(const t of this._rtpReceivers.values())try{t.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return qe.debug("getNativeRtpCapabilities()"),Zee()}async getNativeSctpCapabilities(){return qe.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){qe.debug("run()"),this._sendingRtpParametersByKind={audio:Fr("audio",l),video:Fr("video",l)},this._remoteIceParameters=i,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname=`CNAME-${ey()}`,this.setIceGatherer({iceServers:a,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(t){throw new qi("not supported")}async restartIce(t){if(qe.debug("restartIce()"),this._remoteIceParameters=t,!!this._transportReady){qe.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,t,"controlling");for(const i of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(i);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){qe.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),qe.debug("send() | calling new RTCRtpSender()");const s=new RTCRtpSender(t,this._dtlsTransport),a=Qt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=vn(a.codecs,n);const o=a.codecs.some(l=>/.+\/rtx$/i.test(l.mimeType));i||(i=[{}]);for(const l of i)l.ssrc=ey(),o&&(l.rtx={ssrc:ey()});a.encodings=i,a.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=Nk(a);qe.debug("send() | calling rtpSender.send() [params:%o]",c),await s.send(c);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(d,s),{localId:d,rtpParameters:a,rtpSender:s}}async stopSending(t){qe.debug("stopSending() [localId:%s]",t);const i=this._rtpSenders.get(t);if(!i)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(t);try{qe.debug("stopSending() | calling rtpSender.stop()"),i.stop()}catch(r){throw qe.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(t){}async resumeSending(t){}async replaceTrack(t,i){i?qe.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):qe.debug("replaceTrack() [localId:%s, no track]",t);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(i)}async setMaxSpatialLayer(t,i){qe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.setParameters(n)}async setRtpEncodingParameters(t,i){qe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.setParameters(n)}async getSenderStats(t){const i=this._rtpSenders.get(t);if(!i)throw new Error("RTCRtpSender not found");return i.getStats()}async sendDataChannel(t){throw new qi("not implemented")}async receive(t){const i=[];for(const r of t){const{trackId:n,kind:s}=r;qe.debug("receive() [trackId:%s, kind:%s]",n,s)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of t){const{trackId:n,kind:s,rtpParameters:a}=r;qe.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,s);o.addEventListener("error",l=>{qe.error('rtpReceiver "error" event [event:%o]',l)});const c=Nk(a);qe.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await o.receive(c);const d=n;this._rtpReceivers.set(d,o),i.push({localId:d,track:o.track,rtpReceiver:o})}return i}async stopReceiving(t){for(const i of t){qe.debug("stopReceiving() [localId:%s]",i);const r=this._rtpReceivers.get(i);if(!r)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(i);try{qe.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(n){qe.warn("stopReceiving() | rtpReceiver.stop() failed:%o",n)}}}async pauseReceiving(t){}async resumeReceiving(t){}async getReceiverStats(t){const i=this._rtpReceivers.get(t);if(!i)throw new Error("RTCRtpReceiver not found");return i.getStats()}async receiveDataChannel(t){throw new qi("not implemented")}setIceGatherer({iceServers:t,iceTransportPolicy:i}){const r=new RTCIceGatherer({iceServers:t||[],gatherPolicy:i||"all"});r.addEventListener("error",n=>{qe.error('iceGatherer "error" event [event:%o]',n)});try{r.gather()}catch(n){qe.debug("setIceGatherer() | iceGatherer.gather() failed: %s",n.toString())}this._iceGatherer=r}setIceTransport(){const t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",()=>{switch(t.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),t.addEventListener("icestatechange",()=>{switch(t.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),t.addEventListener("candidatepairchange",i=>{qe.debug('iceTransport "candidatepairchange" event [pair:%o]',i.pair)}),this._iceTransport=t}setDtlsTransport(){const t=new RTCDtlsTransport(this._iceTransport);t.addEventListener("statechange",()=>{qe.debug('dtlsTransport "statechange" event [state:%s]',t.state)}),t.addEventListener("dtlsstatechange",()=>{qe.debug('dtlsTransport "dtlsstatechange" event [state:%s]',t.state),t.state==="closed"&&this.emit("@connectionstatechange","closed")}),t.addEventListener("error",i=>{qe.error('dtlsTransport "error" event [event:%o]',i)}),this._dtlsTransport=t}async setupTransport({localDtlsRole:t}){qe.debug("setupTransport()");const i=this._dtlsTransport.getLocalParameters();i.role=t,await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:i},r,n)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(r=>r.algorithm==="sha-256"||r.algorithm==="sha-384"||r.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}const ue=new nr("Firefox60"),Uk={OS:16,MIS:2048};let Xee=class ZO extends Yd{static createFactory(){return()=>new ZO}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(ue.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ue.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const r=i.captureStream().getVideoTracks()[0];try{t.addTransceiver("audio",{direction:"sendrecv"});const n=t.addTransceiver(r,{direction:"sendrecv"}),s=n.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];s.encodings=a,await n.sender.setParameters(s);const o=await t.createOffer();try{i.remove()}catch{}try{r.stop()}catch{}try{t.close()}catch{}const c=be(o.sdp);return fp({sdpObject:c})}catch(n){try{i.remove()}catch{}try{r.stop()}catch{}try{t.close()}catch{}throw n}}async getNativeSctpCapabilities(){return ue.debug("getNativeSctpCapabilities()"),{numStreams:Uk}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){ue.debug("run()"),this._direction=t,this._remoteSdp=new bp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fr("audio",l),video:Fr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Wn("audio",l),video:Wn("video",l)},this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ue.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){throw new qi("not supported")}async restartIce(t){if(ue.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ue.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){this.assertSendDirection(),ue.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&(i=Qt(i,[]),i.length>1&&(i.forEach((f,w)=>{f.rid=`r${w}`}),i.reverse()));const s=Qt(this._sendingRtpParametersByKind[t.kind],{});s.codecs=vn(s.codecs,n);const a=Qt(this._sendingRemoteRtpParametersByKind[t.kind],{});a.codecs=vn(a.codecs,n);const o=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});if(i){const f=o.sender.getParameters();f.encodings=i,await o.sender.setParameters(f)}const c=await this._pc.createOffer();let d=be(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d});const l=wp((i||[{}])[0].scalabilityMode);ue.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u=o.mid;s.mid=u,d=be(this._pc.localDescription.sdp);const g=d.media[d.media.length-1];if(s.rtcp.cname=yp({offerMediaObject:g}),!i)s.encodings=Oa({offerMediaObject:g});else if(i.length===1){const f=Oa({offerMediaObject:g});Object.assign(f[0],i[0]),s.encodings=f}else s.encodings=i.reverse();if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const f of s.encodings)f.scalabilityMode?f.scalabilityMode=`L1T${l.temporalLayers}`:f.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,offerRtpParameters:s,answerRtpParameters:a,codecOptions:r,extmapAllowMixed:!0});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return ue.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.set(u,o),{localId:u,rtpParameters:s,rtpSender:o.sender}}async stopSending(t){ue.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const r=await this._pc.createOffer();ue.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),ue.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();ue.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),ue.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(t);const r=await this._pc.createOffer();ue.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?ue.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):ue.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),ue.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated transceiver not found");const n=r.sender.getParameters();i=n.encodings.length-1-i,n.encodings.forEach((o,c)=>{c>=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ue.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),ue.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ue.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};ue.debug("sendDataChannel() [options:%o]",a);const o=this._pc.createDataChannel(n,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Uk.MIS,!this._hasDataChannelMediaSection){const d=await this._pc.createOffer(),l=be(d.sdp),u=l.media.find(m=>m.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l}),ue.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const g={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._hasDataChannelMediaSection=!0}const c={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:o,sctpStreamParameters:c}}async receive(t){this.assertRecvDirection();const i=[],r=new Map;for(const o of t){const{trackId:c,kind:d,rtpParameters:l,streamId:u}=o;ue.debug("receive() [trackId:%s, kind:%s]",c,d);const g=l.mid||String(this._mapMidTransceiver.size);r.set(c,g),this._remoteSdp.receive({mid:g,kind:d,offerRtpParameters:l,streamId:u||l.rtcp.cname,trackId:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let s=await this._pc.createAnswer();const a=be(s.sdp);for(const o of t){const{trackId:c,rtpParameters:d}=o,l=r.get(c),u=a.media.find(g=>String(g.mid)===l);_p({offerRtpParameters:d,answerMediaObject:u}),s={type:"answer",sdp:hn(a)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:a}),ue.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const o of t){const{trackId:c}=o,d=r.get(c),l=this._pc.getTransceivers().find(u=>u.mid===d);if(!l)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(d,l),i.push({localId:d,track:l.receiver.track,rtpReceiver:l.receiver})}return i}async stopReceiving(t){this.assertRecvDirection();for(const n of t){ue.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){ue.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){ue.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:s,maxPacketLifeTime:a,maxRetransmits:o}=t,c={negotiated:!0,id:n,ordered:s,maxPacketLifeTime:a,maxRetransmits:o,protocol:r};ue.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(i,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const l={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const u=await this._pc.createAnswer();if(!this._transportReady){const g=be(u.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:g})}ue.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=vp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const ae=new nr("Safari12"),jk={OS:1024,MIS:1024};let ete=class XO extends Yd{static createFactory(){return()=>new XO}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(ae.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ae.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return fp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return ae.debug("getNativeSctpCapabilities()"),{numStreams:jk}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){ae.debug("run()"),this._direction=t,this._remoteSdp=new bp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Fr("audio",l),video:Fr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Wn("audio",l),video:Wn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ae.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){ae.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(ae.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ae.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;this.assertSendDirection(),ae.debug("send() [kind:%s, track.id:%s]",t.kind,t.id);const a=Qt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=vn(a.codecs,n);const o=Qt(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=vn(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=be(l.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u});const m=wp((i||[{}])[0].scalabilityMode);i&&i.length>1&&(ae.debug("send() | enabling legacy simulcast"),u=be(l.sdp),g=u.media[c.idx],pm({offerMediaObject:g,numStreams:i.length}),l={type:"offer",sdp:hn(u)}),ae.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f=d.mid;if(a.mid=f,u=be(this._pc.localDescription.sdp),g=u.media[c.idx],a.rtcp.cname=yp({offerMediaObject:g}),a.encodings=Oa({offerMediaObject:g}),i)for(let S=0;S<a.encodings.length;++S)i[S]&&Object.assign(a.encodings[S],i[S]);if(a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const S of a.encodings)S.scalabilityMode?S.scalabilityMode=`L1T${m.temporalLayers}`:S.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return ae.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(f,d),{localId:f,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),ae.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();ae.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),ae.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();ae.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),ae.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(t);const r=await this._pc.createOffer();ae.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?ae.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):ae.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),ae.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ae.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),ae.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ae.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};ae.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jk.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),ae.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;ae.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);_p({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:hn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),ae.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){ae.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){ae.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){ae.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};ae.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}ae.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=vp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}},eM=class extends Kee{constructor({handlerName:e,handlerFactory:t,Handler:i}={}){super({handlerName:e,handlerFactory:t,Handler:i})}switchDevice(e){switch(e){case"Chrome111":this._handlerFactory=Wb.createFactory();break;case"Chrome74":this._handlerFactory=Qee.createFactory();break;case"Chrome70":this._handlerFactory=Gb.createFactory();break;case"Firefox60":this._handlerFactory=Xee.createFactory();break;case"Safari12":this._handlerFactory=ete.createFactory();break;case"Edge11":this._handlerFactory=qb.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}};const Yu="chrome",tM="opera",iM="firefox",rM="iexplorer",nM="safari",sM="nwjs",aM="electron",oM="react-native",Jb="unknown",hm={Chrome:Yu,Chromium:Yu,Opera:tM,Firefox:iM,"Internet Explorer":rM,Safari:nM};function tte(){const{userAgent:e}=navigator,t={name:Jb,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){const i=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(i,10)>72&&(t.name=Yu,t.version=i)}else t.name=Yu,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t}function ite(){const{userAgent:e}=navigator;if(e.match(/Electron/)){const t=e.match(/Electron\/([\d.]+)/)[1];return{name:aM,version:t}}return null}function rte(){const{userAgent:e}=navigator;if(e.match(/JitsiMeetNW/)){const t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:sM,version:t}}}function nte(){const e=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let t;if(e||navigator.product==="ReactNative")return e&&e.length>2&&(e[1],t=e[2]),t||(t="unknown"),{name:oM,version:t}}function ste(e){let t;const i=[nte,ite,rte];for(let n=0;n<i.length;n+=1)if(t=i[n](),t)return t;const r=e.getBrowserName();return r in hm?{name:hm[r],version:e.getBrowserVersion()}:(t=tte(),t||{name:Jb,version:void 0})}class ate{constructor(){v(this,"_bowser"),v(this,"_name"),v(this,"_version"),v(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(t){let i,r;if(this._bowser=vb.getParser(navigator.userAgent),typeof t>"u"){const n=ste(this._bowser);i=n.name,r=n.version}else t.name in hm?(i=hm[t.name],r=t.version):(i=Jb,r=void 0);this._name=i,this._version=r}getName(){return this._name}isChrome(){return this._name===Yu}isOpera(){return this._name===tM}isFirefox(){return this._name===iM}isIExplorer(){return this._name===rM}isSafari(){return this._name===nM}isNWJS(){return this._name===sM}isElectron(){return this._name===aM}isReactNative(){return this._name===oM||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(t){if(this._version)return this._bowser.satisfies(t)}isVersionGreaterThan(t){return this._checkCondition({[this._name]:`>${t}`})}isVersionLessThan(t){return this._checkCondition({[this._name]:`<${t}`})}isVersionEqualTo(t){return this._checkCondition({[this._name]:`~${t}`})}}const ote=72;class cte extends ate{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=ote||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange<"u"&&typeof navigator.mediaDevices.addEventListener<"u"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver<"u"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia<"u"||typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getDisplayMedia<"u"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender<"u"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const t=new ReadableStream;try{return window.postMessage(t,"*",[t]),!0}catch{return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const t=navigator.userAgent;if(t.match(/Chrome/))return Number.parseInt(t.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Oe=new cte,cM={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}},hd_cropped:{width:{ideal:900},height:{ideal:720}}},$k={},dte=[{rid:"r0",scalabilityMode:"L1T2"},{rid:"r1",scalabilityMode:"L1T2"}],lte=[{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:25e5}],ute=[{active:!1,priority:"low"},{active:!1,priority:"low"},{active:!0,priority:"low"}],Vk={320:[{rid:"q",maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"}],640:[{rid:"q",scaleResolutionDownBy:2,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"}],1280:[{rid:"q",scaleResolutionDownBy:4,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",scaleResolutionDownBy:2,maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"f",maxBitrate:15e5,maxFramerate:30,scalabilityMode:"L1T3"}]},pte=[{scalabilityMode:"L3T3_KEY"}];var ne=(e=>(e.WEBCAM="webcam",e.MIC="mic",e.SCREENSHARE_VIDEO="screenshare_video",e.SCREENSHARE_AUDIO="screenshare_audio",e))(ne||{});function hte(e){return e.replace(/([-_]\w)/g,t=>t[1].toUpperCase())}function Nr(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>Nr(i));const t={};return Object.keys(e).forEach(i=>{const r=pb(i)?i:hte(i);t[r]=Nr(e[i])}),t}function gte(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}function dM(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>dM(i));const t={};return Object.keys(e).forEach(i=>{const r=pb(i)?i:gte(i);t[r]=e[i]}),t}function y1(e,t={}){return e==null?{}:(Object.getOwnPropertyNames(e).forEach(i=>{if(typeof e[i]!="function"){if(typeof e[i]=="object"){y1(e[i],t[i]={});return}t[i]=e[i]}}),t)}var _1=(e=>(e.PARTICIPANT="PARTICIPANT",e.PEER="PEER",e.CLIENT="CLIENT",e))(_1||{});const re={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",FEAT_SPOTLIGHT:"feat_spotlight",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints"},Ze={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{}};function mte(e){var t;Ze.roomName!=null||(Ze.roomName=e==null?void 0:e.roomName),Ze.authToken!=null||(Ze.authToken=e==null?void 0:e.authToken),Ze.peerId!=null||(Ze.peerId=e==null?void 0:e.peerId),Ze.apiBase!=null||(Ze.apiBase=e==null?void 0:e.apiBase),Ze.modules!=null||(Ze.modules=e==null?void 0:e.modules),Ze.organizationId!=null||(Ze.organizationId=e==null?void 0:e.organizationId),Ze.defaults={...Ze.defaults,...(t=e==null?void 0:e.defaults)!=null?t:{}}}const Md="1.13.0",gm="web-core",fte=gee(),Xi=Nr(fte.config.media);var Wh;class lM{constructor(t){I(this,Wh,void 0),v(this,"getScreenShareConstraints",()=>{var i,r;const{displaySurface:n}=(i=Ze.defaults.screenShare)!=null?i:{};let s={width:{max:1920},height:{max:1080},frameRate:{ideal:parseInt((r=ee.getValue(re.VAL_MIN_FRAMERATE))!=null?r:"5",10),max:5}};if(ee.hasFeature(re.SCREENSHARE_CONSTRAINTS)){const a=ee.getValue(re.SCREENSHARE_CONSTRAINTS);s=JSON.parse(a)}return n!==void 0&&["monitor","browser","window"].includes(n)&&(s={...s,displaySurface:n}),{audio:!0,video:s}}),v(this,"getAudioConstraints",i=>{const r={};return Oe.isFirefox()||Oe.isWebKitBased()?(r.audio={deviceId:i,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},r):(r.audio={},r.audio.optional=[i?{sourceId:i}:{sourceId:"default"},{echoCancellation:!0},{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0}],r)}),v(this,"getVideoConstraints",i=>{const r={},{quality:n}=h(this,Wh).video;let s=cM[n];if(s.frameRate={ideal:24},Oe.isChromiumBased()&&(s.frameRate.max=30),ee.hasFeature(re.VIDEO_CONSTRAINTS)){const a=ee.getValue(re.VIDEO_CONSTRAINTS);s=JSON.parse(a)}return r.video=s,i?r.video.deviceId={exact:i}:r.video.facingMode="user",r}),A(this,Wh,t!=null?t:Xi)}}Wh=new WeakMap;var vte=/\s/;function yte(e){for(var t=e.length;t--&&vte.test(e.charAt(t)););return t}var _te=/^\s+/;function bte(e){return e&&e.slice(0,yte(e)+1).replace(_te,"")}var Fk=0/0,wte=/^[-+]0x[0-9a-f]+$/i,Ste=/^0b[01]+$/i,Ete=/^0o[0-7]+$/i,Tte=parseInt;function zk(e){if(typeof e=="number")return e;if(lee(e))return Fk;if(Aa(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Aa(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bte(e);var i=Ste.test(e);return i||Ete.test(e)?Tte(e.slice(2),i?2:8):wte.test(e)?Fk:+e}var kte=function(){return yn.Date.now()};const ny=kte;var Pte="Expected a function",Cte=Math.max,Rte=Math.min;function xte(e,t,i){var r,n,s,a,o,c,d=0,l=!1,u=!1,g=!0;if(typeof e!="function")throw new TypeError(Pte);t=zk(t)||0,Aa(i)&&(l=!!i.leading,u="maxWait"in i,s=u?Cte(zk(i.maxWait)||0,t):s,g="trailing"in i?!!i.trailing:g);function m(O){var z=r,H=n;return r=n=void 0,d=O,a=e.apply(H,z),a}function f(O){return d=O,o=setTimeout(y,t),l?m(O):a}function w(O){var z=O-c,H=O-d,ie=t-z;return u?Rte(ie,s-H):ie}function S(O){var z=O-c,H=O-d;return c===void 0||z>=t||z<0||u&&H>=s}function y(){var O=ny();if(S(O))return _(O);o=setTimeout(y,w(O))}function _(O){return o=void 0,g&&r?m(O):(r=n=void 0,a)}function T(){o!==void 0&&clearTimeout(o),d=0,r=c=n=o=void 0}function C(){return o===void 0?a:_(ny())}function D(){var O=ny(),z=S(O);if(r=arguments,n=this,c=O,z){if(o===void 0)return f(c);if(u)return clearTimeout(o),o=setTimeout(y,t),m(c)}return o===void 0&&(o=setTimeout(y,t)),a}return D.cancel=T,D.flush=C,D}var Ite="[object Map]",Ate="[object Set]",Ote=Object.prototype,Mte=Ote.hasOwnProperty;function Dte(e){if(e==null)return!0;if(Nb(e)&&(ff(e)||typeof e=="string"||typeof e.splice=="function"||Db(e)||AO(e)||CO(e)))return!e.length;var t=yf(e);if(t==Ite||t==Ate)return!e.size;if(vf(e))return!DO(e).length;for(var i in e)if(Mte.call(e,i))return!1;return!0}function qh(e){const t={};return typeof(e==null?void 0:e.code)=="number"&&(t.code=e.code),typeof(e==null?void 0:e.code)=="string"&&(t.code=e.code.substring(0,100)),typeof(e==null?void 0:e.name)=="string"&&(t.name=e.name.substring(0,500)),typeof(e==null?void 0:e.message)=="string"&&(t.message=e.message.substring(0,500)),typeof(e==null?void 0:e.reason)=="string"&&(t.reason=e.reason.substring(0,500)),typeof(e==null?void 0:e.stack)=="string"&&(t.stack=e.stack.substring(0,500)),t}function Jh(){var e,t,i,r;const n=typeof navigator<"u"&&!navigator.isReactNative&&((e=window.location.host)==null?void 0:e.includes("staging"))&&((t=window.location.host)==null?void 0:t.includes("dyte.io")),s=!!((r=(i=Ze.modules)==null?void 0:i.devTools)!=null&&r.logs);return n||s}function Lte(e){if(ee.hasFeature(re.LOG_LEVEL)){let t=ee.getValue(re.LOG_LEVEL)||"all";if(t=t.toLowerCase().trim(),t==="off")return!1;if(t!=="all"){const i=["debug","log","info","warn","error"],r=i.indexOf(e),n=i.indexOf(t);if(r<n)return!1}}return!0}function uM(e,t,i={}){return Object.getOwnPropertyNames(e).forEach(r=>{var n;if([null,void 0,NaN].includes(e[r])||t&&(((n=t.match(/\./g))==null?void 0:n.length)||0)>=10)return;const s=t?`${t}.${r}`:r;typeof e[r]=="object"?uM(e[r],s,i):["number","string","boolean"].includes(typeof e[r])&&(i[s]=e[r])}),i}function sy(e,t={},i){const r={};try{const n=JSON.stringify(t),s=JSON.parse(n),a=uM(s,i),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${e}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw Jh()&&console.error(c,{log:t,flattened:o}),new Error(c)}return JSON.parse(o)}catch(n){const s=qh(n);r[`${i}.error.message`]=s.message||"",r[`${i}.error.stack`]=s.stack||"",r[`${i}.error.reason`]=s.reason||"",r[`${i}.error.source`]="safelyFlattenObjForOpenTelemetry"}return r}const Te=class{static get logsEndpoint(){return Jh()?"https://api-silos-staging.dyte.io/otel/logs":"https://api-silos.dyte.io/otel/logs"}static init(e,t){if(navigator.isReactNative)return;const i=new Gq({url:"https://otel.dyte.io/v1/traces",headers:{"api-key":""}});let r=Jh()?"staging":"production";const n=new BW({resource:new eJ({"service.name":gm,sdk_version:Md,env:r,...sy("OTELResource",Oe.getDeviceInfo(),"device")}),idGenerator:{generateTraceId:()=>`${e}`.replace(/-/g,""),generateSpanId:()=>Zm().replace(/-/g,"").substring(0,16)}});Te.tracingEnabled=t,Te.tracer=n.getTracer(e),Te.meetingMetadata.peerId=e,Te.meetingMetadata.sdkVersion=Md,Te.meetingMetadata.deviceInfo=Oe.getDeviceInfo(),Te.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window<"u"&&window.location.href,n.addSpanProcessor(new TA(i)),"zone"in window?n.register({contextManager:new qq}):n.register({contextManager:new kA}),Te.contextPropagator=ld,document.addEventListener("visibilitychange",Te.processCachedLogs),Te.logsProcessorTimer=setInterval(Te.processCachedLogs,Te.logsProcessingInterval),t&&(Te.rootSpan=Te.tracer.startSpan(`peer_${e}`,{},Ir),Te.rootSpan.end(),Te.initialized=!0)}static trace(e){return(t,i,r)=>{const n=r.value;return r.value=function(...s){if(!Te.initialized||navigator.isReactNative||!Te.tracingEnabled||ee.hasFeature(re.SKIP_OTEL_TRACES))return n.apply(this,s);const a=Te.getCurrentSpan(),o=Yp.trace.setSpan(Ir,a);return ee.hasFeature(re.NR_OTEL_WEB)||Te.addLogInCurrentSpan("info",e),Te.tracer.startActiveSpan(e,{},o,c=>{const d=n.apply(this,s);return Promise.resolve(d).then(()=>{c.end()}).catch(()=>{c.end()}),d})},r}}static getCurrentSpan(){if(navigator.isReactNative)return null;let e=Yp.trace.getSpan(Yp.context.active());return e!=null||(e=Te.rootSpan),e}static getCurrentContext(){return Yp.trace.setSpan(Ir,Te.getCurrentSpan())}static getCurrentSpanName(){var e;return(e=this.getCurrentSpan())==null?void 0:e.name}static injectContext(e){Te.getCurrentSpan()&&Te.contextPropagator.inject(Te.getCurrentContext(),e)}static addLogInCurrentSpan(e="info",t,i={},r){var n,s;if(i!=null&&i.error&&Object.assign(i,{error:qh(i.error)}),Jh()&&(Dte(i)?console[e]("DyteInternalLogs:: ",e,t):console[e]("DyteInternalLogs:: ",e,t,i)),!!Lte(e))try{const a=sy(t,i,"metadata"),o=Te.getCurrentSpan(),c=new Date,d={message:t,level:e,...a,"trace.id":(n=o==null?void 0:o.spanContext())==null?void 0:n.traceId,"span.id":(s=o==null?void 0:o.spanContext())==null?void 0:s.spanId,loggedAt:c.toISOString(),loggedAtTzOffset:c.getTimezoneOffset()};r?Te.sendOtelLogsToNewRelic([d]):Te.logsCache.push(d)}catch(a){Te.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:qh(a)})}}static sendOtelLogsToNewRelic(e){Qg.post(Te.logsEndpoint,{meetingMetadata:sy("sendOtelLogsToNewRelic",Te.meetingMetadata,"meetingMetadata"),serviceName:gm,logs:e}).catch(t=>{Te.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:qh(t)}),Te.logsCache.push(...e)})}static processCachedLogs(){const e=Te.logsCache.splice(0,25);e!=null&&e.length&&Te.sendOtelLogsToNewRelic(e)}static destruct(){clearInterval(Te.logsProcessorTimer),Te.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",Te.processCachedLogs)}};let E=Te;v(E,"tracer"),v(E,"contextPropagator"),v(E,"rootSpan"),v(E,"logsCache",[]),v(E,"logsProcessorTimer"),v(E,"tracingEnabled",!0),v(E,"initialized",!1),v(E,"logsProcessingInterval",7e3),v(E,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),v(E,"meetingMetadata",{});class b{static info(t,i,r){E.addLogInCurrentSpan("info",t,i,r)}static error(t,i,r){E.addLogInCurrentSpan("error",t,i,r)}static debug(t,i,r){E.addLogInCurrentSpan("debug",t,i,r)}static log(t,i,r){E.addLogInCurrentSpan("log",t,i,r)}static warn(t,i,r){E.addLogInCurrentSpan("warn",t,i,r)}}const Nte={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler"},Kh={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1700:"Internal exception"};Object.keys(Kh).forEach(e=>{Kh[e]=`{${Nte[e.slice(0,2)]}} ${Kh[e]}`});class R extends Error{constructor(t,i,r=!1){super(t),v(this,"code"),this.code=i,this.name="DyteError",this.message=`[ERR${this.code}]: ${Kh[this.code]}
${this.message}`;try{let n=r;i&&i.endsWith("00")&&(n=!0),n&&b.error("DyteError",{error:{message:this.message,name:this.name,code:i}})}catch{}}}function rh(e,t,i,r){if(typeof i=="function"&&r instanceof t)i.call(null,r,e);else throw r}function Bk(e,t,i){if(!e.value){const n=e.get,s=e.set;return n&&(e.get=function(){try{return n.apply(this)}catch(a){rh(this,t,i,a)}}),s&&(e.set=function(a){try{return s.apply(this,[a])}catch(o){rh(this,t,i,o)}}),e}const r=e.value;return e.value=function(...n){try{const s=r.apply(this,n);return s&&s instanceof Promise?s.catch(a=>{rh(this,t,i,a)}):s}catch(s){rh(this,t,i,s)}},e}function Ute(e,t){return(i,r,n)=>{if(n)return Bk(n,e,t);for(const s of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,s);(a.value instanceof Function||a.get instanceof Function||a.set instanceof Function)&&Object.defineProperty(i.prototype,s,Bk(a,e,t))}}}const Si=e=>Ute(Error,e);var so=(e=>(e.allowed="ALLOWED",e.notAllowed="NOT_ALLOWED",e.canRequest="CAN_REQUEST",e))(so||{});const jte={view_type:gn.GroupCall,accept_waiting_requests:!1,request_produce:!1,can_allow_participant_audio:!0,can_allow_participant_screensharing:!1,can_allow_participant_video:!0,request_kick_participant:!1,kick_participant:!0,pin_participant:!0,can_record:!1,waiting_room_type:"SKIP",plugins:{can_close:!0,can_start:!0,can_edit_acl:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},produce:{video:{allow:!0,quality:Xi.video.quality,frame_rate:Xi.video.frameRate},audio:!0,screenshare:{allow:!0,quality:Xi.screenshare.quality,frame_rate:Xi.screenshare.frameRate}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},reactions:!1,hidden_participant:!1,show_participant_list:!0,can_change_participant_role:!0,can_change_theme:!1,can_present:!1,accept_present_requests:!1,can_edit_display_name:!1,max_screenshare_count:1,is_recorder:!1,can_spotlight:!1},$te=Nr(jte);var Se;const b1=class{constructor(e){if(I(this,Se,void 0),!e)throw b.error("DytePermissionsPresetV1::load_preset_permissions_failed"),new R("Could not load preset permissions.");A(this,Se,e)}static fromResponse(e){return new b1(e)}static default(){return new b1($te)}get viewType(){return h(this,Se).viewType}get acceptWaitingRequests(){return h(this,Se).acceptWaitingRequests}get requestProduce(){return h(this,Se).requestProduce}get requestProduceAudio(){return this.requestProduce}get requestProduceScreenshare(){return this.requestProduce}get canAllowParticipantAudio(){return h(this,Se).canAllowParticipantAudio}get canAllowParticipantScreensharing(){return h(this,Se).canAllowParticipantScreensharing}get canAllowParticipantVideo(){return h(this,Se).canAllowParticipantVideo}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){return h(this,Se).kickParticipant}get pinParticipant(){return h(this,Se).pinParticipant}get canRecord(){return h(this,Se).canRecord}get waitingRoomType(){return h(this,Se).waitingRoomType}get waitingRoomBehaviour(){return h(this,Se).waitingRoomType==="SKIP"?"SKIP":h(this,Se).waitingRoomType==="SKIP_ON_PRIVILEGED_USER_ENTRY"?"ON_PRIVILEGED_USER_ENTRY":h(this,Se).waitingRoomType==="ON_ACCEPT"?"SKIP_ON_ACCEPT":"SKIP"}get plugins(){return h(this,Se).plugins}get polls(){return{...h(this,Se).polls,canViewResults:h(this,Se).polls.canView}}get produceVideo(){return{...h(this,Se).produce.video,allow:h(this,Se).produce.video.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceVideo(){const e=h(this,Se).produce.video.allow;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get produceScreenshare(){return{...h(this,Se).produce.screenshare,allow:h(this,Se).produce.screenshare.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceScreenshare(){const e=h(this,Se).produce.screenshare.allow;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get produceAudio(){return h(this,Se).produce.audio?"ALLOWED":"NOT_ALLOWED"}get canProduceAudio(){const e=h(this,Se).produce.audio;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get chatPublic(){return h(this,Se).chat.public}get chatPrivate(){return h(this,Se).chat.private}get connectedMeetings(){return{canAlterConnectedMeetings:!1,canSwitchConnectedMeetings:!1,canSwitchToParentMeeting:!1}}get reactions(){return h(this,Se).reactions}get hiddenParticipant(){return h(this,Se).hiddenParticipant}get showParticipantList(){return h(this,Se).showParticipantList}get canChangeParticipantRole(){return h(this,Se).canChangeParticipantRole}get canChangeTheme(){return h(this,Se).canChangeTheme}get canPresent(){return h(this,Se).canPresent}get acceptPresentRequests(){return h(this,Se).acceptPresentRequests}get canEditDisplayName(){return h(this,Se).canEditDisplayName}get maxScreenShareCount(){return h(this,Se).maxScreenshareCount}get isRecorder(){return h(this,Se).isRecorder}get canLivestream(){return!1}get canSpotlight(){return h(this,Se).canSpotlight}get isV2(){return!1}};let Hk=b1;Se=new WeakMap;const Ee={isV2AuthToken:!1,meetingId:null,overrides:{},roomNodeOptions:void 0},yl={baseURL:"http://localhost:5000",createdAt:"2021-08-05T10:49:56.602Z",description:"Develop plugins locally",id:"09259e3b-7be8-46f6-9801-106bf1866e1c",name:"Localhost Dev",organizationId:"4ad15a19-80e2-4105-bf43-48039fd2963e",picture:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png",private:!1,published:!0,staggered:!1,tags:["#localhost","#dev"],type:"self_hosted",updatedAt:"2021-08-05T10:50:07.681Z"};function Vte(e,t){if(t){Ee.isV2AuthToken=!1;return}try{const{meetingId:i}=JSON.parse(atob(e.split(".")[1]));if(!i)throw Error(`Received V1 auth token ${e}`);Ee.isV2AuthToken=!0,Ee.meetingId=i}catch(i){throw b.error("constants::setIsV2AuthToken",{error:i,debuggingHint:`Unable to decode auth token: ${e}`},!0),new R("Invalid auth token")}}function pM(e,t){if(Ee.isV2AuthToken&&ee.hasFeature(re.CONNECTED_MEETINGS))return!0;const i=ee.getValue(re.CHAT_SOCKET_SERVER)||"socket-service",r=ee.getValue(re.PLUGIN_SOCKET_SERVER)||"socket-service",n=ee.getValue(re.POLL_SOCKET_SERVER)||"socket-service";return Ee.isV2AuthToken&&e===gn.Livestream||[i,r,n].includes("socket-service")||t.includes("HIVE")}function Fte(e){Ee.overrides=e}function Qu(e){return Ee.overrides&&Ee.overrides[e]?Ee.overrides[e]:!1}function zte(e){Ee.roomNodeOptions=e}var Kb=(e=>(e.REQUESTED_BY_PARTICIPANT="REQUESTED_BY_PARTICIPANT",e.REQUESTED_BY_MODERATOR="REQUESTED_BY_MODERATOR",e))(Kb||{}),Yb=(e=>(e.PRESENT="REQUEST_TO_PRESENT",e))(Yb||{}),qs,Js;class Bte extends zi.EventEmitter{constructor(){super(),I(this,qs,void 0),I(this,Js,void 0),v(this,"asyncPromiseTimeout"),A(this,qs,new Map),A(this,Js,new Map),this.asyncPromiseTimeout=8e3}async emitAsync(t,...i){h(this,qs).set(t,[]);const r=h(this,Js).get(t).map(()=>new Promise(n=>{h(this,qs).get(t).push(n)}));super.emit(t,...i),await Promise.race([Promise.all(r),new Promise((n,s)=>setTimeout(()=>s(new Error("emitAsync failed to resolve.")),this.asyncPromiseTimeout))]),h(this,qs).delete(t)}onAsync(t,i){const r=h(this,qs),n=async(...s)=>{var a;try{await i(...s)}catch(c){b.error("[onAsync]",{error:c})}const o=(a=r.get(t))==null?void 0:a.shift();o==null||o()};return h(this,Js).get(t)||h(this,Js).set(t,[]),h(this,Js).get(t).push(n),super.on(t,n)}reset(){A(this,qs,new Map),A(this,Js,new Map),super.removeAllListeners()}}qs=new WeakMap,Js=new WeakMap;const P=new Bte;var k=(e=>(e.NEW_PRODUCER="NEW_PRODUCER",e.ROOM_NODE_CONNECTED="ROOM_NODE_CONNECTED",e.ROOM_NODE_DISCONNECTED="ROOM_NODE_DISCONNECTED",e.ROOM_NODE_CONNECTION_ERROR="ROOM_NODE_CONNECTION_ERROR",e.SOCKET_SERVICE_CONNECTED="SOCKET_SERVICE_CONNECTED",e.SOCKET_SERVICE_DISCONNECTED="SOCKET_SERVICE_DISCONNECTED",e.SOCKET_SERVICE_RECONNECTING="SOCKET_SERVICE_RECONNECTING",e.SOCKET_SERVICE_RECONNECTION_ATTEMPT="SOCKET_SERVICE_RECONNECTION_ATTEMPT",e.SOCKET_SERVICE_RECONNECT_FAILURE="SOCKET_SERVICE_RECONNECT_FAILURE",e.SOCKET_SERVICE_RECONNECTED="SOCKET_SERVICE_RECONNECTED",e.SOCKET_SERVICE_FAILED="SOCKET_SERVICE_FAILED",e.ROOM_JOINED="ROOM_JOINED",e.SOCKET_SERVICE_ROOM_JOINED="SOCKET_SERVICE_ROOM_JOINED",e.SELF_ROOM_JOINED="SELF_ROOM_JOINED",e.PRODUCER_SCORE_UPDATE="PRODUCER_SCORE_UPDATE",e.CONSUMER_SCORE_UPDATE="CONSUMER_SCORE_UPDATE",e.PRODUCER_STATUS_UPDATE="PRODUCER_STATUS_UPDATE",e.CONSUMER_STATUS_UPDATE="CONSUMER_STATUS_UPDATE",e.LOW_PRODUCER_SCORE="LOW_PRODUCER_SCORE",e.LOW_CONSUMER_SCORE="LOW_CONSUMER_SCORE",e.MEDIA_PERMISSION_ERROR="MEDIA_PERMISSION_ERROR",e.MEDIA_PERMISSION_UPDATE="MEDIA_PERMISSION_UPDATE",e.WAITLISTED="WAIT_LISTED",e.WAITLIST_ACCEPTED="websocket/waitlist-accepted",e.WAITLIST_REJECTED="websocket/waitlist-rejected",e.WAITLIST_PEER_ADDED="websocket/waitlist-peer-added",e.WAITLIST_PEER_REMOVED="websocket/waitlist-peer-closed",e.MESSAGE="websocket/message",e.ROOM_MESSAGE="websocket/room-message",e.DISABLE_AUDIO="websocket/disable-audio",e.DISABLE_VIDEO="websocket/disable-video",e.PEER_JOINED="websocket/peer-joined",e.PEER_CLOSED="websocket/peer-closed",e.PEER_MUTED="websocket/peer-muted",e.PEER_UNMUTED="websocket/peer-unmuted",e.PEER_PINNED="websocket/pin-peer",e.PEER_UNPINNED="websocker/unpin-peer",e.MUTE_ALL="websocket/mute-all",e.MUTE_ALL_VIDEO="websocket/mute-all-video",e.CONSUMER_CLOSED="websocket/consumer-closed",e.CONSUMER_PAUSED="websocket/consumer-paused",e.CONSUMER_RESUMED="websocket/consumer-resumed",e.PRODUCER_CLOSED="websocket/producer-closed",e.NEW_CONSUMER="websocket/new-consumer",e.CONNECTED_MEETING_STATE="websocket/connectedMeetingState",e.MOVE_TO_CONNECTED_MEETING="websocket/transferMeeting",e.GET_CHAT_MESSAGES="websocket/get-chat-messages",e.NEW_CHAT_MESSAGE="websocket/new-chat-message",e.PIN_CHAT_MESSAGE="websocket/pin-chat-message",e.UNPIN_CHAT_MESSAGE="websocket/unpin-chat-message",e.GET_POLLS="websocket/get-polls",e.UPDATE_POLL="websocket/update-poll",e.SELECTED_PEERS="websocket/selected-peers",e.GET_PAGE="websocket/get-page",e.ACTIVE_SPEAKER="websocket/active-speaker",e.NO_ACTIVE_SPEAKER="websocket/no-active-speaker",e.PRODUCER_SCORE="websocket/producer-score",e.CONSUMER_SCORE="websocket/consumer-score",e.ENABLE_PLUGIN="websocket/enable-plugin",e.DISABLE_PLUGIN="websocket/disable-plugin",e.PLUGIN_EVENT="websocket/plugin-event",e.PLUGIN_DATA="websocket/plugin-data",e.PLUGIN_INTERNAL_DATA="websocket/plugin-internal-data",e.KICKED="websocket/kicked",e.RECORDING_STARTED="websocket/recording-started",e.RECORDING_STOPPED="websocket/recording-stopped",e.ICE_CONNECTED="ICE_CONNECTED",e.ICE_DISCONNECTED="ICE_DISCONNECTED",e.ICE_FAILED="ICE_FAILED",e.ICE_RECONNECTING="ICE_RECONNECTING",e.AUDIO_TRACK_ANALYSIS="AUDIO_TRACK_ANALYSIS",e.AUDIO_TRACK_CLOSED="AUDIO_TRACK_CLOSED",e.AUDIO_TRACK_CREATED="AUDIO_TRACK_CREATED",e.SCREENSHARE_AUDIO_TRACK_ANALYSIS="SCREENSHARE_AUDIO_TRACK_ANALYSIS",e.SCREENSHARE_AUDIO_TRACK_CLOSED="SCREENSHARE_AUDIO_TRACK_CLOSED",e.SCREENSHARE_AUDIO_TRACK_CREATED="SCREENSHARE_AUDIO_TRACK_CREATED",e.VIDEO_TRACK_ANALYSIS="VIDEO_TRACK_ANALYSIS",e.VIDEO_TRACK_ANALYSIS_ERROR="VIDEO_TRACK_ANALYSIS_ERROR",e.VIDEO_TRACK_CLOSED="VIDEO_TRACK_CLOSED",e.VIDEO_TRACK_CREATED="VIDEO_TRACK_CREATED",e.SCREENSHARE_VIDEO_TRACK_ANALYSIS="SCREENSHARE_VIDEO_TRACK_ANALYSIS",e.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR="SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR",e.SCREENSHARE_VIDEO_TRACK_CLOSED="SCREENSHARE_VIDEO_TRACK_CLOSED",e.SCREENSHARE_VIDEO_TRACK_CREATED="SCREENSHARE_VIDEO_TRACK_CREATED",e.CANDIDATE_PEER_UPDATE="CANDIDATE_PEER_UPDATE",e.INBOUND_RTP_UPDATE="INBOUND_RTP_UPDATE",e.OUTBOUND_RTP_UPDATE="OUTBOUND_RTP_UPDATE",e.SEND_TRANSPORT_CLOSED="SEND_TRANSPORT_CLOSED",e.RECV_TRANSPORT_CLOSED="RECV_TRANSPORT_CLOSED",e.SEND_TRANSPORT_CREATED="SEND_TRANSPORT_CREATED",e.RECV_TRANSPORT_CREATED="RECV_TRANSPORT_CREATED",e.PRODUCER_TOGGLE="hive/producer-toggle",e.CONSUMER_TOGGLE="hive/consumer-toggle",e.SELECTED_PEERS_DIFF="hive/selected-peers-diff",e.REFRESH_GRID="hive/refresh-grid",e.RESET_PRODUCER_STATE="hive/reset-producer-state",e.HIVE_RECORDING_STARTED="hive/recording-started",e.HIVE_RECORDING_STOPPED="hive/recording-stopped",e.HIVE_TRANSPORT_STATE_CHANGED="hive/transport-state-changed",e.ROOM_STATE="sockethub/room-state",e.PEER_DISPLAY_NAME_CHANGED="hive/display-name-changed",e.ASSERT_SPOTLIGHTER="websocket/assert-spotlighter",e.PEER_REQUESTED_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-added",e.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-withdrawn",e.PEER_REJECTED_TO_JOIN_STAGE="websocket/peer-rejected-to-join-stage",e.PEER_ADDED_TO_STAGE="websocket/peer-added-to-stage",e.PEER_REMOVED_FROM_STAGE="websocket/peer-removed-from-stage",e.PEER_STARTED_PRESENTING="websocket/peer-started-presenting",e.PEER_STOPPED_PRESENTING="websocket/peer-stopped-presenting",e.REQUEST_TO_JOIN_STAGE_ACCEPTED="websocket/request-to-join-stage-accepted",e.REQUEST_TO_JOIN_STAGE_REJECTED="websocket/request-to-join-stage-rejected",e.STARTED_PRESENTING="websocket/started-presenting",e.STOPPED_PRESENTING="websocket/stopped-presenting",e.REMOVED_FROM_STAGE="websocket/removed-from-stage",e.JOIN_MEDIA_ROOM="JOIN_MEDIA_ROOM",e.LEAVE_MEDIA_ROOM="LEAVE_MEDIA_ROOM",e))(k||{}),la;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER"})(la||(la={}));var dn;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO"})(dn||(dn={}));class Hte extends x{constructor(){super("media.Pair",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new Hte;class Gte extends x{constructor(){super("media.Codec",[])}}new Gte;class Wte extends x{constructor(){super("media.Fingerprint",[{no:1,name:"algorithm",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new Wte;class qte extends x{constructor(){super("media.SessionDescription",[{no:1,name:"target",kind:"enum",T:()=>["media.Target",la]},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"sdp",kind:"scalar",T:9}])}}const Ls=new qte;class Jte extends x{constructor(){super("media.CreateTransportRequest",[{no:1,name:"consuming",kind:"scalar",T:8},{no:2,name:"force_tcp",kind:"scalar",opt:!0,T:8},{no:3,name:"description",kind:"message",T:()=>Ls}])}}const Kte=new Jte;class Yte extends x{constructor(){super("media.CreateTransportResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const wf=new Yte;class Qte extends x{constructor(){super("media.RenegotiateRequest",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const Zte=new Qte;class Xte extends x{constructor(){super("media.RenegotiateResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}new Xte;class eie extends x{constructor(){super("media.NestedScore",[{no:1,name:"encoding_idx",kind:"scalar",T:5},{no:2,name:"rid",kind:"scalar",T:9},{no:3,name:"score",kind:"scalar",T:5},{no:4,name:"ssrc",kind:"scalar",T:3,L:0}])}}const tie=new eie;class iie extends x{constructor(){super("media.ProducerTrack",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"stream_id",kind:"scalar",T:9}])}}const rie=new iie;class nie extends x{constructor(){super("media.ProducerEntry",[{no:1,name:"producing_transport_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9}])}}new nie;class sie extends x{constructor(){super("media.ConsumerEntry",[{no:1,name:"consuming_transport_id",kind:"scalar",T:9},{no:2,name:"consumer_id",kind:"scalar",T:9}])}}new sie;class aie extends x{constructor(){super("media.ProducerState",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"kind",kind:"enum",T:()=>["media.ProducerKind",dn]},{no:3,name:"pause",kind:"scalar",T:8},{no:4,name:"screen_share",kind:"scalar",T:8}])}}const Sp=new aie;class oie extends x{constructor(){super("media.ConsumerState",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sp},{no:3,name:"producer_track",kind:"message",T:()=>rie}])}}const cie=new oie;class die extends x{constructor(){super("media.ProducerIdToConsumerMap",[{no:1,name:"map",kind:"map",K:9,V:{kind:"message",T:()=>cie}}])}}const hM=new die;class lie extends x{constructor(){super("media.edge.PeerJoinRequest",[{no:1,name:"display_name",kind:"scalar",opt:!0,T:9},{no:2,name:"prejoined",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:5,name:"preset",kind:"scalar",opt:!0,T:12},{no:6,name:"user_id",kind:"scalar",opt:!0,T:9},{no:7,name:"organization_id",kind:"scalar",opt:!0,T:9}])}}const uie=new lie;class pie extends x{constructor(){super("media.edge.PeerJoinCompleteRequest",[])}}const hie=new pie;class gie extends x{constructor(){super("media.edge.PeerLeaveRequest",[{no:1,name:"close_room",kind:"scalar",T:8}])}}const mie=new gie;class fie extends x{constructor(){super("media.edge.ConsumeMultipleProducerRequest",[{no:1,name:"producer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8}])}}new fie;class vie extends x{constructor(){super("media.edge.ConsumePeerRequest",[{no:1,name:"producing_peer_id",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8},{no:3,name:"producer_id",kind:"scalar",opt:!0,T:9}])}}const yie=new vie;class _ie extends x{constructor(){super("media.edge.ProducerCreateRequest",[{no:1,name:"kind",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"description",kind:"message",T:()=>Ls},{no:5,name:"msid",kind:"scalar",T:9}])}}const bie=new _ie;class wie extends x{constructor(){super("media.edge.SelectedPeersRequest",[])}}new wie;class Sie extends x{constructor(){super("media.edge.GlobalPeerPinningRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Eie=new Sie;class Tie extends x{constructor(){super("media.edge.ProducerToggleRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const nh=new Tie;class kie extends x{constructor(){super("media.edge.ConsumerToggleRequest",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const Gk=new kie;class Pie extends x{constructor(){super("media.edge.ProducerCloseRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const Cie=new Pie;class Rie extends x{constructor(){super("media.edge.ConsumerCloseRequest",[{no:1,name:"consumer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const xie=new Rie;class Iie extends x{constructor(){super("media.edge.KickPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Aie=new Iie;class Oie extends x{constructor(){super("media.edge.KickAllPeersRequest",[])}}const Mie=new Oie;class Die extends x{constructor(){super("media.edge.PeerDisplayNameEditRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const Lie=new Die;class Nie extends x{constructor(){super("media.edge.HostMediaControlForPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"video",kind:"scalar",T:8},{no:4,name:"scree_share",kind:"scalar",T:8}])}}const Uie=new Nie;class jie extends x{constructor(){super("media.edge.HostMediaControlForAllPeerRequest",[{no:1,name:"audio",kind:"scalar",T:8},{no:2,name:"video",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8}])}}const $ie=new jie;class Vie extends x{constructor(){super("media.edge.GetRoomStateResponse",[{no:1,name:"display_title",kind:"scalar",T:9},{no:2,name:"locked_mode",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"room_name",kind:"scalar",T:9},{no:5,name:"current_peer_id",kind:"scalar",T:9},{no:6,name:"is_recording",kind:"scalar",opt:!0,T:8},{no:7,name:"recorder_participant_id",kind:"scalar",opt:!0,T:9}])}}const Fie=new Vie;class zie extends x{constructor(){super("media.edge.ErrorResponse",[{no:1,name:"error_message",kind:"scalar",T:9},{no:2,name:"event_id",kind:"scalar",T:5}])}}new zie;class Bie extends x{constructor(){super("media.edge.EmptyResponse",[])}}new Bie;class Hie extends x{constructor(){super("media.edge.RoomParticipants",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"producer_states",kind:"message",repeat:1,T:()=>Sp},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",opt:!0,T:9}])}}const gM=new Hie;class Gie extends x{constructor(){super("media.edge.SelectedPeersResponse",[{no:1,name:"audio_peers",kind:"scalar",repeat:2,T:9},{no:2,name:"compulsory_peers",kind:"scalar",repeat:2,T:9}])}}const mM=new Gie;class Wie extends x{constructor(){super("media.edge.SelectedPeersDiffEntry",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"priority",kind:"scalar",T:5}])}}const qie=new Wie;class Jie extends x{constructor(){super("media.edge.SelectedPeersDiffResponse",[{no:1,name:"entries",kind:"message",repeat:1,T:()=>qie}])}}const Kie=new Jie;class Yie extends x{constructor(){super("media.edge.PeerJoinResponse",[])}}new Yie;class Qie extends x{constructor(){super("media.edge.PeerJoinCompleteResponse",[{no:1,name:"room_state",kind:"message",T:()=>Fie},{no:2,name:"participants",kind:"message",repeat:1,T:()=>gM},{no:3,name:"selected_peers",kind:"message",T:()=>mM},{no:4,name:"max_preferred_streams",kind:"scalar",T:5}])}}const Zie=new Qie;class Xie extends x{constructor(){super("media.edge.PeerLeaveResponse",[{no:1,name:"closed",kind:"scalar",T:8}])}}const ere=new Xie;class tre extends x{constructor(){super("media.edge.ConsumeMultipleProducerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>hM},{no:3,name:"transport_details",kind:"message",T:()=>wf}])}}new tre;class ire extends x{constructor(){super("media.edge.ConsumePeerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>hM},{no:3,name:"transport_details",kind:"message",T:()=>wf}])}}const rre=new ire;class nre extends x{constructor(){super("media.edge.ProducerCreateResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"transport_details",kind:"message",T:()=>wf},{no:4,name:"description",kind:"message",T:()=>Ls}])}}const sre=new nre;class are extends x{constructor(){super("media.edge.ProducerScoreResponse",[{no:1,name:"responseid",kind:"scalar",T:9},{no:2,name:"score",kind:"message",T:()=>tie}])}}new are;class ore extends x{constructor(){super("media.edge.ActiveSpeakerResponse",[{no:1,name:"responsepeer_id",kind:"scalar",T:9},{no:2,name:"volume",kind:"scalar",T:5}])}}new ore;class cre extends x{constructor(){super("media.edge.NoActiveSpeakerResponse",[])}}new cre;class dre extends x{constructor(){super("media.edge.ProducerToggleResponse",[])}}new dre;class lre extends x{constructor(){super("media.edge.ConsumerToggleResponse",[])}}new lre;class ure extends x{constructor(){super("media.edge.ProducerClosingResponse",[{no:1,name:"description",kind:"message",T:()=>Ls}])}}const pre=new ure;class hre extends x{constructor(){super("media.edge.ConsumerClosingResponse",[])}}new hre;class gre extends x{constructor(){super("media.edge.GlobalPeerPinningResponse",[])}}new gre;class mre extends x{constructor(){super("media.edge.KickPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const fre=new mre;class vre extends x{constructor(){super("media.edge.KickAllPeersResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const yre=new vre;class _re extends x{constructor(){super("media.edge.HostMediaControlForPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const bre=new _re;class wre extends x{constructor(){super("media.edge.HostMediaControlForAllPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Sre=new wre;class Ere extends x{constructor(){super("media.edge.PeerDisplayNameEditResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Tre=new Ere;class kre extends x{constructor(){super("media.edge.PeerJoinBroadcastResponse",[{no:1,name:"participant",kind:"message",T:()=>gM}])}}const Pre=new kre;class Cre extends x{constructor(){super("media.edge.PeerProducerCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sp}])}}const Rre=new Cre;class xre extends x{constructor(){super("media.edge.PeerProducerToggleBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sp}])}}const Ire=new xre;class Are extends x{constructor(){super("media.edge.PeerProducerCloseBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sp}])}}const Ore=new Are;class Mre extends x{constructor(){super("media.edge.PeerLeaveBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Dre=new Mre;class Lre extends x{constructor(){super("media.edge.GlobalPeerPinningBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Nre=new Lre;class Ure extends x{constructor(){super("media.edge.RecordingStartedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const jre=new Ure;class $re extends x{constructor(){super("media.edge.RecordingStoppedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Vre=new $re;class Fre extends x{constructor(){super("media.edge.PeerDisplayNameEditBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const zre=new Fre;class Bre extends x{constructor(){super("socket.api.BaseSocketHubMessage",[{no:1,name:"event",kind:"scalar",T:5},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9},{no:4,name:"room_id",kind:"scalar",T:9},{no:5,name:"user_id",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}])}}new Bre;class Hre extends x{constructor(){super("socket.api.ErrorMessage",[{no:1,name:"code",kind:"scalar",opt:!0,T:5},{no:2,name:"message",kind:"scalar",T:9}])}}new Hre;class Gre extends x{constructor(){super("socket.PeerPreset",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"message",T:()=>hne}])}}new Gre;class Wre extends x{constructor(){super("socket.PeerPreset.Plugins",[{no:1,name:"can_close",kind:"scalar",T:8},{no:2,name:"can_start",kind:"scalar",T:8}])}}const qre=new Wre;class Jre extends x{constructor(){super("socket.PeerPreset.Polls",[{no:1,name:"can_create",kind:"scalar",T:8},{no:2,name:"can_vote",kind:"scalar",T:8},{no:3,name:"can_view",kind:"scalar",T:8}])}}const Kre=new Jre;class Yre extends x{constructor(){super("socket.PeerPreset.Video",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const Qre=new Yre;class Zre extends x{constructor(){super("socket.PeerPreset.Screenshare",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const Xre=new Zre;class ene extends x{constructor(){super("socket.PeerPreset.Produce",[{no:1,name:"video",kind:"message",T:()=>Qre},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"screenshare",kind:"message",T:()=>Xre}])}}const tne=new ene;class ine extends x{constructor(){super("socket.PeerPreset.Public",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:8},{no:3,name:"files",kind:"scalar",T:8}])}}const rne=new ine;class nne extends x{constructor(){super("socket.PeerPreset.Private",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"can_receive",kind:"scalar",T:8},{no:3,name:"text",kind:"scalar",T:8},{no:4,name:"files",kind:"scalar",T:8}])}}const sne=new nne;class ane extends x{constructor(){super("socket.PeerPreset.Chat",[{no:1,name:"public",kind:"message",T:()=>rne},{no:2,name:"private",kind:"message",T:()=>sne}])}}const one=new ane;class cne extends x{constructor(){super("socket.PeerPreset.Permissions",[{no:1,name:"view_type",kind:"scalar",T:9},{no:2,name:"accept_waiting_requests",kind:"scalar",T:8},{no:3,name:"request_produce",kind:"scalar",T:8},{no:4,name:"can_allow_participant_audio",kind:"scalar",T:8},{no:5,name:"can_allow_participant_screensharing",kind:"scalar",T:8},{no:6,name:"can_allow_participant_video",kind:"scalar",T:8},{no:7,name:"request_kick_participant",kind:"scalar",T:8},{no:8,name:"kick_participant",kind:"scalar",T:8},{no:9,name:"pin_participant",kind:"scalar",T:8},{no:10,name:"can_record",kind:"scalar",T:8},{no:11,name:"waiting_room_type",kind:"scalar",T:9},{no:12,name:"plugins",kind:"message",T:()=>qre},{no:13,name:"polls",kind:"message",T:()=>Kre},{no:14,name:"produce",kind:"message",T:()=>tne},{no:15,name:"chat",kind:"message",T:()=>one},{no:16,name:"reactions",kind:"scalar",T:8},{no:17,name:"hidden_participant",kind:"scalar",T:8},{no:18,name:"show_participant_list",kind:"scalar",T:8},{no:19,name:"can_change_participant_role",kind:"scalar",T:8},{no:20,name:"can_change_theme",kind:"scalar",T:8},{no:21,name:"can_present",kind:"scalar",T:8},{no:22,name:"is_recorder",kind:"scalar",opt:!0,T:8}])}}const dne=new cne;class lne extends x{constructor(){super("socket.PeerPreset.Preset",[{no:1,name:"permissions",kind:"message",T:()=>dne},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"preset_name",kind:"scalar",T:9}])}}const une=new lne;class pne extends x{constructor(){super("socket.PeerPreset.Data",[{no:1,name:"preset",kind:"message",T:()=>une}])}}const hne=new pne;class gne extends x{constructor(){super("socket.chat.ChatMessage",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"pinned",kind:"scalar",T:8},{no:6,name:"is_edited",kind:"scalar",T:8},{no:7,name:"payload_type",kind:"scalar",T:5},{no:8,name:"payload",kind:"scalar",T:9},{no:10,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:11,name:"created_at",kind:"scalar",T:4,L:2},{no:12,name:"created_at_ms",kind:"scalar",opt:!0,T:4,L:2}])}}const Ep=new gne;class mne extends x{constructor(){super("socket.chat.GetPaginatedChatMessageRoomRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8}])}}const fne=new mne;class vne extends x{constructor(){super("socket.chat.GetPaginatedChatMessageRoomResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Ep},{no:2,name:"next",kind:"scalar",T:8}])}}const yne=new vne;class _ne extends x{constructor(){super("socket.chat.GetChatMessagesResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Ep}])}}const bne=new _ne;class wne extends x{constructor(){super("socket.chat.SendChatMessageToRoomRequest",[{no:1,name:"payload_type",kind:"scalar",T:5},{no:2,name:"payload",kind:"scalar",T:9}])}}const Sne=new wne;class Ene extends x{constructor(){super("socket.chat.SendChatMessageToRoomResponse",[{no:1,name:"message",kind:"message",T:()=>Ep}])}}const ay=new Ene;class Tne extends x{constructor(){super("socket.chat.SendChatMessageToPeersRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const kne=new Tne;class Pne extends x{constructor(){super("socket.chat.SendChatMessageToPeersResponse",[{no:1,name:"message",kind:"message",T:()=>Ep}])}}const oy=new Pne;class Cne extends x{constructor(){super("socket.chat.EditChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",opt:!0,T:5},{no:3,name:"payload",kind:"scalar",opt:!0,T:9},{no:4,name:"pinned",kind:"scalar",opt:!0,T:8}])}}const Rne=new Cne;class xne extends x{constructor(){super("socket.chat.EditChatMessageResponse",[{no:1,name:"message",kind:"message",T:()=>Ep}])}}const cy=new xne;class Ine extends x{constructor(){super("socket.chat.DeleteChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9}])}}const Ane=new Ine;class One extends x{constructor(){super("socket.chat.DeleteChatMessageResponse",[{no:1,name:"chat_id",kind:"scalar",T:9}])}}const dy=new One;var Ro;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ON_STAGE=1]="ON_STAGE",e[e.APPROVED_STAGE=2]="APPROVED_STAGE",e[e.REQUESTED_STAGE=3]="REQUESTED_STAGE",e[e.OFF_STAGE=4]="OFF_STAGE"})(Ro||(Ro={}));var mm;(function(e){e[e.HIVE=0]="HIVE",e[e.CHAT=1]="CHAT",e[e.PING=2]="PING"})(mm||(mm={}));class Mne extends x{constructor(){super("socket.room.Peer",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",Ro,"STAGE_TYPE_"]},{no:5,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:6,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:7,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const Sf=new Mne;class Dne extends x{constructor(){super("socket.room.PeerInfoResponse",[{no:1,name:"peer",kind:"message",T:()=>Sf}])}}const Lne=new Dne;class Nne extends x{constructor(){super("socket.room.RoomPeersInfoResponse",[{no:1,name:"peers",kind:"message",repeat:1,T:()=>Sf}])}}new Nne;class Une extends x{constructor(){super("socket.room.RoomPeerCountResponse",[{no:1,name:"count",kind:"scalar",T:4,L:2}])}}const Wk=new Une;class jne extends x{constructor(){super("socket.room.Room",[{no:1,name:"room_id",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",T:9},{no:4,name:"created_at",kind:"scalar",T:4,L:2}])}}const fM=new jne;class $ne extends x{constructor(){super("socket.room.RoomInfoResponse",[{no:1,name:"room",kind:"message",T:()=>fM}])}}const qk=new $ne;class Vne extends x{constructor(){super("socket.room.GetPeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9}])}}new Vne;class Fne extends x{constructor(){super("socket.room.UpdatePeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9}])}}new Fne;class zne extends x{constructor(){super("socket.room.JoinRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>Sf},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"organization_id",kind:"scalar",opt:!0,T:9},{no:5,name:"use_hive",kind:"scalar",opt:!0,T:8},{no:6,name:"preset",kind:"scalar",opt:!0,T:12},{no:7,name:"capabilities",kind:"enum",repeat:1,T:()=>["socket.room.Capabilities",mm,"CAPABILITIES_"]}])}}const Bne=new zne;class Hne extends x{constructor(){super("socket.room.LeaveRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>Sf}])}}const Gne=new Hne;class Wne extends x{constructor(){super("socket.room.UpdateRoomInfoRequest",[{no:1,name:"room",kind:"message",T:()=>fM}])}}new Wne;class qne extends x{constructor(){super("socket.room.GetConnectedRoomsDumpRequest",[])}}new qne;class Jne extends x{constructor(){super("socket.room.ServiceError",[{no:1,name:"message",kind:"scalar",opt:!0,T:9},{no:2,name:"code",kind:"scalar",opt:!0,T:9}])}}const Qb=new Jne;class Kne extends x{constructor(){super("socket.room.ConnectedMeetingPeer",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:4,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:5,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const Yne=new Kne;class Qne extends x{constructor(){super("socket.room.ConnectedMeetingDump",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>Yne}])}}const Jk=new Qne;class Zne extends x{constructor(){super("socket.room.GetConnectedRoomsDumpResponse",[{no:1,name:"parent_meeting",kind:"message",T:()=>Jk},{no:2,name:"meetings",kind:"message",repeat:1,T:()=>Jk}])}}const Xne=new Zne;class ese extends x{constructor(){super("socket.room.CreateRoomRequestPayload",[{no:1,name:"title",kind:"scalar",opt:!0,T:9}])}}const tse=new ese;class ise extends x{constructor(){super("socket.room.CreateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>tse}])}}const rse=new ise;class nse extends x{constructor(){super("socket.room.CreateRoomResponsePayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>Qb}])}}const sse=new nse;class ase extends x{constructor(){super("socket.room.CreateConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>sse}])}}const Kk=new ase;class ose extends x{constructor(){super("socket.room.UpdateRoomRequestPayload",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}}const cse=new ose;class dse extends x{constructor(){super("socket.room.UpdateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>cse}])}}new dse;class lse extends x{constructor(){super("socket.room.DisableRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const use=new lse;class pse extends x{constructor(){super("socket.room.DisableConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>use}])}}const hse=new pse;class gse extends x{constructor(){super("socket.room.DisableConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>vse}])}}const mse=new gse;class fse extends x{constructor(){super("socket.room.DisableConnectedRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"status",kind:"scalar",opt:!0,T:9},{no:3,name:"title",kind:"scalar",opt:!0,T:9},{no:4,name:"error",kind:"message",T:()=>Qb}])}}const vse=new fse;class yse extends x{constructor(){super("socket.room.MovePeerPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const _se=new yse;class bse extends x{constructor(){super("socket.room.MovePeersBetweenRoomsRequest",[{no:1,name:"source_meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"destination_meeting_id",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>_se}])}}const wse=new bse;class Sse extends x{constructor(){super("socket.room.MovedPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>Qb}])}}const vM=new Sse;class Ese extends x{constructor(){super("socket.room.MovePeersBetweenRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>vM}])}}new Ese;class Tse extends x{constructor(){super("socket.room.TransferPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"auth_token",kind:"scalar",opt:!0,T:9}])}}const kse=new Tse;class Pse extends x{constructor(){super("socket.plugin.AddPluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const Cse=new Pse;class Rse extends x{constructor(){super("socket.plugin.RemovePluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const xse=new Rse;class Ise extends x{constructor(){super("socket.plugin.EnablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Ase=new Ise;class Ose extends x{constructor(){super("socket.plugin.DisablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Mse=new Ose;class Dse extends x{constructor(){super("socket.plugin.EnablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Lse=new Dse;class Nse extends x{constructor(){super("socket.plugin.DisablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Use=new Nse;class jse extends x{constructor(){super("socket.plugin.PluginEventToRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const $se=new jse;class Vse extends x{constructor(){super("socket.plugin.PluginEventToPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"plugin_data",kind:"scalar",T:12}])}}const Fse=new Vse;class zse extends x{constructor(){super("socket.plugin.StoreKeys",[{no:1,name:"store_key",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",opt:!0,T:12}])}}const Zb=new zse;class Bse extends x{constructor(){super("socket.plugin.PluginStoreInsertKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"insert_keys",kind:"message",repeat:1,T:()=>Zb}])}}const Yk=new Bse;class Hse extends x{constructor(){super("socket.plugin.PluginStoreGetKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"get_keys",kind:"message",repeat:1,T:()=>Zb}])}}const Gse=new Hse;class Wse extends x{constructor(){super("socket.plugin.PluginStoreDeleteKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"delete_keys",kind:"message",repeat:1,T:()=>Zb}])}}const qse=new Wse;class Jse extends x{constructor(){super("socket.plugin.PluginStoreDeleteRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9}])}}const Kse=new Jse;class Yse extends x{constructor(){super("socket.plugin.EnablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"enabled_by",kind:"scalar",T:9}])}}const w1=new Yse;class Qse extends x{constructor(){super("socket.plugin.EnablePluginsResponse",[{no:1,name:"plugins",kind:"message",repeat:1,T:()=>w1}])}}const Zse=new Qse;class Xse extends x{constructor(){super("socket.plugin.DisablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"disabled_by",kind:"scalar",T:9}])}}const Qk=new Xse;class eae extends x{constructor(){super("socket.plugin.PluginStoreItem",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"store_key",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}])}}const tae=new eae;class iae extends x{constructor(){super("socket.plugin.PluginStoreResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"store_items",kind:"message",repeat:1,T:()=>tae}])}}const Zk=new iae;class rae extends x{constructor(){super("socket.plugin.PluginEventResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const Xk=new rae;class nae extends x{constructor(){super("socket.livestreaming.LiveStreamingEvent",[{no:1,name:"livestream_id",kind:"scalar",T:9},{no:2,name:"err_message",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",T:9},{no:5,name:"playback_url",kind:"scalar",T:9},{no:6,name:"org_id",kind:"scalar",T:9},{no:7,name:"room_name",kind:"scalar",T:9},{no:8,name:"room_uuid",kind:"scalar",T:9},{no:9,name:"status",kind:"scalar",T:9}])}}const eP=new nae;class sae extends x{constructor(){super("socket.livestreaming.GetStagePeersResponse",[{no:1,name:"stage_peers",kind:"scalar",repeat:2,T:9}])}}const tP=new sae;class aae extends x{constructor(){super("socket.livestreaming.StageRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9}])}}const oae=new aae;class cae extends x{constructor(){super("socket.livestreaming.GetStageRequestsResponse",[{no:1,name:"stage_requests",kind:"message",repeat:1,T:()=>oae}])}}const ly=new cae;class dae extends x{constructor(){super("socket.livestreaming.GrantStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const lae=new dae;class uae extends x{constructor(){super("socket.livestreaming.DenyStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const pae=new uae;class hae extends x{constructor(){super("socket.livestreaming.LeaveStageRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const iP=new hae;class gae extends x{constructor(){super("socket.polls.Poll",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"created_by",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"question",kind:"scalar",T:9},{no:5,name:"options",kind:"message",repeat:1,T:()=>fae},{no:6,name:"hide_votes",kind:"scalar",T:8},{no:7,name:"anonymous",kind:"scalar",T:8},{no:8,name:"votes",kind:"scalar",repeat:2,T:9}])}}const yM=new gae;class mae extends x{constructor(){super("socket.polls.PollOption",[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",opt:!0,T:4,L:2},{no:3,name:"votes",kind:"message",repeat:1,T:()=>yae}])}}const fae=new mae;class vae extends x{constructor(){super("socket.polls.PollVote",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}}const yae=new vae;class _ae extends x{constructor(){super("socket.polls.NewPollRequest",[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"options",kind:"scalar",repeat:2,T:9},{no:3,name:"anonymous",kind:"scalar",T:8},{no:4,name:"hide_votes",kind:"scalar",T:8},{no:5,name:"created_by",kind:"scalar",opt:!0,T:9},{no:6,name:"created_by_user_id",kind:"scalar",opt:!0,T:9}])}}const bae=new _ae;class wae extends x{constructor(){super("socket.polls.VotePollRequest",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"index",kind:"scalar",T:4,L:2}])}}const Sae=new wae;class Eae extends x{constructor(){super("socket.polls.UpdatePollResponse",[{no:1,name:"poll",kind:"message",T:()=>yM}])}}const uy=new Eae;class Tae extends x{constructor(){super("socket.polls.GetPollsResponse",[{no:1,name:"polls",kind:"message",repeat:1,T:()=>yM}])}}const kae=new Tae;var S1;(function(e){e[e.ACTION=0]="ACTION",e[e.RESPONSE=1]="RESPONSE",e[e.EVENT=2]="EVENT"})(S1||(S1={}));var E1;(function(e){e[e.SERVICE_NOT_FOUND=0]="SERVICE_NOT_FOUND",e[e.PARAMETER_VALIDATION_ERROR=1]="PARAMETER_VALIDATION_ERROR",e[e.TIMEOUT_ERROR=2]="TIMEOUT_ERROR",e[e.APPLICATION_ERROR=3]="APPLICATION_ERROR"})(E1||(E1={}));class Pae extends x{constructor(){super("bridge.BridgeMessage",[{no:1,name:"type",kind:"enum",T:()=>["bridge.BridgeMessageType",S1]},{no:2,name:"action",kind:"message",oneof:"data",T:()=>Rae},{no:3,name:"response",kind:"message",oneof:"data",T:()=>Iae},{no:4,name:"event",kind:"message",oneof:"data",T:()=>Dae}])}}new Pae;class Cae extends x{constructor(){super("bridge.BridgeAction",[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const Rae=new Cae;class xae extends x{constructor(){super("bridge.BridgeResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"response",kind:"scalar",T:9},{no:3,name:"error",kind:"message",T:()=>Oae}])}}const Iae=new xae;class Aae extends x{constructor(){super("bridge.BridgeError",[{no:1,name:"type",kind:"enum",T:()=>["bridge.ErrorType",E1]},{no:2,name:"message",kind:"scalar",T:9}])}}const Oae=new Aae;class Mae extends x{constructor(){super("bridge.BridgeEvent",[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const Dae=new Mae;class Lae extends x{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3,L:0},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const t=this.create(),i=Date.now();return t.seconds=at.from(Math.floor(i/1e3)).toBigInt(),t.nanos=i%1e3*1e6,t}toDate(t){return new Date(at.from(t.seconds).toNumber()*1e3+Math.ceil(t.nanos/1e6))}fromDate(t){const i=this.create(),r=t.getTime();return i.seconds=at.from(Math.floor(r/1e3)).toBigInt(),i.nanos=r%1e3*1e6,i}internalJsonWrite(t,i){let r=at.from(t.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(t.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let n="Z";if(t.nanos>0){let s=(t.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?n="."+s.substring(0,3)+"Z":s.substring(6)==="000"?n="."+s.substring(0,6)+"Z":n="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",n)}internalJsonRead(t,i,r){if(typeof t!="string")throw new Error("Unable to parse Timestamp from JSON "+Cb(t)+".");let n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=at.from(s/1e3).toBigInt(),r.nanos=0,n[7]&&(r.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),r}}new Lae;const Nae=3,Uae=30,jae=8e3;class $ae{constructor(t){v(this,"ipInfo"),v(this,"axios"),v(this,"requests"),v(this,"roomName"),v(this,"roomUUID"),v(this,"peerId"),v(this,"authToken"),v(this,"organizationId");const{timeout:i=jae,retry:r=Nae,retryDelay:n=Uae,baseURL:s="https://api.cluster.dyte.in",authToken:a}=t||{};this.requests=Qg.create({baseURL:s,responseType:"json",timeout:i,retry:r,retryDelay:n}),this.axios=Qg,this.setAuthToken(a,{bearer:!0}),this.requests.interceptors.request.use(o=>(E.injectContext(this.requests.defaults.headers.common),o),async o=>{b.error("xhr::axios",{debuggingHint:"otelRequestInterceptor failed.",error:o})}),this.requests.interceptors.response.use(o=>(o.config.url!==E.logsEndpoint&&b.debug("xhr::axios",{networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,method:o.config.method}}),o),async o=>{var c;if(!o)return Promise.reject(new Error("Unknown error occurred"));o&&o.config&&((c=o.config)==null?void 0:c.url)!==E.logsEndpoint&&b.error("xhr::axios",{error:o,networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,retries:o.config.retry,method:o.config.method,isOnline:navigator.onLine?"online":"offline"}});const{config:d,message:l}=o;return d&&l&&d.retry!==void 0&&d.retry>0&&(l.includes("timeout")||l.includes("Network Error"))?(d.retry-=1,d.baseURL==="https://api.cluster.dyte.in"?d.baseURL="https://network2.dyte.io":d.baseURL==="https://network2.dyte.io"&&(d.baseURL="https://api.cluster.dyte.in"),this.requests(d)):Promise.reject(o)})}setAuthToken(t,i){const{bearer:r}=i||{};this.authToken=t,this.requests.defaults.headers.common.Authorization=r?`Bearer ${t}`:t}setHeader(t,i){this.requests.defaults.headers.common[t]=i}setRoomName(t){this.roomName=t}setRoomUUID(t){this.roomUUID=t}setPeerId(t){this.peerId=t}setOrganizationId(t){this.organizationId=t}}var Vae=Object.defineProperty,Fae=Object.getOwnPropertyDescriptor,_M=(e,t,i,r)=>{for(var n=r>1?void 0:r?Fae(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Vae(t,i,n),n};class Ef extends $ae{constructor(t){super(t),this.setHeader("x-dyte-web-core-version",Md)}async getIPDetails({peerId:t}){var i;try{const r=(await this.requests.get("https://media-location.dyte.io")).data;if(((i=r.loc)==null?void 0:i.length)>5)return r;throw Error("Insufficient data")}catch{b.error("getIPDetails::failed")}try{const r=await Mb.getIPDetails({peerId:t});return b.info("gotIPDetails",{networkCall:{ip:r.ip,timezone:r.timezone}}),r}catch(r){b.warn("ApiClient.getRoomNodeLinkAndTitleV1 Failed to get ip details",{error:{name:r.name,message:r.message}});return}}async getICEServers(){const{success:t,iceServers:i}=(await this.requests.get("/iceservers")).data;if(t)return i}async getPlugins(t){var i,r,n,s,a,o,c;let{plugins:d}=(await this.requests.get("/v2/plugins/user")).data.data;const l=((r=(i=ee.getValue(re.V1_PLUGINS))==null?void 0:i.toString())==null?void 0:r.split(","))||[],u=d.reduce((g,m)=>(g[l.includes(m.id)?"v1":"v2"].push(m),g),{v1:[],v2:[]});return t==="socket-service"?d=u.v2:d=u.v1,(a=(s=(n=Ze.modules)==null?void 0:n.devTools)==null?void 0:s.plugins)!=null&&a.length&&((c=(o=Ze.modules)==null?void 0:o.devTools)==null||c.plugins.forEach(g=>{var m,f,w;const S={...yl,tags:[...yl.tags]};S.baseURL=`http://localhost:${g.port}`,S.name=g.name,S.picture=(m=g.picture)!=null?m:yl.picture,S.description=(f=g.description)!=null?f:yl.description,S.staggered=(w=g.staggered)!=null?w:yl.staggered,S.createdAt=new Date().toISOString(),S.updatedAt=new Date().toISOString(),S.id=g.id,S.organizationId=this.organizationId,d.push(S)})),d}async getPluginDetails(t){const{plugin:i}=(await this.requests.get(`/v2/plugins/view/${t}`)).data.data;return i}async getPluginConfig(t){return(await this.axios.get(`${t}/dyte-config.json`)).data}async authorizePlugin(t){const i={peerId:this.peerId};Ee.isV2AuthToken||(i.roomName=this.roomName);const{token:r}=(await this.requests.post(`/v2/plugins/authorize/${t}`,i)).data.data;return r}async getPresignedUrls(t){const{getLocation:i,putLocation:r}=(await this.requests.post("/v1/meetings/genPreSignedUploadUrl",{roomUUID:this.roomUUID,filename:t})).data.data;return{getLocation:i,putLocation:r}}async uploadFile(t,i){if(navigator.isReactNative&&"uri"in t)try{await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:{uri:t.uri,name:t.name}})}catch(r){b.error(`sendFileMessage::${r}`)}else await this.axios.put(i,t,{headers:{"Content-Type":t.type}})}}_M([E.trace("APIClient.getIPDetails")],Ef.prototype,"getIPDetails",1);_M([E.trace("APIClient.getICEServers")],Ef.prototype,"getICEServers",1);var zae=Object.defineProperty,Bae=Object.getOwnPropertyDescriptor,Qd=(e,t,i,r)=>{for(var n=r>1?void 0:r?Bae(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&zae(t,i,n),n};class ic extends Ef{async startLivestreaming(){var t,i;return(i=(t=(await this.requests.post(`/v2/meetings/${Ee.meetingId}/livestreams`)).data)==null?void 0:t.data)==null?void 0:i.playback_url}async stopLivestreaming(){return this.requests.post(`/v2/meetings/${Ee.meetingId}/active-livestream/stop`)}async getActiveLivestream(){const{playbackUrl:t,status:i}=Nr((await this.requests.get(`/v2/meetings/${Ee.meetingId}/active-livestream`)).data.data);return{status:i,playbackUrl:t}}async getUserDetails(){const t=(await this.requests.get("v2/internals/participant-details")).data.data;return Nr(t)}getUserPreset(t){throw new Error("getUserPreset does not exist for v2")}async startRecording(t){return(await this.requests.post("/v2/recordings",{...dM(t),meeting_id:Ee.meetingId})).data.id}stopRecording(t){return this.requests.put(`v2/recordings/${t}`,{action:"stop"})}async getActiveRecording(){const{status:t,id:i}=(await this.requests.get(`v2/recordings/active-recording/${Ee.meetingId}`)).data.data;return{status:t,id:i}}async getRoomNodeData({peerId:t}){const i=await this.getIPDetails({peerId:t});this.ipInfo=i;const{roomNodeLink:r,title:n,useHiveMedia:s}=Nr((await this.requests.post("v2/internals/rooms",{ip_information:i})).data.data);return{roomNodeUrl:r,meetingTitle:n,useHiveMedia:s!=null?s:!1}}}Qd([E.trace("APIClient.getUserDetails")],ic.prototype,"getUserDetails",1);Qd([E.trace("APIClient.getUserPreset")],ic.prototype,"getUserPreset",1);Qd([E.trace("APIClient.startRecording")],ic.prototype,"startRecording",1);Qd([E.trace("APIClient.stopRecording")],ic.prototype,"stopRecording",1);Qd([E.trace("APIClient.getActiveRecording")],ic.prototype,"getActiveRecording",1);Qd([E.trace("APIClient.getRoomNodeData")],ic.prototype,"getRoomNodeData",1);var Hae=Object.defineProperty,Gae=Object.getOwnPropertyDescriptor,Zd=(e,t,i,r)=>{for(var n=r>1?void 0:r?Gae(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Hae(t,i,n),n};class rc extends Ef{startLivestreaming(){throw new Error("Method not implemented.")}stopLivestreaming(){throw new Error("Method not implemented.")}getActiveLivestream(){throw new Error("Method not implemented.")}async getUserDetails(){const{user:t}=(await this.requests.get("/auth/basicUserDetails")).data;return t}async getUserPreset(t){const{preset:i}=(await this.requests.post("/v1/userpreset",{roomName:t,authToken:this.authToken,clientType:"CLIENT_APP",version:"0.5.0"})).data.data;return Nr(i)}async startRecording(t){const i=await this.requests.post(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recording`,t);if(i.status!==201)throw new Error("Recording failed to start");return i.data.data.recording.id}async stopRecording(t){if((await this.requests.put(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recordings/${t}`,{recordingAction:"stop"})).status!==201)throw new Error("Recording failed to stop")}async getActiveRecording(){return this.organizationId?(await this.requests.get(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/active-recording?limit=50`)).data.data.recording:{}}async getRoomNodeData({roomName:t,peerId:i}){const r=`
        query Session($roomName: String!, $password: String, $ipInformation: String) {
            session(roomName: $roomName, password: $password) {
              title,
              roomNodeLink(ipInformation: $ipInformation),
              useHiveMedia,
              roomName,
              password
            }
          }
        `,n=await this.getIPDetails({peerId:i});this.ipInfo=n;const{roomNodeLink:s,title:a,useHiveMedia:o}=(await this.requests.post("/graphql",{query:r,variables:{roomName:t,ipInformation:JSON.stringify(n)}})).data.data.session;return{roomNodeUrl:s,meetingTitle:a,useHiveMedia:o!=null?o:!1}}}Zd([E.trace("APIClientV1.getUserDetails")],rc.prototype,"getUserDetails",1);Zd([E.trace("APIClientV1.getUserPreset")],rc.prototype,"getUserPreset",1);Zd([E.trace("APIClientV1.startRecording")],rc.prototype,"startRecording",1);Zd([E.trace("APIClientV1.stopRecording")],rc.prototype,"stopRecording",1);Zd([E.trace("APIClientV1.getActiveRecording")],rc.prototype,"getActiveRecording",1);Zd([E.trace("APIClientV1.getRoomNodeData")],rc.prototype,"getRoomNodeData",1);let T1;function Wae(e){return T1=Ee.isV2AuthToken?new ic(e):new rc(e),T1}function ui(){return T1}const qae=0,Jae=1,Kae=2,Yae=3,Qae={getPeerInfo:0,updatePeerInfo:1,getRoomPeersInfo:2,joinRoom:3,leaveRoom:4,getRoomInfo:5,updateRoomInfo:6,closeRoom:7,startedLivestream:8,stoppedLivestream:9,erroredLivestream:10,getStagePeers:11,getStageRequests:12,requestStageAccess:13,cancelStageRequest:14,grantStageAccess:15,denyStageAccess:16,roomPeerCount:17,joinStage:18,leaveStage:19,getConnectedRoomsDump:20,createConnectedRooms:21,deleteConnectedRooms:22,movePeers:23,transferPeer:24,movedPeer:25,connectedRoomsUpdated:26,connectedRoomsDeleted:27},Zae={getMessages:0,sendMessageToRoom:1,sendMessageToPeers:2,editMessage:3,deleteMessage:4,getPaginatedMessages:5},Xae={getPlugins:0,addPlugin:1,enablePluginForRoom:2,disablePluginForPeers:3,enablePluginForPeers:4,disablePluginForRoom:5,removePlugin:6,customPluginEventToRoom:7,customPluginEventToPeers:8,storeInsertKeys:9,storeGetKeys:10,storeDeleteKeys:11,storeDelete:12},eoe={createPoll:0,getPolls:1,votePoll:2,updatePoll:3},toe={unknown:0,createWebRTCTransport:1,produce:2,consume:3,toggleProducer:4,toggleConsumer:5,closeProducer:6,closeConsumer:7,joinRoom:16,leaveRoom:17,selectedPeer:18,globalPinPeer:19,selfJoinComplete:20,peerJoinedBroadcast:25,peerLeaveBroadcast:26,peerProducerCreateBroadcast:27,peerProducerToggleBroadcast:28,peerProducerCloseBroadcast:29,globalPeerPinBroadcast:30,recordingStartedBroadcast:31,recordingStoppedBroadcast:32,peerDisplayNameEditBroadcast:33,selectedPeerDiff:40,renegotiateSessionDescription:50,kickPeer:90,kickAll:91,changeDisplayName:92,hostControlPeer:93,hostControlAllPeers:94};function Tf(e,t){return Object.keys(t).reduce((i,r)=>(i[r]=(e<<16)+t[r],i),{})}function ioe(e){return Object.keys(e).reduce((t,i)=>(t[i]=16777216|e[i],t),{})}const Ne=Tf(qae,Qae),Ri=Tf(Jae,Zae),de=Tf(Kae,Xae),ss=Tf(Yae,eoe),Fe=ioe(toe);var k1;class bM{constructor(){v(this,"meetingTitle"),v(this,"roomName"),v(this,"roomUUID"),v(this,"isDisconnected"),v(this,"roomJoined"),I(this,k1,void 0),v(this,"peerId"),v(this,"authToken"),v(this,"maxPreferredStreams")}get sfuHandler(){return h(this,k1)}reconnect(){throw new R("Method not implemented.")}async joinRoom(t,i,r,n,s={}){throw new R("Method not implemented.")}async leaveRoom(){throw new R("Method not implemented.")}async handleSocketCallbacks(t){throw new R("Method not implemented.")}async handleSockets(t,i){throw new R("Method not implemented.")}async shareMic(t){throw new R("Method not implemented.")}async shareWebcam(t){throw new R("Method not implemented.")}async shareScreen(t){throw new R("Method not implemented.")}async unmuteSelf(){throw new R("Method not implemented.")}async muteSelf(){throw new R("Method not implemented.")}async pauseWebcam(){throw new R("Method not implemented.")}async disableScreenShare(){throw new R("Method not implemented.")}async acceptWaitingRequest(t){throw new R("Method not implemented.")}async rejectWaitingRequest(t){throw new R("Method not implemented.")}async muteAll(t){throw new R("Method not implemented.")}async muteAllVideo(){throw new R("Method not implemented.")}async disableAudio(t){throw new R("Method not implemented.")}async disableVideo(t){throw new R("Method not implemented.")}async kickAll(){throw new R("Method not implemented.")}async kick(t){throw new R("Method not implemented.")}async pinPeer(t){throw new R("Method not implemented.")}async getChatMessages(){throw new R("Method not implemented.")}async requestRemoteControl(t){throw new R("Method not implemented.")}async acceptRemoteControl(t){throw new R("Method not implemented.")}async terminateRemoteControl(t,i){throw new R("Method not implemented.")}async sendEventRemoteControl(t,i,r){throw new R("Method not implemented.")}async getPolls(){throw new R("Method not implemented.")}async newPoll(t){throw new R("Method not implemented.")}async votePoll(t){throw new R("Method not implemented.")}async getPage(t){throw new R("Method not implemented.")}getConsumers(){throw new R("Method not implemented.")}async sendMessage(t){throw new R("Method not implemented.")}async getRoomState(){throw new R("Method not implemented.")}async addRoomPlugin(t){throw new R("Method not implemented.")}async removeRoomPlugin(t){throw new R("Method not implemented.")}async unpinChatMessage(t){throw new R("Method not implemented.")}async pinChatMessage(t){throw new R("Method not implemented.")}async sendChatMessage(t){throw new R("Method not implemented.")}async broadcastMessage(t,i){throw new R("Method not implemented.")}async acceptAllRequestToJoinStage(t){throw new R("Method not implemented.")}async stopPresenting(){throw new R("Method not implemented.")}async startPresenting(){throw new R("Method not implemented.")}async requestToJoinStage(t){throw new R("Method not implemented.")}async rejectRequestToJoinStage(t){throw new R("Method not implemented.")}async withdrawRequestToJoinStage(){throw new R("Method not implemented.")}async removePeerFromStage(t,i){throw new R("Method not implemented.")}stopAllProducers(){throw new R("Method not implemented.")}}k1=new WeakMap;class roe extends zi.EventEmitter{}class Ai{constructor(t){v(this,"_name"),this._name=t}static getLogger(t){return new Ai(t)}static format(t,...i){const r=t.split("%");let n=t;r.length&&([n]=r),i.reverse();for(let s=1;s<r.length&&i.length;s+=1){const a=i.pop();let o=r[s];switch(o.at(0)){case"s":o=o.replace("s",a);break;case"d":o=o.replace("d",a.toString());break;case"o":o=o.replace("o",JSON.stringify(a,null,2));break}n=`${n}${o}`}return i.length&&i.reverse().forEach(s=>{n=`${n} ${s instanceof Object?JSON.stringify(s,null,2):s}`}),n}info(t,...i){let r=Ai.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.info(r)}debug(t,...i){let r=Ai.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.info(r)}warn(t,...i){let r=Ai.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.info(r)}error(t,...i){let r=Ai.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.error(r)}}const rP=Ai.getLogger("EnhancedEventEmitter");class qo extends zi.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(t,...i){const r=this.listenerCount(t);try{return this.emit(t,...i)}catch(n){return rP.error("safeEmit() | event listener threw an error [event:%s]:%o",t,n),Boolean(r)}}async safeEmitAsPromise(t,...i){const r={}.EVENT_PROMISE_TIMEOUT?parseInt({}.EVENT_PROMISE_TIMEOUT,10):1e4;return this.safeEmitAsPromiseWithTimeout(t,r,...i)}async safeEmitAsPromiseWithTimeout(t,i,...r){return new Promise((n,s)=>{setTimeout(s,i,"event request timeout");try{this.emit(t,...r,n,s)}catch(a){rP.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",t,a),s(a)}})}}class Xb extends qo{constructor(){super(),v(this,"_mapMidTransceiver",new Map),this._mapMidTransceiver=new Map}get midTransceiverMap(){return this._mapMidTransceiver}}const Ce=Ai.getLogger("Chrome74");class ew extends Xb{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new ew}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(Ce.debug("close()"),this._pc)try{this._pc.close()}catch(t){Ce.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){Ce.debug("init()",n),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Ce.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Ce.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){Ce.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(){Ce.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return Ce.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{Ce.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOption:r,screenShare:n}){var s;this._assertSendDirection(),Ce.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),Ce.debug("creating new transceiver");const a=this._pc.addTransceiver(t,{direction:"sendonly",streams:[n?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(t.kind);Ce.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(u=>u.mimeType.includes(r.name));if(r.parameters){Ce.info("codecOption.parameters:",r.parameters);const u=((s=l.sdpFmtpLine)==null?void 0:s.split(";"))||[];u.push(...r.parameters);const g=[...new Set(u).values()];l.sdpFmtpLine=g.join(";")}c.push(l)}Ce.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),r&&r.name==="opus"&&(d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),d.sdp+=`a=rtcp-fb:111 nack\r
`),{offerSdp:d,callback:async l=>(Ce.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(t){this._assertSendDirection(),Ce.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Ce.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Ce.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?Ce.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Ce.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),Ce.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),Ce.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(t){throw this._assertRecvDirection(),Ce.debug("stopReceiving() [localId:%s]",t),Error("method not implemented")}async pauseReceiving(t){throw this._assertRecvDirection(),Ce.debug("pauseReceiving() [localId:%s]",t),Error("method not implemented")}async resumeReceiving(t){throw this._assertRecvDirection(),Ce.debug("resumeReceiving() [localId:%s]",t),Error("method not implemented")}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){Ce.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Ce.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Ce.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Ce.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Ce.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Ce.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{Ce.info("icecandidateerror",t)}),this._pc.addEventListener("datachannel",t=>{Ce.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{Ce.info("data channel open: ",t.channel.label)},i.onclose=()=>{Ce.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{Ce.error("data channel error: ",t.channel.label,r)},i.onmessage=r=>{Ce.info("data channel message: ",t.channel.label,r),this.safeEmit("datachannel",t.channel,String.fromCharCode.apply(null,new Uint8Array(r.data)))}})}}const _e=Ai.getLogger("Firefox60");class tw extends Xb{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new tw}get name(){return"Firefox60"}get pc(){return this._pc}close(){if(_e.debug("close()"),this._pc)try{this._pc.close()}catch(t){_e.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){_e.debug("init()"),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return _e.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{_e.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){throw _e.debug("updateIceServers()"),new Error("not supported")}async restartIce(){_e.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return _e.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{_e.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,screenShare:r}){this._assertSendDirection(),_e.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),_e.debug("creating new transceiver");const n=this._pc.addTransceiver(t,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream]});if(i){i.reverse();const a=n.sender.getParameters();a.encodings=i,await n.sender.setParameters(a)}const s=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(s),s.sdp=s.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:s,callback:async a=>(_e.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(n.mid,n),n.mid)}}async stopSending(t){this._assertSendDirection(),_e.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return _e.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{_e.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?_e.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):_e.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),_e.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters(),s=n.encodings.length-1-i;n.encodings.forEach((a,o)=>{o>=s?a.active=!0:a.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),_e.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(t){this._assertRecvDirection(),_e.debug("stopReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",_e.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return _e.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{_e.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async pauseReceiving(t){this._assertRecvDirection(),_e.debug("pauseReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return _e.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{_e.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async resumeReceiving(t){this._assertRecvDirection(),_e.debug("resumeReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return _e.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async n=>{_e.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){_e.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("datachannel",t=>{_e.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{_e.info("data channel open: ",t.channel.label)},i.onclose=()=>{_e.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{_e.error("data channel error: ",t.channel.label,r)},i.onmessage=async r=>{_e.debug("data channel message: ",t.channel.label,r);const n=await r.data.arrayBuffer();this.safeEmit("datachannel",t.channel,String.fromCharCode.apply(null,new Uint8Array(n)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:_e.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),_e.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":_e.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":_e.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:_e.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{_e.info("chrome74::icecandidateerror",t)})}}const me=Ai.getLogger("Safari12");class iw extends Xb{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new iw}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(me.debug("close()"),this._pc)try{this._pc.close()}catch(t){me.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){me.debug("init()"),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return me.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{me.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){me.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(){me.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return me.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{me.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOption:r,screenShare:n}){var s;this._assertSendDirection(),me.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),me.debug("creating new transceiver");const a=this._pc.addTransceiver(t,{direction:"sendonly",streams:[n?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(t.kind);me.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(u=>u.mimeType.includes(r.name));if(r.parameters){me.info("codecOption.parameters:",r.parameters);const u=((s=l.sdpFmtpLine)==null?void 0:s.split(";"))||[];u.push(...r.parameters);const g=[...new Set(u).values()];l.sdpFmtpLine=g.join(";")}c.push(l)}me.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:d,callback:async l=>(me.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(t){this._assertSendDirection(),me.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return me.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{me.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?me.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):me.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),me.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),me.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async receive(t){this._assertRecvDirection(),me.debug("recieve() | calling pc.setLocalDescription() [answer:%o]",t);const i=this._pc.getTransceivers().at(-1);return me.info("Transceiver is now receiving",i,this._pc.getTransceivers()),this.midTransceiverMap.set(i.mid,i),{track:i.receiver.track,localId:i.mid}}async stopReceiving(t){this._assertRecvDirection(),me.debug("stopReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",me.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return me.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{me.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async pauseReceiving(t){this._assertRecvDirection(),me.debug("pauseReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return me.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{me.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async resumeReceiving(t){this._assertRecvDirection(),me.debug("resumeReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return me.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async n=>{me.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){me.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:me.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),me.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":me.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":me.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:me.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{me.info("chrome74::icecandidateerror",t)}),this._pc.ondatachannel=t=>{me.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{me.info("data channel open: ",t.channel.label)},i.onclose=()=>{me.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{me.error("data channel error: ",t.channel.label,r)},i.onmessage=async r=>{me.debug("data channel message: ",t.channel.label,r);const n=String.fromCharCode.apply(null,new Uint8Array(r.data));this.safeEmit("datachannel",t.channel,n)}}}}function noe(e,t){return typeof e>"u"?t:JSON.parse(JSON.stringify(e))}const P1="transport closed";class gd extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,gd):this.stack=new Error(t).stack}}class Ki extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Ki):this.stack=new Error(t).stack}}const kn=Ai.getLogger("Producer");class soe extends qo{constructor({id:t,localId:i,track:r,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,handler:o,appData:c}){super(),v(this,"_id"),v(this,"_localId"),v(this,"_closed",!1),v(this,"_handler"),v(this,"_track"),v(this,"_kind"),v(this,"_paused"),v(this,"_maxSpatialLayer"),v(this,"_stopTracks"),v(this,"_disableTrackOnPause"),v(this,"_zeroRtpOnPause"),v(this,"_appData"),v(this,"observer"),this._id=t,this._localId=i,this._track=r,this._kind=r.kind,this._paused=s?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=n,this._disableTrackOnPause=s,this._zeroRtpOnPause=a,this._appData=c||{},this._onTrackEnded=this._onTrackEnded.bind(this),this._handler=o,this.observer=new qo,this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get track(){return this._track}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}close(t){if(!this._closed){if(kn.debug("close() with reason:",t),this._closed=!0,this._destroyTrack(),t===P1){this.observer.emit("close");return}this._handler.stopSending(this.localId).then(({offerSdp:i,callback:r})=>{this.safeEmit("close",i,r,t)}).finally(()=>{this.observer.emit("close")})}}async getStats(){if(this._closed)throw new Ki("closed");return this._handler.getSenderStats(this.localId)}pause(){kn.debug(`producer(${this.id}):pause()`),this._closed&&kn.error("pause() | Producer closed"),this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,null),this.observer.emit("pause")}resume(){if(kn.debug(`producer(${this.id}):resume()`),this._closed){kn.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,this._track),this.observer.emit("resume")}async replaceTrack({track:t}){if(kn.debug("replaceTrack() [track:%o]",t),this._closed){if(t&&this._stopTracks)try{t.stop()}catch(i){kn.error(i)}throw new Ki("closed")}else if(t&&t.readyState==="ended")throw new Ki("track ended");if(t===this._track){kn.debug("replaceTrack() | same track, ignored");return}(!this._zeroRtpOnPause||!this._paused)&&await this._handler.replaceTrack(this.localId,t),this._destroyTrack(),this._track=t,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()}async setMaxSpatialLayer(t){if(this._closed)throw new Ki("closed");if(this._kind!=="video")throw new gd("not a video Producer");if(typeof t!="number")throw new TypeError("invalid spatialLayer");await this._handler.setMaxSpatialLayer(this.localId,t),this._maxSpatialLayer=t}async setRtpEncodingParameters(t){if(this._closed)throw new Ki("closed");if(typeof t!="object")throw new TypeError("invalid params");await this._handler.setRtpEncodingParameters(this.localId,t)}_onTrackEnded(){kn.debug('track "ended" event'),this.observer.emit("trackended"),this.safeEmit("trackended",this.track.id)}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(t){kn.error(t)}}}const qa=Ai.getLogger("Consumer");class aoe extends qo{constructor({id:t,localId:i,producerId:r,producingPeerId:n,handler:s,track:a,appData:o,paused:c,reuseTrack:d}){super(),v(this,"_id"),v(this,"_localId"),v(this,"_producerId"),v(this,"_closed",!1),v(this,"_reuseTrack"),v(this,"_handler"),v(this,"_track"),v(this,"_paused"),v(this,"_peerId"),v(this,"_appData"),v(this,"observer"),this._id=t,this._localId=i,this._handler=s,this._appData=o,this._peerId=n,this._producerId=r,this._onTrackEnded=this._onTrackEnded.bind(this),this._track=a,this._paused=c!=null?c:!1,this._reuseTrack=d,this.observer=new qo,this._handleTrack()}get id(){return this._id}get peerId(){return this._peerId}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get track(){return this._track}get paused(){return this._paused}get remotelyPaused(){return this.paused}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}close(t){this._closed||(qa.debug("close() with reason:",t),this._closed=!0,this._reuseTrack||this._destroyTrack(),this.emit("close",t),this.observer.safeEmit("close",t))}async getStats(){if(this._closed)throw new Ki("closed");return this._handler.getReceiverStats(this.localId)}pause(){if(qa.debug(`consumer(${this.id}):pause()`),this._closed){qa.error("pause() | Consumer closed");return}this._paused=!0,this._track.enabled=!1,this.observer.safeEmit("pause")}resume(){if(qa.debug(`consumer(${this.id}):resume()`),this._closed){qa.error("resume() | Consumer closed");return}this._paused=!1,this._track.enabled=!0,this.observer.safeEmit("resume")}_onTrackEnded(){qa.debug('track "ended" event'),this.safeEmit("trackended"),this.observer.safeEmit("trackended")}_handleTrack(){this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){try{this._track.removeEventListener("ended",this._onTrackEnded),this._track.stop()}catch(t){qa.error(t)}}}const ii=Ai.getLogger("Transport");class ooe extends qo{constructor({id:t,direction:i,handlerFactory:r,iceServers:n,iceTransportPolicy:s,proprietaryConstraints:a,additionalSettings:o,appData:c}){super(),v(this,"_id"),v(this,"_serverId"),v(this,"_closed",!1),v(this,"_direction"),v(this,"_maxSctpMessageSize"),v(this,"_handler"),v(this,"_connectionState","new"),v(this,"_producers"),v(this,"_consumers"),v(this,"_datachannels"),v(this,"_connected",!1),v(this,"_transportConnectionPromise",null),v(this,"awaitQueue"),v(this,"observer"),v(this,"consumerTrackEvents"),v(this,"unknownTracksMap"),v(this,"consumerTrackPool"),v(this,"_appData"),v(this,"datachannelCache",new Map),ii.debug("constructor() [id: %s, direction: %s]",t,i),this._id=t,this._direction=i;const d=noe(o,{});delete d.iceServers,delete d.iceTransportPolicy,delete d.bundlePolicy,delete d.rtcpMuxPolicy,delete d.sdpSemantics,this._producers=new Map,this._consumers=new Map,this._datachannels=new Map,this.consumerTrackEvents=new Map,this.consumerTrackPool=new Map,this.unknownTracksMap=new Map,this.awaitQueue=new jA,this.observer=new qo,this._handler=r(),this._handler.init({onTrackHandler:this._ontrack.bind(this),direction:i,iceServers:n,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:a}),this._appData=c||{},this._transportConnectionPromise=new Promise(l=>{this.observer.once("connected",()=>{l(!0)}),this.observer.once("disconnect",()=>{l(!1)}),this.observer.once("close",()=>{l(!1)})}),this._handler.on("@connectionstatechange",l=>{l!==this._connectionState&&(ii.debug("connection state changed to %s",l),this._connectionState=l,l==="connected"&&(this._connected=!0,this.observer.emit("connected")),l==="disconnected"&&(this._connected=!1,this.observer.emit("disconnect")),(l==="failed"||l==="closed")&&(this._connected=!1,this.observer.emit("close")),this._closed||this.safeEmit("connectionstatechange",l))}),this._handler.on("@icecandidate",({candidate:l})=>{this._closed||this.safeEmit("icecandidate",l)}),this._handler.on("datachannel",(l,u)=>{var g,m;this._datachannels.has(l.label)||this._datachannels.set(l.label,l);const f=JSON.parse(u);if(this.datachannelCache.has(f.id)||this.datachannelCache.set(f.id,[]),(g=this.datachannelCache.get(f.id))==null||g.push(f),((m=this.datachannelCache.get(f.id))==null?void 0:m.length)===f.count){const w=this.datachannelCache.get(f.id),S=w==null?void 0:w.reduce((y,_)=>y+_.chunk,"");this.datachannelCache.delete(f.id);try{const y=JSON.parse(S);this.safeEmit(`datachannel:${l.label}`,l,y)}catch(y){ii.error("error parsing message",y)}}})}get id(){return this._id}get serverId(){return this._serverId}get connected(){return this._connected}get isConnected(){return this._transportConnectionPromise}get datachannels(){return this._datachannels}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}setServerId(t){this._serverId=t}getDatachannel(t){return this._datachannels.get(t)}close(){this._closed||(ii.debug("close()"),this._connected=!1,this._closed=!0,this._handler.close(),[...this._producers.values()].forEach(t=>t.close(P1)),this._producers.clear(),[...this._consumers.values()].forEach(t=>t.close(P1)),this._consumers.clear(),this.consumerTrackPool.clear(),this.consumerTrackEvents.clear(),this.emit("close"),this.observer.emit("close"))}async getStats(){if(this._closed)throw new Ki("closed");return this._handler.getTransportStats()}async connect(){try{const{offerSdp:t,callback:i}=await this._handler.connect(),{answer:r}=await this.safeEmitAsPromise("connect",{offer:t});if(await i(r),!await this.isConnected)throw new Error("ice connection failed")}catch(t){throw ii.error("transport failed to connect:",t),t}}async restartIce(){if(ii.debug("restartIce()"),this._closed)throw new Ki("closed");return this._handler.restartIce()}async updateIceServers({iceServers:t}={}){if(ii.debug("updateIceServers()"),this._closed)throw new Ki("closed");this._handler.updateIceServers(t)}async produce({track:t,encodings:i,codecOptions:r,stopTracks:n=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(ii.debug(`produce() [track:${t.id}]`),t){if(this._direction!=="send")throw new gd("not a sending Transport");if(t.readyState==="ended")throw new Ki("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing track");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const{producerId:c,localId:d}=await this.awaitQueue.push(async()=>{const{offerSdp:u,callback:g}=await this._handler.send({track:t,encodings:i,codecOption:r,screenShare:o==null?void 0:o.screenShare}),{answer:m,producerId:f}=await this.safeEmitAsPromise("produce",{offer:u,kind:t.kind,paused:s?!t.enabled:!1,appData:o}),w=await g(m);return{producerId:f,localId:w}}),l=new soe({id:c,localId:d,track:t,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o,handler:this.handler});return this._producers.set(c,l),l.observer.on("close",()=>{this._producers.delete(l.id)}),this.emit("newproducer",l),this.observer.emit("newproducer",l),l}async consumePeer(t,i={}){if(ii.debug("consumePeer() producingPeerId:",t),this._closed)throw new Ki("closed");if(this._direction!=="recv")throw new gd("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing producingPeerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(i&&typeof i!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const r=[],{consumersMap:n}=await this.safeEmitAsPromise("consumePeer",{producingPeerId:t});return n.forEach((s,a)=>{const{consumerId:o,trackId:c,screenShare:d,paused:l,streamId:u,kind:g}=s;r.push(this._consumerCreationTask({consumerId:o,trackId:c,streamId:u,kind:g,producerId:a,producingPeerId:t,paused:l,screenShare:d,appData:i}))}),ii.info("promises",r),Promise.allSettled(r)}async consume({producerId:t,producingPeerId:i,appData:r={}}){if(ii.debug("consume()"),this._closed)throw new Ki("closed");if(this._direction!=="recv")throw new gd("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing producerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(r&&typeof r!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));try{const{consumerId:n,screenShare:s,trackId:a,paused:o,streamId:c,kind:d}=await this.safeEmitAsPromise("consume",{producerId:t,producingPeerId:i});return this._consumerCreationTask({consumerId:n,screenShare:s,trackId:a,streamId:c,kind:d,paused:o,producerId:t,producingPeerId:i,appData:r})}catch(n){throw ii.error("consume failed:",n),n}}async _consumerCreationTask({consumerId:t,producerId:i,producingPeerId:r,streamId:n,trackId:s,paused:a,screenShare:o,appData:c,kind:d}){const l=`${n}:${d}`,u={consumerId:t,producerId:i,producingPeerId:r,streamId:n,trackId:s,appData:c,kind:d,paused:a,screenShare:o,name:"consumer creation task error",message:"consumer creation failed"};return new Promise((g,m)=>{const f=setTimeout(()=>{this.consumerTrackEvents.delete(l),u.isTimedout=!0,m(u)},5e3),w=async(_,T)=>{try{if(_.readyState==="ended")clearTimeout(f),m(u);else{this.handler.midTransceiverMap.set(T.mid,T);const C=new aoe({id:t,localId:T.mid,track:_,paused:a,producerId:i,producingPeerId:r,handler:this._handler,reuseTrack:!0,appData:{...c,screenShare:o}});this._consumers.set(t,C),C.once("close",()=>{this._consumers.delete(C.id),this.handler.midTransceiverMap.delete(T.mid)}),ii.info("consumer created for ",{producerId:i,trackId:s,producingPeerId:r}),this.observer.emit("newconsumer",C),clearTimeout(f),g(C)}}catch(C){ii.warn("error while creating consumer:",C),clearTimeout(f),m(u)}},S=this.consumerTrackPool.get(t);if((S==null?void 0:S.length)===2){w(S[0],S[1]);return}const y=this.unknownTracksMap.get(l);y?(this.unknownTracksMap.delete(l),w(y.track,y.transceiver)):this.consumerTrackEvents.set(l,w)})}_ontrack(t){const{track:i,transceiver:r,streams:n}=t;ii.info("track event received",{trackId:i.id,tId:r.receiver.track.id}),i.addEventListener("ended",()=>{ii.info("track ended",i.id),this.consumerTrackPool.delete(i.id)}),this.consumerTrackPool.set(i.id,[i,r]),i.onended=()=>{this.consumerTrackPool.delete(i.id)};const s=`${n[0].id}:${i.kind}`,a=this.consumerTrackEvents.get(s);a?(a(i,r),this.consumerTrackEvents.delete(s)):(ii.warn(`track event handler not found ${s}`),this.unknownTracksMap.set(s,t))}async setRemoteDescription(t){await this._handler.pc.setRemoteDescription(t)}async setLocalDescription(t){ii.debug(`${this.direction}() {transportId: ${this.serverId}} | calling pc.setLocalDescription() [offer:%o]`,t),await this._handler.pc.setLocalDescription(t)}async setRemoteOffer(t){await this.setRemoteDescription(t);const i=await this._handler.pc.createAnswer(),r=be(i.sdp);return r.media=r.media.map(n=>{if(n.type==="audio"){const s={...n};return s.rtcpFb||(s.rtcpFb=[]),s.rtcpFb.some(a=>a.type==="nack")||s.rtcpFb.push({payload:parseInt(s.payloads,10),type:"nack"}),s}return n}),i.sdp=hn(r),await this.setLocalDescription(i),i}async retryFailedConsumerCreationTasks(t){return Promise.allSettled(t.map(i=>(ii.warn("retrying failed consumer creation task",i),this._consumerCreationTask({...i}))))}}function coe(e){return"name"in e&&e.name==="consumer creation task error"}const Dn=Ai.getLogger("Device");function doe(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){Dn.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection");return}return Dn.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative"}if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const e=navigator.userAgent,t=vb.getParser(e),i=t.getEngine();if(t.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||t.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(i.name&&i.name.toLowerCase()==="blink"){const r=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(r){const n=Number(r[1]);return n>=74?"Chrome74":n>=70?"Chrome70":n>=67?"Chrome67":"Chrome55"}return"Chrome74"}Dn.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion());return}Dn.warn("this._detectDevice() | unknown device")}class loe{constructor({handlerName:t,handlerFactory:i}={}){if(v(this,"_handlerFactory"),v(this,"_handlerName"),v(this,"_observer"),Dn.debug("constructor()"),t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)Dn.debug("constructor() | handler given: %s",t);else if(t=doe(),t)Dn.debug("constructor() | detected handler: %s",t);else throw new Error("device not supported");switch(t){case"Chrome74":this._handlerFactory=ew.createFactory();break;case"Safari12":this._handlerFactory=iw.createFactory();break;case"Firefox60":this._handlerFactory=tw.createFactory();break;default:throw new TypeError(`unknown handlerName "${t}"`)}}const r=this._handlerFactory();this._handlerName=r.name,r.close(),this._observer=new zi}get handlerName(){return this._handlerName}createSendTransport({iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s}){return Dn.debug("createSendTransport()"),this._createTransport({direction:"send",iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s})}createRecvTransport({iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s}){return Dn.debug("createRecvTransport()"),this._createTransport({direction:"recv",iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s})}_createTransport({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,appData:a}){const o=Zm(),c=new ooe({id:o,direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,appData:a,handlerFactory:this._handlerFactory});return Dn.info("transport created",c),this._observer.emit("newtransport",c),c}}var $i;class uoe{constructor(t){I(this,$i,void 0),A(this,$i,t)}async joinRoom(t,i){const r={roomUuid:t,displayName:i,prejoined:!1};return(await h(this,$i).sendMessagePromise(Fe.joinRoom,uie.toBinary(r))).payload}async connectTransport(t){const i=(await h(this,$i).sendMessagePromise(Fe.createWebRTCTransport,Kte.toBinary(t))).payload,{transportId:r,description:n}=wf.fromBinary(i),s={sdp:n==null?void 0:n.sdp,type:n.type};return{transportId:r,answer:s}}async produce(t){var i,r;const n=(await h(this,$i).sendMessagePromise(Fe.produce,bie.toBinary(t))).payload,s=sre.fromBinary(n);return{answer:{sdp:(i=s==null?void 0:s.description)==null?void 0:i.sdp,type:(r=s==null?void 0:s.description)==null?void 0:r.type},producerId:s.producerId}}async consume(t){const i=(await h(this,$i).sendMessagePromise(Fe.consume,yie.toBinary(t))).payload,{consumerIdsMap:{map:r}}=rre.fromBinary(i);return r}async closeProducer(t){const i=(await h(this,$i).sendMessagePromise(Fe.closeProducer,Cie.toBinary(t))).payload,{description:r}=pre.fromBinary(i);return r}async closeConsumer(t){return(await h(this,$i).sendMessagePromise(Fe.closeConsumer,xie.toBinary(t))).payload}async hostControlForPeer(t,i){const r={audio:i==="audio",screeShare:!1,video:i==="video",participantId:t},n=(await h(this,$i).sendMessagePromise(Fe.hostControlPeer,Uie.toBinary(r))).payload;if(!n)return!1;const{status:s}=bre.fromBinary(n);return s==="success"}async hostControlForAll(t){const i={audio:t==="audio",screenShare:!1,video:t==="video"},r=(await h(this,$i).sendMessagePromise(Fe.hostControlAllPeers,$ie.toBinary(i))).payload;if(!r)return!1;const{status:n}=Sre.fromBinary(r);return n==="success"}async kickAll(){const t={},i=(await h(this,$i).sendMessagePromise(Fe.kickAll,Mie.toBinary(t))).payload;if(!i)return!1;const{status:r}=yre.fromBinary(i);return r==="success"}async kickPeer(t){const i=(await h(this,$i).sendMessagePromise(Fe.kickPeer,Aie.toBinary(t))).payload;if(!i)return!1;const{status:r}=fre.fromBinary(i);return r==="success"}async changeDisplayName(t){const i=(await h(this,$i).sendMessagePromise(Fe.changeDisplayName,Lie.toBinary(t))).payload;if(!i)return!1;const{status:r}=Tre.fromBinary(i);return r==="success"}async notifySelfJoinComplete(){const t={},i=(await h(this,$i).sendMessagePromise(Fe.selfJoinComplete,hie.toBinary(t))).payload;return Zie.fromBinary(i)}}$i=new WeakMap;class poe extends roe{constructor(t){super(),v(this,"_device"),v(this,"_sendTransport"),v(this,"_recvTransport"),v(this,"_consumers"),v(this,"_producers"),v(this,"_producerIdToConsumerIdMap"),v(this,"_logger"),v(this,"_socket"),v(this,"_socketHandler"),v(this,"transportConnectionStatus"),this._producers=new Map,this._consumers=new Map,this._producerIdToConsumerIdMap=new Map,this.transportConnectionStatus=new Map,this._device=new loe,this._logger=Ai.getLogger("HiveSFUHandler"),this._socket=t,this._socketHandler=new uoe(t)}get socket(){return this._socket}get producers(){return this._producers}get consumers(){return this._consumers}get producerIdToConsumerIdMap(){return this._producerIdToConsumerIdMap}get hiveSocketHandler(){return this._socketHandler}async setupTransports(t){const i=await ui().getICEServers(),r=t.map(n=>{const s=this.transportConnectionStatus.get(n);if(s)return s;switch(n){case"send":{const a=this.createSendTransport({iceServers:i});return this.transportConnectionStatus.set(n,a),a}case"recv":{const a=this.createRecvTransport({iceServers:i});return this.transportConnectionStatus.set(n,a),a}default:return this._logger.warn(`what are you thinking when passing this ${n}?`),Promise.reject(Error("TYPE_OF_TRANSPORT_UNKNOWN"))}});await Promise.all(r).finally(()=>{t.forEach(n=>{this.transportConnectionStatus.delete(n)})})}async stopAllTransports(){var t,i;this._logger.info("closing all the transports"),(t=this._sendTransport)==null||t.close(),(i=this._recvTransport)==null||i.close(),this._sendTransport=void 0,this._recvTransport=void 0}async createSendTransport(t){if(this._sendTransport&&this._sendTransport.connected)return;this._logger.info("sendTransport::initializing_transport");const i=this._device.createSendTransport(t);this._logger.info("sendTransport::initialized_transport"),this.handleTransport(i,!1),this._logger.info("sendTransport::connecting_transport");try{await i.connect()}catch(r){this._logger.error("fail to connect send transport:",i.id,"[Error]:",r,"retrying once."),await i.connect().catch(n=>{this._logger.error("failed to connect send transport after retry:",i.id,"[Error]:",n)})}this._logger.info("sendTransport::connected_transport"),this._sendTransport=i,Y.onSafeInitialization(()=>{Y.configureSendTransport(i)}),Object.assign(window,{sendTransport:i})}async createRecvTransport(t){if(this._recvTransport&&this._recvTransport.connected)return;this._logger.info("recvTransport::initializing_transport");const i=this._device.createRecvTransport({...t,additionalSettings:{rtcAudioJitterBufferMaxPackets:25,rtcAudioJitterBufferFastAccelerate:!0,rtcAudioJitterBufferMinDelayMs:20}});Y.onSafeInitialization(()=>{Y.configureRecvTransport(i)}),this._logger.info("recvTransport::initialized_transport"),this.handleTransport(i,!0),this._logger.info("recvTransport::connecting_transport");try{await i.connect()}catch(r){this._logger.error("fail to connect recv transport:",i.id,"[Error]:",r,"retrying once."),await i.connect().catch(n=>{this._logger.error("failed to connect recv transport after retry:",i.id,"[Error]:",n)})}this._logger.info("recvTransport::connected_transport"),this._recvTransport=i,this.producerIdToConsumerIdMap.clear()}handleTransport(t,i){if(t.on("connect",async({offer:r},n,s)=>{try{const a={consuming:i,description:{sdp:r.sdp,type:r.type,target:i?la.SUBSCRIBER:la.PUBLISHER}},{transportId:o,answer:c}=await this._socketHandler.connectTransport(a);t.setServerId(o),n({answer:c})}catch(a){this._logger.error(`${i?"consumer":"producer"} transport connection error:`,a),s(a)}}),t.on("connectionstatechange",async r=>{switch(this._logger.info(`${i?"consumer":"producer"} transport connectionState:`,r),r){case"failed":case"disconnected":if(t.closed)return;this._logger.info(`${i?"consumer":"producer"} transport disconnected or failed, reconnecting...`),ee.hasFeature(re.ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED)?(P.emit(k.HIVE_TRANSPORT_STATE_CHANGED,{state:"reconnecting",transportDirection:i?"recv":"send"}),this.emit("reconnect_transport",t)):P.emit(k.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break;case"new":case"closed":break;default:P.emit(k.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break}}),t.on("icecandidate",async r=>{this._logger.debug("sending icecandidate:",r.toJSON())}),t.on("datachannel:events",async(r,n)=>{this._logger.debug("got data channel message on event:",n);try{switch(n.type){case"offer":{const s={sdp:n.payload.sdp,type:"offer"};let a;try{const o=await t.setRemoteOffer(s);a={type:"answer",payload:{type:o.type,sdp:o.sdp}}}catch(o){this._logger.error("datachannel:events::Error:",o),a={type:"error",payload:{error:o.message}}}this._logger.debug("datachannel answer:",a),r.send(JSON.stringify(a));break}case"consumer_toggle":{const{mute:s,trackId:a}=n.payload;this._logger.info("consumer toggled for",a,"muted:",s);const o=this.consumers.get(a);if(!o){this._logger.warn("consumer with id",a," not found");return}o.paused!==s&&(this._logger.debug("consumer state is not same",{consumerPaused:o.paused,mute:s}),s?(o.pause(),P.emit(k.CONSUMER_PAUSED,{id:o.id})):(o.resume(),P.emit(k.CONSUMER_RESUMED,{id:o.id})));break}default:this._logger.warn("unknown event received from hive node, event:",n.type);break}}catch{this._logger.error("Unable to handle the incoming datachannel message on",r.label)}}),t.on("negotiate",async({description:r},n,s)=>{try{const a={sdp:r==null?void 0:r.sdp,type:r==null?void 0:r.type},o=await this.negotiate(t,a);n({answer:o})}catch(a){this._logger.error("negotiate error:",a),s(a)}}),t.on("close",()=>{if(this._logger.info(`${i?"consumer":"producer"} transport closed`,t.id),i){this._recvTransport=void 0;return}this._sendTransport=void 0}),!i){t.on("produce",async({offer:r,kind:n,paused:s,appData:a},o,c)=>{var d;const l=be(r.sdp).media.filter(g=>n==="video"?g.type==="video":g.type==="audio").at(-1).msid,u={description:{sdp:r.sdp,type:r.type,target:la.PUBLISHER},paused:s,kind:n,msid:l,screenShare:(d=a.screenShare)!=null?d:!1};try{const{answer:g,producerId:m}=await this._socketHandler.produce(u);o({answer:g,producerId:m})}catch(g){this._logger.error("create producer error:",g),c(g)}});return}t.on("datachannel:negotiation",async(r,n)=>{try{this._logger.info("datachannel message recieved:",r.label,n);const s={sdp:n,type:"offer"},a=await t.setRemoteOffer(s);this._logger.info("datachannel answer:",a),r.send(a.sdp)}catch(s){this._logger.error("datachannel:negotiation::Error:",s)}}),t.on("consumePeer",async({producingPeerId:r},n,s)=>{this._logger.info("consumePeer:",r);const a={producingPeerId:r};try{const o=await this._socketHandler.consume(a);this._logger.debug(`consumePeer response for ${r}:`,{consumerStateMap:o});const c=new Map;Object.entries(o).forEach(([d,l])=>{var u,g,m;c.set(d,{consumerId:l.consumerId,trackId:(u=l.producerTrack)==null?void 0:u.trackId,streamId:l.producerTrack.streamId,kind:l.producerState.kind===dn.VIDEO?"video":"audio",screenShare:(g=l.producerState)==null?void 0:g.screenShare,paused:(m=l.producerState)==null?void 0:m.pause})}),n({consumersMap:c})}catch(o){this._logger.error("consumePeer error:",o),s(o)}}),t.on("consume",async({producerId:r,producingPeerId:n},s,a)=>{var o,c,d,l;const u={producingPeerId:n,producerId:r};try{const g=(await this._socketHandler.consume(u))[r];this._logger.info("consumer create response:",{consumerState:g,paused:(o=g.producerState)==null?void 0:o.pause}),s({consumerId:g.consumerId,screenShare:(c=g.producerState)==null?void 0:c.screenShare,trackId:(d=g.producerTrack)==null?void 0:d.trackId,streamId:g.producerTrack.streamId,kind:g.producerState.kind===dn.VIDEO?"video":"audio",paused:(l=g.producerState)==null?void 0:l.pause})}catch(g){this._logger.error("error during consuming on server:",g),a(g)}})}async createProducer(t,i,r){if(this._sendTransport===void 0||this._sendTransport.closed)return;const n=await this._sendTransport.produce(i);n.on("close",async(s,a,o)=>{this._logger.info("producer id:",n.id,"closed with reason:",o);const c={producerId:n.id,description:{sdp:s.sdp,type:s.type,target:la.PUBLISHER}};try{const d=await this._socketHandler.closeProducer(c);this._logger.info("response",d);const l={sdp:d==null?void 0:d.sdp,type:d==null?void 0:d.type};a(l)}catch(d){this._logger.error("producer close error:",d)}this._producers.delete(t),r(),t===ne.SCREENSHARE_VIDEO&&this._switchWebcamLayers(3)}),n.on("trackended",()=>{b.info("producer::trackended",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:n==null?void 0:n.appData}}),[ne.MIC,ne.WEBCAM].includes(t)||r()}),this._producers.set(t,n),this._producers.has(ne.SCREENSHARE_VIDEO)&&this._switchWebcamLayers(0)}async _switchWebcamLayers(t){const i=this._producers.get(ne.WEBCAM);if(i)try{this._logger.debug("switching layer of webcam producer to:",t),await i.setMaxSpatialLayer(t)}catch(r){this._logger.error("failed to switch spatial layer",r)}}_initConsumer(t){t&&(t.observer.on("close",async i=>{this._logger.debug("consumer closed",i),this._consumers.delete(t.id),P.emit(k.CONSUMER_CLOSED,{id:t.id})}),this._consumers.set(t.id,t),this.producerIdToConsumerIdMap.set(t.producerId,t.id),P.emit(k.NEW_CONSUMER,{id:t.id}))}async consumePeer(t){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)throw Error("Receiving transport not connected");try{const i=await this._recvTransport.consumePeer(t),r=[];i.forEach(n=>{n.status==="rejected"?r.push(n.reason):this._initConsumer(n.value)}),this._recvTransport.retryFailedConsumerCreationTasks(r).then(n=>{n.forEach(s=>{s.status==="rejected"?this._logger.error("consumer creation failed 2nd time, this should never happen second time.",s.reason):this._initConsumer(s.value)})})}catch(i){throw this._logger.error("got error in consumePeer",i),i}}async createConsumer(t){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)return;const{producerId:i,producingPeerId:r,appData:n}=t;if(this.getProducer(i)){this._logger.warn("why are you creating a consumer for local producer?");return}try{const s=await this._recvTransport.consume({producerId:i,producingPeerId:r,appData:n});this._initConsumer(s)}catch(s){coe(s)&&this._recvTransport.retryFailedConsumerCreationTasks([s]).then(([a])=>{a.status==="fulfilled"?this._initConsumer(a.value):this._logger.error("failed to complete consumer creation task again.","this should not happen",a.reason)})}Object.assign(window,{consumers:this._consumers})}async pauseProducer(t){const i=this._producers.get(t);if(!i){this._logger.warn("producer type:",t,"not found");return}i.pause(),this._logger.info(t,"producer id:",i.id,"paused")}async resumeProducer(t){const i=this._producers.get(t);if(!i){this._logger.warn("producer type:",t,"not found");return}i.resume(),this._logger.info(t,"producer id:",i.id,"resumed")}async replaceTrack(t,i){const r=this._producers.get(t);if(!r){this._logger.warn("producer type:",t,"not found");return}await r.replaceTrack({track:i}),this._logger.info("track replaced with id:",i.id,"on producer:",t)}async removeProducer(t,i){const r=this._producers.get(t);if(!r){this._logger.warn("producer type:",t,"not found");return}i&&r.track.stop(),r.close()}async pauseConsumer(t){if(!this._consumers.get(t)){this._logger.warn("consumer id:",t,"not found");return}this.toggleConsumerOverDC(t,!0)}async pauseConsumerOverSocket(t){try{const i={consumerId:t.id,pause:!0};await this.socket.sendMessagePromise(Fe.toggleConsumer,Gk.toBinary(i)),t.pause(),P.emit(k.CONSUMER_PAUSED,{id:t.id}),this._logger.info("consumer:",t.id,"paused")}catch(i){this._logger.error("error on pausing consumer",i)}}async toggleConsumerOverDC(t,i){const r={type:"consumer_toggle",payload:{consumerId:t,mute:i}},n=this._recvTransport.getDatachannel("events");if(!n){this._logger.warn("events datachannel not found");return}n.send(JSON.stringify(r))}async resumeConsumer(t){const i=this._consumers.get(t);if(!i){this._logger.warn("consumer id:",t,"not found");return}if(!i.paused){this._logger.warn("consumer is not paused so not resuming",t);return}try{const r={consumerId:t,pause:!1};await this.socket.sendMessagePromise(Fe.toggleConsumer,Gk.toBinary(r)),i.resume(),P.emit(k.CONSUMER_RESUMED,{id:i.id}),this._logger.info("consumer:",t,"resumed")}catch(r){this._logger.error("error on resuming consumer",r)}}async closeConsumer(t,i){return this.closeConsumers([t],i)}async closeConsumers(t,i=!1){this._logger.info("Closing consumers:",t,"with force:",i);let r=!0;const n=t.filter(o=>this._consumers.get(o)?!0:(this._logger.warn("consumer id:",o,"not found"),!1)),s={consumerIds:n},a=async()=>{var o;return(o=this._recvTransport)==null?void 0:o.awaitQueue.push(async()=>{await this._socketHandler.closeConsumer(s)}).catch(c=>{this._logger.warn("error on closing consumer:",c),r=i})};i?a():await a(),r&&n.forEach(o=>{const c=this.consumers.get(o);this.producerIdToConsumerIdMap.delete(c.producerId),c.close(i?"manually closed":void 0)})}async cleanupConsumers(t){const i=[];this._consumers.forEach(r=>{t?r.peerId===t&&i.push(r.id):i.push(r.id)}),this.closeConsumers(i,!0)}async stopAllProducers(){this._logger.info("stopping all available producers"),this._producers.forEach((t,i)=>{this._logger.debug("closing producer type",i),t.close()})}getProducer(t){return[...this.producers.values()].filter(i=>i.id===t).at(0)}async negotiate(t,i){this._logger.info("setting remote offer :",i,"on transport",t.serverId);const r=await t.setRemoteOffer(i),n={transportId:t.serverId,description:{sdp:r.sdp,type:r.type,target:la.SUBSCRIBER}};return this._logger.info("sending renegotiate request",n),await this.socket.sendMessagePromise(Fe.renegotiateSessionDescription,Zte.toBinary(n)),this._logger.info("renegotiation done",t.serverId),r}}var hoe=Object.defineProperty,goe=Object.getOwnPropertyDescriptor,Ue=(e,t,i,r)=>{for(var n=r>1?void 0:r?goe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&hoe(t,i,n),n},Ft,Ge,_l,Ja,nP;const wM=(nP=class extends bM{constructor(e){super(),I(this,Ft,void 0),I(this,Ge,void 0),I(this,_l,void 0),I(this,Ja,void 0),v(this,"legacyMode"),v(this,"roomNodeUrl"),v(this,"peerDisplayName"),v(this,"activatedProducingPeerIds"),v(this,"logger");const{roomName:t,peerId:i,authToken:r,legacyMode:n,socketClient:s,meetingTitle:a}=e;this.roomName=t,this.peerId=i,this.authToken=r,this.legacyMode=n,this.roomJoined=!1,this.meetingTitle=a,A(this,Ja,!1),A(this,Ft,s),A(this,Ge,new poe(s)),this.maxPreferredStreams=6,this.activatedProducingPeerIds=new Set,this.logger=Ai.getLogger("HiveNodeClient()"),Y.legacySwitch(n),this.handleSocketEvents(),this.handleSFUEvents(),A(this,_l,()=>{this.logger.info("noop reconnection handler")})}static async init(e){const{legacyMode:t=!0,roomName:i,peerId:r,authToken:n,meetingTitle:s,socket:a}=e,o=new wM({legacyMode:t,authToken:n,socketClient:a,peerId:r,roomName:i,meetingTitle:s});return a.onStateEvent("disconnected",c=>{var d;o.isDisconnected=!0,(d=h(o,Ge))==null||d.cleanupConsumers(),P.emit(k.ROOM_NODE_DISCONNECTED,c),o.roomJoined=!1,o.activatedProducingPeerIds=new Set,b.info("HIVE_NODE_DISCONNECTED")}),a.onStateEvent("reconnected",async()=>{var c,d;b.info("HIVE_NODE_RECONNECTED"),await((c=h(o,Ge))==null?void 0:c.cleanupConsumers()),h(d=o,_l).call(d)}),a.onStateEvent("connected",async c=>{P.emit(k.ROOM_NODE_CONNECTED,c),b.info("HIVE_NODE_CONNECTED")}),o}get sfuHandler(){return h(this,Ge)}set onSocketReconnection(e){A(this,_l,e)}async reconnectTransport(e){if(this.logger.info("Room joining state",h(this,Ja)),!(!e||h(this,Ja))){if(e.close(),e.direction==="send"){await this.sfuHandler.setupTransports(["send"]),this.logger.info("send transport reconected!"),P.emit(k.RESET_PRODUCER_STATE);return}this.sfuHandler.cleanupConsumers(),await this.sfuHandler.setupTransports(["recv"]),this.logger.info("recv transport reconnected!"),this.activatedProducingPeerIds=new Set,P.emit(k.REFRESH_GRID,!0)}}async setupTransports(){await h(this,Ge).setupTransports(["recv","send"])}async joinRoom(e,t,i,r,n={}){await this.sfuHandler.stopAllTransports(),this.peerDisplayName=e,A(this,Ja,!0);try{return await this.sfuHandler.hiveSocketHandler.joinRoom(i,e),await this.setupTransports(),ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{var s;const a=await ui().getUserDetails(),o=Ee.isV2AuthToken?a.participant:a,c={userId:(s=o.id)!=null?s:o.participant.id,peerId:this.peerId,displayName:e,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Oe.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:gm,sdkVersion:Md,metaData:{},permissions:{}};Y.roomJoined(c),n!=null&&n.audio?Y.audioOn():Y.audioOff(),n!=null&&n.video?Y.videoOn():Y.videoOff()}),{roomJoined:await this.completeJoinRoom()}}catch(s){return this.logger.error("error on sending join room request",s),{roomJoined:!1}}}async completeJoinRoom(){try{const{maxPreferredStreams:e,participants:t,roomState:i,selectedPeers:r}=await this.sfuHandler.hiveSocketHandler.notifySelfJoinComplete();this.logger.debug("peerJoinCompleteResponse",{participants:t,roomState:i,selectedPeers:r}),this.roomUUID=i.roomUuid,this.maxPreferredStreams=e;const n=t.map(c=>{const d=c.producerStates,l={id:c.peerId,isHost:!1,displayName:c.displayName,flags:{},userId:c.userId,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};return d.forEach(u=>{u.kind===dn.AUDIO?l.audioMuted=u.pause:l.videoEnabled=!u.pause,l.producers.push({producerId:u.producerId,kind:u.kind===dn.AUDIO?"audio":"video",pause:u.pause,screenShare:u.screenShare})}),l}),{audioPeers:s,compulsoryPeers:a}=r!=null?r:{},o=n.filter(c=>c.id!==this.peerId);return A(this,Ja,!1),this.roomJoined=!0,b.info("HiveNodeClient::joinRoom::pre_emitasync_room_joined"),await P.emitAsync(k.ROOM_JOINED,{peers:o}),i.isRecording&&P.emit(k.HIVE_RECORDING_STARTED,i.recorderParticipantId),b.info("HiveNodeClient::joinRoom::post_emitasync_room_joined"),P.emit(k.SELF_ROOM_JOINED),P.emit(k.SELECTED_PEERS,{peerIds:s!=null?s:[],compulsoryPeers:a}),P.emit(k.REFRESH_GRID),!0}catch(e){return this.logger.error("error on completing join room:",e),!1}}async leaveRoom(){await h(this,Ge).stopAllTransports();const e={closeRoom:!1};h(this,Ft).sendMessagePromise(Fe.leaveRoom,mie.toBinary(e)).then(t=>{var i;(i=ere.fromBinary(t.payload))!=null&&i.closed||this.logger.warn("weird state on peer closed and should not happen")}).catch(t=>{this.logger.error("error on sending leave room request",t)}),Y.callEnded(),E.destruct()}getConsumers(){return h(this,Ge).consumers}async activatePeers(e){const t=e.map(({peerId:i,producers:r,force:n})=>{if(r.length===0)return Promise.resolve();if(n)return this.consumePeer(i,n);const s=[];return r.every(a=>{const o=this.sfuHandler.producerIdToConsumerIdMap.get(a.producerId);if(!o)return!1;const c=this.sfuHandler.consumers.get(o);return c&&!a.pause&&c.paused&&s.push(o),!0})?s.length>0?this.resumeConsumers(s):Promise.resolve():this.consumePeer(i)});await Promise.all(t)}async deactivatePeers(e){if(this.logger.info("deactivating producers",e),e.producers.some(t=>t.screenShare&&t.kind==="video")){this.logger.debug("peer is screensharing can't deactivate");return}e.producers.forEach(({producerId:t,kind:i})=>{if(i==="audio"){this.logger.debug("we don't want to deactive audio consumers");return}const r=this.sfuHandler.producerIdToConsumerIdMap.get(t);if(!r){this.logger.warn("consumer not found in deactivate producers:",t);return}this.sfuHandler.closeConsumer(r)}),this.activatedProducingPeerIds.delete(e.peerId)}async createConsumer({producerId:e,producingPeerId:t,screenShare:i}){return this.sfuHandler.createConsumer({producerId:e,producingPeerId:t,appData:{screenShare:i}})}async pauseConsumers(e){e.forEach(t=>{this.sfuHandler.pauseConsumer(t)})}async resumeConsumers(e){e.forEach(t=>{this.sfuHandler.resumeConsumer(t)})}async closeConsumers(e){const t=[...this.getConsumers().values()].filter(i=>e.includes(i.peerId)).map(i=>i.id);return e.forEach(i=>{this.activatedProducingPeerIds.delete(i)}),this.sfuHandler.closeConsumers(t)}async consumePeer(e,t){if(this.logger.info("current activated Peer ids",[...this.activatedProducingPeerIds.values()],"forced?:",t),!this.activatedProducingPeerIds.has(e)||t)try{await h(this,Ge).consumePeer(e),this.activatedProducingPeerIds.add(e)}catch(i){this.logger.error("consumePeer failed in HiveNodeClient.ts",i)}else this.logger.info("not creating consumer for this peerId",e)}async shareWebcam(e){if(e===void 0)return;if(h(this,Ge).producers.has(ne.WEBCAM)){const r=h(this,Ge).producers.get(ne.WEBCAM);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeWebcam();return}await h(this,Ge).removeProducer(r.id)}const t={track:e,codecOptions:{name:"VP8"},appData:{screenShare:!1},stopTracks:!1};if(ee.hasFeature(re.ENABLE_HIVE_SIMULCAST)){let r=e.getConstraints().width;r in Vk||(r=320),t.encodings=Vk[r]}const i=()=>{this.disableWebcam()};await h(this,Ge).createProducer(ne.WEBCAM,t,i)}async shareScreen(e){const{video:t,audio:i}=e;if(t===void 0)return;const r={track:t,codecOptions:{name:"VP8"},appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},stopTracks:!1};let n=()=>{this.disableScreenShare()};if(Y.screenShareRequested(),await h(this,Ge).createProducer(ne.SCREENSHARE_VIDEO,r,n),i){const s={track:i,codecOptions:{name:"opus"},appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},stopTracks:!1};n=()=>{},await h(this,Ge).createProducer(ne.SCREENSHARE_AUDIO,s,n)}}async shareMic(e){if(e===void 0)return;if(h(this,Ge).producers.has(ne.MIC)){const r=h(this,Ge).producers.get(ne.MIC);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeMic();return}await h(this,Ge).removeProducer(ne.MIC,!1)}const t={track:e,encodings:[{priority:"high"}],codecOptions:{name:"opus"},stopTracks:!1},i=()=>{this.disableMic()};await h(this,Ge).createProducer(ne.MIC,t,i)}pauseMic(){const e=h(this,Ge).producers.get(ne.MIC);if(!e){b.error("pauseMic::could_not_find_mic_producer");return}if(e.paused){b.info("pauseMic::mic_producer_already_paused");return}e.pause();const t={producerId:e.id,pause:!0};h(this,Ft).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async pauseWebcam(){const e=h(this,Ge).producers.get(ne.WEBCAM);if(!e){b.error("pauseWebcam::could_not_find_webcam_producer");return}e.pause();const t={producerId:e.id,pause:!0};h(this,Ft).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async resumeMic(){const e=h(this,Ge).producers.get(ne.MIC);if(!e){b.error("resumeMic::could_not_find_mic_producer");return}if(!e.pause){b.info("resumeMic::mic_producer_already_resumed");return}e.resume();const t={producerId:e.id,pause:!1};h(this,Ft).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async resumeWebcam(){const e=h(this,Ge).producers.get(ne.WEBCAM);if(!e){b.error("resumeWebcam::could_not_find_webcam_producer");return}e.resume();const t={producerId:e.id,pause:!1};h(this,Ft).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async disableWebcam(){await h(this,Ge).removeProducer(ne.WEBCAM)}async disableMic(){await h(this,Ge).removeProducer(ne.MIC)}async disableScreenShare(){b.info("screen_sharing_stopped"),await h(this,Ge).removeProducer(ne.SCREENSHARE_VIDEO),await h(this,Ge).removeProducer(ne.SCREENSHARE_AUDIO)}async muteSelf(){this.pauseMic()}async unmuteSelf(){await this.resumeMic()}async resetVideoProducers(e,t){e&&(await h(this,Ge).removeProducer(ne.WEBCAM,!1),this.shareWebcam(e)),t&&(await h(this,Ge).removeProducer(ne.SCREENSHARE_VIDEO,!1),this.shareScreen({video:t}))}async getPolls(){return{payload:{polls:{}}}}async changeDisplayName(e,t){const i={displayName:e,participantId:t!=null?t:this.peerId};if(!await this.sfuHandler.hiveSocketHandler.changeDisplayName(i))throw new Error("failed to change display name!")}async kick(e){const t={participantId:e};if(!await this.sfuHandler.hiveSocketHandler.kickPeer(t))throw new Error("failed to kickout the participant!")}async kickAll(){if(!await this.sfuHandler.hiveSocketHandler.kickAll())throw new Error("failed to kickout all participant!")}async muteAll(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("audio"))throw new Error("failed to mute all participant")}async muteAllVideo(){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("video"))throw new Error("failed to mute all video participant")}async mutePeer(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(e,"audio"))throw new Error("failed to mute given participant")}async mutePeerVideo(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(e,"video"))throw new Error("failed to mute video of given participant")}async pinPeer(e){const t={participantId:e!=null?e:""};try{await h(this,Ft).sendMessagePromise(Fe.globalPinPeer,Eie.toBinary(t))}catch(i){this.logger.error(`Error in pinning peer: ${i}`)}}async handleSocketEvents(){h(this,Ft).on(Fe.peerJoinedBroadcast,({id:e,payload:t})=>{if(this.roomJoined){this.logger.debug("got peer joined with id",e);try{const{participant:{peerId:i,displayName:r,producerStates:n,userId:s}}=Pre.fromBinary(t);if(i===this.peerId)return;this.logger.info("peer-joined",{peerId:i,displayName:r,producerStates:n});const a={id:i,isHost:!1,displayName:r,flags:{},userId:s,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};n.forEach(o=>{o.kind===dn.AUDIO?a.audioMuted=o.pause:a.videoEnabled=!o.pause,a.producers.push({producerId:o.producerId,kind:o.kind===dn.AUDIO?"audio":"video",pause:o.pause,screenShare:o.screenShare})}),P.emit(k.PEER_JOINED,a),P.emit(k.REFRESH_GRID)}catch(i){this.logger.error("error in peer-joined-broadcast",i)}}}),h(this,Ft).on(Fe.peerProducerCreateBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:i}=Rre.fromBinary(e);if(t===this.peerId)return;this.logger.info("producer created broadcast:",t,"producer state",i),P.emit(k.NEW_PRODUCER,{peerId:t,producer:{producerId:i.producerId,kind:i.kind===dn.AUDIO?"audio":"video",pause:i.pause,screenShare:i.screenShare}})}catch(t){this.logger.error("error in peer-producer-create-broadcast",t)}}),h(this,Ft).on(Fe.peerProducerToggleBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:{kind:i,pause:r,producerId:n}}=Ire.fromBinary(e),s=i===dn.AUDIO?"audio":"video";if(this.logger.info("producer toggle broadcast:",t,"producerId",n,"kind",s,"paused",r),t===this.peerId&&r){P.emit(s==="audio"?k.MUTE_ALL:k.MUTE_ALL_VIDEO);return}P.emit(k.PRODUCER_TOGGLE,{peerId:t,producerId:n,paused:r,kind:s}),[...this.getConsumers().values()].filter(a=>a.producerId===n).forEach(a=>{a.paused!==r&&(this.logger.debug("consumer state mismatched for",a.id,". updating consumer pause state",a.paused,"to",r),r?(a.pause(),P.emit(k.CONSUMER_PAUSED,{id:a.id})):(a.resume(),P.emit(k.CONSUMER_RESUMED,{id:a.id})))})}catch(t){this.logger.error("error in producer toggle broadcast handler",t)}}),h(this,Ft).on(Fe.selectedPeer,({payload:e})=>{if(this.roomJoined)try{const{audioPeers:t,compulsoryPeers:i}=mM.fromBinary(e);this.logger.info("selected peers:",t,i),P.emit(k.SELECTED_PEERS,{peerIds:i.concat(t)})}catch(t){this.logger.error("error in selected-peer",t)}}),h(this,Ft).on(Fe.selectedPeerDiff,({payload:e})=>{if(this.roomJoined)try{const{entries:t}=Kie.fromBinary(e);this.logger.debug("selected peers diff:",t);const i=t.map(r=>({peerId:r.peerId,priority:r.priority}));P.emit(k.SELECTED_PEERS_DIFF,{entries:i})}catch(t){this.logger.error("error in selected-peer-diff",t)}}),h(this,Ft).on(Fe.peerLeaveBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t}=Dre.fromBinary(e);if(t===this.peerId){this.logger.warn("peer got kicked out of the room"),P.emit(k.KICKED);return}this.logger.info("peer left broadcast:",t),this.sfuHandler.cleanupConsumers(t),P.emit(k.PEER_CLOSED,{id:t})}catch(t){this.logger.error("error in peer left broadcast",t)}}),h(this,Ft).on(Fe.peerProducerCloseBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:{producerId:i}}=Ore.fromBinary(e);if(t===this.peerId)return;this.logger.info("producer closed broadcast:",t),P.emit(k.PRODUCER_CLOSED,{peerId:t,producerId:i});const r=this.sfuHandler.producerIdToConsumerIdMap.get(i);if(!r){this.logger.warn("no consumer found for producer",i);return}this.logger.info("closing consumer",r,"producer id ",i),this.sfuHandler.closeConsumer(r).then(()=>{this.logger.info("closed consumer",r),this.sfuHandler.producerIdToConsumerIdMap.delete(i),P.emit(k.CONSUMER_CLOSED,{id:r})}).catch(n=>{this.logger.error("error closing consumer",n)})}catch(t){this.logger.error("error on producer close broadcast",t)}}),h(this,Ft).on(Fe.globalPeerPinBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=Nre.fromBinary(e);this.logger.info("pinning peerId: ",i),t=i.participantId}P.emit(k.PEER_PINNED,{peerId:t})}catch(t){this.logger.error("error on global peer pin broadcast",t)}}),h(this,Ft).on(Fe.recordingStartedBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=jre.fromBinary(e);this.logger.info("recording started. peerId: ",i),t=i.participantId}P.emit(k.HIVE_RECORDING_STARTED,t)}catch(t){this.logger.error("error on recording started broadcast",t)}}),h(this,Ft).on(Fe.recordingStoppedBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=Vre.fromBinary(e);this.logger.info("recording stopped. peerId: ",i),t=i.participantId}P.emit(k.HIVE_RECORDING_STOPPED,t)}catch(t){this.logger.error("error on recording started broadcast",t)}}),h(this,Ft).on(Fe.peerDisplayNameEditBroadcast,({payload:e})=>{if(this.roomJoined)try{const t=zre.fromBinary(e);this.logger.debug("peer display name changed to:",t.displayName),P.emit(k.PEER_DISPLAY_NAME_CHANGED,t.participantId)}catch(t){this.logger.error("failed to handle peerDisplayNameEditBroadcast:",t)}})}handleSFUEvents(){h(this,Ge).on("reconnect_transport",async e=>{try{await this.reconnectTransport(e),this.logger.info("transport reconnected [id:%s]",e.id)}catch(t){this.logger.error("error on reconnection transports",t)}})}},Ft=new WeakMap,Ge=new WeakMap,_l=new WeakMap,Ja=new WeakMap,nP);let ve=wM;Ue([E.trace("HiveNodeClient.reconnect")],ve.prototype,"reconnectTransport",1);Ue([E.trace("HiveNodeClient.setupTransport")],ve.prototype,"setupTransports",1);Ue([E.trace("HiveNodeClient.joinRoom")],ve.prototype,"joinRoom",1);Ue([E.trace("HiveNodeClient.completeJoinRoom")],ve.prototype,"completeJoinRoom",1);Ue([E.trace("HiveNodeClient.leaveRoom")],ve.prototype,"leaveRoom",1);Ue([E.trace("HiveNodeClient.activatePeers")],ve.prototype,"activatePeers",1);Ue([E.trace("HiveNodeClient.deactivatePeers")],ve.prototype,"deactivatePeers",1);Ue([E.trace("HiveNodeClient.createConsumer")],ve.prototype,"createConsumer",1);Ue([E.trace("HiveNodeClient.pauseConsumers")],ve.prototype,"pauseConsumers",1);Ue([E.trace("HiveNodeClient.resumeConsumers")],ve.prototype,"resumeConsumers",1);Ue([E.trace("HiveNodeClient.closeConsumers")],ve.prototype,"closeConsumers",1);Ue([E.trace("HiveNodeClient.consumePeer")],ve.prototype,"consumePeer",1);Ue([E.trace("HiveNodeClient.shareWebcam")],ve.prototype,"shareWebcam",1);Ue([E.trace("HiveNodeClient.shareScreen")],ve.prototype,"shareScreen",1);Ue([E.trace("HiveNodeClient.shareMic")],ve.prototype,"shareMic",1);Ue([E.trace("HiveNodeClient.pauseMic")],ve.prototype,"pauseMic",1);Ue([E.trace("HiveNodeClient.pauseWebcam")],ve.prototype,"pauseWebcam",1);Ue([E.trace("HiveNodeClient.resumeMic")],ve.prototype,"resumeMic",1);Ue([E.trace("HiveNodeClient.resumeWebcam")],ve.prototype,"resumeWebcam",1);Ue([E.trace("HiveNodeClient.disableWebcam")],ve.prototype,"disableWebcam",1);Ue([E.trace("HiveClient.disableMic")],ve.prototype,"disableMic",1);Ue([E.trace("HiveClient.disableScreenShare")],ve.prototype,"disableScreenShare",1);Ue([E.trace("HiveNodeClient.muteSelf")],ve.prototype,"muteSelf",1);Ue([E.trace("HiveNodeClient.unmuteSelf")],ve.prototype,"unmuteSelf",1);Ue([E.trace("HiveNodeClient.resetVideoProducers")],ve.prototype,"resetVideoProducers",1);Ue([E.trace("HiveNodeClient.getPolls")],ve.prototype,"getPolls",1);Ue([E.trace("HiveNodeClient.changeDisplayName")],ve.prototype,"changeDisplayName",1);Ue([E.trace("HiveNodeClient.kickPeer")],ve.prototype,"kick",1);Ue([E.trace("HiveNodeClient.kickAllPeers")],ve.prototype,"kickAll",1);Ue([E.trace("HiveNodeClient.muteAll")],ve.prototype,"muteAll",1);Ue([E.trace("HiveNodeClient.muteAllVideo")],ve.prototype,"muteAllVideo",1);Ue([E.trace("HiveNodeClient.mute")],ve.prototype,"mutePeer",1);Ue([E.trace("HiveNodeClient.muteVideo")],ve.prototype,"mutePeerVideo",1);Ue([E.trace("HiveNodeClient.pinPeer")],ve.prototype,"pinPeer",1);Ue([E.trace("HiveNodeClient.init")],ve,"init",1);var fs=(e=>(e.SOCKET_CONNECTED="SOCKET_CONNECTED",e.SOCKET_DISCONNECTED="SOCKET_DISCONNECTED",e.SOCKET_CONNECTION_ERROR="SOCKET_CONNECTION_ERROR",e.SOCKET_MESSAGE="SOCKET_MESSAGE",e))(fs||{}),zl=(e=>(e[e.NOT_STARTED=0]="NOT_STARTED",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.ERRORED=3]="ERRORED",e))(zl||{}),moe=Object.defineProperty,foe=Object.getOwnPropertyDescriptor,kf=(e,t,i,r)=>{for(var n=r>1?void 0:r?foe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&moe(t,i,n),n};const voe="event://server-simple-message",yoe="event://send-message";class Tp extends zi{constructor(t){super(),v(this,"socket"),v(this,"socketState"),v(this,"callbackHandler",null),this.socketState=zl.NOT_STARTED,t.callbackHandler&&(this.callbackHandler=t.callbackHandler)}connect(t){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=Bh(t,{closeOnBeforeunload:!1}),this.setupSocket()}disconnect(){this.socket.disconnect()}reconnect(){this.socket.connect()}setupSocket(){this.socket.on("disconnect",t=>{this.socketState=zl.DISCONNECTED,b.warn("SocketClient::socket_disconnected",{error:{reason:t}}),this.emit(fs.SOCKET_DISCONNECTED,{reason:t})}),this.socket.on("connect_error",t=>{this.socketState=zl.ERRORED,ee.hasFeature(re.SOCKET_POLLING)&&(this.socket.io.opts.transports=["polling","websocket"]),b.error("SocketClient::socket_connection_errored",{error:t}),this.emit(fs.SOCKET_CONNECTION_ERROR,{err:t})}),this.socket.on("connect",()=>{this.socketState=zl.CONNECTED,b.info("SocketClient::socket_connected"),this.emit(fs.SOCKET_CONNECTED)}),this.socket.on(voe,async(t,i)=>{const r=JSON.parse(t);if((!E.logExclusionList.includes(r==null?void 0:r.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&b.info(`SocketClient::SIMPLE_SERVER_MESSAGE_EVENT::${r==null?void 0:r.type}`),i){let n="OK";this.callbackHandler&&(n=await this.callbackHandler(r)),i(n)}else this.emit(fs.SOCKET_MESSAGE,r);Object.values(k).find(n=>n===r.type)&&P.emit(r.type,r.payload)})}async sendMessage(t){return(!E.logExclusionList.includes(t==null?void 0:t.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&b.info(`SocketClient::sendMessage::${t==null?void 0:t.type}`),Object.assign(t,{metadata:t.metadata||{}}),E.injectContext(t.metadata),new Promise(i=>{this.socket.emit(yoe,JSON.stringify(t),r=>{if(!r){i(void 0);return}const n=JSON.parse(r);i(n)})})}}kf([E.trace("SocketClient.connect")],Tp.prototype,"connect",1);kf([E.trace("SocketClient.disconnect")],Tp.prototype,"disconnect",1);kf([E.trace("SocketClient.reconnect")],Tp.prototype,"reconnect",1);kf([E.trace("SocketClient.setupSocket")],Tp.prototype,"setupSocket",1);var C1,SM,R1,EM,sh,py;const x1=class{constructor(e=1e3){I(this,C1),I(this,R1),v(this,"sendTransport"),v(this,"recvTransport"),v(this,"collectStpStats"),v(this,"collectRtpStats"),v(this,"pingInterval"),this.pingInterval=e}initSendTransport(e){this.sendTransport=e,P.emit(k.SEND_TRANSPORT_CREATED)}initRecvTransport(e){this.recvTransport=e,P.emit(k.RECV_TRANSPORT_CREATED)}collectSendTransportStats(){return!this.sendTransport||this.collectStpStats?!1:(this.collectStpStats=setInterval(Nt(this,C1,SM).bind(this),this.pingInterval),!0)}collectRecvTransportStats(){return!this.recvTransport||this.collectRtpStats?!1:(this.collectRtpStats=setInterval(Nt(this,R1,EM).bind(this),this.pingInterval),!0)}stopStatsCollection(e){return e==="send"?(clearInterval(this.collectStpStats),this.collectStpStats=void 0,!0):e==="receive"?(clearInterval(this.collectRtpStats),this.collectRtpStats=void 0,!0):!1}cleanup(e){this.stopStatsCollection(e),e==="send"?(this.sendTransport=void 0,this.collectStpStats=void 0,P.emit(k.SEND_TRANSPORT_CLOSED)):(this.recvTransport=void 0,this.collectRtpStats=void 0,P.emit(k.RECV_TRANSPORT_CLOSED))}};let TM=x1;C1=new WeakSet,SM=function(){this.sendTransport||this.stopStatsCollection("send"),this.sendTransport.getStats().then(e=>{var t;return Nt(t=x1,sh,py).call(t,e,"send")})},R1=new WeakSet,EM=function(){this.recvTransport||this.stopStatsCollection("receive"),this.recvTransport.getStats().then(e=>{var t;return Nt(t=x1,sh,py).call(t,e,"receive")})},sh=new WeakSet,py=function(e,t){e.forEach(i=>{i.type==="candidate-pair"&&P.emit(k.CANDIDATE_PEER_UPDATE,{...i,transport:t}),i.type==="inbound-rtp"&&P.emit(k.INBOUND_RTP_UPDATE,{...i,transport:t}),i.type==="outbound-rtp"&&P.emit(k.OUTBOUND_RTP_UPDATE,{...i,transport:t})})},I(TM,sh);const ma=new TM;var _oe=Object.defineProperty,boe=Object.getOwnPropertyDescriptor,sr=(e,t,i,r)=>{for(var n=r>1?void 0:r?boe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&_oe(t,i,n),n};class Gi extends zi{constructor(t,i){super(),v(this,"device"),v(this,"sendTransport"),v(this,"recvTransport"),v(this,"sendTransportIceStateDisconnectTime"),v(this,"recvTransportIceStateDisconnectTime"),v(this,"producerCreationStatus"),v(this,"consumers"),v(this,"producers"),v(this,"socketClient"),v(this,"iceRestartInProgress"),this.producers=new Map,this.consumers=new Map,this.producerCreationStatus=new Map,this.iceRestartInProgress={sendTransport:!1,recvTransport:!1},i!==void 0?this.device=i:this.device=new eM,this.socketClient=t}async setupTransports(){const t=await ui().getICEServers();await this.loadRouter(),await Promise.all([this.createRecvTransport(t),this.createSendTransport(t)])}async loadRouter(){(this.recvTransport||this.sendTransport)&&await this.stopAllTransports()}getRTPCapabilities(){return this.device.rtpCapabilities}async createRecvTransport(t){if(!this.socketClient)return;const i={forceTcp:!1,producing:!1,consuming:!0},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(b.info("recvTransport::initializing_transport"),this.recvTransport=this.device.createRecvTransport({...r,iceServers:t,proprietaryConstraints:$k}),ma.initRecvTransport(this.recvTransport),b.info("recvTransport::initialized_transport"),Y.onSafeInitialization(()=>{Y.configureRecvTransport(this.recvTransport)}),this.recvTransport.on("connect",async({dtlsParameters:n},s,a)=>{var o,c,d,l;const u=await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:this.recvTransport.id,dtlsParameters:n}});(o=u.payload)!=null&&o.error?(b.error("recvTransport::transport_status",{error:(d=u.payload)==null?void 0:d.error,transport:{id:(l=this==null?void 0:this.recvTransport)==null?void 0:l.id,status:"failed",type:"recv"}}),a(new Error("failed"))):(s(),b.info("recvTransport::transport_status",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"connected",type:"recv"}}))}),ee.hasFeature(re.ENABLE_ICE_STATE_LOGGING)){b.info("enabling_ice_state_logging_for_recv_transport");let n;this.recvTransport.on("connectionstatechange",async s=>{var a,o,c,d,l,u,g,m;switch(b.info("recvTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.recvTransport)==null?void 0:a.id,status:s,type:"recv"}}),s){case"failed":if(P.emit(k.ICE_FAILED,{transport:"recv"}),b.warn("recvTransport::ice_state_failed"),ee.hasFeature(re.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.recvTransport)}catch(f){b.error("recvTransport::ice_restart_failed",{error:f,transport:{id:(o=this==null?void 0:this.recvTransport)==null?void 0:o.id,status:"failed",type:"recv"}})}break;case"disconnected":P.emit(k.ICE_DISCONNECTED,{transport:"recv"}),b.warn("recvTransport::ice_state_disconnected"),this.recvTransportIceStateDisconnectTime&&b.warn("recvTransport::ice_state_disconnected_again",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"disconnected",type:"recv",lastDisconnectedTime:(d=this.recvTransportIceStateDisconnectTime)==null?void 0:d.toISOString(),lastDisconnectedTimeOffset:(l=this.recvTransportIceStateDisconnectTime)==null?void 0:l.getTimezoneOffset(),durationPassed:new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime()}}),this.recvTransportIceStateDisconnectTime=new Date;try{n=ee.getValue(re.ICE_RESTART_ON_DISCONNECTED_STATE),typeof n!="number"&&(n=void 0)}catch{n=void 0}n&&setTimeout(async()=>{var f,w,S,y,_;if(this.recvTransportIceStateDisconnectTime!==void 0){P.emit(k.ICE_RECONNECTING,{transport:"recv"}),b.info("recvTransport::attempting_ice_restart",{transport:{id:(f=this==null?void 0:this.recvTransport)==null?void 0:f.id,type:"recv",status:"reconnecting",lastDisconnectedTime:(w=this.recvTransportIceStateDisconnectTime)==null?void 0:w.toISOString(),lastDisconnectedTimeOffset:(S=this.recvTransportIceStateDisconnectTime)==null?void 0:S.getTimezoneOffset()},iceRestart:{isSendTransport:(y=this==null?void 0:this.iceRestartInProgress)==null?void 0:y.sendTransport,isRecvTransport:(_=this==null?void 0:this.iceRestartInProgress)==null?void 0:_.recvTransport}});try{await this.restartIceTillSuccess(this.recvTransport)}catch(T){b.info("SFUHandler.disconnected.restartIceFailed",{error:T,iceRestart:{status:"failed",isRecvTransport:!0}})}}},n);break;case"connected":P.emit(k.ICE_CONNECTED,{transport:"recv"}),b.info("recvTransport::ice_state_connected",{transport:{id:(u=this==null?void 0:this.recvTransport)==null?void 0:u.id,type:"recv",status:"connected",lastDisconnectedTime:(g=this.recvTransportIceStateDisconnectTime)==null?void 0:g.toISOString(),lastDisconnectedTimeOffset:(m=this.recvTransportIceStateDisconnectTime)==null?void 0:m.getTimezoneOffset(),durationPassed:this.recvTransportIceStateDisconnectTime?new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime():null}}),this.recvTransportIceStateDisconnectTime=void 0;break}})}this.recvTransport.observer.on("close",()=>{this.recvTransport=void 0,ma.cleanup("receive"),b.warn("recvTransport_closed")})}async createSendTransport(t){const i={forceTcp:!1,producing:!0,consuming:!1},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(b.info("sendTransport::initializing_transport"),this.sendTransport=this.device.createSendTransport({...r,iceServers:t,proprietaryConstraints:$k}),ma.initSendTransport(this.sendTransport),b.info("sendTransport::initialized_transport"),Y.onSafeInitialization(()=>{Y.configureSendTransport(this.sendTransport)}),this.sendTransport.on("connect",async({dtlsParameters:n},s,a)=>{var o,c,d,l;(c=(await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:(o=this.sendTransport)==null?void 0:o.id,dtlsParameters:n}})).payload)!=null&&c.error?(b.error("sendTransport::transport_status",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"failed",type:"send"}}),a(new Error("failed"))):(b.info("sendTransport::transport_status",{transport:{id:(d=this==null?void 0:this.sendTransport)==null?void 0:d.id,status:"connected",type:"send"}}),s())}),this.sendTransport.on("produce",async({kind:n,rtpParameters:s,appData:a},o,c)=>{var d,l,u,g,m,f;const w=await this.socketClient.sendMessage({type:"produce",payload:{transportId:(d=this.sendTransport)==null?void 0:d.id,kind:n,rtpParameters:s,appData:a}});(l=w.payload)!=null&&l.error?(b.info("sendTransport::producer_status::failed",{producer:{kind:n,appData:a,status:"failed",id:(m=w==null?void 0:w.payload)==null?void 0:m.id}}),c((f=w.payload)==null?void 0:f.error)):(b.info("sendTransport::producer_status::producing",{producer:{kind:n,appData:a,status:"producing",id:(u=w==null?void 0:w.payload)==null?void 0:u.id}}),o({id:(g=w.payload)==null?void 0:g.id}))}),ee.hasFeature(re.ENABLE_ICE_STATE_LOGGING)){b.info("Enabling ice state logging for send transport");let n;this.sendTransport.on("connectionstatechange",async s=>{var a,o,c,d;switch(b.info("sendTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.sendTransport)==null?void 0:a.id,status:s,type:"send"}}),s){case"failed":if(P.emit(k.ICE_FAILED,{transport:"send"}),b.warn("sendTransport::ice_state_failed"),ee.hasFeature(re.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.sendTransport)}catch(l){b.error("sendTransport::ice_restart_failed",{error:l})}break;case"disconnected":P.emit(k.ICE_DISCONNECTED,{transport:"send"}),b.warn("sendTransport::ice_state_disconnected"),this.sendTransportIceStateDisconnectTime&&b.warn("sendTransport::ice_state_disconnected_again",{transport:{id:(o=this==null?void 0:this.sendTransport)==null?void 0:o.id,status:"disconnected",lastDisconnectedTime:this.sendTransportIceStateDisconnectTime.toLocaleTimeString(),durationPassed:new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime(),type:"send"}}),this.sendTransportIceStateDisconnectTime=new Date;try{n=ee.getValue(re.ICE_RESTART_ON_DISCONNECTED_STATE),typeof n!="number"&&(n=void 0)}catch{n=void 0}n&&setTimeout(async()=>{var l,u,g,m;if(this.sendTransportIceStateDisconnectTime!==void 0){P.emit(k.ICE_RECONNECTING,{transport:"send"}),b.info("sendTransport::attempting_ice_restart",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"reconnecting",type:"send",lastDisconnectedTime:(u=this.sendTransportIceStateDisconnectTime)==null?void 0:u.toISOString(),lastDisconnectedTimeOffset:(g=this.sendTransportIceStateDisconnectTime)==null?void 0:g.getTimezoneOffset()},iceRestart:{status:"connecting"}});try{await this.restartIceTillSuccess(this.sendTransport)}catch(f){b.info("SFUHandler.disconnected.restartIceFailed",{error:f,transport:{id:(m=this==null?void 0:this.sendTransport)==null?void 0:m.id,type:"send",status:"failed"}})}}},n);break;case"connected":P.emit(k.ICE_CONNECTED,{transport:"send"}),b.info("sendTransport::ice_state_connected",{transport:{id:(c=this==null?void 0:this.sendTransport)==null?void 0:c.id,type:"send",status:"connected",lastDisconnectedTime:(d=this.sendTransportIceStateDisconnectTime)==null?void 0:d.toLocaleTimeString(),durationPassed:this.sendTransportIceStateDisconnectTime?new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime():null}}),this.sendTransportIceStateDisconnectTime=void 0;break}})}this.sendTransport.observer.on("close",()=>{this.sendTransport=void 0,ma.cleanup("send"),b.warn("sendTransport_closed")})}async restartIce(t){const{direction:i}=t;if(!(i==="recv"?this.iceRestartInProgress.recvTransport:this.iceRestartInProgress.sendTransport)){i==="recv"?this.iceRestartInProgress.recvTransport=!0:this.iceRestartInProgress.sendTransport=!0;try{const r=(await this.socketClient.sendMessage({type:"restartIce",payload:{transportId:t.id}})).payload;await t.restartIce(r)}catch(r){b.error("SFUHandler.restartIce.Failed",{error:r,iceRestart:{status:"failed"},transport:{id:t==null?void 0:t.id,status:"failed",type:i}})}i==="recv"?this.iceRestartInProgress.recvTransport=!1:this.iceRestartInProgress.sendTransport=!1}}async createConsumer(t){if(this.recvTransport===void 0||this.recvTransport.closed)return;const{peerId:i,producerId:r,id:n,kind:s,rtpParameters:a,appData:o,remotelyPaused:c}=t;b.info("createConsumer::initializing_consumer",{consumer:{id:n,peerId:i,kind:s,appData:o,remotelyPaused:c,producerId:r}});const d=await this.recvTransport.consume({id:n,producerId:r,kind:s,rtpParameters:a,appData:{...o,peerId:i}});b.info("createConsumer::initialized_consumer",{consumer:{id:d.id,peerId:i,kind:s,appData:o,remotelyPaused:c,producerId:r}});const l=d;l.peerId=i,l.remotelyPaused=c,l.score=10,this.consumers.set(d.id,l)}async closeConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&(b.info("SFUHandler::close_consumer",{consumer:r}),r.close(),this.consumers.delete(i))}async cleanupConsumers(){var t;(t=this.consumers)==null||t.forEach(i=>{P.emit(k.CONSUMER_CLOSED,{id:i.id}),this.closeConsumer({id:i.id})})}async pauseConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&r.pause()}async resumeConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&r.resume()}async createProducer(t,i,r){if(this.sendTransport===void 0||this.sendTransport.closed)return;if(b.info("createProducer::initializing_producer",{producer:{id:"TO_BE_CREATED",kind:t,status:"initializing",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.get(t)&&this.producerCreationStatus.get(t)==="INITIALIZING"){b.info("createProducer::producer getting initializing",{producer:{id:"GETTING_CREATED",status:"initializing",kind:t,appData:i==null?void 0:i.appData}});return}this.producerCreationStatus.set(t,"INITIALIZING");const n=await Promise.race([this.sendTransport.produce(i),new Promise(a=>setTimeout(()=>a(void 0),6e3))]);if(!n)throw b.error("createProducer::transport_initialization_timed_out",{producer:{id:"FAILED_TO_CREATE",kind:t,status:"failed",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),new R(`Producer Creation timed out! ${t}`);this.producerCreationStatus.set(t,"INITIALIZED"),b.info("createProducer::initialized_producer",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),n.on("transportclose",()=>{b.info("producer::transportclose",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),this.producers.delete(t)}),n.on("trackended",()=>{b.info("producer::trackended",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),[ne.MIC,ne.WEBCAM].includes(t)||r()});const s=n;s.score=10,this.producers.set(t,s),await this.reconfigureWebcamLayers(),await this.reconfigureSafariScreenshareLayers()}async removeProducer(t,i=!0){const r=this.producers.get(t);!r||r.closed||(b.info("SFUHandler::remove_producer",{producer:{id:r==null?void 0:r.id,kind:t,status:"UNKNOWN",appData:r==null?void 0:r.appData},debuggingHint:`stopTrack was ${i}`}),i&&r.track.stop(),r.close(),await this.socketClient.sendMessage({type:"closeProducer",payload:{producerId:r.id}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),this.producers.delete(t),await this.reconfigureWebcamLayers())}stopAllProducers(){Array.from(this.producers.keys()).forEach(t=>{this.removeProducer(t)})}async stopAllTransports(){if(this.sendTransport){try{this.sendTransport.close()}catch(t){b.error("stopAllTransports",{error:t})}this.sendTransport=void 0}if(this.recvTransport){try{this.recvTransport.close()}catch(t){b.error("SFUHandler::stopAllTransports::error",t)}this.recvTransport=void 0}}async reconfigureWebcamLayers(){if(!ee.hasFeature(re.DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE))return;const t=this.producers.get(ne.WEBCAM);t&&await t.setMaxSpatialLayer(this.producers.get(ne.SCREENSHARE_VIDEO)?0:1)}async reconfigureSafariScreenshareLayers(){if(!ee.hasFeature(re.SCREENSHARE_SIMULCAST)||!Oe.isSafari())return;const t=this.producers.get(ne.SCREENSHARE_VIDEO);if(!t)return;const i=t.rtpSender.getParameters();i.encodings=ute,t.rtpSender.setParameters(i)}async restartIceTillSuccess(t,i=3){let r=!1,n=0;for(;!r&&n<i;)try{b.info("SFUHandler.restartIceTillSuccess.AttemptRestart",{iceRestart:{currentAttempt:n,isSendTransport:t.direction==="send",isRecvTransport:t.direction==="recv"}}),await this.restartIce(t),r=!0}catch{n+=1}if(!r)throw new R("Failed to restart Ice")}}sr([E.trace("SFUHandler.setupTransports")],Gi.prototype,"setupTransports",1);sr([E.trace("SFUHandler.loadRouter")],Gi.prototype,"loadRouter",1);sr([E.trace("SFUHandler.createRecvTransport")],Gi.prototype,"createRecvTransport",1);sr([E.trace("SFUHandler.createSendTransport")],Gi.prototype,"createSendTransport",1);sr([E.trace("SFUHandler.restartIce")],Gi.prototype,"restartIce",1);sr([E.trace("SFUHandler.createConsumer")],Gi.prototype,"createConsumer",1);sr([E.trace("SFUHandler.closeConsumer")],Gi.prototype,"closeConsumer",1);sr([E.trace("SFUHandler.cleanupConsumers")],Gi.prototype,"cleanupConsumers",1);sr([E.trace("SFUHandler.pauseConsumer")],Gi.prototype,"pauseConsumer",1);sr([E.trace("SFUHandler.resumeConsumer")],Gi.prototype,"resumeConsumer",1);sr([E.trace("SFUHandler.createProducer")],Gi.prototype,"createProducer",1);sr([E.trace("SFUHandler.removeProducer")],Gi.prototype,"removeProducer",1);sr([E.trace("SFUHandler.stopAllProducers")],Gi.prototype,"stopAllProducers",1);sr([E.trace("SFUHandler.stopAllTransports")],Gi.prototype,"stopAllTransports",1);class At extends zi.EventEmitter{emit(t,...i){return super.emit("*",t,...i),super.emit(t,...i)}on(t,i){return super.on(t,i)}addListener(t,i){return super.addListener(t,i)}off(t,i){return super.off(t,i)}once(t,i){return super.once(t,i)}prependListener(t,i){return super.prependListener(t,i)}prependOnceListener(t,i){return super.prependOnceListener(t,i)}removeListener(t,i){return super.removeListener(t,i)}removeAllListeners(t){return super.removeAllListeners(t)}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}}var woe=Object.defineProperty,Soe=Object.getOwnPropertyDescriptor,Eoe=(e,t,i,r)=>{for(var n=r>1?void 0:r?Soe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&woe(t,i,n),n},vs=(e=>(e.REQUEST="REQUEST",e.ACCEPT="ACCEPT",e.REJECT="REJECT",e.END="END",e.EVENT="EVENT",e))(vs||{}),md=(e=>(e.PENDING="PENDING",e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.ENDED="ENDED",e))(md||{}),Zu=(e=>(e.KEYBOARD="KEYBOARD",e.MOUSE="MOUSE",e))(Zu||{}),Yh=(e=>(e.LEFT_CLICK="click",e.RIGHT_CLICK="contextmenu",e.MOVE="mousemove",e))(Yh||{}),ys=(e=>(e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED",e))(ys||{});let Xu=class extends At{constructor(e){super(),v(this,"id"),v(this,"remotePeerId"),v(this,"hostPeerId"),v(this,"state");const{remotePeerId:t,requestId:i,hostPeerId:r,state:n}=e;this.id=i,this.remotePeerId=t,this.hostPeerId=r,this.state=n}};Xu=Eoe([Si(e=>{throw new R(e.message,"1400")})],Xu);var Toe=Object.defineProperty,koe=Object.getOwnPropertyDescriptor,ar=(e,t,i,r)=>{for(var n=r>1?void 0:r?koe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Toe(t,i,n),n},Pe,Ka,sP;const I1=(sP=class extends bM{constructor(e){super(),I(this,Pe,void 0),v(this,"isV2AuthToken"),I(this,Ka,void 0),v(this,"legacyMode"),v(this,"roomNodeUrl"),v(this,"peerDisplayName");const{roomName:t,roomNodeUrl:i,peerId:r,authToken:n,legacyMode:s,socketClient:a,meetingTitle:o}=e;this.roomName=t,this.roomNodeUrl=i,this.peerId=r,this.authToken=n,this.legacyMode=s,A(this,Pe,a),this.roomJoined=!1,this.meetingTitle=o,this.isV2AuthToken=Ee.isV2AuthToken,A(this,Ka,new Gi(a,e.device)),Y.legacySwitch(s)}static async init(e){const{legacyMode:t=!0,roomName:i,peerId:r,authToken:n,meetingTitle:s,device:a}=e;let o;const c=`${e.roomNodeUrl}?roomURL=${i}&peerId=${r}&authToken=${n}&version=0.5.0`,d=new Tp({callbackHandler:async l=>{await o.handleSocketCallbacks(l)}});return d.on(fs.SOCKET_MESSAGE,async(l,u)=>{await o.handleSockets(l,u)}),d.connect(c),o=new I1({legacyMode:t,authToken:n,peerId:r,roomName:i,roomNodeUrl:c,socketClient:d,meetingTitle:s,device:a}),d.on(fs.SOCKET_DISCONNECTED,l=>{var u,g;o.isDisconnected=!0,(u=o.sfuHandler)==null||u.cleanupConsumers(),(g=o.sfuHandler)==null||g.stopAllTransports(),P.emit(k.ROOM_NODE_DISCONNECTED,l),o.roomJoined=!1,b.info("ROOM_NODE_DISCONNECTED")}),d.on(fs.SOCKET_CONNECTED,async l=>{P.emit(k.ROOM_NODE_CONNECTED,l),o.isDisconnected,o.isDisconnected=!1,b.info("ROOM_NODE_CONNECTED")}),d.on(fs.SOCKET_CONNECTION_ERROR,async({err:l})=>{var u;o.isDisconnected=!0,(u=o.sfuHandler)==null||u.cleanupConsumers(),P.emit(k.ROOM_NODE_CONNECTION_ERROR,l),o.roomJoined=!1}),o}get sfuHandler(){return h(this,Ka)}reconnect(){h(this,Pe).reconnect()}async setupTransports(){await this.sfuHandler.setupTransports()}async handleSocketCallbacks(e){switch(e.type){case k.NEW_CONSUMER:return this.sfuHandler.createConsumer(e.payload);default:return null}}async handleSockets(e,t){if(e){switch((!E.logExclusionList.includes(e==null?void 0:e.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&b.info(`RoomNodeClient::handleSockets::${e==null?void 0:e.type}`),e.type){case k.CONSUMER_CLOSED:this.sfuHandler.closeConsumer(e.payload);break;case k.CONSUMER_PAUSED:this.sfuHandler.pauseConsumer(e.payload);break;case k.CONSUMER_RESUMED:this.sfuHandler.resumeConsumer(e.payload);break;case k.CONSUMER_SCORE:this.handleConsumerScore(e.payload);break;case k.PRODUCER_SCORE:this.handleProducerScore(e.payload);break;case k.PRODUCER_CLOSED:this.handleProducerClosed(e.payload);break}typeof t=="function"&&t()}}async joinRoom(e,t,i,r,n={}){var s,a,o;this.peerDisplayName=e,this.roomUUID=i;const c=await h(this,Pe).sendMessage({type:"joinRoom",payload:{device:Oe.getDeviceInfo(),displayName:e,rtpCapabilities:this.sfuHandler.getRTPCapabilities(),isLegacy:this.legacyMode,audioMuted:t}});if((s=c.payload)!=null&&s.waitlisted)return P.emit(k.WAITLISTED),{roomJoined:!1};this.roomJoined=!0,(o=(a=c.payload)==null?void 0:a.waitlistedPeers)==null||o.forEach(l=>{P.emit(k.WAITLIST_PEER_ADDED,l)}),this.legacyMode=c.payload.legacyMode||this.legacyMode,r&&r!==""&&await this.changeRoomDisplayTitle(r),this.maxPreferredStreams=c.payload.maxPreferredStreams;const d=ui();b.info("RoomNodeClient::joinRoom::pre emitasync room_joined");try{await P.emitAsync(k.ROOM_JOINED,c.payload)}catch(l){b.error("RoomNodeClient::joinRoom::emitAsync",{error:l})}return b.info("RoomNodeClient::joinRoom::post emitasync room_joined"),P.emit(k.SELF_ROOM_JOINED),ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{const l=await d.getUserDetails(),u={userId:Ee.isV2AuthToken?l.participant.id:l.id,peerId:this.peerId,displayName:e,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Oe.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:gm,sdkVersion:Md,metaData:{},permissions:{}};Y.roomJoined(u),n!=null&&n.audio?Y.audioOn():Y.audioOff(),n!=null&&n.video?Y.videoOn():Y.videoOff()}),{roomJoined:!0}}async leaveRoom(){this.sfuHandler.stopAllProducers(),await this.sfuHandler.stopAllTransports(),h(this,Pe).disconnect(),Y.callEnded(),E.destruct()}handleProducerClosed({id:e}){this.sfuHandler.producers.forEach((t,i)=>{t.id===e&&this.sfuHandler.removeProducer(i)})}getConsumers(){return this.sfuHandler.consumers}static getComputedScore(e){var t,i;let r=0;try{Array.isArray(e)?e.length===1?r=e[0].score:r=e.map(({score:n})=>n!=null?n:10).filter(n=>n>0).reduce((n,s)=>n+s,0)/e.length:r=(t=e==null?void 0:e.score)!=null?t:10}catch{r=(i=e==null?void 0:e.score)!=null?i:10}return r}handleConsumerScore({id:e,score:t}){var i;const r=h(this,Ka).consumers.get(e);r&&(r.score=t&&t.producerScore!==void 0&&t.producerScore>=0?t.producerScore:(i=t==null?void 0:t.score)!=null?i:10,P.emit(k.CONSUMER_SCORE_UPDATE,{id:r.id,kind:r.kind,peerId:r.peerId,score:r.score}))}handleProducerScore({id:e,score:t}){const i=[...h(this,Ka).producers.values()].find(n=>n.id===e);if(!i){b.error(`RoomNodeClient::producer_not_found. ProducerId: ${e}`);return}if(!i)return;const r=I1.getComputedScore(t);r!==void 0&&r!==i.score&&(i.score=r,P.emit(k.PRODUCER_SCORE_UPDATE,{id:i.id,kind:i.kind,appData:i.appData,score:i.score}))}async shareWebcam(e){if(e===void 0)return;if(this.sfuHandler.producers.has(ne.WEBCAM)){const c=this.sfuHandler.producers.get(ne.WEBCAM);if(!c.closed){await c.replaceTrack({track:e}),await this.resumeWebcam();return}await this.sfuHandler.removeProducer(ne.WEBCAM,!1)}let t=dte;const i=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp9")||void 0,r=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp8")||void 0,n=ee.getValue(re.OVERRIDE_WEBCAM_SIMULCAST);if(i&&!this.legacyMode)t=pte;else if(n!==void 0)try{t=JSON.parse(n)}catch{b.error("Failed to parse flagsmith simulcast")}const s=()=>this.legacyMode?r:i,a={track:e,encodings:ee.hasFeature(re.DISABLE_WEBCAM_SIMULCAST)?void 0:t,codecOptions:{videoGoogleStartBitrate:1e3},codec:s(),appData:{screenShare:!1},stopTracks:!1},o=()=>{this.disableWebcam()};await this.sfuHandler.createProducer(ne.WEBCAM,a,o)}async shareScreen(e){var t,i;const{video:r,audio:n}=e;if(r===void 0)return;let s;ee.hasFeature(re.SCREENSHARE_SIMULCAST)&&(s=lte);const a={track:r,appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},encodings:s,stopTracks:!1};let o=()=>{this.disableScreenShare()};Y.screenShareRequested(),await this.sfuHandler.createProducer(ne.SCREENSHARE_VIDEO,a,o);const c={opusDtx:!1,opusStereo:!1,opusFec:!0,forceGoogConference:!1};if(ee.hasFeature(re.SCREENSHARE_FORCE_GOOG_CONFERENCE)&&(c.forceGoogConference=!0),n){const d={track:n,codecOptions:c,appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},stopTracks:!1};o=()=>{},await this.sfuHandler.createProducer(ne.SCREENSHARE_AUDIO,d,o)}Y.screenShareStart((i=(t=this.sfuHandler.producers.get(ne.SCREENSHARE_VIDEO))==null?void 0:t.rtpParameters.encodings[0])==null?void 0:i.ssrc)}async shareMic(e){if(e===void 0)return;if(this.sfuHandler.producers.has(ne.MIC)){const r=this.sfuHandler.producers.get(ne.MIC);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeMic();return}await this.sfuHandler.removeProducer(ne.MIC,!1)}const t={track:e,codecOptions:{opusDtx:!1,opusStereo:!1,opusFec:!0,opusMaxAverageBitrate:16e3},stopTracks:!1},i=()=>{this.disableMic()};await this.sfuHandler.createProducer(ne.MIC,t,i)}pauseMic(){const e=this.sfuHandler.producers.get(ne.MIC);if(!e){b.error("pauseMic::could_not_find_mic_producer");return}e.pause(),h(this,Pe).sendMessage({type:"pauseProducer",payload:{producerId:e.id}})}async pauseWebcam(){const e=this.sfuHandler.producers.get(ne.WEBCAM);if(!e){b.error("pauseWebcam::could_not_find_webcam_producer");return}e.pause(),await h(this,Pe).sendMessage({type:"pauseProducer",payload:{producerId:e.id}})}async resumeMic(){const e=this.sfuHandler.producers.get(ne.MIC);if(!e){b.error("resumeMic::could_not_find_mic_producer");return}e.resume(),await h(this,Pe).sendMessage({type:"resumeProducer",payload:{producerId:e.id}})}async resumeWebcam(){const e=this.sfuHandler.producers.get(ne.WEBCAM);if(!e){b.error("resumeWebcam::could_not_find_webcam_producer");return}e.resume(),await h(this,Pe).sendMessage({type:"resumeProducer",payload:{producerId:e.id}})}async disableWebcam(){await this.sfuHandler.removeProducer(ne.WEBCAM)}async disableMic(){await this.sfuHandler.removeProducer(ne.MIC)}async disableScreenShare(){var e,t;b.info("screen_sharing_stopped"),Y.screenShareStop((t=(e=this.sfuHandler.producers.get(ne.SCREENSHARE_VIDEO))==null?void 0:e.rtpParameters.encodings[0])==null?void 0:t.ssrc),await this.sfuHandler.removeProducer(ne.SCREENSHARE_VIDEO),await this.sfuHandler.removeProducer(ne.SCREENSHARE_AUDIO)}async resetVideoProducers(e,t){e&&(await this.sfuHandler.removeProducer(ne.WEBCAM,!1),this.shareWebcam(e)),t&&(await this.sfuHandler.removeProducer(ne.SCREENSHARE_VIDEO,!1),this.shareScreen({video:t}))}async getRoomState(){return h(this,Pe).sendMessage({type:"getRoomState"})}async changeRoomDisplayTitle(e){await h(this,Pe).sendMessage({type:"changeDisplayTitle",payload:{displayTitle:e}})}async sendMessage(e){return h(this,Pe).sendMessage(e)}async broadcastMessage(e,t){const i={payload:t,type:e};return h(this,Pe).sendMessage({type:"roomMessage",payload:i})}async sendChatMessage(e){await h(this,Pe).sendMessage({type:"chatMessage",payload:e})}async getChatMessages(){return h(this,Pe).sendMessage({type:"getChatMessages"})}async pinChatMessage(e){return h(this,Pe).sendMessage({type:"pinChatMessage",payload:e})}async unpinChatMessage(e){return h(this,Pe).sendMessage({type:"unpinChatMessage",payload:e})}async getPolls(){return h(this,Pe).sendMessage({type:"getPolls"})}async newPoll(e){await h(this,Pe).sendMessage({type:"newPoll",payload:e})}async votePoll(e){await h(this,Pe).sendMessage({type:"votePoll",payload:e})}async acceptWaitingRequest(e){await h(this,Pe).sendMessage({type:"acceptWaitingRequest",payload:{id:e}})}async rejectWaitingRequest(e){await h(this,Pe).sendMessage({type:"rejectWaitingRequest",payload:{id:e}})}async muteAll(e){await h(this,Pe).sendMessage({type:"muteAllNew",payload:{allowUnMute:e}})}async muteAllVideo(){await h(this,Pe).sendMessage({type:"muteAllVideo"})}async pinPeer(e){return h(this,Pe).sendMessage({type:"pinPeer",payload:{id:e}})}async unpinPeer(e){return h(this,Pe).sendMessage({type:"unpinPeer",payload:{id:e}})}async disableAudio(e){await h(this,Pe).sendMessage({type:"disableAudioPeerNew",payload:{id:e}})}async disableVideo(e){await h(this,Pe).sendMessage({type:"disableVideoPeer",payload:{id:e}})}async kickAll(){await h(this,Pe).sendMessage({type:"kickAll"})}async kick(e){await h(this,Pe).sendMessage({type:"kick",payload:{id:e}})}async getPage(e){return h(this,Pe).sendMessage({type:"getPage",payload:{pageNum:e}})}async muteSelf(){this.pauseMic(),await h(this,Pe).sendMessage({type:"muteSelf"})}async unmuteSelf(){await this.resumeMic(),await h(this,Pe).sendMessage({type:"unmuteSelf"})}async addRoomPlugin(e){return h(this,Pe).sendMessage({type:"addPlugin",payload:e})}async removeRoomPlugin(e){return h(this,Pe).sendMessage({type:"removePlugin",payload:e})}async remoteControlMessage(e){return h(this,Pe).sendMessage({type:"message",payload:e})}async requestRemoteControl(e){return this.remoteControlMessage({peerId:e.hostPeerId,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:vs.REQUEST})}async acceptRemoteControl(e){return this.remoteControlMessage({peerId:e.remotePeerId,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:vs.ACCEPT})}async terminateRemoteControl(e,t){return this.remoteControlMessage({peerId:e,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:vs.END})}async sendEventRemoteControl(e,t,i){return this.remoteControlMessage({peerId:e,remoteRequestId:t,remoteEvent:i,hostPeerId:this.peerId,remotePeerId:e,remoteRequestType:vs.EVENT})}async assertSpotlight(e,t){return h(this,Pe).sendMessage({type:e,payload:{...t,roomMessageType:"spotlight"}})}async assertSpotlightToRoom(e){return this.assertSpotlight("roomMessage",e)}async assertSpotlightToPeer(e){return this.assertSpotlight("message",e)}async requestToJoinStage(e){await this.sendMessage({type:"requestToJoinStage",payload:e})}async withdrawRequestToJoinStage(){await this.sendMessage({type:"withdrawRequestToJoinStage"})}async acceptAllRequestToJoinStage(e){await this.sendMessage({type:"acceptAllRequestToJoinStage",payload:e.map(t=>({...t,type:Kb.REQUESTED_BY_MODERATOR}))})}async removePeerFromStage(e,t){await this.sendMessage({type:"removePeerFromStage",payload:{id:e,type:t}})}stopAllProducers(){h(this,Ka).stopAllProducers()}async startPresenting(){await this.sendMessage({type:"startPresenting"})}async stopPresenting(){this.stopAllProducers(),await this.sendMessage({type:"stopPresenting"})}async rejectRequestToJoinStage(e){await this.sendMessage({type:"rejectRequestToJoinStage",payload:{id:e}})}},Pe=new WeakMap,Ka=new WeakMap,sP);let ze=I1;ar([E.trace("RoomNodeClient.reconnect")],ze.prototype,"reconnect",1);ar([E.trace("RoomNodeClient.joinRoom")],ze.prototype,"joinRoom",1);ar([E.trace("RoomNodeClient.leaveRoom")],ze.prototype,"leaveRoom",1);ar([E.trace("RoomNodeClient.shareWebcam")],ze.prototype,"shareWebcam",1);ar([E.trace("RoomNodeClient.shareScreen")],ze.prototype,"shareScreen",1);ar([E.trace("RoomNodeClient.shareMic")],ze.prototype,"shareMic",1);ar([E.trace("RoomNodeClient.pauseMic")],ze.prototype,"pauseMic",1);ar([E.trace("RoomNodeClient.pauseWebcam")],ze.prototype,"pauseWebcam",1);ar([E.trace("RoomNodeClient.resumeMic")],ze.prototype,"resumeMic",1);ar([E.trace("RoomNodeClient.resumeWebcam")],ze.prototype,"resumeWebcam",1);ar([E.trace("RoomNodeClient.disableWebcam")],ze.prototype,"disableWebcam",1);ar([E.trace("RoomNodeClient.disableMic")],ze.prototype,"disableMic",1);ar([E.trace("RoomNodeClient.disableScreenShare")],ze.prototype,"disableScreenShare",1);ar([E.trace("RoomNodeClient.resetVideoProducers")],ze.prototype,"resetVideoProducers",1);let hs;async function Poe(e){if(hs)throw new Error("Room Node Client already setup");hs=await ve.init(e)}async function kM(e){if(hs!=null&&hs.roomJoined)throw new Error("Room Node Client already setup");hs&&(hs=void 0),hs=await ze.init(e)}async function Coe(){hs=void 0}function $t(){return hs}function Eo(e){var t,i,r,n,s,a,o,c,d,l,u,g,m;return e?{media:{audio:{enabled:e.audioEnabled,trackId:(t=e.audioTrack)==null?void 0:t.id,permission:"mediaPermissions"in e?(i=e.mediaPermissions)==null?void 0:i.audio:null},video:{enabled:e.videoEnabled,trackId:(r=e.videoTrack)==null?void 0:r.id,permission:"mediaPermissions"in e?(n=e.mediaPermissions)==null?void 0:n.video:null},screenshare:{enabled:e.screenShareEnabled,permission:"mediaPermissions"in e?(s=e.mediaPermissions)==null?void 0:s.screenshare:null,audio:{enabled:(o=(a=e.screenShareTracks)==null?void 0:a.audio)==null?void 0:o.enabled,trackId:(d=(c=e.screenShareTracks)==null?void 0:c.audio)==null?void 0:d.id},video:{enabled:(u=(l=e.screenShareTracks)==null?void 0:l.video)==null?void 0:u.enabled,trackId:(m=(g=e.screenShareTracks)==null?void 0:g.video)==null?void 0:m.id}}}}:{}}const Roe=async(e,t)=>{if(!(e!=null&&e.length))return t;const i=new AudioContext,r=await Promise.all(e==null?void 0:e.map(a=>a(i))),n=i.createMediaStreamSource(new MediaStream([t])),s=i.createMediaStreamDestination();try{let a=n;for(let o=0;o<r.length;o+=1)a.connect(r[o]),a=r[o];a.connect(s)}catch(a){return b.error("getTransformedAudioTrack::middleware_execution_failed",{error:a}),t}return s.stream.getAudioTracks()[0]};var xoe=Object.defineProperty,Ioe=Object.getOwnPropertyDescriptor,Aoe=(e,t,i,r)=>{for(var n=r>1?void 0:r?Ioe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&xoe(t,i,n),n};let A1=class extends At{constructor(e,t){super(),v(this,"constructorName",this.constructor.name),v(this,"userSelectedDevice"),v(this,"mediaInterface"),v(this,"_mediaTrack"),v(this,"transformedMediaTrack"),v(this,"middlewares",[]),v(this,"currentDevice"),this.mediaInterface=e,t&&this.setMediaTrack(t),this.userSelectedDevice=void 0,this.onTrackEnded=this.onTrackEnded.bind(this),this.onTrackMuted=this.onTrackMuted.bind(this)}disableTrack(){var e,t;this.removeMediaTrackListeners(),(e=this._mediaTrack)==null||e.stop(),this._mediaTrack=void 0,(t=this.transformedMediaTrack)==null||t.stop(),this.transformedMediaTrack=void 0}get mediaTrack(){return this._mediaTrack}async setMediaTrack(e){const t=i=>{b.error(`${this.constructorName}.setMediaTrack.error`,{error:i})};try{this.disableTrack()}catch(i){t(i)}this._mediaTrack=e,await this.setTransformedTrack();try{this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(i){t(i)}}get trackEnabled(){return!!this.mediaTrack&&this.mediaTrack.readyState==="live"&&this.mediaTrack.enabled}muteTrack(){if(!this.mediaTrack){b.warn("BaseMediaHandler.muteTrack Tried muting with no track present");return}this.transformedMediaTrack&&(this.transformedMediaTrack.enabled=!1),this.mediaTrack.enabled=!1}async unmuteTrack(){try{this.mediaTrack?this.mediaTrack.enabled=!0:await this.enableTrack(!1)}catch(e){throw b.error(`${this.constructorName}.unmuteTrack.error`,{error:e}),this.disableTrack(),new R("Failed to unmute track")}}async setCurrentDevice(){var e;if(!this.mediaTrack){this.currentDevice=void 0;return}((e=this.currentDevice)==null?void 0:e.deviceId)!==this.mediaTrack.getSettings().deviceId&&(this.currentDevice=await this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId))}async addMiddleware(e){if(Oe.isSafari())return{success:!1,message:"Middlewares are not yet supported in Safari."};if(this.middlewares.includes(e))return{success:!1,message:"This middleware has been applied, already. Skipping."};try{return this.trackEnabled&&await this.setTransformedTrack(),this.middlewares.push(e),{success:!0,message:"Successfully added the middleware."}}catch(t){return b.error("While adding middleware",{error:t}),{success:!1,message:t==null?void 0:t.message}}}async removeMiddleware(e){const t=this.middlewares.indexOf(e,0);if(t>-1)try{return await this.setTransformedTrack(),this.middlewares.splice(t,1),{success:!0,message:"Successfully removed the middleware."}}catch(i){return b.error("While removing middleware",{error:i}),{success:!1,message:i==null?void 0:i.message}}return{success:!1,message:"No such middleware was found. Skipping."}}addMediaTrackListeners(){var e,t,i;this.mediaTrack&&(b.info(`${this.constructorName}.addMediaTrackListeners for deviceId ${(t=(e=this.mediaTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),this.mediaTrack.addEventListener("ended",this.onTrackEnded),this.mediaTrack.addEventListener("mute",this.onTrackMuted))}removeMediaTrackListeners(){var e,t,i;this.mediaTrack&&(b.info(`${this.constructorName}.removeMediaTrackListeners for deviceId ${(t=(e=this.mediaTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),b.info(`${this.constructorName}.removeMediaTrackListeners`),this.mediaTrack.removeEventListener("ended",this.onTrackEnded),this.mediaTrack.removeEventListener("mute",this.onTrackMuted))}};A1=Aoe([Si(e=>{throw new R(e.message,"1600")})],A1);const PM=A1;var Ooe=Object.defineProperty,Moe=Object.getOwnPropertyDescriptor,CM=(e,t,i,r)=>{for(var n=r>1?void 0:r?Moe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Ooe(t,i,n),n};class rw extends PM{async setDevice(t){if(!t)throw b.warn("AudioMediaHandler.setDevice No device received"),new R("No device received!","1603");if(t.kind!=="audioinput")throw b.warn("AudioMediaHandler.setDevice Received non audio device"),new R("Non audio device received while setting device!","1603");try{const i=this.trackEnabled;this.userSelectedDevice=t.deviceId,await this.setMediaTrack(await this.mediaInterface.getAudioTrack(!i,t.deviceId))}catch(i){throw b.error("AudioMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new R(i.message,"1604")}}async enableTrack(t){if(this.trackEnabled){b.warn("AudioMediaHandler.enableTrack Track already enabled!");return}const i=await this.mediaInterface.getAudioTrack(t,this.userSelectedDevice);await this.setMediaTrack(i)}async setTransformedTrack(){var t;if(!((t=this.middlewares)!=null&&t.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await Roe(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){b.error("AudioMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async onTrackEnded(){b.info("AudioMediaHandler.TrackEnded"),this.emit("trackEnded");const t=this.mediaTrack.enabled;this.disableTrack(),await this.enableTrack(!t),await this.setTransformedTrack(),this.emit("trackChanged")}onTrackMuted(){b.info("AudioMediaHandler.TrackMuted"),this.emit("trackMuted")}}CM([E.trace("AudioMediaHandler.setTransformedTrack")],rw.prototype,"setTransformedTrack",1);CM([E.trace("AudioMediaHandler.onTrackEnded")],rw.prototype,"onTrackEnded",1);class No extends Error{constructor(t,i,r){super(i),v(this,"constraints"),v(this,"name"),this.name=t,this.constraints=r}}function Pf(e,t){if(Oe.isChromiumBased()){if(e==="NotAllowedError")return t.indexOf("by system")>0?"SYSTEM_DENIED":"CANCELED";if(e==="NotReadableError")return"COULD_NOT_START"}else if(Oe.isSafari()){if(e==="NotAllowedError")return"DENIED"}else if(Oe.isFirefox()){if(e==="NotFoundError"||e==="NotReadableError")return"SYSTEM_DENIED";if(e==="NotAllowedError")return"DENIED";if(e==="AbortError")return"COULD_NOT_START"}return"COULD_NOT_START"}function hy(e){return e===2 .toString()?ga.DENIED:e===4 .toString()?ga.SYS_DENIED:e===1 .toString()?ga.ACCEPTED:ga.FAILED}class Doe{constructor(){v(this,"permissions"),this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"}}async getAudioInputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="audioinput")}async getVideoInputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="videoinput")}async getAudioOutputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="audiooutput")}}var Loe=Object.defineProperty,Noe=Object.getOwnPropertyDescriptor,Uoe=(e,t,i,r)=>{for(var n=r>1?void 0:r?Noe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Loe(t,i,n),n},Vs,aP;let O1=(aP=class extends Doe{constructor(e){super(),I(this,Vs,void 0),A(this,Vs,new lM(e))}handlePermissionErrors(e,t){const i=Pf(t.name,t.message);this.permissions[e]=i,P.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:e})}async getAudioAndVideoTrack(){const e={audio:h(this,Vs).getAudioConstraints().audio,video:h(this,Vs).getVideoConstraints().video};try{const t=await navigator.mediaDevices.getUserMedia(e),i=t.getAudioTracks()[0],r=t.getVideoTracks()[0];return this.permissions.audio="ACCEPTED",this.permissions.video="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),{audioTrack:i,videoTrack:r}}catch(t){if(t.name==="NotAllowedError"){const i=await this.getAudioTrack(!1),r=await this.getVideoTrack();return{audioTrack:i,videoTrack:r}}throw b.error("WebMediaInterface.getAudioAndVideoTrack",{error:t}),new R("Couldnt fetch audio and video track")}}async getAudioTrack(e,t){const i=h(this,Vs).getAudioConstraints(t);try{const r=(await navigator.mediaDevices.getUserMedia(i)).getAudioTracks()[0];return r.enabled=!e,this.permissions.audio="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),r}catch(r){throw this.handlePermissionErrors("audio",new No(r.name,r.message,i)),new R(r.message,"1601")}}async getScreenShareTracks(){const e=h(this,Vs).getScreenShareConstraints();try{const t=await navigator.mediaDevices.getDisplayMedia(e);return this.permissions.screenshare="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"}),{audioTrack:t.getAudioTracks()[0],videoTrack:t.getVideoTracks()[0]}}catch(t){throw this.handlePermissionErrors("screenshare",new No(t.name,t.message,e)),b.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks",{error:t}),new R("Couldnt fetch screen share tracks")}}async getVideoTrack(e){const t=h(this,Vs).getVideoConstraints(e);try{const i=(await navigator.mediaDevices.getUserMedia(t)).getVideoTracks()[0];return this.permissions.video="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"audio"}),i}catch(i){throw this.handlePermissionErrors("video",new No(i.name,i.message,t)),b.error("WebMediaInterface.getVideoTrack Error while fetching video track",{error:i}),new R("Couldnt fetch video track")}}async getAvailableDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(e){throw b.error("enumerate_devices_failed",{error:e}),new R("Failed to get available devices")}}async getAvailableDevicesByKind(e){try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:t})=>e===t)}catch(t){throw b.error("enumerate_devices_failed",{error:t}),new R("Failed to get available devices by kind")}}async getDevice(e){try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.deviceId===e)[0]}catch(t){throw b.error("enumerate_devices_failed",{error:t}),new R("Failed to get device")}}},Vs=new WeakMap,aP);O1=Uoe([Si(e=>{throw new R(e.message,"1600")})],O1);const RM=O1;var Bl;class joe{constructor(t){I(this,Bl,void 0),v(this,"currentDevice"),A(this,Bl,t)}async setupSpeaker(t){var i;if(!(h(this,Bl)instanceof RM))return;let r=t;if(t||([r]=await h(this,Bl).getAvailableDevicesByKind("audiooutput")),!r)throw new R("No speaker found");((i=this.currentDevice)==null?void 0:i.deviceId)!==r.deviceId&&(this.currentDevice!=null||(this.currentDevice=r),document.querySelectorAll("audio").forEach(async n=>{if(typeof n.sinkId<"u"&&this.currentDevice.deviceId&&n.sinkId!==this.currentDevice.deviceId)try{await n.setSinkId(this.currentDevice.deviceId)}catch{}}))}}Bl=new WeakMap;class $oe extends At{constructor(t){super(),v(this,"mediaInterface"),v(this,"audioMediaTrack"),v(this,"videoMediaTrack"),this.mediaInterface=t}get trackEnabled(){return!!this.videoMediaTrack}async enableScreenShare(){var t,i;const{audioTrack:r,videoTrack:n}=await this.mediaInterface.getScreenShareTracks();this.audioMediaTrack=r,this.videoMediaTrack=n,this.addMediaTrackListeners(),((i=(t=this.mediaInterface)==null?void 0:t.permissions)==null?void 0:i.screenshare)!=="ACCEPTED"&&this.mediaInterface.permissions&&(this.mediaInterface.permissions.screenshare="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.mediaInterface.permissions.screenshare,kind:"screenshare"}))}disableScreenShare(){var t,i;this.removeMediaTrackListeners(),(t=this.audioMediaTrack)==null||t.stop(),(i=this.videoMediaTrack)==null||i.stop(),this.videoMediaTrack=void 0,this.audioMediaTrack=void 0}addMediaTrackListeners(){var t;(t=this.videoMediaTrack)==null||t.addEventListener("ended",this.onTrackEnded.bind(this))}removeMediaTrackListeners(){var t;(t=this.videoMediaTrack)==null||t.removeEventListener("ended",this.onTrackEnded)}onTrackEnded(){this.emit("trackEnded")}}var xc;class Voe{constructor(){I(this,xc,void 0)}terminateMiddlewareWebWorker(){if(h(this,xc))try{rO(h(this,xc)),A(this,xc,void 0)}catch{b.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(t,i){if(!(t!=null&&t.length))return i;const r=await Promise.all(t==null?void 0:t.map(d=>d())),n=new MediaStream;n.addTrack(i);const s=document.createElement("canvas"),a=s.getContext("2d"),o=document.createElement("video");o.srcObject=n,o.autoplay=!0,this.terminateMiddlewareWebWorker();const c=async()=>{if(i.enabled===!1||i.readyState==="ended"){this.terminateMiddlewareWebWorker(),o.remove(),s.remove();return}try{a.drawImage(o,0,0);for(let d=0;d<r.length;d+=1)await r[d](s,a)}catch(d){b.error("getTransformedVideoTrack::middleware_execution_failed",{error:d})}};try{o.play()}catch{}return o.addEventListener("play",()=>{s.width=o.width||i.getSettings().width,s.height=o.width||i.getSettings().height,A(this,xc,nO(c,50))},!1),s.captureStream().getVideoTracks()[0]}}xc=new WeakMap;var Foe=Object.defineProperty,zoe=Object.getOwnPropertyDescriptor,xM=(e,t,i,r)=>{for(var n=r>1?void 0:r?zoe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Foe(t,i,n),n},Hl;class nw extends PM{constructor(t,i){super(t,i),I(this,Hl,void 0),A(this,Hl,new Voe)}async setDevice(t){if(!t)throw b.warn("VideoMediaHandler.setDevice No device received"),new R("No device received!");if(t.kind!=="videoinput")throw b.warn("VideoMediaHandler.setDevice Received non video device",{devices:[t]}),new R("Non video device received while setting video device!");if(this.userSelectedDevice=t.deviceId,!(this.mediaTrack&&this.mediaTrack.enabled)){b.warn("VideoMediaHandler.setDevice Tried switching device with video disabled",{devices:[t]}),this.currentDevice=t;return}try{await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}catch(i){throw b.error("VideoMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new R("Failed to change device")}}async enableTrack(){if(this.trackEnabled){b.warn("VideoMediaHandler.enableTrack Track already enabled!");return}await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}async setTransformedTrack(){var t;if(!((t=this.middlewares)!=null&&t.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await h(this,Hl).getTransformedVideoTrack(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){b.error("VideoMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}terminateMiddlewareWebWorker(){h(this,Hl).terminateMiddlewareWebWorker()}async onTrackEnded(){b.info("VideoMediaHandler.TrackEnded"),this.disableTrack(),this.emit("trackEnded")}onTrackMuted(){b.info("VideoMediaHandler.TrackMuted"),this.emit("trackMuted")}}Hl=new WeakMap;xM([E.trace("VideoMediaHandler.setTransformedTrack")],nw.prototype,"setTransformedTrack",1);xM([E.trace("VideoMediaHandler.onTrackEnded")],nw.prototype,"onTrackEnded",1);var Boe=Object.defineProperty,Hoe=Object.getOwnPropertyDescriptor,Jn=(e,t,i,r)=>{for(var n=r>1?void 0:r?Hoe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Boe(t,i,n),n},ki,Pi,fi,ao,Cn;class _n extends At{constructor(t){super(),I(this,ki,void 0),I(this,Pi,void 0),I(this,fi,void 0),I(this,ao,void 0),I(this,Cn,void 0),A(this,ki,new RM(t)),A(this,Pi,new rw(h(this,ki))),A(this,fi,new nw(h(this,ki))),A(this,Cn,new $oe(h(this,ki))),A(this,ao,new joe(h(this,ki))),h(this,Pi).on("trackMuted",this.onAudioTrackMuted.bind(this)),h(this,Pi).on("trackChanged",this.onAudioTrackChanged.bind(this)),h(this,fi).on("trackChanged",this.onVideoTrackChanged.bind(this)),h(this,fi).on("trackEnded",this.onVideoTrackEnded.bind(this)),h(this,Cn).on("trackEnded",this.onScreenShareEnded.bind(this))}async repopulateAvailableDevices(){return!0}async setupStreams({audio:t,video:i}){let r,n;if(t&&i)try{const s=await h(this,ki).getAudioAndVideoTrack();r=s.audioTrack,n=s.videoTrack}catch(s){b.error("LocalMediaHandler::init::Failed to get audio video tracks",{error:s})}if(!r&&t)try{r=await h(this,ki).getAudioTrack(!1)}catch(s){b.error("LocalMediaHandler::init::Failed to get audio track",{error:s})}if(!n&&i)try{n=await h(this,ki).getVideoTrack()}catch(s){b.error("LocalMediaHandler::init::Failed to get video track",{error:s})}await h(this,Pi).setMediaTrack(r),await h(this,fi).setMediaTrack(n);try{await h(this,ao).setupSpeaker()}catch{}}getCurrentDevices(){return{audio:h(this,Pi).currentDevice,video:h(this,fi).currentDevice,speaker:h(this,ao).currentDevice}}get permissions(){return h(this,ki).permissions}getAllDevices(){return h(this,ki).getAvailableDevices()}getDeviceById(t,i){return h(this,ki).getDevice(t)}onAudioTrackMuted(){this.emit("AUDIO_TRACK_SILENT")}onAudioTrackChanged(){this.emit("AUDIO_TRACK_CHANGE")}get rawAudioTrack(){return h(this,Pi).mediaTrack}get audioTrack(){return h(this,Pi).transformedMediaTrack}get audioEnabled(){return h(this,Pi).trackEnabled}async enableAudio(){await h(this,Pi).unmuteTrack()}disableAudio(){h(this,Pi).muteTrack()}getAudioDevices(){return h(this,ki).getAudioInputDevices()}async setAudioDevice(t){await h(this,Pi).setDevice(t),this.emit("AUDIO_TRACK_CHANGE")}setupSpeaker(){return h(this,ao).setupSpeaker()}setSpeakerDevice(t){return h(this,ao).setupSpeaker(t)}onVideoTrackChanged(){this.emit("VIDEO_TRACK_CHANGE")}onVideoTrackEnded(){this.emit("VIDEO_TRACK_CHANGE")}get rawVideoTrack(){return h(this,fi).mediaTrack}get videoTrack(){return h(this,fi).transformedMediaTrack}get videoEnabled(){return h(this,fi).trackEnabled}async enableVideo(){await h(this,fi).unmuteTrack()}disableVideo(){h(this,fi).disableTrack()}getVideoDevices(){return h(this,ki).getVideoInputDevices()}async setVideoDevice(t){await h(this,fi).setDevice(t),this.emit("VIDEO_TRACK_CHANGE")}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}get screenShareTracks(){return{audio:h(this,Cn).audioMediaTrack,video:h(this,Cn).videoMediaTrack}}get screenShareEnabled(){return h(this,Cn).trackEnabled}async enableScreenShare(){await h(this,Cn).enableScreenShare()}async disableScreenShare(){h(this,Cn).disableScreenShare()}getSpeakerDevices(){return h(this,ki).getAudioOutputDevices()}addAudioMiddleware(t){return h(this,Pi).addMiddleware(t)}removeAudioMiddleware(t){return h(this,Pi).removeMiddleware(t)}addVideoMiddleware(t){return h(this,fi).addMiddleware(t)}removeVideoMiddleware(t){return h(this,fi).removeMiddleware(t)}destruct(){h(this,Pi).disableTrack(),h(this,fi).disableTrack(),h(this,fi).terminateMiddlewareWebWorker(),h(this,Cn).disableScreenShare()}removeAllTracks(){this.destruct()}async removeDocumentEventListeners(){}}ki=new WeakMap,Pi=new WeakMap,fi=new WeakMap,ao=new WeakMap,Cn=new WeakMap;Jn([E.trace("MediaHandler.setupStreams")],_n.prototype,"setupStreams",1);Jn([E.trace("MediaHandler.enableAudio")],_n.prototype,"enableAudio",1);Jn([E.trace("MediaHandler.disableAudio")],_n.prototype,"disableAudio",1);Jn([E.trace("MediaHandler.setAudioDevice")],_n.prototype,"setAudioDevice",1);Jn([E.trace("MediaHandler.enableVideo")],_n.prototype,"enableVideo",1);Jn([E.trace("MediaHandler.disableVideo")],_n.prototype,"disableVideo",1);Jn([E.trace("MediaHandler.setVideoDevice")],_n.prototype,"setVideoDevice",1);Jn([E.trace("MediaHandler.enableScreenShare")],_n.prototype,"enableScreenShare",1);Jn([E.trace("MediaHandler.disableScreenShare")],_n.prototype,"disableScreenShare",1);Jn([E.trace("MediaHandler.destruct")],_n.prototype,"destruct",1);class Goe extends Error{constructor(t,i){super(t),v(this,"code"),this.code=i}}const Woe={lowVolumeThreshold:-40,clipThreshold:1,silentThreshold:1/1987,delay:500,media:"audio"};var fm,id,M1,IM,Qh,gy;const AM=class{constructor(e){I(this,M1),I(this,Qh),v(this,"analyser"),v(this,"silentThreshold"),v(this,"lowVolumeThreshold"),v(this,"clipThreshold"),v(this,"delay"),v(this,"audioContext"),v(this,"audioSource"),v(this,"metadata",{}),v(this,"analysing"),v(this,"track"),I(this,fm,void 0),I(this,id,void 0);const{lowVolumeThreshold:t,silentThreshold:i,clipThreshold:r,delay:n,media:s}={...Woe,...e};this.lowVolumeThreshold=t,this.silentThreshold=i,this.clipThreshold=r,this.delay=n,this.analysing=!1,A(this,id,s)}setTrack(e){if(!e)return;this.track=e.clone();const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.analyser=this.audioContext.createAnalyser(),h(this,id)==="screenshare"){P.emit(k.SCREENSHARE_AUDIO_TRACK_CREATED);return}P.emit(k.AUDIO_TRACK_CREATED)}getTrackMetadata(){if(!this.track)return null;switch(this.metadata.label=this.track.label,this.metadata.channelCountMode=this.analyser.channelCountMode,this.metadata.channelCount=this.analyser.channelCount,this.metadata.channelInterpretation=this.analyser.channelInterpretation,this.metadata.outputs=this.analyser.numberOfOutputs,this.analyser.numberOfOutputs){case 1:this.metadata.channelType="MONO";break;case 2:this.metadata.channelType="STEREO";break;case 4:this.metadata.channelType="QUAD";break}return this.metadata}async startTrackAnalysis(){if(!this.track||this.analysing)return!1;try{return await this.audioContext.resume(),await Nt(this,M1,IM).call(this),this.analysing=!0,!0}catch(e){return b.error(e),!1}}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,fm)))}cleanup(){var e,t,i,r,n;if(this.stopTrackAnalysis(),(e=this.analyser)==null||e.disconnect(),(t=this.audioSource)==null||t.disconnect(this.analyser),(i=this.audioSource)==null||i.disconnect(),(r=this.audioContext)==null||r.close(),this.audioContext=void 0,this.analyser=void 0,this.audioSource=void 0,(n=this.track)==null||n.stop(),this.track=void 0,h(this,id)==="screenshare"){P.emit(k.SCREENSHARE_AUDIO_TRACK_CLOSED);return}P.emit(k.AUDIO_TRACK_CLOSED)}static dbFS(e){const t=20*(Math.log(e)/Math.log(10));return Math.round(t*10)/10}};let OM=AM;fm=new WeakMap,id=new WeakMap,M1=new WeakSet,IM=async function(){try{const e=new MediaStream;e.addTrack(this.track),this.audioSource=this.audioContext.createMediaStreamSource(e),this.audioSource.connect(this.analyser),window.requestAnimationFrame(Nt(this,Qh,gy).bind(this))}catch(e){b.error(e)}},Qh=new WeakSet,gy=function(){const e=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData(e);let t=0;for(const s of e)t+=s*s;const i=Math.sqrt(t/e.length),r=AM.dbFS(i),n={volume:i,lowVolume:r<this.lowVolumeThreshold,silence:i<this.silentThreshold,clip:i>this.clipThreshold,timestamp:new Date().getTime()};h(this,id)==="screenshare"?P.emit(k.SCREENSHARE_AUDIO_TRACK_ANALYSIS,n):P.emit(k.AUDIO_TRACK_ANALYSIS,n),A(this,fm,setTimeout(()=>{window.requestAnimationFrame(Nt(this,Qh,gy).bind(this))},this.delay))};const as=new OM,Zh=new OM({media:"screenshare"}),qoe={nonBlackPixelLumaThreshold:20,identicalFrameSsimThreshold:.985,media:"video"};var vm,xo,Ic,ym,D1,L1,oP,N1,cP,my,dP,ah,fy,vy,lP;const Gl=class{constructor(e){I(this,ym),I(this,L1),I(this,N1),v(this,"metadata",{}),v(this,"video"),v(this,"canvas"),v(this,"nonBlackPixelLumaThreshold"),v(this,"identicalFrameSsimThreshold"),v(this,"previousFrame",new Uint8ClampedArray),I(this,vm,void 0),v(this,"track"),v(this,"analysing"),I(this,xo,void 0),I(this,Ic,void 0),v(this,"cloned",!1);const{nonBlackPixelLumaThreshold:t,identicalFrameSsimThreshold:i,media:r}={...qoe,...e};this.nonBlackPixelLumaThreshold=t,this.identicalFrameSsimThreshold=i,this.analysing=!1,A(this,xo,r)}setTrack(e,t){if(this.cloned=!1,this.track=e,this.metadata.resolution=t,h(this,xo)==="screenshare"){P.emit(k.SCREENSHARE_VIDEO_TRACK_CREATED);return}P.emit(k.VIDEO_TRACK_CREATED)}getTrackMetadata(){return this.track?(this.metadata.label=this.track.label,this.metadata):null}async startTrackAnalysis(){var e;return!this.track||this.analysing?!1:(!this.video&&!((e=this.video)!=null&&e.src)&&(A(this,Ic,new MediaStream),h(this,Ic).addTrack(this.track),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),[this.video.width,this.video.height]=this.metadata.resolution,this.video.srcObject=h(this,Ic)),window.requestAnimationFrame(Nt(this,ym,D1).bind(this)),this.analysing=!0,!0)}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,vm)))}setClonedTrack(e,t){var i;this.cloned=t,this.track=e;const{height:r,width:n}=(i=this.track)==null?void 0:i.getConstraints();this.metadata.resolution=[n,r]}resetClonedTrack(e){if(e){this.cloned=!1,this.track=e;const{height:t,width:i}=this.track.getConstraints();this.metadata.resolution=[i,t]}this.cleanup()}cleanup(){var e;if(this.stopTrackAnalysis(),this.cloned&&((e=this.track)==null||e.stop()),this.track=void 0,A(this,Ic,void 0),this.video&&(this.video.srcObject=void 0,this.video=void 0),this.canvas=void 0,this.previousFrame=new Uint8ClampedArray,h(this,xo)==="screenshare"){P.emit(k.SCREENSHARE_VIDEO_TRACK_CLOSED);return}P.emit(k.VIDEO_TRACK_CLOSED)}};let bu=Gl;vm=new WeakMap,xo=new WeakMap,Ic=new WeakMap,ym=new WeakSet,D1=function(){var e;try{const t=Nt(this,L1,oP).call(this),i=Nt(this,N1,cP).call(this,t.data,t.data.length),r=Nt(e=Gl,my,dP).call(e,this.previousFrame,t.data);this.previousFrame=t.data;const n={isBlackFrame:i,videoScore:r,isFrozenFrame:r>this.identicalFrameSsimThreshold,timestamp:new Date().getTime()};h(this,xo)==="screenshare"?P.emit(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS,n):P.emit(k.VIDEO_TRACK_ANALYSIS,n),A(this,vm,setTimeout(()=>{this.track&&window.requestAnimationFrame(Nt(this,ym,D1).bind(this))},3e3))}catch{this.stopTrackAnalysis(),h(this,xo)==="screenshare"?P.emit(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR):P.emit(k.VIDEO_TRACK_ANALYSIS_ERROR)}},L1=new WeakSet,oP=function(){var e,t;this.canvas.width=(e=this.video)==null?void 0:e.width,this.canvas.height=(t=this.video)==null?void 0:t.height;const i=this.canvas.getContext("2d");return i.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),i.getImageData(0,0,this.canvas.width,this.canvas.height)},N1=new WeakSet,cP=function(e,t){const i=this.nonBlackPixelLumaThreshold;let r=0;for(let n=4;n<t;n+=4)if(r+=.21*e[n]+.72*e[n+1]+.07*e[n+2],r>i*(n/4))return!1;return!0},my=new WeakSet,dP=function(e,t){var i,r,n;if(e.length!==t.length)return 0;const s=.01,a=.03,o=255,c=s*o*(s*o),d=a*o*(a*o),l=d/2,u=Nt(i=Gl,ah,fy).call(i,e),g=u.mean,m=u.variance,f=Math.sqrt(m),w=Nt(r=Gl,ah,fy).call(r,t),S=w.mean,y=w.variance,_=Math.sqrt(y),T=Nt(n=Gl,vy,lP).call(n,e,t,g,S),C=(2*g*S+c)/(g*g+S*S+c),D=(T+l)/(f*_+l),O=(2*f*_+d)/(m+y+d);return C*O*D},ah=new WeakSet,fy=function(e){let t=0,i;for(i=0;i<e.length;i++)t+=e[i];const r=t/(e.length-1);let n=0;for(i=1;i<e.length;i++)n=e[i-1]-r,t+=e[i]+n*n;return{mean:r,variance:t/e.length}},vy=new WeakSet,lP=function(e,t,i,r){let n=0;for(let s=0;s<e.length;s+=1)n+=(e[s]-i)*(t[s]-r);return n/e.length},I(bu,my),I(bu,ah),I(bu,vy);const os=new bu,Xh=new bu({media:"screenshare"});var Joe=Object.defineProperty,Koe=Object.getOwnPropertyDescriptor,Ns=(e,t,i,r)=>{for(var n=r>1?void 0:r?Koe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Joe(t,i,n),n};const yy={port:void 0},Yoe=["virtual","emulator","krisp","solstice conference","teams","manycam","blackHole"];function oo(e){const t=e.label.toLowerCase();return Oe._bowser.getOSName()==="macOS"&&t.includes("iphone")?(b.log("isVirtualDevice::ignore_macos_continuity"),!0):Yoe.some(i=>t.includes(i))}var Ya,bl,uP;const Ks=(uP=class{constructor(e){I(this,Ya,void 0),I(this,bl,void 0),A(this,Ya,e),A(this,bl,new AbortController)}static async init(){let e=[];return Ks.isDeviceListAvailable()?(e=await Ks.enumerateDevices(),b.info("initial_full_device_list",{devices:JSON.stringify(e)})):b.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices",{debuggingHint:"Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues."}),new Ks(e)}async destruct(){var e;(e=h(this,bl))==null||e.abort()}static isDeviceListAvailable(){return!!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}static enumerateDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(e){return b.error("enumerate_devices_failed",{error:e}),Promise.resolve([])}}static getAudioConstraints(e){const t={},{disableAP:i=!1,disableAEC:r=!1,disableNS:n=!1,disableAGC:s=!1,disableHPF:a=!1}=e.audioOptions||{};if(Oe.isFirefox()||Oe.isWebKitBased())t.audio={deviceId:e.audioDeviceId,autoGainControl:!s&&!i,echoCancellation:!r&&!i,noiseSuppression:!n&&!i};else{if(typeof t.audio=="boolean")return t;t.audio={},t.audio.optional=[e.audioDeviceId?{sourceId:e.audioDeviceId}:{sourceId:"default"},{echoCancellation:!r&&!i},{googEchoCancellation:!r&&!i},{googAutoGainControl:!s&&!i},{googNoiseSuppression:!n&&!i},{googHighpassFilter:!a&&!i},{googNoiseSuppression2:!n&&!i},{googEchoCancellation2:!r&&!i},{googAutoGainControl2:!s&&!i}]}return t}static getVideoConstraints(e){const t={},{videoDeviceId:i,videoTrackConstraints:r,facingMode:n="user",frameRate:s={ideal:24,max:30}}=e;return t.video=r||cM.vga,typeof t.video=="boolean"||(i&&(t.video.deviceId={exact:i}),t.video.facingMode=n,t.video.frameRate=s),t}static async getUserMediaWithTimeout(e={},t=0){try{if(b.info("getUserMediaWithTimeout::requesting_user_media",{timeout:t,constraints:JSON.stringify(e)}),!t){const r=await navigator.mediaDevices.getUserMedia(e);return b.info("getUserMediaWithTimeout::received_user_media",{timeout:t,constraints:JSON.stringify(e)}),r}const i=await Promise.race([navigator.mediaDevices.getUserMedia(e),new Promise((r,n)=>{setTimeout(()=>n(new Goe("Get user media timed out","ERR_GUM_TIMEOUT")),t)})]);return b.info("getUserMediaWithTimeout::received_user_media",{timeout:t,constraints:JSON.stringify(e)}),i}catch(i){throw b.error("getUserMediaWithTimeout::failed_to_access_local_media",{error:i,constraints:JSON.stringify(e)}),b.error("Failed to get access to local media.",{error:i,constraints:JSON.stringify(e)}),new No(i.name,i.message,e)}}static async getAudioTrack(e){const t=(await Ks.getUserMediaWithTimeout(e)).getAudioTracks()[0];return as.setTrack(t),t}static async getVideoTrack(e){var t,i,r;const n=(await Ks.getUserMediaWithTimeout(e)).getVideoTracks()[0],{width:s,height:a}=(t=e==null?void 0:e.video)!=null?t:{},o=[(i=s==null?void 0:s.ideal)!=null?i:640,(r=a==null?void 0:a.ideal)!=null?r:480];return os.setTrack(n,o),n}static async getScreenShareTracks(e){var t,i,r,n;let s=ee.hasFeature(re.EXTENSION_HACK),a=null;if(s)try{yy.port=window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome",{name:"chooseDesktopMedia"})}catch{E.addLogInCurrentSpan("error","Extension connect error"),s=!1}s&&(a=await new Promise(d=>{const l=setTimeout(()=>d(void 0),12e3);yy.port.onMessage.addListener(async u=>{if(u.value.streamId){const{streamId:g}=u.value;clearTimeout(l),d(g)}}),yy.port.postMessage({method:"chooseDesktopMedia",sources:["screen"]})}));let o;a?(E.addLogInCurrentSpan("error","Acquiring extension screenshare track"),o=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{maxWidth:1920,maxHeight:1080,chromeMediaSource:"desktop",chromeMediaSourceId:a},optional:[{maxFrameRate:parseInt((t=ee.getValue(re.VAL_MAX_FRAMERATE_EXT))!=null?t:"12",10)},{minFrameRate:parseInt((i=ee.getValue(re.VAL_MIN_FRAMERATE_EXT))!=null?i:"8",10)}]}}),E.addLogInCurrentSpan("error","Acquired extension screenshare track")):o=await navigator.mediaDevices.getDisplayMedia(e);const c={video:o.getVideoTracks()[0],audio:o.getAudioTracks()[0]};if(c.audio&&Zh.setTrack(c.audio),c.video){const{width:d,height:l}=e==null?void 0:e.video,u=[(r=d==null?void 0:d.ideal)!=null?r:1920,(n=l==null?void 0:l.ideal)!=null?n:1080];Xh.setTrack(c.video,u)}return c}static async getAudioAndVideoTrack(e){var t,i;const r=await Ks.getUserMediaWithTimeout(e),n=r.getAudioTracks()[0],s=r.getVideoTracks()[0];as.setTrack(n);const{width:a,height:o}=e==null?void 0:e.video,c=[(t=a==null?void 0:a.ideal)!=null?t:640,(i=o==null?void 0:o.ideal)!=null?i:480];return os.setTrack(s,c),{audioTrack:n,videoTrack:s}}onDeviceChange(e){Oe.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",xte(async t=>{const i=this.availableDevices,r=new Set(i.map(o=>o.deviceId));await this.repopulateAvailableDevices();const n=this.availableDevices,s=new Set(n.map(o=>o.deviceId)),a={added:n.filter(o=>!r.has(o.deviceId)),removed:i.filter(o=>!s.has(o.deviceId))};this.repopulateAvailableDevices().then(()=>e(t,a))},100),{signal:h(this,bl).signal})}async repopulateAvailableDevices(){const e=await Ks.enumerateDevices();A(this,Ya,e),Y.devices("AUDIO",this.getAudioDevices()),Y.devices("VIDEO",this.getVideoDevices()),Y.devices("SPEAKER",this.getSpeakerDevices()),b.info("repopulated_full_device_list",{devices:JSON.stringify(e)})}get availableDevices(){return h(this,Ya)}getAvailableDevicesByKind(e){return h(this,Ya).filter(t=>t.kind===e)}getDeviceById(e,t){return h(this,Ya).find(i=>i.deviceId===e&&i.kind===t)}getAudioDevices(){return this.getAvailableDevicesByKind("audioinput").sort((e,t)=>{const i=oo(e)?0:1;return(oo(t)?0:1)-i})}getVideoDevices(){return this.getAvailableDevicesByKind("videoinput").sort((e,t)=>{const i=oo(e)?0:1;return(oo(t)?0:1)-i})}getSpeakerDevices(){return this.getAvailableDevicesByKind("audiooutput").sort((e,t)=>{const i=oo(e)?0:1;return(oo(t)?0:1)-i})}},Ya=new WeakMap,bl=new WeakMap,uP);let St=Ks;Ns([E.trace("LocalMediaUtils.onDeviceChange")],St.prototype,"onDeviceChange",1);Ns([E.trace("LocalMediaUtils.repopulateAvailableDevices")],St.prototype,"repopulateAvailableDevices",1);Ns([E.trace("LocalMediaUtils.isDeviceListAvailable")],St,"isDeviceListAvailable",1);Ns([E.trace("LocalMediaUtils.enumerateDevices")],St,"enumerateDevices",1);Ns([E.trace("LocalMediaUtils.getUserMediaWithTimeout")],St,"getUserMediaWithTimeout",1);Ns([E.trace("LocalMediaUtils.getAudioTrack")],St,"getAudioTrack",1);Ns([E.trace("LocalMediaUtils.getVideoTrack")],St,"getVideoTrack",1);Ns([E.trace("LocalMediaUtils.getScreenShareTracks")],St,"getScreenShareTracks",1);Ns([E.trace("LocalMediaUtils.getAudioAndVideoTrack")],St,"getAudioAndVideoTrack",1);var Qoe=Object.defineProperty,Zoe=Object.getOwnPropertyDescriptor,Xd=(e,t,i,r)=>{for(var n=r>1?void 0:r?Zoe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Qoe(t,i,n),n},Bt,Ac;class nc{constructor(t){I(this,Bt,void 0),v(this,"audioMiddlewares",[]),v(this,"videoMiddlewares",[]),I(this,Ac,void 0),A(this,Bt,t)}terminateMiddlewareWebWorker(){if(h(this,Ac))try{rO(h(this,Ac)),A(this,Ac,void 0)}catch{b.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(t){var i,r;if(!((i=this.videoMiddlewares)!=null&&i.length))return t;const n=await Promise.all((r=this.videoMiddlewares)==null?void 0:r.map(l=>l())),s=new MediaStream;s.addTrack(t);const a=document.createElement("canvas"),o=a.getContext("2d"),c=document.createElement("video");c.srcObject=s,c.autoplay=!0,this.terminateMiddlewareWebWorker();const d=async()=>{if(!h(this,Bt).videoEnabled||t.readyState==="ended"){this.terminateMiddlewareWebWorker(),c.remove(),a.remove();return}try{o.drawImage(c,0,0);for(let l=0;l<n.length;l+=1)await n[l](a,o)}catch(l){b.error("getTransformedVideoTrack::middleware_execution_failed",{error:l})}};try{c.play()}catch{}return c.addEventListener("play",()=>{a.width=c.width||t.getSettings().width,a.height=c.width||t.getSettings().height,A(this,Ac,nO(d,50))},!1),a.captureStream().getVideoTracks()[0]}async addVideoMiddleware(t){return Oe.isSafari()?{success:!1,message:"Video middlewares are not yet supported in Safari."}:this.videoMiddlewares.includes(t)?{success:!0,message:"This video middleware has been applied, already. Skipping."}:(this.videoMiddlewares.push(t),h(this,Bt).videoEnabled?(h(this,Bt).setVideoTrack(await this.getTransformedVideoTrack(h(this,Bt).rawVideoTrack)),h(this,Bt).emit("VIDEO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the video middleware."}):{success:!0,message:"Successfully added the video middleware. It will be applied automatically once webcam is turned on."})}async removeVideoMiddleware(t){const i=this.videoMiddlewares.indexOf(t,0);return i>-1?(this.videoMiddlewares.splice(i,1),h(this,Bt).videoEnabled&&(h(this,Bt).setVideoTrack(await this.getTransformedVideoTrack(h(this,Bt).rawVideoTrack)),h(this,Bt).emit("VIDEO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the video middleware."}):{success:!0,message:"No such video middleware was found. Skipping."}}async getTransformedAudioTrack(t){var i,r;if(!((i=this.audioMiddlewares)!=null&&i.length))return t;const n=new AudioContext,s=await Promise.all((r=this.audioMiddlewares)==null?void 0:r.map(c=>c(n))),a=n.createMediaStreamSource(new MediaStream([t])),o=n.createMediaStreamDestination();try{let c=a;for(let d=0;d<s.length;d+=1)c.connect(s[d]),c=s[d];c.connect(o)}catch(c){return b.error("getTransformedAudioTrack::middleware_execution_failed",{error:c}),t}return o.stream.getAudioTracks()[0]}async addAudioMiddleware(t){return Oe.isSafari()?{success:!1,message:"Audio middlewares are not yet supported in Safari."}:this.audioMiddlewares.includes(t)?{success:!0,message:"This audio middleware has been applied, already. Skipping."}:(this.audioMiddlewares.push(t),h(this,Bt).audioEnabled?(h(this,Bt).setAudioTrack(await this.getTransformedAudioTrack(h(this,Bt).rawAudioTrack)),h(this,Bt).emit("AUDIO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the audio middleware."}):{success:!0,message:"Successfully added the audio middleware. It will be applied automatically once mic is turned on."})}async removeAudioMiddleware(t){const i=this.audioMiddlewares.indexOf(t,0);return i>-1?(this.audioMiddlewares.splice(i,1),h(this,Bt).audioEnabled&&(h(this,Bt).setAudioTrack(await this.getTransformedAudioTrack(h(this,Bt).rawAudioTrack)),h(this,Bt).emit("AUDIO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the audio middleware."}):{success:!0,message:"No such audio middleware was found. Skipping."}}}Bt=new WeakMap,Ac=new WeakMap;Xd([E.trace("MediaMiddlewareUtils.getTransformedVideoTrack")],nc.prototype,"getTransformedVideoTrack",1);Xd([E.trace("MediaMiddlewareUtils.addVideoMiddleware")],nc.prototype,"addVideoMiddleware",1);Xd([E.trace("MediaMiddlewareUtils.removeVideoMiddleware")],nc.prototype,"removeVideoMiddleware",1);Xd([E.trace("MediaMiddlewareUtils.getTransformedAudioTrack")],nc.prototype,"getTransformedAudioTrack",1);Xd([E.trace("MediaMiddlewareUtils.addAudioMiddleware")],nc.prototype,"addAudioMiddleware",1);Xd([E.trace("MediaMiddlewareUtils.removeAudioMiddleware")],nc.prototype,"removeAudioMiddleware",1);const Xoe=(e=0)=>new Promise(t=>setTimeout(t,e)),ece=(e,t,i)=>{const r=typeof i=="number"?i:250,n=e.createMediaStreamSource(t),s=e.createAnalyser();s.fftSize=2048,n.connect(s);const a=new Uint8Array(s.fftSize);let o=!1;setTimeout(()=>{o=!0},r);function c(){return o?Promise.resolve(!0):(s.getByteTimeDomainData(a),a.some(d=>d!==128&&d!==0)?Promise.resolve(!1):Xoe().then(c))}return c().then(d=>(n.disconnect(),d),d=>{throw n.disconnect(),d})},tce=typeof AudioContext<"u"?AudioContext:null;class sw{constructor(t){v(this,"_AudioContext"),v(this,"audioContext"),v(this,"_audioContextRefContainers");const i={AudioContext:tce,...t};Object.defineProperties(this,{_AudioContext:{value:i.AudioContext},audioContext:{value:null,writable:!0},_audioContextRefContainers:{value:new Set},AudioContextProvider:{enumerable:!0,value:sw}})}getOrCreate(t){if(!this._audioContextRefContainers.has(t)&&(this._audioContextRefContainers.add(t),this._AudioContext&&!this.audioContext))try{this.audioContext=new this._AudioContext}catch{}return this.audioContext}release(t){this._audioContextRefContainers.has(t)&&(this._audioContextRefContainers.delete(t),!this._audioContextRefContainers.size&&this.audioContext&&(this.audioContext.close(),this.audioContext=null))}}const pP=new sw,ice=3,rce=250;function nce(e){const t={},i=pP.getOrCreate(t);let r=ice;function n(){return r-=1,ece(i,e.srcObject,rce).then(s=>s?r>0?n():!0:!1).catch(()=>!0)}return n().finally(()=>{pP.release(t)})}async function _y(e){const t=new Audio,i=new MediaStream;i.addTrack(e),t.srcObject=i;let r=!1;try{const n=t.play();n&&await n,r=await nce(t),r&&b.info("checkIfAudioTrackIsSilent::silence_detected")}catch(n){b.error("checkIfAudioTrackIsSilent::failed_to_detect_silence",{error:n})}finally{t.pause(),t.remove()}return r}const Wl=class{constructor(){v(this,"mediaPermissionEvent"),this.mediaPermissionEvent=!0}static getInstance(){return Wl.instance||(Wl.instance=new Wl),Wl.instance}get shouldEmitMediaPermissionEvent(){return this.mediaPermissionEvent}setEmitMediaPermissionEvent(e){this.mediaPermissionEvent=e}};let MM=Wl;v(MM,"instance");const oh=MM.getInstance(),_c={setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(i){b.error("LocalStorage::setItem::crashed",{error:i,localStorage:{key:e,value:t}})}},getItem:e=>{try{return localStorage.getItem(e)}catch(t){b.error("LocalStorage::getItem::crashed",{error:t,localStorage:{key:e}})}return null}};var sce=Object.defineProperty,ace=Object.getOwnPropertyDescriptor,ot=(e,t,i,r)=>{for(var n=r>1?void 0:r?ace(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&sce(t,i,n),n},Je,Qa,hP;const DM=(hP=class extends zi.EventEmitter{constructor(e,t){super(),I(this,Je,void 0),I(this,Qa,void 0),v(this,"mediaMiddlewareUtils"),v(this,"audioTrack"),v(this,"rawAudioTrack"),v(this,"videoTrack"),v(this,"rawVideoTrack"),v(this,"screenShareTracks"),v(this,"audioEnabled"),v(this,"videoEnabled"),v(this,"screenShareEnabled"),v(this,"currentDevices"),v(this,"permissions"),v(this,"audioUpdateInProgress"),v(this,"videoUpdateInProgress"),v(this,"screenShareUpdateInProgress"),A(this,Je,e),A(this,Qa,new lM(t)),this.audioEnabled=!0,this.videoEnabled=!0,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.screenShareUpdateInProgress=!1,this.screenShareEnabled=!1,this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"},this.screenShareTracks={audio:void 0,video:void 0},this.currentDevices={audio:void 0,video:void 0,speaker:void 0},h(this,Je).onDeviceChange((i,r)=>this.onDeviceChange(r,!1)),this.conditionallyRestartAudio=this.conditionallyRestartAudio.bind(this),this.conditionallyRestartVideo=this.conditionallyRestartVideo.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange),this.on("AUDIO_TRACK_CHANGE",()=>{this.notifyIfTrackSilent()})}handlePermissionErrors(e,t){const i=Pf(t.name,t.message);this.permissions[e]=i,P.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:e})}async repopulateAvailableDevices(){return h(this,Je).repopulateAvailableDevices()}onVisibilityChange(e){document.visibilityState==="visible"&&(Oe.isMobile()&&this.conditionallyRestartAudio(),this.conditionallyRestartVideo()),Y.tabChanged(document.visibilityState==="visible"),document.visibilityState!=="visible"?Y.browserBackgrounded():Y.browserForegrounded()}async conditionallyRestartAudio(e){var t,i;if(!((t=this.currentDevices)!=null&&t.audio)||!this.audioEnabled)return;await Promise.race([new Promise(n=>{var s;return(s=this.rawAudioTrack)==null?void 0:s.addEventListener("unmute",a=>{n(a)})}),new Promise(n=>setTimeout(n,50))]),b.info("performingCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}});const r=await this.shouldReacquireTrack("audio");b.info("performedCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{reacquireTrack:r}}}),r&&(b.info("reacquiring_audio_track"),this.removeMediaStreamTrackListeners(this.rawAudioTrack),Oe.isChromiumBased()&&await h(this,Je).repopulateAvailableDevices(),await this.setupAudioStream((i=this.currentDevices.audio)==null?void 0:i.deviceId),this.addMediaStreamTrackListeners(this.rawAudioTrack),this.emit("AUDIO_TRACK_CHANGE"))}async conditionallyRestartVideo(e){var t;if(!((t=this.currentDevices)!=null&&t.video)||!this.videoEnabled)return;b.info("performingCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}}),await Promise.race([new Promise(r=>{var n;return(n=this.rawVideoTrack)==null?void 0:n.addEventListener("unmute",r)}),new Promise(r=>setTimeout(r,50))]);const i=await this.shouldReacquireTrack("video");b.info("performedCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{reacquireTrack:i}}}),i&&(b.info("reacquiring_video_track"),this.removeMediaStreamTrackListeners(this.rawVideoTrack),await h(this,Je).repopulateAvailableDevices(),await this.setupVideoStream(this.currentDevices.video.deviceId),this.addMediaStreamTrackListeners(this.rawVideoTrack),this.emit("VIDEO_TRACK_CHANGE"))}async shouldReacquireTrack(e){let t,i=!1;if(e==="audio"?(t=this.rawAudioTrack,i=this.audioEnabled):e==="video"&&(t=this.rawVideoTrack,i=this.videoEnabled),!t)return!1;const r=t.readyState==="ended"&&i&&!0;let n=!1;return e==="audio"&&(n=await _y(this.rawAudioTrack)),document.visibilityState==="visible"&&(t.muted||r||n)}onAudioUnmute(e){b.info("audio_track_unmuted",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}})}onVideoUnmute(e){b.info("video_track_unmuted",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}})}removeMediaStreamTrackListeners(e){if(b.info(`Removing ${e.kind} listerners`),!e)return;const t=e.kind==="audio"?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return e.removeEventListener("ended",t),e.removeEventListener("mute",t),e.removeEventListener("unmute",e.kind==="audio"?this.onAudioUnmute:this.onVideoUnmute),e}addMediaStreamTrackListeners(e){if(!e)return null;b.info(`adding_${e.kind}_stream_listerners`);const t=e.kind==="audio",i=t?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return e.addEventListener("ended",async()=>{await i();const r=t?this.audioEnabled:this.videoEnabled,n=t?this.audioTrack:this.videoTrack,s=t?"FORCE_MUTE_AUDIO":"FORCE_MUTE_VIDEO";r&&!(n&&n.readyState==="live"&&n.enabled)&&(b.info(`LocalMediaHandler::trackEnded::Failed to restart ${e.kind} track`),this.emit(s))}),e.addEventListener("mute",i),e.addEventListener("unmute",t?this.onAudioUnmute:this.onVideoUnmute),e}async notifyIfTrackSilent(){var e,t,i,r,n,s;this.audioEnabled&&this.audioTrack&&this.audioTrack.readyState!=="ended"&&this.audioTrack.enabled&&await _y(this.audioTrack)===!0&&(b.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent",{media:{audio:{enabled:this.audioEnabled,deviceId:(t=(e=this.audioTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId,permission:(i=this.permissions)==null?void 0:i.audio,deviceName:(n=(r=this.currentDevices)==null?void 0:r.audio)==null?void 0:n.label,trackId:(s=this.audioTrack)==null?void 0:s.id}}}),this.emit("AUDIO_TRACK_SILENT"))}async setupAudioStream(e,t=!0){var i,r,n;if(!this.audioUpdateInProgress)try{this.audioUpdateInProgress=!0;const s=h(this,Je).getAudioDevices();if(!s.length)return;let a=e;(!a||!s.find(c=>c.deviceId===a))&&(a=await this.getPreferredDeviceId("AUDIO"),b.debug("setupAudioStream::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}}));const o=St.getAudioConstraints({audioDeviceId:a});t&&((i=this.rawAudioTrack)==null||i.stop(),(r=this.audioTrack)==null||r.stop()),this.rawAudioTrack=await St.getAudioTrack(o),a=this.rawAudioTrack.getSettings().deviceId,((n=this.currentDevices.audio)==null?void 0:n.deviceId)!==a&&(this.currentDevices.audio=h(this,Je).getDeviceById(a,"audioinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.audio})),this.rawAudioTrack.enabled=this.audioEnabled,this.setAudioTrack(await this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack)),this.addMediaStreamTrackListeners(this.rawAudioTrack),await h(this,Je).repopulateAvailableDevices(),this.permissions.audio="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),Y.mediaPermission("AUDIO",ga.ACCEPTED),Y.selectedDevice("AUDIO",this.currentDevices.audio),a&&_c.setItem("lastUsedAudioDeviceId",a)}catch(s){this.handlePermissionErrors("audio",s)}finally{this.audioUpdateInProgress=!1}}async getPreferredDeviceId(e){var t,i;let r;if(e==="AUDIO"){const n=h(this,Je).getAudioDevices(),s=_c.getItem("lastUsedAudioDeviceId");b.debug("getPreferredDeviceId::lastUsedAudioDeviceId",{preferredDevice:{lastUsedPreferredDeviceId:s,kind:"audio"}});let a;s&&(a=n.find(o=>o.deviceId===s)),a?r=s:ee.hasFeature(re.REMOVE_OPERATIONAL_MIC)||(r=(await this.getOperationalMicDeviceId()).deviceId),r||(r=(t=n[0])==null?void 0:t.deviceId)}if(e==="VIDEO"){const n=_c.getItem("lastUsedVideoDeviceId");b.debug("getPreferredDeviceId::lastUsedVideoDeviceId",{preferredDevice:{kind:"video",lastUsedPreferredDeviceId:n}});const s=h(this,Je).getVideoDevices();let a;n&&(a=s.find(o=>o.deviceId===n)),a?r=n:r=(await this.getOperationalWebcamDeviceId()).deviceId,r||(r=(i=s[0])==null?void 0:i.deviceId)}return r}async setupVideoStream(e,t=!0){var i,r;if(!this.videoUpdateInProgress)try{this.videoUpdateInProgress=!0;const n=h(this,Je).getVideoDevices();if(!n.length)return;let s=e;if((!s||!n.find(a=>a.deviceId===s))&&(s=await this.getPreferredDeviceId("VIDEO"),b.debug("setupVideoStream::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:s,kind:"video"}})),t&&((i=this.videoTrack)==null||i.stop()),this.videoEnabled){const a=h(this,Qa).getVideoConstraints(s);this.rawVideoTrack=await St.getVideoTrack(a),s=this.rawVideoTrack.getSettings().deviceId,this.setVideoTrack(await this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack)),this.addMediaStreamTrackListeners(this.rawVideoTrack)}await h(this,Je).repopulateAvailableDevices(),((r=this.currentDevices.video)==null?void 0:r.deviceId)!==s&&(this.currentDevices.video=h(this,Je).getDeviceById(s,"videoinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.video})),this.permissions.video="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),Y.mediaPermission("VIDEO",ga.ACCEPTED),Y.selectedDevice("VIDEO",this.currentDevices.video),s&&_c.setItem("lastUsedVideoDeviceId",s)}catch(n){this.handlePermissionErrors("video",n)}finally{this.videoUpdateInProgress=!1}}async setupScreenShareStreams(){if(this.screenShareUpdateInProgress)return;const e=h(this,Qa).getScreenShareConstraints();ee.hasFeature(re.SCREENSHARE_MAX_DIMENSIONS)&&(e.video.width.max=window.screen.width,e.video.height.max=window.screen.height);try{this.screenShareUpdateInProgress=!0;const t=await St.getScreenShareTracks(e);this.setScreenShareTracks(t)}catch(t){throw this.handlePermissionErrors("screenshare",new No(t.name,t.message,e)),new R(t.message)}finally{this.screenShareUpdateInProgress=!1}}async setupSpeaker(e){var t;const i=h(this,Je).getSpeakerDevices();if(!i.length)return;const r=e!=null?e:i[0].deviceId;((t=this.currentDevices.speaker)==null?void 0:t.deviceId)!==r&&(this.currentDevices.speaker=h(this,Je).getDeviceById(r,"audiooutput"),Y.selectedDevice("SPEAKER",this.currentDevices.speaker),this.emit("DEVICE_CHANGE",{device:this.currentDevices.speaker})),document.querySelectorAll("audio").forEach(async n=>{if(typeof n.sinkId<"u"&&this.currentDevices.speaker.deviceId&&n.sinkId!==this.currentDevices.speaker.deviceId)try{await n.setSinkId(this.currentDevices.speaker.deviceId)}catch{}})}async getOperationalWebcamDeviceId(){const e=h(this,Je).getVideoDevices();if(!e.length)return{isOperational:!1,deviceId:null};oh.setEmitMediaPermissionEvent(!1);const t=[],i=await e.reduce(async(r,n)=>{const s=await r;if(s!==null)return s;const a=h(this,Qa).getVideoConstraints(n.deviceId);try{return(await St.getVideoTrack(a)).stop(),n.deviceId}catch(o){b.error("getOperationalWebcamDeviceId::could_not_acquire_video_device",{error:o,constraints:a}),t.push({exception:o,constraints:a})}return s},Promise.resolve(null));if(oh.setEmitMediaPermissionEvent(!0),!i&&t.length>0&&t.length===e.length){const{exception:r,constraints:n}=t[0];throw new No(r.name,r.message,n)}return i?{isOperational:!0,deviceId:i}:{isOperational:!1,deviceId:e[0].deviceId}}async getOperationalMicDeviceId(){const e=h(this,Je).getAudioDevices();if(!e.length)return{isOperational:!1,deviceId:null};const t=[];oh.setEmitMediaPermissionEvent(!1);const i=await e.reduce(async(r,n)=>{const s=await r;if(s!==null)return s;const a=St.getAudioConstraints({audioDeviceId:n.deviceId});try{const o=await St.getAudioTrack(a),c=await _y(o);if(o==null||o.stop(),!c)return n}catch(o){b.error("getOperationalMicDeviceId::could_not_acquire_audio_device",{error:o,constraints:a}),t.push({exception:o,constraints:a})}return s},Promise.resolve(null));if(oh.setEmitMediaPermissionEvent(!0),!i&&t.length>0&&t.length===e.length){const{exception:r,constraints:n}=t[0];throw new No(r.name,r.message,n)}return i?{isOperational:!0,deviceId:i.deviceId}:{isOperational:!1,deviceId:e[0].deviceId}}async setupStreams({audio:e,video:t}){var i;const r={};this.currentDevices||(this.currentDevices={audio:void 0,video:void 0,speaker:void 0});try{if(e&&!this.audioUpdateInProgress&&h(this,Je).getAudioDevices().length!==0){const a=await this.getPreferredDeviceId("AUDIO");b.info("setupStreams::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}});const o=St.getAudioConstraints({audioDeviceId:a});r.audio=o.audio}if(t&&!this.videoUpdateInProgress&&h(this,Je).getVideoDevices().length!==0){const a=await this.getPreferredDeviceId("VIDEO");b.info("setupStreams::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"video"}});const o=h(this,Qa).getVideoConstraints(a);r.video=o.video}if(((i=Object.keys(r))==null?void 0:i.length)===0){this.audioEnabled=e!=null?e:this.audioEnabled,this.videoEnabled=t!=null?t:this.videoEnabled,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1;return}const{audioTrack:n,videoTrack:s}=await St.getAudioAndVideoTrack(r);e&&n&&(this.audioTrack=n,this.rawAudioTrack=n,this.permissions.audio="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),this.currentDevices.audio=h(this,Je).getDeviceById(n.getSettings().deviceId,"audioinput"),_c.setItem("lastUsedAudioDeviceId",n.getSettings().deviceId)),t&&s&&(this.videoTrack=s,this.rawVideoTrack=s,this.permissions.video="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),this.currentDevices.video=h(this,Je).getDeviceById(s.getSettings().deviceId,"videoinput"),_c.setItem("lastUsedVideoDeviceId",s.getSettings().deviceId)),await h(this,Je).repopulateAvailableDevices()}catch(n){n.name==="NotAllowedError"&&(e&&await this.setupAudioStream(),t&&await this.setupVideoStream())}this.audioEnabled=!!this.audioTrack,this.videoEnabled=!!this.videoTrack,this.screenShareEnabled=!1,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,await this.setupSpeaker()}stopAudioTrack(){var e,t;this.audioUpdateInProgress||(this.audioUpdateInProgress=!0,(e=this.audioTrack)==null||e.stop(),(t=this.rawAudioTrack)==null||t.stop(),this.audioEnabled=!1,this.audioUpdateInProgress=!1)}stopVideoTrack(){var e,t;this.videoUpdateInProgress||(this.videoUpdateInProgress=!0,(e=this.videoTrack)==null||e.stop(),(t=this.rawVideoTrack)==null||t.stop(),this.videoEnabled=!1,this.videoUpdateInProgress=!1)}stopScreenShareTracks(e={}){var t,i,r,n;if(this.screenShareUpdateInProgress)return;this.screenShareUpdateInProgress=!0;const{audio:s=!0,video:a=!0}=e;s&&((i=(t=this.screenShareTracks)==null?void 0:t.audio)==null||i.stop()),a&&((n=(r=this.screenShareTracks)==null?void 0:r.video)==null||n.stop()),this.screenShareEnabled=!1,this.screenShareUpdateInProgress=!1}removeAudioTrack(){this.stopAudioTrack(),this.audioTrack=void 0,this.rawAudioTrack=void 0,as.cleanup()}removeVideoTrack(){this.stopVideoTrack(),this.videoTrack=void 0,this.rawVideoTrack=void 0,os.cleanup()}removeScreenShareTracks(e){var t;(t=this.screenShareTracks.video)==null||t.removeEventListener("ended",this.onScreenShareEnded),this.stopScreenShareTracks(e),this.screenShareTracks={audio:void 0,video:void 0}}removeAllTracks(){this.removeAudioTrack(),this.removeVideoTrack(),this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video})}setAudioTrack(e){e!==this.audioTrack&&(e===void 0&&this.stopAudioTrack(),this.audioTrack=e,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled))}setVideoTrack(e){e!==this.videoTrack&&(e===void 0&&this.stopVideoTrack(),this.videoTrack=e)}setScreenShareTracks(e){var t;const{audio:i,video:r}=e;(!i||!r)&&this.stopScreenShareTracks({audio:!!i,video:!!r}),this.screenShareTracks=e,(t=this.screenShareTracks.video)==null||t.addEventListener("ended",this.onScreenShareEnded.bind(this))}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}disableAudio(){this.audioEnabled=!1,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async enableAudio(){var e;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((e=this.currentDevices.audio)==null?void 0:e.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1,b.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio",{debuggingHint:"Refer to SelfController::mediaPermissionError log."});return}this.audioEnabled=!0}catch(t){this.audioEnabled=!1,this.audioTrack=void 0,this.rawAudioTrack=void 0,b.error("LocalMediaHandler::enableAudio",{error:t},!0)}this.audioTrack&&(this.audioTrack.enabled=!0),this.rawAudioTrack&&(this.rawAudioTrack.enabled=!0),!(this.permissions.audio==="ACCEPTED"||!this.audioEnabled)&&(this.permissions.audio="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}))}async toggleAudio(){var e;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((e=this.currentDevices.audio)==null?void 0:e.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1;return}this.audioEnabled=!this.audioEnabled}catch(t){this.audioEnabled=!1,b.error("LocalMediaHandler::toggleAudio",{error:t},!0)}this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async toggleVideo(){var e;if(this.permissions.video==="DENIED"){this.videoEnabled=!1;return}if(this.videoEnabled){this.removeVideoTrack();return}this.videoEnabled=!0;try{await this.setupVideoStream((e=this.currentDevices.video)==null?void 0:e.deviceId)}catch{this.videoEnabled=!1}this.videoTrack&&(this.videoTrack.enabled=this.videoEnabled),this.rawVideoTrack&&(this.rawVideoTrack.enabled=this.videoEnabled),!(this.permissions.video==="ACCEPTED"||!this.videoEnabled)&&(this.permissions.video="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}))}async toggleScreenShare(){if(this.screenShareEnabled){this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video});return}try{if(await this.setupScreenShareStreams(),this.screenShareEnabled=!0,this.permissions.screenshare==="ACCEPTED")return;this.permissions.screenshare="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"})}catch{this.screenShareEnabled=!1}}getAllDevices(){return h(this,Je).availableDevices}getDeviceById(e,t){return h(this,Je).getDeviceById(e,t)}getAudioDevices(){return h(this,Je).getAudioDevices()}getVideoDevices(){return h(this,Je).getVideoDevices()}getSpeakerDevices(){return h(this,Je).getSpeakerDevices()}async onDeviceChange(e,t){var i,r;(i=e==null?void 0:e.added)==null||i.forEach(async n=>{n&&(t||!oo(n))&&(n.kind==="audioinput"?(await this.setupAudioStream(n.deviceId),this.emit("AUDIO_TRACK_CHANGE")):n.kind==="videoinput"?(await this.setupVideoStream(n.deviceId),this.emit("VIDEO_TRACK_CHANGE")):n.kind==="audiooutput"&&await this.setupSpeaker(n.deviceId))}),(r=e==null?void 0:e.removed)==null||r.forEach(async n=>{var s,a,o;n&&((ee.hasFeature(re.DEVICE_REMOVE_EXP)||!Oe.isChromiumBased())&&(n.kind==="audioinput"&&n.deviceId===((s=this.currentDevices.audio)==null?void 0:s.deviceId)?(await this.setupAudioStream(),this.emit("AUDIO_TRACK_CHANGE")):n.kind==="videoinput"&&n.deviceId===((a=this.currentDevices.video)==null?void 0:a.deviceId)&&(await this.setupVideoStream(),this.emit("VIDEO_TRACK_CHANGE"))),n.kind==="audiooutput"&&n.deviceId===((o=this.currentDevices.speaker)==null?void 0:o.deviceId)&&await this.setupSpeaker())})}static async init(e){const t=await St.init(),i=new DM(t,e),r=new nc(i);return i.mediaMiddlewareUtils=r,i}emit(e,...t){return super.emit(e,...t)}on(e,t){return super.on(e,t)}async removeDocumentEventListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}addAudioMiddleware(e){return this.mediaMiddlewareUtils.addAudioMiddleware(e)}removeAudioMiddleware(e){return this.mediaMiddlewareUtils.removeAudioMiddleware(e)}addVideoMiddleware(e){return this.mediaMiddlewareUtils.addVideoMiddleware(e)}removeVideoMiddleware(e){return this.mediaMiddlewareUtils.removeVideoMiddleware(e)}async enableVideo(){await this.toggleVideo()}async disableVideo(){await this.toggleVideo()}async enableScreenShare(){await this.toggleScreenShare()}async disableScreenShare(){await this.toggleScreenShare()}getCurrentDevices(){return this.currentDevices}destruct(){this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(),h(this,Je).destruct(),this.removeAllTracks(),this.removeAllListeners()}},Je=new WeakMap,Qa=new WeakMap,hP);let it=DM;ot([E.trace("OldMediaHandler.shouldReacquireTrack")],it.prototype,"shouldReacquireTrack",1);ot([E.trace("OldMediaHandler.removeMediaStreamTrackListeners")],it.prototype,"removeMediaStreamTrackListeners",1);ot([E.trace("OldMediaHandler.addMediaStreamTrackListeners")],it.prototype,"addMediaStreamTrackListeners",1);ot([E.trace("OldMediaHandler.setupAudioStream")],it.prototype,"setupAudioStream",1);ot([E.trace("OldMediaHandler.getPreferredDeviceId")],it.prototype,"getPreferredDeviceId",1);ot([E.trace("OldMediaHandler.setupVideoStream")],it.prototype,"setupVideoStream",1);ot([E.trace("OldMediaHandler.setupScreenShareStreams")],it.prototype,"setupScreenShareStreams",1);ot([E.trace("OldMediaHandler.setupSpeaker")],it.prototype,"setupSpeaker",1);ot([E.trace("OldMediaHandler.getOperationalWebcamDeviceId")],it.prototype,"getOperationalWebcamDeviceId",1);ot([E.trace("OldMediaHandler.getOperationalMicDeviceId")],it.prototype,"getOperationalMicDeviceId",1);ot([E.trace("OldMediaHandler.setupStreams")],it.prototype,"setupStreams",1);ot([E.trace("OldMediaHandler.stopAudioTrack")],it.prototype,"stopAudioTrack",1);ot([E.trace("OldMediaHandler.stopVideoTrack")],it.prototype,"stopVideoTrack",1);ot([E.trace("OldMediaHandler.stopScreenShareTracks")],it.prototype,"stopScreenShareTracks",1);ot([E.trace("OldMediaHandler.removeAudioTrack")],it.prototype,"removeAudioTrack",1);ot([E.trace("OldMediaHandler.removeVideoTrack")],it.prototype,"removeVideoTrack",1);ot([E.trace("OldMediaHandler.removeScreenShareTracks")],it.prototype,"removeScreenShareTracks",1);ot([E.trace("OldMediaHandler.removeAllTracks")],it.prototype,"removeAllTracks",1);ot([E.trace("OldMediaHandler.setAudioTrack")],it.prototype,"setAudioTrack",1);ot([E.trace("OldMediaHandler.setVideoTrack")],it.prototype,"setVideoTrack",1);ot([E.trace("OldMediaHandler.setScreenShareTracks")],it.prototype,"setScreenShareTracks",1);ot([E.trace("OldMediaHandler::disableAudio")],it.prototype,"disableAudio",1);ot([E.trace("OldMediaHandler::enableAudio")],it.prototype,"enableAudio",1);ot([E.trace("OldMediaHandler.toggleAudio")],it.prototype,"toggleAudio",1);ot([E.trace("OldMediaHandler.toggleVideo")],it.prototype,"toggleVideo",1);ot([E.trace("OldMediaHandler.toggleScreenShare")],it.prototype,"toggleScreenShare",1);class oce extends At{constructor(){super(...arguments),v(this,"localMediaHandler")}async init(t={}){var i,r;if(Oe.init(),!this.localMediaHandler)try{let n=!0;const s=t.constraints||Xi;if(Ze.defaults.mediaHandler)n=!1,this.localMediaHandler=Ze.defaults.mediaHandler.localMediaHandler;else if(navigator.RNLocalMediaHandlerImpl){const{RNLocalMediaHandlerImpl:a}=navigator;this.localMediaHandler=await a.init()}else ee.hasFeature(re.NEW_LOCAL_MEDIA_HANDLER)?this.localMediaHandler=new _n(s):this.localMediaHandler=await it.init(s);n&&await this.localMediaHandler.setupStreams({video:(i=t==null?void 0:t.video)!=null?i:!0,audio:(r=t==null?void 0:t.audio)!=null?r:!0})}catch(n){b.error("DyteSelf::init::Failed To Setup Streams",{error:{name:n.name,message:n.message}})}}get audioTrack(){return this.localMediaHandler.audioTrack}get rawAudioTrack(){return this.localMediaHandler.rawAudioTrack}async addAudioMiddleware(t){return this.localMediaHandler.addAudioMiddleware(t)}async removeAudioMiddleware(t){return this.localMediaHandler.removeAudioMiddleware(t)}get videoTrack(){return this.localMediaHandler.videoTrack}get rawVideoTrack(){return this.localMediaHandler.rawVideoTrack}async addVideoMiddleware(t){return this.localMediaHandler.addVideoMiddleware(t)}async removeVideoMiddleware(t){return this.localMediaHandler.removeVideoMiddleware(t)}get screenShareTracks(){return this.localMediaHandler.screenShareTracks}get audioEnabled(){return this.localMediaHandler.audioEnabled}get videoEnabled(){return this.localMediaHandler.videoEnabled}get screenShareEnabled(){return this.localMediaHandler.screenShareEnabled}async enableAudio(){await this.localMediaHandler.enableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async enableVideo(){await this.localMediaHandler.enableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableAudio(){await this.localMediaHandler.disableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async disableVideo(){await this.localMediaHandler.disableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}getCurrentDevices(){return this.localMediaHandler.getCurrentDevices()}async getAudioDevices(){return await this.localMediaHandler.getAudioDevices()}async getVideoDevices(){return await this.localMediaHandler.getVideoDevices()}async getSpeakerDevices(){return await this.localMediaHandler.getSpeakerDevices()}getDeviceById(t,i){let r;return i==="audio"?r="audioinput":i==="video"?r="videoinput":i==="speaker"&&(r="audiooutput"),this.localMediaHandler.getDeviceById(t,r)}async setDevice(t){const i={added:[t],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(i,!0);return}switch(t.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(t)}catch{}finally{this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(t);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(t)}catch{}finally{this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:t})}}var cce=Object.defineProperty,dce=Object.getOwnPropertyDescriptor,hi=(e,t,i,r)=>{for(var n=r>1?void 0:r?dce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&cce(t,i,n),n},qt=(e=>(e.OFF_STAGE="OFF_STAGE",e.REQUESTED_TO_JOIN_STAGE="REQUESTED_TO_JOIN_STAGE",e.ACCEPTED_TO_JOIN_STAGE="ACCEPTED_TO_JOIN_STAGE",e.ON_STAGE="ON_STAGE",e))(qt||{}),bc,Fs,es,wl,ch,Re,Ae,gP;let Vt=(gP=class extends oce{constructor(e,t,i,r,n){var s;super(),I(this,Re),v(this,"id"),v(this,"name"),v(this,"picture"),v(this,"clientSpecificId"),v(this,"waitlistStatus"),I(this,bc,void 0),I(this,Fs,void 0),I(this,es,void 0),I(this,wl,void 0),v(this,"role"),v(this,"userId"),v(this,"organizationId"),v(this,"supportsRemoteControl",!1),v(this,"device"),I(this,ch,"OFF_STAGE"),v(this,"stageStatus"),v(this,"presetName"),v(this,"roomState","init"),this.id=e,this.userId=t.id,this.name=t.name,this.picture=t.picture,this.clientSpecificId=(s=t.customParticipantId)!=null?s:t.clientSpecificId,this.waitlistStatus="none",A(this,es,i),A(this,Fs,r),A(this,wl,!1),this.organizationId=t.organizationId,this.supportsRemoteControl=Oe.isElectron(),this.device=Oe.getDeviceInfo(),this.presetName=n,A(this,bc,Ee.isV2AuthToken?r.viewType:i.viewType),this.updatePermission()}static async __init__(e,t,i,r,n){var s,a,o,c;let d=(a=(s=Ze.defaults)==null?void 0:s.audio)!=null?a:!0,l=(c=(o=Ze.defaults)==null?void 0:o.video)!=null?c:!0;i.canProduceAudio!=="ALLOWED"&&(d=!1),i.canProduceVideo!=="ALLOWED"&&(l=!1);const u=new Vt(e,t,i,r,n);return await u.init({audio:d,video:l}),u.setupEvents(),u}async updatePermission(){var e,t;if(Oe.getName()==="firefox")return;const i="microphone",r="camera",n=await((e=navigator==null?void 0:navigator.permissions)==null?void 0:e.query({name:i})),s=await((t=navigator==null?void 0:navigator.permissions)==null?void 0:t.query({name:r})),a=(c,d)=>{this.mediaPermissions[c]=d;const l={message:this.mediaPermissions[c],kind:c};d==="DENIED"?P.emit(k.MEDIA_PERMISSION_ERROR,l):P.emit(k.MEDIA_PERMISSION_UPDATE,l)},o=(c,d)=>{switch(d){case"granted":a(c,"ACCEPTED");break;case"denied":a(c,"DENIED");break}this.localMediaHandler.repopulateAvailableDevices()};n&&(n.onchange=()=>o("audio",n.state)),s&&(s.onchange=()=>o("video",s.state))}setupEvents(){P.on(k.ROOM_NODE_CONNECTED,async()=>{h(this,Re,Ae).isDisconnected&&await this.resetSelf(),h(this,Re,Ae).isDisconnected=!1,b.info("DyteSelf::ROOM_NODE_CONNECTED")}),P.on(k.RESET_PRODUCER_STATE,async()=>{this.roomJoined&&h(this,Re,Ae)instanceof ve&&(this.localMediaHandler.videoEnabled&&await h(this,Re,Ae).shareWebcam(this.localMediaHandler.videoTrack),this.localMediaHandler.audioEnabled&&await h(this,Re,Ae).shareMic(this.localMediaHandler.audioTrack),this.localMediaHandler.screenShareEnabled&&await h(this,Re,Ae).shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio}))}),this.localMediaHandler.on("AUDIO_TRACK_CHANGE",async()=>{if(b.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE",{...Eo(this)}),this.roomJoined&&this.audioEnabled)try{await h(this,Re,Ae).shareMic(this.audioTrack)}catch(e){b.error("DyteSelf::setupEvents::Error while sharing mic",{error:e}),this.localMediaHandler.disableAudio()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}),this.localMediaHandler.on("VIDEO_TRACK_CHANGE",async()=>{if(b.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE",{...Eo(this)}),this.videoEnabled&&this.roomJoined)try{await h(this,Re,Ae).shareWebcam(this.videoTrack)}catch(e){b.error("DyteSelf::setupEvents::failed shareWebcam",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}),this.localMediaHandler.on("DEVICE_CHANGE",async({device:e})=>{this.emit("deviceUpdate",{device:e})}),this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE",async()=>{if(!this.roomJoined){b.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode");return}if(this.screenShareEnabled)try{await h(this,Re,Ae).shareScreen(this.screenShareTracks)}catch(e){b.error("DyteSelf::setupEvents::Error while sharing screen",{error:e}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}b.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE",{...Eo(this)}),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}),this.localMediaHandler.on("SCREENSHARE_ENDED",async()=>{await this.disableScreenShare(),b.info("DyteSelf::setupEvents::SCREENSHARE_ENDED",{...Eo(this)})}),this.localMediaHandler.on("AUDIO_TRACK_SILENT",()=>{this.emit("audioTrackSilent"),Y.mediaTrackMuted("AUDIO")}),this.localMediaHandler.on("FORCE_MUTE_AUDIO",this.disableAudio),this.localMediaHandler.on("FORCE_MUTE_VIDEO",async()=>{this.roomJoined&&await h(this,Re,Ae).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),Y.videoOff()})}get mediaPermissions(){return this.localMediaHandler.permissions}get permissions(){return h(this,es)}get suggestedTheme(){return h(this,Fs)}get config(){return h(this,Fs)}get roomJoined(){var e;return((e=h(this,Re,Ae))==null?void 0:e.roomJoined)===!0}setName(e){if(!e)throw new R("Name cannot be empty.");this.name=e}async setupTracks(e={}){var t,i;return e.forceReset&&(h(this,Re,Ae).stopAllProducers(),this.localMediaHandler.removeAllTracks()),this.localMediaHandler.setupStreams({video:(t=e.video)!=null?t:!0,audio:(i=e.audio)!=null?i:!0})}async resetSelf(){var e,t,i,r,n,s,a,o,c,d;Y.callEnded(),(i=(t=(e=h(this,Re,Ae))==null?void 0:e.sfuHandler)==null?void 0:t.cleanupConsumers)==null||i.call(t),await((s=(n=(r=h(this,Re,Ae))==null?void 0:r.sfuHandler)==null?void 0:n.setupTransports)==null?void 0:s.call(n)),await((a=h(this,Re,Ae))==null?void 0:a.joinRoom(this.name,!this.localMediaHandler.audioEnabled,h(this,Re,Ae).roomUUID,h(this,Re,Ae).meetingTitle,{audio:this.localMediaHandler.audioEnabled,video:this.localMediaHandler.videoEnabled,screen:this.localMediaHandler.screenShareEnabled})),this.localMediaHandler.videoEnabled&&await((o=h(this,Re,Ae))==null?void 0:o.shareWebcam(this.localMediaHandler.videoTrack)),this.localMediaHandler.audioEnabled&&await((c=h(this,Re,Ae))==null?void 0:c.shareMic(this.localMediaHandler.audioTrack)),this.localMediaHandler.screenShareEnabled&&await((d=h(this,Re,Ae))==null?void 0:d.shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio})),b.info("DyteSelf::resetSelf")}async destructMediaHandler(){return b.info("DyteSelf::destructMediaHandler"),this.localMediaHandler.destruct()}async removeDocumentEventListeners(){return b.info("DyteSelf::removeDocumentEventListeners"),this.localMediaHandler.removeDocumentEventListeners()}async enableAudio(){if(this.permissions.canProduceAudio!==so.notAllowed&&!(h(this,Fs).viewType==="WEBINAR"&&h(this,es).canProduceAudio===so.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.audioEnabled){if(await this.localMediaHandler.enableAudio(),this.roomJoined){if(this.audioTrack)try{await h(this,Re,Ae).shareMic(this.audioTrack)}catch(e){b.error("DyteSelf::enableAudio::Error while sharing mic",{error:e}),this.localMediaHandler.disableAudio()}if(!this.audioEnabled)return;h(this,Re,Ae).unmuteSelf()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),Y.audioOn()}}async enableVideo(){if(h(this,es).canProduceVideo!==so.notAllowed&&!(h(this,Fs).viewType==="WEBINAR"&&h(this,es).canProduceVideo===so.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.videoEnabled){if(await this.localMediaHandler.enableVideo(),this.roomJoined)try{await h(this,Re,Ae).shareWebcam(this.videoTrack)}catch(e){b.error("DyteSelf::enableVideo::Error while sharing video",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),b.info("DyteSelf.enableVideo",{...Eo(this)}),Y.videoOn()}}async enableScreenShare(){if(!this.roomJoined)throw new R("Can`t enable screenshare without joining room");if(h(this,es).canProduceScreenshare!==so.notAllowed&&!(h(this,Fs).viewType==="WEBINAR"&&h(this,es).canProduceScreenshare===so.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.screenShareEnabled){if(await this.localMediaHandler.enableScreenShare(),this.screenShareTracks.audio||this.screenShareTracks.video)try{await h(this,Re,Ae).shareScreen(this.screenShareTracks)}catch(e){b.error("DyteSelf::enableScreenShare::Error while sharing screen",{error:e}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}}async disableAudio(){this.audioEnabled&&(this.localMediaHandler.disableAudio(),this.roomJoined&&h(this,Re,Ae).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),Y.audioOff())}async disableVideo(){this.videoEnabled&&(await this.localMediaHandler.disableVideo(),this.roomJoined&&await h(this,Re,Ae).pauseWebcam(),this.mediaPermissions.video==="ACCEPTED"&&(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),Y.videoOff()))}async disableScreenShare(){this.screenShareEnabled&&(await this.localMediaHandler.disableScreenShare(),this.roomJoined&&await h(this,Re,Ae).disableScreenShare(),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks}))}getAllDevices(){return this.localMediaHandler.getAllDevices()}setIsPinned(e,t=!0){A(this,wl,e);const i=e?"pinned":"unpinned";t&&this.emit(i,this)}get isPinned(){return h(this,wl)}get webinarStageStatus(){return h(this,ch)}async pin(){if(!this.roomJoined)throw new R("Can`t pin participants without joining room");return h(this,Re,Ae).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new R("Can`t unpin participants without joining room");return h(this,Re,Ae).pinPeer(null)}async setDevice(e){const t={added:[e],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(t,!0);return}switch(e.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(e)}catch{this.roomJoined&&await h(this,Re,Ae).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(e);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(e)}catch{this.roomJoined&&await h(this,Re,Ae).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:e})}cleanUpTracks(){var e,t,i,r;(e=this.audioTrack)==null||e.stop(),(t=this.rawAudioTrack)==null||t.stop(),(i=this.videoTrack)==null||i.stop(),(r=this.rawVideoTrack)==null||r.stop()}async requestToJoinStage(){if(!this.roomJoined)throw new R("Can`t request to join stage without joining room");if(h(this,bc)!==gn.Webinar)throw new R("Not allowed to go on stage on non webinar meeting");if(!this.permissions.requestProduce)throw b.error("DyteSelf::requestGoToStage::permission_denied"),new R("User does not have permission to go on stage");await h(this,Re,Ae).requestToJoinStage(Yb.PRESENT),this.setWebinarStageStatus("REQUESTED_TO_JOIN_STAGE")}async withdrawRequestToJoinStage(){if(!this.roomJoined)throw new R("Can`t request to join stage without joining room");if(h(this,bc)!==gn.Webinar)throw new R("Not allowed to go on stage on non webinar meeting");this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"&&(await h(this,Re,Ae).withdrawRequestToJoinStage(),this.setWebinarStageStatus("OFF_STAGE"))}async leaveStage(){if(!this.roomJoined)throw new R("Can`t leave stage without joining room");if(h(this,bc)!==gn.Webinar)throw new R("Not allowed to leave stage on non webinar meeting");await this.disableScreenShare(),await this.disableVideo(),await this.disableAudio(),this.localMediaHandler.destruct(),await h(this,Re,Ae).stopPresenting(),this.setWebinarStageStatus("OFF_STAGE")}async joinStage(){if(!this.roomJoined)throw new R("Can`t join stage without joining room");if(!this.permissions.canPresent&&this.webinarStageStatus!=="ACCEPTED_TO_JOIN_STAGE")throw b.error("DyteSelf::joinStage::permission_denied"),new R("User does not have permission to join stage");await h(this,Re,Ae).startPresenting()}setWebinarStageStatus(e){switch(A(this,ch,e),e){case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}async disablePreview(){return this}},bc=new WeakMap,Fs=new WeakMap,es=new WeakMap,wl=new WeakMap,ch=new WeakMap,Re=new WeakSet,Ae=function(){return $t()},gP);hi([E.trace("DyteSelf.setupEvents")],Vt.prototype,"setupEvents",1);hi([E.trace("DyteSelf.setupTracks")],Vt.prototype,"setupTracks",1);hi([E.trace("DyteSelf.resetSelf")],Vt.prototype,"resetSelf",1);hi([E.trace("DyteSelf.destructMediaHandler")],Vt.prototype,"destructMediaHandler",1);hi([E.trace("DyteSelf.removeDocumentEventListeners")],Vt.prototype,"removeDocumentEventListeners",1);hi([E.trace("DyteSelf.enableAudio")],Vt.prototype,"enableAudio",1);hi([E.trace("DyteSelf.enableVideo")],Vt.prototype,"enableVideo",1);hi([E.trace("DyteSelf.enableScreenShare")],Vt.prototype,"enableScreenShare",1);hi([E.trace("DyteSelf.disableAudio")],Vt.prototype,"disableAudio",1);hi([E.trace("DyteSelf.disableVideo")],Vt.prototype,"disableVideo",1);hi([E.trace("DyteSelf.disableScreenShare")],Vt.prototype,"disableScreenShare",1);hi([E.trace("DyteSelf.setDevice")],Vt.prototype,"setDevice",1);hi([E.trace("DyteSelf.requestToJoinStage")],Vt.prototype,"requestToJoinStage",1);hi([E.trace("DyteSelf.withdrawRequestToJoinStage")],Vt.prototype,"withdrawRequestToJoinStage",1);hi([E.trace("DyteSelf.leaveStage")],Vt.prototype,"leaveStage",1);hi([E.trace("DyteSelf.joinStage")],Vt.prototype,"joinStage",1);hi([E.trace("DyteSelf.deprecated.disablePreview")],Vt.prototype,"disablePreview",1);Vt=hi([Si(e=>{throw new R(e.message,"1100")})],Vt);class lce{constructor(t){v(this,"socket"),this.socket=t}set onReconnect(t){this.socket.onStateEvent("reconnected",t)}async joinRoom(t,i,r,n){const s={capabilities:[],peer:{displayName:t,peerId:i,userId:r},roomUuid:n},a=Lne.fromBinary((await this.socket.sendMessagePromise(Ne.joinRoom,Bne.toBinary(s))).payload);await P.emitAsync(k.SOCKET_SERVICE_ROOM_JOINED,a);try{const{room:o}=await this.getRoomState();P.emit(k.ROOM_STATE,o)}catch(o){b.error("RoomSocketHandler.joinRoom.failedToGetRoomState",{error:o})}}async getRoomState(){let t=qk.create();try{const i=await this.socket.sendMessagePromise(Ne.getRoomInfo);t=qk.fromBinary(i.payload)}catch(i){b.error("getRoomState::binary_decode_error",{error:i})}return t}leaveRoom(){this.socket.sendMessage(Ne.leaveRoom,Gne.toBinary({}))}}function uce(e){if(!Ee.isV2AuthToken)return!1;const t=e;return[t.canProduceAudio,t.canProduceScreenshare,t.canProduceVideo].includes(di.Allowed)}function LM(e){return ee.hasFeature(re.LIVESTREAM)?e.viewType!=="LIVESTREAM":!0}var pce=Object.defineProperty,hce=Object.getOwnPropertyDescriptor,kp=(e,t,i,r)=>{for(var n=r>1?void 0:r?hce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&pce(t,i,n),n},wc,zt,ri,mP;const NM=(mP=class{constructor(e,t){I(this,zt),v(this,"self"),v(this,"authToken"),v(this,"peerId"),I(this,wc,void 0),v(this,"roomNodeSetupInProgress",!1);var i,r,n,s;A(this,wc,e),this.authToken=(r=(i=$t())==null?void 0:i.authToken)!=null?r:e.authToken,this.peerId=(s=(n=$t())==null?void 0:n.peerId)!=null?s:e.peerId,this.self=t,this.setupEvents()}get roomJoined(){var e;return((e=h(this,zt,ri))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r,n){var s,a;const o=ui(),{isV2AuthToken:c}=Ee,d=await Vt.__init__((a=(s=$t())==null?void 0:s.peerId)!=null?a:e.peerId,Ee.isV2AuthToken?t.participant:t,i,r,n),l=c?t.participant.organizationId:t.organizationId;if(E.meetingMetadata.organizationId=l,ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"){ee.getValue(re.CALLSTATS_INGESTION_LAYER);let u="dev";Ze.apiBase.indexOf("cluster.dyte")>-1?u="production":Ze.apiBase.indexOf("staging.dyte")>-1&&(u="staging"),setTimeout(async()=>{var g,m;Y.initialize({peerId:(m=(g=$t())==null?void 0:g.peerId)!=null?m:e.peerId,engineName:Oe.getDeviceInfo().engineName,env:u,iceServers:await o.getICEServers(),apiBase:Ze.apiBase,flags:ee.getAllFlags(),logger:b})})}return new NM(e,d)}async shareMediaTracks(){await Promise.all([this.self.videoTrack&&h(this,zt,ri).shareWebcam(this.self.videoTrack),this.self.audioTrack&&h(this,zt,ri).shareMic(this.self.audioTrack)])}setupEvents(){P.on(k.DISABLE_AUDIO,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),Y.audioOff())}),P.on(k.DISABLE_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),Y.videoOff())}),P.on(k.MUTE_ALL,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),Y.audioOff())}),P.on(k.MUTE_ALL_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),Y.videoOff())}),P.on(k.WAITLISTED,()=>{this.self.waitlistStatus="waiting",this.self.roomState="waitlisted",this.self.emit("waitlisted")}),P.on(k.WAITLIST_ACCEPTED,async()=>{if(this.self.waitlistStatus==="accepted"){b.warn("SelfController.WAITLIST_ACCEPTED.UserAlreadyAccepted");return}this.self.waitlistStatus="accepted",this.joinRoom()}),P.on(k.WAITLIST_REJECTED,async()=>{if(this.self.waitlistStatus==="rejected"){b.warn("SelfController.WAITLIST_REJECTED.UserAlreadyRejected");return}this.self.waitlistStatus="rejected",this.leaveRoom("rejected")}),P.on(k.KICKED,async e=>{let t="kicked";(e==null?void 0:e.kickType)==="kickAll"&&(t="ended"),this.leaveRoom(t)}),P.on(k.SELF_ROOM_JOINED,()=>{this.self.config.viewType==="WEBINAR"&&this.self.permissions.canPresent&&this.self.joinStage(),this.self.roomState="joined",this.self.emit("roomJoined")}),P.on(k.SOCKET_SERVICE_ROOM_JOINED,()=>{this.self.emit("socketServiceRoomJoined")}),P.on(k.MEDIA_PERMISSION_UPDATE,async e=>{if(e.message==="ACCEPTED"){const t=this.self.getCurrentDevices(),i=await this.self.getAudioDevices(),r=await this.self.getVideoDevices(),n=await this.self.getSpeakerDevices();switch(e==null?void 0:e.kind){case"audio":!t.audio&&i.length>0&&this.self.setDevice(i[0]),!t.speaker&&n.length>0&&this.self.setDevice(n[0]);break;case"video":!t.video&&r.length>0&&this.self.setDevice(r[0]);break}}this.self.emit("mediaPermissionUpdate",e)}),P.on(k.MEDIA_PERMISSION_ERROR,async e=>{const{kind:t,message:i}=e;t==="audio"?(Y.mediaPermission("AUDIO",hy(i)),this.self.disableAudio()):t==="video"?(Y.mediaPermission("VIDEO",hy(i)),this.self.disableVideo()):t==="screenshare"&&(Y.mediaPermission("VIDEO",hy(i)),this.self.disableScreenShare()),b.error("SelfController::mediaPermissionError",{error:{message:e.message},constraints:e.constraints,mediaPermissionsErrors:{kind:t,message:i}}),this.self.emit("mediaPermissionError",e),this.self.emit("mediaPermissionUpdate",{message:i,kind:t})}),P.on(k.REQUEST_TO_JOIN_STAGE_ACCEPTED,()=>{this.self.setWebinarStageStatus(qt.ACCEPTED_TO_JOIN_STAGE),this.self.emit("joinStageRequestAccepted")}),P.on(k.REQUEST_TO_JOIN_STAGE_REJECTED,()=>{this.self.setWebinarStageStatus(qt.OFF_STAGE),this.self.emit("joinStageRequestRejected")}),P.on(k.REMOVED_FROM_STAGE,async()=>{this.self.setWebinarStageStatus(qt.OFF_STAGE),await this.self.disableScreenShare(),await this.self.disableVideo(),await this.self.disableAudio(),this.self.destructMediaHandler(),this.self.emit("removedFromStage")}),P.on(k.STARTED_PRESENTING,()=>{this.self.setWebinarStageStatus(qt.ON_STAGE),this.self.emit("stageJoined")}),P.on(k.STOPPED_PRESENTING,()=>{this.self.setWebinarStageStatus(qt.OFF_STAGE),this.self.emit("stageLeft")}),P.on(k.PRODUCER_SCORE_UPDATE,({score:e,kind:t,appData:i})=>{var r;const n=t==="video"&&((r=i==null?void 0:i.screenShare)!=null?r:!1);this.self.emit("mediaScoreUpdate",{kind:t,isScreenshare:n,score:e})}),P.on(k.PRODUCER_STATUS_UPDATE,({status:e})=>{this.self.emit("mediaChannelUpdate",{status:e})}),P.onAsync(k.JOIN_MEDIA_ROOM,this.setupRoomNode.bind(this)),P.onAsync(k.LEAVE_MEDIA_ROOM,this.leaveMediaRoom.bind(this))}async setupRoomNode(){var e,t,i;if(this.roomNodeSetupInProgress){b.warn("SelfController.roomNodeSetupInProgress");return}if((e=h(this,zt,ri))!=null&&e.roomJoined){b.warn("SelfController.roomNodeAlreadySetup");return}this.roomNodeSetupInProgress=!0;const r=Ee.roomNodeOptions;await kM({...r,roomName:r.roomName,peerId:r.peerId});let n="";if(h(this,zt,ri)instanceof ze){await h(this,zt,ri).setupTransports();const s=await h(this,zt,ri).getRoomState();({roomUUID:n}=(i=(t=s==null?void 0:s.payload)==null?void 0:t.roomState)!=null?i:{}),ui().setRoomUUID(n)}await this.joinMediaRoom(n),this.roomNodeSetupInProgress=!1}async joinRoom(){var e,t;try{const i=ui();let r="";if(h(this,zt,ri)instanceof ze){const s=await h(this,zt,ri).getRoomState();({roomUUID:r}=(t=(e=s==null?void 0:s.payload)==null?void 0:e.roomState)!=null?t:{}),i.setRoomUUID(r)}const n=new lce(h(this,wc));(pM(this.self.config.viewType,h(this,wc).capabilities)||Qu("chat_socket_server")==="socket-service")&&(await n.joinRoom(this.self.name,this.self.id,this.self.userId,r),n.socket.flush(),n.onReconnect=async()=>{await n.joinRoom(this.self.name,this.self.id,this.self.userId,r),n.socket.flush()}),LM(this.self.config)&&await this.joinMediaRoom(r)}catch(i){throw b.error("Error in joinRoom",{error:i}),i}}async leaveRoom(e="left"){var t;const{roomJoined:i}=this;await this.leaveMediaRoom();try{(t=h(this,wc))==null||t.disconnect()}catch{b.error("SelfController::leaveRoom::socketDisconnect")}this.self.roomState=e,Coe(),!(this.self.config.viewType!=="LIVESTREAM"&&!i)&&this.self.emit("roomLeft",{state:e})}async joinMediaRoom(e){var t,i,r,n;if((t=h(this,zt,ri))!=null&&t.isDisconnected&&h(this,zt,ri)instanceof ze){(i=h(this,zt,ri))==null||i.reconnect();return}const{roomJoined:s}=(n=await((r=h(this,zt,ri))==null?void 0:r.joinRoom(this.self.name,!this.self.audioEnabled,e,void 0,{audio:this.self.audioEnabled,video:this.self.videoEnabled,screen:this.self.screenShareEnabled})))!=null?n:{};h(this,zt,ri)instanceof ve&&(h(this,zt,ri).onSocketReconnection=this.joinMediaRoom.bind(this,e)),s&&await this.shareMediaTracks()}async leaveMediaRoom(){await this.cleanupSelf(),h(this,zt,ri)&&this.roomJoined&&(await h(this,zt,ri).leaveRoom(),h(this,zt,ri).roomJoined=!1)}async cleanupSelf(){await this.self.disableAudio(),await this.self.disableVideo(),await this.self.disableScreenShare(),this.self.cleanUpTracks(),this.self.destructMediaHandler(),this.self.removeDocumentEventListeners()}},wc=new WeakMap,zt=new WeakSet,ri=function(){return $t()},mP);let el=NM;kp([E.trace("SelfController.setupEvents")],el.prototype,"setupEvents",1);kp([E.trace("SelfController.joinRoom")],el.prototype,"joinRoom",1);kp([E.trace("SelfController.leaveRoom")],el.prototype,"leaveRoom",1);kp([E.trace("SelfController.joinMediaRoom")],el.prototype,"joinMediaRoom",1);kp([E.trace("SelfController.leaveMediaRoom")],el.prototype,"leaveMediaRoom",1);var gce=Object.defineProperty,mce=Object.getOwnPropertyDescriptor,Va=(e,t,i,r)=>{for(var n=r>1?void 0:r?mce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&gce(t,i,n),n},Sl,Wr,Pn,Sc,fP;let Ur=(fP=class extends At{constructor(e,t){super(),I(this,Wr),v(this,"id"),v(this,"userId"),v(this,"name"),v(this,"picture"),v(this,"isHost"),v(this,"clientSpecificId"),v(this,"flags"),v(this,"device"),v(this,"videoTrack"),v(this,"audioTrack"),v(this,"screenShareTracks"),v(this,"videoEnabled"),v(this,"audioEnabled"),v(this,"screenShareEnabled"),v(this,"producers"),I(this,Sl,void 0),v(this,"supportsRemoteControl",!1),v(this,"webinarStageStatus",qt.OFF_STAGE),v(this,"presetName"),I(this,Sc,void 0);const{id:i,userId:r,displayName:n,device:s,picture:a,isHost:o,flags:c,clientSpecificId:d,customParticipantId:l,audioMuted:u,audioTrack:g,videoEnabled:m=!1,videoTrack:f,producers:w,metadata:S}=e;this.id=i,this.userId=r,this.name=n,this.device=s,this.picture=a,this.isHost=o,this.flags=c,this.clientSpecificId=l!=null?l:d,this.audioEnabled=!u,this.audioTrack=g,this.videoEnabled=m,this.videoTrack=f,this.screenShareTracks={audio:void 0,video:void 0},this.producers=w!=null?w:[],this.presetName=S==null?void 0:S.preset_name,A(this,Sl,!1),A(this,Sc,t)}get roomJoined(){var e;return((e=h(this,Wr,Pn))==null?void 0:e.roomJoined)===!0}setVideoEnabled(e,t=!0){this.videoEnabled=e,t&&(b.info("DyteParticipant::setVideoEnabled::videoUpdate",{...Eo(this)}),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}))}setAudioEnabled(e,t=!0){this.audioEnabled=e,t&&(b.info("DyteParticipant::setAudioEnabled::audioUpdate",{...Eo(this)}),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}))}setScreenShareEnabled(e,t=!0){this.screenShareEnabled=e,t&&this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}async pin(){if(!this.roomJoined)throw new R("Can`t pin participant without joining room");return h(this,Wr,Pn).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new R("Can`t unpin participant without joining room");return h(this,Wr,Pn).pinPeer(null)}setIsPinned(e,t=!0){A(this,Sl,e);const i=e?"pinned":"unpinned";t&&this.emit(i,this)}async disableAudio(){const e=this.id;if(b.info("DyteParticipant::disable_audio",{dyteParticipant:{id:e}}),!this.roomJoined)throw new R("Can`t disable participant audio without joining room");if(h(this,Sc).permissions.canDisableParticipantAudio)return h(this,Wr,Pn).disableAudio(e);throw b.error("DyteParticipant::unauthorized_disable_audio",{dyteParticipant:{id:e}}),new R("Unauthorized: User does not have permission to disable participant audio.")}async kick(){const e=this.id;if(b.info("DyteParticipant::kick",{dyteParticipant:{id:e}}),!this.roomJoined)throw new R("Can`t kick participant without joining room");if(h(this,Sc).permissions.kickParticipant)return h(this,Wr,Pn).kick(e);throw b.error("DyteParticipant::unauthorized_kick",{dyteParticipant:{id:e}}),new R("Unauthorized: User does not have permission to kick participants.")}async disableVideo(){const e=this.id;if(b.info("DyteParticipant::disable_video",{dyteParticipant:{id:e}}),!this.roomJoined)throw new R("Can`t disable participant video without joining room");if(h(this,Sc).permissions.canDisableParticipantVideo)return h(this,Wr,Pn).disableVideo(e);throw b.error("DyteParticipant::unauthorized_disable_video",{dyteParticipant:{id:e}}),new R("Unauthorized: User does not have permission to disable participant video.")}async acceptJoinStageRequest(){if(!this.roomJoined)throw new R("Can`t acceptJoinStageRequest for participant without joining room");h(this,Wr,Pn).acceptAllRequestToJoinStage([{id:this.id,requestToJoinType:Yb.PRESENT}])}async rejectRequestToJoinStage(){if(!this.roomJoined)throw new R("Can`t rejectRequestToJoinStage for participant without joining room");h(this,Wr,Pn).rejectRequestToJoinStage(this.id)}async removeFromStage(){if(!this.roomJoined)throw new R("Can`t removeFromStage participant without joining room");h(this,Wr,Pn).removePeerFromStage(this.id,Kb.REQUESTED_BY_MODERATOR)}setWebinarStageStatus(e){this.webinarStageStatus=e;let t;e===qt.OFF_STAGE&&(t="peerStoppedPresenting"),e===qt.ON_STAGE&&(t="peerStartedPresenting"),e===qt.ACCEPTED_TO_JOIN_STAGE&&(t="peerAcceptedToJoinStage"),e===qt.REQUESTED_TO_JOIN_STAGE&&(t="peerRequestToJoinStage"),t&&this.emit(t,this)}get isPinned(){return h(this,Sl)}},Sl=new WeakMap,Wr=new WeakSet,Pn=function(){return $t()},Sc=new WeakMap,fP);Va([E.trace("DyteParticipant.disableAudio")],Ur.prototype,"disableAudio",1);Va([E.trace("DyteParticipant.kick")],Ur.prototype,"kick",1);Va([E.trace("DyteParticipant.disableVideo")],Ur.prototype,"disableVideo",1);Va([E.trace("DyteParticipant.acceptJoinStageRequest")],Ur.prototype,"acceptJoinStageRequest",1);Va([E.trace("DyteParticipant.rejectRequestToJoinStage")],Ur.prototype,"rejectRequestToJoinStage",1);Va([E.trace("DyteParticipant.removeFromStage")],Ur.prototype,"removeFromStage",1);Va([E.trace("DyteParticipant.setWebinarStageStatus")],Ur.prototype,"setWebinarStageStatus",1);Ur=Va([Si(e=>{throw new R(e.message,"1200")})],Ur);var Ht,Oc;class aw extends Map{constructor(t){const{onAddEvent:i="added",onDeleteEvent:r="deleted",onClearEvent:n="cleared"}=t!=null?t:{};super(),I(this,Ht,void 0),I(this,Oc,void 0),v(this,"onAddEvent"),v(this,"onDeleteEvent"),v(this,"onClearEvent"),A(this,Ht,new At),this.onAddEvent=i,this.onDeleteEvent=r,this.onClearEvent=n,A(this,Oc,new Map)}emit(t,...i){return h(this,Ht).emit(t,...i)}on(t,i){return h(this,Ht).on(t,i)}addListener(t,i){return h(this,Ht).addListener(t,i)}off(t,i){return h(this,Ht).off(t,i)}once(t,i){return h(this,Ht).once(t,i)}prependListener(t,i){return h(this,Ht).prependListener(t,i)}prependOnceListener(t,i){return h(this,Ht).prependOnceListener(t,i)}removeListener(t,i){return h(this,Ht).removeListener(t,i)}removeAllListeners(t){return h(this,Ht).removeAllListeners(t)}listeners(t){return h(this,Ht).listeners(t)}listenerCount(t){return h(this,Ht).listenerCount(t)}getMaxListeners(){return h(this,Ht).getMaxListeners()}setMaxListeners(t){return h(this,Ht).setMaxListeners(t)}eventNames(){return h(this,Ht).eventNames()}add(t,i=!0){return this.set(t.id,t,i)}set(t,i,r=!0){const n=super.set(t,i),s=(a,...o)=>{this.emit(a,i,...o)};return h(this,Oc).set(t,s),i.on("*",s),r&&h(this,Ht).emit(this.onAddEvent,i),n}delete(t,i=!0,r=!1){const n=this.get(t);if(!n)return!1;n.removeListener("*",h(this,Oc).get(t));const s=super.delete(t);return r&&n.removeAllListeners(),i&&h(this,Ht).emit(this.onDeleteEvent,n),s}clear(t=!0,i=!1){this.forEach(n=>{n.removeListener("*",h(this,Oc).get(n.id)),i&&n.removeAllListeners()});const r=super.clear();return t&&h(this,Ht).emit(this.onClearEvent),r}toArray(){return Array.from(this.values())}}Ht=new WeakMap,Oc=new WeakMap;class dh extends aw{constructor(t){const{onAddEvent:i="participantJoined",onDeleteEvent:r="participantLeft",onClearEvent:n="participantsCleared"}=t!=null?t:{};super({onAddEvent:i,onDeleteEvent:r,onClearEvent:n})}add(t,i=!0){return super.add(t,i)}clear(t=!0,i=!1){return super.clear(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}class fce{constructor(){v(this,"_orderedArray"),v(this,"_map"),this._map=new Map,this._orderedArray=[]}add(t,i){if(!this._map.has(t))return this._map.set(t,{peerId:t,priority:i}),this._orderedArray.splice(Math.max(i-1,0),0,t),this.index(t);const r=this.index(t);this.delete(t);const n=this.add(t,i);return r!==n?(b.info("DyteSelectedPeer::add()::new_position_for_active_speaker",{selectedPeer:{oldIndex:r,newIndex:n}}),n):-1}delete(t){if(this._map.has(t)){const i=this.index(t);this._map.delete(t),this._orderedArray.splice(i,1)}}index(t){return this._map.has(t)?this._orderedArray.indexOf(t):-1}[Symbol.iterator](){return this._orderedArray[Symbol.iterator]()}}class vce{constructor(){v(this,"_activeSpeakerPeers"),v(this,"_compulsoryPeers"),this._activeSpeakerPeers=new fce,this._compulsoryPeers=new Set}add(t,i){return i<0?(this._compulsoryPeers.add(t),0):this.compulsoryPeers.includes(t)&&(i>0||i===246267631)&&(b.info("DyteSelectedPeer::removing_compulsory_peer",{selectedPeer:{peerId:t}}),this._removeFromCompulsoryPeer(t),i===246267631)?-1:this._activeSpeakerPeers.add(t,i)}delete(t){b.info("DyteSelectedPeer::deleting_peer_from_selectedPeer",{selectedPeer:{peerId:t}}),this._removeFromCompulsoryPeer(t),this._activeSpeakerPeers.delete(t)}index(t){return this._activeSpeakerPeers.index(t)}get peers(){return[...new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers))]}get compulsoryPeers(){return[...this._compulsoryPeers.values()]}get peerPriorities(){return[...this._activeSpeakerPeers].map((t,i)=>i)}get activeSpeakerPeers(){return[...this._activeSpeakerPeers]}_removeFromCompulsoryPeer(t){this._compulsoryPeers.delete(t)}}var yce=Object.defineProperty,_ce=Object.getOwnPropertyDescriptor,bn=(e,t,i,r)=>{for(var n=r>1?void 0:r?_ce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&yce(t,i,n),n},ai,gi,Za,vP;let wr=(vP=class extends At{constructor(e){super(),I(this,ai),v(this,"waitlisted"),v(this,"joined"),v(this,"active"),v(this,"pinned"),I(this,Za,void 0),v(this,"viewMode"),v(this,"currentPage"),v(this,"lastActiveSpeaker"),v(this,"selectedPeers"),A(this,Za,e),this.waitlisted=new dh,this.joined=new dh,this.active=new dh,this.pinned=new dh,this.selectedPeers=new vce,this.viewMode="ACTIVE_GRID",this.currentPage=0}get roomJoined(){var e;return((e=h(this,ai,gi))==null?void 0:e.roomJoined)===!0}get count(){return this.joined.size}get maxActiveParticipantsCount(){var e,t,i;if(h(this,ai,gi)instanceof ze)return h(this,ai,gi).maxPreferredStreams;const r=h(this,Za).suggestedTheme;return(i=(t=(e=r==null?void 0:r.grid)==null?void 0:e.multi)==null?void 0:t.maxVideoCount)!=null?i:6}get pageCount(){return this.viewMode==="PAGINATED"?Math.ceil(this.joined.size/this.maxActiveParticipantsCount):0}async acceptWaitingRoomRequest(e){if(!this.roomJoined)throw new R("Can`t accept waiting room request without joining room");return h(this,ai,gi).acceptWaitingRequest(e)}async rejectWaitingRoomRequest(e){if(!this.roomJoined)throw new R("Can`t reject waiting room request without joining room");await h(this,ai,gi).rejectWaitingRequest(e),this.waitlisted.delete(e)}async setViewMode(e){if(b.info("DyteParticipants::set_view_mode",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),!["ACTIVE_GRID","PAGINATED"].includes(e))throw b.error("DyteParticipants::setViewMode::invalid_view_mode",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new R(`Invalid view mode: ${e}. Try ACTIVE_GRID or PAGINATED.`);if(this.viewMode===e){b.info("DyteParticipants::setViewMode::view_mode_same_as_previous",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});return}if(this.viewMode=e,e==="PAGINATED"){this.currentPage=1;let t=[];h(this,ai,gi)instanceof ze?{peerIds:t}=(await h(this,ai,gi).getPage(this.currentPage)).payload:t=this.getPeerIdsForCurrentPage(),P.emit(k.GET_PAGE,{peerIds:t})}else e==="ACTIVE_GRID"&&(this.currentPage=0,h(this,ai,gi)instanceof ze?h(this,ai,gi).getPage(this.currentPage):P.emit(k.REFRESH_GRID));this.emit("viewModeChanged",{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount})}getPeerIdsForCurrentPage(){b.info("DyteParticipants::getPeerIdsForCurrentPage()",{pageNavigation:{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});const{compulsoryPeers:e}=this.selectedPeers,t=[...this.joined.keys()],i=Math.max((this.currentPage-1)*(this.maxActiveParticipantsCount-e.length)),r=this.currentPage*(this.maxActiveParticipantsCount-e.length);return e.concat(t.slice(i,r))}async setPage(e){if(b.info("DyteParticipants::set_page",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),this.viewMode!=="PAGINATED")return;if(!Number.isInteger(e))throw b.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new R(`Invalid page: ${e}. Page must be an integer.`);if(e<1||e>this.pageCount)throw b.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new R(`Invalid page: ${e}. Page must be greater than 0 and less than or equal to ${this.pageCount}.`);this.currentPage=e;let t=[];h(this,ai,gi)instanceof ze?{peerIds:t}=(await h(this,ai,gi).getPage(e)).payload:t=this.getPeerIdsForCurrentPage(),P.emit(k.GET_PAGE,{peerIds:t}),this.emit("pageChanged",{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount})}async disableAllAudio(e){if(b.info("DyteParticipants::disable_all_audio",{actions:{disableAllAudio:{allowUnmute:e}}}),!this.roomJoined)throw new R("Can`t disable all audio without joining room");if(h(this,Za).permissions.canAllowParticipantAudio)return h(this,ai,gi).muteAll(e);throw b.error("DyteParticipants::unauthorized_disable_all_audio",{actions:{disableAllAudio:{allowUnmute:e}}}),new R("Unauthorized: User does not have permission to disable peer audio.")}async disableAllVideo(){if(b.info("DyteParticipants::disable_all_video"),!this.roomJoined)throw new R("Can`t disable all video without joining room");if(h(this,Za).permissions.canAllowParticipantVideo)return h(this,ai,gi).muteAllVideo();throw b.error("DyteParticipants::unauthorized_disable_all_video"),new R("Unauthorized: User does not have permission to disable peer video.")}async disableAudio(e){this.joined.get(e).disableAudio()}async disableVideo(e){this.joined.get(e).disableVideo()}async kick(e){this.joined.get(e).kick()}async kickAll(){if(b.info("DyteParticipants::kick_all"),!this.roomJoined)throw new R("Can`t kick all without joining room");if(h(this,Za).permissions.kickParticipant)return h(this,ai,gi).kickAll();throw b.error("DyteParticipants::unauthorized_kick_all"),new R("Unauthorized: User does not have permission to kick peers.")}async broadcastMessage(e,t){if(b.info("DyteParticipants::broadcastMessage"),!this.roomJoined)throw new R("Can`t broadcast message without joining room");if(!(e!=null&&e.trim()))throw new R("`type` must be a non-empty string.");h(this,ai,gi).broadcastMessage(e,t)}async acceptAllRequestToJoinStageRequests(e){if(!this.roomJoined)throw new R("Can`t acceptAllRequestToJoinStageRequests without joining room");h(this,ai,gi).acceptAllRequestToJoinStage(e)}},ai=new WeakSet,gi=function(){return $t()},Za=new WeakMap,vP);bn([E.trace("DyteParticipants.setViewMode")],wr.prototype,"setViewMode",1);bn([E.trace("DyteParticipants.setPage")],wr.prototype,"setPage",1);bn([E.trace("DyteParticipants.disableAllAudio")],wr.prototype,"disableAllAudio",1);bn([E.trace("DyteParticipants.disableAllVideo")],wr.prototype,"disableAllVideo",1);bn([E.trace("DyteParticipants.disablePeerAudio")],wr.prototype,"disableAudio",1);bn([E.trace("DyteParticipants.disablePeerVideo")],wr.prototype,"disableVideo",1);bn([E.trace("DyteParticipants.kickPeer")],wr.prototype,"kick",1);bn([E.trace("DyteParticipants.kickAll")],wr.prototype,"kickAll",1);bn([E.trace("DyteParticipants.broadcastMessage")],wr.prototype,"broadcastMessage",1);bn([E.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")],wr.prototype,"acceptAllRequestToJoinStageRequests",1);wr=bn([Si(e=>{throw new R(e.message,"1200")})],wr);var bce=Object.defineProperty,wce=Object.getOwnPropertyDescriptor,sc=(e,t,i,r)=>{for(var n=r>1?void 0:r?wce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&bce(t,i,n),n},vi,Mc,ts,bt,Pt;class Fa{constructor(t){I(this,bt),v(this,"participants"),I(this,vi,void 0),I(this,Mc,void 0),I(this,ts,new Set),this.participants=new wr(t),A(this,Mc,new Map),A(this,vi,t),this.setupEvents()}get roomJoined(){var t;return((t=h(this,bt,Pt))==null?void 0:t.roomJoined)===!0}updatePageParticipants(t){const i=new Set(t),r=new Map(this.participants.active);if(this.participants.active.forEach((n,s)=>{this.participants.active.delete(s,!i.has(s))}),i.forEach(n=>{if(!this.participants.joined.get(n)){b.warn("updatePageParticipants::participant_not_in_joined_list",{dyteParticipant:{id:n}});return}this.participants.active.add(this.participants.joined.get(n),!r.get(n))}),h(this,bt,Pt)instanceof ve){A(this,ts,new Set(this.participants.active.keys())),Array.from(r.keys()).forEach(s=>{if(i.has(s))return;const a=this.participants.joined.get(s);if(!a)return;const o={producers:a.producers,peerId:a.id};h(this,bt,Pt).deactivatePeers(o)});const n=[];this.participants.active.forEach(s=>{const a={peerId:s.id,producers:s.producers};n.push(a)}),h(this,bt,Pt).activatePeers(n)}}updatePinnedParticipants(){this.participants.pinned.forEach(t=>{t.setIsPinned(!1),this.participants.pinned.delete(t.id)})}refreshGridParticipants(t=!1){const i=[...this.participants.joined.keys()],r=this.participants.selectedPeers.peers;if(this.participants.viewMode!=="ACTIVE_GRID"){b.warn("ParticipantController::refreshGridParticipants::not_refreshing_grid_in_not_active_grid_mode");return}const n=this.participants.maxActiveParticipantsCount-1,s=new Set(r.filter(c=>c!==h(this,vi).id));let a=[...s];const o=n-s.size;if(o>=0){const c=i.filter(d=>!s.has(d)&&d!==h(this,vi).id).slice(0,o);a=[...s].concat(c)}else a=a.slice(0,n);this.updateActiveParticipantsHiveNode(a,t)}updateActiveParticipantsHiveNode(t,i=!1){if(!this.roomJoined){b.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const r=Array.from(this.participants.active.keys()),n=new Map(this.participants.active),s={};t.forEach(l=>{s[l]=!0});const a=[];r.forEach((l,u)=>{(!s[l]||!this.participants.joined.get(l))&&a.push(u)}),t.forEach(l=>{n.get(l)||(r.length<t.length?r.push(l):r[a.shift()]=l)}),r.forEach((l,u)=>{s[l]||r.splice(u,1)}),Array.from(this.participants.active.keys()).forEach(l=>{this.participants.active.delete(l,!s[l])}),r.forEach(l=>{if(!this.participants.joined.get(l)){b.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:l}});return}this.participants.active.add(this.participants.joined.get(l),!n.get(l))}),this.updateWebinarStatusForJoinedParticipants(t),this.participants.active.emit("participantsUpdate"),b.info("ParticipantController::updateActiveParticipants::updating_current_selected_peers",{debuggingHint:i?"Forcefully updating currentActiveGridParticipants set":null}),i&&A(this,ts,new Set);const o=new Set(t),c=[],d=[];if(h(this,ts).forEach(l=>{o.has(l)||c.push(l)}),o.forEach(l=>{h(this,ts).has(l)||d.push(l)}),A(this,ts,o),d.length===0&&c.length===0){b.info("ParticipantController::updateActiveParticipants::current_selected_peers_is_same");return}if(h(this,bt,Pt)instanceof ve){const l=[];c.forEach(u=>{const g=this.participants.joined.get(u);if(!g)return;const m={producers:g.producers,peerId:g.id};l.push(h(this,bt,Pt).deactivatePeers(m))}),Promise.all(l).then(()=>{const u=[];d.forEach(g=>{const m=this.participants.active.get(g);if(!m){b.warn("peer is not in active map which is going to activate, should not happen",{dyteParticipant:{id:g}});return}const f={peerId:m.id,producers:m.producers};u.push(f)}),h(this,bt,Pt).activatePeers(u)}).catch(u=>{b.info("Error on deactivating peers",u)})}}updateActiveParticipants(t){if(!this.roomJoined){b.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const i=Array.from(this.participants.active.keys()),r=new Map(this.participants.active),n={};t.forEach(a=>{n[a]=!0});const s=[];i.forEach((a,o)=>{(!n[a]||!this.participants.joined.get(a))&&s.push(o)}),t.forEach(a=>{r.get(a)||(i.length<t.length?i.push(a):i[s.shift()]=a)}),i.forEach((a,o)=>{n[a]||i.splice(o,1)}),Array.from(this.participants.active.keys()).forEach(a=>{this.participants.active.delete(a,!n[a])}),i.forEach(a=>{if(!this.participants.joined.get(a)){b.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:a}});return}this.participants.active.add(this.participants.joined.get(a),!r.get(a))}),this.updateWebinarStatusForJoinedParticipants(t),this.participants.active.emit("participantsUpdate")}updateActiveParticipantsWithPriorities(t,i=!1){if(!this.roomJoined){b.warn("Skipped::ParticipantController::updateActiveParticipantsWithPriorities",{roomJoined:this.roomJoined});return}t.forEach(r=>{this.participants.joined.get(r.peerId)&&this.participants.selectedPeers.add(r.peerId,r.priority)}),i&&this.refreshGridParticipants()}setupEvents(){P.on(k.PEER_JOINED,async t=>{var i,r,n;const s=new Ur(t,h(this,vi));h(this,vi).id!==s.id&&!((i=t.flags)!=null&&i.recorder)&&!((r=s.flags)!=null&&r.hidden_participant)&&!((n=s.flags)!=null&&n.hiddenParticipant)&&(this.participants.joined.add(s),this.participants.waitlisted.delete(s.id),this.participants.currentPage===this.participants.pageCount&&h(this,bt,Pt)instanceof ze&&P.emit(k.GET_PAGE,(await h(this,bt,Pt).getPage(this.participants.currentPage)).payload))}),P.on(k.WAITLIST_PEER_ADDED,({id:t,name:i})=>{this.participants.waitlisted.add(new Ur({id:t,displayName:i,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,userId:void 0,flags:{},isHost:!1},h(this,vi)))}),P.on(k.WAITLIST_PEER_REMOVED,({id:t})=>{this.participants.waitlisted.delete(t)}),P.on(k.ROOM_JOINED,t=>{h(this,bt,Pt)instanceof ve&&this.participants.joined.clear(),t.peers.forEach(i=>{var r,n,s;if((r=i.flags)!=null&&r.recorder||(n=i.flags)!=null&&n.hidden_participant||(s=i.flags)!=null&&s.hiddenParticipant)return;const a=new Ur(i,h(this,vi));a.id===t.pinnedPeerId&&(a.setIsPinned(!0,!1),this.participants.pinned.add(a)),this.participants.joined.add(a)}),t.requestToJoinPeersList&&t.requestToJoinPeersList.forEach(({id:i})=>{var r;(r=this.participants.joined.get(i))==null||r.setWebinarStageStatus(qt.REQUESTED_TO_JOIN_STAGE)}),h(this,bt,Pt)instanceof ze&&h(this,bt,Pt).getPage(this.participants.currentPage)}),P.on(k.PEER_CLOSED,async({id:t})=>{if(this.participants.joined.delete(t,!0,!0),this.participants.pinned.delete(t,!0,!0),h(this,bt,Pt)instanceof ve&&(this.participants.selectedPeers.delete(t),this.participants.active.get(t)&&this.participants.currentPage===0)){this.refreshGridParticipants();return}const{currentPage:i}=this.participants,r=h(this,vi).config.maxVideoStreams,n=(Oe.isMobile()?r.mobile:r.desktop)*(i-1),s=this.participants.active.get(t);if(n===0)this.participants.setViewMode("ACTIVE_GRID");else if(this.participants.joined.size<=n)i===2?this.participants.setViewMode("ACTIVE_GRID"):this.participants.setPage(i-1);else if(s){let a=[];h(this,bt,Pt)instanceof ze?{peerIds:a}=(await h(this,bt,Pt).getPage(i)).payload:a=this.participants.getPeerIdsForCurrentPage(),P.emit(k.GET_PAGE,{peerIds:a})}}),P.on(k.ROOM_NODE_DISCONNECTED,()=>{Array.from(this.participants.joined.keys()).forEach(t=>{this.participants.joined.delete(t)}),Array.from(this.participants.active.keys()).forEach(t=>{this.participants.active.delete(t)}),Array.from(this.participants.pinned.keys()).forEach(t=>{this.participants.pinned.delete(t)}),this.participants.currentPage=0,this.participants.viewMode="ACTIVE_GRID",this.participants.emit("viewModeChanged",{viewMode:"ACTIVE_GRID",currentPage:this.participants.currentPage,pageCount:this.participants.pageCount}),A(this,ts,new Set)}),P.on(k.PEER_MUTED,({peerId:t})=>{const i=this.participants.joined.get(t);i&&i.setAudioEnabled(!1)}),P.on(k.PEER_UNMUTED,({peerId:t})=>{const i=this.participants.joined.get(t);i&&i.setAudioEnabled(!0)}),P.on(k.CONSUMER_PAUSED,({id:t})=>{this.processConsumerPaused(t)}),P.on(k.CONSUMER_RESUMED,({id:t})=>{this.processConsumerResumed(t)}),P.on(k.NEW_CONSUMER,({id:t})=>{this.processNewConsumer(t)}),P.on(k.CONSUMER_CLOSED,({id:t})=>{this.processConsumerClosed(t)}),P.on(k.GET_PAGE,({peerIds:t})=>{this.participants.viewMode==="PAGINATED"&&this.updatePageParticipants(t)}),P.on(k.SELECTED_PEERS,({peerIds:t,compulsoryPeers:i})=>{if(this.participants.viewMode!=="ACTIVE_GRID")return;if(h(this,bt,Pt)instanceof ze){this.updateActiveParticipants(t);return}const r=t.map((s,a)=>({peerId:s,priority:a+1})),n=i==null?void 0:i.map((s,a)=>({peerId:s,priority:-(a+1)}));r.push(...n!=null?n:[]),r.length>0&&this.updateActiveParticipantsWithPriorities(r)}),P.on(k.SELECTED_PEERS_DIFF,({entries:t})=>{this.participants.viewMode==="ACTIVE_GRID"&&this.updateActiveParticipantsWithPriorities(t,!0)}),P.on(k.REFRESH_GRID,(t=!1)=>{this.participants.viewMode==="ACTIVE_GRID"&&this.refreshGridParticipants(t)}),P.on(k.NEW_PRODUCER,({peerId:t,producer:i})=>{const r=this.participants.joined.get(t);if(!r){b.warn("ParticipantController::NEW_PRODUCER::participant not found",{producer:{id:i==null?void 0:i.producerId,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}},dyteParticipant:{id:t}});return}r.producers.push(i),b.info("ParticipantController::NEW_PRODUCER::producer_added_to_participant",{producer:{id:i==null?void 0:i.producerId,peerId:t,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}}),(i==null?void 0:i.kind)==="audio"||i!=null&&i.screenShare||h(this,ts).has(t)?h(this,bt,Pt).createConsumer({producingPeerId:t,producerId:i.producerId,screenShare:i.screenShare}):b.info("ParticipantController::NEW_PRODUCER::not_consuming_producer",{producer:{id:i==null?void 0:i.producerId,peerId:t,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}})}),P.on(k.PRODUCER_CLOSED,({peerId:t,producerId:i})=>{const r=this.participants.joined.get(t);if(!r){b.warn("ParticipantController::NEW_PRODUCER::participant not found",{dyteParticipant:{id:t}});return}r.producers=r.producers.filter(n=>n.producerId!==i)}),P.on(k.PRODUCER_TOGGLE,({peerId:t,producerId:i,paused:r,kind:n})=>{const s=this.participants.joined.get(t);if(s&&n==="audio"){s.setAudioEnabled(!r);const a=s.producers.find(o=>o.producerId===i);a&&(a.pause=r)}}),P.on(k.ACTIVE_SPEAKER,({peerId:t,volume:i})=>{this.participants.lastActiveSpeaker=t,this.participants.emit("activeSpeaker",{peerId:t,volume:i})}),P.on(k.ROOM_MESSAGE,async({payload:t,type:i,timestamp:r})=>{this.participants.emit("broadcastedMessage",{type:i,payload:t,timestamp:r})}),P.on(k.LOW_CONSUMER_SCORE,({peerId:t,score:i,kind:r})=>{const n=this.participants.joined.get(t);n&&(n.emit("poorConnection",{score:i,kind:r}),this.participants.emit("poorConnection",{participantId:t,score:i,kind:r}))}),P.on(k.CONSUMER_SCORE_UPDATE,({score:t,kind:i,appData:r,peerId:n})=>{var s;const a=i==="video"&&((s=r==null?void 0:r.screenShare)!=null?s:!1),o=this.participants.joined.get(n);o&&(o.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:t,participantId:n}),this.participants.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:t,participantId:n}))}),P.on(k.PEER_PINNED,({peerId:t})=>{if(!t){h(this,vi).isPinned&&h(this,vi).setIsPinned(!1),this.participants.pinned.size!==0&&this.updatePinnedParticipants();return}if(t===h(this,vi).id){this.participants.pinned.size!==0&&this.updatePinnedParticipants(),h(this,vi).setIsPinned(!0);return}const i=this.participants.joined.get(t);h(this,vi).isPinned&&h(this,vi).setIsPinned(!1),this.updatePinnedParticipants(),i.setIsPinned(!0),this.participants.pinned.add(i),h(this,bt,Pt)instanceof ve&&h(this,bt,Pt).activatePeers([{peerId:i.id,producers:i.producers}]).catch(r=>{b.error("unable to create consumers",{error:r})})}),P.on(k.PEER_REQUESTED_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.REQUESTED_TO_JOIN_STAGE)}),P.on(k.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.OFF_STAGE)}),P.on(k.PEER_REJECTED_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.OFF_STAGE)}),P.on(k.PEER_ADDED_TO_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.ACCEPTED_TO_JOIN_STAGE)}),P.on(k.PEER_REMOVED_FROM_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.OFF_STAGE),this.participants.pinned.delete(t)}),P.on(k.PEER_STARTED_PRESENTING,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.ON_STAGE)}),P.on(k.PEER_STOPPED_PRESENTING,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(qt.OFF_STAGE),this.participants.pinned.delete(t)})}processMedia(t){var i;const r=h(this,bt,Pt).getConsumers(),{peerId:n,kind:s,appData:a,remotelyPaused:o,track:c,producerId:d}=(i=r.get(t))!=null?i:{};if(!n)return b.warn("processMedia::Peer ID is undefined",{consumer:{id:t,kind:s,peerId:n,appData:{supportsRemoteControl:a==null?void 0:a.supportsRemoteControl,screenShare:a==null?void 0:a.screenShare},remotelyPaused:o,producerId:d}}),{};const l=a;return b.info("ParticipantController::processMedia",{consumer:{id:t,peerId:n,kind:s,appData:l,remotelyPaused:o,producerId:d}}),h(this,Mc).set(t,{type:s,peerId:n,appData:l,remotelyPaused:o,producerId:d}),{peerId:n,kind:s,appData:l,remotelyPaused:o,track:c,producerId:d}}processConsumerClosed(t){const{peerId:i,type:r,appData:n,remotelyPaused:s,producerId:a}=h(this,Mc).get(t)||{},o=this.participants.joined.get(i);if(b.info("ParticipantController::processConsumerClosed",{consumer:{id:t,peerId:i,appData:n,kind:r,remotelyPaused:s,producerId:a}}),h(this,Mc).delete(t),!!o){if(n&&n.screenShare){o.setScreenShareEnabled(!1),Y.consumerSharedMediaState(t,{screen:!1}),o.screenShareTracks={audio:void 0,video:void 0};return}r==="audio"?(o.setAudioEnabled(!1),Y.consumerSharedMediaState(t,{audio:!1}),o.audioTrack=void 0):r==="video"&&(o.setVideoEnabled(!1),Y.consumerSharedMediaState(t,{video:!1}),o.videoTrack=void 0)}}processConsumerResumed(t){const{peerId:i,kind:r,appData:n,track:s,remotelyPaused:a,producerId:o}=this.processMedia(t);if(!i)return;b.info("ParticipantController::processConsumerResumed",{consumer:{id:t,peerId:i,kind:r,appData:n,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(n.screenShare){if(r==="video"?c.screenShareTracks.video=s:r==="audio"&&(c.screenShareTracks.audio=s),c.screenShareEnabled)return;c.setScreenShareEnabled(!0),Y.consumerSharedMediaState(t,{screen:!0});return}r==="video"?(c.videoTrack=s,c.setVideoEnabled(!0),Y.consumerSharedMediaState(t,{video:!0})):r==="audio"&&(c.audioTrack=s,c.setAudioEnabled(c.audioEnabled),Y.consumerSharedMediaState(t,{audio:c.audioEnabled}))}}processConsumerPaused(t){b.info(`ParticipantController::processConsumerPaused called for consumerId: ${t}`);const{peerId:i,kind:r,track:n,appData:s,remotelyPaused:a,producerId:o}=this.processMedia(t);if(!i)return;b.info("ParticipantController::processConsumerPaused",{consumer:{id:t,peerId:i,kind:r,appData:s,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);c&&(r==="video"?(c.videoTrack=n,c.setVideoEnabled(!1),Y.consumerSharedMediaState(t,{video:!1})):r==="audio"&&(c.audioTrack=n,c.setAudioEnabled(c.audioEnabled),Y.consumerSharedMediaState(t,{audio:c.audioEnabled})))}processNewConsumer(t){const{peerId:i,kind:r,remotelyPaused:n,track:s,appData:a,producerId:o}=this.processMedia(t);if(!i)return;b.info("ParticipantController::processNewConsumer",{consumer:{id:t,peerId:i,kind:r,remotelyPaused:n,appData:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(a.screenShare){r==="video"?c.screenShareTracks.video=s:r==="audio"&&(c.screenShareTracks.audio=s),(!n||h(this,vi).permissions.isRecorder||ee.hasFeature(re.SCREEENSHARE_ERR_HACK))&&c.setScreenShareEnabled(!0),a.supportsRemoteControl&&(c.supportsRemoteControl=!0);return}r==="video"?(c.videoTrack=s,n||c.setVideoEnabled(!0),Y.consumerSharedMediaState(t,{video:!n})):r==="audio"&&h(this,bt,Pt)instanceof ve&&(c.audioTrack=s,n||c.setAudioEnabled(!0),Y.consumerSharedMediaState(t,{audio:!n}))}}updateWebinarStatusForJoinedParticipants(t){t.forEach(i=>{const r=this.participants.joined.get(i);r&&(r.webinarStageStatus=qt.ON_STAGE)})}}vi=new WeakMap,Mc=new WeakMap,ts=new WeakMap,bt=new WeakSet,Pt=function(){return $t()};sc([E.trace("ParticipantController.updatePageParticipants")],Fa.prototype,"updatePageParticipants",1);sc([E.trace("ParticipantController.setupEvents")],Fa.prototype,"setupEvents",1);sc([E.trace("ParticipantController.processMedia")],Fa.prototype,"processMedia",1);sc([E.trace("ParticipantController.processConsumerClosed")],Fa.prototype,"processConsumerClosed",1);sc([E.trace("ParticipantController.processConsumerResumed")],Fa.prototype,"processConsumerResumed",1);sc([E.trace("ParticipantController.processConsumerPaused")],Fa.prototype,"processConsumerPaused",1);sc([E.trace("ParticipantController.processNewConsumer")],Fa.prototype,"processNewConsumer",1);var Sce=Object.defineProperty,Ece=Object.getOwnPropertyDescriptor,Tce=(e,t,i,r)=>{for(var n=r>1?void 0:r?Ece(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Sce(t,i,n),n},lh,by,wy,uh,yP;let U1=(yP=class extends At{constructor(e,t,i,r){super(),I(this,lh),I(this,wy,void 0),I(this,uh,void 0),v(this,"viewType"),v(this,"meetingStartedTimestamp"),v(this,"meetingTitle"),A(this,wy,e),this.viewType=t,A(this,uh,i),this.meetingTitle=r}get joined(){var e;return(e=h(this,lh,by))==null?void 0:e.roomJoined}get roomName(){var e;return(e=h(this,lh,by))==null?void 0:e.roomName}get socketConnected(){return h(this,uh).isConnected}},lh=new WeakSet,by=function(){return $t()},wy=new WeakMap,uh=new WeakMap,yP);U1=Tce([Si(e=>{throw new R(e.message,"0800")})],U1);var kce=Object.defineProperty,Pce=Object.getOwnPropertyDescriptor,Cce=(e,t,i,r)=>{for(var n=r>1?void 0:r?Pce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&kce(t,i,n),n};class UM{constructor(t,i,r){v(this,"meta"),this.meta=new U1(t,Ee.isV2AuthToken?t.config.viewType:t.permissions.viewType,i,r),this.setupEvents()}get roomName(){return this.meta.roomName}setupEvents(){P.on(k.ROOM_JOINED,t=>{t.startedAt&&(this.meta.meetingStartedTimestamp=new Date(t.startedAt),this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp}))}),P.on(k.ROOM_STATE,({createdAt:t})=>{const i=this.meta.meetingStartedTimestamp;if(t&&!i){const r=new Date(t*1e3);this.meta.meetingStartedTimestamp=r,this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp})}}),P.on(k.ROOM_NODE_CONNECTED,()=>{this.meta.emit("connected")}),P.on(k.ROOM_NODE_DISCONNECTED,()=>{this.meta.emit("disconnected")}),P.on(k.ICE_CONNECTED,({transport:t})=>{this.meta.emit("iceConnected",{transport:t})}),P.on(k.ICE_DISCONNECTED,({transport:t})=>{this.meta.emit("iceDisconnected",{transport:t})}),P.on(k.ICE_RECONNECTING,({transport:t})=>{this.meta.emit("iceReconnecting",{transport:t})}),P.on(k.ICE_FAILED,({transport:t})=>{this.meta.emit("iceFailed",{transport:t})}),P.on(k.PRODUCER_SCORE_UPDATE,({score:t})=>{t<5&&this.meta.emit("poorConnection",{score:t})}),P.on(k.SOCKET_SERVICE_CONNECTED,()=>{this.meta.emit("socketConnected")}),P.on(k.SOCKET_SERVICE_DISCONNECTED,()=>{this.meta.emit("socketDisconnected")}),P.on(k.SOCKET_SERVICE_RECONNECTING,()=>{this.meta.emit("socketReconnecting")}),P.on(k.SOCKET_SERVICE_RECONNECTION_ATTEMPT,({attempt:t})=>{this.meta.emit("socketReconnectAttempt",{attempt:t})}),P.on(k.SOCKET_SERVICE_RECONNECT_FAILURE,({attempt:t})=>{this.meta.emit("socketReconnectFailure",{attempt:t})}),P.on(k.SOCKET_SERVICE_RECONNECTED,()=>{this.meta.emit("socketReconnected")}),P.on(k.SOCKET_SERVICE_FAILED,()=>{this.meta.emit("socketFailure")}),P.on(k.ROOM_NODE_CONNECTION_ERROR,t=>{const{message:i}=t;i.match(/room '([a-z0-9-]+)' not found/i)&&this.meta.emit("connectionError",{reason:"ROOM_NOT_FOUND"})})}}Cce([E.trace("MetaController.setupEvents")],UM.prototype,"setupEvents",1);var Rce=Object.defineProperty,xce=Object.getOwnPropertyDescriptor,Ice=(e,t,i,r)=>{for(var n=r>1?void 0:r?xce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Rce(t,i,n),n};const Gt={getPeer:14,getPeers:15,chatMessage:16,getRoomName:17,getDisplayTitle:18,getPluginInitiator:19,customPluginEventToParent:20,peerJoined:22,peerLeft:23,sendData:24};var Li,Xa,dr,El,Tl,kl,Ni,Wi,_P;let j1=(_P=class extends At{constructor({baseURL:e,createdAt:t,description:i,id:r,name:n,organizationId:s,picture:a,private:o,published:c,staggered:d,tags:l,type:u,updatedAt:g},m,f,w,S,y){super(),I(this,Ni),I(this,Li,void 0),I(this,Xa,void 0),v(this,"baseURL"),v(this,"createdAt"),v(this,"description"),v(this,"id"),v(this,"name"),I(this,dr,void 0),I(this,El,void 0),I(this,Tl,void 0),v(this,"organizationId"),v(this,"picture"),v(this,"private"),v(this,"published"),v(this,"staggered"),v(this,"tags"),v(this,"type"),v(this,"updatedAt"),v(this,"config"),I(this,kl,void 0),v(this,"active"),v(this,"iframes"),v(this,"enabledBy"),this.baseURL=e,this.createdAt=new Date(t),this.description=i,this.id=r,this.name=n,A(this,dr,w),this.organizationId=s,this.picture=a,this.private=o,this.published=c,this.staggered=d,this.tags=l,this.type=u,this.updatedAt=new Date(g),this.active=!1,this.iframes=new Map,A(this,Li,m),A(this,Xa,f),A(this,El,S),A(this,Tl,y),this.enabledBy=""}get roomJoined(){var e;return((e=h(this,Ni,Wi))==null?void 0:e.roomJoined)===!0}sendIframeEvent(e){this.iframes.size&&[...this.iframes.keys()].forEach(t=>{const{iframe:i}=this.iframes.get(t);i&&(i instanceof HTMLIFrameElement?i.contentWindow.postMessage(e,"*"):i.postMessage(JSON.stringify(e)))})}async handleIframeMessage(e){var t,i,r,n;let s;if(h(this,Xa)==="socket-service"){const c=e,{payload:d,uuid:l,type:u}=c;switch(u){case de.customPluginEventToRoom:{h(this,Li).customPluginEventToRoom(this.id,d,l);break}case de.customPluginEventToPeers:{h(this,Li).customPluginEventToPeers(this.id,d,d.peerIds,l);break}case de.enablePluginForRoom:{h(this,Li).enablePluginForRoom(this.id,l);break}case de.enablePluginForPeers:{h(this,Li).enablePluginForPeers(this.id,d.peerIds,l);break}case de.disablePluginForRoom:{h(this,Li).disablePluginForRoom(this.id,l);break}case de.disablePluginForPeers:{h(this,Li).disablePluginForPeers(this.id,d.peerIds,l);break}case de.storeInsertKeys:{h(this,Li).storeInsertKeys(this.id,d.store,d.insertKeys,l);break}case de.storeGetKeys:{h(this,Li).storeGetKeys(this.id,d.store,d.getKeys,l);break}case de.storeDeleteKeys:{h(this,Li).storeDeleteKeys(this.id,d.store,d.deleteKeys,l);break}case de.storeDelete:{h(this,Li).storeDelete(this.id,d.store,l);break}case Gt.chatMessage:{const{messagePayload:g,peerIds:m}=d;if(!h(this,Tl)){this.sendIframeEvent({type:Gt.chatMessage,uuid:c.uuid,payload:{error:"Chat is disabled for this room."}});return}try{await h(this,Tl).sendMessage(g,m),this.sendIframeEvent({type:Gt.chatMessage,uuid:c.uuid,payload:{success:!0}})}catch(f){this.sendIframeEvent({type:Gt.chatMessage,uuid:c.uuid,payload:{error:f}})}break}case Gt.getPeer:{let g;const{peerId:m}=d,f={...h(this,dr),isRecorder:(t=h(this,dr).permissions)==null?void 0:t.isRecorder};m?(g=h(this,El).joined.get(d.peerId),h(this,dr).id===m&&(g=f)):g=f,this.sendIframeEvent({type:Gt.getPeer,payload:{peer:g&&y1(g)},uuid:c.uuid});break}case Gt.getPeers:{const g=h(this,El).joined.toArray().map(m=>y1(m));this.sendIframeEvent({type:Gt.getPeers,payload:{peers:g},uuid:c.uuid});break}case Gt.getPluginInitiator:{this.sendIframeEvent({type:Gt.getPluginInitiator,payload:{enabledBy:this.enabledBy},uuid:c.uuid});break}case Gt.getDisplayTitle:{this.sendIframeEvent({type:Gt.getDisplayTitle,payload:{displayTitle:h(this,Ni,Wi).meetingTitle},uuid:c.uuid});break}case Gt.getRoomName:{this.sendIframeEvent({type:Gt.getRoomName,payload:{roomName:h(this,Ni,Wi).roomName},uuid:c.uuid});break}case Gt.customPluginEventToParent:{this.emit(c.payload.eventName,c.payload.data);break}}return}const a=(c,d)=>{if(h(this,dr).userId===c)return h(this,dr).id;let l;return d.forEach(u=>{u.userId===c&&(l=u.id)}),l},o=e;switch(o.type){case"pluginEvent":case"storePluginData":case"getPluginData":case"enablePluginForAll":case"enablePluginForUser":case"disablePluginForUser":case"chatMessage":{s=await h(this,Ni,Wi).sendMessage(o),this.sendIframeEvent(s);break}case"getJoinedPeers":{s=await h(this,Ni,Wi).getRoomState(),this.sendIframeEvent({type:"websocket/get-joined-peers",payload:{...o.payload,peers:s.payload.roomState.peers}});break}case"getPeerInfo":{s=await h(this,Ni,Wi).sendMessage({type:o.type,payload:{...o.payload,peerId:(r=(i=o.payload)==null?void 0:i.peerId)!=null?r:h(this,dr).id}}),this.sendIframeEvent(s);break}case"getRoomState":{s=await h(this,Ni,Wi).getRoomState();const{plugins:c,peers:d}=s.payload.roomState,{enabledBy:l}=c.find(g=>g.id===this.id),u=a(l,d);this.sendIframeEvent({type:"websocket/get-room-state",payload:{...o.payload,roomName:s.payload.roomState.roomName,pluginInitiatorPeerId:u,pluginInitiatorUserId:l,peers:s.payload.roomState.peers,displayTitle:s.payload.roomState.displayTitle,roomUUID:s.payload.roomState.roomUUID,currentPeer:h(this,dr).id,isRecorder:(n=h(this,dr).permissions)==null?void 0:n.isRecorder}});break}case"getPluginInitiatorId":{s=await h(this,Ni,Wi).getRoomState();const{plugins:c,peers:d}=s.payload.roomState,{enabledBy:l}=c.find(g=>g.id===this.id),u=a(l,d);this.sendIframeEvent({type:"websocket/get-plugin-initiator-peer-id",payload:{...o.payload,pluginInitiatorPeerId:u}});break}case"getPluginInitiatorUserId":{s=await h(this,Ni,Wi).getRoomState();const{plugins:c}=s.payload.roomState,{enabledBy:d}=c.find(l=>l.id===this.id);this.sendIframeEvent({type:"websocket/get-plugin-initiator-user-id",payload:{...o.payload,pluginInitiatorUserId:d}});break}case"pluginEventToParent":{this.emit(o.payload.eventName,o.payload.data);break}case"toggleViewMode":{this.emit("toggleViewMode",o.payload.data);break}}}sendData(e){if(h(this,Xa)==="socket-service"){this.sendIframeEvent({type:Gt.sendData,uuid:"",payload:e});return}this.sendIframeEvent({type:k.PLUGIN_INTERNAL_DATA,payload:{pluginId:this.id,data:e}})}removePluginView(e="default"){var t;const{iframe:i,listener:r}=(t=this.iframes.get(e))!=null?t:{};(i||r)&&(i instanceof HTMLIFrameElement?window.removeEventListener("message",r):i.props.onMessage=void 0,this.iframes.delete(e))}addPluginView(e,t="default"){var i;if(!h(this,kl))throw b.error("DytePlugin::addPluginView::no_auth_token_set_for_plugin"),new R("No auth token set for plugin.");if(!e)throw b.error("DytePlugin::addPluginView::iframe_was_not_provided"),new R("Iframe was not provided.");this.removePluginView(t);const r=e,n=new URL(this.baseURL),s={auth:h(this,kl),parent:!navigator.isReactNative&&window.location.origin,backend:Ze.apiBase,pluginId:this.id,roomName:(i=h(this,Ni,Wi).roomName)!=null?i:"",displayTitle:h(this,Ni,Wi).meetingTitle};if(Object.keys(s).forEach(a=>{n.searchParams.set(a,s[a])}),r instanceof HTMLIFrameElement){r.src=n.href,r.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",r.title=t;const a=async o=>{o.source===e.contentWindow&&await this.handleIframeMessage(o.data)};window.addEventListener("message",a),this.iframes.set(t,{iframe:r,listener:a})}else r.props.onMessage=a=>{this.handleIframeMessage(JSON.parse(a.nativeEvent.data))},this.iframes.set(t,{iframe:r})}setActive(e){var t,i;if(this.active=e,e){this.emit("stateUpdate",{active:this.active,pluginId:this.id,bind:this.addPluginView.bind(this),views:(t=this.config)==null?void 0:t.views});return}this.active=!1,this.emit("stateUpdate",{active:this.active,pluginId:this.id,views:(i=this.config)==null?void 0:i.views})}async activateForSelf(){const e=ui(),t=await e.authorizePlugin(this.id);A(this,kl,t);try{const i=await e.getPluginConfig(this.baseURL);this.config=i}catch(i){b.error("DytePlugin::activateForSelf",{error:i})}this.setActive(!0),this.emit("enabled")}deactivateForSelf(){[...this.iframes.keys()].forEach(e=>{this.removePluginView(e)}),this.iframes.clear(),this.setActive(!1),this.emit("closed")}async enable(){return this.activateForSelf()}disable(){return this.deactivateForSelf()}async activate(){var e,t;if((t=(e=h(this,dr).permissions)==null?void 0:e.plugins)!=null&&t.canStart){if(h(this,Xa)==="socket-service"){h(this,Li).addPlugin(this.id,this.staggered);return}await h(this,Ni,Wi).addRoomPlugin(this)}}async deactivate(){var e,t;if((t=(e=h(this,dr).permissions)==null?void 0:e.plugins)!=null&&t.canClose){if(h(this,Xa)==="socket-service"){h(this,Li).removePlugin(this.id);return}await h(this,Ni,Wi).removeRoomPlugin(this)}}},Li=new WeakMap,Xa=new WeakMap,dr=new WeakMap,El=new WeakMap,Tl=new WeakMap,kl=new WeakMap,Ni=new WeakSet,Wi=function(){return $t()},_P);j1=Ice([Si(e=>{throw new R(e.message,"0600")})],j1);class bP extends aw{constructor(){super({onAddEvent:"pluginAdded",onDeleteEvent:"pluginDeleted"})}add(t,i=!0){return super.add(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}var Ace=Object.defineProperty,Oce=Object.getOwnPropertyDescriptor,Mce=(e,t,i,r)=>{for(var n=r>1?void 0:r?Oce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Ace(t,i,n),n};let $1=class{constructor(){v(this,"all"),v(this,"active"),this.all=new bP,this.active=new bP}};$1=Mce([Si(e=>{throw new R(e.message,"0600")})],$1);var Dce=Object.defineProperty,Lce=Object.getOwnPropertyDescriptor,ac=(e,t,i,r)=>{for(var n=r>1?void 0:r?Lce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Dce(t,i,n),n},Ln=(e=>(e[e.TEXT=0]="TEXT",e[e.IMAGE=1]="IMAGE",e[e.FILE=2]="FILE",e))(Ln||{}),Rn;class za{constructor(t){I(this,Rn,void 0),A(this,Rn,t)}getChatMessages(){return h(this,Rn).sendMessagePromise(Ri.getMessages)}async getChatMessagesPaginated(t,i,r,n=0){const s={timeStamp:t,size:i,from:n,reversed:r},a=await h(this,Rn).sendMessagePromise(Ri.getPaginatedMessages,fne.toBinary(s));return a.payload?yne.fromBinary(a.payload):{messages:[],next:!1}}sendMessageToRoom(t,i){const r={payloadType:i,payload:t};h(this,Rn).sendMessage(Ri.sendMessageToRoom,Sne.toBinary(r))}sendMessageToPeers(t,i,r){const n={payloadType:i,peerIds:r,payload:t};h(this,Rn).sendMessage(Ri.sendMessageToPeers,kne.toBinary(n))}sendMessage(t,i,r){if(r&&r.length>0){this.sendMessageToPeers(t,i,r);return}this.sendMessageToRoom(t,i)}editMessage(t,i,r,n){const s={chatId:t,pinned:n,payloadType:r,payload:i};h(this,Rn).sendMessage(Ri.editMessage,Rne.toBinary(s))}deleteMessage(t){h(this,Rn).sendMessage(Ri.deleteMessage,Ane.toBinary({chatId:t}))}on(t,i){let r,n;switch(t){case Ri.sendMessageToRoom:{r=ay.fromBinary.bind(ay),n=ay.create();break}case Ri.sendMessageToPeers:{r=oy.fromBinary.bind(oy),n=oy.create();break}case Ri.editMessage:{r=cy.fromBinary.bind(cy),n=cy.create();break}case Ri.deleteMessage:{r=dy.fromBinary.bind(dy),n=dy.create();break}}if(!r){b.warn(`ChatSocketHandler::Event ${t} is not recognized`);return}h(this,Rn).on(t,({payload:s})=>{let a=n;try{a=r(s)}catch(o){b.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}Rn=new WeakMap;ac([E.trace("SocketService.getChatMessages")],za.prototype,"getChatMessages",1);ac([E.trace("SocketService.getChatMessagesPaginated")],za.prototype,"getChatMessagesPaginated",1);ac([E.trace("SocketService.sendMessageToRoom")],za.prototype,"sendMessageToRoom",1);ac([E.trace("SocketService.sendMessageToPeers")],za.prototype,"sendMessageToPeers",1);ac([E.trace("SocketService.sendMessage")],za.prototype,"sendMessage",1);ac([E.trace("SocketService.editMessage")],za.prototype,"editMessage",1);ac([E.trace("SocketService.deleteMessage")],za.prototype,"deleteMessage",1);var Nce=Object.defineProperty,Uce=Object.getOwnPropertyDescriptor,Kn=(e,t,i,r)=>{for(var n=r>1?void 0:r?Uce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Nce(t,i,n),n};const fd=["text","image","file","poll"];var je,Ec,qr,lr,zs,eo,wP;let zr=(wP=class extends At{constructor(e,t,i,r){super(),I(this,zs),v(this,"messages"),I(this,je,void 0),I(this,Ec,void 0),I(this,qr,void 0),I(this,lr,void 0),A(this,qr,e),A(this,lr,t),A(this,je,i),A(this,Ec,r),this.messages=[]}get roomJoined(){var e;return((e=h(this,zs,eo))==null?void 0:e.roomJoined)===!0}async sendTextMessage(e,t){var i,r,n,s,a,o;if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.text))throw b.error("sendTextMessage::public_chat_permission_denied"),new R("Could not send message to public chat.","0501");if(t&&t.length>0&&(!((a=h(this,je).permissions)!=null&&a.chatPrivate.canSend)||!((o=h(this,je).permissions)!=null&&o.chatPrivate.text)))throw b.error("sendTextMessage::private_chat_permission_denied"),new R("Could not send message to private chat.","0501");if(!e)throw b.error("sendTextMessage::message_can_not_be_empty"),new R("Message can not be empty.","0502");if(h(this,lr)==="socket-service"){let d=[];t&&t.length>0&&(t.push(h(this,je).id),d=h(this,Ec).joined.toArray().filter(l=>t.includes(l.id)).map(l=>l.userId),d.push(h(this,je).userId)),h(this,qr).sendMessage(e,Ln.TEXT,t);return}if(t!==void 0&&t.length>0){b.error("sendTextMessage::private_chat_unsupported");return}const c={userId:h(this,je).userId,displayName:h(this,je).name,message:e,type:fd.indexOf("text"),time:+new Date};if(!this.roomJoined)throw b.error("DyteChat.sendTextMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new R("Can`t sendTextMessage without joining room");await h(this,zs,eo).sendChatMessage(c)}async sendImageMessage(e,t){var i,r,n,s,a,o;if(t&&t.length>0){if(!((i=h(this,je).permissions)!=null&&i.chatPrivate.canSend)||!((r=h(this,je).permissions)!=null&&r.chatPrivate.files)){b.error("sendImageMessage::private_chat_permission_denied");return}}else if(!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.canSend)||!((o=(a=h(this,je).permissions)==null?void 0:a.chatPublic)!=null&&o.files)){b.error("sendImageMessage::permission_denied");return}if(!e){b.error("sendImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(e.type)){b.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:e.type}});return}try{const c=ui(),{getLocation:d,putLocation:l}=await c.getPresignedUrls(e.name);if(await c.uploadFile(e,l),h(this,lr)==="socket-service"){let g=[];t&&t.length>0&&(t.push(h(this,je).id),g=h(this,Ec).joined.toArray().filter(m=>t.includes(m.id)).map(m=>m.userId),g.push(h(this,je).userId)),h(this,qr).sendMessage(d,Ln.IMAGE,t);return}if(t!==void 0&&t.length>0){b.error("sendImageMessage::private_chat_unsupported");return}const u={userId:h(this,je).userId,displayName:h(this,je).name,type:fd.indexOf("image"),link:d,time:+new Date};if(!this.roomJoined)throw b.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new R("Can`t sendImageMessage without joining room");await h(this,zs,eo).sendChatMessage(u)}catch{throw new R("Error sending image message.")}}async sendFileMessage(e,t){var i,r,n,s,a,o;if(t&&t.length>0){if(!((i=h(this,je).permissions)!=null&&i.chatPrivate.canSend)||!((r=h(this,je).permissions)!=null&&r.chatPrivate.files)){b.error("sendFileMessage::private_chat_permission_denied");return}}else if(!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.canSend)||!((o=(a=h(this,je).permissions)==null?void 0:a.chatPublic)!=null&&o.files)){b.error("sendFileMessage::permission_denied");return}if(!e){b.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const c=ui(),{getLocation:d,putLocation:l}=await c.getPresignedUrls(e.name);if(await c.uploadFile(e,l),h(this,lr)==="socket-service"){let g=[];t&&t.length>0&&(t.push(h(this,je).id),g=h(this,Ec).joined.toArray().filter(f=>t.includes(f.id)).map(f=>f.userId),g.push(h(this,je).userId));const m=JSON.stringify({link:d,name:e.name,size:"size"in e?e.size:0});h(this,qr).sendMessage(m,Ln.FILE,t);return}if(t!==void 0&&t.length>0){b.error("sendFileMessage::private_chat_unsupported");return}const u={userId:h(this,je).userId,displayName:h(this,je).name,type:fd.indexOf("file"),link:d,name:e.name,size:"size"in e?e.size:0,time:+new Date};if(!this.roomJoined)throw b.error("DyteChat.sendFileMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new R("Can`t sendFileMessage without joining room");await h(this,zs,eo).sendChatMessage(u)}catch{throw new R("Error sending file message.")}}async sendMessage(e,t){switch(e.type){case"text":await this.sendTextMessage(e.message,t);break;case"image":await this.sendImageMessage(e.image,t);break;case"file":await this.sendFileMessage(e.file,t);break;default:b.error("sendMessage::message_type_not_supported",{dyteChat:{messageType:e.type}});break}}async editTextMessage(e,t){var i,r,n,s;if(h(this,lr)!=="socket-service"){b.warn("editTextMessage::Coming soon!");return}if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.text)){b.error("editTextMessage::permission_denied");return}if(!t){b.error("editTextMessage::message_can_not_be_empty");return}h(this,qr).editMessage(e,t,Ln.TEXT)}async editImageMessage(e,t){var i,r,n,s;if(h(this,lr)!=="socket-service"){b.warn("editImageMessage::Coming soon!");return}if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.files)){b.error("editImageMessage::permission_denied");return}if(!t){b.error("editImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(t.type)){b.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:t.type}});return}try{const a=ui(),{getLocation:o,putLocation:c}=await a.getPresignedUrls(t.name);await a.uploadFile(t,c),h(this,qr).editMessage(e,o,Ln.IMAGE)}catch{throw new R("Error editing image message.")}}async editFileMessage(e,t){var i,r,n,s;if(h(this,lr)!=="socket-service"){b.warn("editFileMessage::Coming soon!");return}if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.files)){b.error("sendFileMessage::permission_denied");return}if(!t){b.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const a=ui(),{getLocation:o,putLocation:c}=await a.getPresignedUrls(t.name);await a.uploadFile(t,c),h(this,qr).editMessage(e,JSON.stringify({link:o,name:t.name,size:"size"in t?t.size:0}),Ln.FILE)}catch{throw new R("Error editing file message.")}}async editMessage(e,t){if(h(this,lr)!=="socket-service"){b.warn("editMessage::Coming soon!");return}switch(t.type){case"text":{this.editTextMessage(e,t.message);break}case"image":{this.editImageMessage(e,t.image);break}case"file":{this.editFileMessage(e,t.file);break}default:{b.error("editMessage::message_type_not_supported",{dyteChat:{messageType:t.type}});break}}}async deleteMessage(e){if(h(this,lr)!=="socket-service"){b.warn("editMessage::Coming soon!");return}h(this,qr).deleteMessage(e)}getMessagesByUser(e){return this.messages.filter(t=>t.userId===e)}getMessagesByType(e){return this.messages.filter(t=>t.type===e)}async pin(e){if(h(this,lr)!=="socket-service"){if(!this.roomJoined)throw new R("Can`t pin message without joining room");await h(this,zs,eo).pinChatMessage({id:e})}}async unpin(e){if(h(this,lr)!=="socket-service"){if(!this.roomJoined)throw new R("Can`t unpin message without joining room");await h(this,zs,eo).unpinChatMessage({id:e})}}async getMessages(e,t,i,r=0){const n=await h(this,qr).getChatMessagesPaginated(e,t,i,r);return{messages:n.messages.map(s=>Io.formatSocketServiceMessage(s)),next:n.next}}get pinned(){return this.messages.filter(e=>e.pinned)}},je=new WeakMap,Ec=new WeakMap,qr=new WeakMap,lr=new WeakMap,zs=new WeakSet,eo=function(){return $t()},wP);Kn([E.trace("DyteChat.sendTextMessage")],zr.prototype,"sendTextMessage",1);Kn([E.trace("DyteChat.sendImageMessage")],zr.prototype,"sendImageMessage",1);Kn([E.trace("DyteChat.sendFileMessage")],zr.prototype,"sendFileMessage",1);Kn([E.trace("DyteChat.sendMessage")],zr.prototype,"sendMessage",1);Kn([E.trace("DyteChat.editTextMessage")],zr.prototype,"editTextMessage",1);Kn([E.trace("DyteChat.editImageMessage")],zr.prototype,"editImageMessage",1);Kn([E.trace("DyteChat.editFileMessage")],zr.prototype,"editFileMessage",1);Kn([E.trace("DyteChat.editMessage")],zr.prototype,"editMessage",1);Kn([E.trace("DyteChat.deleteMessage")],zr.prototype,"deleteMessage",1);zr=Kn([Si(e=>{throw new R(e.message,"0500")})],zr);var jce=Object.defineProperty,$ce=Object.getOwnPropertyDescriptor,Vce=(e,t,i,r)=>{for(var n=r>1?void 0:r?$ce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&jce(t,i,n),n},ph,Sy,Pl,SP;const Kr=(SP=class{constructor(e,t,i,r){I(this,ph),v(this,"chat"),v(this,"chatSocketHandler"),v(this,"self"),I(this,Pl,void 0),this.chatSocketHandler=e,A(this,Pl,t),this.chat=new zr(e,t,i,r),this.self=i,this.setupEvents()}get roomJoined(){var e;return((e=h(this,ph,Sy))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r){const n=ee.getValue(re.CHAT_SOCKET_SERVER);b.debug(`Received flagsmith chat_socket_server: ${n}`);const s=Qu("chat_socket_server")==="socket-service"||n==="socket-service"||r.includes("HIVE")?"socket-service":"room-node";return b.info(`Using socket server :: ${s} for chat`),new Kr(e,s,t,i)}static formatMessage(e){return{...e,time:new Date(e.time),type:fd[e.type]}}static formatSocketServiceMessage(e){const t=e.createdAt*1e3,i={displayName:e.displayName,id:e.chatId,time:t,timeMs:e.createdAtMs,type:e.payloadType,isEdited:e.isEdited,userId:e.userId,targetUserIds:e.targetUserIds,message:"",link:"",name:"",size:0};switch(i.type){case Ln.TEXT:{i.message=e.payload;break}case Ln.IMAGE:{i.link=e.payload;break}case Ln.FILE:{const{link:r,name:n,size:s}=JSON.parse(e.payload);i.link=r,i.name=n,i.size=s;break}}return Kr.formatMessage(i)}async getChatMessages(){if(this.self.config.viewType==="LIVESTREAM"||ee.hasFeature(re.FEAT_PAGINATED_CHAT))return;if(h(this,Pl)==="socket-service"){const t=await this.chatSocketHandler.getChatMessages();if(!(t!=null&&t.payload))return;const i=bne.fromBinary(t.payload).messages;this.chat.messages=i.map(r=>Kr.formatSocketServiceMessage(r));return}if(!this.roomJoined){b.error("ChatController.getChatMessages.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{messages:e}=(await h(this,ph,Sy).getChatMessages()).payload;this.chat.messages=e.filter(t=>fd[t.type]!=="poll").map(Kr.formatMessage)}setupEvents(){h(this,Pl)==="socket-service"?P.on(k.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getChatMessages()}):P.onAsync(k.ROOM_JOINED,async()=>{await this.getChatMessages()}),this.chatSocketHandler.on(Ri.sendMessageToRoom,e=>{const t=Kr.formatSocketServiceMessage(e.message);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),this.chatSocketHandler.on(Ri.sendMessageToPeers,e=>{const t=Kr.formatSocketServiceMessage(e.message);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),this.chatSocketHandler.on(Ri.editMessage,e=>{const t=Kr.formatSocketServiceMessage(e.message),i=this.chat.messages.findIndex(r=>r.id===t.id);i!==-1&&(this.chat.messages[i]=t,this.chat.emit("chatUpdate",{action:"edit",message:t,messages:this.chat.messages}))}),this.chatSocketHandler.on(Ri.deleteMessage,e=>{const t=this.chat.messages.findIndex(r=>r.id===e.chatId);if(t===-1)return;const[i]=this.chat.messages.splice(t,1);this.chat.emit("chatUpdate",{action:"delete",message:i,messages:this.chat.messages})}),P.on(k.NEW_CHAT_MESSAGE,e=>{if(fd[e==null?void 0:e.type]==="poll")return;const t=Kr.formatMessage(e);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),P.on(k.PIN_CHAT_MESSAGE,async e=>{const t=Kr.formatMessage(e),i=this.chat.messages.findIndex(r=>r.id===t.id);this.chat.messages[i]=t,this.chat.emit("pinMessage",{message:t,messages:this.chat.messages})}),P.on(k.UNPIN_CHAT_MESSAGE,async e=>{const t=Kr.formatMessage(e),i=this.chat.messages.findIndex(r=>r.id===t.id);this.chat.messages[i]=t,this.chat.emit("unpinMessage",{message:t,messages:this.chat.messages})})}},ph=new WeakSet,Sy=function(){return $t()},Pl=new WeakMap,SP);let Io=Kr;Vce([E.trace("ChatController.setupEvents")],Io.prototype,"setupEvents",1);var Fce=Object.defineProperty,zce=Object.getOwnPropertyDescriptor,Bce=(e,t,i,r)=>{for(var n=r>1?void 0:r?zce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Fce(t,i,n),n},Jr,Cl,Rl,hh,Ey,EP;const jM=(EP=class{constructor(e,t,i,r){I(this,hh),v(this,"plugins"),I(this,Jr,void 0),I(this,Cl,void 0),I(this,Rl,void 0),A(this,Jr,e),A(this,Rl,t),A(this,Cl,i),this.plugins=r,this.setupEvents()}get roomJoined(){var e;return((e=h(this,hh,Ey))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r,n,s,a){const o=ee.getValue(re.PLUGIN_SOCKET_SERVER);b.debug(`Received flagsmith plugin_socket_server:: ${o}`);const c=o==="socket-service"||a.includes("HIVE")?"socket-service":"room-node";b.info(`Using socket server ${c} for plugin`);const d=new $1;return e.forEach(l=>{const u=new j1(l,t,c,n,s,r);d.all.add(u)}),n.config.isV2===!1&&n.config.setDisabledPlugins(d.all.toArray().map(l=>l.id)),new jM(t,i,c,d)}async getRoomPlugins(){if(h(this,Cl)==="socket-service"){const{plugins:t}=await h(this,Jr).getActivePlugins();await Promise.all(t.map(i=>this.enablePlugin({id:i.pluginId,enabledBy:i.enabledBy})));return}if(!this.roomJoined){b.error("PluginController.getRoomPlugins.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{payload:e}=await h(this,hh,Ey).getRoomState();await Promise.all(e.roomState.plugins.map(t=>this.enablePlugin(t)))}async enablePlugin({id:e,enabledBy:t}){const i=this.plugins.all.get(e);i&&(await i.activateForSelf(),i.enabledBy=t)}async disablePlugin({id:e}){const t=this.plugins.all.get(e);t&&t.deactivateForSelf()}sendIframeEventOld(e,t){const{id:i}=t,r=this.plugins.all.get(i);r&&r.sendIframeEvent({type:e,payload:t})}sendIframeEvent(e,t,i,r){const n=this.plugins.all.get(t);t&&n.sendIframeEvent({type:e,uuid:i,payload:r})}broadcastIframeEventOld(e,t){this.plugins.active.forEach(i=>{this.sendIframeEventOld(e,{...t,id:i.id})})}broadcastIframeEvent(e,t){this.plugins.active.forEach(i=>{this.sendIframeEvent(e,i.id,"",t)})}setupEvents(){if(this.plugins.all.on("stateUpdate",({active:e,id:t})=>{if(e){this.plugins.active.add(this.plugins.all.get(t));return}this.plugins.active.delete(t)}),P.onAsync(k.ROOM_JOINED,async()=>{await this.getRoomPlugins(),b.debug("[ROOM_JOINED] resolved request to fetch plugins.")}),h(this,Cl)==="socket-service"){h(this,Jr).on(de.addPlugin,async e=>{var t;const i=e.pluginId;(t=this.plugins.all.get(i))!=null&&t.active||await this.enablePlugin({id:i,enabledBy:e.enabledBy})}),h(this,Jr).on(de.removePlugin,async e=>{var t;const i=e.pluginId;(t=this.plugins.all.get(i))!=null&&t.active&&await this.disablePlugin({id:i})}),[de.enablePluginForPeers,de.enablePluginForRoom].forEach(e=>{h(this,Jr).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{enabledBy:t.enabledBy})})}),[de.disablePluginForPeers,de.disablePluginForRoom].forEach(e=>{h(this,Jr).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{disabledBy:t.disabledBy})})}),[de.customPluginEventToPeers,de.customPluginEventToRoom].forEach(e=>{h(this,Jr).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{data:JSON.parse(new TextDecoder().decode(t.pluginData))})})}),[de.storeInsertKeys,de.storeGetKeys,de.storeDeleteKeys].forEach(e=>{h(this,Jr).on(e,async(t,i)=>{var r;const n=(r=t.storeItems)==null?void 0:r.map(s=>({timestamp:s.timestamp,peerId:s.peerId,payload:JSON.parse(s.payload?new TextDecoder().decode(s.payload):"{}"),key:s.storeKey}));this.sendIframeEvent(e,t.pluginId,i,{storeName:t.storeName,storeItems:n})})}),h(this,Jr).on(de.storeDelete,async(e,t)=>{this.sendIframeEvent(de.storeDelete,e.pluginId,t,{storeName:e.storeName})}),h(this,Rl).on(Ri.sendMessageToPeers,e=>{const t=Io==null?void 0:Io.formatSocketServiceMessage(e.message);this.broadcastIframeEvent(Gt.chatMessage,{message:t})}),h(this,Rl).on(Ri.sendMessageToRoom,e=>{const t=Io==null?void 0:Io.formatSocketServiceMessage(e.message);this.broadcastIframeEvent(Gt.chatMessage,{message:t})}),P.on(k.PEER_JOINED,e=>{this.broadcastIframeEvent(Gt.peerJoined,e)}),P.on(k.PEER_CLOSED,e=>{this.broadcastIframeEvent(Gt.peerLeft,e)});return}P.on(k.ENABLE_PLUGIN,async({id:e,enabledBy:t})=>{await this.enablePlugin({id:e,enabledBy:t})}),P.on(k.DISABLE_PLUGIN,async({id:e})=>{await this.disablePlugin({id:e})}),[k.PLUGIN_DATA,k.PLUGIN_EVENT].forEach(e=>{P.on(e,t=>{this.sendIframeEventOld(e,t)})}),[k.PEER_JOINED,k.PEER_CLOSED,k.NEW_CHAT_MESSAGE].forEach(e=>{P.on(e,t=>{this.broadcastIframeEventOld(e,t)})})}},Jr=new WeakMap,Cl=new WeakMap,Rl=new WeakMap,hh=new WeakSet,Ey=function(){return $t()},EP);let $M=jM;Bce([E.trace("PluginController.setupEvents")],$M.prototype,"setupEvents",1);function Hce(){Oe.isElectron()&&window.dyteElectronGetDisplayMediaSource&&(navigator.mediaDevices.getDisplayMedia=async e=>{const t=await window.dyteElectronGetDisplayMediaSource({types:["window","screen"]});let i=!1;if(e.video){const n=e.video;i={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t.id,maxWidth:n.width.max,maxHeight:n.height.max}}}const r={audio:!1,video:i};return await navigator.mediaDevices.getUserMedia(r)})}var Gce=Object.defineProperty,Wce=Object.getOwnPropertyDescriptor,qce=(e,t,i,r)=>{for(var n=r>1?void 0:r?Wce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Gce(t,i,n),n},xl,gh,Bs,Il,Al,TP;let V1=(TP=class extends At{constructor(e,t,i){super(),I(this,xl),v(this,"items"),I(this,Bs,void 0),I(this,Il,void 0),I(this,Al,void 0),A(this,Bs,e),A(this,Il,t),A(this,Al,i),this.items=[]}get roomJoined(){var e;return((e=h(this,xl,gh))==null?void 0:e.roomJoined)===!0}async create(e,t,i=!1,r=!1){if(h(this,Bs).config.viewType!=="LIVESTREAM"&&!this.roomJoined)throw new R("Can't create polls without joining room");if(!h(this,Bs).permissions.polls.canCreate){b.error("DytePolls::create::permission_denied");return}if(!e||!t){b.error("DytePolls::question_and_options_can_not_be_empty",{dytePolls:{hasQuestion:!!e,optionsLength:t==null?void 0:t.length}});return}if(t.length<2){b.error("DytePolls::there_must_be_at_least_two_options",{dytePolls:{hasQuestion:!!e,optionsLength:t.length}});return}if(h(this,Al)==="socket-service"){await h(this,Il).createPoll(e,t,i,r);return}const n={question:e,options:t,anonymous:i,hideVotes:r,createdBy:h(this,Bs).name,createdByUserId:h(this,Bs).userId};await h(this,xl,gh).newPoll(n)}async vote(e,t){if(!h(this,Bs).permissions.polls.canVote){b.error("DytePolls::vote::permission_denied");return}if(h(this,Al)==="socket-service"){await h(this,Il).votePoll(e,t);return}const i={pollId:e,index:t};await h(this,xl,gh).votePoll(i)}},xl=new WeakSet,gh=function(){return $t()},Bs=new WeakMap,Il=new WeakMap,Al=new WeakMap,TP);V1=qce([Si(e=>{throw new R(e.message,"0700")})],V1);var Jce=Object.defineProperty,Kce=Object.getOwnPropertyDescriptor,Yce=(e,t,i,r)=>{for(var n=r>1?void 0:r?Kce(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Jce(t,i,n),n},mh,to,Ol,fh,Ty,kP;const Dc=(kP=class{constructor(e,t,i){I(this,fh),v(this,"polls"),I(this,mh,void 0),I(this,to,void 0),I(this,Ol,void 0),this.polls=new V1(e,t,i),A(this,mh,e),A(this,to,t),A(this,Ol,i),this.setupEvents()}static async init(e,t,i){const r=ee.getValue(re.POLL_SOCKET_SERVER);b.debug(`Received flagsmith poll_socket_server: ${r}`);const n=Qu("poll_socket_server")==="socket-service"||r==="socket-service"||i.includes("HIVE")?"socket-service":"room-node";return b.info(`Using socket server ${n} for polls`),new Dc(e,t,n)}canViewPolls(){return h(this,mh).permissions.polls.canView}setupEvents(){if(h(this,Ol)==="socket-service"){if(!this.canViewPolls())return;P.on(k.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getPolls()}),h(this,to).on(ss.createPoll,e=>{e.poll&&this.updatePoll(Dc.formatSocketServicePoll(e.poll))}),h(this,to).on(ss.updatePoll,e=>{e.poll&&this.updatePoll(Dc.formatSocketServicePoll(e.poll))}),h(this,to).on(ss.votePoll,e=>{e.poll&&this.updatePoll(Dc.formatSocketServicePoll(e.poll))})}else P.onAsync(k.ROOM_JOINED,async()=>{this.canViewPolls()&&this.getPolls()});P.on(k.UPDATE_POLL,async({poll:e})=>{this.updatePoll(e)})}updatePoll(e){if(!this.canViewPolls())return;const t=this.polls.items.findIndex(i=>i.id===e.id);if(t>-1){const i=JSON.stringify(this.polls.items[t]);this.polls.items[t]=e,i!==JSON.stringify(e)&&this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!1});return}this.polls.items=[...this.polls.items,e],this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!0})}async getPolls(){if(h(this,Ol)==="socket-service"){const e=await h(this,to).getPolls();if(!(e!=null&&e.payload))return;const{polls:t}=kae.fromBinary(e.payload);this.polls.items=t.map(i=>Dc.formatSocketServicePoll(i));return}if(h(this,fh,Ty)instanceof ze){const{polls:e}=(await h(this,fh,Ty).getPolls()).payload;this.polls.items=Object.values(e)}}static formatSocketServicePoll(e){const t=e.options.map(i=>({count:i.count,text:i.text,votes:i.votes.map(r=>({id:r.userId,name:r.name}))}));return{anonymous:e.anonymous,createdBy:e.createdBy,createdByUserId:e.createdByUserId,hideVotes:e.hideVotes,id:e.pollId,options:t,question:e.question,voted:e.votes}}},mh=new WeakMap,to=new WeakMap,Ol=new WeakMap,fh=new WeakSet,Ty=function(){return $t()},kP);let VM=Dc;Yce([E.trace("PollController.setupEvents")],VM.prototype,"setupEvents",1);class PP extends aw{constructor(){super({onAddEvent:"remoteRequestAdd",onDeleteEvent:"remoteRequestRemove"})}add(t,i=!0){return super.add(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}var co,Lc,Nc,eg;const F1=class extends At{constructor(e,t){super(),I(this,co),v(this,"incomingRequests"),v(this,"outgoingRequests"),v(this,"active"),I(this,Nc,void 0),I(this,eg,void 0),A(this,eg,t),A(this,Nc,e),this.incomingRequests=new PP,this.outgoingRequests=new PP,this.active=null,this.mouseEvent=this.mouseEvent.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this)}async requestControl(e){var t;if(!h(this,eg).joined.get(e))throw new R("Invalid peer.");const i=(t=this.outgoingRequests)==null?void 0:t.toArray().find(s=>s.hostPeerId===e);if(i)return i.id;const r=Zm(),n=new Xu({requestId:r,hostPeerId:e,remotePeerId:h(this,Nc).id,state:md.PENDING});return this.outgoingRequests.add(n),await h(this,co,Lc).requestRemoteControl(n),this.emit("remoteUpdate",{payload:{request:{id:n.id,hostPeerId:n.hostPeerId,remotePeerId:n.remotePeerId}},type:ys.REQUEST_SENT}),r}async acceptControl(e){var t;if(((t=this.active)==null?void 0:t.id)===e)return;const i=this.incomingRequests.get(e);if(!i)throw new R("No request found.");i.state=md.ACCEPTED,this.endControl(),this.active=i,h(this,co,Lc).acceptRemoteControl(i),this.emit("remoteUpdate",{payload:{request:{id:this.active.id,hostPeerId:this.active.hostPeerId,remotePeerId:this.active.remotePeerId}},type:ys.INCOMING_REQUEST_ACCEPTED})}async endControl(){if(!this.active)return;const e={...this.active};h(this,co,Lc).terminateRemoteControl(this.active.hostPeerId===h(this,Nc).id?this.active.remotePeerId:this.active.hostPeerId,this.active),this.active=null,this.emit("remoteUpdate",{payload:{request:{id:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:e.hostPeerId===h(this,Nc).id?ys.INCOMING_REQUEST_ENDED:ys.OUTGOING_REQUEST_ENDED})}async keyboardEvent(e){if(!this.active)return;const t=F1.getFormattedKeyboardEvent(e);if(t){const i={eventType:Zu.KEYBOARD,keyboardEvent:t};h(this,co,Lc).sendEventRemoteControl(this.active.hostPeerId,this.active.id,i)}}async mouseEvent(e,t){if(!this.active)return;const i=F1.getFormattedRemoteMouseEvent(e,t);if(i){const r={eventType:Zu.MOUSE,mouseEvent:i};h(this,co,Lc).sendEventRemoteControl(this.active.hostPeerId,this.active.id,r)}}static getFormattedRemoteMouseEvent(e,t){const i=t.getBoundingClientRect();return{type:e.type,position:{x:Math.floor(e.x-i.left),y:Math.floor(e.y-i.top)},boundingRect:{width:i.width,height:i.height}}}static getFormattedKeyboardEvent(e){return e.type==="keydown"?{type:e.type,key:e.key}:null}};let Qce=F1;co=new WeakSet,Lc=function(){return $t()},Nc=new WeakMap,eg=new WeakMap;var tg,z1;const B1=class{constructor(e,t){v(this,"remote"),v(this,"hostPeetId"),v(this,"remotePeetId"),v(this,"remoteRequestTokens"),v(this,"activeRemoteToken"),I(this,tg,void 0),I(this,z1,void 0),A(this,tg,e),A(this,z1,t),this.hostPeetId=e.id,this.remote=new Qce(e,t),this.setupEvents()}setupEvents(){P.on(k.MESSAGE,e=>{var t;if(e.remoteRequestType===vs.REQUEST&&(this.remote.incomingRequests.add(new Xu({requestId:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,state:md.PENDING})),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:ys.REQUEST_RECEIVED})),e.remoteRequestType===vs.ACCEPT){const i=this.remote.outgoingRequests.get(e.remoteRequestId);if(!i)throw new R("There is no pending remote control request to accept.");this.remote.endControl(),i.state=md.ACCEPTED,this.remote.active=new Xu({requestId:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,state:md.ACCEPTED}),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:ys.OUTGOING_REQUEST_ACCEPTED})}e.remoteRequestType===vs.END&&(((t=this.remote.active)==null?void 0:t.id)===e.remoteRequestId&&(this.remote.active=null),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:e.hostPeerId===h(this,tg).id?ys.INCOMING_REQUEST_ENDED:ys.OUTGOING_REQUEST_ENDED})),e.remoteRequestType===vs.EVENT&&this.remote.active&&this.remote.active.id===e.remoteRequestId&&window.DyteRobot&&(e.remoteEvent.eventType===Zu.MOUSE?B1.executeMouseEvent(e.remoteEvent.mouseEvent):e.remoteEvent.eventType===Zu.KEYBOARD&&B1.executeKeyboardEvent(e.remoteEvent.keyboardEvent))}),P.on(k.PEER_CLOSED,({id:e})=>{var t,i,r,n,s,a,o,c;[(i=(t=this.remote)==null?void 0:t.active)==null?void 0:i.hostPeerId,(n=(r=this.remote)==null?void 0:r.active)==null?void 0:n.remotePeerId].includes(e)&&this.remote.endControl(),(a=(s=this.remote)==null?void 0:s.incomingRequests)==null||a.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(e)&&this.remote.incomingRequests.delete(d.id)}),(c=(o=this.remote)==null?void 0:o.outgoingRequests)==null||c.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(e)&&this.remote.outgoingRequests.delete(d.id)})})}static executeMouseEvent(e){const t=window.screen.width*e.position.x/e.boundingRect.width,i=window.screen.height*e.position.y/e.boundingRect.height,r={width:window.screen.width,height:window.screen.height};switch(e.type){case Yh.LEFT_CLICK:window.DyteRobot.mouse.leftClick(t,i,r);break;case Yh.RIGHT_CLICK:window.DyteRobot.mouse.rightClick(t,i,r);break;case Yh.MOVE:window.DyteRobot.mouse.moveTo(t,i,r);break}}static executeKeyboardEvent(e){switch(e.type){case"keydown":window.DyteRobot.keyboard.press(e.key);break}}};let Zce=B1;tg=new WeakMap,z1=new WeakMap;var Xce=Object.defineProperty,ede=(e,t,i)=>t in e?Xce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tde=(e,t,i)=>(ede(e,typeof t!="symbol"?t+"":t,i),i),ow=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},N=(e,t,i)=>(ow(e,t,"read from private field"),i?i.call(e):t.get(e)),Ct=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},wt=(e,t,i,r)=>(ow(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),Mt=(e,t,i)=>(ow(e,t,"access private method"),i),Ys,lo,uo,Rt,Uc,lt,Jt,Qs,Wt,cs,Ar,vd,ds,H1,FM,ql,ig,G1,zM,cw,BM,yd,ep,_m,dw,bm,lw,_d,tp,wu,wm,uw={exports:{}},bd=typeof Reflect=="object"?Reflect:null,CP=bd&&typeof bd.apply=="function"?bd.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},rg;bd&&typeof bd.ownKeys=="function"?rg=bd.ownKeys:Object.getOwnPropertySymbols?rg=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:rg=function(e){return Object.getOwnPropertyNames(e)};function ide(e){console&&console.warn&&console.warn(e)}var HM=Number.isNaN||function(e){return e!==e};function et(){et.init.call(this)}uw.exports=et;uw.exports.once=ade;et.EventEmitter=et;et.prototype._events=void 0;et.prototype._eventsCount=0;et.prototype._maxListeners=void 0;var RP=10;function Cf(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(et,"defaultMaxListeners",{enumerable:!0,get:function(){return RP},set:function(e){if(typeof e!="number"||e<0||HM(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");RP=e}});et.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};et.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||HM(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function GM(e){return e._maxListeners===void 0?et.defaultMaxListeners:e._maxListeners}et.prototype.getMaxListeners=function(){return GM(this)};et.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=n[e];if(o===void 0)return!1;if(typeof o=="function")CP(o,this,t);else for(var c=o.length,d=YM(o,c),i=0;i<c;++i)CP(d[i],this,t);return!0};function WM(e,t,i,r){var n,s,a;if(Cf(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),a===void 0)a=s[t]=i,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),n=GM(e),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,ide(o)}return e}et.prototype.addListener=function(e,t){return WM(this,e,t,!1)};et.prototype.on=et.prototype.addListener;et.prototype.prependListener=function(e,t){return WM(this,e,t,!0)};function rde(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qM(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=rde.bind(r);return n.listener=i,r.wrapFn=n,n}et.prototype.once=function(e,t){return Cf(t),this.on(e,qM(this,e,t)),this};et.prototype.prependOnceListener=function(e,t){return Cf(t),this.prependListener(e,qM(this,e,t)),this};et.prototype.removeListener=function(e,t){var i,r,n,s,a;if(Cf(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():nde(i,n),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};et.prototype.off=et.prototype.removeListener;et.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),s;for(r=0;r<n.length;++r)s=n[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function JM(e,t,i){var r=e._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?sde(n):YM(n,n.length)}et.prototype.listeners=function(e){return JM(this,e,!0)};et.prototype.rawListeners=function(e){return JM(this,e,!1)};et.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):KM.call(e,t)};et.prototype.listenerCount=KM;function KM(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}et.prototype.eventNames=function(){return this._eventsCount>0?rg(this._events):[]};function YM(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function nde(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function sde(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function ade(e,t){return new Promise(function(i,r){function n(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),i([].slice.call(arguments))}QM(e,t,s,{once:!0}),t!=="error"&&ode(e,n,{once:!0})})}function ode(e,t,i){typeof e.on=="function"&&QM(e,"error",t,i)}function QM(e,t,i,r){if(typeof e.on=="function")r.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){r.once&&e.removeEventListener(t,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var cde=uw.exports;class dde extends x{constructor(){super("message.v1.SocketMessage",[{no:1,name:"event",kind:"scalar",T:13},{no:2,name:"id",kind:"scalar",opt:!0,T:9},{no:3,name:"payload",kind:"scalar",opt:!0,T:12},{no:4,name:"metadata",kind:"scalar",opt:!0,T:12}])}}const xP=new dde;class ZM{static encode(t){return xP.toBinary(t)}static decode(t){return xP.fromBinary(new Uint8Array(t))}}function lde(e,t){return Math.floor(Math.random()*(t-e+1)+e)}class ude{constructor(t={}){tde(this,"opts"),Ct(this,Ys,void 0),this.opts={initialTimeout:t.initialTimeout||1e3,maxTimeout:t.maxTimeout||1e4,factor:t.factor||2},wt(this,Ys,0)}async wait(){wt(this,Ys,N(this,Ys)+1);const t=lde(0,Math.min(this.opts.maxTimeout,this.opts.initialTimeout*2**N(this,Ys)));await new Promise(i=>{setTimeout(i,t)})}getAttempts(){return N(this,Ys)}reset(){wt(this,Ys,0)}}Ys=new WeakMap;const Hs={debug:0,info:1,warn:2,error:3};class pde{constructor(t){Ct(this,lo,void 0),Ct(this,uo,void 0),wt(this,lo,console),wt(this,uo,t)}debug(...t){Hs[N(this,uo)]>Hs.debug||N(this,lo).debug("[Sockrates]:",...t)}info(...t){Hs[N(this,uo)]>Hs.info||N(this,lo).info("[Sockrates]:",...t)}warn(...t){Hs[N(this,uo)]>Hs.warn||N(this,lo).warn("[Sockrates]:",...t)}error(...t){Hs[N(this,uo)]>Hs.error||N(this,lo).error("[Sockrates]:",...t)}}lo=new WeakMap;uo=new WeakMap;var XM=(e=>(e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e))(XM||{});const hde="2",gde="3";class mde{constructor(t,i){Ct(this,H1),Ct(this,ql),Ct(this,G1),Ct(this,cw),Ct(this,yd),Ct(this,_m),Ct(this,bm),Ct(this,_d),Ct(this,wu),Ct(this,Rt,void 0),Ct(this,Uc,void 0),Ct(this,lt,void 0),Ct(this,Jt,void 0),Ct(this,Qs,void 0),Ct(this,Wt,void 0),Ct(this,cs,void 0),Ct(this,Ar,void 0),Ct(this,vd,void 0),Ct(this,ds,void 0);var r,n,s,a,o,c,d,l,u,g;wt(this,Uc,t),wt(this,Qs,[]),wt(this,Wt,new cde),wt(this,cs,!0),wt(this,Ar,!1),wt(this,lt,i!=null?i:{}),(r=N(this,lt)).autoReconnect!=null||(r.autoReconnect=!0),(n=N(this,lt)).retryConnectionInterval!=null||(n.retryConnectionInterval=1e3),(s=N(this,lt)).pingTimeout!=null||(s.pingTimeout=3e4),(a=N(this,lt)).connectionTimeout!=null||(a.connectionTimeout=5e3),(o=N(this,lt)).debug!=null||(o.debug=!0),(c=N(this,lt)).maxReconnectionAttempts!=null||(c.maxReconnectionAttempts=10),(d=N(this,lt)).disconnectOnPingTimeout!=null||(d.disconnectOnPingTimeout=!0),(l=N(this,lt)).queueOnDisconnect!=null||(l.queueOnDisconnect=!1),(u=N(this,lt)).flushOnReconnect!=null||(u.flushOnReconnect=!1),wt(this,Jt,(g=N(this,lt).logger)!=null?g:new pde(N(this,lt).debug?"debug":"info")),wt(this,ds,new ude)}get readyState(){return N(this,Rt).readyState}get url(){return N(this,Uc)}get config(){return N(this,lt)}get sendQueue(){return N(this,Qs)}flush(){if(!N(this,lt).queueOnDisconnect)return!1;const t=[];return N(this,Qs).forEach(i=>{this.send(i.event,i.id,i.payload,i.metadata)||t.push(i)}),wt(this,Qs,t),N(this,Qs)}async connect(){if(N(this,cs)!==!1)return new Promise((t,i)=>{Mt(this,_d,tp).call(this),Mt(this,wu,wm).call(this);try{wt(this,Rt,new WebSocket(Mt(this,H1,FM).call(this,N(this,Uc)))),N(this,Rt).binaryType="arraybuffer",N(this,Jt).debug("Connecting to",N(this,Uc));const r=setTimeout(()=>{N(this,Jt).debug("Connection timeout. Closing socket"),wt(this,cs,!0),Mt(this,wu,wm).call(this),N(this,Rt).close(3001,"Connection Timeout"),N(this,lt).autoReconnect&&!N(this,Ar)&&(N(this,Wt).emit("reconnecting"),Mt(this,yd,ep).call(this)),i(new Error("Connection timed out!"))},N(this,lt).connectionTimeout);N(this,Rt).onopen=()=>{N(this,Jt).debug(`Ready State: ${XM[N(this,Rt).readyState]}`),r&&clearTimeout(r),Mt(this,bm,lw).call(this),N(this,Wt).emit("connected"),N(this,lt).flushOnReconnect&&this.flush(),t()},N(this,Rt).onclose=n=>{try{r&&clearTimeout(r);const{code:s,reason:a}=n;if(i(a),N(this,Jt).debug("Socket closed. Close event:",n),N(this,Jt).debug("Connection closed code:",s),N(this,Jt).debug("Connection closed reason:",a),N(this,cs)&&s!==1e3&&N(this,lt).autoReconnect&&!N(this,Ar)){N(this,Wt).emit("reconnecting"),Mt(this,yd,ep).call(this);return}N(this,Ar)||N(this,Wt).emit("disconnected",{code:s,reason:a})}catch(s){Mt(this,ql,ig).call(this,s)}},N(this,Rt).onerror=n=>{Mt(this,ql,ig).call(this,n)},N(this,Rt).onmessage=n=>Mt(this,G1,zM).call(this,n)}catch(r){Mt(this,ql,ig).call(this,r,i)}})}send(t,i,r,n){const s={event:t,id:i,payload:r,metadata:n};if(N(this,lt).queueOnDisconnect&&(!N(this,Rt)||N(this,Rt).readyState!==1))return N(this,Jt).debug("Queuing message since socket is not connected!",s),N(this,Qs).push(s),!1;const a=ZM.encode(s);return Mt(this,_m,dw).call(this,a)}emit(t,i,r,n){return this.send(t,i,r,n)}receive(t,i){return N(this,Wt).on(t.toString(),i)}on(t,i){if(typeof t=="string"&&(t==="connected"||t==="disconnected"||t==="errored"||t==="reconnected"||t==="reconnecting"||t==="reconnectAttempt"||t==="reconnectFailure"||t==="failed")){N(this,Wt).on(t,i);return}this.receive(t,i)}removeAllListeners(){N(this,Wt).removeAllListeners()}removeReceiver(t,i){this.removeListener(t,i)}removeListener(t,i){N(this,Wt).removeListener(t.toString(),i)}removeReceivers(t){this.removeListeners(t)}removeListeners(t){N(this,Wt).listeners(t.toString()).map(i=>this.removeListener(t,i))}disconnect(){wt(this,cs,!1),Mt(this,_d,tp).call(this),this.removeAllListeners(),N(this,Rt).close(1e3,"Sockrates disconnect method called.")}}Rt=new WeakMap;Uc=new WeakMap;lt=new WeakMap;Jt=new WeakMap;Qs=new WeakMap;Wt=new WeakMap;cs=new WeakMap;Ar=new WeakMap;vd=new WeakMap;ds=new WeakMap;H1=new WeakSet;FM=function(e){if(e.startsWith("ws://")||e.startsWith("wss://"))return e;if(e.startsWith("https://"))return`wss://${e.substring(8)}`;if(e.startsWith("http://"))return`ws://${e.substring(7)}`;throw new Error("Invalid URL. URL must start with http(s):// or ws(s)://.")};ql=new WeakSet;ig=function(e,t){N(this,Jt).error("Error:",e),N(this,Wt).emit("errored",{error:e}),t==null||t(e)};G1=new WeakSet;zM=function(e){if(e.data===hde){N(this,Jt).debug("Received ping from server"),Mt(this,bm,lw).call(this),Mt(this,_m,dw).call(this,gde);return}N(this,Jt).debug("Received data:",e.data);const t=ZM.decode(e.data),{id:i,payload:r}=t;N(this,Wt).emit(t.event.toString(),{id:i,payload:r})};cw=new WeakSet;BM=function(){return N(this,Rt).readyState===1};yd=new WeakSet;ep=async function(e=!0){if(e&&N(this,Ar)){N(this,Jt).debug("Reconnect called when already in a reconnect loop. Ignoring.");return}if(N(this,Ar)||N(this,ds).reset(),N(this,lt).maxReconnectionAttempts!==null&&N(this,ds).getAttempts()>=N(this,lt).maxReconnectionAttempts){N(this,Wt).emit("failed"),wt(this,Ar,!1);return}wt(this,Ar,!0),Mt(this,wu,wm).call(this),Mt(this,_d,tp).call(this);try{if(await N(this,ds).wait(),N(this,cs)===!1)return;if(N(this,Jt).debug(`Reconnection attempt ${N(this,ds).getAttempts()}`),N(this,Wt).emit("reconnectAttempt",{attempt:N(this,ds).getAttempts()}),await this.connect(),!Mt(this,cw,BM).call(this))throw Error("Reconnect Failed");wt(this,Ar,!1),N(this,Wt).emit("reconnected")}catch{N(this,Jt).debug("Failed to reconnect."),N(this,Wt).emit("reconnectFailure",{attempt:N(this,ds).getAttempts()}),Mt(this,yd,ep).call(this,!1)}};_m=new WeakSet;dw=function(e){try{return N(this,Rt).send(e),!0}catch(t){return N(this,Jt).error(t.message),!1}};bm=new WeakSet;lw=function(){this.config.disconnectOnPingTimeout&&(N(this,Jt).debug("Resetting ping timeout"),Mt(this,_d,tp).call(this),wt(this,vd,setTimeout(()=>{var e;N(this,Jt).debug("Disconnecting the socket due to ping timeout"),wt(this,cs,!0);const t=3002,i="Ping timeout";(e=N(this,Rt))==null||e.close(t,i),N(this,Wt).emit("disconnected",{code:t,reason:i}),N(this,lt).autoReconnect&&!N(this,Ar)&&(N(this,Jt).debug("Triggering reconnection due to ping timeout"),N(this,Wt).emit("reconnecting"),Mt(this,yd,ep).call(this))},N(this,lt).pingTimeout)))};_d=new WeakSet;tp=function(){N(this,vd)&&(clearTimeout(N(this,vd)),wt(this,vd,void 0))};wu=new WeakSet;wm=function(){N(this,Rt)&&(N(this,Rt).onopen=void 0,N(this,Rt).onerror=void 0,N(this,Rt).onmessage=void 0,N(this,Rt).onclose=void 0)};var fde=Object.defineProperty,vde=Object.getOwnPropertyDescriptor,Rf=(e,t,i,r)=>{for(var n=r>1?void 0:r?vde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&fde(t,i,n),n};const IP=65535;var Ml,Ui,vh,yh,ky,AP;const e3=(AP=class{constructor({peerId:e,roomName:t,authToken:i,url:r,capabilities:n}){I(this,yh),I(this,Ml,void 0),I(this,Ui,void 0),I(this,vh,void 0),v(this,"roomName"),v(this,"peerId"),v(this,"authToken"),v(this,"capabilities");var s;if(!e||!t||!i)throw new R("peerId, roomName, or authToken can not be empty");const{apiBase:a}=Ze;let o=e3.getSocketEdgeDomain(a);typeof Qu("socket_server_base")=="string"&&(o=Qu("socket_server_base"));const c=`wss://${o}`;this.roomName=t,this.peerId=e,this.authToken=i,this.capabilities=n;const d=new URL(`${r!=null?r:c}/ws`),l={roomID:t,peerID:e,authToken:i,useMediaV2:n.includes("HIVE"),ping:n.includes("PING"),capabilities:n.map(u=>mm[u]).join(" ")};Object.entries(l).forEach(([u,g])=>{d.searchParams.append(u,g.toString())}),A(this,Ml,d.href),A(this,vh,e),A(this,Ui,new mde(h(this,Ml),{autoReconnect:!0,disconnectOnPingTimeout:(s=n.includes("PING"))!=null?s:!1,queueOnDisconnect:!0,flushOnReconnect:!1,logger:b}))}static getSocketEdgeDomain(e){let t="";return e.includes("api.cluster.dyte")?t="edge":e.includes("api.staging.dyte")?t="staging":e.includes("api.preprod.dyte")&&(t="preprod"),`socket-${t}.dyte.io`}get url(){return h(this,Ml)}async connect(){const e=()=>{b.info("SocketService::connect::Connected to socket-edge"),P.emit(k.SOCKET_SERVICE_CONNECTED)};this.onStateEvent("connected",e);const t=({reason:o,code:c})=>{b.info("SocketService::connect::Disconnected from socket-edge",{error:{code:c,reason:o}}),P.emit(k.SOCKET_SERVICE_DISCONNECTED),!(c<4e3||c>4002)&&(c===4e3?b.error("SocketService::connect::Bad Request",{error:{code:c,reason:o}}):c===4001?b.error("SocketService::connect::Unauthorized",{error:{code:c,reason:o}}):c===4002?b.error("SocketService::connect::Internal Error",{error:{code:c,reason:o}}):b.error("SocketService::connect::Unknown Error",{error:{code:c,reason:o}}))};this.onStateEvent("disconnected",t);const i=()=>{b.info("SocketService::connect::Reconnecting to socket-edge"),P.emit(k.SOCKET_SERVICE_RECONNECTING)};this.onStateEvent("reconnecting",i);const r=({attempt:o})=>{b.info("SocketService::connect::Attempting reconnect to socket-edge"),P.emit(k.SOCKET_SERVICE_RECONNECTION_ATTEMPT,{attempt:o})};this.onStateEvent("reconnectAttempt",r);const n=({attempt:o})=>{b.info("SocketService::connect::Reconnect attempt failed"),P.emit(k.SOCKET_SERVICE_RECONNECT_FAILURE,{attempt:o})};this.onStateEvent("reconnectFailure",n);const s=()=>{b.info("SocketService::connect::Reconnected to socket-edge"),P.emit(k.SOCKET_SERVICE_RECONNECTED)};this.onStateEvent("reconnected",s);const a=()=>{b.info("SocketService::connect::Socket-edge reconnects failed"),P.emit(k.SOCKET_SERVICE_FAILED)};this.onStateEvent("failed",a),await h(this,Ui).connect()}disconnect(){return h(this,Ui).disconnect()}get isConnected(){try{return h(this,Ui).readyState===1}catch{return!1}}sendMessage(e,t,i){const r={};return E.injectContext(r),h(this,Ui).send(e,i!=null?i:Nt(this,yh,ky).call(this),t,new TextEncoder().encode(JSON.stringify(r)))}sendMessagePromise(e,t,i){const r=parseInt({}.SOCKET_SERVICE_MESSAGE_REQUEST_TIMEOUT,10)||2e4;return this.sendMessagePromiseWithTimeout({event:e,timeout:r,protobuf:t,messageId:i})}sendMessagePromiseWithTimeout({event:e,timeout:t,protobuf:i,messageId:r}){return new Promise((n,s)=>{const a=r!=null?r:Nt(this,yh,ky).call(this),o={};E.injectContext(o),setTimeout(s,t,"request timeout for callback");const c=({id:d,payload:l})=>{a===d&&(n({id:d,payload:l}),h(this,Ui).removeListener(e,c),h(this,Ui).removeListener(IP,c))};h(this,Ui).on(e,c),h(this,Ui).on(IP,c),h(this,Ui).send(e,a,i,new TextEncoder().encode(JSON.stringify(o)))})}on(e,t){h(this,Ui).on(e,t)}onStateEvent(e,t){h(this,Ui).on(e,t)}flush(){return h(this,Ui).flush()}},Ml=new WeakMap,Ui=new WeakMap,vh=new WeakMap,yh=new WeakSet,ky=function(){return`${h(this,vh)}-${(Math.random()+1).toString(36).substring(7)}`},AP);let Pp=e3;Rf([E.trace("SocketService.connect")],Pp.prototype,"connect",1);Rf([E.trace("SocketService.disconnect")],Pp.prototype,"disconnect",1);Rf([E.trace("SocketService.sendMessage")],Pp.prototype,"sendMessage",1);Rf([E.trace("SocketService.sendMessagePromise")],Pp.prototype,"sendMessagePromise",1);var ci;class yde{constructor(t){I(this,ci,void 0),A(this,ci,t)}addPlugin(t,i){h(this,ci).sendMessage(de.addPlugin,Cse.toBinary({pluginId:t,staggered:i}))}removePlugin(t){h(this,ci).sendMessage(de.removePlugin,xse.toBinary({pluginId:t,staggered:!1}))}async getActivePlugins(){const{payload:t}=await h(this,ci).sendMessagePromise(de.getPlugins);return t?Zse.fromBinary(t):{plugins:[]}}customPluginEventToRoom(t,i,r){const n={pluginId:t,pluginData:new TextEncoder().encode(JSON.stringify(i))};h(this,ci).sendMessage(de.customPluginEventToRoom,$se.toBinary(n),r)}customPluginEventToPeers(t,i,r,n){const s={pluginId:t,peerIds:i,pluginData:new TextEncoder().encode(JSON.stringify(r))};h(this,ci).sendMessage(de.customPluginEventToPeers,Fse.toBinary(s),n)}enablePluginForRoom(t,i){h(this,ci).sendMessage(de.enablePluginForRoom,Ase.toBinary({pluginId:t}),i)}enablePluginForPeers(t,i,r){h(this,ci).sendMessage(de.enablePluginForPeers,Lse.toBinary({pluginId:t,peerIds:i}),r)}disablePluginForRoom(t,i){h(this,ci).sendMessage(de.disablePluginForRoom,Mse.toBinary({pluginId:t}),i)}disablePluginForPeers(t,i,r){h(this,ci).sendMessage(de.disablePluginForPeers,Use.toBinary({pluginId:t,peerIds:i}),r)}storeInsertKeys(t,i,r,n){const s={pluginId:t,storeName:i,insertKeys:r.map(a=>({storeKey:a.key,payload:new TextEncoder().encode(JSON.stringify(a.payload))}))};h(this,ci).sendMessage(de.storeInsertKeys,Yk.toBinary(s),n)}storeGetKeys(t,i,r,n){const s={pluginId:t,storeName:i,getKeys:r.map(a=>({storeKey:a.key}))};h(this,ci).sendMessage(de.storeGetKeys,Gse.toBinary(s),n)}storeDeleteKeys(t,i,r,n){const s={pluginId:t,storeName:i,deleteKeys:r.map(a=>({storeKey:a.key}))};h(this,ci).sendMessage(de.storeDeleteKeys,qse.toBinary(s),n)}storeDelete(t,i,r){h(this,ci).sendMessage(de.storeDelete,Kse.toBinary({pluginId:t,storeName:i}),r)}getPluginDataOld(t,i){b.info("getPluginDataOld",{plugin:{id:t,storeName:i}})}storePluginDataOld(t,i,r){const n={pluginId:t,storeName:i,insertKeys:[{storeKey:r.key,payload:new TextEncoder().encode(JSON.stringify(r))}]};h(this,ci).sendMessage(de.storeInsertKeys,Yk.toBinary(n))}on(t,i){let r;switch(t){case de.addPlugin:case de.enablePluginForPeers:case de.enablePluginForRoom:{r=w1.fromBinary.bind(w1);break}case de.removePlugin:case de.disablePluginForPeers:case de.disablePluginForRoom:{r=Qk.fromBinary.bind(Qk);break}case de.customPluginEventToPeers:case de.customPluginEventToRoom:{r=Xk.fromBinary.bind(Xk);break}case de.storeInsertKeys:case de.storeGetKeys:case de.storeDeleteKeys:case de.storeDelete:{r=Zk.fromBinary.bind(Zk);break}}h(this,ci).on(t,({payload:n,id:s})=>{const a=r(n);return i(a,s)})}}ci=new WeakMap;var _de=Object.defineProperty,bde=Object.getOwnPropertyDescriptor,xf=(e,t,i,r)=>{for(var n=r>1?void 0:r?bde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&_de(t,i,n),n},Tc,OP;let Dd=(OP=class extends At{constructor(e){super(),I(this,Tc,void 0),v(this,"recordingState","IDLE"),v(this,"recordingId"),v(this,"recordingPeerId"),A(this,Tc,e)}setRecordingState(e){const t=this.recordingState;this.recordingState=e,t!==e&&this.emitCurrentRecordingState()}emitCurrentRecordingState(){this.emit("recordingUpdate",this.recordingState)}async start(){if(!h(this,Tc).permissions.canRecord)throw b.error("DyteRecording::start::permission_denied"),new R("User does not have permission to start recording");if(this.recordingState==="STARTING"||this.recordingState==="RECORDING"||this.recordingState==="STOPPING")throw b.error("DyteRecording::start::recording_in_progress",{recording:{state:this.recordingState}}),new R(`Cant start recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STARTING");try{const e=ui(),{recording:t={}}=Ze.defaults,i=await e.startRecording(t);this.recordingId=i}catch(e){throw b.error("DyteRecording::stop::recording_failed_to_start",{error:e}),this.setRecordingState("IDLE"),new R("Error while starting recording")}}async stop(){if(!h(this,Tc).permissions.canRecord)throw b.error("DyteRecording::stop::permission_denied"),new R("User does not have permission to stop recording");if((this.recordingState!=="RECORDING"||!this.recordingId)&&(b.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),await this.getRecordingId()),this.recordingState!=="RECORDING"||!this.recordingId)throw b.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),new R(`Cant stop recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STOPPING");try{await ui().stopRecording(this.recordingId),this.setRecordingState("IDLE")}catch(e){throw b.error("DyteRecording::stop::recording_failed_to_stop",{error:e}),this.setRecordingState("RECORDING"),new R("Error while stopping recording")}}async getRecordingId(){if(!h(this,Tc).permissions.canRecord)throw b.error("DyteRecording::getRecordingId::permission_denied"),new R("User does not have permission to stop recording");try{const e=ui(),{status:t,id:i}=await e.getActiveRecording();t==="RECORDING"&&(this.recordingState="RECORDING",this.recordingId=i)}catch(e){throw b.error("DyteRecording::getRecordingId::unable_to_get_recording_id",{error:e}),new R("Unable to get recording")}}},Tc=new WeakMap,OP);xf([E.trace("DyteRecording.start")],Dd.prototype,"start",1);xf([E.trace("DyteRecording.stop")],Dd.prototype,"stop",1);xf([E.trace("DyteRecording.getRecordingId")],Dd.prototype,"getRecordingId",1);Dd=xf([Si(e=>{throw new R(e.message,"1000")})],Dd);var wde=Object.defineProperty,Sde=Object.getOwnPropertyDescriptor,Ede=(e,t,i,r)=>{for(var n=r>1?void 0:r?Sde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&wde(t,i,n),n};class t3{constructor(t){v(this,"recording"),this.recording=new Dd(t),this.setupEvents()}setupEvents(){P.on(k.HIVE_RECORDING_STARTED,t=>{this.recording.recordingPeerId=t,this.recording.setRecordingState("RECORDING")}),P.on(k.HIVE_RECORDING_STOPPED,()=>{this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE")}),P.on(k.PEER_JOINED,async t=>{var i;(i=t.flags)!=null&&i.recorder&&(this.recording.recordingPeerId=t.id,this.recording.setRecordingState("RECORDING"))}),P.on(k.PEER_CLOSED,t=>{t.id===this.recording.recordingPeerId&&(this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE"))}),P.onAsync(k.ROOM_JOINED,async t=>{var i,r;b.debug("[ROOM_JOINED] resolved request to fetch recordings.");const n=(i=t.peers)==null?void 0:i.filter(s=>{var a;return!!((a=s.flags)!=null&&a.recorder)});n.length?(this.recording.recordingPeerId=n&&((r=n[0])==null?void 0:r.id),this.recording.setRecordingState("RECORDING")):(this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE"))}),P.on(k.RECORDING_STARTED,()=>{this.recording.setRecordingState("RECORDING")}),P.on(k.RECORDING_STOPPED,()=>{this.recording.recordingId=void 0,this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE")})}}Ede([E.trace("RecordingController.setupEvents")],t3.prototype,"setupEvents",1);var Tde=Object.defineProperty,kde=Object.getOwnPropertyDescriptor,Pde=(e,t,i,r)=>{for(var n=r>1?void 0:r?kde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Tde(t,i,n),n},i3=(e=>(e[e.User=0]="User",e[e.Spotlight=1]="Spotlight",e))(i3||{}),Dl,_h,kc,MP;let Sm=(MP=class extends At{constructor(e){super(),I(this,Dl),v(this,"selfActiveTab"),v(this,"spotlighted"),I(this,kc,void 0),this.spotlighted=e.permissions.canSpotlight,A(this,kc,e)}get roomJoined(){var e;return((e=h(this,Dl,_h))==null?void 0:e.roomJoined)===!0}static init(e){return new Sm(e)}setSpotlighted(e){if(!h(this,kc).permissions.canSpotlight)throw b.error("DyteSpotlight::setSpotlighted::permission_denied"),new R("User does not have permission to toggle spotlight");this.spotlighted=e,this.emit("spotlightUpdate",this.spotlighted),this.spotlighted&&this.assertSpotlightToRoom()}setSelfActiveTab(e,t){var i;b.info("DyteSpotlight::setActiveTab",{spotlight:{currentTab:{id:e.id,type:e.type}}}),this.selfActiveTab=e,t===0&&this.emit("selfTabUpdate",e),(i=h(this,kc).permissions)!=null&&i.canSpotlight&&this.spotlighted&&t===0&&this.assertSpotlightToRoom()}assertSpotlightToRoom(){h(this,Dl,_h)instanceof ze&&this.selfActiveTab&&h(this,Dl,_h).assertSpotlightToRoom({spotlightedUserId:h(this,kc).userId,currentTab:this.selfActiveTab,peerId:void 0})}},Dl=new WeakSet,_h=function(){return $t()},kc=new WeakMap,MP);Sm=Pde([Si(e=>{throw new R(e.message,"1300")})],Sm);var Cde=Object.defineProperty,Rde=Object.getOwnPropertyDescriptor,xde=(e,t,i,r)=>{for(var n=r>1?void 0:r?Rde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Cde(t,i,n),n},po,jc,Jl;class r3{constructor(t){I(this,jc),v(this,"spotlight"),I(this,po,void 0),this.spotlight=Sm.init(t),A(this,po,t),this.setupEvents()}conditionallySetActiveTab(t){var i;t!=null&&t.currentTab&&((i=this.spotlight.selfActiveTab)==null?void 0:i.id)!==t.currentTab.id&&(this.spotlight.setSelfActiveTab(t.currentTab,i3.Spotlight),this.spotlight.emit("activeTabUpdate",t.currentTab))}async setupEvents(){h(this,po).permissions.canSpotlight&&(b.info("DyteSpotlightController::Asserting Spotlight"),h(this,jc,Jl)instanceof ze&&this.spotlight.selfActiveTab&&h(this,jc,Jl).assertSpotlightToRoom({spotlightedUserId:h(this,po).userId,currentTab:this.spotlight.selfActiveTab,peerId:void 0})),P.on(k.PEER_JOINED,async t=>{h(this,po).permissions.canSpotlight&&h(this,jc,Jl)instanceof ze&&this.spotlight.selfActiveTab&&h(this,jc,Jl).assertSpotlightToPeer({spotlightedUserId:h(this,po).userId,currentTab:this.spotlight.selfActiveTab,peerId:t.id})}),P.on(k.ROOM_MESSAGE,t=>{var i,r;t.roomMessageType==="spotlight"&&(b.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:t.spotlightedUserId},currentTab:{id:(i=t.currentTab)==null?void 0:i.id,type:(r=t.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(t))}),P.on(k.MESSAGE,t=>{var i,r;t.roomMessageType==="spotlight"&&(b.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:t.spotlightedUserId},currentTab:{id:(i=t.currentTab)==null?void 0:i.id,type:(r=t.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(t))})}}po=new WeakMap,jc=new WeakSet,Jl=function(){return $t()};xde([E.trace("SpotlightController.setupEvents")],r3.prototype,"setupEvents",1);function Ide(e){let t=0,i,r;if(!e)return t;for(i=0;i<e.length;i+=1)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return Math.abs(t)%100+1}class Ade{static hasFeature(t){var i;return(i=ee.hasFeature(t))!=null?i:!1}static getFeatureValue(t){return ee.getValue(t)}static getAllFeatures(){return ee.getAllFlags()}}class pw{constructor(t,i,r){v(this,"logger"),v(this,"features"),v(this,"browserSpecs"),v(this,"callStats"),this.logger=t,this.features=i,this.browserSpecs=Oe,this.callStats=r}static init(){return new pw(b,Ade,Y)}}class hw{constructor(t){v(this,"internals"),this.internals=t}static async init(){const t=pw.init();return new hw(t)}}var Ode=Object.defineProperty,Mde=Object.getOwnPropertyDescriptor,n3=(e,t,i,r)=>{for(var n=r>1?void 0:r?Mde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Ode(t,i,n),n},Kl;class gw extends At{constructor(t){super(),I(this,Kl,void 0),v(this,"state","IDLE"),v(this,"playbackUrl"),v(this,"viewerCount"),A(this,Kl,t),this.viewerCount=0}setLivestreamState(t){const i=this.state;this.state=t,i!==t&&this.emitCurrentLivestreamState()}emitCurrentLivestreamState(){this.emit("livestreamUpdate",this.state)}async start(){if(!h(this,Kl).permissions.canLivestream)throw b.error("DyteLivestream::start::permission_denied"),new R("User does not have permission to start livestreaming");this.setLivestreamState("STARTING");try{const t=await ui().startLivestreaming();this.playbackUrl=t}catch(t){throw b.error("DyteRecording::stop::livestream_failed_to_start",{error:t}),this.setLivestreamState("IDLE"),new R("Error while starting livestream")}}async stop(){if(!h(this,Kl).permissions.canLivestream)throw b.error("DyteLivestream::stop::permission_denied"),new R("User does not have permission to stop livestreaming");if(this.state!=="LIVESTREAMING")throw b.error("DyteLivestream::stop::inconsistent_state"),new R("Livestream not started yet");try{this.setLivestreamState("STOPPING"),await ui().stopLivestreaming()}catch(t){throw b.error("DyteLivestream::stop::livestream_failed_to_stop",{error:t}),this.setLivestreamState("STOPPING"),new R("Error while stopping livestream")}}}Kl=new WeakMap;n3([E.trace("livestream.start")],gw.prototype,"start",1);n3([E.trace("livestream.stop")],gw.prototype,"stop",1);var Dde=Object.defineProperty,Lde=Object.getOwnPropertyDescriptor,Nde=(e,t,i,r)=>{for(var n=r>1?void 0:r?Lde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Dde(t,i,n),n},ho,go;class s3{constructor(t,i){v(this,"livestream"),I(this,ho,void 0),I(this,go,void 0),this.livestream=new gw(t),A(this,go,i),this.setupEvents()}async fetchInitialLivestreamingState(){const t=ui(),{status:i,playbackUrl:r}=await t.getActiveLivestream();i==="LIVE"&&(this.livestream.playbackUrl=r,this.livestream.setLivestreamState("LIVESTREAMING"))}setupEvents(){h(this,go).on(Ne.startedLivestream,t=>{this.livestream.playbackUrl=t.playbackUrl,this.livestream.setLivestreamState("LIVESTREAMING")}),h(this,go).on(Ne.stoppedLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,go).on(Ne.erroredLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,go).on(Ne.roomPeerCount,t=>{this.livestream.viewerCount=t.count,this.livestream.emit("viewerCountUpdate",t.count)}),P.on(k.PEER_JOINED,async t=>{var i;((i=t.flags)==null?void 0:i.hiddenParticipant)===!0&&t.recorderType==="LIVESTREAMER"&&(A(this,ho,t.id),this.livestream.setLivestreamState("LIVESTREAMING"))}),P.on(k.PEER_CLOSED,t=>{t.id===h(this,ho)&&(A(this,ho,void 0),this.livestream.setLivestreamState("IDLE"))}),P.onAsync(k.ROOM_JOINED,async t=>{var i,r;b.debug("[ROOM_JOINED] resolved request to fetch livestream.");const n=(i=t.peers)==null?void 0:i.filter(s=>{var a;return!!((a=s.flags)!=null&&a.hiddenParticipant)});n.length?(A(this,ho,n&&((r=n[0])==null?void 0:r.id)),this.livestream.setLivestreamState("LIVESTREAMING")):(A(this,ho,void 0),this.livestream.setLivestreamState("IDLE"))}),P.onAsync(k.LEAVE_MEDIA_ROOM,async()=>{if(!this.livestream.playbackUrl){b.info("Fetching livestreaming state on leave stage");try{await this.fetchInitialLivestreamingState()}catch{}}}),P.onAsync(k.SOCKET_SERVICE_ROOM_JOINED,async()=>{try{await this.fetchInitialLivestreamingState()}catch{}})}}ho=new WeakMap,go=new WeakMap;Nde([E.trace("LivestreamController.setupEvents")],s3.prototype,"setupEvents",1);const Qe=Nr(zb().permissions);var ye;const W1=class{constructor(e){if(I(this,ye,void 0),!e)throw b.error("DytePermissionsPreset::load_preset_permissions_failed"),new R("Could not load preset permissions.");A(this,ye,e)}static fromResponse(e){return new W1(e)}static default(){return new W1(Qe)}get acceptWaitingRequests(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.acceptWaitingRequests)!=null?t:Qe.acceptWaitingRequests}get requestProduceVideo(){var e,t,i;return((i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)===di.CanRequest}get requestProduceAudio(){var e,t,i;return((i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.audio)==null?void 0:i.canProduce)===di.CanRequest}get requestProduceScreenshare(){var e,t,i;return((i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)===di.CanRequest}get canAllowParticipantAudio(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canAcceptProductionRequests)!=null?t:Qe.canAcceptProductionRequests}get canAllowParticipantScreensharing(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canAcceptProductionRequests)!=null?t:Qe.canAcceptProductionRequests}get canAllowParticipantVideo(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canAcceptProductionRequests)!=null?t:Qe.canAcceptProductionRequests}get canDisableParticipantAudio(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.disableParticipantAudio)!=null?t:Qe.disableParticipantAudio}get canDisableParticipantVideo(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.disableParticipantVideo)!=null?t:Qe.disableParticipantVideo}get kickParticipant(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.kickParticipant)!=null?t:Qe.kickParticipant}get pinParticipant(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.pinParticipant)!=null?t:Qe.pinParticipant}get canRecord(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canRecord)!=null?t:Qe.canRecord}get waitingRoomType(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.waitingRoomType)!=null?t:Qe.waitingRoomType}get waitingRoomBehaviour(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.waitingRoomType)!=null?t:Qe.waitingRoomType}get plugins(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.plugins)!=null?t:Qe.plugins}get polls(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.polls)!=null?t:Qe.polls}get produceVideo(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)!=null?r:Qe.media.video.canProduce}get requestProduce(){return h(this,ye).media.audio.canProduce===di.CanRequest||h(this,ye).media.video.canProduce===di.CanRequest||h(this,ye).media.screenshare.canProduce===di.CanRequest}get canProduceVideo(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)!=null?r:Qe.media.video.canProduce}get produceScreenshare(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)!=null?r:Qe.media.screenshare.canProduce}get canProduceScreenshare(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)!=null?r:Qe.media.screenshare.canProduce}get produceAudio(){var e;return(e=h(this,ye).media.audio.canProduce)!=null?e:Qe.media.audio.canProduce}get canProduceAudio(){var e;return(e=h(this,ye).media.audio.canProduce)!=null?e:Qe.media.audio.canProduce}get chatPublic(){var e,t,i;return(i=(t=(e=h(this,ye))==null?void 0:e.chat)==null?void 0:t.public)!=null?i:Qe.chat.public}get chatPrivate(){var e,t,i;return(i=(t=(e=h(this,ye))==null?void 0:e.chat)==null?void 0:t.private)!=null?i:Qe.chat.private}get connectedMeetings(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.connectedMeetings)!=null?t:Qe==null?void 0:Qe.connectedMeetings}get hiddenParticipant(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.hiddenParticipant)!=null?t:Qe.hiddenParticipant}get showParticipantList(){var e;return(e=h(this,ye).showParticipantList)!=null?e:Qe.showParticipantList}get canChangeParticipantRole(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canChangeParticipantPermissions)!=null?t:Qe.canChangeParticipantPermissions}get canChangeParticipantPermissions(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canChangeParticipantPermissions)!=null?t:Qe.canChangeParticipantPermissions}get canChangeTheme(){return!1}get canPresent(){return h(this,ye).media.audio.canProduce===di.Allowed||h(this,ye).media.video.canProduce===di.Allowed||h(this,ye).media.screenshare.canProduce===di.Allowed}get acceptPresentRequests(){return h(this,ye).canAcceptProductionRequests}get canEditDisplayName(){var e;return(e=h(this,ye).canEditDisplayName)!=null?e:!1}get maxScreenShareCount(){return 1}get isRecorder(){return h(this,ye).isRecorder}get canSpotlight(){return h(this,ye).canSpotlight}get canLivestream(){return h(this,ye).canLivestream}get isV2(){return!0}};let DP=W1;ye=new WeakMap;const Ude=Nr(zb());var xn,$c,Yl;const q1=class{constructor(e){if(I(this,xn,void 0),I(this,$c,void 0),I(this,Yl,void 0),!e)throw new R("Could not load preset.");A(this,xn,e.config),A(this,$c,e.ui||Nr(zb().ui)),A(this,Yl,e.permissions.plugins.config)}static fromResponse(e){return new q1(e)}static default(){return new q1(Ude)}get setupScreen(){return{isEnabled:!0}}get waitingRoom(){return{isEnabled:!0}}get controlBar(){return{isEnabled:!0,elements:{chat:!0,fullscreen:!0,invite:!1,layout:!1,participants:!0,plugins:!0,polls:!0,reactions:!1,screenshare:!0}}}get header(){return{isEnabled:!0,elements:{logo:h(this,$c).designTokens.logo,timer:!0,title:!0,participantCount:!0,changeLayout:!1}}}get pipMode(){return!0}get viewType(){return h(this,xn).viewType}get maxVideoStreams(){return h(this,xn).maxVideoStreams}get maxScreenShareCount(){return h(this,xn).maxScreenshareCount}get plugins(){return[]}get disabledPlugins(){return Object.keys(h(this,Yl)).filter(e=>h(this,Yl)[e].disabled)}get designTokens(){return h(this,$c).designTokens}get configDiff(){return h(this,$c).configDiff}get mediaConstraints(){var e,t,i,r,n,s,a,o,c,d,l,u,g,m,f,w;return{video:{quality:(r=(i=(t=(e=h(this,xn))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.quality)!=null?r:Xi.video.quality,frameRate:(o=(a=(s=(n=h(this,xn))==null?void 0:n.media)==null?void 0:s.video)==null?void 0:a.frameRate)!=null?o:Xi.video.frameRate},screenshare:{quality:(u=(l=(d=(c=h(this,xn))==null?void 0:c.media)==null?void 0:d.screenshare)==null?void 0:l.quality)!=null?u:Xi.screenshare.quality,frameRate:(w=(f=(m=(g=h(this,xn))==null?void 0:g.media)==null?void 0:m.screenshare)==null?void 0:f.frameRate)!=null?w:Xi.screenshare.frameRate}}}get isV2(){return!0}};let LP=q1;xn=new WeakMap,$c=new WeakMap,Yl=new WeakMap;const jde={setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{logo:"",timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,grid:{multi:{max_video_count:9,video_fit:"cover"},single:{max_video_count:6,video_fit:"cover"},default_view:"MULTI"},colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",text_primary:"#EEEEEE",video_background:"#1A1A1A"},controls:{pip_toggle:!1},plugins:[]},$de=Nr(jde);var Ci,Ql,Zl,ng,sg;const J1=class{constructor(e){if(I(this,Ci,void 0),I(this,Ql,void 0),I(this,Zl,void 0),I(this,ng,void 0),I(this,sg,[]),!e)throw new R("Could not load preset theme.");A(this,Ci,e),A(this,Ql,1),A(this,Zl,gn.GroupCall)}static fromResponse(e){return new J1(e)}static default(){return new J1($de)}configFromPermissions(e){var t,i,r,n,s,a,o,c,d,l,u,g;A(this,Ql,e.maxScreenshareCount||1),A(this,Zl,e.viewType),A(this,ng,{video:{quality:(r=(i=(t=e==null?void 0:e.produce)==null?void 0:t.video)==null?void 0:i.quality)!=null?r:Xi.video.quality,frameRate:(a=(s=(n=e==null?void 0:e.produce)==null?void 0:n.video)==null?void 0:s.frameRate)!=null?a:Xi.video.frameRate},screenshare:{quality:(d=(c=(o=e==null?void 0:e.produce)==null?void 0:o.screenshare)==null?void 0:c.quality)!=null?d:Xi.screenshare.quality,frameRate:(g=(u=(l=e==null?void 0:e.produce)==null?void 0:l.screenshare)==null?void 0:u.frameRate)!=null?g:Xi.screenshare.frameRate}})}setDisabledPlugins(e){const t=h(this,Ci).plugins;t&&t.length>0&&A(this,sg,e.filter(i=>!t.includes(i)))}get setupScreen(){return h(this,Ci).setupScreen}get aloneHere(){return h(this,Ci).aloneHere}get waitingRoom(){return h(this,Ci).waitingRoom}get controlBar(){return h(this,Ci).controlBar}get header(){return h(this,Ci).header}get pipMode(){var e;return((e=h(this,Ci).controls)==null?void 0:e.pipToggle)||h(this,Ci).pipMode}get viewType(){return h(this,Zl)}get autoTune(){return h(this,Ci).autoTune}get grid(){return h(this,Ci).grid}get maxVideoStreams(){return{mobile:this.grid.multi.maxVideoCount>6?6:this.grid.multi.maxVideoCount,desktop:this.grid.multi.maxVideoCount}}get maxScreenShareCount(){return h(this,Ql)}get colors(){return h(this,Ci).colors}get controls(){return h(this,Ci).controls}get plugins(){return h(this,Ci).plugins}get disabledPlugins(){return h(this,sg)}get mediaConstraints(){return h(this,ng)}get isV2(){return!1}};let NP=J1;Ci=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,ng=new WeakMap,sg=new WeakMap;var ag;class Vde{constructor(t){I(this,ag,void 0),A(this,ag,t)}on(t,i){let r;t===Ne.roomPeerCount?r=Wk.fromBinary.bind(Wk):r=eP.fromBinary.bind(eP),h(this,ag).on(t,({payload:n})=>{const s=r(n);return i(s)})}}ag=new WeakMap;var Tr;class Fde{constructor(t){I(this,Tr,void 0),A(this,Tr,t)}async getStageRequests(){const{payload:t}=await h(this,Tr).sendMessagePromise(Ne.getStageRequests);return t?ly.fromBinary(t):{stageRequests:[]}}requestAccess(){h(this,Tr).sendMessage(Ne.requestStageAccess)}cancelRequestAccess(){h(this,Tr).sendMessage(Ne.cancelStageRequest)}async grantAccess(t){const i={userIds:t};await h(this,Tr).sendMessagePromise(Ne.grantStageAccess,lae.toBinary(i))}async denyAccess(t){const i={userIds:t};await h(this,Tr).sendMessagePromise(Ne.denyStageAccess,pae.toBinary(i))}joinStage(){return h(this,Tr).sendMessage(Ne.joinStage)}leaveStage(t){const i={userIds:[t]};return h(this,Tr).sendMessage(Ne.leaveStage,iP.toBinary(i))}kick(t){const i={userIds:t};return h(this,Tr).sendMessagePromise(Ne.leaveStage,iP.toBinary(i))}on(t,i){let r;switch(t){case Ne.grantStageAccess:case Ne.denyStageAccess:{r=void 0;break}case Ne.getStagePeers:{r=tP.fromBinary.bind(tP);break}case Ne.getStageRequests:case Ne.requestStageAccess:case Ne.cancelStageRequest:{r=ly.fromBinary.bind(ly);break}}h(this,Tr).on(t,({payload:n,id:s})=>{if(!n||!r)return i(void 0,s);const a=r(n);return i(a,s)})}}Tr=new WeakMap;var zde=Object.defineProperty,Bde=Object.getOwnPropertyDescriptor,oc=(e,t,i,r)=>{for(var n=r>1?void 0:r?Bde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&zde(t,i,n),n},Yr,In,is;class Ba extends At{constructor(t,i,r){super(),I(this,Yr,void 0),I(this,In,void 0),I(this,is,void 0),v(this,"status"),A(this,Yr,r),A(this,is,i),A(this,In,t)}async getAccessRequests(){if(!h(this,In))throw new R("You do not have permissions for getStageRequests");const{stageRequests:t}=await h(this,Yr).getStageRequests();return{stageRequests:t}}requestAccess(){if(this.status!=="OFF_STAGE")throw new R(`Unable to request access you are currently ${this.status}`);if(h(this,In)){this.setStatus("ACCEPTED_TO_JOIN_STAGE");return}h(this,Yr).requestAccess(),this.setStatus("REQUESTED_TO_JOIN_STAGE")}cancelRequestAccess(){h(this,Yr).cancelRequestAccess(),this.setStatus("OFF_STAGE")}grantAccess(t){if(!h(this,In))throw new R("You do not have permissions for grantAccess");return h(this,Yr).grantAccess(t)}denyAccess(t){if(!h(this,In))throw new R("You do not have permissions for denyAccess");return h(this,Yr).denyAccess(t)}async join(){if(!h(this,In)&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw new R(`Unable to join stage you are currently ${this.status}`);if(h(this,In)&&this.status==="ON_STAGE")throw new R("You are already on stage.");h(this,Yr).joinStage(),await P.emitAsync(k.JOIN_MEDIA_ROOM),this.setStatus("ON_STAGE")}async leave(){var t;if(!(this.status==="ON_STAGE"||this.status==="ACCEPTED_TO_JOIN_STAGE"))throw new R(`Unable to leave stage you are currently ${this.status}`);h(this,is).setIsPinned(!1),this.setStatus("OFF_STAGE"),(t=$t())!=null&&t.roomJoined&&await P.emitAsync(k.LEAVE_MEDIA_ROOM);try{await h(this,is).disableScreenShare(),await h(this,is).disableVideo(),await h(this,is).disableAudio(),h(this,is).destructMediaHandler()}catch(i){b.error("DyteStage.leaveStage.DisableMediaError",{error:i})}h(this,Yr).leaveStage(h(this,is).userId)}async kick(t){if(!h(this,In))throw new R("You do not have permissions for kick");return h(this,Yr).kick(t)}setStatus(t){this.status!==t&&(this.status=t,this.emit("stageStatusUpdate",t))}}Yr=new WeakMap,In=new WeakMap,is=new WeakMap;oc([E.trace("DyteStage.getStageRequests")],Ba.prototype,"getAccessRequests",1);oc([E.trace("DyteStage.requestAccess")],Ba.prototype,"requestAccess",1);oc([E.trace("DyteStage.cancelRequestAccess")],Ba.prototype,"cancelRequestAccess",1);oc([E.trace("DyteStage.grantAccess")],Ba.prototype,"grantAccess",1);oc([E.trace("DyteStage.denyAccess")],Ba.prototype,"denyAccess",1);oc([E.trace("DyteStage.joinStage")],Ba.prototype,"join",1);oc([E.trace("DyteStage.leaveStage")],Ba.prototype,"leave",1);var Hde=Object.defineProperty,Gde=Object.getOwnPropertyDescriptor,Wde=(e,t,i,r)=>{for(var n=r>1?void 0:r?Gde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Hde(t,i,n),n},Vc,Xl,mo,og;class a3{constructor(t,i,r){v(this,"stage"),I(this,Vc,void 0),I(this,Xl,void 0),I(this,mo,void 0),I(this,og,0),this.stage=new Ba(i,r,t),A(this,mo,t),A(this,Vc,i),A(this,Xl,r),this.setupEvents()}setupEvents(){h(this,mo).on(Ne.grantStageAccess,()=>{h(this,Vc)||(this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"))}),h(this,mo).on(Ne.denyStageAccess,()=>{h(this,Vc)||(this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"))}),h(this,mo).on(Ne.getStagePeers,t=>{this.stage.status==="ON_STAGE"&&!t.stagePeers.includes(h(this,Xl).userId)&&P.emitAsync(k.LEAVE_MEDIA_ROOM)}),h(this,mo).on(Ne.getStageRequests,t=>{var i;if(!h(this,Vc))return;const r=(i=t==null?void 0:t.stageRequests)!=null?i:[];h(this,og)<r.length&&r.length>0&&this.stage.emit("newStageRequest",{count:r.length}),A(this,og,r.length),this.stage.emit("stageAccessRequestUpdate",r)}),P.onAsync(k.SOCKET_SERVICE_ROOM_JOINED,async t=>{var i;switch((i=t.peer)==null?void 0:i.stageType){case Ro.OFF_STAGE:{this.setStageStatus("OFF_STAGE");break}case Ro.ON_STAGE:{h(this,Xl).config.viewType==="LIVESTREAM"&&await P.emitAsync(k.JOIN_MEDIA_ROOM),this.setStageStatus("ON_STAGE");break}case Ro.APPROVED_STAGE:{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE");break}case Ro.REQUESTED_STAGE:{this.setStageStatus("REQUESTED_TO_JOIN_STAGE");break}default:this.setStageStatus("OFF_STAGE")}})}setStageStatus(t){this.stage.status!==t&&(this.stage.status=t,this.stage.emit("stageStatusUpdate",t))}}Vc=new WeakMap,Xl=new WeakMap,mo=new WeakMap,og=new WeakMap;Wde([E.trace("DyteStage.setupEvents")],a3.prototype,"setupEvents",1);var qde=Object.defineProperty,Jde=Object.getOwnPropertyDescriptor,mw=(e,t,i,r)=>{for(var n=r>1?void 0:r?Jde(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&qde(t,i,n),n},fo;class If{constructor(t){I(this,fo,void 0),A(this,fo,t)}getPolls(){return h(this,fo).sendMessagePromise(ss.getPolls)}createPoll(t,i,r=!1,n=!1){const s={anonymous:r,hideVotes:n,question:t,options:i};return h(this,fo).sendMessage(ss.createPoll,bae.toBinary(s))}votePoll(t,i){const r={index:i,pollId:t};return h(this,fo).sendMessage(ss.votePoll,Sae.toBinary(r))}on(t,i){let r,n;switch(t){case ss.updatePoll:case ss.createPoll:case ss.votePoll:{r=uy.fromBinary.bind(uy),n=uy.create();break}}h(this,fo).on(t,({payload:s})=>{let a=n;try{a=r(s)}catch(o){b.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}fo=new WeakMap;mw([E.trace("PollSocketHandler.getPolls")],If.prototype,"getPolls",1);mw([E.trace("PollSocketHandler.createPoll")],If.prototype,"createPoll",1);mw([E.trace("PollSocketHandler.votePoll")],If.prototype,"votePoll",1);class Kde{constructor(){v(this,"battery"),v(this,"init",async()=>{try{"getBattery"in navigator&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("chargingchange",this.updateChargeInfo),this.battery.addEventListener("levelchange",this.updateLevelInfo),this.updateLevelInfo(),this.updateChargeInfo())}catch(t){b.error("Error getting battery",t)}}),v(this,"updateChargeInfo",()=>{var t;b.log(`Battery charging? ${(t=this.battery)!=null&&t.charging?"Yes":"No"}`)}),v(this,"updateLevelInfo",()=>{var t;b.log(`Battery level: ${((t=this.battery)==null?void 0:t.level)*100}%`)}),v(this,"cleanup",()=>{var t,i;"getBattery"in navigator&&((t=this.battery)==null||t.removeEventListener("chargingchange",this.updateChargeInfo),(i=this.battery)==null||i.removeEventListener("levelchange",this.updateLevelInfo))})}}const UP=new Kde;var ua,Zs,cg,K1;class Yde extends At{constructor(t){super(),I(this,cg),I(this,ua,void 0),I(this,Zs,void 0),A(this,ua,t),A(this,Zs,!1)}get mediaPermission(){return h(this,ua).mediaPermissions.audio}async getTrackMetadata(t=!1){if(!as.track){if(!t)return null;const i=await Nt(this,cg,K1).call(this);as.setTrack(i)}return as.getTrackMetadata()}async startTrackAnalysis(t=!1){if(h(this,Zs))return!0;if(!await as.startTrackAnalysis()){if(t){const i=await Nt(this,cg,K1).call(this);return as.setTrack(i),this.startTrackAnalysis(t)}return A(this,Zs,!1),!1}return A(this,Zs,!0),!0}stopTrackAnalysis(){return h(this,Zs)&&(A(this,Zs,!1),as.stopTrackAnalysis()),!0}}ua=new WeakMap,Zs=new WeakMap,cg=new WeakSet,K1=async function(){var e;try{const t=h(this,ua).getCurrentDevices(),i=(e=t==null?void 0:t.audio)==null?void 0:e.deviceId;let r={audio:!0};i&&(r=St.getAudioConstraints({audioDeviceId:i}));const n=await St.getAudioTrack(r);return h(this,ua).mediaPermissions.audio="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:h(this,ua).mediaPermissions.audio,kind:"audio"}),n}catch(t){const i=Pf(t.name,t.message);throw h(this,ua).mediaPermissions.audio=i,P.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:"audio"}),new R("Failed to fetch audio track","1700")}};var vo;class Qde extends At{constructor(){super(),I(this,vo,void 0),A(this,vo,!1)}async getNetworkMetadata(){return new Promise(t=>{Y.onSafeInitialization(()=>{Y.onPreCallTestResults(i=>{t(i.connectionInfo)}),Y.startPreCallTest()})})}startNetworkAnalysis(){return A(this,vo,ma.collectSendTransportStats()&&ma.collectRecvTransportStats()),h(this,vo)}stopNetworkAnalysis(){return A(this,vo,!(ma.stopStatsCollection("send")&&ma.stopStatsCollection("receive"))),h(this,vo)}}vo=new WeakMap;var Fc,ur;class Zde extends At{constructor(t){super(),I(this,Fc,void 0),I(this,ur,void 0),A(this,Fc,t),A(this,ur,{audio:!1,video:!1})}get mediaPermission(){return h(this,Fc).mediaPermissions.screenshare}getAudioTrackMetaData(){var t;return(t=h(this,Fc).screenShareTracks)!=null&&t.audio?Zh.getTrackMetadata():null}getVideoTrackMetaData(){var t;return(t=h(this,Fc).screenShareTracks)!=null&&t.video?Xh.getTrackMetadata():null}async startAudioTrackAnalysis(){if(h(this,ur).audio)return!0;const t=await Zh.startTrackAnalysis();return h(this,ur).audio=t,h(this,ur).audio}async startVideoTrackAnalysis(){if(h(this,ur).video)return!0;const t=await Xh.startTrackAnalysis();return h(this,ur).video=t,h(this,ur).video}stopAudioTrackAnalysis(){return h(this,ur)&&(h(this,ur).audio=!1,Zh.stopTrackAnalysis()),!0}stopVideoTrackAnalysis(){return h(this,ur)&&(h(this,ur).video=!1,Xh.stopTrackAnalysis()),!0}}Fc=new WeakMap,ur=new WeakMap;var Un,Xs,yo,eu,Y1,o3;class Xde extends At{constructor(t){super(),I(this,Y1),I(this,Un,void 0),I(this,Xs,void 0),I(this,yo,void 0),I(this,eu,void 0),A(this,Un,t),A(this,Xs,!1),A(this,yo,!1)}get mediaPermission(){return h(this,Un).mediaPermissions.video}getTrackMetadata(){return h(this,Un).videoTrack?null:os.getTrackMetadata()}async startTrackAnalysis({preview:t}={preview:!1}){return h(this,Xs)?!0:await os.startTrackAnalysis()?(t&&A(this,yo,!0),A(this,Xs,!0),!0):!1}stopTrackAnalysis(){h(this,Xs)&&(os.stopTrackAnalysis(),A(this,Xs,!1),h(this,yo)&&A(this,yo,!1))}async startPreview(){let t=!0,{track:i}=os;return i?i=i.clone():(t=!1,i=await Nt(this,Y1,o3).call(this)),h(this,eu)||(os.setClonedTrack(i,t),A(this,eu,!0)),i}stopPreview(){h(this,Xs)&&h(this,yo)&&this.stopTrackAnalysis(),A(this,eu,!1),os.resetClonedTrack(h(this,Un).videoTrack)}}Un=new WeakMap,Xs=new WeakMap,yo=new WeakMap,eu=new WeakMap,Y1=new WeakSet,o3=async function(){var e;try{const t=h(this,Un).getCurrentDevices(),i=(e=t==null?void 0:t.video)==null?void 0:e.deviceId;let r={video:{width:{ideal:1280},height:{ideal:720}}};i&&(r=St.getVideoConstraints({videoDeviceId:i}));const n=await St.getVideoTrack(r);return h(this,Un).mediaPermissions.video="ACCEPTED",P.emit(k.MEDIA_PERMISSION_UPDATE,{message:h(this,Un).mediaPermissions.video,kind:"video"}),n}catch(t){const i=Pf(t.name,t.message);throw h(this,Un).mediaPermissions.video=i,P.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:"video"}),new R("Failed to fetch video track","1700")}};class ele{constructor(t){v(this,"audio"),v(this,"video"),v(this,"screenshare"),v(this,"network"),this.audio=new Yde(t),this.video=new Xde(t),this.screenshare=new Zde(t),this.network=new Qde}}const Py=e=>{const{type:t,id:i,transport:r,timestamp:n,currentRoundTripTime:s,bytesSent:a,bytesReceived:o,kind:c,jitter:d,packetsLost:l,totalPacketSendDelay:u}=e;switch(t){case"candidate-pair":return{type:t,id:i,transport:r,timestamp:n,rtt:s,bytesSent:a,bytesReceived:o};case"inbound-rtp":return{type:t,id:i,transport:r,timestamp:n,kind:c,jitter:d,packetsLost:l,bytesReceived:o};default:return{type:t,id:i,transport:r,timestamp:n,kind:c,packetSendDelay:u,bytesSent:a}}};class tle{constructor(t){v(this,"troubleshooter"),this.troubleshooter=new ele(t),this.setupEvents()}setupEvents(){P.on(k.AUDIO_TRACK_ANALYSIS,t=>{this.troubleshooter.audio.emit("audioTrackStats",t)}),P.on(k.AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"ended"})}),P.on(k.AUDIO_TRACK_CREATED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"live"})}),P.on(k.SCREENSHARE_AUDIO_TRACK_ANALYSIS,t=>{this.troubleshooter.screenshare.emit("audioTrackStats",t)}),P.on(k.SCREENSHARE_AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"ended"})}),P.on(k.SCREENSHARE_AUDIO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"live"})}),P.on(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS,t=>{this.troubleshooter.screenshare.emit("videoTrackStats",t)}),P.on(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.screenshare.stopVideoTrackAnalysis()}),P.on(k.SCREENSHARE_VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"ended"})}),P.on(k.SCREENSHARE_VIDEO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"live"})}),P.on(k.VIDEO_TRACK_ANALYSIS,t=>{this.troubleshooter.video.emit("videoTrackStats",t)}),P.on(k.VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.video.stopTrackAnalysis()}),P.on(k.VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"ended"})}),P.on(k.VIDEO_TRACK_CREATED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"live"})}),P.on(k.CANDIDATE_PEER_UPDATE,t=>{this.troubleshooter.network.emit("connectionDelayStats",Py(t))}),P.on(k.INBOUND_RTP_UPDATE,t=>{this.troubleshooter.audio.emit("audioConsumptionStats",Py(t))}),P.on(k.OUTBOUND_RTP_UPDATE,t=>{this.troubleshooter.audio.emit("audioProductionStats",Py(t))}),P.on(k.SEND_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"ended"})}),P.on(k.RECV_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"ended"})}),P.on(k.SEND_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"live"})}),P.on(k.RECV_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"live"})})}}const _o=class{static handleConnectedRoomsDumpRaw({payload:e}){var t;const i=Xne.fromBinary(e),r=i.meetings.map(n=>{var s;return{id:n.id,title:n.title,participants:(s=n.participants)!=null?s:[]}});return{parentMeeting:{id:i.parentMeeting.id,title:i.parentMeeting.title,participants:(t=i.parentMeeting.participants)!=null?t:[]},meetings:r}}static handleTransferPeerRaw({payload:e}){const t=kse.fromBinary(e);return{authToken:t.authToken,meetingId:t.meetingId}}static handleMovedPeerRaw({payload:e}){const t=vM.fromBinary(e);return{meetingId:t.meetingId,customParticipantId:t.customParticipantId}}static handleConnectedRoomsUpdatedRaw({payload:e}){return Kk.fromBinary(e).payloads.map(t=>({id:t.id,title:t.title}))}static handleConnectedRoomsDeletedRaw({payload:e}){return mse.fromBinary(e).payloads}static async getConnectedRoomsDump(){const e=await _o.socketService.sendMessagePromise(Ne.getConnectedRoomsDump);return _o.handleConnectedRoomsDumpRaw(e)}static async createConnectedRooms(e){const{payload:t}=await _o.socketService.sendMessagePromise(Ne.createConnectedRooms,rse.toBinary({payloads:e}));return Kk.fromBinary(t).payloads.map(i=>({id:i.id,title:i.title}))}static async updateConnectedRooms(e){}static async disableConnectedRooms(e){const t=e.map(r=>({id:r})),i=await _o.socketService.sendMessagePromise(Ne.deleteConnectedRooms,hse.toBinary({payloads:t}));return _o.handleConnectedRoomsDeletedRaw(i)}static async movePeersBetweenRooms(e){try{const t=await _o.socketService.sendMessagePromise(Ne.movePeers,wse.toBinary({sourceMeetingId:e.sourceMeetingId,destinationMeetingId:e.destinationMeetingId,participants:e.participants}));return new TextDecoder().decode(t.payload).includes("error")?{success:!1,error:"failed to move participants"}:{success:!0}}catch(t){return{success:!1,error:t}}}};let xt=_o;v(xt,"socketService"),v(xt,"currentMeetingId");const ile={codecs:[{kind:"audio",mimeType:"audio/opus",clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc",parameter:""}],parameters:{},preferredPayloadType:100},{kind:"video",mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"x-google-start-bitrate":1e3},preferredPayloadType:101},{kind:"video",mimeType:"video/rtx",preferredPayloadType:102,clockRate:9e4,parameters:{apt:101},rtcpFeedback:[]},{kind:"video",mimeType:"video/VP9",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"profile-id":0,"x-google-start-bitrate":1e3},preferredPayloadType:103},{kind:"video",mimeType:"video/rtx",preferredPayloadType:104,clockRate:9e4,parameters:{apt:103},rtcpFeedback:[]},{kind:"video",mimeType:"video/H264",clockRate:9e4,parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f","x-google-start-bitrate":1e3},rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],preferredPayloadType:105},{kind:"video",mimeType:"video/rtx",preferredPayloadType:106,clockRate:9e4,parameters:{apt:105},rtcpFeedback:[]}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"}]};var rle=Object.defineProperty,nle=Object.getOwnPropertyDescriptor,Cp=(e,t,i,r)=>{for(var n=r>1?void 0:r?nle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&rle(t,i,n),n};const dg=class{constructor(e,t,i,r,n,s,a,o,c,d,l,u,g,m){v(this,"apiBase"),v(this,"chatController"),v(this,"metaController"),v(this,"participantController"),v(this,"pluginController"),v(this,"pollController"),v(this,"remoteController"),v(this,"selfController"),v(this,"recordingController"),v(this,"spotlightController"),v(this,"livestreamController"),v(this,"internalsController"),v(this,"stageController"),v(this,"troubleshooterController"),this.apiBase=e,this.metaController=t,this.selfController=i,this.pluginController=r,this.participantController=n,this.chatController=s,this.pollController=a,this.remoteController=o,this.recordingController=c,this.spotlightController=d,this.livestreamController=u,this.internalsController=l,this.stageController=g,this.troubleshooterController=m}static async init(e,t){var i,r,n,s,a,o,c,d,l,u,g,m,f,w;const{apiBase:S="https://api.cluster.dyte.in",authToken:y}=e,_={chat:!0,participant:!0,plugin:!0,poll:!0,self:!0,meta:!0,permissions:!0,theme:!0,spotlight:!0,tracing:!0,devTools:{logs:!1},internals:!0,stage:!0,...e==null?void 0:e.modules};P.reset(),Fte((i=e.overrides)!=null?i:{});const T=Wae({authToken:y,baseURL:S});T.setHeader("dyte-tracing-id",t),T.setPeerId(t),T.setRoomName(e.roomName);const{roomName:C}=e,D=Ee.isV2AuthToken?Ee.meetingId:C,O=new eM,z=O.load({routerRtpCapabilities:ile}),H=T.getRoomNodeData({roomName:D,peerId:t}),ie=Ee.isV2AuthToken?void 0:T.getUserPreset(C),K=await T.getUserDetails(),ge=Ee.isV2AuthToken?K.participant.organizationId:K.organizationId;E.meetingMetadata.userId=Ee.isV2AuthToken?K.participant.id:K.id,mte({...e,modules:_,apiBase:S,organizationId:ge}),E.meetingMetadata.organizationId=ge;const He=Ide(D);await ee.identify(`${_1.PEER}_${t}`,JSON.parse(JSON.stringify({entity:_1.PEER,clientId:ge,isAnonUser:!ge,sdkVersion:Md,meetingHash:He,roomName:D,...Oe.getDeviceInfo()}))),Hce();const Zt=ee.getValue(re.PLUGIN_SOCKET_SERVER),Xt=T.getPlugins(Zt);b.info("flagsmith::allFlags",{flags:JSON.stringify(ee.getAllFlags())},!0),UP.init();let Yn=Ee.isV2AuthToken?DP.default():Hk.default(),or=Ee.isV2AuthToken?LP.default():NP.default(),Qn=Ee.isV2AuthToken?K.preset.name:void 0;if(_.permissions||_.theme){const Zn=await ie;Zn&&(Qn=Zn.presetName),_.permissions&&(Yn=Ee.isV2AuthToken?DP.fromResponse(K.preset.permissions):Hk.fromResponse(Zn.permissions)),_.theme&&(or=Ee.isV2AuthToken?LP.fromResponse(K.preset):NP.fromResponse(Zn.theme),Ee.isV2AuthToken||or.configFromPermissions(Zn.permissions))}const{roomNodeUrl:F,meetingTitle:W,useHiveMedia:X}=await H;await z;const De=LM(or),ft=ee.hasFeature(re.CUSTOM_PING_PONG),ei=[];X&&ei.push("HIVE"),ft&&ei.push("PING"),zte({...e,roomName:D,peerId:t,meetingTitle:W,roomNodeUrl:F,device:O});const _t=await dg.createSocketServiceAndRoomNodeClient({...e,roomName:D,peerId:t,meetingTitle:W,roomNodeUrl:F,capabilities:ei,shouldInitializeRoomNode:De,viewType:or.viewType,device:O}),wn=$t();let Di,Br,vw,yw,ct,_w,bw,ww,Sw,Ew,Tw,kw,Pw;const Cw=new za(_t),p3=new If(_t),h3=new yde(_t),g3=new Vde(_t),m3=new Fde(_t);xt.socketService=_t,(r=_.self)==null||r?([ct]=await Promise.all([el.init(_t,K,Yn,or,Qn),wn instanceof ze?wn.setupTransports():null]),T.setOrganizationId(ct.self.organizationId)):wn instanceof ze&&await wn.setupTransports();const f3=ee.hasFeature(re.TROUBLESHOOTING);if(ct&&f3&&(Pw=new tle(ct.self)),(n=_.participant)==null||n){if(!ct)throw new R("The participant module cannot be initialized without the `self` module");Br=new Fa(ct.self)}if((s=_.chat)==null||s){if(!ct)throw new R("The chat module cannot be initialized without the `self` module");Di=await Io.init(Cw,ct.self,Br.participants,ei)}if((a=_.plugin)==null||a){if(!ct)throw new R("The plugin module cannot be initialized without the `self` module");if(!Br)throw new R("The plugin module cannot be initialized without the `participant` module");const Zn=await Xt;vw=await $M.init(Zn,h3,Cw,Di==null?void 0:Di.chat,ct.self,Br.participants,ei)}if((o=_.poll)==null||o){if(!ct)throw new R("The poll cannot be initialized without the `self` module");yw=await VM.init(ct.self,p3,ei)}if((c=_.meta)==null||c){if(!ct)throw new R("The meta module cannot be initialized without the `self` module");_w=new UM(ct.self,_t,W)}if((d=_.remoteControl)==null||d){if(!ct)throw new R("The remote controller cannot be initialized without the `self` module");bw=new Zce(ct.self,Br.participants)}if((l=_.recording)==null||l){if(!ct)throw new R("The recording controller cannot be initialized without the `self` module");ww=new t3(ct.self)}if((u=_.spotlight)==null||u){if(!ct)throw new R("The spotlight controller cannot be initialized without the `self` module");Sw=new r3(ct.self)}if(((g=_.internals)==null||g)&&(Tw=await hw.init()),or.viewType===gn.Livestream&&((m=_.livestream)==null||m)){if(!ct)throw new R("The livestream controller cannot be initialized without the `self` module");ee.hasFeature(re.LIVESTREAM)&&(Ew=new s3(ct.self,g3))}if((f=_.stage)==null||f){if(!ct)throw new R("The stage client cannot be initialized without the `self` module");kw=new a3(m3,uce(Yn),ct.self)}if(pM(or.viewType,ei)||((w=e.overrides)==null?void 0:w.chat_socket_server)==="socket-service")try{await _t.connect()}catch(Zn){b.error("[Socket Service] Failed to connect to socket server:",{error:Zn})}return new dg(S,_w,ct,vw,Br,Di,yw,bw,ww,Sw,Tw,Ew,kw,Pw)}static async createSocketServiceAndRoomNodeClient(e){const t=dg.createSocketService(e);return e.shouldInitializeRoomNode?e.capabilities.includes("HIVE")?(await Poe({...e,roomName:e.roomName,peerId:e.peerId,socket:t}),t):(await kM({...e,roomName:e.roomName,peerId:e.peerId}),t):t}static createSocketService(e){const{peerId:t,roomName:i,authToken:r,capabilities:n}=e;return new Pp({peerId:t,roomName:i,authToken:r,capabilities:n})}async joinRoom(){return this.selfController.joinRoom()}async leaveRoom(e="left"){return UP.cleanup(),this.selfController.leaveRoom(e)}};let tl=dg;Cp([E.trace("Controller.joinRoom")],tl.prototype,"joinRoom",1);Cp([E.trace("Controller.leaveRoom")],tl.prototype,"leaveRoom",1);Cp([E.trace("Controller.init")],tl,"init",1);Cp([E.trace("Controller.createSocketServiceAndRoomNodeClient")],tl,"createSocketServiceAndRoomNodeClient",1);Cp([E.trace("Controller.createSocketService")],tl,"createSocketService",1);var lg;class sle extends At{constructor(t){super(),I(this,lg,void 0),v(this,"meetings",[]),v(this,"parentMeeting",null),A(this,lg,t.self)}get supportsConnectedMeetings(){return h(this,lg).id!==""&&Ee.isV2AuthToken&&ee.hasFeature(re.CONNECTED_MEETINGS)}get isActive(){return this.meetings.length!==0}get currentMeetingId(){return xt.currentMeetingId}validateConnectedMeetingsAction(){if(!this.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
            Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`)}async getConnectedMeetings(){return this.validateConnectedMeetingsAction(),await xt.getConnectedRoomsDump()}async createMeetings(t){return this.validateConnectedMeetingsAction(),(await xt.createConnectedRooms(t)).map(i=>({id:i.id,title:i.title}))}async updateMeetings(t){this.validateConnectedMeetingsAction(),await xt.updateConnectedRooms(t.map(i=>({meetingId:i.id,title:i.title})))}async deleteMeetings(t){this.validateConnectedMeetingsAction();const i=this.meetings.map(r=>t.includes(r.id)&&r.participants.length!==0?this.moveParticipants(r.id,this.parentMeeting.id,r.participants.map(n=>n.id)):Promise.resolve());return await Promise.all(i),await xt.disableConnectedRooms(t)}async moveParticipants(t,i,r){this.validateConnectedMeetingsAction();const n=new Map;[...this.parentMeeting.participants,...this.meetings.flatMap(a=>a.participants)].forEach(a=>n.set(a.id,a));const s=await xt.movePeersBetweenRooms({sourceMeetingId:t,destinationMeetingId:i,participants:r.map(a=>({id:a}))});return s.success&&(i===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.concat(r.map(a=>n.get(a)))),t===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.filter(a=>!r.includes(a.id))),this.meetings=this.meetings.map(a=>{if(i===a.id){const o=a.participants.concat(r.map(c=>n.get(c)));return{...a,participants:o}}if(t===a.id){const o=a.participants.filter(c=>!r.includes(c.id));return{...a,participants:o}}return a})),s}}lg=new WeakMap;var ale=Object.defineProperty,ole=Object.getOwnPropertyDescriptor,fw=(e,t,i,r)=>{for(var n=r>1?void 0:r?ole(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&ale(t,i,n),n},Pc,Ll,Cy;const ea=(Cy=class{constructor(e,t){v(this,"connectedMeetings"),I(this,Pc,void 0),I(this,Ll,void 0),A(this,Pc,t),this.connectedMeetings=new sle(e),this.setCurrentMeeting(e)}static init(e,t){return ea.instance||(ea.instance=new ea(e,t)),ea.instance.connectedMeetings.supportsConnectedMeetings&&(ea.instance.setupEvents(),e.self.once("roomJoined",()=>ea.instance.getConnectedMeetings())),ea.instance}setCurrentMeeting(e){A(this,Ll,e),xt.currentMeetingId=e.meta.roomName}getConnectedMeetings(){this.connectedMeetings.getConnectedMeetings()}setupEvents(){xt.socketService&&(xt.socketService.on(Ne.getConnectedRoomsDump,this.handleConnectedRoomsDump.bind(this)),xt.socketService.on(Ne.transferPeer,this.handleTransferPeer.bind(this)),xt.socketService.on(Ne.movedPeer,this.handleMovedPeer.bind(this)),xt.socketService.on(Ne.connectedRoomsUpdated,this.handleConnectedRoomsUpdated.bind(this)),xt.socketService.on(Ne.connectedRoomsDeleted,this.handleConnectedRoomsDeleted.bind(this)))}handleTransferPeer(e){const t=xt.handleTransferPeerRaw(e);return this.switchMeeting(t)}async switchMeeting({authToken:e,meetingId:t}){if(!this.connectedMeetings.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
                Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);this.connectedMeetings.emit("changingMeeting",t);const i=h(this,Ll).self.videoEnabled;await h(this,Ll).leaveRoom("connected-meeting"),xt.socketService=void 0;const r=await c3.init({authToken:e,apiBase:h(this,Pc).apiBase,defaults:{...h(this,Pc).defaults,video:i,audio:!1},modules:h(this,Pc).modules});return this.connectedMeetings.emit("meetingChanged",r),this.setCurrentMeeting(r),r}handleConnectedRoomsDump(e){const t=xt.handleConnectedRoomsDumpRaw(e);this.connectedMeetings.meetings=t.meetings.map(i=>({id:i.id,title:i.title,participants:i.participants||[]})),this.connectedMeetings.parentMeeting={id:t.parentMeeting.id,title:t.parentMeeting.title,participants:t.parentMeeting.participants},this.emitStateUpdate()}handleMovedPeer(e){return xt.handleMovedPeerRaw(e)}handleConnectedRoomsUpdated(e){const t=xt.handleConnectedRoomsUpdatedRaw(e),i=new Map;this.connectedMeetings.meetings.forEach(r=>{i.set(r.id,r)}),t.forEach(r=>{i.has(r.id)?i.get(r.id).title=r.title:i.set(r.id,{...r,participants:[]})}),this.connectedMeetings.meetings=Array.from(i.values()),this.emitStateUpdate()}handleConnectedRoomsDeleted(e){const t=xt.handleConnectedRoomsDeletedRaw(e).map(i=>i.id);this.connectedMeetings.meetings=this.connectedMeetings.meetings.filter(i=>!t.includes(i.id))}emitStateUpdate(){this.connectedMeetings.emit("stateUpdate",{meetings:this.connectedMeetings.meetings,parentMeeting:this.connectedMeetings.parentMeeting})}},Pc=new WeakMap,Ll=new WeakMap,v(Cy,"instance"),Cy);let Af=ea;fw([E.trace("ConnectedMeetingsController.getConnectedMeetings")],Af.prototype,"getConnectedMeetings",1);fw([E.trace("ConnectedMeetingsController.setupEvents")],Af.prototype,"setupEvents",1);fw([E.trace("ConnectedMeetingsController.switchMeeting")],Af.prototype,"switchMeeting",1);function cle(e){return(t,i,r)=>{const n=r.value,s=e?dm(n,e):dm(n);return r.value=(...a)=>{if(s.cache&&s.cache.has(e(...a))){console.warn(`[Dyte] method "${i}" is called twice. This may result in inconsistent behaviors`);try{b.warn("Memoize::double_invoke",{memoize:{doubleInvoked:{property:i}}})}catch{}}return s.apply(this,a)},r}}var dle=Object.defineProperty,lle=Object.getOwnPropertyDescriptor,Of=(e,t,i,r)=>{for(var n=r>1?void 0:r?lle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&dle(t,i,n),n};const ule=e=>{var t,i,r,n,s;return`${(t=e.roomName)!=null?t:""}-${e.authToken}-${(i=e.apiBase)!=null?i:""}-${JSON.stringify((r=e.defaults)!=null?r:{})}-${JSON.stringify((n=e.modules)!=null?n:{})}-${JSON.stringify((s=e.overrides)!=null?s:{})}`};var oi,bh,Ry,jP,$P;let Jo=($P=class{constructor(e){I(this,Ry),I(this,oi,void 0),I(this,bh,void 0),A(this,oi,e)}static async init(e){var t,i,r,n,s,a,o;Oe.init();const c=Zm();try{(i=(t=e.modules)==null?void 0:t.tracing)==null||i||(window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION=!0,window.Zone===void 0&&require("zone.js"))}catch{}E.init(c,(n=(r=e.modules)==null?void 0:r.tracing)!=null?n:!0),b.info("DyteClient::init::options",{dyteClientInitOptions:{...e,authToken:`${(s=e.authToken)==null?void 0:s.slice(0,10)}...${(a=e.authToken)==null?void 0:a.slice(-10)}`}}),!navigator.isReactNative&&typeof window<"u"&&(window.addEventListener("error",u=>{var g;!((g=u.filename)!=null&&g.includes("localhost"))&&u.lineno!==0&&b.error("window::error",{error:u.error},!0)}),window.addEventListener("unhandledrejection",u=>{var g,m,f,w,S,y,_,T;b.error("window::unhandledrejection",{error:u==null?void 0:u.reason,networkCall:{url:(m=(g=u==null?void 0:u.reason)==null?void 0:g.config)==null?void 0:m.url,baseURL:(w=(f=u==null?void 0:u.reason)==null?void 0:f.config)==null?void 0:w.baseURL,method:(y=(S=u==null?void 0:u.reason)==null?void 0:S.config)==null?void 0:y.method,status:(_=u==null?void 0:u.reason)==null?void 0:_.status,statusText:(T=u==null?void 0:u.reason)==null?void 0:T.statusText}},!0)})),Vte(e.authToken,e.roomName),E.meetingMetadata.roomName=Ee.isV2AuthToken?Ee.meetingId:e.roomName;const d=await tl.init(e,c),l=new Jo(d);return Nt(o=l,Ry,jP).call(o,e),l}async joinRoom(){return h(this,oi).joinRoom()}async leaveRoom(e){return h(this,oi).leaveRoom(e)}get participants(){var e;return(e=h(this,oi).participantController)==null?void 0:e.participants}get self(){var e;return(e=h(this,oi).selfController)==null?void 0:e.self}get meta(){var e;return(e=h(this,oi).metaController)==null?void 0:e.meta}get plugins(){var e;return(e=h(this,oi).pluginController)==null?void 0:e.plugins}get chat(){var e;return(e=h(this,oi).chatController)==null?void 0:e.chat}get polls(){var e;return(e=h(this,oi).pollController)==null?void 0:e.polls}get remote(){var e;return(e=h(this,oi).remoteController)==null?void 0:e.remote}get connectedMeetings(){var e;return(e=h(this,bh))==null?void 0:e.connectedMeetings}get recording(){var e;return(e=h(this,oi).recordingController)==null?void 0:e.recording}get spotlight(){var e;return(e=h(this,oi).spotlightController)==null?void 0:e.spotlight}get livestream(){var e;return(e=h(this,oi).livestreamController)==null?void 0:e.livestream}get stage(){var e;return(e=h(this,oi).stageController)==null?void 0:e.stage}get troubleshoot(){var e;return(e=h(this,oi).troubleshooterController)==null?void 0:e.troubleshooter}get __internals__(){var e;return(e=h(this,oi).internalsController)==null?void 0:e.internals}},oi=new WeakMap,bh=new WeakMap,Ry=new WeakSet,jP=function(e){A(this,bh,Af.init(this,e))},$P);Of([Si(e=>{throw new R(e.message,"0002")})],Jo.prototype,"joinRoom",1);Of([Si(e=>{throw new R(e.message,"0003")})],Jo.prototype,"leaveRoom",1);Of([Si(e=>{throw new R(e.message,"0001")}),cle(ule)],Jo,"init",1);Jo=Of([Si(e=>{throw new R(e.message,"0000")})],Jo);const c3=Jo;var d3={exports:{}},Rp={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var VP=Object.getOwnPropertySymbols,ple=Object.prototype.hasOwnProperty,hle=Object.prototype.propertyIsEnumerable;function gle(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function mle(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}mle();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fle=t_,l3=60103;Rp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var FP=Symbol.for;l3=FP("react.element"),Rp.Fragment=FP("react.fragment")}var vle=fle.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yle=Object.prototype.hasOwnProperty,_le={key:!0,ref:!0,__self:!0,__source:!0};function u3(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)yle.call(t,r)&&!_le.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:l3,type:e,key:s,ref:a,props:n,_owner:vle.current}}Rp.jsx=u3;Rp.jsxs=u3;d3.exports=Rp;d3.exports.jsx;bs.exports.createContext({meeting:void 0,updates:void 0});const ble=()=>{const e=bs.exports.useRef(!1),[t,i]=bs.exports.useState();return[t,async n=>{if(!e.current){e.current=!0;try{const s=await c3.init(n);return i(s),s.self.on("roomLeft",()=>i(void 0)),s}catch{}finally{e.current=!1}}}]};function wle(){const[e,t]=ble();return bs.exports.useEffect(()=>{const i=new URL(window.location.href).searchParams,r=i.get("authToken"),n=i.get("roomName")||"";if(!r){alert("An authToken wasn't passed, please pass an authToken in the URL query to join a meeting.");return}t({authToken:r,roomName:n})},[]),W_(cV,{meeting:e})}xy.createRoot(document.getElementById("root")).render(W_(wle,{}))});export default Sle();
