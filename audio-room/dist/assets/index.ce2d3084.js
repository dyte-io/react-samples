var AA=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var cue=AA((xe,Ae)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jv={},ik={exports:{}},Tr={},ai={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp=Symbol.for("react.element"),IA=Symbol.for("react.portal"),OA=Symbol.for("react.fragment"),MA=Symbol.for("react.strict_mode"),LA=Symbol.for("react.profiler"),DA=Symbol.for("react.provider"),NA=Symbol.for("react.context"),UA=Symbol.for("react.forward_ref"),jA=Symbol.for("react.suspense"),$A=Symbol.for("react.memo"),VA=Symbol.for("react.lazy"),$w=Symbol.iterator;function FA(e){return e===null||typeof e!="object"?null:(e=$w&&e[$w]||e["@@iterator"],typeof e=="function"?e:null)}var rk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nk=Object.assign,sk={};function jd(e,t,i){this.props=e,this.context=t,this.refs=sk,this.updater=i||rk}jd.prototype.isReactComponent={};jd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ak(){}ak.prototype=jd.prototype;function a_(e,t,i){this.props=e,this.context=t,this.refs=sk,this.updater=i||rk}var o_=a_.prototype=new ak;o_.constructor=a_;nk(o_,jd.prototype);o_.isPureReactComponent=!0;var Vw=Array.isArray,ok=Object.prototype.hasOwnProperty,c_={current:null},ck={key:!0,ref:!0,__self:!0,__source:!0};function dk(e,t,i){var r,n={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)ok.call(t,r)&&!ck.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(o===1)n.children=i;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:sp,type:e,key:s,ref:a,props:n,_owner:c_.current}}function BA(e,t){return{$$typeof:sp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function d_(e){return typeof e=="object"&&e!==null&&e.$$typeof===sp}function zA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Fw=/\/+/g;function $f(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zA(""+e.key):t.toString(36)}function kh(e,t,i,r,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case sp:case IA:a=!0}}if(a)return a=e,n=n(a),e=r===""?"."+$f(a,0):r,Vw(n)?(i="",e!=null&&(i=e.replace(Fw,"$&/")+"/"),kh(n,t,i,"",function(d){return d})):n!=null&&(d_(n)&&(n=BA(n,i+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(Fw,"$&/")+"/")+e)),t.push(n)),1;if(a=0,r=r===""?".":r+":",Vw(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+$f(s,o);a+=kh(s,t,i,c,n)}else if(c=FA(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+$f(s,o++),a+=kh(s,t,i,c,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Op(e,t,i){if(e==null)return e;var r=[],n=0;return kh(e,r,"","",function(s){return t.call(i,s,n++)}),r}function HA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gi={current:null},Ch={transition:null},GA={ReactCurrentDispatcher:Gi,ReactCurrentBatchConfig:Ch,ReactCurrentOwner:c_};Me.Children={map:Op,forEach:function(e,t,i){Op(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Op(e,function(){t++}),t},toArray:function(e){return Op(e,function(t){return t})||[]},only:function(e){if(!d_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Me.Component=jd;Me.Fragment=OA;Me.Profiler=LA;Me.PureComponent=a_;Me.StrictMode=MA;Me.Suspense=jA;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GA;Me.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=nk({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=c_.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)ok.call(t,c)&&!ck.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=i;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:sp,type:e.type,key:n,ref:s,props:r,_owner:a}};Me.createContext=function(e){return e={$$typeof:NA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DA,_context:e},e.Consumer=e};Me.createElement=dk;Me.createFactory=function(e){var t=dk.bind(null,e);return t.type=e,t};Me.createRef=function(){return{current:null}};Me.forwardRef=function(e){return{$$typeof:UA,render:e}};Me.isValidElement=d_;Me.lazy=function(e){return{$$typeof:VA,_payload:{_status:-1,_result:e},_init:HA}};Me.memo=function(e,t){return{$$typeof:$A,type:e,compare:t===void 0?null:t}};Me.startTransition=function(e){var t=Ch.transition;Ch.transition={};try{e()}finally{Ch.transition=t}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(e,t){return Gi.current.useCallback(e,t)};Me.useContext=function(e){return Gi.current.useContext(e)};Me.useDebugValue=function(){};Me.useDeferredValue=function(e){return Gi.current.useDeferredValue(e)};Me.useEffect=function(e,t){return Gi.current.useEffect(e,t)};Me.useId=function(){return Gi.current.useId()};Me.useImperativeHandle=function(e,t,i){return Gi.current.useImperativeHandle(e,t,i)};Me.useInsertionEffect=function(e,t){return Gi.current.useInsertionEffect(e,t)};Me.useLayoutEffect=function(e,t){return Gi.current.useLayoutEffect(e,t)};Me.useMemo=function(e,t){return Gi.current.useMemo(e,t)};Me.useReducer=function(e,t,i){return Gi.current.useReducer(e,t,i)};Me.useRef=function(e){return Gi.current.useRef(e)};Me.useState=function(e){return Gi.current.useState(e)};Me.useSyncExternalStore=function(e,t,i){return Gi.current.useSyncExternalStore(e,t,i)};Me.useTransition=function(){return Gi.current.useTransition()};Me.version="18.2.0";(function(e){e.exports=Me})(ai);const l_=tk(ai.exports);var lk={exports:{}},uk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,W){var X=F.length;F.push(W);e:for(;0<X;){var Le=X-1>>>1,vt=F[Le];if(0<n(vt,W))F[Le]=W,F[X]=vt,X=Le;else break e}}function i(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var W=F[0],X=F.pop();if(X!==W){F[0]=X;e:for(var Le=0,vt=F.length,ti=vt>>>1;Le<ti;){var bt=2*(Le+1)-1,Tn=F[bt],Ni=bt+1,Wr=F[Ni];if(0>n(Tn,X))Ni<vt&&0>n(Wr,Tn)?(F[Le]=Wr,F[Ni]=X,Le=Ni):(F[Le]=Tn,F[bt]=X,Le=bt);else if(Ni<vt&&0>n(Wr,X))F[Le]=Wr,F[Ni]=X,Le=Ni;else break e}}return W}function n(F,W){var X=F.sortIndex-W.sortIndex;return X!==0?X:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],d=[],l=1,u=null,g=3,m=!1,f=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var W=i(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=F)r(d),W.sortIndex=W.expirationTime,t(c,W);else break;W=i(d)}}function P(F){if(w=!1,T(F),!f)if(i(c)!==null)f=!0,dr(L);else{var W=i(d);W!==null&&ts(P,W.startTime-F)}}function L(F,W){f=!1,w&&(w=!1,y(H),H=-1),m=!0;var X=g;try{for(T(W),u=i(c);u!==null&&(!(u.expirationTime>W)||F&&!ge());){var Le=u.callback;if(typeof Le=="function"){u.callback=null,g=u.priorityLevel;var vt=Le(u.expirationTime<=W);W=e.unstable_now(),typeof vt=="function"?u.callback=vt:u===i(c)&&r(c),T(W)}else r(c);u=i(c)}if(u!==null)var ti=!0;else{var bt=i(d);bt!==null&&ts(P,bt.startTime-W),ti=!1}return ti}finally{u=null,g=X,m=!1}}var O=!1,B=null,H=-1,ie=5,K=-1;function ge(){return!(e.unstable_now()-K<ie)}function He(){if(B!==null){var F=e.unstable_now();K=F;var W=!0;try{W=B(!0,F)}finally{W?Xt():(O=!1,B=null)}}else O=!1}var Xt;if(typeof _=="function")Xt=function(){_(He)};else if(typeof MessageChannel<"u"){var ei=new MessageChannel,es=ei.port2;ei.port1.onmessage=He,Xt=function(){es.postMessage(null)}}else Xt=function(){S(He,0)};function dr(F){B=F,O||(O=!0,Xt())}function ts(F,W){H=S(function(){F(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){f||m||(f=!0,dr(L))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var X=g;g=W;try{return F()}finally{g=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=g;g=F;try{return W()}finally{g=X}},e.unstable_scheduleCallback=function(F,W,X){var Le=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Le+X:Le):X=Le,F){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=X+vt,F={id:l++,callback:W,priorityLevel:F,startTime:X,expirationTime:vt,sortIndex:-1},X>Le?(F.sortIndex=X,t(d,F),i(c)===null&&F===i(d)&&(w?(y(H),H=-1):w=!0,ts(P,X-Le))):(F.sortIndex=vt,t(c,F),f||m||(f=!0,dr(L))),F},e.unstable_shouldYield=ge,e.unstable_wrapCallback=function(F){var W=g;return function(){var X=g;g=W;try{return F.apply(this,arguments)}finally{g=X}}}})(uk);(function(e){e.exports=uk})(lk);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=ai.exports,Sr=lk.exports;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hk=new Set,ku={};function Yo(e,t){Td(e,t),Td(e+"Capture",t)}function Td(e,t){for(ku[e]=t,e=0;e<t.length;e++)hk.add(t[e])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$v=Object.prototype.hasOwnProperty,WA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bw={},zw={};function qA(e){return $v.call(zw,e)?!0:$v.call(Bw,e)?!1:WA.test(e)?zw[e]=!0:(Bw[e]=!0,!1)}function JA(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KA(e,t,i,r){if(t===null||typeof t>"u"||JA(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wi(e,t,i,r,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ei[e]=new Wi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ei[t]=new Wi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ei[e]=new Wi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ei[e]=new Wi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ei[e]=new Wi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ei[e]=new Wi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ei[e]=new Wi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ei[e]=new Wi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ei[e]=new Wi(e,5,!1,e.toLowerCase(),null,!1,!1)});var u_=/[\-:]([a-z])/g;function p_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(u_,p_);Ei[t]=new Wi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(u_,p_);Ei[t]=new Wi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(u_,p_);Ei[t]=new Wi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ei[e]=new Wi(e,1,!1,e.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new Wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ei[e]=new Wi(e,1,!1,e.toLowerCase(),null,!0,!0)});function h_(e,t,i,r){var n=Ei.hasOwnProperty(t)?Ei[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KA(t,i,n,r)&&(i=null),r||n===null?qA(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var Os=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mp=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Wc=Symbol.for("react.fragment"),g_=Symbol.for("react.strict_mode"),Vv=Symbol.for("react.profiler"),gk=Symbol.for("react.provider"),mk=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),Fv=Symbol.for("react.suspense"),Bv=Symbol.for("react.suspense_list"),f_=Symbol.for("react.memo"),na=Symbol.for("react.lazy"),fk=Symbol.for("react.offscreen"),Hw=Symbol.iterator;function sl(e){return e===null||typeof e!="object"?null:(e=Hw&&e[Hw]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Vf;function $l(e){if(Vf===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Vf=t&&t[1]||""}return`
`+Vf+e}var Ff=!1;function Bf(e,t){if(!e||Ff)return"";Ff=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var c=`
`+n[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{Ff=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?$l(e):""}function ZA(e){switch(e.tag){case 5:return $l(e.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return e=Bf(e.type,!1),e;case 11:return e=Bf(e.type.render,!1),e;case 1:return e=Bf(e.type,!0),e;default:return""}}function zv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wc:return"Fragment";case Gc:return"Portal";case Vv:return"Profiler";case g_:return"StrictMode";case Fv:return"Suspense";case Bv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mk:return(e.displayName||"Context")+".Consumer";case gk:return(e._context.displayName||"Context")+".Provider";case m_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case f_:return t=e.displayName||null,t!==null?t:zv(e.type)||"Memo";case na:t=e._payload,e=e._init;try{return zv(e(t))}catch{}}return null}function QA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zv(t);case 8:return t===g_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Aa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YA(e){var t=vk(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lp(e){e._valueTracker||(e._valueTracker=YA(e))}function yk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=vk(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function mg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hv(e,t){var i=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function Gw(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=Aa(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _k(e,t){t=t.checked,t!=null&&h_(e,"checked",t,!1)}function Gv(e,t){_k(e,t);var i=Aa(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wv(e,t.type,i):t.hasOwnProperty("defaultValue")&&Wv(e,t.type,Aa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ww(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Wv(e,t,i){(t!=="number"||mg(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Vl=Array.isArray;function ad(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Aa(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function qv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(J(92));if(Vl(i)){if(1<i.length)throw Error(J(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Aa(i)}}function bk(e,t){var i=Aa(t.value),r=Aa(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function Jw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dp,Sk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dp=Dp||document.createElement("div"),Dp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cu(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XA=["Webkit","ms","Moz","O"];Object.keys(nu).forEach(function(e){XA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nu[t]=nu[e]})});function Ek(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||nu.hasOwnProperty(e)&&nu[e]?(""+t).trim():t+"px"}function Tk(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=Ek(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var eI=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kv(e,t){if(t){if(eI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Zv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=null;function v_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yv=null,od=null,cd=null;function Kw(e){if(e=cp(e)){if(typeof Yv!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Om(t),Yv(e.stateNode,e.type,t))}}function kk(e){od?cd?cd.push(e):cd=[e]:od=e}function Ck(){if(od){var e=od,t=cd;if(cd=od=null,Kw(e),t)for(e=0;e<t.length;e++)Kw(t[e])}}function Pk(e,t){return e(t)}function Rk(){}var zf=!1;function xk(e,t,i){if(zf)return e(t,i);zf=!0;try{return Pk(e,t,i)}finally{zf=!1,(od!==null||cd!==null)&&(Rk(),Ck())}}function Pu(e,t){var i=e.stateNode;if(i===null)return null;var r=Om(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(J(231,t,typeof i));return i}var Xv=!1;if(Ts)try{var al={};Object.defineProperty(al,"passive",{get:function(){Xv=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Xv=!1}function tI(e,t,i,r,n,s,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(i,d)}catch(l){this.onError(l)}}var su=!1,fg=null,vg=!1,e1=null,iI={onError:function(e){su=!0,fg=e}};function rI(e,t,i,r,n,s,a,o,c){su=!1,fg=null,tI.apply(iI,arguments)}function nI(e,t,i,r,n,s,a,o,c){if(rI.apply(this,arguments),su){if(su){var d=fg;su=!1,fg=null}else throw Error(J(198));vg||(vg=!0,e1=d)}}function Xo(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Ak(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zw(e){if(Xo(e)!==e)throw Error(J(188))}function sI(e){var t=e.alternate;if(!t){if(t=Xo(e),t===null)throw Error(J(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return Zw(n),e;if(s===r)return Zw(n),t;s=s.sibling}throw Error(J(188))}if(i.return!==r.return)i=n,r=s;else{for(var a=!1,o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a)throw Error(J(189))}}if(i.alternate!==r)throw Error(J(190))}if(i.tag!==3)throw Error(J(188));return i.stateNode.current===i?e:t}function Ik(e){return e=sI(e),e!==null?Ok(e):null}function Ok(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ok(e);if(t!==null)return t;e=e.sibling}return null}var Mk=Sr.unstable_scheduleCallback,Qw=Sr.unstable_cancelCallback,aI=Sr.unstable_shouldYield,oI=Sr.unstable_requestPaint,jt=Sr.unstable_now,cI=Sr.unstable_getCurrentPriorityLevel,y_=Sr.unstable_ImmediatePriority,Lk=Sr.unstable_UserBlockingPriority,yg=Sr.unstable_NormalPriority,dI=Sr.unstable_LowPriority,Dk=Sr.unstable_IdlePriority,Rm=null,Bn=null;function lI(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Rm,e,void 0,(e.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:hI,uI=Math.log,pI=Math.LN2;function hI(e){return e>>>=0,e===0?32:31-(uI(e)/pI|0)|0}var Np=64,Up=4194304;function Fl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _g(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,a=i&268435455;if(a!==0){var o=a&~n;o!==0?r=Fl(o):(s&=a,s!==0&&(r=Fl(s)))}else a=i&~n,a!==0?r=Fl(a):s!==0&&(r=Fl(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&n)===0&&(n=r&-r,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-gn(t),n=1<<i,r|=e[i],t&=~n;return r}function gI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mI(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-gn(s),o=1<<a,c=n[a];c===-1?((o&i)===0||(o&r)!==0)&&(n[a]=gI(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function t1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nk(){var e=Np;return Np<<=1,(Np&4194240)===0&&(Np=64),e}function Hf(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ap(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gn(t),e[t]=i}function fI(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-gn(i),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~s}}function __(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-gn(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Ze=0;function Uk(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var jk,b_,$k,Vk,Fk,i1=!1,jp=[],_a=null,ba=null,wa=null,Ru=new Map,xu=new Map,ca=[],vI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yw(e,t){switch(e){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Ru.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(t.pointerId)}}function ol(e,t,i,r,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},t!==null&&(t=cp(t),t!==null&&b_(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function yI(e,t,i,r,n){switch(t){case"focusin":return _a=ol(_a,e,t,i,r,n),!0;case"dragenter":return ba=ol(ba,e,t,i,r,n),!0;case"mouseover":return wa=ol(wa,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return Ru.set(s,ol(Ru.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,xu.set(s,ol(xu.get(s)||null,e,t,i,r,n)),!0}return!1}function Bk(e){var t=Po(e.target);if(t!==null){var i=Xo(t);if(i!==null){if(t=i.tag,t===13){if(t=Ak(i),t!==null){e.blockedOn=t,Fk(e.priority,function(){$k(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ph(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=r1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);Qv=r,i.target.dispatchEvent(r),Qv=null}else return t=cp(i),t!==null&&b_(t),e.blockedOn=i,!1;t.shift()}return!0}function Xw(e,t,i){Ph(e)&&i.delete(t)}function _I(){i1=!1,_a!==null&&Ph(_a)&&(_a=null),ba!==null&&Ph(ba)&&(ba=null),wa!==null&&Ph(wa)&&(wa=null),Ru.forEach(Xw),xu.forEach(Xw)}function cl(e,t){e.blockedOn===t&&(e.blockedOn=null,i1||(i1=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,_I)))}function Au(e){function t(n){return cl(n,e)}if(0<jp.length){cl(jp[0],e);for(var i=1;i<jp.length;i++){var r=jp[i];r.blockedOn===e&&(r.blockedOn=null)}}for(_a!==null&&cl(_a,e),ba!==null&&cl(ba,e),wa!==null&&cl(wa,e),Ru.forEach(t),xu.forEach(t),i=0;i<ca.length;i++)r=ca[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<ca.length&&(i=ca[0],i.blockedOn===null);)Bk(i),i.blockedOn===null&&ca.shift()}var dd=Os.ReactCurrentBatchConfig,bg=!0;function bI(e,t,i,r){var n=Ze,s=dd.transition;dd.transition=null;try{Ze=1,w_(e,t,i,r)}finally{Ze=n,dd.transition=s}}function wI(e,t,i,r){var n=Ze,s=dd.transition;dd.transition=null;try{Ze=4,w_(e,t,i,r)}finally{Ze=n,dd.transition=s}}function w_(e,t,i,r){if(bg){var n=r1(e,t,i,r);if(n===null)e0(e,t,r,wg,i),Yw(e,r);else if(yI(n,e,t,i,r))r.stopPropagation();else if(Yw(e,r),t&4&&-1<vI.indexOf(e)){for(;n!==null;){var s=cp(n);if(s!==null&&jk(s),s=r1(e,t,i,r),s===null&&e0(e,t,r,wg,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else e0(e,t,r,null,i)}}var wg=null;function r1(e,t,i,r){if(wg=null,e=v_(r),e=Po(e),e!==null)if(t=Xo(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Ak(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wg=e,null}function zk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cI()){case y_:return 1;case Lk:return 4;case yg:case dI:return 16;case Dk:return 536870912;default:return 16}default:return 16}}var ma=null,S_=null,Rh=null;function Hk(){if(Rh)return Rh;var e,t=S_,i=t.length,r,n="value"in ma?ma.value:ma.textContent,s=n.length;for(e=0;e<i&&t[e]===n[e];e++);var a=i-e;for(r=1;r<=a&&t[i-r]===n[s-r];r++);return Rh=n.slice(e,1<r?1-r:void 0)}function xh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $p(){return!0}function e2(){return!1}function kr(e){function t(i,r,n,s,a){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$p:e2,this.isPropagationStopped=e2,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=$p)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=$p)},persist:function(){},isPersistent:$p}),t}var $d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E_=kr($d),op=Ct({},$d,{view:0,detail:0}),SI=kr(op),Gf,Wf,dl,xm=Ct({},op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dl&&(dl&&e.type==="mousemove"?(Gf=e.screenX-dl.screenX,Wf=e.screenY-dl.screenY):Wf=Gf=0,dl=e),Gf)},movementY:function(e){return"movementY"in e?e.movementY:Wf}}),t2=kr(xm),EI=Ct({},xm,{dataTransfer:0}),TI=kr(EI),kI=Ct({},op,{relatedTarget:0}),qf=kr(kI),CI=Ct({},$d,{animationName:0,elapsedTime:0,pseudoElement:0}),PI=kr(CI),RI=Ct({},$d,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xI=kr(RI),AI=Ct({},$d,{data:0}),i2=kr(AI),II={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=MI[e])?!!t[e]:!1}function T_(){return LI}var DI=Ct({},op,{key:function(e){if(e.key){var t=II[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T_,charCode:function(e){return e.type==="keypress"?xh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NI=kr(DI),UI=Ct({},xm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r2=kr(UI),jI=Ct({},op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T_}),$I=kr(jI),VI=Ct({},$d,{propertyName:0,elapsedTime:0,pseudoElement:0}),FI=kr(VI),BI=Ct({},xm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zI=kr(BI),HI=[9,13,27,32],k_=Ts&&"CompositionEvent"in window,au=null;Ts&&"documentMode"in document&&(au=document.documentMode);var GI=Ts&&"TextEvent"in window&&!au,Gk=Ts&&(!k_||au&&8<au&&11>=au),n2=String.fromCharCode(32),s2=!1;function Wk(e,t){switch(e){case"keyup":return HI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qc=!1;function WI(e,t){switch(e){case"compositionend":return qk(t);case"keypress":return t.which!==32?null:(s2=!0,n2);case"textInput":return e=t.data,e===n2&&s2?null:e;default:return null}}function qI(e,t){if(qc)return e==="compositionend"||!k_&&Wk(e,t)?(e=Hk(),Rh=S_=ma=null,qc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gk&&t.locale!=="ko"?null:t.data;default:return null}}var JI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!JI[e.type]:t==="textarea"}function Jk(e,t,i,r){kk(r),t=Sg(t,"onChange"),0<t.length&&(i=new E_("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var ou=null,Iu=null;function KI(e){sC(e,0)}function Am(e){var t=Zc(e);if(yk(t))return e}function ZI(e,t){if(e==="change")return t}var Kk=!1;if(Ts){var Jf;if(Ts){var Kf="oninput"in document;if(!Kf){var o2=document.createElement("div");o2.setAttribute("oninput","return;"),Kf=typeof o2.oninput=="function"}Jf=Kf}else Jf=!1;Kk=Jf&&(!document.documentMode||9<document.documentMode)}function c2(){ou&&(ou.detachEvent("onpropertychange",Zk),Iu=ou=null)}function Zk(e){if(e.propertyName==="value"&&Am(Iu)){var t=[];Jk(t,Iu,e,v_(e)),xk(KI,t)}}function QI(e,t,i){e==="focusin"?(c2(),ou=t,Iu=i,ou.attachEvent("onpropertychange",Zk)):e==="focusout"&&c2()}function YI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Am(Iu)}function XI(e,t){if(e==="click")return Am(t)}function e8(e,t){if(e==="input"||e==="change")return Am(t)}function t8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:t8;function Ou(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!$v.call(t,n)||!yn(e[n],t[n]))return!1}return!0}function d2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function l2(e,t){var i=d2(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=d2(i)}}function Qk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yk(){for(var e=window,t=mg();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=mg(e.document)}return t}function C_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function i8(e){var t=Yk(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&Qk(i.ownerDocument.documentElement,i)){if(r!==null&&C_(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=l2(i,s);var a=l2(i,r);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var r8=Ts&&"documentMode"in document&&11>=document.documentMode,Jc=null,n1=null,cu=null,s1=!1;function u2(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;s1||Jc==null||Jc!==mg(r)||(r=Jc,"selectionStart"in r&&C_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cu&&Ou(cu,r)||(cu=r,r=Sg(n1,"onSelect"),0<r.length&&(t=new E_("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Jc)))}function Vp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Kc={animationend:Vp("Animation","AnimationEnd"),animationiteration:Vp("Animation","AnimationIteration"),animationstart:Vp("Animation","AnimationStart"),transitionend:Vp("Transition","TransitionEnd")},Zf={},Xk={};Ts&&(Xk=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function Im(e){if(Zf[e])return Zf[e];if(!Kc[e])return e;var t=Kc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Xk)return Zf[e]=t[i];return e}var eC=Im("animationend"),tC=Im("animationiteration"),iC=Im("animationstart"),rC=Im("transitionend"),nC=new Map,p2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Na(e,t){nC.set(e,t),Yo(t,[e])}for(var Qf=0;Qf<p2.length;Qf++){var Yf=p2[Qf],n8=Yf.toLowerCase(),s8=Yf[0].toUpperCase()+Yf.slice(1);Na(n8,"on"+s8)}Na(eC,"onAnimationEnd");Na(tC,"onAnimationIteration");Na(iC,"onAnimationStart");Na("dblclick","onDoubleClick");Na("focusin","onFocus");Na("focusout","onBlur");Na(rC,"onTransitionEnd");Td("onMouseEnter",["mouseout","mouseover"]);Td("onMouseLeave",["mouseout","mouseover"]);Td("onPointerEnter",["pointerout","pointerover"]);Td("onPointerLeave",["pointerout","pointerover"]);Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function h2(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,nI(r,t,void 0,e),e.currentTarget=null}function sC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==s&&n.isPropagationStopped())break e;h2(n,o,d),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==s&&n.isPropagationStopped())break e;h2(n,o,d),s=c}}}if(vg)throw e=e1,vg=!1,e1=null,e}function dt(e,t){var i=t[l1];i===void 0&&(i=t[l1]=new Set);var r=e+"__bubble";i.has(r)||(aC(t,e,2,!1),i.add(r))}function Xf(e,t,i){var r=0;t&&(r|=4),aC(i,e,r,t)}var Fp="_reactListening"+Math.random().toString(36).slice(2);function Mu(e){if(!e[Fp]){e[Fp]=!0,hk.forEach(function(i){i!=="selectionchange"&&(a8.has(i)||Xf(i,!1,e),Xf(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fp]||(t[Fp]=!0,Xf("selectionchange",!1,t))}}function aC(e,t,i,r){switch(zk(t)){case 1:var n=bI;break;case 4:n=wI;break;default:n=w_}i=n.bind(null,t,i,e),n=void 0,!Xv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function e0(e,t,i,r,n){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;o!==null;){if(a=Po(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}xk(function(){var d=s,l=v_(i),u=[];e:{var g=nC.get(e);if(g!==void 0){var m=E_,f=e;switch(e){case"keypress":if(xh(i)===0)break e;case"keydown":case"keyup":m=NI;break;case"focusin":f="focus",m=qf;break;case"focusout":f="blur",m=qf;break;case"beforeblur":case"afterblur":m=qf;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=t2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=TI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$I;break;case eC:case tC:case iC:m=PI;break;case rC:m=FI;break;case"scroll":m=SI;break;case"wheel":m=zI;break;case"copy":case"cut":case"paste":m=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=r2}var w=(t&4)!==0,S=!w&&e==="scroll",y=w?g!==null?g+"Capture":null:g;w=[];for(var _=d,T;_!==null;){T=_;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,y!==null&&(P=Pu(_,y),P!=null&&w.push(Lu(_,P,T)))),S)break;_=_.return}0<w.length&&(g=new m(g,f,null,i,l),u.push({event:g,listeners:w}))}}if((t&7)===0){e:{if(g=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",g&&i!==Qv&&(f=i.relatedTarget||i.fromElement)&&(Po(f)||f[ks]))break e;if((m||g)&&(g=l.window===l?l:(g=l.ownerDocument)?g.defaultView||g.parentWindow:window,m?(f=i.relatedTarget||i.toElement,m=d,f=f?Po(f):null,f!==null&&(S=Xo(f),f!==S||f.tag!==5&&f.tag!==6)&&(f=null)):(m=null,f=d),m!==f)){if(w=t2,P="onMouseLeave",y="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(w=r2,P="onPointerLeave",y="onPointerEnter",_="pointer"),S=m==null?g:Zc(m),T=f==null?g:Zc(f),g=new w(P,_+"leave",m,i,l),g.target=S,g.relatedTarget=T,P=null,Po(l)===d&&(w=new w(y,_+"enter",f,i,l),w.target=T,w.relatedTarget=S,P=w),S=P,m&&f)t:{for(w=m,y=f,_=0,T=w;T;T=uc(T))_++;for(T=0,P=y;P;P=uc(P))T++;for(;0<_-T;)w=uc(w),_--;for(;0<T-_;)y=uc(y),T--;for(;_--;){if(w===y||y!==null&&w===y.alternate)break t;w=uc(w),y=uc(y)}w=null}else w=null;m!==null&&g2(u,g,m,w,!1),f!==null&&S!==null&&g2(u,S,f,w,!0)}}e:{if(g=d?Zc(d):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var L=ZI;else if(a2(g))if(Kk)L=e8;else{L=YI;var O=QI}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=XI);if(L&&(L=L(e,d))){Jk(u,L,i,l);break e}O&&O(e,g,d),e==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&Wv(g,"number",g.value)}switch(O=d?Zc(d):window,e){case"focusin":(a2(O)||O.contentEditable==="true")&&(Jc=O,n1=d,cu=null);break;case"focusout":cu=n1=Jc=null;break;case"mousedown":s1=!0;break;case"contextmenu":case"mouseup":case"dragend":s1=!1,u2(u,i,l);break;case"selectionchange":if(r8)break;case"keydown":case"keyup":u2(u,i,l)}var B;if(k_)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else qc?Wk(e,i)&&(H="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(H="onCompositionStart");H&&(Gk&&i.locale!=="ko"&&(qc||H!=="onCompositionStart"?H==="onCompositionEnd"&&qc&&(B=Hk()):(ma=l,S_="value"in ma?ma.value:ma.textContent,qc=!0)),O=Sg(d,H),0<O.length&&(H=new i2(H,e,null,i,l),u.push({event:H,listeners:O}),B?H.data=B:(B=qk(i),B!==null&&(H.data=B)))),(B=GI?WI(e,i):qI(e,i))&&(d=Sg(d,"onBeforeInput"),0<d.length&&(l=new i2("onBeforeInput","beforeinput",null,i,l),u.push({event:l,listeners:d}),l.data=B))}sC(u,t)})}function Lu(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Sg(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Pu(e,i),s!=null&&r.unshift(Lu(e,s,n)),s=Pu(e,t),s!=null&&r.push(Lu(e,s,n))),e=e.return}return r}function uc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g2(e,t,i,r,n){for(var s=t._reactName,a=[];i!==null&&i!==r;){var o=i,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,n?(c=Pu(i,s),c!=null&&a.unshift(Lu(i,c,o))):n||(c=Pu(i,s),c!=null&&a.push(Lu(i,c,o)))),i=i.return}a.length!==0&&e.push({event:t,listeners:a})}var o8=/\r\n?/g,c8=/\u0000|\uFFFD/g;function m2(e){return(typeof e=="string"?e:""+e).replace(o8,`
`).replace(c8,"")}function Bp(e,t,i){if(t=m2(t),m2(e)!==t&&i)throw Error(J(425))}function Eg(){}var a1=null,o1=null;function c1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var d1=typeof setTimeout=="function"?setTimeout:void 0,d8=typeof clearTimeout=="function"?clearTimeout:void 0,f2=typeof Promise=="function"?Promise:void 0,l8=typeof queueMicrotask=="function"?queueMicrotask:typeof f2<"u"?function(e){return f2.resolve(null).then(e).catch(u8)}:d1;function u8(e){setTimeout(function(){throw e})}function t0(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),Au(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Au(t)}function Sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function v2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Vd=Math.random().toString(36).slice(2),$n="__reactFiber$"+Vd,Du="__reactProps$"+Vd,ks="__reactContainer$"+Vd,l1="__reactEvents$"+Vd,p8="__reactListeners$"+Vd,h8="__reactHandles$"+Vd;function Po(e){var t=e[$n];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ks]||i[$n]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=v2(e);e!==null;){if(i=e[$n])return i;e=v2(e)}return t}e=i,i=e.parentNode}return null}function cp(e){return e=e[$n]||e[ks],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Om(e){return e[Du]||null}var u1=[],Qc=-1;function Ua(e){return{current:e}}function ft(e){0>Qc||(e.current=u1[Qc],u1[Qc]=null,Qc--)}function st(e,t){Qc++,u1[Qc]=e.current,e.current=t}var Ia={},Di=Ua(Ia),ir=Ua(!1),Vo=Ia;function kd(e,t){var i=e.type.contextTypes;if(!i)return Ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function rr(e){return e=e.childContextTypes,e!=null}function Tg(){ft(ir),ft(Di)}function y2(e,t,i){if(Di.current!==Ia)throw Error(J(168));st(Di,t),st(ir,i)}function oC(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(J(108,QA(e)||"Unknown",n));return Ct({},i,r)}function kg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Vo=Di.current,st(Di,e),st(ir,ir.current),!0}function _2(e,t,i){var r=e.stateNode;if(!r)throw Error(J(169));i?(e=oC(e,t,Vo),r.__reactInternalMemoizedMergedChildContext=e,ft(ir),ft(Di),st(Di,e)):ft(ir),st(ir,i)}var cs=null,Mm=!1,i0=!1;function cC(e){cs===null?cs=[e]:cs.push(e)}function g8(e){Mm=!0,cC(e)}function ja(){if(!i0&&cs!==null){i0=!0;var e=0,t=Ze;try{var i=cs;for(Ze=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}cs=null,Mm=!1}catch(n){throw cs!==null&&(cs=cs.slice(e+1)),Mk(y_,ja),n}finally{Ze=t,i0=!1}}return null}var Yc=[],Xc=0,Cg=null,Pg=0,xr=[],Ar=0,Fo=null,ys=1,_s="";function so(e,t){Yc[Xc++]=Pg,Yc[Xc++]=Cg,Cg=e,Pg=t}function dC(e,t,i){xr[Ar++]=ys,xr[Ar++]=_s,xr[Ar++]=Fo,Fo=e;var r=ys;e=_s;var n=32-gn(r)-1;r&=~(1<<n),i+=1;var s=32-gn(t)+n;if(30<s){var a=n-n%5;s=(r&(1<<a)-1).toString(32),r>>=a,n-=a,ys=1<<32-gn(t)+n|i<<n|r,_s=s+e}else ys=1<<s|i<<n|r,_s=e}function P_(e){e.return!==null&&(so(e,1),dC(e,1,0))}function R_(e){for(;e===Cg;)Cg=Yc[--Xc],Yc[Xc]=null,Pg=Yc[--Xc],Yc[Xc]=null;for(;e===Fo;)Fo=xr[--Ar],xr[Ar]=null,_s=xr[--Ar],xr[Ar]=null,ys=xr[--Ar],xr[Ar]=null}var wr=null,br=null,_t=!1,an=null;function lC(e,t){var i=Lr(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function b2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wr=e,br=Sa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wr=e,br=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Fo!==null?{id:ys,overflow:_s}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Lr(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,wr=e,br=null,!0):!1;default:return!1}}function p1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function h1(e){if(_t){var t=br;if(t){var i=t;if(!b2(e,t)){if(p1(e))throw Error(J(418));t=Sa(i.nextSibling);var r=wr;t&&b2(e,t)?lC(r,i):(e.flags=e.flags&-4097|2,_t=!1,wr=e)}}else{if(p1(e))throw Error(J(418));e.flags=e.flags&-4097|2,_t=!1,wr=e}}}function w2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wr=e}function zp(e){if(e!==wr)return!1;if(!_t)return w2(e),_t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c1(e.type,e.memoizedProps)),t&&(t=br)){if(p1(e))throw uC(),Error(J(418));for(;t;)lC(e,t),t=Sa(t.nextSibling)}if(w2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){br=Sa(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}br=null}}else br=wr?Sa(e.stateNode.nextSibling):null;return!0}function uC(){for(var e=br;e;)e=Sa(e.nextSibling)}function Cd(){br=wr=null,_t=!1}function x_(e){an===null?an=[e]:an.push(e)}var m8=Os.ReactCurrentBatchConfig;function en(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Rg=Ua(null),xg=null,ed=null,A_=null;function I_(){A_=ed=xg=null}function O_(e){var t=Rg.current;ft(Rg),e._currentValue=t}function g1(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function ld(e,t){xg=e,A_=ed=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Xi=!0),e.firstContext=null)}function Vr(e){var t=e._currentValue;if(A_!==e)if(e={context:e,memoizedValue:t,next:null},ed===null){if(xg===null)throw Error(J(308));ed=e,xg.dependencies={lanes:0,firstContext:e}}else ed=ed.next=e;return t}var Ro=null;function M_(e){Ro===null?Ro=[e]:Ro.push(e)}function pC(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,M_(t)):(i.next=n.next,n.next=i),t.interleaved=i,Cs(e,r)}function Cs(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var sa=!1;function L_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Es(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ea(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ve&2)!==0){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Cs(e,i)}return n=r.interleaved,n===null?(t.next=t,M_(r)):(t.next=n.next,n.next=t),r.interleaved=t,Cs(e,i)}function Ah(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,__(e,i)}}function S2(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?n=s=t:s=s.next=t}else n=s=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Ag(e,t,i,r){var n=e.updateQueue;sa=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=d:o.next=d,l.lastBaseUpdate=c))}if(s!==null){var u=n.baseState;a=0,l=d=c=null,o=s;do{var g=o.lane,m=o.eventTime;if((r&g)===g){l!==null&&(l=l.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,w=o;switch(g=t,m=i,w.tag){case 1:if(f=w.payload,typeof f=="function"){u=f.call(m,u,g);break e}u=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=w.payload,g=typeof f=="function"?f.call(m,u,g):f,g==null)break e;u=Ct({},u,g);break e;case 2:sa=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=n.effects,g===null?n.effects=[o]:g.push(o))}else m={eventTime:m,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(d=l=m,c=u):l=l.next=m,a|=g;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;g=o,o=g.next,g.next=null,n.lastBaseUpdate=g,n.shared.pending=null}}while(1);if(l===null&&(c=u),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=l,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);zo|=a,e.lanes=a,e.memoizedState=u}}function E2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(J(191,n));n.call(r)}}}var gC=new pk.Component().refs;function m1(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:Ct({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Lm={isMounted:function(e){return(e=e._reactInternals)?Xo(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=zi(),n=ka(e),s=Es(r,n);s.payload=t,i!=null&&(s.callback=i),t=Ea(e,s,n),t!==null&&(mn(t,e,n,r),Ah(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=zi(),n=ka(e),s=Es(r,n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=Ea(e,s,n),t!==null&&(mn(t,e,n,r),Ah(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=zi(),r=ka(e),n=Es(i,r);n.tag=2,t!=null&&(n.callback=t),t=Ea(e,n,r),t!==null&&(mn(t,e,r,i),Ah(t,e,r))}};function T2(e,t,i,r,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ou(i,r)||!Ou(n,s):!0}function mC(e,t,i){var r=!1,n=Ia,s=t.contextType;return typeof s=="object"&&s!==null?s=Vr(s):(n=rr(t)?Vo:Di.current,r=t.contextTypes,s=(r=r!=null)?kd(e,n):Ia),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function k2(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Lm.enqueueReplaceState(t,t.state,null)}function f1(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=gC,L_(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Vr(s):(s=rr(t)?Vo:Di.current,n.context=kd(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(m1(e,t,s,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Lm.enqueueReplaceState(n,n.state,null),Ag(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function ll(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(J(309));var r=i.stateNode}if(!r)throw Error(J(147,e));var n=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===gC&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(J(284));if(!i._owner)throw Error(J(290,e))}return e}function Hp(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function C2(e){var t=e._init;return t(e._payload)}function fC(e){function t(y,_){if(e){var T=y.deletions;T===null?(y.deletions=[_],y.flags|=16):T.push(_)}}function i(y,_){if(!e)return null;for(;_!==null;)t(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function n(y,_){return y=Ca(y,_),y.index=0,y.sibling=null,y}function s(y,_,T){return y.index=T,e?(T=y.alternate,T!==null?(T=T.index,T<_?(y.flags|=2,_):T):(y.flags|=2,_)):(y.flags|=1048576,_)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,_,T,P){return _===null||_.tag!==6?(_=d0(T,y.mode,P),_.return=y,_):(_=n(_,T),_.return=y,_)}function c(y,_,T,P){var L=T.type;return L===Wc?l(y,_,T.props.children,P,T.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===na&&C2(L)===_.type)?(P=n(_,T.props),P.ref=ll(y,_,T),P.return=y,P):(P=Nh(T.type,T.key,T.props,null,y.mode,P),P.ref=ll(y,_,T),P.return=y,P)}function d(y,_,T,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=l0(T,y.mode,P),_.return=y,_):(_=n(_,T.children||[]),_.return=y,_)}function l(y,_,T,P,L){return _===null||_.tag!==7?(_=Do(T,y.mode,P,L),_.return=y,_):(_=n(_,T),_.return=y,_)}function u(y,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=d0(""+_,y.mode,T),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mp:return T=Nh(_.type,_.key,_.props,null,y.mode,T),T.ref=ll(y,null,_),T.return=y,T;case Gc:return _=l0(_,y.mode,T),_.return=y,_;case na:var P=_._init;return u(y,P(_._payload),T)}if(Vl(_)||sl(_))return _=Do(_,y.mode,T,null),_.return=y,_;Hp(y,_)}return null}function g(y,_,T,P){var L=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:o(y,_,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Mp:return T.key===L?c(y,_,T,P):null;case Gc:return T.key===L?d(y,_,T,P):null;case na:return L=T._init,g(y,_,L(T._payload),P)}if(Vl(T)||sl(T))return L!==null?null:l(y,_,T,P,null);Hp(y,T)}return null}function m(y,_,T,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return y=y.get(T)||null,o(_,y,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Mp:return y=y.get(P.key===null?T:P.key)||null,c(_,y,P,L);case Gc:return y=y.get(P.key===null?T:P.key)||null,d(_,y,P,L);case na:var O=P._init;return m(y,_,T,O(P._payload),L)}if(Vl(P)||sl(P))return y=y.get(T)||null,l(_,y,P,L,null);Hp(_,P)}return null}function f(y,_,T,P){for(var L=null,O=null,B=_,H=_=0,ie=null;B!==null&&H<T.length;H++){B.index>H?(ie=B,B=null):ie=B.sibling;var K=g(y,B,T[H],P);if(K===null){B===null&&(B=ie);break}e&&B&&K.alternate===null&&t(y,B),_=s(K,_,H),O===null?L=K:O.sibling=K,O=K,B=ie}if(H===T.length)return i(y,B),_t&&so(y,H),L;if(B===null){for(;H<T.length;H++)B=u(y,T[H],P),B!==null&&(_=s(B,_,H),O===null?L=B:O.sibling=B,O=B);return _t&&so(y,H),L}for(B=r(y,B);H<T.length;H++)ie=m(B,y,H,T[H],P),ie!==null&&(e&&ie.alternate!==null&&B.delete(ie.key===null?H:ie.key),_=s(ie,_,H),O===null?L=ie:O.sibling=ie,O=ie);return e&&B.forEach(function(ge){return t(y,ge)}),_t&&so(y,H),L}function w(y,_,T,P){var L=sl(T);if(typeof L!="function")throw Error(J(150));if(T=L.call(T),T==null)throw Error(J(151));for(var O=L=null,B=_,H=_=0,ie=null,K=T.next();B!==null&&!K.done;H++,K=T.next()){B.index>H?(ie=B,B=null):ie=B.sibling;var ge=g(y,B,K.value,P);if(ge===null){B===null&&(B=ie);break}e&&B&&ge.alternate===null&&t(y,B),_=s(ge,_,H),O===null?L=ge:O.sibling=ge,O=ge,B=ie}if(K.done)return i(y,B),_t&&so(y,H),L;if(B===null){for(;!K.done;H++,K=T.next())K=u(y,K.value,P),K!==null&&(_=s(K,_,H),O===null?L=K:O.sibling=K,O=K);return _t&&so(y,H),L}for(B=r(y,B);!K.done;H++,K=T.next())K=m(B,y,H,K.value,P),K!==null&&(e&&K.alternate!==null&&B.delete(K.key===null?H:K.key),_=s(K,_,H),O===null?L=K:O.sibling=K,O=K);return e&&B.forEach(function(He){return t(y,He)}),_t&&so(y,H),L}function S(y,_,T,P){if(typeof T=="object"&&T!==null&&T.type===Wc&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Mp:e:{for(var L=T.key,O=_;O!==null;){if(O.key===L){if(L=T.type,L===Wc){if(O.tag===7){i(y,O.sibling),_=n(O,T.props.children),_.return=y,y=_;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===na&&C2(L)===O.type){i(y,O.sibling),_=n(O,T.props),_.ref=ll(y,O,T),_.return=y,y=_;break e}i(y,O);break}else t(y,O);O=O.sibling}T.type===Wc?(_=Do(T.props.children,y.mode,P,T.key),_.return=y,y=_):(P=Nh(T.type,T.key,T.props,null,y.mode,P),P.ref=ll(y,_,T),P.return=y,y=P)}return a(y);case Gc:e:{for(O=T.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){i(y,_.sibling),_=n(_,T.children||[]),_.return=y,y=_;break e}else{i(y,_);break}else t(y,_);_=_.sibling}_=l0(T,y.mode,P),_.return=y,y=_}return a(y);case na:return O=T._init,S(y,_,O(T._payload),P)}if(Vl(T))return f(y,_,T,P);if(sl(T))return w(y,_,T,P);Hp(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(i(y,_.sibling),_=n(_,T),_.return=y,y=_):(i(y,_),_=d0(T,y.mode,P),_.return=y,y=_),a(y)):i(y,_)}return S}var Pd=fC(!0),vC=fC(!1),dp={},zn=Ua(dp),Nu=Ua(dp),Uu=Ua(dp);function xo(e){if(e===dp)throw Error(J(174));return e}function D_(e,t){switch(st(Uu,t),st(Nu,e),st(zn,dp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jv(t,e)}ft(zn),st(zn,t)}function Rd(){ft(zn),ft(Nu),ft(Uu)}function yC(e){xo(Uu.current);var t=xo(zn.current),i=Jv(t,e.type);t!==i&&(st(Nu,e),st(zn,i))}function N_(e){Nu.current===e&&(ft(zn),ft(Nu))}var Tt=Ua(0);function Ig(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var r0=[];function U_(){for(var e=0;e<r0.length;e++)r0[e]._workInProgressVersionPrimary=null;r0.length=0}var Ih=Os.ReactCurrentDispatcher,n0=Os.ReactCurrentBatchConfig,Bo=0,kt=null,si=null,pi=null,Og=!1,du=!1,ju=0,f8=0;function ki(){throw Error(J(321))}function j_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!yn(e[i],t[i]))return!1;return!0}function $_(e,t,i,r,n,s){if(Bo=s,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ih.current=e===null||e.memoizedState===null?b8:w8,e=i(r,n),du){s=0;do{if(du=!1,ju=0,25<=s)throw Error(J(301));s+=1,pi=si=null,t.updateQueue=null,Ih.current=S8,e=i(r,n)}while(du)}if(Ih.current=Mg,t=si!==null&&si.next!==null,Bo=0,pi=si=kt=null,Og=!1,t)throw Error(J(300));return e}function V_(){var e=ju!==0;return ju=0,e}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?kt.memoizedState=pi=e:pi=pi.next=e,pi}function Fr(){if(si===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=si.next;var t=pi===null?kt.memoizedState:pi.next;if(t!==null)pi=t,si=e;else{if(e===null)throw Error(J(310));si=e,e={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},pi===null?kt.memoizedState=pi=e:pi=pi.next=e}return pi}function $u(e,t){return typeof t=="function"?t(e):t}function s0(e){var t=Fr(),i=t.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=e;var r=si,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var o=a=null,c=null,d=s;do{var l=d.lane;if((Bo&l)===l)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:l,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,a=r):c=c.next=u,kt.lanes|=l,zo|=l}d=d.next}while(d!==null&&d!==s);c===null?a=r:c.next=o,yn(r,t.memoizedState)||(Xi=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do s=n.lane,kt.lanes|=s,zo|=s,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function a0(e){var t=Fr(),i=t.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,s=t.memoizedState;if(n!==null){i.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);yn(s,t.memoizedState)||(Xi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function _C(){}function bC(e,t){var i=kt,r=Fr(),n=t(),s=!yn(r.memoizedState,n);if(s&&(r.memoizedState=n,Xi=!0),r=r.queue,F_(EC.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||pi!==null&&pi.memoizedState.tag&1){if(i.flags|=2048,Vu(9,SC.bind(null,i,r,n,t),void 0,null),gi===null)throw Error(J(349));(Bo&30)!==0||wC(i,t,n)}return n}function wC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function SC(e,t,i,r){t.value=i,t.getSnapshot=r,TC(t)&&kC(e)}function EC(e,t,i){return i(function(){TC(t)&&kC(e)})}function TC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!yn(e,i)}catch{return!0}}function kC(e){var t=Cs(e,1);t!==null&&mn(t,e,1,-1)}function P2(e){var t=Ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:e},t.queue=e,e=e.dispatch=_8.bind(null,kt,e),[t.memoizedState,e]}function Vu(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function CC(){return Fr().memoizedState}function Oh(e,t,i,r){var n=Ln();kt.flags|=e,n.memoizedState=Vu(1|t,i,void 0,r===void 0?null:r)}function Dm(e,t,i,r){var n=Fr();r=r===void 0?null:r;var s=void 0;if(si!==null){var a=si.memoizedState;if(s=a.destroy,r!==null&&j_(r,a.deps)){n.memoizedState=Vu(t,i,s,r);return}}kt.flags|=e,n.memoizedState=Vu(1|t,i,s,r)}function R2(e,t){return Oh(8390656,8,e,t)}function F_(e,t){return Dm(2048,8,e,t)}function PC(e,t){return Dm(4,2,e,t)}function RC(e,t){return Dm(4,4,e,t)}function xC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AC(e,t,i){return i=i!=null?i.concat([e]):null,Dm(4,4,xC.bind(null,t,e),i)}function B_(){}function IC(e,t){var i=Fr();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&j_(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function OC(e,t){var i=Fr();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&j_(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function MC(e,t,i){return(Bo&21)===0?(e.baseState&&(e.baseState=!1,Xi=!0),e.memoizedState=i):(yn(i,t)||(i=Nk(),kt.lanes|=i,zo|=i,e.baseState=!0),t)}function v8(e,t){var i=Ze;Ze=i!==0&&4>i?i:4,e(!0);var r=n0.transition;n0.transition={};try{e(!1),t()}finally{Ze=i,n0.transition=r}}function LC(){return Fr().memoizedState}function y8(e,t,i){var r=ka(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},DC(e))NC(t,i);else if(i=pC(e,t,i,r),i!==null){var n=zi();mn(i,e,r,n),UC(i,t,r)}}function _8(e,t,i){var r=ka(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(DC(e))NC(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,i);if(n.hasEagerState=!0,n.eagerState=o,yn(o,a)){var c=t.interleaved;c===null?(n.next=n,M_(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}i=pC(e,t,n,r),i!==null&&(n=zi(),mn(i,e,r,n),UC(i,t,r))}}function DC(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function NC(e,t){du=Og=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function UC(e,t,i){if((i&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,__(e,i)}}var Mg={readContext:Vr,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},b8={readContext:Vr,useCallback:function(e,t){return Ln().memoizedState=[e,t===void 0?null:t],e},useContext:Vr,useEffect:R2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Oh(4194308,4,xC.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Oh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oh(4,2,e,t)},useMemo:function(e,t){var i=Ln();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=Ln();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=y8.bind(null,kt,e),[r.memoizedState,e]},useRef:function(e){var t=Ln();return e={current:e},t.memoizedState=e},useState:P2,useDebugValue:B_,useDeferredValue:function(e){return Ln().memoizedState=e},useTransition:function(){var e=P2(!1),t=e[0];return e=v8.bind(null,e[1]),Ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=kt,n=Ln();if(_t){if(i===void 0)throw Error(J(407));i=i()}else{if(i=t(),gi===null)throw Error(J(349));(Bo&30)!==0||wC(r,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,R2(EC.bind(null,r,s,e),[e]),r.flags|=2048,Vu(9,SC.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=Ln(),t=gi.identifierPrefix;if(_t){var i=_s,r=ys;i=(r&~(1<<32-gn(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=ju++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=f8++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},w8={readContext:Vr,useCallback:IC,useContext:Vr,useEffect:F_,useImperativeHandle:AC,useInsertionEffect:PC,useLayoutEffect:RC,useMemo:OC,useReducer:s0,useRef:CC,useState:function(){return s0($u)},useDebugValue:B_,useDeferredValue:function(e){var t=Fr();return MC(t,si.memoizedState,e)},useTransition:function(){var e=s0($u)[0],t=Fr().memoizedState;return[e,t]},useMutableSource:_C,useSyncExternalStore:bC,useId:LC,unstable_isNewReconciler:!1},S8={readContext:Vr,useCallback:IC,useContext:Vr,useEffect:F_,useImperativeHandle:AC,useInsertionEffect:PC,useLayoutEffect:RC,useMemo:OC,useReducer:a0,useRef:CC,useState:function(){return a0($u)},useDebugValue:B_,useDeferredValue:function(e){var t=Fr();return si===null?t.memoizedState=e:MC(t,si.memoizedState,e)},useTransition:function(){var e=a0($u)[0],t=Fr().memoizedState;return[e,t]},useMutableSource:_C,useSyncExternalStore:bC,useId:LC,unstable_isNewReconciler:!1};function xd(e,t){try{var i="",r=t;do i+=ZA(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function o0(e,t,i){return{value:e,source:null,stack:i!=null?i:null,digest:t!=null?t:null}}function v1(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var E8=typeof WeakMap=="function"?WeakMap:Map;function jC(e,t,i){i=Es(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){Dg||(Dg=!0,P1=r),v1(e,t)},i}function $C(e,t,i){i=Es(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){v1(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){v1(e,t),typeof r!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),i}function x2(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new E8;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=U8.bind(null,e,t,i),t.then(e,e))}function A2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I2(e,t,i,r,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Es(-1,1),t.tag=2,Ea(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var T8=Os.ReactCurrentOwner,Xi=!1;function Bi(e,t,i,r){t.child=e===null?vC(t,null,i,r):Pd(t,e.child,i,r)}function O2(e,t,i,r,n){i=i.render;var s=t.ref;return ld(t,n),r=$_(e,t,i,r,s,n),i=V_(),e!==null&&!Xi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ps(e,t,n)):(_t&&i&&P_(t),t.flags|=1,Bi(e,t,r,n),t.child)}function M2(e,t,i,r,n){if(e===null){var s=i.type;return typeof s=="function"&&!Z_(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,VC(e,t,s,r,n)):(e=Nh(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var a=s.memoizedProps;if(i=i.compare,i=i!==null?i:Ou,i(a,r)&&e.ref===t.ref)return Ps(e,t,n)}return t.flags|=1,e=Ca(s,r),e.ref=t.ref,e.return=t,t.child=e}function VC(e,t,i,r,n){if(e!==null){var s=e.memoizedProps;if(Ou(s,r)&&e.ref===t.ref)if(Xi=!1,t.pendingProps=r=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(Xi=!0);else return t.lanes=e.lanes,Ps(e,t,n)}return y1(e,t,i,r,n)}function FC(e,t,i){var r=t.pendingProps,n=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(id,fr),fr|=i;else{if((i&1073741824)===0)return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,st(id,fr),fr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,st(id,fr),fr|=r}else s!==null?(r=s.baseLanes|i,t.memoizedState=null):r=i,st(id,fr),fr|=r;return Bi(e,t,n,i),t.child}function BC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function y1(e,t,i,r,n){var s=rr(i)?Vo:Di.current;return s=kd(t,s),ld(t,n),i=$_(e,t,i,r,s,n),r=V_(),e!==null&&!Xi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ps(e,t,n)):(_t&&r&&P_(t),t.flags|=1,Bi(e,t,i,n),t.child)}function L2(e,t,i,r,n){if(rr(i)){var s=!0;kg(t)}else s=!1;if(ld(t,n),t.stateNode===null)Mh(e,t),mC(t,i,r),f1(t,i,r,n),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,d=i.contextType;typeof d=="object"&&d!==null?d=Vr(d):(d=rr(i)?Vo:Di.current,d=kd(t,d));var l=i.getDerivedStateFromProps,u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==d)&&k2(t,a,r,d),sa=!1;var g=t.memoizedState;a.state=g,Ag(t,r,a,n),c=t.memoizedState,o!==r||g!==c||ir.current||sa?(typeof l=="function"&&(m1(t,i,l,r),c=t.memoizedState),(o=sa||T2(t,i,o,r,g,c,d))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,hC(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:en(t.type,o),a.props=d,u=t.pendingProps,g=a.context,c=i.contextType,typeof c=="object"&&c!==null?c=Vr(c):(c=rr(i)?Vo:Di.current,c=kd(t,c));var m=i.getDerivedStateFromProps;(l=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||g!==c)&&k2(t,a,r,c),sa=!1,g=t.memoizedState,a.state=g,Ag(t,r,a,n);var f=t.memoizedState;o!==u||g!==f||ir.current||sa?(typeof m=="function"&&(m1(t,i,m,r),f=t.memoizedState),(d=sa||T2(t,i,d,r,g,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return _1(e,t,i,r,s,n)}function _1(e,t,i,r,n,s){BC(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return n&&_2(t,i,!1),Ps(e,t,s);r=t.stateNode,T8.current=t;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Pd(t,e.child,null,s),t.child=Pd(t,null,o,s)):Bi(e,t,o,s),t.memoizedState=r.state,n&&_2(t,i,!0),t.child}function zC(e){var t=e.stateNode;t.pendingContext?y2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&y2(e,t.context,!1),D_(e,t.containerInfo)}function D2(e,t,i,r,n){return Cd(),x_(n),t.flags|=256,Bi(e,t,i,r),t.child}var b1={dehydrated:null,treeContext:null,retryLane:0};function w1(e){return{baseLanes:e,cachePool:null,transitions:null}}function HC(e,t,i){var r=t.pendingProps,n=Tt.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),st(Tt,n&1),e===null)return h1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=a):s=jm(a,r,0,null),e=Do(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=w1(i),t.memoizedState=b1,e):z_(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return k8(e,t,a,r,o,n,i);if(s){s=r.fallback,a=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ca(n,c),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=Ca(o,s):(s=Do(s,a,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?w1(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~i,t.memoizedState=b1,r}return s=e.child,e=s.sibling,r=Ca(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function z_(e,t){return t=jm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gp(e,t,i,r){return r!==null&&x_(r),Pd(t,e.child,null,i),e=z_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function k8(e,t,i,r,n,s,a){if(i)return t.flags&256?(t.flags&=-257,r=o0(Error(J(422))),Gp(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,n=t.mode,r=jm({mode:"visible",children:r.children},n,0,null),s=Do(s,n,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&Pd(t,e.child,null,a),t.child.memoizedState=w1(a),t.memoizedState=b1,s);if((t.mode&1)===0)return Gp(e,t,a,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(J(419)),r=o0(s,r,void 0),Gp(e,t,a,r)}if(o=(a&e.childLanes)!==0,Xi||o){if(r=gi,r!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(r.suspendedLanes|a))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Cs(e,n),mn(r,e,n,-1))}return K_(),r=o0(Error(J(421))),Gp(e,t,a,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=j8.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,br=Sa(n.nextSibling),wr=t,_t=!0,an=null,e!==null&&(xr[Ar++]=ys,xr[Ar++]=_s,xr[Ar++]=Fo,ys=e.id,_s=e.overflow,Fo=t),t=z_(t,r.children),t.flags|=4096,t)}function N2(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),g1(e.return,t,i)}function c0(e,t,i,r,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function GC(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(Bi(e,t,r.children,i),r=Tt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&N2(e,i,t);else if(e.tag===19)N2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(st(Tt,r),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Ig(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),c0(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ig(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}c0(t,!0,i,null,s);break;case"together":c0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mh(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ps(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),zo|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,i=Ca(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ca(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function C8(e,t,i){switch(t.tag){case 3:zC(t),Cd();break;case 5:yC(t);break;case 1:rr(t.type)&&kg(t);break;case 4:D_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;st(Rg,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(st(Tt,Tt.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?HC(e,t,i):(st(Tt,Tt.current&1),e=Ps(e,t,i),e!==null?e.sibling:null);st(Tt,Tt.current&1);break;case 19:if(r=(i&t.childLanes)!==0,(e.flags&128)!==0){if(r)return GC(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),st(Tt,Tt.current),r)break;return null;case 22:case 23:return t.lanes=0,FC(e,t,i)}return Ps(e,t,i)}var WC,S1,qC,JC;WC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};S1=function(){};qC=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,xo(zn.current);var s=null;switch(i){case"input":n=Hv(e,n),r=Hv(e,r),s=[];break;case"select":n=Ct({},n,{value:void 0}),r=Ct({},r,{value:void 0}),s=[];break;case"textarea":n=qv(e,n),r=qv(e,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Eg)}Kv(i,r);var a;i=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ku.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(s||(s=[]),s.push(d,i)),i=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ku.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&dt("scroll",e),s||o===c||(s=[])):(s=s||[]).push(d,c))}i&&(s=s||[]).push("style",i);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};JC=function(e,t,i,r){i!==r&&(t.flags|=4)};function ul(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ci(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function P8(e,t,i){var r=t.pendingProps;switch(R_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(t),null;case 1:return rr(t.type)&&Tg(),Ci(t),null;case 3:return r=t.stateNode,Rd(),ft(ir),ft(Di),U_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(zp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,an!==null&&(A1(an),an=null))),S1(e,t),Ci(t),null;case 5:N_(t);var n=xo(Uu.current);if(i=t.type,e!==null&&t.stateNode!=null)qC(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Ci(t),null}if(e=xo(zn.current),zp(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[$n]=t,r[Du]=s,e=(t.mode&1)!==0,i){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(n=0;n<Bl.length;n++)dt(Bl[n],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Gw(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":qw(r,s),dt("invalid",r)}Kv(i,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Bp(r.textContent,o,e),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Bp(r.textContent,o,e),n=["children",""+o]):ku.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&dt("scroll",r)}switch(i){case"input":Lp(r),Ww(r,s,!0);break;case"textarea":Lp(r),Jw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Eg)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wk(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(i,{is:r.is}):(e=a.createElement(i),i==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,i),e[$n]=t,e[Du]=r,WC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Zv(i,r),i){case"dialog":dt("cancel",e),dt("close",e),n=r;break;case"iframe":case"object":case"embed":dt("load",e),n=r;break;case"video":case"audio":for(n=0;n<Bl.length;n++)dt(Bl[n],e);n=r;break;case"source":dt("error",e),n=r;break;case"img":case"image":case"link":dt("error",e),dt("load",e),n=r;break;case"details":dt("toggle",e),n=r;break;case"input":Gw(e,r),n=Hv(e,r),dt("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=Ct({},r,{value:void 0}),dt("invalid",e);break;case"textarea":qw(e,r),n=qv(e,r),dt("invalid",e);break;default:n=r}Kv(i,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?Tk(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sk(e,c)):s==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&Cu(e,c):typeof c=="number"&&Cu(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ku.hasOwnProperty(s)?c!=null&&s==="onScroll"&&dt("scroll",e):c!=null&&h_(e,s,c,a))}switch(i){case"input":Lp(e),Ww(e,r,!1);break;case"textarea":Lp(e),Jw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Aa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ad(e,!!r.multiple,s,!1):r.defaultValue!=null&&ad(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Eg)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ci(t),null;case 6:if(e&&t.stateNode!=null)JC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(i=xo(Uu.current),xo(zn.current),zp(t)){if(r=t.stateNode,i=t.memoizedProps,r[$n]=t,(s=r.nodeValue!==i)&&(e=wr,e!==null))switch(e.tag){case 3:Bp(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bp(r.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[$n]=t,t.stateNode=r}return Ci(t),null;case 13:if(ft(Tt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_t&&br!==null&&(t.mode&1)!==0&&(t.flags&128)===0)uC(),Cd(),t.flags|=98560,s=!1;else if(s=zp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(J(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[$n]=t}else Cd(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ci(t),s=!1}else an!==null&&(A1(an),an=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Tt.current&1)!==0?oi===0&&(oi=3):K_())),t.updateQueue!==null&&(t.flags|=4),Ci(t),null);case 4:return Rd(),S1(e,t),e===null&&Mu(t.stateNode.containerInfo),Ci(t),null;case 10:return O_(t.type._context),Ci(t),null;case 17:return rr(t.type)&&Tg(),Ci(t),null;case 19:if(ft(Tt),s=t.memoizedState,s===null)return Ci(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)ul(s,!1);else{if(oi!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=Ig(e),a!==null){for(t.flags|=128,ul(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)s=i,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return st(Tt,Tt.current&1|2),t.child}e=e.sibling}s.tail!==null&&jt()>Ad&&(t.flags|=128,r=!0,ul(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ig(a),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ul(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!_t)return Ci(t),null}else 2*jt()-s.renderingStartTime>Ad&&i!==1073741824&&(t.flags|=128,r=!0,ul(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(i=s.last,i!==null?i.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=jt(),t.sibling=null,i=Tt.current,st(Tt,r?i&1|2:i&1),t):(Ci(t),null);case 22:case 23:return J_(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(fr&1073741824)!==0&&(Ci(t),t.subtreeFlags&6&&(t.flags|=8192)):Ci(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function R8(e,t){switch(R_(t),t.tag){case 1:return rr(t.type)&&Tg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rd(),ft(ir),ft(Di),U_(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return N_(t),null;case 13:if(ft(Tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Cd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ft(Tt),null;case 4:return Rd(),null;case 10:return O_(t.type._context),null;case 22:case 23:return J_(),null;case 24:return null;default:return null}}var Wp=!1,Ii=!1,x8=typeof WeakSet=="function"?WeakSet:Set,Y=null;function td(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){It(e,t,r)}else i.current=null}function E1(e,t,i){try{i()}catch(r){It(e,t,r)}}var U2=!1;function A8(e,t){if(a1=bg,e=Yk(),C_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var a=0,o=-1,c=-1,d=0,l=0,u=e,g=null;t:for(;;){for(var m;u!==i||n!==0&&u.nodeType!==3||(o=a+n),u!==s||r!==0&&u.nodeType!==3||(c=a+r),u.nodeType===3&&(a+=u.nodeValue.length),(m=u.firstChild)!==null;)g=u,u=m;for(;;){if(u===e)break t;if(g===i&&++d===n&&(o=a),g===s&&++l===r&&(c=a),(m=u.nextSibling)!==null)break;u=g,g=u.parentNode}u=m}i=o===-1||c===-1?null:{start:o,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(o1={focusedElem:e,selectionRange:i},bg=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var f=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var w=f.memoizedProps,S=f.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:en(t.type,w),S);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=t.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(P){It(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return f=U2,U2=!1,f}function lu(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&E1(t,i,s)}n=n.next}while(n!==r)}}function Nm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function T1(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function KC(e){var t=e.alternate;t!==null&&(e.alternate=null,KC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$n],delete t[Du],delete t[l1],delete t[p8],delete t[h8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ZC(e){return e.tag===5||e.tag===3||e.tag===4}function j2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ZC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function k1(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Eg));else if(r!==4&&(e=e.child,e!==null))for(k1(e,t,i),e=e.sibling;e!==null;)k1(e,t,i),e=e.sibling}function C1(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(C1(e,t,i),e=e.sibling;e!==null;)C1(e,t,i),e=e.sibling}var bi=null,tn=!1;function Vs(e,t,i){for(i=i.child;i!==null;)QC(e,t,i),i=i.sibling}function QC(e,t,i){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Rm,i)}catch{}switch(i.tag){case 5:Ii||td(i,t);case 6:var r=bi,n=tn;bi=null,Vs(e,t,i),bi=r,tn=n,bi!==null&&(tn?(e=bi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):bi.removeChild(i.stateNode));break;case 18:bi!==null&&(tn?(e=bi,i=i.stateNode,e.nodeType===8?t0(e.parentNode,i):e.nodeType===1&&t0(e,i),Au(e)):t0(bi,i.stateNode));break;case 4:r=bi,n=tn,bi=i.stateNode.containerInfo,tn=!0,Vs(e,t,i),bi=r,tn=n;break;case 0:case 11:case 14:case 15:if(!Ii&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&((s&2)!==0||(s&4)!==0)&&E1(i,t,a),n=n.next}while(n!==r)}Vs(e,t,i);break;case 1:if(!Ii&&(td(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(o){It(i,t,o)}Vs(e,t,i);break;case 21:Vs(e,t,i);break;case 22:i.mode&1?(Ii=(r=Ii)||i.memoizedState!==null,Vs(e,t,i),Ii=r):Vs(e,t,i);break;default:Vs(e,t,i)}}function $2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new x8),t.forEach(function(r){var n=$8.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function qr(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:bi=o.stateNode,tn=!1;break e;case 3:bi=o.stateNode.containerInfo,tn=!0;break e;case 4:bi=o.stateNode.containerInfo,tn=!0;break e}o=o.return}if(bi===null)throw Error(J(160));QC(s,a,n),bi=null,tn=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){It(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)YC(t,e),t=t.sibling}function YC(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qr(t,e),kn(e),r&4){try{lu(3,e,e.return),Nm(3,e)}catch(w){It(e,e.return,w)}try{lu(5,e,e.return)}catch(w){It(e,e.return,w)}}break;case 1:qr(t,e),kn(e),r&512&&i!==null&&td(i,i.return);break;case 5:if(qr(t,e),kn(e),r&512&&i!==null&&td(i,i.return),e.flags&32){var n=e.stateNode;try{Cu(n,"")}catch(w){It(e,e.return,w)}}if(r&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=i!==null?i.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&_k(n,s),Zv(o,a);var d=Zv(o,s);for(a=0;a<c.length;a+=2){var l=c[a],u=c[a+1];l==="style"?Tk(n,u):l==="dangerouslySetInnerHTML"?Sk(n,u):l==="children"?Cu(n,u):h_(n,l,u,d)}switch(o){case"input":Gv(n,s);break;case"textarea":bk(n,s);break;case"select":var g=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ad(n,!!s.multiple,m,!1):g!==!!s.multiple&&(s.defaultValue!=null?ad(n,!!s.multiple,s.defaultValue,!0):ad(n,!!s.multiple,s.multiple?[]:"",!1))}n[Du]=s}catch(w){It(e,e.return,w)}}break;case 6:if(qr(t,e),kn(e),r&4){if(e.stateNode===null)throw Error(J(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(w){It(e,e.return,w)}}break;case 3:if(qr(t,e),kn(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Au(t.containerInfo)}catch(w){It(e,e.return,w)}break;case 4:qr(t,e),kn(e);break;case 13:qr(t,e),kn(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(W_=jt())),r&4&&$2(e);break;case 22:if(l=i!==null&&i.memoizedState!==null,e.mode&1?(Ii=(d=Ii)||l,qr(t,e),Ii=d):qr(t,e),kn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!l&&(e.mode&1)!==0)for(Y=e,l=e.child;l!==null;){for(u=Y=l;Y!==null;){switch(g=Y,m=g.child,g.tag){case 0:case 11:case 14:case 15:lu(4,g,g.return);break;case 1:td(g,g.return);var f=g.stateNode;if(typeof f.componentWillUnmount=="function"){r=g,i=g.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(w){It(r,i,w)}}break;case 5:td(g,g.return);break;case 22:if(g.memoizedState!==null){F2(u);continue}}m!==null?(m.return=g,Y=m):F2(u)}l=l.sibling}e:for(l=null,u=e;;){if(u.tag===5){if(l===null){l=u;try{n=u.stateNode,d?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,c=u.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Ek("display",a))}catch(w){It(e,e.return,w)}}}else if(u.tag===6){if(l===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(w){It(e,e.return,w)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;l===u&&(l=null),u=u.return}l===u&&(l=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:qr(t,e),kn(e),r&4&&$2(e);break;case 21:break;default:qr(t,e),kn(e)}}function kn(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(ZC(i)){var r=i;break e}i=i.return}throw Error(J(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Cu(n,""),r.flags&=-33);var s=j2(e);C1(e,s,n);break;case 3:case 4:var a=r.stateNode.containerInfo,o=j2(e);k1(e,o,a);break;default:throw Error(J(161))}}catch(c){It(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function I8(e,t,i){Y=e,XC(e)}function XC(e,t,i){for(var r=(e.mode&1)!==0;Y!==null;){var n=Y,s=n.child;if(n.tag===22&&r){var a=n.memoizedState!==null||Wp;if(!a){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Ii;o=Wp;var d=Ii;if(Wp=a,(Ii=c)&&!d)for(Y=n;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?B2(n):c!==null?(c.return=a,Y=c):B2(n);for(;s!==null;)Y=s,XC(s),s=s.sibling;Y=n,Wp=o,Ii=d}V2(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,Y=s):V2(e)}}function V2(e){for(;Y!==null;){var t=Y;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ii||Nm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ii)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:en(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&E2(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}E2(t,a,i)}break;case 5:var o=t.stateNode;if(i===null&&t.flags&4){i=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var l=d.memoizedState;if(l!==null){var u=l.dehydrated;u!==null&&Au(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ii||t.flags&512&&T1(t)}catch(g){It(t,t.return,g)}}if(t===e){Y=null;break}if(i=t.sibling,i!==null){i.return=t.return,Y=i;break}Y=t.return}}function F2(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}function B2(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Nm(4,t)}catch(c){It(t,i,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){It(t,n,c)}}var s=t.return;try{T1(t)}catch(c){It(t,s,c)}break;case 5:var a=t.return;try{T1(t)}catch(c){It(t,a,c)}}}catch(c){It(t,t.return,c)}if(t===e){Y=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Y=o;break}Y=t.return}}var O8=Math.ceil,Lg=Os.ReactCurrentDispatcher,H_=Os.ReactCurrentOwner,Nr=Os.ReactCurrentBatchConfig,Ve=0,gi=null,Zt=null,Si=0,fr=0,id=Ua(0),oi=0,Fu=null,zo=0,Um=0,G_=0,uu=null,Zi=null,W_=0,Ad=1/0,os=null,Dg=!1,P1=null,Ta=null,qp=!1,fa=null,Ng=0,pu=0,R1=null,Lh=-1,Dh=0;function zi(){return(Ve&6)!==0?jt():Lh!==-1?Lh:Lh=jt()}function ka(e){return(e.mode&1)===0?1:(Ve&2)!==0&&Si!==0?Si&-Si:m8.transition!==null?(Dh===0&&(Dh=Nk()),Dh):(e=Ze,e!==0||(e=window.event,e=e===void 0?16:zk(e.type)),e)}function mn(e,t,i,r){if(50<pu)throw pu=0,R1=null,Error(J(185));ap(e,i,r),((Ve&2)===0||e!==gi)&&(e===gi&&((Ve&2)===0&&(Um|=i),oi===4&&da(e,Si)),nr(e,r),i===1&&Ve===0&&(t.mode&1)===0&&(Ad=jt()+500,Mm&&ja()))}function nr(e,t){var i=e.callbackNode;mI(e,t);var r=_g(e,e===gi?Si:0);if(r===0)i!==null&&Qw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&Qw(i),t===1)e.tag===0?g8(z2.bind(null,e)):cC(z2.bind(null,e)),l8(function(){(Ve&6)===0&&ja()}),i=null;else{switch(Uk(r)){case 1:i=y_;break;case 4:i=Lk;break;case 16:i=yg;break;case 536870912:i=Dk;break;default:i=yg}i=oP(i,eP.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function eP(e,t){if(Lh=-1,Dh=0,(Ve&6)!==0)throw Error(J(327));var i=e.callbackNode;if(ud()&&e.callbackNode!==i)return null;var r=_g(e,e===gi?Si:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Ug(e,r);else{t=r;var n=Ve;Ve|=2;var s=iP();(gi!==e||Si!==t)&&(os=null,Ad=jt()+500,Lo(e,t));do try{D8();break}catch(o){tP(e,o)}while(1);I_(),Lg.current=s,Ve=n,Zt!==null?t=0:(gi=null,Si=0,t=oi)}if(t!==0){if(t===2&&(n=t1(e),n!==0&&(r=n,t=x1(e,n))),t===1)throw i=Fu,Lo(e,0),da(e,r),nr(e,jt()),i;if(t===6)da(e,r);else{if(n=e.current.alternate,(r&30)===0&&!M8(n)&&(t=Ug(e,r),t===2&&(s=t1(e),s!==0&&(r=s,t=x1(e,s))),t===1))throw i=Fu,Lo(e,0),da(e,r),nr(e,jt()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:ao(e,Zi,os);break;case 3:if(da(e,r),(r&130023424)===r&&(t=W_+500-jt(),10<t)){if(_g(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){zi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=d1(ao.bind(null,e,Zi,os),t);break}ao(e,Zi,os);break;case 4:if(da(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var a=31-gn(r);s=1<<a,a=t[a],a>n&&(n=a),r&=~s}if(r=n,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O8(r/1960))-r,10<r){e.timeoutHandle=d1(ao.bind(null,e,Zi,os),r);break}ao(e,Zi,os);break;case 5:ao(e,Zi,os);break;default:throw Error(J(329))}}}return nr(e,jt()),e.callbackNode===i?eP.bind(null,e):null}function x1(e,t){var i=uu;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),e=Ug(e,t),e!==2&&(t=Zi,Zi=i,t!==null&&A1(t)),e}function A1(e){Zi===null?Zi=e:Zi.push.apply(Zi,e)}function M8(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!yn(s(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t){for(t&=~G_,t&=~Um,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-gn(t),r=1<<i;e[i]=-1,t&=~r}}function z2(e){if((Ve&6)!==0)throw Error(J(327));ud();var t=_g(e,0);if((t&1)===0)return nr(e,jt()),null;var i=Ug(e,t);if(e.tag!==0&&i===2){var r=t1(e);r!==0&&(t=r,i=x1(e,r))}if(i===1)throw i=Fu,Lo(e,0),da(e,t),nr(e,jt()),i;if(i===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ao(e,Zi,os),nr(e,jt()),null}function q_(e,t){var i=Ve;Ve|=1;try{return e(t)}finally{Ve=i,Ve===0&&(Ad=jt()+500,Mm&&ja())}}function Ho(e){fa!==null&&fa.tag===0&&(Ve&6)===0&&ud();var t=Ve;Ve|=1;var i=Nr.transition,r=Ze;try{if(Nr.transition=null,Ze=1,e)return e()}finally{Ze=r,Nr.transition=i,Ve=t,(Ve&6)===0&&ja()}}function J_(){fr=id.current,ft(id)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,d8(i)),Zt!==null)for(i=Zt.return;i!==null;){var r=i;switch(R_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tg();break;case 3:Rd(),ft(ir),ft(Di),U_();break;case 5:N_(r);break;case 4:Rd();break;case 13:ft(Tt);break;case 19:ft(Tt);break;case 10:O_(r.type._context);break;case 22:case 23:J_()}i=i.return}if(gi=e,Zt=e=Ca(e.current,null),Si=fr=t,oi=0,Fu=null,G_=Um=zo=0,Zi=uu=null,Ro!==null){for(t=0;t<Ro.length;t++)if(i=Ro[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var a=s.next;s.next=n,r.next=a}i.pending=r}Ro=null}return e}function tP(e,t){do{var i=Zt;try{if(I_(),Ih.current=Mg,Og){for(var r=kt.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Og=!1}if(Bo=0,pi=si=kt=null,du=!1,ju=0,H_.current=null,i===null||i.return===null){oi=1,Fu=t,Zt=null;break}e:{var s=e,a=i.return,o=i,c=t;if(t=Si,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,l=o,u=l.tag;if((l.mode&1)===0&&(u===0||u===11||u===15)){var g=l.alternate;g?(l.updateQueue=g.updateQueue,l.memoizedState=g.memoizedState,l.lanes=g.lanes):(l.updateQueue=null,l.memoizedState=null)}var m=A2(a);if(m!==null){m.flags&=-257,I2(m,a,o,s,t),m.mode&1&&x2(s,d,t),t=m,c=d;var f=t.updateQueue;if(f===null){var w=new Set;w.add(c),t.updateQueue=w}else f.add(c);break e}else{if((t&1)===0){x2(s,d,t),K_();break e}c=Error(J(426))}}else if(_t&&o.mode&1){var S=A2(a);if(S!==null){(S.flags&65536)===0&&(S.flags|=256),I2(S,a,o,s,t),x_(xd(c,o));break e}}s=c=xd(c,o),oi!==4&&(oi=2),uu===null?uu=[s]:uu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=jC(s,c,t);S2(s,y);break e;case 1:o=c;var _=s.type,T=s.stateNode;if((s.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ta===null||!Ta.has(T)))){s.flags|=65536,t&=-t,s.lanes|=t;var P=$C(s,o,t);S2(s,P);break e}}s=s.return}while(s!==null)}nP(i)}catch(L){t=L,Zt===i&&i!==null&&(Zt=i=i.return);continue}break}while(1)}function iP(){var e=Lg.current;return Lg.current=Mg,e===null?Mg:e}function K_(){(oi===0||oi===3||oi===2)&&(oi=4),gi===null||(zo&268435455)===0&&(Um&268435455)===0||da(gi,Si)}function Ug(e,t){var i=Ve;Ve|=2;var r=iP();(gi!==e||Si!==t)&&(os=null,Lo(e,t));do try{L8();break}catch(n){tP(e,n)}while(1);if(I_(),Ve=i,Lg.current=r,Zt!==null)throw Error(J(261));return gi=null,Si=0,oi}function L8(){for(;Zt!==null;)rP(Zt)}function D8(){for(;Zt!==null&&!aI();)rP(Zt)}function rP(e){var t=aP(e.alternate,e,fr);e.memoizedProps=e.pendingProps,t===null?nP(e):Zt=t,H_.current=null}function nP(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=P8(i,t,fr),i!==null){Zt=i;return}}else{if(i=R8(i,t),i!==null){i.flags&=32767,Zt=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oi=6,Zt=null;return}}if(t=t.sibling,t!==null){Zt=t;return}Zt=t=e}while(t!==null);oi===0&&(oi=5)}function ao(e,t,i){var r=Ze,n=Nr.transition;try{Nr.transition=null,Ze=1,N8(e,t,i,r)}finally{Nr.transition=n,Ze=r}return null}function N8(e,t,i,r){do ud();while(fa!==null);if((Ve&6)!==0)throw Error(J(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(fI(e,s),e===gi&&(Zt=gi=null,Si=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||qp||(qp=!0,oP(yg,function(){return ud(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=Nr.transition,Nr.transition=null;var a=Ze;Ze=1;var o=Ve;Ve|=4,H_.current=null,A8(e,i),YC(i,e),i8(o1),bg=!!a1,o1=a1=null,e.current=i,I8(i),oI(),Ve=o,Ze=a,Nr.transition=s}else e.current=i;if(qp&&(qp=!1,fa=e,Ng=n),s=e.pendingLanes,s===0&&(Ta=null),lI(i.stateNode),nr(e,jt()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(Dg)throw Dg=!1,e=P1,P1=null,e;return(Ng&1)!==0&&e.tag!==0&&ud(),s=e.pendingLanes,(s&1)!==0?e===R1?pu++:(pu=0,R1=e):pu=0,ja(),null}function ud(){if(fa!==null){var e=Uk(Ng),t=Nr.transition,i=Ze;try{if(Nr.transition=null,Ze=16>e?16:e,fa===null)var r=!1;else{if(e=fa,fa=null,Ng=0,(Ve&6)!==0)throw Error(J(331));var n=Ve;for(Ve|=4,Y=e.current;Y!==null;){var s=Y,a=s.child;if((Y.flags&16)!==0){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Y=d;Y!==null;){var l=Y;switch(l.tag){case 0:case 11:case 15:lu(8,l,s)}var u=l.child;if(u!==null)u.return=l,Y=u;else for(;Y!==null;){l=Y;var g=l.sibling,m=l.return;if(KC(l),l===d){Y=null;break}if(g!==null){g.return=m,Y=g;break}Y=m}}}var f=s.alternate;if(f!==null){var w=f.child;if(w!==null){f.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}Y=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:lu(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Y=y;break e}Y=s.return}}var _=e.current;for(Y=_;Y!==null;){a=Y;var T=a.child;if((a.subtreeFlags&2064)!==0&&T!==null)T.return=a,Y=T;else e:for(a=_;Y!==null;){if(o=Y,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:Nm(9,o)}}catch(L){It(o,o.return,L)}if(o===a){Y=null;break e}var P=o.sibling;if(P!==null){P.return=o.return,Y=P;break e}Y=o.return}}if(Ve=n,ja(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Rm,e)}catch{}r=!0}return r}finally{Ze=i,Nr.transition=t}}return!1}function H2(e,t,i){t=xd(i,t),t=jC(e,t,1),e=Ea(e,t,1),t=zi(),e!==null&&(ap(e,1,t),nr(e,t))}function It(e,t,i){if(e.tag===3)H2(e,e,i);else for(;t!==null;){if(t.tag===3){H2(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ta===null||!Ta.has(r))){e=xd(i,e),e=$C(t,e,1),t=Ea(t,e,1),e=zi(),t!==null&&(ap(t,1,e),nr(t,e));break}}t=t.return}}function U8(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=zi(),e.pingedLanes|=e.suspendedLanes&i,gi===e&&(Si&i)===i&&(oi===4||oi===3&&(Si&130023424)===Si&&500>jt()-W_?Lo(e,0):G_|=i),nr(e,t)}function sP(e,t){t===0&&((e.mode&1)===0?t=1:(t=Up,Up<<=1,(Up&130023424)===0&&(Up=4194304)));var i=zi();e=Cs(e,t),e!==null&&(ap(e,t,i),nr(e,i))}function j8(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),sP(e,i)}function $8(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),sP(e,i)}var aP;aP=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||ir.current)Xi=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return Xi=!1,C8(e,t,i);Xi=(e.flags&131072)!==0}else Xi=!1,_t&&(t.flags&1048576)!==0&&dC(t,Pg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mh(e,t),e=t.pendingProps;var n=kd(t,Di.current);ld(t,i),n=$_(null,t,r,e,n,i);var s=V_();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rr(r)?(s=!0,kg(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,L_(t),n.updater=Lm,t.stateNode=n,n._reactInternals=t,f1(t,r,e,i),t=_1(null,t,r,!0,s,i)):(t.tag=0,_t&&s&&P_(t),Bi(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(Mh(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=F8(r),e=en(r,e),n){case 0:t=y1(null,t,r,e,i);break e;case 1:t=L2(null,t,r,e,i);break e;case 11:t=O2(null,t,r,e,i);break e;case 14:t=M2(null,t,r,en(r.type,e),i);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:en(r,n),y1(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:en(r,n),L2(e,t,r,n,i);case 3:e:{if(zC(t),e===null)throw Error(J(387));r=t.pendingProps,s=t.memoizedState,n=s.element,hC(e,t),Ag(t,r,null,i);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=xd(Error(J(423)),t),t=D2(e,t,r,i,n);break e}else if(r!==n){n=xd(Error(J(424)),t),t=D2(e,t,r,i,n);break e}else for(br=Sa(t.stateNode.containerInfo.firstChild),wr=t,_t=!0,an=null,i=vC(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Cd(),r===n){t=Ps(e,t,i);break e}Bi(e,t,r,i)}t=t.child}return t;case 5:return yC(t),e===null&&h1(t),r=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,c1(r,n)?a=null:s!==null&&c1(r,s)&&(t.flags|=32),BC(e,t),Bi(e,t,a,i),t.child;case 6:return e===null&&h1(t),null;case 13:return HC(e,t,i);case 4:return D_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pd(t,null,r,i):Bi(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:en(r,n),O2(e,t,r,n,i);case 7:return Bi(e,t,t.pendingProps,i),t.child;case 8:return Bi(e,t,t.pendingProps.children,i),t.child;case 12:return Bi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,st(Rg,r._currentValue),r._currentValue=a,s!==null)if(yn(s.value,a)){if(s.children===n.children&&!ir.current){t=Ps(e,t,i);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Es(-1,i&-i),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var l=d.pending;l===null?c.next=c:(c.next=l.next,l.next=c),d.pending=c}}s.lanes|=i,c=s.alternate,c!==null&&(c.lanes|=i),g1(s.return,i,t),o.lanes|=i;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(J(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),g1(a,i,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Bi(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,ld(t,i),n=Vr(n),r=r(n),t.flags|=1,Bi(e,t,r,i),t.child;case 14:return r=t.type,n=en(r,t.pendingProps),n=en(r.type,n),M2(e,t,r,n,i);case 15:return VC(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:en(r,n),Mh(e,t),t.tag=1,rr(r)?(e=!0,kg(t)):e=!1,ld(t,i),mC(t,r,n),f1(t,r,n,i),_1(null,t,r,!0,e,i);case 19:return GC(e,t,i);case 22:return FC(e,t,i)}throw Error(J(156,t.tag))};function oP(e,t){return Mk(e,t)}function V8(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,i,r){return new V8(e,t,i,r)}function Z_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F8(e){if(typeof e=="function")return Z_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===m_)return 11;if(e===f_)return 14}return 2}function Ca(e,t){var i=e.alternate;return i===null?(i=Lr(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Nh(e,t,i,r,n,s){var a=2;if(r=e,typeof e=="function")Z_(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Wc:return Do(i.children,n,s,t);case g_:a=8,n|=8;break;case Vv:return e=Lr(12,i,t,n|2),e.elementType=Vv,e.lanes=s,e;case Fv:return e=Lr(13,i,t,n),e.elementType=Fv,e.lanes=s,e;case Bv:return e=Lr(19,i,t,n),e.elementType=Bv,e.lanes=s,e;case fk:return jm(i,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gk:a=10;break e;case mk:a=9;break e;case m_:a=11;break e;case f_:a=14;break e;case na:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Lr(a,i,t,n),t.elementType=e,t.type=r,t.lanes=s,t}function Do(e,t,i,r){return e=Lr(7,e,r,t),e.lanes=i,e}function jm(e,t,i,r){return e=Lr(22,e,r,t),e.elementType=fk,e.lanes=i,e.stateNode={isHidden:!1},e}function d0(e,t,i){return e=Lr(6,e,null,t),e.lanes=i,e}function l0(e,t,i){return t=Lr(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B8(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hf(0),this.expirationTimes=Hf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hf(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Q_(e,t,i,r,n,s,a,o,c){return e=new B8(e,t,i,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Lr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},L_(s),e}function z8(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function cP(e){if(!e)return Ia;e=e._reactInternals;e:{if(Xo(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var i=e.type;if(rr(i))return oC(e,i,t)}return t}function dP(e,t,i,r,n,s,a,o,c){return e=Q_(i,r,!0,e,n,s,a,o,c),e.context=cP(null),i=e.current,r=zi(),n=ka(i),s=Es(r,n),s.callback=t!=null?t:null,Ea(i,s,n),e.current.lanes=n,ap(e,n,r),nr(e,r),e}function $m(e,t,i,r){var n=t.current,s=zi(),a=ka(n);return i=cP(i),t.context===null?t.context=i:t.pendingContext=i,t=Es(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ea(n,t,a),e!==null&&(mn(e,n,a,s),Ah(e,n,a)),a}function jg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function G2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Y_(e,t){G2(e,t),(e=e.alternate)&&G2(e,t)}function H8(){return null}var lP=typeof reportError=="function"?reportError:function(e){console.error(e)};function X_(e){this._internalRoot=e}Vm.prototype.render=X_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));$m(e,t,null,null)};Vm.prototype.unmount=X_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ho(function(){$m(null,e,null,null)}),t[ks]=null}};function Vm(e){this._internalRoot=e}Vm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vk();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ca.length&&t!==0&&t<ca[i].priority;i++);ca.splice(i,0,e),i===0&&Bk(e)}};function eb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function W2(){}function G8(e,t,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var d=jg(a);s.call(d)}}var a=dP(t,r,e,0,null,!1,!1,"",W2);return e._reactRootContainer=a,e[ks]=a.current,Mu(e.nodeType===8?e.parentNode:e),Ho(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var d=jg(c);o.call(d)}}var c=Q_(e,0,!1,null,null,!1,!1,"",W2);return e._reactRootContainer=c,e[ks]=c.current,Mu(e.nodeType===8?e.parentNode:e),Ho(function(){$m(t,c,i,r)}),c}function Bm(e,t,i,r,n){var s=i._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var c=jg(a);o.call(c)}}$m(t,a,e,n)}else a=G8(i,t,e,n,r);return jg(a)}jk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Fl(t.pendingLanes);i!==0&&(__(t,i|1),nr(t,jt()),(Ve&6)===0&&(Ad=jt()+500,ja()))}break;case 13:Ho(function(){var r=Cs(e,1);if(r!==null){var n=zi();mn(r,e,1,n)}}),Y_(e,1)}};b_=function(e){if(e.tag===13){var t=Cs(e,134217728);if(t!==null){var i=zi();mn(t,e,134217728,i)}Y_(e,134217728)}};$k=function(e){if(e.tag===13){var t=ka(e),i=Cs(e,t);if(i!==null){var r=zi();mn(i,e,t,r)}Y_(e,t)}};Vk=function(){return Ze};Fk=function(e,t){var i=Ze;try{return Ze=e,t()}finally{Ze=i}};Yv=function(e,t,i){switch(t){case"input":if(Gv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=Om(r);if(!n)throw Error(J(90));yk(r),Gv(r,n)}}}break;case"textarea":bk(e,i);break;case"select":t=i.value,t!=null&&ad(e,!!i.multiple,t,!1)}};Pk=q_;Rk=Ho;var W8={usingClientEntryPoint:!1,Events:[cp,Zc,Om,kk,Ck,q_]},pl={findFiberByHostInstance:Po,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},q8={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ik(e),e===null?null:e.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||H8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{Rm=Jp.inject(q8),Bn=Jp}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W8;Tr.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eb(t))throw Error(J(200));return z8(e,t,null,i)};Tr.createRoot=function(e,t){if(!eb(e))throw Error(J(299));var i=!1,r="",n=lP;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Q_(e,1,!1,null,null,i,!1,r,n),e[ks]=t.current,Mu(e.nodeType===8?e.parentNode:e),new X_(t)};Tr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Ik(t),e=e===null?null:e.stateNode,e};Tr.flushSync=function(e){return Ho(e)};Tr.hydrate=function(e,t,i){if(!Fm(t))throw Error(J(200));return Bm(null,e,t,!0,i)};Tr.hydrateRoot=function(e,t,i){if(!eb(e))throw Error(J(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",a=lP;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),t=dP(t,null,e,1,i!=null?i:null,n,!1,s,a),e[ks]=t.current,Mu(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new Vm(t)};Tr.render=function(e,t,i){if(!Fm(t))throw Error(J(200));return Bm(null,e,t,!1,i)};Tr.unmountComponentAtNode=function(e){if(!Fm(e))throw Error(J(40));return e._reactRootContainer?(Ho(function(){Bm(null,null,e,!1,function(){e._reactRootContainer=null,e[ks]=null})}),!0):!1};Tr.unstable_batchedUpdates=q_;Tr.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!Fm(i))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Bm(e,t,i,!1,r)};Tr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=Tr})(ik);var q2=ik.exports;jv.createRoot=q2.createRoot,jv.hydrateRoot=q2.hydrateRoot;var Kp,J8=new Uint8Array(16);function K8(){if(!Kp&&(Kp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Kp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kp(J8)}const Z8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function tb(e){return typeof e=="string"&&Z8.test(e)}var vi=[];for(var u0=0;u0<256;++u0)vi.push((u0+256).toString(16).substr(1));function Q8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(vi[e[t+0]]+vi[e[t+1]]+vi[e[t+2]]+vi[e[t+3]]+"-"+vi[e[t+4]]+vi[e[t+5]]+"-"+vi[e[t+6]]+vi[e[t+7]]+"-"+vi[e[t+8]]+vi[e[t+9]]+"-"+vi[e[t+10]]+vi[e[t+11]]+vi[e[t+12]]+vi[e[t+13]]+vi[e[t+14]]+vi[e[t+15]]).toLowerCase();if(!tb(i))throw TypeError("Stringified UUID is invalid");return i}function zm(e,t,i){e=e||{};var r=e.random||(e.rng||K8)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return Q8(r)}var uP={exports:{}},ib={exports:{}},pP=function(t,i){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return t.apply(i,n)}},Y8=pP,$a=Object.prototype.toString;function rb(e){return Array.isArray(e)}function I1(e){return typeof e>"u"}function X8(e){return e!==null&&!I1(e)&&e.constructor!==null&&!I1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function hP(e){return $a.call(e)==="[object ArrayBuffer]"}function e9(e){return $a.call(e)==="[object FormData]"}function t9(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&hP(e.buffer),t}function i9(e){return typeof e=="string"}function r9(e){return typeof e=="number"}function gP(e){return e!==null&&typeof e=="object"}function Uh(e){if($a.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function n9(e){return $a.call(e)==="[object Date]"}function s9(e){return $a.call(e)==="[object File]"}function a9(e){return $a.call(e)==="[object Blob]"}function mP(e){return $a.call(e)==="[object Function]"}function o9(e){return gP(e)&&mP(e.pipe)}function c9(e){return $a.call(e)==="[object URLSearchParams]"}function d9(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function l9(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function nb(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),rb(e))for(var i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function O1(){var e={};function t(n,s){Uh(e[s])&&Uh(n)?e[s]=O1(e[s],n):Uh(n)?e[s]=O1({},n):rb(n)?e[s]=n.slice():e[s]=n}for(var i=0,r=arguments.length;i<r;i++)nb(arguments[i],t);return e}function u9(e,t,i){return nb(t,function(n,s){i&&typeof n=="function"?e[s]=Y8(n,i):e[s]=n}),e}function p9(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var sr={isArray:rb,isArrayBuffer:hP,isBuffer:X8,isFormData:e9,isArrayBufferView:t9,isString:i9,isNumber:r9,isObject:gP,isPlainObject:Uh,isUndefined:I1,isDate:n9,isFile:s9,isBlob:a9,isFunction:mP,isStream:o9,isURLSearchParams:c9,isStandardBrowserEnv:l9,forEach:nb,merge:O1,extend:u9,trim:d9,stripBOM:p9},pc=sr;function J2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var fP=function(t,i,r){if(!i)return t;var n;if(r)n=r(i);else if(pc.isURLSearchParams(i))n=i.toString();else{var s=[];pc.forEach(i,function(c,d){c===null||typeof c>"u"||(pc.isArray(c)?d=d+"[]":c=[c],pc.forEach(c,function(u){pc.isDate(u)?u=u.toISOString():pc.isObject(u)&&(u=JSON.stringify(u)),s.push(J2(d)+"="+J2(u))}))}),n=s.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},h9=sr;function Hm(){this.handlers=[]}Hm.prototype.use=function(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Hm.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Hm.prototype.forEach=function(t){h9.forEach(this.handlers,function(r){r!==null&&t(r)})};var g9=Hm,m9=sr,f9=function(t,i){m9.forEach(t,function(n,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(t[i]=n,delete t[s])})},vP=function(t,i,r,n,s){return t.config=i,r&&(t.code=r),t.request=n,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},p0,K2;function yP(){if(K2)return p0;K2=1;var e=vP;return p0=function(i,r,n,s,a){var o=new Error(i);return e(o,r,n,s,a)},p0}var h0,Z2;function v9(){if(Z2)return h0;Z2=1;var e=yP();return h0=function(i,r,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?i(n):r(e("Request failed with status code "+n.status,n.config,null,n.request,n))},h0}var g0,Q2;function y9(){if(Q2)return g0;Q2=1;var e=sr;return g0=e.isStandardBrowserEnv()?function(){return{write:function(r,n,s,a,o,c){var d=[];d.push(r+"="+encodeURIComponent(n)),e.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),e.isString(a)&&d.push("path="+a),e.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),g0}var m0,Y2;function _9(){return Y2||(Y2=1,m0=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),m0}var f0,X2;function b9(){return X2||(X2=1,f0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),f0}var v0,e5;function w9(){if(e5)return v0;e5=1;var e=_9(),t=b9();return v0=function(r,n){return r&&!e(n)?t(r,n):n},v0}var y0,t5;function S9(){if(t5)return y0;t5=1;var e=sr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return y0=function(r){var n={},s,a,o;return r&&e.forEach(r.split(`
`),function(d){if(o=d.indexOf(":"),s=e.trim(d.substr(0,o)).toLowerCase(),a=e.trim(d.substr(o+1)),s){if(n[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?n[s]=(n[s]?n[s]:[]).concat([a]):n[s]=n[s]?n[s]+", "+a:a}}),n},y0}var _0,i5;function E9(){if(i5)return _0;i5=1;var e=sr;return _0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function s(a){var o=a;return i&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(o){var c=e.isString(o)?s(o):o;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}(),_0}var b0,r5;function Gm(){if(r5)return b0;r5=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,b0=e,b0}var w0,n5;function s5(){if(n5)return w0;n5=1;var e=sr,t=v9(),i=y9(),r=fP,n=w9(),s=S9(),a=E9(),o=yP(),c=Wm(),d=Gm();return w0=function(u){return new Promise(function(m,f){var w=u.data,S=u.headers,y=u.responseType,_;function T(){u.cancelToken&&u.cancelToken.unsubscribe(_),u.signal&&u.signal.removeEventListener("abort",_)}e.isFormData(w)&&delete S["Content-Type"];var P=new XMLHttpRequest;if(u.auth){var L=u.auth.username||"",O=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";S.Authorization="Basic "+btoa(L+":"+O)}var B=n(u.baseURL,u.url);P.open(u.method.toUpperCase(),r(B,u.params,u.paramsSerializer),!0),P.timeout=u.timeout;function H(){if(!!P){var K="getAllResponseHeaders"in P?s(P.getAllResponseHeaders()):null,ge=!y||y==="text"||y==="json"?P.responseText:P.response,He={data:ge,status:P.status,statusText:P.statusText,headers:K,config:u,request:P};t(function(ei){m(ei),T()},function(ei){f(ei),T()},He),P=null}}if("onloadend"in P?P.onloadend=H:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(H)},P.onabort=function(){!P||(f(o("Request aborted",u,"ECONNABORTED",P)),P=null)},P.onerror=function(){f(o("Network Error",u,null,P)),P=null},P.ontimeout=function(){var ge=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",He=u.transitional||c.transitional;u.timeoutErrorMessage&&(ge=u.timeoutErrorMessage),f(o(ge,u,He.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",P)),P=null},e.isStandardBrowserEnv()){var ie=(u.withCredentials||a(B))&&u.xsrfCookieName?i.read(u.xsrfCookieName):void 0;ie&&(S[u.xsrfHeaderName]=ie)}"setRequestHeader"in P&&e.forEach(S,function(ge,He){typeof w>"u"&&He.toLowerCase()==="content-type"?delete S[He]:P.setRequestHeader(He,ge)}),e.isUndefined(u.withCredentials)||(P.withCredentials=!!u.withCredentials),y&&y!=="json"&&(P.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&P.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(_=function(K){!P||(f(!K||K&&K.type?new d("canceled"):K),P.abort(),P=null)},u.cancelToken&&u.cancelToken.subscribe(_),u.signal&&(u.signal.aborted?_():u.signal.addEventListener("abort",_))),w||(w=null),P.send(w)})},w0}var S0,a5;function Wm(){if(a5)return S0;a5=1;var e=sr,t=f9,i=vP,r={"Content-Type":"application/x-www-form-urlencoded"};function n(c,d){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=d)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=s5()),c}function a(c,d,l){if(e.isString(c))try{return(d||JSON.parse)(c),e.trim(c)}catch(u){if(u.name!=="SyntaxError")throw u}return(l||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(d,l){return t(l,"Accept"),t(l,"Content-Type"),e.isFormData(d)||e.isArrayBuffer(d)||e.isBuffer(d)||e.isStream(d)||e.isFile(d)||e.isBlob(d)?d:e.isArrayBufferView(d)?d.buffer:e.isURLSearchParams(d)?(n(l,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):e.isObject(d)||l&&l["Content-Type"]==="application/json"?(n(l,"application/json"),a(d)):d}],transformResponse:[function(d){var l=this.transitional||o.transitional,u=l&&l.silentJSONParsing,g=l&&l.forcedJSONParsing,m=!u&&this.responseType==="json";if(m||g&&e.isString(d)&&d.length)try{return JSON.parse(d)}catch(f){if(m)throw f.name==="SyntaxError"?i(f,this,"E_JSON_PARSE"):f}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(d){o.headers[d]={}}),e.forEach(["post","put","patch"],function(d){o.headers[d]=e.merge(r)}),S0=o,S0}var T9=sr,k9=Wm(),C9=function(t,i,r){var n=this||k9;return T9.forEach(r,function(a){t=a.call(n,t,i)}),t},E0,o5;function _P(){return o5||(o5=1,E0=function(t){return!!(t&&t.__CANCEL__)}),E0}var c5=sr,T0=C9,P9=_P(),R9=Wm(),x9=Gm();function k0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new x9("canceled")}var A9=function(t){k0(t),t.headers=t.headers||{},t.data=T0.call(t,t.data,t.headers,t.transformRequest),t.headers=c5.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),c5.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var i=t.adapter||R9.adapter;return i(t).then(function(n){return k0(t),n.data=T0.call(t,n.data,n.headers,t.transformResponse),n},function(n){return P9(n)||(k0(t),n&&n.response&&(n.response.data=T0.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},lr=sr,bP=function(t,i){i=i||{};var r={};function n(l,u){return lr.isPlainObject(l)&&lr.isPlainObject(u)?lr.merge(l,u):lr.isPlainObject(u)?lr.merge({},u):lr.isArray(u)?u.slice():u}function s(l){if(lr.isUndefined(i[l])){if(!lr.isUndefined(t[l]))return n(void 0,t[l])}else return n(t[l],i[l])}function a(l){if(!lr.isUndefined(i[l]))return n(void 0,i[l])}function o(l){if(lr.isUndefined(i[l])){if(!lr.isUndefined(t[l]))return n(void 0,t[l])}else return n(void 0,i[l])}function c(l){if(l in i)return n(t[l],i[l]);if(l in t)return n(void 0,t[l])}var d={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return lr.forEach(Object.keys(t).concat(Object.keys(i)),function(u){var g=d[u]||s,m=g(u);lr.isUndefined(m)&&g!==c||(r[u]=m)}),r},C0,d5;function wP(){return d5||(d5=1,C0={version:"0.25.0"}),C0}var I9=wP().version,sb={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){sb[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var l5={};sb.transitional=function(t,i,r){function n(s,a){return"[Axios v"+I9+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return function(s,a,o){if(t===!1)throw new Error(n(a," has been removed"+(i?" in "+i:"")));return i&&!l5[a]&&(l5[a]=!0,console.warn(n(a," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(s,a,o):!0}};function O9(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),n=r.length;n-- >0;){var s=r[n],a=t[s];if(a){var o=e[s],c=o===void 0||a(o,s,e);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(i!==!0)throw Error("Unknown option "+s)}}var M9={assertOptions:O9,validators:sb},SP=sr,L9=fP,u5=g9,p5=A9,qm=bP,EP=M9,hc=EP.validators;function lp(e){this.defaults=e,this.interceptors={request:new u5,response:new u5}}lp.prototype.request=function(t,i){if(typeof t=="string"?(i=i||{},i.url=t):i=t||{},!i.url)throw new Error("Provided config url is not valid");i=qm(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&EP.assertOptions(r,{silentJSONParsing:hc.transitional(hc.boolean),forcedJSONParsing:hc.transitional(hc.boolean),clarifyTimeoutError:hc.transitional(hc.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(s=s&&m.synchronous,n.unshift(m.fulfilled,m.rejected))});var a=[];this.interceptors.response.forEach(function(m){a.push(m.fulfilled,m.rejected)});var o;if(!s){var c=[p5,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(a),o=Promise.resolve(i);c.length;)o=o.then(c.shift(),c.shift());return o}for(var d=i;n.length;){var l=n.shift(),u=n.shift();try{d=l(d)}catch(g){u(g);break}}try{o=p5(d)}catch(g){return Promise.reject(g)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};lp.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=qm(this.defaults,t),L9(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};SP.forEach(["delete","get","head","options"],function(t){lp.prototype[t]=function(i,r){return this.request(qm(r||{},{method:t,url:i,data:(r||{}).data}))}});SP.forEach(["post","put","patch"],function(t){lp.prototype[t]=function(i,r,n){return this.request(qm(n||{},{method:t,url:i,data:r}))}});var D9=lp,P0,h5;function N9(){if(h5)return P0;h5=1;var e=Gm();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var n=this;this.promise.then(function(s){if(!!n._listeners){var a,o=n._listeners.length;for(a=0;a<o;a++)n._listeners[a](s);n._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){n.subscribe(c),a=c}).then(s);return o.cancel=function(){n.unsubscribe(a)},o},i(function(a){n.reason||(n.reason=new e(a),r(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}},t.source=function(){var r,n=new t(function(a){r=a});return{token:n,cancel:r}},P0=t,P0}var R0,g5;function U9(){return g5||(g5=1,R0=function(t){return function(r){return t.apply(null,r)}}),R0}var x0,m5;function j9(){if(m5)return x0;m5=1;var e=sr;return x0=function(i){return e.isObject(i)&&i.isAxiosError===!0},x0}var f5=sr,$9=pP,jh=D9,V9=bP,F9=Wm();function TP(e){var t=new jh(e),i=$9(jh.prototype.request,t);return f5.extend(i,jh.prototype,t),f5.extend(i,t),i.create=function(n){return TP(V9(e,n))},i}var Qn=TP(F9);Qn.Axios=jh;Qn.Cancel=Gm();Qn.CancelToken=N9();Qn.isCancel=_P();Qn.VERSION=wP().version;Qn.all=function(t){return Promise.all(t)};Qn.spread=U9();Qn.isAxiosError=j9();ib.exports=Qn;ib.exports.default=Qn;(function(e){e.exports=ib.exports})(uP);const $g=tk(uP.exports),B9={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},kP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Mt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Vi={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Js={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class j{static getFirstMatch(t,i){const r=i.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,i){const r=i.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,i,r){if(t.test(i))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,i,r=!1){const n=j.getVersionPrecision(t),s=j.getVersionPrecision(i);let a=Math.max(n,s),o=0;const c=j.map([t,i],d=>{const l=a-j.getVersionPrecision(d),u=d+new Array(l+1).join(".0");return j.map(u.split("."),g=>new Array(20-g.length).join("0")+g).reverse()});for(r&&(o=a-Math.min(n,s)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(t,i){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(t,i);for(n=0;n<t.length;n+=1)r.push(i(t[n]));return r}static find(t,i){let r,n;if(Array.prototype.find)return Array.prototype.find.call(t,i);for(r=0,n=t.length;r<n;r+=1){const s=t[r];if(i(s,r))return s}}static assign(t,...i){const r=t;let n,s;if(Object.assign)return Object.assign(t,...i);for(n=0,s=i.length;n<s;n+=1){const a=i[n];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return t}static getBrowserAlias(t){return B9[t]}static getBrowserTypeByAlias(t){return kP[t]||""}}const tt=/version\/(\d+(\.?_?\d+)+)/i,z9=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},i=j.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},i=j.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},i=j.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},i=j.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},i=j.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},i=j.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},i=j.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},i=j.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=j.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},i=j.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},i=j.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},i=j.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},i=j.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},i=j.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},i=j.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},i=j.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},i=j.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},i=j.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},i=j.getFirstMatch(tt,e)||j.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},i=j.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},i=j.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},i=j.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},i=j.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},i=j.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},i=j.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},i=j.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},i=j.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},i=j.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t={name:"Android Browser"},i=j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},i=j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},i=j.getFirstMatch(tt,e);return i&&(t.version=i),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,n=e.search("\\(")!==-1?i:t;return{name:j.getFirstMatch(n,e),version:j.getSecondMatch(n,e)}}}],H9=[{test:[/Roku\/DVP/],describe(e){const t=j.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Vi.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=j.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Vi.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=j.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=j.getWindowsVersionName(t);return{name:Vi.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:Vi.iOS},i=j.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return i&&(t.version=i),t}},{test:[/macintosh/i],describe(e){const t=j.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=j.getMacOSVersionName(t),r={name:Vi.MacOS,version:t};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=j.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Vi.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t=j.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=j.getAndroidVersionName(t),r={name:Vi.Android,version:t};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=j.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:Vi.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=j.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||j.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||j.getFirstMatch(/\bbb(\d+)/i,e);return{name:Vi.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=j.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Vi.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=j.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Vi.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:Vi.Linux}}},{test:[/CrOS/],describe(){return{name:Vi.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=j.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Vi.PlayStation4,version:t}}}],G9=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=j.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:Mt.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Mt.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Mt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Mt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Mt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Mt.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Mt.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe(e){const t=j.getFirstMatch(/(ipod|iphone)/i,e);return{type:Mt.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Mt.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Mt.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:Mt.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:Mt.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:Mt.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:Mt.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:Mt.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:Mt.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:Mt.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:Mt.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:Mt.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:Mt.tv}}}],W9=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Js.Blink};const i=j.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Js.EdgeHTML,version:i}}},{test:[/trident/i],describe(e){const t={name:Js.Trident},i=j.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Js.Presto},i=j.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe(e){const t={name:Js.Gecko},i=j.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Js.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Js.WebKit},i=j.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];class v5{constructor(t,i=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=j.find(z9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=j.find(H9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:i}=this.getOS();return t?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:i}=this.getPlatform();return t?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const t=j.find(G9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=j.find(W9,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return j.assign({},this.parsedResult)}satisfies(t){const i={};let r=0;const n={};let s=0;if(Object.keys(t).forEach(o=>{const c=t[o];typeof c=="string"?(n[o]=c,s+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=j.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const d=j.find(o,l=>this.isPlatform(l));if(d){const l=this.satisfies(i[d]);if(l!==void 0)return l}}if(s>0){const o=Object.keys(n),c=j.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(n[c])}}isBrowser(t,i=!1){const r=this.getBrowserName().toLowerCase();let n=t.toLowerCase();const s=j.getBrowserTypeByAlias(n);return i&&s&&(n=s.toLowerCase()),n===r}compareVersion(t){let i=[0],r=t,n=!1;const s=this.getBrowserVersion();if(typeof s=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(n=!0,r=t.substr(2)):i=[],t[0]===">"?i.push(1):i.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(n=!0,r=t.substr(1)),i.indexOf(j.compareVersions(s,r,n))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,i=!1){return this.isBrowser(t,i)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class ab{static getParser(t,i=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new v5(t,i)}static parse(t){return new v5(t).getResult()}static get BROWSER_MAP(){return kP}static get ENGINE_MAP(){return Js}static get OS_MAP(){return Vi}static get PLATFORMS_MAP(){return Mt}}var CP={},ob={exports:{}},y5=ob.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(y5).forEach(function(e){var t=y5[e];t.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});(function(e){var t=function(o){return String(Number(o))===o?Number(o):o},i=function(o,c,d,l){if(l&&!d)c[l]=t(o[1]);else for(var u=0;u<d.length;u+=1)o[u+1]!=null&&(c[d[u]]=t(o[u+1]))},r=function(o,c,d){var l=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:l&&!c[o.name]&&(c[o.name]={});var u=o.push?{}:l?c[o.name]:c;i(d.match(o.reg),u,o.names,o.name),o.push&&c[o.push].push(u)},n=ob.exports,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var c={},d=[],l=c;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(u){var g=u[0],m=u.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),l=d[d.length-1]);for(var f=0;f<(n[g]||[]).length;f+=1){var w=n[g][f];if(w.reg.test(m))return r(w,l,m)}}),c.media=d,c};var a=function(o,c){var d=c.split(/=(.+)/,2);return d.length===2?o[d[0]]=t(d[1]):d.length===1&&c.length>1&&(o[d[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var c=[],d=o.split(" ").map(t),l=0;l<d.length;l+=3)c.push({component:d[l],ip:d[l+1],port:d[l+2]});return c},e.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(d){var l,u=!1;return d[0]!=="~"?l=t(d):(l=t(d.substring(1,d.length)),u=!0),{scid:l,paused:u}})})}})(CP);var A0=ob.exports,q9=/%[sdv%]/g,J9=function(e){var t=1,i=arguments,r=i.length;return e.replace(q9,function(n){if(t>=r)return n;var s=i[t];switch(t+=1,n){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},hl=function(e,t,i){var r=t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format,n=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var a=t.names[s];t.name?n.push(i[t.name][a]):n.push(i[t.names[s]])}else n.push(i[t.name]);return J9.apply(null,n)},K9=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Z9=["i","c","b","a"],Q9=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var i=t.outerOrder||K9,r=t.innerOrder||Z9,n=[];return i.forEach(function(s){A0[s].forEach(function(a){a.name in e&&e[a.name]!=null?n.push(hl(s,a,e)):a.push in e&&e[a.push]!=null&&e[a.push].forEach(function(o){n.push(hl(s,a,o))})})}),e.media.forEach(function(s){n.push(hl("m",A0.m[0],s)),r.forEach(function(a){A0[a].forEach(function(o){o.name in s&&s[o.name]!=null?n.push(hl(a,o,s)):o.push in s&&s[o.push]!=null&&s[o.push].forEach(function(c){n.push(hl(a,o,c))})})})}),n.join(`\r
`)+`\r
`},ec=CP,Y9=Q9,fn=Y9,be=ec.parse,PP=ec.parseParams;ec.parseFmtpConfig;ec.parsePayloads;ec.parseRemoteCandidates;ec.parseImageAttributes;var RP=ec.parseSimulcastStreamList,X9=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Ao="1.4.1",_5=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function eO(e){var t=new Set([e]),i=new Set,r=e.match(_5);if(!r)return function(){return!1};var n={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(n.prerelease!=null)return function(c){return c===e};function s(o){return i.add(o),!1}function a(o){return t.add(o),!0}return function(c){if(t.has(c))return!0;if(i.has(c))return!1;var d=c.match(_5);if(!d)return s(c);var l={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return l.prerelease!=null||n.major!==l.major?s(c):n.major===0?n.minor===l.minor&&n.patch<=l.patch?a(c):s(c):n.minor<=l.minor?a(c):s(c)}}var tO=eO(Ao),iO=Ao.split(".")[0],Bu=Symbol.for("opentelemetry.js.api."+iO),zu=X9;function up(e,t,i,r){var n;r===void 0&&(r=!1);var s=zu[Bu]=(n=zu[Bu])!==null&&n!==void 0?n:{version:Ao};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return i.error(a.stack||a.message),!1}if(s.version!==Ao){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+Ao);return i.error(a.stack||a.message),!1}return s[e]=t,i.debug("@opentelemetry/api: Registered a global for "+e+" v"+Ao+"."),!0}function Go(e){var t,i,r=(t=zu[Bu])===null||t===void 0?void 0:t.version;if(!(!r||!tO(r)))return(i=zu[Bu])===null||i===void 0?void 0:i[e]}function pp(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Ao+".");var i=zu[Bu];i&&delete i[e]}var rO=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},nO=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},sO=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return gl("verbose",this._namespace,t)},e}();function gl(e,t,i){var r=Go("diag");if(!!r)return i.unshift(t),r[e].apply(r,nO([],rO(i),!1))}var Ke;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ke||(Ke={}));function aO(e,t){e<Ke.NONE?e=Ke.NONE:e>Ke.ALL&&(e=Ke.ALL),t=t||{};function i(r,n){var s=t[r];return typeof s=="function"&&e>=n?s.bind(t):function(){}}return{error:i("error",Ke.ERROR),warn:i("warn",Ke.WARN),info:i("info",Ke.INFO),debug:i("debug",Ke.DEBUG),verbose:i("verbose",Ke.VERBOSE)}}var oO=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},cO=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},dO="diag",Wn=function(){function e(){function t(n){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=Go("diag");if(!!o)return o[n].apply(o,cO([],oO(s),!1))}}var i=this,r=function(n,s){var a,o,c;if(s===void 0&&(s={logLevel:Ke.INFO}),n===i){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof s=="number"&&(s={logLevel:s});var l=Go("diag"),u=aO((o=s.logLevel)!==null&&o!==void 0?o:Ke.INFO,n);if(l&&!s.suppressOverrideMessage){var g=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+g),u.warn("Current logger will overwrite one already registered from "+g)}return up("diag",u,i,!0)};i.setLogger=r,i.disable=function(){pp(dO,i)},i.createComponentLogger=function(n){return new sO(n)},i.verbose=t("verbose"),i.debug=t("debug"),i.info=t("info"),i.warn=t("warn"),i.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),lO=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},uO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pO=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var i=this._entries.get(t);if(!!i)return Object.assign({},i)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var i=lO(t,2),r=i[0],n=i[1];return[r,n]})},e.prototype.setEntry=function(t,i){var r=new e(this._entries);return r._entries.set(t,i),r},e.prototype.removeEntry=function(t){var i=new e(this._entries);return i._entries.delete(t),i},e.prototype.removeEntries=function(){for(var t,i,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=new e(this._entries);try{for(var a=uO(r),o=a.next();!o.done;o=a.next()){var c=o.value;s._entries.delete(c)}}catch(d){t={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),hO=Symbol("BaggageEntryMetadata"),gO=Wn.instance();function mO(e){return e===void 0&&(e={}),new pO(new Map(Object.entries(e)))}function xP(e){return typeof e!="string"&&(gO.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:hO,toString:function(){return e}}}function cb(e){return Symbol.for(e)}var fO=function(){function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(r){return i._currentContext.get(r)},i.setValue=function(r,n){var s=new e(i._currentContext);return s._currentContext.set(r,n),s},i.deleteValue=function(r){var n=new e(i._currentContext);return n._currentContext.delete(r),n}}return e}(),Or=new fO,Fd=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),vO=function(){function e(){}return e.prototype.createHistogram=function(t,i){return CO},e.prototype.createCounter=function(t,i){return kO},e.prototype.createUpDownCounter=function(t,i){return PO},e.prototype.createObservableGauge=function(t,i){return xO},e.prototype.createObservableCounter=function(t,i){return RO},e.prototype.createObservableUpDownCounter=function(t,i){return AO},e.prototype.addBatchObservableCallback=function(t,i){},e.prototype.removeBatchObservableCallback=function(t){},e}(),db=function(){function e(){}return e}(),yO=function(e){Fd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(i,r){},t}(db),_O=function(e){Fd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(i,r){},t}(db),bO=function(e){Fd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(i,r){},t}(db),lb=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),wO=function(e){Fd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(lb),SO=function(e){Fd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(lb),EO=function(e){Fd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(lb),TO=new vO,kO=new yO,CO=new bO,PO=new _O,RO=new wO,xO=new SO,AO=new EO,IO={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},OO={set:function(e,t,i){e!=null&&(e[t]=i)}},MO=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},LO=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},DO=function(){function e(){}return e.prototype.active=function(){return Or},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return i.call.apply(i,LO([r],MO(n),!1))},e.prototype.bind=function(t,i){return i},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),NO=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},UO=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},I0="context",jO=new DO,Jm=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return up(I0,t,Wn.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,i,r){for(var n,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(n=this._getContextManager()).with.apply(n,UO([t,i,r],NO(s),!1))},e.prototype.bind=function(t,i){return this._getContextManager().bind(t,i)},e.prototype._getContextManager=function(){return Go(I0)||jO},e.prototype.disable=function(){this._getContextManager().disable(),pp(I0,Wn.instance())},e}(),Rs;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Rs||(Rs={}));var AP="0000000000000000",IP="00000000000000000000000000000000",OP={traceId:IP,spanId:AP,traceFlags:Rs.NONE},hu=function(){function e(t){t===void 0&&(t=OP),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,i){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,i){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,i){},e}(),ub=cb("OpenTelemetry Context Key SPAN");function pb(e){return e.getValue(ub)||void 0}function $O(){return pb(Jm.getInstance().active())}function hb(e,t){return e.setValue(ub,t)}function VO(e){return e.deleteValue(ub)}function FO(e,t){return hb(e,new hu(t))}function MP(e){var t;return(t=pb(e))===null||t===void 0?void 0:t.spanContext()}var BO=/^([0-9a-f]{32})$/i,zO=/^[0-9a-f]{16}$/i;function LP(e){return BO.test(e)&&e!==IP}function HO(e){return zO.test(e)&&e!==AP}function Km(e){return LP(e.traceId)&&HO(e.spanId)}function GO(e){return new hu(e)}var O0=Jm.getInstance(),DP=function(){function e(){}return e.prototype.startSpan=function(t,i,r){r===void 0&&(r=O0.active());var n=Boolean(i==null?void 0:i.root);if(n)return new hu;var s=r&&MP(r);return WO(s)&&Km(s)?new hu(s):new hu},e.prototype.startActiveSpan=function(t,i,r,n){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(s=i,o=r):(s=i,a=r,o=n);var c=a!=null?a:O0.active(),d=this.startSpan(t,s,c),l=hb(c,d);return O0.with(l,o,void 0,d)}},e}();function WO(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var qO=new DP,JO=function(){function e(t,i,r,n){this._provider=t,this.name=i,this.version=r,this.options=n}return e.prototype.startSpan=function(t,i,r){return this._getTracer().startSpan(t,i,r)},e.prototype.startActiveSpan=function(t,i,r,n){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):qO},e}(),KO=function(){function e(){}return e.prototype.getTracer=function(t,i,r){return new DP},e}(),ZO=new KO,b5=function(){function e(){}return e.prototype.getTracer=function(t,i,r){var n;return(n=this.getDelegateTracer(t,i,r))!==null&&n!==void 0?n:new JO(this,t,i,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:ZO},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,i,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,i,r)},e}(),Vg;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Vg||(Vg={}));var M1;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(M1||(M1={}));var L1;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(L1||(L1={}));var No=Jm.getInstance(),ke=Wn.instance(),QO=function(){function e(){}return e.prototype.getMeter=function(t,i,r){return TO},e}(),YO=new QO,M0="metrics",XO=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return up(M0,t,Wn.instance())},e.prototype.getMeterProvider=function(){return Go(M0)||YO},e.prototype.getMeter=function(t,i,r){return this.getMeterProvider().getMeter(t,i,r)},e.prototype.disable=function(){pp(M0,Wn.instance())},e}(),eM=XO.getInstance(),tM=function(){function e(){}return e.prototype.inject=function(t,i){},e.prototype.extract=function(t,i){return t},e.prototype.fields=function(){return[]},e}(),gb=cb("OpenTelemetry Baggage Key");function NP(e){return e.getValue(gb)||void 0}function iM(){return NP(Jm.getInstance().active())}function rM(e,t){return e.setValue(gb,t)}function nM(e){return e.deleteValue(gb)}var L0="propagation",sM=new tM,aM=function(){function e(){this.createBaggage=mO,this.getBaggage=NP,this.getActiveBaggage=iM,this.setBaggage=rM,this.deleteBaggage=nM}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return up(L0,t,Wn.instance())},e.prototype.inject=function(t,i,r){return r===void 0&&(r=OO),this._getGlobalPropagator().inject(t,i,r)},e.prototype.extract=function(t,i,r){return r===void 0&&(r=IO),this._getGlobalPropagator().extract(t,i,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){pp(L0,Wn.instance())},e.prototype._getGlobalPropagator=function(){return Go(L0)||sM},e}(),pd=aM.getInstance(),D0="trace",oM=function(){function e(){this._proxyTracerProvider=new b5,this.wrapSpanContext=GO,this.isSpanContextValid=Km,this.deleteSpan=VO,this.getSpan=pb,this.getActiveSpan=$O,this.getSpanContext=MP,this.setSpan=hb,this.setSpanContext=FO}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var i=up(D0,this._proxyTracerProvider,Wn.instance());return i&&this._proxyTracerProvider.setDelegate(t),i},e.prototype.getTracerProvider=function(){return Go(D0)||this._proxyTracerProvider},e.prototype.getTracer=function(t,i){return this.getTracerProvider().getTracer(t,i)},e.prototype.disable=function(){pp(D0,Wn.instance()),this._proxyTracerProvider=new b5},e}(),on=oM.getInstance();const Zp={context:No,diag:ke,metrics:eM,propagation:pd,trace:on};var UP=cb("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function cM(e){return e.setValue(UP,!0)}function mb(e){return e.getValue(UP)===!0}var dM="=",D1=";",N1=",",N0="baggage",lM=180,uM=4096,pM=8192,hM=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function gM(e){return e.reduce(function(t,i){var r=""+t+(t!==""?N1:"")+i;return r.length>pM?t:r},"")}function mM(e){return e.getAllEntries().map(function(t){var i=hM(t,2),r=i[0],n=i[1],s=encodeURIComponent(r)+"="+encodeURIComponent(n.value);return n.metadata!==void 0&&(s+=D1+n.metadata.toString()),s})}function fM(e){var t=e.split(D1);if(!(t.length<=0)){var i=t.shift();if(!!i){var r=i.split(dM);if(r.length===2){var n=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim()),a;return t.length>0&&(a=xP(t.join(D1))),{key:n,value:s,metadata:a}}}}}var vM=function(){function e(){}return e.prototype.inject=function(t,i,r){var n=pd.getBaggage(t);if(!(!n||mb(t))){var s=mM(n).filter(function(o){return o.length<=uM}).slice(0,lM),a=gM(s);a.length>0&&r.set(i,N0,a)}},e.prototype.extract=function(t,i,r){var n=r.get(i,N0),s=Array.isArray(n)?n.join(N1):n;if(!s)return t;var a={};if(s.length===0)return t;var o=s.split(N1);return o.forEach(function(c){var d=fM(c);if(d){var l={value:d.value};d.metadata&&(l.metadata=d.metadata),a[d.key]=l}}),Object.entries(a).length===0?t:pd.setBaggage(t,pd.createBaggage(a))},e.prototype.fields=function(){return[N0]},e}(),jP=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yM=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function $h(e){var t,i,r={};if(typeof e!="object"||e==null)return r;try{for(var n=jP(Object.entries(e)),s=n.next();!s.done;s=n.next()){var a=yM(s.value,2),o=a[0],c=a[1];if(!_M(o)){ke.warn("Invalid attribute key: "+o);continue}if(!$P(c)){ke.warn("Invalid attribute value set for key: "+o);continue}Array.isArray(c)?r[o]=c.slice():r[o]=c}}catch(d){t={error:d}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function _M(e){return typeof e=="string"&&e.length>0}function $P(e){return e==null?!0:Array.isArray(e)?bM(e):VP(e)}function bM(e){var t,i,r;try{for(var n=jP(e),s=n.next();!s.done;s=n.next()){var a=s.value;if(a!=null){if(!r){if(VP(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!0}function VP(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function wM(){return function(e){ke.error(SM(e))}}function SM(e){return typeof e=="string"?e:JSON.stringify(EM(e))}function EM(e){for(var t={},i=e;i!==null;)Object.getOwnPropertyNames(i).forEach(function(r){if(!t[r]){var n=i[r];n&&(t[r]=String(n))}}),i=Object.getPrototypeOf(i);return t}var TM=wM();function Fg(e){try{TM(e)}catch{}}var Nn;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(Nn||(Nn={}));var FP=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},kM=",",CM=["OTEL_SDK_DISABLED"];function PM(e){return CM.indexOf(e)>-1}var RM=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function xM(e){return RM.indexOf(e)>-1}var AM=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function IM(e){return AM.indexOf(e)>-1}var U1=1/0,j1=128,OM=128,MM=128,BP={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ke.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:U1,OTEL_ATTRIBUTE_COUNT_LIMIT:j1,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:U1,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:j1,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:OM,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:MM,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Nn.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function LM(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]=r.toLowerCase()==="true"}}function DM(e,t,i,r,n){if(r===void 0&&(r=-1/0),n===void 0&&(n=1/0),typeof i[e]<"u"){var s=Number(i[e]);isNaN(s)||(s<r?t[e]=r:s>n?t[e]=n:t[e]=s)}}function NM(e,t,i,r){r===void 0&&(r=kM);var n=i[e];typeof n=="string"&&(t[e]=n.split(r).map(function(s){return s.trim()}))}var UM={ALL:Ke.ALL,VERBOSE:Ke.VERBOSE,DEBUG:Ke.DEBUG,INFO:Ke.INFO,WARN:Ke.WARN,ERROR:Ke.ERROR,NONE:Ke.NONE};function jM(e,t,i){var r=i[e];if(typeof r=="string"){var n=UM[r.toUpperCase()];n!=null&&(t[e]=n)}}function $1(e){var t={};for(var i in BP){var r=i;switch(r){case"OTEL_LOG_LEVEL":jM(r,t,e);break;default:if(PM(r))LM(r,t,e);else if(xM(r))DM(r,t,e);else if(IM(r))NM(r,t,e);else{var n=e[r];typeof n<"u"&&n!==null&&(t[r]=String(n))}}}return t}function $M(){return typeof process<"u"&&process&&process.env?$1(process.env):$1(FP)}function vr(){var e=$1(FP);return Object.assign({},BP,e)}var hd=performance,VM="1.10.0",qa={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},rn={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},FM={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},gc,U0=(gc={},gc[rn.TELEMETRY_SDK_NAME]="opentelemetry",gc[rn.PROCESS_RUNTIME_NAME]="browser",gc[rn.TELEMETRY_SDK_LANGUAGE]=FM.WEBJS,gc[rn.TELEMETRY_SDK_VERSION]=VM,gc),BM=9,zM=6,HM=Math.pow(10,zM),V1=Math.pow(10,BM);function rd(e){var t=e/1e3,i=Math.trunc(t),r=Math.round(e%1e3*HM);return[i,r]}function zP(){var e=hd.timeOrigin;if(typeof e!="number"){var t=hd;e=t.timing&&t.timing.fetchStart}return e}function GM(e){var t=rd(zP()),i=rd(typeof e=="number"?e:hd.now());return GP(t,i)}function WM(e,t){var i=t[0]-e[0],r=t[1]-e[1];return r<0&&(i-=1,r+=V1),[i,r]}function HP(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function w5(e){return HP(e)||typeof e=="number"||e instanceof Date}function GP(e,t){var i=[e[0]+t[0],e[1]+t[1]];return i[1]>=V1&&(i[1]-=V1,i[0]+=1),i}var F1;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(F1||(F1={}));var qM=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JM=function(){function e(t){t===void 0&&(t={});var i;this._propagators=(i=t.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,n){return r.concat(n)},[])))}return e.prototype.inject=function(t,i,r){var n,s;try{for(var a=qM(this._propagators),o=a.next();!o.done;o=a.next()){var c=o.value;try{c.inject(t,i,r)}catch(d){ke.warn("Failed to inject with "+c.constructor.name+". Err: "+d.message)}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}},e.prototype.extract=function(t,i,r){return this._propagators.reduce(function(n,s){try{return s.extract(n,i,r)}catch(a){ke.warn("Failed to inject with "+s.constructor.name+". Err: "+a.message)}return n},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),B1="[_0-9a-z-*/]",KM="[a-z]"+B1+"{0,255}",ZM="[a-z0-9]"+B1+"{0,240}@[a-z]"+B1+"{0,13}",QM=new RegExp("^(?:"+KM+"|"+ZM+")$"),YM=/^[ -~]{0,255}[!-~]$/,XM=/,|=/;function eL(e){return QM.test(e)}function tL(e){return YM.test(e)&&!XM.test(e)}var S5=32,iL=512,E5=",",T5="=",rL=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,i){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,i),r},e.prototype.unset=function(t){var i=this._clone();return i._internalState.delete(t),i},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(i,r){return i.push(r+T5+t.get(r)),i},[]).join(E5)},e.prototype._parse=function(t){t.length>iL||(this._internalState=t.split(E5).reverse().reduce(function(i,r){var n=r.trim(),s=n.indexOf(T5);if(s!==-1){var a=n.slice(0,s),o=n.slice(s+1,r.length);eL(a)&&tL(o)&&i.set(a,o)}return i},new Map),this._internalState.size>S5&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,S5))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),j0="traceparent",$0="tracestate",nL="00",sL="(?!ff)[\\da-f]{2}",aL="(?![0]{32})[\\da-f]{32}",oL="(?![0]{16})[\\da-f]{16}",cL="[\\da-f]{2}",dL=new RegExp("^\\s?("+sL+")-("+aL+")-("+oL+")-("+cL+")(-.*)?\\s?$");function lL(e){var t=dL.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var uL=function(){function e(){}return e.prototype.inject=function(t,i,r){var n=on.getSpanContext(t);if(!(!n||mb(t)||!Km(n))){var s=nL+"-"+n.traceId+"-"+n.spanId+"-0"+Number(n.traceFlags||Rs.NONE).toString(16);r.set(i,j0,s),n.traceState&&r.set(i,$0,n.traceState.serialize())}},e.prototype.extract=function(t,i,r){var n=r.get(i,j0);if(!n)return t;var s=Array.isArray(n)?n[0]:n;if(typeof s!="string")return t;var a=lL(s);if(!a)return t;a.isRemote=!0;var o=r.get(i,$0);if(o){var c=Array.isArray(o)?o.join(","):o;a.traceState=new rL(typeof c=="string"?c:void 0)}return on.setSpanContext(t,a)},e.prototype.fields=function(){return[j0,$0]},e}(),pL="[object Object]",hL="[object Null]",gL="[object Undefined]",mL=Function.prototype,WP=mL.toString,fL=WP.call(Object),vL=yL(Object.getPrototypeOf,Object),qP=Object.prototype,JP=qP.hasOwnProperty,Eo=Symbol?Symbol.toStringTag:void 0,KP=qP.toString;function yL(e,t){return function(i){return e(t(i))}}function k5(e){if(!_L(e)||bL(e)!==pL)return!1;var t=vL(e);if(t===null)return!0;var i=JP.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&WP.call(i)===fL}function _L(e){return e!=null&&typeof e=="object"}function bL(e){return e==null?e===void 0?gL:hL:Eo&&Eo in Object(e)?wL(e):SL(e)}function wL(e){var t=JP.call(e,Eo),i=e[Eo],r=!1;try{e[Eo]=void 0,r=!0}catch{}var n=KP.call(e);return r&&(t?e[Eo]=i:delete e[Eo]),n}function SL(e){return KP.call(e)}var EL=20;function TL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=e.shift(),r=new WeakMap;e.length>0;)i=ZP(i,e.shift(),0,r);return i}function V0(e){return Bg(e)?e.slice():e}function ZP(e,t,i,r){i===void 0&&(i=0);var n;if(!(i>EL)){if(i++,Vh(e)||Vh(t)||QP(t))n=V0(t);else if(Bg(e)){if(n=e.slice(),Bg(t))for(var s=0,a=t.length;s<a;s++)n.push(V0(t[s]));else if(ml(t))for(var o=Object.keys(t),s=0,a=o.length;s<a;s++){var c=o[s];n[c]=V0(t[c])}}else if(ml(e))if(ml(t)){if(!kL(e,t))return t;n=Object.assign({},e);for(var o=Object.keys(t),s=0,a=o.length;s<a;s++){var c=o[s],d=t[c];if(Vh(d))typeof d>"u"?delete n[c]:n[c]=d;else{var l=n[c],u=d;if(C5(e,c,r)||C5(t,c,r))delete n[c];else{if(ml(l)&&ml(u)){var g=r.get(l)||[],m=r.get(u)||[];g.push({obj:e,key:c}),m.push({obj:t,key:c}),r.set(l,g),r.set(u,m)}n[c]=ZP(n[c],d,i,r)}}}}else n=t;return n}}function C5(e,t,i){for(var r=i.get(e[t])||[],n=0,s=r.length;n<s;n++){var a=r[n];if(a.key===t&&a.obj===e)return!0}return!1}function Bg(e){return Array.isArray(e)}function QP(e){return typeof e=="function"}function ml(e){return!Vh(e)&&!Bg(e)&&!QP(e)&&typeof e=="object"}function Vh(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function kL(e,t){return!(!k5(e)||!k5(t))}var CL=function(){function e(){var t=this;this._promise=new Promise(function(i,r){t._resolve=i,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),PL=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},RL=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},xL=function(){function e(t,i){this._callback=t,this._that=i,this._isCalled=!1,this._deferred=new CL}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,RL([this._that],PL(r),!1))).then(function(s){return i._deferred.resolve(s)},function(s){return i._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},e}(),AL="exception",IL=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OL=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},ML=function(){function e(t,i,r,n,s,a,o,c,d){o===void 0&&(o=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:L1.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=n,this.parentSpanId=a,this.kind=s,this.links=o;var l=Date.now();this._performanceStartTime=hd.now(),this._performanceOffset=l-(this._performanceStartTime+zP()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c!=null?c:l),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,i),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,i){return i==null||this._isSpanEnded()?this:t.length===0?(ke.warn("Invalid attribute key: "+t),this):$P(i)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(i),this):(ke.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var i,r;try{for(var n=IL(Object.entries(t)),s=n.next();!s.done;s=n.next()){var a=OL(s.value,2),o=a[0],c=a[1];this.setAttribute(o,c)}}catch(d){i={error:d}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return this},e.prototype.addEvent=function(t,i,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return ke.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(ke.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),w5(i)&&(w5(r)||(r=i),i=void 0);var n=$h(i);return this.events.push({name:t,attributes:n,time:this._getTime(r),droppedAttributesCount:0}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){ke.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=WM(this.startTime,this.endTime),this._duration[0]<0&&(ke.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(t){if(typeof t=="number"&&t<hd.now())return GM(t+this._performanceOffset);if(typeof t=="number")return rd(t);if(t instanceof Date)return rd(t.getTime());if(HP(t))return t;if(this._startTimeProvided)return rd(Date.now());var i=hd.now()-this._performanceStartTime;return GP(this.startTime,rd(i))},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,i){var r={};typeof t=="string"?r[qa.EXCEPTION_MESSAGE]=t:t&&(t.code?r[qa.EXCEPTION_TYPE]=t.code.toString():t.name&&(r[qa.EXCEPTION_TYPE]=t.name),t.message&&(r[qa.EXCEPTION_MESSAGE]=t.message),t.stack&&(r[qa.EXCEPTION_STACKTRACE]=t.stack)),r[qa.EXCEPTION_TYPE]||r[qa.EXCEPTION_MESSAGE]?this.addEvent(AL,r,i):ke.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&ke.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,i){return t.length<=i?t:t.substr(0,i)},e.prototype._truncateToSize=function(t){var i=this,r=this._attributeValueLengthLimit;return r<=0?(ke.warn("Attribute value limit must be positive, got "+r),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(function(n){return typeof n=="string"?i._truncateToLimitUtil(n,r):n}):t},e}(),Id;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Id||(Id={}));var zg=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Id.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),gd=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Id.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),F0=function(){function e(t){var i,r,n,s;this._root=t.root,this._root||(Fg(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new gd),this._remoteParentSampled=(i=t.remoteParentSampled)!==null&&i!==void 0?i:new gd,this._remoteParentNotSampled=(r=t.remoteParentNotSampled)!==null&&r!==void 0?r:new zg,this._localParentSampled=(n=t.localParentSampled)!==null&&n!==void 0?n:new gd,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new zg}return e.prototype.shouldSample=function(t,i,r,n,s,a){var o=on.getSpanContext(t);return!o||!Km(o)?this._root.shouldSample(t,i,r,n,s,a):o.isRemote?o.traceFlags&Rs.SAMPLED?this._remoteParentSampled.shouldSample(t,i,r,n,s,a):this._remoteParentNotSampled.shouldSample(t,i,r,n,s,a):o.traceFlags&Rs.SAMPLED?this._localParentSampled.shouldSample(t,i,r,n,s,a):this._localParentNotSampled.shouldSample(t,i,r,n,s,a)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),P5=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,i){return{decision:LP(i)&&this._accumulate(i)<this._upperBound?Id.RECORD_AND_SAMPLED:Id.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var i=0,r=0;r<t.length/8;r++){var n=r*8,s=parseInt(t.slice(n,n+8),16);i=(i^s)>>>0}return i},e}(),LL=vr(),DL=Nn.AlwaysOn,mc=1;function YP(){return{sampler:XP(LL),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:vr().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:vr().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:vr().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:vr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:vr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:vr().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:vr().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:vr().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function XP(e){switch(e===void 0&&(e=vr()),e.OTEL_TRACES_SAMPLER){case Nn.AlwaysOn:return new gd;case Nn.AlwaysOff:return new zg;case Nn.ParentBasedAlwaysOn:return new F0({root:new gd});case Nn.ParentBasedAlwaysOff:return new F0({root:new zg});case Nn.TraceIdRatio:return new P5(R5(e));case Nn.ParentBasedTraceIdRatio:return new F0({root:new P5(R5(e))});default:return ke.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+DL+'".'),new gd}}function R5(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return ke.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+mc+"."),mc;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(ke.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+mc+"."),mc):t<0||t>1?(ke.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+mc+"."),mc):t}function NL(e){var t={sampler:XP()},i=YP(),r=Object.assign({},i,t,e);return r.generalLimits=Object.assign({},i.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},i.spanLimits,e.spanLimits||{}),r}function UL(e){var t,i,r,n,s,a,o,c,d,l,u,g,m=Object.assign({},e.spanLimits),f=$M();return m.attributeCountLimit=(a=(s=(n=(i=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&i!==void 0?i:(r=e.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&n!==void 0?n:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:f.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:j1,m.attributeValueLengthLimit=(g=(u=(l=(c=(o=e.spanLimits)===null||o===void 0?void 0:o.attributeValueLengthLimit)!==null&&c!==void 0?c:(d=e.generalLimits)===null||d===void 0?void 0:d.attributeValueLengthLimit)!==null&&l!==void 0?l:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&u!==void 0?u:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&g!==void 0?g:U1,Object.assign({},e,{spanLimits:m})}var jL=function(){function e(t,i){this._exporter=t,this._finishedSpans=[],this._droppedSpansCount=0;var r=vr();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new xL(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ke.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,i){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&Rs.SAMPLED)!==0&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&ke.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(ke.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},e.prototype._flushAll=function(){var t=this;return new Promise(function(i,r){for(var n=[],s=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),a=0,o=s;a<o;a++)n.push(t._flushOneBatch());Promise.all(n).then(function(){i()}).catch(r)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(i,r){var n=setTimeout(function(){r(new Error("Timeout"))},t._exportTimeoutMillis);No.with(cM(No.active()),function(){var s=t._finishedSpans.splice(0,t._maxExportBatchSize),a=function(){return t._exporter.export(s,function(c){var d;clearTimeout(n),c.code===F1.SUCCESS?i():r((d=c.error)!==null&&d!==void 0?d:new Error("BatchSpanProcessor: span export failed"))})},o=s.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});o.length===0?a():Promise.all(o.map(function(c){var d;return(d=c.waitForAsyncAttributes)===null||d===void 0?void 0:d.call(c)})).then(a,function(c){Fg(c),r(c)})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(i){Fg(i)})},this._scheduledDelayMillis),this._timer,void 0)},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),$L=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e3=function(e){$L(t,e);function t(i,r){var n=e.call(this,i,r)||this;return n.onInit(r),n}return t.prototype.onInit=function(i){var r=this;(i==null?void 0:i.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&r.forceFlush()},this._pageHideListener=function(){r.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(jL),VL=8,FL=16,BL=function(){function e(){this.generateTraceId=x5(FL),this.generateSpanId=x5(VL)}return e}(),Qp=Array(32);function x5(e){return function(){for(var i=0;i<e*2;i++)Qp[i]=Math.floor(Math.random()*16)+48,Qp[i]>=58&&(Qp[i]+=39);return String.fromCharCode.apply(null,Qp.slice(0,e*2))}}var zL=function(){function e(t,i,r){this._tracerProvider=r;var n=NL(i);this._sampler=n.sampler,this._generalLimits=n.generalLimits,this._spanLimits=n.spanLimits,this._idGenerator=i.idGenerator||new BL,this.resource=r.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,i,r){var n,s,a;i===void 0&&(i={}),r===void 0&&(r=No.active()),i.root&&(r=on.deleteSpan(r));var o=on.getSpan(r);if(mb(r)){ke.debug("Instrumentation suppressed, returning Noop Span");var c=on.wrapSpanContext(OP);return c}var d=o==null?void 0:o.spanContext(),l=this._idGenerator.generateSpanId(),u,g,m;!d||!on.isSpanContextValid(d)?u=this._idGenerator.generateTraceId():(u=d.traceId,g=d.traceState,m=d.spanId);var f=(n=i.kind)!==null&&n!==void 0?n:M1.INTERNAL,w=((s=i.links)!==null&&s!==void 0?s:[]).map(function(O){return{context:O.context,attributes:$h(O.attributes)}}),S=$h(i.attributes),y=this._sampler.shouldSample(r,u,t,f,S,w);g=(a=y.traceState)!==null&&a!==void 0?a:g;var _=y.decision===Vg.RECORD_AND_SAMPLED?Rs.SAMPLED:Rs.NONE,T={traceId:u,spanId:l,traceFlags:_,traceState:g};if(y.decision===Vg.NOT_RECORD){ke.debug("Recording is off, propagating context in a non-recording span");var c=on.wrapSpanContext(T);return c}var P=new ML(this,r,t,T,f,m,w,i.startTime),L=$h(Object.assign(S,y.attributes));return P.setAttributes(L),P},e.prototype.startActiveSpan=function(t,i,r,n){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(s=i,o=r):(s=i,a=r,o=n);var c=a!=null?a:No.active(),d=this.startSpan(t,s,c),l=on.setSpan(c,d);return No.with(l,o,void 0,d)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();function HL(){return"unknown_service"}var aa=globalThis&&globalThis.__assign||function(){return aa=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},aa.apply(this,arguments)},GL=globalThis&&globalThis.__awaiter||function(e,t,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{d(r.next(l))}catch(u){a(u)}}function c(l){try{d(r.throw(l))}catch(u){a(u)}}function d(l){l.done?s(l.value):n(l.value).then(o,c)}d((r=r.apply(e,t||[])).next())})},WL=globalThis&&globalThis.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],n=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},qL=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},A5=function(){function e(t,i){var r=this;this._attributes=t,this.asyncAttributesPending=i!=null,this._syncAttributes=t,this._asyncAttributesPromise=i==null?void 0:i.then(function(n){return r._attributes=Object.assign({},r._attributes,n),r.asyncAttributesPending=!1,n},function(n){return ke.debug("a resource's async attributes promise rejected: %s",n),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[rn.SERVICE_NAME]=HL(),t[rn.TELEMETRY_SDK_LANGUAGE]=U0[rn.TELEMETRY_SDK_LANGUAGE],t[rn.TELEMETRY_SDK_NAME]=U0[rn.TELEMETRY_SDK_NAME],t[rn.TELEMETRY_SDK_VERSION]=U0[rn.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){return this.asyncAttributesPending&&ke.error("Accessing resource attributes before async attributes settled"),this._attributes},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return GL(this,void 0,void 0,function(){return WL(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var i=this,r;if(!t)return this;var n=aa(aa({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(a){var o,c=qL(a,2),d=c[0],l=c[1];return aa(aa(aa(aa({},i._syncAttributes),d),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes),l)});return new e(n,s)},e.EMPTY=new e({}),e}(),Yp=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JL=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,i,r=[];try{for(var n=Yp(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;r.push(a.forceFlush())}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return new Promise(function(o){Promise.all(r).then(function(){o()}).catch(function(c){Fg(c||new Error("MultiSpanProcessor: forceFlush failed")),o()})})},e.prototype.onStart=function(t,i){var r,n;try{for(var s=Yp(this._spanProcessors),a=s.next();!a.done;a=s.next()){var o=a.value;o.onStart(t,i)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.onEnd=function(t){var i,r;try{for(var n=Yp(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;a.onEnd(t)}}catch(o){i={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}},e.prototype.shutdown=function(){var t,i,r=[];try{for(var n=Yp(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;r.push(a.shutdown())}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return new Promise(function(o,c){Promise.all(r).then(function(){o()},c)})},e}(),KL=function(){function e(){}return e.prototype.onStart=function(t,i){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),To;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(To||(To={}));var ZL=function(){function e(t){t===void 0&&(t={});var i;this._registeredSpanProcessors=[],this._tracers=new Map;var r=TL({},YP(),UL(t));this.resource=(i=r.resource)!==null&&i!==void 0?i:A5.empty(),this.resource=A5.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var n=this._buildExporterFromEnv();if(n!==void 0){var s=new e3(n);this.activeSpanProcessor=s}else this.activeSpanProcessor=new KL}return e.prototype.getTracer=function(t,i,r){var n=t+"@"+(i||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(n)||this._tracers.set(n,new zL({name:t,version:i,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(i){return ke.error("Error while trying to shutdown current span processor",i)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new JL(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),on.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&No.setGlobalContextManager(t.contextManager),t.propagator&&pd.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,i=this._registeredSpanProcessors.map(function(r){return new Promise(function(n){var s,a=setTimeout(function(){n(new Error("Span processor did not completed within timeout period of "+t+" ms")),s=To.timeout},t);r.forceFlush().then(function(){clearTimeout(a),s!==To.timeout&&(s=To.resolved,n(s))}).catch(function(o){clearTimeout(a),s=To.error,n(o)})})});return new Promise(function(r,n){Promise.all(i).then(function(s){var a=s.filter(function(o){return o!==To.resolved});a.length>0?n(a):r()}).catch(function(s){return n([s])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var i;return(i=this.constructor._registeredPropagators.get(t))===null||i===void 0?void 0:i()},e.prototype._getSpanExporter=function(t){var i;return(i=this.constructor._registeredExporters.get(t))===null||i===void 0?void 0:i()},e.prototype._buildPropagatorFromEnv=function(){var t=this,i=Array.from(new Set(vr().OTEL_PROPAGATORS)),r=i.map(function(s){var a=t._getPropagator(s);return a||ke.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),a}),n=r.reduce(function(s,a){return a&&s.push(a),s},[]);if(n.length!==0)return i.length===1?n[0]:new JM({propagators:n})},e.prototype._buildExporterFromEnv=function(){var t=vr().OTEL_TRACES_EXPORTER;if(!(t==="none"||t==="")){var i=this._getSpanExporter(t);return i||ke.error('Exporter "'+t+'" requested through environment variable is unavailable.'),i}},e._registeredPropagators=new Map([["tracecontext",function(){return new uL}],["baggage",function(){return new vM}]]),e._registeredExporters=new Map,e}(),QL=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},YL=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},t3=function(){function e(){this._enabled=!1,this._currentContext=Or}return e.prototype._bindFunction=function(t,i){t===void 0&&(t=Or);var r=this,n=function(){for(var s=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(t,function(){return i.apply(s,a)})};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),n},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(t,i){return t===void 0&&(t=this.active()),typeof i=="function"?this._bindFunction(t,i):i},e.prototype.disable=function(){return this._currentContext=Or,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=Or,this)},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._currentContext;this._currentContext=t||Or;try{return i.call.apply(i,YL([r],QL(n),!1))}finally{this._currentContext=a}},e}(),XL=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),eD=function(e){XL(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;if(i.contextManager)throw"contextManager should be defined in register method not in constructor";if(i.propagator)throw"propagator should be defined in register method not in constructor";return r}return t.prototype.register=function(i){i===void 0&&(i={}),i.contextManager===void 0&&(i.contextManager=new t3),i.contextManager&&i.contextManager.enable(),e.prototype.register.call(this,i)},t}(ZL),tD="=",I5=";",iD=",";globalThis&&globalThis.__read;function rD(e){var t=e.split(I5);if(!(t.length<=0)){var i=t.shift();if(!!i){var r=i.split(tD);if(r.length===2){var n=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim()),a;return t.length>0&&(a=xP(t.join(I5))),{key:n,value:s,metadata:a}}}}}function i3(e){return typeof e!="string"||e.length===0?{}:e.split(iD).map(function(t){return rD(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,i){return t[i.key]=i.value,t},{})}var z1;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(z1||(z1={}));var nD=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},sD=",",aD=["OTEL_SDK_DISABLED"];function oD(e){return aD.indexOf(e)>-1}var cD=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function dD(e){return cD.indexOf(e)>-1}var lD=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function uD(e){return lD.indexOf(e)>-1}var O5=1/0,M5=128,pD=128,hD=128,r3={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ke.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:O5,OTEL_ATTRIBUTE_COUNT_LIMIT:M5,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:O5,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:M5,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:pD,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:hD,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:z1.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function gD(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]=r.toLowerCase()==="true"}}function mD(e,t,i,r,n){if(r===void 0&&(r=-1/0),n===void 0&&(n=1/0),typeof i[e]<"u"){var s=Number(i[e]);isNaN(s)||(s<r?t[e]=r:s>n?t[e]=n:t[e]=s)}}function fD(e,t,i,r){r===void 0&&(r=sD);var n=i[e];typeof n=="string"&&(t[e]=n.split(r).map(function(s){return s.trim()}))}var vD={ALL:Ke.ALL,VERBOSE:Ke.VERBOSE,DEBUG:Ke.DEBUG,INFO:Ke.INFO,WARN:Ke.WARN,ERROR:Ke.ERROR,NONE:Ke.NONE};function yD(e,t,i){var r=i[e];if(typeof r=="string"){var n=vD[r.toUpperCase()];n!=null&&(t[e]=n)}}function _D(e){var t={};for(var i in r3){var r=i;switch(r){case"OTEL_LOG_LEVEL":yD(r,t,e);break;default:if(oD(r))gD(r,t,e);else if(dD(r))mD(r,t,e);else if(uD(r))fD(r,t,e);else{var n=e[r];typeof n<"u"&&n!==null&&(t[r]=String(n))}}}return t}function la(){var e=_D(nD);return Object.assign({},r3,e)}function gu(e){for(var t=e.length,i="",r=0;r<t;r+=2){var n=e.substring(r,r+2),s=parseInt(n,16);i+=String.fromCharCode(s)}return btoa(i)}var bD=9,wD=Math.pow(10,bD);function H1(e){return e[0]*wD+e[1]}var nd;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(nd||(nd={}));var SD=function(){function e(){var t=this;this._promise=new Promise(function(i,r){t._resolve=i,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),ED=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},TD=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},kD=function(){function e(t,i){this._callback=t,this._that=i,this._isCalled=!1,this._deferred=new SD}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,TD([this._that],ED(r),!1))).then(function(s){return i._deferred.resolve(s)},function(s){return i._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},e}(),CD=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},n3=1e4,PD=5,RD=1e3,xD=5e3,AD=1.5;function ID(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(i){var r=CD(i,2),n=r[0],s=r[1];typeof s<"u"?t[n]=String(s):ke.warn('Header "'+n+'" has wrong value and will be ignored')}),t}function OD(e,t){return e.endsWith("/")||(e=e+"/"),e+t}function MD(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return ke.warn("Could not parse export URL: '"+e+"'"),e}}function LD(e){return typeof e=="number"?e<=0?s3(e,n3):e:DD()}function DD(){var e,t=Number((e=la().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:la().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?s3(t,n3):t}function s3(e,t){return ke.warn("Timeout must be greater than 0",e),t}function ND(e){var t=[429,502,503,504];return t.includes(e)}function UD(e){if(e==null)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;var i=new Date(e).getTime()-Date.now();return i>=0?i:0}var jD=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new kD(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=LD(t.timeoutMillis),this.onInit(t)}return e.prototype.export=function(t,i){if(this._shutdownOnce.isCalled){i({code:nd.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){i({code:nd.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){i({code:nd.SUCCESS})}).catch(function(r){i({code:nd.FAILED,error:r})})},e.prototype._export=function(t){var i=this;return new Promise(function(r,n){try{ke.debug("items to be sent",t),i.send(t,r,n)}catch(s){n(s)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return ke.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},e}(),$D=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),zl=function(e){$D(t,e);function t(i,r,n){var s=e.call(this,i)||this;return s.name="OTLPExporterError",s.data=n,s.code=r,s}return t}(Error),Hg=globalThis&&globalThis.__assign||function(){return Hg=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Hg.apply(this,arguments)},VD=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function FD(e,t,i,r,n){if(navigator.sendBeacon(t,new Blob([e],i)))ke.debug("sendBeacon - can send",e),r();else{var s=new zl("sendBeacon - cannot send "+e);n(s)}}function BD(e,t,i,r,n,s){var a,o,c=!1,d=setTimeout(function(){if(clearTimeout(a),c=!0,o.readyState===XMLHttpRequest.DONE){var u=new zl("Request Timeout");s(u)}else o.abort()},r),l=function(u,g){u===void 0&&(u=PD),g===void 0&&(g=RD),o=new XMLHttpRequest,o.open("POST",t);var m={Accept:"application/json","Content-Type":"application/json"};Object.entries(Hg(Hg({},m),i)).forEach(function(f){var w=VD(f,2),S=w[0],y=w[1];o.setRequestHeader(S,y)}),o.send(e),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&c===!1)if(o.status>=200&&o.status<=299)ke.debug("xhr success",e),n(),clearTimeout(d),clearTimeout(a);else if(o.status&&ND(o.status)&&u>0){var f=void 0;g=AD*g,o.getResponseHeader("Retry-After")?f=UD(o.getResponseHeader("Retry-After")):f=Math.round(Math.random()*(xD-g)+g),a=setTimeout(function(){l(u-1,g)},f)}else{var w=new zl("Failed to export with XHR (status: "+o.status+")",o.status);s(w),clearTimeout(d),clearTimeout(a)}},o.onabort=function(){if(c){var f=new zl("Request Timeout");s(f)}clearTimeout(d),clearTimeout(a)},o.onerror=function(){if(c){var f=new zl("Request Timeout");s(f)}clearTimeout(d),clearTimeout(a)}};l()}var zD=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),HD=function(e){zD(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;return r._useXHR=!1,r._useXHR=!!i.headers||typeof navigator.sendBeacon!="function",r._useXHR?r._headers=Object.assign({},ID(i.headers),i3(la().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return t.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},t.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},t.prototype.send=function(i,r,n){var s=this;if(this._shutdownOnce.isCalled){ke.debug("Shutdown already started. Cannot send objects");return}var a=this.convert(i),o=JSON.stringify(a),c=new Promise(function(l,u){s._useXHR?BD(o,s.url,s._headers,s.timeoutMillis,l,u):FD(o,s.url,{type:"application/json"},l,u)}).then(r,n);this._sendingPromises.push(c);var d=function(){var l=s._sendingPromises.indexOf(c);s._sendingPromises.splice(l,1)};c.then(d,d)},t}(jD),GD=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function Zm(e){return Object.keys(e).map(function(t){return a3(t,e[t])})}function a3(e,t){return{key:e,value:o3(t)}}function o3(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(o3)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(i){var r=GD(i,2),n=r[0],s=r[1];return a3(n,s)})}}:{}}function WD(e,t){var i,r=e.spanContext(),n=e.status,s=t?e.parentSpanId:e.parentSpanId!=null?gu(e.parentSpanId):void 0;return{traceId:t?r.traceId:gu(r.traceId),spanId:t?r.spanId:gu(r.spanId),parentSpanId:s,traceState:(i=r.traceState)===null||i===void 0?void 0:i.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:H1(e.startTime),endTimeUnixNano:H1(e.endTime),attributes:Zm(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(JD),droppedEventsCount:e.droppedEventsCount,status:{code:n.code,message:n.message},links:e.links.map(function(a){return qD(a,t)}),droppedLinksCount:e.droppedLinksCount}}function qD(e,t){var i;return{attributes:e.attributes?Zm(e.attributes):[],spanId:t?e.context.spanId:gu(e.context.spanId),traceId:t?e.context.traceId:gu(e.context.traceId),traceState:(i=e.context.traceState)===null||i===void 0?void 0:i.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}function JD(e){return{attributes:e.attributes?Zm(e.attributes):[],name:e.name,timeUnixNano:H1(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var KD=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ZD=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function QD(e,t){return{resourceSpans:XD(e,t)}}function YD(e){var t,i,r=new Map;try{for(var n=KD(e),s=n.next();!s.done;s=n.next()){var a=s.value,o=r.get(a.resource);o||(o=new Map,r.set(a.resource,o));var c=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),d=o.get(c);d||(d=[],o.set(c,d)),d.push(a)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function XD(e,t){for(var i=YD(e),r=[],n=i.entries(),s=n.next();!s.done;){for(var a=ZD(s.value,2),o=a[0],c=a[1],d=[],l=c.values(),u=l.next();!u.done;){var g=u.value;if(g.length>0){var m=g[0].instrumentationLibrary,f=m.name,w=m.version,S=m.schemaUrl,y=g.map(function(T){return WD(T,t)});d.push({scope:{name:f,version:w},spans:y,schemaUrl:S})}u=l.next()}var _={resource:{attributes:Zm(o.attributes),droppedAttributesCount:0},scopeSpans:d,schemaUrl:void 0};r.push(_),s=n.next()}return r}var eN=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),c3="v1/traces",tN="http://localhost:4318/"+c3,iN=function(e){eN(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;return r._headers=Object.assign(r._headers,i3(la().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),r}return t.prototype.convert=function(i){return QD(i,!0)},t.prototype.getDefaultUrl=function(i){return typeof i.url=="string"?i.url:la().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?MD(la().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):la().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?OD(la().OTEL_EXPORTER_OTLP_ENDPOINT,c3):tN},t}(HD);function rN(e){return e===void 0&&(e={}),typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"}var L5="OT_ZONE_CONTEXT",nN=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(t){return t&&t.get(L5)||Or},e.prototype._bindFunction=function(t,i){var r=this,n=function(){for(var s=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(t,function(){return i.apply(s,a)})};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),n},e.prototype._bindListener=function(t,i){var r=i;return r.__ot_listeners!==void 0||(r.__ot_listeners={},typeof r.addEventListener=="function"&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,t)),typeof r.removeEventListener=="function"&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),i},e.prototype._createZoneName=function(){this._zoneCounter++;var t=Math.random();return this._zoneCounter+"-"+t},e.prototype._createZone=function(t,i){var r;return Zone.current.fork({name:t,properties:(r={},r[L5]=i,r)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(t,i,r){var n=this;return function(s,a,o){t.__ot_listeners===void 0&&(t.__ot_listeners={});var c=t.__ot_listeners[s];c===void 0&&(c=new WeakMap,t.__ot_listeners[s]=c);var d=n.bind(r,a);return c.set(a,d),i.call(this,s,d,o)}},e.prototype._patchRemoveEventListener=function(t,i){return function(r,n){if(t.__ot_listeners===void 0||t.__ot_listeners[r]===void 0)return i.call(this,r,n);var s=t.__ot_listeners[r],a=s.get(n);return s.delete(n),i.call(this,r,a||n)}},e.prototype.active=function(){if(!this._enabled)return Or;var t=this._getActiveZone(),i=this._activeContextFromZone(t);return i||Or},e.prototype.bind=function(t,i){return t===void 0&&(t=this.active()),typeof i=="function"?this._bindFunction(t,i):(rN(i)&&this._bindListener(t,i),i)},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._createZoneName(),o=this._createZone(a,t);return o.run(i,r,n)},e}(),nn={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},sN={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},aN="1.13.0",fc,B0=(fc={},fc[nn.TELEMETRY_SDK_NAME]="opentelemetry",fc[nn.PROCESS_RUNTIME_NAME]="browser",fc[nn.TELEMETRY_SDK_LANGUAGE]=sN.WEBJS,fc[nn.TELEMETRY_SDK_VERSION]=aN,fc);function oN(){return"unknown_service"}var oa=globalThis&&globalThis.__assign||function(){return oa=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},oa.apply(this,arguments)},cN=globalThis&&globalThis.__awaiter||function(e,t,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{d(r.next(l))}catch(u){a(u)}}function c(l){try{d(r.throw(l))}catch(u){a(u)}}function d(l){l.done?s(l.value):n(l.value).then(o,c)}d((r=r.apply(e,t||[])).next())})},dN=globalThis&&globalThis.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],n=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},lN=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},uN=function(){function e(t,i){var r=this,n;this._attributes=t,this.asyncAttributesPending=i!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=i==null?void 0:i.then(function(s){return r._attributes=Object.assign({},r._attributes,s),r.asyncAttributesPending=!1,s},function(s){return ke.debug("a resource's async attributes promise rejected: %s",s),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[nn.SERVICE_NAME]=oN(),t[nn.TELEMETRY_SDK_LANGUAGE]=B0[nn.TELEMETRY_SDK_LANGUAGE],t[nn.TELEMETRY_SDK_NAME]=B0[nn.TELEMETRY_SDK_NAME],t[nn.TELEMETRY_SDK_VERSION]=B0[nn.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&ke.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return cN(this,void 0,void 0,function(){return dN(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var i=this,r;if(!t)return this;var n=oa(oa({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(a){var o,c=lN(a,2),d=c[0],l=c[1];return oa(oa(oa(oa({},i._syncAttributes),d),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes),l)});return new e(n,s)},e.EMPTY=new e({}),e}();function fb(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function pN(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}let gs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Qm=[];for(let e=0;e<gs.length;e++)Qm[gs[e].charCodeAt(0)]=e;Qm["-".charCodeAt(0)]=gs.indexOf("+");Qm["_".charCodeAt(0)]=gs.indexOf("/");function hN(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let i=new Uint8Array(t),r=0,n=0,s,a=0;for(let o=0;o<e.length;o++){if(s=Qm[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":n=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(n){case 0:a=s,n=1;break;case 1:i[r++]=a<<2|(s&48)>>4,a=s,n=2;break;case 2:i[r++]=(a&15)<<4|(s&60)>>2,a=s,n=3;break;case 3:i[r++]=(a&3)<<6|s,n=0;break}}if(n==1)throw Error("invalid base64 string.");return i.subarray(0,r)}function gN(e){let t="",i=0,r,n=0;for(let s=0;s<e.length;s++)switch(r=e[s],i){case 0:t+=gs[r>>2],n=(r&3)<<4,i=1;break;case 1:t+=gs[n|r>>4],n=(r&15)<<2,i=2;break;case 2:t+=gs[n|r>>6],t+=gs[r&63],i=0;break}return i&&(t+=gs[n],t+="=",i==1&&(t+="=")),t}var Gg;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(i,r,n,s,a)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:n,wireType:s,data:a})},e.onWrite=(i,r,n)=>{for(let{no:s,wireType:a,data:o}of e.list(r))n.tag(s,a).raw(o)},e.list=(i,r)=>{if(t(i)){let n=i[e.symbol];return r?n.filter(s=>s.no==r):n}return[]},e.last=(i,r)=>e.list(i,r).slice(-1)[0];const t=i=>i&&Array.isArray(i[e.symbol])})(Gg||(Gg={}));var Dt;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Dt||(Dt={}));function mN(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(n&127)<<r,(n&128)==0)return this.assertBounds(),[e,t]}let i=this.buf[this.pos++];if(e|=(i&15)<<28,t=(i&112)>>4,(i&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(n&127)<<r,(n&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function z0(e,t,i){for(let s=0;s<28;s=s+7){const a=e>>>s,o=!(a>>>7==0&&t==0),c=(o?a|128:a)&255;if(i.push(c),!o)return}const r=e>>>28&15|(t&7)<<4,n=t>>3!=0;if(i.push((n?r|128:r)&255),!!n){for(let s=3;s<31;s=s+7){const a=t>>>s,o=a>>>7!=0,c=(o?a|128:a)&255;if(i.push(c),!o)return}i.push(t>>>31&1)}}const Fh=(1<<16)*(1<<16);function d3(e){let t=e[0]=="-";t&&(e=e.slice(1));const i=1e6;let r=0,n=0;function s(a,o){const c=Number(e.slice(a,o));n*=i,r=r*i+c,r>=Fh&&(n=n+(r/Fh|0),r=r%Fh)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,n]}function G1(e,t){if(t<=2097151)return""+(Fh*t+(e>>>0));let i=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,n=t>>16&65535,s=i+r*6777216+n*6710656,a=r+n*8147497,o=n*2,c=1e7;s>=c&&(a+=Math.floor(s/c),s%=c),a>=c&&(o+=Math.floor(a/c),a%=c);function d(l,u){let g=l?String(l):"";return u?"0000000".slice(g.length)+g:g}return d(o,0)+d(a,o)+d(s,1)}function D5(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let i=0;i<9;i++)t.push(e&127|128),e=e>>7;t.push(1)}}function fN(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let i=5;(e&128)!==0&&i<10;i++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function vN(){const e=new DataView(new ArrayBuffer(8));return globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}const nt=vN();function l3(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const u3=/^-?[0-9]+$/,Wg=(1<<16)*(1<<16);class p3{constructor(t,i){this.lo=t|0,this.hi=i|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let t=this.hi*Wg+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}}class Li extends p3{static from(t){if(nt)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=nt.C(t);case"number":if(t===0)return this.ZERO;t=nt.C(t);case"bigint":if(!t)return this.ZERO;if(t<nt.UMIN)throw new Error("signed value for ulong");if(t>nt.UMAX)throw new Error("ulong too large");return nt.V.setBigUint64(0,t,!0),new Li(nt.V.getInt32(0,!0),nt.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!u3.test(t))throw new Error("string is no integer");let[i,r,n]=d3(t);if(i)throw new Error("signed value");return new Li(r,n);case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new Li(t,t/Wg)}throw new Error("unknown value "+typeof t)}toString(){return nt?this.toBigInt().toString():G1(this.lo,this.hi)}toBigInt(){return l3(nt),nt.V.setInt32(0,this.lo,!0),nt.V.setInt32(4,this.hi,!0),nt.V.getBigUint64(0,!0)}}Li.ZERO=new Li(0,0);class at extends p3{static from(t){if(nt)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=nt.C(t);case"number":if(t===0)return this.ZERO;t=nt.C(t);case"bigint":if(!t)return this.ZERO;if(t<nt.MIN)throw new Error("ulong too small");if(t>nt.MAX)throw new Error("ulong too large");return nt.V.setBigInt64(0,t,!0),new at(nt.V.getInt32(0,!0),nt.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!u3.test(t))throw new Error("string is no integer");let[i,r,n]=d3(t),s=new at(r,n);return i?s.negate():s;case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new at(t,t/Wg):new at(-t,-t/Wg).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return(this.hi&2147483648)!==0}negate(){let t=~this.hi,i=this.lo;return i?i=~i+1:t+=1,new at(i,t)}toString(){if(nt)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+G1(t.lo,t.hi)}return G1(this.lo,this.hi)}toBigInt(){return l3(nt),nt.V.setInt32(0,this.lo,!0),nt.V.setInt32(4,this.hi,!0),nt.V.getBigInt64(0,!0)}}at.ZERO=new at(0,0);const N5={readUnknownField:!0,readerFactory:e=>new _N(e)};function yN(e){return e?Object.assign(Object.assign({},N5),e):N5}class _N{constructor(t,i){this.varint64=mN,this.uint32=fN,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=i!=null?i:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let t=this.uint32(),i=t>>>3,r=t&7;if(i<=0||r<0||r>5)throw new Error("illegal tag: field no "+i+" wire type "+r);return[i,r]}skip(t){let i=this.pos;switch(t){case Dt.Varint:for(;this.buf[this.pos++]&128;);break;case Dt.Bit64:this.pos+=4;case Dt.Bit32:this.pos+=4;break;case Dt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Dt.StartGroup:let n;for(;(n=this.tag()[1])!==Dt.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return new at(...this.varint64())}uint64(){return new Li(...this.varint64())}sint64(){let[t,i]=this.varint64(),r=-(t&1);return t=(t>>>1|(i&1)<<31)^r,i=i>>>1^r,new at(t,i)}bool(){let[t,i]=this.varint64();return t!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Li(this.sfixed32(),this.sfixed32())}sfixed64(){return new at(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),i=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(i,i+t)}string(){return this.textDecoder.decode(this.bytes())}}function We(e,t){if(!e)throw new Error(t)}const bN=34028234663852886e22,wN=-34028234663852886e22,SN=4294967295,EN=2147483647,TN=-2147483648;function mu(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>EN||e<TN)throw new Error("invalid int 32: "+e)}function qg(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>SN||e<0)throw new Error("invalid uint 32: "+e)}function vb(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(!!Number.isFinite(e)&&(e>bN||e<wN))throw new Error("invalid float 32: "+e)}const U5={writeUnknownFields:!0,writerFactory:()=>new CN};function kN(e){return e?Object.assign(Object.assign({},U5),e):U5}class CN{constructor(t){this.stack=[],this.textEncoder=t!=null?t:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let n=0;n<this.chunks.length;n++)t+=this.chunks[n].length;let i=new Uint8Array(t),r=0;for(let n=0;n<this.chunks.length;n++)i.set(this.chunks[n],r),r+=this.chunks[n].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,i){return this.uint32((t<<3|i)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(qg(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return mu(t),D5(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let i=this.textEncoder.encode(t);return this.uint32(i.byteLength),this.raw(i)}float(t){vb(t);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,t,!0),this.raw(i)}double(t){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,t,!0),this.raw(i)}fixed32(t){qg(t);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,t,!0),this.raw(i)}sfixed32(t){mu(t);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,t,!0),this.raw(i)}sint32(t){return mu(t),t=(t<<1^t>>31)>>>0,D5(t,this.buf),this}sfixed64(t){let i=new Uint8Array(8),r=new DataView(i.buffer),n=at.from(t);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(i)}fixed64(t){let i=new Uint8Array(8),r=new DataView(i.buffer),n=Li.from(t);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(i)}int64(t){let i=at.from(t);return z0(i.lo,i.hi,this.buf),this}sint64(t){let i=at.from(t),r=i.hi>>31,n=i.lo<<1^r,s=(i.hi<<1|i.lo>>>31)^r;return z0(n,s,this.buf),this}uint64(t){let i=Li.from(t);return z0(i.lo,i.hi,this.buf),this}}const j5={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},$5={ignoreUnknownFields:!1};function PN(e){return e?Object.assign(Object.assign({},$5),e):$5}function RN(e){return e?Object.assign(Object.assign({},j5),e):j5}const xN=Symbol.for("protobuf-ts/message-type");function V5(e){let t=!1;const i=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);n=="_"?t=!0:/\d/.test(n)?(i.push(n),t=!0):t?(i.push(n.toUpperCase()),t=!1):r==0?i.push(n.toLowerCase()):i.push(n)}return i.join("")}var D;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(D||(D={}));var Hn;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"})(Hn||(Hn={}));var Jg;(function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"})(Jg||(Jg={}));function AN(e){var t,i,r,n;return e.localName=(t=e.localName)!==null&&t!==void 0?t:V5(e.name),e.jsonName=(i=e.jsonName)!==null&&i!==void 0?i:V5(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:Jg.NO,e.opt=(n=e.opt)!==null&&n!==void 0?n:e.repeat||e.oneof?!1:e.kind=="message",e}function IN(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}class ON{constructor(t){var i;this.fields=(i=t.fields)!==null&&i!==void 0?i:[]}prepare(){if(this.data)return;const t=[],i=[],r=[];for(let n of this.fields)if(n.oneof)r.includes(n.oneof)||(r.push(n.oneof),t.push(n.oneof),i.push(n.oneof));else switch(i.push(n.localName),n.kind){case"scalar":case"enum":(!n.opt||n.repeat)&&t.push(n.localName);break;case"message":n.repeat&&t.push(n.localName);break;case"map":t.push(n.localName);break}this.data={req:t,known:i,oneofs:Object.values(r)}}is(t,i,r=!1){if(i<0)return!0;if(t==null||typeof t!="object")return!1;this.prepare();let n=Object.keys(t),s=this.data;if(n.length<s.req.length||s.req.some(a=>!n.includes(a))||!r&&n.some(a=>!s.known.includes(a)))return!1;if(i<1)return!0;for(const a of s.oneofs){const o=t[a];if(!IN(o))return!1;if(o.oneofKind===void 0)continue;const c=this.fields.find(d=>d.localName===o.oneofKind);if(!c||!this.field(o[o.oneofKind],c,r,i))return!1}for(const a of this.fields)if(a.oneof===void 0&&!this.field(t[a.localName],a,r,i))return!1;return!0}field(t,i,r,n){let s=i.repeat;switch(i.kind){case"scalar":return t===void 0?i.opt:s?this.scalars(t,i.T,n,i.L):this.scalar(t,i.T,i.L);case"enum":return t===void 0?i.opt:s?this.scalars(t,D.INT32,n):this.scalar(t,D.INT32);case"message":return t===void 0?!0:s?this.messages(t,i.T(),r,n):this.message(t,i.T(),r,n);case"map":if(typeof t!="object"||t===null)return!1;if(n<2)return!0;if(!this.mapKeys(t,i.K,n))return!1;switch(i.V.kind){case"scalar":return this.scalars(Object.values(t),i.V.T,n,i.V.L);case"enum":return this.scalars(Object.values(t),D.INT32,n);case"message":return this.messages(Object.values(t),i.V.T(),r,n)}break}return!0}message(t,i,r,n){return r?i.isAssignable(t,n):i.is(t,n)}messages(t,i,r,n){if(!Array.isArray(t))return!1;if(n<2)return!0;if(r){for(let s=0;s<t.length&&s<n;s++)if(!i.isAssignable(t[s],n-1))return!1}else for(let s=0;s<t.length&&s<n;s++)if(!i.is(t[s],n-1))return!1;return!0}scalar(t,i,r){let n=typeof t;switch(i){case D.UINT64:case D.FIXED64:case D.INT64:case D.SFIXED64:case D.SINT64:switch(r){case Hn.BIGINT:return n=="bigint";case Hn.NUMBER:return n=="number"&&!isNaN(t);default:return n=="string"}case D.BOOL:return n=="boolean";case D.STRING:return n=="string";case D.BYTES:return t instanceof Uint8Array;case D.DOUBLE:case D.FLOAT:return n=="number"&&!isNaN(t);default:return n=="number"&&Number.isInteger(t)}}scalars(t,i,r,n){if(!Array.isArray(t))return!1;if(r<2)return!0;if(Array.isArray(t)){for(let s=0;s<t.length&&s<r;s++)if(!this.scalar(t[s],i,n))return!1}return!0}mapKeys(t,i,r){let n=Object.keys(t);switch(i){case D.INT32:case D.FIXED32:case D.SFIXED32:case D.SINT32:case D.UINT32:return this.scalars(n.slice(0,r).map(s=>parseInt(s)),i,r);case D.BOOL:return this.scalars(n.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),i,r);default:return this.scalars(n,i,r,Hn.STRING)}}}function hn(e,t){switch(t){case Hn.BIGINT:return e.toBigInt();case Hn.NUMBER:return e.toNumber();default:return e.toString()}}class MN{constructor(t){this.info=t}prepare(){var t;if(this.fMap===void 0){this.fMap={};const i=(t=this.info.fields)!==null&&t!==void 0?t:[];for(const r of i)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(t,i,r){if(!t){let n=fb(r);throw(n=="number"||n=="boolean")&&(n=r.toString()),new Error(`Cannot parse JSON ${n} for ${this.info.typeName}#${i}`)}}read(t,i,r){this.prepare();const n=[];for(const[s,a]of Object.entries(t)){const o=this.fMap[s];if(!o){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const c=o.localName;let d;if(o.oneof){if(n.includes(o.oneof))throw new Error(`Multiple members of the oneof group "${o.oneof}" of ${this.info.typeName} are present in JSON.`);n.push(o.oneof),d=i[o.oneof]={oneofKind:c}}else d=i;if(o.kind=="map"){if(a===null)continue;this.assert(pN(a),o.name,a);const l=d[c];for(const[u,g]of Object.entries(a)){this.assert(g!==null,o.name+" map value",null);let m;switch(o.V.kind){case"message":m=o.V.T().internalJsonRead(g,r);break;case"enum":if(m=this.enum(o.V.T(),g,o.name,r.ignoreUnknownFields),m===!1)continue;break;case"scalar":m=this.scalar(g,o.V.T,o.V.L,o.name);break}this.assert(m!==void 0,o.name+" map value",g);let f=u;o.K==D.BOOL&&(f=f=="true"?!0:f=="false"?!1:f),f=this.scalar(f,o.K,Hn.STRING,o.name).toString(),l[f]=m}}else if(o.repeat){if(a===null)continue;this.assert(Array.isArray(a),o.name,a);const l=d[c];for(const u of a){this.assert(u!==null,o.name,null);let g;switch(o.kind){case"message":g=o.T().internalJsonRead(u,r);break;case"enum":if(g=this.enum(o.T(),u,o.name,r.ignoreUnknownFields),g===!1)continue;break;case"scalar":g=this.scalar(u,o.T,o.L,o.name);break}this.assert(g!==void 0,o.name,a),l.push(g)}}else switch(o.kind){case"message":if(a===null&&o.T().typeName!="google.protobuf.Value"){this.assert(o.oneof===void 0,o.name+" (oneof member)",null);continue}d[c]=o.T().internalJsonRead(a,r,d[c]);break;case"enum":let l=this.enum(o.T(),a,o.name,r.ignoreUnknownFields);if(l===!1)continue;d[c]=l;break;case"scalar":d[c]=this.scalar(a,o.T,o.L,o.name);break}}}enum(t,i,r,n){if(t[0]=="google.protobuf.NullValue"&&We(i===null,`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} only accepts null.`),i===null)return 0;switch(typeof i){case"number":return We(Number.isInteger(i),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${i}.`),i;case"string":let s=i;t[2]&&i.substring(0,t[2].length)===t[2]&&(s=i.substring(t[2].length));let a=t[1][s];return typeof a>"u"&&n?!1:(We(typeof a=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} has no value for "${i}".`),a)}We(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof i}".`)}scalar(t,i,r,n){let s;try{switch(i){case D.DOUBLE:case D.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""){s="empty string";break}if(typeof t=="string"&&t.trim().length!==t.length){s="extra whitespace";break}if(typeof t!="string"&&typeof t!="number")break;let a=Number(t);if(Number.isNaN(a)){s="not a number";break}if(!Number.isFinite(a)){s="too large or small";break}return i==D.FLOAT&&vb(a),a;case D.INT32:case D.FIXED32:case D.SFIXED32:case D.SINT32:case D.UINT32:if(t===null)return 0;let o;if(typeof t=="number"?o=t:t===""?s="empty string":typeof t=="string"&&(t.trim().length!==t.length?s="extra whitespace":o=Number(t)),o===void 0)break;return i==D.UINT32?qg(o):mu(o),o;case D.INT64:case D.SFIXED64:case D.SINT64:if(t===null)return hn(at.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return hn(at.from(t),r);case D.FIXED64:case D.UINT64:if(t===null)return hn(Li.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return hn(Li.from(t),r);case D.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case D.STRING:if(t===null)return"";if(typeof t!="string"){s="extra whitespace";break}try{encodeURIComponent(t)}catch(c){c="invalid UTF8";break}return t;case D.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return hN(t)}}catch(a){s=a.message}this.assert(!1,n+(s?" - "+s:""),t)}}class LN{constructor(t){var i;this.fields=(i=t.fields)!==null&&i!==void 0?i:[]}write(t,i){const r={},n=t;for(const s of this.fields){if(!s.oneof){let d=this.field(s,n[s.localName],i);d!==void 0&&(r[i.useProtoFieldName?s.name:s.jsonName]=d);continue}const a=n[s.oneof];if(a.oneofKind!==s.localName)continue;const o=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},i),{emitDefaultValues:!0}):i;let c=this.field(s,a[s.localName],o);We(c!==void 0),r[i.useProtoFieldName?s.name:s.jsonName]=c}return r}field(t,i,r){let n;if(t.kind=="map"){We(typeof i=="object"&&i!==null);const s={};switch(t.V.kind){case"scalar":for(const[c,d]of Object.entries(i)){const l=this.scalar(t.V.T,d,t.name,!1,!0);We(l!==void 0),s[c.toString()]=l}break;case"message":const a=t.V.T();for(const[c,d]of Object.entries(i)){const l=this.message(a,d,t.name,r);We(l!==void 0),s[c.toString()]=l}break;case"enum":const o=t.V.T();for(const[c,d]of Object.entries(i)){We(d===void 0||typeof d=="number");const l=this.enum(o,d,t.name,!1,!0,r.enumAsInteger);We(l!==void 0),s[c.toString()]=l}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(n=s)}else if(t.repeat){We(Array.isArray(i));const s=[];switch(t.kind){case"scalar":for(let c=0;c<i.length;c++){const d=this.scalar(t.T,i[c],t.name,t.opt,!0);We(d!==void 0),s.push(d)}break;case"enum":const a=t.T();for(let c=0;c<i.length;c++){We(i[c]===void 0||typeof i[c]=="number");const d=this.enum(a,i[c],t.name,t.opt,!0,r.enumAsInteger);We(d!==void 0),s.push(d)}break;case"message":const o=t.T();for(let c=0;c<i.length;c++){const d=this.message(o,i[c],t.name,r);We(d!==void 0),s.push(d)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(n=s)}else switch(t.kind){case"scalar":n=this.scalar(t.T,i,t.name,t.opt,r.emitDefaultValues);break;case"enum":n=this.enum(t.T(),i,t.name,t.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":n=this.message(t.T(),i,t.name,r);break}return n}enum(t,i,r,n,s,a){if(t[0]=="google.protobuf.NullValue")return null;if(i===void 0){We(n);return}if(!(i===0&&!s&&!n))return We(typeof i=="number"),We(Number.isInteger(i)),a||!t[1].hasOwnProperty(i)?i:t[2]?t[2]+t[1][i]:t[1][i]}message(t,i,r,n){return i===void 0?n.emitDefaultValues?null:void 0:t.internalJsonWrite(i,n)}scalar(t,i,r,n,s){if(i===void 0){We(n);return}const a=s||n;switch(t){case D.INT32:case D.SFIXED32:case D.SINT32:return i===0?a?0:void 0:(mu(i),i);case D.FIXED32:case D.UINT32:return i===0?a?0:void 0:(qg(i),i);case D.FLOAT:vb(i);case D.DOUBLE:return i===0?a?0:void 0:(We(typeof i=="number"),Number.isNaN(i)?"NaN":i===Number.POSITIVE_INFINITY?"Infinity":i===Number.NEGATIVE_INFINITY?"-Infinity":i);case D.STRING:return i===""?a?"":void 0:(We(typeof i=="string"),i);case D.BOOL:return i===!1?a?!1:void 0:(We(typeof i=="boolean"),i);case D.UINT64:case D.FIXED64:We(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let o=Li.from(i);return o.isZero()&&!a?void 0:o.toString();case D.INT64:case D.SFIXED64:case D.SINT64:We(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let c=at.from(i);return c.isZero()&&!a?void 0:c.toString();case D.BYTES:return We(i instanceof Uint8Array),i.byteLength?gN(i):a?"":void 0}}}function W1(e,t=Hn.STRING){switch(e){case D.BOOL:return!1;case D.UINT64:case D.FIXED64:return hn(Li.ZERO,t);case D.INT64:case D.SFIXED64:case D.SINT64:return hn(at.ZERO,t);case D.DOUBLE:case D.FLOAT:return 0;case D.BYTES:return new Uint8Array(0);case D.STRING:return"";default:return 0}}class DN{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){const i=(t=this.info.fields)!==null&&t!==void 0?t:[];this.fieldNoToField=new Map(i.map(r=>[r.no,r]))}}read(t,i,r,n){this.prepare();const s=n===void 0?t.len:t.pos+n;for(;t.pos<s;){const[a,o]=t.tag(),c=this.fieldNoToField.get(a);if(!c){let g=r.readUnknownField;if(g=="throw")throw new Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let m=t.skip(o);g!==!1&&(g===!0?Gg.onRead:g)(this.info.typeName,i,a,o,m);continue}let d=i,l=c.repeat,u=c.localName;switch(c.oneof&&(d=d[c.oneof],d.oneofKind!==u&&(d=i[c.oneof]={oneofKind:u})),c.kind){case"scalar":case"enum":let g=c.kind=="enum"?D.INT32:c.T,m=c.kind=="scalar"?c.L:void 0;if(l){let S=d[u];if(o==Dt.LengthDelimited&&g!=D.STRING&&g!=D.BYTES){let y=t.uint32()+t.pos;for(;t.pos<y;)S.push(this.scalar(t,g,m))}else S.push(this.scalar(t,g,m))}else d[u]=this.scalar(t,g,m);break;case"message":if(l){let S=d[u],y=c.T().internalBinaryRead(t,t.uint32(),r);S.push(y)}else d[u]=c.T().internalBinaryRead(t,t.uint32(),r,d[u]);break;case"map":let[f,w]=this.mapEntry(c,t,r);d[u][f]=w;break}}}mapEntry(t,i,r){let n=i.uint32(),s=i.pos+n,a,o;for(;i.pos<s;){let[c,d]=i.tag();switch(c){case 1:t.K==D.BOOL?a=i.bool().toString():a=this.scalar(i,t.K,Hn.STRING);break;case 2:switch(t.V.kind){case"scalar":o=this.scalar(i,t.V.T,t.V.L);break;case"enum":o=i.int32();break;case"message":o=t.V.T().internalBinaryRead(i,i.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${d}) in map entry for ${this.info.typeName}#${t.name}`)}}if(a===void 0){let c=W1(t.K);a=t.K==D.BOOL?c.toString():c}if(o===void 0)switch(t.V.kind){case"scalar":o=W1(t.V.T,t.V.L);break;case"enum":o=0;break;case"message":o=t.V.T().create();break}return[a,o]}scalar(t,i,r){switch(i){case D.INT32:return t.int32();case D.STRING:return t.string();case D.BOOL:return t.bool();case D.DOUBLE:return t.double();case D.FLOAT:return t.float();case D.INT64:return hn(t.int64(),r);case D.UINT64:return hn(t.uint64(),r);case D.FIXED64:return hn(t.fixed64(),r);case D.FIXED32:return t.fixed32();case D.BYTES:return t.bytes();case D.UINT32:return t.uint32();case D.SFIXED32:return t.sfixed32();case D.SFIXED64:return hn(t.sfixed64(),r);case D.SINT32:return t.sint32();case D.SINT64:return hn(t.sint64(),r)}}}class NN{constructor(t){this.info=t}prepare(){if(!this.fields){const t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort((i,r)=>i.no-r.no)}}write(t,i,r){this.prepare();for(const s of this.fields){let a,o,c=s.repeat,d=s.localName;if(s.oneof){const l=t[s.oneof];if(l.oneofKind!==d)continue;a=l[d],o=!0}else a=t[d],o=!1;switch(s.kind){case"scalar":case"enum":let l=s.kind=="enum"?D.INT32:s.T;if(c)if(We(Array.isArray(a)),c==Jg.PACKED)this.packed(i,l,s.no,a);else for(const u of a)this.scalar(i,l,s.no,u,!0);else a===void 0?We(s.opt):this.scalar(i,l,s.no,a,o||s.opt);break;case"message":if(c){We(Array.isArray(a));for(const u of a)this.message(i,r,s.T(),s.no,u)}else this.message(i,r,s.T(),s.no,a);break;case"map":We(typeof a=="object"&&a!==null);for(const[u,g]of Object.entries(a))this.mapEntry(i,r,s,u,g);break}}let n=r.writeUnknownFields;n!==!1&&(n===!0?Gg.onWrite:n)(this.info.typeName,t,i)}mapEntry(t,i,r,n,s){t.tag(r.no,Dt.LengthDelimited),t.fork();let a=n;switch(r.K){case D.INT32:case D.FIXED32:case D.UINT32:case D.SFIXED32:case D.SINT32:a=Number.parseInt(n);break;case D.BOOL:We(n=="true"||n=="false"),a=n=="true";break}switch(this.scalar(t,r.K,1,a,!0),r.V.kind){case"scalar":this.scalar(t,r.V.T,2,s,!0);break;case"enum":this.scalar(t,D.INT32,2,s,!0);break;case"message":this.message(t,i,r.V.T(),2,s);break}t.join()}message(t,i,r,n,s){s!==void 0&&(r.internalBinaryWrite(s,t.tag(n,Dt.LengthDelimited).fork(),i),t.join())}scalar(t,i,r,n,s){let[a,o,c]=this.scalarInfo(i,n);(!c||s)&&(t.tag(r,a),t[o](n))}packed(t,i,r,n){if(!n.length)return;We(i!==D.BYTES&&i!==D.STRING),t.tag(r,Dt.LengthDelimited),t.fork();let[,s]=this.scalarInfo(i);for(let a=0;a<n.length;a++)t[s](n[a]);t.join()}scalarInfo(t,i){let r=Dt.Varint,n,s=i===void 0,a=i===0;switch(t){case D.INT32:n="int32";break;case D.STRING:a=s||!i.length,r=Dt.LengthDelimited,n="string";break;case D.BOOL:a=i===!1,n="bool";break;case D.UINT32:n="uint32";break;case D.DOUBLE:r=Dt.Bit64,n="double";break;case D.FLOAT:r=Dt.Bit32,n="float";break;case D.INT64:a=s||at.from(i).isZero(),n="int64";break;case D.UINT64:a=s||Li.from(i).isZero(),n="uint64";break;case D.FIXED64:a=s||Li.from(i).isZero(),r=Dt.Bit64,n="fixed64";break;case D.BYTES:a=s||!i.byteLength,r=Dt.LengthDelimited,n="bytes";break;case D.FIXED32:r=Dt.Bit32,n="fixed32";break;case D.SFIXED32:r=Dt.Bit32,n="sfixed32";break;case D.SFIXED64:a=s||at.from(i).isZero(),r=Dt.Bit64,n="sfixed64";break;case D.SINT32:n="sint32";break;case D.SINT64:a=s||at.from(i).isZero(),n="sint64";break}return[r,n,s||a]}}function UN(e){const t={};Object.defineProperty(t,xN,{enumerable:!1,value:e});for(let i of e.fields){let r=i.localName;if(!i.opt)if(i.oneof)t[i.oneof]={oneofKind:void 0};else if(i.repeat)t[r]=[];else switch(i.kind){case"scalar":t[r]=W1(i.T,i.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function H0(e,t,i){let r,n=i,s;for(let a of e.fields){let o=a.localName;if(a.oneof){const c=n[a.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(r=c[o],s=t[a.oneof],s.oneofKind=c.oneofKind,r==null){delete s[o];continue}}else if(r=n[o],s=t,r==null)continue;switch(a.repeat&&(s[o].length=r.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let d=0;d<r.length;d++)s[o][d]=r[d];else s[o]=r;break;case"message":let c=a.T();if(a.repeat)for(let d=0;d<r.length;d++)s[o][d]=c.create(r[d]);else s[o]===void 0?s[o]=c.create(r):c.mergePartial(s[o],r);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(s[o],r);break;case"message":let d=a.V.T();for(let l of Object.keys(r))s[o][l]=d.create(r[l]);break}break}}}function jN(e,t,i){if(t===i)return!0;if(!t||!i)return!1;for(let r of e.fields){let n=r.localName,s=r.oneof?t[r.oneof][n]:t[n],a=r.oneof?i[r.oneof][n]:i[n];switch(r.kind){case"enum":case"scalar":let o=r.kind=="enum"?D.INT32:r.T;if(!(r.repeat?F5(o,s,a):h3(o,s,a)))return!1;break;case"map":if(!(r.V.kind=="message"?B5(r.V.T(),Xp(s),Xp(a)):F5(r.V.kind=="enum"?D.INT32:r.V.T,Xp(s),Xp(a))))return!1;break;case"message":let c=r.T();if(!(r.repeat?B5(c,s,a):c.equals(s,a)))return!1;break}}return!0}const Xp=Object.values;function h3(e,t,i){if(t===i)return!0;if(e!==D.BYTES)return!1;let r=t,n=i;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=n[s])return!1;return!0}function F5(e,t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!h3(e,t[r],i[r]))return!1;return!0}function B5(e,t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],i[r]))return!1;return!0}class x{constructor(t,i,r){this.defaultCheckDepth=16,this.typeName=t,this.fields=i.map(AN),this.options=r!=null?r:{},this.refTypeCheck=new ON(this),this.refJsonReader=new MN(this),this.refJsonWriter=new LN(this),this.refBinReader=new DN(this),this.refBinWriter=new NN(this)}create(t){let i=UN(this);return t!==void 0&&H0(this,i,t),i}clone(t){let i=this.create();return H0(this,i,t),i}equals(t,i){return jN(this,t,i)}is(t,i=this.defaultCheckDepth){return this.refTypeCheck.is(t,i,!1)}isAssignable(t,i=this.defaultCheckDepth){return this.refTypeCheck.is(t,i,!0)}mergePartial(t,i){H0(this,t,i)}fromBinary(t,i){let r=yN(i);return this.internalBinaryRead(r.readerFactory(t),t.byteLength,r)}fromJson(t,i){return this.internalJsonRead(t,PN(i))}fromJsonString(t,i){let r=JSON.parse(t);return this.fromJson(r,i)}toJson(t,i){return this.internalJsonWrite(t,RN(i))}toJsonString(t,i){var r;let n=this.toJson(t,i);return JSON.stringify(n,null,(r=i==null?void 0:i.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(t,i){let r=kN(i);return this.internalBinaryWrite(t,r.writerFactory(),r).finish()}internalJsonRead(t,i,r){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){let n=r!=null?r:this.create();return this.refJsonReader.read(t,n,i),n}throw new Error(`Unable to parse message ${this.typeName} from JSON ${fb(t)}.`)}internalJsonWrite(t,i){return this.refJsonWriter.write(t,i)}internalBinaryWrite(t,i,r){return this.refBinWriter.write(t,i,r),i}internalBinaryRead(t,i,r,n){let s=n!=null?n:this.create();return this.refBinReader.read(t,s,r,i),s}}var Uo={},Ym={},q1={exports:{}},G0,z5;function $N(){if(z5)return G0;z5=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,s=r*365.25;G0=function(l,u){u=u||{};var g=typeof l;if(g==="string"&&l.length>0)return a(l);if(g==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(!!u){var g=parseFloat(u[1]),m=(u[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*n;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*t;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=i?Math.round(l/i)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=i?d(l,u,i,"hour"):u>=t?d(l,u,t,"minute"):u>=e?d(l,u,e,"second"):l+" ms"}function d(l,u,g,m){var f=u>=g*1.5;return Math.round(l/g)+" "+m+(f?"s":"")}return G0}function VN(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=n,i.enabled=a,i.humanize=$N(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let u=0;for(let g=0;g<l.length;g++)u=(u<<5)-u+l.charCodeAt(g),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(l){let u,g=null,m,f;function w(...S){if(!w.enabled)return;const y=w,_=Number(new Date),T=_-(u||_);y.diff=T,y.prev=u,y.curr=_,u=_,S[0]=i.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let P=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(O,B)=>{if(O==="%%")return"%";P++;const H=i.formatters[B];if(typeof H=="function"){const ie=S[P];O=H.call(y,ie),S.splice(P,1),P--}return O}),i.formatArgs.call(y,S),(y.log||i.log).apply(y,S)}return w.namespace=l,w.useColors=i.useColors(),w.color=i.selectColor(l),w.extend=r,w.destroy=i.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(l)),f),set:S=>{g=S}}),typeof i.init=="function"&&i.init(w),w}function r(l,u){const g=i(this.namespace+(typeof u>"u"?":":u)+l);return g.log=this.log,g}function n(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let u;const g=(typeof l=="string"?l:"").split(/[\s,]+/),m=g.length;for(u=0;u<m;u++)!g[u]||(l=g[u].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...i.names.map(o),...i.skips.map(o).map(u=>"-"+u)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let u,g;for(u=0,g=i.skips.length;u<g;u++)if(i.skips[u].test(l))return!1;for(u=0,g=i.names.length;u<g;u++)if(i.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var FN=VN;(function(e,t){t.formatArgs=r,t.save=n,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(u=l))}),c.splice(u,0,d)}t.log=console.debug||console.log||(()=>{});function n(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=FN(t);const{formatters:o}=e.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(q1,q1.exports);var BN=jw&&jw.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.Logger=void 0;const vc=BN(q1.exports),yc="awaitqueue";class zN{constructor(t){t?(this._debug=(0,vc.default)(`${yc}:${t}`),this._warn=(0,vc.default)(`${yc}:WARN:${t}`),this._error=(0,vc.default)(`${yc}:ERROR:${t}`)):(this._debug=(0,vc.default)(yc),this._warn=(0,vc.default)(`${yc}:WARN`),this._error=(0,vc.default)(`${yc}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Ym.Logger=zN;Object.defineProperty(Uo,"__esModule",{value:!0});var g3=Uo.AwaitQueue=Uo.AwaitQueueRemovedTaskError=Uo.AwaitQueueStoppedError=void 0;const HN=Ym,Fs=new HN.Logger;class Xm extends Error{constructor(t){super(t!=null?t:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Xm)}}Uo.AwaitQueueStoppedError=Xm;class ef extends Error{constructor(t){super(t!=null?t:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ef)}}Uo.AwaitQueueRemovedTaskError=ef;class GN{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(t,i){if(i=i!=null?i:t.name,Fs.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((r,n)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),Fs.debug(`resolving task [name:${s.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),Fs.debug(`rejecting task [name:${s.name}]: %s`,String(a)),n(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){Fs.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())Fs.debug(`stop() | stopping task [name:${t.name}]`),t.reject(new Xm);this.stopping=!1}remove(t){Fs.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){Fs.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new ef)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:t-r.enqueuedAt,executionTime:r.executedAt?t-r.executedAt:0}))}async execute(t){if(Fs.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}g3=Uo.AwaitQueue=GN;const qn=Object.create(null);qn.open="0";qn.close="1";qn.ping="2";qn.pong="3";qn.message="4";qn.upgrade="5";qn.noop="6";const Bh=Object.create(null);Object.keys(qn).forEach(e=>{Bh[qn[e]]=e});const WN={type:"error",data:"parser error"},qN=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",JN=typeof ArrayBuffer=="function",KN=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,m3=({type:e,data:t},i,r)=>qN&&t instanceof Blob?i?r(t):H5(t,r):JN&&(t instanceof ArrayBuffer||KN(t))?i?r(t):H5(new Blob([t]),r):r(qn[e]+(t||"")),H5=(e,t)=>{const i=new FileReader;return i.onload=function(){const r=i.result.split(",")[1];t("b"+(r||""))},i.readAsDataURL(e)},G5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<G5.length;e++)Hl[G5.charCodeAt(e)]=e;const ZN=e=>{let t=e.length*.75,i=e.length,r,n=0,s,a,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),l=new Uint8Array(d);for(r=0;r<i;r+=4)s=Hl[e.charCodeAt(r)],a=Hl[e.charCodeAt(r+1)],o=Hl[e.charCodeAt(r+2)],c=Hl[e.charCodeAt(r+3)],l[n++]=s<<2|a>>4,l[n++]=(a&15)<<4|o>>2,l[n++]=(o&3)<<6|c&63;return d},QN=typeof ArrayBuffer=="function",f3=(e,t)=>{if(typeof e!="string")return{type:"message",data:v3(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:YN(e.substring(1),t)}:Bh[i]?e.length>1?{type:Bh[i],data:e.substring(1)}:{type:Bh[i]}:WN},YN=(e,t)=>{if(QN){const i=ZN(e);return v3(i,t)}else return{base64:!0,data:e}},v3=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},y3=String.fromCharCode(30),XN=(e,t)=>{const i=e.length,r=new Array(i);let n=0;e.forEach((s,a)=>{m3(s,!1,o=>{r[a]=o,++n===i&&t(r.join(y3))})})},eU=(e,t)=>{const i=e.split(y3),r=[];for(let n=0;n<i.length;n++){const s=f3(i[n],t);if(r.push(s),s.type==="error")break}return r},_3=4;function Qt(e){if(e)return tU(e)}function tU(e){for(var t in Qt.prototype)e[t]=Qt.prototype[t];return e}Qt.prototype.on=Qt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Qt.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Qt.prototype.off=Qt.prototype.removeListener=Qt.prototype.removeAllListeners=Qt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Qt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,t)}return this};Qt.prototype.emitReserved=Qt.prototype.emit;Qt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Qt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ir=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function b3(e,...t){return t.reduce((i,r)=>(e.hasOwnProperty(r)&&(i[r]=e[r]),i),{})}const iU=Ir.setTimeout,rU=Ir.clearTimeout;function tf(e,t){t.useNativeTimers?(e.setTimeoutFn=iU.bind(Ir),e.clearTimeoutFn=rU.bind(Ir)):(e.setTimeoutFn=Ir.setTimeout.bind(Ir),e.clearTimeoutFn=Ir.clearTimeout.bind(Ir))}const nU=1.33;function sU(e){return typeof e=="string"?aU(e):Math.ceil((e.byteLength||e.size)*nU)}function aU(e){let t=0,i=0;for(let r=0,n=e.length;r<n;r++)t=e.charCodeAt(r),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(r++,i+=4);return i}class oU extends Error{constructor(t,i,r){super(t),this.description=i,this.context=r,this.type="TransportError"}}class w3 extends Qt{constructor(t){super(),this.writable=!1,tf(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,i,r){return super.emitReserved("error",new oU(t,i,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=f3(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}}const S3="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),J1=64,cU={};let W5=0,eh=0,q5;function J5(e){let t="";do t=S3[e%J1]+t,e=Math.floor(e/J1);while(e>0);return t}function E3(){const e=J5(+new Date);return e!==q5?(W5=0,q5=e):e+"."+J5(W5++)}for(;eh<J1;eh++)cU[S3[eh]]=eh;function T3(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function dU(e){let t={},i=e.split("&");for(let r=0,n=i.length;r<n;r++){let s=i[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}let k3=!1;try{k3=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const lU=k3;function C3(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||lU))return new XMLHttpRequest}catch{}if(!t)try{return new Ir[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function uU(){}const pU=function(){return new C3({xdomain:!1}).responseType!=null}();class hU extends w3{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==r}const i=t&&t.forceBase64;this.supportsBinary=pU&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||i()})),this.writable||(r++,this.once("drain",function(){--r||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};eU(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,XN(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const i=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=E3()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const n=T3(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Gn(this.uri(),t)}doWrite(t,i){const r=this.request({method:"POST",data:t});r.on("success",i),r.on("error",(n,s)=>{this.onError("xhr post error",n,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,r)=>{this.onError("xhr poll error",i,r)}),this.pollXhr=t}}class Gn extends Qt{constructor(t,i){super(),tf(this,i),this.opts=i,this.method=i.method||"GET",this.uri=t,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const t=b3(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const i=this.xhr=new C3(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Gn.requestsCount++,Gn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=uU,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Gn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Gn.requestsCount=0;Gn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",K5);else if(typeof addEventListener=="function"){const e="onpagehide"in Ir?"pagehide":"unload";addEventListener(e,K5,!1)}}function K5(){for(let e in Gn.requests)Gn.requests.hasOwnProperty(e)&&Gn.requests[e].abort()}const P3=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0))(),th=Ir.WebSocket||Ir.MozWebSocket,Z5=!0,gU="arraybuffer",Q5=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class mU extends w3{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),i=this.opts.protocols,r=Q5?{}:b3(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Z5&&!Q5?i?new th(t,i):new th(t):new th(t,i,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||gU,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const r=t[i],n=i===t.length-1;m3(r,this.supportsBinary,s=>{const a={};try{Z5&&this.ws.send(s)}catch{}n&&P3(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const i=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=E3()),this.supportsBinary||(t.b64=1);const n=T3(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!th}}const fU={websocket:mU,polling:hU},vU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,yU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function K1(e){const t=e,i=e.indexOf("["),r=e.indexOf("]");i!=-1&&r!=-1&&(e=e.substring(0,i)+e.substring(i,r).replace(/:/g,";")+e.substring(r,e.length));let n=vU.exec(e||""),s={},a=14;for(;a--;)s[yU[a]]=n[a]||"";return i!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=_U(s,s.path),s.queryKey=bU(s,s.query),s}function _U(e,t){const i=/\/{2,9}/g,r=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function bU(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,s){n&&(i[n]=s)}),i}class ua extends Qt{constructor(t,i={}){super(),this.writeBuffer=[],t&&typeof t=="object"&&(i=t,t=null),t?(t=K1(t),i.hostname=t.host,i.secure=t.protocol==="https"||t.protocol==="wss",i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=K1(i.host).host),tf(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=dU(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=_3,i.transport=t,this.id&&(i.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new fU[t](r)}open(){let t;if(this.opts.rememberUpgrade&&ua.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(t){let i=this.createTransport(t),r=!1;ua.priorWebsocketSuccess=!1;const n=()=>{r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",u=>{if(!r)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;ua.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=i.name,this.emitReserved("upgradeError",g)}}))};function s(){r||(r=!0,l(),i.close(),i=null)}const a=u=>{const g=new Error("probe error: "+u);g.transport=i.name,s(),this.emitReserved("upgradeError",g)};function o(){a("transport closed")}function c(){a("socket closed")}function d(u){i&&u.name!==i.name&&s()}const l=()=>{i.removeListener("open",n),i.removeListener("error",a),i.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};i.once("open",n),i.once("error",a),i.once("close",o),this.once("close",c),this.once("upgrading",d),i.open()}onOpen(){if(this.readyState="open",ua.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const i=this.upgrades.length;for(;t<i;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(i+=sU(n)),r>0&&i>this.maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}write(t,i,r){return this.sendPacket("message",t,i,r),this}send(t,i,r){return this.sendPacket("message",t,i,r),this}sendPacket(t,i,r,n){if(typeof i=="function"&&(n=i,i=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:i,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){ua.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const i=[];let r=0;const n=t.length;for(;r<n;r++)~this.transports.indexOf(t[r])&&i.push(t[r]);return i}}ua.protocol=_3;function wU(e,t="",i){let r=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),r=K1(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(i&&i.port===r.port?"":":"+r.port),r}const SU=typeof ArrayBuffer=="function",EU=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,R3=Object.prototype.toString,TU=typeof Blob=="function"||typeof Blob<"u"&&R3.call(Blob)==="[object BlobConstructor]",kU=typeof File=="function"||typeof File<"u"&&R3.call(File)==="[object FileConstructor]";function yb(e){return SU&&(e instanceof ArrayBuffer||EU(e))||TU&&e instanceof Blob||kU&&e instanceof File}function zh(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(zh(e[i]))return!0;return!1}if(yb(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return zh(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&zh(e[i]))return!0;return!1}function CU(e){const t=[],i=e.data,r=e;return r.data=Z1(i,t),r.attachments=t.length,{packet:r,buffers:t}}function Z1(e,t){if(!e)return e;if(yb(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let r=0;r<e.length;r++)i[r]=Z1(e[r],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=Z1(e[r],t));return i}return e}function PU(e,t){return e.data=Q1(e.data,t),delete e.attachments,e}function Q1(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=Q1(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=Q1(e[i],t));return e}const RU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xU=5;var De;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class AU{constructor(t){this.replacer=t}encode(t){return(t.type===De.EVENT||t.type===De.ACK)&&zh(t)?this.encodeAsBinary({type:t.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===De.BINARY_EVENT||t.type===De.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=CU(t),r=this.encodeAsString(i.packet),n=i.buffers;return n.unshift(r),n}}function Y5(e){return Object.prototype.toString.call(e)==="[object Object]"}class _b extends Qt{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const r=i.type===De.BINARY_EVENT;r||i.type===De.BINARY_ACK?(i.type=r?De.EVENT:De.ACK,this.reconstructor=new IU(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(yb(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const r={type:Number(t.charAt(0))};if(De[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===De.BINARY_EVENT||r.type===De.BINARY_ACK){const s=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const a=t.substring(s,i);if(a!=Number(a)||t.charAt(i)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(t.charAt(i+1)==="/"){const s=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););r.nsp=t.substring(s,i)}else r.nsp="/";const n=t.charAt(i+1);if(n!==""&&Number(n)==n){const s=i+1;for(;++i;){const a=t.charAt(i);if(a==null||Number(a)!=a){--i;break}if(i===t.length)break}r.id=Number(t.substring(s,i+1))}if(t.charAt(++i)){const s=this.tryParse(t.substr(i));if(_b.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case De.CONNECT:return Y5(i);case De.DISCONNECT:return i===void 0;case De.CONNECT_ERROR:return typeof i=="string"||Y5(i);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&RU.indexOf(i[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class IU{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=PU(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const OU=Object.freeze(Object.defineProperty({__proto__:null,protocol:xU,get PacketType(){return De},Encoder:AU,Decoder:_b},Symbol.toStringTag,{value:"Module"}));function sn(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const MU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class x3 extends Qt{constructor(t,i,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[sn(t,"open",this.onopen.bind(this)),sn(t,"packet",this.onpacket.bind(this)),sn(t,"error",this.onerror.bind(this)),sn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(MU.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:De.EVENT,data:i};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const a=this.ids++,o=i.pop();this._registerAckCallback(a,o),r.id=a}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,i){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[t]=i;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...a)=>{this.io.clearTimeoutFn(s),i.apply(this,[null,...a])}}emitWithAck(t,...i){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,s)=>{i.push((a,o)=>r?a?s(a):n(o):n(a)),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...s)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(n)):(this._queue.shift(),i&&i(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case De.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(t);break;case De.ACK:case De.BINARY_ACK:this.onack(t);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const r of i)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let r=!1;return function(...n){r||(r=!0,i.packet({type:De.ACK,id:t,data:n}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(i.apply(this,t.data),delete this.acks[t.id])}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const r of i)r.apply(this,t.data)}}}function Bd(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Bd.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-i:e+i}return Math.min(e,this.max)|0};Bd.prototype.reset=function(){this.attempts=0};Bd.prototype.setMin=function(e){this.ms=e};Bd.prototype.setMax=function(e){this.max=e};Bd.prototype.setJitter=function(e){this.jitter=e};class Y1 extends Qt{constructor(t,i){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,tf(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((r=i.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Bd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const n=i.parser||OU;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ua(this.uri,this.opts);const i=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=sn(i,"open",function(){r.onopen(),t&&t()}),s=sn(i,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),t?t(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&n();const o=this.setTimeoutFn(()=>{n(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(n),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(sn(t,"ping",this.onping.bind(this)),sn(t,"data",this.ondata.bind(this)),sn(t,"error",this.onerror.bind(this)),sn(t,"close",this.onclose.bind(this)),sn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){P3(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new x3(this,t,i),this.nsps[t]=r),r}_destroy(t){const i=Object.keys(this.nsps);for(const r of i)if(this.nsps[r].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let r=0;r<i.length;r++)this.engine.write(i[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},i);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fl={};function Hh(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=wU(e,t.path||"/socket.io"),r=i.source,n=i.id,s=i.path,a=fl[n]&&s in fl[n].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return o?c=new Y1(r,t):(fl[n]||(fl[n]=new Y1(r,t)),c=fl[n]),i.query&&!t.query&&(t.query=i.queryKey),c.socket(i.path,t)}Object.assign(Hh,{Manager:Y1,Socket:x3,io:Hh,connect:Hh});const LU=e=>(t,i)=>(e.set(t,i),i),X5=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,A3=536870912,eS=A3*2,DU=(e,t)=>i=>{const r=t.get(i);let n=r===void 0?i.size:r<eS?r+1:0;if(!i.has(n))return e(i,n);if(i.size<A3){for(;i.has(n);)n=Math.floor(Math.random()*eS);return e(i,n)}if(i.size>X5)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(n);)n=Math.floor(Math.random()*X5);return e(i,n)},I3=new WeakMap,NU=LU(I3),ih=DU(NU,I3),UU=e=>e.method!==void 0&&e.method==="call",jU=e=>e.error===null&&typeof e.id=="number",$U=e=>{const t=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),r=new Map,n=new Worker(e);return n.addEventListener("message",({data:d})=>{if(UU(d)){const{params:{timerId:l,timerType:u}}=d;if(u==="interval"){const g=t.get(l);if(typeof g=="number"){const m=r.get(g);if(m===void 0||m.timerId!==l||m.timerType!==u)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g();else throw new Error("The timer is in an undefined state.")}else if(u==="timeout"){const g=i.get(l);if(typeof g=="number"){const m=r.get(g);if(m===void 0||m.timerId!==l||m.timerType!==u)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g(),i.delete(l);else throw new Error("The timer is in an undefined state.")}}else if(jU(d)){const{id:l}=d,u=r.get(l);if(u===void 0)throw new Error("The timer is in an undefined state.");const{timerId:g,timerType:m}=u;r.delete(l),m==="interval"?t.delete(g):i.delete(g)}else{const{error:{message:l}}=d;throw new Error(l)}}),{clearInterval:d=>{const l=ih(r);r.set(l,{timerId:d,timerType:"interval"}),t.set(d,l),n.postMessage({id:l,method:"clear",params:{timerId:d,timerType:"interval"}})},clearTimeout:d=>{const l=ih(r);r.set(l,{timerId:d,timerType:"timeout"}),i.set(d,l),n.postMessage({id:l,method:"clear",params:{timerId:d,timerType:"timeout"}})},setInterval:(d,l)=>{const u=ih(t);return t.set(u,()=>{d(),typeof t.get(u)=="function"&&n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"interval"}})}),n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"interval"}}),u},setTimeout:(d,l)=>{const u=ih(i);return i.set(u,d),n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"timeout"}}),u}}},VU=(e,t)=>{let i=null;return()=>{if(i!==null)return i;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return i=e(n),setTimeout(()=>URL.revokeObjectURL(n)),i}},FU=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,O3=VU($U,FU),M3=e=>O3().clearInterval(e),L3=(e,t)=>O3().setInterval(e,t);var BU=Object.defineProperty,zU=(e,t,i)=>t in e?BU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,v=(e,t,i)=>(zU(e,typeof t!="symbol"?t+"":t,i),i),bb=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},h=(e,t,i)=>(bb(e,t,"read from private field"),i?i.call(e):t.get(e)),A=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},I=(e,t,i,r)=>(bb(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),Ut=(e,t,i)=>(bb(e,t,"access private method"),i),ce;(function(e){e[e.MAJOR_EVENT=0]="MAJOR_EVENT",e[e.MINOR_EVENT=1]="MINOR_EVENT"})(ce||(ce={}));var q;(function(e){e.PRECALL_TEST_BEGIN="precall_begin",e.PRECALL_TEST_COMPLETE="precall_end",e.CALL_JOIN_BEGIN="call_join",e.NET_QUALITY_TEST_BEGIN="net_quality_test_begin",e.NET_QUALITY_TEST_END="net_quality_test_end",e.WEBSOCKET_CONNECTED="websocket_connected",e.TRANSPORT_CONNECTED="transport_connected",e.AUDIO_ON="audio_on",e.AUDIO_OFF="audio_off",e.VIDEO_ON="video_on",e.VIDEO_OFF="video_off",e.PARTICIPANT_ROLE="participant_role",e.PING_STAT="ping_stat",e.DISCONNECT="disconnect",e.RECONNECT_ATTEMPT="reconnect_attempt",e.SCREENSHARE_START_REQUESTED="screenshare_start_requested",e.SCREENSHARE_STARTED="screenshare_started",e.SCREENSHARE_STOPPED="screenshare_stopped",e.TAB_CHANGE="tab_change",e.BROWSER_BACKGROUNDED="browser_backgrounded",e.BROWSER_FOREGROUNDED="browser_foregrounded",e.DOMINANT_SPEAKER="dominant_speaker",e.AUDIO_DEVICES_UPDATES="audio_devices_updates",e.VIDEO_DEVICES_UPDATES="video_devices_updates",e.SPEAKER_DEVICES_UPDATES="speaker_devices_updates",e.SELECTED_MICROHPONE_UPDATE="selected_microphone_update",e.SELECTED_CAMERA_UPDATE="selected_camera_update",e.SELECTED_SPEAKER_UPDATE="selected_speaker_update",e.MEDIA_PERMISSION="camera_permission",e.LEGACY_SWITCH="legacy_switch",e.AUDIO_PLAY_FAILED="audio_play_failed",e.VIDEO_PLAY_FAILED="video_play_failed",e.AUDIO_TRACK_MUTED="audio_track_muted",e.VIDEO_TRACK_MUTED="video_track_muted",e.IVS_PLAYER_REBUFFERING="ivs_player_rebuffering",e.IVS_PLAYER_AUDIO_BLOCKED="ivs_player_audio_blocked",e.IVS_PLAYER_PLAYBACK_BLOCKED="ivs_player_playback_blocked",e.IVS_PLAYER_ERROR="ivs_player_error",e.IVS_PLAYER_RECOVERABLE_ERROR="ivs_player_recoverable_error",e.IVS_PLAYER_WORKER_ERROR="ivs_player_worker_error",e.IVS_PLAYER_NETWORK_UNAVAILABLE="ivs_player_network_unavailable",e.LIVESTREAM_LATENCY="livestream_latency",e.IVS_PLAYER_ANALYTICS_EVENT="ivs_player_analytics_event",e.IVS_PLAYER_PLAYBACK_RATE_CHANGED="ivs_player_playback_rate_changed",e.IVS_PLAYER_QUALITY_CHANGED="ivs_player_quality_changed",e.IVS_PLAYER_INITIALIZED="ivs_player_initialized"})(q||(q={}));const HU=new Map([[q.PRECALL_TEST_BEGIN,ce.MINOR_EVENT],[q.PRECALL_TEST_COMPLETE,ce.MINOR_EVENT],[q.CALL_JOIN_BEGIN,ce.MAJOR_EVENT],[q.NET_QUALITY_TEST_BEGIN,ce.MINOR_EVENT],[q.NET_QUALITY_TEST_END,ce.MINOR_EVENT],[q.WEBSOCKET_CONNECTED,ce.MINOR_EVENT],[q.TRANSPORT_CONNECTED,ce.MAJOR_EVENT],[q.AUDIO_ON,ce.MINOR_EVENT],[q.AUDIO_OFF,ce.MINOR_EVENT],[q.VIDEO_ON,ce.MINOR_EVENT],[q.VIDEO_OFF,ce.MINOR_EVENT],[q.PARTICIPANT_ROLE,ce.MINOR_EVENT],[q.PING_STAT,ce.MAJOR_EVENT],[q.DISCONNECT,ce.MAJOR_EVENT],[q.RECONNECT_ATTEMPT,ce.MAJOR_EVENT],[q.SCREENSHARE_START_REQUESTED,ce.MINOR_EVENT],[q.SCREENSHARE_STARTED,ce.MINOR_EVENT],[q.SCREENSHARE_STOPPED,ce.MINOR_EVENT],[q.TAB_CHANGE,ce.MINOR_EVENT],[q.BROWSER_BACKGROUNDED,ce.MINOR_EVENT],[q.BROWSER_FOREGROUNDED,ce.MINOR_EVENT],[q.DOMINANT_SPEAKER,ce.MINOR_EVENT],[q.AUDIO_DEVICES_UPDATES,ce.MINOR_EVENT],[q.VIDEO_DEVICES_UPDATES,ce.MINOR_EVENT],[q.SPEAKER_DEVICES_UPDATES,ce.MINOR_EVENT],[q.SELECTED_MICROHPONE_UPDATE,ce.MINOR_EVENT],[q.SELECTED_CAMERA_UPDATE,ce.MINOR_EVENT],[q.SELECTED_SPEAKER_UPDATE,ce.MINOR_EVENT],[q.MEDIA_PERMISSION,ce.MINOR_EVENT],[q.LEGACY_SWITCH,ce.MINOR_EVENT],[q.AUDIO_PLAY_FAILED,ce.MINOR_EVENT],[q.VIDEO_PLAY_FAILED,ce.MINOR_EVENT],[q.AUDIO_TRACK_MUTED,ce.MINOR_EVENT],[q.VIDEO_TRACK_MUTED,ce.MINOR_EVENT],[q.IVS_PLAYER_REBUFFERING,ce.MAJOR_EVENT],[q.IVS_PLAYER_AUDIO_BLOCKED,ce.MAJOR_EVENT],[q.IVS_PLAYER_PLAYBACK_BLOCKED,ce.MAJOR_EVENT],[q.IVS_PLAYER_ERROR,ce.MAJOR_EVENT],[q.IVS_PLAYER_RECOVERABLE_ERROR,ce.MAJOR_EVENT],[q.IVS_PLAYER_WORKER_ERROR,ce.MAJOR_EVENT],[q.IVS_PLAYER_NETWORK_UNAVAILABLE,ce.MAJOR_EVENT],[q.LIVESTREAM_LATENCY,ce.MAJOR_EVENT],[q.IVS_PLAYER_ANALYTICS_EVENT,ce.MINOR_EVENT],[q.IVS_PLAYER_PLAYBACK_RATE_CHANGED,ce.MINOR_EVENT],[q.IVS_PLAYER_QUALITY_CHANGED,ce.MINOR_EVENT],[q.IVS_PLAYER_INITIALIZED,ce.MINOR_EVENT]]);var X1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hi={},GU={get exports(){return Hi},set exports(e){Hi=e}},md=typeof Reflect=="object"?Reflect:null,tS=md&&typeof md.apply=="function"?md.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Gh;md&&typeof md.ownKeys=="function"?Gh=md.ownKeys:Object.getOwnPropertySymbols?Gh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Gh=function(e){return Object.getOwnPropertyNames(e)};function WU(e){console&&console.warn&&console.warn(e)}var D3=Number.isNaN||function(e){return e!==e};function Xe(){Xe.init.call(this)}GU.exports=Xe;Hi.once=ZU;Xe.EventEmitter=Xe;Xe.prototype._events=void 0;Xe.prototype._eventsCount=0;Xe.prototype._maxListeners=void 0;var iS=10;function rf(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Xe,"defaultMaxListeners",{enumerable:!0,get:function(){return iS},set:function(e){if(typeof e!="number"||e<0||D3(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");iS=e}});Xe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||D3(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function N3(e){return e._maxListeners===void 0?Xe.defaultMaxListeners:e._maxListeners}Xe.prototype.getMaxListeners=function(){return N3(this)};Xe.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=n[e];if(o===void 0)return!1;if(typeof o=="function")tS(o,this,t);else for(var c=o.length,d=F3(o,c),i=0;i<c;++i)tS(d[i],this,t);return!0};function U3(e,t,i,r){var n,s,a;if(rf(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),a===void 0)a=s[t]=i,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),n=N3(e),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,WU(o)}return e}Xe.prototype.addListener=function(e,t){return U3(this,e,t,!1)};Xe.prototype.on=Xe.prototype.addListener;Xe.prototype.prependListener=function(e,t){return U3(this,e,t,!0)};function qU(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j3(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=qU.bind(r);return n.listener=i,r.wrapFn=n,n}Xe.prototype.once=function(e,t){return rf(t),this.on(e,j3(this,e,t)),this};Xe.prototype.prependOnceListener=function(e,t){return rf(t),this.prependListener(e,j3(this,e,t)),this};Xe.prototype.removeListener=function(e,t){var i,r,n,s,a;if(rf(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():JU(i,n),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};Xe.prototype.off=Xe.prototype.removeListener;Xe.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),s;for(r=0;r<n.length;++r)s=n[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function $3(e,t,i){var r=e._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?KU(n):F3(n,n.length)}Xe.prototype.listeners=function(e){return $3(this,e,!0)};Xe.prototype.rawListeners=function(e){return $3(this,e,!1)};Xe.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):V3.call(e,t)};Xe.prototype.listenerCount=V3;function V3(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Xe.prototype.eventNames=function(){return this._eventsCount>0?Gh(this._events):[]};function F3(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function JU(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function KU(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function ZU(e,t){return new Promise(function(i,r){function n(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),i([].slice.call(arguments))}B3(e,t,s,{once:!0}),t!=="error"&&QU(e,n,{once:!0})})}function QU(e,t,i){typeof e.on=="function"&&B3(e,"error",t,i)}function B3(e,t,i,r){if(typeof e.on=="function")r.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){r.once&&e.removeEventListener(t,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var rS;(function(e){e.CHROMIUM="chromum",e.FIREFOX="firefox",e.SAFARI="safari"})(rS||(rS={}));var Hu;(function(e){e.DEV="dev",e.STAGING="staging",e.PRODUCTION="production"})(Hu||(Hu={}));var Pr;(function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SPEAKER="SPEAKER"})(Pr||(Pr={}));var va;(function(e){e[e.INIT=0]="INIT",e[e.ACCEPTED=1]="ACCEPTED",e[e.DENIED=2]="DENIED",e[e.SYS_DENIED=3]="SYS_DENIED",e[e.FAILED=4]="FAILED",e[e.NOTFOUND=5]="NOTFOUND",e[e.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(va||(va={}));class YU{constructor(){v(this,"currentChunk"),v(this,"flushedChunks"),this.currentChunk={entries:[]},this.flushedChunks=[]}add(t){this.currentChunk.entries.push(t)}flush(){const t=this.currentChunk;return this.currentChunk={entries:[]},this.flushedChunks.push(t),t}}class XU extends Hi{constructor({logger:t,peerId:i,env:r}){super(),v(this,"logger"),v(this,"peerId"),v(this,"eventStore"),v(this,"apiEndpoint"),this.logger=t,this.peerId=i,r===Hu.PRODUCTION?this.apiEndpoint="https://collector.prod.da.dyte.io/api/v1/message":this.apiEndpoint="https://collector.non-prod.da.dyte.io/api/v1/message",this.eventStore=new YU}async sendEventsChunkToServer(t){const i={payload:t,peerId:this.peerId};try{return await fetch(this.apiEndpoint,{method:"POST",body:JSON.stringify(i)}),!0}catch(r){return this.logger.error("callStats::sendEventsChunkToServer::catch",{error:r}),!1}}callEvent(t){t.timestamp=new Date,this.eventStore.add(t),this.emit(t.event,t.metaData),HU.get(t.event)===ce.MAJOR_EVENT&&this.flush()}async flush(){var t;const i=this.eventStore.flush();return(t=i==null?void 0:i.entries)!=null&&t.length?(await this.sendEventsChunkToServer(i),!0):!1}}class xs{constructor(t){v(this,"pc1"),v(this,"pc2"),v(this,"constrainVideoBitrateKbps"),v(this,"constrainOfferToRemoveVideoFec",!1),v(this,"iceCandidateFilter");const i=new RTCPeerConnection(t),r=new RTCPeerConnection(t);this.pc1=i,this.pc2=r,this.iceCandidateFilter=xs.noFilter,this.pc1.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc1))}static parseCandidate(t){const i="candidate:",r=t.indexOf(i)+i.length,n=t.substr(r).split(" ");return{type:n[7],protocol:n[2],address:n[4]}}static isNotHostCandidate(t){return t.type!=="host"}static isHost(t){return t.type==="host"}static isRelay(t){return t.type==="relay"}static isReflexive(t){return t.type==="srflx"}static noFilter(t){return!0}onIceCandidate(t,i){if(i.candidate){const r=xs.parseCandidate(i.candidate.candidate);this.iceCandidateFilter(r)&&t.addIceCandidate(i.candidate)}}setIceCandidateFilter(t){this.iceCandidateFilter=t}constrainVideoBitrate(t){this.constrainVideoBitrateKbps=t}disableVideoFec(){this.constrainOfferToRemoveVideoFec=!0}gotOffer(t){this.constrainOfferToRemoveVideoFec&&(t.sdp=t.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),t.sdp=t.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(t),this.pc2.setRemoteDescription(t),this.pc2.createAnswer().then(this.gotAnswer.bind(this),this.reportFatal.bind(this))}gotAnswer(t){this.constrainVideoBitrateKbps&&(t.sdp=t.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${this.constrainVideoBitrateKbps}\r
`)),this.pc2.setLocalDescription(t),this.pc1.setRemoteDescription(t)}establishConnection(){this.pc1.createOffer().then(this.gotOffer.bind(this),this.reportFatal.bind(this))}reportFatal(t){console.error("Error:",t)}async getRoundTripTime(){const[t,i]=await Promise.all([this.pc1.getStats(),this.pc2.getStats()]);let r,n;if(t.forEach(s=>{s.type==="candidate-pair"&&s.nominated===!0&&s.bytesSent>0&&(r=s)}),i.forEach(s=>{s.type==="candidate-pair"&&s.nominated===!0&&s.bytesReceived>0&&(n=s)}),r&&n)try{if(r.currentRoundTripTime&&n.currentRoundTripTime)return{rtt:r.currentRoundTripTime,backendRTT:n.currentRoundTripTime};const s=(n.lastPacketReceivedTimestamp-r.lastPacketSentTimestamp)/1e3;return{rtt:s,backendRTT:s}}catch{return}}close(){this.pc1.close(),this.pc2.close()}}class z3 extends Hi{constructor(t){super(),v(this,"call"),v(this,"timeOut"),this.call=new xs(t)}start(t=1e4){this.call.establishConnection(),this.timeOut=setTimeout(this.testFailed.bind(this),t)}testComplete(t){clearTimeout(this.timeOut),this.call.close(),this.emit("done",t)}testFailed(t){console.warn("Test failed, ",t),this.call.close(),this.emit("failed",t)}}const ej=8,tj=1/1e3;class ij extends z3{constructor(t){super(t),v(this,"senderChannel"),v(this,"recieveChannel"),v(this,"startTime"),v(this,"lastBitrateMeasureTime"),v(this,"sentPayloadBytes",0),v(this,"recievedPayloadBytes",0),v(this,"lastReceivedPayloadBytes",0),v(this,"stopSending",!1),v(this,"testProgress",0),v(this,"samplePacket",""),v(this,"finalBitrateSum",0),v(this,"bitRateSampels",0),v(this,"maxNumberOfPacketsToSend",0),v(this,"bytesToKeepBuffered",0),v(this,"testDurationSeconds",5),this.call.setIceCandidateFilter(xs.isNotHostCandidate),this.senderChannel=this.call.pc1.createDataChannel(null);for(let i=0;i<1024*256;i+=1)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.testDurationSeconds=4,this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onRecieverChannel.bind(this))}sendingStep(){const t=new Date;this.startTime||(this.startTime=t,this.lastBitrateMeasureTime=t);for(let r=0;r!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);r+=1){this.sentPayloadBytes+=this.samplePacket.length;try{this.senderChannel.send(this.samplePacket)}catch{}}const i=t.getTime()-this.startTime.getTime();i>=1e3*this.testDurationSeconds?(this.stopSending=!0,this.testProgress=100):(this.testProgress=i/(10*this.testDurationSeconds),setTimeout(this.sendingStep.bind(this),1))}onMessageRecieved(t){this.recievedPayloadBytes+=t.data.length;const i=new Date,r=i.getTime()-this.lastBitrateMeasureTime.getTime();if(r>=1e3){const n=(this.recievedPayloadBytes-this.lastReceivedPayloadBytes)*ej/(r/1e3);this.finalBitrateSum+=n,this.bitRateSampels+=1,this.lastReceivedPayloadBytes=this.recievedPayloadBytes,this.lastBitrateMeasureTime=i}if(this.stopSending&&this.sentPayloadBytes===this.recievedPayloadBytes){const n=this.finalBitrateSum/this.bitRateSampels;this.testComplete({throughput:Math.round(n*tj)})}}testComplete(t){this.call.getRoundTripTime().then(({rtt:i,backendRTT:r})=>super.testComplete({RTT:i,backendRTT:r,throughput:t.throughput}))}onRecieverChannel(t){this.recieveChannel=t.channel,this.recieveChannel.addEventListener("message",this.onMessageRecieved.bind(this))}}class wb extends z3{constructor(t,i=xs.noFilter){super(t),v(this,"ch1"),v(this,"ch2"),this.call.setIceCandidateFilter(i);const r=this.call.pc1.createDataChannel(null);this.ch1=r,r.addEventListener("open",()=>{r.send("hello")}),r.addEventListener("message",this.onCh1Recieve.bind(this)),this.call.pc2.addEventListener("datachannel",this.dataChannelHandler.bind(this))}onCh1Recieve(t){t.data!=="world"?this.hangup("Invalid data transmitted."):this.testComplete({connectivity:!0})}onCh2Recieve(t){if(t.data!=="hello")this.hangup("Invalid data transmitted.");else try{this.ch2.send("world")}catch{}}dataChannelHandler(t){const i=t.channel;this.ch2=i,i.addEventListener("message",this.onCh2Recieve.bind(this))}hangup(t){this.testFailed(t)}}class rj extends wb{constructor(t){super(t,xs.isHost)}}class nj extends wb{constructor(t){super(t,xs.isRelay)}}class sj extends wb{constructor(t){super(t,xs.isReflexive)}}class aj{constructor(){v(this,"ipInformation",null)}async getIPDetails({peerId:t}){var i;if(!this.ipInformation){try{const n=await(await fetch("https://media-location.dyte.io")).json();if(((i=n.loc)==null?void 0:i.length)>5)return this.ipInformation=n,n;throw Error("Insufficient data")}catch{}const r=await fetch(`https://location-service.dyte.io/?token=3c493932b0624c&peerId=${t}`,{method:"POST"});this.ipInformation=await r.json()}return this.ipInformation}}const Sb=new aj,nS=[{urls:"turn:turn.dyte.in:443?transport=tcp",username:"dyte",credential:"dytein",credentialType:"password"},{urls:"turn:turn.dyte.in:3478?transport=udp",username:"dyte",credential:"dytein",credentialType:"password"}];function oj(e){const[t,i]=e.split(",");return{coords:{latitude:Number(t),longitude:Number(i)}}}class H3{constructor(){v(this,"transport"),v(this,"candidatePair"),v(this,"outboundVideoRtp",new Map),v(this,"inboundVideoRtp",new Map),v(this,"outboundAudioRtp",new Map),v(this,"inboundAudioRtp",new Map),v(this,"remoteInboundRtp",new Map),v(this,"producerStreamMap",new Map),v(this,"consumerStreamMap",new Map),v(this,"staleProducerStreamMap",!1),v(this,"staleConsumerStreamMap",!1)}}class G3{constructor(){v(this,"outboundProducerMap",new Map),v(this,"inboundConsumerMap",new Map),v(this,"consumerPeerIdMap",new Map),v(this,"overallProducingTransportsStatsMap",{}),v(this,"overallConsumingTransportsStatsMap",{}),v(this,"overallConsumersStatsMap",{}),v(this,"overallProducersStatsMap",{}),v(this,"consumerIdsWithFreezedVideo",new Set),v(this,"consumerIdsWithFreezedAudio",new Set),v(this,"producerIdsWithFreezedVideo",new Set),v(this,"producerIdsWithFreezedAudio",new Set),v(this,"freezedProducingTransportIds",new Set),v(this,"freezedConsumingTransportIds",new Set),v(this,"ipDetails"),v(this,"callStatsInstance")}async registerProducer(t){await this.generateProducerStreamMap(t),t.observer.on("close",this.deregisterProducer.bind(this,t))}processInboundConsumerVideoStats(t,i,r){var n,s;const a=((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.get(t))||{};i.totalVideoPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedVideo.add(t),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoFreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_video_status","pause",t))):(i.totalVideoPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedVideo.has(t)&&(this.consumerIdsWithFreezedVideo.delete(t),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoDefreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_video_status","resume",t))))}processInboundConsumerAudioStats(t,i,r){var n,s;const a=((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.get(t))||{};i.totalAudioPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedAudio.add(t),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioFreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","pause",t))):(i.totalAudioPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedAudio.has(t)&&(this.consumerIdsWithFreezedAudio.delete(t),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioDefreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","resume",t))))}processOutboundProducerVideoStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{};i.totalVideoPacketsSent===r.packetsSent?(this.producerIdsWithFreezedVideo.add(t),this.callStatsInstance&&s.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoFreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_video_status","pause",t))):(i.totalVideoPacketsSent=r.packetsSent,this.producerIdsWithFreezedVideo.has(t)&&(this.producerIdsWithFreezedVideo.delete(t),this.callStatsInstance&&s.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoDefreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_video_status","resume",t))))}processOutboundProducerAudioStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{};i.totalAudioPacketsSent===r.packetsSent?(this.producerIdsWithFreezedAudio.add(t),this.callStatsInstance&&s.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioFreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_audio_status","pause",t))):(i.totalAudioPacketsSent=r.packetsSent,this.producerIdsWithFreezedAudio.has(t)&&(this.producerIdsWithFreezedAudio.delete(t),this.callStatsInstance&&s.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioDefreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_audio_status","resume",t))))}processProducingTransportStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{},{audio:a,video:o,screen:c}=s,d=a||o||c;i.totalPacketsSent===r.packetsSent?(this.freezedProducingTransportIds.add(t),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportFreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("producing_transport_status","pause",t))):(i.totalPacketsSent=r.packetsSent,this.freezedProducingTransportIds.has(t)&&(this.freezedProducingTransportIds.delete(t),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportDefreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("producing_transport_status","resume",t))))}processConsumingTransportStats(t,i,r){var n,s;const a=!!Array.from(((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.values())||[]).reduce((o,c)=>o||c.audio||c.video||c.screen,!1);i.totalPacketsReceived===r.packetsSent?(this.freezedConsumingTransportIds.add(t),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportFreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","pause",t))):(i.totalPacketsReceived=r.packetsSent,this.freezedConsumingTransportIds.has(t)&&(this.freezedConsumingTransportIds.delete(t),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportDefreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","resume",t))))}async registerConsumer(t){await this.generateConsumerStreamMap(t),this.consumerPeerIdMap.set(t.id,{producerId:t.producerId,peerId:t.appData.peerId}),t.observer.on("close",this.deregisterConsumer.bind(this,t))}async generateProducerStreamMap(t,i=!1){const r=await t.getStats(),n=i?this.getProducerStatsFromReport(this.parseRTCReport(r,["outbound-rtp","remote-inbound-rtp"],!1,t.id))[0]:void 0;for(const s of r.values())switch(s.type){case"outbound-rtp":{this.outboundProducerMap.set(s.id,t.id);break}}return n}async generateConsumerStreamMap(t,i=!1){const r=await t.getStats(),n=i?this.getConsumerStatsFromReport(this.parseRTCReport(r,["inbound-rtp"],!1,t.id))[0]:void 0;for(const s of r.values())switch(s.type){case"inbound-rtp":{this.inboundConsumerMap.set(s.id,t.id);break}}return n}deregisterProducer(t){this.outboundProducerMap.forEach((i,r)=>{i===t.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(t){this.inboundConsumerMap.forEach((i,r)=>{i===t.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(t.id)}parseRTCReport(t,i=[],r=!1,n=void 0,s=void 0){const a=t,o=new H3,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const l=d,u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=u;break}break}case"transport":{const l=d;s&&(s.producing&&(this.overallProducingTransportsStatsMap[s.id]||(this.overallProducingTransportsStatsMap[s.id]={totalPacketsSent:0})),s.consuming&&(this.overallConsumingTransportsStatsMap[s.id]||(this.overallConsumingTransportsStatsMap[s.id]={totalPacketsReceived:0})));const u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=u,s){if(s.producing){const g=this.overallProducingTransportsStatsMap[s.id];this.processProducingTransportStats(s.id,g,u)}if(s.consuming){const g=this.overallConsumingTransportsStatsMap[s.id];this.processConsumingTransportStats(s.id,g,u)}}break}case"remote-inbound-rtp":{const l=d,u={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,u);break}case"outbound-rtp":{const l=d,u=n||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[u]||(this.overallProducersStatsMap[u]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(u)||o.producerStreamMap.set(u,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.targetBitrate,totalPacketSendDelay:f.totalPacketSendDelay,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(d.id,w),o.producerStreamMap.get(u).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(d.id,w),o.producerStreamMap.get(u).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(u,g,w)}}break}case"inbound-rtp":{const l=d,u=n||this.inboundConsumerMap.get(d.id);if(l.ssrc===1234)break;this.overallConsumersStatsMap[u]||(this.overallConsumersStatsMap[u]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(u)||o.consumerStreamMap.set(u,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(u,g,w)}}break}}}if(o.outboundVideoRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,l=0;o.remoteInboundRtp.forEach((u,g)=>{u.roundTripTime&&u.roundTripTime>d&&(d=u.roundTripTime,l=u.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=l}return o}async getProducersReport(t){const i=t.map(r=>this.generateProducerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getConsumersReport(t){const i=t.map(r=>this.generateConsumerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getTransportReport(t){return t.getStats()}async getProcessedStats(t,i,r){const n=await this.getTransportReport(t),s={producing:r,consuming:i,id:t.id},a=n,o=this.parseRTCReport(a,["transport","candidate-pair","inbound-rtp","outbound-rtp","remote-inbound-rtp"],!1,void 0,s);if(!o)return;const c={stats:o.transport,transportId:t.id,consuming:i,producing:r},d=o.staleProducerStreamMap?void 0:this.getProducerStatsFromReport(o),l=o.staleConsumerStreamMap?void 0:this.getConsumerStatsFromReport(o);return{transportReport:c,producerReport:d,consumerReport:l}}getProducerStatsFromReport(t){const i=[];try{t.producerStreamMap.forEach((r,n)=>{var s,a;i.push({producerId:n,videoStats:r.outboundVideoRtpId.map(o=>t.outboundVideoRtp.get(o)),audioStats:r.outboundAudioRtpId.map(o=>t.outboundAudioRtp.get(o)),appData:((a=(s=this.callStatsInstance.producers)==null?void 0:s.get(n))==null?void 0:a.appData)||null})})}catch(r){this.callStatsInstance.logger.error("callStats::measurements::getProducerStatsFromReport",{error:{reason:r.reason,message:r.message}})}return i}getConsumerStatsFromReport(t){const i=[];try{t.consumerStreamMap.forEach((r,n)=>{const{peerId:s,producerId:a}=this.consumerPeerIdMap.get(n);i.push({consumerId:n,peerId:s,producerId:a,videoStats:r.inboundVideoRtpId.map(o=>t.inboundVideoRtp.get(o)),audioStats:r.inboundAudioRtpId.map(o=>t.inboundAudioRtp.get(o))})})}catch(r){console.error("getConsumersReport: ",r,t)}return i}async getUserLocation(){return new Promise((t,i)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{t(r)}):i()}catch(r){i(r)}})}async getConnectivity(t){try{const i={iceServers:t||nS},r=new Promise((d,l)=>{try{const u=new rj(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),n=new Promise((d,l)=>{try{const u=new nj(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),s=new Promise((d,l)=>{try{const u=new sj(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),[a,o,c]=await Promise.all([r,n,s]);return{host:a==null?void 0:a.connectivity,relay:o==null?void 0:o.connectivity,reflexive:c==null?void 0:c.connectivity}}catch{return{host:!1,relay:!1,reflexive:!1}}}async getThroughput(t){try{const i=await new Promise((r,n)=>{try{const s={iceServers:t||nS},a=new ij(s);a.addListener("done",r),a.addListener("failed",n),a.start(1e4)}catch(s){n(s)}});return{throughput:i.throughput,fractionalLoss:0,RTT:i.RTT,jitter:0,backendRTT:i.backendRTT}}catch{return}}async getIPDetails(){var t;try{return this.ipDetails||(this.ipDetails=await Sb.getIPDetails({peerId:(t=this.callStatsInstance)==null?void 0:t.peerId})),this.ipDetails}catch{return}}async getNetworkQuality(t){const[i,r]=await Promise.all([this.getConnectivity(t),this.getThroughput(t)]);return{connectivity:i,throughput:r==null?void 0:r.throughput,fractionalLoss:r==null?void 0:r.fractionalLoss,RTT:r==null?void 0:r.RTT,jitter:r==null?void 0:r.jitter,backendRTT:r==null?void 0:r.backendRTT}}async getNetworkInfo(t){var i;const[r,n,s]=await Promise.all([this.getConnectivity(t),this.getThroughput(t),this.getIPDetails()]);return{ipDetails:s,effectiveNetworkType:(i=navigator.connection)==null?void 0:i.effectiveType,location:s.loc?oj(s.loc):void 0,turnConnectivity:r?r.host||r.relay||r.reflexive:!1,connectivity:r,throughput:n==null?void 0:n.throughput,fractionalLoss:n==null?void 0:n.fractionalLoss,RTT:n==null?void 0:n.RTT,jitter:n==null?void 0:n.jitter,backendRTT:n==null?void 0:n.backendRTT}}}class cj extends G3{}class W3 extends G3{constructor(){super(...arguments),v(this,"producerMap",new Map),v(this,"consumerMap",new Map)}async registerProducer(t){this.producerMap.set(t.id,t),await this.generateProducerStreamMap(t),t.observer.on("close",this.deregisterProducer.bind(this,t))}async registerConsumer(t){this.consumerMap.set(t.id,t),await this.generateConsumerStreamMap(t),this.consumerPeerIdMap.set(t.id,{producerId:t.producerId,peerId:t.appData.peerId}),t.observer.on("close",this.deregisterConsumer.bind(this,t))}async generateConsumerStreamMap(t,i=!1){const r=await t.getStats(),n=this.parseRTCReport(r,["inbound-rtp"],!1,t.id),s=[...n.consumerStreamMap.values()][0],a=i?this.getConsumerStatsFromParsedConsumerStats(n,s,t.id):void 0;for(const o of r.values())switch(o.type){case"inbound-rtp":{this.inboundConsumerMap.set(o.id,t.id);break}}return a}deregisterProducer(t){this.producerMap.delete(t.id),this.outboundProducerMap.forEach((i,r)=>{i===t.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(t){this.consumerMap.delete(t.id),this.inboundConsumerMap.forEach((i,r)=>{i===t.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(t.id)}parseRTCReport(t,i=[],r=!1,n=void 0,s=void 0){const a=t,o=new H3,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const l=d,u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=u;break}break}case"transport":{const l=d;s&&(s.producing&&(this.overallProducingTransportsStatsMap[s.id]||(this.overallProducingTransportsStatsMap[s.id]={totalPacketsSent:0})),s.consuming&&(this.overallConsumingTransportsStatsMap[s.id]||(this.overallConsumingTransportsStatsMap[s.id]={totalPacketsReceived:0})));const u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=u,s){if(s.producing){const g=this.overallProducingTransportsStatsMap[s.id];this.processProducingTransportStats(s.id,g,u)}if(s.consuming){const g=this.overallConsumingTransportsStatsMap[s.id];this.processConsumingTransportStats(s.id,g,u)}}break}case"remote-inbound-rtp":{const l=d,u={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,u);break}case"outbound-rtp":{const l=d,u=n||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[u]||(this.overallProducersStatsMap[u]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(u)||o.producerStreamMap.set(u,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.totalEncodeTime,totalPacketSendDelay:f.totalEncodeTime,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(d.id,w),o.producerStreamMap.get(u).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(d.id,w),o.producerStreamMap.get(u).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(u,g,w)}}break}case"inbound-rtp":{const l=d,u=n||this.inboundConsumerMap.get(d.id);this.overallConsumersStatsMap[u]||(this.overallConsumersStatsMap[u]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(u)||o.consumerStreamMap.set(u,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,w={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(u,g,w)}else if(l.mediaType==="audio"){const f=l,w={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(d.id,w),o.consumerStreamMap.get(u).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(u,g,w)}}break}}}if(o.outboundVideoRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.bytesReceived=o.candidatePair.bytesReceived,o.transport.bytesSent=o.candidatePair.bytesSent,o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,l=0;o.remoteInboundRtp.forEach((u,g)=>{u.roundTripTime&&u.roundTripTime>d&&(d=u.roundTripTime,l=u.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=l}return o}getProducerStatsFromReport(t){const i=[];try{t.producerStreamMap.forEach((r,n)=>{const s=this.producerMap.get(n).track.getSettings(),a=r.outboundVideoRtpId.map(c=>{const d=t.outboundVideoRtp.get(c);return d.frameHeight||(d.frameHeight=s.height,d.frameWidth=s.width,d.framesPerSecond=s.frameRate),d}),o={producerId:n,videoStats:a,audioStats:r.outboundAudioRtpId.map(c=>t.outboundAudioRtp.get(c))};i.push(o)})}catch(r){console.error("getProducersReport: ",r,t)}return i}getConsumerStatsFromParsedConsumerStats(t,i,r){let n;try{const{peerId:s,producerId:a}=this.consumerPeerIdMap.get(r),o=i==null?void 0:i.inboundVideoRtpId.map(c=>{const d=this.consumerMap.get(r).track.getSettings(),l=t.inboundVideoRtp.get(c);return l.frameHeight||(l.frameHeight=d.height,l.frameWidth=d.width,l.framesPerSecond=d.frameRate),l});n={consumerId:r,peerId:s,producerId:a,videoStats:o,audioStats:i==null?void 0:i.inboundAudioRtpId.map(c=>t.inboundAudioRtp.get(c))}}catch(s){console.error("getConsumerStatsFromParsedConsumerStats: ",s,t)}return n}getConsumerStatsFromReport(t){const i=[];try{t.consumerStreamMap.forEach((r,n)=>{i.push(this.getConsumerStatsFromParsedConsumerStats(t,r,n))})}catch(r){console.error("getConsumerStatsFromReport: ",r,t)}return i}}class dj extends W3{}function Kg(e,t,i,r){if(typeof i=="function"&&r instanceof t)i.call(null,r,e);else throw r}function sS(e,t,i){const r=e.value;return e.value=function(...n){try{const s=r.apply(this,n);return s&&s instanceof Promise?s.catch(a=>{Kg(this,t,i,a)}):s}catch(s){Kg(this,t,i,s)}return null},e}const fe=(e,t)=>(i,r,n)=>{const s=n.value;return n.value=function(...a){try{const o=s.apply(this,a);return o&&o instanceof Promise?o.catch(c=>{Kg(this,e,t,c)}):o}catch(o){Kg(this,e,t,o)}return null},n},lj=(e,t)=>(i,r,n)=>{if(n)return sS(n,e,t);for(const s of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,s);a.value instanceof Function&&Object.defineProperty(i.prototype,s,sS(a,e,t))}};var pe=globalThis&&globalThis.__decorate||function(e,t,i,r){var n=arguments.length,s=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,i,s):a(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const he=console;let le=class{constructor(e="https://api.testingv3.dyte.in",t="Blink",i=Hu.PRODUCTION,r,n,s){switch(v(this,"eventHandler"),v(this,"measurements"),v(this,"producingTransport"),v(this,"consumingTransport"),v(this,"producers",new Map),v(this,"consumers",new Map),v(this,"iceServers"),v(this,"connectionInfoPromise"),v(this,"pingStatsTimeout"),v(this,"logger"),v(this,"env"),v(this,"peerId"),v(this,"consumerSharedMediaStatesMap",new Map),v(this,"currentUserMediaStates",{}),this.env=i,this.logger=n,this.peerId=s,this.eventHandler=new XU({logger:n,peerId:s,env:i}),this.logger.debug("callStats::engineName: ",{engineName:t}),t){case"Blink":this.measurements=new cj;break;case"Gecko":this.measurements=new W3;break;case"WebKit":this.measurements=new dj;break;default:throw Error(`Unknown engineName! ${t}`)}this.measurements.callStatsInstance=this,this.registerProducer=this.registerProducer.bind(this),this.registerConsumer=this.registerConsumer.bind(this)}registerIceServers(e){this.iceServers=e}registerConsumer(e){var t;this.consumerSharedMediaStatesMap.has(e.id)||this.consumerSharedMediaStatesMap.set(e.id,{}),this.consumers.set(e.id,e),this.measurements.registerConsumer(e),this.logger.debug("callStats::registerConsumer",{consumerId:e.id,consumerkind:e.kind,isScreenShare:!!((t=e.appData)!=null&&t.screenShare)}),e.observer.on("close",this.deRegisterConsumer.bind(this,e))}registerProducer(e){var t;this.producers.set(e.id,e),this.measurements.registerProducer(e),this.logger.debug("callStats::registerProducer",{producerId:e.id,producerKind:e.kind,isScreenShare:!!((t=e.appData)!=null&&t.screenShare)}),e.observer.on("close",this.deRegisterProducer.bind(this,e))}sendConsumerSharedMediaStateEvent(e,t){this.consumerSharedMediaStatesMap.has(e)||this.consumerSharedMediaStatesMap.set(e,{});const i=this.consumerSharedMediaStatesMap.get(e);this.consumerSharedMediaStatesMap.set(e,Object.assign(i,t))}registerProducingTransport(e){var t;this.producingTransport=e,e.observer.on("close",this.disconnectProducingTransport.bind(this,e)),e.observer.on("disconnect",this.disconnectProducingTransport.bind(this,e)),Array.from(((t=e._producers)==null?void 0:t.values())||[]).forEach(i=>{this.registerProducer(i)}),e.observer.on("newproducer",this.registerProducer)}registerConsumingTransport(e){var t;this.consumingTransport=e,e.observer.on("close",this.disconnectConsumingTransport.bind(this,e)),e.observer.on("disconnect",this.disconnectConsumingTransport.bind(this,e)),Array.from(((t=e._consumers)==null?void 0:t.values())||[]).forEach(i=>{this.registerConsumer(i)}),e.observer.on("newconsumer",this.registerConsumer)}deRegisterConsumer(e){this.consumers.delete(e.id)}deRegisterProducer(e){this.producers.delete(e.id)}disconnectConsumingTransport(){this.consumingTransport=void 0}disconnectProducingTransport(){this.producingTransport=void 0}callEvent(e){this.eventHandler.callEvent(e)}sendPreCallTestBeginEvent(){this.connectionInfoPromise=this.measurements.getNetworkInfo(this.iceServers),this.eventHandler.callEvent({event:q.PRECALL_TEST_BEGIN,timestamp:new Date}),this.connectionInfoPromise&&this.connectionInfoPromise.then(e=>{this.eventHandler.callEvent({event:q.PRECALL_TEST_COMPLETE,metaData:{connectionInfo:e},timestamp:new Date})})}sendScreenShareToggleEvent(e,t){this.currentUserMediaStates.screen=e,this.eventHandler.callEvent({event:e?q.SCREENSHARE_STARTED:q.SCREENSHARE_STOPPED,metaData:{ssrc:t},timestamp:new Date})}sendScreenShareRequestedEvent(){this.eventHandler.callEvent({event:q.SCREENSHARE_START_REQUESTED,timestamp:new Date})}sendActiveSpeakerEvent(e){this.eventHandler.callEvent({event:q.DOMINANT_SPEAKER,metaData:{peerId:e},timestamp:new Date})}devices(e,t){this.eventHandler.callEvent({event:e===Pr.AUDIO&&q.AUDIO_DEVICES_UPDATES||e===Pr.VIDEO&&q.VIDEO_DEVICES_UPDATES||e===Pr.SPEAKER&&q.SPEAKER_DEVICES_UPDATES,metaData:{deviceList:t},timestamp:new Date})}selectedDevice(e,t){this.eventHandler.callEvent({event:e===Pr.AUDIO&&q.SELECTED_MICROHPONE_UPDATE||e===Pr.VIDEO&&q.SELECTED_CAMERA_UPDATE||e===Pr.SPEAKER&&q.SELECTED_SPEAKER_UPDATE,metaData:{device:t},timestamp:new Date})}mediaPermission(e,t){this.eventHandler.callEvent({event:q.MEDIA_PERMISSION,metaData:{deviceType:e,permission:t},timestamp:new Date})}mediaPlaybackFailed(e){this.eventHandler.callEvent({event:e===Pr.AUDIO&&q.AUDIO_PLAY_FAILED||e===Pr.VIDEO&&q.VIDEO_PLAY_FAILED,metaData:{deviceType:e},timestamp:new Date})}mediaTrackMuted(e){this.eventHandler.callEvent({event:e===Pr.AUDIO&&q.AUDIO_TRACK_MUTED||e===Pr.VIDEO&&q.VIDEO_TRACK_MUTED,metaData:{deviceType:e},timestamp:new Date})}tabChanged(e){this.eventHandler.callEvent({event:q.TAB_CHANGE,metaData:{isMeetingsTabActive:e},timestamp:new Date})}browserBackgrounded(){this.eventHandler.callEvent({event:q.BROWSER_BACKGROUNDED,timestamp:new Date})}browserForegrounded(){this.eventHandler.callEvent({event:q.BROWSER_FOREGROUNDED,timestamp:new Date})}legacySwitch(e){this.eventHandler.callEvent({event:q.LEGACY_SWITCH,metadata:{on:e},timestamp:new Date})}async getPreCallTestResults(){return this.connectionInfoPromise}sendCallJoinBeginEvent(e){e={...e,meetingEnv:this.env},e.deviceInfo={...e.deviceInfo,userAgent:navigator.userAgent,cpus:navigator.hardwareConcurrency,memory:navigator.deviceMemory},this.eventHandler.callEvent({event:q.CALL_JOIN_BEGIN,metaData:{peerMetaData:e},timestamp:new Date})}sendNetworkQualityTestBeginEvent(e){this.eventHandler.callEvent({event:q.NET_QUALITY_TEST_BEGIN,timestamp:new Date}),new Promise(async(t,i)=>{const r=[];try{for(const n of e)try{if(n.iceServers&&n.iceServers.length>0){const s=await this.measurements.getNetworkQuality(n.iceServers);r.push({...n,networkResults:s})}}catch(s){console.warn("Error handling ",s)}t({regionData:r})}catch(n){console.warn("Error in callstats, ",n),i(n)}}).then(t=>{this.eventHandler.callEvent({event:q.NET_QUALITY_TEST_END,timestamp:new Date,metaData:t})})}sendWebSocketConnectedEvent(){this.eventHandler.callEvent({event:q.WEBSOCKET_CONNECTED,timestamp:new Date})}sendTransportConnectedEvent(){this.eventHandler.callEvent({event:q.TRANSPORT_CONNECTED,timestamp:new Date})}sendAudioToggleEvent(e){this.currentUserMediaStates.audio=e;let t;e?t=q.AUDIO_ON:t=q.AUDIO_OFF,this.eventHandler.callEvent({event:t,timestamp:new Date})}sendVideoToggleEvent(e){this.currentUserMediaStates.video=e;let t;e?t=q.VIDEO_ON:t=q.VIDEO_OFF,this.eventHandler.callEvent({event:t,timestamp:new Date})}sendParticipantRoleToggleEvent(e){this.eventHandler.callEvent({event:q.PARTICIPANT_ROLE,timestamp:new Date,metaData:e})}startPingStats(e=7e3){this.sendPingStatsEvent(!1),this.pingStatsTimeout=setInterval(this.sendPingStatsEvent.bind(this),e)}stopPingStats(){clearInterval(this.pingStatsTimeout)}async sendPingStatsEvent(e=!0){let t,i;if(this.producingTransport&&(t=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),!t||!(t!=null&&t.producerReport))){this.logger.debug("callStats::sendPingStatsEvent::staleProducingTransport",{disclaimer:"Stale producer? Regenerating Stream Maps!"});const n=await this.measurements.getProducersReport([...this.producers.values()]);t&&n?t.producerReport=n:(t=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),(!t||!(t!=null&&t.producerReport))&&this.logger.debug("callStats::sendPingStatsEvent::noProducingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}if(this.consumingTransport&&(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),!i||!i.consumerReport)){this.logger.debug("callStats::sendPingStatsEvent::staleConsumingTransport",{disclaimer:"Stale consumer? Regenerating Stream Maps!"});const n=await this.measurements.getConsumersReport([...this.consumers.values()]);i&&n?i.consumerReport=n:(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),(!i||!i.consumerReport)&&this.logger.debug("callStats::sendPingStatsEvent::noConsumingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}const r={producingTransportStats:t?t==null?void 0:t.transportReport:void 0,consumingTransportStats:i?i==null?void 0:i.transportReport:void 0,producerStats:[].concat((t==null?void 0:t.producerReport)||[]).concat((i==null?void 0:i.producerReport)||[]),consumerStats:[].concat((i==null?void 0:i.consumerReport)||[]).concat((t==null?void 0:t.consumerReport)||[])};if(e&&r.producerStats.length===0&&r.consumerStats.length===0){await this.eventHandler.flush();return}this.eventHandler.callEvent({event:q.PING_STAT,metaData:r,timestamp:new Date})}sendIVSPlayerRebufferEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_REBUFFERING,timestamp:new Date})}sendIVSPlayerAudioBlockEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_AUDIO_BLOCKED,timestamp:new Date})}sendIVSPlayerPlaybackBlockedEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_PLAYBACK_BLOCKED,timestamp:new Date})}sendIVSPlayerNetworkUnavailableEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_NETWORK_UNAVAILABLE,timestamp:new Date})}sendIVSPlayerInitializedEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_INITIALIZED,timestamp:new Date})}sendIVSPlayerWorkerErrorEvent(){this.eventHandler.callEvent({event:q.IVS_PLAYER_WORKER_ERROR,timestamp:new Date})}sendIVSPlayerErrorEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_ERROR,timestamp:new Date,metaData:e})}sendIVSPlayerRecoverableErrorEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_RECOVERABLE_ERROR,timestamp:new Date,metaData:e})}sendIVSPlayerAnalyticsEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_ANALYTICS_EVENT,timestamp:new Date,metaData:e})}sendIVSPlayerPlaybackRateChangedEvent(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_PLAYBACK_RATE_CHANGED,timestamp:new Date,metaData:{updatedPlaybackRate:e}})}sendIVSPlayerQualityChanged(e){this.eventHandler.callEvent({event:q.IVS_PLAYER_QUALITY_CHANGED,timestamp:new Date,metaData:e})}sendPlayerLiveLatency(e){this.eventHandler.callEvent({event:q.LIVESTREAM_LATENCY,timestamp:new Date,metaData:{latency:e}})}sendDisconnectEvent(){this.eventHandler.callEvent({event:q.DISCONNECT,timestamp:new Date})}sendReconnectEvent(){this.eventHandler.callEvent({event:q.RECONNECT_ATTEMPT,timestamp:new Date})}};pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerIceServers",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerConsumer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerProducer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendConsumerSharedMediaStateEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerProducingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"registerConsumingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"deRegisterConsumer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"deRegisterProducer",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"disconnectConsumingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"disconnectProducingTransport",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendPreCallTestBeginEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendScreenShareToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendScreenShareRequestedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendActiveSpeakerEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"devices",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"selectedDevice",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"mediaPermission",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"mediaPlaybackFailed",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"mediaTrackMuted",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"tabChanged",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"browserBackgrounded",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"browserForegrounded",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"legacySwitch",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"getPreCallTestResults",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendCallJoinBeginEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendNetworkQualityTestBeginEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendWebSocketConnectedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendTransportConnectedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendAudioToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendVideoToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendParticipantRoleToggleEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"startPingStats",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"stopPingStats",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendPingStatsEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerRebufferEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerAudioBlockEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerPlaybackBlockedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerNetworkUnavailableEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerInitializedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerWorkerErrorEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerErrorEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerRecoverableErrorEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerAnalyticsEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerPlaybackRateChangedEvent",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendIVSPlayerQualityChanged",null);pe([fe(TypeError,(e,t)=>he.error(t,e))],le.prototype,"sendPlayerLiveLatency",null);le=pe([lj(TypeError,(e,t)=>he.error(t,e))],le);const uj=le;class pj extends Hi{constructor(){super(...arguments),v(this,"stats"),v(this,"roomURL"),v(this,"peerId"),v(this,"backend"),v(this,"iceServers"),v(this,"initialized",!1),v(this,"stalled",!1),v(this,"ipInformation"),v(this,"logger")}async initialize({peerId:t,engineName:i,env:r=Hu.PRODUCTION,iceServers:n,apiBase:s="https://api.cluster.dyte.in",flags:a,logger:o=console}){var c,d,l;try{this.peerId=t,this.logger=o,this.ipInformation=await Sb.getIPDetails({peerId:t}),this.backend=new uj(s,i,r,a,o,t),this.iceServers=n,(c=this.backend)==null||c.registerIceServers(this.iceServers),this.initialized=!0,(l=(d=this.backend)==null?void 0:d.eventHandler)==null||l.emit("initialized",this.ipInformation),this.emit("initialized",this.ipInformation),this.startPreCallTest()}catch(u){this.logger.error("callStats::CallStatsIntegration: ",{error:{reason:u.reason}}),this.stallCallStats()}}setRoomName(t){this.roomURL=t}configureSendTransport(t){var i;(i=this.backend)==null||i.registerProducingTransport(t)}configureRecvTransport(t){var i;(i=this.backend)==null||i.registerConsumingTransport(t)}async candidateRegionalNetworkQualityTest(t){var i;try{(i=this.backend)==null||i.sendNetworkQualityTestBeginEvent(t)}catch(r){this.logger.error("callStats::sendNetworkQualityTestBeginEvent",{error:{reason:r.reason}})}}async roomJoined(t){var i,r;(i=this.backend)==null||i.sendCallJoinBeginEvent(t),this.backend,(r=this.backend)==null||r.startPingStats()}audioOff(){var t;(t=this.backend)==null||t.sendAudioToggleEvent(!1)}audioOn(){var t;(t=this.backend)==null||t.sendAudioToggleEvent(!0)}videoOff(){var t;(t=this.backend)==null||t.sendVideoToggleEvent(!1)}videoOn(){var t;(t=this.backend)==null||t.sendVideoToggleEvent(!0)}callEnded(){var t,i;(t=this.backend)==null||t.stopPingStats(),(i=this.backend)==null||i.sendDisconnectEvent()}screenShareStart(t){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!0,t)}consumerSharedMediaState(t,i){var r;(r=this.backend)==null||r.sendConsumerSharedMediaStateEvent(t,i)}screenShareStop(t){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!1,t)}screenShareRequested(){var t;(t=this.backend)==null||t.sendScreenShareRequestedEvent()}activeSpeaker(t){var i;t===this.peerId&&((i=this.backend)==null||i.sendActiveSpeakerEvent(t))}devices(t,i){var r;(r=this.backend)==null||r.devices(t,i)}selectedDevice(t,i){var r;(r=this.backend)==null||r.selectedDevice(t,i)}mediaPermission(t,i){var r;(r=this.backend)==null||r.mediaPermission(t,i)}mediaPlaybackFailed(t){var i;(i=this.backend)==null||i.mediaPlaybackFailed(t)}mediaTrackMuted(t){var i;(i=this.backend)==null||i.mediaTrackMuted(t)}tabChanged(t=!1){var i;(i=this.backend)==null||i.tabChanged(t)}browserBackgrounded(){var t;(t=this.backend)==null||t.browserBackgrounded()}browserForegrounded(){var t;(t=this.backend)==null||t.browserForegrounded()}legacySwitch(t){var i;(i=this.backend)==null||i.legacySwitch(t)}async startPreCallTest(){var t;(t=this.backend)==null||t.sendPreCallTestBeginEvent()}onPreCallTestResults(t){var i;return(i=this.backend)==null||i.eventHandler.once("precall_end",t),t}onReceivingConsumerAudioStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consumer_audio_status",t)}onReceivingConsumerVideoStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consumer_video_status",t)}onReceivingProducerAudioStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producer_audio_status",t)}onReceivingProducerVideoStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producer_video_status",t)}onReceivingProducingTransportStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producing_transport_status",t)}onReceivingConsumingTransportStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consuming_transport_status",t)}onSafeInitialization(t){if(this.initialized)t(this.ipInformation,!1);else if(!this.stalled){const i=r=>{t(r,!0)};return this.once("initialized",i),i}return()=>{}}removeInitializationListener(t){this.removeListener("initialized",t)}stallCallStats(){this.stalled=!0,this.removeAllListeners("initialized")}ivsPlayerEvent(t,i){var r,n,s,a,o,c,d,l,u,g,m;switch(t){case"PlayerRebuffering":(r=this.backend)==null||r.sendIVSPlayerRebufferEvent();break;case"PlayerAudioBlocked":(n=this.backend)==null||n.sendIVSPlayerAudioBlockEvent();break;case"PlayerPlaybackBlocked":(s=this.backend)==null||s.sendIVSPlayerPlaybackBlockedEvent();break;case"PlayerNetworkUnavailable":(a=this.backend)==null||a.sendIVSPlayerNetworkUnavailableEvent();break;case"PlayerInitialized":(o=this.backend)==null||o.sendIVSPlayerInitializedEvent();break;case"PlayerWorkerError":(c=this.backend)==null||c.sendIVSPlayerWorkerErrorEvent();break;case"PlayerError":(d=this.backend)==null||d.sendIVSPlayerErrorEvent(i);break;case"PlayerRecoverableError":(l=this.backend)==null||l.sendIVSPlayerRecoverableErrorEvent(i);break;case"PlayerAnalyticsEvent":(u=this.backend)==null||u.sendIVSPlayerAnalyticsEvent(i);break;case"PlayerPlaybackRateChanged":(g=this.backend)==null||g.sendIVSPlayerPlaybackRateChangedEvent(i);break;case"PlayerQualityChanged":(m=this.backend)==null||m.sendIVSPlayerQualityChanged(i);break}}livestreamLatency(t){var i;(i=this.backend)==null||i.sendPlayerLiveLatency(t)}}const Z=new pj;Z.setMaxListeners(30);function hj(e){const{length:t}=this,i=e>=0?e:t+e;return i<0||i>=t?void 0:this[i]}Array.prototype.at||Object.assign(Array.prototype,{at:hj});function gj(e){const{length:t}=this,i=e>=0?e:t+e;return i<0||i>=t?void 0:this[i]}String.prototype.at||Object.assign(String.prototype,{at:gj});var Gu;(function(e){e.skip="SKIP",e.onAccept="ON_ACCEPT",e.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",e.skipOnAccept="SKIP_ON_ACCEPT"})(Gu||(Gu={}));var Wo;(function(e){e.none="NONE",e.recorder="RECORDER",e.livestreamer="LIVESTREAMER"})(Wo||(Wo={}));var Zg;(function(e){e.groupCall="GROUP_CALL",e.webinar="WEBINAR",e.audioRoom="AUDIO_ROOM",e.livestream="LIVESTREAM"})(Zg||(Zg={}));var aS;(function(e){e.SKIP="skip",e.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",e.ON_ACCEPT="skipOnAccept",e.SKIP_ON_ACCEPT="skipOnAccept"})(aS||(aS={}));Zg.groupCall,Gu.skipOnAccept,Wo.none;Zg.groupCall,Wo.none,Gu.skipOnAccept;let q3="hXgU8Wc8pwuGNq9ms5q9Hh";var oS;typeof process<"u"&&(oS=process==null?void 0:process.env)!=null&&oS.FLAGSMITH_ENVIRONMENT_KEY&&(q3={}.FLAGSMITH_ENVIRONMENT_KEY);function mj(e=[]){const t={};return e.forEach(i=>{t[i.feature.name]={enabled:i.enabled,value:i.feature_state_value}}),t}class fj{constructor(t=q3){v(this,"flags",{}),v(this,"environmentKey",null),this.environmentKey=t,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(t,i={},r=!1,n=5e3){const s=JSON.parse(JSON.stringify(i)),a=Object.entries(s).map(o=>({trait_key:o[0],trait_value:o[1]}));try{const o="_"+(Math.random()+1).toString(36).substring(2),c=await $g.post("https://edge.api.flagsmith.com/api/v1/identities/",{identifier:t+(r?o:""),traits:a},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:n});this.flags=mj(c.data.flags||[])}catch{}return this.flags}getValue(t){return this.flags&&this.flags[t]&&this.flags[t].value}hasFeature(t){return this.flags&&this.flags[t]&&this.flags[t].enabled}getAllFlags(){return this.flags}}const ee=new fj,J3=[-2,-1,0,1,2],vj=[0,1,2,3,4];function yj(e){let t="0",i="0",r="0";if(e.length==4)t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3];else if(e.length==7)t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6];else throw new Error("[dyte] Invalid hex color code provided");return[+t,+i,+r]}const _j=(e,t,i)=>{let r,n,s;if(t==0)r=n=s=i;else{const a=(d,l,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(l-d)*6*u:u<.5?l:u<.6666666666666666?d+(l-d)*(.6666666666666666-u)*6:d),o=i<.5?i*(1+t):i+t-i*t,c=2*i-o;r=a(c,o,e+1/3),n=a(c,o,e),s=a(c,o,e-1/3)}return[Math.round(r*255),Math.round(n*255),Math.round(s*255)]},bj=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),n=Math.min(e,t,i);let s,a;const o=(r+n)/2;if(r==n)s=a=0;else{const c=r-n;switch(a=o>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4;break}s/=6}return[s,a,o]},wj=(e,t,i)=>{const r=n=>n.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(i)}`},K3=(e,t=J3,i=.4)=>{const r=[],[n,s,a]=yj(e),[o,c,d]=bj(n,s,a),l=Math.round(d*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const u=t.findIndex(S=>S===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-u,m=u+1,f=(100-l)/g,w=l/m;for(const S of t){let y;S<0?y=l+S*w*i:S>0?y=l+S*f*i:y=l;const[_,T,P]=_j(o,c,y/100);r.push(wj(_,T,P))}return r},Sj=e=>{const[t,i,r,n,s]=K3(e,J3);return{300:t,400:i,500:r,600:n,700:s}},Ej=e=>{const[t,i,r,n,s]=K3(e,vj);return{1e3:t,900:i,800:r,700:n,600:s}};function Tj(){this.__data__=[],this.size=0}function Z3(e,t){return e===t||e!==e&&t!==t}function nf(e,t){for(var i=e.length;i--;)if(Z3(e[i][0],t))return i;return-1}var kj=Array.prototype,Cj=kj.splice;function Pj(e){var t=this.__data__,i=nf(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():Cj.call(t,i,1),--this.size,!0}function Rj(e){var t=this.__data__,i=nf(t,e);return i<0?void 0:t[i][1]}function xj(e){return nf(this.__data__,e)>-1}function Aj(e,t){var i=this.__data__,r=nf(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function Ms(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Ms.prototype.clear=Tj;Ms.prototype.delete=Pj;Ms.prototype.get=Rj;Ms.prototype.has=xj;Ms.prototype.set=Aj;function Ij(){this.__data__=new Ms,this.size=0}function Oj(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Mj(e){return this.__data__.get(e)}function Lj(e){return this.__data__.has(e)}var Dj=typeof global=="object"&&global&&global.Object===Object&&global;const Q3=Dj;var Nj=typeof self=="object"&&self&&self.Object===Object&&self,Uj=Q3||Nj||Function("return this")();const wn=Uj;var jj=wn.Symbol;const Od=jj;var Y3=Object.prototype,$j=Y3.hasOwnProperty,Vj=Y3.toString,vl=Od?Od.toStringTag:void 0;function Fj(e){var t=$j.call(e,vl),i=e[vl];try{e[vl]=void 0;var r=!0}catch{}var n=Vj.call(e);return r&&(t?e[vl]=i:delete e[vl]),n}var Bj=Object.prototype,zj=Bj.toString;function Hj(e){return zj.call(e)}var Gj="[object Null]",Wj="[object Undefined]",cS=Od?Od.toStringTag:void 0;function zd(e){return e==null?e===void 0?Wj:Gj:cS&&cS in Object(e)?Fj(e):Hj(e)}function Oa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var qj="[object AsyncFunction]",Jj="[object Function]",Kj="[object GeneratorFunction]",Zj="[object Proxy]";function X3(e){if(!Oa(e))return!1;var t=zd(e);return t==Jj||t==Kj||t==qj||t==Zj}var Qj=wn["__core-js_shared__"];const W0=Qj;var dS=function(){var e=/[^.]+$/.exec(W0&&W0.keys&&W0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Yj(e){return!!dS&&dS in e}var Xj=Function.prototype,e$=Xj.toString;function tc(e){if(e!=null){try{return e$.call(e)}catch{}try{return e+""}catch{}}return""}var t$=/[\\^$.*+?()[\]{}|]/g,i$=/^\[object .+?Constructor\]$/,r$=Function.prototype,n$=Object.prototype,s$=r$.toString,a$=n$.hasOwnProperty,o$=RegExp("^"+s$.call(a$).replace(t$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c$(e){if(!Oa(e)||Yj(e))return!1;var t=X3(e)?o$:i$;return t.test(tc(e))}function d$(e,t){return e==null?void 0:e[t]}function ic(e,t){var i=d$(e,t);return c$(i)?i:void 0}var l$=ic(wn,"Map");const Wu=l$;var u$=ic(Object,"create");const qu=u$;function p$(){this.__data__=qu?qu(null):{},this.size=0}function h$(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var g$="__lodash_hash_undefined__",m$=Object.prototype,f$=m$.hasOwnProperty;function v$(e){var t=this.__data__;if(qu){var i=t[e];return i===g$?void 0:i}return f$.call(t,e)?t[e]:void 0}var y$=Object.prototype,_$=y$.hasOwnProperty;function b$(e){var t=this.__data__;return qu?t[e]!==void 0:_$.call(t,e)}var w$="__lodash_hash_undefined__";function S$(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=qu&&t===void 0?w$:t,this}function qo(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}qo.prototype.clear=p$;qo.prototype.delete=h$;qo.prototype.get=v$;qo.prototype.has=b$;qo.prototype.set=S$;function E$(){this.size=0,this.__data__={hash:new qo,map:new(Wu||Ms),string:new qo}}function T$(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function sf(e,t){var i=e.__data__;return T$(t)?i[typeof t=="string"?"string":"hash"]:i.map}function k$(e){var t=sf(this,e).delete(e);return this.size-=t?1:0,t}function C$(e){return sf(this,e).get(e)}function P$(e){return sf(this,e).has(e)}function R$(e,t){var i=sf(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function Va(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Va.prototype.clear=E$;Va.prototype.delete=k$;Va.prototype.get=C$;Va.prototype.has=P$;Va.prototype.set=R$;var x$=200;function A$(e,t){var i=this.__data__;if(i instanceof Ms){var r=i.__data__;if(!Wu||r.length<x$-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Va(r)}return i.set(e,t),this.size=i.size,this}function Hd(e){var t=this.__data__=new Ms(e);this.size=t.size}Hd.prototype.clear=Ij;Hd.prototype.delete=Oj;Hd.prototype.get=Mj;Hd.prototype.has=Lj;Hd.prototype.set=A$;function I$(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var O$=function(){try{var e=ic(Object,"defineProperty");return e({},"",{}),e}catch{}}();const lS=O$;function e4(e,t,i){t=="__proto__"&&lS?lS(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var M$=Object.prototype,L$=M$.hasOwnProperty;function t4(e,t,i){var r=e[t];(!(L$.call(e,t)&&Z3(r,i))||i===void 0&&!(t in e))&&e4(e,t,i)}function af(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?e4(i,o,c):t4(i,o,c)}return i}function D$(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}function Gd(e){return e!=null&&typeof e=="object"}var N$="[object Arguments]";function uS(e){return Gd(e)&&zd(e)==N$}var i4=Object.prototype,U$=i4.hasOwnProperty,j$=i4.propertyIsEnumerable,$$=uS(function(){return arguments}())?uS:function(e){return Gd(e)&&U$.call(e,"callee")&&!j$.call(e,"callee")};const r4=$$;var V$=Array.isArray;const of=V$;function F$(){return!1}var n4=typeof xe=="object"&&xe&&!xe.nodeType&&xe,pS=n4&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,B$=pS&&pS.exports===n4,hS=B$?wn.Buffer:void 0,z$=hS?hS.isBuffer:void 0,H$=z$||F$;const Eb=H$;var G$=9007199254740991,W$=/^(?:0|[1-9]\d*)$/;function q$(e,t){var i=typeof e;return t=t==null?G$:t,!!t&&(i=="number"||i!="symbol"&&W$.test(e))&&e>-1&&e%1==0&&e<t}var J$=9007199254740991;function s4(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J$}var K$="[object Arguments]",Z$="[object Array]",Q$="[object Boolean]",Y$="[object Date]",X$="[object Error]",eV="[object Function]",tV="[object Map]",iV="[object Number]",rV="[object Object]",nV="[object RegExp]",sV="[object Set]",aV="[object String]",oV="[object WeakMap]",cV="[object ArrayBuffer]",dV="[object DataView]",lV="[object Float32Array]",uV="[object Float64Array]",pV="[object Int8Array]",hV="[object Int16Array]",gV="[object Int32Array]",mV="[object Uint8Array]",fV="[object Uint8ClampedArray]",vV="[object Uint16Array]",yV="[object Uint32Array]",ut={};ut[lV]=ut[uV]=ut[pV]=ut[hV]=ut[gV]=ut[mV]=ut[fV]=ut[vV]=ut[yV]=!0;ut[K$]=ut[Z$]=ut[cV]=ut[Q$]=ut[dV]=ut[Y$]=ut[X$]=ut[eV]=ut[tV]=ut[iV]=ut[rV]=ut[nV]=ut[sV]=ut[aV]=ut[oV]=!1;function _V(e){return Gd(e)&&s4(e.length)&&!!ut[zd(e)]}function Tb(e){return function(t){return e(t)}}var a4=typeof xe=="object"&&xe&&!xe.nodeType&&xe,fu=a4&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,bV=fu&&fu.exports===a4,q0=bV&&Q3.process,wV=function(){try{var e=fu&&fu.require&&fu.require("util").types;return e||q0&&q0.binding&&q0.binding("util")}catch{}}();const Md=wV;var gS=Md&&Md.isTypedArray,SV=gS?Tb(gS):_V;const o4=SV;var EV=Object.prototype,TV=EV.hasOwnProperty;function c4(e,t){var i=of(e),r=!i&&r4(e),n=!i&&!r&&Eb(e),s=!i&&!r&&!n&&o4(e),a=i||r||n||s,o=a?D$(e.length,String):[],c=o.length;for(var d in e)(t||TV.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||q$(d,c)))&&o.push(d);return o}var kV=Object.prototype;function cf(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||kV;return e===i}function d4(e,t){return function(i){return e(t(i))}}var CV=d4(Object.keys,Object);const PV=CV;var RV=Object.prototype,xV=RV.hasOwnProperty;function l4(e){if(!cf(e))return PV(e);var t=[];for(var i in Object(e))xV.call(e,i)&&i!="constructor"&&t.push(i);return t}function kb(e){return e!=null&&s4(e.length)&&!X3(e)}function Cb(e){return kb(e)?c4(e):l4(e)}function AV(e,t){return e&&af(t,Cb(t),e)}function IV(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var OV=Object.prototype,MV=OV.hasOwnProperty;function LV(e){if(!Oa(e))return IV(e);var t=cf(e),i=[];for(var r in e)r=="constructor"&&(t||!MV.call(e,r))||i.push(r);return i}function Pb(e){return kb(e)?c4(e,!0):LV(e)}function DV(e,t){return e&&af(t,Pb(t),e)}var u4=typeof xe=="object"&&xe&&!xe.nodeType&&xe,mS=u4&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,NV=mS&&mS.exports===u4,fS=NV?wn.Buffer:void 0,vS=fS?fS.allocUnsafe:void 0;function UV(e,t){if(t)return e.slice();var i=e.length,r=vS?vS(i):new e.constructor(i);return e.copy(r),r}function jV(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}function $V(e,t){for(var i=-1,r=e==null?0:e.length,n=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[n++]=a)}return s}function p4(){return[]}var VV=Object.prototype,FV=VV.propertyIsEnumerable,yS=Object.getOwnPropertySymbols,BV=yS?function(e){return e==null?[]:(e=Object(e),$V(yS(e),function(t){return FV.call(e,t)}))}:p4;const Rb=BV;function zV(e,t){return af(e,Rb(e),t)}function h4(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var HV=d4(Object.getPrototypeOf,Object);const g4=HV;var GV=Object.getOwnPropertySymbols,WV=GV?function(e){for(var t=[];e;)h4(t,Rb(e)),e=g4(e);return t}:p4;const m4=WV;function qV(e,t){return af(e,m4(e),t)}function f4(e,t,i){var r=t(e);return of(e)?r:h4(r,i(e))}function JV(e){return f4(e,Cb,Rb)}function KV(e){return f4(e,Pb,m4)}var ZV=ic(wn,"DataView");const ey=ZV;var QV=ic(wn,"Promise");const ty=QV;var YV=ic(wn,"Set");const iy=YV;var XV=ic(wn,"WeakMap");const ry=XV;var _S="[object Map]",eF="[object Object]",bS="[object Promise]",wS="[object Set]",SS="[object WeakMap]",ES="[object DataView]",tF=tc(ey),iF=tc(Wu),rF=tc(ty),nF=tc(iy),sF=tc(ry),oo=zd;(ey&&oo(new ey(new ArrayBuffer(1)))!=ES||Wu&&oo(new Wu)!=_S||ty&&oo(ty.resolve())!=bS||iy&&oo(new iy)!=wS||ry&&oo(new ry)!=SS)&&(oo=function(e){var t=zd(e),i=t==eF?e.constructor:void 0,r=i?tc(i):"";if(r)switch(r){case tF:return ES;case iF:return _S;case rF:return bS;case nF:return wS;case sF:return SS}return t});const df=oo;var aF=Object.prototype,oF=aF.hasOwnProperty;function cF(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&oF.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var dF=wn.Uint8Array;const TS=dF;function xb(e){var t=new e.constructor(e.byteLength);return new TS(t).set(new TS(e)),t}function lF(e,t){var i=t?xb(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var uF=/\w*$/;function pF(e){var t=new e.constructor(e.source,uF.exec(e));return t.lastIndex=e.lastIndex,t}var kS=Od?Od.prototype:void 0,CS=kS?kS.valueOf:void 0;function hF(e){return CS?Object(CS.call(e)):{}}function gF(e,t){var i=t?xb(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var mF="[object Boolean]",fF="[object Date]",vF="[object Map]",yF="[object Number]",_F="[object RegExp]",bF="[object Set]",wF="[object String]",SF="[object Symbol]",EF="[object ArrayBuffer]",TF="[object DataView]",kF="[object Float32Array]",CF="[object Float64Array]",PF="[object Int8Array]",RF="[object Int16Array]",xF="[object Int32Array]",AF="[object Uint8Array]",IF="[object Uint8ClampedArray]",OF="[object Uint16Array]",MF="[object Uint32Array]";function LF(e,t,i){var r=e.constructor;switch(t){case EF:return xb(e);case mF:case fF:return new r(+e);case TF:return lF(e,i);case kF:case CF:case PF:case RF:case xF:case AF:case IF:case OF:case MF:return gF(e,i);case vF:return new r;case yF:case wF:return new r(e);case _F:return pF(e);case bF:return new r;case SF:return hF(e)}}var PS=Object.create,DF=function(){function e(){}return function(t){if(!Oa(t))return{};if(PS)return PS(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();const NF=DF;function UF(e){return typeof e.constructor=="function"&&!cf(e)?NF(g4(e)):{}}var jF="[object Map]";function $F(e){return Gd(e)&&df(e)==jF}var RS=Md&&Md.isMap,VF=RS?Tb(RS):$F;const FF=VF;var BF="[object Set]";function zF(e){return Gd(e)&&df(e)==BF}var xS=Md&&Md.isSet,HF=xS?Tb(xS):zF;const GF=HF;var WF=1,qF=2,JF=4,v4="[object Arguments]",KF="[object Array]",ZF="[object Boolean]",QF="[object Date]",YF="[object Error]",y4="[object Function]",XF="[object GeneratorFunction]",eB="[object Map]",tB="[object Number]",_4="[object Object]",iB="[object RegExp]",rB="[object Set]",nB="[object String]",sB="[object Symbol]",aB="[object WeakMap]",oB="[object ArrayBuffer]",cB="[object DataView]",dB="[object Float32Array]",lB="[object Float64Array]",uB="[object Int8Array]",pB="[object Int16Array]",hB="[object Int32Array]",gB="[object Uint8Array]",mB="[object Uint8ClampedArray]",fB="[object Uint16Array]",vB="[object Uint32Array]",rt={};rt[v4]=rt[KF]=rt[oB]=rt[cB]=rt[ZF]=rt[QF]=rt[dB]=rt[lB]=rt[uB]=rt[pB]=rt[hB]=rt[eB]=rt[tB]=rt[_4]=rt[iB]=rt[rB]=rt[nB]=rt[sB]=rt[gB]=rt[mB]=rt[fB]=rt[vB]=!0;rt[YF]=rt[y4]=rt[aB]=!1;function Wh(e,t,i,r,n,s){var a,o=t&WF,c=t&qF,d=t&JF;if(i&&(a=n?i(e,r,n,s):i(e)),a!==void 0)return a;if(!Oa(e))return e;var l=of(e);if(l){if(a=cF(e),!o)return jV(e,a)}else{var u=df(e),g=u==y4||u==XF;if(Eb(e))return UV(e,o);if(u==_4||u==v4||g&&!n){if(a=c||g?{}:UF(e),!o)return c?qV(e,DV(a,e)):zV(e,AV(a,e))}else{if(!rt[u])return n?e:{};a=LF(e,u,o)}}s||(s=new Hd);var m=s.get(e);if(m)return m;s.set(e,a),GF(e)?e.forEach(function(S){a.add(Wh(S,t,i,S,e,s))}):FF(e)&&e.forEach(function(S,y){a.set(y,Wh(S,t,i,y,e,s))});var f=d?c?KV:JV:c?Pb:Cb,w=l?void 0:f(e);return I$(w||e,function(S,y){w&&(y=S,S=e[y]),t4(a,y,Wh(S,t,i,y,e,s))}),a}var yB=1,_B=4;function Ab(e){return Wh(e,yB|_B)}var bB="[object Symbol]";function wB(e){return typeof e=="symbol"||Gd(e)&&zd(e)==bB}var SB="Expected a function";function Qg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(SB);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=e.apply(this,r);return i.cache=s.set(n,a)||s,a};return i.cache=new(Qg.Cache||Va),i}Qg.Cache=Va;var vn;(function(e){e.GroupCall="GROUP_CALL",e.Webinar="WEBINAR",e.AudioRoom="AUDIO_ROOM",e.Livestream="LIVESTREAM"})(vn||(vn={}));var Yg;(function(e){e.Skip="SKIP",e.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",e.SkipOnAccept="SKIP_ON_ACCEPT"})(Yg||(Yg={}));var ui;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED",e.CanRequest="CAN_REQUEST"})(ui||(ui={}));var Xg;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED"})(Xg||(Xg={}));var AS;(function(e){e.FULL_ACCESS="FULL_ACCESS",e.VIEW_ONLY="VIEW_ONLY"})(AS||(AS={}));const EB={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:Sj("#2160FD"),background:Ej("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function b4(){return Ab(EB)}const TB={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:Yg.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:ui.Allowed,can_consume:Xg.Allowed},audio:{can_produce:ui.Allowed},screenshare:{can_produce:ui.Allowed,can_consume:Xg.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Wo.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{oldTheme:{setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",textPrimary:"#EEEEEE",videoBackground:"#1A1A1A"},dimensions:{mode:"fillParent"},grid:{multi:{maxVideoCount:6,videoFit:"cover"},single:{maxVideoCount:6,videoFit:"cover"},defaultView:"MULTI"},controls:{pip_toggle:!1},plugins:[]},design_tokens:b4(),config_diff:{}},config:{view_type:vn.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"hybrid"};function kB(){return Ab(TB)}Wo.none,Gu.skip;const CB={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:Yg.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:ui.Allowed},audio:{can_produce:ui.Allowed},screenshare:{can_produce:ui.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Wo.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{design_tokens:b4(),config_diff:{}},config:{view_type:vn.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"2.0.0"};function Ib(){return Ab(CB)}var cn={},PB={get exports(){return cn},set exports(e){cn=e}},J0,IS;function RB(){if(IS)return J0;IS=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,s=r*365.25;J0=function(l,u){u=u||{};var g=typeof l;if(g==="string"&&l.length>0)return a(l);if(g==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var g=parseFloat(u[1]),m=(u[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*n;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*t;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=i?Math.round(l/i)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=i?d(l,u,i,"hour"):u>=t?d(l,u,t,"minute"):u>=e?d(l,u,e,"second"):l+" ms"}function d(l,u,g,m){var f=u>=g*1.5;return Math.round(l/g)+" "+m+(f?"s":"")}return J0}function xB(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=n,i.enabled=a,i.humanize=RB(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let u=0;for(let g=0;g<l.length;g++)u=(u<<5)-u+l.charCodeAt(g),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(l){let u,g=null,m,f;function w(...S){if(!w.enabled)return;const y=w,_=Number(new Date),T=_-(u||_);y.diff=T,y.prev=u,y.curr=_,u=_,S[0]=i.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let P=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(L,O)=>{if(L==="%%")return"%";P++;const B=i.formatters[O];if(typeof B=="function"){const H=S[P];L=B.call(y,H),S.splice(P,1),P--}return L}),i.formatArgs.call(y,S),(y.log||i.log).apply(y,S)}return w.namespace=l,w.useColors=i.useColors(),w.color=i.selectColor(l),w.extend=r,w.destroy=i.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(l)),f),set:S=>{g=S}}),typeof i.init=="function"&&i.init(w),w}function r(l,u){const g=i(this.namespace+(typeof u>"u"?":":u)+l);return g.log=this.log,g}function n(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let u;const g=(typeof l=="string"?l:"").split(/[\s,]+/),m=g.length;for(u=0;u<m;u++)g[u]&&(l=g[u].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...i.names.map(o),...i.skips.map(o).map(u=>"-"+u)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let u,g;for(u=0,g=i.skips.length;u<g;u++)if(i.skips[u].test(l))return!1;for(u=0,g=i.names.length;u<g;u++)if(i.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var AB=xB;(function(e,t){t.formatArgs=r,t.save=n,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(u=l))}),c.splice(u,0,d)}t.log=console.debug||console.log||(()=>{});function n(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=AB(t);const{formatters:o}=e.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(PB,cn);const _c="mediasoup-client";let ar=class{constructor(e){e?(this._debug=cn(`${_c}:${e}`),this._warn=cn(`${_c}:WARN:${e}`),this._error=cn(`${_c}:ERROR:${e}`)):(this._debug=cn(_c),this._warn=cn(`${_c}:WARN`),this._error=cn(`${_c}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const IB=new ar("EnhancedEventEmitter");let Br=class extends Hi.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...t){return super.emit(e,...t)}safeEmit(e,...t){const i=super.listenerCount(e);try{return super.emit(e,...t)}catch(r){return IB.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,r),Boolean(i)}}on(e,t){return super.on(e,t),this}off(e,t){return super.off(e,t),this}addListener(e,t){return super.on(e,t),this}prependListener(e,t){return super.prependListener(e,t),this}once(e,t){return super.once(e,t),this}prependOnceListener(e,t){return super.prependOnceListener(e,t),this}removeListener(e,t){return super.off(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}},Ki=class w4 extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,w4):this.stack=new Error(t).stack}},yt=class S4 extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,S4):this.stack=new Error(t).stack}};function Yt(e,t){return typeof e>"u"?t:JSON.parse(JSON.stringify(e))}function K0(){return Math.round(Math.random()*1e7)}var ny={};(function(e){const t=cn("h264-profile-level-id");t.log=console.info.bind(console);const i=1,r=2,n=3,s=4,a=5;e.ProfileConstrainedBaseline=i,e.ProfileBaseline=r,e.ProfileMain=n,e.ProfileConstrainedHigh=s,e.ProfileHigh=a;const o=0,c=10,d=11,l=12,u=13,g=20,m=21,f=22,w=30,S=31,y=32,_=40,T=41,P=42,L=50,O=51,B=52;e.Level1_b=o,e.Level1=c,e.Level1_1=d,e.Level1_2=l,e.Level1_3=u,e.Level2=g,e.Level2_1=m,e.Level2_2=f,e.Level3=w,e.Level3_1=S,e.Level3_2=y,e.Level4=_,e.Level4_1=T,e.Level4_2=P,e.Level5=L,e.Level5_1=O,e.Level5_2=B;class H{constructor(W,X){this.profile=W,this.level=X}}e.ProfileLevelId=H;const ie=new H(i,S),K=16;class ge{constructor(W){this._mask=~ei("x",W),this._maskedValue=ei("1",W)}isMatch(W){return this._maskedValue===(W&this._mask)}}class He{constructor(W,X,Le){this.profile_idc=W,this.profile_iop=X,this.profile=Le}}const Xt=[new He(66,new ge("x1xx0000"),i),new He(77,new ge("1xxx0000"),i),new He(88,new ge("11xx0000"),i),new He(66,new ge("x0xx0000"),r),new He(88,new ge("10xx0000"),r),new He(77,new ge("0x0x0000"),n),new He(100,new ge("00000000"),a),new He(100,new ge("00001100"),s)];e.parseProfileLevelId=function(F){if(typeof F!="string"||F.length!==6)return null;const W=parseInt(F,16);if(W===0)return null;const X=W&255,Le=W>>8&255,vt=W>>16&255;let ti;switch(X){case d:{ti=Le&K?o:d;break}case c:case l:case u:case g:case m:case f:case w:case S:case y:case _:case T:case P:case L:case O:case B:{ti=X;break}default:return t("parseProfileLevelId() | unrecognized level_idc:%s",X),null}for(const bt of Xt)if(vt===bt.profile_idc&&bt.profile_iop.isMatch(Le))return new H(bt.profile,ti);return t("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},e.profileLevelIdToString=function(F){if(F.level==o)switch(F.profile){case i:return"42f00b";case r:return"42100b";case n:return"4d100b";default:return t("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",F.profile),null}let W;switch(F.profile){case i:{W="42e0";break}case r:{W="4200";break}case n:{W="4d00";break}case s:{W="640c";break}case a:{W="6400";break}default:return t("profileLevelIdToString() | unrecognized profile:%s",F.profile),null}let X=F.level.toString(16);return X.length===1&&(X=`0${X}`),`${W}${X}`},e.parseSdpProfileLevelId=function(F={}){const W=F["profile-level-id"];return W?e.parseProfileLevelId(W):ie},e.isSameProfile=function(F={},W={}){const X=e.parseSdpProfileLevelId(F),Le=e.parseSdpProfileLevelId(W);return Boolean(X&&Le&&X.profile===Le.profile)},e.generateProfileLevelIdForAnswer=function(F={},W={}){if(!F["profile-level-id"]&&!W["profile-level-id"])return t("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const X=e.parseSdpProfileLevelId(F),Le=e.parseSdpProfileLevelId(W);if(!X)throw new TypeError("invalid local_profile_level_id");if(!Le)throw new TypeError("invalid remote_profile_level_id");if(X.profile!==Le.profile)throw new TypeError("H264 Profile mismatch");const vt=ts(F)&&ts(W),ti=X.level,bt=Le.level,Tn=dr(ti,bt),Ni=vt?ti:Tn;return t("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",X.profile,Ni),e.profileLevelIdToString(new H(X.profile,Ni))};function ei(F,W){return(W[0]===F)<<7|(W[1]===F)<<6|(W[2]===F)<<5|(W[3]===F)<<4|(W[4]===F)<<3|(W[5]===F)<<2|(W[6]===F)<<1|(W[7]===F)<<0}function es(F,W){return F===o?W!==c&&W!==o:W===o?F!==c:F<W}function dr(F,W){return es(F,W)?F:W}function ts(F={}){const W=F["level-asymmetry-allowed"];return W===1||W==="1"}})(ny);const OB="probator",MB=1234,LB=127;function Z0(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)DB(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)NB(t)}function DB(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(e.kind=i[1].toLowerCase(),e.preferredPayloadType&&typeof e.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");e.kind==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const r of Object.keys(e.parameters)){let n=e.parameters[r];if(n===void 0&&(e.parameters[r]="",n=""),typeof n!="string"&&typeof n!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${n}]`);if(r==="apt"&&typeof n!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const r of e.rtcpFeedback)E4(r)}function E4(e){if(typeof e!="object")throw new TypeError("fb is not an object");if(!e.type||typeof e.type!="string")throw new TypeError("missing fb.type");(!e.parameter||typeof e.parameter!="string")&&(e.parameter="")}function NB(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(e.kind!=="audio"&&e.kind!=="video")throw new TypeError("invalid ext.kind");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.preferredId!="number")throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&typeof e.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&typeof e.direction!="string")throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function Ob(e){if(typeof e!="object")throw new TypeError("params is not an object");if(e.mid&&typeof e.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)UB(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)jB(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)$B(t);if(e.rtcp&&typeof e.rtcp!="object")throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),VB(e.rtcp)}function UB(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof e.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const r of Object.keys(e.parameters)){let n=e.parameters[r];if(n===void 0&&(e.parameters[r]="",n=""),typeof n!="string"&&typeof n!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${n}]`);if(r==="apt"&&typeof n!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const r of e.rtcpFeedback)E4(r)}function jB(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.id!="number")throw new TypeError("missing ext.id");if(e.encrypt&&typeof e.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const t of Object.keys(e.parameters)){let i=e.parameters[t];if(i===void 0&&(e.parameters[t]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function $B(e){if(typeof e!="object")throw new TypeError("encoding is not an object");if(e.ssrc&&typeof e.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(e.rid&&typeof e.rid!="string")throw new TypeError("invalid encoding.rid");if(e.rtx&&typeof e.rtx!="object")throw new TypeError("invalid encoding.rtx");if(e.rtx&&typeof e.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!e.dtx||typeof e.dtx!="boolean")&&(e.dtx=!1),e.scalabilityMode&&typeof e.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function VB(e){if(typeof e!="object")throw new TypeError("rtcp is not an object");if(e.cname&&typeof e.cname!="string")throw new TypeError("invalid rtcp.cname");(!e.reducedSize||typeof e.reducedSize!="boolean")&&(e.reducedSize=!0)}function FB(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(!e.numStreams||typeof e.numStreams!="object")throw new TypeError("missing caps.numStreams");BB(e.numStreams)}function BB(e){if(typeof e!="object")throw new TypeError("numStreams is not an object");if(typeof e.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof e.MIS!="number")throw new TypeError("missing numStreams.MIS")}function OS(e){if(typeof e!="object")throw new TypeError("params is not an object");if(typeof e.streamId!="number")throw new TypeError("missing params.streamId");let t=!1;if(typeof e.ordered=="boolean"?t=!0:e.ordered=!0,e.maxPacketLifeTime&&typeof e.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&typeof e.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!t&&(e.maxPacketLifeTime||e.maxRetransmits)&&(e.ordered=!1),e.label&&typeof e.label!="string")throw new TypeError("invalid params.label");if(e.protocol&&typeof e.protocol!="string")throw new TypeError("invalid params.protocol")}function zB(e,t){const i={codecs:[],headerExtensions:[]};for(const r of t.codecs||[]){if(vu(r))continue;const n=(e.codecs||[]).find(a=>T4(a,r,{strict:!0,modify:!0}));if(!n)continue;const s={mimeType:n.mimeType,kind:n.kind,clockRate:n.clockRate,channels:n.channels,localPayloadType:n.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:r.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:n.parameters,remoteParameters:r.parameters,rtcpFeedback:JB(n,r)};i.codecs.push(s)}for(const r of i.codecs){const n=e.codecs.find(a=>vu(a)&&a.parameters.apt===r.localPayloadType),s=t.codecs.find(a=>vu(a)&&a.parameters.apt===r.remotePayloadType);n&&s&&(r.localRtxPayloadType=n.preferredPayloadType,r.remoteRtxPayloadType=s.preferredPayloadType)}for(const r of t.headerExtensions){const n=e.headerExtensions.find(a=>qB(a,r));if(!n)continue;const s={kind:r.kind,uri:r.uri,sendId:n.preferredId,recvId:r.preferredId,encrypt:n.preferredEncrypt,direction:"sendrecv"};switch(r.direction){case"sendrecv":s.direction="sendrecv";break;case"recvonly":s.direction="sendonly";break;case"sendonly":s.direction="recvonly";break;case"inactive":s.direction="inactive";break}i.headerExtensions.push(s)}return i}function HB(e){const t={codecs:[],headerExtensions:[]};for(const i of e.codecs){const r={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(t.codecs.push(r),!i.remoteRtxPayloadType)continue;const n={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};t.codecs.push(n)}for(const i of e.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const r={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};t.headerExtensions.push(r)}return t}function zr(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of t.codecs){if(r.kind!==e)continue;const n={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(n),r.localRtxPayloadType){const s={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const r of t.headerExtensions){if(r.kind&&r.kind!==e||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const n={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(n)}return i}function Jn(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of t.codecs){if(r.kind!==e)continue;const n={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.remoteParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(n),r.localRtxPayloadType){const s={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const r of t.headerExtensions){if(r.kind&&r.kind!==e||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const n={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(n)}if(i.headerExtensions.some(r=>r.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="goog-remb");else if(i.headerExtensions.some(r=>r.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="transport-cc");else for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="transport-cc"&&n.type!=="goog-remb");return i}function _n(e,t){const i=[];if(!t)i.push(e[0]),vu(e[1])&&i.push(e[1]);else{for(let r=0;r<e.length;++r)if(T4(e[r],t)){i.push(e[r]),vu(e[r+1])&&i.push(e[r+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function GB(e){e=Yt(e,{}),Ob(e);const t={mid:OB,codecs:[],headerExtensions:[],encodings:[{ssrc:MB}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=LB,t.headerExtensions=e.headerExtensions,t}function MS(e,t){return t.codecs.some(i=>i.kind===e)}function WB(e,t){if(Ob(e),e.codecs.length===0)return!1;const i=e.codecs[0];return t.codecs.some(r=>r.remotePayloadType===i.payloadType)}function vu(e){return e?/.+\/rtx$/i.test(e.mimeType):!1}function T4(e,t,{strict:i=!1,modify:r=!1}={}){const n=e.mimeType.toLowerCase(),s=t.mimeType.toLowerCase();if(n!==s||e.clockRate!==t.clockRate||e.channels!==t.channels)return!1;switch(n){case"video/h264":{if(i){const a=e.parameters["packetization-mode"]||0,o=t.parameters["packetization-mode"]||0;if(a!==o||!ny.isSameProfile(e.parameters,t.parameters))return!1;let c;try{c=ny.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch{return!1}r&&(c?(e.parameters["profile-level-id"]=c,t.parameters["profile-level-id"]=c):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const a=e.parameters["profile-id"]||0,o=t.parameters["profile-id"]||0;if(a!==o)return!1}break}}return!0}function qB(e,t){return!(e.kind&&t.kind&&e.kind!==t.kind||e.uri!==t.uri)}function JB(e,t){const i=[];for(const r of e.rtcpFeedback||[]){const n=(t.rtcpFeedback||[]).find(s=>s.type===r.type&&(s.parameter===r.parameter||!s.parameter&&!r.parameter));n&&i.push(n)}return i}var jo={},lf={},KB=X1&&X1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lf,"__esModule",{value:!0});lf.Logger=void 0;const bc=KB(cn),wc="awaitqueue";let ZB=class{constructor(e){e?(this._debug=(0,bc.default)(`${wc}:${e}`),this._warn=(0,bc.default)(`${wc}:WARN:${e}`),this._error=(0,bc.default)(`${wc}:ERROR:${e}`)):(this._debug=(0,bc.default)(wc),this._warn=(0,bc.default)(`${wc}:WARN`),this._error=(0,bc.default)(`${wc}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};lf.Logger=ZB;Object.defineProperty(jo,"__esModule",{value:!0});var k4=jo.AwaitQueue=jo.AwaitQueueRemovedTaskError=jo.AwaitQueueStoppedError=void 0;const QB=lf,Bs=new QB.Logger;class Mb extends Error{constructor(t){super(t!=null?t:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Mb)}}jo.AwaitQueueStoppedError=Mb;class uf extends Error{constructor(t){super(t!=null?t:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,uf)}}jo.AwaitQueueRemovedTaskError=uf;class YB{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(t,i){if(i=i!=null?i:t.name,Bs.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((r,n)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),Bs.debug(`resolving task [name:${s.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),Bs.debug(`rejecting task [name:${s.name}]: %s`,String(a)),n(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){Bs.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())Bs.debug(`stop() | stopping task [name:${t.name}]`);this.stopping=!1}remove(t){Bs.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){Bs.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new uf)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:t-r.enqueuedAt,executionTime:r.executedAt?t-r.executedAt:0}))}async execute(t){if(Bs.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}k4=jo.AwaitQueue=YB;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let LS;var Q0=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:X1):e=>(LS||(LS=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const Cn=new ar("Producer");let XB=class extends Br{constructor({id:e,localId:t,rtpSender:i,track:r,rtpParameters:n,stopTracks:s,disableTrackOnPause:a,zeroRtpOnPause:o,appData:c}){super(),this._closed=!1,this._observer=new Br,Cn.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=i,this._track=r,this._kind=r.kind,this._rtpParameters=n,this._paused=a?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=a,this._zeroRtpOnPause=o,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Cn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Cn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new yt("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(Cn.debug("pause()"),this._closed){Cn.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@pause",e,t)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(Cn.debug("resume()"),this._closed){Cn.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@resume",e,t)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(Cn.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch{}throw new yt("closed")}else if(e&&e.readyState==="ended")throw new yt("track ended");if(e===this._track){Cn.debug("replaceTrack() | same track, ignored");return}await new Promise((t,i)=>{this.safeEmit("@replacetrack",e,t,i)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new yt("closed");if(this._kind!=="video")throw new Ki("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((t,i)=>{this.safeEmit("@setmaxspatiallayer",e,t,i)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new yt("closed");if(typeof e!="object")throw new TypeError("invalid params");await new Promise((t,i)=>{this.safeEmit("@setrtpencodingparameters",e,t,i)})}onTrackEnded(){Cn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};const Pn=new ar("Consumer");let ez=class extends Br{constructor({id:e,localId:t,producerId:i,rtpReceiver:r,track:n,rtpParameters:s,appData:a}){super(),this._closed=!1,this._observer=new Br,Pn.debug("constructor()"),this._id=e,this._localId=t,this._producerId=i,this._rtpReceiver=r,this._track=n,this._rtpParameters=s,this._paused=!n.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Pn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Pn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new yt("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(Pn.debug("pause()"),this._closed){Pn.error("pause() | Consumer closed");return}if(this._paused){Pn.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Pn.debug("resume()"),this._closed){Pn.error("resume() | Consumer closed");return}if(!this._paused){Pn.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Pn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};const rs=new ar("DataProducer");class tz extends Br{constructor({id:t,dataChannel:i,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new Br,rs.debug("constructor()"),this._id=t,this._dataChannel=i,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(t){this._dataChannel.bufferedAmountLowThreshold=t}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(rs.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(rs.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(t){if(rs.debug("send()"),this._closed)throw new yt("closed");this._dataChannel.send(t)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(rs.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",t=>{if(this._closed)return;let{error:i}=t;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?rs.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):rs.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(rs.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||rs.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}const Ja=new ar("DataConsumer");class iz extends Br{constructor({id:t,dataProducerId:i,dataChannel:r,sctpStreamParameters:n,appData:s}){super(),this._closed=!1,this._observer=new Br,Ja.debug("constructor()"),this._id=t,this._dataProducerId=i,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(t){this._dataChannel.binaryType=t}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Ja.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Ja.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Ja.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",t=>{if(this._closed)return;let{error:i}=t;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Ja.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Ja.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Ja.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",t=>{this._closed||this.safeEmit("message",t.data)})}}const ii=new ar("Transport");class rz{constructor(t){this.consumerOptions=t,this.promise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}}let nz=class extends Br{constructor({direction:e,id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l,handlerFactory:u,extendedRtpCapabilities:g,canProduceByKind:m}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new k4,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new Br,ii.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=g,this._canProduceByKind=m,this._maxSctpMessageSize=s?s.maxMessageSize:null,c=Yt(c,{}),delete c.iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=u(),this._handler.run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:g}),this._appData=l||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}get producers(){return this._producers}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){ii.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new yt("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(ii.debug("restartIce()"),this._closed)throw new yt("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(ii.debug("updateIceServers()"),this._closed)throw new yt("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:i,codec:r,stopTracks:n=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(ii.debug("produce() [track:%o]",e),this._closed)throw new yt("closed");if(e){if(this._direction!=="send")throw new Ki("not a sending Transport");if(this._canProduceByKind[e.kind]){if(e.readyState==="ended")throw new yt("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new Ki(`cannot produce ${e.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let c;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&t.length===0?c=void 0:t&&(c=t.map(g=>{const m={active:!0};return g.active===!1&&(m.active=!1),typeof g.dtx=="boolean"&&(m.dtx=g.dtx),typeof g.scalabilityMode=="string"&&(m.scalabilityMode=g.scalabilityMode),typeof g.scaleResolutionDownBy=="number"&&(m.scaleResolutionDownBy=g.scaleResolutionDownBy),typeof g.maxBitrate=="number"&&(m.maxBitrate=g.maxBitrate),typeof g.maxFramerate=="number"&&(m.maxFramerate=g.maxFramerate),typeof g.adaptivePtime=="boolean"&&(m.adaptivePtime=g.adaptivePtime),typeof g.priority=="string"&&(m.priority=g.priority),typeof g.networkPriority=="string"&&(m.networkPriority=g.networkPriority),m}));const{localId:d,rtpParameters:l,rtpSender:u}=await this._handler.send({track:e,encodings:c,codecOptions:i,codec:r});try{Ob(l);const{id:g}=await new Promise((f,w)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:l,appData:o},f,w)}),m=new XB({id:g,localId:d,rtpSender:u,track:e,rtpParameters:l,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o});return this._producers.set(m.id,m),this.handleProducer(m),this._observer.safeEmit("newproducer",m),m}catch(g){throw this._handler.stopSending(d).catch(()=>{}),g}},"transport.produce()").catch(c=>{if(n)try{e.stop()}catch{}throw c})}async consume({id:e,producerId:t,kind:i,rtpParameters:r,streamId:n,appData:s={}}){if(ii.debug("consume()"),r=Yt(r,void 0),this._closed)throw new yt("closed");if(this._direction!=="recv")throw new Ki("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing id");if(typeof t!="string")throw new TypeError("missing producerId");if(i!=="audio"&&i!=="video")throw new TypeError(`invalid kind '${i}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object");if(!WB(r,this._extendedRtpCapabilities))throw new Ki("cannot consume this Producer");const a=new rz({id:e,producerId:t,kind:i,rtpParameters:r,streamId:n,appData:s});return this._pendingConsumerTasks.push(a),Q0(()=>{if(this._closed)throw new yt("closed");this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),a.promise}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:i,label:r="",protocol:n="",appData:s={}}={}){if(ii.debug("produceData()"),this._closed)throw new yt("closed");if(this._direction!=="send")throw new Ki("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new Ki("SCTP not enabled by remote Transport");return(t||i)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:i,label:r,protocol:n});OS(o);const{id:c}=await new Promise((l,u)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:r,protocol:n,appData:s},l,u)}),d=new tz({id:c,dataChannel:a,sctpStreamParameters:o,appData:s});return this._dataProducers.set(d.id,d),this.handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d},"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:i,label:r="",protocol:n="",appData:s={}}){if(ii.debug("consumeData()"),i=Yt(i,void 0),this._closed)throw new yt("closed");if(this._direction!=="recv")throw new Ki("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof e!="string")throw new TypeError("missing id");if(typeof t!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new Ki("SCTP not enabled by remote Transport");return OS(i),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:i,label:r,protocol:n}),o=new iz({id:e,dataProducerId:t,dataChannel:a,sctpStreamParameters:i,appData:s});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){ii.debug("createPendingConsumers() | there is no Consumer to be created");return}const e=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let t;const i=[];for(const r of e){const{id:n,kind:s,rtpParameters:a,streamId:o}=r.consumerOptions;i.push({trackId:n,kind:s,rtpParameters:a,streamId:o})}try{const r=await this._handler.receive(i);for(let n=0;n<r.length;n++){const s=e[n],a=r[n],{id:o,producerId:c,kind:d,rtpParameters:l,appData:u}=s.consumerOptions,{localId:g,rtpReceiver:m,track:f}=a,w=new ez({id:o,localId:g,producerId:c,rtpReceiver:m,track:f,rtpParameters:l,appData:u});this._consumers.set(w.id,w),this.handleConsumer(w),!this._probatorConsumerCreated&&!t&&d==="video"&&(t=w),this._observer.safeEmit("newconsumer",w),s.resolve(w)}}catch(r){for(const n of e)n.reject(r)}if(t)try{const r=GB(t.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:r}]),ii.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(r){ii.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",r)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){ii.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const t=e.map(i=>i.localId);await this._handler.pauseReceiving(t)}catch(t){ii.error("pausePendingConsumers() | failed to pause Consumers:",t)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){ii.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const t=e.map(i=>i.localId);await this._handler.resumeReceiving(t)}catch(t){ii.error("resumePendingConsumers() | failed to resume Consumers:",t)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){ii.debug("closePendingConsumers() | there is no Consumer to be closed");return}const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(t=>t.localId))}catch(t){ii.error("closePendingConsumers() | failed to close Consumers:",t)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:t},i,r)=>{if(this._closed){r(new yt("closed"));return}this.safeEmit("connect",{dtlsParameters:t},i,r)}),e.on("@connectionstatechange",t=>{t!==this._connectionState&&(ii.debug("connection state changed to %s",t),this._connectionState=t,this._closed||this.safeEmit("connectionstatechange",t))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(e.localId),"producer @close event").catch(t=>ii.warn("producer.close() failed:%o",t))}),e.on("@pause",(t,i)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(e.localId),"producer @pause event").then(t).catch(i)}),e.on("@resume",(t,i)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(e.localId),"producer @resume event").then(t).catch(i)}),e.on("@replacetrack",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(e.localId,t),"producer @replacetrack event").then(i).catch(r)}),e.on("@setmaxspatiallayer",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(e.localId,t),"producer @setmaxspatiallayer event").then(i).catch(r)}),e.on("@setrtpencodingparameters",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(e.localId,t),"producer @setrtpencodingparameters event").then(i).catch(r)}),e.on("@getstats",(t,i)=>{if(this._closed)return i(new yt("closed"));this._handler.getSenderStats(e.localId).then(t).catch(i)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),!this._closed&&(this._pendingCloseConsumers.set(e.id,e),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),Q0(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),Q0(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),e.on("@getstats",(t,i)=>{if(this._closed)return i(new yt("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(i)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}};const wi=new ar("Device");function sz(){var e,t,i,r;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){wi.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(wi.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(wi.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){let n=navigator.userAgent;n=n==null?void 0:n.replace("motorola edge","motorola x");const s=ab.getParser(n),a=s.getEngine();if(s.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(s.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(s.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(s.satisfies({firefox:">=60"}))return"Firefox60";if(s.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||s.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||((t=(e=s.parsedResult)===null||e===void 0?void 0:e.os)===null||t===void 0?void 0:t.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(s.satisfies({"microsoft edge":">=11"})&&s.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(a.name&&a.name.toLowerCase()==="blink"){const o=n.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(o){const c=Number(o[1]);return c>=111?"Chrome111":c>=74?"Chrome74":"Chrome70"}else return"Chrome111"}else{if(((r=(i=s.parsedResult)===null||i===void 0?void 0:i.os)===null||r===void 0?void 0:r.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||a.name&&a.name.toLowerCase()==="webkit"&&a.version&&parseFloat(a.version)>605)return"Safari12";wi.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",s.getBrowserName(),s.getBrowserVersion());return}}else{wi.warn("this._detectDevice() | unknown device");return}}class az{constructor({handlerName:t,handlerFactory:i,Handler:r}={}){if(this._loaded=!1,this._observer=new Br,wi.debug("constructor()"),r)if(wi.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof r=="string")t=r;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)wi.debug("constructor() | handler given: %s",t);else if(t=sz(),t)wi.debug("constructor() | detected handler: %s",t);else throw new Ki("device not supported");this.switchDevice(t)}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new yt("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new yt("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:t}){wi.debug("load() [routerRtpCapabilities:%o]",t),t=Yt(t,void 0);let i;try{if(this._loaded)throw new yt("already loaded");Z0(t),i=this._handlerFactory();const r=await i.getNativeRtpCapabilities();wi.debug("load() | got native RTP capabilities:%o",r),Z0(r),this._extendedRtpCapabilities=zB(r,t),wi.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=MS("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=MS("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=HB(this._extendedRtpCapabilities),Z0(this._recvRtpCapabilities),wi.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await i.getNativeSctpCapabilities(),wi.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),FB(this._sctpCapabilities),wi.debug("load() succeeded"),this._loaded=!0,i.close()}catch(r){throw i&&i.close(),r}}canProduce(t){if(this._loaded){if(t!=="audio"&&t!=="video")throw new TypeError(`invalid kind "${t}"`)}else throw new yt("not loaded");return this._canProduceByKind[t]}createSendTransport({id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l}){return wi.debug("createSendTransport()"),this.createTransport({direction:"send",id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l})}createRecvTransport({id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l}){return wi.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l})}createTransport({direction:t,id:i,iceParameters:r,iceCandidates:n,dtlsParameters:s,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:l,appData:u}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof r!="object")throw new TypeError("missing iceParameters");if(Array.isArray(n)){if(typeof s!="object")throw new TypeError("missing dtlsParameters");if(a&&typeof a!="object")throw new TypeError("wrong sctpParameters");if(u&&typeof u!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new yt("not loaded");const g=new nz({direction:t,id:i,iceParameters:r,iceCandidates:n,dtlsParameters:s,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:l,appData:u,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",g),g}}function hp({sdpObject:e}){const t=new Map,i=[];let r=!1,n=!1;for(const s of e.media){const a=s.type;switch(a){case"audio":{if(r)continue;r=!0;break}case"video":{if(n)continue;n=!0;break}default:continue}for(const o of s.rtp){const c={kind:a,mimeType:`${a}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};t.set(c.preferredPayloadType,c)}for(const o of s.fmtp||[]){const c=PP(o.config),d=t.get(o.payload);d&&(c&&c.hasOwnProperty("profile-level-id")&&(c["profile-level-id"]=String(c["profile-level-id"])),d.parameters=c)}for(const o of s.rtcpFb||[]){const c={type:o.type,parameter:o.subtype};if(c.parameter||delete c.parameter,o.payload!=="*"){const d=t.get(o.payload);if(!d)continue;d.rtcpFeedback.push(c)}else for(const d of t.values())d.kind===a&&!/.+\/rtx$/i.test(d.mimeType)&&d.rtcpFeedback.push(c)}for(const o of s.ext||[]){if(o["encrypt-uri"])continue;const c={kind:a,uri:o.uri,preferredId:o.value};i.push(c)}}return{codecs:Array.from(t.values()),headerExtensions:i}}function gp({sdpObject:e}){const t=(e.media||[]).find(n=>n.iceUfrag&&n.port!==0);if(!t)throw new Error("no active media section found");const i=t.fingerprint||e.fingerprint;let r;switch(t.setup){case"active":r="client";break;case"passive":r="server";break;case"actpass":r="auto";break}return{role:r,fingerprints:[{algorithm:i.type,value:i.hash}]}}function mp({offerMediaObject:e}){const t=(e.ssrcs||[]).find(i=>i.attribute==="cname");return t?t.value:""}function fp({offerRtpParameters:e,answerMediaObject:t}){for(const i of e.codecs){const r=i.mimeType.toLowerCase();if(r!=="audio/opus"||!(t.rtp||[]).find(a=>a.payload===i.payloadType))continue;t.fmtp=t.fmtp||[];let n=t.fmtp.find(a=>a.payload===i.payloadType);n||(n={payload:i.payloadType,config:""},t.fmtp.push(n));const s=PP(n.config);switch(r){case"audio/opus":{const a=i.parameters["sprop-stereo"];a!==void 0&&(s.stereo=a?1:0);break}}n.config="";for(const a of Object.keys(s))n.config&&(n.config+=";"),n.config+=`${a}=${s[a]}`}}function Ma({offerMediaObject:e}){const t=new Set;for(const n of e.ssrcs||[]){const s=n.id;t.add(s)}if(t.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const n of e.ssrcGroups||[]){if(n.semantics!=="FID")continue;let[s,a]=n.ssrcs.split(/\s+/);s=Number(s),a=Number(a),t.has(s)&&(t.delete(s),t.delete(a),i.set(s,a))}for(const n of t)i.set(n,null);const r=[];for(const[n,s]of i){const a={ssrc:n};s&&(a.rtx={ssrc:s}),r.push(a)}return r}function em({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const i=(e.ssrcs||[]).find(u=>u.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[r,n]=i.value.split(" "),s=i.id;let a;(e.ssrcGroups||[]).some(u=>{if(u.semantics!=="FID")return!1;const g=u.ssrcs.split(/\s+/);return Number(g[0])===s?(a=Number(g[1]),!0):!1});const o=e.ssrcs.find(u=>u.attribute==="cname");if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,d=[],l=[];for(let u=0;u<t;++u)d.push(s+u),a&&l.push(a+u);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let u=0;u<d.length;++u){const g=d[u];e.ssrcs.push({id:g,attribute:"cname",value:c}),e.ssrcs.push({id:g,attribute:"msid",value:`${r} ${n}`})}for(let u=0;u<l.length;++u){const g=d[u],m=l[u];e.ssrcs.push({id:m,attribute:"cname",value:c}),e.ssrcs.push({id:m,attribute:"msid",value:`${r} ${n}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${g} ${m}`})}}let Wd=class extends Br{constructor(){super()}};class C4{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,t&&this.setIceParameters(t),i){this._mediaObject.candidates=[];for(const s of i){const a={};a.component=1,a.foundation=s.foundation,a.ip=s.ip,a.port=s.port,a.priority=s.priority,a.transport=s.protocol,a.type=s.type,s.tcpType&&(a.tcptype=s.tcpType),this._mediaObject.candidates.push(a)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(t){this._mediaObject.iceUfrag=t.usernameFragment,this._mediaObject.icePwd=t.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}muxSimulcastStreams(t){if(this._mediaObject.simulcast&&this._mediaObject.simulcast.list1){const i={};t.forEach(s=>{s.rid&&(i[s.rid]=s)});const r=this._mediaObject.simulcast.list1,n=RP(r);n.forEach(s=>{s.forEach(a=>{var o;a.paused=!(!((o=i[a.scid])===null||o===void 0)&&o.active)})}),this._mediaObject.simulcast.list1=n.map(s=>s.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}}class DS extends C4{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:d,codecOptions:l,extmapAllowMixed:u=!1,forceGoogConference:g=!1}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const m of d.codecs){const f={payload:m.payloadType,codec:sy(m),rate:m.clockRate};m.channels>1&&(f.encoding=m.channels),this._mediaObject.rtp.push(f);const w=Yt(m.parameters,{});if(l){const{opusStereo:y,opusFec:_,opusDtx:T,opusMaxPlaybackRate:P,opusMaxAverageBitrate:L,opusPtime:O,videoGoogleStartBitrate:B,videoGoogleMaxBitrate:H,videoGoogleMinBitrate:ie}=l,K=c.codecs.find(ge=>ge.payloadType===m.payloadType);switch(m.mimeType.toLowerCase()){case"audio/opus":{y!==void 0&&(K.parameters["sprop-stereo"]=y?1:0,w.stereo=y?1:0),_!==void 0&&(K.parameters.useinbandfec=_?1:0,w.useinbandfec=_?1:0),T!==void 0&&(K.parameters.usedtx=T?1:0,w.usedtx=T?1:0),P!==void 0&&(w.maxplaybackrate=P),L!==void 0&&(w.maxaveragebitrate=L),O!==void 0&&(K.parameters.ptime=O,w.ptime=O);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{B!==void 0&&(w["x-google-start-bitrate"]=B),H!==void 0&&(w["x-google-max-bitrate"]=H),ie!==void 0&&(w["x-google-min-bitrate"]=ie);break}}}const S={payload:m.payloadType,config:""};for(const y of Object.keys(w))S.config&&(S.config+=";"),S.config+=`${y}=${w[y]}`;S.config&&this._mediaObject.fmtp.push(S);for(const y of m.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:m.payloadType,type:y.type,subtype:y.parameter})}this._mediaObject.payloads=d.codecs.map(m=>m.payloadType).join(" "),this._mediaObject.ext=[];for(const m of d.headerExtensions)(o.ext||[]).some(f=>f.uri===m.uri)&&this._mediaObject.ext.push({uri:m.uri,value:m.id});if(u&&o.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",(this._planB||g)&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof o.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize});break}}}setDtlsRole(t){switch(t){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(t){var i;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const a of t)a.rid&&(r[a.rid]=a);const n=this._mediaObject.simulcast.list1,s=RP(n);for(const a of s)for(const o of a)o.paused=!(!((i=r[o.scid])===null||i===void 0)&&i.active);this._mediaObject.simulcast.list1=s.map(a=>a.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}class NS extends C4{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1,mid:o,kind:c,offerRtpParameters:d,streamId:l,trackId:u,oldDataChannelSpec:g=!1}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o),this._mediaObject.type=c,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},n?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${l||"-"} ${u}`);for(const S of d.codecs){const y={payload:S.payloadType,codec:sy(S),rate:S.clockRate};S.channels>1&&(y.encoding=S.channels),this._mediaObject.rtp.push(y);const _={payload:S.payloadType,config:""};for(const T of Object.keys(S.parameters))_.config&&(_.config+=";"),_.config+=`${T}=${S.parameters[T]}`;_.config&&this._mediaObject.fmtp.push(_);for(const T of S.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:S.payloadType,type:T.type,subtype:T.parameter})}this._mediaObject.payloads=d.codecs.map(S=>S.payloadType).join(" "),this._mediaObject.ext=[];for(const S of d.headerExtensions)this._mediaObject.ext.push({uri:S.uri,value:S.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const m=d.encodings[0],f=m.ssrc,w=m.rtx&&m.rtx.ssrc?m.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],d.rtcp.cname&&this._mediaObject.ssrcs.push({id:f,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:f,attribute:"msid",value:`${l||"-"} ${u}`}),w&&(d.rtcp.cname&&this._mediaObject.ssrcs.push({id:w,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:w,attribute:"msid",value:`${l||"-"} ${u}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${w}`}));break}case"application":{g?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize);break}}}setDtlsRole(t){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:t,streamId:i,trackId:r}){const n=t.encodings[0],s=n.ssrc,a=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const c of t.codecs){if(o.includes(String(c.payloadType)))continue;const d={payload:c.payloadType,codec:sy(c),rate:c.clockRate};c.channels>1&&(d.encoding=c.channels),this._mediaObject.rtp.push(d);const l={payload:c.payloadType,config:""};for(const u of Object.keys(c.parameters))l.config&&(l.config+=";"),l.config+=`${u}=${c.parameters[u]}`;l.config&&this._mediaObject.fmtp.push(l);for(const u of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:u.type,subtype:u.parameter})}this._mediaObject.payloads+=` ${t.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),t.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${i||"-"} ${r}`}),a&&(t.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${i||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${s} ${a}`}))}planBStopReceiving({offerRtpParameters:t}){const i=t.encodings[0],r=i.ssrc,n=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(s=>s.id!==r&&s.id!==n),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(s=>s.ssrcs!==`${r} ${n}`))}}function sy(e){const t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}const Y0=new ar("RemoteSdp");class vp{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=t,this._iceCandidates=i,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=s,this._planB=a,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},t&&t.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const o=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[o-1].algorithm,hash:r.fingerprints[o-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}updateIceParameters(t){Y0.debug("updateIceParameters() [iceParameters:%o]",t),this._iceParameters=t,this._sdpObject.icelite=t.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(t)}updateDtlsRole(t){Y0.debug("updateDtlsRole() [role:%s]",t),this._dtlsParameters.role=t;for(const i of this._mediaSections)i.setDtlsRole(t)}getNextMediaSectionIdx(){for(let t=0;t<this._mediaSections.length;++t){const i=this._mediaSections[t];if(i.closed)return{idx:t,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:t,reuseMid:i,offerRtpParameters:r,answerRtpParameters:n,codecOptions:s,extmapAllowMixed:a=!1,forceGoogConference:o=!1}){const c=new DS({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:s,extmapAllowMixed:a,forceGoogConference:o});i?this._replaceMediaSection(c,i):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}receive({mid:t,kind:i,offerRtpParameters:r,streamId:n,trackId:s}){const a=this._midToIndex.get(t);let o;if(a!==void 0&&(o=this._mediaSections[a]),o)o.planBReceive({offerRtpParameters:r,streamId:n,trackId:s}),this._replaceMediaSection(o);else{o=new NS({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:t,kind:i,offerRtpParameters:r,streamId:n,trackId:s});const c=this._mediaSections.find(d=>d.closed);c?this._replaceMediaSection(o,c.mid):this._addMediaSection(o)}}pauseMediaSection(t){this._findMediaSection(t).pause()}resumeSendingMediaSection(t){this._findMediaSection(t).resume()}resumeReceivingMediaSection(t){this._findMediaSection(t).resume()}disableMediaSection(t){this._findMediaSection(t).disable()}closeMediaSection(t){const i=this._findMediaSection(t);return t===this._firstMid?(Y0.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",t),this.disableMediaSection(t),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(t,i){const r=this._midToIndex.get(t);if(r===void 0)throw new Error(`no media section found with mid '${t}'`);const n=this._mediaSections[r];if(n===void 0)throw new Error(`no media section found with idx '${r}'`);n.muxSimulcastStreams(i),this._replaceMediaSection(n)}planBStopReceiving({mid:t,offerRtpParameters:i}){const r=this._findMediaSection(t);r.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:t}){const i=new DS({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:t});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:t=!1}={}){const i=new NS({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:t});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,fn(this._sdpObject)}_addMediaSection(t){this._firstMid||(this._firstMid=t.mid),this._mediaSections.push(t),this._midToIndex.set(t.mid,this._mediaSections.length-1),this._sdpObject.media.push(t.getObject()),this._regenerateBundleMids()}_replaceMediaSection(t,i){if(typeof i=="string"){const r=this._midToIndex.get(i);if(r===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const n=this._mediaSections[r];this._mediaSections[r]=t,this._midToIndex.delete(n.mid),this._midToIndex.set(t.mid,r),this._sdpObject.media[r]=t.getObject(),this._regenerateBundleMids()}else{const r=this._midToIndex.get(t.mid);if(r===void 0)throw new Error(`no media section found with mid '${t.mid}'`);this._mediaSections[r]=t,this._sdpObject.media[r]=t.getObject()}}_findMediaSection(t){const i=this._midToIndex.get(t);if(i===void 0)throw new Error(`no media section found with mid '${t}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(t=>!t.closed).map(t=>t.mid).join(" "))}}const oz=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function yp(e){const t=oz.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}const we=new ar("Chrome70"),US={OS:1024,MIS:1024};class Lb extends Wd{static createFactory(){return()=>new Lb}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(we.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){we.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return hp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return we.debug("getNativeSctpCapabilities()"),{numStreams:US}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){we.debug("run()"),this._direction=t,this._remoteSdp=new vp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:zr("audio",l),video:zr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Jn("audio",l),video:Jn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(we.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){we.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(we.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});we.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;this.assertSendDirection(),we.debug("send() [kind:%s, track.id:%s]",t.kind,t.id);const a=Yt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=_n(a.codecs,n);const o=Yt(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=_n(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=be(l.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u}),i&&i.length>1&&(we.debug("send() | enabling legacy simulcast"),u=be(l.sdp),g=u.media[c.idx],em({offerMediaObject:g,numStreams:i.length}),l={type:"offer",sdp:fn(u)});let m=!1;const f=yp((i||[{}])[0].scalabilityMode);if(i&&i.length===1&&f.spatialLayers>1&&a.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(we.debug("send() | enabling legacy simulcast for VP9 SVC"),m=!0,u=be(l.sdp),g=u.media[c.idx],em({offerMediaObject:g,numStreams:f.spatialLayers}),l={type:"offer",sdp:fn(u)}),we.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),i){we.debug("send() | applying given encodings");const y=d.sender.getParameters();for(let _=0;_<(y.encodings||[]).length;++_){const T=y.encodings[_],P=i[_];if(!P)break;y.encodings[_]=Object.assign(T,P)}await d.sender.setParameters(y)}const w=d.mid;if(a.mid=w,u=be(this._pc.localDescription.sdp),g=u.media[c.idx],a.rtcp.cname=mp({offerMediaObject:g}),a.encodings=Ma({offerMediaObject:g}),i)for(let y=0;y<a.encodings.length;++y)i[y]&&Object.assign(a.encodings[y],i[y]);if(m&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const y of a.encodings)y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return we.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(w,d),{localId:w,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),we.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();we.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){}async resumeSending(t){}async replaceTrack(t,i){this.assertSendDirection(),i?we.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):we.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),we.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();we.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),we.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();we.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:r,protocol:s};we.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%US.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),we.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;we.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);fp({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:fn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),we.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){we.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){}async resumeReceiving(t){}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:c,protocol:r};we.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}we.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=gp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}const se=new ar("Chrome74"),jS={OS:1024,MIS:1024};let cz=class P4 extends Wd{static createFactory(){return()=>new P4}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(se.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){se.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return hp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return se.debug("getNativeSctpCapabilities()"),{numStreams:jS}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){se.debug("run()"),this._direction=t,this._remoteSdp=new vp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:zr("audio",l),video:zr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Jn("audio",l),video:Jn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(se.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(t){se.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(se.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});se.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s,a;this.assertSendDirection(),se.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&i.length>1&&i.forEach((_,T)=>{_.rid=`r${T}`});const o=Yt(this._sendingRtpParametersByKind[t.kind],{});o.codecs=_n(o.codecs,n);const c=Yt(this._sendingRemoteRtpParametersByKind[t.kind],{});c.codecs=_n(c.codecs,n);const d=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i});let u=await this._pc.createOffer(),g=be(u.sdp),m;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:g});let f=!1;const w=yp((i||[{}])[0].scalabilityMode);i&&i.length===1&&w.spatialLayers>1&&o.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(se.debug("send() | enabling legacy simulcast for VP9 SVC"),f=!0,g=be(u.sdp),m=g.media[d.idx],em({offerMediaObject:m,numStreams:w.spatialLayers}),u={type:"offer",sdp:fn(g)}),se.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const S=l.mid;if(o.mid=S,g=be(this._pc.localDescription.sdp),m=g.media[d.idx],o.rtcp.cname=mp({offerMediaObject:m}),!i)o.encodings=Ma({offerMediaObject:m});else if(i.length===1){let _=Ma({offerMediaObject:m});Object.assign(_[0],i[0]),f&&(_=[_[0]]),o.encodings=_}else o.encodings=i;if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _ of o.encodings)_.scalabilityMode?_.scalabilityMode=`L1T${w.temporalLayers}`:_.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,reuseMid:d.reuseMid,offerRtpParameters:o,answerRtpParameters:c,codecOptions:r,extmapAllowMixed:!0,forceGoogConference:(a=r==null?void 0:r.forceGoogConference)!==null&&a!==void 0?a:!1});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return se.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(S,l),{localId:S,rtpParameters:o,rtpSender:l.sender}}async stopSending(t){this.assertSendDirection(),se.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();se.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),se.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();se.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),se.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(this._remoteSdp.resumeSendingMediaSection(t),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();se.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?se.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):se.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),se.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();se.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),se.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();se.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};se.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%jS.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),se.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};se.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;se.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);fp({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:fn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),se.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){se.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){se.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){se.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();se.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};se.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=gp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const oe=new ar("Chrome111"),$S={OS:1024,MIS:1024};class Db extends Wd{static createFactory(){return()=>new Db}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(oe.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){oe.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return hp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return oe.debug("getNativeSctpCapabilities()"),{numStreams:$S}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){oe.debug("run()"),this._direction=t,this._remoteSdp=new vp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:zr("audio",l),video:zr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Jn("audio",l),video:Jn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(oe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(t){oe.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(oe.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});oe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;if(this.assertSendDirection(),oe.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&i.length>1){i.forEach((y,_)=>{y.rid=`r${_}`});let w=1,S=1;for(const y of i){const _=y.scalabilityMode?yp(y.scalabilityMode).temporalLayers:3;_>S&&(S=_)}for(const y of i)y.rid=`r${w++}`,y.scalabilityMode=`L1T${S}`}const a=Yt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=_n(a.codecs,n);const o=Yt(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=_n(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),l=await this._pc.createOffer();let u=be(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u}),oe.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const g=d.mid;a.mid=g,u=be(this._pc.localDescription.sdp);const m=u.media[c.idx];if(a.rtcp.cname=mp({offerMediaObject:m}),!i)a.encodings=Ma({offerMediaObject:m});else if(i.length===1){const w=Ma({offerMediaObject:m});Object.assign(w[0],i[0]),a.encodings=w}else a.encodings=i;this._remoteSdp.send({offerMediaObject:m,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});const f={type:"answer",sdp:this._remoteSdp.getSdp()};return oe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.set(g,d),{localId:g,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),oe.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();oe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),oe.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();oe.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),oe.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(this._remoteSdp.resumeSendingMediaSection(t),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();oe.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?oe.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):oe.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),oe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();oe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),oe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();oe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};oe.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%$S.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),oe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};oe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;oe.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);fp({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:fn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),oe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){oe.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){oe.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){oe.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();oe.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};oe.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}oe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=gp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}function dz(){const e=RTCRtpReceiver.getCapabilities(),t=Yt(e,{});for(const i of t.codecs){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType||`${i.kind}/${i.name}`,i.parameters){const r=i.parameters;r.apt&&(r.apt=Number(r.apt)),r["packetization-mode"]&&(r["packetization-mode"]=Number(r["packetization-mode"]))}for(const r of i.rtcpFeedback||[])r.parameter||(r.parameter="")}return t}function VS(e){const t=Yt(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);for(const i of t.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return t}const qe=new ar("Edge11");class Nb extends Wd{static createFactory(){return()=>new Nb}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){qe.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const t of this._rtpSenders.values())try{t.stop()}catch{}for(const t of this._rtpReceivers.values())try{t.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return qe.debug("getNativeRtpCapabilities()"),dz()}async getNativeSctpCapabilities(){return qe.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){qe.debug("run()"),this._sendingRtpParametersByKind={audio:zr("audio",l),video:zr("video",l)},this._remoteIceParameters=i,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname=`CNAME-${K0()}`,this.setIceGatherer({iceServers:a,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(t){throw new Ki("not supported")}async restartIce(t){if(qe.debug("restartIce()"),this._remoteIceParameters=t,!!this._transportReady){qe.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,t,"controlling");for(const i of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(i);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){qe.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),qe.debug("send() | calling new RTCRtpSender()");const s=new RTCRtpSender(t,this._dtlsTransport),a=Yt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=_n(a.codecs,n);const o=a.codecs.some(l=>/.+\/rtx$/i.test(l.mimeType));i||(i=[{}]);for(const l of i)l.ssrc=K0(),o&&(l.rtx={ssrc:K0()});a.encodings=i,a.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=VS(a);qe.debug("send() | calling rtpSender.send() [params:%o]",c),await s.send(c);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(d,s),{localId:d,rtpParameters:a,rtpSender:s}}async stopSending(t){qe.debug("stopSending() [localId:%s]",t);const i=this._rtpSenders.get(t);if(!i)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(t);try{qe.debug("stopSending() | calling rtpSender.stop()"),i.stop()}catch(r){throw qe.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(t){}async resumeSending(t){}async replaceTrack(t,i){i?qe.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):qe.debug("replaceTrack() [localId:%s, no track]",t);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(i)}async setMaxSpatialLayer(t,i){qe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.setParameters(n)}async setRtpEncodingParameters(t,i){qe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.setParameters(n)}async getSenderStats(t){const i=this._rtpSenders.get(t);if(!i)throw new Error("RTCRtpSender not found");return i.getStats()}async sendDataChannel(t){throw new Ki("not implemented")}async receive(t){const i=[];for(const r of t){const{trackId:n,kind:s}=r;qe.debug("receive() [trackId:%s, kind:%s]",n,s)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of t){const{trackId:n,kind:s,rtpParameters:a}=r;qe.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,s);o.addEventListener("error",l=>{qe.error('rtpReceiver "error" event [event:%o]',l)});const c=VS(a);qe.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await o.receive(c);const d=n;this._rtpReceivers.set(d,o),i.push({localId:d,track:o.track,rtpReceiver:o})}return i}async stopReceiving(t){for(const i of t){qe.debug("stopReceiving() [localId:%s]",i);const r=this._rtpReceivers.get(i);if(!r)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(i);try{qe.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(n){qe.warn("stopReceiving() | rtpReceiver.stop() failed:%o",n)}}}async pauseReceiving(t){}async resumeReceiving(t){}async getReceiverStats(t){const i=this._rtpReceivers.get(t);if(!i)throw new Error("RTCRtpReceiver not found");return i.getStats()}async receiveDataChannel(t){throw new Ki("not implemented")}setIceGatherer({iceServers:t,iceTransportPolicy:i}){const r=new RTCIceGatherer({iceServers:t||[],gatherPolicy:i||"all"});r.addEventListener("error",n=>{qe.error('iceGatherer "error" event [event:%o]',n)});try{r.gather()}catch(n){qe.debug("setIceGatherer() | iceGatherer.gather() failed: %s",n.toString())}this._iceGatherer=r}setIceTransport(){const t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",()=>{switch(t.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),t.addEventListener("icestatechange",()=>{switch(t.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),t.addEventListener("candidatepairchange",i=>{qe.debug('iceTransport "candidatepairchange" event [pair:%o]',i.pair)}),this._iceTransport=t}setDtlsTransport(){const t=new RTCDtlsTransport(this._iceTransport);t.addEventListener("statechange",()=>{qe.debug('dtlsTransport "statechange" event [state:%s]',t.state)}),t.addEventListener("dtlsstatechange",()=>{qe.debug('dtlsTransport "dtlsstatechange" event [state:%s]',t.state),t.state==="closed"&&this.emit("@connectionstatechange","closed")}),t.addEventListener("error",i=>{qe.error('dtlsTransport "error" event [event:%o]',i)}),this._dtlsTransport=t}async setupTransport({localDtlsRole:t}){qe.debug("setupTransport()");const i=this._dtlsTransport.getLocalParameters();i.role=t,await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:i},r,n)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(r=>r.algorithm==="sha-256"||r.algorithm==="sha-384"||r.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}const ue=new ar("Firefox60"),FS={OS:16,MIS:2048};let lz=class R4 extends Wd{static createFactory(){return()=>new R4}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(ue.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ue.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const r=i.captureStream().getVideoTracks()[0];try{t.addTransceiver("audio",{direction:"sendrecv"});const n=t.addTransceiver(r,{direction:"sendrecv"}),s=n.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];s.encodings=a,await n.sender.setParameters(s);const o=await t.createOffer();try{i.remove()}catch{}try{r.stop()}catch{}try{t.close()}catch{}const c=be(o.sdp);return hp({sdpObject:c})}catch(n){try{i.remove()}catch{}try{r.stop()}catch{}try{t.close()}catch{}throw n}}async getNativeSctpCapabilities(){return ue.debug("getNativeSctpCapabilities()"),{numStreams:FS}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){ue.debug("run()"),this._direction=t,this._remoteSdp=new vp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:zr("audio",l),video:zr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Jn("audio",l),video:Jn("video",l)},this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ue.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){throw new Ki("not supported")}async restartIce(t){if(ue.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ue.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){this.assertSendDirection(),ue.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&(i=Yt(i,[]),i.length>1&&(i.forEach((f,w)=>{f.rid=`r${w}`}),i.reverse()));const s=Yt(this._sendingRtpParametersByKind[t.kind],{});s.codecs=_n(s.codecs,n);const a=Yt(this._sendingRemoteRtpParametersByKind[t.kind],{});a.codecs=_n(a.codecs,n);const o=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});if(i){const f=o.sender.getParameters();f.encodings=i,await o.sender.setParameters(f)}const c=await this._pc.createOffer();let d=be(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d});const l=yp((i||[{}])[0].scalabilityMode);ue.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u=o.mid;s.mid=u,d=be(this._pc.localDescription.sdp);const g=d.media[d.media.length-1];if(s.rtcp.cname=mp({offerMediaObject:g}),!i)s.encodings=Ma({offerMediaObject:g});else if(i.length===1){const f=Ma({offerMediaObject:g});Object.assign(f[0],i[0]),s.encodings=f}else s.encodings=i.reverse();if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const f of s.encodings)f.scalabilityMode?f.scalabilityMode=`L1T${l.temporalLayers}`:f.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,offerRtpParameters:s,answerRtpParameters:a,codecOptions:r,extmapAllowMixed:!0});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return ue.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.set(u,o),{localId:u,rtpParameters:s,rtpSender:o.sender}}async stopSending(t){ue.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const r=await this._pc.createOffer();ue.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),ue.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();ue.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),ue.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(t);const r=await this._pc.createOffer();ue.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?ue.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):ue.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),ue.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated transceiver not found");const n=r.sender.getParameters();i=n.encodings.length-1-i,n.encodings.forEach((o,c)=>{c>=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ue.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),ue.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ue.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};ue.debug("sendDataChannel() [options:%o]",a);const o=this._pc.createDataChannel(n,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%FS.MIS,!this._hasDataChannelMediaSection){const d=await this._pc.createOffer(),l=be(d.sdp),u=l.media.find(m=>m.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l}),ue.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const g={type:"answer",sdp:this._remoteSdp.getSdp()};ue.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._hasDataChannelMediaSection=!0}const c={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:o,sctpStreamParameters:c}}async receive(t){this.assertRecvDirection();const i=[],r=new Map;for(const o of t){const{trackId:c,kind:d,rtpParameters:l,streamId:u}=o;ue.debug("receive() [trackId:%s, kind:%s]",c,d);const g=l.mid||String(this._mapMidTransceiver.size);r.set(c,g),this._remoteSdp.receive({mid:g,kind:d,offerRtpParameters:l,streamId:u||l.rtcp.cname,trackId:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let s=await this._pc.createAnswer();const a=be(s.sdp);for(const o of t){const{trackId:c,rtpParameters:d}=o,l=r.get(c),u=a.media.find(g=>String(g.mid)===l);fp({offerRtpParameters:d,answerMediaObject:u}),s={type:"answer",sdp:fn(a)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:a}),ue.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const o of t){const{trackId:c}=o,d=r.get(c),l=this._pc.getTransceivers().find(u=>u.mid===d);if(!l)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(d,l),i.push({localId:d,track:l.receiver.track,rtpReceiver:l.receiver})}return i}async stopReceiving(t){this.assertRecvDirection();for(const n of t){ue.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){ue.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){ue.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ue.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:s,maxPacketLifeTime:a,maxRetransmits:o}=t,c={negotiated:!0,id:n,ordered:s,maxPacketLifeTime:a,maxRetransmits:o,protocol:r};ue.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(i,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const l={type:"offer",sdp:this._remoteSdp.getSdp()};ue.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const u=await this._pc.createAnswer();if(!this._transportReady){const g=be(u.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:g})}ue.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=gp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const ae=new ar("Safari12"),BS={OS:1024,MIS:1024};let uz=class x4 extends Wd{static createFactory(){return()=>new x4}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(ae.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ae.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=be(i.sdp);return hp({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return ae.debug("getNativeSctpCapabilities()"),{numStreams:BS}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){ae.debug("run()"),this._direction=t,this._remoteSdp=new vp({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:zr("audio",l),video:zr("video",l)},this._sendingRemoteRtpParametersByKind={audio:Jn("audio",l),video:Jn("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ae.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){ae.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(ae.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ae.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;this.assertSendDirection(),ae.debug("send() [kind:%s, track.id:%s]",t.kind,t.id);const a=Yt(this._sendingRtpParametersByKind[t.kind],{});a.codecs=_n(a.codecs,n);const o=Yt(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=_n(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=be(l.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u});const m=yp((i||[{}])[0].scalabilityMode);i&&i.length>1&&(ae.debug("send() | enabling legacy simulcast"),u=be(l.sdp),g=u.media[c.idx],em({offerMediaObject:g,numStreams:i.length}),l={type:"offer",sdp:fn(u)}),ae.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f=d.mid;if(a.mid=f,u=be(this._pc.localDescription.sdp),g=u.media[c.idx],a.rtcp.cname=mp({offerMediaObject:g}),a.encodings=Ma({offerMediaObject:g}),i)for(let S=0;S<a.encodings.length;++S)i[S]&&Object.assign(a.encodings[S],i[S]);if(a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const S of a.encodings)S.scalabilityMode?S.scalabilityMode=`L1T${m.temporalLayers}`:S.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return ae.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(f,d),{localId:f,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),ae.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();ae.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),ae.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();ae.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),ae.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(t);const r=await this._pc.createOffer();ae.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?ae.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):ae.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),ae.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ae.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),ae.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();ae.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};ae.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%BS.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=be(l.sdp),g=u.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),ae.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};ae.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:g}=c;ae.debug("receive() [trackId:%s, kind:%s]",d,l);const m=u.mid||String(this._mapMidTransceiver.size);n.set(d,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:u,streamId:g||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=be(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),g=o.media.find(m=>String(m.mid)===u);fp({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:fn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),ae.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(g=>g.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){ae.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){ae.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){ae.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();ae.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};ae.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};ae.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const g=await this._pc.createAnswer();if(!this._transportReady){const m=be(g.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m})}ae.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=be(this._pc.localDescription.sdp));const r=gp({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}},A4=class extends az{constructor({handlerName:e,handlerFactory:t,Handler:i}={}){super({handlerName:e,handlerFactory:t,Handler:i})}switchDevice(e){switch(e){case"Chrome111":this._handlerFactory=Db.createFactory();break;case"Chrome74":this._handlerFactory=cz.createFactory();break;case"Chrome70":this._handlerFactory=Lb.createFactory();break;case"Firefox60":this._handlerFactory=lz.createFactory();break;case"Safari12":this._handlerFactory=uz.createFactory();break;case"Edge11":this._handlerFactory=Nb.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}};const Ju="chrome",I4="opera",O4="firefox",M4="iexplorer",L4="safari",D4="nwjs",N4="electron",U4="react-native",Ub="unknown",tm={Chrome:Ju,Chromium:Ju,Opera:I4,Firefox:O4,"Internet Explorer":M4,Safari:L4};function pz(){const{userAgent:e}=navigator,t={name:Ub,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){const i=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(i,10)>72&&(t.name=Ju,t.version=i)}else t.name=Ju,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t}function hz(){const{userAgent:e}=navigator;if(e.match(/Electron/)){const t=e.match(/Electron\/([\d.]+)/)[1];return{name:N4,version:t}}return null}function gz(){const{userAgent:e}=navigator;if(e.match(/JitsiMeetNW/)){const t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:D4,version:t}}}function mz(){const e=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let t;if(e||navigator.product==="ReactNative")return e&&e.length>2&&(e[1],t=e[2]),t||(t="unknown"),{name:U4,version:t}}function fz(e){let t;const i=[mz,hz,gz];for(let n=0;n<i.length;n+=1)if(t=i[n](),t)return t;const r=e.getBrowserName();return r in tm?{name:tm[r],version:e.getBrowserVersion()}:(t=pz(),t||{name:Ub,version:void 0})}class vz{constructor(){v(this,"_bowser"),v(this,"_name"),v(this,"_version"),v(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(t){let i,r;if(this._bowser=ab.getParser(navigator.userAgent),typeof t>"u"){const n=fz(this._bowser);i=n.name,r=n.version}else t.name in tm?(i=tm[t.name],r=t.version):(i=Ub,r=void 0);this._name=i,this._version=r}getName(){return this._name}isChrome(){return this._name===Ju}isOpera(){return this._name===I4}isFirefox(){return this._name===O4}isIExplorer(){return this._name===M4}isSafari(){return this._name===L4}isNWJS(){return this._name===D4}isElectron(){return this._name===N4}isReactNative(){return this._name===U4||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(t){if(this._version)return this._bowser.satisfies(t)}isVersionGreaterThan(t){return this._checkCondition({[this._name]:`>${t}`})}isVersionLessThan(t){return this._checkCondition({[this._name]:`<${t}`})}isVersionEqualTo(t){return this._checkCondition({[this._name]:`~${t}`})}}const yz=72;class _z extends vz{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=yz||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange<"u"&&typeof navigator.mediaDevices.addEventListener<"u"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver<"u"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia<"u"||typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getDisplayMedia<"u"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender<"u"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const t=new ReadableStream;try{return window.postMessage(t,"*",[t]),!0}catch{return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const t=navigator.userAgent;if(t.match(/Chrome/))return Number.parseInt(t.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Oe=new _z,j4={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}},hd_cropped:{width:{ideal:900},height:{ideal:720}}},zS={},bz=[{rid:"r0",scalabilityMode:"L1T2"},{rid:"r1",scalabilityMode:"L1T2"}],wz=[{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:25e5}],Sz=[{active:!1,priority:"low"},{active:!1,priority:"low"},{active:!0,priority:"low"}],HS={320:[{rid:"q",maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"}],640:[{rid:"q",scaleResolutionDownBy:2,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"}],1280:[{rid:"q",scaleResolutionDownBy:4,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",scaleResolutionDownBy:2,maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"f",maxBitrate:15e5,maxFramerate:30,scalabilityMode:"L1T3"}]},Ez=[{scalabilityMode:"L3T3_KEY"}];var ne=(e=>(e.WEBCAM="webcam",e.MIC="mic",e.SCREENSHARE_VIDEO="screenshare_video",e.SCREENSHARE_AUDIO="screenshare_audio",e))(ne||{});function Tz(e){return e.replace(/([-_]\w)/g,t=>t[1].toUpperCase())}function Ur(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>Ur(i));const t={};return Object.keys(e).forEach(i=>{const r=tb(i)?i:Tz(i);t[r]=Ur(e[i])}),t}function kz(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}function $4(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>$4(i));const t={};return Object.keys(e).forEach(i=>{const r=tb(i)?i:kz(i);t[r]=e[i]}),t}function ay(e,t={}){return e==null?{}:(Object.getOwnPropertyNames(e).forEach(i=>{if(typeof e[i]!="function"){if(typeof e[i]=="object"){ay(e[i],t[i]={});return}t[i]=e[i]}}),t)}var oy=(e=>(e.PARTICIPANT="PARTICIPANT",e.PEER="PEER",e.CLIENT="CLIENT",e))(oy||{});const re={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",FEAT_SPOTLIGHT:"feat_spotlight",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints"},Ye={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{}};function Cz(e){var t;Ye.roomName!=null||(Ye.roomName=e==null?void 0:e.roomName),Ye.authToken!=null||(Ye.authToken=e==null?void 0:e.authToken),Ye.peerId!=null||(Ye.peerId=e==null?void 0:e.peerId),Ye.apiBase!=null||(Ye.apiBase=e==null?void 0:e.apiBase),Ye.modules!=null||(Ye.modules=e==null?void 0:e.modules),Ye.organizationId!=null||(Ye.organizationId=e==null?void 0:e.organizationId),Ye.defaults={...Ye.defaults,...(t=e==null?void 0:e.defaults)!=null?t:{}}}const Ld="1.13.0",im="web-core",Pz=kB(),er=Ur(Pz.config.media);var qh;class V4{constructor(t){A(this,qh,void 0),v(this,"getScreenShareConstraints",()=>{var i,r;const{displaySurface:n}=(i=Ye.defaults.screenShare)!=null?i:{};let s={width:{max:1920},height:{max:1080},frameRate:{ideal:parseInt((r=ee.getValue(re.VAL_MIN_FRAMERATE))!=null?r:"5",10),max:5}};if(ee.hasFeature(re.SCREENSHARE_CONSTRAINTS)){const a=ee.getValue(re.SCREENSHARE_CONSTRAINTS);s=JSON.parse(a)}return n!==void 0&&["monitor","browser","window"].includes(n)&&(s={...s,displaySurface:n}),{audio:!0,video:s}}),v(this,"getAudioConstraints",i=>{const r={};return Oe.isFirefox()||Oe.isWebKitBased()?(r.audio={deviceId:i,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},r):(r.audio={},r.audio.optional=[i?{sourceId:i}:{sourceId:"default"},{echoCancellation:!0},{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0}],r)}),v(this,"getVideoConstraints",i=>{const r={},{quality:n}=h(this,qh).video;let s=j4[n];if(s.frameRate={ideal:24},Oe.isChromiumBased()&&(s.frameRate.max=30),ee.hasFeature(re.VIDEO_CONSTRAINTS)){const a=ee.getValue(re.VIDEO_CONSTRAINTS);s=JSON.parse(a)}return r.video=s,i?r.video.deviceId={exact:i}:r.video.facingMode="user",r}),I(this,qh,t!=null?t:er)}}qh=new WeakMap;var Rz=/\s/;function xz(e){for(var t=e.length;t--&&Rz.test(e.charAt(t)););return t}var Az=/^\s+/;function Iz(e){return e&&e.slice(0,xz(e)+1).replace(Az,"")}var GS=0/0,Oz=/^[-+]0x[0-9a-f]+$/i,Mz=/^0b[01]+$/i,Lz=/^0o[0-7]+$/i,Dz=parseInt;function WS(e){if(typeof e=="number")return e;if(wB(e))return GS;if(Oa(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Oa(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Iz(e);var i=Mz.test(e);return i||Lz.test(e)?Dz(e.slice(2),i?2:8):Oz.test(e)?GS:+e}var Nz=function(){return wn.Date.now()};const X0=Nz;var Uz="Expected a function",jz=Math.max,$z=Math.min;function Vz(e,t,i){var r,n,s,a,o,c,d=0,l=!1,u=!1,g=!0;if(typeof e!="function")throw new TypeError(Uz);t=WS(t)||0,Oa(i)&&(l=!!i.leading,u="maxWait"in i,s=u?jz(WS(i.maxWait)||0,t):s,g="trailing"in i?!!i.trailing:g);function m(O){var B=r,H=n;return r=n=void 0,d=O,a=e.apply(H,B),a}function f(O){return d=O,o=setTimeout(y,t),l?m(O):a}function w(O){var B=O-c,H=O-d,ie=t-B;return u?$z(ie,s-H):ie}function S(O){var B=O-c,H=O-d;return c===void 0||B>=t||B<0||u&&H>=s}function y(){var O=X0();if(S(O))return _(O);o=setTimeout(y,w(O))}function _(O){return o=void 0,g&&r?m(O):(r=n=void 0,a)}function T(){o!==void 0&&clearTimeout(o),d=0,r=c=n=o=void 0}function P(){return o===void 0?a:_(X0())}function L(){var O=X0(),B=S(O);if(r=arguments,n=this,c=O,B){if(o===void 0)return f(c);if(u)return clearTimeout(o),o=setTimeout(y,t),m(c)}return o===void 0&&(o=setTimeout(y,t)),a}return L.cancel=T,L.flush=P,L}var Fz="[object Map]",Bz="[object Set]",zz=Object.prototype,Hz=zz.hasOwnProperty;function Gz(e){if(e==null)return!0;if(kb(e)&&(of(e)||typeof e=="string"||typeof e.splice=="function"||Eb(e)||o4(e)||r4(e)))return!e.length;var t=df(e);if(t==Fz||t==Bz)return!e.size;if(cf(e))return!l4(e).length;for(var i in e)if(Hz.call(e,i))return!1;return!0}function Jh(e){const t={};return typeof(e==null?void 0:e.code)=="number"&&(t.code=e.code),typeof(e==null?void 0:e.code)=="string"&&(t.code=e.code.substring(0,100)),typeof(e==null?void 0:e.name)=="string"&&(t.name=e.name.substring(0,500)),typeof(e==null?void 0:e.message)=="string"&&(t.message=e.message.substring(0,500)),typeof(e==null?void 0:e.reason)=="string"&&(t.reason=e.reason.substring(0,500)),typeof(e==null?void 0:e.stack)=="string"&&(t.stack=e.stack.substring(0,500)),t}function Kh(){var e,t,i,r;const n=typeof navigator<"u"&&!navigator.isReactNative&&((e=window.location.host)==null?void 0:e.includes("staging"))&&((t=window.location.host)==null?void 0:t.includes("dyte.io")),s=!!((r=(i=Ye.modules)==null?void 0:i.devTools)!=null&&r.logs);return n||s}function Wz(e){if(ee.hasFeature(re.LOG_LEVEL)){let t=ee.getValue(re.LOG_LEVEL)||"all";if(t=t.toLowerCase().trim(),t==="off")return!1;if(t!=="all"){const i=["debug","log","info","warn","error"],r=i.indexOf(e),n=i.indexOf(t);if(r<n)return!1}}return!0}function F4(e,t,i={}){return Object.getOwnPropertyNames(e).forEach(r=>{var n;if([null,void 0,NaN].includes(e[r])||t&&(((n=t.match(/\./g))==null?void 0:n.length)||0)>=10)return;const s=t?`${t}.${r}`:r;typeof e[r]=="object"?F4(e[r],s,i):["number","string","boolean"].includes(typeof e[r])&&(i[s]=e[r])}),i}function ev(e,t={},i){const r={};try{const n=JSON.stringify(t),s=JSON.parse(n),a=F4(s,i),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${e}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw Kh()&&console.error(c,{log:t,flattened:o}),new Error(c)}return JSON.parse(o)}catch(n){const s=Jh(n);r[`${i}.error.message`]=s.message||"",r[`${i}.error.stack`]=s.stack||"",r[`${i}.error.reason`]=s.reason||"",r[`${i}.error.source`]="safelyFlattenObjForOpenTelemetry"}return r}const Te=class{static get logsEndpoint(){return Kh()?"https://api-silos-staging.dyte.io/otel/logs":"https://api-silos.dyte.io/otel/logs"}static init(e,t){if(navigator.isReactNative)return;const i=new iN({url:"https://otel.dyte.io/v1/traces",headers:{"api-key":""}});let r=Kh()?"staging":"production";const n=new eD({resource:new uN({"service.name":im,sdk_version:Ld,env:r,...ev("OTELResource",Oe.getDeviceInfo(),"device")}),idGenerator:{generateTraceId:()=>`${e}`.replace(/-/g,""),generateSpanId:()=>zm().replace(/-/g,"").substring(0,16)}});Te.tracingEnabled=t,Te.tracer=n.getTracer(e),Te.meetingMetadata.peerId=e,Te.meetingMetadata.sdkVersion=Ld,Te.meetingMetadata.deviceInfo=Oe.getDeviceInfo(),Te.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window<"u"&&window.location.href,n.addSpanProcessor(new e3(i)),"zone"in window?n.register({contextManager:new nN}):n.register({contextManager:new t3}),Te.contextPropagator=pd,document.addEventListener("visibilitychange",Te.processCachedLogs),Te.logsProcessorTimer=setInterval(Te.processCachedLogs,Te.logsProcessingInterval),t&&(Te.rootSpan=Te.tracer.startSpan(`peer_${e}`,{},Or),Te.rootSpan.end(),Te.initialized=!0)}static trace(e){return(t,i,r)=>{const n=r.value;return r.value=function(...s){if(!Te.initialized||navigator.isReactNative||!Te.tracingEnabled||ee.hasFeature(re.SKIP_OTEL_TRACES))return n.apply(this,s);const a=Te.getCurrentSpan(),o=Zp.trace.setSpan(Or,a);return ee.hasFeature(re.NR_OTEL_WEB)||Te.addLogInCurrentSpan("info",e),Te.tracer.startActiveSpan(e,{},o,c=>{const d=n.apply(this,s);return Promise.resolve(d).then(()=>{c.end()}).catch(()=>{c.end()}),d})},r}}static getCurrentSpan(){if(navigator.isReactNative)return null;let e=Zp.trace.getSpan(Zp.context.active());return e!=null||(e=Te.rootSpan),e}static getCurrentContext(){return Zp.trace.setSpan(Or,Te.getCurrentSpan())}static getCurrentSpanName(){var e;return(e=this.getCurrentSpan())==null?void 0:e.name}static injectContext(e){Te.getCurrentSpan()&&Te.contextPropagator.inject(Te.getCurrentContext(),e)}static addLogInCurrentSpan(e="info",t,i={},r){var n,s;if(i!=null&&i.error&&Object.assign(i,{error:Jh(i.error)}),Kh()&&(Gz(i)?console[e]("DyteInternalLogs:: ",e,t):console[e]("DyteInternalLogs:: ",e,t,i)),!!Wz(e))try{const a=ev(t,i,"metadata"),o=Te.getCurrentSpan(),c=new Date,d={message:t,level:e,...a,"trace.id":(n=o==null?void 0:o.spanContext())==null?void 0:n.traceId,"span.id":(s=o==null?void 0:o.spanContext())==null?void 0:s.spanId,loggedAt:c.toISOString(),loggedAtTzOffset:c.getTimezoneOffset()};r?Te.sendOtelLogsToNewRelic([d]):Te.logsCache.push(d)}catch(a){Te.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:Jh(a)})}}static sendOtelLogsToNewRelic(e){$g.post(Te.logsEndpoint,{meetingMetadata:ev("sendOtelLogsToNewRelic",Te.meetingMetadata,"meetingMetadata"),serviceName:im,logs:e}).catch(t=>{Te.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:Jh(t)}),Te.logsCache.push(...e)})}static processCachedLogs(){const e=Te.logsCache.splice(0,25);e!=null&&e.length&&Te.sendOtelLogsToNewRelic(e)}static destruct(){clearInterval(Te.logsProcessorTimer),Te.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",Te.processCachedLogs)}};let E=Te;v(E,"tracer"),v(E,"contextPropagator"),v(E,"rootSpan"),v(E,"logsCache",[]),v(E,"logsProcessorTimer"),v(E,"tracingEnabled",!0),v(E,"initialized",!1),v(E,"logsProcessingInterval",7e3),v(E,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),v(E,"meetingMetadata",{});class b{static info(t,i,r){E.addLogInCurrentSpan("info",t,i,r)}static error(t,i,r){E.addLogInCurrentSpan("error",t,i,r)}static debug(t,i,r){E.addLogInCurrentSpan("debug",t,i,r)}static log(t,i,r){E.addLogInCurrentSpan("log",t,i,r)}static warn(t,i,r){E.addLogInCurrentSpan("warn",t,i,r)}}const qz={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler"},Zh={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1700:"Internal exception"};Object.keys(Zh).forEach(e=>{Zh[e]=`{${qz[e.slice(0,2)]}} ${Zh[e]}`});class R extends Error{constructor(t,i,r=!1){super(t),v(this,"code"),this.code=i,this.name="DyteError",this.message=`[ERR${this.code}]: ${Zh[this.code]}
${this.message}`;try{let n=r;i&&i.endsWith("00")&&(n=!0),n&&b.error("DyteError",{error:{message:this.message,name:this.name,code:i}})}catch{}}}function rh(e,t,i,r){if(typeof i=="function"&&r instanceof t)i.call(null,r,e);else throw r}function qS(e,t,i){if(!e.value){const n=e.get,s=e.set;return n&&(e.get=function(){try{return n.apply(this)}catch(a){rh(this,t,i,a)}}),s&&(e.set=function(a){try{return s.apply(this,[a])}catch(o){rh(this,t,i,o)}}),e}const r=e.value;return e.value=function(...n){try{const s=r.apply(this,n);return s&&s instanceof Promise?s.catch(a=>{rh(this,t,i,a)}):s}catch(s){rh(this,t,i,s)}},e}function Jz(e,t){return(i,r,n)=>{if(n)return qS(n,e,t);for(const s of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,s);(a.value instanceof Function||a.get instanceof Function||a.set instanceof Function)&&Object.defineProperty(i.prototype,s,qS(a,e,t))}}}const Ti=e=>Jz(Error,e);var co=(e=>(e.allowed="ALLOWED",e.notAllowed="NOT_ALLOWED",e.canRequest="CAN_REQUEST",e))(co||{});const Kz={view_type:vn.GroupCall,accept_waiting_requests:!1,request_produce:!1,can_allow_participant_audio:!0,can_allow_participant_screensharing:!1,can_allow_participant_video:!0,request_kick_participant:!1,kick_participant:!0,pin_participant:!0,can_record:!1,waiting_room_type:"SKIP",plugins:{can_close:!0,can_start:!0,can_edit_acl:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},produce:{video:{allow:!0,quality:er.video.quality,frame_rate:er.video.frameRate},audio:!0,screenshare:{allow:!0,quality:er.screenshare.quality,frame_rate:er.screenshare.frameRate}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},reactions:!1,hidden_participant:!1,show_participant_list:!0,can_change_participant_role:!0,can_change_theme:!1,can_present:!1,accept_present_requests:!1,can_edit_display_name:!1,max_screenshare_count:1,is_recorder:!1,can_spotlight:!1},Zz=Ur(Kz);var Se;const cy=class{constructor(e){if(A(this,Se,void 0),!e)throw b.error("DytePermissionsPresetV1::load_preset_permissions_failed"),new R("Could not load preset permissions.");I(this,Se,e)}static fromResponse(e){return new cy(e)}static default(){return new cy(Zz)}get viewType(){return h(this,Se).viewType}get acceptWaitingRequests(){return h(this,Se).acceptWaitingRequests}get requestProduce(){return h(this,Se).requestProduce}get requestProduceAudio(){return this.requestProduce}get requestProduceScreenshare(){return this.requestProduce}get canAllowParticipantAudio(){return h(this,Se).canAllowParticipantAudio}get canAllowParticipantScreensharing(){return h(this,Se).canAllowParticipantScreensharing}get canAllowParticipantVideo(){return h(this,Se).canAllowParticipantVideo}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){return h(this,Se).kickParticipant}get pinParticipant(){return h(this,Se).pinParticipant}get canRecord(){return h(this,Se).canRecord}get waitingRoomType(){return h(this,Se).waitingRoomType}get waitingRoomBehaviour(){return h(this,Se).waitingRoomType==="SKIP"?"SKIP":h(this,Se).waitingRoomType==="SKIP_ON_PRIVILEGED_USER_ENTRY"?"ON_PRIVILEGED_USER_ENTRY":h(this,Se).waitingRoomType==="ON_ACCEPT"?"SKIP_ON_ACCEPT":"SKIP"}get plugins(){return h(this,Se).plugins}get polls(){return{...h(this,Se).polls,canViewResults:h(this,Se).polls.canView}}get produceVideo(){return{...h(this,Se).produce.video,allow:h(this,Se).produce.video.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceVideo(){const e=h(this,Se).produce.video.allow;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get produceScreenshare(){return{...h(this,Se).produce.screenshare,allow:h(this,Se).produce.screenshare.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceScreenshare(){const e=h(this,Se).produce.screenshare.allow;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get produceAudio(){return h(this,Se).produce.audio?"ALLOWED":"NOT_ALLOWED"}get canProduceAudio(){const e=h(this,Se).produce.audio;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get chatPublic(){return h(this,Se).chat.public}get chatPrivate(){return h(this,Se).chat.private}get connectedMeetings(){return{canAlterConnectedMeetings:!1,canSwitchConnectedMeetings:!1,canSwitchToParentMeeting:!1}}get reactions(){return h(this,Se).reactions}get hiddenParticipant(){return h(this,Se).hiddenParticipant}get showParticipantList(){return h(this,Se).showParticipantList}get canChangeParticipantRole(){return h(this,Se).canChangeParticipantRole}get canChangeTheme(){return h(this,Se).canChangeTheme}get canPresent(){return h(this,Se).canPresent}get acceptPresentRequests(){return h(this,Se).acceptPresentRequests}get canEditDisplayName(){return h(this,Se).canEditDisplayName}get maxScreenShareCount(){return h(this,Se).maxScreenshareCount}get isRecorder(){return h(this,Se).isRecorder}get canLivestream(){return!1}get canSpotlight(){return h(this,Se).canSpotlight}get isV2(){return!1}};let JS=cy;Se=new WeakMap;const Ee={isV2AuthToken:!1,meetingId:null,overrides:{},roomNodeOptions:void 0},yl={baseURL:"http://localhost:5000",createdAt:"2021-08-05T10:49:56.602Z",description:"Develop plugins locally",id:"09259e3b-7be8-46f6-9801-106bf1866e1c",name:"Localhost Dev",organizationId:"4ad15a19-80e2-4105-bf43-48039fd2963e",picture:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png",private:!1,published:!0,staggered:!1,tags:["#localhost","#dev"],type:"self_hosted",updatedAt:"2021-08-05T10:50:07.681Z"};function Qz(e,t){if(t){Ee.isV2AuthToken=!1;return}try{const{meetingId:i}=JSON.parse(atob(e.split(".")[1]));if(!i)throw Error(`Received V1 auth token ${e}`);Ee.isV2AuthToken=!0,Ee.meetingId=i}catch(i){throw b.error("constants::setIsV2AuthToken",{error:i,debuggingHint:`Unable to decode auth token: ${e}`},!0),new R("Invalid auth token")}}function B4(e,t){if(Ee.isV2AuthToken&&ee.hasFeature(re.CONNECTED_MEETINGS))return!0;const i=ee.getValue(re.CHAT_SOCKET_SERVER)||"socket-service",r=ee.getValue(re.PLUGIN_SOCKET_SERVER)||"socket-service",n=ee.getValue(re.POLL_SOCKET_SERVER)||"socket-service";return Ee.isV2AuthToken&&e===vn.Livestream||[i,r,n].includes("socket-service")||t.includes("HIVE")}function Yz(e){Ee.overrides=e}function Ku(e){return Ee.overrides&&Ee.overrides[e]?Ee.overrides[e]:!1}function Xz(e){Ee.roomNodeOptions=e}var jb=(e=>(e.REQUESTED_BY_PARTICIPANT="REQUESTED_BY_PARTICIPANT",e.REQUESTED_BY_MODERATOR="REQUESTED_BY_MODERATOR",e))(jb||{}),$b=(e=>(e.PRESENT="REQUEST_TO_PRESENT",e))($b||{}),Ks,Zs;class eH extends Hi.EventEmitter{constructor(){super(),A(this,Ks,void 0),A(this,Zs,void 0),v(this,"asyncPromiseTimeout"),I(this,Ks,new Map),I(this,Zs,new Map),this.asyncPromiseTimeout=8e3}async emitAsync(t,...i){h(this,Ks).set(t,[]);const r=h(this,Zs).get(t).map(()=>new Promise(n=>{h(this,Ks).get(t).push(n)}));super.emit(t,...i),await Promise.race([Promise.all(r),new Promise((n,s)=>setTimeout(()=>s(new Error("emitAsync failed to resolve.")),this.asyncPromiseTimeout))]),h(this,Ks).delete(t)}onAsync(t,i){const r=h(this,Ks),n=async(...s)=>{var a;try{await i(...s)}catch(c){b.error("[onAsync]",{error:c})}const o=(a=r.get(t))==null?void 0:a.shift();o==null||o()};return h(this,Zs).get(t)||h(this,Zs).set(t,[]),h(this,Zs).get(t).push(n),super.on(t,n)}reset(){I(this,Ks,new Map),I(this,Zs,new Map),super.removeAllListeners()}}Ks=new WeakMap,Zs=new WeakMap;const C=new eH;var k=(e=>(e.NEW_PRODUCER="NEW_PRODUCER",e.ROOM_NODE_CONNECTED="ROOM_NODE_CONNECTED",e.ROOM_NODE_DISCONNECTED="ROOM_NODE_DISCONNECTED",e.ROOM_NODE_CONNECTION_ERROR="ROOM_NODE_CONNECTION_ERROR",e.SOCKET_SERVICE_CONNECTED="SOCKET_SERVICE_CONNECTED",e.SOCKET_SERVICE_DISCONNECTED="SOCKET_SERVICE_DISCONNECTED",e.SOCKET_SERVICE_RECONNECTING="SOCKET_SERVICE_RECONNECTING",e.SOCKET_SERVICE_RECONNECTION_ATTEMPT="SOCKET_SERVICE_RECONNECTION_ATTEMPT",e.SOCKET_SERVICE_RECONNECT_FAILURE="SOCKET_SERVICE_RECONNECT_FAILURE",e.SOCKET_SERVICE_RECONNECTED="SOCKET_SERVICE_RECONNECTED",e.SOCKET_SERVICE_FAILED="SOCKET_SERVICE_FAILED",e.ROOM_JOINED="ROOM_JOINED",e.SOCKET_SERVICE_ROOM_JOINED="SOCKET_SERVICE_ROOM_JOINED",e.SELF_ROOM_JOINED="SELF_ROOM_JOINED",e.PRODUCER_SCORE_UPDATE="PRODUCER_SCORE_UPDATE",e.CONSUMER_SCORE_UPDATE="CONSUMER_SCORE_UPDATE",e.PRODUCER_STATUS_UPDATE="PRODUCER_STATUS_UPDATE",e.CONSUMER_STATUS_UPDATE="CONSUMER_STATUS_UPDATE",e.LOW_PRODUCER_SCORE="LOW_PRODUCER_SCORE",e.LOW_CONSUMER_SCORE="LOW_CONSUMER_SCORE",e.MEDIA_PERMISSION_ERROR="MEDIA_PERMISSION_ERROR",e.MEDIA_PERMISSION_UPDATE="MEDIA_PERMISSION_UPDATE",e.WAITLISTED="WAIT_LISTED",e.WAITLIST_ACCEPTED="websocket/waitlist-accepted",e.WAITLIST_REJECTED="websocket/waitlist-rejected",e.WAITLIST_PEER_ADDED="websocket/waitlist-peer-added",e.WAITLIST_PEER_REMOVED="websocket/waitlist-peer-closed",e.MESSAGE="websocket/message",e.ROOM_MESSAGE="websocket/room-message",e.DISABLE_AUDIO="websocket/disable-audio",e.DISABLE_VIDEO="websocket/disable-video",e.PEER_JOINED="websocket/peer-joined",e.PEER_CLOSED="websocket/peer-closed",e.PEER_MUTED="websocket/peer-muted",e.PEER_UNMUTED="websocket/peer-unmuted",e.PEER_PINNED="websocket/pin-peer",e.PEER_UNPINNED="websocker/unpin-peer",e.MUTE_ALL="websocket/mute-all",e.MUTE_ALL_VIDEO="websocket/mute-all-video",e.CONSUMER_CLOSED="websocket/consumer-closed",e.CONSUMER_PAUSED="websocket/consumer-paused",e.CONSUMER_RESUMED="websocket/consumer-resumed",e.PRODUCER_CLOSED="websocket/producer-closed",e.NEW_CONSUMER="websocket/new-consumer",e.CONNECTED_MEETING_STATE="websocket/connectedMeetingState",e.MOVE_TO_CONNECTED_MEETING="websocket/transferMeeting",e.GET_CHAT_MESSAGES="websocket/get-chat-messages",e.NEW_CHAT_MESSAGE="websocket/new-chat-message",e.PIN_CHAT_MESSAGE="websocket/pin-chat-message",e.UNPIN_CHAT_MESSAGE="websocket/unpin-chat-message",e.GET_POLLS="websocket/get-polls",e.UPDATE_POLL="websocket/update-poll",e.SELECTED_PEERS="websocket/selected-peers",e.GET_PAGE="websocket/get-page",e.ACTIVE_SPEAKER="websocket/active-speaker",e.NO_ACTIVE_SPEAKER="websocket/no-active-speaker",e.PRODUCER_SCORE="websocket/producer-score",e.CONSUMER_SCORE="websocket/consumer-score",e.ENABLE_PLUGIN="websocket/enable-plugin",e.DISABLE_PLUGIN="websocket/disable-plugin",e.PLUGIN_EVENT="websocket/plugin-event",e.PLUGIN_DATA="websocket/plugin-data",e.PLUGIN_INTERNAL_DATA="websocket/plugin-internal-data",e.KICKED="websocket/kicked",e.RECORDING_STARTED="websocket/recording-started",e.RECORDING_STOPPED="websocket/recording-stopped",e.ICE_CONNECTED="ICE_CONNECTED",e.ICE_DISCONNECTED="ICE_DISCONNECTED",e.ICE_FAILED="ICE_FAILED",e.ICE_RECONNECTING="ICE_RECONNECTING",e.AUDIO_TRACK_ANALYSIS="AUDIO_TRACK_ANALYSIS",e.AUDIO_TRACK_CLOSED="AUDIO_TRACK_CLOSED",e.AUDIO_TRACK_CREATED="AUDIO_TRACK_CREATED",e.SCREENSHARE_AUDIO_TRACK_ANALYSIS="SCREENSHARE_AUDIO_TRACK_ANALYSIS",e.SCREENSHARE_AUDIO_TRACK_CLOSED="SCREENSHARE_AUDIO_TRACK_CLOSED",e.SCREENSHARE_AUDIO_TRACK_CREATED="SCREENSHARE_AUDIO_TRACK_CREATED",e.VIDEO_TRACK_ANALYSIS="VIDEO_TRACK_ANALYSIS",e.VIDEO_TRACK_ANALYSIS_ERROR="VIDEO_TRACK_ANALYSIS_ERROR",e.VIDEO_TRACK_CLOSED="VIDEO_TRACK_CLOSED",e.VIDEO_TRACK_CREATED="VIDEO_TRACK_CREATED",e.SCREENSHARE_VIDEO_TRACK_ANALYSIS="SCREENSHARE_VIDEO_TRACK_ANALYSIS",e.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR="SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR",e.SCREENSHARE_VIDEO_TRACK_CLOSED="SCREENSHARE_VIDEO_TRACK_CLOSED",e.SCREENSHARE_VIDEO_TRACK_CREATED="SCREENSHARE_VIDEO_TRACK_CREATED",e.CANDIDATE_PEER_UPDATE="CANDIDATE_PEER_UPDATE",e.INBOUND_RTP_UPDATE="INBOUND_RTP_UPDATE",e.OUTBOUND_RTP_UPDATE="OUTBOUND_RTP_UPDATE",e.SEND_TRANSPORT_CLOSED="SEND_TRANSPORT_CLOSED",e.RECV_TRANSPORT_CLOSED="RECV_TRANSPORT_CLOSED",e.SEND_TRANSPORT_CREATED="SEND_TRANSPORT_CREATED",e.RECV_TRANSPORT_CREATED="RECV_TRANSPORT_CREATED",e.PRODUCER_TOGGLE="hive/producer-toggle",e.CONSUMER_TOGGLE="hive/consumer-toggle",e.SELECTED_PEERS_DIFF="hive/selected-peers-diff",e.REFRESH_GRID="hive/refresh-grid",e.RESET_PRODUCER_STATE="hive/reset-producer-state",e.HIVE_RECORDING_STARTED="hive/recording-started",e.HIVE_RECORDING_STOPPED="hive/recording-stopped",e.HIVE_TRANSPORT_STATE_CHANGED="hive/transport-state-changed",e.ROOM_STATE="sockethub/room-state",e.PEER_DISPLAY_NAME_CHANGED="hive/display-name-changed",e.ASSERT_SPOTLIGHTER="websocket/assert-spotlighter",e.PEER_REQUESTED_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-added",e.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-withdrawn",e.PEER_REJECTED_TO_JOIN_STAGE="websocket/peer-rejected-to-join-stage",e.PEER_ADDED_TO_STAGE="websocket/peer-added-to-stage",e.PEER_REMOVED_FROM_STAGE="websocket/peer-removed-from-stage",e.PEER_STARTED_PRESENTING="websocket/peer-started-presenting",e.PEER_STOPPED_PRESENTING="websocket/peer-stopped-presenting",e.REQUEST_TO_JOIN_STAGE_ACCEPTED="websocket/request-to-join-stage-accepted",e.REQUEST_TO_JOIN_STAGE_REJECTED="websocket/request-to-join-stage-rejected",e.STARTED_PRESENTING="websocket/started-presenting",e.STOPPED_PRESENTING="websocket/stopped-presenting",e.REMOVED_FROM_STAGE="websocket/removed-from-stage",e.JOIN_MEDIA_ROOM="JOIN_MEDIA_ROOM",e.LEAVE_MEDIA_ROOM="LEAVE_MEDIA_ROOM",e))(k||{}),pa;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER"})(pa||(pa={}));var dn;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO"})(dn||(dn={}));class tH extends x{constructor(){super("media.Pair",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new tH;class iH extends x{constructor(){super("media.Codec",[])}}new iH;class rH extends x{constructor(){super("media.Fingerprint",[{no:1,name:"algorithm",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new rH;class nH extends x{constructor(){super("media.SessionDescription",[{no:1,name:"target",kind:"enum",T:()=>["media.Target",pa]},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"sdp",kind:"scalar",T:9}])}}const Ls=new nH;class sH extends x{constructor(){super("media.CreateTransportRequest",[{no:1,name:"consuming",kind:"scalar",T:8},{no:2,name:"force_tcp",kind:"scalar",opt:!0,T:8},{no:3,name:"description",kind:"message",T:()=>Ls}])}}const aH=new sH;class oH extends x{constructor(){super("media.CreateTransportResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const pf=new oH;class cH extends x{constructor(){super("media.RenegotiateRequest",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const dH=new cH;class lH extends x{constructor(){super("media.RenegotiateResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}new lH;class uH extends x{constructor(){super("media.NestedScore",[{no:1,name:"encoding_idx",kind:"scalar",T:5},{no:2,name:"rid",kind:"scalar",T:9},{no:3,name:"score",kind:"scalar",T:5},{no:4,name:"ssrc",kind:"scalar",T:3,L:0}])}}const pH=new uH;class hH extends x{constructor(){super("media.ProducerTrack",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"stream_id",kind:"scalar",T:9}])}}const gH=new hH;class mH extends x{constructor(){super("media.ProducerEntry",[{no:1,name:"producing_transport_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9}])}}new mH;class fH extends x{constructor(){super("media.ConsumerEntry",[{no:1,name:"consuming_transport_id",kind:"scalar",T:9},{no:2,name:"consumer_id",kind:"scalar",T:9}])}}new fH;class vH extends x{constructor(){super("media.ProducerState",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"kind",kind:"enum",T:()=>["media.ProducerKind",dn]},{no:3,name:"pause",kind:"scalar",T:8},{no:4,name:"screen_share",kind:"scalar",T:8}])}}const _p=new vH;class yH extends x{constructor(){super("media.ConsumerState",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>_p},{no:3,name:"producer_track",kind:"message",T:()=>gH}])}}const _H=new yH;class bH extends x{constructor(){super("media.ProducerIdToConsumerMap",[{no:1,name:"map",kind:"map",K:9,V:{kind:"message",T:()=>_H}}])}}const z4=new bH;class wH extends x{constructor(){super("media.edge.PeerJoinRequest",[{no:1,name:"display_name",kind:"scalar",opt:!0,T:9},{no:2,name:"prejoined",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:5,name:"preset",kind:"scalar",opt:!0,T:12},{no:6,name:"user_id",kind:"scalar",opt:!0,T:9},{no:7,name:"organization_id",kind:"scalar",opt:!0,T:9}])}}const SH=new wH;class EH extends x{constructor(){super("media.edge.PeerJoinCompleteRequest",[])}}const TH=new EH;class kH extends x{constructor(){super("media.edge.PeerLeaveRequest",[{no:1,name:"close_room",kind:"scalar",T:8}])}}const CH=new kH;class PH extends x{constructor(){super("media.edge.ConsumeMultipleProducerRequest",[{no:1,name:"producer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8}])}}new PH;class RH extends x{constructor(){super("media.edge.ConsumePeerRequest",[{no:1,name:"producing_peer_id",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8},{no:3,name:"producer_id",kind:"scalar",opt:!0,T:9}])}}const xH=new RH;class AH extends x{constructor(){super("media.edge.ProducerCreateRequest",[{no:1,name:"kind",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"description",kind:"message",T:()=>Ls},{no:5,name:"msid",kind:"scalar",T:9}])}}const IH=new AH;class OH extends x{constructor(){super("media.edge.SelectedPeersRequest",[])}}new OH;class MH extends x{constructor(){super("media.edge.GlobalPeerPinningRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const LH=new MH;class DH extends x{constructor(){super("media.edge.ProducerToggleRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const nh=new DH;class NH extends x{constructor(){super("media.edge.ConsumerToggleRequest",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const KS=new NH;class UH extends x{constructor(){super("media.edge.ProducerCloseRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const jH=new UH;class $H extends x{constructor(){super("media.edge.ConsumerCloseRequest",[{no:1,name:"consumer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"description",kind:"message",T:()=>Ls}])}}const VH=new $H;class FH extends x{constructor(){super("media.edge.KickPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const BH=new FH;class zH extends x{constructor(){super("media.edge.KickAllPeersRequest",[])}}const HH=new zH;class GH extends x{constructor(){super("media.edge.PeerDisplayNameEditRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const WH=new GH;class qH extends x{constructor(){super("media.edge.HostMediaControlForPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"video",kind:"scalar",T:8},{no:4,name:"scree_share",kind:"scalar",T:8}])}}const JH=new qH;class KH extends x{constructor(){super("media.edge.HostMediaControlForAllPeerRequest",[{no:1,name:"audio",kind:"scalar",T:8},{no:2,name:"video",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8}])}}const ZH=new KH;class QH extends x{constructor(){super("media.edge.GetRoomStateResponse",[{no:1,name:"display_title",kind:"scalar",T:9},{no:2,name:"locked_mode",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"room_name",kind:"scalar",T:9},{no:5,name:"current_peer_id",kind:"scalar",T:9},{no:6,name:"is_recording",kind:"scalar",opt:!0,T:8},{no:7,name:"recorder_participant_id",kind:"scalar",opt:!0,T:9}])}}const YH=new QH;class XH extends x{constructor(){super("media.edge.ErrorResponse",[{no:1,name:"error_message",kind:"scalar",T:9},{no:2,name:"event_id",kind:"scalar",T:5}])}}new XH;class eG extends x{constructor(){super("media.edge.EmptyResponse",[])}}new eG;class tG extends x{constructor(){super("media.edge.RoomParticipants",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"producer_states",kind:"message",repeat:1,T:()=>_p},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",opt:!0,T:9}])}}const H4=new tG;class iG extends x{constructor(){super("media.edge.SelectedPeersResponse",[{no:1,name:"audio_peers",kind:"scalar",repeat:2,T:9},{no:2,name:"compulsory_peers",kind:"scalar",repeat:2,T:9}])}}const G4=new iG;class rG extends x{constructor(){super("media.edge.SelectedPeersDiffEntry",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"priority",kind:"scalar",T:5}])}}const nG=new rG;class sG extends x{constructor(){super("media.edge.SelectedPeersDiffResponse",[{no:1,name:"entries",kind:"message",repeat:1,T:()=>nG}])}}const aG=new sG;class oG extends x{constructor(){super("media.edge.PeerJoinResponse",[])}}new oG;class cG extends x{constructor(){super("media.edge.PeerJoinCompleteResponse",[{no:1,name:"room_state",kind:"message",T:()=>YH},{no:2,name:"participants",kind:"message",repeat:1,T:()=>H4},{no:3,name:"selected_peers",kind:"message",T:()=>G4},{no:4,name:"max_preferred_streams",kind:"scalar",T:5}])}}const dG=new cG;class lG extends x{constructor(){super("media.edge.PeerLeaveResponse",[{no:1,name:"closed",kind:"scalar",T:8}])}}const uG=new lG;class pG extends x{constructor(){super("media.edge.ConsumeMultipleProducerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>z4},{no:3,name:"transport_details",kind:"message",T:()=>pf}])}}new pG;class hG extends x{constructor(){super("media.edge.ConsumePeerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>z4},{no:3,name:"transport_details",kind:"message",T:()=>pf}])}}const gG=new hG;class mG extends x{constructor(){super("media.edge.ProducerCreateResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"transport_details",kind:"message",T:()=>pf},{no:4,name:"description",kind:"message",T:()=>Ls}])}}const fG=new mG;class vG extends x{constructor(){super("media.edge.ProducerScoreResponse",[{no:1,name:"responseid",kind:"scalar",T:9},{no:2,name:"score",kind:"message",T:()=>pH}])}}new vG;class yG extends x{constructor(){super("media.edge.ActiveSpeakerResponse",[{no:1,name:"responsepeer_id",kind:"scalar",T:9},{no:2,name:"volume",kind:"scalar",T:5}])}}new yG;class _G extends x{constructor(){super("media.edge.NoActiveSpeakerResponse",[])}}new _G;class bG extends x{constructor(){super("media.edge.ProducerToggleResponse",[])}}new bG;class wG extends x{constructor(){super("media.edge.ConsumerToggleResponse",[])}}new wG;class SG extends x{constructor(){super("media.edge.ProducerClosingResponse",[{no:1,name:"description",kind:"message",T:()=>Ls}])}}const EG=new SG;class TG extends x{constructor(){super("media.edge.ConsumerClosingResponse",[])}}new TG;class kG extends x{constructor(){super("media.edge.GlobalPeerPinningResponse",[])}}new kG;class CG extends x{constructor(){super("media.edge.KickPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const PG=new CG;class RG extends x{constructor(){super("media.edge.KickAllPeersResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const xG=new RG;class AG extends x{constructor(){super("media.edge.HostMediaControlForPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const IG=new AG;class OG extends x{constructor(){super("media.edge.HostMediaControlForAllPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const MG=new OG;class LG extends x{constructor(){super("media.edge.PeerDisplayNameEditResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const DG=new LG;class NG extends x{constructor(){super("media.edge.PeerJoinBroadcastResponse",[{no:1,name:"participant",kind:"message",T:()=>H4}])}}const UG=new NG;class jG extends x{constructor(){super("media.edge.PeerProducerCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>_p}])}}const $G=new jG;class VG extends x{constructor(){super("media.edge.PeerProducerToggleBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>_p}])}}const FG=new VG;class BG extends x{constructor(){super("media.edge.PeerProducerCloseBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>_p}])}}const zG=new BG;class HG extends x{constructor(){super("media.edge.PeerLeaveBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const GG=new HG;class WG extends x{constructor(){super("media.edge.GlobalPeerPinningBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const qG=new WG;class JG extends x{constructor(){super("media.edge.RecordingStartedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const KG=new JG;class ZG extends x{constructor(){super("media.edge.RecordingStoppedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const QG=new ZG;class YG extends x{constructor(){super("media.edge.PeerDisplayNameEditBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const XG=new YG;class eW extends x{constructor(){super("socket.api.BaseSocketHubMessage",[{no:1,name:"event",kind:"scalar",T:5},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9},{no:4,name:"room_id",kind:"scalar",T:9},{no:5,name:"user_id",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}])}}new eW;class tW extends x{constructor(){super("socket.api.ErrorMessage",[{no:1,name:"code",kind:"scalar",opt:!0,T:5},{no:2,name:"message",kind:"scalar",T:9}])}}new tW;class iW extends x{constructor(){super("socket.PeerPreset",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"message",T:()=>TW}])}}new iW;class rW extends x{constructor(){super("socket.PeerPreset.Plugins",[{no:1,name:"can_close",kind:"scalar",T:8},{no:2,name:"can_start",kind:"scalar",T:8}])}}const nW=new rW;class sW extends x{constructor(){super("socket.PeerPreset.Polls",[{no:1,name:"can_create",kind:"scalar",T:8},{no:2,name:"can_vote",kind:"scalar",T:8},{no:3,name:"can_view",kind:"scalar",T:8}])}}const aW=new sW;class oW extends x{constructor(){super("socket.PeerPreset.Video",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const cW=new oW;class dW extends x{constructor(){super("socket.PeerPreset.Screenshare",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const lW=new dW;class uW extends x{constructor(){super("socket.PeerPreset.Produce",[{no:1,name:"video",kind:"message",T:()=>cW},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"screenshare",kind:"message",T:()=>lW}])}}const pW=new uW;class hW extends x{constructor(){super("socket.PeerPreset.Public",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:8},{no:3,name:"files",kind:"scalar",T:8}])}}const gW=new hW;class mW extends x{constructor(){super("socket.PeerPreset.Private",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"can_receive",kind:"scalar",T:8},{no:3,name:"text",kind:"scalar",T:8},{no:4,name:"files",kind:"scalar",T:8}])}}const fW=new mW;class vW extends x{constructor(){super("socket.PeerPreset.Chat",[{no:1,name:"public",kind:"message",T:()=>gW},{no:2,name:"private",kind:"message",T:()=>fW}])}}const yW=new vW;class _W extends x{constructor(){super("socket.PeerPreset.Permissions",[{no:1,name:"view_type",kind:"scalar",T:9},{no:2,name:"accept_waiting_requests",kind:"scalar",T:8},{no:3,name:"request_produce",kind:"scalar",T:8},{no:4,name:"can_allow_participant_audio",kind:"scalar",T:8},{no:5,name:"can_allow_participant_screensharing",kind:"scalar",T:8},{no:6,name:"can_allow_participant_video",kind:"scalar",T:8},{no:7,name:"request_kick_participant",kind:"scalar",T:8},{no:8,name:"kick_participant",kind:"scalar",T:8},{no:9,name:"pin_participant",kind:"scalar",T:8},{no:10,name:"can_record",kind:"scalar",T:8},{no:11,name:"waiting_room_type",kind:"scalar",T:9},{no:12,name:"plugins",kind:"message",T:()=>nW},{no:13,name:"polls",kind:"message",T:()=>aW},{no:14,name:"produce",kind:"message",T:()=>pW},{no:15,name:"chat",kind:"message",T:()=>yW},{no:16,name:"reactions",kind:"scalar",T:8},{no:17,name:"hidden_participant",kind:"scalar",T:8},{no:18,name:"show_participant_list",kind:"scalar",T:8},{no:19,name:"can_change_participant_role",kind:"scalar",T:8},{no:20,name:"can_change_theme",kind:"scalar",T:8},{no:21,name:"can_present",kind:"scalar",T:8},{no:22,name:"is_recorder",kind:"scalar",opt:!0,T:8}])}}const bW=new _W;class wW extends x{constructor(){super("socket.PeerPreset.Preset",[{no:1,name:"permissions",kind:"message",T:()=>bW},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"preset_name",kind:"scalar",T:9}])}}const SW=new wW;class EW extends x{constructor(){super("socket.PeerPreset.Data",[{no:1,name:"preset",kind:"message",T:()=>SW}])}}const TW=new EW;class kW extends x{constructor(){super("socket.chat.ChatMessage",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"pinned",kind:"scalar",T:8},{no:6,name:"is_edited",kind:"scalar",T:8},{no:7,name:"payload_type",kind:"scalar",T:5},{no:8,name:"payload",kind:"scalar",T:9},{no:10,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:11,name:"created_at",kind:"scalar",T:4,L:2},{no:12,name:"created_at_ms",kind:"scalar",opt:!0,T:4,L:2}])}}const bp=new kW;class CW extends x{constructor(){super("socket.chat.GetPaginatedChatMessageRoomRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8}])}}const PW=new CW;class RW extends x{constructor(){super("socket.chat.GetPaginatedChatMessageRoomResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>bp},{no:2,name:"next",kind:"scalar",T:8}])}}const xW=new RW;class AW extends x{constructor(){super("socket.chat.GetChatMessagesResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>bp}])}}const IW=new AW;class OW extends x{constructor(){super("socket.chat.SendChatMessageToRoomRequest",[{no:1,name:"payload_type",kind:"scalar",T:5},{no:2,name:"payload",kind:"scalar",T:9}])}}const MW=new OW;class LW extends x{constructor(){super("socket.chat.SendChatMessageToRoomResponse",[{no:1,name:"message",kind:"message",T:()=>bp}])}}const tv=new LW;class DW extends x{constructor(){super("socket.chat.SendChatMessageToPeersRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const NW=new DW;class UW extends x{constructor(){super("socket.chat.SendChatMessageToPeersResponse",[{no:1,name:"message",kind:"message",T:()=>bp}])}}const iv=new UW;class jW extends x{constructor(){super("socket.chat.EditChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",opt:!0,T:5},{no:3,name:"payload",kind:"scalar",opt:!0,T:9},{no:4,name:"pinned",kind:"scalar",opt:!0,T:8}])}}const $W=new jW;class VW extends x{constructor(){super("socket.chat.EditChatMessageResponse",[{no:1,name:"message",kind:"message",T:()=>bp}])}}const rv=new VW;class FW extends x{constructor(){super("socket.chat.DeleteChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9}])}}const BW=new FW;class zW extends x{constructor(){super("socket.chat.DeleteChatMessageResponse",[{no:1,name:"chat_id",kind:"scalar",T:9}])}}const nv=new zW;var Io;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ON_STAGE=1]="ON_STAGE",e[e.APPROVED_STAGE=2]="APPROVED_STAGE",e[e.REQUESTED_STAGE=3]="REQUESTED_STAGE",e[e.OFF_STAGE=4]="OFF_STAGE"})(Io||(Io={}));var rm;(function(e){e[e.HIVE=0]="HIVE",e[e.CHAT=1]="CHAT",e[e.PING=2]="PING"})(rm||(rm={}));class HW extends x{constructor(){super("socket.room.Peer",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",Io,"STAGE_TYPE_"]},{no:5,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:6,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:7,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const hf=new HW;class GW extends x{constructor(){super("socket.room.PeerInfoResponse",[{no:1,name:"peer",kind:"message",T:()=>hf}])}}const WW=new GW;class qW extends x{constructor(){super("socket.room.RoomPeersInfoResponse",[{no:1,name:"peers",kind:"message",repeat:1,T:()=>hf}])}}new qW;class JW extends x{constructor(){super("socket.room.RoomPeerCountResponse",[{no:1,name:"count",kind:"scalar",T:4,L:2}])}}const ZS=new JW;class KW extends x{constructor(){super("socket.room.Room",[{no:1,name:"room_id",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",T:9},{no:4,name:"created_at",kind:"scalar",T:4,L:2}])}}const W4=new KW;class ZW extends x{constructor(){super("socket.room.RoomInfoResponse",[{no:1,name:"room",kind:"message",T:()=>W4}])}}const QS=new ZW;class QW extends x{constructor(){super("socket.room.GetPeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9}])}}new QW;class YW extends x{constructor(){super("socket.room.UpdatePeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9}])}}new YW;class XW extends x{constructor(){super("socket.room.JoinRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>hf},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"organization_id",kind:"scalar",opt:!0,T:9},{no:5,name:"use_hive",kind:"scalar",opt:!0,T:8},{no:6,name:"preset",kind:"scalar",opt:!0,T:12},{no:7,name:"capabilities",kind:"enum",repeat:1,T:()=>["socket.room.Capabilities",rm,"CAPABILITIES_"]}])}}const eq=new XW;class tq extends x{constructor(){super("socket.room.LeaveRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>hf}])}}const iq=new tq;class rq extends x{constructor(){super("socket.room.UpdateRoomInfoRequest",[{no:1,name:"room",kind:"message",T:()=>W4}])}}new rq;class nq extends x{constructor(){super("socket.room.GetConnectedRoomsDumpRequest",[])}}new nq;class sq extends x{constructor(){super("socket.room.ServiceError",[{no:1,name:"message",kind:"scalar",opt:!0,T:9},{no:2,name:"code",kind:"scalar",opt:!0,T:9}])}}const Vb=new sq;class aq extends x{constructor(){super("socket.room.ConnectedMeetingPeer",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:4,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:5,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const oq=new aq;class cq extends x{constructor(){super("socket.room.ConnectedMeetingDump",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>oq}])}}const YS=new cq;class dq extends x{constructor(){super("socket.room.GetConnectedRoomsDumpResponse",[{no:1,name:"parent_meeting",kind:"message",T:()=>YS},{no:2,name:"meetings",kind:"message",repeat:1,T:()=>YS}])}}const lq=new dq;class uq extends x{constructor(){super("socket.room.CreateRoomRequestPayload",[{no:1,name:"title",kind:"scalar",opt:!0,T:9}])}}const pq=new uq;class hq extends x{constructor(){super("socket.room.CreateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>pq}])}}const gq=new hq;class mq extends x{constructor(){super("socket.room.CreateRoomResponsePayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>Vb}])}}const fq=new mq;class vq extends x{constructor(){super("socket.room.CreateConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>fq}])}}const XS=new vq;class yq extends x{constructor(){super("socket.room.UpdateRoomRequestPayload",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}}const _q=new yq;class bq extends x{constructor(){super("socket.room.UpdateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>_q}])}}new bq;class wq extends x{constructor(){super("socket.room.DisableRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const Sq=new wq;class Eq extends x{constructor(){super("socket.room.DisableConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Sq}])}}const Tq=new Eq;class kq extends x{constructor(){super("socket.room.DisableConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Rq}])}}const Cq=new kq;class Pq extends x{constructor(){super("socket.room.DisableConnectedRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"status",kind:"scalar",opt:!0,T:9},{no:3,name:"title",kind:"scalar",opt:!0,T:9},{no:4,name:"error",kind:"message",T:()=>Vb}])}}const Rq=new Pq;class xq extends x{constructor(){super("socket.room.MovePeerPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const Aq=new xq;class Iq extends x{constructor(){super("socket.room.MovePeersBetweenRoomsRequest",[{no:1,name:"source_meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"destination_meeting_id",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>Aq}])}}const Oq=new Iq;class Mq extends x{constructor(){super("socket.room.MovedPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>Vb}])}}const q4=new Mq;class Lq extends x{constructor(){super("socket.room.MovePeersBetweenRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>q4}])}}new Lq;class Dq extends x{constructor(){super("socket.room.TransferPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"auth_token",kind:"scalar",opt:!0,T:9}])}}const Nq=new Dq;class Uq extends x{constructor(){super("socket.plugin.AddPluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const jq=new Uq;class $q extends x{constructor(){super("socket.plugin.RemovePluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const Vq=new $q;class Fq extends x{constructor(){super("socket.plugin.EnablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Bq=new Fq;class zq extends x{constructor(){super("socket.plugin.DisablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Hq=new zq;class Gq extends x{constructor(){super("socket.plugin.EnablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Wq=new Gq;class qq extends x{constructor(){super("socket.plugin.DisablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Jq=new qq;class Kq extends x{constructor(){super("socket.plugin.PluginEventToRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const Zq=new Kq;class Qq extends x{constructor(){super("socket.plugin.PluginEventToPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"plugin_data",kind:"scalar",T:12}])}}const Yq=new Qq;class Xq extends x{constructor(){super("socket.plugin.StoreKeys",[{no:1,name:"store_key",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",opt:!0,T:12}])}}const Fb=new Xq;class eJ extends x{constructor(){super("socket.plugin.PluginStoreInsertKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"insert_keys",kind:"message",repeat:1,T:()=>Fb}])}}const eE=new eJ;class tJ extends x{constructor(){super("socket.plugin.PluginStoreGetKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"get_keys",kind:"message",repeat:1,T:()=>Fb}])}}const iJ=new tJ;class rJ extends x{constructor(){super("socket.plugin.PluginStoreDeleteKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"delete_keys",kind:"message",repeat:1,T:()=>Fb}])}}const nJ=new rJ;class sJ extends x{constructor(){super("socket.plugin.PluginStoreDeleteRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9}])}}const aJ=new sJ;class oJ extends x{constructor(){super("socket.plugin.EnablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"enabled_by",kind:"scalar",T:9}])}}const dy=new oJ;class cJ extends x{constructor(){super("socket.plugin.EnablePluginsResponse",[{no:1,name:"plugins",kind:"message",repeat:1,T:()=>dy}])}}const dJ=new cJ;class lJ extends x{constructor(){super("socket.plugin.DisablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"disabled_by",kind:"scalar",T:9}])}}const tE=new lJ;class uJ extends x{constructor(){super("socket.plugin.PluginStoreItem",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"store_key",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}])}}const pJ=new uJ;class hJ extends x{constructor(){super("socket.plugin.PluginStoreResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"store_items",kind:"message",repeat:1,T:()=>pJ}])}}const iE=new hJ;class gJ extends x{constructor(){super("socket.plugin.PluginEventResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const rE=new gJ;class mJ extends x{constructor(){super("socket.livestreaming.LiveStreamingEvent",[{no:1,name:"livestream_id",kind:"scalar",T:9},{no:2,name:"err_message",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",T:9},{no:5,name:"playback_url",kind:"scalar",T:9},{no:6,name:"org_id",kind:"scalar",T:9},{no:7,name:"room_name",kind:"scalar",T:9},{no:8,name:"room_uuid",kind:"scalar",T:9},{no:9,name:"status",kind:"scalar",T:9}])}}const nE=new mJ;class fJ extends x{constructor(){super("socket.livestreaming.GetStagePeersResponse",[{no:1,name:"stage_peers",kind:"scalar",repeat:2,T:9}])}}const sE=new fJ;class vJ extends x{constructor(){super("socket.livestreaming.StageRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9}])}}const yJ=new vJ;class _J extends x{constructor(){super("socket.livestreaming.GetStageRequestsResponse",[{no:1,name:"stage_requests",kind:"message",repeat:1,T:()=>yJ}])}}const sv=new _J;class bJ extends x{constructor(){super("socket.livestreaming.GrantStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const wJ=new bJ;class SJ extends x{constructor(){super("socket.livestreaming.DenyStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const EJ=new SJ;class TJ extends x{constructor(){super("socket.livestreaming.LeaveStageRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const aE=new TJ;class kJ extends x{constructor(){super("socket.polls.Poll",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"created_by",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"question",kind:"scalar",T:9},{no:5,name:"options",kind:"message",repeat:1,T:()=>PJ},{no:6,name:"hide_votes",kind:"scalar",T:8},{no:7,name:"anonymous",kind:"scalar",T:8},{no:8,name:"votes",kind:"scalar",repeat:2,T:9}])}}const J4=new kJ;class CJ extends x{constructor(){super("socket.polls.PollOption",[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",opt:!0,T:4,L:2},{no:3,name:"votes",kind:"message",repeat:1,T:()=>xJ}])}}const PJ=new CJ;class RJ extends x{constructor(){super("socket.polls.PollVote",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}}const xJ=new RJ;class AJ extends x{constructor(){super("socket.polls.NewPollRequest",[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"options",kind:"scalar",repeat:2,T:9},{no:3,name:"anonymous",kind:"scalar",T:8},{no:4,name:"hide_votes",kind:"scalar",T:8},{no:5,name:"created_by",kind:"scalar",opt:!0,T:9},{no:6,name:"created_by_user_id",kind:"scalar",opt:!0,T:9}])}}const IJ=new AJ;class OJ extends x{constructor(){super("socket.polls.VotePollRequest",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"index",kind:"scalar",T:4,L:2}])}}const MJ=new OJ;class LJ extends x{constructor(){super("socket.polls.UpdatePollResponse",[{no:1,name:"poll",kind:"message",T:()=>J4}])}}const av=new LJ;class DJ extends x{constructor(){super("socket.polls.GetPollsResponse",[{no:1,name:"polls",kind:"message",repeat:1,T:()=>J4}])}}const NJ=new DJ;var ly;(function(e){e[e.ACTION=0]="ACTION",e[e.RESPONSE=1]="RESPONSE",e[e.EVENT=2]="EVENT"})(ly||(ly={}));var uy;(function(e){e[e.SERVICE_NOT_FOUND=0]="SERVICE_NOT_FOUND",e[e.PARAMETER_VALIDATION_ERROR=1]="PARAMETER_VALIDATION_ERROR",e[e.TIMEOUT_ERROR=2]="TIMEOUT_ERROR",e[e.APPLICATION_ERROR=3]="APPLICATION_ERROR"})(uy||(uy={}));class UJ extends x{constructor(){super("bridge.BridgeMessage",[{no:1,name:"type",kind:"enum",T:()=>["bridge.BridgeMessageType",ly]},{no:2,name:"action",kind:"message",oneof:"data",T:()=>$J},{no:3,name:"response",kind:"message",oneof:"data",T:()=>FJ},{no:4,name:"event",kind:"message",oneof:"data",T:()=>GJ}])}}new UJ;class jJ extends x{constructor(){super("bridge.BridgeAction",[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const $J=new jJ;class VJ extends x{constructor(){super("bridge.BridgeResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"response",kind:"scalar",T:9},{no:3,name:"error",kind:"message",T:()=>zJ}])}}const FJ=new VJ;class BJ extends x{constructor(){super("bridge.BridgeError",[{no:1,name:"type",kind:"enum",T:()=>["bridge.ErrorType",uy]},{no:2,name:"message",kind:"scalar",T:9}])}}const zJ=new BJ;class HJ extends x{constructor(){super("bridge.BridgeEvent",[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const GJ=new HJ;class WJ extends x{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3,L:0},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const t=this.create(),i=Date.now();return t.seconds=at.from(Math.floor(i/1e3)).toBigInt(),t.nanos=i%1e3*1e6,t}toDate(t){return new Date(at.from(t.seconds).toNumber()*1e3+Math.ceil(t.nanos/1e6))}fromDate(t){const i=this.create(),r=t.getTime();return i.seconds=at.from(Math.floor(r/1e3)).toBigInt(),i.nanos=r%1e3*1e6,i}internalJsonWrite(t,i){let r=at.from(t.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(t.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let n="Z";if(t.nanos>0){let s=(t.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?n="."+s.substring(0,3)+"Z":s.substring(6)==="000"?n="."+s.substring(0,6)+"Z":n="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",n)}internalJsonRead(t,i,r){if(typeof t!="string")throw new Error("Unable to parse Timestamp from JSON "+fb(t)+".");let n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=at.from(s/1e3).toBigInt(),r.nanos=0,n[7]&&(r.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),r}}new WJ;const qJ=3,JJ=30,KJ=8e3;class ZJ{constructor(t){v(this,"ipInfo"),v(this,"axios"),v(this,"requests"),v(this,"roomName"),v(this,"roomUUID"),v(this,"peerId"),v(this,"authToken"),v(this,"organizationId");const{timeout:i=KJ,retry:r=qJ,retryDelay:n=JJ,baseURL:s="https://api.cluster.dyte.in",authToken:a}=t||{};this.requests=$g.create({baseURL:s,responseType:"json",timeout:i,retry:r,retryDelay:n}),this.axios=$g,this.setAuthToken(a,{bearer:!0}),this.requests.interceptors.request.use(o=>(E.injectContext(this.requests.defaults.headers.common),o),async o=>{b.error("xhr::axios",{debuggingHint:"otelRequestInterceptor failed.",error:o})}),this.requests.interceptors.response.use(o=>(o.config.url!==E.logsEndpoint&&b.debug("xhr::axios",{networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,method:o.config.method}}),o),async o=>{var c;if(!o)return Promise.reject(new Error("Unknown error occurred"));o&&o.config&&((c=o.config)==null?void 0:c.url)!==E.logsEndpoint&&b.error("xhr::axios",{error:o,networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,retries:o.config.retry,method:o.config.method,isOnline:navigator.onLine?"online":"offline"}});const{config:d,message:l}=o;return d&&l&&d.retry!==void 0&&d.retry>0&&(l.includes("timeout")||l.includes("Network Error"))?(d.retry-=1,d.baseURL==="https://api.cluster.dyte.in"?d.baseURL="https://network2.dyte.io":d.baseURL==="https://network2.dyte.io"&&(d.baseURL="https://api.cluster.dyte.in"),this.requests(d)):Promise.reject(o)})}setAuthToken(t,i){const{bearer:r}=i||{};this.authToken=t,this.requests.defaults.headers.common.Authorization=r?`Bearer ${t}`:t}setHeader(t,i){this.requests.defaults.headers.common[t]=i}setRoomName(t){this.roomName=t}setRoomUUID(t){this.roomUUID=t}setPeerId(t){this.peerId=t}setOrganizationId(t){this.organizationId=t}}var QJ=Object.defineProperty,YJ=Object.getOwnPropertyDescriptor,K4=(e,t,i,r)=>{for(var n=r>1?void 0:r?YJ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&QJ(t,i,n),n};class gf extends ZJ{constructor(t){super(t),this.setHeader("x-dyte-web-core-version",Ld)}async getIPDetails({peerId:t}){var i;try{const r=(await this.requests.get("https://media-location.dyte.io")).data;if(((i=r.loc)==null?void 0:i.length)>5)return r;throw Error("Insufficient data")}catch{b.error("getIPDetails::failed")}try{const r=await Sb.getIPDetails({peerId:t});return b.info("gotIPDetails",{networkCall:{ip:r.ip,timezone:r.timezone}}),r}catch(r){b.warn("ApiClient.getRoomNodeLinkAndTitleV1 Failed to get ip details",{error:{name:r.name,message:r.message}});return}}async getICEServers(){const{success:t,iceServers:i}=(await this.requests.get("/iceservers")).data;if(t)return i}async getPlugins(t){var i,r,n,s,a,o,c;let{plugins:d}=(await this.requests.get("/v2/plugins/user")).data.data;const l=((r=(i=ee.getValue(re.V1_PLUGINS))==null?void 0:i.toString())==null?void 0:r.split(","))||[],u=d.reduce((g,m)=>(g[l.includes(m.id)?"v1":"v2"].push(m),g),{v1:[],v2:[]});return t==="socket-service"?d=u.v2:d=u.v1,(a=(s=(n=Ye.modules)==null?void 0:n.devTools)==null?void 0:s.plugins)!=null&&a.length&&((c=(o=Ye.modules)==null?void 0:o.devTools)==null||c.plugins.forEach(g=>{var m,f,w;const S={...yl,tags:[...yl.tags]};S.baseURL=`http://localhost:${g.port}`,S.name=g.name,S.picture=(m=g.picture)!=null?m:yl.picture,S.description=(f=g.description)!=null?f:yl.description,S.staggered=(w=g.staggered)!=null?w:yl.staggered,S.createdAt=new Date().toISOString(),S.updatedAt=new Date().toISOString(),S.id=g.id,S.organizationId=this.organizationId,d.push(S)})),d}async getPluginDetails(t){const{plugin:i}=(await this.requests.get(`/v2/plugins/view/${t}`)).data.data;return i}async getPluginConfig(t){return(await this.axios.get(`${t}/dyte-config.json`)).data}async authorizePlugin(t){const i={peerId:this.peerId};Ee.isV2AuthToken||(i.roomName=this.roomName);const{token:r}=(await this.requests.post(`/v2/plugins/authorize/${t}`,i)).data.data;return r}async getPresignedUrls(t){const{getLocation:i,putLocation:r}=(await this.requests.post("/v1/meetings/genPreSignedUploadUrl",{roomUUID:this.roomUUID,filename:t})).data.data;return{getLocation:i,putLocation:r}}async uploadFile(t,i){if(navigator.isReactNative&&"uri"in t)try{await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:{uri:t.uri,name:t.name}})}catch(r){b.error(`sendFileMessage::${r}`)}else await this.axios.put(i,t,{headers:{"Content-Type":t.type}})}}K4([E.trace("APIClient.getIPDetails")],gf.prototype,"getIPDetails",1);K4([E.trace("APIClient.getICEServers")],gf.prototype,"getICEServers",1);var XJ=Object.defineProperty,eK=Object.getOwnPropertyDescriptor,qd=(e,t,i,r)=>{for(var n=r>1?void 0:r?eK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&XJ(t,i,n),n};class rc extends gf{async startLivestreaming(){var t,i;return(i=(t=(await this.requests.post(`/v2/meetings/${Ee.meetingId}/livestreams`)).data)==null?void 0:t.data)==null?void 0:i.playback_url}async stopLivestreaming(){return this.requests.post(`/v2/meetings/${Ee.meetingId}/active-livestream/stop`)}async getActiveLivestream(){const{playbackUrl:t,status:i}=Ur((await this.requests.get(`/v2/meetings/${Ee.meetingId}/active-livestream`)).data.data);return{status:i,playbackUrl:t}}async getUserDetails(){const t=(await this.requests.get("v2/internals/participant-details")).data.data;return Ur(t)}getUserPreset(t){throw new Error("getUserPreset does not exist for v2")}async startRecording(t){return(await this.requests.post("/v2/recordings",{...$4(t),meeting_id:Ee.meetingId})).data.id}stopRecording(t){return this.requests.put(`v2/recordings/${t}`,{action:"stop"})}async getActiveRecording(){const{status:t,id:i}=(await this.requests.get(`v2/recordings/active-recording/${Ee.meetingId}`)).data.data;return{status:t,id:i}}async getRoomNodeData({peerId:t}){const i=await this.getIPDetails({peerId:t});this.ipInfo=i;const{roomNodeLink:r,title:n,useHiveMedia:s}=Ur((await this.requests.post("v2/internals/rooms",{ip_information:i})).data.data);return{roomNodeUrl:r,meetingTitle:n,useHiveMedia:s!=null?s:!1}}}qd([E.trace("APIClient.getUserDetails")],rc.prototype,"getUserDetails",1);qd([E.trace("APIClient.getUserPreset")],rc.prototype,"getUserPreset",1);qd([E.trace("APIClient.startRecording")],rc.prototype,"startRecording",1);qd([E.trace("APIClient.stopRecording")],rc.prototype,"stopRecording",1);qd([E.trace("APIClient.getActiveRecording")],rc.prototype,"getActiveRecording",1);qd([E.trace("APIClient.getRoomNodeData")],rc.prototype,"getRoomNodeData",1);var tK=Object.defineProperty,iK=Object.getOwnPropertyDescriptor,Jd=(e,t,i,r)=>{for(var n=r>1?void 0:r?iK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&tK(t,i,n),n};class nc extends gf{startLivestreaming(){throw new Error("Method not implemented.")}stopLivestreaming(){throw new Error("Method not implemented.")}getActiveLivestream(){throw new Error("Method not implemented.")}async getUserDetails(){const{user:t}=(await this.requests.get("/auth/basicUserDetails")).data;return t}async getUserPreset(t){const{preset:i}=(await this.requests.post("/v1/userpreset",{roomName:t,authToken:this.authToken,clientType:"CLIENT_APP",version:"0.5.0"})).data.data;return Ur(i)}async startRecording(t){const i=await this.requests.post(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recording`,t);if(i.status!==201)throw new Error("Recording failed to start");return i.data.data.recording.id}async stopRecording(t){if((await this.requests.put(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recordings/${t}`,{recordingAction:"stop"})).status!==201)throw new Error("Recording failed to stop")}async getActiveRecording(){return this.organizationId?(await this.requests.get(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/active-recording?limit=50`)).data.data.recording:{}}async getRoomNodeData({roomName:t,peerId:i}){const r=`
        query Session($roomName: String!, $password: String, $ipInformation: String) {
            session(roomName: $roomName, password: $password) {
              title,
              roomNodeLink(ipInformation: $ipInformation),
              useHiveMedia,
              roomName,
              password
            }
          }
        `,n=await this.getIPDetails({peerId:i});this.ipInfo=n;const{roomNodeLink:s,title:a,useHiveMedia:o}=(await this.requests.post("/graphql",{query:r,variables:{roomName:t,ipInformation:JSON.stringify(n)}})).data.data.session;return{roomNodeUrl:s,meetingTitle:a,useHiveMedia:o!=null?o:!1}}}Jd([E.trace("APIClientV1.getUserDetails")],nc.prototype,"getUserDetails",1);Jd([E.trace("APIClientV1.getUserPreset")],nc.prototype,"getUserPreset",1);Jd([E.trace("APIClientV1.startRecording")],nc.prototype,"startRecording",1);Jd([E.trace("APIClientV1.stopRecording")],nc.prototype,"stopRecording",1);Jd([E.trace("APIClientV1.getActiveRecording")],nc.prototype,"getActiveRecording",1);Jd([E.trace("APIClientV1.getRoomNodeData")],nc.prototype,"getRoomNodeData",1);let py;function rK(e){return py=Ee.isV2AuthToken?new rc(e):new nc(e),py}function hi(){return py}const nK=0,sK=1,aK=2,oK=3,cK={getPeerInfo:0,updatePeerInfo:1,getRoomPeersInfo:2,joinRoom:3,leaveRoom:4,getRoomInfo:5,updateRoomInfo:6,closeRoom:7,startedLivestream:8,stoppedLivestream:9,erroredLivestream:10,getStagePeers:11,getStageRequests:12,requestStageAccess:13,cancelStageRequest:14,grantStageAccess:15,denyStageAccess:16,roomPeerCount:17,joinStage:18,leaveStage:19,getConnectedRoomsDump:20,createConnectedRooms:21,deleteConnectedRooms:22,movePeers:23,transferPeer:24,movedPeer:25,connectedRoomsUpdated:26,connectedRoomsDeleted:27},dK={getMessages:0,sendMessageToRoom:1,sendMessageToPeers:2,editMessage:3,deleteMessage:4,getPaginatedMessages:5},lK={getPlugins:0,addPlugin:1,enablePluginForRoom:2,disablePluginForPeers:3,enablePluginForPeers:4,disablePluginForRoom:5,removePlugin:6,customPluginEventToRoom:7,customPluginEventToPeers:8,storeInsertKeys:9,storeGetKeys:10,storeDeleteKeys:11,storeDelete:12},uK={createPoll:0,getPolls:1,votePoll:2,updatePoll:3},pK={unknown:0,createWebRTCTransport:1,produce:2,consume:3,toggleProducer:4,toggleConsumer:5,closeProducer:6,closeConsumer:7,joinRoom:16,leaveRoom:17,selectedPeer:18,globalPinPeer:19,selfJoinComplete:20,peerJoinedBroadcast:25,peerLeaveBroadcast:26,peerProducerCreateBroadcast:27,peerProducerToggleBroadcast:28,peerProducerCloseBroadcast:29,globalPeerPinBroadcast:30,recordingStartedBroadcast:31,recordingStoppedBroadcast:32,peerDisplayNameEditBroadcast:33,selectedPeerDiff:40,renegotiateSessionDescription:50,kickPeer:90,kickAll:91,changeDisplayName:92,hostControlPeer:93,hostControlAllPeers:94};function mf(e,t){return Object.keys(t).reduce((i,r)=>(i[r]=(e<<16)+t[r],i),{})}function hK(e){return Object.keys(e).reduce((t,i)=>(t[i]=16777216|e[i],t),{})}const Ne=mf(nK,cK),Ai=mf(sK,dK),de=mf(aK,lK),ds=mf(oK,uK),Fe=hK(pK);var hy;class Z4{constructor(){v(this,"meetingTitle"),v(this,"roomName"),v(this,"roomUUID"),v(this,"isDisconnected"),v(this,"roomJoined"),A(this,hy,void 0),v(this,"peerId"),v(this,"authToken"),v(this,"maxPreferredStreams")}get sfuHandler(){return h(this,hy)}reconnect(){throw new R("Method not implemented.")}async joinRoom(t,i,r,n,s={}){throw new R("Method not implemented.")}async leaveRoom(){throw new R("Method not implemented.")}async handleSocketCallbacks(t){throw new R("Method not implemented.")}async handleSockets(t,i){throw new R("Method not implemented.")}async shareMic(t){throw new R("Method not implemented.")}async shareWebcam(t){throw new R("Method not implemented.")}async shareScreen(t){throw new R("Method not implemented.")}async unmuteSelf(){throw new R("Method not implemented.")}async muteSelf(){throw new R("Method not implemented.")}async pauseWebcam(){throw new R("Method not implemented.")}async disableScreenShare(){throw new R("Method not implemented.")}async acceptWaitingRequest(t){throw new R("Method not implemented.")}async rejectWaitingRequest(t){throw new R("Method not implemented.")}async muteAll(t){throw new R("Method not implemented.")}async muteAllVideo(){throw new R("Method not implemented.")}async disableAudio(t){throw new R("Method not implemented.")}async disableVideo(t){throw new R("Method not implemented.")}async kickAll(){throw new R("Method not implemented.")}async kick(t){throw new R("Method not implemented.")}async pinPeer(t){throw new R("Method not implemented.")}async getChatMessages(){throw new R("Method not implemented.")}async requestRemoteControl(t){throw new R("Method not implemented.")}async acceptRemoteControl(t){throw new R("Method not implemented.")}async terminateRemoteControl(t,i){throw new R("Method not implemented.")}async sendEventRemoteControl(t,i,r){throw new R("Method not implemented.")}async getPolls(){throw new R("Method not implemented.")}async newPoll(t){throw new R("Method not implemented.")}async votePoll(t){throw new R("Method not implemented.")}async getPage(t){throw new R("Method not implemented.")}getConsumers(){throw new R("Method not implemented.")}async sendMessage(t){throw new R("Method not implemented.")}async getRoomState(){throw new R("Method not implemented.")}async addRoomPlugin(t){throw new R("Method not implemented.")}async removeRoomPlugin(t){throw new R("Method not implemented.")}async unpinChatMessage(t){throw new R("Method not implemented.")}async pinChatMessage(t){throw new R("Method not implemented.")}async sendChatMessage(t){throw new R("Method not implemented.")}async broadcastMessage(t,i){throw new R("Method not implemented.")}async acceptAllRequestToJoinStage(t){throw new R("Method not implemented.")}async stopPresenting(){throw new R("Method not implemented.")}async startPresenting(){throw new R("Method not implemented.")}async requestToJoinStage(t){throw new R("Method not implemented.")}async rejectRequestToJoinStage(t){throw new R("Method not implemented.")}async withdrawRequestToJoinStage(){throw new R("Method not implemented.")}async removePeerFromStage(t,i){throw new R("Method not implemented.")}stopAllProducers(){throw new R("Method not implemented.")}}hy=new WeakMap;class gK extends Hi.EventEmitter{}class Oi{constructor(t){v(this,"_name"),this._name=t}static getLogger(t){return new Oi(t)}static format(t,...i){const r=t.split("%");let n=t;r.length&&([n]=r),i.reverse();for(let s=1;s<r.length&&i.length;s+=1){const a=i.pop();let o=r[s];switch(o.at(0)){case"s":o=o.replace("s",a);break;case"d":o=o.replace("d",a.toString());break;case"o":o=o.replace("o",JSON.stringify(a,null,2));break}n=`${n}${o}`}return i.length&&i.reverse().forEach(s=>{n=`${n} ${s instanceof Object?JSON.stringify(s,null,2):s}`}),n}info(t,...i){let r=Oi.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.info(r)}debug(t,...i){let r=Oi.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.info(r)}warn(t,...i){let r=Oi.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.info(r)}error(t,...i){let r=Oi.format(t,...i);this._name&&(r=`${this._name}::${r}`),b.error(r)}}const oE=Oi.getLogger("EnhancedEventEmitter");class Jo extends Hi.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(t,...i){const r=this.listenerCount(t);try{return this.emit(t,...i)}catch(n){return oE.error("safeEmit() | event listener threw an error [event:%s]:%o",t,n),Boolean(r)}}async safeEmitAsPromise(t,...i){const r={}.EVENT_PROMISE_TIMEOUT?parseInt({}.EVENT_PROMISE_TIMEOUT,10):1e4;return this.safeEmitAsPromiseWithTimeout(t,r,...i)}async safeEmitAsPromiseWithTimeout(t,i,...r){return new Promise((n,s)=>{setTimeout(s,i,"event request timeout");try{this.emit(t,...r,n,s)}catch(a){oE.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",t,a),s(a)}})}}class Bb extends Jo{constructor(){super(),v(this,"_mapMidTransceiver",new Map),this._mapMidTransceiver=new Map}get midTransceiverMap(){return this._mapMidTransceiver}}const Pe=Oi.getLogger("Chrome74");class zb extends Bb{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new zb}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(Pe.debug("close()"),this._pc)try{this._pc.close()}catch(t){Pe.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){Pe.debug("init()",n),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Pe.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Pe.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){Pe.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(){Pe.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return Pe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{Pe.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOption:r,screenShare:n}){var s;this._assertSendDirection(),Pe.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),Pe.debug("creating new transceiver");const a=this._pc.addTransceiver(t,{direction:"sendonly",streams:[n?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(t.kind);Pe.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(u=>u.mimeType.includes(r.name));if(r.parameters){Pe.info("codecOption.parameters:",r.parameters);const u=((s=l.sdpFmtpLine)==null?void 0:s.split(";"))||[];u.push(...r.parameters);const g=[...new Set(u).values()];l.sdpFmtpLine=g.join(";")}c.push(l)}Pe.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),r&&r.name==="opus"&&(d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),d.sdp+=`a=rtcp-fb:111 nack\r
`),{offerSdp:d,callback:async l=>(Pe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(t){this._assertSendDirection(),Pe.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Pe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Pe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?Pe.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Pe.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),Pe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),Pe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(t){throw this._assertRecvDirection(),Pe.debug("stopReceiving() [localId:%s]",t),Error("method not implemented")}async pauseReceiving(t){throw this._assertRecvDirection(),Pe.debug("pauseReceiving() [localId:%s]",t),Error("method not implemented")}async resumeReceiving(t){throw this._assertRecvDirection(),Pe.debug("resumeReceiving() [localId:%s]",t),Error("method not implemented")}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){Pe.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Pe.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Pe.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Pe.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Pe.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Pe.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{Pe.info("icecandidateerror",t)}),this._pc.addEventListener("datachannel",t=>{Pe.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{Pe.info("data channel open: ",t.channel.label)},i.onclose=()=>{Pe.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{Pe.error("data channel error: ",t.channel.label,r)},i.onmessage=r=>{Pe.info("data channel message: ",t.channel.label,r),this.safeEmit("datachannel",t.channel,String.fromCharCode.apply(null,new Uint8Array(r.data)))}})}}const _e=Oi.getLogger("Firefox60");class Hb extends Bb{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new Hb}get name(){return"Firefox60"}get pc(){return this._pc}close(){if(_e.debug("close()"),this._pc)try{this._pc.close()}catch(t){_e.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){_e.debug("init()"),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return _e.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{_e.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){throw _e.debug("updateIceServers()"),new Error("not supported")}async restartIce(){_e.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return _e.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{_e.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,screenShare:r}){this._assertSendDirection(),_e.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),_e.debug("creating new transceiver");const n=this._pc.addTransceiver(t,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream]});if(i){i.reverse();const a=n.sender.getParameters();a.encodings=i,await n.sender.setParameters(a)}const s=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(s),s.sdp=s.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:s,callback:async a=>(_e.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(n.mid,n),n.mid)}}async stopSending(t){this._assertSendDirection(),_e.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return _e.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{_e.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?_e.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):_e.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),_e.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters(),s=n.encodings.length-1-i;n.encodings.forEach((a,o)=>{o>=s?a.active=!0:a.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),_e.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(t){this._assertRecvDirection(),_e.debug("stopReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",_e.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return _e.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{_e.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async pauseReceiving(t){this._assertRecvDirection(),_e.debug("pauseReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return _e.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{_e.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async resumeReceiving(t){this._assertRecvDirection(),_e.debug("resumeReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return _e.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async n=>{_e.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){_e.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("datachannel",t=>{_e.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{_e.info("data channel open: ",t.channel.label)},i.onclose=()=>{_e.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{_e.error("data channel error: ",t.channel.label,r)},i.onmessage=async r=>{_e.debug("data channel message: ",t.channel.label,r);const n=await r.data.arrayBuffer();this.safeEmit("datachannel",t.channel,String.fromCharCode.apply(null,new Uint8Array(n)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:_e.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),_e.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":_e.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":_e.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:_e.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{_e.info("chrome74::icecandidateerror",t)})}}const me=Oi.getLogger("Safari12");class Gb extends Bb{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new Gb}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(me.debug("close()"),this._pc)try{this._pc.close()}catch(t){me.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){me.debug("init()"),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return me.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{me.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){me.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(){me.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return me.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{me.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOption:r,screenShare:n}){var s;this._assertSendDirection(),me.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),me.debug("creating new transceiver");const a=this._pc.addTransceiver(t,{direction:"sendonly",streams:[n?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(t.kind);me.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(u=>u.mimeType.includes(r.name));if(r.parameters){me.info("codecOption.parameters:",r.parameters);const u=((s=l.sdpFmtpLine)==null?void 0:s.split(";"))||[];u.push(...r.parameters);const g=[...new Set(u).values()];l.sdpFmtpLine=g.join(";")}c.push(l)}me.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:d,callback:async l=>(me.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(t){this._assertSendDirection(),me.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return me.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{me.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?me.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):me.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),me.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),me.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async receive(t){this._assertRecvDirection(),me.debug("recieve() | calling pc.setLocalDescription() [answer:%o]",t);const i=this._pc.getTransceivers().at(-1);return me.info("Transceiver is now receiving",i,this._pc.getTransceivers()),this.midTransceiverMap.set(i.mid,i),{track:i.receiver.track,localId:i.mid}}async stopReceiving(t){this._assertRecvDirection(),me.debug("stopReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",me.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return me.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{me.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async pauseReceiving(t){this._assertRecvDirection(),me.debug("pauseReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return me.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{me.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async resumeReceiving(t){this._assertRecvDirection(),me.debug("resumeReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return me.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async n=>{me.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){me.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:me.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),me.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":me.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":me.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:me.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{me.info("chrome74::icecandidateerror",t)}),this._pc.ondatachannel=t=>{me.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{me.info("data channel open: ",t.channel.label)},i.onclose=()=>{me.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{me.error("data channel error: ",t.channel.label,r)},i.onmessage=async r=>{me.debug("data channel message: ",t.channel.label,r);const n=String.fromCharCode.apply(null,new Uint8Array(r.data));this.safeEmit("datachannel",t.channel,n)}}}}function mK(e,t){return typeof e>"u"?t:JSON.parse(JSON.stringify(e))}const gy="transport closed";class fd extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,fd):this.stack=new Error(t).stack}}class Qi extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Qi):this.stack=new Error(t).stack}}const Rn=Oi.getLogger("Producer");class fK extends Jo{constructor({id:t,localId:i,track:r,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,handler:o,appData:c}){super(),v(this,"_id"),v(this,"_localId"),v(this,"_closed",!1),v(this,"_handler"),v(this,"_track"),v(this,"_kind"),v(this,"_paused"),v(this,"_maxSpatialLayer"),v(this,"_stopTracks"),v(this,"_disableTrackOnPause"),v(this,"_zeroRtpOnPause"),v(this,"_appData"),v(this,"observer"),this._id=t,this._localId=i,this._track=r,this._kind=r.kind,this._paused=s?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=n,this._disableTrackOnPause=s,this._zeroRtpOnPause=a,this._appData=c||{},this._onTrackEnded=this._onTrackEnded.bind(this),this._handler=o,this.observer=new Jo,this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get track(){return this._track}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}close(t){if(!this._closed){if(Rn.debug("close() with reason:",t),this._closed=!0,this._destroyTrack(),t===gy){this.observer.emit("close");return}this._handler.stopSending(this.localId).then(({offerSdp:i,callback:r})=>{this.safeEmit("close",i,r,t)}).finally(()=>{this.observer.emit("close")})}}async getStats(){if(this._closed)throw new Qi("closed");return this._handler.getSenderStats(this.localId)}pause(){Rn.debug(`producer(${this.id}):pause()`),this._closed&&Rn.error("pause() | Producer closed"),this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,null),this.observer.emit("pause")}resume(){if(Rn.debug(`producer(${this.id}):resume()`),this._closed){Rn.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,this._track),this.observer.emit("resume")}async replaceTrack({track:t}){if(Rn.debug("replaceTrack() [track:%o]",t),this._closed){if(t&&this._stopTracks)try{t.stop()}catch(i){Rn.error(i)}throw new Qi("closed")}else if(t&&t.readyState==="ended")throw new Qi("track ended");if(t===this._track){Rn.debug("replaceTrack() | same track, ignored");return}(!this._zeroRtpOnPause||!this._paused)&&await this._handler.replaceTrack(this.localId,t),this._destroyTrack(),this._track=t,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()}async setMaxSpatialLayer(t){if(this._closed)throw new Qi("closed");if(this._kind!=="video")throw new fd("not a video Producer");if(typeof t!="number")throw new TypeError("invalid spatialLayer");await this._handler.setMaxSpatialLayer(this.localId,t),this._maxSpatialLayer=t}async setRtpEncodingParameters(t){if(this._closed)throw new Qi("closed");if(typeof t!="object")throw new TypeError("invalid params");await this._handler.setRtpEncodingParameters(this.localId,t)}_onTrackEnded(){Rn.debug('track "ended" event'),this.observer.emit("trackended"),this.safeEmit("trackended",this.track.id)}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(t){Rn.error(t)}}}const Ka=Oi.getLogger("Consumer");class vK extends Jo{constructor({id:t,localId:i,producerId:r,producingPeerId:n,handler:s,track:a,appData:o,paused:c,reuseTrack:d}){super(),v(this,"_id"),v(this,"_localId"),v(this,"_producerId"),v(this,"_closed",!1),v(this,"_reuseTrack"),v(this,"_handler"),v(this,"_track"),v(this,"_paused"),v(this,"_peerId"),v(this,"_appData"),v(this,"observer"),this._id=t,this._localId=i,this._handler=s,this._appData=o,this._peerId=n,this._producerId=r,this._onTrackEnded=this._onTrackEnded.bind(this),this._track=a,this._paused=c!=null?c:!1,this._reuseTrack=d,this.observer=new Jo,this._handleTrack()}get id(){return this._id}get peerId(){return this._peerId}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get track(){return this._track}get paused(){return this._paused}get remotelyPaused(){return this.paused}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}close(t){this._closed||(Ka.debug("close() with reason:",t),this._closed=!0,this._reuseTrack||this._destroyTrack(),this.emit("close",t),this.observer.safeEmit("close",t))}async getStats(){if(this._closed)throw new Qi("closed");return this._handler.getReceiverStats(this.localId)}pause(){if(Ka.debug(`consumer(${this.id}):pause()`),this._closed){Ka.error("pause() | Consumer closed");return}this._paused=!0,this._track.enabled=!1,this.observer.safeEmit("pause")}resume(){if(Ka.debug(`consumer(${this.id}):resume()`),this._closed){Ka.error("resume() | Consumer closed");return}this._paused=!1,this._track.enabled=!0,this.observer.safeEmit("resume")}_onTrackEnded(){Ka.debug('track "ended" event'),this.safeEmit("trackended"),this.observer.safeEmit("trackended")}_handleTrack(){this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){try{this._track.removeEventListener("ended",this._onTrackEnded),this._track.stop()}catch(t){Ka.error(t)}}}const ri=Oi.getLogger("Transport");class yK extends Jo{constructor({id:t,direction:i,handlerFactory:r,iceServers:n,iceTransportPolicy:s,proprietaryConstraints:a,additionalSettings:o,appData:c}){super(),v(this,"_id"),v(this,"_serverId"),v(this,"_closed",!1),v(this,"_direction"),v(this,"_maxSctpMessageSize"),v(this,"_handler"),v(this,"_connectionState","new"),v(this,"_producers"),v(this,"_consumers"),v(this,"_datachannels"),v(this,"_connected",!1),v(this,"_transportConnectionPromise",null),v(this,"awaitQueue"),v(this,"observer"),v(this,"consumerTrackEvents"),v(this,"unknownTracksMap"),v(this,"consumerTrackPool"),v(this,"_appData"),v(this,"datachannelCache",new Map),ri.debug("constructor() [id: %s, direction: %s]",t,i),this._id=t,this._direction=i;const d=mK(o,{});delete d.iceServers,delete d.iceTransportPolicy,delete d.bundlePolicy,delete d.rtcpMuxPolicy,delete d.sdpSemantics,this._producers=new Map,this._consumers=new Map,this._datachannels=new Map,this.consumerTrackEvents=new Map,this.consumerTrackPool=new Map,this.unknownTracksMap=new Map,this.awaitQueue=new g3,this.observer=new Jo,this._handler=r(),this._handler.init({onTrackHandler:this._ontrack.bind(this),direction:i,iceServers:n,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:a}),this._appData=c||{},this._transportConnectionPromise=new Promise(l=>{this.observer.once("connected",()=>{l(!0)}),this.observer.once("disconnect",()=>{l(!1)}),this.observer.once("close",()=>{l(!1)})}),this._handler.on("@connectionstatechange",l=>{l!==this._connectionState&&(ri.debug("connection state changed to %s",l),this._connectionState=l,l==="connected"&&(this._connected=!0,this.observer.emit("connected")),l==="disconnected"&&(this._connected=!1,this.observer.emit("disconnect")),(l==="failed"||l==="closed")&&(this._connected=!1,this.observer.emit("close")),this._closed||this.safeEmit("connectionstatechange",l))}),this._handler.on("@icecandidate",({candidate:l})=>{this._closed||this.safeEmit("icecandidate",l)}),this._handler.on("datachannel",(l,u)=>{var g,m;this._datachannels.has(l.label)||this._datachannels.set(l.label,l);const f=JSON.parse(u);if(this.datachannelCache.has(f.id)||this.datachannelCache.set(f.id,[]),(g=this.datachannelCache.get(f.id))==null||g.push(f),((m=this.datachannelCache.get(f.id))==null?void 0:m.length)===f.count){const w=this.datachannelCache.get(f.id),S=w==null?void 0:w.reduce((y,_)=>y+_.chunk,"");this.datachannelCache.delete(f.id);try{const y=JSON.parse(S);this.safeEmit(`datachannel:${l.label}`,l,y)}catch(y){ri.error("error parsing message",y)}}})}get id(){return this._id}get serverId(){return this._serverId}get connected(){return this._connected}get isConnected(){return this._transportConnectionPromise}get datachannels(){return this._datachannels}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}setServerId(t){this._serverId=t}getDatachannel(t){return this._datachannels.get(t)}close(){this._closed||(ri.debug("close()"),this._connected=!1,this._closed=!0,this._handler.close(),[...this._producers.values()].forEach(t=>t.close(gy)),this._producers.clear(),[...this._consumers.values()].forEach(t=>t.close(gy)),this._consumers.clear(),this.consumerTrackPool.clear(),this.consumerTrackEvents.clear(),this.emit("close"),this.observer.emit("close"))}async getStats(){if(this._closed)throw new Qi("closed");return this._handler.getTransportStats()}async connect(){try{const{offerSdp:t,callback:i}=await this._handler.connect(),{answer:r}=await this.safeEmitAsPromise("connect",{offer:t});if(await i(r),!await this.isConnected)throw new Error("ice connection failed")}catch(t){throw ri.error("transport failed to connect:",t),t}}async restartIce(){if(ri.debug("restartIce()"),this._closed)throw new Qi("closed");return this._handler.restartIce()}async updateIceServers({iceServers:t}={}){if(ri.debug("updateIceServers()"),this._closed)throw new Qi("closed");this._handler.updateIceServers(t)}async produce({track:t,encodings:i,codecOptions:r,stopTracks:n=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(ri.debug(`produce() [track:${t.id}]`),t){if(this._direction!=="send")throw new fd("not a sending Transport");if(t.readyState==="ended")throw new Qi("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing track");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const{producerId:c,localId:d}=await this.awaitQueue.push(async()=>{const{offerSdp:u,callback:g}=await this._handler.send({track:t,encodings:i,codecOption:r,screenShare:o==null?void 0:o.screenShare}),{answer:m,producerId:f}=await this.safeEmitAsPromise("produce",{offer:u,kind:t.kind,paused:s?!t.enabled:!1,appData:o}),w=await g(m);return{producerId:f,localId:w}}),l=new fK({id:c,localId:d,track:t,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o,handler:this.handler});return this._producers.set(c,l),l.observer.on("close",()=>{this._producers.delete(l.id)}),this.emit("newproducer",l),this.observer.emit("newproducer",l),l}async consumePeer(t,i={}){if(ri.debug("consumePeer() producingPeerId:",t),this._closed)throw new Qi("closed");if(this._direction!=="recv")throw new fd("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing producingPeerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(i&&typeof i!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const r=[],{consumersMap:n}=await this.safeEmitAsPromise("consumePeer",{producingPeerId:t});return n.forEach((s,a)=>{const{consumerId:o,trackId:c,screenShare:d,paused:l,streamId:u,kind:g}=s;r.push(this._consumerCreationTask({consumerId:o,trackId:c,streamId:u,kind:g,producerId:a,producingPeerId:t,paused:l,screenShare:d,appData:i}))}),ri.info("promises",r),Promise.allSettled(r)}async consume({producerId:t,producingPeerId:i,appData:r={}}){if(ri.debug("consume()"),this._closed)throw new Qi("closed");if(this._direction!=="recv")throw new fd("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing producerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(r&&typeof r!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));try{const{consumerId:n,screenShare:s,trackId:a,paused:o,streamId:c,kind:d}=await this.safeEmitAsPromise("consume",{producerId:t,producingPeerId:i});return this._consumerCreationTask({consumerId:n,screenShare:s,trackId:a,streamId:c,kind:d,paused:o,producerId:t,producingPeerId:i,appData:r})}catch(n){throw ri.error("consume failed:",n),n}}async _consumerCreationTask({consumerId:t,producerId:i,producingPeerId:r,streamId:n,trackId:s,paused:a,screenShare:o,appData:c,kind:d}){const l=`${n}:${d}`,u={consumerId:t,producerId:i,producingPeerId:r,streamId:n,trackId:s,appData:c,kind:d,paused:a,screenShare:o,name:"consumer creation task error",message:"consumer creation failed"};return new Promise((g,m)=>{const f=setTimeout(()=>{this.consumerTrackEvents.delete(l),u.isTimedout=!0,m(u)},5e3),w=async(_,T)=>{try{if(_.readyState==="ended")clearTimeout(f),m(u);else{this.handler.midTransceiverMap.set(T.mid,T);const P=new vK({id:t,localId:T.mid,track:_,paused:a,producerId:i,producingPeerId:r,handler:this._handler,reuseTrack:!0,appData:{...c,screenShare:o}});this._consumers.set(t,P),P.once("close",()=>{this._consumers.delete(P.id),this.handler.midTransceiverMap.delete(T.mid)}),ri.info("consumer created for ",{producerId:i,trackId:s,producingPeerId:r}),this.observer.emit("newconsumer",P),clearTimeout(f),g(P)}}catch(P){ri.warn("error while creating consumer:",P),clearTimeout(f),m(u)}},S=this.consumerTrackPool.get(t);if((S==null?void 0:S.length)===2){w(S[0],S[1]);return}const y=this.unknownTracksMap.get(l);y?(this.unknownTracksMap.delete(l),w(y.track,y.transceiver)):this.consumerTrackEvents.set(l,w)})}_ontrack(t){const{track:i,transceiver:r,streams:n}=t;ri.info("track event received",{trackId:i.id,tId:r.receiver.track.id}),i.addEventListener("ended",()=>{ri.info("track ended",i.id),this.consumerTrackPool.delete(i.id)}),this.consumerTrackPool.set(i.id,[i,r]),i.onended=()=>{this.consumerTrackPool.delete(i.id)};const s=`${n[0].id}:${i.kind}`,a=this.consumerTrackEvents.get(s);a?(a(i,r),this.consumerTrackEvents.delete(s)):(ri.warn(`track event handler not found ${s}`),this.unknownTracksMap.set(s,t))}async setRemoteDescription(t){await this._handler.pc.setRemoteDescription(t)}async setLocalDescription(t){ri.debug(`${this.direction}() {transportId: ${this.serverId}} | calling pc.setLocalDescription() [offer:%o]`,t),await this._handler.pc.setLocalDescription(t)}async setRemoteOffer(t){await this.setRemoteDescription(t);const i=await this._handler.pc.createAnswer(),r=be(i.sdp);return r.media=r.media.map(n=>{if(n.type==="audio"){const s={...n};return s.rtcpFb||(s.rtcpFb=[]),s.rtcpFb.some(a=>a.type==="nack")||s.rtcpFb.push({payload:parseInt(s.payloads,10),type:"nack"}),s}return n}),i.sdp=fn(r),await this.setLocalDescription(i),i}async retryFailedConsumerCreationTasks(t){return Promise.allSettled(t.map(i=>(ri.warn("retrying failed consumer creation task",i),this._consumerCreationTask({...i}))))}}function _K(e){return"name"in e&&e.name==="consumer creation task error"}const Un=Oi.getLogger("Device");function bK(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){Un.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection");return}return Un.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative"}if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const e=navigator.userAgent,t=ab.getParser(e),i=t.getEngine();if(t.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||t.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(i.name&&i.name.toLowerCase()==="blink"){const r=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(r){const n=Number(r[1]);return n>=74?"Chrome74":n>=70?"Chrome70":n>=67?"Chrome67":"Chrome55"}return"Chrome74"}Un.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion());return}Un.warn("this._detectDevice() | unknown device")}class wK{constructor({handlerName:t,handlerFactory:i}={}){if(v(this,"_handlerFactory"),v(this,"_handlerName"),v(this,"_observer"),Un.debug("constructor()"),t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)Un.debug("constructor() | handler given: %s",t);else if(t=bK(),t)Un.debug("constructor() | detected handler: %s",t);else throw new Error("device not supported");switch(t){case"Chrome74":this._handlerFactory=zb.createFactory();break;case"Safari12":this._handlerFactory=Gb.createFactory();break;case"Firefox60":this._handlerFactory=Hb.createFactory();break;default:throw new TypeError(`unknown handlerName "${t}"`)}}const r=this._handlerFactory();this._handlerName=r.name,r.close(),this._observer=new Hi}get handlerName(){return this._handlerName}createSendTransport({iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s}){return Un.debug("createSendTransport()"),this._createTransport({direction:"send",iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s})}createRecvTransport({iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s}){return Un.debug("createRecvTransport()"),this._createTransport({direction:"recv",iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s})}_createTransport({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,appData:a}){const o=zm(),c=new yK({id:o,direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,appData:a,handlerFactory:this._handlerFactory});return Un.info("transport created",c),this._observer.emit("newtransport",c),c}}var Fi;class SK{constructor(t){A(this,Fi,void 0),I(this,Fi,t)}async joinRoom(t,i){const r={roomUuid:t,displayName:i,prejoined:!1};return(await h(this,Fi).sendMessagePromise(Fe.joinRoom,SH.toBinary(r))).payload}async connectTransport(t){const i=(await h(this,Fi).sendMessagePromise(Fe.createWebRTCTransport,aH.toBinary(t))).payload,{transportId:r,description:n}=pf.fromBinary(i),s={sdp:n==null?void 0:n.sdp,type:n.type};return{transportId:r,answer:s}}async produce(t){var i,r;const n=(await h(this,Fi).sendMessagePromise(Fe.produce,IH.toBinary(t))).payload,s=fG.fromBinary(n);return{answer:{sdp:(i=s==null?void 0:s.description)==null?void 0:i.sdp,type:(r=s==null?void 0:s.description)==null?void 0:r.type},producerId:s.producerId}}async consume(t){const i=(await h(this,Fi).sendMessagePromise(Fe.consume,xH.toBinary(t))).payload,{consumerIdsMap:{map:r}}=gG.fromBinary(i);return r}async closeProducer(t){const i=(await h(this,Fi).sendMessagePromise(Fe.closeProducer,jH.toBinary(t))).payload,{description:r}=EG.fromBinary(i);return r}async closeConsumer(t){return(await h(this,Fi).sendMessagePromise(Fe.closeConsumer,VH.toBinary(t))).payload}async hostControlForPeer(t,i){const r={audio:i==="audio",screeShare:!1,video:i==="video",participantId:t},n=(await h(this,Fi).sendMessagePromise(Fe.hostControlPeer,JH.toBinary(r))).payload;if(!n)return!1;const{status:s}=IG.fromBinary(n);return s==="success"}async hostControlForAll(t){const i={audio:t==="audio",screenShare:!1,video:t==="video"},r=(await h(this,Fi).sendMessagePromise(Fe.hostControlAllPeers,ZH.toBinary(i))).payload;if(!r)return!1;const{status:n}=MG.fromBinary(r);return n==="success"}async kickAll(){const t={},i=(await h(this,Fi).sendMessagePromise(Fe.kickAll,HH.toBinary(t))).payload;if(!i)return!1;const{status:r}=xG.fromBinary(i);return r==="success"}async kickPeer(t){const i=(await h(this,Fi).sendMessagePromise(Fe.kickPeer,BH.toBinary(t))).payload;if(!i)return!1;const{status:r}=PG.fromBinary(i);return r==="success"}async changeDisplayName(t){const i=(await h(this,Fi).sendMessagePromise(Fe.changeDisplayName,WH.toBinary(t))).payload;if(!i)return!1;const{status:r}=DG.fromBinary(i);return r==="success"}async notifySelfJoinComplete(){const t={},i=(await h(this,Fi).sendMessagePromise(Fe.selfJoinComplete,TH.toBinary(t))).payload;return dG.fromBinary(i)}}Fi=new WeakMap;class EK extends gK{constructor(t){super(),v(this,"_device"),v(this,"_sendTransport"),v(this,"_recvTransport"),v(this,"_consumers"),v(this,"_producers"),v(this,"_producerIdToConsumerIdMap"),v(this,"_logger"),v(this,"_socket"),v(this,"_socketHandler"),v(this,"transportConnectionStatus"),this._producers=new Map,this._consumers=new Map,this._producerIdToConsumerIdMap=new Map,this.transportConnectionStatus=new Map,this._device=new wK,this._logger=Oi.getLogger("HiveSFUHandler"),this._socket=t,this._socketHandler=new SK(t)}get socket(){return this._socket}get producers(){return this._producers}get consumers(){return this._consumers}get producerIdToConsumerIdMap(){return this._producerIdToConsumerIdMap}get hiveSocketHandler(){return this._socketHandler}async setupTransports(t){const i=await hi().getICEServers(),r=t.map(n=>{const s=this.transportConnectionStatus.get(n);if(s)return s;switch(n){case"send":{const a=this.createSendTransport({iceServers:i});return this.transportConnectionStatus.set(n,a),a}case"recv":{const a=this.createRecvTransport({iceServers:i});return this.transportConnectionStatus.set(n,a),a}default:return this._logger.warn(`what are you thinking when passing this ${n}?`),Promise.reject(Error("TYPE_OF_TRANSPORT_UNKNOWN"))}});await Promise.all(r).finally(()=>{t.forEach(n=>{this.transportConnectionStatus.delete(n)})})}async stopAllTransports(){var t,i;this._logger.info("closing all the transports"),(t=this._sendTransport)==null||t.close(),(i=this._recvTransport)==null||i.close(),this._sendTransport=void 0,this._recvTransport=void 0}async createSendTransport(t){if(this._sendTransport&&this._sendTransport.connected)return;this._logger.info("sendTransport::initializing_transport");const i=this._device.createSendTransport(t);this._logger.info("sendTransport::initialized_transport"),this.handleTransport(i,!1),this._logger.info("sendTransport::connecting_transport");try{await i.connect()}catch(r){this._logger.error("fail to connect send transport:",i.id,"[Error]:",r,"retrying once."),await i.connect().catch(n=>{this._logger.error("failed to connect send transport after retry:",i.id,"[Error]:",n)})}this._logger.info("sendTransport::connected_transport"),this._sendTransport=i,Z.onSafeInitialization(()=>{Z.configureSendTransport(i)}),Object.assign(window,{sendTransport:i})}async createRecvTransport(t){if(this._recvTransport&&this._recvTransport.connected)return;this._logger.info("recvTransport::initializing_transport");const i=this._device.createRecvTransport({...t,additionalSettings:{rtcAudioJitterBufferMaxPackets:25,rtcAudioJitterBufferFastAccelerate:!0,rtcAudioJitterBufferMinDelayMs:20}});Z.onSafeInitialization(()=>{Z.configureRecvTransport(i)}),this._logger.info("recvTransport::initialized_transport"),this.handleTransport(i,!0),this._logger.info("recvTransport::connecting_transport");try{await i.connect()}catch(r){this._logger.error("fail to connect recv transport:",i.id,"[Error]:",r,"retrying once."),await i.connect().catch(n=>{this._logger.error("failed to connect recv transport after retry:",i.id,"[Error]:",n)})}this._logger.info("recvTransport::connected_transport"),this._recvTransport=i,this.producerIdToConsumerIdMap.clear()}handleTransport(t,i){if(t.on("connect",async({offer:r},n,s)=>{try{const a={consuming:i,description:{sdp:r.sdp,type:r.type,target:i?pa.SUBSCRIBER:pa.PUBLISHER}},{transportId:o,answer:c}=await this._socketHandler.connectTransport(a);t.setServerId(o),n({answer:c})}catch(a){this._logger.error(`${i?"consumer":"producer"} transport connection error:`,a),s(a)}}),t.on("connectionstatechange",async r=>{switch(this._logger.info(`${i?"consumer":"producer"} transport connectionState:`,r),r){case"failed":case"disconnected":if(t.closed)return;this._logger.info(`${i?"consumer":"producer"} transport disconnected or failed, reconnecting...`),ee.hasFeature(re.ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED)?(C.emit(k.HIVE_TRANSPORT_STATE_CHANGED,{state:"reconnecting",transportDirection:i?"recv":"send"}),this.emit("reconnect_transport",t)):C.emit(k.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break;case"new":case"closed":break;default:C.emit(k.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break}}),t.on("icecandidate",async r=>{this._logger.debug("sending icecandidate:",r.toJSON())}),t.on("datachannel:events",async(r,n)=>{this._logger.debug("got data channel message on event:",n);try{switch(n.type){case"offer":{const s={sdp:n.payload.sdp,type:"offer"};let a;try{const o=await t.setRemoteOffer(s);a={type:"answer",payload:{type:o.type,sdp:o.sdp}}}catch(o){this._logger.error("datachannel:events::Error:",o),a={type:"error",payload:{error:o.message}}}this._logger.debug("datachannel answer:",a),r.send(JSON.stringify(a));break}case"consumer_toggle":{const{mute:s,trackId:a}=n.payload;this._logger.info("consumer toggled for",a,"muted:",s);const o=this.consumers.get(a);if(!o){this._logger.warn("consumer with id",a," not found");return}o.paused!==s&&(this._logger.debug("consumer state is not same",{consumerPaused:o.paused,mute:s}),s?(o.pause(),C.emit(k.CONSUMER_PAUSED,{id:o.id})):(o.resume(),C.emit(k.CONSUMER_RESUMED,{id:o.id})));break}default:this._logger.warn("unknown event received from hive node, event:",n.type);break}}catch{this._logger.error("Unable to handle the incoming datachannel message on",r.label)}}),t.on("negotiate",async({description:r},n,s)=>{try{const a={sdp:r==null?void 0:r.sdp,type:r==null?void 0:r.type},o=await this.negotiate(t,a);n({answer:o})}catch(a){this._logger.error("negotiate error:",a),s(a)}}),t.on("close",()=>{if(this._logger.info(`${i?"consumer":"producer"} transport closed`,t.id),i){this._recvTransport=void 0;return}this._sendTransport=void 0}),!i){t.on("produce",async({offer:r,kind:n,paused:s,appData:a},o,c)=>{var d;const l=be(r.sdp).media.filter(g=>n==="video"?g.type==="video":g.type==="audio").at(-1).msid,u={description:{sdp:r.sdp,type:r.type,target:pa.PUBLISHER},paused:s,kind:n,msid:l,screenShare:(d=a.screenShare)!=null?d:!1};try{const{answer:g,producerId:m}=await this._socketHandler.produce(u);o({answer:g,producerId:m})}catch(g){this._logger.error("create producer error:",g),c(g)}});return}t.on("datachannel:negotiation",async(r,n)=>{try{this._logger.info("datachannel message recieved:",r.label,n);const s={sdp:n,type:"offer"},a=await t.setRemoteOffer(s);this._logger.info("datachannel answer:",a),r.send(a.sdp)}catch(s){this._logger.error("datachannel:negotiation::Error:",s)}}),t.on("consumePeer",async({producingPeerId:r},n,s)=>{this._logger.info("consumePeer:",r);const a={producingPeerId:r};try{const o=await this._socketHandler.consume(a);this._logger.debug(`consumePeer response for ${r}:`,{consumerStateMap:o});const c=new Map;Object.entries(o).forEach(([d,l])=>{var u,g,m;c.set(d,{consumerId:l.consumerId,trackId:(u=l.producerTrack)==null?void 0:u.trackId,streamId:l.producerTrack.streamId,kind:l.producerState.kind===dn.VIDEO?"video":"audio",screenShare:(g=l.producerState)==null?void 0:g.screenShare,paused:(m=l.producerState)==null?void 0:m.pause})}),n({consumersMap:c})}catch(o){this._logger.error("consumePeer error:",o),s(o)}}),t.on("consume",async({producerId:r,producingPeerId:n},s,a)=>{var o,c,d,l;const u={producingPeerId:n,producerId:r};try{const g=(await this._socketHandler.consume(u))[r];this._logger.info("consumer create response:",{consumerState:g,paused:(o=g.producerState)==null?void 0:o.pause}),s({consumerId:g.consumerId,screenShare:(c=g.producerState)==null?void 0:c.screenShare,trackId:(d=g.producerTrack)==null?void 0:d.trackId,streamId:g.producerTrack.streamId,kind:g.producerState.kind===dn.VIDEO?"video":"audio",paused:(l=g.producerState)==null?void 0:l.pause})}catch(g){this._logger.error("error during consuming on server:",g),a(g)}})}async createProducer(t,i,r){if(this._sendTransport===void 0||this._sendTransport.closed)return;const n=await this._sendTransport.produce(i);n.on("close",async(s,a,o)=>{this._logger.info("producer id:",n.id,"closed with reason:",o);const c={producerId:n.id,description:{sdp:s.sdp,type:s.type,target:pa.PUBLISHER}};try{const d=await this._socketHandler.closeProducer(c);this._logger.info("response",d);const l={sdp:d==null?void 0:d.sdp,type:d==null?void 0:d.type};a(l)}catch(d){this._logger.error("producer close error:",d)}this._producers.delete(t),r(),t===ne.SCREENSHARE_VIDEO&&this._switchWebcamLayers(3)}),n.on("trackended",()=>{b.info("producer::trackended",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:n==null?void 0:n.appData}}),[ne.MIC,ne.WEBCAM].includes(t)||r()}),this._producers.set(t,n),this._producers.has(ne.SCREENSHARE_VIDEO)&&this._switchWebcamLayers(0)}async _switchWebcamLayers(t){const i=this._producers.get(ne.WEBCAM);if(i)try{this._logger.debug("switching layer of webcam producer to:",t),await i.setMaxSpatialLayer(t)}catch(r){this._logger.error("failed to switch spatial layer",r)}}_initConsumer(t){t&&(t.observer.on("close",async i=>{this._logger.debug("consumer closed",i),this._consumers.delete(t.id),C.emit(k.CONSUMER_CLOSED,{id:t.id})}),this._consumers.set(t.id,t),this.producerIdToConsumerIdMap.set(t.producerId,t.id),C.emit(k.NEW_CONSUMER,{id:t.id}))}async consumePeer(t){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)throw Error("Receiving transport not connected");try{const i=await this._recvTransport.consumePeer(t),r=[];i.forEach(n=>{n.status==="rejected"?r.push(n.reason):this._initConsumer(n.value)}),this._recvTransport.retryFailedConsumerCreationTasks(r).then(n=>{n.forEach(s=>{s.status==="rejected"?this._logger.error("consumer creation failed 2nd time, this should never happen second time.",s.reason):this._initConsumer(s.value)})})}catch(i){throw this._logger.error("got error in consumePeer",i),i}}async createConsumer(t){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)return;const{producerId:i,producingPeerId:r,appData:n}=t;if(this.getProducer(i)){this._logger.warn("why are you creating a consumer for local producer?");return}try{const s=await this._recvTransport.consume({producerId:i,producingPeerId:r,appData:n});this._initConsumer(s)}catch(s){_K(s)&&this._recvTransport.retryFailedConsumerCreationTasks([s]).then(([a])=>{a.status==="fulfilled"?this._initConsumer(a.value):this._logger.error("failed to complete consumer creation task again.","this should not happen",a.reason)})}Object.assign(window,{consumers:this._consumers})}async pauseProducer(t){const i=this._producers.get(t);if(!i){this._logger.warn("producer type:",t,"not found");return}i.pause(),this._logger.info(t,"producer id:",i.id,"paused")}async resumeProducer(t){const i=this._producers.get(t);if(!i){this._logger.warn("producer type:",t,"not found");return}i.resume(),this._logger.info(t,"producer id:",i.id,"resumed")}async replaceTrack(t,i){const r=this._producers.get(t);if(!r){this._logger.warn("producer type:",t,"not found");return}await r.replaceTrack({track:i}),this._logger.info("track replaced with id:",i.id,"on producer:",t)}async removeProducer(t,i){const r=this._producers.get(t);if(!r){this._logger.warn("producer type:",t,"not found");return}i&&r.track.stop(),r.close()}async pauseConsumer(t){if(!this._consumers.get(t)){this._logger.warn("consumer id:",t,"not found");return}this.toggleConsumerOverDC(t,!0)}async pauseConsumerOverSocket(t){try{const i={consumerId:t.id,pause:!0};await this.socket.sendMessagePromise(Fe.toggleConsumer,KS.toBinary(i)),t.pause(),C.emit(k.CONSUMER_PAUSED,{id:t.id}),this._logger.info("consumer:",t.id,"paused")}catch(i){this._logger.error("error on pausing consumer",i)}}async toggleConsumerOverDC(t,i){const r={type:"consumer_toggle",payload:{consumerId:t,mute:i}},n=this._recvTransport.getDatachannel("events");if(!n){this._logger.warn("events datachannel not found");return}n.send(JSON.stringify(r))}async resumeConsumer(t){const i=this._consumers.get(t);if(!i){this._logger.warn("consumer id:",t,"not found");return}if(!i.paused){this._logger.warn("consumer is not paused so not resuming",t);return}try{const r={consumerId:t,pause:!1};await this.socket.sendMessagePromise(Fe.toggleConsumer,KS.toBinary(r)),i.resume(),C.emit(k.CONSUMER_RESUMED,{id:i.id}),this._logger.info("consumer:",t,"resumed")}catch(r){this._logger.error("error on resuming consumer",r)}}async closeConsumer(t,i){return this.closeConsumers([t],i)}async closeConsumers(t,i=!1){this._logger.info("Closing consumers:",t,"with force:",i);let r=!0;const n=t.filter(o=>this._consumers.get(o)?!0:(this._logger.warn("consumer id:",o,"not found"),!1)),s={consumerIds:n},a=async()=>{var o;return(o=this._recvTransport)==null?void 0:o.awaitQueue.push(async()=>{await this._socketHandler.closeConsumer(s)}).catch(c=>{this._logger.warn("error on closing consumer:",c),r=i})};i?a():await a(),r&&n.forEach(o=>{const c=this.consumers.get(o);this.producerIdToConsumerIdMap.delete(c.producerId),c.close(i?"manually closed":void 0)})}async cleanupConsumers(t){const i=[];this._consumers.forEach(r=>{t?r.peerId===t&&i.push(r.id):i.push(r.id)}),this.closeConsumers(i,!0)}async stopAllProducers(){this._logger.info("stopping all available producers"),this._producers.forEach((t,i)=>{this._logger.debug("closing producer type",i),t.close()})}getProducer(t){return[...this.producers.values()].filter(i=>i.id===t).at(0)}async negotiate(t,i){this._logger.info("setting remote offer :",i,"on transport",t.serverId);const r=await t.setRemoteOffer(i),n={transportId:t.serverId,description:{sdp:r.sdp,type:r.type,target:pa.SUBSCRIBER}};return this._logger.info("sending renegotiate request",n),await this.socket.sendMessagePromise(Fe.renegotiateSessionDescription,dH.toBinary(n)),this._logger.info("renegotiation done",t.serverId),r}}var TK=Object.defineProperty,kK=Object.getOwnPropertyDescriptor,Ue=(e,t,i,r)=>{for(var n=r>1?void 0:r?kK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&TK(t,i,n),n},Bt,Ge,_l,Za,cE;const Q4=(cE=class extends Z4{constructor(e){super(),A(this,Bt,void 0),A(this,Ge,void 0),A(this,_l,void 0),A(this,Za,void 0),v(this,"legacyMode"),v(this,"roomNodeUrl"),v(this,"peerDisplayName"),v(this,"activatedProducingPeerIds"),v(this,"logger");const{roomName:t,peerId:i,authToken:r,legacyMode:n,socketClient:s,meetingTitle:a}=e;this.roomName=t,this.peerId=i,this.authToken=r,this.legacyMode=n,this.roomJoined=!1,this.meetingTitle=a,I(this,Za,!1),I(this,Bt,s),I(this,Ge,new EK(s)),this.maxPreferredStreams=6,this.activatedProducingPeerIds=new Set,this.logger=Oi.getLogger("HiveNodeClient()"),Z.legacySwitch(n),this.handleSocketEvents(),this.handleSFUEvents(),I(this,_l,()=>{this.logger.info("noop reconnection handler")})}static async init(e){const{legacyMode:t=!0,roomName:i,peerId:r,authToken:n,meetingTitle:s,socket:a}=e,o=new Q4({legacyMode:t,authToken:n,socketClient:a,peerId:r,roomName:i,meetingTitle:s});return a.onStateEvent("disconnected",c=>{var d;o.isDisconnected=!0,(d=h(o,Ge))==null||d.cleanupConsumers(),C.emit(k.ROOM_NODE_DISCONNECTED,c),o.roomJoined=!1,o.activatedProducingPeerIds=new Set,b.info("HIVE_NODE_DISCONNECTED")}),a.onStateEvent("reconnected",async()=>{var c,d;b.info("HIVE_NODE_RECONNECTED"),await((c=h(o,Ge))==null?void 0:c.cleanupConsumers()),h(d=o,_l).call(d)}),a.onStateEvent("connected",async c=>{C.emit(k.ROOM_NODE_CONNECTED,c),b.info("HIVE_NODE_CONNECTED")}),o}get sfuHandler(){return h(this,Ge)}set onSocketReconnection(e){I(this,_l,e)}async reconnectTransport(e){if(this.logger.info("Room joining state",h(this,Za)),!(!e||h(this,Za))){if(e.close(),e.direction==="send"){await this.sfuHandler.setupTransports(["send"]),this.logger.info("send transport reconected!"),C.emit(k.RESET_PRODUCER_STATE);return}this.sfuHandler.cleanupConsumers(),await this.sfuHandler.setupTransports(["recv"]),this.logger.info("recv transport reconnected!"),this.activatedProducingPeerIds=new Set,C.emit(k.REFRESH_GRID,!0)}}async setupTransports(){await h(this,Ge).setupTransports(["recv","send"])}async joinRoom(e,t,i,r,n={}){await this.sfuHandler.stopAllTransports(),this.peerDisplayName=e,I(this,Za,!0);try{return await this.sfuHandler.hiveSocketHandler.joinRoom(i,e),await this.setupTransports(),ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{var s;const a=await hi().getUserDetails(),o=Ee.isV2AuthToken?a.participant:a,c={userId:(s=o.id)!=null?s:o.participant.id,peerId:this.peerId,displayName:e,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Oe.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:im,sdkVersion:Ld,metaData:{},permissions:{}};Z.roomJoined(c),n!=null&&n.audio?Z.audioOn():Z.audioOff(),n!=null&&n.video?Z.videoOn():Z.videoOff()}),{roomJoined:await this.completeJoinRoom()}}catch(s){return this.logger.error("error on sending join room request",s),{roomJoined:!1}}}async completeJoinRoom(){try{const{maxPreferredStreams:e,participants:t,roomState:i,selectedPeers:r}=await this.sfuHandler.hiveSocketHandler.notifySelfJoinComplete();this.logger.debug("peerJoinCompleteResponse",{participants:t,roomState:i,selectedPeers:r}),this.roomUUID=i.roomUuid,this.maxPreferredStreams=e;const n=t.map(c=>{const d=c.producerStates,l={id:c.peerId,isHost:!1,displayName:c.displayName,flags:{},userId:c.userId,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};return d.forEach(u=>{u.kind===dn.AUDIO?l.audioMuted=u.pause:l.videoEnabled=!u.pause,l.producers.push({producerId:u.producerId,kind:u.kind===dn.AUDIO?"audio":"video",pause:u.pause,screenShare:u.screenShare})}),l}),{audioPeers:s,compulsoryPeers:a}=r!=null?r:{},o=n.filter(c=>c.id!==this.peerId);return I(this,Za,!1),this.roomJoined=!0,b.info("HiveNodeClient::joinRoom::pre_emitasync_room_joined"),await C.emitAsync(k.ROOM_JOINED,{peers:o}),i.isRecording&&C.emit(k.HIVE_RECORDING_STARTED,i.recorderParticipantId),b.info("HiveNodeClient::joinRoom::post_emitasync_room_joined"),C.emit(k.SELF_ROOM_JOINED),C.emit(k.SELECTED_PEERS,{peerIds:s!=null?s:[],compulsoryPeers:a}),C.emit(k.REFRESH_GRID),!0}catch(e){return this.logger.error("error on completing join room:",e),!1}}async leaveRoom(){await h(this,Ge).stopAllTransports();const e={closeRoom:!1};h(this,Bt).sendMessagePromise(Fe.leaveRoom,CH.toBinary(e)).then(t=>{var i;(i=uG.fromBinary(t.payload))!=null&&i.closed||this.logger.warn("weird state on peer closed and should not happen")}).catch(t=>{this.logger.error("error on sending leave room request",t)}),Z.callEnded(),E.destruct()}getConsumers(){return h(this,Ge).consumers}async activatePeers(e){const t=e.map(({peerId:i,producers:r,force:n})=>{if(r.length===0)return Promise.resolve();if(n)return this.consumePeer(i,n);const s=[];return r.every(a=>{const o=this.sfuHandler.producerIdToConsumerIdMap.get(a.producerId);if(!o)return!1;const c=this.sfuHandler.consumers.get(o);return c&&!a.pause&&c.paused&&s.push(o),!0})?s.length>0?this.resumeConsumers(s):Promise.resolve():this.consumePeer(i)});await Promise.all(t)}async deactivatePeers(e){if(this.logger.info("deactivating producers",e),e.producers.some(t=>t.screenShare&&t.kind==="video")){this.logger.debug("peer is screensharing can't deactivate");return}e.producers.forEach(({producerId:t,kind:i})=>{if(i==="audio"){this.logger.debug("we don't want to deactive audio consumers");return}const r=this.sfuHandler.producerIdToConsumerIdMap.get(t);if(!r){this.logger.warn("consumer not found in deactivate producers:",t);return}this.sfuHandler.closeConsumer(r)}),this.activatedProducingPeerIds.delete(e.peerId)}async createConsumer({producerId:e,producingPeerId:t,screenShare:i}){return this.sfuHandler.createConsumer({producerId:e,producingPeerId:t,appData:{screenShare:i}})}async pauseConsumers(e){e.forEach(t=>{this.sfuHandler.pauseConsumer(t)})}async resumeConsumers(e){e.forEach(t=>{this.sfuHandler.resumeConsumer(t)})}async closeConsumers(e){const t=[...this.getConsumers().values()].filter(i=>e.includes(i.peerId)).map(i=>i.id);return e.forEach(i=>{this.activatedProducingPeerIds.delete(i)}),this.sfuHandler.closeConsumers(t)}async consumePeer(e,t){if(this.logger.info("current activated Peer ids",[...this.activatedProducingPeerIds.values()],"forced?:",t),!this.activatedProducingPeerIds.has(e)||t)try{await h(this,Ge).consumePeer(e),this.activatedProducingPeerIds.add(e)}catch(i){this.logger.error("consumePeer failed in HiveNodeClient.ts",i)}else this.logger.info("not creating consumer for this peerId",e)}async shareWebcam(e){if(e===void 0)return;if(h(this,Ge).producers.has(ne.WEBCAM)){const r=h(this,Ge).producers.get(ne.WEBCAM);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeWebcam();return}await h(this,Ge).removeProducer(r.id)}const t={track:e,codecOptions:{name:"VP8"},appData:{screenShare:!1},stopTracks:!1};if(ee.hasFeature(re.ENABLE_HIVE_SIMULCAST)){let r=e.getConstraints().width;r in HS||(r=320),t.encodings=HS[r]}const i=()=>{this.disableWebcam()};await h(this,Ge).createProducer(ne.WEBCAM,t,i)}async shareScreen(e){const{video:t,audio:i}=e;if(t===void 0)return;const r={track:t,codecOptions:{name:"VP8"},appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},stopTracks:!1};let n=()=>{this.disableScreenShare()};if(Z.screenShareRequested(),await h(this,Ge).createProducer(ne.SCREENSHARE_VIDEO,r,n),i){const s={track:i,codecOptions:{name:"opus"},appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},stopTracks:!1};n=()=>{},await h(this,Ge).createProducer(ne.SCREENSHARE_AUDIO,s,n)}}async shareMic(e){if(e===void 0)return;if(h(this,Ge).producers.has(ne.MIC)){const r=h(this,Ge).producers.get(ne.MIC);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeMic();return}await h(this,Ge).removeProducer(ne.MIC,!1)}const t={track:e,encodings:[{priority:"high"}],codecOptions:{name:"opus"},stopTracks:!1},i=()=>{this.disableMic()};await h(this,Ge).createProducer(ne.MIC,t,i)}pauseMic(){const e=h(this,Ge).producers.get(ne.MIC);if(!e){b.error("pauseMic::could_not_find_mic_producer");return}if(e.paused){b.info("pauseMic::mic_producer_already_paused");return}e.pause();const t={producerId:e.id,pause:!0};h(this,Bt).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async pauseWebcam(){const e=h(this,Ge).producers.get(ne.WEBCAM);if(!e){b.error("pauseWebcam::could_not_find_webcam_producer");return}e.pause();const t={producerId:e.id,pause:!0};h(this,Bt).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async resumeMic(){const e=h(this,Ge).producers.get(ne.MIC);if(!e){b.error("resumeMic::could_not_find_mic_producer");return}if(!e.pause){b.info("resumeMic::mic_producer_already_resumed");return}e.resume();const t={producerId:e.id,pause:!1};h(this,Bt).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async resumeWebcam(){const e=h(this,Ge).producers.get(ne.WEBCAM);if(!e){b.error("resumeWebcam::could_not_find_webcam_producer");return}e.resume();const t={producerId:e.id,pause:!1};h(this,Bt).sendMessage(Fe.toggleProducer,nh.toBinary(t))}async disableWebcam(){await h(this,Ge).removeProducer(ne.WEBCAM)}async disableMic(){await h(this,Ge).removeProducer(ne.MIC)}async disableScreenShare(){b.info("screen_sharing_stopped"),await h(this,Ge).removeProducer(ne.SCREENSHARE_VIDEO),await h(this,Ge).removeProducer(ne.SCREENSHARE_AUDIO)}async muteSelf(){this.pauseMic()}async unmuteSelf(){await this.resumeMic()}async resetVideoProducers(e,t){e&&(await h(this,Ge).removeProducer(ne.WEBCAM,!1),this.shareWebcam(e)),t&&(await h(this,Ge).removeProducer(ne.SCREENSHARE_VIDEO,!1),this.shareScreen({video:t}))}async getPolls(){return{payload:{polls:{}}}}async changeDisplayName(e,t){const i={displayName:e,participantId:t!=null?t:this.peerId};if(!await this.sfuHandler.hiveSocketHandler.changeDisplayName(i))throw new Error("failed to change display name!")}async kick(e){const t={participantId:e};if(!await this.sfuHandler.hiveSocketHandler.kickPeer(t))throw new Error("failed to kickout the participant!")}async kickAll(){if(!await this.sfuHandler.hiveSocketHandler.kickAll())throw new Error("failed to kickout all participant!")}async muteAll(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("audio"))throw new Error("failed to mute all participant")}async muteAllVideo(){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("video"))throw new Error("failed to mute all video participant")}async mutePeer(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(e,"audio"))throw new Error("failed to mute given participant")}async mutePeerVideo(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(e,"video"))throw new Error("failed to mute video of given participant")}async pinPeer(e){const t={participantId:e!=null?e:""};try{await h(this,Bt).sendMessagePromise(Fe.globalPinPeer,LH.toBinary(t))}catch(i){this.logger.error(`Error in pinning peer: ${i}`)}}async handleSocketEvents(){h(this,Bt).on(Fe.peerJoinedBroadcast,({id:e,payload:t})=>{if(this.roomJoined){this.logger.debug("got peer joined with id",e);try{const{participant:{peerId:i,displayName:r,producerStates:n,userId:s}}=UG.fromBinary(t);if(i===this.peerId)return;this.logger.info("peer-joined",{peerId:i,displayName:r,producerStates:n});const a={id:i,isHost:!1,displayName:r,flags:{},userId:s,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};n.forEach(o=>{o.kind===dn.AUDIO?a.audioMuted=o.pause:a.videoEnabled=!o.pause,a.producers.push({producerId:o.producerId,kind:o.kind===dn.AUDIO?"audio":"video",pause:o.pause,screenShare:o.screenShare})}),C.emit(k.PEER_JOINED,a),C.emit(k.REFRESH_GRID)}catch(i){this.logger.error("error in peer-joined-broadcast",i)}}}),h(this,Bt).on(Fe.peerProducerCreateBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:i}=$G.fromBinary(e);if(t===this.peerId)return;this.logger.info("producer created broadcast:",t,"producer state",i),C.emit(k.NEW_PRODUCER,{peerId:t,producer:{producerId:i.producerId,kind:i.kind===dn.AUDIO?"audio":"video",pause:i.pause,screenShare:i.screenShare}})}catch(t){this.logger.error("error in peer-producer-create-broadcast",t)}}),h(this,Bt).on(Fe.peerProducerToggleBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:{kind:i,pause:r,producerId:n}}=FG.fromBinary(e),s=i===dn.AUDIO?"audio":"video";if(this.logger.info("producer toggle broadcast:",t,"producerId",n,"kind",s,"paused",r),t===this.peerId&&r){C.emit(s==="audio"?k.MUTE_ALL:k.MUTE_ALL_VIDEO);return}C.emit(k.PRODUCER_TOGGLE,{peerId:t,producerId:n,paused:r,kind:s}),[...this.getConsumers().values()].filter(a=>a.producerId===n).forEach(a=>{a.paused!==r&&(this.logger.debug("consumer state mismatched for",a.id,". updating consumer pause state",a.paused,"to",r),r?(a.pause(),C.emit(k.CONSUMER_PAUSED,{id:a.id})):(a.resume(),C.emit(k.CONSUMER_RESUMED,{id:a.id})))})}catch(t){this.logger.error("error in producer toggle broadcast handler",t)}}),h(this,Bt).on(Fe.selectedPeer,({payload:e})=>{if(this.roomJoined)try{const{audioPeers:t,compulsoryPeers:i}=G4.fromBinary(e);this.logger.info("selected peers:",t,i),C.emit(k.SELECTED_PEERS,{peerIds:i.concat(t)})}catch(t){this.logger.error("error in selected-peer",t)}}),h(this,Bt).on(Fe.selectedPeerDiff,({payload:e})=>{if(this.roomJoined)try{const{entries:t}=aG.fromBinary(e);this.logger.debug("selected peers diff:",t);const i=t.map(r=>({peerId:r.peerId,priority:r.priority}));C.emit(k.SELECTED_PEERS_DIFF,{entries:i})}catch(t){this.logger.error("error in selected-peer-diff",t)}}),h(this,Bt).on(Fe.peerLeaveBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t}=GG.fromBinary(e);if(t===this.peerId){this.logger.warn("peer got kicked out of the room"),C.emit(k.KICKED);return}this.logger.info("peer left broadcast:",t),this.sfuHandler.cleanupConsumers(t),C.emit(k.PEER_CLOSED,{id:t})}catch(t){this.logger.error("error in peer left broadcast",t)}}),h(this,Bt).on(Fe.peerProducerCloseBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:{producerId:i}}=zG.fromBinary(e);if(t===this.peerId)return;this.logger.info("producer closed broadcast:",t),C.emit(k.PRODUCER_CLOSED,{peerId:t,producerId:i});const r=this.sfuHandler.producerIdToConsumerIdMap.get(i);if(!r){this.logger.warn("no consumer found for producer",i);return}this.logger.info("closing consumer",r,"producer id ",i),this.sfuHandler.closeConsumer(r).then(()=>{this.logger.info("closed consumer",r),this.sfuHandler.producerIdToConsumerIdMap.delete(i),C.emit(k.CONSUMER_CLOSED,{id:r})}).catch(n=>{this.logger.error("error closing consumer",n)})}catch(t){this.logger.error("error on producer close broadcast",t)}}),h(this,Bt).on(Fe.globalPeerPinBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=qG.fromBinary(e);this.logger.info("pinning peerId: ",i),t=i.participantId}C.emit(k.PEER_PINNED,{peerId:t})}catch(t){this.logger.error("error on global peer pin broadcast",t)}}),h(this,Bt).on(Fe.recordingStartedBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=KG.fromBinary(e);this.logger.info("recording started. peerId: ",i),t=i.participantId}C.emit(k.HIVE_RECORDING_STARTED,t)}catch(t){this.logger.error("error on recording started broadcast",t)}}),h(this,Bt).on(Fe.recordingStoppedBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=QG.fromBinary(e);this.logger.info("recording stopped. peerId: ",i),t=i.participantId}C.emit(k.HIVE_RECORDING_STOPPED,t)}catch(t){this.logger.error("error on recording started broadcast",t)}}),h(this,Bt).on(Fe.peerDisplayNameEditBroadcast,({payload:e})=>{if(this.roomJoined)try{const t=XG.fromBinary(e);this.logger.debug("peer display name changed to:",t.displayName),C.emit(k.PEER_DISPLAY_NAME_CHANGED,t.participantId)}catch(t){this.logger.error("failed to handle peerDisplayNameEditBroadcast:",t)}})}handleSFUEvents(){h(this,Ge).on("reconnect_transport",async e=>{try{await this.reconnectTransport(e),this.logger.info("transport reconnected [id:%s]",e.id)}catch(t){this.logger.error("error on reconnection transports",t)}})}},Bt=new WeakMap,Ge=new WeakMap,_l=new WeakMap,Za=new WeakMap,cE);let ve=Q4;Ue([E.trace("HiveNodeClient.reconnect")],ve.prototype,"reconnectTransport",1);Ue([E.trace("HiveNodeClient.setupTransport")],ve.prototype,"setupTransports",1);Ue([E.trace("HiveNodeClient.joinRoom")],ve.prototype,"joinRoom",1);Ue([E.trace("HiveNodeClient.completeJoinRoom")],ve.prototype,"completeJoinRoom",1);Ue([E.trace("HiveNodeClient.leaveRoom")],ve.prototype,"leaveRoom",1);Ue([E.trace("HiveNodeClient.activatePeers")],ve.prototype,"activatePeers",1);Ue([E.trace("HiveNodeClient.deactivatePeers")],ve.prototype,"deactivatePeers",1);Ue([E.trace("HiveNodeClient.createConsumer")],ve.prototype,"createConsumer",1);Ue([E.trace("HiveNodeClient.pauseConsumers")],ve.prototype,"pauseConsumers",1);Ue([E.trace("HiveNodeClient.resumeConsumers")],ve.prototype,"resumeConsumers",1);Ue([E.trace("HiveNodeClient.closeConsumers")],ve.prototype,"closeConsumers",1);Ue([E.trace("HiveNodeClient.consumePeer")],ve.prototype,"consumePeer",1);Ue([E.trace("HiveNodeClient.shareWebcam")],ve.prototype,"shareWebcam",1);Ue([E.trace("HiveNodeClient.shareScreen")],ve.prototype,"shareScreen",1);Ue([E.trace("HiveNodeClient.shareMic")],ve.prototype,"shareMic",1);Ue([E.trace("HiveNodeClient.pauseMic")],ve.prototype,"pauseMic",1);Ue([E.trace("HiveNodeClient.pauseWebcam")],ve.prototype,"pauseWebcam",1);Ue([E.trace("HiveNodeClient.resumeMic")],ve.prototype,"resumeMic",1);Ue([E.trace("HiveNodeClient.resumeWebcam")],ve.prototype,"resumeWebcam",1);Ue([E.trace("HiveNodeClient.disableWebcam")],ve.prototype,"disableWebcam",1);Ue([E.trace("HiveClient.disableMic")],ve.prototype,"disableMic",1);Ue([E.trace("HiveClient.disableScreenShare")],ve.prototype,"disableScreenShare",1);Ue([E.trace("HiveNodeClient.muteSelf")],ve.prototype,"muteSelf",1);Ue([E.trace("HiveNodeClient.unmuteSelf")],ve.prototype,"unmuteSelf",1);Ue([E.trace("HiveNodeClient.resetVideoProducers")],ve.prototype,"resetVideoProducers",1);Ue([E.trace("HiveNodeClient.getPolls")],ve.prototype,"getPolls",1);Ue([E.trace("HiveNodeClient.changeDisplayName")],ve.prototype,"changeDisplayName",1);Ue([E.trace("HiveNodeClient.kickPeer")],ve.prototype,"kick",1);Ue([E.trace("HiveNodeClient.kickAllPeers")],ve.prototype,"kickAll",1);Ue([E.trace("HiveNodeClient.muteAll")],ve.prototype,"muteAll",1);Ue([E.trace("HiveNodeClient.muteAllVideo")],ve.prototype,"muteAllVideo",1);Ue([E.trace("HiveNodeClient.mute")],ve.prototype,"mutePeer",1);Ue([E.trace("HiveNodeClient.muteVideo")],ve.prototype,"mutePeerVideo",1);Ue([E.trace("HiveNodeClient.pinPeer")],ve.prototype,"pinPeer",1);Ue([E.trace("HiveNodeClient.init")],ve,"init",1);var bs=(e=>(e.SOCKET_CONNECTED="SOCKET_CONNECTED",e.SOCKET_DISCONNECTED="SOCKET_DISCONNECTED",e.SOCKET_CONNECTION_ERROR="SOCKET_CONNECTION_ERROR",e.SOCKET_MESSAGE="SOCKET_MESSAGE",e))(bs||{}),Gl=(e=>(e[e.NOT_STARTED=0]="NOT_STARTED",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.ERRORED=3]="ERRORED",e))(Gl||{}),CK=Object.defineProperty,PK=Object.getOwnPropertyDescriptor,ff=(e,t,i,r)=>{for(var n=r>1?void 0:r?PK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&CK(t,i,n),n};const RK="event://server-simple-message",xK="event://send-message";class wp extends Hi{constructor(t){super(),v(this,"socket"),v(this,"socketState"),v(this,"callbackHandler",null),this.socketState=Gl.NOT_STARTED,t.callbackHandler&&(this.callbackHandler=t.callbackHandler)}connect(t){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=Hh(t,{closeOnBeforeunload:!1}),this.setupSocket()}disconnect(){this.socket.disconnect()}reconnect(){this.socket.connect()}setupSocket(){this.socket.on("disconnect",t=>{this.socketState=Gl.DISCONNECTED,b.warn("SocketClient::socket_disconnected",{error:{reason:t}}),this.emit(bs.SOCKET_DISCONNECTED,{reason:t})}),this.socket.on("connect_error",t=>{this.socketState=Gl.ERRORED,ee.hasFeature(re.SOCKET_POLLING)&&(this.socket.io.opts.transports=["polling","websocket"]),b.error("SocketClient::socket_connection_errored",{error:t}),this.emit(bs.SOCKET_CONNECTION_ERROR,{err:t})}),this.socket.on("connect",()=>{this.socketState=Gl.CONNECTED,b.info("SocketClient::socket_connected"),this.emit(bs.SOCKET_CONNECTED)}),this.socket.on(RK,async(t,i)=>{const r=JSON.parse(t);if((!E.logExclusionList.includes(r==null?void 0:r.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&b.info(`SocketClient::SIMPLE_SERVER_MESSAGE_EVENT::${r==null?void 0:r.type}`),i){let n="OK";this.callbackHandler&&(n=await this.callbackHandler(r)),i(n)}else this.emit(bs.SOCKET_MESSAGE,r);Object.values(k).find(n=>n===r.type)&&C.emit(r.type,r.payload)})}async sendMessage(t){return(!E.logExclusionList.includes(t==null?void 0:t.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&b.info(`SocketClient::sendMessage::${t==null?void 0:t.type}`),Object.assign(t,{metadata:t.metadata||{}}),E.injectContext(t.metadata),new Promise(i=>{this.socket.emit(xK,JSON.stringify(t),r=>{if(!r){i(void 0);return}const n=JSON.parse(r);i(n)})})}}ff([E.trace("SocketClient.connect")],wp.prototype,"connect",1);ff([E.trace("SocketClient.disconnect")],wp.prototype,"disconnect",1);ff([E.trace("SocketClient.reconnect")],wp.prototype,"reconnect",1);ff([E.trace("SocketClient.setupSocket")],wp.prototype,"setupSocket",1);var my,Y4,fy,X4,sh,ov;const vy=class{constructor(e=1e3){A(this,my),A(this,fy),v(this,"sendTransport"),v(this,"recvTransport"),v(this,"collectStpStats"),v(this,"collectRtpStats"),v(this,"pingInterval"),this.pingInterval=e}initSendTransport(e){this.sendTransport=e,C.emit(k.SEND_TRANSPORT_CREATED)}initRecvTransport(e){this.recvTransport=e,C.emit(k.RECV_TRANSPORT_CREATED)}collectSendTransportStats(){return!this.sendTransport||this.collectStpStats?!1:(this.collectStpStats=setInterval(Ut(this,my,Y4).bind(this),this.pingInterval),!0)}collectRecvTransportStats(){return!this.recvTransport||this.collectRtpStats?!1:(this.collectRtpStats=setInterval(Ut(this,fy,X4).bind(this),this.pingInterval),!0)}stopStatsCollection(e){return e==="send"?(clearInterval(this.collectStpStats),this.collectStpStats=void 0,!0):e==="receive"?(clearInterval(this.collectRtpStats),this.collectRtpStats=void 0,!0):!1}cleanup(e){this.stopStatsCollection(e),e==="send"?(this.sendTransport=void 0,this.collectStpStats=void 0,C.emit(k.SEND_TRANSPORT_CLOSED)):(this.recvTransport=void 0,this.collectRtpStats=void 0,C.emit(k.RECV_TRANSPORT_CLOSED))}};let e6=vy;my=new WeakSet,Y4=function(){this.sendTransport||this.stopStatsCollection("send"),this.sendTransport.getStats().then(e=>{var t;return Ut(t=vy,sh,ov).call(t,e,"send")})},fy=new WeakSet,X4=function(){this.recvTransport||this.stopStatsCollection("receive"),this.recvTransport.getStats().then(e=>{var t;return Ut(t=vy,sh,ov).call(t,e,"receive")})},sh=new WeakSet,ov=function(e,t){e.forEach(i=>{i.type==="candidate-pair"&&C.emit(k.CANDIDATE_PEER_UPDATE,{...i,transport:t}),i.type==="inbound-rtp"&&C.emit(k.INBOUND_RTP_UPDATE,{...i,transport:t}),i.type==="outbound-rtp"&&C.emit(k.OUTBOUND_RTP_UPDATE,{...i,transport:t})})},A(e6,sh);const ya=new e6;var AK=Object.defineProperty,IK=Object.getOwnPropertyDescriptor,or=(e,t,i,r)=>{for(var n=r>1?void 0:r?IK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&AK(t,i,n),n};class qi extends Hi{constructor(t,i){super(),v(this,"device"),v(this,"sendTransport"),v(this,"recvTransport"),v(this,"sendTransportIceStateDisconnectTime"),v(this,"recvTransportIceStateDisconnectTime"),v(this,"producerCreationStatus"),v(this,"consumers"),v(this,"producers"),v(this,"socketClient"),v(this,"iceRestartInProgress"),this.producers=new Map,this.consumers=new Map,this.producerCreationStatus=new Map,this.iceRestartInProgress={sendTransport:!1,recvTransport:!1},i!==void 0?this.device=i:this.device=new A4,this.socketClient=t}async setupTransports(){const t=await hi().getICEServers();await this.loadRouter(),await Promise.all([this.createRecvTransport(t),this.createSendTransport(t)])}async loadRouter(){(this.recvTransport||this.sendTransport)&&await this.stopAllTransports()}getRTPCapabilities(){return this.device.rtpCapabilities}async createRecvTransport(t){if(!this.socketClient)return;const i={forceTcp:!1,producing:!1,consuming:!0},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(b.info("recvTransport::initializing_transport"),this.recvTransport=this.device.createRecvTransport({...r,iceServers:t,proprietaryConstraints:zS}),ya.initRecvTransport(this.recvTransport),b.info("recvTransport::initialized_transport"),Z.onSafeInitialization(()=>{Z.configureRecvTransport(this.recvTransport)}),this.recvTransport.on("connect",async({dtlsParameters:n},s,a)=>{var o,c,d,l;const u=await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:this.recvTransport.id,dtlsParameters:n}});(o=u.payload)!=null&&o.error?(b.error("recvTransport::transport_status",{error:(d=u.payload)==null?void 0:d.error,transport:{id:(l=this==null?void 0:this.recvTransport)==null?void 0:l.id,status:"failed",type:"recv"}}),a(new Error("failed"))):(s(),b.info("recvTransport::transport_status",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"connected",type:"recv"}}))}),ee.hasFeature(re.ENABLE_ICE_STATE_LOGGING)){b.info("enabling_ice_state_logging_for_recv_transport");let n;this.recvTransport.on("connectionstatechange",async s=>{var a,o,c,d,l,u,g,m;switch(b.info("recvTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.recvTransport)==null?void 0:a.id,status:s,type:"recv"}}),s){case"failed":if(C.emit(k.ICE_FAILED,{transport:"recv"}),b.warn("recvTransport::ice_state_failed"),ee.hasFeature(re.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.recvTransport)}catch(f){b.error("recvTransport::ice_restart_failed",{error:f,transport:{id:(o=this==null?void 0:this.recvTransport)==null?void 0:o.id,status:"failed",type:"recv"}})}break;case"disconnected":C.emit(k.ICE_DISCONNECTED,{transport:"recv"}),b.warn("recvTransport::ice_state_disconnected"),this.recvTransportIceStateDisconnectTime&&b.warn("recvTransport::ice_state_disconnected_again",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"disconnected",type:"recv",lastDisconnectedTime:(d=this.recvTransportIceStateDisconnectTime)==null?void 0:d.toISOString(),lastDisconnectedTimeOffset:(l=this.recvTransportIceStateDisconnectTime)==null?void 0:l.getTimezoneOffset(),durationPassed:new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime()}}),this.recvTransportIceStateDisconnectTime=new Date;try{n=ee.getValue(re.ICE_RESTART_ON_DISCONNECTED_STATE),typeof n!="number"&&(n=void 0)}catch{n=void 0}n&&setTimeout(async()=>{var f,w,S,y,_;if(this.recvTransportIceStateDisconnectTime!==void 0){C.emit(k.ICE_RECONNECTING,{transport:"recv"}),b.info("recvTransport::attempting_ice_restart",{transport:{id:(f=this==null?void 0:this.recvTransport)==null?void 0:f.id,type:"recv",status:"reconnecting",lastDisconnectedTime:(w=this.recvTransportIceStateDisconnectTime)==null?void 0:w.toISOString(),lastDisconnectedTimeOffset:(S=this.recvTransportIceStateDisconnectTime)==null?void 0:S.getTimezoneOffset()},iceRestart:{isSendTransport:(y=this==null?void 0:this.iceRestartInProgress)==null?void 0:y.sendTransport,isRecvTransport:(_=this==null?void 0:this.iceRestartInProgress)==null?void 0:_.recvTransport}});try{await this.restartIceTillSuccess(this.recvTransport)}catch(T){b.info("SFUHandler.disconnected.restartIceFailed",{error:T,iceRestart:{status:"failed",isRecvTransport:!0}})}}},n);break;case"connected":C.emit(k.ICE_CONNECTED,{transport:"recv"}),b.info("recvTransport::ice_state_connected",{transport:{id:(u=this==null?void 0:this.recvTransport)==null?void 0:u.id,type:"recv",status:"connected",lastDisconnectedTime:(g=this.recvTransportIceStateDisconnectTime)==null?void 0:g.toISOString(),lastDisconnectedTimeOffset:(m=this.recvTransportIceStateDisconnectTime)==null?void 0:m.getTimezoneOffset(),durationPassed:this.recvTransportIceStateDisconnectTime?new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime():null}}),this.recvTransportIceStateDisconnectTime=void 0;break}})}this.recvTransport.observer.on("close",()=>{this.recvTransport=void 0,ya.cleanup("receive"),b.warn("recvTransport_closed")})}async createSendTransport(t){const i={forceTcp:!1,producing:!0,consuming:!1},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(b.info("sendTransport::initializing_transport"),this.sendTransport=this.device.createSendTransport({...r,iceServers:t,proprietaryConstraints:zS}),ya.initSendTransport(this.sendTransport),b.info("sendTransport::initialized_transport"),Z.onSafeInitialization(()=>{Z.configureSendTransport(this.sendTransport)}),this.sendTransport.on("connect",async({dtlsParameters:n},s,a)=>{var o,c,d,l;(c=(await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:(o=this.sendTransport)==null?void 0:o.id,dtlsParameters:n}})).payload)!=null&&c.error?(b.error("sendTransport::transport_status",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"failed",type:"send"}}),a(new Error("failed"))):(b.info("sendTransport::transport_status",{transport:{id:(d=this==null?void 0:this.sendTransport)==null?void 0:d.id,status:"connected",type:"send"}}),s())}),this.sendTransport.on("produce",async({kind:n,rtpParameters:s,appData:a},o,c)=>{var d,l,u,g,m,f;const w=await this.socketClient.sendMessage({type:"produce",payload:{transportId:(d=this.sendTransport)==null?void 0:d.id,kind:n,rtpParameters:s,appData:a}});(l=w.payload)!=null&&l.error?(b.info("sendTransport::producer_status::failed",{producer:{kind:n,appData:a,status:"failed",id:(m=w==null?void 0:w.payload)==null?void 0:m.id}}),c((f=w.payload)==null?void 0:f.error)):(b.info("sendTransport::producer_status::producing",{producer:{kind:n,appData:a,status:"producing",id:(u=w==null?void 0:w.payload)==null?void 0:u.id}}),o({id:(g=w.payload)==null?void 0:g.id}))}),ee.hasFeature(re.ENABLE_ICE_STATE_LOGGING)){b.info("Enabling ice state logging for send transport");let n;this.sendTransport.on("connectionstatechange",async s=>{var a,o,c,d;switch(b.info("sendTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.sendTransport)==null?void 0:a.id,status:s,type:"send"}}),s){case"failed":if(C.emit(k.ICE_FAILED,{transport:"send"}),b.warn("sendTransport::ice_state_failed"),ee.hasFeature(re.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.sendTransport)}catch(l){b.error("sendTransport::ice_restart_failed",{error:l})}break;case"disconnected":C.emit(k.ICE_DISCONNECTED,{transport:"send"}),b.warn("sendTransport::ice_state_disconnected"),this.sendTransportIceStateDisconnectTime&&b.warn("sendTransport::ice_state_disconnected_again",{transport:{id:(o=this==null?void 0:this.sendTransport)==null?void 0:o.id,status:"disconnected",lastDisconnectedTime:this.sendTransportIceStateDisconnectTime.toLocaleTimeString(),durationPassed:new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime(),type:"send"}}),this.sendTransportIceStateDisconnectTime=new Date;try{n=ee.getValue(re.ICE_RESTART_ON_DISCONNECTED_STATE),typeof n!="number"&&(n=void 0)}catch{n=void 0}n&&setTimeout(async()=>{var l,u,g,m;if(this.sendTransportIceStateDisconnectTime!==void 0){C.emit(k.ICE_RECONNECTING,{transport:"send"}),b.info("sendTransport::attempting_ice_restart",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"reconnecting",type:"send",lastDisconnectedTime:(u=this.sendTransportIceStateDisconnectTime)==null?void 0:u.toISOString(),lastDisconnectedTimeOffset:(g=this.sendTransportIceStateDisconnectTime)==null?void 0:g.getTimezoneOffset()},iceRestart:{status:"connecting"}});try{await this.restartIceTillSuccess(this.sendTransport)}catch(f){b.info("SFUHandler.disconnected.restartIceFailed",{error:f,transport:{id:(m=this==null?void 0:this.sendTransport)==null?void 0:m.id,type:"send",status:"failed"}})}}},n);break;case"connected":C.emit(k.ICE_CONNECTED,{transport:"send"}),b.info("sendTransport::ice_state_connected",{transport:{id:(c=this==null?void 0:this.sendTransport)==null?void 0:c.id,type:"send",status:"connected",lastDisconnectedTime:(d=this.sendTransportIceStateDisconnectTime)==null?void 0:d.toLocaleTimeString(),durationPassed:this.sendTransportIceStateDisconnectTime?new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime():null}}),this.sendTransportIceStateDisconnectTime=void 0;break}})}this.sendTransport.observer.on("close",()=>{this.sendTransport=void 0,ya.cleanup("send"),b.warn("sendTransport_closed")})}async restartIce(t){const{direction:i}=t;if(!(i==="recv"?this.iceRestartInProgress.recvTransport:this.iceRestartInProgress.sendTransport)){i==="recv"?this.iceRestartInProgress.recvTransport=!0:this.iceRestartInProgress.sendTransport=!0;try{const r=(await this.socketClient.sendMessage({type:"restartIce",payload:{transportId:t.id}})).payload;await t.restartIce(r)}catch(r){b.error("SFUHandler.restartIce.Failed",{error:r,iceRestart:{status:"failed"},transport:{id:t==null?void 0:t.id,status:"failed",type:i}})}i==="recv"?this.iceRestartInProgress.recvTransport=!1:this.iceRestartInProgress.sendTransport=!1}}async createConsumer(t){if(this.recvTransport===void 0||this.recvTransport.closed)return;const{peerId:i,producerId:r,id:n,kind:s,rtpParameters:a,appData:o,remotelyPaused:c}=t;b.info("createConsumer::initializing_consumer",{consumer:{id:n,peerId:i,kind:s,appData:o,remotelyPaused:c,producerId:r}});const d=await this.recvTransport.consume({id:n,producerId:r,kind:s,rtpParameters:a,appData:{...o,peerId:i}});b.info("createConsumer::initialized_consumer",{consumer:{id:d.id,peerId:i,kind:s,appData:o,remotelyPaused:c,producerId:r}});const l=d;l.peerId=i,l.remotelyPaused=c,l.score=10,this.consumers.set(d.id,l)}async closeConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&(b.info("SFUHandler::close_consumer",{consumer:r}),r.close(),this.consumers.delete(i))}async cleanupConsumers(){var t;(t=this.consumers)==null||t.forEach(i=>{C.emit(k.CONSUMER_CLOSED,{id:i.id}),this.closeConsumer({id:i.id})})}async pauseConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&r.pause()}async resumeConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&r.resume()}async createProducer(t,i,r){if(this.sendTransport===void 0||this.sendTransport.closed)return;if(b.info("createProducer::initializing_producer",{producer:{id:"TO_BE_CREATED",kind:t,status:"initializing",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.get(t)&&this.producerCreationStatus.get(t)==="INITIALIZING"){b.info("createProducer::producer getting initializing",{producer:{id:"GETTING_CREATED",status:"initializing",kind:t,appData:i==null?void 0:i.appData}});return}this.producerCreationStatus.set(t,"INITIALIZING");const n=await Promise.race([this.sendTransport.produce(i),new Promise(a=>setTimeout(()=>a(void 0),6e3))]);if(!n)throw b.error("createProducer::transport_initialization_timed_out",{producer:{id:"FAILED_TO_CREATE",kind:t,status:"failed",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),new R(`Producer Creation timed out! ${t}`);this.producerCreationStatus.set(t,"INITIALIZED"),b.info("createProducer::initialized_producer",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),n.on("transportclose",()=>{b.info("producer::transportclose",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),this.producers.delete(t)}),n.on("trackended",()=>{b.info("producer::trackended",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),[ne.MIC,ne.WEBCAM].includes(t)||r()});const s=n;s.score=10,this.producers.set(t,s),await this.reconfigureWebcamLayers(),await this.reconfigureSafariScreenshareLayers()}async removeProducer(t,i=!0){const r=this.producers.get(t);!r||r.closed||(b.info("SFUHandler::remove_producer",{producer:{id:r==null?void 0:r.id,kind:t,status:"UNKNOWN",appData:r==null?void 0:r.appData},debuggingHint:`stopTrack was ${i}`}),i&&r.track.stop(),r.close(),await this.socketClient.sendMessage({type:"closeProducer",payload:{producerId:r.id}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),this.producers.delete(t),await this.reconfigureWebcamLayers())}stopAllProducers(){Array.from(this.producers.keys()).forEach(t=>{this.removeProducer(t)})}async stopAllTransports(){if(this.sendTransport){try{this.sendTransport.close()}catch(t){b.error("stopAllTransports",{error:t})}this.sendTransport=void 0}if(this.recvTransport){try{this.recvTransport.close()}catch(t){b.error("SFUHandler::stopAllTransports::error",t)}this.recvTransport=void 0}}async reconfigureWebcamLayers(){if(!ee.hasFeature(re.DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE))return;const t=this.producers.get(ne.WEBCAM);t&&await t.setMaxSpatialLayer(this.producers.get(ne.SCREENSHARE_VIDEO)?0:1)}async reconfigureSafariScreenshareLayers(){if(!ee.hasFeature(re.SCREENSHARE_SIMULCAST)||!Oe.isSafari())return;const t=this.producers.get(ne.SCREENSHARE_VIDEO);if(!t)return;const i=t.rtpSender.getParameters();i.encodings=Sz,t.rtpSender.setParameters(i)}async restartIceTillSuccess(t,i=3){let r=!1,n=0;for(;!r&&n<i;)try{b.info("SFUHandler.restartIceTillSuccess.AttemptRestart",{iceRestart:{currentAttempt:n,isSendTransport:t.direction==="send",isRecvTransport:t.direction==="recv"}}),await this.restartIce(t),r=!0}catch{n+=1}if(!r)throw new R("Failed to restart Ice")}}or([E.trace("SFUHandler.setupTransports")],qi.prototype,"setupTransports",1);or([E.trace("SFUHandler.loadRouter")],qi.prototype,"loadRouter",1);or([E.trace("SFUHandler.createRecvTransport")],qi.prototype,"createRecvTransport",1);or([E.trace("SFUHandler.createSendTransport")],qi.prototype,"createSendTransport",1);or([E.trace("SFUHandler.restartIce")],qi.prototype,"restartIce",1);or([E.trace("SFUHandler.createConsumer")],qi.prototype,"createConsumer",1);or([E.trace("SFUHandler.closeConsumer")],qi.prototype,"closeConsumer",1);or([E.trace("SFUHandler.cleanupConsumers")],qi.prototype,"cleanupConsumers",1);or([E.trace("SFUHandler.pauseConsumer")],qi.prototype,"pauseConsumer",1);or([E.trace("SFUHandler.resumeConsumer")],qi.prototype,"resumeConsumer",1);or([E.trace("SFUHandler.createProducer")],qi.prototype,"createProducer",1);or([E.trace("SFUHandler.removeProducer")],qi.prototype,"removeProducer",1);or([E.trace("SFUHandler.stopAllProducers")],qi.prototype,"stopAllProducers",1);or([E.trace("SFUHandler.stopAllTransports")],qi.prototype,"stopAllTransports",1);class Ot extends Hi.EventEmitter{emit(t,...i){return super.emit("*",t,...i),super.emit(t,...i)}on(t,i){return super.on(t,i)}addListener(t,i){return super.addListener(t,i)}off(t,i){return super.off(t,i)}once(t,i){return super.once(t,i)}prependListener(t,i){return super.prependListener(t,i)}prependOnceListener(t,i){return super.prependOnceListener(t,i)}removeListener(t,i){return super.removeListener(t,i)}removeAllListeners(t){return super.removeAllListeners(t)}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}}var OK=Object.defineProperty,MK=Object.getOwnPropertyDescriptor,LK=(e,t,i,r)=>{for(var n=r>1?void 0:r?MK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&OK(t,i,n),n},ws=(e=>(e.REQUEST="REQUEST",e.ACCEPT="ACCEPT",e.REJECT="REJECT",e.END="END",e.EVENT="EVENT",e))(ws||{}),vd=(e=>(e.PENDING="PENDING",e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.ENDED="ENDED",e))(vd||{}),Zu=(e=>(e.KEYBOARD="KEYBOARD",e.MOUSE="MOUSE",e))(Zu||{}),Qh=(e=>(e.LEFT_CLICK="click",e.RIGHT_CLICK="contextmenu",e.MOVE="mousemove",e))(Qh||{}),Ss=(e=>(e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED",e))(Ss||{});let Qu=class extends Ot{constructor(e){super(),v(this,"id"),v(this,"remotePeerId"),v(this,"hostPeerId"),v(this,"state");const{remotePeerId:t,requestId:i,hostPeerId:r,state:n}=e;this.id=i,this.remotePeerId=t,this.hostPeerId=r,this.state=n}};Qu=LK([Ti(e=>{throw new R(e.message,"1400")})],Qu);var DK=Object.defineProperty,NK=Object.getOwnPropertyDescriptor,cr=(e,t,i,r)=>{for(var n=r>1?void 0:r?NK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&DK(t,i,n),n},Ce,Qa,dE;const yy=(dE=class extends Z4{constructor(e){super(),A(this,Ce,void 0),v(this,"isV2AuthToken"),A(this,Qa,void 0),v(this,"legacyMode"),v(this,"roomNodeUrl"),v(this,"peerDisplayName");const{roomName:t,roomNodeUrl:i,peerId:r,authToken:n,legacyMode:s,socketClient:a,meetingTitle:o}=e;this.roomName=t,this.roomNodeUrl=i,this.peerId=r,this.authToken=n,this.legacyMode=s,I(this,Ce,a),this.roomJoined=!1,this.meetingTitle=o,this.isV2AuthToken=Ee.isV2AuthToken,I(this,Qa,new qi(a,e.device)),Z.legacySwitch(s)}static async init(e){const{legacyMode:t=!0,roomName:i,peerId:r,authToken:n,meetingTitle:s,device:a}=e;let o;const c=`${e.roomNodeUrl}?roomURL=${i}&peerId=${r}&authToken=${n}&version=0.5.0`,d=new wp({callbackHandler:async l=>{await o.handleSocketCallbacks(l)}});return d.on(bs.SOCKET_MESSAGE,async(l,u)=>{await o.handleSockets(l,u)}),d.connect(c),o=new yy({legacyMode:t,authToken:n,peerId:r,roomName:i,roomNodeUrl:c,socketClient:d,meetingTitle:s,device:a}),d.on(bs.SOCKET_DISCONNECTED,l=>{var u,g;o.isDisconnected=!0,(u=o.sfuHandler)==null||u.cleanupConsumers(),(g=o.sfuHandler)==null||g.stopAllTransports(),C.emit(k.ROOM_NODE_DISCONNECTED,l),o.roomJoined=!1,b.info("ROOM_NODE_DISCONNECTED")}),d.on(bs.SOCKET_CONNECTED,async l=>{C.emit(k.ROOM_NODE_CONNECTED,l),o.isDisconnected,o.isDisconnected=!1,b.info("ROOM_NODE_CONNECTED")}),d.on(bs.SOCKET_CONNECTION_ERROR,async({err:l})=>{var u;o.isDisconnected=!0,(u=o.sfuHandler)==null||u.cleanupConsumers(),C.emit(k.ROOM_NODE_CONNECTION_ERROR,l),o.roomJoined=!1}),o}get sfuHandler(){return h(this,Qa)}reconnect(){h(this,Ce).reconnect()}async setupTransports(){await this.sfuHandler.setupTransports()}async handleSocketCallbacks(e){switch(e.type){case k.NEW_CONSUMER:return this.sfuHandler.createConsumer(e.payload);default:return null}}async handleSockets(e,t){if(e){switch((!E.logExclusionList.includes(e==null?void 0:e.type)||ee.hasFeature(re.BYPASS_LOG_EXCLUSION_LIST))&&b.info(`RoomNodeClient::handleSockets::${e==null?void 0:e.type}`),e.type){case k.CONSUMER_CLOSED:this.sfuHandler.closeConsumer(e.payload);break;case k.CONSUMER_PAUSED:this.sfuHandler.pauseConsumer(e.payload);break;case k.CONSUMER_RESUMED:this.sfuHandler.resumeConsumer(e.payload);break;case k.CONSUMER_SCORE:this.handleConsumerScore(e.payload);break;case k.PRODUCER_SCORE:this.handleProducerScore(e.payload);break;case k.PRODUCER_CLOSED:this.handleProducerClosed(e.payload);break}typeof t=="function"&&t()}}async joinRoom(e,t,i,r,n={}){var s,a,o;this.peerDisplayName=e,this.roomUUID=i;const c=await h(this,Ce).sendMessage({type:"joinRoom",payload:{device:Oe.getDeviceInfo(),displayName:e,rtpCapabilities:this.sfuHandler.getRTPCapabilities(),isLegacy:this.legacyMode,audioMuted:t}});if((s=c.payload)!=null&&s.waitlisted)return C.emit(k.WAITLISTED),{roomJoined:!1};this.roomJoined=!0,(o=(a=c.payload)==null?void 0:a.waitlistedPeers)==null||o.forEach(l=>{C.emit(k.WAITLIST_PEER_ADDED,l)}),this.legacyMode=c.payload.legacyMode||this.legacyMode,r&&r!==""&&await this.changeRoomDisplayTitle(r),this.maxPreferredStreams=c.payload.maxPreferredStreams;const d=hi();b.info("RoomNodeClient::joinRoom::pre emitasync room_joined");try{await C.emitAsync(k.ROOM_JOINED,c.payload)}catch(l){b.error("RoomNodeClient::joinRoom::emitAsync",{error:l})}return b.info("RoomNodeClient::joinRoom::post emitasync room_joined"),C.emit(k.SELF_ROOM_JOINED),ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{const l=await d.getUserDetails(),u={userId:Ee.isV2AuthToken?l.participant.id:l.id,peerId:this.peerId,displayName:e,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Oe.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:im,sdkVersion:Ld,metaData:{},permissions:{}};Z.roomJoined(u),n!=null&&n.audio?Z.audioOn():Z.audioOff(),n!=null&&n.video?Z.videoOn():Z.videoOff()}),{roomJoined:!0}}async leaveRoom(){this.sfuHandler.stopAllProducers(),await this.sfuHandler.stopAllTransports(),h(this,Ce).disconnect(),Z.callEnded(),E.destruct()}handleProducerClosed({id:e}){this.sfuHandler.producers.forEach((t,i)=>{t.id===e&&this.sfuHandler.removeProducer(i)})}getConsumers(){return this.sfuHandler.consumers}static getComputedScore(e){var t,i;let r=0;try{Array.isArray(e)?e.length===1?r=e[0].score:r=e.map(({score:n})=>n!=null?n:10).filter(n=>n>0).reduce((n,s)=>n+s,0)/e.length:r=(t=e==null?void 0:e.score)!=null?t:10}catch{r=(i=e==null?void 0:e.score)!=null?i:10}return r}handleConsumerScore({id:e,score:t}){var i;const r=h(this,Qa).consumers.get(e);r&&(r.score=t&&t.producerScore!==void 0&&t.producerScore>=0?t.producerScore:(i=t==null?void 0:t.score)!=null?i:10,C.emit(k.CONSUMER_SCORE_UPDATE,{id:r.id,kind:r.kind,peerId:r.peerId,score:r.score}))}handleProducerScore({id:e,score:t}){const i=[...h(this,Qa).producers.values()].find(n=>n.id===e);if(!i){b.error(`RoomNodeClient::producer_not_found. ProducerId: ${e}`);return}if(!i)return;const r=yy.getComputedScore(t);r!==void 0&&r!==i.score&&(i.score=r,C.emit(k.PRODUCER_SCORE_UPDATE,{id:i.id,kind:i.kind,appData:i.appData,score:i.score}))}async shareWebcam(e){if(e===void 0)return;if(this.sfuHandler.producers.has(ne.WEBCAM)){const c=this.sfuHandler.producers.get(ne.WEBCAM);if(!c.closed){await c.replaceTrack({track:e}),await this.resumeWebcam();return}await this.sfuHandler.removeProducer(ne.WEBCAM,!1)}let t=bz;const i=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp9")||void 0,r=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp8")||void 0,n=ee.getValue(re.OVERRIDE_WEBCAM_SIMULCAST);if(i&&!this.legacyMode)t=Ez;else if(n!==void 0)try{t=JSON.parse(n)}catch{b.error("Failed to parse flagsmith simulcast")}const s=()=>this.legacyMode?r:i,a={track:e,encodings:ee.hasFeature(re.DISABLE_WEBCAM_SIMULCAST)?void 0:t,codecOptions:{videoGoogleStartBitrate:1e3},codec:s(),appData:{screenShare:!1},stopTracks:!1},o=()=>{this.disableWebcam()};await this.sfuHandler.createProducer(ne.WEBCAM,a,o)}async shareScreen(e){var t,i;const{video:r,audio:n}=e;if(r===void 0)return;let s;ee.hasFeature(re.SCREENSHARE_SIMULCAST)&&(s=wz);const a={track:r,appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},encodings:s,stopTracks:!1};let o=()=>{this.disableScreenShare()};Z.screenShareRequested(),await this.sfuHandler.createProducer(ne.SCREENSHARE_VIDEO,a,o);const c={opusDtx:!1,opusStereo:!1,opusFec:!0,forceGoogConference:!1};if(ee.hasFeature(re.SCREENSHARE_FORCE_GOOG_CONFERENCE)&&(c.forceGoogConference=!0),n){const d={track:n,codecOptions:c,appData:{screenShare:!0,supportsRemoteControl:Oe.isElectron()},stopTracks:!1};o=()=>{},await this.sfuHandler.createProducer(ne.SCREENSHARE_AUDIO,d,o)}Z.screenShareStart((i=(t=this.sfuHandler.producers.get(ne.SCREENSHARE_VIDEO))==null?void 0:t.rtpParameters.encodings[0])==null?void 0:i.ssrc)}async shareMic(e){if(e===void 0)return;if(this.sfuHandler.producers.has(ne.MIC)){const r=this.sfuHandler.producers.get(ne.MIC);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeMic();return}await this.sfuHandler.removeProducer(ne.MIC,!1)}const t={track:e,codecOptions:{opusDtx:!1,opusStereo:!1,opusFec:!0,opusMaxAverageBitrate:16e3},stopTracks:!1},i=()=>{this.disableMic()};await this.sfuHandler.createProducer(ne.MIC,t,i)}pauseMic(){const e=this.sfuHandler.producers.get(ne.MIC);if(!e){b.error("pauseMic::could_not_find_mic_producer");return}e.pause(),h(this,Ce).sendMessage({type:"pauseProducer",payload:{producerId:e.id}})}async pauseWebcam(){const e=this.sfuHandler.producers.get(ne.WEBCAM);if(!e){b.error("pauseWebcam::could_not_find_webcam_producer");return}e.pause(),await h(this,Ce).sendMessage({type:"pauseProducer",payload:{producerId:e.id}})}async resumeMic(){const e=this.sfuHandler.producers.get(ne.MIC);if(!e){b.error("resumeMic::could_not_find_mic_producer");return}e.resume(),await h(this,Ce).sendMessage({type:"resumeProducer",payload:{producerId:e.id}})}async resumeWebcam(){const e=this.sfuHandler.producers.get(ne.WEBCAM);if(!e){b.error("resumeWebcam::could_not_find_webcam_producer");return}e.resume(),await h(this,Ce).sendMessage({type:"resumeProducer",payload:{producerId:e.id}})}async disableWebcam(){await this.sfuHandler.removeProducer(ne.WEBCAM)}async disableMic(){await this.sfuHandler.removeProducer(ne.MIC)}async disableScreenShare(){var e,t;b.info("screen_sharing_stopped"),Z.screenShareStop((t=(e=this.sfuHandler.producers.get(ne.SCREENSHARE_VIDEO))==null?void 0:e.rtpParameters.encodings[0])==null?void 0:t.ssrc),await this.sfuHandler.removeProducer(ne.SCREENSHARE_VIDEO),await this.sfuHandler.removeProducer(ne.SCREENSHARE_AUDIO)}async resetVideoProducers(e,t){e&&(await this.sfuHandler.removeProducer(ne.WEBCAM,!1),this.shareWebcam(e)),t&&(await this.sfuHandler.removeProducer(ne.SCREENSHARE_VIDEO,!1),this.shareScreen({video:t}))}async getRoomState(){return h(this,Ce).sendMessage({type:"getRoomState"})}async changeRoomDisplayTitle(e){await h(this,Ce).sendMessage({type:"changeDisplayTitle",payload:{displayTitle:e}})}async sendMessage(e){return h(this,Ce).sendMessage(e)}async broadcastMessage(e,t){const i={payload:t,type:e};return h(this,Ce).sendMessage({type:"roomMessage",payload:i})}async sendChatMessage(e){await h(this,Ce).sendMessage({type:"chatMessage",payload:e})}async getChatMessages(){return h(this,Ce).sendMessage({type:"getChatMessages"})}async pinChatMessage(e){return h(this,Ce).sendMessage({type:"pinChatMessage",payload:e})}async unpinChatMessage(e){return h(this,Ce).sendMessage({type:"unpinChatMessage",payload:e})}async getPolls(){return h(this,Ce).sendMessage({type:"getPolls"})}async newPoll(e){await h(this,Ce).sendMessage({type:"newPoll",payload:e})}async votePoll(e){await h(this,Ce).sendMessage({type:"votePoll",payload:e})}async acceptWaitingRequest(e){await h(this,Ce).sendMessage({type:"acceptWaitingRequest",payload:{id:e}})}async rejectWaitingRequest(e){await h(this,Ce).sendMessage({type:"rejectWaitingRequest",payload:{id:e}})}async muteAll(e){await h(this,Ce).sendMessage({type:"muteAllNew",payload:{allowUnMute:e}})}async muteAllVideo(){await h(this,Ce).sendMessage({type:"muteAllVideo"})}async pinPeer(e){return h(this,Ce).sendMessage({type:"pinPeer",payload:{id:e}})}async unpinPeer(e){return h(this,Ce).sendMessage({type:"unpinPeer",payload:{id:e}})}async disableAudio(e){await h(this,Ce).sendMessage({type:"disableAudioPeerNew",payload:{id:e}})}async disableVideo(e){await h(this,Ce).sendMessage({type:"disableVideoPeer",payload:{id:e}})}async kickAll(){await h(this,Ce).sendMessage({type:"kickAll"})}async kick(e){await h(this,Ce).sendMessage({type:"kick",payload:{id:e}})}async getPage(e){return h(this,Ce).sendMessage({type:"getPage",payload:{pageNum:e}})}async muteSelf(){this.pauseMic(),await h(this,Ce).sendMessage({type:"muteSelf"})}async unmuteSelf(){await this.resumeMic(),await h(this,Ce).sendMessage({type:"unmuteSelf"})}async addRoomPlugin(e){return h(this,Ce).sendMessage({type:"addPlugin",payload:e})}async removeRoomPlugin(e){return h(this,Ce).sendMessage({type:"removePlugin",payload:e})}async remoteControlMessage(e){return h(this,Ce).sendMessage({type:"message",payload:e})}async requestRemoteControl(e){return this.remoteControlMessage({peerId:e.hostPeerId,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:ws.REQUEST})}async acceptRemoteControl(e){return this.remoteControlMessage({peerId:e.remotePeerId,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:ws.ACCEPT})}async terminateRemoteControl(e,t){return this.remoteControlMessage({peerId:e,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:ws.END})}async sendEventRemoteControl(e,t,i){return this.remoteControlMessage({peerId:e,remoteRequestId:t,remoteEvent:i,hostPeerId:this.peerId,remotePeerId:e,remoteRequestType:ws.EVENT})}async assertSpotlight(e,t){return h(this,Ce).sendMessage({type:e,payload:{...t,roomMessageType:"spotlight"}})}async assertSpotlightToRoom(e){return this.assertSpotlight("roomMessage",e)}async assertSpotlightToPeer(e){return this.assertSpotlight("message",e)}async requestToJoinStage(e){await this.sendMessage({type:"requestToJoinStage",payload:e})}async withdrawRequestToJoinStage(){await this.sendMessage({type:"withdrawRequestToJoinStage"})}async acceptAllRequestToJoinStage(e){await this.sendMessage({type:"acceptAllRequestToJoinStage",payload:e.map(t=>({...t,type:jb.REQUESTED_BY_MODERATOR}))})}async removePeerFromStage(e,t){await this.sendMessage({type:"removePeerFromStage",payload:{id:e,type:t}})}stopAllProducers(){h(this,Qa).stopAllProducers()}async startPresenting(){await this.sendMessage({type:"startPresenting"})}async stopPresenting(){this.stopAllProducers(),await this.sendMessage({type:"stopPresenting"})}async rejectRequestToJoinStage(e){await this.sendMessage({type:"rejectRequestToJoinStage",payload:{id:e}})}},Ce=new WeakMap,Qa=new WeakMap,dE);let Be=yy;cr([E.trace("RoomNodeClient.reconnect")],Be.prototype,"reconnect",1);cr([E.trace("RoomNodeClient.joinRoom")],Be.prototype,"joinRoom",1);cr([E.trace("RoomNodeClient.leaveRoom")],Be.prototype,"leaveRoom",1);cr([E.trace("RoomNodeClient.shareWebcam")],Be.prototype,"shareWebcam",1);cr([E.trace("RoomNodeClient.shareScreen")],Be.prototype,"shareScreen",1);cr([E.trace("RoomNodeClient.shareMic")],Be.prototype,"shareMic",1);cr([E.trace("RoomNodeClient.pauseMic")],Be.prototype,"pauseMic",1);cr([E.trace("RoomNodeClient.pauseWebcam")],Be.prototype,"pauseWebcam",1);cr([E.trace("RoomNodeClient.resumeMic")],Be.prototype,"resumeMic",1);cr([E.trace("RoomNodeClient.resumeWebcam")],Be.prototype,"resumeWebcam",1);cr([E.trace("RoomNodeClient.disableWebcam")],Be.prototype,"disableWebcam",1);cr([E.trace("RoomNodeClient.disableMic")],Be.prototype,"disableMic",1);cr([E.trace("RoomNodeClient.disableScreenShare")],Be.prototype,"disableScreenShare",1);cr([E.trace("RoomNodeClient.resetVideoProducers")],Be.prototype,"resetVideoProducers",1);let ms;async function UK(e){if(ms)throw new Error("Room Node Client already setup");ms=await ve.init(e)}async function t6(e){if(ms!=null&&ms.roomJoined)throw new Error("Room Node Client already setup");ms&&(ms=void 0),ms=await Be.init(e)}async function jK(){ms=void 0}function Vt(){return ms}function ko(e){var t,i,r,n,s,a,o,c,d,l,u,g,m;return e?{media:{audio:{enabled:e.audioEnabled,trackId:(t=e.audioTrack)==null?void 0:t.id,permission:"mediaPermissions"in e?(i=e.mediaPermissions)==null?void 0:i.audio:null},video:{enabled:e.videoEnabled,trackId:(r=e.videoTrack)==null?void 0:r.id,permission:"mediaPermissions"in e?(n=e.mediaPermissions)==null?void 0:n.video:null},screenshare:{enabled:e.screenShareEnabled,permission:"mediaPermissions"in e?(s=e.mediaPermissions)==null?void 0:s.screenshare:null,audio:{enabled:(o=(a=e.screenShareTracks)==null?void 0:a.audio)==null?void 0:o.enabled,trackId:(d=(c=e.screenShareTracks)==null?void 0:c.audio)==null?void 0:d.id},video:{enabled:(u=(l=e.screenShareTracks)==null?void 0:l.video)==null?void 0:u.enabled,trackId:(m=(g=e.screenShareTracks)==null?void 0:g.video)==null?void 0:m.id}}}}:{}}const $K=async(e,t)=>{if(!(e!=null&&e.length))return t;const i=new AudioContext,r=await Promise.all(e==null?void 0:e.map(a=>a(i))),n=i.createMediaStreamSource(new MediaStream([t])),s=i.createMediaStreamDestination();try{let a=n;for(let o=0;o<r.length;o+=1)a.connect(r[o]),a=r[o];a.connect(s)}catch(a){return b.error("getTransformedAudioTrack::middleware_execution_failed",{error:a}),t}return s.stream.getAudioTracks()[0]};var VK=Object.defineProperty,FK=Object.getOwnPropertyDescriptor,BK=(e,t,i,r)=>{for(var n=r>1?void 0:r?FK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&VK(t,i,n),n};let _y=class extends Ot{constructor(e,t){super(),v(this,"constructorName",this.constructor.name),v(this,"userSelectedDevice"),v(this,"mediaInterface"),v(this,"_mediaTrack"),v(this,"transformedMediaTrack"),v(this,"middlewares",[]),v(this,"currentDevice"),this.mediaInterface=e,t&&this.setMediaTrack(t),this.userSelectedDevice=void 0,this.onTrackEnded=this.onTrackEnded.bind(this),this.onTrackMuted=this.onTrackMuted.bind(this)}disableTrack(){var e,t;this.removeMediaTrackListeners(),(e=this._mediaTrack)==null||e.stop(),this._mediaTrack=void 0,(t=this.transformedMediaTrack)==null||t.stop(),this.transformedMediaTrack=void 0}get mediaTrack(){return this._mediaTrack}async setMediaTrack(e){const t=i=>{b.error(`${this.constructorName}.setMediaTrack.error`,{error:i})};try{this.disableTrack()}catch(i){t(i)}this._mediaTrack=e,await this.setTransformedTrack();try{this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(i){t(i)}}get trackEnabled(){return!!this.mediaTrack&&this.mediaTrack.readyState==="live"&&this.mediaTrack.enabled}muteTrack(){if(!this.mediaTrack){b.warn("BaseMediaHandler.muteTrack Tried muting with no track present");return}this.transformedMediaTrack&&(this.transformedMediaTrack.enabled=!1),this.mediaTrack.enabled=!1}async unmuteTrack(){try{this.mediaTrack?this.mediaTrack.enabled=!0:await this.enableTrack(!1)}catch(e){throw b.error(`${this.constructorName}.unmuteTrack.error`,{error:e}),this.disableTrack(),new R("Failed to unmute track")}}async setCurrentDevice(){var e;if(!this.mediaTrack){this.currentDevice=void 0;return}((e=this.currentDevice)==null?void 0:e.deviceId)!==this.mediaTrack.getSettings().deviceId&&(this.currentDevice=await this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId))}async addMiddleware(e){if(Oe.isSafari())return{success:!1,message:"Middlewares are not yet supported in Safari."};if(this.middlewares.includes(e))return{success:!1,message:"This middleware has been applied, already. Skipping."};try{return this.trackEnabled&&await this.setTransformedTrack(),this.middlewares.push(e),{success:!0,message:"Successfully added the middleware."}}catch(t){return b.error("While adding middleware",{error:t}),{success:!1,message:t==null?void 0:t.message}}}async removeMiddleware(e){const t=this.middlewares.indexOf(e,0);if(t>-1)try{return await this.setTransformedTrack(),this.middlewares.splice(t,1),{success:!0,message:"Successfully removed the middleware."}}catch(i){return b.error("While removing middleware",{error:i}),{success:!1,message:i==null?void 0:i.message}}return{success:!1,message:"No such middleware was found. Skipping."}}addMediaTrackListeners(){var e,t,i;this.mediaTrack&&(b.info(`${this.constructorName}.addMediaTrackListeners for deviceId ${(t=(e=this.mediaTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),this.mediaTrack.addEventListener("ended",this.onTrackEnded),this.mediaTrack.addEventListener("mute",this.onTrackMuted))}removeMediaTrackListeners(){var e,t,i;this.mediaTrack&&(b.info(`${this.constructorName}.removeMediaTrackListeners for deviceId ${(t=(e=this.mediaTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),b.info(`${this.constructorName}.removeMediaTrackListeners`),this.mediaTrack.removeEventListener("ended",this.onTrackEnded),this.mediaTrack.removeEventListener("mute",this.onTrackMuted))}};_y=BK([Ti(e=>{throw new R(e.message,"1600")})],_y);const i6=_y;var zK=Object.defineProperty,HK=Object.getOwnPropertyDescriptor,r6=(e,t,i,r)=>{for(var n=r>1?void 0:r?HK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&zK(t,i,n),n};class Wb extends i6{async setDevice(t){if(!t)throw b.warn("AudioMediaHandler.setDevice No device received"),new R("No device received!","1603");if(t.kind!=="audioinput")throw b.warn("AudioMediaHandler.setDevice Received non audio device"),new R("Non audio device received while setting device!","1603");try{const i=this.trackEnabled;this.userSelectedDevice=t.deviceId,await this.setMediaTrack(await this.mediaInterface.getAudioTrack(!i,t.deviceId))}catch(i){throw b.error("AudioMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new R(i.message,"1604")}}async enableTrack(t){if(this.trackEnabled){b.warn("AudioMediaHandler.enableTrack Track already enabled!");return}const i=await this.mediaInterface.getAudioTrack(t,this.userSelectedDevice);await this.setMediaTrack(i)}async setTransformedTrack(){var t;if(!((t=this.middlewares)!=null&&t.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await $K(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){b.error("AudioMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async onTrackEnded(){b.info("AudioMediaHandler.TrackEnded"),this.emit("trackEnded");const t=this.mediaTrack.enabled;this.disableTrack(),await this.enableTrack(!t),await this.setTransformedTrack(),this.emit("trackChanged")}onTrackMuted(){b.info("AudioMediaHandler.TrackMuted"),this.emit("trackMuted")}}r6([E.trace("AudioMediaHandler.setTransformedTrack")],Wb.prototype,"setTransformedTrack",1);r6([E.trace("AudioMediaHandler.onTrackEnded")],Wb.prototype,"onTrackEnded",1);class $o extends Error{constructor(t,i,r){super(i),v(this,"constraints"),v(this,"name"),this.name=t,this.constraints=r}}function vf(e,t){if(Oe.isChromiumBased()){if(e==="NotAllowedError")return t.indexOf("by system")>0?"SYSTEM_DENIED":"CANCELED";if(e==="NotReadableError")return"COULD_NOT_START"}else if(Oe.isSafari()){if(e==="NotAllowedError")return"DENIED"}else if(Oe.isFirefox()){if(e==="NotFoundError"||e==="NotReadableError")return"SYSTEM_DENIED";if(e==="NotAllowedError")return"DENIED";if(e==="AbortError")return"COULD_NOT_START"}return"COULD_NOT_START"}function cv(e){return e===2 .toString()?va.DENIED:e===4 .toString()?va.SYS_DENIED:e===1 .toString()?va.ACCEPTED:va.FAILED}class GK{constructor(){v(this,"permissions"),this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"}}async getAudioInputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="audioinput")}async getVideoInputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="videoinput")}async getAudioOutputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="audiooutput")}}var WK=Object.defineProperty,qK=Object.getOwnPropertyDescriptor,JK=(e,t,i,r)=>{for(var n=r>1?void 0:r?qK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&WK(t,i,n),n},zs,lE;let by=(lE=class extends GK{constructor(e){super(),A(this,zs,void 0),I(this,zs,new V4(e))}handlePermissionErrors(e,t){const i=vf(t.name,t.message);this.permissions[e]=i,C.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:e})}async getAudioAndVideoTrack(){const e={audio:h(this,zs).getAudioConstraints().audio,video:h(this,zs).getVideoConstraints().video};try{const t=await navigator.mediaDevices.getUserMedia(e),i=t.getAudioTracks()[0],r=t.getVideoTracks()[0];return this.permissions.audio="ACCEPTED",this.permissions.video="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),{audioTrack:i,videoTrack:r}}catch(t){if(t.name==="NotAllowedError"){const i=await this.getAudioTrack(!1),r=await this.getVideoTrack();return{audioTrack:i,videoTrack:r}}throw b.error("WebMediaInterface.getAudioAndVideoTrack",{error:t}),new R("Couldnt fetch audio and video track")}}async getAudioTrack(e,t){const i=h(this,zs).getAudioConstraints(t);try{const r=(await navigator.mediaDevices.getUserMedia(i)).getAudioTracks()[0];return r.enabled=!e,this.permissions.audio="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),r}catch(r){throw this.handlePermissionErrors("audio",new $o(r.name,r.message,i)),new R(r.message,"1601")}}async getScreenShareTracks(){const e=h(this,zs).getScreenShareConstraints();try{const t=await navigator.mediaDevices.getDisplayMedia(e);return this.permissions.screenshare="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"}),{audioTrack:t.getAudioTracks()[0],videoTrack:t.getVideoTracks()[0]}}catch(t){throw this.handlePermissionErrors("screenshare",new $o(t.name,t.message,e)),b.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks",{error:t}),new R("Couldnt fetch screen share tracks")}}async getVideoTrack(e){const t=h(this,zs).getVideoConstraints(e);try{const i=(await navigator.mediaDevices.getUserMedia(t)).getVideoTracks()[0];return this.permissions.video="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"audio"}),i}catch(i){throw this.handlePermissionErrors("video",new $o(i.name,i.message,t)),b.error("WebMediaInterface.getVideoTrack Error while fetching video track",{error:i}),new R("Couldnt fetch video track")}}async getAvailableDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(e){throw b.error("enumerate_devices_failed",{error:e}),new R("Failed to get available devices")}}async getAvailableDevicesByKind(e){try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:t})=>e===t)}catch(t){throw b.error("enumerate_devices_failed",{error:t}),new R("Failed to get available devices by kind")}}async getDevice(e){try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.deviceId===e)[0]}catch(t){throw b.error("enumerate_devices_failed",{error:t}),new R("Failed to get device")}}},zs=new WeakMap,lE);by=JK([Ti(e=>{throw new R(e.message,"1600")})],by);const n6=by;var Wl;class KK{constructor(t){A(this,Wl,void 0),v(this,"currentDevice"),I(this,Wl,t)}async setupSpeaker(t){var i;if(!(h(this,Wl)instanceof n6))return;let r=t;if(t||([r]=await h(this,Wl).getAvailableDevicesByKind("audiooutput")),!r)throw new R("No speaker found");((i=this.currentDevice)==null?void 0:i.deviceId)!==r.deviceId&&(this.currentDevice!=null||(this.currentDevice=r),document.querySelectorAll("audio").forEach(async n=>{if(typeof n.sinkId<"u"&&this.currentDevice.deviceId&&n.sinkId!==this.currentDevice.deviceId)try{await n.setSinkId(this.currentDevice.deviceId)}catch{}}))}}Wl=new WeakMap;class ZK extends Ot{constructor(t){super(),v(this,"mediaInterface"),v(this,"audioMediaTrack"),v(this,"videoMediaTrack"),this.mediaInterface=t}get trackEnabled(){return!!this.videoMediaTrack}async enableScreenShare(){var t,i;const{audioTrack:r,videoTrack:n}=await this.mediaInterface.getScreenShareTracks();this.audioMediaTrack=r,this.videoMediaTrack=n,this.addMediaTrackListeners(),((i=(t=this.mediaInterface)==null?void 0:t.permissions)==null?void 0:i.screenshare)!=="ACCEPTED"&&this.mediaInterface.permissions&&(this.mediaInterface.permissions.screenshare="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.mediaInterface.permissions.screenshare,kind:"screenshare"}))}disableScreenShare(){var t,i;this.removeMediaTrackListeners(),(t=this.audioMediaTrack)==null||t.stop(),(i=this.videoMediaTrack)==null||i.stop(),this.videoMediaTrack=void 0,this.audioMediaTrack=void 0}addMediaTrackListeners(){var t;(t=this.videoMediaTrack)==null||t.addEventListener("ended",this.onTrackEnded.bind(this))}removeMediaTrackListeners(){var t;(t=this.videoMediaTrack)==null||t.removeEventListener("ended",this.onTrackEnded)}onTrackEnded(){this.emit("trackEnded")}}var Ac;class QK{constructor(){A(this,Ac,void 0)}terminateMiddlewareWebWorker(){if(h(this,Ac))try{M3(h(this,Ac)),I(this,Ac,void 0)}catch{b.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(t,i){if(!(t!=null&&t.length))return i;const r=await Promise.all(t==null?void 0:t.map(d=>d())),n=new MediaStream;n.addTrack(i);const s=document.createElement("canvas"),a=s.getContext("2d"),o=document.createElement("video");o.srcObject=n,o.autoplay=!0,this.terminateMiddlewareWebWorker();const c=async()=>{if(i.enabled===!1||i.readyState==="ended"){this.terminateMiddlewareWebWorker(),o.remove(),s.remove();return}try{a.drawImage(o,0,0);for(let d=0;d<r.length;d+=1)await r[d](s,a)}catch(d){b.error("getTransformedVideoTrack::middleware_execution_failed",{error:d})}};try{o.play()}catch{}return o.addEventListener("play",()=>{s.width=o.width||i.getSettings().width,s.height=o.width||i.getSettings().height,I(this,Ac,L3(c,50))},!1),s.captureStream().getVideoTracks()[0]}}Ac=new WeakMap;var YK=Object.defineProperty,XK=Object.getOwnPropertyDescriptor,s6=(e,t,i,r)=>{for(var n=r>1?void 0:r?XK(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&YK(t,i,n),n},ql;class qb extends i6{constructor(t,i){super(t,i),A(this,ql,void 0),I(this,ql,new QK)}async setDevice(t){if(!t)throw b.warn("VideoMediaHandler.setDevice No device received"),new R("No device received!");if(t.kind!=="videoinput")throw b.warn("VideoMediaHandler.setDevice Received non video device",{devices:[t]}),new R("Non video device received while setting video device!");if(this.userSelectedDevice=t.deviceId,!(this.mediaTrack&&this.mediaTrack.enabled)){b.warn("VideoMediaHandler.setDevice Tried switching device with video disabled",{devices:[t]}),this.currentDevice=t;return}try{await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}catch(i){throw b.error("VideoMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new R("Failed to change device")}}async enableTrack(){if(this.trackEnabled){b.warn("VideoMediaHandler.enableTrack Track already enabled!");return}await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}async setTransformedTrack(){var t;if(!((t=this.middlewares)!=null&&t.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await h(this,ql).getTransformedVideoTrack(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){b.error("VideoMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}terminateMiddlewareWebWorker(){h(this,ql).terminateMiddlewareWebWorker()}async onTrackEnded(){b.info("VideoMediaHandler.TrackEnded"),this.disableTrack(),this.emit("trackEnded")}onTrackMuted(){b.info("VideoMediaHandler.TrackMuted"),this.emit("trackMuted")}}ql=new WeakMap;s6([E.trace("VideoMediaHandler.setTransformedTrack")],qb.prototype,"setTransformedTrack",1);s6([E.trace("VideoMediaHandler.onTrackEnded")],qb.prototype,"onTrackEnded",1);var eZ=Object.defineProperty,tZ=Object.getOwnPropertyDescriptor,Yn=(e,t,i,r)=>{for(var n=r>1?void 0:r?tZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&eZ(t,i,n),n},Pi,Ri,yi,lo,An;class Sn extends Ot{constructor(t){super(),A(this,Pi,void 0),A(this,Ri,void 0),A(this,yi,void 0),A(this,lo,void 0),A(this,An,void 0),I(this,Pi,new n6(t)),I(this,Ri,new Wb(h(this,Pi))),I(this,yi,new qb(h(this,Pi))),I(this,An,new ZK(h(this,Pi))),I(this,lo,new KK(h(this,Pi))),h(this,Ri).on("trackMuted",this.onAudioTrackMuted.bind(this)),h(this,Ri).on("trackChanged",this.onAudioTrackChanged.bind(this)),h(this,yi).on("trackChanged",this.onVideoTrackChanged.bind(this)),h(this,yi).on("trackEnded",this.onVideoTrackEnded.bind(this)),h(this,An).on("trackEnded",this.onScreenShareEnded.bind(this))}async repopulateAvailableDevices(){return!0}async setupStreams({audio:t,video:i}){let r,n;if(t&&i)try{const s=await h(this,Pi).getAudioAndVideoTrack();r=s.audioTrack,n=s.videoTrack}catch(s){b.error("LocalMediaHandler::init::Failed to get audio video tracks",{error:s})}if(!r&&t)try{r=await h(this,Pi).getAudioTrack(!1)}catch(s){b.error("LocalMediaHandler::init::Failed to get audio track",{error:s})}if(!n&&i)try{n=await h(this,Pi).getVideoTrack()}catch(s){b.error("LocalMediaHandler::init::Failed to get video track",{error:s})}await h(this,Ri).setMediaTrack(r),await h(this,yi).setMediaTrack(n);try{await h(this,lo).setupSpeaker()}catch{}}getCurrentDevices(){return{audio:h(this,Ri).currentDevice,video:h(this,yi).currentDevice,speaker:h(this,lo).currentDevice}}get permissions(){return h(this,Pi).permissions}getAllDevices(){return h(this,Pi).getAvailableDevices()}getDeviceById(t,i){return h(this,Pi).getDevice(t)}onAudioTrackMuted(){this.emit("AUDIO_TRACK_SILENT")}onAudioTrackChanged(){this.emit("AUDIO_TRACK_CHANGE")}get rawAudioTrack(){return h(this,Ri).mediaTrack}get audioTrack(){return h(this,Ri).transformedMediaTrack}get audioEnabled(){return h(this,Ri).trackEnabled}async enableAudio(){await h(this,Ri).unmuteTrack()}disableAudio(){h(this,Ri).muteTrack()}getAudioDevices(){return h(this,Pi).getAudioInputDevices()}async setAudioDevice(t){await h(this,Ri).setDevice(t),this.emit("AUDIO_TRACK_CHANGE")}setupSpeaker(){return h(this,lo).setupSpeaker()}setSpeakerDevice(t){return h(this,lo).setupSpeaker(t)}onVideoTrackChanged(){this.emit("VIDEO_TRACK_CHANGE")}onVideoTrackEnded(){this.emit("VIDEO_TRACK_CHANGE")}get rawVideoTrack(){return h(this,yi).mediaTrack}get videoTrack(){return h(this,yi).transformedMediaTrack}get videoEnabled(){return h(this,yi).trackEnabled}async enableVideo(){await h(this,yi).unmuteTrack()}disableVideo(){h(this,yi).disableTrack()}getVideoDevices(){return h(this,Pi).getVideoInputDevices()}async setVideoDevice(t){await h(this,yi).setDevice(t),this.emit("VIDEO_TRACK_CHANGE")}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}get screenShareTracks(){return{audio:h(this,An).audioMediaTrack,video:h(this,An).videoMediaTrack}}get screenShareEnabled(){return h(this,An).trackEnabled}async enableScreenShare(){await h(this,An).enableScreenShare()}async disableScreenShare(){h(this,An).disableScreenShare()}getSpeakerDevices(){return h(this,Pi).getAudioOutputDevices()}addAudioMiddleware(t){return h(this,Ri).addMiddleware(t)}removeAudioMiddleware(t){return h(this,Ri).removeMiddleware(t)}addVideoMiddleware(t){return h(this,yi).addMiddleware(t)}removeVideoMiddleware(t){return h(this,yi).removeMiddleware(t)}destruct(){h(this,Ri).disableTrack(),h(this,yi).disableTrack(),h(this,yi).terminateMiddlewareWebWorker(),h(this,An).disableScreenShare()}removeAllTracks(){this.destruct()}async removeDocumentEventListeners(){}}Pi=new WeakMap,Ri=new WeakMap,yi=new WeakMap,lo=new WeakMap,An=new WeakMap;Yn([E.trace("MediaHandler.setupStreams")],Sn.prototype,"setupStreams",1);Yn([E.trace("MediaHandler.enableAudio")],Sn.prototype,"enableAudio",1);Yn([E.trace("MediaHandler.disableAudio")],Sn.prototype,"disableAudio",1);Yn([E.trace("MediaHandler.setAudioDevice")],Sn.prototype,"setAudioDevice",1);Yn([E.trace("MediaHandler.enableVideo")],Sn.prototype,"enableVideo",1);Yn([E.trace("MediaHandler.disableVideo")],Sn.prototype,"disableVideo",1);Yn([E.trace("MediaHandler.setVideoDevice")],Sn.prototype,"setVideoDevice",1);Yn([E.trace("MediaHandler.enableScreenShare")],Sn.prototype,"enableScreenShare",1);Yn([E.trace("MediaHandler.disableScreenShare")],Sn.prototype,"disableScreenShare",1);Yn([E.trace("MediaHandler.destruct")],Sn.prototype,"destruct",1);class iZ extends Error{constructor(t,i){super(t),v(this,"code"),this.code=i}}const rZ={lowVolumeThreshold:-40,clipThreshold:1,silentThreshold:1/1987,delay:500,media:"audio"};var nm,sd,wy,a6,Yh,dv;const o6=class{constructor(e){A(this,wy),A(this,Yh),v(this,"analyser"),v(this,"silentThreshold"),v(this,"lowVolumeThreshold"),v(this,"clipThreshold"),v(this,"delay"),v(this,"audioContext"),v(this,"audioSource"),v(this,"metadata",{}),v(this,"analysing"),v(this,"track"),A(this,nm,void 0),A(this,sd,void 0);const{lowVolumeThreshold:t,silentThreshold:i,clipThreshold:r,delay:n,media:s}={...rZ,...e};this.lowVolumeThreshold=t,this.silentThreshold=i,this.clipThreshold=r,this.delay=n,this.analysing=!1,I(this,sd,s)}setTrack(e){if(!e)return;this.track=e.clone();const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.analyser=this.audioContext.createAnalyser(),h(this,sd)==="screenshare"){C.emit(k.SCREENSHARE_AUDIO_TRACK_CREATED);return}C.emit(k.AUDIO_TRACK_CREATED)}getTrackMetadata(){if(!this.track)return null;switch(this.metadata.label=this.track.label,this.metadata.channelCountMode=this.analyser.channelCountMode,this.metadata.channelCount=this.analyser.channelCount,this.metadata.channelInterpretation=this.analyser.channelInterpretation,this.metadata.outputs=this.analyser.numberOfOutputs,this.analyser.numberOfOutputs){case 1:this.metadata.channelType="MONO";break;case 2:this.metadata.channelType="STEREO";break;case 4:this.metadata.channelType="QUAD";break}return this.metadata}async startTrackAnalysis(){if(!this.track||this.analysing)return!1;try{return await this.audioContext.resume(),await Ut(this,wy,a6).call(this),this.analysing=!0,!0}catch(e){return b.error(e),!1}}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,nm)))}cleanup(){var e,t,i,r,n;if(this.stopTrackAnalysis(),(e=this.analyser)==null||e.disconnect(),(t=this.audioSource)==null||t.disconnect(this.analyser),(i=this.audioSource)==null||i.disconnect(),(r=this.audioContext)==null||r.close(),this.audioContext=void 0,this.analyser=void 0,this.audioSource=void 0,(n=this.track)==null||n.stop(),this.track=void 0,h(this,sd)==="screenshare"){C.emit(k.SCREENSHARE_AUDIO_TRACK_CLOSED);return}C.emit(k.AUDIO_TRACK_CLOSED)}static dbFS(e){const t=20*(Math.log(e)/Math.log(10));return Math.round(t*10)/10}};let c6=o6;nm=new WeakMap,sd=new WeakMap,wy=new WeakSet,a6=async function(){try{const e=new MediaStream;e.addTrack(this.track),this.audioSource=this.audioContext.createMediaStreamSource(e),this.audioSource.connect(this.analyser),window.requestAnimationFrame(Ut(this,Yh,dv).bind(this))}catch(e){b.error(e)}},Yh=new WeakSet,dv=function(){const e=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData(e);let t=0;for(const s of e)t+=s*s;const i=Math.sqrt(t/e.length),r=o6.dbFS(i),n={volume:i,lowVolume:r<this.lowVolumeThreshold,silence:i<this.silentThreshold,clip:i>this.clipThreshold,timestamp:new Date().getTime()};h(this,sd)==="screenshare"?C.emit(k.SCREENSHARE_AUDIO_TRACK_ANALYSIS,n):C.emit(k.AUDIO_TRACK_ANALYSIS,n),I(this,nm,setTimeout(()=>{window.requestAnimationFrame(Ut(this,Yh,dv).bind(this))},this.delay))};const ls=new c6,Xh=new c6({media:"screenshare"}),nZ={nonBlackPixelLumaThreshold:20,identicalFrameSsimThreshold:.985,media:"video"};var sm,Oo,Ic,am,Sy,Ey,uE,Ty,pE,lv,hE,ah,uv,pv,gE;const Jl=class{constructor(e){A(this,am),A(this,Ey),A(this,Ty),v(this,"metadata",{}),v(this,"video"),v(this,"canvas"),v(this,"nonBlackPixelLumaThreshold"),v(this,"identicalFrameSsimThreshold"),v(this,"previousFrame",new Uint8ClampedArray),A(this,sm,void 0),v(this,"track"),v(this,"analysing"),A(this,Oo,void 0),A(this,Ic,void 0),v(this,"cloned",!1);const{nonBlackPixelLumaThreshold:t,identicalFrameSsimThreshold:i,media:r}={...nZ,...e};this.nonBlackPixelLumaThreshold=t,this.identicalFrameSsimThreshold=i,this.analysing=!1,I(this,Oo,r)}setTrack(e,t){if(this.cloned=!1,this.track=e,this.metadata.resolution=t,h(this,Oo)==="screenshare"){C.emit(k.SCREENSHARE_VIDEO_TRACK_CREATED);return}C.emit(k.VIDEO_TRACK_CREATED)}getTrackMetadata(){return this.track?(this.metadata.label=this.track.label,this.metadata):null}async startTrackAnalysis(){var e;return!this.track||this.analysing?!1:(!this.video&&!((e=this.video)!=null&&e.src)&&(I(this,Ic,new MediaStream),h(this,Ic).addTrack(this.track),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),[this.video.width,this.video.height]=this.metadata.resolution,this.video.srcObject=h(this,Ic)),window.requestAnimationFrame(Ut(this,am,Sy).bind(this)),this.analysing=!0,!0)}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,sm)))}setClonedTrack(e,t){var i;this.cloned=t,this.track=e;const{height:r,width:n}=(i=this.track)==null?void 0:i.getConstraints();this.metadata.resolution=[n,r]}resetClonedTrack(e){if(e){this.cloned=!1,this.track=e;const{height:t,width:i}=this.track.getConstraints();this.metadata.resolution=[i,t]}this.cleanup()}cleanup(){var e;if(this.stopTrackAnalysis(),this.cloned&&((e=this.track)==null||e.stop()),this.track=void 0,I(this,Ic,void 0),this.video&&(this.video.srcObject=void 0,this.video=void 0),this.canvas=void 0,this.previousFrame=new Uint8ClampedArray,h(this,Oo)==="screenshare"){C.emit(k.SCREENSHARE_VIDEO_TRACK_CLOSED);return}C.emit(k.VIDEO_TRACK_CLOSED)}};let yu=Jl;sm=new WeakMap,Oo=new WeakMap,Ic=new WeakMap,am=new WeakSet,Sy=function(){var e;try{const t=Ut(this,Ey,uE).call(this),i=Ut(this,Ty,pE).call(this,t.data,t.data.length),r=Ut(e=Jl,lv,hE).call(e,this.previousFrame,t.data);this.previousFrame=t.data;const n={isBlackFrame:i,videoScore:r,isFrozenFrame:r>this.identicalFrameSsimThreshold,timestamp:new Date().getTime()};h(this,Oo)==="screenshare"?C.emit(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS,n):C.emit(k.VIDEO_TRACK_ANALYSIS,n),I(this,sm,setTimeout(()=>{this.track&&window.requestAnimationFrame(Ut(this,am,Sy).bind(this))},3e3))}catch{this.stopTrackAnalysis(),h(this,Oo)==="screenshare"?C.emit(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR):C.emit(k.VIDEO_TRACK_ANALYSIS_ERROR)}},Ey=new WeakSet,uE=function(){var e,t;this.canvas.width=(e=this.video)==null?void 0:e.width,this.canvas.height=(t=this.video)==null?void 0:t.height;const i=this.canvas.getContext("2d");return i.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),i.getImageData(0,0,this.canvas.width,this.canvas.height)},Ty=new WeakSet,pE=function(e,t){const i=this.nonBlackPixelLumaThreshold;let r=0;for(let n=4;n<t;n+=4)if(r+=.21*e[n]+.72*e[n+1]+.07*e[n+2],r>i*(n/4))return!1;return!0},lv=new WeakSet,hE=function(e,t){var i,r,n;if(e.length!==t.length)return 0;const s=.01,a=.03,o=255,c=s*o*(s*o),d=a*o*(a*o),l=d/2,u=Ut(i=Jl,ah,uv).call(i,e),g=u.mean,m=u.variance,f=Math.sqrt(m),w=Ut(r=Jl,ah,uv).call(r,t),S=w.mean,y=w.variance,_=Math.sqrt(y),T=Ut(n=Jl,pv,gE).call(n,e,t,g,S),P=(2*g*S+c)/(g*g+S*S+c),L=(T+l)/(f*_+l),O=(2*f*_+d)/(m+y+d);return P*O*L},ah=new WeakSet,uv=function(e){let t=0,i;for(i=0;i<e.length;i++)t+=e[i];const r=t/(e.length-1);let n=0;for(i=1;i<e.length;i++)n=e[i-1]-r,t+=e[i]+n*n;return{mean:r,variance:t/e.length}},pv=new WeakSet,gE=function(e,t,i,r){let n=0;for(let s=0;s<e.length;s+=1)n+=(e[s]-i)*(t[s]-r);return n/e.length},A(yu,lv),A(yu,ah),A(yu,pv);const us=new yu,eg=new yu({media:"screenshare"});var sZ=Object.defineProperty,aZ=Object.getOwnPropertyDescriptor,Ds=(e,t,i,r)=>{for(var n=r>1?void 0:r?aZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&sZ(t,i,n),n};const hv={port:void 0},oZ=["virtual","emulator","krisp","solstice conference","teams","manycam","blackHole"];function uo(e){const t=e.label.toLowerCase();return Oe._bowser.getOSName()==="macOS"&&t.includes("iphone")?(b.log("isVirtualDevice::ignore_macos_continuity"),!0):oZ.some(i=>t.includes(i))}var Ya,bl,mE;const Qs=(mE=class{constructor(e){A(this,Ya,void 0),A(this,bl,void 0),I(this,Ya,e),I(this,bl,new AbortController)}static async init(){let e=[];return Qs.isDeviceListAvailable()?(e=await Qs.enumerateDevices(),b.info("initial_full_device_list",{devices:JSON.stringify(e)})):b.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices",{debuggingHint:"Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues."}),new Qs(e)}async destruct(){var e;(e=h(this,bl))==null||e.abort()}static isDeviceListAvailable(){return!!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}static enumerateDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(e){return b.error("enumerate_devices_failed",{error:e}),Promise.resolve([])}}static getAudioConstraints(e){const t={},{disableAP:i=!1,disableAEC:r=!1,disableNS:n=!1,disableAGC:s=!1,disableHPF:a=!1}=e.audioOptions||{};if(Oe.isFirefox()||Oe.isWebKitBased())t.audio={deviceId:e.audioDeviceId,autoGainControl:!s&&!i,echoCancellation:!r&&!i,noiseSuppression:!n&&!i};else{if(typeof t.audio=="boolean")return t;t.audio={},t.audio.optional=[e.audioDeviceId?{sourceId:e.audioDeviceId}:{sourceId:"default"},{echoCancellation:!r&&!i},{googEchoCancellation:!r&&!i},{googAutoGainControl:!s&&!i},{googNoiseSuppression:!n&&!i},{googHighpassFilter:!a&&!i},{googNoiseSuppression2:!n&&!i},{googEchoCancellation2:!r&&!i},{googAutoGainControl2:!s&&!i}]}return t}static getVideoConstraints(e){const t={},{videoDeviceId:i,videoTrackConstraints:r,facingMode:n="user",frameRate:s={ideal:24,max:30}}=e;return t.video=r||j4.vga,typeof t.video=="boolean"||(i&&(t.video.deviceId={exact:i}),t.video.facingMode=n,t.video.frameRate=s),t}static async getUserMediaWithTimeout(e={},t=0){try{if(b.info("getUserMediaWithTimeout::requesting_user_media",{timeout:t,constraints:JSON.stringify(e)}),!t){const r=await navigator.mediaDevices.getUserMedia(e);return b.info("getUserMediaWithTimeout::received_user_media",{timeout:t,constraints:JSON.stringify(e)}),r}const i=await Promise.race([navigator.mediaDevices.getUserMedia(e),new Promise((r,n)=>{setTimeout(()=>n(new iZ("Get user media timed out","ERR_GUM_TIMEOUT")),t)})]);return b.info("getUserMediaWithTimeout::received_user_media",{timeout:t,constraints:JSON.stringify(e)}),i}catch(i){throw b.error("getUserMediaWithTimeout::failed_to_access_local_media",{error:i,constraints:JSON.stringify(e)}),b.error("Failed to get access to local media.",{error:i,constraints:JSON.stringify(e)}),new $o(i.name,i.message,e)}}static async getAudioTrack(e){const t=(await Qs.getUserMediaWithTimeout(e)).getAudioTracks()[0];return ls.setTrack(t),t}static async getVideoTrack(e){var t,i,r;const n=(await Qs.getUserMediaWithTimeout(e)).getVideoTracks()[0],{width:s,height:a}=(t=e==null?void 0:e.video)!=null?t:{},o=[(i=s==null?void 0:s.ideal)!=null?i:640,(r=a==null?void 0:a.ideal)!=null?r:480];return us.setTrack(n,o),n}static async getScreenShareTracks(e){var t,i,r,n;let s=ee.hasFeature(re.EXTENSION_HACK),a=null;if(s)try{hv.port=window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome",{name:"chooseDesktopMedia"})}catch{E.addLogInCurrentSpan("error","Extension connect error"),s=!1}s&&(a=await new Promise(d=>{const l=setTimeout(()=>d(void 0),12e3);hv.port.onMessage.addListener(async u=>{if(u.value.streamId){const{streamId:g}=u.value;clearTimeout(l),d(g)}}),hv.port.postMessage({method:"chooseDesktopMedia",sources:["screen"]})}));let o;a?(E.addLogInCurrentSpan("error","Acquiring extension screenshare track"),o=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{maxWidth:1920,maxHeight:1080,chromeMediaSource:"desktop",chromeMediaSourceId:a},optional:[{maxFrameRate:parseInt((t=ee.getValue(re.VAL_MAX_FRAMERATE_EXT))!=null?t:"12",10)},{minFrameRate:parseInt((i=ee.getValue(re.VAL_MIN_FRAMERATE_EXT))!=null?i:"8",10)}]}}),E.addLogInCurrentSpan("error","Acquired extension screenshare track")):o=await navigator.mediaDevices.getDisplayMedia(e);const c={video:o.getVideoTracks()[0],audio:o.getAudioTracks()[0]};if(c.audio&&Xh.setTrack(c.audio),c.video){const{width:d,height:l}=e==null?void 0:e.video,u=[(r=d==null?void 0:d.ideal)!=null?r:1920,(n=l==null?void 0:l.ideal)!=null?n:1080];eg.setTrack(c.video,u)}return c}static async getAudioAndVideoTrack(e){var t,i;const r=await Qs.getUserMediaWithTimeout(e),n=r.getAudioTracks()[0],s=r.getVideoTracks()[0];ls.setTrack(n);const{width:a,height:o}=e==null?void 0:e.video,c=[(t=a==null?void 0:a.ideal)!=null?t:640,(i=o==null?void 0:o.ideal)!=null?i:480];return us.setTrack(s,c),{audioTrack:n,videoTrack:s}}onDeviceChange(e){Oe.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",Vz(async t=>{const i=this.availableDevices,r=new Set(i.map(o=>o.deviceId));await this.repopulateAvailableDevices();const n=this.availableDevices,s=new Set(n.map(o=>o.deviceId)),a={added:n.filter(o=>!r.has(o.deviceId)),removed:i.filter(o=>!s.has(o.deviceId))};this.repopulateAvailableDevices().then(()=>e(t,a))},100),{signal:h(this,bl).signal})}async repopulateAvailableDevices(){const e=await Qs.enumerateDevices();I(this,Ya,e),Z.devices("AUDIO",this.getAudioDevices()),Z.devices("VIDEO",this.getVideoDevices()),Z.devices("SPEAKER",this.getSpeakerDevices()),b.info("repopulated_full_device_list",{devices:JSON.stringify(e)})}get availableDevices(){return h(this,Ya)}getAvailableDevicesByKind(e){return h(this,Ya).filter(t=>t.kind===e)}getDeviceById(e,t){return h(this,Ya).find(i=>i.deviceId===e&&i.kind===t)}getAudioDevices(){return this.getAvailableDevicesByKind("audioinput").sort((e,t)=>{const i=uo(e)?0:1;return(uo(t)?0:1)-i})}getVideoDevices(){return this.getAvailableDevicesByKind("videoinput").sort((e,t)=>{const i=uo(e)?0:1;return(uo(t)?0:1)-i})}getSpeakerDevices(){return this.getAvailableDevicesByKind("audiooutput").sort((e,t)=>{const i=uo(e)?0:1;return(uo(t)?0:1)-i})}},Ya=new WeakMap,bl=new WeakMap,mE);let Et=Qs;Ds([E.trace("LocalMediaUtils.onDeviceChange")],Et.prototype,"onDeviceChange",1);Ds([E.trace("LocalMediaUtils.repopulateAvailableDevices")],Et.prototype,"repopulateAvailableDevices",1);Ds([E.trace("LocalMediaUtils.isDeviceListAvailable")],Et,"isDeviceListAvailable",1);Ds([E.trace("LocalMediaUtils.enumerateDevices")],Et,"enumerateDevices",1);Ds([E.trace("LocalMediaUtils.getUserMediaWithTimeout")],Et,"getUserMediaWithTimeout",1);Ds([E.trace("LocalMediaUtils.getAudioTrack")],Et,"getAudioTrack",1);Ds([E.trace("LocalMediaUtils.getVideoTrack")],Et,"getVideoTrack",1);Ds([E.trace("LocalMediaUtils.getScreenShareTracks")],Et,"getScreenShareTracks",1);Ds([E.trace("LocalMediaUtils.getAudioAndVideoTrack")],Et,"getAudioAndVideoTrack",1);var cZ=Object.defineProperty,dZ=Object.getOwnPropertyDescriptor,Kd=(e,t,i,r)=>{for(var n=r>1?void 0:r?dZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&cZ(t,i,n),n},Ht,Oc;class sc{constructor(t){A(this,Ht,void 0),v(this,"audioMiddlewares",[]),v(this,"videoMiddlewares",[]),A(this,Oc,void 0),I(this,Ht,t)}terminateMiddlewareWebWorker(){if(h(this,Oc))try{M3(h(this,Oc)),I(this,Oc,void 0)}catch{b.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(t){var i,r;if(!((i=this.videoMiddlewares)!=null&&i.length))return t;const n=await Promise.all((r=this.videoMiddlewares)==null?void 0:r.map(l=>l())),s=new MediaStream;s.addTrack(t);const a=document.createElement("canvas"),o=a.getContext("2d"),c=document.createElement("video");c.srcObject=s,c.autoplay=!0,this.terminateMiddlewareWebWorker();const d=async()=>{if(!h(this,Ht).videoEnabled||t.readyState==="ended"){this.terminateMiddlewareWebWorker(),c.remove(),a.remove();return}try{o.drawImage(c,0,0);for(let l=0;l<n.length;l+=1)await n[l](a,o)}catch(l){b.error("getTransformedVideoTrack::middleware_execution_failed",{error:l})}};try{c.play()}catch{}return c.addEventListener("play",()=>{a.width=c.width||t.getSettings().width,a.height=c.width||t.getSettings().height,I(this,Oc,L3(d,50))},!1),a.captureStream().getVideoTracks()[0]}async addVideoMiddleware(t){return Oe.isSafari()?{success:!1,message:"Video middlewares are not yet supported in Safari."}:this.videoMiddlewares.includes(t)?{success:!0,message:"This video middleware has been applied, already. Skipping."}:(this.videoMiddlewares.push(t),h(this,Ht).videoEnabled?(h(this,Ht).setVideoTrack(await this.getTransformedVideoTrack(h(this,Ht).rawVideoTrack)),h(this,Ht).emit("VIDEO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the video middleware."}):{success:!0,message:"Successfully added the video middleware. It will be applied automatically once webcam is turned on."})}async removeVideoMiddleware(t){const i=this.videoMiddlewares.indexOf(t,0);return i>-1?(this.videoMiddlewares.splice(i,1),h(this,Ht).videoEnabled&&(h(this,Ht).setVideoTrack(await this.getTransformedVideoTrack(h(this,Ht).rawVideoTrack)),h(this,Ht).emit("VIDEO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the video middleware."}):{success:!0,message:"No such video middleware was found. Skipping."}}async getTransformedAudioTrack(t){var i,r;if(!((i=this.audioMiddlewares)!=null&&i.length))return t;const n=new AudioContext,s=await Promise.all((r=this.audioMiddlewares)==null?void 0:r.map(c=>c(n))),a=n.createMediaStreamSource(new MediaStream([t])),o=n.createMediaStreamDestination();try{let c=a;for(let d=0;d<s.length;d+=1)c.connect(s[d]),c=s[d];c.connect(o)}catch(c){return b.error("getTransformedAudioTrack::middleware_execution_failed",{error:c}),t}return o.stream.getAudioTracks()[0]}async addAudioMiddleware(t){return Oe.isSafari()?{success:!1,message:"Audio middlewares are not yet supported in Safari."}:this.audioMiddlewares.includes(t)?{success:!0,message:"This audio middleware has been applied, already. Skipping."}:(this.audioMiddlewares.push(t),h(this,Ht).audioEnabled?(h(this,Ht).setAudioTrack(await this.getTransformedAudioTrack(h(this,Ht).rawAudioTrack)),h(this,Ht).emit("AUDIO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the audio middleware."}):{success:!0,message:"Successfully added the audio middleware. It will be applied automatically once mic is turned on."})}async removeAudioMiddleware(t){const i=this.audioMiddlewares.indexOf(t,0);return i>-1?(this.audioMiddlewares.splice(i,1),h(this,Ht).audioEnabled&&(h(this,Ht).setAudioTrack(await this.getTransformedAudioTrack(h(this,Ht).rawAudioTrack)),h(this,Ht).emit("AUDIO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the audio middleware."}):{success:!0,message:"No such audio middleware was found. Skipping."}}}Ht=new WeakMap,Oc=new WeakMap;Kd([E.trace("MediaMiddlewareUtils.getTransformedVideoTrack")],sc.prototype,"getTransformedVideoTrack",1);Kd([E.trace("MediaMiddlewareUtils.addVideoMiddleware")],sc.prototype,"addVideoMiddleware",1);Kd([E.trace("MediaMiddlewareUtils.removeVideoMiddleware")],sc.prototype,"removeVideoMiddleware",1);Kd([E.trace("MediaMiddlewareUtils.getTransformedAudioTrack")],sc.prototype,"getTransformedAudioTrack",1);Kd([E.trace("MediaMiddlewareUtils.addAudioMiddleware")],sc.prototype,"addAudioMiddleware",1);Kd([E.trace("MediaMiddlewareUtils.removeAudioMiddleware")],sc.prototype,"removeAudioMiddleware",1);const lZ=(e=0)=>new Promise(t=>setTimeout(t,e)),uZ=(e,t,i)=>{const r=typeof i=="number"?i:250,n=e.createMediaStreamSource(t),s=e.createAnalyser();s.fftSize=2048,n.connect(s);const a=new Uint8Array(s.fftSize);let o=!1;setTimeout(()=>{o=!0},r);function c(){return o?Promise.resolve(!0):(s.getByteTimeDomainData(a),a.some(d=>d!==128&&d!==0)?Promise.resolve(!1):lZ().then(c))}return c().then(d=>(n.disconnect(),d),d=>{throw n.disconnect(),d})},pZ=typeof AudioContext<"u"?AudioContext:null;class Jb{constructor(t){v(this,"_AudioContext"),v(this,"audioContext"),v(this,"_audioContextRefContainers");const i={AudioContext:pZ,...t};Object.defineProperties(this,{_AudioContext:{value:i.AudioContext},audioContext:{value:null,writable:!0},_audioContextRefContainers:{value:new Set},AudioContextProvider:{enumerable:!0,value:Jb}})}getOrCreate(t){if(!this._audioContextRefContainers.has(t)&&(this._audioContextRefContainers.add(t),this._AudioContext&&!this.audioContext))try{this.audioContext=new this._AudioContext}catch{}return this.audioContext}release(t){this._audioContextRefContainers.has(t)&&(this._audioContextRefContainers.delete(t),!this._audioContextRefContainers.size&&this.audioContext&&(this.audioContext.close(),this.audioContext=null))}}const fE=new Jb,hZ=3,gZ=250;function mZ(e){const t={},i=fE.getOrCreate(t);let r=hZ;function n(){return r-=1,uZ(i,e.srcObject,gZ).then(s=>s?r>0?n():!0:!1).catch(()=>!0)}return n().finally(()=>{fE.release(t)})}async function gv(e){const t=new Audio,i=new MediaStream;i.addTrack(e),t.srcObject=i;let r=!1;try{const n=t.play();n&&await n,r=await mZ(t),r&&b.info("checkIfAudioTrackIsSilent::silence_detected")}catch(n){b.error("checkIfAudioTrackIsSilent::failed_to_detect_silence",{error:n})}finally{t.pause(),t.remove()}return r}const Kl=class{constructor(){v(this,"mediaPermissionEvent"),this.mediaPermissionEvent=!0}static getInstance(){return Kl.instance||(Kl.instance=new Kl),Kl.instance}get shouldEmitMediaPermissionEvent(){return this.mediaPermissionEvent}setEmitMediaPermissionEvent(e){this.mediaPermissionEvent=e}};let d6=Kl;v(d6,"instance");const oh=d6.getInstance(),Sc={setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(i){b.error("LocalStorage::setItem::crashed",{error:i,localStorage:{key:e,value:t}})}},getItem:e=>{try{return localStorage.getItem(e)}catch(t){b.error("LocalStorage::getItem::crashed",{error:t,localStorage:{key:e}})}return null}};var fZ=Object.defineProperty,vZ=Object.getOwnPropertyDescriptor,ot=(e,t,i,r)=>{for(var n=r>1?void 0:r?vZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&fZ(t,i,n),n},Je,Xa,vE;const l6=(vE=class extends Hi.EventEmitter{constructor(e,t){super(),A(this,Je,void 0),A(this,Xa,void 0),v(this,"mediaMiddlewareUtils"),v(this,"audioTrack"),v(this,"rawAudioTrack"),v(this,"videoTrack"),v(this,"rawVideoTrack"),v(this,"screenShareTracks"),v(this,"audioEnabled"),v(this,"videoEnabled"),v(this,"screenShareEnabled"),v(this,"currentDevices"),v(this,"permissions"),v(this,"audioUpdateInProgress"),v(this,"videoUpdateInProgress"),v(this,"screenShareUpdateInProgress"),I(this,Je,e),I(this,Xa,new V4(t)),this.audioEnabled=!0,this.videoEnabled=!0,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.screenShareUpdateInProgress=!1,this.screenShareEnabled=!1,this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"},this.screenShareTracks={audio:void 0,video:void 0},this.currentDevices={audio:void 0,video:void 0,speaker:void 0},h(this,Je).onDeviceChange((i,r)=>this.onDeviceChange(r,!1)),this.conditionallyRestartAudio=this.conditionallyRestartAudio.bind(this),this.conditionallyRestartVideo=this.conditionallyRestartVideo.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange),this.on("AUDIO_TRACK_CHANGE",()=>{this.notifyIfTrackSilent()})}handlePermissionErrors(e,t){const i=vf(t.name,t.message);this.permissions[e]=i,C.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:e})}async repopulateAvailableDevices(){return h(this,Je).repopulateAvailableDevices()}onVisibilityChange(e){document.visibilityState==="visible"&&(Oe.isMobile()&&this.conditionallyRestartAudio(),this.conditionallyRestartVideo()),Z.tabChanged(document.visibilityState==="visible"),document.visibilityState!=="visible"?Z.browserBackgrounded():Z.browserForegrounded()}async conditionallyRestartAudio(e){var t,i;if(!((t=this.currentDevices)!=null&&t.audio)||!this.audioEnabled)return;await Promise.race([new Promise(n=>{var s;return(s=this.rawAudioTrack)==null?void 0:s.addEventListener("unmute",a=>{n(a)})}),new Promise(n=>setTimeout(n,50))]),b.info("performingCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}});const r=await this.shouldReacquireTrack("audio");b.info("performedCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{reacquireTrack:r}}}),r&&(b.info("reacquiring_audio_track"),this.removeMediaStreamTrackListeners(this.rawAudioTrack),Oe.isChromiumBased()&&await h(this,Je).repopulateAvailableDevices(),await this.setupAudioStream((i=this.currentDevices.audio)==null?void 0:i.deviceId),this.addMediaStreamTrackListeners(this.rawAudioTrack),this.emit("AUDIO_TRACK_CHANGE"))}async conditionallyRestartVideo(e){var t;if(!((t=this.currentDevices)!=null&&t.video)||!this.videoEnabled)return;b.info("performingCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}}),await Promise.race([new Promise(r=>{var n;return(n=this.rawVideoTrack)==null?void 0:n.addEventListener("unmute",r)}),new Promise(r=>setTimeout(r,50))]);const i=await this.shouldReacquireTrack("video");b.info("performedCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{reacquireTrack:i}}}),i&&(b.info("reacquiring_video_track"),this.removeMediaStreamTrackListeners(this.rawVideoTrack),await h(this,Je).repopulateAvailableDevices(),await this.setupVideoStream(this.currentDevices.video.deviceId),this.addMediaStreamTrackListeners(this.rawVideoTrack),this.emit("VIDEO_TRACK_CHANGE"))}async shouldReacquireTrack(e){let t,i=!1;if(e==="audio"?(t=this.rawAudioTrack,i=this.audioEnabled):e==="video"&&(t=this.rawVideoTrack,i=this.videoEnabled),!t)return!1;const r=t.readyState==="ended"&&i&&!0;let n=!1;return e==="audio"&&(n=await gv(this.rawAudioTrack)),document.visibilityState==="visible"&&(t.muted||r||n)}onAudioUnmute(e){b.info("audio_track_unmuted",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}})}onVideoUnmute(e){b.info("video_track_unmuted",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}})}removeMediaStreamTrackListeners(e){if(b.info(`Removing ${e.kind} listerners`),!e)return;const t=e.kind==="audio"?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return e.removeEventListener("ended",t),e.removeEventListener("mute",t),e.removeEventListener("unmute",e.kind==="audio"?this.onAudioUnmute:this.onVideoUnmute),e}addMediaStreamTrackListeners(e){if(!e)return null;b.info(`adding_${e.kind}_stream_listerners`);const t=e.kind==="audio",i=t?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return e.addEventListener("ended",async()=>{await i();const r=t?this.audioEnabled:this.videoEnabled,n=t?this.audioTrack:this.videoTrack,s=t?"FORCE_MUTE_AUDIO":"FORCE_MUTE_VIDEO";r&&!(n&&n.readyState==="live"&&n.enabled)&&(b.info(`LocalMediaHandler::trackEnded::Failed to restart ${e.kind} track`),this.emit(s))}),e.addEventListener("mute",i),e.addEventListener("unmute",t?this.onAudioUnmute:this.onVideoUnmute),e}async notifyIfTrackSilent(){var e,t,i,r,n,s;this.audioEnabled&&this.audioTrack&&this.audioTrack.readyState!=="ended"&&this.audioTrack.enabled&&await gv(this.audioTrack)===!0&&(b.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent",{media:{audio:{enabled:this.audioEnabled,deviceId:(t=(e=this.audioTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId,permission:(i=this.permissions)==null?void 0:i.audio,deviceName:(n=(r=this.currentDevices)==null?void 0:r.audio)==null?void 0:n.label,trackId:(s=this.audioTrack)==null?void 0:s.id}}}),this.emit("AUDIO_TRACK_SILENT"))}async setupAudioStream(e,t=!0){var i,r,n;if(!this.audioUpdateInProgress)try{this.audioUpdateInProgress=!0;const s=h(this,Je).getAudioDevices();if(!s.length)return;let a=e;(!a||!s.find(c=>c.deviceId===a))&&(a=await this.getPreferredDeviceId("AUDIO"),b.debug("setupAudioStream::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}}));const o=Et.getAudioConstraints({audioDeviceId:a});t&&((i=this.rawAudioTrack)==null||i.stop(),(r=this.audioTrack)==null||r.stop()),this.rawAudioTrack=await Et.getAudioTrack(o),a=this.rawAudioTrack.getSettings().deviceId,((n=this.currentDevices.audio)==null?void 0:n.deviceId)!==a&&(this.currentDevices.audio=h(this,Je).getDeviceById(a,"audioinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.audio})),this.rawAudioTrack.enabled=this.audioEnabled,this.setAudioTrack(await this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack)),this.addMediaStreamTrackListeners(this.rawAudioTrack),await h(this,Je).repopulateAvailableDevices(),this.permissions.audio="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),Z.mediaPermission("AUDIO",va.ACCEPTED),Z.selectedDevice("AUDIO",this.currentDevices.audio),a&&Sc.setItem("lastUsedAudioDeviceId",a)}catch(s){this.handlePermissionErrors("audio",s)}finally{this.audioUpdateInProgress=!1}}async getPreferredDeviceId(e){var t,i;let r;if(e==="AUDIO"){const n=h(this,Je).getAudioDevices(),s=Sc.getItem("lastUsedAudioDeviceId");b.debug("getPreferredDeviceId::lastUsedAudioDeviceId",{preferredDevice:{lastUsedPreferredDeviceId:s,kind:"audio"}});let a;s&&(a=n.find(o=>o.deviceId===s)),a?r=s:ee.hasFeature(re.REMOVE_OPERATIONAL_MIC)||(r=(await this.getOperationalMicDeviceId()).deviceId),r||(r=(t=n[0])==null?void 0:t.deviceId)}if(e==="VIDEO"){const n=Sc.getItem("lastUsedVideoDeviceId");b.debug("getPreferredDeviceId::lastUsedVideoDeviceId",{preferredDevice:{kind:"video",lastUsedPreferredDeviceId:n}});const s=h(this,Je).getVideoDevices();let a;n&&(a=s.find(o=>o.deviceId===n)),a?r=n:r=(await this.getOperationalWebcamDeviceId()).deviceId,r||(r=(i=s[0])==null?void 0:i.deviceId)}return r}async setupVideoStream(e,t=!0){var i,r;if(!this.videoUpdateInProgress)try{this.videoUpdateInProgress=!0;const n=h(this,Je).getVideoDevices();if(!n.length)return;let s=e;if((!s||!n.find(a=>a.deviceId===s))&&(s=await this.getPreferredDeviceId("VIDEO"),b.debug("setupVideoStream::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:s,kind:"video"}})),t&&((i=this.videoTrack)==null||i.stop()),this.videoEnabled){const a=h(this,Xa).getVideoConstraints(s);this.rawVideoTrack=await Et.getVideoTrack(a),s=this.rawVideoTrack.getSettings().deviceId,this.setVideoTrack(await this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack)),this.addMediaStreamTrackListeners(this.rawVideoTrack)}await h(this,Je).repopulateAvailableDevices(),((r=this.currentDevices.video)==null?void 0:r.deviceId)!==s&&(this.currentDevices.video=h(this,Je).getDeviceById(s,"videoinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.video})),this.permissions.video="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),Z.mediaPermission("VIDEO",va.ACCEPTED),Z.selectedDevice("VIDEO",this.currentDevices.video),s&&Sc.setItem("lastUsedVideoDeviceId",s)}catch(n){this.handlePermissionErrors("video",n)}finally{this.videoUpdateInProgress=!1}}async setupScreenShareStreams(){if(this.screenShareUpdateInProgress)return;const e=h(this,Xa).getScreenShareConstraints();ee.hasFeature(re.SCREENSHARE_MAX_DIMENSIONS)&&(e.video.width.max=window.screen.width,e.video.height.max=window.screen.height);try{this.screenShareUpdateInProgress=!0;const t=await Et.getScreenShareTracks(e);this.setScreenShareTracks(t)}catch(t){throw this.handlePermissionErrors("screenshare",new $o(t.name,t.message,e)),new R(t.message)}finally{this.screenShareUpdateInProgress=!1}}async setupSpeaker(e){var t;const i=h(this,Je).getSpeakerDevices();if(!i.length)return;const r=e!=null?e:i[0].deviceId;((t=this.currentDevices.speaker)==null?void 0:t.deviceId)!==r&&(this.currentDevices.speaker=h(this,Je).getDeviceById(r,"audiooutput"),Z.selectedDevice("SPEAKER",this.currentDevices.speaker),this.emit("DEVICE_CHANGE",{device:this.currentDevices.speaker})),document.querySelectorAll("audio").forEach(async n=>{if(typeof n.sinkId<"u"&&this.currentDevices.speaker.deviceId&&n.sinkId!==this.currentDevices.speaker.deviceId)try{await n.setSinkId(this.currentDevices.speaker.deviceId)}catch{}})}async getOperationalWebcamDeviceId(){const e=h(this,Je).getVideoDevices();if(!e.length)return{isOperational:!1,deviceId:null};oh.setEmitMediaPermissionEvent(!1);const t=[],i=await e.reduce(async(r,n)=>{const s=await r;if(s!==null)return s;const a=h(this,Xa).getVideoConstraints(n.deviceId);try{return(await Et.getVideoTrack(a)).stop(),n.deviceId}catch(o){b.error("getOperationalWebcamDeviceId::could_not_acquire_video_device",{error:o,constraints:a}),t.push({exception:o,constraints:a})}return s},Promise.resolve(null));if(oh.setEmitMediaPermissionEvent(!0),!i&&t.length>0&&t.length===e.length){const{exception:r,constraints:n}=t[0];throw new $o(r.name,r.message,n)}return i?{isOperational:!0,deviceId:i}:{isOperational:!1,deviceId:e[0].deviceId}}async getOperationalMicDeviceId(){const e=h(this,Je).getAudioDevices();if(!e.length)return{isOperational:!1,deviceId:null};const t=[];oh.setEmitMediaPermissionEvent(!1);const i=await e.reduce(async(r,n)=>{const s=await r;if(s!==null)return s;const a=Et.getAudioConstraints({audioDeviceId:n.deviceId});try{const o=await Et.getAudioTrack(a),c=await gv(o);if(o==null||o.stop(),!c)return n}catch(o){b.error("getOperationalMicDeviceId::could_not_acquire_audio_device",{error:o,constraints:a}),t.push({exception:o,constraints:a})}return s},Promise.resolve(null));if(oh.setEmitMediaPermissionEvent(!0),!i&&t.length>0&&t.length===e.length){const{exception:r,constraints:n}=t[0];throw new $o(r.name,r.message,n)}return i?{isOperational:!0,deviceId:i.deviceId}:{isOperational:!1,deviceId:e[0].deviceId}}async setupStreams({audio:e,video:t}){var i;const r={};this.currentDevices||(this.currentDevices={audio:void 0,video:void 0,speaker:void 0});try{if(e&&!this.audioUpdateInProgress&&h(this,Je).getAudioDevices().length!==0){const a=await this.getPreferredDeviceId("AUDIO");b.info("setupStreams::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}});const o=Et.getAudioConstraints({audioDeviceId:a});r.audio=o.audio}if(t&&!this.videoUpdateInProgress&&h(this,Je).getVideoDevices().length!==0){const a=await this.getPreferredDeviceId("VIDEO");b.info("setupStreams::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"video"}});const o=h(this,Xa).getVideoConstraints(a);r.video=o.video}if(((i=Object.keys(r))==null?void 0:i.length)===0){this.audioEnabled=e!=null?e:this.audioEnabled,this.videoEnabled=t!=null?t:this.videoEnabled,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1;return}const{audioTrack:n,videoTrack:s}=await Et.getAudioAndVideoTrack(r);e&&n&&(this.audioTrack=n,this.rawAudioTrack=n,this.permissions.audio="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),this.currentDevices.audio=h(this,Je).getDeviceById(n.getSettings().deviceId,"audioinput"),Sc.setItem("lastUsedAudioDeviceId",n.getSettings().deviceId)),t&&s&&(this.videoTrack=s,this.rawVideoTrack=s,this.permissions.video="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),this.currentDevices.video=h(this,Je).getDeviceById(s.getSettings().deviceId,"videoinput"),Sc.setItem("lastUsedVideoDeviceId",s.getSettings().deviceId)),await h(this,Je).repopulateAvailableDevices()}catch(n){n.name==="NotAllowedError"&&(e&&await this.setupAudioStream(),t&&await this.setupVideoStream())}this.audioEnabled=!!this.audioTrack,this.videoEnabled=!!this.videoTrack,this.screenShareEnabled=!1,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,await this.setupSpeaker()}stopAudioTrack(){var e,t;this.audioUpdateInProgress||(this.audioUpdateInProgress=!0,(e=this.audioTrack)==null||e.stop(),(t=this.rawAudioTrack)==null||t.stop(),this.audioEnabled=!1,this.audioUpdateInProgress=!1)}stopVideoTrack(){var e,t;this.videoUpdateInProgress||(this.videoUpdateInProgress=!0,(e=this.videoTrack)==null||e.stop(),(t=this.rawVideoTrack)==null||t.stop(),this.videoEnabled=!1,this.videoUpdateInProgress=!1)}stopScreenShareTracks(e={}){var t,i,r,n;if(this.screenShareUpdateInProgress)return;this.screenShareUpdateInProgress=!0;const{audio:s=!0,video:a=!0}=e;s&&((i=(t=this.screenShareTracks)==null?void 0:t.audio)==null||i.stop()),a&&((n=(r=this.screenShareTracks)==null?void 0:r.video)==null||n.stop()),this.screenShareEnabled=!1,this.screenShareUpdateInProgress=!1}removeAudioTrack(){this.stopAudioTrack(),this.audioTrack=void 0,this.rawAudioTrack=void 0,ls.cleanup()}removeVideoTrack(){this.stopVideoTrack(),this.videoTrack=void 0,this.rawVideoTrack=void 0,us.cleanup()}removeScreenShareTracks(e){var t;(t=this.screenShareTracks.video)==null||t.removeEventListener("ended",this.onScreenShareEnded),this.stopScreenShareTracks(e),this.screenShareTracks={audio:void 0,video:void 0}}removeAllTracks(){this.removeAudioTrack(),this.removeVideoTrack(),this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video})}setAudioTrack(e){e!==this.audioTrack&&(e===void 0&&this.stopAudioTrack(),this.audioTrack=e,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled))}setVideoTrack(e){e!==this.videoTrack&&(e===void 0&&this.stopVideoTrack(),this.videoTrack=e)}setScreenShareTracks(e){var t;const{audio:i,video:r}=e;(!i||!r)&&this.stopScreenShareTracks({audio:!!i,video:!!r}),this.screenShareTracks=e,(t=this.screenShareTracks.video)==null||t.addEventListener("ended",this.onScreenShareEnded.bind(this))}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}disableAudio(){this.audioEnabled=!1,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async enableAudio(){var e;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((e=this.currentDevices.audio)==null?void 0:e.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1,b.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio",{debuggingHint:"Refer to SelfController::mediaPermissionError log."});return}this.audioEnabled=!0}catch(t){this.audioEnabled=!1,this.audioTrack=void 0,this.rawAudioTrack=void 0,b.error("LocalMediaHandler::enableAudio",{error:t},!0)}this.audioTrack&&(this.audioTrack.enabled=!0),this.rawAudioTrack&&(this.rawAudioTrack.enabled=!0),!(this.permissions.audio==="ACCEPTED"||!this.audioEnabled)&&(this.permissions.audio="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}))}async toggleAudio(){var e;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((e=this.currentDevices.audio)==null?void 0:e.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1;return}this.audioEnabled=!this.audioEnabled}catch(t){this.audioEnabled=!1,b.error("LocalMediaHandler::toggleAudio",{error:t},!0)}this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async toggleVideo(){var e;if(this.permissions.video==="DENIED"){this.videoEnabled=!1;return}if(this.videoEnabled){this.removeVideoTrack();return}this.videoEnabled=!0;try{await this.setupVideoStream((e=this.currentDevices.video)==null?void 0:e.deviceId)}catch{this.videoEnabled=!1}this.videoTrack&&(this.videoTrack.enabled=this.videoEnabled),this.rawVideoTrack&&(this.rawVideoTrack.enabled=this.videoEnabled),!(this.permissions.video==="ACCEPTED"||!this.videoEnabled)&&(this.permissions.video="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}))}async toggleScreenShare(){if(this.screenShareEnabled){this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video});return}try{if(await this.setupScreenShareStreams(),this.screenShareEnabled=!0,this.permissions.screenshare==="ACCEPTED")return;this.permissions.screenshare="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"})}catch{this.screenShareEnabled=!1}}getAllDevices(){return h(this,Je).availableDevices}getDeviceById(e,t){return h(this,Je).getDeviceById(e,t)}getAudioDevices(){return h(this,Je).getAudioDevices()}getVideoDevices(){return h(this,Je).getVideoDevices()}getSpeakerDevices(){return h(this,Je).getSpeakerDevices()}async onDeviceChange(e,t){var i,r;(i=e==null?void 0:e.added)==null||i.forEach(async n=>{n&&(t||!uo(n))&&(n.kind==="audioinput"?(await this.setupAudioStream(n.deviceId),this.emit("AUDIO_TRACK_CHANGE")):n.kind==="videoinput"?(await this.setupVideoStream(n.deviceId),this.emit("VIDEO_TRACK_CHANGE")):n.kind==="audiooutput"&&await this.setupSpeaker(n.deviceId))}),(r=e==null?void 0:e.removed)==null||r.forEach(async n=>{var s,a,o;n&&((ee.hasFeature(re.DEVICE_REMOVE_EXP)||!Oe.isChromiumBased())&&(n.kind==="audioinput"&&n.deviceId===((s=this.currentDevices.audio)==null?void 0:s.deviceId)?(await this.setupAudioStream(),this.emit("AUDIO_TRACK_CHANGE")):n.kind==="videoinput"&&n.deviceId===((a=this.currentDevices.video)==null?void 0:a.deviceId)&&(await this.setupVideoStream(),this.emit("VIDEO_TRACK_CHANGE"))),n.kind==="audiooutput"&&n.deviceId===((o=this.currentDevices.speaker)==null?void 0:o.deviceId)&&await this.setupSpeaker())})}static async init(e){const t=await Et.init(),i=new l6(t,e),r=new sc(i);return i.mediaMiddlewareUtils=r,i}emit(e,...t){return super.emit(e,...t)}on(e,t){return super.on(e,t)}async removeDocumentEventListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}addAudioMiddleware(e){return this.mediaMiddlewareUtils.addAudioMiddleware(e)}removeAudioMiddleware(e){return this.mediaMiddlewareUtils.removeAudioMiddleware(e)}addVideoMiddleware(e){return this.mediaMiddlewareUtils.addVideoMiddleware(e)}removeVideoMiddleware(e){return this.mediaMiddlewareUtils.removeVideoMiddleware(e)}async enableVideo(){await this.toggleVideo()}async disableVideo(){await this.toggleVideo()}async enableScreenShare(){await this.toggleScreenShare()}async disableScreenShare(){await this.toggleScreenShare()}getCurrentDevices(){return this.currentDevices}destruct(){this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(),h(this,Je).destruct(),this.removeAllTracks(),this.removeAllListeners()}},Je=new WeakMap,Xa=new WeakMap,vE);let it=l6;ot([E.trace("OldMediaHandler.shouldReacquireTrack")],it.prototype,"shouldReacquireTrack",1);ot([E.trace("OldMediaHandler.removeMediaStreamTrackListeners")],it.prototype,"removeMediaStreamTrackListeners",1);ot([E.trace("OldMediaHandler.addMediaStreamTrackListeners")],it.prototype,"addMediaStreamTrackListeners",1);ot([E.trace("OldMediaHandler.setupAudioStream")],it.prototype,"setupAudioStream",1);ot([E.trace("OldMediaHandler.getPreferredDeviceId")],it.prototype,"getPreferredDeviceId",1);ot([E.trace("OldMediaHandler.setupVideoStream")],it.prototype,"setupVideoStream",1);ot([E.trace("OldMediaHandler.setupScreenShareStreams")],it.prototype,"setupScreenShareStreams",1);ot([E.trace("OldMediaHandler.setupSpeaker")],it.prototype,"setupSpeaker",1);ot([E.trace("OldMediaHandler.getOperationalWebcamDeviceId")],it.prototype,"getOperationalWebcamDeviceId",1);ot([E.trace("OldMediaHandler.getOperationalMicDeviceId")],it.prototype,"getOperationalMicDeviceId",1);ot([E.trace("OldMediaHandler.setupStreams")],it.prototype,"setupStreams",1);ot([E.trace("OldMediaHandler.stopAudioTrack")],it.prototype,"stopAudioTrack",1);ot([E.trace("OldMediaHandler.stopVideoTrack")],it.prototype,"stopVideoTrack",1);ot([E.trace("OldMediaHandler.stopScreenShareTracks")],it.prototype,"stopScreenShareTracks",1);ot([E.trace("OldMediaHandler.removeAudioTrack")],it.prototype,"removeAudioTrack",1);ot([E.trace("OldMediaHandler.removeVideoTrack")],it.prototype,"removeVideoTrack",1);ot([E.trace("OldMediaHandler.removeScreenShareTracks")],it.prototype,"removeScreenShareTracks",1);ot([E.trace("OldMediaHandler.removeAllTracks")],it.prototype,"removeAllTracks",1);ot([E.trace("OldMediaHandler.setAudioTrack")],it.prototype,"setAudioTrack",1);ot([E.trace("OldMediaHandler.setVideoTrack")],it.prototype,"setVideoTrack",1);ot([E.trace("OldMediaHandler.setScreenShareTracks")],it.prototype,"setScreenShareTracks",1);ot([E.trace("OldMediaHandler::disableAudio")],it.prototype,"disableAudio",1);ot([E.trace("OldMediaHandler::enableAudio")],it.prototype,"enableAudio",1);ot([E.trace("OldMediaHandler.toggleAudio")],it.prototype,"toggleAudio",1);ot([E.trace("OldMediaHandler.toggleVideo")],it.prototype,"toggleVideo",1);ot([E.trace("OldMediaHandler.toggleScreenShare")],it.prototype,"toggleScreenShare",1);class yZ extends Ot{constructor(){super(...arguments),v(this,"localMediaHandler")}async init(t={}){var i,r;if(Oe.init(),!this.localMediaHandler)try{let n=!0;const s=t.constraints||er;if(Ye.defaults.mediaHandler)n=!1,this.localMediaHandler=Ye.defaults.mediaHandler.localMediaHandler;else if(navigator.RNLocalMediaHandlerImpl){const{RNLocalMediaHandlerImpl:a}=navigator;this.localMediaHandler=await a.init()}else ee.hasFeature(re.NEW_LOCAL_MEDIA_HANDLER)?this.localMediaHandler=new Sn(s):this.localMediaHandler=await it.init(s);n&&await this.localMediaHandler.setupStreams({video:(i=t==null?void 0:t.video)!=null?i:!0,audio:(r=t==null?void 0:t.audio)!=null?r:!0})}catch(n){b.error("DyteSelf::init::Failed To Setup Streams",{error:{name:n.name,message:n.message}})}}get audioTrack(){return this.localMediaHandler.audioTrack}get rawAudioTrack(){return this.localMediaHandler.rawAudioTrack}async addAudioMiddleware(t){return this.localMediaHandler.addAudioMiddleware(t)}async removeAudioMiddleware(t){return this.localMediaHandler.removeAudioMiddleware(t)}get videoTrack(){return this.localMediaHandler.videoTrack}get rawVideoTrack(){return this.localMediaHandler.rawVideoTrack}async addVideoMiddleware(t){return this.localMediaHandler.addVideoMiddleware(t)}async removeVideoMiddleware(t){return this.localMediaHandler.removeVideoMiddleware(t)}get screenShareTracks(){return this.localMediaHandler.screenShareTracks}get audioEnabled(){return this.localMediaHandler.audioEnabled}get videoEnabled(){return this.localMediaHandler.videoEnabled}get screenShareEnabled(){return this.localMediaHandler.screenShareEnabled}async enableAudio(){await this.localMediaHandler.enableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async enableVideo(){await this.localMediaHandler.enableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableAudio(){await this.localMediaHandler.disableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async disableVideo(){await this.localMediaHandler.disableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}getCurrentDevices(){return this.localMediaHandler.getCurrentDevices()}async getAudioDevices(){return await this.localMediaHandler.getAudioDevices()}async getVideoDevices(){return await this.localMediaHandler.getVideoDevices()}async getSpeakerDevices(){return await this.localMediaHandler.getSpeakerDevices()}getDeviceById(t,i){let r;return i==="audio"?r="audioinput":i==="video"?r="videoinput":i==="speaker"&&(r="audiooutput"),this.localMediaHandler.getDeviceById(t,r)}async setDevice(t){const i={added:[t],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(i,!0);return}switch(t.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(t)}catch{}finally{this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(t);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(t)}catch{}finally{this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:t})}}var _Z=Object.defineProperty,bZ=Object.getOwnPropertyDescriptor,mi=(e,t,i,r)=>{for(var n=r>1?void 0:r?bZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&_Z(t,i,n),n},Jt=(e=>(e.OFF_STAGE="OFF_STAGE",e.REQUESTED_TO_JOIN_STAGE="REQUESTED_TO_JOIN_STAGE",e.ACCEPTED_TO_JOIN_STAGE="ACCEPTED_TO_JOIN_STAGE",e.ON_STAGE="ON_STAGE",e))(Jt||{}),Ec,Hs,ns,wl,ch,Re,Ie,yE;let Ft=(yE=class extends yZ{constructor(e,t,i,r,n){var s;super(),A(this,Re),v(this,"id"),v(this,"name"),v(this,"picture"),v(this,"clientSpecificId"),v(this,"waitlistStatus"),A(this,Ec,void 0),A(this,Hs,void 0),A(this,ns,void 0),A(this,wl,void 0),v(this,"role"),v(this,"userId"),v(this,"organizationId"),v(this,"supportsRemoteControl",!1),v(this,"device"),A(this,ch,"OFF_STAGE"),v(this,"stageStatus"),v(this,"presetName"),v(this,"roomState","init"),this.id=e,this.userId=t.id,this.name=t.name,this.picture=t.picture,this.clientSpecificId=(s=t.customParticipantId)!=null?s:t.clientSpecificId,this.waitlistStatus="none",I(this,ns,i),I(this,Hs,r),I(this,wl,!1),this.organizationId=t.organizationId,this.supportsRemoteControl=Oe.isElectron(),this.device=Oe.getDeviceInfo(),this.presetName=n,I(this,Ec,Ee.isV2AuthToken?r.viewType:i.viewType),this.updatePermission()}static async __init__(e,t,i,r,n){var s,a,o,c;let d=(a=(s=Ye.defaults)==null?void 0:s.audio)!=null?a:!0,l=(c=(o=Ye.defaults)==null?void 0:o.video)!=null?c:!0;i.canProduceAudio!=="ALLOWED"&&(d=!1),i.canProduceVideo!=="ALLOWED"&&(l=!1);const u=new Ft(e,t,i,r,n);return await u.init({audio:d,video:l}),u.setupEvents(),u}async updatePermission(){var e,t;if(Oe.getName()==="firefox")return;const i="microphone",r="camera",n=await((e=navigator==null?void 0:navigator.permissions)==null?void 0:e.query({name:i})),s=await((t=navigator==null?void 0:navigator.permissions)==null?void 0:t.query({name:r})),a=(c,d)=>{this.mediaPermissions[c]=d;const l={message:this.mediaPermissions[c],kind:c};d==="DENIED"?C.emit(k.MEDIA_PERMISSION_ERROR,l):C.emit(k.MEDIA_PERMISSION_UPDATE,l)},o=(c,d)=>{switch(d){case"granted":a(c,"ACCEPTED");break;case"denied":a(c,"DENIED");break}this.localMediaHandler.repopulateAvailableDevices()};n&&(n.onchange=()=>o("audio",n.state)),s&&(s.onchange=()=>o("video",s.state))}setupEvents(){C.on(k.ROOM_NODE_CONNECTED,async()=>{h(this,Re,Ie).isDisconnected&&await this.resetSelf(),h(this,Re,Ie).isDisconnected=!1,b.info("DyteSelf::ROOM_NODE_CONNECTED")}),C.on(k.RESET_PRODUCER_STATE,async()=>{this.roomJoined&&h(this,Re,Ie)instanceof ve&&(this.localMediaHandler.videoEnabled&&await h(this,Re,Ie).shareWebcam(this.localMediaHandler.videoTrack),this.localMediaHandler.audioEnabled&&await h(this,Re,Ie).shareMic(this.localMediaHandler.audioTrack),this.localMediaHandler.screenShareEnabled&&await h(this,Re,Ie).shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio}))}),this.localMediaHandler.on("AUDIO_TRACK_CHANGE",async()=>{if(b.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE",{...ko(this)}),this.roomJoined&&this.audioEnabled)try{await h(this,Re,Ie).shareMic(this.audioTrack)}catch(e){b.error("DyteSelf::setupEvents::Error while sharing mic",{error:e}),this.localMediaHandler.disableAudio()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}),this.localMediaHandler.on("VIDEO_TRACK_CHANGE",async()=>{if(b.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE",{...ko(this)}),this.videoEnabled&&this.roomJoined)try{await h(this,Re,Ie).shareWebcam(this.videoTrack)}catch(e){b.error("DyteSelf::setupEvents::failed shareWebcam",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}),this.localMediaHandler.on("DEVICE_CHANGE",async({device:e})=>{this.emit("deviceUpdate",{device:e})}),this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE",async()=>{if(!this.roomJoined){b.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode");return}if(this.screenShareEnabled)try{await h(this,Re,Ie).shareScreen(this.screenShareTracks)}catch(e){b.error("DyteSelf::setupEvents::Error while sharing screen",{error:e}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}b.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE",{...ko(this)}),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}),this.localMediaHandler.on("SCREENSHARE_ENDED",async()=>{await this.disableScreenShare(),b.info("DyteSelf::setupEvents::SCREENSHARE_ENDED",{...ko(this)})}),this.localMediaHandler.on("AUDIO_TRACK_SILENT",()=>{this.emit("audioTrackSilent"),Z.mediaTrackMuted("AUDIO")}),this.localMediaHandler.on("FORCE_MUTE_AUDIO",this.disableAudio),this.localMediaHandler.on("FORCE_MUTE_VIDEO",async()=>{this.roomJoined&&await h(this,Re,Ie).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),Z.videoOff()})}get mediaPermissions(){return this.localMediaHandler.permissions}get permissions(){return h(this,ns)}get suggestedTheme(){return h(this,Hs)}get config(){return h(this,Hs)}get roomJoined(){var e;return((e=h(this,Re,Ie))==null?void 0:e.roomJoined)===!0}setName(e){if(!e)throw new R("Name cannot be empty.");this.name=e}async setupTracks(e={}){var t,i;return e.forceReset&&(h(this,Re,Ie).stopAllProducers(),this.localMediaHandler.removeAllTracks()),this.localMediaHandler.setupStreams({video:(t=e.video)!=null?t:!0,audio:(i=e.audio)!=null?i:!0})}async resetSelf(){var e,t,i,r,n,s,a,o,c,d;Z.callEnded(),(i=(t=(e=h(this,Re,Ie))==null?void 0:e.sfuHandler)==null?void 0:t.cleanupConsumers)==null||i.call(t),await((s=(n=(r=h(this,Re,Ie))==null?void 0:r.sfuHandler)==null?void 0:n.setupTransports)==null?void 0:s.call(n)),await((a=h(this,Re,Ie))==null?void 0:a.joinRoom(this.name,!this.localMediaHandler.audioEnabled,h(this,Re,Ie).roomUUID,h(this,Re,Ie).meetingTitle,{audio:this.localMediaHandler.audioEnabled,video:this.localMediaHandler.videoEnabled,screen:this.localMediaHandler.screenShareEnabled})),this.localMediaHandler.videoEnabled&&await((o=h(this,Re,Ie))==null?void 0:o.shareWebcam(this.localMediaHandler.videoTrack)),this.localMediaHandler.audioEnabled&&await((c=h(this,Re,Ie))==null?void 0:c.shareMic(this.localMediaHandler.audioTrack)),this.localMediaHandler.screenShareEnabled&&await((d=h(this,Re,Ie))==null?void 0:d.shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio})),b.info("DyteSelf::resetSelf")}async destructMediaHandler(){return b.info("DyteSelf::destructMediaHandler"),this.localMediaHandler.destruct()}async removeDocumentEventListeners(){return b.info("DyteSelf::removeDocumentEventListeners"),this.localMediaHandler.removeDocumentEventListeners()}async enableAudio(){if(this.permissions.canProduceAudio!==co.notAllowed&&!(h(this,Hs).viewType==="WEBINAR"&&h(this,ns).canProduceAudio===co.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.audioEnabled){if(await this.localMediaHandler.enableAudio(),this.roomJoined){if(this.audioTrack)try{await h(this,Re,Ie).shareMic(this.audioTrack)}catch(e){b.error("DyteSelf::enableAudio::Error while sharing mic",{error:e}),this.localMediaHandler.disableAudio()}if(!this.audioEnabled)return;h(this,Re,Ie).unmuteSelf()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),Z.audioOn()}}async enableVideo(){if(h(this,ns).canProduceVideo!==co.notAllowed&&!(h(this,Hs).viewType==="WEBINAR"&&h(this,ns).canProduceVideo===co.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.videoEnabled){if(await this.localMediaHandler.enableVideo(),this.roomJoined)try{await h(this,Re,Ie).shareWebcam(this.videoTrack)}catch(e){b.error("DyteSelf::enableVideo::Error while sharing video",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),b.info("DyteSelf.enableVideo",{...ko(this)}),Z.videoOn()}}async enableScreenShare(){if(!this.roomJoined)throw new R("Can`t enable screenshare without joining room");if(h(this,ns).canProduceScreenshare!==co.notAllowed&&!(h(this,Hs).viewType==="WEBINAR"&&h(this,ns).canProduceScreenshare===co.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.screenShareEnabled){if(await this.localMediaHandler.enableScreenShare(),this.screenShareTracks.audio||this.screenShareTracks.video)try{await h(this,Re,Ie).shareScreen(this.screenShareTracks)}catch(e){b.error("DyteSelf::enableScreenShare::Error while sharing screen",{error:e}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}}async disableAudio(){this.audioEnabled&&(this.localMediaHandler.disableAudio(),this.roomJoined&&h(this,Re,Ie).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),Z.audioOff())}async disableVideo(){this.videoEnabled&&(await this.localMediaHandler.disableVideo(),this.roomJoined&&await h(this,Re,Ie).pauseWebcam(),this.mediaPermissions.video==="ACCEPTED"&&(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),Z.videoOff()))}async disableScreenShare(){this.screenShareEnabled&&(await this.localMediaHandler.disableScreenShare(),this.roomJoined&&await h(this,Re,Ie).disableScreenShare(),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks}))}getAllDevices(){return this.localMediaHandler.getAllDevices()}setIsPinned(e,t=!0){I(this,wl,e);const i=e?"pinned":"unpinned";t&&this.emit(i,this)}get isPinned(){return h(this,wl)}get webinarStageStatus(){return h(this,ch)}async pin(){if(!this.roomJoined)throw new R("Can`t pin participants without joining room");return h(this,Re,Ie).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new R("Can`t unpin participants without joining room");return h(this,Re,Ie).pinPeer(null)}async setDevice(e){const t={added:[e],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(t,!0);return}switch(e.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(e)}catch{this.roomJoined&&await h(this,Re,Ie).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(e);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(e)}catch{this.roomJoined&&await h(this,Re,Ie).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:e})}cleanUpTracks(){var e,t,i,r;(e=this.audioTrack)==null||e.stop(),(t=this.rawAudioTrack)==null||t.stop(),(i=this.videoTrack)==null||i.stop(),(r=this.rawVideoTrack)==null||r.stop()}async requestToJoinStage(){if(!this.roomJoined)throw new R("Can`t request to join stage without joining room");if(h(this,Ec)!==vn.Webinar)throw new R("Not allowed to go on stage on non webinar meeting");if(!this.permissions.requestProduce)throw b.error("DyteSelf::requestGoToStage::permission_denied"),new R("User does not have permission to go on stage");await h(this,Re,Ie).requestToJoinStage($b.PRESENT),this.setWebinarStageStatus("REQUESTED_TO_JOIN_STAGE")}async withdrawRequestToJoinStage(){if(!this.roomJoined)throw new R("Can`t request to join stage without joining room");if(h(this,Ec)!==vn.Webinar)throw new R("Not allowed to go on stage on non webinar meeting");this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"&&(await h(this,Re,Ie).withdrawRequestToJoinStage(),this.setWebinarStageStatus("OFF_STAGE"))}async leaveStage(){if(!this.roomJoined)throw new R("Can`t leave stage without joining room");if(h(this,Ec)!==vn.Webinar)throw new R("Not allowed to leave stage on non webinar meeting");await this.disableScreenShare(),await this.disableVideo(),await this.disableAudio(),this.localMediaHandler.destruct(),await h(this,Re,Ie).stopPresenting(),this.setWebinarStageStatus("OFF_STAGE")}async joinStage(){if(!this.roomJoined)throw new R("Can`t join stage without joining room");if(!this.permissions.canPresent&&this.webinarStageStatus!=="ACCEPTED_TO_JOIN_STAGE")throw b.error("DyteSelf::joinStage::permission_denied"),new R("User does not have permission to join stage");await h(this,Re,Ie).startPresenting()}setWebinarStageStatus(e){switch(I(this,ch,e),e){case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}async disablePreview(){return this}},Ec=new WeakMap,Hs=new WeakMap,ns=new WeakMap,wl=new WeakMap,ch=new WeakMap,Re=new WeakSet,Ie=function(){return Vt()},yE);mi([E.trace("DyteSelf.setupEvents")],Ft.prototype,"setupEvents",1);mi([E.trace("DyteSelf.setupTracks")],Ft.prototype,"setupTracks",1);mi([E.trace("DyteSelf.resetSelf")],Ft.prototype,"resetSelf",1);mi([E.trace("DyteSelf.destructMediaHandler")],Ft.prototype,"destructMediaHandler",1);mi([E.trace("DyteSelf.removeDocumentEventListeners")],Ft.prototype,"removeDocumentEventListeners",1);mi([E.trace("DyteSelf.enableAudio")],Ft.prototype,"enableAudio",1);mi([E.trace("DyteSelf.enableVideo")],Ft.prototype,"enableVideo",1);mi([E.trace("DyteSelf.enableScreenShare")],Ft.prototype,"enableScreenShare",1);mi([E.trace("DyteSelf.disableAudio")],Ft.prototype,"disableAudio",1);mi([E.trace("DyteSelf.disableVideo")],Ft.prototype,"disableVideo",1);mi([E.trace("DyteSelf.disableScreenShare")],Ft.prototype,"disableScreenShare",1);mi([E.trace("DyteSelf.setDevice")],Ft.prototype,"setDevice",1);mi([E.trace("DyteSelf.requestToJoinStage")],Ft.prototype,"requestToJoinStage",1);mi([E.trace("DyteSelf.withdrawRequestToJoinStage")],Ft.prototype,"withdrawRequestToJoinStage",1);mi([E.trace("DyteSelf.leaveStage")],Ft.prototype,"leaveStage",1);mi([E.trace("DyteSelf.joinStage")],Ft.prototype,"joinStage",1);mi([E.trace("DyteSelf.deprecated.disablePreview")],Ft.prototype,"disablePreview",1);Ft=mi([Ti(e=>{throw new R(e.message,"1100")})],Ft);class wZ{constructor(t){v(this,"socket"),this.socket=t}set onReconnect(t){this.socket.onStateEvent("reconnected",t)}async joinRoom(t,i,r,n){const s={capabilities:[],peer:{displayName:t,peerId:i,userId:r},roomUuid:n},a=WW.fromBinary((await this.socket.sendMessagePromise(Ne.joinRoom,eq.toBinary(s))).payload);await C.emitAsync(k.SOCKET_SERVICE_ROOM_JOINED,a);try{const{room:o}=await this.getRoomState();C.emit(k.ROOM_STATE,o)}catch(o){b.error("RoomSocketHandler.joinRoom.failedToGetRoomState",{error:o})}}async getRoomState(){let t=QS.create();try{const i=await this.socket.sendMessagePromise(Ne.getRoomInfo);t=QS.fromBinary(i.payload)}catch(i){b.error("getRoomState::binary_decode_error",{error:i})}return t}leaveRoom(){this.socket.sendMessage(Ne.leaveRoom,iq.toBinary({}))}}function SZ(e){if(!Ee.isV2AuthToken)return!1;const t=e;return[t.canProduceAudio,t.canProduceScreenshare,t.canProduceVideo].includes(ui.Allowed)}function u6(e){return ee.hasFeature(re.LIVESTREAM)?e.viewType!=="LIVESTREAM":!0}var EZ=Object.defineProperty,TZ=Object.getOwnPropertyDescriptor,Sp=(e,t,i,r)=>{for(var n=r>1?void 0:r?TZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&EZ(t,i,n),n},Tc,zt,ni,_E;const p6=(_E=class{constructor(e,t){A(this,zt),v(this,"self"),v(this,"authToken"),v(this,"peerId"),A(this,Tc,void 0),v(this,"roomNodeSetupInProgress",!1);var i,r,n,s;I(this,Tc,e),this.authToken=(r=(i=Vt())==null?void 0:i.authToken)!=null?r:e.authToken,this.peerId=(s=(n=Vt())==null?void 0:n.peerId)!=null?s:e.peerId,this.self=t,this.setupEvents()}get roomJoined(){var e;return((e=h(this,zt,ni))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r,n){var s,a;const o=hi(),{isV2AuthToken:c}=Ee,d=await Ft.__init__((a=(s=Vt())==null?void 0:s.peerId)!=null?a:e.peerId,Ee.isV2AuthToken?t.participant:t,i,r,n),l=c?t.participant.organizationId:t.organizationId;if(E.meetingMetadata.organizationId=l,ee.hasFeature(re.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"){ee.getValue(re.CALLSTATS_INGESTION_LAYER);let u="dev";Ye.apiBase.indexOf("cluster.dyte")>-1?u="production":Ye.apiBase.indexOf("staging.dyte")>-1&&(u="staging"),setTimeout(async()=>{var g,m;Z.initialize({peerId:(m=(g=Vt())==null?void 0:g.peerId)!=null?m:e.peerId,engineName:Oe.getDeviceInfo().engineName,env:u,iceServers:await o.getICEServers(),apiBase:Ye.apiBase,flags:ee.getAllFlags(),logger:b})})}return new p6(e,d)}async shareMediaTracks(){await Promise.all([this.self.videoTrack&&h(this,zt,ni).shareWebcam(this.self.videoTrack),this.self.audioTrack&&h(this,zt,ni).shareMic(this.self.audioTrack)])}setupEvents(){C.on(k.DISABLE_AUDIO,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),Z.audioOff())}),C.on(k.DISABLE_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),Z.videoOff())}),C.on(k.MUTE_ALL,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),Z.audioOff())}),C.on(k.MUTE_ALL_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),Z.videoOff())}),C.on(k.WAITLISTED,()=>{this.self.waitlistStatus="waiting",this.self.roomState="waitlisted",this.self.emit("waitlisted")}),C.on(k.WAITLIST_ACCEPTED,async()=>{if(this.self.waitlistStatus==="accepted"){b.warn("SelfController.WAITLIST_ACCEPTED.UserAlreadyAccepted");return}this.self.waitlistStatus="accepted",this.joinRoom()}),C.on(k.WAITLIST_REJECTED,async()=>{if(this.self.waitlistStatus==="rejected"){b.warn("SelfController.WAITLIST_REJECTED.UserAlreadyRejected");return}this.self.waitlistStatus="rejected",this.leaveRoom("rejected")}),C.on(k.KICKED,async e=>{let t="kicked";(e==null?void 0:e.kickType)==="kickAll"&&(t="ended"),this.leaveRoom(t)}),C.on(k.SELF_ROOM_JOINED,()=>{this.self.config.viewType==="WEBINAR"&&this.self.permissions.canPresent&&this.self.joinStage(),this.self.roomState="joined",this.self.emit("roomJoined")}),C.on(k.SOCKET_SERVICE_ROOM_JOINED,()=>{this.self.emit("socketServiceRoomJoined")}),C.on(k.MEDIA_PERMISSION_UPDATE,async e=>{if(e.message==="ACCEPTED"){const t=this.self.getCurrentDevices(),i=await this.self.getAudioDevices(),r=await this.self.getVideoDevices(),n=await this.self.getSpeakerDevices();switch(e==null?void 0:e.kind){case"audio":!t.audio&&i.length>0&&this.self.setDevice(i[0]),!t.speaker&&n.length>0&&this.self.setDevice(n[0]);break;case"video":!t.video&&r.length>0&&this.self.setDevice(r[0]);break}}this.self.emit("mediaPermissionUpdate",e)}),C.on(k.MEDIA_PERMISSION_ERROR,async e=>{const{kind:t,message:i}=e;t==="audio"?(Z.mediaPermission("AUDIO",cv(i)),this.self.disableAudio()):t==="video"?(Z.mediaPermission("VIDEO",cv(i)),this.self.disableVideo()):t==="screenshare"&&(Z.mediaPermission("VIDEO",cv(i)),this.self.disableScreenShare()),b.error("SelfController::mediaPermissionError",{error:{message:e.message},constraints:e.constraints,mediaPermissionsErrors:{kind:t,message:i}}),this.self.emit("mediaPermissionError",e),this.self.emit("mediaPermissionUpdate",{message:i,kind:t})}),C.on(k.REQUEST_TO_JOIN_STAGE_ACCEPTED,()=>{this.self.setWebinarStageStatus(Jt.ACCEPTED_TO_JOIN_STAGE),this.self.emit("joinStageRequestAccepted")}),C.on(k.REQUEST_TO_JOIN_STAGE_REJECTED,()=>{this.self.setWebinarStageStatus(Jt.OFF_STAGE),this.self.emit("joinStageRequestRejected")}),C.on(k.REMOVED_FROM_STAGE,async()=>{this.self.setWebinarStageStatus(Jt.OFF_STAGE),await this.self.disableScreenShare(),await this.self.disableVideo(),await this.self.disableAudio(),this.self.destructMediaHandler(),this.self.emit("removedFromStage")}),C.on(k.STARTED_PRESENTING,()=>{this.self.setWebinarStageStatus(Jt.ON_STAGE),this.self.emit("stageJoined")}),C.on(k.STOPPED_PRESENTING,()=>{this.self.setWebinarStageStatus(Jt.OFF_STAGE),this.self.emit("stageLeft")}),C.on(k.PRODUCER_SCORE_UPDATE,({score:e,kind:t,appData:i})=>{var r;const n=t==="video"&&((r=i==null?void 0:i.screenShare)!=null?r:!1);this.self.emit("mediaScoreUpdate",{kind:t,isScreenshare:n,score:e})}),C.on(k.PRODUCER_STATUS_UPDATE,({status:e})=>{this.self.emit("mediaChannelUpdate",{status:e})}),C.onAsync(k.JOIN_MEDIA_ROOM,this.setupRoomNode.bind(this)),C.onAsync(k.LEAVE_MEDIA_ROOM,this.leaveMediaRoom.bind(this))}async setupRoomNode(){var e,t,i;if(this.roomNodeSetupInProgress){b.warn("SelfController.roomNodeSetupInProgress");return}if((e=h(this,zt,ni))!=null&&e.roomJoined){b.warn("SelfController.roomNodeAlreadySetup");return}this.roomNodeSetupInProgress=!0;const r=Ee.roomNodeOptions;await t6({...r,roomName:r.roomName,peerId:r.peerId});let n="";if(h(this,zt,ni)instanceof Be){await h(this,zt,ni).setupTransports();const s=await h(this,zt,ni).getRoomState();({roomUUID:n}=(i=(t=s==null?void 0:s.payload)==null?void 0:t.roomState)!=null?i:{}),hi().setRoomUUID(n)}await this.joinMediaRoom(n),this.roomNodeSetupInProgress=!1}async joinRoom(){var e,t;try{const i=hi();let r="";if(h(this,zt,ni)instanceof Be){const s=await h(this,zt,ni).getRoomState();({roomUUID:r}=(t=(e=s==null?void 0:s.payload)==null?void 0:e.roomState)!=null?t:{}),i.setRoomUUID(r)}const n=new wZ(h(this,Tc));(B4(this.self.config.viewType,h(this,Tc).capabilities)||Ku("chat_socket_server")==="socket-service")&&(await n.joinRoom(this.self.name,this.self.id,this.self.userId,r),n.socket.flush(),n.onReconnect=async()=>{await n.joinRoom(this.self.name,this.self.id,this.self.userId,r),n.socket.flush()}),u6(this.self.config)&&await this.joinMediaRoom(r)}catch(i){throw b.error("Error in joinRoom",{error:i}),i}}async leaveRoom(e="left"){var t;const{roomJoined:i}=this;await this.leaveMediaRoom();try{(t=h(this,Tc))==null||t.disconnect()}catch{b.error("SelfController::leaveRoom::socketDisconnect")}this.self.roomState=e,jK(),!(this.self.config.viewType!=="LIVESTREAM"&&!i)&&this.self.emit("roomLeft",{state:e})}async joinMediaRoom(e){var t,i,r,n;if((t=h(this,zt,ni))!=null&&t.isDisconnected&&h(this,zt,ni)instanceof Be){(i=h(this,zt,ni))==null||i.reconnect();return}const{roomJoined:s}=(n=await((r=h(this,zt,ni))==null?void 0:r.joinRoom(this.self.name,!this.self.audioEnabled,e,void 0,{audio:this.self.audioEnabled,video:this.self.videoEnabled,screen:this.self.screenShareEnabled})))!=null?n:{};h(this,zt,ni)instanceof ve&&(h(this,zt,ni).onSocketReconnection=this.joinMediaRoom.bind(this,e)),s&&await this.shareMediaTracks()}async leaveMediaRoom(){await this.cleanupSelf(),h(this,zt,ni)&&this.roomJoined&&(await h(this,zt,ni).leaveRoom(),h(this,zt,ni).roomJoined=!1)}async cleanupSelf(){await this.self.disableAudio(),await this.self.disableVideo(),await this.self.disableScreenShare(),this.self.cleanUpTracks(),this.self.destructMediaHandler(),this.self.removeDocumentEventListeners()}},Tc=new WeakMap,zt=new WeakSet,ni=function(){return Vt()},_E);let Zd=p6;Sp([E.trace("SelfController.setupEvents")],Zd.prototype,"setupEvents",1);Sp([E.trace("SelfController.joinRoom")],Zd.prototype,"joinRoom",1);Sp([E.trace("SelfController.leaveRoom")],Zd.prototype,"leaveRoom",1);Sp([E.trace("SelfController.joinMediaRoom")],Zd.prototype,"joinMediaRoom",1);Sp([E.trace("SelfController.leaveMediaRoom")],Zd.prototype,"leaveMediaRoom",1);var kZ=Object.defineProperty,CZ=Object.getOwnPropertyDescriptor,Fa=(e,t,i,r)=>{for(var n=r>1?void 0:r?CZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&kZ(t,i,n),n},Sl,Jr,xn,kc,bE;let jr=(bE=class extends Ot{constructor(e,t){super(),A(this,Jr),v(this,"id"),v(this,"userId"),v(this,"name"),v(this,"picture"),v(this,"isHost"),v(this,"clientSpecificId"),v(this,"flags"),v(this,"device"),v(this,"videoTrack"),v(this,"audioTrack"),v(this,"screenShareTracks"),v(this,"videoEnabled"),v(this,"audioEnabled"),v(this,"screenShareEnabled"),v(this,"producers"),A(this,Sl,void 0),v(this,"supportsRemoteControl",!1),v(this,"webinarStageStatus",Jt.OFF_STAGE),v(this,"presetName"),A(this,kc,void 0);const{id:i,userId:r,displayName:n,device:s,picture:a,isHost:o,flags:c,clientSpecificId:d,customParticipantId:l,audioMuted:u,audioTrack:g,videoEnabled:m=!1,videoTrack:f,producers:w,metadata:S}=e;this.id=i,this.userId=r,this.name=n,this.device=s,this.picture=a,this.isHost=o,this.flags=c,this.clientSpecificId=l!=null?l:d,this.audioEnabled=!u,this.audioTrack=g,this.videoEnabled=m,this.videoTrack=f,this.screenShareTracks={audio:void 0,video:void 0},this.producers=w!=null?w:[],this.presetName=S==null?void 0:S.preset_name,I(this,Sl,!1),I(this,kc,t)}get roomJoined(){var e;return((e=h(this,Jr,xn))==null?void 0:e.roomJoined)===!0}setVideoEnabled(e,t=!0){this.videoEnabled=e,t&&(b.info("DyteParticipant::setVideoEnabled::videoUpdate",{...ko(this)}),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}))}setAudioEnabled(e,t=!0){this.audioEnabled=e,t&&(b.info("DyteParticipant::setAudioEnabled::audioUpdate",{...ko(this)}),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}))}setScreenShareEnabled(e,t=!0){this.screenShareEnabled=e,t&&this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}async pin(){if(!this.roomJoined)throw new R("Can`t pin participant without joining room");return h(this,Jr,xn).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new R("Can`t unpin participant without joining room");return h(this,Jr,xn).pinPeer(null)}setIsPinned(e,t=!0){I(this,Sl,e);const i=e?"pinned":"unpinned";t&&this.emit(i,this)}async disableAudio(){const e=this.id;if(b.info("DyteParticipant::disable_audio",{dyteParticipant:{id:e}}),!this.roomJoined)throw new R("Can`t disable participant audio without joining room");if(h(this,kc).permissions.canDisableParticipantAudio)return h(this,Jr,xn).disableAudio(e);throw b.error("DyteParticipant::unauthorized_disable_audio",{dyteParticipant:{id:e}}),new R("Unauthorized: User does not have permission to disable participant audio.")}async kick(){const e=this.id;if(b.info("DyteParticipant::kick",{dyteParticipant:{id:e}}),!this.roomJoined)throw new R("Can`t kick participant without joining room");if(h(this,kc).permissions.kickParticipant)return h(this,Jr,xn).kick(e);throw b.error("DyteParticipant::unauthorized_kick",{dyteParticipant:{id:e}}),new R("Unauthorized: User does not have permission to kick participants.")}async disableVideo(){const e=this.id;if(b.info("DyteParticipant::disable_video",{dyteParticipant:{id:e}}),!this.roomJoined)throw new R("Can`t disable participant video without joining room");if(h(this,kc).permissions.canDisableParticipantVideo)return h(this,Jr,xn).disableVideo(e);throw b.error("DyteParticipant::unauthorized_disable_video",{dyteParticipant:{id:e}}),new R("Unauthorized: User does not have permission to disable participant video.")}async acceptJoinStageRequest(){if(!this.roomJoined)throw new R("Can`t acceptJoinStageRequest for participant without joining room");h(this,Jr,xn).acceptAllRequestToJoinStage([{id:this.id,requestToJoinType:$b.PRESENT}])}async rejectRequestToJoinStage(){if(!this.roomJoined)throw new R("Can`t rejectRequestToJoinStage for participant without joining room");h(this,Jr,xn).rejectRequestToJoinStage(this.id)}async removeFromStage(){if(!this.roomJoined)throw new R("Can`t removeFromStage participant without joining room");h(this,Jr,xn).removePeerFromStage(this.id,jb.REQUESTED_BY_MODERATOR)}setWebinarStageStatus(e){this.webinarStageStatus=e;let t;e===Jt.OFF_STAGE&&(t="peerStoppedPresenting"),e===Jt.ON_STAGE&&(t="peerStartedPresenting"),e===Jt.ACCEPTED_TO_JOIN_STAGE&&(t="peerAcceptedToJoinStage"),e===Jt.REQUESTED_TO_JOIN_STAGE&&(t="peerRequestToJoinStage"),t&&this.emit(t,this)}get isPinned(){return h(this,Sl)}},Sl=new WeakMap,Jr=new WeakSet,xn=function(){return Vt()},kc=new WeakMap,bE);Fa([E.trace("DyteParticipant.disableAudio")],jr.prototype,"disableAudio",1);Fa([E.trace("DyteParticipant.kick")],jr.prototype,"kick",1);Fa([E.trace("DyteParticipant.disableVideo")],jr.prototype,"disableVideo",1);Fa([E.trace("DyteParticipant.acceptJoinStageRequest")],jr.prototype,"acceptJoinStageRequest",1);Fa([E.trace("DyteParticipant.rejectRequestToJoinStage")],jr.prototype,"rejectRequestToJoinStage",1);Fa([E.trace("DyteParticipant.removeFromStage")],jr.prototype,"removeFromStage",1);Fa([E.trace("DyteParticipant.setWebinarStageStatus")],jr.prototype,"setWebinarStageStatus",1);jr=Fa([Ti(e=>{throw new R(e.message,"1200")})],jr);var Gt,Mc;class Kb extends Map{constructor(t){const{onAddEvent:i="added",onDeleteEvent:r="deleted",onClearEvent:n="cleared"}=t!=null?t:{};super(),A(this,Gt,void 0),A(this,Mc,void 0),v(this,"onAddEvent"),v(this,"onDeleteEvent"),v(this,"onClearEvent"),I(this,Gt,new Ot),this.onAddEvent=i,this.onDeleteEvent=r,this.onClearEvent=n,I(this,Mc,new Map)}emit(t,...i){return h(this,Gt).emit(t,...i)}on(t,i){return h(this,Gt).on(t,i)}addListener(t,i){return h(this,Gt).addListener(t,i)}off(t,i){return h(this,Gt).off(t,i)}once(t,i){return h(this,Gt).once(t,i)}prependListener(t,i){return h(this,Gt).prependListener(t,i)}prependOnceListener(t,i){return h(this,Gt).prependOnceListener(t,i)}removeListener(t,i){return h(this,Gt).removeListener(t,i)}removeAllListeners(t){return h(this,Gt).removeAllListeners(t)}listeners(t){return h(this,Gt).listeners(t)}listenerCount(t){return h(this,Gt).listenerCount(t)}getMaxListeners(){return h(this,Gt).getMaxListeners()}setMaxListeners(t){return h(this,Gt).setMaxListeners(t)}eventNames(){return h(this,Gt).eventNames()}add(t,i=!0){return this.set(t.id,t,i)}set(t,i,r=!0){const n=super.set(t,i),s=(a,...o)=>{this.emit(a,i,...o)};return h(this,Mc).set(t,s),i.on("*",s),r&&h(this,Gt).emit(this.onAddEvent,i),n}delete(t,i=!0,r=!1){const n=this.get(t);if(!n)return!1;n.removeListener("*",h(this,Mc).get(t));const s=super.delete(t);return r&&n.removeAllListeners(),i&&h(this,Gt).emit(this.onDeleteEvent,n),s}clear(t=!0,i=!1){this.forEach(n=>{n.removeListener("*",h(this,Mc).get(n.id)),i&&n.removeAllListeners()});const r=super.clear();return t&&h(this,Gt).emit(this.onClearEvent),r}toArray(){return Array.from(this.values())}}Gt=new WeakMap,Mc=new WeakMap;class dh extends Kb{constructor(t){const{onAddEvent:i="participantJoined",onDeleteEvent:r="participantLeft",onClearEvent:n="participantsCleared"}=t!=null?t:{};super({onAddEvent:i,onDeleteEvent:r,onClearEvent:n})}add(t,i=!0){return super.add(t,i)}clear(t=!0,i=!1){return super.clear(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}class PZ{constructor(){v(this,"_orderedArray"),v(this,"_map"),this._map=new Map,this._orderedArray=[]}add(t,i){if(!this._map.has(t))return this._map.set(t,{peerId:t,priority:i}),this._orderedArray.splice(Math.max(i-1,0),0,t),this.index(t);const r=this.index(t);this.delete(t);const n=this.add(t,i);return r!==n?(b.info("DyteSelectedPeer::add()::new_position_for_active_speaker",{selectedPeer:{oldIndex:r,newIndex:n}}),n):-1}delete(t){if(this._map.has(t)){const i=this.index(t);this._map.delete(t),this._orderedArray.splice(i,1)}}index(t){return this._map.has(t)?this._orderedArray.indexOf(t):-1}[Symbol.iterator](){return this._orderedArray[Symbol.iterator]()}}class RZ{constructor(){v(this,"_activeSpeakerPeers"),v(this,"_compulsoryPeers"),this._activeSpeakerPeers=new PZ,this._compulsoryPeers=new Set}add(t,i){return i<0?(this._compulsoryPeers.add(t),0):this.compulsoryPeers.includes(t)&&(i>0||i===246267631)&&(b.info("DyteSelectedPeer::removing_compulsory_peer",{selectedPeer:{peerId:t}}),this._removeFromCompulsoryPeer(t),i===246267631)?-1:this._activeSpeakerPeers.add(t,i)}delete(t){b.info("DyteSelectedPeer::deleting_peer_from_selectedPeer",{selectedPeer:{peerId:t}}),this._removeFromCompulsoryPeer(t),this._activeSpeakerPeers.delete(t)}index(t){return this._activeSpeakerPeers.index(t)}get peers(){return[...new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers))]}get compulsoryPeers(){return[...this._compulsoryPeers.values()]}get peerPriorities(){return[...this._activeSpeakerPeers].map((t,i)=>i)}get activeSpeakerPeers(){return[...this._activeSpeakerPeers]}_removeFromCompulsoryPeer(t){this._compulsoryPeers.delete(t)}}var xZ=Object.defineProperty,AZ=Object.getOwnPropertyDescriptor,En=(e,t,i,r)=>{for(var n=r>1?void 0:r?AZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&xZ(t,i,n),n},ci,fi,eo,wE;let Er=(wE=class extends Ot{constructor(e){super(),A(this,ci),v(this,"waitlisted"),v(this,"joined"),v(this,"active"),v(this,"pinned"),A(this,eo,void 0),v(this,"viewMode"),v(this,"currentPage"),v(this,"lastActiveSpeaker"),v(this,"selectedPeers"),I(this,eo,e),this.waitlisted=new dh,this.joined=new dh,this.active=new dh,this.pinned=new dh,this.selectedPeers=new RZ,this.viewMode="ACTIVE_GRID",this.currentPage=0}get roomJoined(){var e;return((e=h(this,ci,fi))==null?void 0:e.roomJoined)===!0}get count(){return this.joined.size}get maxActiveParticipantsCount(){var e,t,i;if(h(this,ci,fi)instanceof Be)return h(this,ci,fi).maxPreferredStreams;const r=h(this,eo).suggestedTheme;return(i=(t=(e=r==null?void 0:r.grid)==null?void 0:e.multi)==null?void 0:t.maxVideoCount)!=null?i:6}get pageCount(){return this.viewMode==="PAGINATED"?Math.ceil(this.joined.size/this.maxActiveParticipantsCount):0}async acceptWaitingRoomRequest(e){if(!this.roomJoined)throw new R("Can`t accept waiting room request without joining room");return h(this,ci,fi).acceptWaitingRequest(e)}async rejectWaitingRoomRequest(e){if(!this.roomJoined)throw new R("Can`t reject waiting room request without joining room");await h(this,ci,fi).rejectWaitingRequest(e),this.waitlisted.delete(e)}async setViewMode(e){if(b.info("DyteParticipants::set_view_mode",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),!["ACTIVE_GRID","PAGINATED"].includes(e))throw b.error("DyteParticipants::setViewMode::invalid_view_mode",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new R(`Invalid view mode: ${e}. Try ACTIVE_GRID or PAGINATED.`);if(this.viewMode===e){b.info("DyteParticipants::setViewMode::view_mode_same_as_previous",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});return}if(this.viewMode=e,e==="PAGINATED"){this.currentPage=1;let t=[];h(this,ci,fi)instanceof Be?{peerIds:t}=(await h(this,ci,fi).getPage(this.currentPage)).payload:t=this.getPeerIdsForCurrentPage(),C.emit(k.GET_PAGE,{peerIds:t})}else e==="ACTIVE_GRID"&&(this.currentPage=0,h(this,ci,fi)instanceof Be?h(this,ci,fi).getPage(this.currentPage):C.emit(k.REFRESH_GRID));this.emit("viewModeChanged",{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount})}getPeerIdsForCurrentPage(){b.info("DyteParticipants::getPeerIdsForCurrentPage()",{pageNavigation:{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});const{compulsoryPeers:e}=this.selectedPeers,t=[...this.joined.keys()],i=Math.max((this.currentPage-1)*(this.maxActiveParticipantsCount-e.length)),r=this.currentPage*(this.maxActiveParticipantsCount-e.length);return e.concat(t.slice(i,r))}async setPage(e){if(b.info("DyteParticipants::set_page",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),this.viewMode!=="PAGINATED")return;if(!Number.isInteger(e))throw b.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new R(`Invalid page: ${e}. Page must be an integer.`);if(e<1||e>this.pageCount)throw b.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new R(`Invalid page: ${e}. Page must be greater than 0 and less than or equal to ${this.pageCount}.`);this.currentPage=e;let t=[];h(this,ci,fi)instanceof Be?{peerIds:t}=(await h(this,ci,fi).getPage(e)).payload:t=this.getPeerIdsForCurrentPage(),C.emit(k.GET_PAGE,{peerIds:t}),this.emit("pageChanged",{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount})}async disableAllAudio(e){if(b.info("DyteParticipants::disable_all_audio",{actions:{disableAllAudio:{allowUnmute:e}}}),!this.roomJoined)throw new R("Can`t disable all audio without joining room");if(h(this,eo).permissions.canAllowParticipantAudio)return h(this,ci,fi).muteAll(e);throw b.error("DyteParticipants::unauthorized_disable_all_audio",{actions:{disableAllAudio:{allowUnmute:e}}}),new R("Unauthorized: User does not have permission to disable peer audio.")}async disableAllVideo(){if(b.info("DyteParticipants::disable_all_video"),!this.roomJoined)throw new R("Can`t disable all video without joining room");if(h(this,eo).permissions.canAllowParticipantVideo)return h(this,ci,fi).muteAllVideo();throw b.error("DyteParticipants::unauthorized_disable_all_video"),new R("Unauthorized: User does not have permission to disable peer video.")}async disableAudio(e){this.joined.get(e).disableAudio()}async disableVideo(e){this.joined.get(e).disableVideo()}async kick(e){this.joined.get(e).kick()}async kickAll(){if(b.info("DyteParticipants::kick_all"),!this.roomJoined)throw new R("Can`t kick all without joining room");if(h(this,eo).permissions.kickParticipant)return h(this,ci,fi).kickAll();throw b.error("DyteParticipants::unauthorized_kick_all"),new R("Unauthorized: User does not have permission to kick peers.")}async broadcastMessage(e,t){if(b.info("DyteParticipants::broadcastMessage"),!this.roomJoined)throw new R("Can`t broadcast message without joining room");if(!(e!=null&&e.trim()))throw new R("`type` must be a non-empty string.");h(this,ci,fi).broadcastMessage(e,t)}async acceptAllRequestToJoinStageRequests(e){if(!this.roomJoined)throw new R("Can`t acceptAllRequestToJoinStageRequests without joining room");h(this,ci,fi).acceptAllRequestToJoinStage(e)}},ci=new WeakSet,fi=function(){return Vt()},eo=new WeakMap,wE);En([E.trace("DyteParticipants.setViewMode")],Er.prototype,"setViewMode",1);En([E.trace("DyteParticipants.setPage")],Er.prototype,"setPage",1);En([E.trace("DyteParticipants.disableAllAudio")],Er.prototype,"disableAllAudio",1);En([E.trace("DyteParticipants.disableAllVideo")],Er.prototype,"disableAllVideo",1);En([E.trace("DyteParticipants.disablePeerAudio")],Er.prototype,"disableAudio",1);En([E.trace("DyteParticipants.disablePeerVideo")],Er.prototype,"disableVideo",1);En([E.trace("DyteParticipants.kickPeer")],Er.prototype,"kick",1);En([E.trace("DyteParticipants.kickAll")],Er.prototype,"kickAll",1);En([E.trace("DyteParticipants.broadcastMessage")],Er.prototype,"broadcastMessage",1);En([E.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")],Er.prototype,"acceptAllRequestToJoinStageRequests",1);Er=En([Ti(e=>{throw new R(e.message,"1200")})],Er);var IZ=Object.defineProperty,OZ=Object.getOwnPropertyDescriptor,ac=(e,t,i,r)=>{for(var n=r>1?void 0:r?OZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&IZ(t,i,n),n},_i,Lc,ss,wt,Pt;class Ba{constructor(t){A(this,wt),v(this,"participants"),A(this,_i,void 0),A(this,Lc,void 0),A(this,ss,new Set),this.participants=new Er(t),I(this,Lc,new Map),I(this,_i,t),this.setupEvents()}get roomJoined(){var t;return((t=h(this,wt,Pt))==null?void 0:t.roomJoined)===!0}updatePageParticipants(t){const i=new Set(t),r=new Map(this.participants.active);if(this.participants.active.forEach((n,s)=>{this.participants.active.delete(s,!i.has(s))}),i.forEach(n=>{if(!this.participants.joined.get(n)){b.warn("updatePageParticipants::participant_not_in_joined_list",{dyteParticipant:{id:n}});return}this.participants.active.add(this.participants.joined.get(n),!r.get(n))}),h(this,wt,Pt)instanceof ve){I(this,ss,new Set(this.participants.active.keys())),Array.from(r.keys()).forEach(s=>{if(i.has(s))return;const a=this.participants.joined.get(s);if(!a)return;const o={producers:a.producers,peerId:a.id};h(this,wt,Pt).deactivatePeers(o)});const n=[];this.participants.active.forEach(s=>{const a={peerId:s.id,producers:s.producers};n.push(a)}),h(this,wt,Pt).activatePeers(n)}}updatePinnedParticipants(){this.participants.pinned.forEach(t=>{t.setIsPinned(!1),this.participants.pinned.delete(t.id)})}refreshGridParticipants(t=!1){const i=[...this.participants.joined.keys()],r=this.participants.selectedPeers.peers;if(this.participants.viewMode!=="ACTIVE_GRID"){b.warn("ParticipantController::refreshGridParticipants::not_refreshing_grid_in_not_active_grid_mode");return}const n=this.participants.maxActiveParticipantsCount-1,s=new Set(r.filter(c=>c!==h(this,_i).id));let a=[...s];const o=n-s.size;if(o>=0){const c=i.filter(d=>!s.has(d)&&d!==h(this,_i).id).slice(0,o);a=[...s].concat(c)}else a=a.slice(0,n);this.updateActiveParticipantsHiveNode(a,t)}updateActiveParticipantsHiveNode(t,i=!1){if(!this.roomJoined){b.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const r=Array.from(this.participants.active.keys()),n=new Map(this.participants.active),s={};t.forEach(l=>{s[l]=!0});const a=[];r.forEach((l,u)=>{(!s[l]||!this.participants.joined.get(l))&&a.push(u)}),t.forEach(l=>{n.get(l)||(r.length<t.length?r.push(l):r[a.shift()]=l)}),r.forEach((l,u)=>{s[l]||r.splice(u,1)}),Array.from(this.participants.active.keys()).forEach(l=>{this.participants.active.delete(l,!s[l])}),r.forEach(l=>{if(!this.participants.joined.get(l)){b.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:l}});return}this.participants.active.add(this.participants.joined.get(l),!n.get(l))}),this.updateWebinarStatusForJoinedParticipants(t),this.participants.active.emit("participantsUpdate"),b.info("ParticipantController::updateActiveParticipants::updating_current_selected_peers",{debuggingHint:i?"Forcefully updating currentActiveGridParticipants set":null}),i&&I(this,ss,new Set);const o=new Set(t),c=[],d=[];if(h(this,ss).forEach(l=>{o.has(l)||c.push(l)}),o.forEach(l=>{h(this,ss).has(l)||d.push(l)}),I(this,ss,o),d.length===0&&c.length===0){b.info("ParticipantController::updateActiveParticipants::current_selected_peers_is_same");return}if(h(this,wt,Pt)instanceof ve){const l=[];c.forEach(u=>{const g=this.participants.joined.get(u);if(!g)return;const m={producers:g.producers,peerId:g.id};l.push(h(this,wt,Pt).deactivatePeers(m))}),Promise.all(l).then(()=>{const u=[];d.forEach(g=>{const m=this.participants.active.get(g);if(!m){b.warn("peer is not in active map which is going to activate, should not happen",{dyteParticipant:{id:g}});return}const f={peerId:m.id,producers:m.producers};u.push(f)}),h(this,wt,Pt).activatePeers(u)}).catch(u=>{b.info("Error on deactivating peers",u)})}}updateActiveParticipants(t){if(!this.roomJoined){b.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const i=Array.from(this.participants.active.keys()),r=new Map(this.participants.active),n={};t.forEach(a=>{n[a]=!0});const s=[];i.forEach((a,o)=>{(!n[a]||!this.participants.joined.get(a))&&s.push(o)}),t.forEach(a=>{r.get(a)||(i.length<t.length?i.push(a):i[s.shift()]=a)}),i.forEach((a,o)=>{n[a]||i.splice(o,1)}),Array.from(this.participants.active.keys()).forEach(a=>{this.participants.active.delete(a,!n[a])}),i.forEach(a=>{if(!this.participants.joined.get(a)){b.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:a}});return}this.participants.active.add(this.participants.joined.get(a),!r.get(a))}),this.updateWebinarStatusForJoinedParticipants(t),this.participants.active.emit("participantsUpdate")}updateActiveParticipantsWithPriorities(t,i=!1){if(!this.roomJoined){b.warn("Skipped::ParticipantController::updateActiveParticipantsWithPriorities",{roomJoined:this.roomJoined});return}t.forEach(r=>{this.participants.joined.get(r.peerId)&&this.participants.selectedPeers.add(r.peerId,r.priority)}),i&&this.refreshGridParticipants()}setupEvents(){C.on(k.PEER_JOINED,async t=>{var i,r,n;const s=new jr(t,h(this,_i));h(this,_i).id!==s.id&&!((i=t.flags)!=null&&i.recorder)&&!((r=s.flags)!=null&&r.hidden_participant)&&!((n=s.flags)!=null&&n.hiddenParticipant)&&(this.participants.joined.add(s),this.participants.waitlisted.delete(s.id),this.participants.currentPage===this.participants.pageCount&&h(this,wt,Pt)instanceof Be&&C.emit(k.GET_PAGE,(await h(this,wt,Pt).getPage(this.participants.currentPage)).payload))}),C.on(k.WAITLIST_PEER_ADDED,({id:t,name:i})=>{this.participants.waitlisted.add(new jr({id:t,displayName:i,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,userId:void 0,flags:{},isHost:!1},h(this,_i)))}),C.on(k.WAITLIST_PEER_REMOVED,({id:t})=>{this.participants.waitlisted.delete(t)}),C.on(k.ROOM_JOINED,t=>{h(this,wt,Pt)instanceof ve&&this.participants.joined.clear(),t.peers.forEach(i=>{var r,n,s;if((r=i.flags)!=null&&r.recorder||(n=i.flags)!=null&&n.hidden_participant||(s=i.flags)!=null&&s.hiddenParticipant)return;const a=new jr(i,h(this,_i));a.id===t.pinnedPeerId&&(a.setIsPinned(!0,!1),this.participants.pinned.add(a)),this.participants.joined.add(a)}),t.requestToJoinPeersList&&t.requestToJoinPeersList.forEach(({id:i})=>{var r;(r=this.participants.joined.get(i))==null||r.setWebinarStageStatus(Jt.REQUESTED_TO_JOIN_STAGE)}),h(this,wt,Pt)instanceof Be&&h(this,wt,Pt).getPage(this.participants.currentPage)}),C.on(k.PEER_CLOSED,async({id:t})=>{if(this.participants.joined.delete(t,!0,!0),this.participants.pinned.delete(t,!0,!0),h(this,wt,Pt)instanceof ve&&(this.participants.selectedPeers.delete(t),this.participants.active.get(t)&&this.participants.currentPage===0)){this.refreshGridParticipants();return}const{currentPage:i}=this.participants,r=h(this,_i).config.maxVideoStreams,n=(Oe.isMobile()?r.mobile:r.desktop)*(i-1),s=this.participants.active.get(t);if(n===0)this.participants.setViewMode("ACTIVE_GRID");else if(this.participants.joined.size<=n)i===2?this.participants.setViewMode("ACTIVE_GRID"):this.participants.setPage(i-1);else if(s){let a=[];h(this,wt,Pt)instanceof Be?{peerIds:a}=(await h(this,wt,Pt).getPage(i)).payload:a=this.participants.getPeerIdsForCurrentPage(),C.emit(k.GET_PAGE,{peerIds:a})}}),C.on(k.ROOM_NODE_DISCONNECTED,()=>{Array.from(this.participants.joined.keys()).forEach(t=>{this.participants.joined.delete(t)}),Array.from(this.participants.active.keys()).forEach(t=>{this.participants.active.delete(t)}),Array.from(this.participants.pinned.keys()).forEach(t=>{this.participants.pinned.delete(t)}),this.participants.currentPage=0,this.participants.viewMode="ACTIVE_GRID",this.participants.emit("viewModeChanged",{viewMode:"ACTIVE_GRID",currentPage:this.participants.currentPage,pageCount:this.participants.pageCount}),I(this,ss,new Set)}),C.on(k.PEER_MUTED,({peerId:t})=>{const i=this.participants.joined.get(t);i&&i.setAudioEnabled(!1)}),C.on(k.PEER_UNMUTED,({peerId:t})=>{const i=this.participants.joined.get(t);i&&i.setAudioEnabled(!0)}),C.on(k.CONSUMER_PAUSED,({id:t})=>{this.processConsumerPaused(t)}),C.on(k.CONSUMER_RESUMED,({id:t})=>{this.processConsumerResumed(t)}),C.on(k.NEW_CONSUMER,({id:t})=>{this.processNewConsumer(t)}),C.on(k.CONSUMER_CLOSED,({id:t})=>{this.processConsumerClosed(t)}),C.on(k.GET_PAGE,({peerIds:t})=>{this.participants.viewMode==="PAGINATED"&&this.updatePageParticipants(t)}),C.on(k.SELECTED_PEERS,({peerIds:t,compulsoryPeers:i})=>{if(this.participants.viewMode!=="ACTIVE_GRID")return;if(h(this,wt,Pt)instanceof Be){this.updateActiveParticipants(t);return}const r=t.map((s,a)=>({peerId:s,priority:a+1})),n=i==null?void 0:i.map((s,a)=>({peerId:s,priority:-(a+1)}));r.push(...n!=null?n:[]),r.length>0&&this.updateActiveParticipantsWithPriorities(r)}),C.on(k.SELECTED_PEERS_DIFF,({entries:t})=>{this.participants.viewMode==="ACTIVE_GRID"&&this.updateActiveParticipantsWithPriorities(t,!0)}),C.on(k.REFRESH_GRID,(t=!1)=>{this.participants.viewMode==="ACTIVE_GRID"&&this.refreshGridParticipants(t)}),C.on(k.NEW_PRODUCER,({peerId:t,producer:i})=>{const r=this.participants.joined.get(t);if(!r){b.warn("ParticipantController::NEW_PRODUCER::participant not found",{producer:{id:i==null?void 0:i.producerId,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}},dyteParticipant:{id:t}});return}r.producers.push(i),b.info("ParticipantController::NEW_PRODUCER::producer_added_to_participant",{producer:{id:i==null?void 0:i.producerId,peerId:t,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}}),(i==null?void 0:i.kind)==="audio"||i!=null&&i.screenShare||h(this,ss).has(t)?h(this,wt,Pt).createConsumer({producingPeerId:t,producerId:i.producerId,screenShare:i.screenShare}):b.info("ParticipantController::NEW_PRODUCER::not_consuming_producer",{producer:{id:i==null?void 0:i.producerId,peerId:t,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}})}),C.on(k.PRODUCER_CLOSED,({peerId:t,producerId:i})=>{const r=this.participants.joined.get(t);if(!r){b.warn("ParticipantController::NEW_PRODUCER::participant not found",{dyteParticipant:{id:t}});return}r.producers=r.producers.filter(n=>n.producerId!==i)}),C.on(k.PRODUCER_TOGGLE,({peerId:t,producerId:i,paused:r,kind:n})=>{const s=this.participants.joined.get(t);if(s&&n==="audio"){s.setAudioEnabled(!r);const a=s.producers.find(o=>o.producerId===i);a&&(a.pause=r)}}),C.on(k.ACTIVE_SPEAKER,({peerId:t,volume:i})=>{this.participants.lastActiveSpeaker=t,this.participants.emit("activeSpeaker",{peerId:t,volume:i})}),C.on(k.ROOM_MESSAGE,async({payload:t,type:i,timestamp:r})=>{this.participants.emit("broadcastedMessage",{type:i,payload:t,timestamp:r})}),C.on(k.LOW_CONSUMER_SCORE,({peerId:t,score:i,kind:r})=>{const n=this.participants.joined.get(t);n&&(n.emit("poorConnection",{score:i,kind:r}),this.participants.emit("poorConnection",{participantId:t,score:i,kind:r}))}),C.on(k.CONSUMER_SCORE_UPDATE,({score:t,kind:i,appData:r,peerId:n})=>{var s;const a=i==="video"&&((s=r==null?void 0:r.screenShare)!=null?s:!1),o=this.participants.joined.get(n);o&&(o.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:t,participantId:n}),this.participants.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:t,participantId:n}))}),C.on(k.PEER_PINNED,({peerId:t})=>{if(!t){h(this,_i).isPinned&&h(this,_i).setIsPinned(!1),this.participants.pinned.size!==0&&this.updatePinnedParticipants();return}if(t===h(this,_i).id){this.participants.pinned.size!==0&&this.updatePinnedParticipants(),h(this,_i).setIsPinned(!0);return}const i=this.participants.joined.get(t);h(this,_i).isPinned&&h(this,_i).setIsPinned(!1),this.updatePinnedParticipants(),i.setIsPinned(!0),this.participants.pinned.add(i),h(this,wt,Pt)instanceof ve&&h(this,wt,Pt).activatePeers([{peerId:i.id,producers:i.producers}]).catch(r=>{b.error("unable to create consumers",{error:r})})}),C.on(k.PEER_REQUESTED_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.REQUESTED_TO_JOIN_STAGE)}),C.on(k.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.OFF_STAGE)}),C.on(k.PEER_REJECTED_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.OFF_STAGE)}),C.on(k.PEER_ADDED_TO_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.ACCEPTED_TO_JOIN_STAGE)}),C.on(k.PEER_REMOVED_FROM_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.OFF_STAGE),this.participants.pinned.delete(t)}),C.on(k.PEER_STARTED_PRESENTING,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.ON_STAGE)}),C.on(k.PEER_STOPPED_PRESENTING,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(Jt.OFF_STAGE),this.participants.pinned.delete(t)})}processMedia(t){var i;const r=h(this,wt,Pt).getConsumers(),{peerId:n,kind:s,appData:a,remotelyPaused:o,track:c,producerId:d}=(i=r.get(t))!=null?i:{};if(!n)return b.warn("processMedia::Peer ID is undefined",{consumer:{id:t,kind:s,peerId:n,appData:{supportsRemoteControl:a==null?void 0:a.supportsRemoteControl,screenShare:a==null?void 0:a.screenShare},remotelyPaused:o,producerId:d}}),{};const l=a;return b.info("ParticipantController::processMedia",{consumer:{id:t,peerId:n,kind:s,appData:l,remotelyPaused:o,producerId:d}}),h(this,Lc).set(t,{type:s,peerId:n,appData:l,remotelyPaused:o,producerId:d}),{peerId:n,kind:s,appData:l,remotelyPaused:o,track:c,producerId:d}}processConsumerClosed(t){const{peerId:i,type:r,appData:n,remotelyPaused:s,producerId:a}=h(this,Lc).get(t)||{},o=this.participants.joined.get(i);if(b.info("ParticipantController::processConsumerClosed",{consumer:{id:t,peerId:i,appData:n,kind:r,remotelyPaused:s,producerId:a}}),h(this,Lc).delete(t),!!o){if(n&&n.screenShare){o.setScreenShareEnabled(!1),Z.consumerSharedMediaState(t,{screen:!1}),o.screenShareTracks={audio:void 0,video:void 0};return}r==="audio"?(o.setAudioEnabled(!1),Z.consumerSharedMediaState(t,{audio:!1}),o.audioTrack=void 0):r==="video"&&(o.setVideoEnabled(!1),Z.consumerSharedMediaState(t,{video:!1}),o.videoTrack=void 0)}}processConsumerResumed(t){const{peerId:i,kind:r,appData:n,track:s,remotelyPaused:a,producerId:o}=this.processMedia(t);if(!i)return;b.info("ParticipantController::processConsumerResumed",{consumer:{id:t,peerId:i,kind:r,appData:n,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(n.screenShare){if(r==="video"?c.screenShareTracks.video=s:r==="audio"&&(c.screenShareTracks.audio=s),c.screenShareEnabled)return;c.setScreenShareEnabled(!0),Z.consumerSharedMediaState(t,{screen:!0});return}r==="video"?(c.videoTrack=s,c.setVideoEnabled(!0),Z.consumerSharedMediaState(t,{video:!0})):r==="audio"&&(c.audioTrack=s,c.setAudioEnabled(c.audioEnabled),Z.consumerSharedMediaState(t,{audio:c.audioEnabled}))}}processConsumerPaused(t){b.info(`ParticipantController::processConsumerPaused called for consumerId: ${t}`);const{peerId:i,kind:r,track:n,appData:s,remotelyPaused:a,producerId:o}=this.processMedia(t);if(!i)return;b.info("ParticipantController::processConsumerPaused",{consumer:{id:t,peerId:i,kind:r,appData:s,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);c&&(r==="video"?(c.videoTrack=n,c.setVideoEnabled(!1),Z.consumerSharedMediaState(t,{video:!1})):r==="audio"&&(c.audioTrack=n,c.setAudioEnabled(c.audioEnabled),Z.consumerSharedMediaState(t,{audio:c.audioEnabled})))}processNewConsumer(t){const{peerId:i,kind:r,remotelyPaused:n,track:s,appData:a,producerId:o}=this.processMedia(t);if(!i)return;b.info("ParticipantController::processNewConsumer",{consumer:{id:t,peerId:i,kind:r,remotelyPaused:n,appData:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(a.screenShare){r==="video"?c.screenShareTracks.video=s:r==="audio"&&(c.screenShareTracks.audio=s),(!n||h(this,_i).permissions.isRecorder||ee.hasFeature(re.SCREEENSHARE_ERR_HACK))&&c.setScreenShareEnabled(!0),a.supportsRemoteControl&&(c.supportsRemoteControl=!0);return}r==="video"?(c.videoTrack=s,n||c.setVideoEnabled(!0),Z.consumerSharedMediaState(t,{video:!n})):r==="audio"&&h(this,wt,Pt)instanceof ve&&(c.audioTrack=s,n||c.setAudioEnabled(!0),Z.consumerSharedMediaState(t,{audio:!n}))}}updateWebinarStatusForJoinedParticipants(t){t.forEach(i=>{const r=this.participants.joined.get(i);r&&(r.webinarStageStatus=Jt.ON_STAGE)})}}_i=new WeakMap,Lc=new WeakMap,ss=new WeakMap,wt=new WeakSet,Pt=function(){return Vt()};ac([E.trace("ParticipantController.updatePageParticipants")],Ba.prototype,"updatePageParticipants",1);ac([E.trace("ParticipantController.setupEvents")],Ba.prototype,"setupEvents",1);ac([E.trace("ParticipantController.processMedia")],Ba.prototype,"processMedia",1);ac([E.trace("ParticipantController.processConsumerClosed")],Ba.prototype,"processConsumerClosed",1);ac([E.trace("ParticipantController.processConsumerResumed")],Ba.prototype,"processConsumerResumed",1);ac([E.trace("ParticipantController.processConsumerPaused")],Ba.prototype,"processConsumerPaused",1);ac([E.trace("ParticipantController.processNewConsumer")],Ba.prototype,"processNewConsumer",1);var MZ=Object.defineProperty,LZ=Object.getOwnPropertyDescriptor,DZ=(e,t,i,r)=>{for(var n=r>1?void 0:r?LZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&MZ(t,i,n),n},lh,mv,fv,uh,SE;let ky=(SE=class extends Ot{constructor(e,t,i,r){super(),A(this,lh),A(this,fv,void 0),A(this,uh,void 0),v(this,"viewType"),v(this,"meetingStartedTimestamp"),v(this,"meetingTitle"),I(this,fv,e),this.viewType=t,I(this,uh,i),this.meetingTitle=r}get joined(){var e;return(e=h(this,lh,mv))==null?void 0:e.roomJoined}get roomName(){var e;return(e=h(this,lh,mv))==null?void 0:e.roomName}get socketConnected(){return h(this,uh).isConnected}},lh=new WeakSet,mv=function(){return Vt()},fv=new WeakMap,uh=new WeakMap,SE);ky=DZ([Ti(e=>{throw new R(e.message,"0800")})],ky);var NZ=Object.defineProperty,UZ=Object.getOwnPropertyDescriptor,jZ=(e,t,i,r)=>{for(var n=r>1?void 0:r?UZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&NZ(t,i,n),n};class h6{constructor(t,i,r){v(this,"meta"),this.meta=new ky(t,Ee.isV2AuthToken?t.config.viewType:t.permissions.viewType,i,r),this.setupEvents()}get roomName(){return this.meta.roomName}setupEvents(){C.on(k.ROOM_JOINED,t=>{t.startedAt&&(this.meta.meetingStartedTimestamp=new Date(t.startedAt),this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp}))}),C.on(k.ROOM_STATE,({createdAt:t})=>{const i=this.meta.meetingStartedTimestamp;if(t&&!i){const r=new Date(t*1e3);this.meta.meetingStartedTimestamp=r,this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp})}}),C.on(k.ROOM_NODE_CONNECTED,()=>{this.meta.emit("connected")}),C.on(k.ROOM_NODE_DISCONNECTED,()=>{this.meta.emit("disconnected")}),C.on(k.ICE_CONNECTED,({transport:t})=>{this.meta.emit("iceConnected",{transport:t})}),C.on(k.ICE_DISCONNECTED,({transport:t})=>{this.meta.emit("iceDisconnected",{transport:t})}),C.on(k.ICE_RECONNECTING,({transport:t})=>{this.meta.emit("iceReconnecting",{transport:t})}),C.on(k.ICE_FAILED,({transport:t})=>{this.meta.emit("iceFailed",{transport:t})}),C.on(k.PRODUCER_SCORE_UPDATE,({score:t})=>{t<5&&this.meta.emit("poorConnection",{score:t})}),C.on(k.SOCKET_SERVICE_CONNECTED,()=>{this.meta.emit("socketConnected")}),C.on(k.SOCKET_SERVICE_DISCONNECTED,()=>{this.meta.emit("socketDisconnected")}),C.on(k.SOCKET_SERVICE_RECONNECTING,()=>{this.meta.emit("socketReconnecting")}),C.on(k.SOCKET_SERVICE_RECONNECTION_ATTEMPT,({attempt:t})=>{this.meta.emit("socketReconnectAttempt",{attempt:t})}),C.on(k.SOCKET_SERVICE_RECONNECT_FAILURE,({attempt:t})=>{this.meta.emit("socketReconnectFailure",{attempt:t})}),C.on(k.SOCKET_SERVICE_RECONNECTED,()=>{this.meta.emit("socketReconnected")}),C.on(k.SOCKET_SERVICE_FAILED,()=>{this.meta.emit("socketFailure")}),C.on(k.ROOM_NODE_CONNECTION_ERROR,t=>{const{message:i}=t;i.match(/room '([a-z0-9-]+)' not found/i)&&this.meta.emit("connectionError",{reason:"ROOM_NOT_FOUND"})})}}jZ([E.trace("MetaController.setupEvents")],h6.prototype,"setupEvents",1);var $Z=Object.defineProperty,VZ=Object.getOwnPropertyDescriptor,FZ=(e,t,i,r)=>{for(var n=r>1?void 0:r?VZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&$Z(t,i,n),n};const Wt={getPeer:14,getPeers:15,chatMessage:16,getRoomName:17,getDisplayTitle:18,getPluginInitiator:19,customPluginEventToParent:20,peerJoined:22,peerLeft:23,sendData:24};var Ui,to,ur,El,Tl,kl,ji,Ji,EE;let Cy=(EE=class extends Ot{constructor({baseURL:e,createdAt:t,description:i,id:r,name:n,organizationId:s,picture:a,private:o,published:c,staggered:d,tags:l,type:u,updatedAt:g},m,f,w,S,y){super(),A(this,ji),A(this,Ui,void 0),A(this,to,void 0),v(this,"baseURL"),v(this,"createdAt"),v(this,"description"),v(this,"id"),v(this,"name"),A(this,ur,void 0),A(this,El,void 0),A(this,Tl,void 0),v(this,"organizationId"),v(this,"picture"),v(this,"private"),v(this,"published"),v(this,"staggered"),v(this,"tags"),v(this,"type"),v(this,"updatedAt"),v(this,"config"),A(this,kl,void 0),v(this,"active"),v(this,"iframes"),v(this,"enabledBy"),this.baseURL=e,this.createdAt=new Date(t),this.description=i,this.id=r,this.name=n,I(this,ur,w),this.organizationId=s,this.picture=a,this.private=o,this.published=c,this.staggered=d,this.tags=l,this.type=u,this.updatedAt=new Date(g),this.active=!1,this.iframes=new Map,I(this,Ui,m),I(this,to,f),I(this,El,S),I(this,Tl,y),this.enabledBy=""}get roomJoined(){var e;return((e=h(this,ji,Ji))==null?void 0:e.roomJoined)===!0}sendIframeEvent(e){this.iframes.size&&[...this.iframes.keys()].forEach(t=>{const{iframe:i}=this.iframes.get(t);i&&(i instanceof HTMLIFrameElement?i.contentWindow.postMessage(e,"*"):i.postMessage(JSON.stringify(e)))})}async handleIframeMessage(e){var t,i,r,n;let s;if(h(this,to)==="socket-service"){const c=e,{payload:d,uuid:l,type:u}=c;switch(u){case de.customPluginEventToRoom:{h(this,Ui).customPluginEventToRoom(this.id,d,l);break}case de.customPluginEventToPeers:{h(this,Ui).customPluginEventToPeers(this.id,d,d.peerIds,l);break}case de.enablePluginForRoom:{h(this,Ui).enablePluginForRoom(this.id,l);break}case de.enablePluginForPeers:{h(this,Ui).enablePluginForPeers(this.id,d.peerIds,l);break}case de.disablePluginForRoom:{h(this,Ui).disablePluginForRoom(this.id,l);break}case de.disablePluginForPeers:{h(this,Ui).disablePluginForPeers(this.id,d.peerIds,l);break}case de.storeInsertKeys:{h(this,Ui).storeInsertKeys(this.id,d.store,d.insertKeys,l);break}case de.storeGetKeys:{h(this,Ui).storeGetKeys(this.id,d.store,d.getKeys,l);break}case de.storeDeleteKeys:{h(this,Ui).storeDeleteKeys(this.id,d.store,d.deleteKeys,l);break}case de.storeDelete:{h(this,Ui).storeDelete(this.id,d.store,l);break}case Wt.chatMessage:{const{messagePayload:g,peerIds:m}=d;if(!h(this,Tl)){this.sendIframeEvent({type:Wt.chatMessage,uuid:c.uuid,payload:{error:"Chat is disabled for this room."}});return}try{await h(this,Tl).sendMessage(g,m),this.sendIframeEvent({type:Wt.chatMessage,uuid:c.uuid,payload:{success:!0}})}catch(f){this.sendIframeEvent({type:Wt.chatMessage,uuid:c.uuid,payload:{error:f}})}break}case Wt.getPeer:{let g;const{peerId:m}=d,f={...h(this,ur),isRecorder:(t=h(this,ur).permissions)==null?void 0:t.isRecorder};m?(g=h(this,El).joined.get(d.peerId),h(this,ur).id===m&&(g=f)):g=f,this.sendIframeEvent({type:Wt.getPeer,payload:{peer:g&&ay(g)},uuid:c.uuid});break}case Wt.getPeers:{const g=h(this,El).joined.toArray().map(m=>ay(m));this.sendIframeEvent({type:Wt.getPeers,payload:{peers:g},uuid:c.uuid});break}case Wt.getPluginInitiator:{this.sendIframeEvent({type:Wt.getPluginInitiator,payload:{enabledBy:this.enabledBy},uuid:c.uuid});break}case Wt.getDisplayTitle:{this.sendIframeEvent({type:Wt.getDisplayTitle,payload:{displayTitle:h(this,ji,Ji).meetingTitle},uuid:c.uuid});break}case Wt.getRoomName:{this.sendIframeEvent({type:Wt.getRoomName,payload:{roomName:h(this,ji,Ji).roomName},uuid:c.uuid});break}case Wt.customPluginEventToParent:{this.emit(c.payload.eventName,c.payload.data);break}}return}const a=(c,d)=>{if(h(this,ur).userId===c)return h(this,ur).id;let l;return d.forEach(u=>{u.userId===c&&(l=u.id)}),l},o=e;switch(o.type){case"pluginEvent":case"storePluginData":case"getPluginData":case"enablePluginForAll":case"enablePluginForUser":case"disablePluginForUser":case"chatMessage":{s=await h(this,ji,Ji).sendMessage(o),this.sendIframeEvent(s);break}case"getJoinedPeers":{s=await h(this,ji,Ji).getRoomState(),this.sendIframeEvent({type:"websocket/get-joined-peers",payload:{...o.payload,peers:s.payload.roomState.peers}});break}case"getPeerInfo":{s=await h(this,ji,Ji).sendMessage({type:o.type,payload:{...o.payload,peerId:(r=(i=o.payload)==null?void 0:i.peerId)!=null?r:h(this,ur).id}}),this.sendIframeEvent(s);break}case"getRoomState":{s=await h(this,ji,Ji).getRoomState();const{plugins:c,peers:d}=s.payload.roomState,{enabledBy:l}=c.find(g=>g.id===this.id),u=a(l,d);this.sendIframeEvent({type:"websocket/get-room-state",payload:{...o.payload,roomName:s.payload.roomState.roomName,pluginInitiatorPeerId:u,pluginInitiatorUserId:l,peers:s.payload.roomState.peers,displayTitle:s.payload.roomState.displayTitle,roomUUID:s.payload.roomState.roomUUID,currentPeer:h(this,ur).id,isRecorder:(n=h(this,ur).permissions)==null?void 0:n.isRecorder}});break}case"getPluginInitiatorId":{s=await h(this,ji,Ji).getRoomState();const{plugins:c,peers:d}=s.payload.roomState,{enabledBy:l}=c.find(g=>g.id===this.id),u=a(l,d);this.sendIframeEvent({type:"websocket/get-plugin-initiator-peer-id",payload:{...o.payload,pluginInitiatorPeerId:u}});break}case"getPluginInitiatorUserId":{s=await h(this,ji,Ji).getRoomState();const{plugins:c}=s.payload.roomState,{enabledBy:d}=c.find(l=>l.id===this.id);this.sendIframeEvent({type:"websocket/get-plugin-initiator-user-id",payload:{...o.payload,pluginInitiatorUserId:d}});break}case"pluginEventToParent":{this.emit(o.payload.eventName,o.payload.data);break}case"toggleViewMode":{this.emit("toggleViewMode",o.payload.data);break}}}sendData(e){if(h(this,to)==="socket-service"){this.sendIframeEvent({type:Wt.sendData,uuid:"",payload:e});return}this.sendIframeEvent({type:k.PLUGIN_INTERNAL_DATA,payload:{pluginId:this.id,data:e}})}removePluginView(e="default"){var t;const{iframe:i,listener:r}=(t=this.iframes.get(e))!=null?t:{};(i||r)&&(i instanceof HTMLIFrameElement?window.removeEventListener("message",r):i.props.onMessage=void 0,this.iframes.delete(e))}addPluginView(e,t="default"){var i;if(!h(this,kl))throw b.error("DytePlugin::addPluginView::no_auth_token_set_for_plugin"),new R("No auth token set for plugin.");if(!e)throw b.error("DytePlugin::addPluginView::iframe_was_not_provided"),new R("Iframe was not provided.");this.removePluginView(t);const r=e,n=new URL(this.baseURL),s={auth:h(this,kl),parent:!navigator.isReactNative&&window.location.origin,backend:Ye.apiBase,pluginId:this.id,roomName:(i=h(this,ji,Ji).roomName)!=null?i:"",displayTitle:h(this,ji,Ji).meetingTitle};if(Object.keys(s).forEach(a=>{n.searchParams.set(a,s[a])}),r instanceof HTMLIFrameElement){r.src=n.href,r.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",r.title=t;const a=async o=>{o.source===e.contentWindow&&await this.handleIframeMessage(o.data)};window.addEventListener("message",a),this.iframes.set(t,{iframe:r,listener:a})}else r.props.onMessage=a=>{this.handleIframeMessage(JSON.parse(a.nativeEvent.data))},this.iframes.set(t,{iframe:r})}setActive(e){var t,i;if(this.active=e,e){this.emit("stateUpdate",{active:this.active,pluginId:this.id,bind:this.addPluginView.bind(this),views:(t=this.config)==null?void 0:t.views});return}this.active=!1,this.emit("stateUpdate",{active:this.active,pluginId:this.id,views:(i=this.config)==null?void 0:i.views})}async activateForSelf(){const e=hi(),t=await e.authorizePlugin(this.id);I(this,kl,t);try{const i=await e.getPluginConfig(this.baseURL);this.config=i}catch(i){b.error("DytePlugin::activateForSelf",{error:i})}this.setActive(!0),this.emit("enabled")}deactivateForSelf(){[...this.iframes.keys()].forEach(e=>{this.removePluginView(e)}),this.iframes.clear(),this.setActive(!1),this.emit("closed")}async enable(){return this.activateForSelf()}disable(){return this.deactivateForSelf()}async activate(){var e,t;if((t=(e=h(this,ur).permissions)==null?void 0:e.plugins)!=null&&t.canStart){if(h(this,to)==="socket-service"){h(this,Ui).addPlugin(this.id,this.staggered);return}await h(this,ji,Ji).addRoomPlugin(this)}}async deactivate(){var e,t;if((t=(e=h(this,ur).permissions)==null?void 0:e.plugins)!=null&&t.canClose){if(h(this,to)==="socket-service"){h(this,Ui).removePlugin(this.id);return}await h(this,ji,Ji).removeRoomPlugin(this)}}},Ui=new WeakMap,to=new WeakMap,ur=new WeakMap,El=new WeakMap,Tl=new WeakMap,kl=new WeakMap,ji=new WeakSet,Ji=function(){return Vt()},EE);Cy=FZ([Ti(e=>{throw new R(e.message,"0600")})],Cy);class TE extends Kb{constructor(){super({onAddEvent:"pluginAdded",onDeleteEvent:"pluginDeleted"})}add(t,i=!0){return super.add(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}var BZ=Object.defineProperty,zZ=Object.getOwnPropertyDescriptor,HZ=(e,t,i,r)=>{for(var n=r>1?void 0:r?zZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&BZ(t,i,n),n};let Py=class{constructor(){v(this,"all"),v(this,"active"),this.all=new TE,this.active=new TE}};Py=HZ([Ti(e=>{throw new R(e.message,"0600")})],Py);var GZ=Object.defineProperty,WZ=Object.getOwnPropertyDescriptor,oc=(e,t,i,r)=>{for(var n=r>1?void 0:r?WZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&GZ(t,i,n),n},jn=(e=>(e[e.TEXT=0]="TEXT",e[e.IMAGE=1]="IMAGE",e[e.FILE=2]="FILE",e))(jn||{}),In;class za{constructor(t){A(this,In,void 0),I(this,In,t)}getChatMessages(){return h(this,In).sendMessagePromise(Ai.getMessages)}async getChatMessagesPaginated(t,i,r,n=0){const s={timeStamp:t,size:i,from:n,reversed:r},a=await h(this,In).sendMessagePromise(Ai.getPaginatedMessages,PW.toBinary(s));return a.payload?xW.fromBinary(a.payload):{messages:[],next:!1}}sendMessageToRoom(t,i){const r={payloadType:i,payload:t};h(this,In).sendMessage(Ai.sendMessageToRoom,MW.toBinary(r))}sendMessageToPeers(t,i,r){const n={payloadType:i,peerIds:r,payload:t};h(this,In).sendMessage(Ai.sendMessageToPeers,NW.toBinary(n))}sendMessage(t,i,r){if(r&&r.length>0){this.sendMessageToPeers(t,i,r);return}this.sendMessageToRoom(t,i)}editMessage(t,i,r,n){const s={chatId:t,pinned:n,payloadType:r,payload:i};h(this,In).sendMessage(Ai.editMessage,$W.toBinary(s))}deleteMessage(t){h(this,In).sendMessage(Ai.deleteMessage,BW.toBinary({chatId:t}))}on(t,i){let r,n;switch(t){case Ai.sendMessageToRoom:{r=tv.fromBinary.bind(tv),n=tv.create();break}case Ai.sendMessageToPeers:{r=iv.fromBinary.bind(iv),n=iv.create();break}case Ai.editMessage:{r=rv.fromBinary.bind(rv),n=rv.create();break}case Ai.deleteMessage:{r=nv.fromBinary.bind(nv),n=nv.create();break}}if(!r){b.warn(`ChatSocketHandler::Event ${t} is not recognized`);return}h(this,In).on(t,({payload:s})=>{let a=n;try{a=r(s)}catch(o){b.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}In=new WeakMap;oc([E.trace("SocketService.getChatMessages")],za.prototype,"getChatMessages",1);oc([E.trace("SocketService.getChatMessagesPaginated")],za.prototype,"getChatMessagesPaginated",1);oc([E.trace("SocketService.sendMessageToRoom")],za.prototype,"sendMessageToRoom",1);oc([E.trace("SocketService.sendMessageToPeers")],za.prototype,"sendMessageToPeers",1);oc([E.trace("SocketService.sendMessage")],za.prototype,"sendMessage",1);oc([E.trace("SocketService.editMessage")],za.prototype,"editMessage",1);oc([E.trace("SocketService.deleteMessage")],za.prototype,"deleteMessage",1);var qZ=Object.defineProperty,JZ=Object.getOwnPropertyDescriptor,Xn=(e,t,i,r)=>{for(var n=r>1?void 0:r?JZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&qZ(t,i,n),n};const yd=["text","image","file","poll"];var je,Cc,Kr,pr,Gs,io,kE;let Hr=(kE=class extends Ot{constructor(e,t,i,r){super(),A(this,Gs),v(this,"messages"),A(this,je,void 0),A(this,Cc,void 0),A(this,Kr,void 0),A(this,pr,void 0),I(this,Kr,e),I(this,pr,t),I(this,je,i),I(this,Cc,r),this.messages=[]}get roomJoined(){var e;return((e=h(this,Gs,io))==null?void 0:e.roomJoined)===!0}async sendTextMessage(e,t){var i,r,n,s,a,o;if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.text))throw b.error("sendTextMessage::public_chat_permission_denied"),new R("Could not send message to public chat.","0501");if(t&&t.length>0&&(!((a=h(this,je).permissions)!=null&&a.chatPrivate.canSend)||!((o=h(this,je).permissions)!=null&&o.chatPrivate.text)))throw b.error("sendTextMessage::private_chat_permission_denied"),new R("Could not send message to private chat.","0501");if(!e)throw b.error("sendTextMessage::message_can_not_be_empty"),new R("Message can not be empty.","0502");if(h(this,pr)==="socket-service"){let d=[];t&&t.length>0&&(t.push(h(this,je).id),d=h(this,Cc).joined.toArray().filter(l=>t.includes(l.id)).map(l=>l.userId),d.push(h(this,je).userId)),h(this,Kr).sendMessage(e,jn.TEXT,t);return}if(t!==void 0&&t.length>0){b.error("sendTextMessage::private_chat_unsupported");return}const c={userId:h(this,je).userId,displayName:h(this,je).name,message:e,type:yd.indexOf("text"),time:+new Date};if(!this.roomJoined)throw b.error("DyteChat.sendTextMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new R("Can`t sendTextMessage without joining room");await h(this,Gs,io).sendChatMessage(c)}async sendImageMessage(e,t){var i,r,n,s,a,o;if(t&&t.length>0){if(!((i=h(this,je).permissions)!=null&&i.chatPrivate.canSend)||!((r=h(this,je).permissions)!=null&&r.chatPrivate.files)){b.error("sendImageMessage::private_chat_permission_denied");return}}else if(!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.canSend)||!((o=(a=h(this,je).permissions)==null?void 0:a.chatPublic)!=null&&o.files)){b.error("sendImageMessage::permission_denied");return}if(!e){b.error("sendImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(e.type)){b.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:e.type}});return}try{const c=hi(),{getLocation:d,putLocation:l}=await c.getPresignedUrls(e.name);if(await c.uploadFile(e,l),h(this,pr)==="socket-service"){let g=[];t&&t.length>0&&(t.push(h(this,je).id),g=h(this,Cc).joined.toArray().filter(m=>t.includes(m.id)).map(m=>m.userId),g.push(h(this,je).userId)),h(this,Kr).sendMessage(d,jn.IMAGE,t);return}if(t!==void 0&&t.length>0){b.error("sendImageMessage::private_chat_unsupported");return}const u={userId:h(this,je).userId,displayName:h(this,je).name,type:yd.indexOf("image"),link:d,time:+new Date};if(!this.roomJoined)throw b.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new R("Can`t sendImageMessage without joining room");await h(this,Gs,io).sendChatMessage(u)}catch{throw new R("Error sending image message.")}}async sendFileMessage(e,t){var i,r,n,s,a,o;if(t&&t.length>0){if(!((i=h(this,je).permissions)!=null&&i.chatPrivate.canSend)||!((r=h(this,je).permissions)!=null&&r.chatPrivate.files)){b.error("sendFileMessage::private_chat_permission_denied");return}}else if(!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.canSend)||!((o=(a=h(this,je).permissions)==null?void 0:a.chatPublic)!=null&&o.files)){b.error("sendFileMessage::permission_denied");return}if(!e){b.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const c=hi(),{getLocation:d,putLocation:l}=await c.getPresignedUrls(e.name);if(await c.uploadFile(e,l),h(this,pr)==="socket-service"){let g=[];t&&t.length>0&&(t.push(h(this,je).id),g=h(this,Cc).joined.toArray().filter(f=>t.includes(f.id)).map(f=>f.userId),g.push(h(this,je).userId));const m=JSON.stringify({link:d,name:e.name,size:"size"in e?e.size:0});h(this,Kr).sendMessage(m,jn.FILE,t);return}if(t!==void 0&&t.length>0){b.error("sendFileMessage::private_chat_unsupported");return}const u={userId:h(this,je).userId,displayName:h(this,je).name,type:yd.indexOf("file"),link:d,name:e.name,size:"size"in e?e.size:0,time:+new Date};if(!this.roomJoined)throw b.error("DyteChat.sendFileMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new R("Can`t sendFileMessage without joining room");await h(this,Gs,io).sendChatMessage(u)}catch{throw new R("Error sending file message.")}}async sendMessage(e,t){switch(e.type){case"text":await this.sendTextMessage(e.message,t);break;case"image":await this.sendImageMessage(e.image,t);break;case"file":await this.sendFileMessage(e.file,t);break;default:b.error("sendMessage::message_type_not_supported",{dyteChat:{messageType:e.type}});break}}async editTextMessage(e,t){var i,r,n,s;if(h(this,pr)!=="socket-service"){b.warn("editTextMessage::Coming soon!");return}if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.text)){b.error("editTextMessage::permission_denied");return}if(!t){b.error("editTextMessage::message_can_not_be_empty");return}h(this,Kr).editMessage(e,t,jn.TEXT)}async editImageMessage(e,t){var i,r,n,s;if(h(this,pr)!=="socket-service"){b.warn("editImageMessage::Coming soon!");return}if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.files)){b.error("editImageMessage::permission_denied");return}if(!t){b.error("editImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(t.type)){b.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:t.type}});return}try{const a=hi(),{getLocation:o,putLocation:c}=await a.getPresignedUrls(t.name);await a.uploadFile(t,c),h(this,Kr).editMessage(e,o,jn.IMAGE)}catch{throw new R("Error editing image message.")}}async editFileMessage(e,t){var i,r,n,s;if(h(this,pr)!=="socket-service"){b.warn("editFileMessage::Coming soon!");return}if(!((r=(i=h(this,je).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=h(this,je).permissions)==null?void 0:n.chatPublic)!=null&&s.files)){b.error("sendFileMessage::permission_denied");return}if(!t){b.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const a=hi(),{getLocation:o,putLocation:c}=await a.getPresignedUrls(t.name);await a.uploadFile(t,c),h(this,Kr).editMessage(e,JSON.stringify({link:o,name:t.name,size:"size"in t?t.size:0}),jn.FILE)}catch{throw new R("Error editing file message.")}}async editMessage(e,t){if(h(this,pr)!=="socket-service"){b.warn("editMessage::Coming soon!");return}switch(t.type){case"text":{this.editTextMessage(e,t.message);break}case"image":{this.editImageMessage(e,t.image);break}case"file":{this.editFileMessage(e,t.file);break}default:{b.error("editMessage::message_type_not_supported",{dyteChat:{messageType:t.type}});break}}}async deleteMessage(e){if(h(this,pr)!=="socket-service"){b.warn("editMessage::Coming soon!");return}h(this,Kr).deleteMessage(e)}getMessagesByUser(e){return this.messages.filter(t=>t.userId===e)}getMessagesByType(e){return this.messages.filter(t=>t.type===e)}async pin(e){if(h(this,pr)!=="socket-service"){if(!this.roomJoined)throw new R("Can`t pin message without joining room");await h(this,Gs,io).pinChatMessage({id:e})}}async unpin(e){if(h(this,pr)!=="socket-service"){if(!this.roomJoined)throw new R("Can`t unpin message without joining room");await h(this,Gs,io).unpinChatMessage({id:e})}}async getMessages(e,t,i,r=0){const n=await h(this,Kr).getChatMessagesPaginated(e,t,i,r);return{messages:n.messages.map(s=>Mo.formatSocketServiceMessage(s)),next:n.next}}get pinned(){return this.messages.filter(e=>e.pinned)}},je=new WeakMap,Cc=new WeakMap,Kr=new WeakMap,pr=new WeakMap,Gs=new WeakSet,io=function(){return Vt()},kE);Xn([E.trace("DyteChat.sendTextMessage")],Hr.prototype,"sendTextMessage",1);Xn([E.trace("DyteChat.sendImageMessage")],Hr.prototype,"sendImageMessage",1);Xn([E.trace("DyteChat.sendFileMessage")],Hr.prototype,"sendFileMessage",1);Xn([E.trace("DyteChat.sendMessage")],Hr.prototype,"sendMessage",1);Xn([E.trace("DyteChat.editTextMessage")],Hr.prototype,"editTextMessage",1);Xn([E.trace("DyteChat.editImageMessage")],Hr.prototype,"editImageMessage",1);Xn([E.trace("DyteChat.editFileMessage")],Hr.prototype,"editFileMessage",1);Xn([E.trace("DyteChat.editMessage")],Hr.prototype,"editMessage",1);Xn([E.trace("DyteChat.deleteMessage")],Hr.prototype,"deleteMessage",1);Hr=Xn([Ti(e=>{throw new R(e.message,"0500")})],Hr);var KZ=Object.defineProperty,ZZ=Object.getOwnPropertyDescriptor,QZ=(e,t,i,r)=>{for(var n=r>1?void 0:r?ZZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&KZ(t,i,n),n},ph,vv,Cl,CE;const Yr=(CE=class{constructor(e,t,i,r){A(this,ph),v(this,"chat"),v(this,"chatSocketHandler"),v(this,"self"),A(this,Cl,void 0),this.chatSocketHandler=e,I(this,Cl,t),this.chat=new Hr(e,t,i,r),this.self=i,this.setupEvents()}get roomJoined(){var e;return((e=h(this,ph,vv))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r){const n=ee.getValue(re.CHAT_SOCKET_SERVER);b.debug(`Received flagsmith chat_socket_server: ${n}`);const s=Ku("chat_socket_server")==="socket-service"||n==="socket-service"||r.includes("HIVE")?"socket-service":"room-node";return b.info(`Using socket server :: ${s} for chat`),new Yr(e,s,t,i)}static formatMessage(e){return{...e,time:new Date(e.time),type:yd[e.type]}}static formatSocketServiceMessage(e){const t=e.createdAt*1e3,i={displayName:e.displayName,id:e.chatId,time:t,timeMs:e.createdAtMs,type:e.payloadType,isEdited:e.isEdited,userId:e.userId,targetUserIds:e.targetUserIds,message:"",link:"",name:"",size:0};switch(i.type){case jn.TEXT:{i.message=e.payload;break}case jn.IMAGE:{i.link=e.payload;break}case jn.FILE:{const{link:r,name:n,size:s}=JSON.parse(e.payload);i.link=r,i.name=n,i.size=s;break}}return Yr.formatMessage(i)}async getChatMessages(){if(this.self.config.viewType==="LIVESTREAM"||ee.hasFeature(re.FEAT_PAGINATED_CHAT))return;if(h(this,Cl)==="socket-service"){const t=await this.chatSocketHandler.getChatMessages();if(!(t!=null&&t.payload))return;const i=IW.fromBinary(t.payload).messages;this.chat.messages=i.map(r=>Yr.formatSocketServiceMessage(r));return}if(!this.roomJoined){b.error("ChatController.getChatMessages.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{messages:e}=(await h(this,ph,vv).getChatMessages()).payload;this.chat.messages=e.filter(t=>yd[t.type]!=="poll").map(Yr.formatMessage)}setupEvents(){h(this,Cl)==="socket-service"?C.on(k.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getChatMessages()}):C.onAsync(k.ROOM_JOINED,async()=>{await this.getChatMessages()}),this.chatSocketHandler.on(Ai.sendMessageToRoom,e=>{const t=Yr.formatSocketServiceMessage(e.message);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),this.chatSocketHandler.on(Ai.sendMessageToPeers,e=>{const t=Yr.formatSocketServiceMessage(e.message);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),this.chatSocketHandler.on(Ai.editMessage,e=>{const t=Yr.formatSocketServiceMessage(e.message),i=this.chat.messages.findIndex(r=>r.id===t.id);i!==-1&&(this.chat.messages[i]=t,this.chat.emit("chatUpdate",{action:"edit",message:t,messages:this.chat.messages}))}),this.chatSocketHandler.on(Ai.deleteMessage,e=>{const t=this.chat.messages.findIndex(r=>r.id===e.chatId);if(t===-1)return;const[i]=this.chat.messages.splice(t,1);this.chat.emit("chatUpdate",{action:"delete",message:i,messages:this.chat.messages})}),C.on(k.NEW_CHAT_MESSAGE,e=>{if(yd[e==null?void 0:e.type]==="poll")return;const t=Yr.formatMessage(e);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),C.on(k.PIN_CHAT_MESSAGE,async e=>{const t=Yr.formatMessage(e),i=this.chat.messages.findIndex(r=>r.id===t.id);this.chat.messages[i]=t,this.chat.emit("pinMessage",{message:t,messages:this.chat.messages})}),C.on(k.UNPIN_CHAT_MESSAGE,async e=>{const t=Yr.formatMessage(e),i=this.chat.messages.findIndex(r=>r.id===t.id);this.chat.messages[i]=t,this.chat.emit("unpinMessage",{message:t,messages:this.chat.messages})})}},ph=new WeakSet,vv=function(){return Vt()},Cl=new WeakMap,CE);let Mo=Yr;QZ([E.trace("ChatController.setupEvents")],Mo.prototype,"setupEvents",1);var YZ=Object.defineProperty,XZ=Object.getOwnPropertyDescriptor,eQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?XZ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&YZ(t,i,n),n},Zr,Pl,Rl,hh,yv,PE;const g6=(PE=class{constructor(e,t,i,r){A(this,hh),v(this,"plugins"),A(this,Zr,void 0),A(this,Pl,void 0),A(this,Rl,void 0),I(this,Zr,e),I(this,Rl,t),I(this,Pl,i),this.plugins=r,this.setupEvents()}get roomJoined(){var e;return((e=h(this,hh,yv))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r,n,s,a){const o=ee.getValue(re.PLUGIN_SOCKET_SERVER);b.debug(`Received flagsmith plugin_socket_server:: ${o}`);const c=o==="socket-service"||a.includes("HIVE")?"socket-service":"room-node";b.info(`Using socket server ${c} for plugin`);const d=new Py;return e.forEach(l=>{const u=new Cy(l,t,c,n,s,r);d.all.add(u)}),n.config.isV2===!1&&n.config.setDisabledPlugins(d.all.toArray().map(l=>l.id)),new g6(t,i,c,d)}async getRoomPlugins(){if(h(this,Pl)==="socket-service"){const{plugins:t}=await h(this,Zr).getActivePlugins();await Promise.all(t.map(i=>this.enablePlugin({id:i.pluginId,enabledBy:i.enabledBy})));return}if(!this.roomJoined){b.error("PluginController.getRoomPlugins.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{payload:e}=await h(this,hh,yv).getRoomState();await Promise.all(e.roomState.plugins.map(t=>this.enablePlugin(t)))}async enablePlugin({id:e,enabledBy:t}){const i=this.plugins.all.get(e);i&&(await i.activateForSelf(),i.enabledBy=t)}async disablePlugin({id:e}){const t=this.plugins.all.get(e);t&&t.deactivateForSelf()}sendIframeEventOld(e,t){const{id:i}=t,r=this.plugins.all.get(i);r&&r.sendIframeEvent({type:e,payload:t})}sendIframeEvent(e,t,i,r){const n=this.plugins.all.get(t);t&&n.sendIframeEvent({type:e,uuid:i,payload:r})}broadcastIframeEventOld(e,t){this.plugins.active.forEach(i=>{this.sendIframeEventOld(e,{...t,id:i.id})})}broadcastIframeEvent(e,t){this.plugins.active.forEach(i=>{this.sendIframeEvent(e,i.id,"",t)})}setupEvents(){if(this.plugins.all.on("stateUpdate",({active:e,id:t})=>{if(e){this.plugins.active.add(this.plugins.all.get(t));return}this.plugins.active.delete(t)}),C.onAsync(k.ROOM_JOINED,async()=>{await this.getRoomPlugins(),b.debug("[ROOM_JOINED] resolved request to fetch plugins.")}),h(this,Pl)==="socket-service"){h(this,Zr).on(de.addPlugin,async e=>{var t;const i=e.pluginId;(t=this.plugins.all.get(i))!=null&&t.active||await this.enablePlugin({id:i,enabledBy:e.enabledBy})}),h(this,Zr).on(de.removePlugin,async e=>{var t;const i=e.pluginId;(t=this.plugins.all.get(i))!=null&&t.active&&await this.disablePlugin({id:i})}),[de.enablePluginForPeers,de.enablePluginForRoom].forEach(e=>{h(this,Zr).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{enabledBy:t.enabledBy})})}),[de.disablePluginForPeers,de.disablePluginForRoom].forEach(e=>{h(this,Zr).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{disabledBy:t.disabledBy})})}),[de.customPluginEventToPeers,de.customPluginEventToRoom].forEach(e=>{h(this,Zr).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{data:JSON.parse(new TextDecoder().decode(t.pluginData))})})}),[de.storeInsertKeys,de.storeGetKeys,de.storeDeleteKeys].forEach(e=>{h(this,Zr).on(e,async(t,i)=>{var r;const n=(r=t.storeItems)==null?void 0:r.map(s=>({timestamp:s.timestamp,peerId:s.peerId,payload:JSON.parse(s.payload?new TextDecoder().decode(s.payload):"{}"),key:s.storeKey}));this.sendIframeEvent(e,t.pluginId,i,{storeName:t.storeName,storeItems:n})})}),h(this,Zr).on(de.storeDelete,async(e,t)=>{this.sendIframeEvent(de.storeDelete,e.pluginId,t,{storeName:e.storeName})}),h(this,Rl).on(Ai.sendMessageToPeers,e=>{const t=Mo==null?void 0:Mo.formatSocketServiceMessage(e.message);this.broadcastIframeEvent(Wt.chatMessage,{message:t})}),h(this,Rl).on(Ai.sendMessageToRoom,e=>{const t=Mo==null?void 0:Mo.formatSocketServiceMessage(e.message);this.broadcastIframeEvent(Wt.chatMessage,{message:t})}),C.on(k.PEER_JOINED,e=>{this.broadcastIframeEvent(Wt.peerJoined,e)}),C.on(k.PEER_CLOSED,e=>{this.broadcastIframeEvent(Wt.peerLeft,e)});return}C.on(k.ENABLE_PLUGIN,async({id:e,enabledBy:t})=>{await this.enablePlugin({id:e,enabledBy:t})}),C.on(k.DISABLE_PLUGIN,async({id:e})=>{await this.disablePlugin({id:e})}),[k.PLUGIN_DATA,k.PLUGIN_EVENT].forEach(e=>{C.on(e,t=>{this.sendIframeEventOld(e,t)})}),[k.PEER_JOINED,k.PEER_CLOSED,k.NEW_CHAT_MESSAGE].forEach(e=>{C.on(e,t=>{this.broadcastIframeEventOld(e,t)})})}},Zr=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,hh=new WeakSet,yv=function(){return Vt()},PE);let m6=g6;eQ([E.trace("PluginController.setupEvents")],m6.prototype,"setupEvents",1);function tQ(){Oe.isElectron()&&window.dyteElectronGetDisplayMediaSource&&(navigator.mediaDevices.getDisplayMedia=async e=>{const t=await window.dyteElectronGetDisplayMediaSource({types:["window","screen"]});let i=!1;if(e.video){const n=e.video;i={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t.id,maxWidth:n.width.max,maxHeight:n.height.max}}}const r={audio:!1,video:i};return await navigator.mediaDevices.getUserMedia(r)})}var iQ=Object.defineProperty,rQ=Object.getOwnPropertyDescriptor,nQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?rQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&iQ(t,i,n),n},xl,gh,Ws,Al,Il,RE;let Ry=(RE=class extends Ot{constructor(e,t,i){super(),A(this,xl),v(this,"items"),A(this,Ws,void 0),A(this,Al,void 0),A(this,Il,void 0),I(this,Ws,e),I(this,Al,t),I(this,Il,i),this.items=[]}get roomJoined(){var e;return((e=h(this,xl,gh))==null?void 0:e.roomJoined)===!0}async create(e,t,i=!1,r=!1){if(h(this,Ws).config.viewType!=="LIVESTREAM"&&!this.roomJoined)throw new R("Can't create polls without joining room");if(!h(this,Ws).permissions.polls.canCreate){b.error("DytePolls::create::permission_denied");return}if(!e||!t){b.error("DytePolls::question_and_options_can_not_be_empty",{dytePolls:{hasQuestion:!!e,optionsLength:t==null?void 0:t.length}});return}if(t.length<2){b.error("DytePolls::there_must_be_at_least_two_options",{dytePolls:{hasQuestion:!!e,optionsLength:t.length}});return}if(h(this,Il)==="socket-service"){await h(this,Al).createPoll(e,t,i,r);return}const n={question:e,options:t,anonymous:i,hideVotes:r,createdBy:h(this,Ws).name,createdByUserId:h(this,Ws).userId};await h(this,xl,gh).newPoll(n)}async vote(e,t){if(!h(this,Ws).permissions.polls.canVote){b.error("DytePolls::vote::permission_denied");return}if(h(this,Il)==="socket-service"){await h(this,Al).votePoll(e,t);return}const i={pollId:e,index:t};await h(this,xl,gh).votePoll(i)}},xl=new WeakSet,gh=function(){return Vt()},Ws=new WeakMap,Al=new WeakMap,Il=new WeakMap,RE);Ry=nQ([Ti(e=>{throw new R(e.message,"0700")})],Ry);var sQ=Object.defineProperty,aQ=Object.getOwnPropertyDescriptor,oQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?aQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&sQ(t,i,n),n},mh,ro,Ol,fh,_v,xE;const Dc=(xE=class{constructor(e,t,i){A(this,fh),v(this,"polls"),A(this,mh,void 0),A(this,ro,void 0),A(this,Ol,void 0),this.polls=new Ry(e,t,i),I(this,mh,e),I(this,ro,t),I(this,Ol,i),this.setupEvents()}static async init(e,t,i){const r=ee.getValue(re.POLL_SOCKET_SERVER);b.debug(`Received flagsmith poll_socket_server: ${r}`);const n=Ku("poll_socket_server")==="socket-service"||r==="socket-service"||i.includes("HIVE")?"socket-service":"room-node";return b.info(`Using socket server ${n} for polls`),new Dc(e,t,n)}canViewPolls(){return h(this,mh).permissions.polls.canView}setupEvents(){if(h(this,Ol)==="socket-service"){if(!this.canViewPolls())return;C.on(k.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getPolls()}),h(this,ro).on(ds.createPoll,e=>{e.poll&&this.updatePoll(Dc.formatSocketServicePoll(e.poll))}),h(this,ro).on(ds.updatePoll,e=>{e.poll&&this.updatePoll(Dc.formatSocketServicePoll(e.poll))}),h(this,ro).on(ds.votePoll,e=>{e.poll&&this.updatePoll(Dc.formatSocketServicePoll(e.poll))})}else C.onAsync(k.ROOM_JOINED,async()=>{this.canViewPolls()&&this.getPolls()});C.on(k.UPDATE_POLL,async({poll:e})=>{this.updatePoll(e)})}updatePoll(e){if(!this.canViewPolls())return;const t=this.polls.items.findIndex(i=>i.id===e.id);if(t>-1){const i=JSON.stringify(this.polls.items[t]);this.polls.items[t]=e,i!==JSON.stringify(e)&&this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!1});return}this.polls.items=[...this.polls.items,e],this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!0})}async getPolls(){if(h(this,Ol)==="socket-service"){const e=await h(this,ro).getPolls();if(!(e!=null&&e.payload))return;const{polls:t}=NJ.fromBinary(e.payload);this.polls.items=t.map(i=>Dc.formatSocketServicePoll(i));return}if(h(this,fh,_v)instanceof Be){const{polls:e}=(await h(this,fh,_v).getPolls()).payload;this.polls.items=Object.values(e)}}static formatSocketServicePoll(e){const t=e.options.map(i=>({count:i.count,text:i.text,votes:i.votes.map(r=>({id:r.userId,name:r.name}))}));return{anonymous:e.anonymous,createdBy:e.createdBy,createdByUserId:e.createdByUserId,hideVotes:e.hideVotes,id:e.pollId,options:t,question:e.question,voted:e.votes}}},mh=new WeakMap,ro=new WeakMap,Ol=new WeakMap,fh=new WeakSet,_v=function(){return Vt()},xE);let f6=Dc;oQ([E.trace("PollController.setupEvents")],f6.prototype,"setupEvents",1);class AE extends Kb{constructor(){super({onAddEvent:"remoteRequestAdd",onDeleteEvent:"remoteRequestRemove"})}add(t,i=!0){return super.add(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}var po,Nc,Uc,tg;const xy=class extends Ot{constructor(e,t){super(),A(this,po),v(this,"incomingRequests"),v(this,"outgoingRequests"),v(this,"active"),A(this,Uc,void 0),A(this,tg,void 0),I(this,tg,t),I(this,Uc,e),this.incomingRequests=new AE,this.outgoingRequests=new AE,this.active=null,this.mouseEvent=this.mouseEvent.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this)}async requestControl(e){var t;if(!h(this,tg).joined.get(e))throw new R("Invalid peer.");const i=(t=this.outgoingRequests)==null?void 0:t.toArray().find(s=>s.hostPeerId===e);if(i)return i.id;const r=zm(),n=new Qu({requestId:r,hostPeerId:e,remotePeerId:h(this,Uc).id,state:vd.PENDING});return this.outgoingRequests.add(n),await h(this,po,Nc).requestRemoteControl(n),this.emit("remoteUpdate",{payload:{request:{id:n.id,hostPeerId:n.hostPeerId,remotePeerId:n.remotePeerId}},type:Ss.REQUEST_SENT}),r}async acceptControl(e){var t;if(((t=this.active)==null?void 0:t.id)===e)return;const i=this.incomingRequests.get(e);if(!i)throw new R("No request found.");i.state=vd.ACCEPTED,this.endControl(),this.active=i,h(this,po,Nc).acceptRemoteControl(i),this.emit("remoteUpdate",{payload:{request:{id:this.active.id,hostPeerId:this.active.hostPeerId,remotePeerId:this.active.remotePeerId}},type:Ss.INCOMING_REQUEST_ACCEPTED})}async endControl(){if(!this.active)return;const e={...this.active};h(this,po,Nc).terminateRemoteControl(this.active.hostPeerId===h(this,Uc).id?this.active.remotePeerId:this.active.hostPeerId,this.active),this.active=null,this.emit("remoteUpdate",{payload:{request:{id:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:e.hostPeerId===h(this,Uc).id?Ss.INCOMING_REQUEST_ENDED:Ss.OUTGOING_REQUEST_ENDED})}async keyboardEvent(e){if(!this.active)return;const t=xy.getFormattedKeyboardEvent(e);if(t){const i={eventType:Zu.KEYBOARD,keyboardEvent:t};h(this,po,Nc).sendEventRemoteControl(this.active.hostPeerId,this.active.id,i)}}async mouseEvent(e,t){if(!this.active)return;const i=xy.getFormattedRemoteMouseEvent(e,t);if(i){const r={eventType:Zu.MOUSE,mouseEvent:i};h(this,po,Nc).sendEventRemoteControl(this.active.hostPeerId,this.active.id,r)}}static getFormattedRemoteMouseEvent(e,t){const i=t.getBoundingClientRect();return{type:e.type,position:{x:Math.floor(e.x-i.left),y:Math.floor(e.y-i.top)},boundingRect:{width:i.width,height:i.height}}}static getFormattedKeyboardEvent(e){return e.type==="keydown"?{type:e.type,key:e.key}:null}};let cQ=xy;po=new WeakSet,Nc=function(){return Vt()},Uc=new WeakMap,tg=new WeakMap;var ig,Ay;const Iy=class{constructor(e,t){v(this,"remote"),v(this,"hostPeetId"),v(this,"remotePeetId"),v(this,"remoteRequestTokens"),v(this,"activeRemoteToken"),A(this,ig,void 0),A(this,Ay,void 0),I(this,ig,e),I(this,Ay,t),this.hostPeetId=e.id,this.remote=new cQ(e,t),this.setupEvents()}setupEvents(){C.on(k.MESSAGE,e=>{var t;if(e.remoteRequestType===ws.REQUEST&&(this.remote.incomingRequests.add(new Qu({requestId:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,state:vd.PENDING})),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:Ss.REQUEST_RECEIVED})),e.remoteRequestType===ws.ACCEPT){const i=this.remote.outgoingRequests.get(e.remoteRequestId);if(!i)throw new R("There is no pending remote control request to accept.");this.remote.endControl(),i.state=vd.ACCEPTED,this.remote.active=new Qu({requestId:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,state:vd.ACCEPTED}),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:Ss.OUTGOING_REQUEST_ACCEPTED})}e.remoteRequestType===ws.END&&(((t=this.remote.active)==null?void 0:t.id)===e.remoteRequestId&&(this.remote.active=null),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:e.hostPeerId===h(this,ig).id?Ss.INCOMING_REQUEST_ENDED:Ss.OUTGOING_REQUEST_ENDED})),e.remoteRequestType===ws.EVENT&&this.remote.active&&this.remote.active.id===e.remoteRequestId&&window.DyteRobot&&(e.remoteEvent.eventType===Zu.MOUSE?Iy.executeMouseEvent(e.remoteEvent.mouseEvent):e.remoteEvent.eventType===Zu.KEYBOARD&&Iy.executeKeyboardEvent(e.remoteEvent.keyboardEvent))}),C.on(k.PEER_CLOSED,({id:e})=>{var t,i,r,n,s,a,o,c;[(i=(t=this.remote)==null?void 0:t.active)==null?void 0:i.hostPeerId,(n=(r=this.remote)==null?void 0:r.active)==null?void 0:n.remotePeerId].includes(e)&&this.remote.endControl(),(a=(s=this.remote)==null?void 0:s.incomingRequests)==null||a.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(e)&&this.remote.incomingRequests.delete(d.id)}),(c=(o=this.remote)==null?void 0:o.outgoingRequests)==null||c.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(e)&&this.remote.outgoingRequests.delete(d.id)})})}static executeMouseEvent(e){const t=window.screen.width*e.position.x/e.boundingRect.width,i=window.screen.height*e.position.y/e.boundingRect.height,r={width:window.screen.width,height:window.screen.height};switch(e.type){case Qh.LEFT_CLICK:window.DyteRobot.mouse.leftClick(t,i,r);break;case Qh.RIGHT_CLICK:window.DyteRobot.mouse.rightClick(t,i,r);break;case Qh.MOVE:window.DyteRobot.mouse.moveTo(t,i,r);break}}static executeKeyboardEvent(e){switch(e.type){case"keydown":window.DyteRobot.keyboard.press(e.key);break}}};let dQ=Iy;ig=new WeakMap,Ay=new WeakMap;var lQ=Object.defineProperty,uQ=(e,t,i)=>t in e?lQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,pQ=(e,t,i)=>(uQ(e,typeof t!="symbol"?t+"":t,i),i),Zb=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},N=(e,t,i)=>(Zb(e,t,"read from private field"),i?i.call(e):t.get(e)),Rt=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},St=(e,t,i,r)=>(Zb(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),Lt=(e,t,i)=>(Zb(e,t,"access private method"),i),Ys,ho,go,xt,jc,lt,Kt,Xs,qt,ps,Mr,_d,hs,Oy,v6,Zl,rg,My,y6,Qb,_6,bd,Yu,om,Yb,cm,Xb,wd,Xu,_u,dm,ew={exports:{}},Sd=typeof Reflect=="object"?Reflect:null,IE=Sd&&typeof Sd.apply=="function"?Sd.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},ng;Sd&&typeof Sd.ownKeys=="function"?ng=Sd.ownKeys:Object.getOwnPropertySymbols?ng=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ng=function(e){return Object.getOwnPropertyNames(e)};function hQ(e){console&&console.warn&&console.warn(e)}var b6=Number.isNaN||function(e){return e!==e};function et(){et.init.call(this)}ew.exports=et;ew.exports.once=vQ;et.EventEmitter=et;et.prototype._events=void 0;et.prototype._eventsCount=0;et.prototype._maxListeners=void 0;var OE=10;function yf(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(et,"defaultMaxListeners",{enumerable:!0,get:function(){return OE},set:function(e){if(typeof e!="number"||e<0||b6(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");OE=e}});et.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};et.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||b6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function w6(e){return e._maxListeners===void 0?et.defaultMaxListeners:e._maxListeners}et.prototype.getMaxListeners=function(){return w6(this)};et.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=n[e];if(o===void 0)return!1;if(typeof o=="function")IE(o,this,t);else for(var c=o.length,d=C6(o,c),i=0;i<c;++i)IE(d[i],this,t);return!0};function S6(e,t,i,r){var n,s,a;if(yf(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),a===void 0)a=s[t]=i,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),n=w6(e),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,hQ(o)}return e}et.prototype.addListener=function(e,t){return S6(this,e,t,!1)};et.prototype.on=et.prototype.addListener;et.prototype.prependListener=function(e,t){return S6(this,e,t,!0)};function gQ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E6(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=gQ.bind(r);return n.listener=i,r.wrapFn=n,n}et.prototype.once=function(e,t){return yf(t),this.on(e,E6(this,e,t)),this};et.prototype.prependOnceListener=function(e,t){return yf(t),this.prependListener(e,E6(this,e,t)),this};et.prototype.removeListener=function(e,t){var i,r,n,s,a;if(yf(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():mQ(i,n),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};et.prototype.off=et.prototype.removeListener;et.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),s;for(r=0;r<n.length;++r)s=n[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function T6(e,t,i){var r=e._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?fQ(n):C6(n,n.length)}et.prototype.listeners=function(e){return T6(this,e,!0)};et.prototype.rawListeners=function(e){return T6(this,e,!1)};et.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):k6.call(e,t)};et.prototype.listenerCount=k6;function k6(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}et.prototype.eventNames=function(){return this._eventsCount>0?ng(this._events):[]};function C6(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function mQ(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fQ(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function vQ(e,t){return new Promise(function(i,r){function n(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),i([].slice.call(arguments))}P6(e,t,s,{once:!0}),t!=="error"&&yQ(e,n,{once:!0})})}function yQ(e,t,i){typeof e.on=="function"&&P6(e,"error",t,i)}function P6(e,t,i,r){if(typeof e.on=="function")r.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){r.once&&e.removeEventListener(t,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var _Q=ew.exports;class bQ extends x{constructor(){super("message.v1.SocketMessage",[{no:1,name:"event",kind:"scalar",T:13},{no:2,name:"id",kind:"scalar",opt:!0,T:9},{no:3,name:"payload",kind:"scalar",opt:!0,T:12},{no:4,name:"metadata",kind:"scalar",opt:!0,T:12}])}}const ME=new bQ;class R6{static encode(t){return ME.toBinary(t)}static decode(t){return ME.fromBinary(new Uint8Array(t))}}function wQ(e,t){return Math.floor(Math.random()*(t-e+1)+e)}class SQ{constructor(t={}){pQ(this,"opts"),Rt(this,Ys,void 0),this.opts={initialTimeout:t.initialTimeout||1e3,maxTimeout:t.maxTimeout||1e4,factor:t.factor||2},St(this,Ys,0)}async wait(){St(this,Ys,N(this,Ys)+1);const t=wQ(0,Math.min(this.opts.maxTimeout,this.opts.initialTimeout*2**N(this,Ys)));await new Promise(i=>{setTimeout(i,t)})}getAttempts(){return N(this,Ys)}reset(){St(this,Ys,0)}}Ys=new WeakMap;const qs={debug:0,info:1,warn:2,error:3};class EQ{constructor(t){Rt(this,ho,void 0),Rt(this,go,void 0),St(this,ho,console),St(this,go,t)}debug(...t){qs[N(this,go)]>qs.debug||N(this,ho).debug("[Sockrates]:",...t)}info(...t){qs[N(this,go)]>qs.info||N(this,ho).info("[Sockrates]:",...t)}warn(...t){qs[N(this,go)]>qs.warn||N(this,ho).warn("[Sockrates]:",...t)}error(...t){qs[N(this,go)]>qs.error||N(this,ho).error("[Sockrates]:",...t)}}ho=new WeakMap;go=new WeakMap;var x6=(e=>(e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e))(x6||{});const TQ="2",kQ="3";class CQ{constructor(t,i){Rt(this,Oy),Rt(this,Zl),Rt(this,My),Rt(this,Qb),Rt(this,bd),Rt(this,om),Rt(this,cm),Rt(this,wd),Rt(this,_u),Rt(this,xt,void 0),Rt(this,jc,void 0),Rt(this,lt,void 0),Rt(this,Kt,void 0),Rt(this,Xs,void 0),Rt(this,qt,void 0),Rt(this,ps,void 0),Rt(this,Mr,void 0),Rt(this,_d,void 0),Rt(this,hs,void 0);var r,n,s,a,o,c,d,l,u,g;St(this,jc,t),St(this,Xs,[]),St(this,qt,new _Q),St(this,ps,!0),St(this,Mr,!1),St(this,lt,i!=null?i:{}),(r=N(this,lt)).autoReconnect!=null||(r.autoReconnect=!0),(n=N(this,lt)).retryConnectionInterval!=null||(n.retryConnectionInterval=1e3),(s=N(this,lt)).pingTimeout!=null||(s.pingTimeout=3e4),(a=N(this,lt)).connectionTimeout!=null||(a.connectionTimeout=5e3),(o=N(this,lt)).debug!=null||(o.debug=!0),(c=N(this,lt)).maxReconnectionAttempts!=null||(c.maxReconnectionAttempts=10),(d=N(this,lt)).disconnectOnPingTimeout!=null||(d.disconnectOnPingTimeout=!0),(l=N(this,lt)).queueOnDisconnect!=null||(l.queueOnDisconnect=!1),(u=N(this,lt)).flushOnReconnect!=null||(u.flushOnReconnect=!1),St(this,Kt,(g=N(this,lt).logger)!=null?g:new EQ(N(this,lt).debug?"debug":"info")),St(this,hs,new SQ)}get readyState(){return N(this,xt).readyState}get url(){return N(this,jc)}get config(){return N(this,lt)}get sendQueue(){return N(this,Xs)}flush(){if(!N(this,lt).queueOnDisconnect)return!1;const t=[];return N(this,Xs).forEach(i=>{this.send(i.event,i.id,i.payload,i.metadata)||t.push(i)}),St(this,Xs,t),N(this,Xs)}async connect(){if(N(this,ps)!==!1)return new Promise((t,i)=>{Lt(this,wd,Xu).call(this),Lt(this,_u,dm).call(this);try{St(this,xt,new WebSocket(Lt(this,Oy,v6).call(this,N(this,jc)))),N(this,xt).binaryType="arraybuffer",N(this,Kt).debug("Connecting to",N(this,jc));const r=setTimeout(()=>{N(this,Kt).debug("Connection timeout. Closing socket"),St(this,ps,!0),Lt(this,_u,dm).call(this),N(this,xt).close(3001,"Connection Timeout"),N(this,lt).autoReconnect&&!N(this,Mr)&&(N(this,qt).emit("reconnecting"),Lt(this,bd,Yu).call(this)),i(new Error("Connection timed out!"))},N(this,lt).connectionTimeout);N(this,xt).onopen=()=>{N(this,Kt).debug(`Ready State: ${x6[N(this,xt).readyState]}`),r&&clearTimeout(r),Lt(this,cm,Xb).call(this),N(this,qt).emit("connected"),N(this,lt).flushOnReconnect&&this.flush(),t()},N(this,xt).onclose=n=>{try{r&&clearTimeout(r);const{code:s,reason:a}=n;if(i(a),N(this,Kt).debug("Socket closed. Close event:",n),N(this,Kt).debug("Connection closed code:",s),N(this,Kt).debug("Connection closed reason:",a),N(this,ps)&&s!==1e3&&N(this,lt).autoReconnect&&!N(this,Mr)){N(this,qt).emit("reconnecting"),Lt(this,bd,Yu).call(this);return}N(this,Mr)||N(this,qt).emit("disconnected",{code:s,reason:a})}catch(s){Lt(this,Zl,rg).call(this,s)}},N(this,xt).onerror=n=>{Lt(this,Zl,rg).call(this,n)},N(this,xt).onmessage=n=>Lt(this,My,y6).call(this,n)}catch(r){Lt(this,Zl,rg).call(this,r,i)}})}send(t,i,r,n){const s={event:t,id:i,payload:r,metadata:n};if(N(this,lt).queueOnDisconnect&&(!N(this,xt)||N(this,xt).readyState!==1))return N(this,Kt).debug("Queuing message since socket is not connected!",s),N(this,Xs).push(s),!1;const a=R6.encode(s);return Lt(this,om,Yb).call(this,a)}emit(t,i,r,n){return this.send(t,i,r,n)}receive(t,i){return N(this,qt).on(t.toString(),i)}on(t,i){if(typeof t=="string"&&(t==="connected"||t==="disconnected"||t==="errored"||t==="reconnected"||t==="reconnecting"||t==="reconnectAttempt"||t==="reconnectFailure"||t==="failed")){N(this,qt).on(t,i);return}this.receive(t,i)}removeAllListeners(){N(this,qt).removeAllListeners()}removeReceiver(t,i){this.removeListener(t,i)}removeListener(t,i){N(this,qt).removeListener(t.toString(),i)}removeReceivers(t){this.removeListeners(t)}removeListeners(t){N(this,qt).listeners(t.toString()).map(i=>this.removeListener(t,i))}disconnect(){St(this,ps,!1),Lt(this,wd,Xu).call(this),this.removeAllListeners(),N(this,xt).close(1e3,"Sockrates disconnect method called.")}}xt=new WeakMap;jc=new WeakMap;lt=new WeakMap;Kt=new WeakMap;Xs=new WeakMap;qt=new WeakMap;ps=new WeakMap;Mr=new WeakMap;_d=new WeakMap;hs=new WeakMap;Oy=new WeakSet;v6=function(e){if(e.startsWith("ws://")||e.startsWith("wss://"))return e;if(e.startsWith("https://"))return`wss://${e.substring(8)}`;if(e.startsWith("http://"))return`ws://${e.substring(7)}`;throw new Error("Invalid URL. URL must start with http(s):// or ws(s)://.")};Zl=new WeakSet;rg=function(e,t){N(this,Kt).error("Error:",e),N(this,qt).emit("errored",{error:e}),t==null||t(e)};My=new WeakSet;y6=function(e){if(e.data===TQ){N(this,Kt).debug("Received ping from server"),Lt(this,cm,Xb).call(this),Lt(this,om,Yb).call(this,kQ);return}N(this,Kt).debug("Received data:",e.data);const t=R6.decode(e.data),{id:i,payload:r}=t;N(this,qt).emit(t.event.toString(),{id:i,payload:r})};Qb=new WeakSet;_6=function(){return N(this,xt).readyState===1};bd=new WeakSet;Yu=async function(e=!0){if(e&&N(this,Mr)){N(this,Kt).debug("Reconnect called when already in a reconnect loop. Ignoring.");return}if(N(this,Mr)||N(this,hs).reset(),N(this,lt).maxReconnectionAttempts!==null&&N(this,hs).getAttempts()>=N(this,lt).maxReconnectionAttempts){N(this,qt).emit("failed"),St(this,Mr,!1);return}St(this,Mr,!0),Lt(this,_u,dm).call(this),Lt(this,wd,Xu).call(this);try{if(await N(this,hs).wait(),N(this,ps)===!1)return;if(N(this,Kt).debug(`Reconnection attempt ${N(this,hs).getAttempts()}`),N(this,qt).emit("reconnectAttempt",{attempt:N(this,hs).getAttempts()}),await this.connect(),!Lt(this,Qb,_6).call(this))throw Error("Reconnect Failed");St(this,Mr,!1),N(this,qt).emit("reconnected")}catch{N(this,Kt).debug("Failed to reconnect."),N(this,qt).emit("reconnectFailure",{attempt:N(this,hs).getAttempts()}),Lt(this,bd,Yu).call(this,!1)}};om=new WeakSet;Yb=function(e){try{return N(this,xt).send(e),!0}catch(t){return N(this,Kt).error(t.message),!1}};cm=new WeakSet;Xb=function(){this.config.disconnectOnPingTimeout&&(N(this,Kt).debug("Resetting ping timeout"),Lt(this,wd,Xu).call(this),St(this,_d,setTimeout(()=>{var e;N(this,Kt).debug("Disconnecting the socket due to ping timeout"),St(this,ps,!0);const t=3002,i="Ping timeout";(e=N(this,xt))==null||e.close(t,i),N(this,qt).emit("disconnected",{code:t,reason:i}),N(this,lt).autoReconnect&&!N(this,Mr)&&(N(this,Kt).debug("Triggering reconnection due to ping timeout"),N(this,qt).emit("reconnecting"),Lt(this,bd,Yu).call(this))},N(this,lt).pingTimeout)))};wd=new WeakSet;Xu=function(){N(this,_d)&&(clearTimeout(N(this,_d)),St(this,_d,void 0))};_u=new WeakSet;dm=function(){N(this,xt)&&(N(this,xt).onopen=void 0,N(this,xt).onerror=void 0,N(this,xt).onmessage=void 0,N(this,xt).onclose=void 0)};var PQ=Object.defineProperty,RQ=Object.getOwnPropertyDescriptor,_f=(e,t,i,r)=>{for(var n=r>1?void 0:r?RQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&PQ(t,i,n),n};const LE=65535;var Ml,$i,vh,yh,bv,DE;const A6=(DE=class{constructor({peerId:e,roomName:t,authToken:i,url:r,capabilities:n}){A(this,yh),A(this,Ml,void 0),A(this,$i,void 0),A(this,vh,void 0),v(this,"roomName"),v(this,"peerId"),v(this,"authToken"),v(this,"capabilities");var s;if(!e||!t||!i)throw new R("peerId, roomName, or authToken can not be empty");const{apiBase:a}=Ye;let o=A6.getSocketEdgeDomain(a);typeof Ku("socket_server_base")=="string"&&(o=Ku("socket_server_base"));const c=`wss://${o}`;this.roomName=t,this.peerId=e,this.authToken=i,this.capabilities=n;const d=new URL(`${r!=null?r:c}/ws`),l={roomID:t,peerID:e,authToken:i,useMediaV2:n.includes("HIVE"),ping:n.includes("PING"),capabilities:n.map(u=>rm[u]).join(" ")};Object.entries(l).forEach(([u,g])=>{d.searchParams.append(u,g.toString())}),I(this,Ml,d.href),I(this,vh,e),I(this,$i,new CQ(h(this,Ml),{autoReconnect:!0,disconnectOnPingTimeout:(s=n.includes("PING"))!=null?s:!1,queueOnDisconnect:!0,flushOnReconnect:!1,logger:b}))}static getSocketEdgeDomain(e){let t="";return e.includes("api.cluster.dyte")?t="edge":e.includes("api.staging.dyte")?t="staging":e.includes("api.preprod.dyte")&&(t="preprod"),`socket-${t}.dyte.io`}get url(){return h(this,Ml)}async connect(){const e=()=>{b.info("SocketService::connect::Connected to socket-edge"),C.emit(k.SOCKET_SERVICE_CONNECTED)};this.onStateEvent("connected",e);const t=({reason:o,code:c})=>{b.info("SocketService::connect::Disconnected from socket-edge",{error:{code:c,reason:o}}),C.emit(k.SOCKET_SERVICE_DISCONNECTED),!(c<4e3||c>4002)&&(c===4e3?b.error("SocketService::connect::Bad Request",{error:{code:c,reason:o}}):c===4001?b.error("SocketService::connect::Unauthorized",{error:{code:c,reason:o}}):c===4002?b.error("SocketService::connect::Internal Error",{error:{code:c,reason:o}}):b.error("SocketService::connect::Unknown Error",{error:{code:c,reason:o}}))};this.onStateEvent("disconnected",t);const i=()=>{b.info("SocketService::connect::Reconnecting to socket-edge"),C.emit(k.SOCKET_SERVICE_RECONNECTING)};this.onStateEvent("reconnecting",i);const r=({attempt:o})=>{b.info("SocketService::connect::Attempting reconnect to socket-edge"),C.emit(k.SOCKET_SERVICE_RECONNECTION_ATTEMPT,{attempt:o})};this.onStateEvent("reconnectAttempt",r);const n=({attempt:o})=>{b.info("SocketService::connect::Reconnect attempt failed"),C.emit(k.SOCKET_SERVICE_RECONNECT_FAILURE,{attempt:o})};this.onStateEvent("reconnectFailure",n);const s=()=>{b.info("SocketService::connect::Reconnected to socket-edge"),C.emit(k.SOCKET_SERVICE_RECONNECTED)};this.onStateEvent("reconnected",s);const a=()=>{b.info("SocketService::connect::Socket-edge reconnects failed"),C.emit(k.SOCKET_SERVICE_FAILED)};this.onStateEvent("failed",a),await h(this,$i).connect()}disconnect(){return h(this,$i).disconnect()}get isConnected(){try{return h(this,$i).readyState===1}catch{return!1}}sendMessage(e,t,i){const r={};return E.injectContext(r),h(this,$i).send(e,i!=null?i:Ut(this,yh,bv).call(this),t,new TextEncoder().encode(JSON.stringify(r)))}sendMessagePromise(e,t,i){const r=parseInt({}.SOCKET_SERVICE_MESSAGE_REQUEST_TIMEOUT,10)||2e4;return this.sendMessagePromiseWithTimeout({event:e,timeout:r,protobuf:t,messageId:i})}sendMessagePromiseWithTimeout({event:e,timeout:t,protobuf:i,messageId:r}){return new Promise((n,s)=>{const a=r!=null?r:Ut(this,yh,bv).call(this),o={};E.injectContext(o),setTimeout(s,t,"request timeout for callback");const c=({id:d,payload:l})=>{a===d&&(n({id:d,payload:l}),h(this,$i).removeListener(e,c),h(this,$i).removeListener(LE,c))};h(this,$i).on(e,c),h(this,$i).on(LE,c),h(this,$i).send(e,a,i,new TextEncoder().encode(JSON.stringify(o)))})}on(e,t){h(this,$i).on(e,t)}onStateEvent(e,t){h(this,$i).on(e,t)}flush(){return h(this,$i).flush()}},Ml=new WeakMap,$i=new WeakMap,vh=new WeakMap,yh=new WeakSet,bv=function(){return`${h(this,vh)}-${(Math.random()+1).toString(36).substring(7)}`},DE);let Ep=A6;_f([E.trace("SocketService.connect")],Ep.prototype,"connect",1);_f([E.trace("SocketService.disconnect")],Ep.prototype,"disconnect",1);_f([E.trace("SocketService.sendMessage")],Ep.prototype,"sendMessage",1);_f([E.trace("SocketService.sendMessagePromise")],Ep.prototype,"sendMessagePromise",1);var li;class xQ{constructor(t){A(this,li,void 0),I(this,li,t)}addPlugin(t,i){h(this,li).sendMessage(de.addPlugin,jq.toBinary({pluginId:t,staggered:i}))}removePlugin(t){h(this,li).sendMessage(de.removePlugin,Vq.toBinary({pluginId:t,staggered:!1}))}async getActivePlugins(){const{payload:t}=await h(this,li).sendMessagePromise(de.getPlugins);return t?dJ.fromBinary(t):{plugins:[]}}customPluginEventToRoom(t,i,r){const n={pluginId:t,pluginData:new TextEncoder().encode(JSON.stringify(i))};h(this,li).sendMessage(de.customPluginEventToRoom,Zq.toBinary(n),r)}customPluginEventToPeers(t,i,r,n){const s={pluginId:t,peerIds:i,pluginData:new TextEncoder().encode(JSON.stringify(r))};h(this,li).sendMessage(de.customPluginEventToPeers,Yq.toBinary(s),n)}enablePluginForRoom(t,i){h(this,li).sendMessage(de.enablePluginForRoom,Bq.toBinary({pluginId:t}),i)}enablePluginForPeers(t,i,r){h(this,li).sendMessage(de.enablePluginForPeers,Wq.toBinary({pluginId:t,peerIds:i}),r)}disablePluginForRoom(t,i){h(this,li).sendMessage(de.disablePluginForRoom,Hq.toBinary({pluginId:t}),i)}disablePluginForPeers(t,i,r){h(this,li).sendMessage(de.disablePluginForPeers,Jq.toBinary({pluginId:t,peerIds:i}),r)}storeInsertKeys(t,i,r,n){const s={pluginId:t,storeName:i,insertKeys:r.map(a=>({storeKey:a.key,payload:new TextEncoder().encode(JSON.stringify(a.payload))}))};h(this,li).sendMessage(de.storeInsertKeys,eE.toBinary(s),n)}storeGetKeys(t,i,r,n){const s={pluginId:t,storeName:i,getKeys:r.map(a=>({storeKey:a.key}))};h(this,li).sendMessage(de.storeGetKeys,iJ.toBinary(s),n)}storeDeleteKeys(t,i,r,n){const s={pluginId:t,storeName:i,deleteKeys:r.map(a=>({storeKey:a.key}))};h(this,li).sendMessage(de.storeDeleteKeys,nJ.toBinary(s),n)}storeDelete(t,i,r){h(this,li).sendMessage(de.storeDelete,aJ.toBinary({pluginId:t,storeName:i}),r)}getPluginDataOld(t,i){b.info("getPluginDataOld",{plugin:{id:t,storeName:i}})}storePluginDataOld(t,i,r){const n={pluginId:t,storeName:i,insertKeys:[{storeKey:r.key,payload:new TextEncoder().encode(JSON.stringify(r))}]};h(this,li).sendMessage(de.storeInsertKeys,eE.toBinary(n))}on(t,i){let r;switch(t){case de.addPlugin:case de.enablePluginForPeers:case de.enablePluginForRoom:{r=dy.fromBinary.bind(dy);break}case de.removePlugin:case de.disablePluginForPeers:case de.disablePluginForRoom:{r=tE.fromBinary.bind(tE);break}case de.customPluginEventToPeers:case de.customPluginEventToRoom:{r=rE.fromBinary.bind(rE);break}case de.storeInsertKeys:case de.storeGetKeys:case de.storeDeleteKeys:case de.storeDelete:{r=iE.fromBinary.bind(iE);break}}h(this,li).on(t,({payload:n,id:s})=>{const a=r(n);return i(a,s)})}}li=new WeakMap;var AQ=Object.defineProperty,IQ=Object.getOwnPropertyDescriptor,bf=(e,t,i,r)=>{for(var n=r>1?void 0:r?IQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&AQ(t,i,n),n},Pc,NE;let Dd=(NE=class extends Ot{constructor(e){super(),A(this,Pc,void 0),v(this,"recordingState","IDLE"),v(this,"recordingId"),v(this,"recordingPeerId"),I(this,Pc,e)}setRecordingState(e){const t=this.recordingState;this.recordingState=e,t!==e&&this.emitCurrentRecordingState()}emitCurrentRecordingState(){this.emit("recordingUpdate",this.recordingState)}async start(){if(!h(this,Pc).permissions.canRecord)throw b.error("DyteRecording::start::permission_denied"),new R("User does not have permission to start recording");if(this.recordingState==="STARTING"||this.recordingState==="RECORDING"||this.recordingState==="STOPPING")throw b.error("DyteRecording::start::recording_in_progress",{recording:{state:this.recordingState}}),new R(`Cant start recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STARTING");try{const e=hi(),{recording:t={}}=Ye.defaults,i=await e.startRecording(t);this.recordingId=i}catch(e){throw b.error("DyteRecording::stop::recording_failed_to_start",{error:e}),this.setRecordingState("IDLE"),new R("Error while starting recording")}}async stop(){if(!h(this,Pc).permissions.canRecord)throw b.error("DyteRecording::stop::permission_denied"),new R("User does not have permission to stop recording");if((this.recordingState!=="RECORDING"||!this.recordingId)&&(b.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),await this.getRecordingId()),this.recordingState!=="RECORDING"||!this.recordingId)throw b.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),new R(`Cant stop recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STOPPING");try{await hi().stopRecording(this.recordingId),this.setRecordingState("IDLE")}catch(e){throw b.error("DyteRecording::stop::recording_failed_to_stop",{error:e}),this.setRecordingState("RECORDING"),new R("Error while stopping recording")}}async getRecordingId(){if(!h(this,Pc).permissions.canRecord)throw b.error("DyteRecording::getRecordingId::permission_denied"),new R("User does not have permission to stop recording");try{const e=hi(),{status:t,id:i}=await e.getActiveRecording();t==="RECORDING"&&(this.recordingState="RECORDING",this.recordingId=i)}catch(e){throw b.error("DyteRecording::getRecordingId::unable_to_get_recording_id",{error:e}),new R("Unable to get recording")}}},Pc=new WeakMap,NE);bf([E.trace("DyteRecording.start")],Dd.prototype,"start",1);bf([E.trace("DyteRecording.stop")],Dd.prototype,"stop",1);bf([E.trace("DyteRecording.getRecordingId")],Dd.prototype,"getRecordingId",1);Dd=bf([Ti(e=>{throw new R(e.message,"1000")})],Dd);var OQ=Object.defineProperty,MQ=Object.getOwnPropertyDescriptor,LQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?MQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&OQ(t,i,n),n};class I6{constructor(t){v(this,"recording"),this.recording=new Dd(t),this.setupEvents()}setupEvents(){C.on(k.HIVE_RECORDING_STARTED,t=>{this.recording.recordingPeerId=t,this.recording.setRecordingState("RECORDING")}),C.on(k.HIVE_RECORDING_STOPPED,()=>{this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE")}),C.on(k.PEER_JOINED,async t=>{var i;(i=t.flags)!=null&&i.recorder&&(this.recording.recordingPeerId=t.id,this.recording.setRecordingState("RECORDING"))}),C.on(k.PEER_CLOSED,t=>{t.id===this.recording.recordingPeerId&&(this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE"))}),C.onAsync(k.ROOM_JOINED,async t=>{var i,r;b.debug("[ROOM_JOINED] resolved request to fetch recordings.");const n=(i=t.peers)==null?void 0:i.filter(s=>{var a;return!!((a=s.flags)!=null&&a.recorder)});n.length?(this.recording.recordingPeerId=n&&((r=n[0])==null?void 0:r.id),this.recording.setRecordingState("RECORDING")):(this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE"))}),C.on(k.RECORDING_STARTED,()=>{this.recording.setRecordingState("RECORDING")}),C.on(k.RECORDING_STOPPED,()=>{this.recording.recordingId=void 0,this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE")})}}LQ([E.trace("RecordingController.setupEvents")],I6.prototype,"setupEvents",1);var DQ=Object.defineProperty,NQ=Object.getOwnPropertyDescriptor,UQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?NQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&DQ(t,i,n),n},O6=(e=>(e[e.User=0]="User",e[e.Spotlight=1]="Spotlight",e))(O6||{}),Ll,_h,Rc,UE;let lm=(UE=class extends Ot{constructor(e){super(),A(this,Ll),v(this,"selfActiveTab"),v(this,"spotlighted"),A(this,Rc,void 0),this.spotlighted=e.permissions.canSpotlight,I(this,Rc,e)}get roomJoined(){var e;return((e=h(this,Ll,_h))==null?void 0:e.roomJoined)===!0}static init(e){return new lm(e)}setSpotlighted(e){if(!h(this,Rc).permissions.canSpotlight)throw b.error("DyteSpotlight::setSpotlighted::permission_denied"),new R("User does not have permission to toggle spotlight");this.spotlighted=e,this.emit("spotlightUpdate",this.spotlighted),this.spotlighted&&this.assertSpotlightToRoom()}setSelfActiveTab(e,t){var i;b.info("DyteSpotlight::setActiveTab",{spotlight:{currentTab:{id:e.id,type:e.type}}}),this.selfActiveTab=e,t===0&&this.emit("selfTabUpdate",e),(i=h(this,Rc).permissions)!=null&&i.canSpotlight&&this.spotlighted&&t===0&&this.assertSpotlightToRoom()}assertSpotlightToRoom(){h(this,Ll,_h)instanceof Be&&this.selfActiveTab&&h(this,Ll,_h).assertSpotlightToRoom({spotlightedUserId:h(this,Rc).userId,currentTab:this.selfActiveTab,peerId:void 0})}},Ll=new WeakSet,_h=function(){return Vt()},Rc=new WeakMap,UE);lm=UQ([Ti(e=>{throw new R(e.message,"1300")})],lm);var jQ=Object.defineProperty,$Q=Object.getOwnPropertyDescriptor,VQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?$Q(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&jQ(t,i,n),n},mo,$c,Ql;class M6{constructor(t){A(this,$c),v(this,"spotlight"),A(this,mo,void 0),this.spotlight=lm.init(t),I(this,mo,t),this.setupEvents()}conditionallySetActiveTab(t){var i;t!=null&&t.currentTab&&((i=this.spotlight.selfActiveTab)==null?void 0:i.id)!==t.currentTab.id&&(this.spotlight.setSelfActiveTab(t.currentTab,O6.Spotlight),this.spotlight.emit("activeTabUpdate",t.currentTab))}async setupEvents(){h(this,mo).permissions.canSpotlight&&(b.info("DyteSpotlightController::Asserting Spotlight"),h(this,$c,Ql)instanceof Be&&this.spotlight.selfActiveTab&&h(this,$c,Ql).assertSpotlightToRoom({spotlightedUserId:h(this,mo).userId,currentTab:this.spotlight.selfActiveTab,peerId:void 0})),C.on(k.PEER_JOINED,async t=>{h(this,mo).permissions.canSpotlight&&h(this,$c,Ql)instanceof Be&&this.spotlight.selfActiveTab&&h(this,$c,Ql).assertSpotlightToPeer({spotlightedUserId:h(this,mo).userId,currentTab:this.spotlight.selfActiveTab,peerId:t.id})}),C.on(k.ROOM_MESSAGE,t=>{var i,r;t.roomMessageType==="spotlight"&&(b.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:t.spotlightedUserId},currentTab:{id:(i=t.currentTab)==null?void 0:i.id,type:(r=t.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(t))}),C.on(k.MESSAGE,t=>{var i,r;t.roomMessageType==="spotlight"&&(b.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:t.spotlightedUserId},currentTab:{id:(i=t.currentTab)==null?void 0:i.id,type:(r=t.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(t))})}}mo=new WeakMap,$c=new WeakSet,Ql=function(){return Vt()};VQ([E.trace("SpotlightController.setupEvents")],M6.prototype,"setupEvents",1);function FQ(e){let t=0,i,r;if(!e)return t;for(i=0;i<e.length;i+=1)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return Math.abs(t)%100+1}class BQ{static hasFeature(t){var i;return(i=ee.hasFeature(t))!=null?i:!1}static getFeatureValue(t){return ee.getValue(t)}static getAllFeatures(){return ee.getAllFlags()}}class tw{constructor(t,i,r){v(this,"logger"),v(this,"features"),v(this,"browserSpecs"),v(this,"callStats"),this.logger=t,this.features=i,this.browserSpecs=Oe,this.callStats=r}static init(){return new tw(b,BQ,Z)}}class iw{constructor(t){v(this,"internals"),this.internals=t}static async init(){const t=tw.init();return new iw(t)}}var zQ=Object.defineProperty,HQ=Object.getOwnPropertyDescriptor,L6=(e,t,i,r)=>{for(var n=r>1?void 0:r?HQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&zQ(t,i,n),n},Yl;class rw extends Ot{constructor(t){super(),A(this,Yl,void 0),v(this,"state","IDLE"),v(this,"playbackUrl"),v(this,"viewerCount"),I(this,Yl,t),this.viewerCount=0}setLivestreamState(t){const i=this.state;this.state=t,i!==t&&this.emitCurrentLivestreamState()}emitCurrentLivestreamState(){this.emit("livestreamUpdate",this.state)}async start(){if(!h(this,Yl).permissions.canLivestream)throw b.error("DyteLivestream::start::permission_denied"),new R("User does not have permission to start livestreaming");this.setLivestreamState("STARTING");try{const t=await hi().startLivestreaming();this.playbackUrl=t}catch(t){throw b.error("DyteRecording::stop::livestream_failed_to_start",{error:t}),this.setLivestreamState("IDLE"),new R("Error while starting livestream")}}async stop(){if(!h(this,Yl).permissions.canLivestream)throw b.error("DyteLivestream::stop::permission_denied"),new R("User does not have permission to stop livestreaming");if(this.state!=="LIVESTREAMING")throw b.error("DyteLivestream::stop::inconsistent_state"),new R("Livestream not started yet");try{this.setLivestreamState("STOPPING"),await hi().stopLivestreaming()}catch(t){throw b.error("DyteLivestream::stop::livestream_failed_to_stop",{error:t}),this.setLivestreamState("STOPPING"),new R("Error while stopping livestream")}}}Yl=new WeakMap;L6([E.trace("livestream.start")],rw.prototype,"start",1);L6([E.trace("livestream.stop")],rw.prototype,"stop",1);var GQ=Object.defineProperty,WQ=Object.getOwnPropertyDescriptor,qQ=(e,t,i,r)=>{for(var n=r>1?void 0:r?WQ(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&GQ(t,i,n),n},fo,vo;class D6{constructor(t,i){v(this,"livestream"),A(this,fo,void 0),A(this,vo,void 0),this.livestream=new rw(t),I(this,vo,i),this.setupEvents()}async fetchInitialLivestreamingState(){const t=hi(),{status:i,playbackUrl:r}=await t.getActiveLivestream();i==="LIVE"&&(this.livestream.playbackUrl=r,this.livestream.setLivestreamState("LIVESTREAMING"))}setupEvents(){h(this,vo).on(Ne.startedLivestream,t=>{this.livestream.playbackUrl=t.playbackUrl,this.livestream.setLivestreamState("LIVESTREAMING")}),h(this,vo).on(Ne.stoppedLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,vo).on(Ne.erroredLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,vo).on(Ne.roomPeerCount,t=>{this.livestream.viewerCount=t.count,this.livestream.emit("viewerCountUpdate",t.count)}),C.on(k.PEER_JOINED,async t=>{var i;((i=t.flags)==null?void 0:i.hiddenParticipant)===!0&&t.recorderType==="LIVESTREAMER"&&(I(this,fo,t.id),this.livestream.setLivestreamState("LIVESTREAMING"))}),C.on(k.PEER_CLOSED,t=>{t.id===h(this,fo)&&(I(this,fo,void 0),this.livestream.setLivestreamState("IDLE"))}),C.onAsync(k.ROOM_JOINED,async t=>{var i,r;b.debug("[ROOM_JOINED] resolved request to fetch livestream.");const n=(i=t.peers)==null?void 0:i.filter(s=>{var a;return!!((a=s.flags)!=null&&a.hiddenParticipant)});n.length?(I(this,fo,n&&((r=n[0])==null?void 0:r.id)),this.livestream.setLivestreamState("LIVESTREAMING")):(I(this,fo,void 0),this.livestream.setLivestreamState("IDLE"))}),C.onAsync(k.LEAVE_MEDIA_ROOM,async()=>{if(!this.livestream.playbackUrl){b.info("Fetching livestreaming state on leave stage");try{await this.fetchInitialLivestreamingState()}catch{}}}),C.onAsync(k.SOCKET_SERVICE_ROOM_JOINED,async()=>{try{await this.fetchInitialLivestreamingState()}catch{}})}}fo=new WeakMap,vo=new WeakMap;qQ([E.trace("LivestreamController.setupEvents")],D6.prototype,"setupEvents",1);const Qe=Ur(Ib().permissions);var ye;const Ly=class{constructor(e){if(A(this,ye,void 0),!e)throw b.error("DytePermissionsPreset::load_preset_permissions_failed"),new R("Could not load preset permissions.");I(this,ye,e)}static fromResponse(e){return new Ly(e)}static default(){return new Ly(Qe)}get acceptWaitingRequests(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.acceptWaitingRequests)!=null?t:Qe.acceptWaitingRequests}get requestProduceVideo(){var e,t,i;return((i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)===ui.CanRequest}get requestProduceAudio(){var e,t,i;return((i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.audio)==null?void 0:i.canProduce)===ui.CanRequest}get requestProduceScreenshare(){var e,t,i;return((i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)===ui.CanRequest}get canAllowParticipantAudio(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canAcceptProductionRequests)!=null?t:Qe.canAcceptProductionRequests}get canAllowParticipantScreensharing(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canAcceptProductionRequests)!=null?t:Qe.canAcceptProductionRequests}get canAllowParticipantVideo(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canAcceptProductionRequests)!=null?t:Qe.canAcceptProductionRequests}get canDisableParticipantAudio(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.disableParticipantAudio)!=null?t:Qe.disableParticipantAudio}get canDisableParticipantVideo(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.disableParticipantVideo)!=null?t:Qe.disableParticipantVideo}get kickParticipant(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.kickParticipant)!=null?t:Qe.kickParticipant}get pinParticipant(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.pinParticipant)!=null?t:Qe.pinParticipant}get canRecord(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canRecord)!=null?t:Qe.canRecord}get waitingRoomType(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.waitingRoomType)!=null?t:Qe.waitingRoomType}get waitingRoomBehaviour(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.waitingRoomType)!=null?t:Qe.waitingRoomType}get plugins(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.plugins)!=null?t:Qe.plugins}get polls(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.polls)!=null?t:Qe.polls}get produceVideo(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)!=null?r:Qe.media.video.canProduce}get requestProduce(){return h(this,ye).media.audio.canProduce===ui.CanRequest||h(this,ye).media.video.canProduce===ui.CanRequest||h(this,ye).media.screenshare.canProduce===ui.CanRequest}get canProduceVideo(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)!=null?r:Qe.media.video.canProduce}get produceScreenshare(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)!=null?r:Qe.media.screenshare.canProduce}get canProduceScreenshare(){var e,t,i,r;return(r=(i=(t=(e=h(this,ye))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)!=null?r:Qe.media.screenshare.canProduce}get produceAudio(){var e;return(e=h(this,ye).media.audio.canProduce)!=null?e:Qe.media.audio.canProduce}get canProduceAudio(){var e;return(e=h(this,ye).media.audio.canProduce)!=null?e:Qe.media.audio.canProduce}get chatPublic(){var e,t,i;return(i=(t=(e=h(this,ye))==null?void 0:e.chat)==null?void 0:t.public)!=null?i:Qe.chat.public}get chatPrivate(){var e,t,i;return(i=(t=(e=h(this,ye))==null?void 0:e.chat)==null?void 0:t.private)!=null?i:Qe.chat.private}get connectedMeetings(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.connectedMeetings)!=null?t:Qe==null?void 0:Qe.connectedMeetings}get hiddenParticipant(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.hiddenParticipant)!=null?t:Qe.hiddenParticipant}get showParticipantList(){var e;return(e=h(this,ye).showParticipantList)!=null?e:Qe.showParticipantList}get canChangeParticipantRole(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canChangeParticipantPermissions)!=null?t:Qe.canChangeParticipantPermissions}get canChangeParticipantPermissions(){var e,t;return(t=(e=h(this,ye))==null?void 0:e.canChangeParticipantPermissions)!=null?t:Qe.canChangeParticipantPermissions}get canChangeTheme(){return!1}get canPresent(){return h(this,ye).media.audio.canProduce===ui.Allowed||h(this,ye).media.video.canProduce===ui.Allowed||h(this,ye).media.screenshare.canProduce===ui.Allowed}get acceptPresentRequests(){return h(this,ye).canAcceptProductionRequests}get canEditDisplayName(){var e;return(e=h(this,ye).canEditDisplayName)!=null?e:!1}get maxScreenShareCount(){return 1}get isRecorder(){return h(this,ye).isRecorder}get canSpotlight(){return h(this,ye).canSpotlight}get canLivestream(){return h(this,ye).canLivestream}get isV2(){return!0}};let jE=Ly;ye=new WeakMap;const JQ=Ur(Ib());var On,Vc,Xl;const Dy=class{constructor(e){if(A(this,On,void 0),A(this,Vc,void 0),A(this,Xl,void 0),!e)throw new R("Could not load preset.");I(this,On,e.config),I(this,Vc,e.ui||Ur(Ib().ui)),I(this,Xl,e.permissions.plugins.config)}static fromResponse(e){return new Dy(e)}static default(){return new Dy(JQ)}get setupScreen(){return{isEnabled:!0}}get waitingRoom(){return{isEnabled:!0}}get controlBar(){return{isEnabled:!0,elements:{chat:!0,fullscreen:!0,invite:!1,layout:!1,participants:!0,plugins:!0,polls:!0,reactions:!1,screenshare:!0}}}get header(){return{isEnabled:!0,elements:{logo:h(this,Vc).designTokens.logo,timer:!0,title:!0,participantCount:!0,changeLayout:!1}}}get pipMode(){return!0}get viewType(){return h(this,On).viewType}get maxVideoStreams(){return h(this,On).maxVideoStreams}get maxScreenShareCount(){return h(this,On).maxScreenshareCount}get plugins(){return[]}get disabledPlugins(){return Object.keys(h(this,Xl)).filter(e=>h(this,Xl)[e].disabled)}get designTokens(){return h(this,Vc).designTokens}get configDiff(){return h(this,Vc).configDiff}get mediaConstraints(){var e,t,i,r,n,s,a,o,c,d,l,u,g,m,f,w;return{video:{quality:(r=(i=(t=(e=h(this,On))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.quality)!=null?r:er.video.quality,frameRate:(o=(a=(s=(n=h(this,On))==null?void 0:n.media)==null?void 0:s.video)==null?void 0:a.frameRate)!=null?o:er.video.frameRate},screenshare:{quality:(u=(l=(d=(c=h(this,On))==null?void 0:c.media)==null?void 0:d.screenshare)==null?void 0:l.quality)!=null?u:er.screenshare.quality,frameRate:(w=(f=(m=(g=h(this,On))==null?void 0:g.media)==null?void 0:m.screenshare)==null?void 0:f.frameRate)!=null?w:er.screenshare.frameRate}}}get isV2(){return!0}};let $E=Dy;On=new WeakMap,Vc=new WeakMap,Xl=new WeakMap;const KQ={setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{logo:"",timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,grid:{multi:{max_video_count:9,video_fit:"cover"},single:{max_video_count:6,video_fit:"cover"},default_view:"MULTI"},colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",text_primary:"#EEEEEE",video_background:"#1A1A1A"},controls:{pip_toggle:!1},plugins:[]},ZQ=Ur(KQ);var xi,eu,tu,sg,ag;const Ny=class{constructor(e){if(A(this,xi,void 0),A(this,eu,void 0),A(this,tu,void 0),A(this,sg,void 0),A(this,ag,[]),!e)throw new R("Could not load preset theme.");I(this,xi,e),I(this,eu,1),I(this,tu,vn.GroupCall)}static fromResponse(e){return new Ny(e)}static default(){return new Ny(ZQ)}configFromPermissions(e){var t,i,r,n,s,a,o,c,d,l,u,g;I(this,eu,e.maxScreenshareCount||1),I(this,tu,e.viewType),I(this,sg,{video:{quality:(r=(i=(t=e==null?void 0:e.produce)==null?void 0:t.video)==null?void 0:i.quality)!=null?r:er.video.quality,frameRate:(a=(s=(n=e==null?void 0:e.produce)==null?void 0:n.video)==null?void 0:s.frameRate)!=null?a:er.video.frameRate},screenshare:{quality:(d=(c=(o=e==null?void 0:e.produce)==null?void 0:o.screenshare)==null?void 0:c.quality)!=null?d:er.screenshare.quality,frameRate:(g=(u=(l=e==null?void 0:e.produce)==null?void 0:l.screenshare)==null?void 0:u.frameRate)!=null?g:er.screenshare.frameRate}})}setDisabledPlugins(e){const t=h(this,xi).plugins;t&&t.length>0&&I(this,ag,e.filter(i=>!t.includes(i)))}get setupScreen(){return h(this,xi).setupScreen}get aloneHere(){return h(this,xi).aloneHere}get waitingRoom(){return h(this,xi).waitingRoom}get controlBar(){return h(this,xi).controlBar}get header(){return h(this,xi).header}get pipMode(){var e;return((e=h(this,xi).controls)==null?void 0:e.pipToggle)||h(this,xi).pipMode}get viewType(){return h(this,tu)}get autoTune(){return h(this,xi).autoTune}get grid(){return h(this,xi).grid}get maxVideoStreams(){return{mobile:this.grid.multi.maxVideoCount>6?6:this.grid.multi.maxVideoCount,desktop:this.grid.multi.maxVideoCount}}get maxScreenShareCount(){return h(this,eu)}get colors(){return h(this,xi).colors}get controls(){return h(this,xi).controls}get plugins(){return h(this,xi).plugins}get disabledPlugins(){return h(this,ag)}get mediaConstraints(){return h(this,sg)}get isV2(){return!1}};let VE=Ny;xi=new WeakMap,eu=new WeakMap,tu=new WeakMap,sg=new WeakMap,ag=new WeakMap;var og;class QQ{constructor(t){A(this,og,void 0),I(this,og,t)}on(t,i){let r;t===Ne.roomPeerCount?r=ZS.fromBinary.bind(ZS):r=nE.fromBinary.bind(nE),h(this,og).on(t,({payload:n})=>{const s=r(n);return i(s)})}}og=new WeakMap;var Cr;class YQ{constructor(t){A(this,Cr,void 0),I(this,Cr,t)}async getStageRequests(){const{payload:t}=await h(this,Cr).sendMessagePromise(Ne.getStageRequests);return t?sv.fromBinary(t):{stageRequests:[]}}requestAccess(){h(this,Cr).sendMessage(Ne.requestStageAccess)}cancelRequestAccess(){h(this,Cr).sendMessage(Ne.cancelStageRequest)}async grantAccess(t){const i={userIds:t};await h(this,Cr).sendMessagePromise(Ne.grantStageAccess,wJ.toBinary(i))}async denyAccess(t){const i={userIds:t};await h(this,Cr).sendMessagePromise(Ne.denyStageAccess,EJ.toBinary(i))}joinStage(){return h(this,Cr).sendMessage(Ne.joinStage)}leaveStage(t){const i={userIds:[t]};return h(this,Cr).sendMessage(Ne.leaveStage,aE.toBinary(i))}kick(t){const i={userIds:t};return h(this,Cr).sendMessagePromise(Ne.leaveStage,aE.toBinary(i))}on(t,i){let r;switch(t){case Ne.grantStageAccess:case Ne.denyStageAccess:{r=void 0;break}case Ne.getStagePeers:{r=sE.fromBinary.bind(sE);break}case Ne.getStageRequests:case Ne.requestStageAccess:case Ne.cancelStageRequest:{r=sv.fromBinary.bind(sv);break}}h(this,Cr).on(t,({payload:n,id:s})=>{if(!n||!r)return i(void 0,s);const a=r(n);return i(a,s)})}}Cr=new WeakMap;var XQ=Object.defineProperty,eY=Object.getOwnPropertyDescriptor,cc=(e,t,i,r)=>{for(var n=r>1?void 0:r?eY(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&XQ(t,i,n),n},Xr,Mn,as;class Ha extends Ot{constructor(t,i,r){super(),A(this,Xr,void 0),A(this,Mn,void 0),A(this,as,void 0),v(this,"status"),I(this,Xr,r),I(this,as,i),I(this,Mn,t)}async getAccessRequests(){if(!h(this,Mn))throw new R("You do not have permissions for getStageRequests");const{stageRequests:t}=await h(this,Xr).getStageRequests();return{stageRequests:t}}requestAccess(){if(this.status!=="OFF_STAGE")throw new R(`Unable to request access you are currently ${this.status}`);if(h(this,Mn)){this.setStatus("ACCEPTED_TO_JOIN_STAGE");return}h(this,Xr).requestAccess(),this.setStatus("REQUESTED_TO_JOIN_STAGE")}cancelRequestAccess(){h(this,Xr).cancelRequestAccess(),this.setStatus("OFF_STAGE")}grantAccess(t){if(!h(this,Mn))throw new R("You do not have permissions for grantAccess");return h(this,Xr).grantAccess(t)}denyAccess(t){if(!h(this,Mn))throw new R("You do not have permissions for denyAccess");return h(this,Xr).denyAccess(t)}async join(){if(!h(this,Mn)&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw new R(`Unable to join stage you are currently ${this.status}`);if(h(this,Mn)&&this.status==="ON_STAGE")throw new R("You are already on stage.");h(this,Xr).joinStage(),await C.emitAsync(k.JOIN_MEDIA_ROOM),this.setStatus("ON_STAGE")}async leave(){var t;if(!(this.status==="ON_STAGE"||this.status==="ACCEPTED_TO_JOIN_STAGE"))throw new R(`Unable to leave stage you are currently ${this.status}`);h(this,as).setIsPinned(!1),this.setStatus("OFF_STAGE"),(t=Vt())!=null&&t.roomJoined&&await C.emitAsync(k.LEAVE_MEDIA_ROOM);try{await h(this,as).disableScreenShare(),await h(this,as).disableVideo(),await h(this,as).disableAudio(),h(this,as).destructMediaHandler()}catch(i){b.error("DyteStage.leaveStage.DisableMediaError",{error:i})}h(this,Xr).leaveStage(h(this,as).userId)}async kick(t){if(!h(this,Mn))throw new R("You do not have permissions for kick");return h(this,Xr).kick(t)}setStatus(t){this.status!==t&&(this.status=t,this.emit("stageStatusUpdate",t))}}Xr=new WeakMap,Mn=new WeakMap,as=new WeakMap;cc([E.trace("DyteStage.getStageRequests")],Ha.prototype,"getAccessRequests",1);cc([E.trace("DyteStage.requestAccess")],Ha.prototype,"requestAccess",1);cc([E.trace("DyteStage.cancelRequestAccess")],Ha.prototype,"cancelRequestAccess",1);cc([E.trace("DyteStage.grantAccess")],Ha.prototype,"grantAccess",1);cc([E.trace("DyteStage.denyAccess")],Ha.prototype,"denyAccess",1);cc([E.trace("DyteStage.joinStage")],Ha.prototype,"join",1);cc([E.trace("DyteStage.leaveStage")],Ha.prototype,"leave",1);var tY=Object.defineProperty,iY=Object.getOwnPropertyDescriptor,rY=(e,t,i,r)=>{for(var n=r>1?void 0:r?iY(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&tY(t,i,n),n},Fc,iu,yo,cg;class N6{constructor(t,i,r){v(this,"stage"),A(this,Fc,void 0),A(this,iu,void 0),A(this,yo,void 0),A(this,cg,0),this.stage=new Ha(i,r,t),I(this,yo,t),I(this,Fc,i),I(this,iu,r),this.setupEvents()}setupEvents(){h(this,yo).on(Ne.grantStageAccess,()=>{h(this,Fc)||(this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"))}),h(this,yo).on(Ne.denyStageAccess,()=>{h(this,Fc)||(this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"))}),h(this,yo).on(Ne.getStagePeers,t=>{this.stage.status==="ON_STAGE"&&!t.stagePeers.includes(h(this,iu).userId)&&C.emitAsync(k.LEAVE_MEDIA_ROOM)}),h(this,yo).on(Ne.getStageRequests,t=>{var i;if(!h(this,Fc))return;const r=(i=t==null?void 0:t.stageRequests)!=null?i:[];h(this,cg)<r.length&&r.length>0&&this.stage.emit("newStageRequest",{count:r.length}),I(this,cg,r.length),this.stage.emit("stageAccessRequestUpdate",r)}),C.onAsync(k.SOCKET_SERVICE_ROOM_JOINED,async t=>{var i;switch((i=t.peer)==null?void 0:i.stageType){case Io.OFF_STAGE:{this.setStageStatus("OFF_STAGE");break}case Io.ON_STAGE:{h(this,iu).config.viewType==="LIVESTREAM"&&await C.emitAsync(k.JOIN_MEDIA_ROOM),this.setStageStatus("ON_STAGE");break}case Io.APPROVED_STAGE:{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE");break}case Io.REQUESTED_STAGE:{this.setStageStatus("REQUESTED_TO_JOIN_STAGE");break}default:this.setStageStatus("OFF_STAGE")}})}setStageStatus(t){this.stage.status!==t&&(this.stage.status=t,this.stage.emit("stageStatusUpdate",t))}}Fc=new WeakMap,iu=new WeakMap,yo=new WeakMap,cg=new WeakMap;rY([E.trace("DyteStage.setupEvents")],N6.prototype,"setupEvents",1);var nY=Object.defineProperty,sY=Object.getOwnPropertyDescriptor,nw=(e,t,i,r)=>{for(var n=r>1?void 0:r?sY(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&nY(t,i,n),n},_o;class wf{constructor(t){A(this,_o,void 0),I(this,_o,t)}getPolls(){return h(this,_o).sendMessagePromise(ds.getPolls)}createPoll(t,i,r=!1,n=!1){const s={anonymous:r,hideVotes:n,question:t,options:i};return h(this,_o).sendMessage(ds.createPoll,IJ.toBinary(s))}votePoll(t,i){const r={index:i,pollId:t};return h(this,_o).sendMessage(ds.votePoll,MJ.toBinary(r))}on(t,i){let r,n;switch(t){case ds.updatePoll:case ds.createPoll:case ds.votePoll:{r=av.fromBinary.bind(av),n=av.create();break}}h(this,_o).on(t,({payload:s})=>{let a=n;try{a=r(s)}catch(o){b.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}_o=new WeakMap;nw([E.trace("PollSocketHandler.getPolls")],wf.prototype,"getPolls",1);nw([E.trace("PollSocketHandler.createPoll")],wf.prototype,"createPoll",1);nw([E.trace("PollSocketHandler.votePoll")],wf.prototype,"votePoll",1);class aY{constructor(){v(this,"battery"),v(this,"init",async()=>{try{"getBattery"in navigator&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("chargingchange",this.updateChargeInfo),this.battery.addEventListener("levelchange",this.updateLevelInfo),this.updateLevelInfo(),this.updateChargeInfo())}catch(t){b.error("Error getting battery",t)}}),v(this,"updateChargeInfo",()=>{var t;b.log(`Battery charging? ${(t=this.battery)!=null&&t.charging?"Yes":"No"}`)}),v(this,"updateLevelInfo",()=>{var t;b.log(`Battery level: ${((t=this.battery)==null?void 0:t.level)*100}%`)}),v(this,"cleanup",()=>{var t,i;"getBattery"in navigator&&((t=this.battery)==null||t.removeEventListener("chargingchange",this.updateChargeInfo),(i=this.battery)==null||i.removeEventListener("levelchange",this.updateLevelInfo))})}}const FE=new aY;var ha,ea,dg,Uy;class oY extends Ot{constructor(t){super(),A(this,dg),A(this,ha,void 0),A(this,ea,void 0),I(this,ha,t),I(this,ea,!1)}get mediaPermission(){return h(this,ha).mediaPermissions.audio}async getTrackMetadata(t=!1){if(!ls.track){if(!t)return null;const i=await Ut(this,dg,Uy).call(this);ls.setTrack(i)}return ls.getTrackMetadata()}async startTrackAnalysis(t=!1){if(h(this,ea))return!0;if(!await ls.startTrackAnalysis()){if(t){const i=await Ut(this,dg,Uy).call(this);return ls.setTrack(i),this.startTrackAnalysis(t)}return I(this,ea,!1),!1}return I(this,ea,!0),!0}stopTrackAnalysis(){return h(this,ea)&&(I(this,ea,!1),ls.stopTrackAnalysis()),!0}}ha=new WeakMap,ea=new WeakMap,dg=new WeakSet,Uy=async function(){var e;try{const t=h(this,ha).getCurrentDevices(),i=(e=t==null?void 0:t.audio)==null?void 0:e.deviceId;let r={audio:!0};i&&(r=Et.getAudioConstraints({audioDeviceId:i}));const n=await Et.getAudioTrack(r);return h(this,ha).mediaPermissions.audio="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:h(this,ha).mediaPermissions.audio,kind:"audio"}),n}catch(t){const i=vf(t.name,t.message);throw h(this,ha).mediaPermissions.audio=i,C.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:"audio"}),new R("Failed to fetch audio track","1700")}};var bo;class cY extends Ot{constructor(){super(),A(this,bo,void 0),I(this,bo,!1)}async getNetworkMetadata(){return new Promise(t=>{Z.onSafeInitialization(()=>{Z.onPreCallTestResults(i=>{t(i.connectionInfo)}),Z.startPreCallTest()})})}startNetworkAnalysis(){return I(this,bo,ya.collectSendTransportStats()&&ya.collectRecvTransportStats()),h(this,bo)}stopNetworkAnalysis(){return I(this,bo,!(ya.stopStatsCollection("send")&&ya.stopStatsCollection("receive"))),h(this,bo)}}bo=new WeakMap;var Bc,hr;class dY extends Ot{constructor(t){super(),A(this,Bc,void 0),A(this,hr,void 0),I(this,Bc,t),I(this,hr,{audio:!1,video:!1})}get mediaPermission(){return h(this,Bc).mediaPermissions.screenshare}getAudioTrackMetaData(){var t;return(t=h(this,Bc).screenShareTracks)!=null&&t.audio?Xh.getTrackMetadata():null}getVideoTrackMetaData(){var t;return(t=h(this,Bc).screenShareTracks)!=null&&t.video?eg.getTrackMetadata():null}async startAudioTrackAnalysis(){if(h(this,hr).audio)return!0;const t=await Xh.startTrackAnalysis();return h(this,hr).audio=t,h(this,hr).audio}async startVideoTrackAnalysis(){if(h(this,hr).video)return!0;const t=await eg.startTrackAnalysis();return h(this,hr).video=t,h(this,hr).video}stopAudioTrackAnalysis(){return h(this,hr)&&(h(this,hr).audio=!1,Xh.stopTrackAnalysis()),!0}stopVideoTrackAnalysis(){return h(this,hr)&&(h(this,hr).video=!1,eg.stopTrackAnalysis()),!0}}Bc=new WeakMap,hr=new WeakMap;var Vn,ta,wo,ru,jy,U6;class lY extends Ot{constructor(t){super(),A(this,jy),A(this,Vn,void 0),A(this,ta,void 0),A(this,wo,void 0),A(this,ru,void 0),I(this,Vn,t),I(this,ta,!1),I(this,wo,!1)}get mediaPermission(){return h(this,Vn).mediaPermissions.video}getTrackMetadata(){return h(this,Vn).videoTrack?null:us.getTrackMetadata()}async startTrackAnalysis({preview:t}={preview:!1}){return h(this,ta)?!0:await us.startTrackAnalysis()?(t&&I(this,wo,!0),I(this,ta,!0),!0):!1}stopTrackAnalysis(){h(this,ta)&&(us.stopTrackAnalysis(),I(this,ta,!1),h(this,wo)&&I(this,wo,!1))}async startPreview(){let t=!0,{track:i}=us;return i?i=i.clone():(t=!1,i=await Ut(this,jy,U6).call(this)),h(this,ru)||(us.setClonedTrack(i,t),I(this,ru,!0)),i}stopPreview(){h(this,ta)&&h(this,wo)&&this.stopTrackAnalysis(),I(this,ru,!1),us.resetClonedTrack(h(this,Vn).videoTrack)}}Vn=new WeakMap,ta=new WeakMap,wo=new WeakMap,ru=new WeakMap,jy=new WeakSet,U6=async function(){var e;try{const t=h(this,Vn).getCurrentDevices(),i=(e=t==null?void 0:t.video)==null?void 0:e.deviceId;let r={video:{width:{ideal:1280},height:{ideal:720}}};i&&(r=Et.getVideoConstraints({videoDeviceId:i}));const n=await Et.getVideoTrack(r);return h(this,Vn).mediaPermissions.video="ACCEPTED",C.emit(k.MEDIA_PERMISSION_UPDATE,{message:h(this,Vn).mediaPermissions.video,kind:"video"}),n}catch(t){const i=vf(t.name,t.message);throw h(this,Vn).mediaPermissions.video=i,C.emit(k.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:"video"}),new R("Failed to fetch video track","1700")}};class uY{constructor(t){v(this,"audio"),v(this,"video"),v(this,"screenshare"),v(this,"network"),this.audio=new oY(t),this.video=new lY(t),this.screenshare=new dY(t),this.network=new cY}}const wv=e=>{const{type:t,id:i,transport:r,timestamp:n,currentRoundTripTime:s,bytesSent:a,bytesReceived:o,kind:c,jitter:d,packetsLost:l,totalPacketSendDelay:u}=e;switch(t){case"candidate-pair":return{type:t,id:i,transport:r,timestamp:n,rtt:s,bytesSent:a,bytesReceived:o};case"inbound-rtp":return{type:t,id:i,transport:r,timestamp:n,kind:c,jitter:d,packetsLost:l,bytesReceived:o};default:return{type:t,id:i,transport:r,timestamp:n,kind:c,packetSendDelay:u,bytesSent:a}}};class pY{constructor(t){v(this,"troubleshooter"),this.troubleshooter=new uY(t),this.setupEvents()}setupEvents(){C.on(k.AUDIO_TRACK_ANALYSIS,t=>{this.troubleshooter.audio.emit("audioTrackStats",t)}),C.on(k.AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"ended"})}),C.on(k.AUDIO_TRACK_CREATED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"live"})}),C.on(k.SCREENSHARE_AUDIO_TRACK_ANALYSIS,t=>{this.troubleshooter.screenshare.emit("audioTrackStats",t)}),C.on(k.SCREENSHARE_AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"ended"})}),C.on(k.SCREENSHARE_AUDIO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"live"})}),C.on(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS,t=>{this.troubleshooter.screenshare.emit("videoTrackStats",t)}),C.on(k.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.screenshare.stopVideoTrackAnalysis()}),C.on(k.SCREENSHARE_VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"ended"})}),C.on(k.SCREENSHARE_VIDEO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"live"})}),C.on(k.VIDEO_TRACK_ANALYSIS,t=>{this.troubleshooter.video.emit("videoTrackStats",t)}),C.on(k.VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.video.stopTrackAnalysis()}),C.on(k.VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"ended"})}),C.on(k.VIDEO_TRACK_CREATED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"live"})}),C.on(k.CANDIDATE_PEER_UPDATE,t=>{this.troubleshooter.network.emit("connectionDelayStats",wv(t))}),C.on(k.INBOUND_RTP_UPDATE,t=>{this.troubleshooter.audio.emit("audioConsumptionStats",wv(t))}),C.on(k.OUTBOUND_RTP_UPDATE,t=>{this.troubleshooter.audio.emit("audioProductionStats",wv(t))}),C.on(k.SEND_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"ended"})}),C.on(k.RECV_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"ended"})}),C.on(k.SEND_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"live"})}),C.on(k.RECV_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"live"})})}}const So=class{static handleConnectedRoomsDumpRaw({payload:e}){var t;const i=lq.fromBinary(e),r=i.meetings.map(n=>{var s;return{id:n.id,title:n.title,participants:(s=n.participants)!=null?s:[]}});return{parentMeeting:{id:i.parentMeeting.id,title:i.parentMeeting.title,participants:(t=i.parentMeeting.participants)!=null?t:[]},meetings:r}}static handleTransferPeerRaw({payload:e}){const t=Nq.fromBinary(e);return{authToken:t.authToken,meetingId:t.meetingId}}static handleMovedPeerRaw({payload:e}){const t=q4.fromBinary(e);return{meetingId:t.meetingId,customParticipantId:t.customParticipantId}}static handleConnectedRoomsUpdatedRaw({payload:e}){return XS.fromBinary(e).payloads.map(t=>({id:t.id,title:t.title}))}static handleConnectedRoomsDeletedRaw({payload:e}){return Cq.fromBinary(e).payloads}static async getConnectedRoomsDump(){const e=await So.socketService.sendMessagePromise(Ne.getConnectedRoomsDump);return So.handleConnectedRoomsDumpRaw(e)}static async createConnectedRooms(e){const{payload:t}=await So.socketService.sendMessagePromise(Ne.createConnectedRooms,gq.toBinary({payloads:e}));return XS.fromBinary(t).payloads.map(i=>({id:i.id,title:i.title}))}static async updateConnectedRooms(e){}static async disableConnectedRooms(e){const t=e.map(r=>({id:r})),i=await So.socketService.sendMessagePromise(Ne.deleteConnectedRooms,Tq.toBinary({payloads:t}));return So.handleConnectedRoomsDeletedRaw(i)}static async movePeersBetweenRooms(e){try{const t=await So.socketService.sendMessagePromise(Ne.movePeers,Oq.toBinary({sourceMeetingId:e.sourceMeetingId,destinationMeetingId:e.destinationMeetingId,participants:e.participants}));return new TextDecoder().decode(t.payload).includes("error")?{success:!1,error:"failed to move participants"}:{success:!0}}catch(t){return{success:!1,error:t}}}};let At=So;v(At,"socketService"),v(At,"currentMeetingId");const hY={codecs:[{kind:"audio",mimeType:"audio/opus",clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc",parameter:""}],parameters:{},preferredPayloadType:100},{kind:"video",mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"x-google-start-bitrate":1e3},preferredPayloadType:101},{kind:"video",mimeType:"video/rtx",preferredPayloadType:102,clockRate:9e4,parameters:{apt:101},rtcpFeedback:[]},{kind:"video",mimeType:"video/VP9",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"profile-id":0,"x-google-start-bitrate":1e3},preferredPayloadType:103},{kind:"video",mimeType:"video/rtx",preferredPayloadType:104,clockRate:9e4,parameters:{apt:103},rtcpFeedback:[]},{kind:"video",mimeType:"video/H264",clockRate:9e4,parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f","x-google-start-bitrate":1e3},rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],preferredPayloadType:105},{kind:"video",mimeType:"video/rtx",preferredPayloadType:106,clockRate:9e4,parameters:{apt:105},rtcpFeedback:[]}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"}]};var gY=Object.defineProperty,mY=Object.getOwnPropertyDescriptor,Tp=(e,t,i,r)=>{for(var n=r>1?void 0:r?mY(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&gY(t,i,n),n};const lg=class{constructor(e,t,i,r,n,s,a,o,c,d,l,u,g,m){v(this,"apiBase"),v(this,"chatController"),v(this,"metaController"),v(this,"participantController"),v(this,"pluginController"),v(this,"pollController"),v(this,"remoteController"),v(this,"selfController"),v(this,"recordingController"),v(this,"spotlightController"),v(this,"livestreamController"),v(this,"internalsController"),v(this,"stageController"),v(this,"troubleshooterController"),this.apiBase=e,this.metaController=t,this.selfController=i,this.pluginController=r,this.participantController=n,this.chatController=s,this.pollController=a,this.remoteController=o,this.recordingController=c,this.spotlightController=d,this.livestreamController=u,this.internalsController=l,this.stageController=g,this.troubleshooterController=m}static async init(e,t){var i,r,n,s,a,o,c,d,l,u,g,m,f,w;const{apiBase:S="https://api.cluster.dyte.in",authToken:y}=e,_={chat:!0,participant:!0,plugin:!0,poll:!0,self:!0,meta:!0,permissions:!0,theme:!0,spotlight:!0,tracing:!0,devTools:{logs:!1},internals:!0,stage:!0,...e==null?void 0:e.modules};C.reset(),Yz((i=e.overrides)!=null?i:{});const T=rK({authToken:y,baseURL:S});T.setHeader("dyte-tracing-id",t),T.setPeerId(t),T.setRoomName(e.roomName);const{roomName:P}=e,L=Ee.isV2AuthToken?Ee.meetingId:P,O=new A4,B=O.load({routerRtpCapabilities:hY}),H=T.getRoomNodeData({roomName:L,peerId:t}),ie=Ee.isV2AuthToken?void 0:T.getUserPreset(P),K=await T.getUserDetails(),ge=Ee.isV2AuthToken?K.participant.organizationId:K.organizationId;E.meetingMetadata.userId=Ee.isV2AuthToken?K.participant.id:K.id,Cz({...e,modules:_,apiBase:S,organizationId:ge}),E.meetingMetadata.organizationId=ge;const He=FQ(L);await ee.identify(`${oy.PEER}_${t}`,JSON.parse(JSON.stringify({entity:oy.PEER,clientId:ge,isAnonUser:!ge,sdkVersion:Ld,meetingHash:He,roomName:L,...Oe.getDeviceInfo()}))),tQ();const Xt=ee.getValue(re.PLUGIN_SOCKET_SERVER),ei=T.getPlugins(Xt);b.info("flagsmith::allFlags",{flags:JSON.stringify(ee.getAllFlags())},!0),FE.init();let es=Ee.isV2AuthToken?jE.default():JS.default(),dr=Ee.isV2AuthToken?$E.default():VE.default(),ts=Ee.isV2AuthToken?K.preset.name:void 0;if(_.permissions||_.theme){const is=await ie;is&&(ts=is.presetName),_.permissions&&(es=Ee.isV2AuthToken?jE.fromResponse(K.preset.permissions):JS.fromResponse(is.permissions)),_.theme&&(dr=Ee.isV2AuthToken?$E.fromResponse(K.preset):VE.fromResponse(is.theme),Ee.isV2AuthToken||dr.configFromPermissions(is.permissions))}const{roomNodeUrl:F,meetingTitle:W,useHiveMedia:X}=await H;await B;const Le=u6(dr),vt=ee.hasFeature(re.CUSTOM_PING_PONG),ti=[];X&&ti.push("HIVE"),vt&&ti.push("PING"),Xz({...e,roomName:L,peerId:t,meetingTitle:W,roomNodeUrl:F,device:O});const bt=await lg.createSocketServiceAndRoomNodeClient({...e,roomName:L,peerId:t,meetingTitle:W,roomNodeUrl:F,capabilities:ti,shouldInitializeRoomNode:Le,viewType:dr.viewType,device:O}),Tn=Vt();let Ni,Wr,Pw,Rw,ct,xw,Aw,Iw,Ow,Mw,Lw,Dw,Nw;const Uw=new za(bt),kA=new wf(bt),CA=new xQ(bt),PA=new QQ(bt),RA=new YQ(bt);At.socketService=bt,(r=_.self)==null||r?([ct]=await Promise.all([Zd.init(bt,K,es,dr,ts),Tn instanceof Be?Tn.setupTransports():null]),T.setOrganizationId(ct.self.organizationId)):Tn instanceof Be&&await Tn.setupTransports();const xA=ee.hasFeature(re.TROUBLESHOOTING);if(ct&&xA&&(Nw=new pY(ct.self)),(n=_.participant)==null||n){if(!ct)throw new R("The participant module cannot be initialized without the `self` module");Wr=new Ba(ct.self)}if((s=_.chat)==null||s){if(!ct)throw new R("The chat module cannot be initialized without the `self` module");Ni=await Mo.init(Uw,ct.self,Wr.participants,ti)}if((a=_.plugin)==null||a){if(!ct)throw new R("The plugin module cannot be initialized without the `self` module");if(!Wr)throw new R("The plugin module cannot be initialized without the `participant` module");const is=await ei;Pw=await m6.init(is,CA,Uw,Ni==null?void 0:Ni.chat,ct.self,Wr.participants,ti)}if((o=_.poll)==null||o){if(!ct)throw new R("The poll cannot be initialized without the `self` module");Rw=await f6.init(ct.self,kA,ti)}if((c=_.meta)==null||c){if(!ct)throw new R("The meta module cannot be initialized without the `self` module");xw=new h6(ct.self,bt,W)}if((d=_.remoteControl)==null||d){if(!ct)throw new R("The remote controller cannot be initialized without the `self` module");Aw=new dQ(ct.self,Wr.participants)}if((l=_.recording)==null||l){if(!ct)throw new R("The recording controller cannot be initialized without the `self` module");Iw=new I6(ct.self)}if((u=_.spotlight)==null||u){if(!ct)throw new R("The spotlight controller cannot be initialized without the `self` module");Ow=new M6(ct.self)}if(((g=_.internals)==null||g)&&(Lw=await iw.init()),dr.viewType===vn.Livestream&&((m=_.livestream)==null||m)){if(!ct)throw new R("The livestream controller cannot be initialized without the `self` module");ee.hasFeature(re.LIVESTREAM)&&(Mw=new D6(ct.self,PA))}if((f=_.stage)==null||f){if(!ct)throw new R("The stage client cannot be initialized without the `self` module");Dw=new N6(RA,SZ(es),ct.self)}if(B4(dr.viewType,ti)||((w=e.overrides)==null?void 0:w.chat_socket_server)==="socket-service")try{await bt.connect()}catch(is){b.error("[Socket Service] Failed to connect to socket server:",{error:is})}return new lg(S,xw,ct,Pw,Wr,Ni,Rw,Aw,Iw,Ow,Lw,Mw,Dw,Nw)}static async createSocketServiceAndRoomNodeClient(e){const t=lg.createSocketService(e);return e.shouldInitializeRoomNode?e.capabilities.includes("HIVE")?(await UK({...e,roomName:e.roomName,peerId:e.peerId,socket:t}),t):(await t6({...e,roomName:e.roomName,peerId:e.peerId}),t):t}static createSocketService(e){const{peerId:t,roomName:i,authToken:r,capabilities:n}=e;return new Ep({peerId:t,roomName:i,authToken:r,capabilities:n})}async joinRoom(){return this.selfController.joinRoom()}async leaveRoom(e="left"){return FE.cleanup(),this.selfController.leaveRoom(e)}};let Qd=lg;Tp([E.trace("Controller.joinRoom")],Qd.prototype,"joinRoom",1);Tp([E.trace("Controller.leaveRoom")],Qd.prototype,"leaveRoom",1);Tp([E.trace("Controller.init")],Qd,"init",1);Tp([E.trace("Controller.createSocketServiceAndRoomNodeClient")],Qd,"createSocketServiceAndRoomNodeClient",1);Tp([E.trace("Controller.createSocketService")],Qd,"createSocketService",1);var ug;class fY extends Ot{constructor(t){super(),A(this,ug,void 0),v(this,"meetings",[]),v(this,"parentMeeting",null),I(this,ug,t.self)}get supportsConnectedMeetings(){return h(this,ug).id!==""&&Ee.isV2AuthToken&&ee.hasFeature(re.CONNECTED_MEETINGS)}get isActive(){return this.meetings.length!==0}get currentMeetingId(){return At.currentMeetingId}validateConnectedMeetingsAction(){if(!this.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
            Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`)}async getConnectedMeetings(){return this.validateConnectedMeetingsAction(),await At.getConnectedRoomsDump()}async createMeetings(t){return this.validateConnectedMeetingsAction(),(await At.createConnectedRooms(t)).map(i=>({id:i.id,title:i.title}))}async updateMeetings(t){this.validateConnectedMeetingsAction(),await At.updateConnectedRooms(t.map(i=>({meetingId:i.id,title:i.title})))}async deleteMeetings(t){this.validateConnectedMeetingsAction();const i=this.meetings.map(r=>t.includes(r.id)&&r.participants.length!==0?this.moveParticipants(r.id,this.parentMeeting.id,r.participants.map(n=>n.id)):Promise.resolve());return await Promise.all(i),await At.disableConnectedRooms(t)}async moveParticipants(t,i,r){this.validateConnectedMeetingsAction();const n=new Map;[...this.parentMeeting.participants,...this.meetings.flatMap(a=>a.participants)].forEach(a=>n.set(a.id,a));const s=await At.movePeersBetweenRooms({sourceMeetingId:t,destinationMeetingId:i,participants:r.map(a=>({id:a}))});return s.success&&(i===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.concat(r.map(a=>n.get(a)))),t===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.filter(a=>!r.includes(a.id))),this.meetings=this.meetings.map(a=>{if(i===a.id){const o=a.participants.concat(r.map(c=>n.get(c)));return{...a,participants:o}}if(t===a.id){const o=a.participants.filter(c=>!r.includes(c.id));return{...a,participants:o}}return a})),s}}ug=new WeakMap;var vY=Object.defineProperty,yY=Object.getOwnPropertyDescriptor,sw=(e,t,i,r)=>{for(var n=r>1?void 0:r?yY(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&vY(t,i,n),n},xc,Dl,Sv;const ia=(Sv=class{constructor(e,t){v(this,"connectedMeetings"),A(this,xc,void 0),A(this,Dl,void 0),I(this,xc,t),this.connectedMeetings=new fY(e),this.setCurrentMeeting(e)}static init(e,t){return ia.instance||(ia.instance=new ia(e,t)),ia.instance.connectedMeetings.supportsConnectedMeetings&&(ia.instance.setupEvents(),e.self.once("roomJoined",()=>ia.instance.getConnectedMeetings())),ia.instance}setCurrentMeeting(e){I(this,Dl,e),At.currentMeetingId=e.meta.roomName}getConnectedMeetings(){this.connectedMeetings.getConnectedMeetings()}setupEvents(){At.socketService&&(At.socketService.on(Ne.getConnectedRoomsDump,this.handleConnectedRoomsDump.bind(this)),At.socketService.on(Ne.transferPeer,this.handleTransferPeer.bind(this)),At.socketService.on(Ne.movedPeer,this.handleMovedPeer.bind(this)),At.socketService.on(Ne.connectedRoomsUpdated,this.handleConnectedRoomsUpdated.bind(this)),At.socketService.on(Ne.connectedRoomsDeleted,this.handleConnectedRoomsDeleted.bind(this)))}handleTransferPeer(e){const t=At.handleTransferPeerRaw(e);return this.switchMeeting(t)}async switchMeeting({authToken:e,meetingId:t}){if(!this.connectedMeetings.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
                Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);this.connectedMeetings.emit("changingMeeting",t);const i=h(this,Dl).self.videoEnabled;await h(this,Dl).leaveRoom("connected-meeting"),At.socketService=void 0;const r=await j6.init({authToken:e,apiBase:h(this,xc).apiBase,defaults:{...h(this,xc).defaults,video:i,audio:!1},modules:h(this,xc).modules});return this.connectedMeetings.emit("meetingChanged",r),this.setCurrentMeeting(r),r}handleConnectedRoomsDump(e){const t=At.handleConnectedRoomsDumpRaw(e);this.connectedMeetings.meetings=t.meetings.map(i=>({id:i.id,title:i.title,participants:i.participants||[]})),this.connectedMeetings.parentMeeting={id:t.parentMeeting.id,title:t.parentMeeting.title,participants:t.parentMeeting.participants},this.emitStateUpdate()}handleMovedPeer(e){return At.handleMovedPeerRaw(e)}handleConnectedRoomsUpdated(e){const t=At.handleConnectedRoomsUpdatedRaw(e),i=new Map;this.connectedMeetings.meetings.forEach(r=>{i.set(r.id,r)}),t.forEach(r=>{i.has(r.id)?i.get(r.id).title=r.title:i.set(r.id,{...r,participants:[]})}),this.connectedMeetings.meetings=Array.from(i.values()),this.emitStateUpdate()}handleConnectedRoomsDeleted(e){const t=At.handleConnectedRoomsDeletedRaw(e).map(i=>i.id);this.connectedMeetings.meetings=this.connectedMeetings.meetings.filter(i=>!t.includes(i.id))}emitStateUpdate(){this.connectedMeetings.emit("stateUpdate",{meetings:this.connectedMeetings.meetings,parentMeeting:this.connectedMeetings.parentMeeting})}},xc=new WeakMap,Dl=new WeakMap,v(Sv,"instance"),Sv);let Sf=ia;sw([E.trace("ConnectedMeetingsController.getConnectedMeetings")],Sf.prototype,"getConnectedMeetings",1);sw([E.trace("ConnectedMeetingsController.setupEvents")],Sf.prototype,"setupEvents",1);sw([E.trace("ConnectedMeetingsController.switchMeeting")],Sf.prototype,"switchMeeting",1);function _Y(e){return(t,i,r)=>{const n=r.value,s=e?Qg(n,e):Qg(n);return r.value=(...a)=>{if(s.cache&&s.cache.has(e(...a))){console.warn(`[Dyte] method "${i}" is called twice. This may result in inconsistent behaviors`);try{b.warn("Memoize::double_invoke",{memoize:{doubleInvoked:{property:i}}})}catch{}}return s.apply(this,a)},r}}var bY=Object.defineProperty,wY=Object.getOwnPropertyDescriptor,Ef=(e,t,i,r)=>{for(var n=r>1?void 0:r?wY(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&bY(t,i,n),n};const SY=e=>{var t,i,r,n,s;return`${(t=e.roomName)!=null?t:""}-${e.authToken}-${(i=e.apiBase)!=null?i:""}-${JSON.stringify((r=e.defaults)!=null?r:{})}-${JSON.stringify((n=e.modules)!=null?n:{})}-${JSON.stringify((s=e.overrides)!=null?s:{})}`};var di,bh,Ev,BE,zE;let Ko=(zE=class{constructor(e){A(this,Ev),A(this,di,void 0),A(this,bh,void 0),I(this,di,e)}static async init(e){var t,i,r,n,s,a,o;Oe.init();const c=zm();try{(i=(t=e.modules)==null?void 0:t.tracing)==null||i||(window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION=!0,window.Zone===void 0&&require("zone.js"))}catch{}E.init(c,(n=(r=e.modules)==null?void 0:r.tracing)!=null?n:!0),b.info("DyteClient::init::options",{dyteClientInitOptions:{...e,authToken:`${(s=e.authToken)==null?void 0:s.slice(0,10)}...${(a=e.authToken)==null?void 0:a.slice(-10)}`}}),!navigator.isReactNative&&typeof window<"u"&&(window.addEventListener("error",u=>{var g;!((g=u.filename)!=null&&g.includes("localhost"))&&u.lineno!==0&&b.error("window::error",{error:u.error},!0)}),window.addEventListener("unhandledrejection",u=>{var g,m,f,w,S,y,_,T;b.error("window::unhandledrejection",{error:u==null?void 0:u.reason,networkCall:{url:(m=(g=u==null?void 0:u.reason)==null?void 0:g.config)==null?void 0:m.url,baseURL:(w=(f=u==null?void 0:u.reason)==null?void 0:f.config)==null?void 0:w.baseURL,method:(y=(S=u==null?void 0:u.reason)==null?void 0:S.config)==null?void 0:y.method,status:(_=u==null?void 0:u.reason)==null?void 0:_.status,statusText:(T=u==null?void 0:u.reason)==null?void 0:T.statusText}},!0)})),Qz(e.authToken,e.roomName),E.meetingMetadata.roomName=Ee.isV2AuthToken?Ee.meetingId:e.roomName;const d=await Qd.init(e,c),l=new Ko(d);return Ut(o=l,Ev,BE).call(o,e),l}async joinRoom(){return h(this,di).joinRoom()}async leaveRoom(e){return h(this,di).leaveRoom(e)}get participants(){var e;return(e=h(this,di).participantController)==null?void 0:e.participants}get self(){var e;return(e=h(this,di).selfController)==null?void 0:e.self}get meta(){var e;return(e=h(this,di).metaController)==null?void 0:e.meta}get plugins(){var e;return(e=h(this,di).pluginController)==null?void 0:e.plugins}get chat(){var e;return(e=h(this,di).chatController)==null?void 0:e.chat}get polls(){var e;return(e=h(this,di).pollController)==null?void 0:e.polls}get remote(){var e;return(e=h(this,di).remoteController)==null?void 0:e.remote}get connectedMeetings(){var e;return(e=h(this,bh))==null?void 0:e.connectedMeetings}get recording(){var e;return(e=h(this,di).recordingController)==null?void 0:e.recording}get spotlight(){var e;return(e=h(this,di).spotlightController)==null?void 0:e.spotlight}get livestream(){var e;return(e=h(this,di).livestreamController)==null?void 0:e.livestream}get stage(){var e;return(e=h(this,di).stageController)==null?void 0:e.stage}get troubleshoot(){var e;return(e=h(this,di).troubleshooterController)==null?void 0:e.troubleshooter}get __internals__(){var e;return(e=h(this,di).internalsController)==null?void 0:e.internals}},di=new WeakMap,bh=new WeakMap,Ev=new WeakSet,BE=function(e){I(this,bh,Sf.init(this,e))},zE);Ef([Ti(e=>{throw new R(e.message,"0002")})],Ko.prototype,"joinRoom",1);Ef([Ti(e=>{throw new R(e.message,"0003")})],Ko.prototype,"leaveRoom",1);Ef([Ti(e=>{throw new R(e.message,"0001")}),_Y(SY)],Ko,"init",1);Ko=Ef([Ti(e=>{throw new R(e.message,"0000")})],Ko);const j6=Ko;var EY=Object.defineProperty,TY=(e,t,i)=>t in e?EY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Tv=(e,t,i)=>(TY(e,typeof t!="symbol"?t+"":t,i),i),$6={exports:{}},kp={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var HE=Object.getOwnPropertySymbols,kY=Object.prototype.hasOwnProperty,CY=Object.prototype.propertyIsEnumerable;function PY(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function RY(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}RY();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xY=l_,V6=60103;kp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var GE=Symbol.for;V6=GE("react.element"),kp.Fragment=GE("react.fragment")}var AY=xY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IY=Object.prototype.hasOwnProperty,OY={key:!0,ref:!0,__self:!0,__source:!0};function F6(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)IY.call(t,r)&&!OY.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:V6,type:e,key:s,ref:a,props:n,_owner:AY.current}}kp.jsx=F6;kp.jsxs=F6;$6.exports=kp;const MY=$6.exports.jsx;class LY{constructor(t){Tv(this,"meeting"),Tv(this,"l"),Tv(this,"onUpdate",()=>{this.l.forEach(S=>{S()})});var i,r,n,s,a,o,c,d,l,u,g,m,f,w;this.meeting=t,this.l=new Set,(i=this.meeting.self)==null||i.addListener("*",this.onUpdate),(r=this.meeting.meta)==null||r.addListener("*",this.onUpdate),(n=this.meeting.participants)==null||n.addListener("*",this.onUpdate),(a=(s=this.meeting.participants)==null?void 0:s.joined)==null||a.addListener("*",this.onUpdate),(c=(o=this.meeting.participants)==null?void 0:o.active)==null||c.addListener("*",this.onUpdate),(d=this.meeting.chat)==null||d.addListener("*",this.onUpdate),(l=this.meeting.plugins)==null||l.all.addListener("*",this.onUpdate),(u=this.meeting.recording)==null||u.addListener("*",this.onUpdate),(g=this.meeting.connectedMeetings)==null||g.addListener("*",this.onUpdate),(m=this.meeting.spotlight)==null||m.addListener("*",this.onUpdate),(f=this.meeting.remote)==null||f.addListener("*",this.onUpdate),(w=this.meeting.polls)==null||w.addListener("*",this.onUpdate)}clean(){var t,i,r,n,s,a,o,c,d,l,u,g,m,f;(t=this.meeting.self)==null||t.removeListener("*",this.onUpdate),(i=this.meeting.meta)==null||i.removeListener("*",this.onUpdate),(r=this.meeting.participants)==null||r.removeListener("*",this.onUpdate),(s=(n=this.meeting.participants)==null?void 0:n.joined)==null||s.removeListener("*",this.onUpdate),(o=(a=this.meeting.participants)==null?void 0:a.active)==null||o.removeListener("*",this.onUpdate),(c=this.meeting.chat)==null||c.removeListener("*",this.onUpdate),(d=this.meeting.plugins)==null||d.all.removeListener("*",this.onUpdate),(l=this.meeting.recording)==null||l.removeListener("*",this.onUpdate),(u=this.meeting.connectedMeetings)==null||u.removeListener("*",this.onUpdate),(g=this.meeting.spotlight)==null||g.removeListener("*",this.onUpdate),(m=this.meeting.remote)==null||m.removeListener("*",this.onUpdate),(f=this.meeting.polls)==null||f.removeListener("*",this.onUpdate)}addListener(t){this.l.add(t)}removeListener(t){this.l.delete(t)}}const aw=ai.exports.createContext({meeting:void 0,updates:void 0});function DY({value:e,children:t,fallback:i}){const[r,n]=ai.exports.useState(),s=ai.exports.useRef();return ai.exports.useEffect(()=>(e&&n(new LY(e)),()=>{var a;(a=s.current)==null||a.clean()}),[e]),MY(aw.Provider,{value:{meeting:e,updates:r},children:e?t:i})}const ow=()=>{const{meeting:e}=ai.exports.useContext(aw);if(!e)throw new Error("useDyteMeeting must be used within the DyteProvider");return{meeting:e}},NY=()=>{const e=ai.exports.useRef(!1),[t,i]=ai.exports.useState();return[t,async n=>{if(!e.current){e.current=!0;try{const s=await j6.init(n);return i(s),s.self.on("roomLeft",()=>i(void 0)),s}catch{}finally{e.current=!1}}}]},UY=(e,t)=>!!(e!==t||Array.isArray(e)&&Array.isArray(t)&&e.length!==t.length),um=e=>{const{meeting:t,updates:i}=ai.exports.useContext(aw);if(!t)throw new Error("useDyteSelector must be used within the DyteProvider");const r=ai.exports.useRef(e(t)),[,n]=ai.exports.useReducer(s=>s+1,0);return ai.exports.useEffect(()=>{const s=t&&e(t),a=()=>{const o=t&&e(t);UY(r.current,o)&&(r.current=o,n())};return s&&typeof s=="object"&&"addListener"in s?(s.addListener("*",n),()=>{s.removeListener("*",n)}):(i==null||i.addListener(a),()=>{i==null||i.removeListener(a)})},[t,i]),r.current};var Tf={exports:{}},kf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jY=ai.exports,$Y=Symbol.for("react.element"),VY=Symbol.for("react.fragment"),FY=Object.prototype.hasOwnProperty,BY=jY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zY={key:!0,ref:!0,__self:!0,__source:!0};function B6(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)FY.call(t,r)&&!zY.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:$Y,type:e,key:s,ref:a,props:n,_owner:BY.current}}kf.Fragment=VY;kf.jsx=B6;kf.jsxs=B6;(function(e){e.exports=kf})(Tf);const HY=Tf.exports.Fragment,gt=Tf.exports.jsx,Fn=Tf.exports.jsxs,GY=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),z6=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),WY=(e,t,i={})=>{if(e instanceof Element){const r=qY(e.classList,t,i);r!==""&&(e.className=r),Object.keys(t).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const s=n.substring(2),a=s[0].toLowerCase()+s.substring(1);H6(a)||JY(e,a,t[n])}else e[n]=t[n],typeof t[n]==="string"&&e.setAttribute(z6(n),t[n])})}},qY=(e,t,i)=>{const r=t.className||t.class,n=i.className||i.class,s=kv(e),a=kv(r?r.split(" "):[]),o=kv(n?n.split(" "):[]),c=[];return s.forEach(d=>{a.has(d)?(c.push(d),a.delete(d)):o.has(d)||c.push(d)}),a.forEach(d=>c.push(d)),c.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const H6=e=>{if(typeof document>"u")return!0;{const t="on"+e;let i=t in document;if(!i){const r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return i}},JY=(e,t,i)=>{const r=e.__events||(e.__events={}),n=r[t];n&&e.removeEventListener(t,n),e.addEventListener(t,r[t]=function(a){i&&i.call(this,a)})},kv=e=>{const t=new Map;return e.forEach(i=>t.set(i,i)),t},KY=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},ZY=(...e)=>t=>{e.forEach(i=>{KY(i,t)})},QY=(e,t)=>{const i=(r,n)=>gt(e,{...Object.assign({},r,{forwardedRef:n})});return i.displayName=t,l_.forwardRef(i)};var YY=globalThis&&globalThis.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};const Gr=(e,t,i,r)=>{r!==void 0&&r();const n=GY(e),s=class extends l_.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){WY(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:c,style:d,className:l,ref:u}=a,g=YY(a,["children","forwardedRef","style","className","ref"]);let m=Object.keys(g).reduce((w,S)=>{const y=g[S];if(S.indexOf("on")===0&&S[2]===S[2].toUpperCase()){const _=S.substring(2).toLowerCase();typeof document<"u"&&H6(_)&&(w[S]=y)}else{const _=typeof y;(_==="string"||_==="boolean"||_==="number")&&(w[z6(S)]=y)}return w},{});i&&(m=i(this.props,m));const f=Object.assign(Object.assign({},m),{ref:ZY(c,this.setComponentElRef),style:d});return ai.exports.createElement(e,f,o)}static get displayName(){return n}};return t&&(s.contextType=t),QY(s,n)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__rest;const XY="modulepreload",eX=function(e){return"/"+e},WE={},tX=function(t,i,r){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=eX(s),s in WE)return;WE[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let l=n.length-1;l>=0;l--){const u=n[l];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":XY,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((l,u)=>{d.addEventListener("load",l),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},iX="dyte-ui-kit";let pg,G6,W6=!1,$y=null,Vy=!1;const As=(e,t="")=>()=>{},rX=(e,t)=>()=>{},nX="{visibility:hidden}.hydrated{visibility:inherit}",qE="http://www.w3.org/1999/xlink",JE={},sX=e=>e!=null,cw=e=>(e=typeof e,e==="object"||e==="function"),p=(e,t,...i)=>{let r=null,n=null,s=!1,a=!1;const o=[],c=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!cw(r))&&(r=String(r)),s&&a?o[o.length-1].$text$+=r:o.push(s?pm(null,r):r),a=s)};if(c(i),t){t.key&&(n=t.key);{const l=t.className||t.class;l&&(t.class=typeof l!="object"?l:Object.keys(l).filter(u=>l[u]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,o,oX);const d=pm(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d.$key$=n,d},pm=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i},M={},aX=e=>e&&e.$tag$===M,oX={forEach:(e,t)=>e.map(KE).forEach(t),map:(e,t)=>e.map(KE).map(t).map(cX)},KE=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),cX=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),p(e.vtag,i,...e.vchildren||[])}const t=pm(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},dX=(e,t)=>e!=null&&!cw(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Ns=e=>Ga(e).$hostElement$,Q=(e,t,i)=>{const r=Ns(e);return{emit:n=>q6(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},q6=(e,t,i)=>{const r=Mi.ce(t,i);return e.dispatchEvent(r),r},ZE=new WeakMap,lX=(e,t,i)=>{let r=gm.get(e);OX&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,gm.set(e,r)},uX=(e,t,i,r)=>{let n=J6(t);const s=gm.get(n);if(e=e.nodeType===11?e:Pa,s)if(typeof s=="string"){e=e.head||e;let a=ZE.get(e),o;a||ZE.set(e,a=new Set),a.has(n)||(o=Pa.createElement("style"),o.innerHTML=s,e.insertBefore(o,e.querySelector("link")),a&&a.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},pX=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=As("attachStyles",t.$tagName$),s=uX(i.shadowRoot?i.shadowRoot:i.getRootNode(),t);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h")),n()},J6=(e,t)=>"sc-"+e.$tagName$,QE=(e,t,i,r,n,s)=>{if(i!==r){let a=tT(e,t),o=t.toLowerCase();if(t==="class"){const c=e.classList,d=YE(i),l=YE(r);c.remove(...d.filter(u=>u&&!l.includes(u))),c.add(...l.filter(u=>u&&!d.includes(u)))}else if(t==="style"){for(const c in i)(!r||r[c]==null)&&(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(const c in r)(!i||r[c]!==i[c])&&(c.includes("-")?e.style.setProperty(c,r[c]):e.style[c]=r[c])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!a&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):tT(Cp,o)?t=o.slice(2):t=o[2]+t.slice(3),i&&Mi.rel(e,t,i,!1),r&&Mi.ael(e,t,r,!1);else{const c=cw(r);if((a||c&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const l=r==null?"":r;t==="list"?a=!1:(i==null||e[t]!=l)&&(e[t]=l)}}catch{}let d=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(qE,t):e.removeAttribute(t)):(!a||s&4||n)&&!c&&(r=r===!0?"":r,d?e.setAttributeNS(qE,t,r):e.setAttribute(t,r))}}},hX=/\s/,YE=e=>e?e.split(hX):[],K6=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||JE,a=t.$attrs$||JE;for(r in s)r in a||QE(n,r,s[r],void 0,i,t.$flags$);for(r in a)QE(n,r,s[r],a[r],i,t.$flags$)},hm=(e,t,i,r)=>{const n=t.$children$[i];let s=0,a,o;if(n.$text$!==null)a=n.$elm$=Pa.createTextNode(n.$text$);else if(a=n.$elm$=Pa.createElement(n.$tag$),K6(null,n,W6),sX(pg)&&a["s-si"]!==pg&&a.classList.add(a["s-si"]=pg),n.$children$)for(s=0;s<n.$children$.length;++s)o=hm(e,n,s),o&&a.appendChild(o);return a},Z6=(e,t,i,r,n,s)=>{let a=e,o;for(a.shadowRoot&&a.tagName===G6&&(a=a.shadowRoot);n<=s;++n)r[n]&&(o=hm(null,i,n),o&&(r[n].$elm$=o,a.insertBefore(o,t)))},Q6=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,Y6(r),n.remove())},gX=(e,t,i,r)=>{let n=0,s=0,a=0,o=0,c=t.length-1,d=t[0],l=t[c],u=r.length-1,g=r[0],m=r[u],f,w;for(;n<=c&&s<=u;)if(d==null)d=t[++n];else if(l==null)l=t[--c];else if(g==null)g=r[++s];else if(m==null)m=r[--u];else if(wh(d,g))zc(d,g),d=t[++n],g=r[++s];else if(wh(l,m))zc(l,m),l=t[--c],m=r[--u];else if(wh(d,m))zc(d,m),e.insertBefore(d.$elm$,l.$elm$.nextSibling),d=t[++n],m=r[--u];else if(wh(l,g))zc(l,g),e.insertBefore(l.$elm$,d.$elm$),l=t[--c],g=r[++s];else{for(a=-1,o=n;o<=c;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===g.$key$){a=o;break}a>=0?(w=t[a],w.$tag$!==g.$tag$?f=hm(t&&t[s],i,a):(zc(w,g),t[a]=void 0,f=w.$elm$),g=r[++s]):(f=hm(t&&t[s],i,s),g=r[++s]),f&&d.$elm$.parentNode.insertBefore(f,d.$elm$)}n>c?Z6(e,r[u+1]==null?null:r[u+1].$elm$,i,r,s,u):s>u&&Q6(t,n,c)},wh=(e,t)=>e.$tag$===t.$tag$?e.$key$===t.$key$:!1,zc=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,s=t.$tag$,a=t.$text$;a===null?(s==="slot"||K6(e,t,W6),r!==null&&n!==null?gX(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),Z6(i,null,t,n,0,n.length-1)):r!==null&&Q6(r,0,r.length-1)):e.$text$!==a&&(i.data=a)},Y6=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Y6)},mX=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||pm(null,null),s=aX(t)?t:p(null,null,t);G6=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([a,o])=>s.$attrs$[o]=i[a])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,pg=i["s-sc"],zc(n,s)},X6=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(i=>e.$onRenderResolve$=i))},Cf=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return X6(e,e.$ancestorComponent$),bn(()=>fX(e,t))},fX=(e,t)=>{const i=As("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let n;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map(([s,a])=>Nd(r,s,a)),e.$queuedListeners$=null),n=Nd(r,"componentWillLoad")),i(),bX(n,()=>vX(e,r,t))},vX=async(e,t,i)=>{const r=e.$hostElement$,n=As("update",e.$cmpMeta$.$tagName$),s=r["s-rc"];i&&pX(e);const a=As("render",e.$cmpMeta$.$tagName$);yX(e,t),s&&(s.map(o=>o()),r["s-rc"]=void 0),a(),n();{const o=r["s-p"],c=()=>_X(e);o.length===0?c():(Promise.all(o).then(c),e.$flags$|=4,o.length=0)}},yX=(e,t,i)=>{try{$y=t,t=t.render(),e.$flags$&=-17,e.$flags$|=2,mX(e,t)}catch(r){G(r,e.$hostElement$)}return $y=null,null},XE=()=>$y,_X=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=As("postUpdate",t),n=e.$lazyInstance$,s=e.$ancestorComponent$;Nd(n,"componentDidRender"),e.$flags$&64?r():(e.$flags$|=64,t7(i),Nd(n,"componentDidLoad"),r(),e.$onReadyResolve$(i),s||e7()),e.$onInstanceResolve$(i),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&lw(()=>Cf(e,!1)),e.$flags$&=-517},eT=e=>{{const t=Ga(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&Cf(t,!1),i}},e7=e=>{t7(Pa.documentElement),lw(()=>q6(Cp,"appload",{detail:{namespace:iX}}))},Nd=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){G(r)}},bX=(e,t)=>e&&e.then?e.then(t):t(),t7=e=>e.classList.add("hydrated"),wX=(e,t)=>Ga(e).$instanceValues$.get(t),SX=(e,t,i,r)=>{const n=Ga(e),s=n.$hostElement$,a=n.$instanceValues$.get(t),o=n.$flags$,c=n.$lazyInstance$;i=dX(i,r.$members$[t][0]);const d=Number.isNaN(a)&&Number.isNaN(i),l=i!==a&&!d;if((!(o&8)||a===void 0)&&l&&(n.$instanceValues$.set(t,i),c)){if(r.$watchers$&&o&128){const u=r.$watchers$[t];u&&u.map(g=>{try{c[g](i,a,t)}catch(m){G(m,s)}})}(o&18)===2&&Cf(n,!1)}},i7=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;if(r.map(([s,[a]])=>{a&31||i&2&&a&32?Object.defineProperty(n,s,{get(){return wX(this,s)},set(o){SX(this,s,o,t)},configurable:!0,enumerable:!0}):i&1&&a&64&&Object.defineProperty(n,s,{value(...o){const c=Ga(this);return c.$onInstancePromise$.then(()=>c.$lazyInstance$[s](...o))}})}),i&1){const s=new Map;n.attributeChangedCallback=function(a,o,c){Mi.jmp(()=>{const d=s.get(a);if(this.hasOwnProperty(d))c=this[d],delete this[d];else if(n.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==c)return;this[d]=c===null&&typeof this[d]=="boolean"?!1:c})},e.observedAttributes=r.filter(([a,o])=>o[0]&15).map(([a,o])=>{const c=o[1]||a;return s.set(c,a),o[0]&512&&t.$attrsToReflect$.push([a,c]),c})}}return e},EX=async(e,t,i,r,n)=>{if((t.$flags$&32)===0){{if(t.$flags$|=32,n=IX(i),n.then){const c=rX();n=await n,c()}n.isProxied||(i.$watchers$=n.watchers,i7(n,i,2),n.isProxied=!0);const o=As("createInstance",i.$tagName$);t.$flags$|=8;try{new n(t)}catch(c){G(c)}t.$flags$&=-9,t.$flags$|=128,o(),r7(t.$lazyInstance$)}if(n.style){let o=n.style;const c=J6(i);if(!gm.has(c)){const d=As("registerStyles",i.$tagName$);lX(c,o,!!(i.$flags$&1)),d()}}}const s=t.$ancestorComponent$,a=()=>Cf(t,!0);s&&s["s-rc"]?s["s-rc"].push(a):a()},r7=e=>{Nd(e,"connectedCallback")},TX=e=>{if((Mi.$flags$&1)===0){const t=Ga(e),i=t.$cmpMeta$,r=As("connectedCallback",i.$tagName$);if(t.$flags$&1)n7(e,t,i.$listeners$),r7(t.$lazyInstance$);else{t.$flags$|=1;{let n=e;for(;n=n.parentNode||n.host;)if(n["s-p"]){X6(t,t.$ancestorComponent$=n);break}}i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const a=e[n];delete e[n],e[n]=a}}),EX(e,t,i)}r()}},kX=e=>{if((Mi.$flags$&1)===0){const t=Ga(e),i=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0),Nd(i,"disconnectedCallback")}},CX=(e,t={})=>{const i=As(),r=[],n=t.exclude||[],s=Cp.customElements,a=Pa.head,o=a.querySelector("meta[charset]"),c=Pa.createElement("style"),d=[];let l,u=!0;Object.assign(Mi,t),Mi.$resourcesUrl$=new URL(t.resourcesUrl||"./",Pa.baseURI).href,e.map(g=>{g[1].map(m=>{const f={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};f.$members$=m[2],f.$listeners$=m[3],f.$attrsToReflect$=[],f.$watchers$={};const w=f.$tagName$,S=class extends HTMLElement{constructor(y){super(y),y=this,AX(y,f),f.$flags$&1&&y.attachShadow({mode:"open"})}connectedCallback(){l&&(clearTimeout(l),l=null),u?d.push(this):Mi.jmp(()=>TX(this))}disconnectedCallback(){Mi.jmp(()=>kX(this))}componentOnReady(){return Ga(this).$onReadyPromise$}};f.$lazyBundleId$=g[0],!n.includes(w)&&!s.get(w)&&(r.push(w),s.define(w,i7(S,f,1)))})}),c.innerHTML=r+nX,c.setAttribute("data-styles",""),a.insertBefore(c,o?o.nextSibling:a.firstChild),u=!1,d.length?d.map(g=>g.connectedCallback()):Mi.jmp(()=>l=setTimeout(e7,30)),i()},n7=(e,t,i,r)=>{i&&i.map(([n,s,a])=>{const o=RX(e,n),c=PX(t,a),d=xX(n);Mi.ael(o,s,c,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Mi.rel(o,s,c,d))})},PX=(e,t)=>i=>{try{e.$flags$&256?e.$lazyInstance$[t](i):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,i])}catch(r){G(r)}},RX=(e,t)=>t&8?Cp:e,xX=e=>(e&2)!==0,dw=new WeakMap,Ga=e=>dw.get(e),V=(e,t)=>dw.set(t.$lazyInstance$=e,t),AX=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r),i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],n7(e,i,t.$listeners$),dw.set(e,i)},tT=(e,t)=>t in e,G=(e,t)=>(0,console.error)(e,t),Cv=new Map,IX=(e,t,i)=>{const r=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$,s=Cv.get(n);if(s)return s[r];if(!i||!BUILD.hotModuleReplacement){const a=o=>(Cv.set(n,o),o[r]);switch(n){case"dyte-meeting":return Promise.resolve().then(function(){return lre}).then(a,G);case"dyte-ai":return Promise.resolve().then(function(){return pre}).then(a,G);case"dyte-ai-chat":return Promise.resolve().then(function(){return gre}).then(a,G);case"dyte-ai-home":return Promise.resolve().then(function(){return _re}).then(a,G);case"dyte-ai-toggle":return Promise.resolve().then(function(){return wre}).then(a,G);case"dyte-ai-transcriptions":return Promise.resolve().then(function(){return Ere}).then(a,G);case"dyte-breakout-rooms-manager":return Promise.resolve().then(function(){return Ire}).then(a,G);case"dyte-breakout-rooms-toggle":return Promise.resolve().then(function(){return Lre}).then(a,G);case"dyte-broadcast-message-modal":return Promise.resolve().then(function(){return Nre}).then(a,G);case"dyte-camera-toggle":return Promise.resolve().then(function(){return jre}).then(a,G);case"dyte-chat":return Promise.resolve().then(function(){return Vre}).then(a,G);case"dyte-chat-toggle":return Promise.resolve().then(function(){return Bre}).then(a,G);case"dyte-clock":return Promise.resolve().then(function(){return Hre}).then(a,G);case"dyte-confirmation-modal":return Promise.resolve().then(function(){return Wre}).then(a,G);case"dyte-controlbar":return Promise.resolve().then(function(){return Jre}).then(a,G);case"dyte-dialog-manager":return Promise.resolve().then(function(){return Zre}).then(a,G);case"dyte-ended-screen":return Promise.resolve().then(function(){return Yre}).then(a,G);case"dyte-fullscreen-toggle":return Promise.resolve().then(function(){return ene}).then(a,G);case"dyte-grid":return Promise.resolve().then(function(){return lne}).then(a,G);case"dyte-grid-pagination":return Promise.resolve().then(function(){return pne}).then(a,G);case"dyte-header":return Promise.resolve().then(function(){return gne}).then(a,G);case"dyte-idle-screen":return Promise.resolve().then(function(){return fne}).then(a,G);case"dyte-image-viewer":return Promise.resolve().then(function(){return wne}).then(a,G);case"dyte-leave-button":return Promise.resolve().then(function(){return Ene}).then(a,G);case"dyte-leave-meeting":return Promise.resolve().then(function(){return kne}).then(a,G);case"dyte-livestream-indicator":return Promise.resolve().then(function(){return Pne}).then(a,G);case"dyte-livestream-toggle":return Promise.resolve().then(function(){return xne}).then(a,G);case"dyte-meeting-title":return Promise.resolve().then(function(){return Ine}).then(a,G);case"dyte-mic-toggle":return Promise.resolve().then(function(){return Mne}).then(a,G);case"dyte-mixed-grid":return Promise.resolve().then(function(){return Dne}).then(a,G);case"dyte-more-toggle":return Promise.resolve().then(function(){return Une}).then(a,G);case"dyte-mute-all-button":return Promise.resolve().then(function(){return $ne}).then(a,G);case"dyte-mute-all-confirmation":return Promise.resolve().then(function(){return Fne}).then(a,G);case"dyte-name-tag":return Promise.resolve().then(function(){return zne}).then(a,G);case"dyte-network-indicator":return Promise.resolve().then(function(){return Gne}).then(a,G);case"dyte-notifications":return Promise.resolve().then(function(){return Zne}).then(a,G);case"dyte-participant-count":return Promise.resolve().then(function(){return Yne}).then(a,G);case"dyte-participant-setup":return Promise.resolve().then(function(){return ese}).then(a,G);case"dyte-participants":return Promise.resolve().then(function(){return ise}).then(a,G);case"dyte-participants-audio":return Promise.resolve().then(function(){return sse}).then(a,G);case"dyte-participants-stage-list":return Promise.resolve().then(function(){return ose}).then(a,G);case"dyte-participants-stage-queue":return Promise.resolve().then(function(){return dse}).then(a,G);case"dyte-participants-toggle":return Promise.resolve().then(function(){return use}).then(a,G);case"dyte-participants-viewer-list":return Promise.resolve().then(function(){return hse}).then(a,G);case"dyte-participants-waiting-list":return Promise.resolve().then(function(){return mse}).then(a,G);case"dyte-permissions-message":return Promise.resolve().then(function(){return vse}).then(a,G);case"dyte-pip-toggle":return Promise.resolve().then(function(){return _se}).then(a,G);case"dyte-plugin-main":return Promise.resolve().then(function(){return wse}).then(a,G);case"dyte-plugins":return Promise.resolve().then(function(){return Ese}).then(a,G);case"dyte-plugins-toggle":return Promise.resolve().then(function(){return kse}).then(a,G);case"dyte-polls":return Promise.resolve().then(function(){return Pse}).then(a,G);case"dyte-polls-toggle":return Promise.resolve().then(function(){return xse}).then(a,G);case"dyte-recording-indicator":return Promise.resolve().then(function(){return Ise}).then(a,G);case"dyte-recording-toggle":return Promise.resolve().then(function(){return Mse}).then(a,G);case"dyte-remote-access-manager":return Promise.resolve().then(function(){return Dse}).then(a,G);case"dyte-screen-share-toggle":return Promise.resolve().then(function(){return Use}).then(a,G);case"dyte-screenshare-view":return Promise.resolve().then(function(){return $se}).then(a,G);case"dyte-settings":return Promise.resolve().then(function(){return Fse}).then(a,G);case"dyte-settings-toggle":return Promise.resolve().then(function(){return zse}).then(a,G);case"dyte-setup-screen":return Promise.resolve().then(function(){return Gse}).then(a,G);case"dyte-sidebar":return Promise.resolve().then(function(){return qse}).then(a,G);case"dyte-simple-grid":return Promise.resolve().then(function(){return Kse}).then(a,G);case"dyte-spotlight-grid":return Promise.resolve().then(function(){return Qse}).then(a,G);case"dyte-stage":return Promise.resolve().then(function(){return Xse}).then(a,G);case"dyte-stage-toggle":return Promise.resolve().then(function(){return tae}).then(a,G);case"dyte-text-field":return Promise.resolve().then(function(){return rae}).then(a,G);case"dyte-viewer-count":return Promise.resolve().then(function(){return sae}).then(a,G);case"dyte-waiting-screen":return Promise.resolve().then(function(){return oae}).then(a,G);case"dyte-webinar-stage-toggle":return Promise.resolve().then(function(){return dae}).then(a,G);case"dyte-ai-caption":return Promise.resolve().then(function(){return uae}).then(a,G);case"dyte-breakout-room-manager_3":return Promise.resolve().then(function(){return mae}).then(a,G);case"dyte-chat-composer-ui_4":return Promise.resolve().then(function(){return bae}).then(a,G);case"dyte-join-stage_2":return Promise.resolve().then(function(){return Eae}).then(a,G);case"dyte-livestream-player":return Promise.resolve().then(function(){return kae}).then(a,G);case"dyte-notification":return Promise.resolve().then(function(){return Pae}).then(a,G);case"dyte-poll_2":return Promise.resolve().then(function(){return Aae}).then(a,G);case"dyte-settings-audio_2":return Promise.resolve().then(function(){return Mae}).then(a,G);case"dyte-tab-bar":return Promise.resolve().then(function(){return Dae}).then(a,G);case"dyte-audio-visualizer_2":return Promise.resolve().then(function(){return Fae}).then(a,G);case"dyte-chat-message_2":return Promise.resolve().then(function(){return noe}).then(a,G);case"dyte-dialog":return Promise.resolve().then(function(){return aoe}).then(a,G);case"dyte-emoji-picker":return Promise.resolve().then(function(){return loe}).then(a,G);case"dyte-participant":return Promise.resolve().then(function(){return poe}).then(a,G);case"dyte-participant-tile":return Promise.resolve().then(function(){return goe}).then(a,G);case"dyte-spotlight-indicator":return Promise.resolve().then(function(){return foe}).then(a,G);case"dyte-logo":return Promise.resolve().then(function(){return yoe}).then(a,G);case"dyte-file-message_3":return Promise.resolve().then(function(){return koe}).then(a,G);case"dyte-menu_3":return Promise.resolve().then(function(){return Qoe}).then(a,G);case"dyte-avatar":return Promise.resolve().then(function(){return Xoe}).then(a,G);case"dyte-controlbar-button":return Promise.resolve().then(function(){return tce}).then(a,G);case"dyte-tooltip":return Promise.resolve().then(function(){return rce}).then(a,G);case"dyte-spinner":return Promise.resolve().then(function(){return sce}).then(a,G);case"dyte-button":return Promise.resolve().then(function(){return oce}).then(a,G);case"dyte-icon":return Promise.resolve().then(function(){return lce}).then(a,G)}}return tX(()=>import(`./${n}.entry.js`),[]).then(a=>(Cv.set(n,a),a[r]),G)},gm=new Map,Cp=typeof window<"u"?window:{},Pa=Cp.document||{head:{}},Mi={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},s7=e=>Promise.resolve(e),OX=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),iT=[],a7=[],MX=(e,t)=>i=>{e.push(i),Vy||(Vy=!0,t&&Mi.$flags$&4?lw(Fy):Mi.raf(Fy))},rT=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){G(i)}e.length=0},Fy=()=>{rT(iT),rT(a7),(Vy=iT.length>0)&&Mi.raf(Fy)},lw=e=>s7().then(e),bn=MX(a7,!0),LX=()=>s7(),DX=(e,t)=>typeof window>"u"?Promise.resolve():LX().then(()=>CX(JSON.parse('[["dyte-chat",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32]}]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32],"showStageList":[32]}]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-polls",[[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32]}]]],["dyte-remote-access-manager",[[1,"dyte-remote-access-manager",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"acceptedRequestId":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-webinar-stage-toggle",[[1,"dyte-webinar-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"canPresent":[32],"requestProduce":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"t":[16]}]]],["dyte-dialog-manager",[[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32]}]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"showWebinarStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"connected":[32],"pipSupported":[32],"pipEnabled":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"middlewares":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-notifications",[[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"]]]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipEnabled":[32],"pipSupported":[32]}]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"middlewares":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"middlewares":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"canControl":[32],"viewModeEnabled":[32]}]]],["dyte-plugins",[[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugin":[32],"activatedPluginsId":[32]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[16],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"middlewares":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-livestream-indicator",[[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"participantCount":[32]}]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-participants",[[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"search":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-viewer-count",[[1,"dyte-viewer-count",{"meeting":[16],"iconPack":[16],"t":[16],"viewerCount":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat"]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"middlewares":[16],"size":[513]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"middlewares":[16],"states":[32],"newMeeting":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"maxLength":[2,"max-length"],"isScreenShare":[4,"is-screen-share"],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-livestream-player",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"latency":[32],"audioPlaybackError":[32]}]]],["dyte-notification",[[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-ai-caption",[[1,"dyte-ai-caption"]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"audioDevices":[32],"speakerDevices":[32],"canProduceAudio":[32]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoDevices":[32],"currentDevice":[32],"videoEnabled":[32]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-emoji-picker",[[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}]]],["dyte-join-stage_2",[[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-participant-tile",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-file-message_3",[[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"status":[32]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16]}]]],["dyte-chat-message_2",[[1,"dyte-chat-message",{"messageItem":[16],"isContinued":[4,"is-continued"],"isUnread":[4,"is-unread"],"observeMessage":[16],"size":[513],"iconPack":[16],"t":[16],"now":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"iconPack":[16],"t":[16],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"pagesToRender":[32],"onNewNode":[64]}]]],["dyte-chat-composer-ui_4",[[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"emojiPickerActive":[32]}],[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}]]],["dyte-audio-visualizer_2",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]]]'),t)),ze={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",height:"76px",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#more-menu":{position:"absolute",boxSizing:"border-box",top:"0",left:"0",width:"100%",transform:"translateY(-100%)",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))",padding:"16px 12px",borderRadius:"18px 18px 0 0"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-controlbar.activeMoreMenu.sm":{add:["div#more-menu"]},"dyte-controlbar.activeMoreMenu.md":{add:["div#more-menu"]},"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#more-menu":[["dyte-chat-toggle",{variant:"horizontal"}],["dyte-participants-toggle",{variant:"horizontal"}],["dyte-polls-toggle",{variant:"horizontal"}],["dyte-plugins-toggle",{variant:"horizontal"}],["dyte-fullscreen-toggle",{variant:"horizontal"}],["dyte-screen-share-toggle",{variant:"horizontal"}],["dyte-pip-toggle",{variant:"horizontal"}],["dyte-mute-all-button",{variant:"horizontal"}],["dyte-breakout-rooms-toggle",{variant:"horizontal"}],["dyte-settings-toggle",{variant:"horizontal"}],["dyte-ai-toggle",{variant:"horizontal"}]],"div#controlbar-left":["dyte-screen-share-toggle","dyte-fullscreen-toggle","dyte-pip-toggle","dyte-recording-toggle","dyte-breakout-rooms-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-mic-toggle","dyte-camera-toggle","dyte-mute-all-button","dyte-settings-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var o7=typeof global=="object"&&global&&global.Object===Object&&global,NX=typeof self=="object"&&self&&self.Object===Object&&self,dc=o7||NX||Function("return this")(),mm=dc.Symbol,c7=Object.prototype,UX=c7.hasOwnProperty,jX=c7.toString,Nl=mm?mm.toStringTag:void 0;function $X(e){var t=UX.call(e,Nl),i=e[Nl];try{e[Nl]=void 0;var r=!0}catch{}var n=jX.call(e);return r&&(t?e[Nl]=i:delete e[Nl]),n}var VX=Object.prototype,FX=VX.toString;function BX(e){return FX.call(e)}var zX="[object Null]",HX="[object Undefined]",nT=mm?mm.toStringTag:void 0;function Pp(e){return e==null?e===void 0?HX:zX:nT&&nT in Object(e)?$X(e):BX(e)}function Kn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Yd(e){return e!=null&&typeof e=="object"}const GX=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],WX={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},sT={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},aT={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}},uw=[-2,-1,0,1,2];function hg(e){e=e.trim();let t="0",i="0",r="0";return e.length==4?(t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),[+t,+i,+r]}const qX=(e,t,i)=>{let r,n,s;if(t==0)r=n=s=i;else{const a=(d,l,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(l-d)*6*u:u<.5?l:u<.6666666666666666?d+(l-d)*(.6666666666666666-u)*6:d),o=i<.5?i*(1+t):i+t-i*t,c=2*i-o;r=a(c,o,e+1/3),n=a(c,o,e),s=a(c,o,e-1/3)}return[Math.round(r*255),Math.round(n*255),Math.round(s*255)]},JX=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),n=Math.min(e,t,i);let s,a,o=(r+n)/2;if(r==n)s=a=0;else{const c=r-n;switch(a=o>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4;break}s/=6}return[s,a,o]},KX=(e,t,i)=>{const r=n=>n.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(i)}`},d7=(e,t=uw,i=.4)=>{const r=[],[n,s,a]=hg(e),[o,c,d]=JX(n,s,a),l=Math.round(d*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const u=t.findIndex(S=>S===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-u,m=u+1,f=(100-l)/g,w=l/m;for(const S of t){let y;S<0?y=l+S*w*i:S>0?y=l+S*f*i:y=l;const[_,T,P]=qX(o,c,y/100);r.push(KX(_,T,P))}return r},no=e=>typeof e=="string"&&e.length===7&&e.startsWith("#"),ZX=e=>{const[t,i,r,n,s]=d7(e,uw);return{300:t,400:i,500:r,600:n,700:s}},QX=e=>{const[t,i,r,n,s]=d7(e,uw);return{1e3:t,900:i,800:r,700:n,600:s}},YX=e=>{const t=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const n=document.createElement("link");n.rel="preconnect",n.setAttribute("data-dyte-font","true"),n.href="https://fonts.googleapis.com";const s=n.cloneNode(!0);s.href="https://fonts.gstatic.com",s.crossOrigin="",i.push(n,s)}const r=document.createElement("link");r.rel="stylesheet",r.setAttribute("data-dyte-font",e),r.href=encodeURI(`https://fonts.googleapis.com/css2?family=${e}:wght@${t.join(";")}&display=swap`),i.push(r),document.head.append(...i)},XX=(e,t)=>{GX.forEach(i=>{e.style.setProperty(`--dyte-space-${i}`,`${i*t}px`)})},eee=(e,t)=>{if(t in sT){const i=sT[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-width-${r}`,`${i[r]}px`)})}},tee=(e,t)=>{if(t in aT){const i=aT[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-radius-${r}`,`${i[r]}px`)})}},oT=(e,t)=>{Object.keys(t).forEach(i=>{const r=t[i];if(typeof r=="string")if(i==="text"||i==="text-on-brand"){const n=hg(r).join(" ");e.style.setProperty(`--dyte-colors-${i}-1000`,`${n}`),e.style.setProperty(`--dyte-colors-${i}-900`,`${n} / 0.88`),e.style.setProperty(`--dyte-colors-${i}-800`,`${n} / 0.76`),e.style.setProperty(`--dyte-colors-${i}-700`,`${n} / 0.64`),e.style.setProperty(`--dyte-colors-${i}-600`,`${n} / 0.52`)}else{const n=hg(r).join(" ");e.style.setProperty(`--dyte-colors-${i}`,n)}else typeof r=="object"&&Object.keys(r).forEach(n=>{const s=r[n],a=hg(s).join(" ");e.style.setProperty(`--dyte-colors-${i}-${n}`,a)})})},cT=(e,{spacingBase:t,borderRadius:i,borderWidth:r,colors:n,fontFamily:s,googleFont:a,theme:o})=>{if(typeof e!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(YX(a),e.style.setProperty("--dyte-font-family",a)),typeof s=="string"&&e.style.setProperty("--dyte-font-family",s),typeof t=="number"&&XX(e,t),typeof r=="string"&&eee(e,r),typeof i=="string"&&tee(e,i),typeof o=="string"){const c=WX[o];c!=null&&oT(e,c)}typeof n=="object"&&oT(e,n)};function iee(){this.__data__=[],this.size=0}function Pf(e,t){return e===t||e!==e&&t!==t}function Rf(e,t){for(var i=e.length;i--;)if(Pf(e[i][0],t))return i;return-1}var ree=Array.prototype,nee=ree.splice;function see(e){var t=this.__data__,i=Rf(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():nee.call(t,i,1),--this.size,!0}function aee(e){var t=this.__data__,i=Rf(t,e);return i<0?void 0:t[i][1]}function oee(e){return Rf(this.__data__,e)>-1}function cee(e,t){var i=this.__data__,r=Rf(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function Us(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Us.prototype.clear=iee;Us.prototype.delete=see;Us.prototype.get=aee;Us.prototype.has=oee;Us.prototype.set=cee;function dee(){this.__data__=new Us,this.size=0}function lee(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function uee(e){return this.__data__.get(e)}function pee(e){return this.__data__.has(e)}var hee="[object AsyncFunction]",gee="[object Function]",mee="[object GeneratorFunction]",fee="[object Proxy]";function pw(e){if(!Kn(e))return!1;var t=Pp(e);return t==gee||t==mee||t==hee||t==fee}var Pv=dc["__core-js_shared__"],dT=function(){var e=/[^.]+$/.exec(Pv&&Pv.keys&&Pv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function vee(e){return!!dT&&dT in e}var yee=Function.prototype,_ee=yee.toString;function bee(e){if(e!=null){try{return _ee.call(e)}catch{}try{return e+""}catch{}}return""}var wee=/[\\^$.*+?()[\]{}|]/g,See=/^\[object .+?Constructor\]$/,Eee=Function.prototype,Tee=Object.prototype,kee=Eee.toString,Cee=Tee.hasOwnProperty,Pee=RegExp("^"+kee.call(Cee).replace(wee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ree(e){if(!Kn(e)||vee(e))return!1;var t=pw(e)?Pee:See;return t.test(bee(e))}function xee(e,t){return e==null?void 0:e[t]}function hw(e,t){var i=xee(e,t);return Ree(i)?i:void 0}var l7=hw(dc,"Map"),ep=hw(Object,"create");function Aee(){this.__data__=ep?ep(null):{},this.size=0}function Iee(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Oee="__lodash_hash_undefined__",Mee=Object.prototype,Lee=Mee.hasOwnProperty;function Dee(e){var t=this.__data__;if(ep){var i=t[e];return i===Oee?void 0:i}return Lee.call(t,e)?t[e]:void 0}var Nee=Object.prototype,Uee=Nee.hasOwnProperty;function jee(e){var t=this.__data__;return ep?t[e]!==void 0:Uee.call(t,e)}var $ee="__lodash_hash_undefined__";function Vee(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=ep&&t===void 0?$ee:t,this}function Zo(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Zo.prototype.clear=Aee;Zo.prototype.delete=Iee;Zo.prototype.get=Dee;Zo.prototype.has=jee;Zo.prototype.set=Vee;function Fee(){this.size=0,this.__data__={hash:new Zo,map:new(l7||Us),string:new Zo}}function Bee(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function xf(e,t){var i=e.__data__;return Bee(t)?i[typeof t=="string"?"string":"hash"]:i.map}function zee(e){var t=xf(this,e).delete(e);return this.size-=t?1:0,t}function Hee(e){return xf(this,e).get(e)}function Gee(e){return xf(this,e).has(e)}function Wee(e,t){var i=xf(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function Xd(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Xd.prototype.clear=Fee;Xd.prototype.delete=zee;Xd.prototype.get=Hee;Xd.prototype.has=Gee;Xd.prototype.set=Wee;var qee=200;function Jee(e,t){var i=this.__data__;if(i instanceof Us){var r=i.__data__;if(!l7||r.length<qee-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Xd(r)}return i.set(e,t),this.size=i.size,this}function el(e){var t=this.__data__=new Us(e);this.size=t.size}el.prototype.clear=dee;el.prototype.delete=lee;el.prototype.get=uee;el.prototype.has=pee;el.prototype.set=Jee;var fm=function(){try{var e=hw(Object,"defineProperty");return e({},"",{}),e}catch{}}();function gw(e,t,i){t=="__proto__"&&fm?fm(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function By(e,t,i){(i!==void 0&&!Pf(e[t],i)||i===void 0&&!(t in e))&&gw(e,t,i)}function Kee(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++n];if(i(s[c],c,s)===!1)break}return t}}var Zee=Kee(),u7=typeof xe=="object"&&xe&&!xe.nodeType&&xe,lT=u7&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Qee=lT&&lT.exports===u7,uT=Qee?dc.Buffer:void 0,pT=uT?uT.allocUnsafe:void 0;function Yee(e,t){if(t)return e.slice();var i=e.length,r=pT?pT(i):new e.constructor(i);return e.copy(r),r}var hT=dc.Uint8Array;function Xee(e){var t=new e.constructor(e.byteLength);return new hT(t).set(new hT(e)),t}function ete(e,t){var i=t?Xee(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function tte(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var gT=Object.create,ite=function(){function e(){}return function(t){if(!Kn(t))return{};if(gT)return gT(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function rte(e,t){return function(i){return e(t(i))}}var p7=rte(Object.getPrototypeOf,Object),nte=Object.prototype;function h7(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||nte;return e===i}function ste(e){return typeof e.constructor=="function"&&!h7(e)?ite(p7(e)):{}}var ate="[object Arguments]";function mT(e){return Yd(e)&&Pp(e)==ate}var g7=Object.prototype,ote=g7.hasOwnProperty,cte=g7.propertyIsEnumerable,zy=mT(function(){return arguments}())?mT:function(e){return Yd(e)&&ote.call(e,"callee")&&!cte.call(e,"callee")},Hy=Array.isArray,dte=9007199254740991;function m7(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dte}function mw(e){return e!=null&&m7(e.length)&&!pw(e)}function lte(e){return Yd(e)&&mw(e)}function ute(){return!1}var f7=typeof xe=="object"&&xe&&!xe.nodeType&&xe,fT=f7&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,pte=fT&&fT.exports===f7,vT=pte?dc.Buffer:void 0,hte=vT?vT.isBuffer:void 0,v7=hte||ute,gte="[object Object]",mte=Function.prototype,fte=Object.prototype,y7=mte.toString,vte=fte.hasOwnProperty,yte=y7.call(Object);function _te(e){if(!Yd(e)||Pp(e)!=gte)return!1;var t=p7(e);if(t===null)return!0;var i=vte.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&y7.call(i)==yte}var bte="[object Arguments]",wte="[object Array]",Ste="[object Boolean]",Ete="[object Date]",Tte="[object Error]",kte="[object Function]",Cte="[object Map]",Pte="[object Number]",Rte="[object Object]",xte="[object RegExp]",Ate="[object Set]",Ite="[object String]",Ote="[object WeakMap]",Mte="[object ArrayBuffer]",Lte="[object DataView]",Dte="[object Float32Array]",Nte="[object Float64Array]",Ute="[object Int8Array]",jte="[object Int16Array]",$te="[object Int32Array]",Vte="[object Uint8Array]",Fte="[object Uint8ClampedArray]",Bte="[object Uint16Array]",zte="[object Uint32Array]",pt={};pt[Dte]=pt[Nte]=pt[Ute]=pt[jte]=pt[$te]=pt[Vte]=pt[Fte]=pt[Bte]=pt[zte]=!0;pt[bte]=pt[wte]=pt[Mte]=pt[Ste]=pt[Lte]=pt[Ete]=pt[Tte]=pt[kte]=pt[Cte]=pt[Pte]=pt[Rte]=pt[xte]=pt[Ate]=pt[Ite]=pt[Ote]=!1;function Hte(e){return Yd(e)&&m7(e.length)&&!!pt[Pp(e)]}function Gte(e){return function(t){return e(t)}}var _7=typeof xe=="object"&&xe&&!xe.nodeType&&xe,bu=_7&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Wte=bu&&bu.exports===_7,Rv=Wte&&o7.process,yT=function(){try{var e=bu&&bu.require&&bu.require("util").types;return e||Rv&&Rv.binding&&Rv.binding("util")}catch{}}(),_T=yT&&yT.isTypedArray,b7=_T?Gte(_T):Hte;function Gy(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var qte=Object.prototype,Jte=qte.hasOwnProperty;function Kte(e,t,i){var r=e[t];(!(Jte.call(e,t)&&Pf(r,i))||i===void 0&&!(t in e))&&gw(e,t,i)}function Zte(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?gw(i,o,c):Kte(i,o,c)}return i}function Qte(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var Yte=9007199254740991,Xte=/^(?:0|[1-9]\d*)$/;function w7(e,t){var i=typeof e;return t=t==null?Yte:t,!!t&&(i=="number"||i!="symbol"&&Xte.test(e))&&e>-1&&e%1==0&&e<t}var eie=Object.prototype,tie=eie.hasOwnProperty;function iie(e,t){var i=Hy(e),r=!i&&zy(e),n=!i&&!r&&v7(e),s=!i&&!r&&!n&&b7(e),a=i||r||n||s,o=a?Qte(e.length,String):[],c=o.length;for(var d in e)(t||tie.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||w7(d,c)))&&o.push(d);return o}function rie(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var nie=Object.prototype,sie=nie.hasOwnProperty;function aie(e){if(!Kn(e))return rie(e);var t=h7(e),i=[];for(var r in e)r=="constructor"&&(t||!sie.call(e,r))||i.push(r);return i}function S7(e){return mw(e)?iie(e,!0):aie(e)}function oie(e){return Zte(e,S7(e))}function cie(e,t,i,r,n,s,a){var o=Gy(e,i),c=Gy(t,i),d=a.get(c);if(d){By(e,i,d);return}var l=s?s(o,c,i+"",e,t,a):void 0,u=l===void 0;if(u){var g=Hy(c),m=!g&&v7(c),f=!g&&!m&&b7(c);l=c,g||m||f?Hy(o)?l=o:lte(o)?l=tte(o):m?(u=!1,l=Yee(c,!0)):f?(u=!1,l=ete(c,!0)):l=[]:_te(c)||zy(c)?(l=o,zy(o)?l=oie(o):(!Kn(o)||pw(o))&&(l=ste(c))):u=!1}u&&(a.set(c,l),n(l,c,r,s,a),a.delete(c)),By(e,i,l)}function E7(e,t,i,r,n){e!==t&&Zee(t,function(s,a){if(n||(n=new el),Kn(s))cie(e,t,a,i,E7,r,n);else{var o=r?r(Gy(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),By(e,a,o)}},S7)}function T7(e){return e}function die(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var bT=Math.max;function lie(e,t,i){return t=bT(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=bT(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),die(e,this,o)}}function uie(e){return function(){return e}}var pie=fm?function(e,t){return fm(e,"toString",{configurable:!0,enumerable:!1,value:uie(t),writable:!0})}:T7,hie=800,gie=16,mie=Date.now;function fie(e){var t=0,i=0;return function(){var r=mie(),n=gie-(r-i);if(i=r,n>0){if(++t>=hie)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var vie=fie(pie);function yie(e,t){return vie(lie(e,t,T7),e+"")}function _ie(e,t,i){if(!Kn(i))return!1;var r=typeof t;return(r=="number"?mw(i)&&w7(t,i.length):r=="string"&&t in i)?Pf(i[t],e):!1}function bie(e){return yie(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&_ie(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}var k7=bie(function(e,t,i){E7(e,t,i)});const wie=(e,t=ze)=>{let i=Object.assign({},t);return k7(i,e),i},Sie=(e,t={},i={grid_pagination:!0,settings_toggle:!0})=>{var r,n,s,a,o,c,d,l,u,g,m,f;const w={showSetupScreen:!0};let S,y=["dyte-stage"],_={},T={};const P=(i==null?void 0:i.settings_toggle)!==!1,L=(i==null?void 0:i.grid_pagination)!==!1;if(!((r=e.controlBar)===null||r===void 0)&&r.isEnabled){y.push("dyte-controlbar");const{elements:H}=e.controlBar,ie=["dyte-breakout-rooms-toggle","dyte-livestream-toggle"],K=[],ge=["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-mute-all-button",...P?["dyte-settings-toggle"]:[],"dyte-leave-button"];H.fullscreen&&ie.push("dyte-fullscreen-toggle"),H.screenshare&&ie.push("dyte-screen-share-toggle"),ie.push("dyte-recording-toggle"),ie.push("dyte-pip-toggle"),H.chat&&K.push("dyte-chat-toggle"),H.polls&&K.push("dyte-polls-toggle"),H.participants&&K.push("dyte-participants-toggle"),H.plugins&&K.push("dyte-plugins-toggle"),K.push("dyte-ai-toggle");const He=ie.concat(["dyte-mute-all-button"]).concat(K);P&&He.push("dyte-settings-toggle");let Xt=!1;He.length>0&&(Xt=!0),T={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":ie,"div#controlbar-center":ge,"div#controlbar-right":K,"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-controlbar.activeMoreMenu.sm":{add:["div#more-menu"]},"dyte-controlbar.activeMoreMenu.md":{add:["div#more-menu"]},"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button",Xt&&"dyte-more-toggle"],"div#more-menu":He.map(ei=>[ei,{variant:"horizontal"}])}}if(!((n=e.header)===null||n===void 0)&&n.isEnabled){y.unshift("dyte-header");const{elements:H}=e.header;let ie=["dyte-recording-indicator","dyte-livestream-indicator"],K=[],ge=[];L&&ge.push("dyte-grid-pagination"),H.title&&K.push("dyte-meeting-title"),typeof H.logo=="string"&&H.logo.length>0&&(S=H.logo,ie.unshift("dyte-logo")),H.participantCount&&ge.push("dyte-participant-count","dyte-viewer-count"),H.timer&&ge.push("dyte-clock"),_={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":ie,"div#header-center":K,"div#header-right":ge,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}y.push("dyte-participants-audio","dyte-dialog-manager");let O={logo:S};e.isV2===!0?(O=e.designTokens,no((a=(s=e==null?void 0:e.designTokens)===null||s===void 0?void 0:s.colors)===null||a===void 0?void 0:a.textOnBrand)&&(O.colors["text-on-brand"]=(c=(o=e==null?void 0:e.designTokens)===null||o===void 0?void 0:o.colors)===null||c===void 0?void 0:c.textOnBrand),no((l=(d=e==null?void 0:e.designTokens)===null||d===void 0?void 0:d.colors)===null||l===void 0?void 0:l.videoBg)&&(O.colors["video-bg"]=(g=(u=e==null?void 0:e.designTokens)===null||u===void 0?void 0:u.colors)===null||g===void 0?void 0:g.videoBg)):e.colors!=null&&(O.colors={},no(e.colors.primary)?O.colors.brand=ZX(e.colors.primary):typeof e.colors.primary=="object"&&(O.colors.brand=e.colors.primary),no(e.colors.secondary)?O.colors.background=QX(e.colors.secondary):typeof e.colors.secondary=="object"&&(O.colors.background=e.colors.secondary),no(e.colors.text)&&(O.colors.text=e.colors.text),no(e.colors.textPrimary)&&(O.colors["text-on-brand"]=e.colors.textPrimary),no(e.colors.videoBackground)&&(O.colors["video-bg"]=e.colors.videoBackground));let B={designTokens:O,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",height:"76px",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"div#more-menu":{position:"absolute",boxSizing:"border-box",top:"0",left:"0",width:"100%",transform:"translateY(-100%)",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))",padding:"16px 12px",borderRadius:"18px 18px 0 0",zIndex:"400"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":y,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},_),T),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-media",...P?["div#setupcontrols-settings"]:[]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return B=wie(t,B),w.showSetupScreen=(f=(m=e.setupScreen)===null||m===void 0?void 0:m.isEnabled)!==null&&f!==void 0?f:!0,{config:B,data:w}},Eie={chat:"Chat","chat.new":"New",participants:"Participants",polls:"Polls",plugins:"Plugins",mic_off:"Mic Off",mic_on:"Mic On",video_off:"Video Off",video_on:"Video On",left_meeting:"You left the meeting",share_screen_start:"Share Screen",share_screen_stop:"Stop Sharing",leave:"Leave",dismiss:"Dismiss",page:"Page",settings:"Settings",audio:"Audio",video:"Video",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",end_meeting_for_all:"End meeting for all",cancel:"Cancel",yes:"Yes",you:"you",mute:"Mute",kick:"Kick","participant.turn_off_video":"Turn off video",perm_browser_denied:"Permission denied by browser","perm.sys_denied.message":"To enable system permission, go to Mac's System Preferences -> Security & Privacy ->  Privacy -> Select Microphone, Camera or 'Screen Recording' and allow permission for your specific browser","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_denied_title.video":"Camera permission denied","perm_denied_title.audio":"Mic permission denied","perm_denied_title.screenshare":"Screenshare permission denied","perm_denied_text.audio":"It seems like your browser or system has blocked permission for us to access microphone. Please allow this permission and reload for a smoother experience.","perm_denied_text.video":"It seems like your browser or system has blocked permission for us to access camera. Please allow this permission and reload for a smoother experience.","perm_denied_text.screenshare":"It seems like your browser or system has blocked permission for us to screenshare. Please allow this permission and reload for a smoother experience.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"To begin the webinar, please join the stage or accept a join stage request from the participants tab.","stage.empty_viewer":"Webinar has not yet been started","stage.remove_from_stage":"Remove from stage","stage.add_to_stage":"Add to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...",pip_on:"Show PiP",pip_off:"Hide PiP","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute","participants.empty_search_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",join:"Join",joined:"Joined",create:"Create",close:"Close","confirmation_modal.header":"Are you sure?",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View"},z=(e=Eie)=>t=>{var i;return(i=e[t])!==null&&i!==void 0?i:t},$={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9.99906 2.16577C14.6024 2.16577 18.3341 5.89744 18.3341 10.5008C18.3341 15.1033 14.6024 18.8349 9.99906 18.8349C5.39573 18.8349 1.66406 15.1033 1.66406 10.5008C1.66406 5.89744 5.39573 2.16577 9.99906 2.16577ZM12.4482 14.2499H7.54906C8.0924 16.2616 9.0374 17.5849 9.99823 17.5849C10.9591 17.5849 11.9041 16.2616 12.4474 14.2499H12.4482ZM6.25656 14.2499H3.98656C4.79114 15.5374 5.9867 16.5335 7.39823 17.0924C6.96323 16.4091 6.60406 15.5541 6.3399 14.5799L6.2549 14.2508L6.25656 14.2499ZM16.0107 14.2499H13.7424C13.4724 15.3624 13.0824 16.3333 12.5982 17.0924C13.9206 16.5694 15.0556 15.6617 15.8566 14.4866L16.0107 14.2508V14.2499ZM5.91073 8.83327H3.11156L3.1074 8.84744C2.9781 9.38904 2.91293 9.94396 2.91323 10.5008C2.91323 11.3808 3.07406 12.2233 3.3674 13.0008H6.01156C5.81031 11.621 5.77589 10.2221 5.90906 8.83411L5.91073 8.83327ZM12.8299 8.83327H7.16823C7.02162 10.221 7.05945 11.6221 7.28073 12.9999H12.7174C12.9386 11.6221 12.9764 10.221 12.8299 8.83327ZM16.8866 8.83327H14.0882C14.1399 9.37244 14.1674 9.93077 14.1674 10.4999C14.1687 11.3366 14.108 12.1722 13.9857 12.9999H16.6299C16.9308 12.2008 17.0844 11.3538 17.0832 10.4999C17.0832 9.92577 17.0149 9.3666 16.8866 8.83327ZM7.39906 3.90827L7.3799 3.91494C5.67441 4.59596 4.29862 5.91053 3.54073 7.58327H6.08073C6.3424 6.12327 6.7974 4.8516 7.3999 3.90827H7.39906ZM9.99906 3.41577L9.9024 3.41994C8.84906 3.5166 7.82906 5.18494 7.3574 7.58327H12.6424C12.1707 5.1916 11.1566 3.52577 10.1049 3.42077L9.99906 3.4166V3.41577ZM12.5991 3.90744L12.6882 4.05327C13.2457 4.97994 13.6691 6.19661 13.9174 7.58411H16.4574C15.7339 5.98751 14.4463 4.71438 12.8416 4.0091L12.5991 3.90827V3.90744Z"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 13"><path fill="currentColor" d="M10.0309 4.00462C12.24 4.00462 14.0309 5.79549 14.0309 8.00462C14.0309 10.2138 12.24 12.0046 10.0309 12.0046C7.82174 12.0046 6.03088 10.2138 6.03088 8.00462C6.03088 5.79549 7.82174 4.00462 10.0309 4.00462ZM10.0309 5.50462C8.65017 5.50462 7.53088 6.62391 7.53088 8.00462C7.53088 9.38534 8.65017 10.5046 10.0309 10.5046C11.4116 10.5046 12.5309 9.38534 12.5309 8.00462C12.5309 6.62391 11.4116 5.50462 10.0309 5.50462ZM10.0309 0.5C14.6444 0.5 18.627 3.65001 19.732 8.06439C19.8326 8.4662 19.5884 8.87348 19.1866 8.97406C18.7848 9.07465 18.3775 8.83045 18.2769 8.42863C17.338 4.67796 13.9522 2 10.0309 2C6.10781 2 2.72098 4.68026 1.78374 8.43315C1.68337 8.83502 1.27623 9.07944 0.874363 8.97908C0.472492 8.87872 0.228071 8.47158 0.328434 8.06971C1.43153 3.65272 5.41536 0.5 10.0309 0.5Z"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>'},Tie=({element:e,size:t,states:i={},config:r={}})=>{let n=[];const s=r==null?void 0:r.root[e],a=o=>{n.push(o),typeof t=="string"&&n.push(`${o}.${t}`)};if(a(e),typeof s=="object"&&!Array.isArray(s)&&s!==null){const{state:o,states:c}=s;let d=e,l=[];if(Array.isArray(c)){l=c.filter(u=>i[u]),l.sort();for(const u of l)a(`${d}.${u}`);if(l.length>1){const u=[d,...l].join(".");a(u)}}if(typeof o=="string"){const u=`${e}[${o}=${i[o]}]`;a(u);for(const g of l)a(`${u}.${g}`);if(l.length>1){const g=[u,...l].join(".");a(g)}}}return n},kie=({selectors:e,styles:t})=>{if(!Array.isArray(e)||t==null)return{};const i={};for(const r of e){const n=t[r];n!=null&&Object.assign(i,n)}return i},Cie=({selectors:e,root:t})=>{if(!t||!Array.isArray(e))return[];let i=[];for(const r of e){const n=t[r];if(Array.isArray(n))i=[...n];else if(n){if(n.children&&(i=[...n.children]),Array.isArray(n.remove))for(const s of n.remove)i=i.filter(a=>typeof a=="string"?a!==s:Array.isArray(a)?a[0]!==s:!0);if(n.addBefore)for(const[s,a]of Object.entries(n.addBefore)){const o=i.findIndex(c=>typeof c=="string"?c===s:Array.isArray(c)?c[0]===s:!1);o>=0&&i.splice(o,0,...a)}Array.isArray(n.add)&&(i=i.concat(n.add)),Array.isArray(n.prepend)&&(i=n.prepend.concat(i))}}return i},Sh=({elements:e,defaults:t,props:i={},deepProps:r=!1,elementProps:n={}})=>!Array.isArray(e)||e.length===0?null:e.map(s=>p($e,{element:s,defaults:t,props:i,childProps:r&&i,elementProps:n})),$e=({element:e,defaults:t,childProps:i={},props:r={},onlyChildren:n=!1,asHost:s=!1,deepProps:a=!1,elementProps:o={}},c)=>{var d;const{config:l,size:u,states:g}=t;let m,f={};Array.isArray(e)?[m,f]=e:m=e;const w=(d=l==null?void 0:l.root)===null||d===void 0?void 0:d[m];w!=null&&"props"in w&&(r=Object.assign(Object.assign({},w.props),r)),r=Object.assign(Object.assign({},r),f),m in o&&(r=Object.assign(Object.assign({},r),o[m]));const S=Tie({element:m,size:u,states:g,config:l}),y=Cie({selectors:S,root:l.root});if(n)return p(Sh,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o});const _=kie({selectors:S,styles:l.styles});if(s)return p(M,Object.assign({},t,{style:_},r),p(Sh,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o}),c);if(["dyte-header","dyte-controlbar"].includes(m)&&(r.disableRender=!0),m.startsWith("dyte-"))return p(m,Object.assign({},t,{style:_},r),p(Sh,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o}),c);{const[T,P]=m.split("#");return p(T,{id:P,style:_},p(Sh,{elements:y,defaults:t,props:i,deepProps:a,elementProps:o}),c)}},wT={get:(e,t,i)=>(...r)=>{try{return Reflect.get(e,t,i).apply(e,r)}catch{return null}}};let Wy;try{Wy=new Proxy(localStorage,wT)}catch{Wy=new Proxy({},wT)}const Ra=Wy,fw="dyte-prefs",C7=(e,t)=>{const i=JSON.parse(Ra.getItem(fw)||"{}");i[e]=JSON.stringify(t),Ra.setItem("dyte-prefs",JSON.stringify(i))},P7=e=>JSON.parse(Ra.getItem(fw)||"{}")[e],Pie=()=>{const e=JSON.parse(Ra.getItem(fw)||"{}"),t=e["mirror-video"]?e["mirror-video"]==="true":!0,i=e["mute-notification-sounds"]?e["mute-notification-sounds"]==="true":!1;return{mirrorVideo:t,muteNotificationSounds:i}},vm={},Rie=(e,t,i)=>{const r=e.get(t);r?r.includes(i)||r.push(i):e.set(t,[i])},xie=(e,t)=>{let i;return(...r)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,e(...r)},t)}},Aie=e=>!("isConnected"in e)||e.isConnected,ST=xie(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(Aie))},2e3),Iie=()=>{if(typeof XE!="function")return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const i=XE();i&&Rie(e,t,i)},set:t=>{const i=e.get(t);i&&e.set(t,i.filter(eT)),ST(e)},reset:()=>{e.forEach(t=>t.forEach(eT)),ST(e)}}},xv=e=>typeof e=="function"?e():e,Oie=(e,t=(i,r)=>i!==r)=>{const i=xv(e);let r=new Map(Object.entries(i!=null?i:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{var f;r=new Map(Object.entries((f=xv(e))!==null&&f!==void 0?f:{})),n.reset.forEach(w=>w())},a=()=>{n.dispose.forEach(f=>f()),s()},o=f=>(n.get.forEach(w=>w(f)),r.get(f)),c=(f,w)=>{const S=r.get(f);t(w,S,f)&&(r.set(f,w),n.set.forEach(y=>y(f,w,S)))},d=typeof Proxy>"u"?{}:new Proxy(i,{get(f,w){return o(w)},ownKeys(f){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(f,w){return r.has(w)},set(f,w,S){return c(w,S),!0}}),l=(f,w)=>(n[f].push(w),()=>{Mie(n[f],w)});return{state:d,get:o,set:c,on:l,onChange:(f,w)=>{const S=l("set",(_,T)=>{_===f&&w(T)}),y=l("reset",()=>w(xv(e)[f]));return()=>{S(),y()}},use:(...f)=>{const w=f.reduce((S,y)=>(y.set&&S.push(l("set",y.set)),y.get&&S.push(l("get",y.get)),y.reset&&S.push(l("reset",y.reset)),y.dispose&&S.push(l("dispose",y.dispose)),S),[]);return()=>w.forEach(S=>S())},dispose:a,reset:s,forceUpdate:f=>{const w=r.get(f);n.set.forEach(S=>S(f,w,w))}}},Mie=(e,t)=>{const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.length--)},Lie=(e,t)=>{const i=Oie(e,t);return i.use(Iie()),i},{state:U,onChange:tl}=Lie({});var R7=function(){if(typeof Map<"u")return Map;function e(t,i){var r=-1;return t.some(function(n,s){return n[0]===i?(r=s,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var r=e(this.__entries__,i),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(i,r){var n=e(this.__entries__,i);~n?this.__entries__[n][1]=r:this.__entries__.push([i,r])},t.prototype.delete=function(i){var r=this.__entries__,n=e(r,i);~n&&r.splice(n,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,r){r===void 0&&(r=null);for(var n=0,s=this.__entries__;n<s.length;n++){var a=s[n];i.call(r,a[1],a[0])}},t}()}(),qy=typeof window<"u"&&typeof document<"u"&&window.document===document,ym=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Die=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ym):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Nie=2;function Uie(e,t){var i=!1,r=!1,n=0;function s(){i&&(i=!1,e()),r&&o()}function a(){Die(s)}function o(){var c=Date.now();if(i){if(c-n<Nie)return;r=!0}else i=!0,r=!1,setTimeout(a,t);n=c}return o}var jie=20,$ie=["top","right","bottom","left","width","height","size","weight"],Vie=typeof MutationObserver<"u",Fie=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Uie(this.refresh.bind(this),jie)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,r=i.indexOf(t);~r&&i.splice(r,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!qy||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Vie?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!qy||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,r=i===void 0?"":i,n=$ie.some(function(s){return!!~r.indexOf(s)});n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),x7=function(e,t){for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},Ud=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||ym},A7=Af(0,0,0,0);function _m(e){return parseFloat(e)||0}function ET(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(r,n){var s=e["border-"+n+"-width"];return r+_m(s)},0)}function Bie(e){for(var t=["top","right","bottom","left"],i={},r=0,n=t;r<n.length;r++){var s=n[r],a=e["padding-"+s];i[s]=_m(a)}return i}function zie(e){var t=e.getBBox();return Af(0,0,t.width,t.height)}function Hie(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return A7;var r=Ud(e).getComputedStyle(e),n=Bie(r),s=n.left+n.right,a=n.top+n.bottom,o=_m(r.width),c=_m(r.height);if(r.boxSizing==="border-box"&&(Math.round(o+s)!==t&&(o-=ET(r,"left","right")+s),Math.round(c+a)!==i&&(c-=ET(r,"top","bottom")+a)),!Wie(e)){var d=Math.round(o+s)-t,l=Math.round(c+a)-i;Math.abs(d)!==1&&(o-=d),Math.abs(l)!==1&&(c-=l)}return Af(n.left,n.top,o,c)}var Gie=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Ud(e).SVGGraphicsElement}:function(e){return e instanceof Ud(e).SVGElement&&typeof e.getBBox=="function"}}();function Wie(e){return e===Ud(e).document.documentElement}function qie(e){return qy?Gie(e)?zie(e):Hie(e):A7}function Jie(e){var t=e.x,i=e.y,r=e.width,n=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return x7(a,{x:t,y:i,width:r,height:n,top:i,right:t+r,bottom:n+i,left:t}),a}function Af(e,t,i,r){return{x:e,y:t,width:i,height:r}}var Kie=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Af(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=qie(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Zie=function(){function e(t,i){var r=Jie(i);x7(this,{target:t,contentRect:r})}return e}(),Qie=function(){function e(t,i,r){if(this.activeObservations_=[],this.observations_=new R7,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ud(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new Kie(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ud(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;!i.has(t)||(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(r){return new Zie(r.target,r.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),I7=typeof WeakMap<"u"?new WeakMap:new R7,O7=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=Fie.getInstance(),r=new Qie(t,i,this);I7.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){O7.prototype[e]=function(){var t;return(t=I7.get(this))[e].apply(t,arguments)}});var M7=function(){return typeof ym.ResizeObserver<"u"?ym.ResizeObserver:O7}();const If=e=>js(e)?e.meta.viewType==="LIVESTREAM"&&e.stage.status!=="ON_STAGE":!1,Yie=e=>{var t;return js(e)?e.meta.viewType==="LIVESTREAM"&&((t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions.canLivestream):!1},js=e=>{var t;return((t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions.isV2)&&(e==null?void 0:e.livestream)};var Dn;(function(e){e.BUFFERING="Buffering",e.ENDED="Ended",e.IDLE="Idle",e.PLAYING="Playing",e.READY="Ready"})(Dn||(Dn={}));var Nt;(function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.SESSION_DATA="PlayerSessionData",e.STATE_CHANGED="PlayerStateChanged",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUE="PlayerTextCue",e.TEXT_METADATA_CUE="PlayerTextMetadataCue",e.AD_CUE="PlayerAdCue",e.STREAM_SOURCE_CUE="PlayerStreamSourceCue",e.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",e.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",e.SEGMENT_METADATA="PlayerSegmentMetadata",e.PLAYER_METADATA="PlayerMetadata"})(Nt||(Nt={}));const Xie=[Nt.TIME_UPDATE,Nt.BUFFER_UPDATE,Nt.TEXT_METADATA_CUE,Nt.PLAYER_METADATA],ere=[Nt.REBUFFERING,Nt.AUDIO_BLOCKED,Nt.PLAYBACK_BLOCKED,Nt.ERROR,Nt.RECOVERABLE_ERROR,Nt.WORKER_ERROR,Nt.NETWORK_UNAVAILABLE,Nt.ANALYTICS_EVENT,Nt.PLAYBACK_RATE_CHANGED,Nt.QUALITY_CHANGED,Nt.INITIALIZED],tre=e=>{var t,i,r,n,s,a;return js(e)?((i=(t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions)===null||i===void 0?void 0:i.canProduceAudio)==="ALLOWED"||((n=(r=e==null?void 0:e.self)===null||r===void 0?void 0:r.permissions)===null||n===void 0?void 0:n.canProduceScreenshare)==="ALLOWED"||((a=(s=e==null?void 0:e.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo)==="ALLOWED":!1},ire=e=>{var t,i,r,n,s,a,o,c;return js(e)?((i=(t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions)===null||i===void 0?void 0:i.canProduceAudio)!=="NOT_ALLOWED"||((n=(r=e==null?void 0:e.self)===null||r===void 0?void 0:r.permissions)===null||n===void 0?void 0:n.canProduceScreenshare)!=="NOT_ALLOWED"||((a=(s=e==null?void 0:e.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo)!=="NOT_ALLOWED"||((c=(o=e==null?void 0:e.self)===null||o===void 0?void 0:o.permissions)===null||c===void 0?void 0:c.canLivestream):!1},rre=async e=>{if(e==null)return $;try{const t=await fetch(e);return t.ok?Object.assign({},$,await t.json()):$}catch{return $}},nre=640,sre=768,are=1080,ore=2160,TT={sm:nre,md:sre,lg:are,xl:ore},cre=e=>e>=TT.lg?"lg":e>=TT.md?"md":"sm",dre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}",L7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),U.meeting="joined"},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),U.meeting="waiting"},this.roomLeftListener=({state:t})=>{const i=this.states||U;if((i==null?void 0:i.roomLeftState)==="disconnected"){this.setStates({meeting:"ended",roomLeftState:t}),U.meeting="ended";return}this.setStates({meeting:"ended",roomLeftState:t}),U.meeting="ended",U.roomLeftState=t},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{if(["audio","video"].includes(t)){if(i==="ACCEPTED")return;const r={enabled:!0,kind:t};this.setStates({activePermissionsMessage:r}),U.activePermissionsMessage=r}},this.joinStateAcceptedListener=()=>{this.setStates({activeJoinStage:!0}),this.stateUpdate.emit({activeJoinStage:!0}),U.activeJoinStage=!0},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=z(),this.config=ze,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.middlewares={},this.newMeeting=void 0,this.iconPack=$}connectedCallback(){var e;this.resizeObserver=new M7(()=>this.handleResize()),this.resizeObserver.observe(this.host),this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&cT(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.initializePreferences()}clearListeners(e){e!=null&&(e.self.removeListener("roomJoined",this.roomJoinedListener),e.self.removeListener("socketServiceRoomJoined",this.roomJoinedListener),e.meta.removeListener("socketReconnected",this.roomJoinedListener),e.self.removeListener("roomLeft",this.roomLeftListener),e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.removeListener("waitlisted",this.waitlistedListener),e.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener))}disconnectedCallback(){var e;this.leaveOnUnmount&&((e=this.meeting)===null||e===void 0||e.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(e){var t,i;if(e!=null){if(this.loadConfigFromPreset&&e.self.config!=null){const r=e.self.config,{config:n,data:s}=Sie(r);this.config===ze&&(this.config=n),this.showSetupScreen==null&&(this.showSetupScreen=s.showSetupScreen),e.connectedMeetings.supportsConnectedMeetings&&((t=U.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&((i=this.config)===null||i===void 0?void 0:i.designTokens)!=null&&typeof document<"u"&&cT(document.documentElement,this.config.designTokens),If(e)?e.self.addListener("socketServiceRoomJoined",this.roomJoinedListener):e.self.addListener("roomJoined",this.roomJoinedListener),e.self.addListener("waitlisted",this.waitlistedListener),e.self.addListener("roomLeft",this.roomLeftListener),e.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),e.connectedMeetings.supportsConnectedMeetings&&e.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),e.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),U.meeting="joined"):this.showSetupScreen&&this.newMeeting==null?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),U.meeting="setup"):e.joinRoom()}}async iconPackUrlChanged(e){this.iconPack=await rre(e)}listenState(e){e.stopPropagation(),this.setStates(e.detail)}initializePreferences(){const e=Pie();this.setStates({prefs:e}),U.prefs=e}handleChangingMeeting(e){U.activeBreakoutRoomsManager=Object.assign(Object.assign({},U.activeBreakoutRoomsManager),{destinationMeetingId:e})}handleResize(){this.size=cre(this.host.clientWidth)}setStates(e){const t=Object.assign({},this.states);k7(t,e),this.states=t}render(){var e;const t={meeting:(e=this.newMeeting)!==null&&e!==void 0?e:this.meeting,size:this.size,states:this.states||U,config:this.config,iconPack:this.iconPack,t:this.t,middlewares:this.middlewares},i={"dyte-grid":{layout:this.gridLayout}};return p($e,{element:"dyte-meeting",defaults:t,asHost:!0,elementProps:i})}get host(){return Ns(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};L7.style=dre;var lre=Object.freeze({__proto__:null,dyte_meeting:L7});const ure=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",D7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),U.activeAI=!1},this.defaultSection="home",this.meeting=void 0,this.middlewares={},this.states=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var e,t,i,r;this.viewChanged(this.view),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.on("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.on("chatGPTReply",this.aiMessageHandler)}disconnectedCallback(){var e,t,i,r;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.off("chatGPTReply",this.aiMessageHandler)}viewChanged(e){e==="full-screen"&&(this.keydownListener=t=>{t.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(e){e==="transcriptions"&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),e==="home"&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(e){this.tab=e,U.activeSidebar=!0}transcriptionHandler(){this.tab!=="transcriptions"&&(this.newTranscriptionAvailable=!0)}aiMessageHandler(){this.tab!=="home"&&(this.newAiMessageAvailable=!0)}render(){var e;if(!this.middlewares.speech||!(!((e=this.states)===null||e===void 0)&&e.activeAI))return null;const t={meeting:this.meeting,config:this.config,states:this.states||U,size:this.size,t:this.t,iconPack:this.iconPack,middlewares:this.middlewares},i=this.middlewares.speech;return p(M,null,p("h3",{class:"title"},this.t("ai")),p("div",{id:"mobile-header"},p("dyte-button",{variant:"ghost",class:{active:this.tab==="home"},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&p("span",{class:"dot"},".")),p("dyte-button",{variant:"ghost",class:{active:this.tab==="transcriptions"},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&p("span",{class:"dot"},"."))),p("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("Close"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.tab==="home"&&p($e,{element:"dyte-ai-home",defaults:t,props:{aiClient:i,initialMessages:i.aiMesssages,meeting:this.meeting}}),this.tab==="transcriptions"&&p($e,{element:"dyte-ai-transcriptions",defaults:t,props:{aiClient:i,initialTranscriptions:i.transcriptions}}),this.tab==="personal"&&p($e,{element:"dyte-ai-chat",defaults:t}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};D7.style=ure;var pre=Object.freeze({__proto__:null,dyte_ai:D7});const hre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}",N7=class{constructor(e){V(this,e)}render(){return p(M,null,p("p",{class:"private-message"},"This conversation will just be visible to you and not to others in the call."),p("div",{class:"hint-message"},p("p",null,"Ask ",p("i",null,'"Hey AI, summarise this call"'),p("br",null)," or ",p("br",null),"Type ",p("i",null,`"Hey AI, what is today's agenda?"`))))}};N7.style=hre;var gre=Object.freeze({__proto__:null,dyte_ai_chat:N7});const U7=(e,t)=>{const i=t.getTime()-e.getTime();return Math.round(Math.abs(i/1e3/60))},mre=(e,t)=>{const i=U7(e,t);if(i<2)return"just now";if(i<60)return`${i}m ago`;const r=Math.round(i/60);if(i<90)return`about ${r}h ago`;if(r<24)return`${r}h ago`;const n=Math.round(r/24);return n<7?`${n}d ago`:`${Math.round(n/7)}w ago`},fre=e=>e.toDateString()+" "+e.toLocaleTimeString(),tr=(e,t=20)=>e==null?"":e.length>t?`${e.substring(0,t)}...`:e,vre=e=>{const t=/^\d+$/;return/^\p{Emoji}+$/u.test(e)&&!t.test(e)},vw=e=>e!=null&&e.trim().toLowerCase().startsWith("javascript:")?"https://dyte.io":e,$r=e=>(e=e==null?void 0:e.trim(),e===""?"Participant":e);function j7(e,t=2){return e.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,t).map(n=>n.charAt(0)).join("").toUpperCase()}const Rp=({name:e,time:t,now:i})=>p("div",{class:"head"},p("div",{class:"name"},tr($r(e),20)),p("div",{class:"time",title:fre(t)},mre(t,i))),xa=(e,t=!0)=>{e!=null&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})},yre=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}`,$7=class{constructor(e){V(this,e),this.handleSubmit=t=>{var i,r;t.preventDefault(),t.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.sendMessageToChatGPT({action:"default",message:this.prompt}),this.prompt=""},this.handleSummarise=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"summarization"})},this.handleAgenda=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"agenda generation"})},this.handleMoM=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"action items generation"})},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0,this.middlewares={}}handleChatGPTReply(e){const t=this.messages.find(i=>e.action==="default"?i.id===e.id:i.id===e.id||i.action===this.mapMessageAction(e.action));t&&(t.loading||t.action!==this.mapMessageAction("default"))?this.messages=[...this.messages.map(i=>i.id===e.id||i.action===this.mapMessageAction(e.action)?Object.assign(Object.assign({},e),{action:this.mapMessageAction(e.action)}):i)]:this.messages=[...this.messages,Object.assign(Object.assign({},e),{action:this.mapMessageAction(e.action)})]}connectedCallback(){var e,t,i;this.initialMessages?this.messages=this.initialMessages.map(r=>Object.assign(Object.assign({},r),{action:this.mapMessageAction(r.action)})):!((e=this.middlewares)===null||e===void 0)&&e.speech&&setTimeout(()=>{var r;this.messages=(r=this.middlewares.speech.aiMesssages)===null||r===void 0?void 0:r.map(n=>Object.assign(Object.assign({},n),{action:this.mapMessageAction(n.action)}))},1e3),(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.on("chatGPTReply",r=>this.handleChatGPTReply(r))}disconnectedCallback(){var e,t;(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("chatGPTReply",i=>this.handleChatGPTReply(i))}messagesUpdated(){setTimeout(()=>{xa(this.contentContainer,!1)},100)}mapMessageAction(e){switch(e){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return p(M,null,p("div",{class:"content scrollbar",ref:e=>this.contentContainer=e},p("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&p("div",{class:"hint-message"},p("p",null,"Ask ",p("i",null,'"Hey AI, summarise this call"'),p("br",null)," or ",p("br",null),"Type ",p("i",null,`"Hey AI, what is today's agenda?"`))),this.messages.length>0&&p("div",{class:""},this.messages.map(e=>p("div",{class:"message"},p(Rp,{name:e.action,time:new Date(e.createdAt),now:new Date}),p("p",{class:"subtitle"},"Triggered by ",e.participantName),e.prompt&&p("div",{class:"prompt-text"},e.prompt),e.loading?p("div",{class:"loader"},p("dyte-spinner",{size:"sm"}),"\xA0\xA0Generating..."):p("div",{class:"body"},e.response))))),p("div",{class:"actions"},p("span",null,"Quick actions:"),p("div",null,p("button",{onClick:this.handleSummarise},"Summarise"),p("button",{onClick:this.handleAgenda},"Agenda"),p("button",{onClick:this.handleMoM},"MoM"))),p("form",{class:"prompt",onSubmit:this.handleSubmit},p("input",{value:this.prompt,onInput:e=>{this.prompt=e.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};$7.style=yre;var _re=Object.freeze({__proto__:null,dyte_ai_home:$7});const bre=":host{display:block}",V7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.middlewares={},this.aiActive=!1}statesChanged(e){const t=e||U;this.aiActive=t.activeAI}toggleAI(){const e=this.states||U;this.aiActive=!(e!=null&&e.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),U.activeAI=this.aiActive,U.activeMoreMenu=!1}render(){const e=this.t("ai.meeting_ai");return this.middlewares.speech?p(M,{title:e},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:e,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};V7.style=bre;var wre=Object.freeze({__proto__:null,dyte_ai_toggle:V7});const Sre=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}`,F7=class{constructor(e){V(this,e),this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=z(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0,this.middlewares={}}transcriptionHandler(e){this.transcriptions=[...this.transcriptions,e]}connectedCallback(){var e,t;this.initialTranscriptions&&(this.transcriptions=[...this.initialTranscriptions]),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.on("transcription",i=>this.transcriptionHandler(i))}disconnectedCallback(){var e,t;(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("transcription",i=>this.transcriptionHandler(i))}transcriptionsChanged(){setTimeout(()=>{xa(this.contentContainer,!1)},100)}render(){return p(M,null,p("div",{class:"search-bar"},p("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:e=>this.participantQuery=e.target.value})),this.isProcessing&&p("div",{class:"processing"},p("p",null,"Processing audio....")),!this.isProcessing&&p("div",{class:"content scrollbar",ref:e=>this.contentContainer=e},p("div",{class:"started-message"},"Transcription started"),this.transcriptions.filter(e=>this.participantQuery?e.name.toLowerCase().includes(this.participantQuery.toLowerCase()):!0).map(e=>p("div",{class:"message"},p(Rp,{name:e.name,time:new Date(e.date),now:new Date}),p("div",{class:"body"},e.transcript)))),this.captionViewEnabled&&p("dyte-ai-caption",null))}static get watchers(){return{transcriptions:["transcriptionsChanged"]}}};F7.style=Sre;var Ere=Object.freeze({__proto__:null,dyte_ai_transcriptions:F7});let B7=0;function Tre(){return++B7}function kre(){B7=0}const z7="temp-";function Cre(){return{id:`${z7}${Math.random().toString(36)}`,title:`Room ${Tre()}`,participants:[]}}function Av(e){return e.includes(z7)}function Pre(e,t){const i=e.length,r=Math.ceil(i/t),n=new Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e.slice(s,s+r),s+=r;return n.filter(a=>a.length)}function $t(e){var t;return(t=e.customParticipantId)!==null&&t!==void 0?t:e.clientSpecificId}function H7(e){const t=new Map;return[e.self,...e.participants.joined.toArray()].map(i=>{t.set($t(i),i.picture)}),[e.connectedMeetings.parentMeeting,...e.connectedMeetings.meetings].flatMap(i=>i.participants).map(i=>({id:i.id,customParticipantId:$t(i),displayName:i.displayName,displayPictureUrl:i.displayPictureUrl!==""?i.displayPictureUrl:t.get($t(i))}))}var mr=function(e,t,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(e,i):n?n.value=i:t.set(e,i),i},te=function(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)},Rre=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i},gr,ra,ln,un,Co,yr,ga,pn,wu,Su,G7,bm,W7,q7,Hc;class xre{constructor(){gr.add(this),ra.set(this,!1),ln.set(this,void 0),un.set(this,void 0),Co.set(this,void 0),yr.set(this,void 0),ga.set(this,void 0),pn.set(this,void 0),wu.set(this,void 0),Su.set(this,void 0)}get hasLocalChanges(){return te(this,ra,"f")}get currentState(){let t,i=[];return Array.from(te(this,yr,"f").keys()).forEach(r=>{const n=te(this,pn,"f").get(r);n.isParent?t=Object.assign(Object.assign({},n),{participants:te(this,gr,"m",Hc).call(this,r)}):i.push(Object.assign(Object.assign({},n),{participants:te(this,gr,"m",Hc).call(this,r)}))}),{parentMeeting:t,meetings:i}}get allConnectedMeetings(){return this.currentState.meetings.sort((t,i)=>t.title.localeCompare(i.title))}get allParticipants(){return Array.from(te(this,ga,"f").values())}get unassignedParticipants(){return te(this,gr,"m",Hc).call(this,te(this,ln,"f").parentMeeting.id)}getParticipantsForMeeting(t){return te(this,gr,"m",Hc).call(this,t)}addNewMeeting(){mr(this,ra,!0,"f");const t=Cre(),i=Rre(t,["participants"]);return te(this,gr,"m",bm).call(this,Object.assign(Object.assign({},i),{isParent:!1})),i}addNewMeetings(t){return Array.from({length:t}).map(()=>this.addNewMeeting())}updateMeetingTitle(t,i){te(this,pn,"f").get(t).title=i,Av(t)||te(this,wu,"f").add(t)}deleteMeeting(t){mr(this,ra,!0,"f");const i=te(this,pn,"f").get(t),r=te(this,gr,"m",Hc).call(this,i.id).map($t);this.assignParticipantsToMeeting(r,te(this,ln,"f").parentMeeting.id),te(this,pn,"f").delete(i.id),te(this,yr,"f").delete(i.id),Av(i.id)||te(this,Su,"f").add(i.id)}assignParticipantsToMeeting(t,i){return mr(this,ra,!0,"f"),t.forEach(r=>{const n=te(this,un,"f").get(r);te(this,yr,"f").get(n).delete(r),te(this,yr,"f").get(i).add(r),te(this,un,"f").set(r,i)}),this.currentState}assignParticipantsRandomly(){const t=Pre(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach((i,r)=>{const n=t[r];n&&n.length!==0&&this.assignParticipantsToMeeting(n.map(s=>s.customParticipantId),i.id)}),this.currentState}unassignParticipants(t){const i=te(this,ln,"f").parentMeeting.id;return this.assignParticipantsToMeeting(t,i)}unassignAllParticipants(){const t=te(this,ln,"f").parentMeeting.id,i=this.allParticipants.map($t);return this.assignParticipantsToMeeting(i,t)}updateCurrentState(t){te(this,ra,"f")||te(this,gr,"m",G7).call(this,t),[t.parentMeeting,...t.meetings].forEach((i,r)=>{const n=Object.assign(Object.assign({},i),{isParent:r===0});te(this,gr,"m",bm).call(this,n),i.participants.forEach(s=>{te(this,gr,"m",W7).call(this,s,n)})})}get meetingsToCreate(){return this.allConnectedMeetings.filter(t=>Av(t.id)).map(({id:t,title:i})=>({id:t,title:i}))}get meetingsToUpdate(){return this.allConnectedMeetings.filter(t=>te(this,wu,"f").has(t.id)).map(({id:t,title:i})=>({id:t,title:i}))}get meetingsToDelete(){return Array.from(te(this,Su,"f"))}get participantsToMove(){const t=new Map;return Array.from(te(this,un,"f").keys()).forEach(i=>{const r=te(this,Co,"f").get(i),n=te(this,un,"f").get(i);if(r===n)return;const s=`${r}__${n}`;t.has(s)||t.set(s,[]);const a=te(this,ga,"f").get(i);t.get(s).push(a.id)}),Array.from(t.keys()).map(i=>{const[r,n]=i.split("__");return{sourceMeetingId:r,destinationMeetingId:n,participantIds:t.get(i)}})}async applyChanges(t){const i=this.meetingsToCreate.length!==0?t.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),r=this.meetingsToUpdate.length!==0?t.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[n]=await Promise.all([i,r]);n&&n.forEach(s=>{this.meetingsToCreate.forEach(a=>{a.title===s.title&&te(this,gr,"m",q7).call(this,te(this,pn,"f").get(a.id),s.id)})}),this.participantsToMove.length!==0&&this.participantsToMove.forEach(({sourceMeetingId:s,destinationMeetingId:a,participantIds:o})=>{t.connectedMeetings.moveParticipants(s,a,o)}),this.meetingsToDelete.length!==0&&t.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return mr(this,ra,!1,"f"),this.updateCurrentState(te(this,ln,"f")),this.currentState}}ra=new WeakMap,ln=new WeakMap,un=new WeakMap,Co=new WeakMap,yr=new WeakMap,ga=new WeakMap,pn=new WeakMap,wu=new WeakMap,Su=new WeakMap,gr=new WeakSet,G7=function(t){mr(this,ln,t,"f"),mr(this,pn,new Map,"f"),mr(this,ga,new Map,"f"),mr(this,wu,new Set,"f"),mr(this,Su,new Set,"f"),mr(this,yr,new Map,"f"),mr(this,un,new Map,"f"),mr(this,Co,new Map,"f"),mr(this,Co,new Map,"f"),te(this,ln,"f").parentMeeting.participants.forEach(i=>{te(this,Co,"f").set($t(i),te(this,ln,"f").parentMeeting.id)}),te(this,ln,"f").meetings.forEach(i=>{i.participants.forEach(r=>{te(this,Co,"f").set($t(r),i.id)})})},bm=function(t){te(this,pn,"f").has(t.id)||(te(this,pn,"f").set(t.id,t),te(this,yr,"f").set(t.id,new Set))},W7=function(t,i){te(this,ga,"f").has($t(t))||(te(this,ga,"f").set($t(t),t),te(this,un,"f").set($t(t),i.id),te(this,yr,"f").get(i.id).add($t(t)))},q7=function(t,i){const r=t.id;te(this,gr,"m",bm).call(this,Object.assign(Object.assign({},t),{id:i})),te(this,pn,"f").delete(r);const n=te(this,yr,"f").get(r);te(this,yr,"f").set(i,n),te(this,yr,"f").delete(r),Array.from(te(this,un,"f").keys()).forEach(s=>{te(this,un,"f").get(s)===r&&te(this,un,"f").set(s,i)})},Hc=function(t){return Array.from(te(this,yr,"f").get(t)).map(r=>te(this,ga,"f").get(r))};const Are=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",Ul=1,J7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.updateLocalState=t=>{this.stateManager.updateCurrentState(t),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),this.roomConfig.mode==="create"&&!this.meeting.connectedMeetings.isActive&&kre(),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:t.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=t=>{const{detail:i}=t;this.stateManager.updateMeetingTitle(i.id,i.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=t=>{this.stateManager.allConnectedMeetings.find(r=>r.id===t)&&(this.stateManager.deleteMeeting(t),this.draftState=this.stateManager.currentState)},this.unassignParticipant=t=>{this.stateManager.unassignParticipants([t]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=t=>{this.selectedParticipants.length===0||this.assigningParticipants==!1||(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,t),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(t,i)=>{t.emit({activeBreakoutRoomsManager:{active:!0}}),i.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(t="start-breakout")=>{let i={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};t==="close-breakout"&&(i={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:i}),U.activeBreakoutRoomsManager={active:!1},U.activeConfirmationModal=i},this.close=()=>{var t;this.stateManager.discardChanges(),(t=this.stateUpdate)===null||t===void 0||t.emit({activeBreakoutRoomsManager:{active:!1}}),U.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=z()}onSelectedParticipantsChanged(e){e.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissions=this.meeting.self.permissions.connectedMeetings,this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.stateManager=new xre,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(e){this.ephemeralStatusText=e,setTimeout(()=>{this.ephemeralStatusText=""},3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(e){const{detail:t}=e,i=$t(t);i!=null&&this.unassignParticipant(i)}toggleDragMode(e){this.isDragMode=e.detail}assignParticipantsRandomly(){this.stateManager.unassignedParticipants.length!==0&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(e){const t=$t(this.meeting.self);this.stateManager.assignParticipantsToMeeting([t],e),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach(e=>this.stateManager.deleteMeeting(e.id)),await this.applyChanges()}updateSelectedParticipants(e){this.selectedParticipants=e.detail}updateAllParticipants(e){this.selectedParticipants=e.detail}getStatusText(){if(this.ephemeralStatusText!=="")return this.ephemeralStatusText;let e="";return this.roomConfig.mode==="create"&&(e=this.t("breakout_rooms.status.assign_multiple"),this.selectedParticipants.length!==0&&(e=this.t("breakout_rooms.status.select_room"))),e}getApproxDistribution(){const e=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||Ul);return Math.max(Ul,Math.round(e))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return this.permissions.canAlterConnectedMeetings===!1}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter(e=>e.id===this.meeting.meta.roomName)}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?p("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return p(M,null,p("div",{class:"room-switcher-container"},p("header",null,p("dyte-icon",{icon:this.iconPack.breakout_rooms}),p("span",null,this.t("breakout_rooms.join_breakout_header"))),p("div",{class:"rooms",ref:e=>this.selectorRef=e},this.renderMainRoomMaybe(),this.getPermittedRooms().map((e,t)=>p("dyte-breakout-room-manager",{key:e.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:t===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(e.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(e.id),onRoomJoin:()=>this.joinRoom(e.id),states:this.states,room:Object.assign({},e),iconPack:this.iconPack,t:this.t,allowDelete:!1})))))}renderLoading(){return p(M,null,p("div",{class:"loading-content"},p("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return p(M,null,p("div",{class:"room-config"},p("header",null,p("dyte-icon",{icon:this.iconPack.breakout_rooms}),p("span",null,this.t("breakout_rooms.room_config_header"))),p("div",{class:"create-room"},p("p",null,this.t("breakout_rooms.num_of_rooms")),p("dyte-counter",{value:this.roomConfig.rooms,minValue:Ul,iconPack:this.iconPack,t:this.t,onValueChange:e=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+e.detail,Ul)})}})),p("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",p("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),p("footer",null,p("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:this.roomConfig.rooms===0,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():this.roomConfig.step==="room-config"?this.renderRoomConfig():p(M,null,p("div",{class:"participant-config-wrapper"},p("div",{class:"participant-config"},p("aside",{part:"menu"},p("header",null,this.t("breakout_rooms.assign_participants")),p("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map($t),selectedParticipantIds:this.selectedParticipants},p("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},p("dyte-button",{disabled:this.roomConfig.mode==="edit"||this.stateManager.unassignedParticipants.length===0,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},p("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),this.selectedParticipants.length!==0&&p("div",{class:"participants-assign-actions"},p("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),p("dyte-button",{disabled:this.roomConfig.mode==="edit",iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),p("div",{class:"assign-rooms"},p("div",{class:"row"},p("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&p("div",{class:"cta-buttons"},p("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},p("div",{onClick:this.onAddNewRoom},p("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),this.stateManager.allConnectedMeetings.flatMap(e=>e.participants).length!==0&&p("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),p("div",{class:"rooms",ref:e=>this.selectorRef=e},this.renderMainRoomMaybe(),this.getPermittedRooms().map((e,t)=>p("dyte-breakout-room-manager",{key:e.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:t===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(e.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(e.id),onRoomJoin:()=>this.joinRoom(e.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},e),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>Ul})),p("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},p("div",null,p("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),p("span",null,this.t("breakout_rooms.add_room_brief"))))))),p("div",{class:"participant-config-actions"},p("div",{class:{"status-bar":!0,"ephemeral-status":this.ephemeralStatusText!==""}},this.ephemeralStatusText!==""&&p("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),p("div",{class:"breakout-actions"},this.roomConfig.mode==="create"&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),this.roomConfig.mode==="edit"&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&p("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};J7.style=Are;var Ire=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:J7});const Jy={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures"},Ore=e=>e.connectedMeetings.supportsConnectedMeetings,wm=e=>{var t;return js(e)||((t=e==null?void 0:e.__internals__)===null||t===void 0?void 0:t.features.hasFeature("feat_paginated_chat"))},Mre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",K7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.breakoutRoomToggle=()=>{var t,i,r;const n=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(!((i=(t=this.states)===null||t===void 0?void 0:t.activeBreakoutRoomsManager)===null||i===void 0)&&i.active),mode:n}}),U.activeBreakoutRoomsManager={active:!(!((r=U.activeBreakoutRoomsManager)===null||r===void 0)&&r.active),mode:n}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z()}render(){const e=this.meeting.self.permissions.connectedMeetings;if(!(!e.canAlterConnectedMeetings&&!this.meeting.connectedMeetings.isActive)&&!(!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting)&&!!Ore(this.meeting))return p(M,{title:this.t("breakout_rooms")},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}};K7.style=Mre;var Lre=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:K7});const Dre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}",Z7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=z(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var e;(e=this.stateUpdate)===null||e===void 0||e.emit({activeBroadcastMessageModal:!1}),U.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout(()=>{this.close()},2e3)}render(){return p(M,null,p("div",{class:"content-col"},p("h2",null,"Broadcast message to"),p("select",{onChange:e=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:e.target.value})}},p("option",null,"Everyone"),p("option",null,"List of rooms")),p("textarea",{placeholder:"Type message here...",onInput:e=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:e.target.value})}}),this.successMessage?p("p",null,"Message sent to ",this.messagePayload.to,p("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):p("div",{class:"content-row"},p("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel"),"\u2002",p("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};Z7.style=Dre;var Nre=Object.freeze({__proto__:null,dyte_broadcast_message_modal:Z7});const Ure=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Q7=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStateLeftListener=()=>{this.canProduceVideo=!1},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{t==="video"&&(this.cameraPermission=i)},this.toggleCamera=()=>{var t,i,r,n,s,a,o,c,d,l,u,g;if((t=this.meeting)===null||t===void 0||t.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.videoEnabled),permission:this.cameraPermission,canProduce:(a=(s=(n=this.meeting)===null||n===void 0?void 0:n.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((u=this.meeting)===null||u===void 0?void 0:u.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:f}),U.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceVideo||(m.videoEnabled?m.disableVideo():m.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c;(e=this.meeting)===null||e===void 0||e.self.removeListener("videoUpdate",this.videoUpdateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageJoined",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStateLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.updateCanProduce(e),this.cameraPermission=t.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=t.videoEnabled,t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStateLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceVideo==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceVideo=!1,n&&!a?this.canProduceVideo=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceVideo=!0),t.permissions.canProduceVideo==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceVideo=!0))}hasPermissionError(){return this.cameraPermission==="DENIED"||this.cameraPermission==="SYSTEM_DENIED"}getState(){let e="",t="",i="",r={},n=this.hasPermissionError(),s=this.cameraPermission==="COULD_NOT_START";return this.videoEnabled&&!n?(t=this.t("video_on"),i=this.iconPack.video_on):(t=this.t("video_off"),i=this.iconPack.video_off,r["red-icon"]=!0),s?e=this.t("Unable to capture video"):this.cameraPermission==="SYSTEM_DENIED"?e=this.t("perm_sys_denied"):this.cameraPermission==="DENIED"?e=this.t("perm_browser_denied"):e=this.videoEnabled?this.t("Disable Camera"):this.t("Enable Camera"),{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n||s,disable:n}}render(){if(!this.canProduceVideo)return null;const{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n,disable:s}=this.getState();return p(M,{title:t},p("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:r,variant:this.variant,label:t,icon:i,onClick:this.toggleCamera,showWarning:n,disabled:s})))}static get watchers(){return{meeting:["meetingChanged"]}}};Q7.style=Ure;var jre=Object.freeze({__proto__:null,dyte_camera_toggle:Q7});const Y7=e=>{let t=null;try{const i=JSON.parse(e.message),{target:r,message:n}=i;r===void 0||n===void 0?t=e:t=Object.assign(Object.assign({},e),{targetUserIds:r,message:n})}catch{t=e}return t};function gg(e){return e.sort((t,i)=>t.localeCompare(i)).join("_")}function X7(e,t){if(e!=null){for(const i of e)if(i.kind==="file"){const r=i.getAsFile();i.type.startsWith("image/")?t("image",r):t("file",r)}}}const $re=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.2s slide-up ease-in;animation:0.2s slide-up ease-in}dyte-chat-messages-ui{flex:1 0 0}",eR=class{constructor(e){V(this,e),this.disconnectMeeting=t=>{var i;this.isPrivateChatSupported()&&(t==null||t.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),t==null||t.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),(i=t==null?void 0:t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter(t=>this.privatePresetFilter.length===0||this.privatePresetFilter.includes(t.presetName)),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>wm(this.meeting),this.updateUnreadCountGroups=t=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),t)},this.isPrivateChatSupported=()=>{var t,i,r;return this.canPrivateMessage&&!this.disablePrivateChat&&((r=(i=(t=this.meeting)===null||t===void 0?void 0:t.__internals__)===null||i===void 0?void 0:i.features)===null||r===void 0?void 0:r.getFeatureValue("chat_socket_server"))==="socket-service"},this.updateRecipients=t=>{if(typeof t.detail=="string")this.chatRecipientId="everyone",this.selectedParticipant=null;else{const{userId:i}=t.detail;this.chatRecipientId=i,this.selectedParticipant=this.participants.find(r=>r.userId===i)}if(this.chatRecipientId!=="everyone"){const i=[this.chatRecipientId,this.meeting.self.userId],r=gg(i);this.selectedGroup=r}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.t=z(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0}connectedCallback(){this.meetingChanged(this.meeting),!(this.meeting&&!this.meeting.chat)&&this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",e=>{e.preventDefault(),this.dropzoneActivated=!0}),this.host.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.host.addEventListener("drop",e=>{e.preventDefault(),this.dropzoneActivated=!1,X7(e.dataTransfer.items,(t,i)=>{var r,n,s,a;switch(t){case"image":this.isFileMessagingAllowed()&&((n=(r=this.meeting)===null||r===void 0?void 0:r.chat)===null||n===void 0||n.sendImageMessage(i,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&((a=(s=this.meeting)===null||s===void 0?void 0:s.chat)===null||a===void 0||a.sendFileMessage(i,this.getRecipientPeerIds()));break}})}))}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i,r,n,s,a;t!=null&&this.disconnectMeeting(t),!(e&&!e.chat)&&e!=null&&(this.canSend=e.self.permissions.chatPublic.canSend,this.canSendTextMessage=e.self.permissions.chatPublic.text,this.canSendFiles=e.self.permissions.chatPublic.files,this.canPrivateMessage=((i=e.self.permissions.chatPrivate)===null||i===void 0?void 0:i.canSend)||((r=e.self.permissions.chatPrivate)===null||r===void 0?void 0:r.canReceive),this.canSendPrivateTexts=(n=e.self.permissions.chatPrivate)===null||n===void 0?void 0:n.text,this.canSendPrivateFiles=(s=e.self.permissions.chatPrivate)===null||s===void 0?void 0:s.files,this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:o})=>{this.addToChatGroup(o),this.chatGroups=Object.assign({},this.chatGroups)},this.onParticipantUpdate(),this.usePaginatedChat()||(a=e.chat)===null||a===void 0||a.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(e.participants.joined.addListener("participantJoined",this.onParticipantUpdate),e.participants.joined.addListener("participantLeft",this.onParticipantUpdate)))}chatGroupsChanged(e){var t,i;if(!this.isPrivateChatSupported())return;const r={};for(const n in e){const s=(t=vm[n])!==null&&t!==void 0?t:0;r[n]=e[n].filter(a=>a.type=="chat"&&a.message.time>s&&a.message.userId!==this.meeting.self.userId).length,(n===gg([this.meeting.self.userId,(i=this.selectedParticipant)===null||i===void 0?void 0:i.userId])||n==="everyone"&&this.selectedParticipant===null)&&(r[n]=0,vm[n]=new Date)}this.updateUnreadCountGroups(r)}initializeChatGroups(){var e;(e=this.meeting.chat)===null||e===void 0||e.messages.forEach(t=>{this.addToChatGroup(t)})}addToChatGroup(e){var t;const i=Y7(e);let r="everyone";if(((t=i.targetUserIds)===null||t===void 0?void 0:t.length)>0){const n=new Set([i.userId,...i.targetUserIds]);r=gg(Array.from(n))}this.chatGroups[r]===void 0&&(this.chatGroups[r]=[]),this.chatGroups[r]=[...this.chatGroups[r],{type:"chat",message:i}]}getRecipientPeerIds(){let e=[];return this.chatRecipientId!=="everyone"&&(e=[this.selectedParticipant.id]),e}render(){var e,t,i,r;const n={iconPack:this.iconPack,t:this.t,size:this.size},s=(e=this.meeting)===null||e===void 0?void 0:e.self.userId,a=this.chatGroups[this.selectedGroup]||[];return p(M,null,this.isFileMessagingAllowed()&&p("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},p("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),p("p",null,this.t("Drop files/images to send"))),this.isPrivateChatSupported()&&p("dyte-chat-selector-ui",Object.assign({selfUserId:s,groups:this.participants,selectedGroupId:(t=this.selectedParticipant)===null||t===void 0?void 0:t.userId,unreadCounts:this.unreadCountGroups,onDyteChatGroupChanged:this.updateRecipients},n)),this.usePaginatedChat()?p("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):p("dyte-chat-messages-ui",Object.assign({messages:a,selfUserId:s,selectedGroup:this.selectedGroup},n)),p("dyte-chat-composer-ui",Object.assign({canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(!((r=(i=this.meeting)===null||i===void 0?void 0:i.__internals__)===null||r===void 0)&&r.features.hasFeature(Jy.DISABLE_EMOJI_PICKER)),onDyteNewMessage:o=>{var c,d,l,u,g,m;const f=o.detail;switch(f.type){case"text":(d=(c=this.meeting)===null||c===void 0?void 0:c.chat)===null||d===void 0||d.sendTextMessage(f.message,this.getRecipientPeerIds());break;case"image":(u=(l=this.meeting)===null||l===void 0?void 0:l.chat)===null||u===void 0||u.sendImageMessage(f.file,this.getRecipientPeerIds());break;case"file":(m=(g=this.meeting)===null||g===void 0?void 0:g.chat)===null||m===void 0||m.sendFileMessage(f.file,this.getRecipientPeerIds());break}}},n),p("slot",{name:"chat-addon",slot:"chat-addon"})))}get host(){return Ns(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};eR.style=$re;var Vre=Object.freeze({__proto__:null,dyte_chat:eR});const Ky=e=>{if(e&&!e.chat)return!1;const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:r}=e.self.permissions;return i.canSend||i.text||i.files||r.canSend||r.canReceive||r.files||r.text},Zy=e=>{if(e&&!e.polls)return!1;const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.polls)return!1;const{polls:i}=e.self.permissions;return i.canCreate||i.canView||i.canVote},Qy=e=>{var t,i;if(js(e)&&!(!((t=e.self.permissions)===null||t===void 0)&&t.acceptPresentRequests)||e&&!e.participants)return!1;if(e.meta.viewType==="LIVESTREAM")return e.self.permissions.acceptPresentRequests||((i=e==null?void 0:e.stage)===null||i===void 0?void 0:i.status)==="ON_STAGE";const r=e==null?void 0:e.self.config;return!(r&&!r.controlBar.elements.participants)},Yy=e=>{if(If(e)||e&&!e.plugins)return!1;if(e.meta.viewType==="LIVESTREAM")return e.stage.status==="ON_STAGE";const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.plugins)return!1;const{plugins:i}=e.self.permissions;return i.canClose||i.canStart},Fre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",tR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onChatUpdate=({action:t,message:i})=>{var r;this.chatActive||t==="add"&&i.userId!==((r=this.meeting)===null||r===void 0?void 0:r.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const t=this.states||U;this.chatActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="chat"),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),U.activeSidebar=this.chatActive,U.activeMoreMenu=!1,U.sidebar=this.chatActive?"chat":"none",this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":"none",activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=Ky(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),tl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i,r;(t=(e=this.meeting)===null||e===void 0?void 0:e.chat)===null||t===void 0||t.removeListener("chatUpdate",this.onChatUpdate),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(e){var t,i,r,n;e!=null&&(wm(e)&&((t=e.chat)===null||t===void 0||t.getMessages(new Date().getTime(),1,!0).then(s=>{var a;!((a=s==null?void 0:s.messages)===null||a===void 0)&&a.length&&(this.hasNewMessages=!0)})),this.unreadMessageCount=((i=e.chat)===null||i===void 0?void 0:i.messages.length)||0,(r=e.chat)===null||r===void 0||r.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=Ky(e),(n=e==null?void 0:e.stage)===null||n===void 0||n.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||U;t!=null&&(this.chatActive=t.activeSidebar===!0&&t.sidebar==="chat")}render(){if(!!this.canViewChat)return p(M,{title:this.t("chat")},wm(this.meeting)?this.hasNewMessages&&p("div",{class:"unread-count-dot",part:"unread-count-dot"}):this.unreadMessageCount!==0&&!this.chatActive&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};tR.style=Fre;var Bre=Object.freeze({__proto__:null,dyte_chat_toggle:tR});const zre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",Iv=e=>Math.trunc(e).toString().padStart(2,"0"),iR=class{constructor(e){V(this,e),this.disconnectMeeting=()=>{var t,i;this.timeout&&clearTimeout(this.timeout),typeof this.request=="number"&&cancelAnimationFrame(this.request),(i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0||i.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var t,i,r;this.startedTime=(r=(i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0?void 0:i.meetingStartedTimestamp)===null||r===void 0?void 0:r.toISOString()},this.meeting=void 0,this.iconPack=$,this.t=z(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(e){var t,i,r;this.disconnectMeeting(),e!=null&&(this.startedTime=(i=(t=e.meta)===null||t===void 0?void 0:t.meetingStartedTimestamp)===null||i===void 0?void 0:i.toISOString(),(r=e.meta)===null||r===void 0||r.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(e){if(e!==void 0){const t=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(t))},500)};this.request=requestAnimationFrame(t)}}getFormattedTime(){if(this.timeDiff==null)return null;const e=this.timeDiff;let t="";return e>=3600&&(t=`${Iv(e/3600)}:`),t+=`${Iv(e%3600/60)}:${Iv(e%60)}`,t}render(){return p(M,{tabIndex:0,role:"timer","aria-live":"off"},this.startedTime!==void 0&&[p("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),p("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};iR.style=zre;var Hre=Object.freeze({__proto__:null,dyte_clock:iR});const Gre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",rR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.close=()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),U.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClose(this.stateUpdate,U,this.meeting)},this.onConfirmation=async()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),U.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClick(this.stateUpdate,U,this.meeting)},this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=z()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var e,t;const i=this.states.activeConfirmationModal;return p(M,null,p("div",{class:"leave-modal"},p("div",{class:"header"},p("h2",{class:"title"},i.header?this.t(i.header):this.t("confirmation_modal.header"))),p("p",{class:"message"},i.content?this.t(i.content):""),p("div",{class:"content"},p("div",{class:"leave-meeting"},p("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),p("dyte-button",{onClick:()=>this.onConfirmation(),variant:(t=(e=this.states.activeConfirmationModal)===null||e===void 0?void 0:e.variant)!==null&&t!==void 0?t:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};rR.style=Gre;var Wre=Object.freeze({__proto__:null,dyte_confirmation_modal:rR});const qre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;height:var(--dyte-space-16, 64px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);z-index:10}",nR=class{constructor(e){V(this,e),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=ze,this.states=void 0,this.iconPack=$,this.t=z(),this.middlewares={},this.size=void 0}render(){const e={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size,middlewares:this.middlewares};return p(M,null,!this.disableRender&&p($e,{element:"dyte-header",defaults:e,onlyChildren:!0}),p("slot",null))}};nR.style=qre;var Jre=Object.freeze({__proto__:null,dyte_controlbar:nR});const Kre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",sR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onDyteDialogClose=(t,i)=>{U[t]=i,this.stateUpdate.emit({[t]:i})},this.leaveStage=async()=>{var t,i,r;this.meeting.meta.viewType==="LIVESTREAM"&&((t=this.meeting.stage)===null||t===void 0?void 0:t.status)==="ACCEPTED_TO_JOIN_STAGE"&&await((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.leaveStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.join(),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.joinStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=ze,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z()}render(){var e,t,i,r;const n={meeting:this.meeting,states:this.states||U,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},s=this.states||U;if((s==null?void 0:s.image)!=null){const a=s.image,o=()=>{this.stateUpdate.emit({image:null}),U.image=null};return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:o,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-image-viewer",defaults:n,props:{image:a,onClose:o}})))}else{if((s==null?void 0:s.activeSettings)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-settings",defaults:n})));if((s==null?void 0:s.activeLeaveConfirmation)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-leave-meeting",defaults:n})));if(((e=s==null?void 0:s.activePermissionsMessage)===null||e===void 0?void 0:e.enabled)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-permissions-message",defaults:n})));if((s==null?void 0:s.activeRemoteAccessManager)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-remote-access-manager",defaults:n})));if(((t=s==null?void 0:s.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.active)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-breakout-rooms-manager",defaults:n,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(((i=s==null?void 0:s.activeConfirmationModal)===null||i===void 0?void 0:i.active)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-confirmation-modal",defaults:n})));if(((r=s==null?void 0:s.activeOverlayModal)===null||r===void 0?void 0:r.active)===!0)return p(M,null,p("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(s!=null&&s.activeBroadcastMessageModal)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-broadcast-message-modal",defaults:n})));if((s==null?void 0:s.activeJoinStage)===!0){const a={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:this.leaveStage,iconPack:this.iconPack,t:this.t},p("dyte-join-stage",Object.assign({dataConfig:a,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.leaveStage},n))))}else if((s==null?void 0:s.activeMuteAllConfirmation)===!0)return p(M,null,p("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},p($e,{element:"dyte-mute-all-confirmation",defaults:n})))}return null}};sR.style=Kre;var Zre=Object.freeze({__proto__:null,dyte_dialog_manager:sR});const Qre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}",aR=class{constructor(e){V(this,e),this.config=ze,this.size=void 0,this.icon=$,this.states=void 0,this.t=z(),this.iconPack=$,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),tl("roomLeftState",()=>this.statesChanged())}getBreakoutRoomsMessage(e){var t;let i;return(e==null?void 0:e.roomLeftState)==="connected-meeting"&&(((t=U.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?i="breakout_rooms.move_reason.switch_main_room":i="breakout_rooms.move_reason.switch_room"),i}statesChanged(e){const t=e||U;if(t!=null)switch(t==null?void 0:t.roomLeftState){case"left":this.message="You left the meeting";break;case"kicked":this.message="You were removed from the meeting";break;case"disconnected":this.message="The call ended because the connection was lost.";break;case"rejected":this.message="Your request to join the meeting was denied.";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(t);break;default:this.message="The meeting ended"}}renderBreakoutRoomScreen(){return p(M,null,p("div",{class:"ctr",part:"container"},p("dyte-icon",{icon:this.iconPack.breakout_rooms}),p("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const e=this.states||U;return e.roomLeftState==="connected-meeting"?this.renderBreakoutRoomScreen():p(M,null,p("div",{class:"ctr",part:"container"},p("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),p("p",{part:"message"},this.t(this.message)),(e==null?void 0:e.roomLeftState)==="disconnected"&&p("span",{part:"description"},this.t("Please check your internet connection and try again."))))}static get watchers(){return{states:["statesChanged"]}}};aR.style=Qre;var Yre=Object.freeze({__proto__:null,dyte_ended_screen:aR});const oR=e=>{e!=null&&(e.requestFullscreen!=null?e.requestFullscreen():e.mozRequestFullScreen!=null?e.mozRequestFullScreen():e.webkitRequestFullscreen!=null?e.webkitRequestFullscreen():e.msRequestFullscreen!=null&&e.msRequestFullscreen())},cR=()=>{document.exitFullscreen!=null?document.exitFullscreen():document.mozExitFullScreen!=null?document.mozExitFullScreen():document.webkitExitFullscreen!=null?document.webkitExitFullscreen():document.msExitFullscreen!=null&&document.msExitFullscreen()},dR=()=>document.fullscreenElement!=null||document.webkitCurrentFullScreenElement!=null,lR=()=>typeof document<"u"?document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled:!1,Xre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",uR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=dR()},this.toggleFullScreen=()=>{const t=document.querySelector("dyte-meeting");!t||(this.fullScreenActive?(cR(),this.fullScreenActive=!1):(oR(t),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.size=void 0,this.iconPack=$,this.t=z(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=lR(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?p(M,{title:this.t("Fullscreen")},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};uR.style=Xre;var ene=Object.freeze({__proto__:null,dyte_fullscreen_toggle:uR});const fs=720,vs=1280,tne="#000000",ine=e=>{switch(e){case 0:case 1:return[vs,fs];case 2:return[Math.floor(vs/2),fs];case 3:case 4:return[Math.floor(vs/2),Math.floor(fs/2)];case 5:case 6:return[Math.floor(vs/3),Math.floor(fs/2)];default:return[Math.floor(vs/3),Math.floor(fs/2)]}},rne=(e,t,i,r,n,s)=>{let a=.5,o=.5;const c=n,d=s,l=Math.min(i/c,r/d);let u=c*l,g=d*l,m,f,w,S,y=1;return u<i&&(y=i/u),Math.abs(y-1)<1e-14&&g<r&&(y=r/g),u*=y,g*=y,w=c/(u/i),S=d/(g/r),m=(c-w)*a,f=(d-S)*o,m<0&&(m=0),f<0&&(f=0),w>c&&(w=c),S>d&&(S=d),[m,f,w,S,e,t,i,r]};var Yi;(function(e){e.CAMERA="CAMERA",e.MIC="MIC",e.END="END"})(Yi||(Yi={}));class nne{constructor(){this.tracks=[],this.sources=[],this.enabled=!1}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}cleanup(){this.isSupported()&&document.exitPictureInPicture!==void 0&&document.pictureInPictureElement!==null&&document.exitPictureInPicture(),this.canvas=void 0,this.video=void 0,this.tracks=[],this.request=void 0}createCanvas(){const t=document.createElement("canvas");t.height=fs,t.width=vs,this.canvas=t}setupEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("hangup",()=>{t(Yi.END)})}mountAudioEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",()=>{t(Yi.MIC)})}mountVideoEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",()=>{t(Yi.CAMERA)})}unmountAudioEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",void 0)}unmountVideoEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",void 0)}drawGrid(t,i,r){if(this.canvas===void 0)return;const n=this.canvas.getContext("2d");n.fillStyle=tne,n.fillRect(0,0,vs,fs);let s=0,a=0;for(;s<fs-5;){let o=0;for(;o<vs-5&&a<r;){const c=this.tracks[a],[d,l,u,g,m,f,w,S]=rne(o,s,t,i,c.videoWidth,c.videoHeight);n.drawImage(c,d,l,u,g,m,f,w,S),a+=1,o+=t}s+=i}}paintCanvas(){const t=this.tracks.length,[i,r]=ine(t);this.drawGrid(i,r,t)}animate(){this.tracks!==void 0&&this.paintCanvas(),this.request!==void 0&&(this.request=requestAnimationFrame(()=>this.animate()))}create(t,i,r){this.cleanup(),this.createCanvas(),this.setupEvents(r);const n=document.createElement("video");n.height=fs,n.width=vs,n.autoplay=!0,n.srcObject=this.canvas.captureStream(24),this.video=n,this.video.onloadedmetadata=()=>{try{t(),this.video.onleavepictureinpicture=()=>{i()}}catch(s){i(s.getMessage())}},this.paintCanvas()}updateMediaSession(t,i){navigator.mediaSession!==void 0&&(t===Yi.CAMERA&&navigator.mediaSession.setCameraActive!==void 0&&navigator.mediaSession.setCameraActive(i),t===Yi.MIC&&navigator.mediaSession.setMicrophoneActive!==void 0&&navigator.mediaSession.setMicrophoneActive(i))}updateVideoSources(){const t=Object.values(this.sources).filter(r=>r.enabled),i=[];t.map(r=>{i.push(r.element)}),this.tracks=i}enableSource(t){this.sources[t]!==void 0&&(this.sources[t].enabled=!0),this.updateVideoSources()}disableSource(t){this.sources[t]!==void 0&&(this.sources[t].enabled=!1),this.updateVideoSources()}addSource(t,i,r){this.sources[t]={element:i,enabled:r}}removeSource(t){delete this.sources[t]}removeAllSource(){this.sources=[]}enable(){this.enabled=!0,this.request=requestAnimationFrame(()=>this.animate()),this.video.requestPictureInPicture()}disable(){this.enabled=!1,cancelAnimationFrame(this.request),this.request=void 0,document.exitPictureInPicture()}}const mt=new nne;function sne({dimensions:e,count:t,aspectRatio:i,gap:r}){const{width:n,height:s,rows:a,cols:o}=ane({dimensions:e,count:t,aspectRatio:i,gap:r}),c=one({parentDimensions:e,dimensions:{width:n,height:s},rows:a,cols:o,count:t,gap:r});return{width:n,height:s,getPosition:c}}function ane({count:e,dimensions:t,aspectRatio:i,gap:r}){let{width:n,height:s}=t;if(n===0||s===0)return{width:0,height:0,rows:1,cols:1};n-=r*2,s-=r*2;const a=r,o=e,c=cne(i);let d=0,l=0,u=1,g=1;const m=[];for(let f=1;f<=o;f++)m.push((n-a*(f-1))/f),m.push((s-a*(f-1))/(f*c));m.sort((f,w)=>w-f);for(const f of m)if(d=f,l=d*c,u=Math.floor((n+a)/(d+a)),g=Math.floor((s+a)/(l+a)),u*g>=o){g=Math.ceil(o/u);break}return{width:d,height:l,rows:g,cols:u}}function one({parentDimensions:e,dimensions:t,rows:i,cols:r,count:n,gap:s}){const{width:a,height:o}=e,{width:c,height:d}=t,l=(o-(d*i+(i-1)*s))/2;let u=(a-(c*r+(r-1)*s))/2;const g=d+s,m=c+s;let f=0,w=0;const S=n%r;function y(_){const T=n-_;T===S&&(u=(a-(c*T+(T-1)*s))/2);const P=l+w*g,L=u+f*m;return f++,(_+1)%r===0&&(w++,f=0),{top:P,left:L}}return y}const cne=e=>{const[t,i]=e.split(":");return Number.parseInt(i)/Number.parseInt(t)},yw={spotlight:"sm",mixed:"sm"},dne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;overflow:hidden;flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition:0.4s}dyte-participant-tile{aspect-ratio:initial;box-sizing:border-box}.webinar-stage{box-sizing:border-box;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}.livestream-stage{box-sizing:border-box;margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;flex-grow:1;align-content:center;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);text-align:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",pR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.hideSelf=!1,this.networkUpdateListener=({event:t})=>{this.connected=t==="connected"},this.meetingDisconnectedListener=()=>{this.networkUpdateListener({event:"disconnected"})},this.meetingConnectedListener=()=>{this.networkUpdateListener({event:"connected"})},this.eventCallback=t=>{const{self:i}=this.meeting;t===Yi.CAMERA&&(i.videoEnabled?i.disableVideo():i.enableVideo()),t===Yi.MIC&&(i.audioEnabled?i.disableAudio():i.enableAudio()),t===Yi.END&&(mt.cleanup(),this.stateUpdate.emit({activePipMode:!1}),this.meeting.leaveRoom())},this.enablePipMediaControls=(t=this.meeting)=>{const i=t.self.permissions.canProduceAudio,r=t.self.permissions.canProduceVideo;i&&mt.mountAudioEvents(this.eventCallback),r&&mt.mountVideoEvents(this.eventCallback)},this.disablePipMediaControls=()=>{mt.unmountAudioEvents(),mt.unmountVideoEvents()},this.handlePipMediaControls=t=>{t==="ON_STAGE"?this.enablePipMediaControls():this.disablePipMediaControls()},this.filterParticipants=t=>{var i;if(this.overrides&&((i=this.overrides)===null||i===void 0?void 0:i.videoUnsubscribed)){const r=this.overrides.videoUnsubscribed.preset;r.length>0&&(t=t.filter(n=>!r.some(a=>n.presetName===void 0?!1:n.presetName.match(a))))}return t},this.onSelfVideoUpdateListener=({videoEnabled:t})=>{mt.updateMediaSession(Yi.CAMERA,t)},this.onSelfAudioUpdateListener=({audioEnabled:t})=>{mt.updateMediaSession(Yi.MIC,t)},this.onViewModeChanged=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onParticipantJoined=t=>{this.meeting!=null&&(this.participants.some(i=>i.id===t.id)||(this.participants=this.filterParticipants([t,...this.participants])),t.isPinned&&!this.pinnedParticipants.some(i=>i.id===t.id)&&(this.pinnedParticipants=this.pinnedParticipants.concat([t])),this.updateWebinarStage())},this.onParticipantLeft=t=>{this.participants=this.participants.filter(i=>i.id!==t.id),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter(i=>!this.participants.find(r=>r.id===i.id))),this.participants=this.filterParticipants(this.participants),this.pinnedParticipants=this.pinnedParticipants.filter(i=>i.id!==t.id),t.screenShareEnabled&&this.removeScreenShare(t),this.updateWebinarStage()},this.selfStageJoinListener=()=>{this.updateActiveParticipants()},this.selfStageLeaveListener=()=>{this.removeScreenShare(this.meeting.self),this.updateActiveParticipants()},this.onPresentationStart=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onPresentationEnd=t=>{this.meeting!=null&&(this.removePinned(t),this.removeScreenShare(t),this.updateActiveParticipants())},this.onScreenShareUpdate=t=>{t.screenShareEnabled?this.addScreenShare(t):this.removeScreenShare(t)},this.onSelfScreenShareUpdate=({screenShareEnabled:t})=>{t?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(t,{active:i})=>{i?this.plugins.some(r=>r.id===t.id)||(this.plugins=[...this.plugins,t]):this.plugins=this.plugins.filter(r=>r.id!==t.id)},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.showWebinarStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.connected=!0,this.pipSupported=!1,this.pipEnabled=!1,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.gridSize=yw,this.overrides={}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectMeeting(e){var t,i;if(e==null)return;this.participants=[],this.plugins=[];const{self:r,participants:n,plugins:s,meta:a}=e;n.active.removeListener("participantJoined",this.onParticipantJoined),n.active.removeListener("participantLeft",this.onParticipantLeft),n.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),n.joined.removeListener("peerStartedPresenting",this.onPresentationStart),n.joined.removeListener("peerStoppedPresenting",this.onPresentationEnd),r.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),s==null||s.all.removeListener("stateUpdate",this.onPluginStateUpdate),n.pinned.removeListener("participantJoined",this.onParticipantPinned),n.pinned.removeListener("participantLeft",this.onParticipantUnpinned),r.removeListener("pinned",this.onParticipantPinned),r.removeListener("unpinned",this.onParticipantUnpinned),n.removeListener("viewModeChanged",this.onViewModeChanged),r.removeListener("stageJoined",this.selfStageJoinListener),r.removeListener("stageLeft",this.selfStageLeaveListener),r.removeListener("removedFromStage",this.selfStageLeaveListener),r.removeListener("videoUpdate",this.onSelfVideoUpdateListener),r.removeListener("audioUpdate",this.onSelfAudioUpdateListener),a.removeListener("disconnected",this.meetingDisconnectedListener),a.removeListener("connected",this.meetingConnectedListener),(t=e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.handlePipMediaControls),e.self.removeListener("stageJoined",this.enablePipMediaControls),e.self.removeListener("stageLeft",this.disablePipMediaControls),(i=e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateLiveStreamStage)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}screenShareParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeScreenShare:t}),U.activeScreenShare=t}pluginsChanged(e){const t=e.length>0;this.stateUpdate.emit({activePlugin:t}),U.activePlugin=t}pinnedParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeSpotlight:t}),U.activeSpotlight=t}updateActiveParticipants(){var e,t;const{self:i,participants:r}=this.meeting,n=((e=i.config)===null||e===void 0?void 0:e.viewType)==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE",s=(t=i.permissions)===null||t===void 0?void 0:t.isRecorder;this.hideSelf=n||s||i.permissions.hiddenParticipant,this.participants=this.filterParticipants([...r.active.toArray().filter(a=>a.id!==i.id),...r.viewMode==="ACTIVE_GRID"&&!i.isPinned&&!this.hideSelf?[i]:[]]),this.pinnedParticipants=[...r.pinned.toArray().filter(a=>a.id!==i.id),...i.isPinned&&!this.hideSelf?[i]:[]],this.screenShareParticipants=r.joined.toArray().filter(a=>a.screenShareEnabled),i.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([i])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&this.meeting.meta.viewType==="WEBINAR"?this.showWebinarStage=this.participants.length===0&&this.pinnedParticipants.length===0:this.showWebinarStage=!1}updateLiveStreamStage(){this.showLiveStreamPlayer=If(this.meeting)}meetingChanged(e,t){var i,r,n;if(t!==null&&this.disconnectMeeting(t),e!=null){const{self:s,participants:a,plugins:o,meta:c,stage:d}=e,{config:l,permissions:u}=s,g=(l==null?void 0:l.viewType)==="WEBINAR"&&this.meeting.self.webinarStageStatus!=="ON_STAGE",m=u==null?void 0:u.isRecorder;if(this.hideSelf=g||m||u.hiddenParticipant,this.participants=this.filterParticipants([...a.active.toArray(),...!s.isPinned&&!this.hideSelf?[s]:[]]),this.pinnedParticipants=[...a.pinned.toArray(),...s.isPinned&&!this.hideSelf?[s]:[]],this.screenShareParticipants=a.joined.toArray().filter(S=>S.screenShareEnabled),this.plugins=(o==null?void 0:o.active.toArray())||[],(l==null?void 0:l.viewType)==="WEBINAR"&&(this.canCurrentPeerHost=u.acceptPresentRequests||u.canPresent,this.updateWebinarStage()),this.pipSupported=mt.isSupported()&&((i=e.self.config)===null||i===void 0?void 0:i.pipMode),this.pipSupported){const S=()=>{},y=()=>{this.stateUpdate.emit({activePipMode:!1})};mt.create(S,y,this.eventCallback),this.enablePipMediaControls(e),(r=e.stage)===null||r===void 0||r.on("stageStatusUpdate",this.handlePipMediaControls),e.self.on("stageJoined",this.enablePipMediaControls),e.self.on("stageLeft",this.disablePipMediaControls)}const f=document.pictureInPictureElement!==null,w=this.states||U;mt.isSupported()&&w.activePipMode!==f&&this.stateUpdate.emit({activePipMode:f}),a.active.addListener("participantJoined",this.onParticipantJoined),a.active.addListener("participantLeft",this.onParticipantLeft),a.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),a.joined.addListener("peerStartedPresenting",this.onPresentationStart),a.joined.addListener("peerStoppedPresenting",this.onPresentationEnd),s.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),o==null||o.all.addListener("stateUpdate",this.onPluginStateUpdate),a.pinned.addListener("participantJoined",this.onParticipantPinned),a.pinned.addListener("participantLeft",this.onParticipantUnpinned),s.addListener("pinned",this.onParticipantPinned),s.addListener("videoUpdate",this.onSelfVideoUpdateListener),s.addListener("audioUpdate",this.onSelfAudioUpdateListener),s.addListener("unpinned",this.onParticipantUnpinned),s.addListener("stageJoined",this.selfStageJoinListener),s.addListener("stageLeft",this.selfStageLeaveListener),s.addListener("removedFromStage",this.selfStageLeaveListener),c.addListener("disconnected",this.meetingDisconnectedListener),c.addListener("connected",this.meetingConnectedListener),d==null||d.addListener("stageStatusUpdate",this.updateLiveStreamStage.bind(this)),a.addListener("viewModeChanged",this.onViewModeChanged),!((n=e.stage)===null||n===void 0)&&n.status&&this.updateLiveStreamStage()}}addScreenShare(e){this.screenShareParticipants.some(t=>t.id===e.id)||(this.screenShareParticipants=[...this.screenShareParticipants,e])}removeScreenShare(e){this.screenShareParticipants=this.screenShareParticipants.filter(t=>t.id!==e.id)}removePinned(e){this.pinnedParticipants=this.pinnedParticipants.filter(t=>t.id!==e.id)}render(){const e={meeting:this.meeting,size:this.size,states:this.states||U,config:this.config,iconPack:this.iconPack,t:this.t};return!this.connected&&this.hideSelf?p("div",{class:"webinar-stage"},p("div",{class:"center"},p("h2",null,this.t("stage.reconnecting")))):this.showWebinarStage?p(M,null,p("div",{class:"webinar-stage"},p("div",{class:"center"},this.canCurrentPeerHost&&p("div",null,p("h2",null,this.t("stage.empty_host")),p("p",null,this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&p("h2",null,this.t("stage.empty_viewer"))))):this.showLiveStreamPlayer?p(M,null,p("dyte-livestream-player",{meeting:this.meeting,size:this.size})):p(M,null,p($e,{element:"dyte-grid",defaults:e,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}))}get host(){return Ns(this)}static get watchers(){return{screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};pR.style=dne;var lne=Object.freeze({__proto__:null,dyte_grid:pR});const une=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}",hR=class{constructor(e){V(this,e),this.onPageChanged=({currentPage:t,pageCount:i})=>{this.pageCount=i,this.page=t},this.toggleGridPagination=()=>{var t;const{self:i,participants:r}=this.meeting,{mobile:n,desktop:s}=(t=i.config)===null||t===void 0?void 0:t.maxVideoStreams,a=this.size==="sm"?n:s;r.joined.size<a?this.showPagination=!1:this.showPagination=!0},this.onParticipantJoin=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.onParticipantLeave=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.prevPage=()=>{if(this.meeting==null)return;const{participants:t}=this.meeting;this.page>1?t.setPage(this.page-=1):t.viewMode==="PAGINATED"&&t.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(this.meeting==null)return;const{participants:t}=this.meeting;this.page>0&&this.page<this.pageCount?t.setPage(this.page+=1):t.count>0&&this.pageCount===0&&t.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=$,this.t=z(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(this.meeting==null)return;const{participants:e}=this.meeting;e.removeListener("pageChanged",this.onPageChanged),e.removeListener("viewModeChanged",this.onPageChanged),e.joined.removeListener("participantJoined",this.onParticipantJoin),e.joined.removeListener("participantLeft",this.onParticipantLeave)}meetingChanged(e){if(e!=null){const{participants:t}=e;this.page=t.currentPage,this.pageCount=t.pageCount,t.addListener("viewModeChanged",this.onPageChanged),t.addListener("pageChanged",this.onPageChanged),t.joined.addListener("participantJoined",this.onParticipantJoin),t.joined.addListener("participantLeft",this.onParticipantLeave),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){if(!(this.meeting.meta.viewType==="WEBINAR"||!this.showPagination))return p(M,null,p("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:this.pageCount===0,onClick:this.prevPage,"aria-label":this.t("Previous Page"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),this.variant!=="grid"&&p("div",{class:"center"},p("span",{class:"page"},this.pageCount===0?p("dyte-tooltip",{label:this.t("Auto Layout"),iconPack:this.iconPack,t:this.t},p("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),this.pageCount!==0&&[p("span",{class:"slash"},"/"),p("span",{class:"pages"},this.pageCount)]),this.variant==="grid"&&this.pageCount>0&&p("div",{class:"dots"},[...Array(this.pageCount)].map((t,i)=>p("div",{key:`dot-${i}`,class:{dot:!0,active:i+1===this.page}}))),p("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:this.page!==0&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("Next Page"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};hR.style=une;var pne=Object.freeze({__proto__:null,dyte_grid_pagination:hR});const hne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}",gR=class{constructor(e){V(this,e),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=ze,this.states=void 0,this.iconPack=$,this.t=z(),this.size=void 0}render(){const e={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return p(M,null,!this.disableRender&&p($e,{element:"dyte-header",defaults:e,onlyChildren:!0}),p("slot",null))}};gR.style=hne;var gne=Object.freeze({__proto__:null,dyte_header:gR});const mne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-10, 40px);height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",mR=class{constructor(e){V(this,e),this.meeting=void 0,this.config=ze,this.iconPack=$,this.t=z()}render(){return p(M,null,p("slot",null,p("div",{class:"ctr",part:"container"},p("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),p("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};mR.style=mne;var fne=Object.freeze({__proto__:null,dyte_idle_screen:mR});const vne=e=>e.split(/[#?]/)[0].split(".").pop().trim(),yne=e=>{if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/1024**t).toFixed(2)} ${["B","kB","MB","GB","TB"][t]}`},_ne=(e,t="file")=>{try{const r=new URL(e).pathname.split("/").pop();return r!=="/"?r:t}catch{return t}},_w=async(e,t)=>{e=vw(e);let i=t==null?void 0:t.name;const r=await fetch(e);if(!r.ok){window.open(e,"_blank");return}const n=URL.createObjectURL(await r.blob()),s=document.createElement("a");s.href=n,s.download=i!=null?i:_ne(e,t==null?void 0:t.fallbackName),s.click()},bne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}`,fR=class{constructor(e){V(this,e),this.close=Q(this,"close",7),this.keypressListener=t=>{t.key==="Escape"&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=z(),this.iconPack=$}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return p(M,{class:"scrollbar",onClick:e=>e.stopPropagation()},p("div",{class:"header"},p("div",{class:"shared-by-user"},this.t("Shared by")," ",p("span",{class:"displayName"},$r(tr(this.image.displayName)))),p("div",{class:"actions"},p("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.full_screen_minimize,iconPack:this.iconPack,t:this.t})),p("dyte-button",{onClick:()=>_w(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"))),p("div",{class:"image-ctr"},p("img",{src:this.image.link})))}};fR.style=bne;var wne=Object.freeze({__proto__:null,dyte_image_viewer:fR});const Sne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",vR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),U.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=$,this.t=z()}render(){const e=this.t("leave");return p(M,{label:e},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave",onClick:this.leave,icon:this.iconPack.call_end,label:e,variant:this.variant}))}};vR.style=Sne;var Ene=Object.freeze({__proto__:null,dyte_leave_button:vR});const Tne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",yR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),U.activeLeaveConfirmation=!1},this.handleLeave=()=>{var t;(t=this.meeting)===null||t===void 0||t.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.roomName,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var t;(t=this.meeting)===null||t===void 0||t.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=z(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}meetingChanged(e){e!=null&&(this.canEndMeeting=e.self.permissions.kickParticipant,this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some(t=>t.id===e.meta.roomName),this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting)}render(){return p(M,null,p("div",{class:"leave-modal"},p("div",{class:"header"},p("h2",{class:"title"},this.t("leave"))),p("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),p("div",{class:"content"},p("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&p("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),p("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&p("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end_meeting_for_all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};yR.style=Tne;var kne=Object.freeze({__proto__:null,dyte_leave_meeting:yR});const Cne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;min-width:var(--dyte-space-14, 56px) !important;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",_R=class{constructor(e){V(this,e),this.setIsLivestreaming=t=>{this.isLivestreaming=t==="LIVESTREAMING"},this.meeting=void 0,this.size=void 0,this.t=z(),this.isLivestreaming=void 0,this.iconPack=$}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.livestream)===null||t===void 0||t.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(e){var t,i;e!=null&&(this.setIsLivestreaming((t=this.meeting.livestream)===null||t===void 0?void 0:t.state),(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(!(!js(this.meeting)||!this.isLivestreaming))return p(M,null,p("div",{class:"indicator","aria-label":this.t("This meeting is being livestreamed"),part:"indicator"},p("dyte-icon",{icon:this.iconPack.start_livestream}),"LIVE"))}static get watchers(){return{meeting:["meetingChanged"]}}};_R.style=Cne;var Pne=Object.freeze({__proto__:null,dyte_livestream_indicator:_R});const Rne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",bR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.dyteAPIError=Q(this,"dyteAPIError",7),this.livestreamStateListener=t=>{this.livestreamState=t,(t==="LIVESTREAMING"||t==="IDLE")&&(this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1)},this.isLoading=()=>this.meeting==null||this.livestreamState==="STARTING"||this.livestreamState==="STOPPING",this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(e){var t,i;e!=null&&(this.livestreamState=(t=this.meeting.livestream)===null||t===void 0?void 0:t.state,(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var e,t;if(this.livestreamState==="LIVESTREAMING")try{await((e=this.meeting.livestream)===null||e===void 0?void 0:e.stop())}catch{this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("Error while stopping livestream.")})}else try{await((t=this.meeting.livestream)===null||t===void 0?void 0:t.start())}catch{this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("Error while starting livestream.")})}}clearListeners(){var e;(e=this.meeting.livestream)===null||e===void 0||e.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("Go Live");case"LIVESTREAMING":return this.t("End Live");case"STARTING":return this.t("Starting");case"STOPPING":return this.t("Stopping");default:return this.t("Error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":return this.iconPack.start_livestream;case"LIVESTREAMING":return this.iconPack.stop_livestream;case"STARTING":case"STOPPING":default:return this.iconPack.stop_livestream}}render(){if(!!Yie(this.meeting))return p(M,null,p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":this.livestreamState==="LIVESTREAMING"},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};bR.style=Rne;var xne=Object.freeze({__proto__:null,dyte_livestream_toggle:bR});const Ane=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}",wR=class{constructor(e){V(this,e),this.meeting=void 0,this.iconPack=$,this.t=z()}render(){var e;const t=(e=this.meeting)===null||e===void 0?void 0:e.meta.meetingTitle;return t==null?null:p(M,{tabIndex:0,role:"banner","aria-label":t},p("dyte-tooltip",{label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},p("div",{class:"title",part:"title"},t)))}};wR.style=Ane;var Ine=Object.freeze({__proto__:null,dyte_meeting_title:wR});const One=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",SR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{t==="audio"&&(this.micPermission=i)},this.toggleMic=()=>{var t,i,r,n,s,a,o,c,d,l,u,g;if((t=this.meeting)===null||t===void 0||t.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.audioEnabled),permission:this.micPermission,canProduce:(a=(s=(n=this.meeting)===null||n===void 0?void 0:n.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceAudio}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((u=this.meeting)===null||u===void 0?void 0:u.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:f}),U.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceAudio||(m.audioEnabled?m.disableAudio():m.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c;(e=this.meeting)===null||e===void 0||e.self.removeListener("audioUpdate",this.audioUpdateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageJoined",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.canProduceAudio=t.permissions.produceAudio==="ALLOWED",this.updateCanProduce(e),this.micPermission=e.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=t.audioEnabled,t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStageLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceAudio==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,n&&!a?this.canProduceAudio=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceAudio=!0),t.permissions.canProduceAudio==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0))}hasPermissionError(){return this.micPermission==="DENIED"||this.micPermission==="SYSTEM_DENIED"}getState(){let e="",t="",i="",r={},n=this.hasPermissionError(),s=this.micPermission==="COULD_NOT_START";return this.audioEnabled&&!n?(t=this.t("mic_on"),i=this.iconPack.mic_on):(t=this.t("mic_off"),i=this.iconPack.mic_off,r["red-icon"]=!0),s?e=this.t("Unable to capture audio"):this.micPermission==="SYSTEM_DENIED"?e=this.t("perm_sys_denied"):this.micPermission==="DENIED"?e=this.t("perm_browser_denied"):e=this.audioEnabled?this.t("Disable Mic"):this.t("Enable Mic"),{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n||s,disable:n}}render(){if(!this.canProduceAudio)return null;const{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n,disable:s}=this.getState();return p(M,{title:t},p("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:r,onClick:this.toggleMic,showWarning:n,disabled:s})))}static get watchers(){return{meeting:["meetingChanged"]}}};SR.style=One;var Mne=Object.freeze({__proto__:null,dyte_mic_toggle:SR});const Lne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}",ER=class{constructor(e){V(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.gridSize=yw,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting.spotlight)===null||e===void 0||e.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)}meetingChanged(e){var t,i,r,n;e!=null&&(((t=e.spotlight)===null||t===void 0?void 0:t.selfActiveTab)!=null&&this.onSpotlightTabUpdate((i=e.spotlight.selfActiveTab)===null||i===void 0?void 0:i.type,(r=e.spotlight.selfActiveTab)===null||r===void 0?void 0:r.id),this.spotlightTabUpdateListener=s=>{this.onSpotlightTabUpdate(s==null?void 0:s.type,s==null?void 0:s.id)},(n=e.spotlight)===null||n===void 0||n.addListener("activeTabUpdate",this.spotlightTabUpdateListener))}screenShareParticipantsChanged(e=[]){!this.initialised&&this.activeTab!=null||(this.activeTab==null&&e.length>0?this.setActiveTab({type:"screenshare",participant:e[0]}):this.revalidateActiveTab())}pluginsChanged(e){if(!(!this.initialised&&this.activeTab!=null))if(e.length>0){const t=e.length-1;this.setActiveTab({type:"plugin",plugin:e[t]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(this.activeTab!=null)if(this.activeTab.type==="screenshare"){const{participant:e}=this.activeTab;this.screenShareParticipants.some(t=>t.id===e.id)||this.reassignActiveTab()}else{const{plugin:e}=this.activeTab;this.plugins.some(t=>t.id===e.id)||this.reassignActiveTab()}}setActiveTab(e,t=!0){var i;this.activeTab=e;const r=e.type==="screenshare"?e.participant.id:e.plugin.id;t&&((i=this.meeting.spotlight)===null||i===void 0||i.setSelfActiveTab({type:e.type,id:r},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const e=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[e]})}}onSpotlightTabUpdate(e,t){if(e!=null&&t!=null)switch(e){case"plugin":const i=this.plugins.find(n=>n.id===t);i!=null&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":const r=this.screenShareParticipants.find(n=>n.id===t);r!=null&&this.setActiveTab({type:"screenshare",participant:r},!1)}}getTabs(){const e=this.screenShareParticipants.map(i=>({type:"screenshare",participant:i})),t=this.plugins.map(i=>({type:"plugin",plugin:i}));return e.concat(t)}render(){var e;const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return p(M,null,p("main",{id:"main-view",part:"main-view"},((e=this.getTabs())===null||e===void 0?void 0:e.length)>1&&p("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:i=>this.setActiveTab(i.detail)},t)),p("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map(i=>{var r,n;return p($e,{element:"dyte-screenshare-view",defaults:t,props:{participant:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="screenshare"&&((n=this.activeTab)===null||n===void 0?void 0:n.participant.id)===i.id?"flex":"none"}},childProps:{participant:i,isScreenShare:!0},deepProps:!0})}),this.plugins.map(i=>{var r,n;return p($e,{element:"dyte-plugin-main",defaults:t,props:{plugin:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===i.id?"flex":"none"}}})}))),p($e,{element:"dyte-mixed-grid",defaults:t,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"sm",layout:"row"},onlyChildren:!0}))}get host(){return Ns(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};ER.style=Lne;var Dne=Object.freeze({__proto__:null,dyte_mixed_grid:ER});const Nne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",TR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!U.activeMoreMenu}),U.activeMoreMenu=!U.activeMoreMenu},this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z()}render(){const e=this.t("More"),t=this.states||U,i=(t==null?void 0:t.activeMoreMenu)===!0?this.iconPack.chevron_down:this.iconPack.chevron_up;return p(M,{title:e},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleMoreMenu(),icon:i,label:e,part:"controlbar-button"}))}};TR.style=Nne;var Une=Object.freeze({__proto__:null,dyte_more_toggle:TR});const jne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",kR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0})},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z()}render(){var e;if(!(!((e=this.meeting)===null||e===void 0)&&e.self.permissions.canAllowParticipantAudio))return null;const t=this.t("mute_all");return p(M,{title:t},p("dyte-tooltip",{kind:"block",label:t,part:"tooltip"},p("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}};kR.style=jne;var $ne=Object.freeze({__proto__:null,dyte_mute_all_button:kR});const Vne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.body{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}",CR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),U.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var t;(t=this.meeting)===null||t===void 0||t.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=z(),this.allowUnmute=!0}render(){return p(M,null,p("div",{class:"leave-modal"},p("div",{class:"header"},p("h2",{class:"title"},this.t("mute_all.header"))),p("p",{class:"message"},this.t("mute_all.description")),p("div",{class:"content"},p("div",{class:"leave-meeting"},p("dyte-button",{variant:"secondary",title:this.t("Close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),p("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};CR.style=Vne;var Fne=Object.freeze({__proto__:null,dyte_mute_all_confirmation:CR});const Bne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}",PR=class{constructor(e){V(this,e),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.maxLength=20,this.isScreenShare=!1,this.iconPack=$,this.t=z(),this.length=13}sizeChanged(e){this.length=e==="sm"?8:13}formatNameTag(e,t){return this.isScreenShare?t?`${this.t("Screen")} - ${tr(e,this.length-3)} (${this.t("you")})`:`${this.t("Screen")} - ${tr(e,this.length)}`:t?`${tr(e,this.length-3)} (${this.t("you")})`:tr(e,this.length)}render(){var e,t,i;const r=$r(((e=this.participant)===null||e===void 0?void 0:e.name)||""),n=((t=this.participant)===null||t===void 0?void 0:t.id)===((i=this.meeting)===null||i===void 0?void 0:i.self.id);return p(M,{title:r},p("slot",{name:"start"}),p("span",{class:"name"},this.formatNameTag(r,n)),p("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};PR.style=Bne;var zne=Object.freeze({__proto__:null,dyte_name_tag:PR});const Hne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}",RR=class{constructor(e){V(this,e),this.onMediaScoreUpdate=({kind:t,isScreenshare:i,score:r})=>{(t==="video"||this.isScreenShare&&i)&&(this.score=r)},this.participant=void 0,this.meeting=void 0,this.iconPack=$,this.t=z(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(e){!e||e.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var e;(e=this.participant)===null||e===void 0||e.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){if(this.meeting&&this.meeting.self.userId===this.participant.userId)return null;let e=Math.round(this.score/2),t="good";if(e>3)return null;switch(e<1&&(e=1),e){case 3:case 2:t="poor";break;case 1:t="poorest"}return p(M,null,p("dyte-icon",{icon:this.iconPack[`signal_${e}`],class:t}),p("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};RR.style=Hne;var Gne=Object.freeze({__proto__:null,dyte_network_indicator:RR}),_r;(function(e){e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"})(_r||(_r={}));const tp=console,Wne={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class qne{constructor(){this.audio=document.createElement("audio"),this.audio.volume=.3}play(t,i=3e3){var r;this.playing||(this.playing=!0,this.audio.src=Wne[t],this.audio.volume=.3,(r=this.audio.play())===null||r===void 0||r.catch(n=>{tp.error(`[dyte-notifications] play() failed
`,{sound:t,duration:i},n)}),setTimeout(()=>{this.playing=!1},i))}async setDevice(t){var i,r,n;await((n=(r=(i=this.audio)===null||i===void 0?void 0:i.setSinkId)===null||r===void 0?void 0:r.call(i,t))===null||n===void 0?void 0:n.catch(s=>{tp.error(`[dyte-notifications] setSinkId() error
`,s)}))}}const Rr=2e3,Xy=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:Rr,polls:Rr,webinar:Rr,tab_sync:Rr},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10}),Jne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";function Kne(e){const t=Object.assign({},Xy);return e==null||(Object.assign(t.notification_sounds,e.notification_sounds),Object.assign(t.notifications,e.notifications),Object.assign(t.notification_duration,e.notification_duration),t.participant_chat_message_sound_notification_limit=e.participant_chat_message_sound_notification_limit,t.participant_joined_sound_notification_limit=e.participant_joined_sound_notification_limit),t}function kT(e){return Object.keys(e).filter(t=>e[t])}const xR=class{constructor(e){V(this,e),this.permissions=Xy,this.enabledSounds=kT(Xy.notification_sounds),this.addStagePeersListeners=t=>{t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.meta.addListener("disconnected",this.networkDisconnectedListener),t.meta.addListener("connected",this.networkConnectedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=t=>{t.participants.joined.removeListener("participantJoined",this.participantJoinedListener),t.meta.removeListener("disconnected",this.networkDisconnectedListener),t.meta.removeListener("connected",this.networkConnectedListener),t.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:t,type:i})=>{if(i===_r.INCOMING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(t.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${r.name}`,duration:Rr})}if(i===_r.OUTGOING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(t.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has granted remote control.`,duration:Rr})}if(i===_r.REQUEST_RECEIVED){let r=this.meeting.participants.joined.get(t.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has requested for remote control.`,duration:Rr})}if((i===_r.INCOMING_REQUEST_ENDED||i===_r.OUTGOING_REQUEST_ENDED)&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:Rr}),i===_r.REQUEST_SENT){let r=this.meeting.participants.joined.get(t.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${r.name}`,duration:Rr})}},this.onDyteNotification=t=>{this.add(t.detail);const i=t.detail.playSound;i!=null&&this.audio.play(i)},this.onRecordingUpdate=t=>{t==="RECORDING"?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:Rr}):t==="STOPPING"&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:Rr})},this.meeting=void 0,this.states=void 0,this.config=ze,this.t=z(),this.size=void 0,this.iconPack=$,this.notifications=[]}connectedCallback(){typeof document<"u"&&(document==null||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(e){var t,i,r,n,s,a,o,c,d;const l=e.meta.viewType==="LIVESTREAM";(l&&((t=e.stage)===null||t===void 0?void 0:t.status)==="ON_STAGE"||!l)&&this.removeStagePeersListeners(e),this.chatUpdateListener&&((i=e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&((r=e.polls)===null||r===void 0||r.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&e.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&e.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&e.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&e.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&e.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&((n=e.stage)===null||n===void 0||n.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&((s=e.stage)===null||s===void 0||s.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&((a=e.stage)===null||a===void 0||a.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&((o=e.stage)===null||o===void 0||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),(c=e.remote)===null||c===void 0||c.removeListener("remoteUpdate",this.onRemoteUpdate),(d=e.recording)===null||d===void 0||d.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var e;typeof document<"u"&&(document==null||document.removeEventListener("dyteNotification",this.onDyteNotification)),this.meeting!=null&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.spotlightTabUpdateListener&&((e=this.meeting.spotlight)===null||e===void 0||e.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener))}meetingChanged(e,t){var i,r,n,s,a,o,c,d,l;if(clearTimeout(this.disconnectTimeout),t!==void 0&&this.clearListeners(t),e==null)return;const u=e.meta.viewType==="LIVESTREAM";this.audio=new qne;const{notifications:g,notification_duration:m,notification_sounds:f}=this.permissions;this.participantJoinedListener=S=>{g.participant_joined&&this.add({id:`${S.id}-joined`,message:`${$r(S.name)} just joined`,image:S.picture,duration:m.participant_joined}),f.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=S=>{g.participant_left&&this.add({id:`${S.id}-left`,message:`${$r(S.name)} left`,image:S.picture,duration:m.participant_left}),f.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=S=>{const y=`${S.id}-joined-waitlist`;this.add({id:y,message:`${$r(S.name)} is requesting to join the meeting`,image:S.picture,duration:m.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(S.id),this.remove(y)}}}),f.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:S})=>{const y=Y7(S);if(y!=null){if(y.userId===e.self.userId)return;y.type==="text"&&(g.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${y.displayName}: ${tr(y.message,20)}`,duration:m.chat}),f.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:S,newPoll:y})=>{y!==!1&&(g.polls&&this.meeting.self.userId!==S[S.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${S[S.length-1].createdBy}`,duration:m.polls}),f.polls&&this.meeting.self.userId!==S[S.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:S,preview:y})=>{y||(S.kind==="audiooutput"?(this.audio.setDevice(S.deviceId),this.add({id:`speaker-switched-${S.deviceId}`,message:`Connected to ${S.label}`,icon:this.iconPack.speaker,duration:5e3})):S.kind==="videoinput"?this.add({id:`camera-switched-${S.deviceId}`,message:`Connected to ${S.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${S.deviceId}`,message:`Connected to ${S.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{this.remove("network");let S;S=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("Connection lost. Trying to reconnect..."),duration:S}),this.disconnectTimeout=setTimeout(()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("Taking too long to reconnect..."),button:{text:this.t("End Meeting"),variant:"danger",onClick:()=>{var y;return(y=this.meeting)===null||y===void 0?void 0:y.leaveRoom()}}})},S)},this.networkConnectedListener=()=>{this.remove("network");let S;this.remove("network-lost"),S=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("Connection restored"),duration:S}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:S,attempt:y})=>{this.remove("socket"),S==="reconnected"?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("Connection restored"),duration:3e3})):S==="disconnected"?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("Connection lost"),duration:3e3}):S==="reconnecting"?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("Connection lost. Please check your network connection.")}):S==="reconnectFailure"?y>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("Taking too long to reconnect. Please check your network connection."),button:{text:this.t("End Meeting"),variant:"danger",onClick:()=>{var _;return(_=this.meeting)===null||_===void 0?void 0:_.leaveRoom()}}})):S==="failed"&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("Could not reconnect. Please leave the meeting and try refreshing the window.")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("Automatically leaving the meeting in 10 seconds.")}),setTimeout(()=>{var _;(_=this.meeting)===null||_===void 0||_.leaveRoom("disconnected")},1e4))},this.spotlightTabUpdateListener=S=>{if(!!g.tab_sync)switch(S.type){case"plugin":const y=e.plugins.active.toArray().find(T=>T.id==S.id);y!=null&&this.add({id:"spotlight",message:`Plugin switched to ${y.name}`,duration:m.participant_joined});break;case"screenshare":const _=e.participants.joined.toArray().filter(T=>T.screenShareEnabled).find(T=>T.id==S.id);_!=null&&this.add({id:"spotlight",message:`Now watching ${_.name}'s screen`,duration:m.webinar});break}},this.peerRequestToJoinStateListener=({id:S})=>{if(!g.webinar)return;const y=this.meeting.participants.joined.get(S);y!==void 0&&(this.add({id:`webinar-request-${S}`,message:`${y.name} is requesting to be on stage`,duration:m.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.participants.acceptAllRequestToJoinStageRequests([{id:S,requestToJoinType:"REQUEST_TO_PRESENT"}]),this.remove(`webinar-request-${S}`)}}}),f.webinar&&this.audio.play("joined"))},this.peerAcceptedToJoinStageListener=S=>{if(!g.webinar)return;const y=this.meeting.participants.joined.get(S.id);y!==void 0&&(this.add({id:`webinar-accepted-${S.id}`,message:`Approved ${y.name}'s request to join stage.`,duration:m.webinar}),f.webinar&&this.audio.play("joined"))},this.peerRejectedToJoinStageListener=S=>{if(!g.webinar)return;const y=this.meeting.participants.joined.get(S.id);y!==void 0&&this.add({id:`webinar-rejected-${S.id}`,message:`Rejected ${y.name}'s request to join stage.`,duration:m.webinar})},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:S})=>{this.add({id:"new-stage-request",message:`You have ${S} pending request${S===1?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=S=>{S==="ON_STAGE"?this.addStagePeersListeners(e):this.removeStagePeersListeners(e)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:S})=>this.socketUpdateListener({event:"reconnectFailure",attempt:S});const w=e.self.getCurrentDevices();w.speaker!=null&&this.audio.setDevice(w.speaker.deviceId),u?(i=e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(e),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.canAcceptWaitingRequests()&&e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),!wm(e)&&((r=e.chat)===null||r===void 0||r.addListener("chatUpdate",this.chatUpdateListener)),(n=e.polls)===null||n===void 0||n.addListener("pollsUpdate",this.pollUpdateListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener),e.meta.addListener("socketReconnected",this.socketReconnectedListener),e.meta.addListener("socketDisconnected",this.socketDisconnectedListener),e.meta.addListener("socketReconnecting",this.socketReconnectingListener),e.meta.addListener("socketFailure",this.socketFailureListener),e.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),(s=e.remote)===null||s===void 0||s.addListener("remoteUpdate",this.onRemoteUpdate),(a=e.spotlight)===null||a===void 0||a.addListener("activeTabUpdate",this.spotlightTabUpdateListener),(o=e.recording)===null||o===void 0||o.addListener("recordingUpdate",this.onRecordingUpdate),(c=e.stage)===null||c===void 0||c.addListener("stageRequestApproved",this.stageRequestAccepted),(d=e.stage)===null||d===void 0||d.addListener("stageRequestRejected",this.stageRequestRejected),e.self.permissions.acceptPresentRequests&&((l=e.stage)===null||l===void 0||l.addListener("newStageRequest",this.newStageRequests))}configChanged(e){e!=null&&(e==null?void 0:e.config)!=null&&(this.permissions=Kne(e.config),this.enabledSounds=kT(this.permissions.notification_sounds))}statesChanged(e){var t;if(e!=null){const i=!(!((t=e==null?void 0:e.prefs)===null||t===void 0)&&t.muteNotificationSounds);for(const r of this.enabledSounds)r in this.permissions.notification_sounds&&(this.permissions.notification_sounds[r]=i)}}apiErrorListener({detail:e}){const{trace:t,message:i}=e;this.add({id:t,message:i,duration:Rr,icon:this.iconPack.warning})}add(e){document.visibilityState==="visible"&&this.notifications.length<5&&(this.notifications=[...this.notifications,e])}remove(e){this.notifications=this.notifications.filter(t=>t.id!==e)}handleDismiss(e){e.stopPropagation();const t=e.detail,i=this.host.shadowRoot.querySelector(`[data-id="${t}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{bn(()=>{this.remove(t)})},400)}canPlayParticipantJoinedSound(){return this.permissions.participant_joined_sound_notification_limit==null||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return this.permissions.participant_chat_message_sound_notification_limit==null||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return p(M,null,this.notifications.map(e=>p("dyte-notification",{size:this.size,key:e.id,"data-id":e.id,notification:e,onDyteNotificationDismiss:t=>this.handleDismiss(t),iconPack:this.iconPack,t:this.t})))}get host(){return Ns(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};xR.style=Jne;var Zne=Object.freeze({__proto__:null,dyte_notifications:xR});const Qne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",AR=class{constructor(e){V(this,e),this.disconnectMeeting=t=>{t!=null&&this.countListener!=null&&(t.participants.joined.removeListener("participantJoined",this.countListener),t.participants.joined.removeListener("participantLeft",this.countListener))},this.meeting=void 0,this.iconPack=$,this.t=z(),this.participantCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){this.disconnectMeeting(t),e!=null&&(this.countListener=()=>{this.participantCount=e.participants.joined.size+(e.self.roomJoined?1:0)},this.countListener(),e.participants.joined.addListener("participantJoined",this.countListener),e.participants.joined.addListener("participantLeft",this.countListener))}render(){return If(this.meeting)?null:p(M,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},p("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};AR.style=Qne;var Yne=Object.freeze({__proto__:null,dyte_participant_count:AR});const Xne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}",IR=class{constructor(e){V(this,e),this.onVideoUpdate=t=>{this.videoState=t},this.onPinned=({isPinned:t})=>{this.isPinned=t},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=ze,this.variant="solid",this.size=void 0,this.iconPack=$,this.t=z()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned))}async participantsChanged(e){e!=null&&(this.videoState={videoEnabled:e.videoEnabled,videoTrack:e.videoTrack},this.isPinned=e.isPinned,e.addListener("videoUpdate",this.onVideoUpdate),e.addListener("pinned",this.onPinned),e.addListener("unpinned",this.onPinned))}videoStateChanged(e){if(e!=null&&this.videoEl!=null)if(e.videoEnabled){const t=new MediaStream;t.addTrack(e.videoTrack),this.videoEl.srcObject=t}else this.videoEl.srcObject=void 0}isMirrored(){var e;if(this.participant!=null&&("preview"in this.participant||this.isPreview)){const i=this.states||U,r=(e=i==null?void 0:i.prefs)===null||e===void 0?void 0:e.mirrorVideo;if(typeof r=="boolean")return r}return!1}render(){var e,t,i,r;return p(M,null,p("video",{ref:n=>this.videoEl=n,class:{visible:(e=this.videoState)===null||e===void 0?void 0:e.videoEnabled,mirror:this.isMirrored(),[(r=(i=(t=this.config)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&p("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("Pinned"),iconPack:this.iconPack,t:this.t}),p("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};IR.style=Xne;var ese=Object.freeze({__proto__:null,dyte_participant_setup:IR});const tse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}`,OR=class{constructor(t){V(this,t),this.onSearchInput=i=>{this.search=i.target.value},this.meeting=void 0,this.states=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.t=z(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting!=null}meetingChanged(t){t!=null}render(){const t={meeting:this.meeting,states:this.states||U,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return p(M,null,p("div",{class:"search",part:"search"},p("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),p("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),p("div",{class:"ctr scrollbar",part:"container"},p($e,{element:"dyte-participants-waiting-list",defaults:t}),p($e,{element:"dyte-participants-stage-queue",defaults:t}),p($e,{element:"dyte-participants-stage-list",defaults:t,props:{search:this.search}}),p($e,{element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search}})))}static get watchers(){return{meeting:["meetingChanged"]}}};OR.style=tse;var ise=Object.freeze({__proto__:null,dyte_participants:OR});class rse{constructor(){this.audio=document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(t,i){this.audioTracks.some(r=>r.id===t)||(this.audioTracks.push({id:t,track:i}),this.audioStream.addTrack(i),this.play())}removeTrack(t){const i=this.audioTracks.find(r=>r.id===t);i!=null&&(this.audioStream.removeTrack(i.track),this.audioTracks=this.audioTracks.filter(r=>r.id!==t))}async play(){var t;this.audio.srcObject=this.audioStream,await((t=this.audio.play())===null||t===void 0?void 0:t.catch(i=>{i.name==="NotAllowedError"?this._onError!=null&&this._onError():i.name!=="AbortError"&&tp.error(`[dyte-audio] play() error
`,i)}))}async setDevice(t){var i,r,n;await((n=(r=(i=this.audio).setSinkId)===null||r===void 0?void 0:r.call(i,t))===null||n===void 0?void 0:n.catch(s=>{tp.error(`[dyte-audio] setSinkId() error
`,s)}))}onError(t){this._onError=t}}const nse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}",MR=class{constructor(e){V(this,e),this.dialogClose=Q(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=$,this.t=z(),this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.meeting!=null&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&((e=this.meeting.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}handleAudioError(){this.audio=new rse,this.audio.onError(()=>{this.showPlayDialog=!0}),this.audio.play()}async meetingChanged(e){var t;if(e!=null){e.meta.viewType==="LIVESTREAM"&&e.stage.status!=="ON_STAGE"?(this.stageStatusUpdateListener=r=>{r==="ON_STAGE"&&this.handleAudioError()},(t=e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.stageStatusUpdateListener)):this.handleAudioError();const i=e.self.getCurrentDevices();i.speaker!=null&&await this.audio.setDevice(i.speaker.deviceId),this.audioUpdateListener=({id:r,audioEnabled:n,audioTrack:s})=>{const a=`audio-${r}`;n&&s!=null?this.audio.addTrack(a,s):this.audio.removeTrack(a)};{const r=e.participants.joined.toArray();for(const n of r)this.audioUpdateListener(n)}this.participantLeftListener=({id:r})=>{this.audio.removeTrack(`audio-${r}`),this.audio.removeTrack(`screenshare-${r}`)},this.screenShareUpdateListener=({id:r,screenShareEnabled:n,screenShareTracks:s})=>{const a=`screenshare-${r}`;n&&s.audio!=null?this.audio.addTrack(a,s.audio):this.audio.removeTrack(a)},this.deviceUpdateListener=({device:r,preview:n})=>{n||r.kind==="audiooutput"&&this.audio.setDevice(r.deviceId)},e.participants.joined.addListener("audioUpdate",this.audioUpdateListener),e.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener)}}render(){return p(M,null,this.showPlayDialog&&p("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},p("div",{class:"modal"},p("h3",null,this.t("audio_playback.title")),p("p",null,this.t("audio_playback.description")),p("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};MR.style=nse;var sse=Object.freeze({__proto__:null,dyte_participants_audio:MR});const ase=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}",LR=class{constructor(e){V(this,e),this.updateParticipants=()=>{this.getParticipants(this.search)},this.shouldShowStageList=()=>{var t,i,r;((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="LIVESTREAM"?this.showStageList=((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE":this.showStageList=!0},this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.view="sidebar",this.t=z(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){var e,t;const{participants:i,self:r}=this.meeting;this.meeting!=null&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),i.joined.removeListener("peerStartedPresenting",this.updateParticipants),i.joined.removeListener("peerStoppedPresenting",this.updateParticipants),r.removeListener("stageJoined",this.updateParticipants),r.removeListener("stageLeft",this.updateParticipants),r.removeListener("removedFromStage",this.updateParticipants),(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.shouldShowStageList))}meetingChanged(e){var t;e!=null&&(this.participantJoinedListener=i=>{if(this.meeting.meta.viewType==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE")return;const r=this.search.toLowerCase();!i.name.toLowerCase().includes(r)||!i.id.toLowerCase().includes(r)||(this.participants=[...this.participants.filter(n=>n.id!==i.id),i])},this.participantLeftListener=i=>{this.participants=this.participants.filter(r=>r.id!==i.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateParticipants),e.participants.joined.addListener("peerStoppedPresenting",this.updateParticipants),e.self.addListener("stageJoined",this.updateParticipants),e.self.addListener("stageLeft",this.updateParticipants),e.self.addListener("removedFromStage",this.updateParticipants),this.shouldShowStageList(),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.shouldShowStageList))}searchChanged(e){this.getParticipants(e)}getParticipants(e){let t=[this.meeting.self,...this.meeting.participants.joined.toArray()];this.meeting.meta.viewType==="WEBINAR"&&(t=t.filter(i=>i.webinarStageStatus==="ON_STAGE")),e===""?this.participants=t:this.participants=t.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!!this.showStageList)return p(M,null,p("div",{class:"participants-container"},p("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),p("ul",{class:"participants",part:"participants"},this.participants.map(e=>p("dyte-participant",{role:"listitem",key:e.id,meeting:this.meeting,participant:e,view:this.view,t:this.t,iconPack:this.iconPack})),this.participants.length===0&&p("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("Couldn't find a participant with the specified name or ID."):this.t("It looks like nobody is here.")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};LR.style=ase;var ose=Object.freeze({__proto__:null,dyte_participants_stage_list:LR});const cse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",DR=class{constructor(e){V(this,e),this.peerPresentingUpdateListener=()=>{this.stageRequestedParticipants=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(t=>t.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(t=>t.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.acceptStageRequest=async t=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=t,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.acceptJoinStageRequest(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=t;await this.meeting.stage.grantAccess([i])}},this.rejectStageRequest=async t=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=t,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.rejectRequestToJoinStage(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=t;await this.meeting.stage.denyAccess([i])}},this.acceptAllStageRequest=async()=>{if(this.meeting.meta.viewType==="WEBINAR"){const t=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE").map(i=>({id:i.id,requestToJoinType:"REQUEST_TO_PRESENT"}));await this.meeting.participants.acceptAllRequestToJoinStageRequests(t),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map(t=>t.userId))},this.denyAllStageRequest=async()=>{var t;if(this.meeting.meta.viewType==="WEBINAR"){const i=this.meeting.participants.joined.toArray().filter(r=>r.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE");await Promise.all(i.map(async r=>await r.rejectRequestToJoinStage())),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await((t=this.meeting.stage)===null||t===void 0?void 0:t.denyAccess(this.stageRequestedParticipants.map(i=>i.userId)))},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var i,r,n,s;this.meeting.meta.viewType==="WEBINAR"?this.stageRequestedParticipants=(i=[this.meeting.self,...this.meeting.participants.joined.toArray()])===null||i===void 0?void 0:i.filter(a=>a.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"):this.meeting.meta.viewType==="LIVESTREAM"&&(t||(t=(s=(n=await((r=this.meeting.stage)===null||r===void 0?void 0:r.getAccessRequests()))===null||n===void 0?void 0:n.stageRequests)!==null&&s!==void 0?s:[]),this.stageRequestedParticipants=t.map(a=>Object.assign(Object.assign({},a),{name:a.displayName})))},this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.view="sidebar",this.t=z(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:e,self:t}=this.meeting;this.participantLeftListener&&e.joined.removeListener("participantLeft",this.participantLeftListener),this.peerRequestToJoinStageListener&&e.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),this.peerAcceptedToJoinStageListener&&e.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&e.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.joined.removeListener("peerStartedPresenting",this.peerPresentingUpdateListener),e.joined.removeListener("peerStoppedPresenting",this.peerPresentingUpdateListener),t.removeListener("stageJoined",this.peerPresentingUpdateListener),t.removeListener("stageLeft",this.peerPresentingUpdateListener),t.removeListener("removedFromStage",this.peerPresentingUpdateListener)}meetingChanged(e){var t;e!=null&&(this.participantLeftListener=i=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!==i.id)},this.peerRequestToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(n=>n.id!=i);const r=e.participants.joined.get(i);r!==void 0&&(this.stageRequestedParticipants=[...this.stageRequestedParticipants,r])},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.updateRequestList(),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.participants.joined.addListener("peerStartedPresenting",this.peerPresentingUpdateListener),e.participants.joined.addListener("peerStoppedPresenting",this.peerPresentingUpdateListener),(t=e.stage)===null||t===void 0||t.on("stageAccessRequestUpdate",this.updateRequestList),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.self.addListener("stageJoined",this.peerPresentingUpdateListener),e.self.addListener("stageLeft",this.peerPresentingUpdateListener),e.self.addListener("removedFromStage",this.peerPresentingUpdateListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowStageRequests()))return p("div",{class:"stage-requested-participants"},p("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),p("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map(e=>p("li",{class:"waiting-participant",key:e.id},p("div",{class:"participant-details"},p("dyte-avatar",{participant:e,size:"sm",iconPack:this.iconPack,t:this.t}),p("p",{class:"name",title:e.name},e.name)),p("div",{class:"waitlist-controls"},p("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(e),iconPack:this.iconPack,t:this.t},p("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),p("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(e)},p("dyte-icon",{class:"accept",icon:this.iconPack.checkmark}))))))),p("div",{class:"bulk-actions"},p("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),p("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};DR.style=cse;var dse=Object.freeze({__proto__:null,dyte_participants_stage_queue:DR});const lse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}",NR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.updateStageRequests=async t=>{var i,r,n;t||(t=(n=(r=await((i=this.meeting.stage)===null||i===void 0?void 0:i.getAccessRequests()))===null||r===void 0?void 0:r.stageRequests)!==null&&n!==void 0?n:[]),this.stageRequestedParticipants=t},this.updateCanView=()=>{this.canViewParticipants=Qy(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),tl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i;this.meeting!=null&&((t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener),(i=this.meeting.stage)===null||i===void 0||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests))}meetingChanged(e){var t;e!=null&&(this.canViewParticipants=Qy(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView),e.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=e.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=i=>{this.waitlistedParticipants.some(r=>r.id===i.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,i])},this.waitlistedParticipantLeftListener=i=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(r=>r.id!==i.id)},e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),e.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.acceptPresentRequests&&(this.meeting.meta.viewType==="WEBINAR"&&(this.peerRequestToJoinStateListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(n=>n.id!=i);const r=e.participants.joined.get(i);r!==void 0&&this.stageRequestedParticipants.push(r)},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener)),this.meeting.meta.viewType==="LIVESTREAM"&&(this.updateStageRequests(),e==null||e.stage.on("stageAccessRequestUpdate",this.updateStageRequests))))}statesChanged(e){const t=e||U;t!=null&&(this.participantsActive=t.activeSidebar===!0&&t.sidebar==="participants")}toggleParticipantsTab(){const e=this.states||U;this.participantsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="participants"),U.activeSidebar=this.participantsActive,U.sidebar=this.participantsActive?"participants":"none",this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":"none",activeMoreMenu:!1,activeAI:!1}),U.activeMoreMenu=!1}render(){if(!this.canViewParticipants)return;const e=this.t("participants"),t=this.waitlistedParticipants.length+this.stageRequestedParticipants.length;return p(M,{title:e},t!==0&&!this.participantsActive&&p("div",{class:"waiting-participants-count",part:"waiting-participants-count"},p("span",null,t<=100?t:"99+")),p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};NR.style=lse;var use=Object.freeze({__proto__:null,dyte_participants_toggle:NR});const pse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",UR=class{constructor(e){V(this,e),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>this.meeting.meta.viewType==="WEBINAR",this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.view="sidebar",this.search="",this.t=z(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(e){e!=null&&(this.participantJoinedListener=t=>{if(t.webinarStageStatus==="ON_STAGE")return;const i=this.search.toLowerCase();!t.name.toLowerCase().includes(i)||!t.id.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter(r=>r.id!==t.id),t])},this.participantLeftListener=t=>{this.stageViewers=this.stageViewers.filter(i=>i.id!==t.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateStageViewers),e.participants.joined.addListener("peerStoppedPresenting",this.updateStageViewers),e.self.addListener("stageJoined",this.updateStageViewers),e.self.addListener("stageLeft",this.updateStageViewers),e.self.addListener("removedFromStage",this.updateStageViewers))}searchChanged(e){this.getViewers(e)}disconnectedCallback(){const{participants:e,self:t}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),e.joined.removeListener("peerStartedPresenting",this.updateStageViewers),e.joined.removeListener("peerStoppedPresenting",this.updateStageViewers),t.removeListener("stageJoined",this.updateStageViewers),t.removeListener("stageLeft",this.updateStageViewers),t.removeListener("removedFromStage",this.updateStageViewers)}getViewers(e){let t=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(i=>i.webinarStageStatus!=="ON_STAGE");e===""?this.stageViewers=t:this.stageViewers=t.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!(this.view!=="sidebar"||!this.shouldShowViewers()))return p("div",{class:"list"},p("div",{class:"heading-count",part:"heading-count"},this.t("Viewers")," (",this.stageViewers.length,")"),p("ul",{class:"participants",part:"participants"},this.stageViewers.map(e=>{if(e.webinarStageStatus!=="ON_STAGE")return p("dyte-participant",{role:"listitem",key:e.id,meeting:this.meeting,participant:e,view:this.view,iconPack:this.iconPack,t:this.t})}),this.stageViewers.length===0&&p("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("Couldn't find a viewer with the specified name or ID."):this.t("It looks like nobody is here."))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};UR.style=pse;var hse=Object.freeze({__proto__:null,dyte_participants_viewer_list:UR});const gse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",jR=class{constructor(e){V(this,e),this.acceptWaitingRoomRequest=async t=>{await this.meeting.participants.acceptWaitingRoomRequest(t)},this.acceptAllWaitingRoomRequests=async()=>{const t=this.waitlistedParticipants.map(i=>this.meeting.participants.acceptWaitingRoomRequest(i.id));await Promise.all(t)},this.rejectWaitingRoomRequest=async t=>{await this.meeting.participants.rejectWaitingRoomRequest(t)},this.shouldShowWaitlist=()=>this.meeting.meta.viewType==="LIVESTREAM"?!1:this.meeting.self.permissions.acceptWaitingRequests&&this.waitlistedParticipants.length!==0,this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.view="sidebar",this.t=z(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:e}=this.meeting;this.waitlistedParticipantJoinedListener&&e.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&e.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){e!=null&&(this.waitlistedParticipants=e.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=t=>{this.waitlistedParticipants.some(i=>i.id===t.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,t])},this.waitlistedParticipantLeftListener=t=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(i=>i.id!==t.id)},e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),e.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowWaitlist()))return p("div",{class:"waiting-participants"},p("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),p("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map(e=>p("li",{class:"waiting-participant",key:e.id},p("div",{class:"participant-details"},p("dyte-avatar",{participant:e,size:"sm",iconPack:this.iconPack,t:this.t}),p("p",{class:"name",title:e.name},e.name)),p("div",{class:"waitlist-controls"},p("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(e.id)},p("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),p("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(e.id)},p("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}))))))),p("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};jR.style=gse;var mse=Object.freeze({__proto__:null,dyte_participants_waiting_list:jR});const fse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;width:560px;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}",$R=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),U.activePermissionsMessage={enabled:!1}},this.reload=()=>{typeof window<"u"&&window.location.reload()},this.meeting=void 0,this.t=z(),this.iconPack=$,this.states=void 0,this.device=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){e!=null&&(this.device=e.self.device)}getLink(e){let t;switch(e){case"audio":t="microphone";break;case"video":t="camera";break;default:t="screenshare";break}const i="https://www.google.com/search?q=";let r=`Allow+${t}+access`;if(this.device!=null){const{browserName:n,isMobile:s}=this.device;r+="+"+n,s&&(r+="+mobile")}return i+r}isDeniedBySystem(){var e;const t=(e=this.meeting)===null||e===void 0?void 0:e.self.mediaPermissions;return t==null?!1:!!Object.values(t).includes("SYSTEM_DENIED")}render(){var e,t,i,r,n,s,a,o,c,d,l,u;const g=this.isDeniedBySystem();return p(M,null,p("h2",null,p("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),g?this.t(`perm_sys_denied.${(i=(t=(e=this.states)===null||e===void 0?void 0:e.activePermissionsMessage)===null||t===void 0?void 0:t.kind)!==null&&i!==void 0?i:"audio"}`):this.t(`perm_denied_title.${(s=(n=(r=this.states)===null||r===void 0?void 0:r.activePermissionsMessage)===null||n===void 0?void 0:n.kind)!==null&&s!==void 0?s:"audio"}`)),p("p",null,this.t(`perm_denied_text.${(c=(o=(a=this.states)===null||a===void 0?void 0:a.activePermissionsMessage)===null||o===void 0?void 0:o.kind)!==null&&c!==void 0?c:"audio"}`)),g&&p("p",null,this.t("perm.sys_denied.message")),!g&&p("a",{class:"need-help-link",href:this.getLink((u=(l=(d=this.states)===null||d===void 0?void 0:d.activePermissionsMessage)===null||l===void 0?void 0:l.kind)!==null&&u!==void 0?u:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},p("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("Need help on how to do this?")),p("div",{class:"actions"},p("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("Continue as it is")),p("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("Reload"))),p("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};$R.style=fse;var vse=Object.freeze({__proto__:null,dyte_permissions_message:$R});const yse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",VR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=ze,this.iconPack=$,this.size=void 0,this.t=z(),this.pipEnabled=!1,this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){}statesChanged(e){const t=e||U;(t==null?void 0:t.activePipMode)!=null&&(this.pipEnabled=t.activePipMode)}meetingChanged(e){var t;if(e===null)return;this.pipSupported=mt.isSupported()&&((t=e.self.config)===null||t===void 0?void 0:t.pipMode);const i=this.states||U;this.pipEnabled=i.activePipMode}togglePip(){const e=this.states||U,{activePipMode:t}=e;t!==!0?(mt.updateMediaSession(Yi.CAMERA,this.meeting.self.videoEnabled),mt.updateMediaSession(Yi.MIC,this.meeting.self.audioEnabled),mt.enable(),this.stateUpdate.emit({activePipMode:!0})):(mt.disable(),this.stateUpdate.emit({activePipMode:!1})),this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1}render(){if(!!this.pipSupported)return p(M,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:this.pipEnabled?this.iconPack.pip_on:this.iconPack.pip_off,label:this.pipEnabled?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{states:["statesChanged"],meeting:["meetingChanged"]}}};VR.style=yse;var _se=Object.freeze({__proto__:null,dyte_pip_toggle:VR});const bse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}",FR=class{constructor(e){V(this,e),this.meeting=void 0,this.plugin=void 0,this.iconPack=$,this.t=z(),this.canClosePlugin=!1,this.canControl=!0,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(e){var t;if(e!=null){const i=e.self.permissions,r=i.isV2?i.plugins.canEditConfig:i.plugins.canEditAcl;if(i.plugins.config!==void 0){Object.keys(i.plugins.config||{}).forEach(a=>{i.plugins.config[a.toLowerCase()]=i.plugins.config[a]});const n=this.plugin.id.replace(new RegExp("-","g"),""),s=(((t=i.plugins.config[n])===null||t===void 0?void 0:t.defaultAccess)||"blacklist")==="whitelist";this.plugin.enabledBy===e.self.userId||r?this.canControl=!0:s&&(this.canControl=!1),this.viewModeEnabled=!this.canControl}bn(()=>{this.canClosePlugin=e.self.permissions.plugins.canClose})}}pluginChanged(e){this.toggleViewModeListener=t=>{this.viewModeEnabled=t},e!=null&&(e.addPluginView(this.iframeEl),e.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var e;(e=this.plugin)===null||e===void 0||e.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return this.plugin==null?null:p(M,null,p("header",{part:"header"},p("div",null,this.plugin.name),this.canClosePlugin&&p("div",null,p("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),p("div",{class:"iframe-container"},!this.canControl&&(this.viewModeEnabled?p("div",{class:"block-inputs"}):null),p("iframe",{ref:e=>this.iframeEl=e,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};FR.style=bse;var wse=Object.freeze({__proto__:null,dyte_plugin_main:FR});const Sse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}`,BR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:"none"}),U.activeSidebar=!1,U.sidebar="none"},this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.t=z(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugin=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting)===null||e===void 0||e.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(e){e!=null&&(this.canStartPlugins=e.self.permissions.plugins.canStart,this.canClosePlugin=e.self.permissions.plugins.canClose,this.plugins=e.plugins.all.toArray().filter(t=>{var i;return!(!((i=e.self.config.disabledPlugins)===null||i===void 0)&&i.includes(t.id))}),this.updateActivePlugins=()=>{this.activatedPluginsId=e.plugins.active.toArray().map(t=>t.id)},this.updateActivePlugins(),e.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return p(M,null,p("ul",{class:"scrollbar"},this.plugins.map(e=>p("li",{key:e.name,class:"plugin"},p("div",{class:"metadata"},p("img",{src:e.picture}),p("div",{class:"name"},e.name)),!this.activatedPluginsId.includes(e.id)&&this.canStartPlugins&&p("div",{class:"buttons"},p("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{e.activate(),this.close()},"aria-label":`${this.t("Activate")} ${e.name}`},p("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(e.id)&&this.canClosePlugin&&p("div",{class:"buttons"},p("dyte-button",{kind:"icon",size:"lg",onClick:()=>{e.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("Close")} ${e.name}`},p("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};BR.style=Sse;var Ese=Object.freeze({__proto__:null,dyte_plugins:BR});const Tse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",zR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=Yy(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),tl("sidebar",()=>this.statesChanged())}meetingChanged(e){var t;e!=null&&(this.canViewPlugins=Yy(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||U;t!=null&&(this.pluginsActive=t.activeSidebar===!0&&t.sidebar==="plugins")}togglePlugins(){const e=this.states||U;this.pluginsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="plugins"),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":"none",activeMoreMenu:!1,activeAI:!1}),U.activeSidebar=this.pluginsActive,U.sidebar=this.pluginsActive?"plugins":"none",U.activeMoreMenu=!1}render(){if(!this.canViewPlugins)return;const e=this.t("plugins");return p(M,{title:e},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};zR.style=Tse;var kse=Object.freeze({__proto__:null,dyte_plugins_toggle:zR});const Cse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}`,HR=class{constructor(t){V(this,t),this.onPollsUpdate=i=>{this.polls=[...i.polls]},this.meeting=void 0,this.config=ze,this.size=void 0,this.iconPack=$,this.t=z(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.meeting!=null&&((t=this.meeting.polls)===null||t===void 0||t.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(t){t!=null&&(t&&!t.polls||(this.polls=[...t.polls.items],t.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async i=>{this.create=!1,await t.polls.create(i.question,i.options,i.anonymous,i.hideVotes)},this.onVote=async(i,r)=>{await t.polls.vote(i,r)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){xa(this.pollEl)}render(){return p(M,null,p("div",{class:"ctr",part:"container"},p("div",{class:"polls-view scrollbar",ref:t=>this.pollEl=t,part:"polls"},this.polls.map(t=>{var i;return p("dyte-poll",{key:t.id,poll:t,onDyteVotePoll:r=>{this.onVote(r.detail.id,r.detail.index)},self:(i=this.meeting)===null||i===void 0?void 0:i.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})}),this.create&&p("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:t=>{this.onCreate(t.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&p("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("Cancel Poll Creation"):this.t("Create New Poll"))))}static get watchers(){return{meeting:["meetingChanged"]}}};HR.style=Cse;var Pse=Object.freeze({__proto__:null,dyte_polls:HR});const Rse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",GR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:t})=>{t===!0&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=Zy(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),tl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i;(e=this.meeting.polls)===null||e===void 0||e.removeListener("pollsUpdate",this.onPollsUpdate),(i=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(e){var t;e&&e.polls&&(this.unreadPollsCount=e.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),this.canViewPolls=Zy(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||U;t!=null&&(this.pollsActive=t.activeSidebar===!0&&t.sidebar==="polls")}togglePollsTab(){const e=this.states||U;this.unreadPollsCount=0,this.pollsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="polls"),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":"none",activeMoreMenu:!1,activeAI:!1}),U.activeSidebar=this.pollsActive,U.sidebar=this.pollsActive?"polls":"none",U.activeMoreMenu=!1}render(){if(!this.canViewPolls)return;const e=this.t("polls");return p(M,{title:e},this.unreadPollsCount!==0&&!this.pollsActive&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};GR.style=Rse;var xse=Object.freeze({__proto__:null,dyte_polls_toggle:GR});const Ase=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",WR=class{constructor(e){V(this,e),this.setIsRecording=t=>{this.isRecording=t==="RECORDING"},this.meeting=void 0,this.size=void 0,this.t=z(),this.iconPack=$,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting)===null||e===void 0||e.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(e){e!=null&&(this.setIsRecording(e.recording.recordingState),this.updateRecordingStatus=t=>{this.setIsRecording(t)},e.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return p(M,null,this.isRecording&&p("div",{class:"indicator","aria-label":this.t("This meeting is being recorded"),part:"indicator"},p("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),p("span",null,this.t("REC"))))}static get watchers(){return{meeting:["meetingChanged"]}}};WR.style=Ase;var Ise=Object.freeze({__proto__:null,dyte_recording_indicator:WR});const Ose=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",qR=class{constructor(e){V(this,e),this.dyteAPIError=Q(this,"dyteAPIError",7),this.toggleRecording=async()=>{var t,i;if(!(this.isLoading()||this.disabled))switch(this.recordingState){case"IDLE":try{await((t=this.meeting)===null||t===void 0?void 0:t.recording.start());return}catch{this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("Error while starting recording.")})}return;case"RECORDING":try{await((i=this.meeting)===null||i===void 0?void 0:i.recording.stop());return}catch{this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("Error while stopping recording.")})}return;case"STARTING":case"STOPPING":default:return}},this.isLoading=()=>this.meeting==null||this.recordingState==="STARTING"||this.recordingState==="STOPPING",this.variant="button",this.meeting=void 0,this.t=z(),this.iconPack=$,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.recordingStateUpdateListener&&((e=this.meeting)===null||e===void 0||e.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener))}meetingChanged(e){e!=null&&(this.recordingState=e.recording.recordingState,this.canRecord=e.self.permissions.canRecord===!0,this.recordingStateUpdateListener=t=>{this.recordingState=t},e.recording.addListener("recordingUpdate",this.recordingStateUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return this.t("Record");case"RECORDING":return this.t("Stop Recording");case"STARTING":return this.t("Starting");case"STOPPING":return this.t("Stopping");default:return this.t("Loading")}}getIcon(){switch(this.recordingState){case"IDLE":return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording;case"STARTING":case"STOPPING":default:return this.iconPack.recording}}render(){if(!!this.canRecord)return p(M,{title:this.t("Record")},p("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};qR.style=Ose;var Mse=Object.freeze({__proto__:null,dyte_recording_toggle:qR});const Lse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3,p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}h3{margin-bottom:var(--dyte-space-4, 16px);font-size:20px;line-height:1.5}p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}p.empty-message{text-align:center;font-size:16px}label>input{margin-right:var(--dyte-space-2, 8px)}input{background-color:transparent;accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}#allow-requests-label{display:flex;align-items:center;font-size:12px}#actions{margin-top:var(--dyte-space-4, 16px);display:flex;align-items:center}dyte-button{flex:1 1 0%;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px}#participants-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-56, 224px);overflow-y:auto}.participant{box-sizing:border-box;display:flex;height:var(--dyte-space-14, 56px);align-items:center;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.participant:last-child{border-bottom-width:var(--dyte-border-width-none, 0)}.participant{cursor:pointer;font-size:14px}.participant input{margin-right:var(--dyte-space-3, 12px)}dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,JR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.acceptedRequestId=void 0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z()}disconnectedCallback(){}meetingChanged(e){var t,i,r,n,s;e!=null&&!Boolean(this.acceptedRequestId)&&Boolean((r=(i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0?void 0:i.active)===null||r===void 0?void 0:r.id)&&(this.acceptedRequestId=(s=(n=this.meeting.remote)===null||n===void 0?void 0:n.active)===null||s===void 0?void 0:s.id)}render(){var e,t,i,r;return Boolean((t=(e=this===null||this===void 0?void 0:this.meeting)===null||e===void 0?void 0:e.remote)===null||t===void 0?void 0:t.incomingRequests.toArray().length)?p(M,null,p("h3",null,this.t("The following people have requested remote control to your screen share")),p("p",null,this.t("Please select whom you want to give access to")),p("div",{class:"scrollbar"},(r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.incomingRequests.toArray().map(n=>{const s=this.meeting.participants.joined.get(n.remotePeerId);return p("label",{onClick:()=>{this.acceptedRequestId=n.id},class:"participant",htmlFor:s.id},p("input",{type:"radio",checked:this.acceptedRequestId===n.id,name:"remote-access-participant",value:n.id}),p("dyte-avatar",{participant:s,size:"sm"}),s.name)})),p("div",{id:"actions"},p("dyte-button",{disabled:!Boolean(this.acceptedRequestId),iconPack:this.iconPack,t:this.t,onClick:()=>{var n,s;(s=(n=this.meeting)===null||n===void 0?void 0:n.remote)===null||s===void 0||s.acceptControl(this.acceptedRequestId),this.stateUpdate.emit({activeRemoteAccessManager:!1})}},this.t("Grant access")))):p(M,null,p("p",{class:"empty-message"},this.t("There are no remote requests, yet.")))}static get watchers(){return{meeting:["meetingChanged"]}}};JR.style=Lse;var Dse=Object.freeze({__proto__:null,dyte_remote_access_manager:JR});const Nse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",CT=()=>typeof navigator<"u"&&typeof navigator.mediaDevices<"u"&&"getDisplayMedia"in navigator.mediaDevices,KR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.dyteAPIError=Q(this,"dyteAPIError",7),this.selfScreenShareListener=({screenShareEnabled:t})=>{this.screenShareEnabled=t;const i=this.screenShareCount+(t?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.screenShareListener=({screenShareEnabled:t})=>{const i=this.screenShareCount+(t?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:t})=>{t&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canScreenShare=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{if(t==="screenshare"&&(this.shareScreenPermission=i,this.getState(),i==="COULD_NOT_START"&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("An error occured while starting screenshare.")}),this.hasPermissionError())){const r={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:r}),U.activePermissionsMessage=r}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var t;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const r={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:r}),U.activePermissionsMessage=r,!1}const i=(t=this.meeting)===null||t===void 0?void 0:t.self;if(this.screenShareEnabled){i.disableScreenShare();return}i==null||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await i.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),U.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("share_screen_start"),label:this.t("share_screen_start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1}}connectedCallback(){if(!CT()){tp.error("[dyte-screenshare-toggle] Device does not support screensharing.");return}this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c,d,l;(e=this.meeting)===null||e===void 0||e.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),(t=this.meeting)===null||t===void 0||t.participants.joined.removeListener("participantLeft",this.participantLeftListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("screenShareUpdate",this.selfScreenShareListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("stageJoined",this.selfJoinStateListener),(o=this.meeting)===null||o===void 0||o.self.removeListener("stageLeft",this.selfStageLeftListener),(c=this.meeting)===null||c===void 0||c.self.removeListener("removedFromStage",this.selfJoinStateListener),(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0||l.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.updateCanProduce(e),this.maxScreenShareCount=t.config.maxScreenShareCount,this.screenShareEnabled=t.screenShareEnabled;let r=0;for(const n of e.participants.joined.toArray())n.screenShareEnabled&&r++;this.screenShareCount=r,this.getState(),e.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),e.participants.joined.addListener("screenShareUpdate",this.screenShareListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),t.addListener("screenShareUpdate",this.selfScreenShareListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStageLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceScreenshare==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canScreenShare=!1,n&&!a?this.canScreenShare=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canScreenShare=!0),t.permissions.canProduceScreenshare==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canScreenShare=!0))}hasPermissionError(){return this.shareScreenPermission==="SYSTEM_DENIED"||this.shareScreenPermission==="DENIED"}getState(){let e="",t="",i="",r={};const n=this.hasPermissionError()&&!this.screenShareEnabled,s=this.reachedMaxScreenShares()&&!this.screenShareEnabled,a=this.shareScreenPermission==="COULD_NOT_START";this.screenShareEnabled&&!n?(t=this.t("share_screen_stop"),i=this.iconPack.share_screen_stop,r["red-icon"]=!0):(t=this.t("share_screen_start"),i=this.iconPack.share_screen_start),this.shareScreenPermission==="SYSTEM_DENIED"?(e=this.t("perm_sys_denied"),r["red-icon"]=!0):e=t,s&&(e=this.t("Maximum screen share limit reached")),a&&(e=this.t("An error occurred while screen sharing, please try again.")),this.screenShareState={tooltipLabel:e,label:t,icon:i,classList:r,disable:n||s,showWarning:n||s||a}}render(){return!CT()||!this.canScreenShare?null:p(M,{title:this.screenShareState.label},p("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning})))}static get watchers(){return{meeting:["meetingChanged"]}}};KR.style=Nse;var Use=Object.freeze({__proto__:null,dyte_screen_share_toggle:KR});const jse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px);opacity:0.8}#video-container{position:absolute;display:block;height:100%;width:100%}#video-container .fit-in-container{-o-object-fit:fill;object-fit:fill}video{height:100%;width:100%;-o-object-fit:contain;object-fit:contain}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}video.visible{-webkit-animation:video-fadein 0.4s ease;animation:video-fadein 0.4s ease}#controls{display:none;position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}:host(:hover) #controls,:host(:active) #controls,:host(:focus-visible) #controls{display:flex}#full-screen-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:20px;font-weight:500}:host([size='sm']) h3{font-size:16px}#self-message{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.isSelf) #self-view{flex:1 1 0%}:host(.isSelf) #video-container{position:static;aspect-ratio:auto;height:auto;width:50%;max-width:var(--dyte-space-96, 384px);border-radius:var(--dyte-border-radius-md, 8px);transition:0.6s ease}:host(.isSelf) #video-container.expand{width:60%;max-width:100%}.actions{display:flex;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px)}:host([size='sm'].isSelf) #video-container,:host([size='md'].isSelf) #video-container,:host([size='sm'].isSelf) #expand-btn,:host([size='md'].isSelf) #expand-btn{display:none}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.remote-control{z-index:10;height:100%;max-height:100%;flex:0 1 auto}#remote-control-self{position:absolute;top:var(--dyte-space-0, 0px);left:50%;z-index:10;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;box-sizing:border-box;display:flex;height:var(--dyte-space-8, 32px);align-items:center;overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transform:translateX(-50%)}#remote-control-self p{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}#remote-control-self dyte-button{height:100%;border-radius:var(--dyte-border-radius-none, 0);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));font-size:12px}:host([size='sm']) #remote-control-self{height:auto;flex-direction:column}:host([size='sm']) #remote-control-self dyte-button{width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}@-webkit-keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}@keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}",ZR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.fullScreenListener=()=>{this.isFullScreen=dR()},this.onRemoteUpdate=({payload:t,type:i})=>{var r,n;let s="";i===_r.INCOMING_REQUEST_ACCEPTED&&(s=`${this.meeting.participants.joined.get(t.request.remotePeerId).name} is controlling your screen.`),i===_r.OUTGOING_REQUEST_ACCEPTED&&(s=`You are controlling ${this.meeting.participants.joined.get(t.request.hostPeerId).name}'s screen.`),(i===_r.INCOMING_REQUEST_ENDED||i===_r.OUTGOING_REQUEST_ENDED)&&(s=""),i===_r.REQUEST_RECEIVED&&!Boolean((n=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||n===void 0?void 0:n.active)&&this.stateUpdate.emit({activeRemoteAccessManager:!0}),this.remoteControlInfo=s},this.onMouseEvent=t=>{var i,r;this.shouldSkipEventTrigger()||(t.stopPropagation(),t.preventDefault(),(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.mouseEvent(t,this.videoEl))},this.onKeyDown=t=>{var i,r;this.shouldSkipEventTrigger()||(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.keyboardEvent(t)},this.toggleFullScreen=()=>{this.isFullScreen?(cR(),this.isFullScreen=!1):(oR(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=$,this.t=z(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}connectedCallback(){window==null||window.addEventListener("fullscreenchange",this.fullScreenListener),window==null||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){var e,t,i;this.screenShareListener&&((e=this.participant)===null||e===void 0||e.removeListener("screenShareUpdate",this.screenShareListener)),(i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0||i.removeListener("remoteUpdate",this.onRemoteUpdate),window==null||window.removeEventListener("fullscreenchange",this.fullScreenListener),window==null||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(e){var t,i,r,n,s;e!=null&&(this.screenShareListener=({screenShareEnabled:a,screenShareTracks:o})=>{const c=a&&o.video!=null;if(bn(()=>{this.screenShareEnabled=c}),c){const d=new MediaStream;d.addTrack(o.video),this.videoEl!=null&&(this.videoEl.srcObject=d,this.videoEl.play())}else this.videoEl!=null&&(this.videoEl.srcObject=void 0)},this.screenShareListener(e),Boolean((i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0?void 0:i.active)&&[this.meeting.remote.active.hostPeerId,this.meeting.remote.active.remotePeerId].includes(e==null?void 0:e.id)&&this.onRemoteUpdate({payload:{request:this.meeting.remote.active},type:((r=this.meeting.remote.active)===null||r===void 0?void 0:r.hostPeerId)===this.meeting.self.id?"INCOMING_REQUEST_ACCEPTED":"OUTGOING_REQUEST_ACCEPTED"}),e.addListener("screenShareUpdate",this.screenShareListener),(s=(n=this.meeting)===null||n===void 0?void 0:n.remote)===null||s===void 0||s.addListener("remoteUpdate",this.onRemoteUpdate))}shouldSkipEventTrigger(){var e,t,i;return this.meeting==null||this.participant==null?!0:!Boolean((e=this.meeting.remote)===null||e===void 0?void 0:e.active)||!Boolean(this.meeting.participants.joined.get((t=this.meeting.remote)===null||t===void 0?void 0:t.active.hostPeerId))||((i=this.meeting.remote)===null||i===void 0?void 0:i.active.hostPeerId)!=this.participant.id}render(){var e,t,i,r,n,s,a,o;const c=((e=this.participant)===null||e===void 0?void 0:e.id)===((t=this.meeting)===null||t===void 0?void 0:t.self.id),d=this.isFullScreen?this.t("Exit Fullscreen"):this.t("Fullscreen Screen Share"),l=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return p(M,{class:{isSelf:c}},Boolean(((r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.active)&&this.remoteControlInfo)&&p("div",{id:"remote-control-self",key:"remote-control-self"},p("p",{class:"remote-control-message"},this.remoteControlInfo),p("dyte-button",{onClick:()=>{var u;return(u=this.meeting.remote)===null||u===void 0?void 0:u.endControl()},iconPack:this.iconPack,t:this.t},((s=(n=this.meeting.remote)===null||n===void 0?void 0:n.active)===null||s===void 0?void 0:s.hostPeerId)===this.meeting.self.id?"Revoke access":"Stop")),p("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded},contentEditable:Boolean((a=this.meeting.remote)===null||a===void 0?void 0:a.active),onKeyDown:this.onKeyDown},p("video",{ref:u=>this.videoEl=u,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`,onMouseMove:this.onMouseEvent,onClick:this.onMouseEvent,onContextMenu:this.onMouseEvent})),p("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!c&&lR()&&p("dyte-tooltip",{label:d,iconPack:this.iconPack,t:this.t},p("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:d,iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:l,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t}))),((o=this.participant)===null||o===void 0?void 0:o.supportsRemoteControl)===!0&&p("dyte-menu",{id:"menu",key:"menu",iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"secondary",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.more_vertical,iconPack:this.iconPack,t:this.t})),p("dyte-menu-list",{iconPack:this.iconPack,t:this.t},!c&&p("dyte-menu-item",{style:{cursor:this.participant.supportsRemoteControl?"pointer":"not-allowed"},iconPack:this.iconPack,t:this.t,onClick:()=>{var u,g;!((u=this.participant)===null||u===void 0)&&u.supportsRemoteControl&&((g=this.meeting.remote)===null||g===void 0||g.requestControl(this.participant.id))}},"Request remote control"),c&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>this.stateUpdate.emit({activeRemoteAccessManager:!0})},"Manage remote control requests")))),c&&p("div",{id:"self-message",key:"self-message"},p("h3",null,this.t("Your screen is being shared")),p("div",{class:"actions"},this.meeting!=null&&p("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("share_screen_stop")),p("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},p("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("Minimize Preview"):this.t("Expand Preview")))),p("slot",null))}get host(){return Ns(this)}static get watchers(){return{participant:["participantChanged"]}}};ZR.style=jse;var $se=Object.freeze({__proto__:null,dyte_screenshare_view:ZR});const Vse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}",QR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.selfJoinStageListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceVideo=!1},this.selfJoinStageRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&((e=this.meeting)===null||e===void 0||e.meta.removeListener("poorConnection",this.poorConnectionListener)),this.selfJoinStageListener&&((t=this.meeting)===null||t===void 0||t.self.removeListener("joinStageRequestAccepted",this.selfJoinStageListener)),this.selfJoinStageRejectedListener&&((i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestRejected",this.selfJoinStageRejectedListener)),this.selfJoinStageListener&&((r=this.meeting)===null||r===void 0||r.self.removeListener("stageJoined",this.selfJoinStageListener)),this.selfStageLeftListener&&((n=this.meeting)===null||n===void 0||n.self.removeListener("stageLeft",this.selfStageLeftListener)),this.selfJoinStageListener&&((s=this.meeting)===null||s===void 0||s.self.removeListener("removedFromStage",this.selfJoinStageListener))}meetingChanged(e){e!=null&&(this.updateCanProduce(e),this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:t})=>{t<7?this.networkStatus="poor":t<4&&(this.networkStatus="poorest"),setTimeout(()=>{this.networkStatus="good"},5e3)},e.meta.addListener("poorConnection",this.poorConnectionListener),e.self.addListener("joinStageRequestAccepted",this.selfJoinStageListener),e.self.addListener("joinStageRequestRejected",this.selfJoinStageRejectedListener),e.self.addListener("stageJoined",this.selfJoinStageListener),e.self.addListener("stageLeft",this.selfStageLeftListener),e.self.addListener("removedFromStage",this.selfJoinStageListener))}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceVideo==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";if(!s&&!a)this.canProduceVideo=n;else{const o=t.permissions.canProduceVideo==="CAN_REQUEST";(n||o&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")))&&(this.canProduceVideo=!0)}}changeTab(e){this.activeTab=e,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),U.activeSettings=!1}render(){if(this.meeting==null)return null;const e={meeting:this.meeting,states:this.states||U,iconPack:this.iconPack,t:this.t};return p(M,null,p("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},p("header",null,p("h2",null,this.t("settings"))),p("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),p("div",{class:"right"},p("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&p("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&p("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),p("div",{class:"right"},p("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&p("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),p("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),p("div",{class:"right"},p("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),p("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&p("header",null,p("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),p("h2",null,this.t(this.activeTab==="audio"?"audio":"video"))),this.activeTab==="audio"&&p("dyte-settings-audio",Object.assign({},e)),this.activeTab==="video"&&p("dyte-settings-video",Object.assign({},e))))}static get watchers(){return{meeting:["meetingChanged"]}}};QR.style=Vse;var Fse=Object.freeze({__proto__:null,dyte_settings:QR});const Bse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",YR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z()}toggleSettings(){var e;this.stateUpdate.emit({activeSettings:!(!((e=this.states)===null||e===void 0)&&e.activeSettings),activeMoreMenu:!1}),U.activeSettings=!U.activeSettings,U.activeMoreMenu=!1}render(){const e=this.t("settings");return p(M,{title:e},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:e,variant:this.variant}))}};YR.style=Bse;var zse=Object.freeze({__proto__:null,dyte_settings_toggle:YR});const Hse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}dyte-camera-toggle{margin-left:var(--dyte-space-1\\.5, 6px)}dyte-participant-tile{height:auto;width:100%;max-width:var(--dyte-space-96, 384px)}",XR=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.join=async()=>{var t,i;this.displayName.trim()!==""&&!this.isJoining&&(this.isJoining=!0,(t=this.meeting)===null||t===void 0||t.self.setName(this.displayName),Ra.setItem("dyte-display-name",this.displayName),await((i=this.meeting)===null||i===void 0?void 0:i.joinRoom()))},this.meeting=void 0,this.size=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){var t,i;e!=null&&(this.canEditName=(t=e.self.permissions.canEditDisplayName)!==null&&t!==void 0?t:!0,this.displayName=((i=e.self.name)===null||i===void 0?void 0:i.trim())||"")}render(){var e,t,i;const r=((e=this.displayName)===null||e===void 0?void 0:e.trim())==="",n={meeting:this.meeting,config:this.config,states:U,size:this.size,iconPack:this.iconPack,t:this.t};return p(M,null,p("div",{class:"container"},p($e,{element:"dyte-participant-tile",defaults:n,props:{participant:(t=this.meeting)===null||t===void 0?void 0:t.self,size:"md"},childProps:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},deepProps:!0}),p("div",{class:"metadata"},this.displayName.trim()===""?p("div",{class:"name"},this.t("setup_screen.join_in_as")):p("div",{class:"label"},p("p",null,this.t("setup_screen.joining_as")),p("div",{class:"name"},tr(this.displayName,20))),this.canEditName&&p("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,autoFocus:!0,onInput:s=>{this.displayName=s.target.value},onKeyDown:s=>{s.key==="Enter"&&this.join()}}),p("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:r,iconPack:this.iconPack,t:this.t},this.isJoining?p("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")))))}static get watchers(){return{meeting:["meetingChanged"]}}};XR.style=Hse;var Gse=Object.freeze({__proto__:null,dyte_setup_screen:XR});const Wse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}dyte-chat,dyte-participants,dyte-plugins{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",ex=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),U.sidebar=this.tab},this.enabledSections=["none"],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.size=void 0,this.view="default",this.tab=this.defaultSection}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),tl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateEnabledSections)}meetingChanged(e){var t,i;this.updateEnabledSections(e),(i=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||i===void 0||i.on("stageStatusUpdate",this.updateEnabledSections)}statesChanged(e){const t=e||U;(t==null?void 0:t.sidebar)!=null&&(this.tab=t.sidebar)}viewChanged(e){e==="full-screen"&&(this.keydownListener=t=>{t.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}filterSections(e){if(!this.meeting.self.config)return e;const t=this.meeting.self.config;return e.filter(i=>t.controlBar.elements[i])}viewSection(e){this.tab=e,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.tab}),U.activeSidebar=!0,U.sidebar=this.tab}updateEnabledSections(e=this.meeting){const t=["none"];Ky(e)&&t.push("chat"),Qy(e)&&t.push("participants"),Yy(e)&&t.push("plugins"),Zy(e)&&t.push("polls"),this.enabledSections=t}render(){var e;const t={meeting:this.meeting,config:this.config,states:this.states||U,size:this.size,t:this.t,iconPack:this.iconPack};return((e=this.states)===null||e===void 0?void 0:e.activeSidebar)===!1||this.tab==="none"?null:p(M,null,this.view==="full-screen"&&[p("h3",{class:"title"},this.t("About Call")),p("div",{id:"mobile-header"},this.filterSections(this.enabledSections).map(i=>p("dyte-button",{key:i,variant:"ghost",class:{active:this.tab===i},onClick:()=>this.viewSection(i),iconPack:this.iconPack,t:this.t},this.t(i))))],p("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("Close"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.view!=="full-screen"&&p("h3",{class:"title"},this.t(this.tab)),this.tab==="chat"&&p($e,{element:"dyte-chat",defaults:t}),this.tab==="polls"&&p($e,{element:"dyte-polls",defaults:t}),this.tab==="participants"&&p($e,{element:"dyte-participants",defaults:t}),this.tab==="plugins"&&p($e,{element:"dyte-plugins",defaults:t}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};ex.style=Wse;var qse=Object.freeze({__proto__:null,dyte_sidebar:ex});const Jse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}",tx=class{constructor(e){V(this,e),this.setHostDimensions=()=>{const{clientWidth:t,clientHeight:i}=this.host;this.dimensions={width:t,height:i}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new M7(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}render(){const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:t,height:i,getPosition:r}=sne({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return p(M,null,this.participants.map((n,s)=>{const{top:a,left:o}=r(s);return p($e,{element:"dyte-participant-tile",defaults:e,props:{participant:n,style:{position:"absolute",top:`${a}px`,left:`${o}px`,width:`${t}px`,height:`${i}px`},key:n.id,"data-participant":n.id},childProps:{participant:n},deepProps:!0})}),p("slot",null))}get host(){return Ns(this)}};tx.style=Jse;var Kse=Object.freeze({__proto__:null,dyte_simple_grid:tx});const Zse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}",ix=class{constructor(e){V(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ze,this.iconPack=$,this.t=z(),this.gridSize=yw}render(){const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},t=this.participants.filter(i=>this.pinnedParticipants.some(r=>r.id!=i.id));return p(M,null,p("main",{part:"main"},p($e,{element:"dyte-simple-grid",defaults:e,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.size}})),t.length>0&&p("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},p($e,{element:"dyte-simple-grid",defaults:e,props:{part:"aside-grid",participants:t,aspectRatio:this.aspectRatio,gap:this.gap,size:this.size}})))}get host(){return Ns(this)}};ix.style=Zse;var Qse=Object.freeze({__proto__:null,dyte_spotlight_grid:ix});const Yse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}",rx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.iconPack=$,this.t=z()}render(){return p(M,null,p("slot",null))}};rx.style=Yse;var Xse=Object.freeze({__proto__:null,dyte_stage:rx});const eae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",nx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var t,i,r,n,s,a,o;const c=(t=this.meeting.stage)===null||t===void 0?void 0:t.status;c==="ON_STAGE"&&await((r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),c==="OFF_STAGE"&&((s=(n=this===null||this===void 0?void 0:this.meeting)===null||n===void 0?void 0:n.stage)===null||s===void 0||s.requestAccess(),tre(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),c==="REQUESTED_TO_JOIN_STAGE"&&((o=(a=this===null||this===void 0?void 0:this.meeting)===null||a===void 0?void 0:a.stage)===null||o===void 0||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=z()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(e,t){this.stageStatus=t,t==="ACCEPTED_TO_JOIN_STAGE"&&(e.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",i=>this.stageStatusHandler(this.meeting,i))}meetingChanged(e){var t,i,r,n;e!=null&&(this.stageStatus=(t=e.stage)===null||t===void 0?void 0:t.status,this.stageStatusHandler(e,(i=e.stage)===null||i===void 0?void 0:i.status),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.on("stageStatusUpdate",s=>this.stageStatusHandler(e,s)))}getState(){let e="",t="",i=!1;switch(this.stageStatus){case"ON_STAGE":{t=this.iconPack.leave_stage,e="Leave Livestream",i=!1;break}case"ACCEPTED_TO_JOIN_STAGE":{t=this.iconPack.join_stage,e="Join Livestream",i=!0;break}case"REQUESTED_TO_JOIN_STAGE":{t=this.iconPack.join_stage,e="Requested",i=!1;break}default:{t=this.iconPack.join_stage,e="Join Livestream",i=!1;break}}return{label:e,disabled:i,icon:t}}render(){if(!!ire(this.meeting))return p(M,{title:this.state.label},p("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};nx.style=eae;var tae=Object.freeze({__proto__:null,dyte_stage_toggle:nx});const iae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}",sx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=$,this.t=z()}connectedCallback(){this.stateUpdate.emit({abc:!1}),U.abc=!1}get value(){return this.input.value}render(){return p(M,null,p("input",{ref:e=>this.input=e,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};sx.style=iae;var rae=Object.freeze({__proto__:null,dyte_text_field:sx});const nae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",ax=class{constructor(e){V(this,e),this.disconnectMeeting=t=>{var i;t!=null&&this.countListener!=null&&((i=t.livestream)===null||i===void 0||i.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.iconPack=$,this.t=z(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;this.disconnectMeeting(t),e!=null&&(this.countListener=()=>{var r;this.viewerCount=(r=e.livestream)===null||r===void 0?void 0:r.viewerCount},this.countListener(),(i=e.livestream)===null||i===void 0||i.addListener("viewerCountUpdate",this.countListener))}render(){return js(this.meeting)?p(M,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},p("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};ax.style=nae;var sae=Object.freeze({__proto__:null,dyte_viewer_count:ax});const aae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}",ox=class{constructor(e){V(this,e),this.meeting=void 0,this.config=ze,this.iconPack=$,this.t=z()}render(){return p(M,null,p("slot",null,p("div",{class:"centered",part:"content"},p("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),p("p",null,this.t("waitlist.body_text")))))}};ox.style=aae;var oae=Object.freeze({__proto__:null,dyte_waiting_screen:ox});const cae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",cx=class{constructor(e){V(this,e),this.requestToJoinAcceptedListener=()=>{this.stageStatus="ACCEPTED"},this.requestToJoinRejectedListener=()=>{this.stageStatus="DENIED"},this.stageJoinedListener=()=>{this.stageStatus="ACCEPTED"},this.removeFromStageListener=()=>{this.stageStatus="NOT_REQUESTED"},this.selfStageLeftListener=()=>{this.stageStatus="NOT_REQUESTED"},this.requestStageListener=()=>{this.stageStatus="PENDING"},this.stageCallback=async()=>{var t;const i=(t=this.meeting)===null||t===void 0?void 0:t.self;if(!(i==null||!this.requestProduce&&!this.canPresent)){if(this.stageStatus==="PENDING"){await i.withdrawRequestToJoinStage();return}if(this.stageStatus==="ACCEPTED"){await i.leaveStage(),this.stageStatus="NOT_REQUESTED";return}this.canPresent?(await i.joinStage(),this.stageStatus="ACCEPTED"):(await i.requestToJoinStage(),this.stageStatus="PENDING")}},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.stageStatus="NOT_REQUESTED",this.canPresent=!1,this.requestProduce=!1}connectedCallback(){this.meetingChanged(this.meeting),this.meeting.self.addListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.addListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.addListener("stageJoined",this.stageJoinedListener),this.meeting.self.addListener("removedFromStage",this.removeFromStageListener),this.meeting.self.addListener("stageLeft",this.selfStageLeftListener),this.meeting.self.addListener("peerRequestToJoinStage",this.requestStageListener)}disconnectedCallback(){this.meeting.self.removeListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.removeListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.removeListener("removedFromStage",this.removeFromStageListener),this.meeting.self.removeListener("stageJoined",this.stageJoinedListener),this.meeting.self.removeListener("stageLeft",this.selfStageLeftListener),this.meeting.self.removeListener("peerRequestToJoinStage",this.requestStageListener)}meetingChanged(e){e!=null&&(this.requestProduce=e.self.permissions.requestProduce,this.canPresent=e.self.permissions.canPresent,(this.canPresent||e.self.webinarStageStatus==="ON_STAGE")&&(this.stageStatus="ACCEPTED"))}getState(){let e="",t="",i="",r={},n=!1;return this.stageStatus==="PENDING"?(t=this.t("stage_request.cancel_request"),e=this.t("stage_request.pending_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1):this.stageStatus==="ACCEPTED"?(t=this.t("stage_request.leave_stage"),e=this.t("stage_request.leave_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1,n=!1):this.stageStatus==="DENIED"?(t=this.t("stage_request.denied"),e=this.t("stage_request.denied_tip"),i=this.iconPack.join_stage,r["red-icon"]=!1,n=!0):(t=this.t("stage_request.request"),this.canPresent?e=this.t("stage_request.request"):e=this.t("stage_request.request_tip"),i=this.iconPack.join_stage,n=!1),{tooltipLabel:e,label:t,icon:i,classList:r,disabled:n}}render(){if(!this.requestProduce&&!this.canPresent||this.meeting.self.config.viewType!=="WEBINAR")return null;const{tooltipLabel:e,label:t,icon:i,classList:r,disabled:n}=this.getState();return p(M,{title:t},p("dyte-tooltip",{placement:"top",kind:"block",label:e,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},p("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:t,icon:i,class:r,onClick:this.stageCallback,disabled:n,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};cx.style=cae;var dae=Object.freeze({__proto__:null,dyte_webinar_stage_toggle:cx});const lae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{visibility:hidden;position:fixed;left:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px)}.caption-container{visibility:visible;position:absolute;bottom:var(--dyte-space-20, 80px);left:50%;--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:var(--dyte-border-radius-md, 8px);background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity:0.5;padding:var(--dyte-space-2, 8px)}",dx=class{constructor(e){V(this,e)}render(){return p(M,null,p("div",{class:"caption-container"},"asd"))}};dx.style=lae;var uae=Object.freeze({__proto__:null,dyte_ai_caption:dx});const pae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@-webkit-keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{-webkit-animation:bg-glow 0.8s;animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}",PT=3,lx=class{constructor(e){V(this,e),this.onParticipantsAdd=Q(this,"participantsAdd",7),this.onParticipantDelete=Q(this,"participantDelete",7),this.onRoomJoin=Q(this,"roomJoin",7),this.deleteRoom=Q(this,"delete",7),this.updateRoom=Q(this,"update",7),this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<PT)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,bn(()=>{this.inputTextEl.focus(),this.inputTextEl.select()})},this.onDrop=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.add("drop-zone-active"),t.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=$,this.t=z(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var e;this.allParticipants=H7(this.meeting),this.permissions=this.meeting.self.permissions.connectedMeetings,this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):(e=this.room)===null||e===void 0?void 0:e.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive}onDragLeave(e){e.currentTarget instanceof HTMLParagraphElement&&e.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){if(this.assigningParticipants&&this.isDragMode)return this.t("breakout_rooms.drag_drop_participants");if(this.assigningParticipants)return this.t("breakout_rooms.click_drop_participants");if(this.room.participants.length===0)return this.t("breakout_rooms.none_assigned")}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout(()=>{this.glowingCard=!1},2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(e){e.key==="Enter"&&(this.newTitle=e.target.value,this.onEditClick())}renderPeer(e){const{displayPictureUrl:t}=this.allParticipants.find(r=>$t(r)===$t(e)),i=$r(e.displayName||"");return p("div",{class:"peer-ui-container"},p("dyte-avatar",{participant:{name:i,picture:t},size:"sm"}),p("p",{class:"name",title:i},tr(i,16),this.meeting.self.userId===e.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&!!this.getAssignmentHint()&&!!this.permissions.canAlterConnectedMeetings)return p("div",{class:"message-container"},p("p",{class:{"compact-height":this.room.participants.length!==0},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&this.room.participants.length!==0)return p("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map(e=>p("div",{class:"participant-item",role:"listitem",key:e.id},this.renderPeer(e),this.permissions.canAlterConnectedMeetings&&p("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(e)}}))))}render(){var e,t,i;return p(M,null,p("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},p("div",{class:"header"},p("input",{ref:r=>this.inputTextEl=r,placeholder:this.t("breakout_rooms.room_name"),disabled:this.editingTitleRoomId!==this.room.id,value:this.roomTitle,minlength:PT,onChange:r=>{this.newTitle=r.target.value},onKeyPress:r=>this.onTitleChanged(r),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&p("span",{class:"participant-count"},"(",p("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),(i=(t=(e=this.room)===null||e===void 0?void 0:e.participants)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:"0",")"),this.canEditMeetingTitle&&p("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),p("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&p("dyte-tooltip",{label:this.t("Delete Room"),class:"danger",iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&p("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),this.mode==="edit"&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&p("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.roomName,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.roomName?this.t("joined"):this.t("join")),!this.room.isParent&&p("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};lx.style=pae;const hae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';-webkit-clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%);clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}`,ux=class{constructor(e){V(this,e),this.onSelectedParticipantsUpdate=Q(this,"selectedParticipantsUpdate",7),this.onAllToggled=Q(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=Q(this,"participantsDragging",7),this.onSearchInput=t=>{this.search=t.target.value},this.onDragStart=t=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(t,!0)},this.onDragEnd=t=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(t,!1)},this.onClick=t=>{const i=this.selectedParticipantIds.includes($t(t));this.updateSelectedParticipants(t,!i)},this.onToggleAll=t=>{const i=t?this.participantsToShow.map($t):[];this.onAllToggled.emit(i)},this.meeting=void 0,this.participantIds=[],this.iconPack=$,this.t=z(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting!=null}updateSelectedParticipants(e,t){const i=$t(e);let r=[];t&&!this.selectedParticipantIds.includes(i)?r=[...this.selectedParticipantIds,i]:r=[...this.selectedParticipantIds.filter(n=>n!==i)],this.onSelectedParticipantsUpdate.emit(r)}meetingChanged(e){e!=null&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(e){this.getParticipants(e)}getParticipants(e){const t=H7(this.meeting);this.participantsToShow=t.filter(i=>{var r;return this.participantIds.includes($t(i))&&((r=i.displayName)!==null&&r!==void 0?r:"").toLowerCase().includes(e.toLowerCase())})}renderPeer(e){const t=$r(e.displayName||"");return p("div",{class:"peer-ui-container"},p("dyte-avatar",{participant:{name:e.displayName,picture:e.displayPictureUrl},size:"sm"}),p("p",{class:"name",title:t},tr(t,16),this.meeting.self.userId===e.id&&` (${this.t("you")})`))}render(){return p(M,null,p("div",{class:"search-wrapper"},p("div",{class:"search",part:"search"},p("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),p("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),p("slot",{name:"shuffle-button"})),p("div",{class:"header"},p("div",{class:"title-wrapper"},p("span",null,this.t("breakout_rooms.main_room")),p("span",{class:"participant-count"},"(",p("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),this.selectedParticipantIds.length!==0&&p("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},p("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:e=>this.onToggleAll(!!e.target.checked)}))),p("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&p("ul",{class:"participants",part:"participants"},this.participantsToShow.map(e=>p("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(e),onDragStart:()=>this.onDragStart(e),onDragEnd:()=>this.onDragEnd(e),draggable:this.selectedParticipantIds.length===0,role:"listitem",key:e.id},this.renderPeer(e),!this.isDragging&&p("input",{type:"checkbox",class:{"hide-checkbox":this.selectedParticipantIds.length===0},checked:this.selectedParticipantIds.includes($t(e))})))),this.participantsToShow.length===0&&this.search.length>0&&p("div",{class:"empty-message"},this.t("participants.empty_search_results")),this.participantsToShow.length===0&&this.search.length===0&&p("div",{class:"empty-room"},p("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),p("p",null,this.t("breakout_rooms.all_assigned")),p("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};ux.style=hae;const gae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}",px=class{constructor(e){V(this,e),this.onChange=Q(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=$,this.t=z()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(e){this.onChange.emit(e)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return p(M,null,p("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),p("input",{type:"number",value:this.input,min:this.minValue,onInput:e=>{const t=parseInt(e.target.value,10);isNaN(t)||t<this.minValue?this.input=this.minValue.toString():this.input=t.toString()}}),p("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};px.style=gae;var mae=Object.freeze({__proto__:null,dyte_breakout_room_manager:lx,dyte_breakout_room_participants:ux,dyte_counter:px});const fae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column}.chat-input{z-index:10;box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{box-sizing:border-box;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea{font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:80px;font-size:14px}.chat-buttons{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));-webkit-animation:0.3s slide-up ease;animation:0.3s slide-up ease}@-webkit-keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}",hx=class{constructor(e){V(this,e),this.onNewMessage=Q(this,"dyteNewMessage",7),this.handleKeyDown=t=>{t.key==="Enter"&&t.shiftKey?this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px"):t.key==="Enter"?(t.preventDefault(),this.handleSendMessage()):t.key==="Backspace"&&(this.$textArea.value.endsWith(`
`)?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":this.$textArea.value===""&&(this.$textArea.style.height="auto"))},this.onPaste=t=>{const i=t.clipboardData||t.originalEvent.clipboardData;X7(i.items,this.sendFile)},this.sendFile=(t,i)=>{!this.canSendFiles||(t==="image"?this.onNewMessage.emit({type:"image",file:i}):this.onNewMessage.emit({type:"file",file:i}))},this.initializeTextField=t=>{this.$textArea=t;const i=Ra.getItem("dyte-text-message")||"";this.$textArea.value=i},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=$,this.t=z(),this.disableEmojiPicker=!1,this.emojiPickerActive=!1}handleSendMessage(){if(!this.canSendTextMessage)return;const e=this.$textArea.value.trim();e.length>0&&(this.onNewMessage.emit({type:"text",message:e}),this.$textArea.value="",this.$textArea.style.height="auto",Ra.setItem("dyte-text-message",""))}uploadFile(e){const t=document.createElement("input");t.type="file",e==="image"&&(t.accept="image/*"),t.onchange=i=>{const{validity:r,files:[n]}=i.target;r.valid&&this.sendFile(e,n)},t.click()}render(){const e={iconPack:this.iconPack,t:this.t,size:this.size};return p(M,null,this.canSendTextMessage&&this.emojiPickerActive&&p("dyte-emoji-picker",{part:"emoji-picker",onDyteEmojiClicked:t=>{this.$textArea.value+=t.detail,this.$textArea.focus()},t:this.t}),p("slot",{name:"chat-addon"}),p("div",{class:"chat-input",part:"chat-input"},this.canSendTextMessage&&p("textarea",{class:"scrollbar",part:"textarea",placeholder:"Message..",ref:this.initializeTextField,autoFocus:!0,onPaste:this.onPaste,onKeyDown:this.handleKeyDown,onInput:t=>{Ra.setItem("dyte-text-message",t.target.value)}}),p("div",{class:"chat-buttons",part:"chat-buttons"},p("div",{class:"left",part:"chat-buttons-left"},this.canSendFiles&&[p("dyte-tooltip",Object.assign({label:this.t("Send a file")},e),p("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("Send a file"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.attach}))),p("dyte-tooltip",Object.assign({label:this.t("Send an image")},e),p("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("Send an image"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.image})))],this.canSendTextMessage&&!this.disableEmojiPicker&&p("dyte-tooltip",Object.assign({label:this.t("Send Emoji")},e),p("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("Send Emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},p("dyte-icon",{icon:this.iconPack.emoji_multiple})))),this.canSendTextMessage&&p("div",{class:"right",part:"chat-buttons-right"},p("dyte-tooltip",Object.assign({variant:"primary",label:this.t("Send message"),delay:2e3},e),p("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("Send message"),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.send})))))))}};hx.style=fae;const vae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,gx=class{constructor(e){V(this,e),this.observingEl=[],this.onScroll=t=>{const i=t.target;bn(()=>{const{scrollTop:r,clientHeight:n,scrollHeight:s}=i;r+n+10>=s?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1})},this.scrollToBottom=()=>{xa(this.$chat)},this.observeMessage=t=>{t&&this.observingEl.push(t);try{this.intersectionObserver.observe(t)}catch{}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var e;this.lastReadTimestamp=(e=vm.everyone)!==null&&e!==void 0?e:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver(i=>{!document.hasFocus()||bn(()=>{for(const r of i)r.isIntersecting&&parseInt(r.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(vm[this.selectedGroup]=new Date)})});const t=()=>{this.now=new Date,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(t))},60*1e3)};this.request=requestAnimationFrame(t),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll)}componentDidRender(){this.autoScrollEnabled?xa(this.$chat):this.autoScrollEnabled==null&&xa(this.$chat,!1)}chatChanged(e){if(this.$chat!=null&&!(this.autoScrollEnabled||this.$chat.clientHeight===this.$chat.scrollHeight)){for(let t=e.length-1;t>=0;t--)if(e[t].message.time>this.lastReadTimestamp&&e[t].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach(e=>{this.intersectionObserver.unobserve(e)}),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var e;let t=null,i=!1;return p(M,null,p("div",{class:"chat-container scrollbar",ref:r=>this.$chat=r,part:"container"},p("div",{class:"spacer",part:"spacer"}),p("div",{class:"chat",part:"chat"},(e=this.messages)===null||e===void 0?void 0:e.map(r=>{if(r.type==="chat"){const{message:n}=r,a=!(n.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&n.time>this.lastReadTimestamp;a&&(i=a);const o=!a&&n.userId===(t==null?void 0:t.userId)&&U7(n.time,t==null?void 0:t.time)<2;switch(t=n,n.type){case"text":return p("div",{"is-continued":o,key:r.message.id},a&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-text-message",{message:n,now:this.now,isContinued:o,"data-timestamp":n.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return p("div",{"is-continued":o,key:r.message.id},a&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-image-message",{message:n,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":n.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return p("div",{"is-continued":o,key:r.message.id},a&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-file-message",{message:n,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":n.time.getTime(),ref:this.observeMessage}))}}return null}))),p("div",{class:"show-new-messages-ctr"},p("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};gx.style=vae;const yae=":host{display:flex;flex:1 0 0px}",mx=class{constructor(e){V(this,e),this.pageSize=25,this.getChatMessages=async(t,i,r)=>{const{messages:n}=await this.meeting.chat.getMessages(t,i,r);return n},this.createChatNodes=t=>t.map(i=>{const r=i.userId===void 0;return this.createChatNode(i,r)}),this.disconnectMeeting=t=>{var i;(i=t==null?void 0:t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(t,i)=>p("dyte-chat-message",{messageItem:{type:"chat",message:t},isContinued:i,isUnread:!1,size:this.size,iconPack:this.iconPack,key:t.id}),this.chatUpdateListener=t=>{this.$paginatedListRef.onNewNode(this.createChatNode(t.message,!1))},this.meeting=void 0,this.size=void 0,this.iconPack=$,this.t=z()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;t!=null&&this.disconnectMeeting(t),!(e&&!e.chat)&&e!=null&&((i=e.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener))}render(){return p(M,null,p("dyte-paginated-list",{ref:e=>this.$paginatedListRef=e,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes}))}static get watchers(){return{meeting:["meetingChanged"]}}};mx.style=yae;const _ae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);-webkit-animation:0.3s slide-down ease;animation:0.3s slide-down ease}@-webkit-keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,fx=class{constructor(e){V(this,e),this.groupChanged=Q(this,"dyteChatGroupChanged",7),this.onScopeClick=t=>{this.showParticipantsPanel=!1,this.groupChanged.emit(t)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=$,this.t=z(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))}getName(){if(!this.selectedGroupId||this.selectedGroupId==="everyone")return this.t("everyone");const e=this.groups.find(t=>t.userId===this.selectedGroupId);return e?e.name:this.t("everyone")}render(){const e=Object.keys(this.unreadCounts).reduce((t,i)=>t+this.unreadCounts[i],0);return p(M,null,p("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&p("div",{class:"participants-container"},p("div",{class:"search",part:"search"},p("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),p("input",{type:"search",autocomplete:"off",placeholder:"Search",value:this.query,onInput:t=>{this.query=t.target.value},part:"search-input"})),p("ul",{class:"scope-list scrollbar"},this.query===""&&p("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},p("div",{class:"everyone-icon"},p("dyte-icon",{icon:this.iconPack.participants})),"Everyone",this.unreadCounts.everyone>0&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,this.unreadCounts.everyone))),this.getGroups().map(t=>{const i=this.unreadCounts[gg([this.selfUserId,t.userId])];return p("li",{class:"scope",onClick:()=>this.onScopeClick(t),key:t.userId},t.name,i>0&&p("div",{class:"unread-count",part:"unread-count"},p("span",null,i)))}))),p("button",{onClick:()=>this.toggleParticipants()},p("span",null,`${this.t("To")} ${this.getName()}`,"  ",e>0&&p("div",{class:"unread-count selector"},p("span",null,e))),p("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};fx.style=_ae;var bae=Object.freeze({__proto__:null,dyte_chat_composer_ui:hx,dyte_chat_messages_ui:gx,dyte_chat_messages_ui_paginated:mx,dyte_chat_selector_ui:fx});const wae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.webinar){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.webinar) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.webinar) .container dyte-button{margin:var(--dyte-space-3, 12px);flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.webinar) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.webinar) .summary{padding:var(--dyte-space-4, 16px)}:host(.livestream){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.livestream) dyte-participant-setup{display:flex;width:100%;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.livestream) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.livestream) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.livestream) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.livestream) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.livestream) .summary{margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-6, 24px);text-align:left;font-size:14px}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}`,vx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.joinStage=Q(this,"dyteJoinStage",7),this.leaveStage=Q(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=ze,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")}}render(){var e,t,i,r;const n={meeting:this.meeting,size:this.size,states:this.states||U,config:this.config,iconPack:this.iconPack,t:this.t};return p(M,{class:{livestream:((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="LIVESTREAM",webinar:((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="WEBINAR"}},p("header",null,p("h2",null,this.dataConfig.title)),p($e,{element:"dyte-participant-setup",defaults:n,props:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},childProps:{participant:(r=this.meeting)===null||r===void 0?void 0:r.self,size:"md"},deepProps:!0}),p("div",{class:"summary"},this.dataConfig.description),p("div",{class:"container"},p("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),p("dyte-button",{onClick:()=>this.joinStage.emit(),title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.dataConfig.label.accept)))}};vx.style=wae;const Sae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}",yx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=$,this.t=z()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout(()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),U.activeOverlayModal={active:!1}},this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return p(M,null,p("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),p("h2",null,this.states.activeOverlayModal.title),p("p",null,this.states.activeOverlayModal.description))}};yx.style=Sae;var Eae=Object.freeze({__proto__:null,dyte_join_stage:vx,dyte_overlay_modal:yx});const Tae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px)}video{z-index:0;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.latency-controls{position:absolute;bottom:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);z-index:20;display:flex;flex-direction:row;align-items:center}.sync-live-stream{cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}",_x=class{constructor(e){V(this,e),this.dyteAPIError=Q(this,"dyteAPIError",7),this.showLatencyIndicator=!1,this.LoadPlayer=(t=this.ivsPlayer)=>{this.player&&t&&(t.attachHTMLVideoElement(this.player),t.setAutoplay(!0),t.setVolume(1))},this.livestreamUpdateListener=t=>{var i,r;this.livestreamState=t,t==="LIVESTREAMING"?(this.LoadPlayer(),this.getPlaybackUrl(),!((r=(i=this.meeting.__internals__)===null||i===void 0?void 0:i.browserSpecs)===null||r===void 0)&&r.isIOSMobile()||(this.fetchLatency(),this.updateLatency=setInterval(this.fetchLatency,2e3)),mt.enableSource("livestream-player")):(this.showLatencyIndicator=!1,this.updateLatency&&clearInterval(this.updateLatency),mt.disableSource("livestream-player"))},this.getLoadingState=()=>{let t="",i=!1,r=!1;switch(this.livestreamState){case"IDLE":t=this.t("Waiting to go live."),i=!0,r=!1;break;case"STARTING":t=this.t("Livestream is starting..."),i=!0,r=!0;break;case"STOPPING":t=this.t("Livestream is stopping..."),i=!0,r=!0;break;case"LIVESTREAMING":this.playerState!==Dn.PLAYING&&(t=this.t("Livestream is starting..."),r=!0,i=!0);break;default:i=!1,t=this.t(""),r=!0;break}return{isLoading:i,loadingMessage:t,showIcon:r}},this.getErrorState=()=>{var t,i;let r=!1,n="";return this.livestreamState!=="LIVESTREAMING"?(r=!1,n=this.t(""),{isError:r,errorMessage:n}):(this.isSupported||(r=!0,n=this.t("Player not supported.")),this.playbackUrl||(r=!0,n=this.t("Playback URL not found.")),this.playerError&&(r=!0,n=this.t((i=(t=this.playerError)===null||t===void 0?void 0:t.message)!==null&&i!==void 0?i:"An unknown error occured.")),{isError:r,errorMessage:n})},this.fetchLatency=()=>{this.ivsPlayer&&(this.latency=this.ivsPlayer.getLiveLatency())},this.stopRebuffer=t=>{this.ivsPlayer.setRebufferToLive(!1),this.latency=t,clearInterval(this.updateLatency),this.updateLatency=setInterval(this.fetchLatency,2e3)},this.resetSyncLivestream=()=>{const t=this.ivsPlayer.getLiveLatency();this.stopRebuffer(t),this.dyteAPIError.emit({trace:this.t("livestreamPlayer.rebuffer.error"),message:this.t("Could not sync livestream please try again later.")})},this.syncLiveStream=()=>{clearInterval(this.updateLatency),this.latency=-1,this.ivsPlayer.setRebufferToLive(!0);const t=setTimeout(this.resetSyncLivestream,15e3);this.updateLatency=setInterval(()=>{const i=this.ivsPlayer.getLiveLatency();i<10&&(this.stopRebuffer(i),clearTimeout(t))},1e3)},this.meeting=void 0,this.size=void 0,this.t=z(),this.iconPack=$,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=Dn.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.latency=0,this.audioPlaybackError=!1}AddPlayerListeners(e=this.ivsPlayer){Object.values(Object.assign(Object.assign({},Nt),Dn)).forEach(t=>{Xie.includes(t)||e==null||e.addEventListener(t,i=>{var r,n,s;(t===Dn.IDLE||t===Dn.PLAYING||t===Nt.ERROR||t===Dn.READY)&&(this.playerState=t),t===Nt.ERROR&&(this.playerError=i),t===Dn.IDLE&&e.isPaused()&&e.play(),t===Nt.AUDIO_BLOCKED&&(this.audioPlaybackError=!0),this.playerState===Dn.PLAYING&&!(!((n=(r=this.meeting.__internals__)===null||r===void 0?void 0:r.browserSpecs)===null||n===void 0)&&n.isIOSMobile())?this.showLatencyIndicator=!0:this.showLatencyIndicator=!1,this.meeting.__internals__.logger.info(`IVS.Player.${t}`,i),ere.includes(t)&&((s=this.meeting.__internals__.callStats)===null||s===void 0||s.ivsPlayerEvent(t,i))})})}getPlaybackUrl(e=this.ivsPlayer){this.playbackUrl=this.meeting.livestream.playbackUrl,this.playbackUrl&&e&&(e.load(this.playbackUrl),e.play())}onPlayerRef(e){this.player=e,mt.addSource("livestream-player",this.player,!!this.playbackUrl),this.playbackUrl&&mt.enableSource("livestream-player")}connectedCallback(){this.meetingChanged(this.meeting),window.onDyteLivestreamPlayer=e=>{e?(this.isSupported=!0,this.ivsPlayer=e,this.AddPlayerListeners(e),this.LoadPlayer(e),this.getPlaybackUrl(e)):this.isSupported=!1},this.sendLatencyToCallStats=setInterval(()=>{var e;this.fetchLatency(),(e=this.meeting.__internals__.callStats)===null||e===void 0||e.livestreamLatency(this.latency)},1e4)}disconnectedCallback(){window.onDyteLivestreamPlayer=void 0,this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),clearInterval(this.sendLatencyToCallStats),this.ivsPlayer.load(""),this.ivsPlayer=void 0,this.player=void 0}async componentDidLoad(){const e=`
    import IVSPlayer from 'https://cdn.jsdelivr.net/npm/amazon-ivs-player@1.16.0/+esm'
    let player = undefined;
    if (IVSPlayer.isPlayerSupported) {
      player = IVSPlayer.create({
        wasmBinary:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.wasm',
        wasmWorker:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.js',
      });
    }
    window.onDyteLivestreamPlayer && window.onDyteLivestreamPlayer(player);
    `,t=document.createElement("script");t.type="module",t.innerHTML=e,document.body.appendChild(t)}meetingChanged(e){e!=null&&(this.livestreamState=this.meeting.livestream.state,this.livestreamState==="LIVESTREAMING"&&(this.LoadPlayer(),this.getPlaybackUrl(),mt.enableSource("livestream-player")),this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){if(!js(this.meeting))return;const{isError:e,errorMessage:t}=this.getErrorState(),{isLoading:i,loadingMessage:r,showIcon:n}=this.getLoadingState();return p(M,null,p("div",{class:"player-container"},p("video",{ref:s=>this.onPlayerRef(s),playsInline:!0}),this.audioPlaybackError&&p("div",{class:"unmute-popup"},p("h3",null,this.t("audio_playback.title")),p("p",null,this.t("audio_playback.description")),p("dyte-button",{kind:"wide",onClick:()=>{this.player.muted=!1,this.audioPlaybackError=!1},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),this.showLatencyIndicator&&p("div",{class:"latency-controls"},(this.latency>10||this.latency<0)&&p("div",{class:"sync-live-stream",onClick:this.syncLiveStream},this.latency===-1?p("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"sm"}):"Skip to Live")),e&&p("div",{class:"loader"},p("dyte-icon",{icon:this.iconPack.warning,t:this.t}),p("p",null,t)),!e&&i&&p("div",{class:"loader"},n&&p("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),p("p",null,r))))}static get watchers(){return{meeting:["meetingChanged"]}}};_x.style=Tae;var kae=Object.freeze({__proto__:null,dyte_livestream_player:_x});const Cae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));-webkit-animation:show 0.4s ease;animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px)}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){-webkit-animation:exit 0.4s ease;animation:exit 0.4s ease}@-webkit-keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@-webkit-keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}",bx=class{constructor(e){V(this,e),this.dismiss=Q(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(e){e!=null&&typeof e.duration=="number"&&setTimeout(()=>{this.dismiss.emit(e.id)},e.duration)}render(){return p(M,null,p("div",{class:"ctr"},this.notification.icon!=null&&p("dyte-icon",{class:"icon",icon:this.notification.icon,iconPack:this.iconPack,t:this.t}),this.notification.image!=null&&this.notification.icon==null&&this.imageState!=="errored"&&p("img",{src:this.notification.image,class:{loaded:this.imageState==="loaded"},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),p("p",{class:"message"},this.notification.message),p("div",{class:"right"},this.notification.button!=null&&p("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),p("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};bx.style=Cae;var Pae=Object.freeze({__proto__:null,dyte_notification:bx});const Rae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:83.333333%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px)}.poll p{margin:var(--dyte-space-0, 0px)}.poll-question{font-size:12px;font-weight:700;overflow-wrap:break-word}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option label{display:flex;flex-direction:row}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,wx=class{constructor(e){V(this,e),this.onVote=Q(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=$,this.t=z()}vote(e,t){this.poll.voted.includes(this.self)?e.preventDefault():this.onVote.emit({id:this.poll.id,index:t})}render(){return p(M,null,p("div",{class:"ctr"},p("p",{class:"poll-title"},this.t("Poll by")," ",tr($r(this.poll.createdBy),20)),p("div",{class:"poll"},p("p",{class:"poll-question"},this.poll.question),this.poll.options.map((e,t)=>p("div",{class:{active:e.votes.some(i=>i.id===this.self),"poll-option":!0}},p("div",{class:"poll-option-header"},p("label",null,p("input",{disabled:!this.permissions.polls.canVote,type:"checkbox",checked:e.votes.some(i=>i.id===this.self),onClick:i=>this.vote(i,t)}),p("p",null,e.text," (",e.count,")"))),p("div",{class:"votes"},e.votes.map(i=>{if(!(this.poll.anonymous&&this.self!==this.poll.createdByUserId))return p("dyte-tooltip",{label:i.name,iconPack:this.iconPack,t:this.t},p("div",{class:"vote"},j7(i.name)))})))))))}};wx.style=Rae;const xae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}`,Sx=class{constructor(e){V(this,e),this.onCreate=Q(this,"dyteCreatePoll",7),this.iconPack=$,this.t=z(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(e){var t;this.options=this.options.filter((i,r)=>r!==e),((t=this.error)===null||t===void 0?void 0:t.code)===1&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(e,t){var i;this.options[t]=e.target.value,((i=this.error)===null||i===void 0?void 0:i.code)===1&&(this.error=void 0)}handleSubmit(){const e={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:this.anonymous?!0:this.hideVotes};if(!e.question){this.error={code:0,message:this.t("Question is required.")};return}if(this.options.filter(t=>t.trim()==="").length>0){this.error={code:1,message:this.t("Empty options not allowed.")};return}this.onCreate.emit(e)}render(){return p(M,null,p("div",{class:"create-poll"},p("p",null,this.t("Poll Question")),p("textarea",{onInput:()=>{this.error&&this.error.code===0&&(this.error=void 0)},ref:e=>this.question=e,placeholder:this.t("What is your poll for?")}),this.options.map((e,t)=>p("div",{class:"option"},p("input",{placeholder:this.t("Enter an option"),value:e,onInput:i=>this.updateOption(i,t)}),t>1&&p("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(t),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})))),p("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("Add an option")),p("label",null,p("input",{id:"anonymous",type:"checkbox",onChange:e=>this.anonymous=e.target.checked}),this.t("Anonymous")),p("label",null,p("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:this.anonymous?!0:this.hideVotes,onChange:e=>this.hideVotes=e.target.checked}),this.t("Hide results before voting")),p("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("Create Poll")),this.error&&p("span",{class:"error-text"},this.error.message)))}};Sx.style=xae;var Aae=Object.freeze({__proto__:null,dyte_poll:wx,dyte_poll_form:Sx});const Iae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.dyte-select{width:100%;max-width:100%}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}`,Ex=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.stageStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.audioDevices=[],this.speakerDevices=[],this.canProduceAudio=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a;(e=this.meeting)===null||e===void 0||e.self.removeListener("joinStageRequestAccepted",this.stageStateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("stageJoined",this.stageStateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("removedFromStage",this.stageStateListener),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.removeListener("stageStatusUpdate",this.stageStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("joinStageRequestRejected",this.stageStateListener)}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceAudio==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,n?this.canProduceAudio=!0:(s||a)&&t.permissions.canProduceAudio==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0)}meetingChanged(e){e!=null&&bn(async()=>{var t,i,r,n;const{self:s,stage:a}=e,o=await e.self.getAudioDevices(),c=await e.self.getSpeakerDevices(),d=(t=e.self.getCurrentDevices())===null||t===void 0?void 0:t.audio,l=(i=e.self.getCurrentDevices())===null||i===void 0?void 0:i.speaker;this.updateCanProduce(e),s.addListener("joinStageRequestAccepted",this.stageStateListener),s.addListener("stageJoined",this.stageStateListener),s.addListener("removedFromStage",this.stageStateListener),a==null||a.addListener("stageStatusUpdate",this.stageStateListener),s.addListener("stageLeft",this.selfStageLeftListener),s.addListener("joinStageRequestRejected",this.stageStateListener),d!=null?this.audioDevices=[(r=o.find(u=>u.deviceId===d.deviceId))!==null&&r!==void 0?r:d,...o.filter(u=>u.deviceId!==d.deviceId)]:this.audioDevices=o,l!=null?this.speakerDevices=[(n=c.find(u=>u.deviceId===l.deviceId))!==null&&n!==void 0?n:l,...c.filter(u=>u.deviceId!==l.deviceId)]:this.speakerDevices=c})}testAudio(){var e;(e=this.testAudioEl)===null||e===void 0||e.play()}setDevice(e,t){var i,r;const n=e==="audio"?this.audioDevices.find(s=>s.deviceId===t):this.speakerDevices.find(s=>s.deviceId===t);n!=null&&((i=this.meeting)===null||i===void 0||i.self.setDevice(n),n.kind==="audiooutput"&&((r=this.testAudioEl)===null||r===void 0||r.setSinkId(n.deviceId)))}render(){var e,t,i;if(this.meeting==null)return null;let r=0,n=0;const s=(e=this.meeting)===null||e===void 0?void 0:e.self.getCurrentDevices(),a=this.states||U,o=((t=a==null?void 0:a.prefs)===null||t===void 0?void 0:t.muteNotificationSounds)===!0||P7("mute-notification-sounds")==="true";return p(M,null,p("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:c=>this.testAudioEl=c}),this.canProduceAudio&&p("div",{class:"group",part:"microphone-selection"},p("label",null,"Microphone (input)"),p("div",{class:"row"},p("select",{class:"dyte-select",onChange:c=>this.setDevice("audio",c.target.value)},this.audioDevices.map(({deviceId:c,label:d})=>{var l;return p("option",{value:c,selected:((l=s.audio)===null||l===void 0?void 0:l.deviceId)===c},d||`Microphone ${++r}`)})),p("dyte-audio-visualizer",{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,iconPack:this.iconPack,t:this.t}))),p("div",{class:"group",part:"speaker-selection"},this.speakerDevices.length>0&&p("div",null,p("label",null,"Speaker (output)"),p("div",{class:"row"},p("select",{class:"dyte-select",onChange:c=>this.setDevice("speaker",c.target.value)},this.speakerDevices.map(({deviceId:c,label:d})=>{var l;return p("option",{value:c,selected:((l=s.speaker)===null||l===void 0?void 0:l.deviceId)===c},d||`Speaker ${++n}`)})))),p("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),"Test")),p("div",{class:"group",part:"notification-toggle"},p("div",{class:"row"},p("label",{htmlFor:"notification-toggle"},"Notification sound"),p("dyte-switch",{id:"notification-toggle",checked:!o,onDyteChange:c=>{var d;const{checked:l}=c.target,u=!l;this.stateUpdate.emit({prefs:{muteNotificationSounds:u}}),U.prefs=Object.assign(Object.assign({},(d=U.prefs)!==null&&d!==void 0?d:{}),{muteNotificationSounds:u}),C7("mute-notification-sounds",u)},iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{meeting:["meetingChanged"]}}};Ex.style=Iae;const Oae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}`,Tx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.onVideoUpdate=t=>{this.videoEnabled=t.videoEnabled},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.videoDevices=[],this.currentDevice=void 0,this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(e){var t;e!=null&&(this.videoEnabled=e.self.videoEnabled,(t=e.self)===null||t===void 0||t.addListener("videoUpdate",this.onVideoUpdate),bn(async()=>{var i,r;const n=await e.self.getVideoDevices(),s=(i=e.self.getCurrentDevices())===null||i===void 0?void 0:i.video;s!=null?this.videoDevices=[(r=n.find(a=>a.deviceId===s.deviceId))!==null&&r!==void 0?r:s,...n.filter(a=>a.deviceId!==s.deviceId)]:this.videoDevices=n}))}disconnectedCallback(){var e;(e=this.meeting.self)===null||e===void 0||e.removeListener("videoUpdate",this.onVideoUpdate)}async setDevice(e){var t;const i=this.videoDevices.find(r=>r.deviceId===e);this.currentDevice=i,i!=null&&await((t=this.meeting)===null||t===void 0?void 0:t.self.setDevice(i))}render(){var e,t;if(this.meeting==null)return null;let i=0;const r=this.states||U,n=((e=r==null?void 0:r.prefs)===null||e===void 0?void 0:e.mirrorVideo)===!0||P7("mirror-video")==="true";return p(M,null,p("div",{class:"group",part:"tile-preview"},this.videoEnabled===!0?p("dyte-participant-tile",{participant:(t=this.meeting)===null||t===void 0?void 0:t.self,iconPack:this.iconPack,t:this.t,states:r,isPreview:!0}):p("div",{class:"camera-off-helper"},p("dyte-participant-tile",{participant:void 0},p("div",null,p("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),p("div",null,"Camera is off"))))),p("div",{class:"group",part:"camera-selection"},p("label",null,"Camera"),p("div",{class:"row"},p("select",{class:"dyte-select",onChange:s=>this.setDevice(s.target.value)},this.videoDevices.map(({deviceId:s,label:a})=>p("option",{value:s},a||`Camera ${++i}`))))),p("div",{class:"group",part:"mirror-toggle"},p("div",{class:"row"},p("label",{htmlFor:"mirror-toggle"},"Mirror my Video"),p("dyte-switch",{checked:n,iconPack:this.iconPack,t:this.t,onDyteChange:s=>{var a;const{checked:o}=s.target;this.stateUpdate.emit({prefs:{mirrorVideo:o}}),U.prefs=Object.assign(Object.assign({},(a=U.prefs)!==null&&a!==void 0?a:{}),{mirrorVideo:o}),C7("mirror-video",o)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};Tx.style=Oae;var Mae=Object.freeze({__proto__:null,dyte_settings_audio:Ex,dyte_settings_video:Tx});const Lae=":host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}",kx=class{constructor(e){V(this,e),this.tabChange=Q(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ze,this.layout="row",this.iconPack=$,this.t=z(),this.activeTab=void 0,this.tabs=[]}render(){return p(M,null,p("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map(e=>{var t,i,r,n,s;if(e.type==="screenshare"){const a=e.participant,o=$r(a.name);return p("dyte-button",{title:`${o}'s Screen Share`,key:e.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((t=this.activeTab)===null||t===void 0?void 0:t.type)==="screenshare"&&((i=this.activeTab)===null||i===void 0?void 0:i.participant.id)===e.participant.id},onClick:()=>this.tabChange.emit(e)},p("div",{class:"center col"},p("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),p("span",{class:"name"},a.id===((r=this.meeting)===null||r===void 0?void 0:r.self.id)?this.t("You"):tr(o,6))))}else if(e.type==="plugin"){const a=e.plugin;return p("dyte-button",{title:a.name,key:a.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((n=this.activeTab)===null||n===void 0?void 0:n.type)==="plugin"&&((s=this.activeTab)===null||s===void 0?void 0:s.plugin.id)===a.id},onClick:()=>this.tabChange.emit(e)},p("div",{class:"center col"},p("img",{src:a.picture}),p("span",{class:"name"},tr(a.name,6))))}}))}};kx.style=Lae;var Dae=Object.freeze({__proto__:null,dyte_tab_bar:kx}),Nae=Sm;function Sm(){}Sm.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(i,r,n){this.callbacks=this.callbacks||{};var s=arguments.length===3,a=s?arguments[1]:void 0,o=s?arguments[2]:arguments[1];return o._groupName=a,(this.callbacks[i]=this.callbacks[i]||[]).push(o),this},t.once=function(i,r,n){var s=this,a=arguments.length===3,o=a?arguments[1]:void 0,c=a?arguments[2]:arguments[1];function d(){s.off(i,d),c.apply(this,arguments)}return this.on(i,o,d),this},t.releaseGroup=function(i){this.callbacks=this.callbacks||{};var r,n,s,a;for(r in this.callbacks)for(a=this.callbacks[r],n=0,s=a.length;n<s;n++)a[n]._groupName===i&&(a.splice(n,1),n--,s--);return this},t.off=function(i,r){this.callbacks=this.callbacks||{};var n=this.callbacks[i],s;return n?arguments.length===1?(delete this.callbacks[i],this):(s=n.indexOf(r),s!==-1&&(n.splice(s,1),n.length===0&&delete this.callbacks[i]),this):this},t.emit=function(i){this.callbacks=this.callbacks||{};var r=[].slice.call(arguments,1),n=this.callbacks[i],s=this.getWildcardCallbacks(i),a,o,c;if(n)for(c=n.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,r);if(s)for(o=s.length,c=s.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,[i].concat(r));return this},t.getWildcardCallbacks=function(i){this.callbacks=this.callbacks||{};var r,n,s=[];for(r in this.callbacks)n=r.split("*"),(r==="*"||n.length===2&&i.slice(0,n[0].length)===n[0])&&(s=s.concat(this.callbacks[r]));return s}};Sm.mixin(Sm);function Uae(e,t){var i=-1/0;e.getFloatFrequencyData(t);for(var r=4,n=t.length;r<n;r++)t[r]>i&&t[r]<0&&(i=t[r]);return i}var e_;typeof window<"u"&&(e_=window.AudioContext||window.webkitAudioContext);var Qr=null,jae=function(e,r){var i=new Nae;if(!e_)return i;var r=r||{},n=r.smoothing||.1,s=r.interval||50,a=r.threshold,o=r.play,c=r.history||10,d=!0;Qr=r.audioContext||Qr||new e_;var l,u,g;g=Qr.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=n,u=new Float32Array(g.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(l=Qr.createMediaElementSource(e),typeof o>"u"&&(o=!0),a=a||-50):(l=Qr.createMediaStreamSource(e),a=a||-50),l.connect(g),o&&g.connect(Qr.destination),i.speaking=!1,i.suspend=function(){return Qr.suspend()},i.resume=function(){return Qr.resume()},Object.defineProperty(i,"state",{get:function(){return Qr.state}}),Qr.onstatechange=function(){i.emit("state_change",Qr.state)},i.setThreshold=function(w){a=w},i.setInterval=function(w){s=w},i.stop=function(){d=!1,i.emit("volume_change",-100,a),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),g.disconnect(),l.disconnect()},i.speakingHistory=[];for(var m=0;m<c;m++)i.speakingHistory.push(0);var f=function(){setTimeout(function(){if(!!d){var w=Uae(g,u);i.emit("volume_change",w,a);var S=0;if(w>a&&!i.speaking){for(var y=i.speakingHistory.length-3;y<i.speakingHistory.length;y++)S+=i.speakingHistory[y];S>=2&&(i.speaking=!0,i.emit("speaking"))}else if(w<a&&i.speaking){for(var y=0;y<i.speakingHistory.length;y++)S+=i.speakingHistory[y];S==0&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(w>a)),f()}},s)};return f(),i};const Ov=(e,t)=>{if(e==null)return;const i=3,r=Math.round(i/2),n=[...Array(i)].map((m,f)=>{let w=f;return w>r-1&&(w=i-w-1),Math.round((w+1)/(r+1)*t)}),{width:s,height:a}=e,o=e.getContext("2d");let c=2;const d=4,l=s*1/n.length,u=l-d;o.clearRect(0,0,s,a),o.fillStyle="rgb(0,0,0,0.0)",o.fillRect(0,0,s,a);const g=getComputedStyle(e).getPropertyValue("color");o.fillStyle=g,o.strokeStyle=g,o.lineCap="round",o.lineWidth=4,o.beginPath();for(const m of n){const f=Math.min(-Math.abs(m*1.2/10*a)+a/2,a/2-2.5),w=Math.max((a/2-f)*2,5);o.moveTo(c+u/2,f),o.lineTo(c+u/2,f+w),c+=l}o.stroke()},$ae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-6, 24px);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",Cx=class{constructor(e){V(this,e),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){Ov(this.visualizer,0)}disconnectedCallback(){var e,t,i;(e=this.hark)===null||e===void 0||e.stop(),this.audioUpdateListener&&((t=this.participant)===null||t===void 0||t.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&((i=this.participant)===null||i===void 0||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(e){e!=null&&(this.audioUpdateListener=({audioEnabled:t,audioTrack:i})=>{var r;if((r=this.hark)===null||r===void 0||r.stop(),t&&i!=null){this.audioEnabled=!0;const n=new MediaStream;n.addTrack(i),this.calcVolume(n),Ov(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:t,screenShareTracks:i})=>{this.audioUpdateListener({audioEnabled:t&&i.audio!=null,audioTrack:i.audio})},this.screenShareUpdateListener(e),e.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(e),e.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(e){this.hark=jae(e,{play:!1,interval:1e3/10}),this.hark.on("volume_change",t=>{const i=this.volume;let r=Math.round(10**(t/115)*10);r<3&&(r=0);let n=Math.round((i*2+r)/3);i!==n&&(this.volume=n,Ov(this.visualizer,this.volume))})}render(){return p(M,null,p("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:e=>this.visualizer=e,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&p("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t}))}static get watchers(){return{participant:["participantChanged"]}}};Cx.style=$ae;const Vae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}",Px=class{constructor(e){V(this,e),this.dyteChange=Q(this,"dyteChange",4),this.onClick=()=>{!this.readonly&&!this.disabled&&(this.checked=!this.checked)},this.onKeyPress=t=>{if(!this.readonly)switch(t.key){case"Enter":case" ":this.checked=!this.checked;break}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=$,this.t=z()}checkedChange(e){this.dyteChange.emit(e)}render(){return p(M,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},p("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};Px.style=Vae;var Fae=Object.freeze({__proto__:null,dyte_audio_visualizer:Cx,dyte_switch:Px});const Bae=":host{display:block}.file-picker{display:none}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}",Rx=class{constructor(e){V(this,e),this.renderMessage=()=>{if(this.messageItem.type!=="chat")return;const t=this.messageItem.message;switch(t.type){case"text":return p("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-text-message",{message:t,now:this.now,isContinued:this.isContinued,"data-timestamp":t.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return p("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-image-message",{message:t,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":t.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return p("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&p("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),p("dyte-file-message",{message:t,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":t.time.getTime(),ref:this.observeMessage}))}},this.messageItem=void 0,this.isContinued=void 0,this.isUnread=void 0,this.observeMessage=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.now=new Date}render(){return p(M,null,p("slot",null),p("div",{class:"message"},this.renderMessage()))}};Rx.style=Bae;var zae="[object Symbol]";function Hae(e){return typeof e=="symbol"||Yd(e)&&Pp(e)==zae}var Gae=/\s/;function Wae(e){for(var t=e.length;t--&&Gae.test(e.charAt(t)););return t}var qae=/^\s+/;function Jae(e){return e&&e.slice(0,Wae(e)+1).replace(qae,"")}var RT=0/0,Kae=/^[-+]0x[0-9a-f]+$/i,Zae=/^0b[01]+$/i,Qae=/^0o[0-7]+$/i,Yae=parseInt;function xT(e){if(typeof e=="number")return e;if(Hae(e))return RT;if(Kn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Kn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Jae(e);var i=Zae.test(e);return i||Qae.test(e)?Yae(e.slice(2),i?2:8):Kae.test(e)?RT:+e}var Mv=function(){return dc.Date.now()},Xae="Expected a function",eoe=Math.max,toe=Math.min;function ioe(e,t,i){var r,n,s,a,o,c,d=0,l=!1,u=!1,g=!0;if(typeof e!="function")throw new TypeError(Xae);t=xT(t)||0,Kn(i)&&(l=!!i.leading,u="maxWait"in i,s=u?eoe(xT(i.maxWait)||0,t):s,g="trailing"in i?!!i.trailing:g);function m(O){var B=r,H=n;return r=n=void 0,d=O,a=e.apply(H,B),a}function f(O){return d=O,o=setTimeout(y,t),l?m(O):a}function w(O){var B=O-c,H=O-d,ie=t-B;return u?toe(ie,s-H):ie}function S(O){var B=O-c,H=O-d;return c===void 0||B>=t||B<0||u&&H>=s}function y(){var O=Mv();if(S(O))return _(O);o=setTimeout(y,w(O))}function _(O){return o=void 0,g&&r?m(O):(r=n=void 0,a)}function T(){o!==void 0&&clearTimeout(o),d=0,r=c=n=o=void 0}function P(){return o===void 0?a:_(Mv())}function L(){var O=Mv(),B=S(O);if(r=arguments,n=this,c=O,B){if(o===void 0)return f(c);if(u)return clearTimeout(o),o=setTimeout(y,t),m(c)}return o===void 0&&(o=setTimeout(y,t)),a}return L.cancel=T,L.flush=P,L}const roe=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,xx=class{constructor(e){V(this,e),this.currentTime=()=>new Date().getTime(),this.observe=t=>{!t||this.intersectionObserver.observe(t)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.iconPack=$,this.t=z(),this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.pagesToRender=[[]]}async onNewNode(e){if(!this.shouldRenderNewNodes){this.hasNewNodesToRender=!0;return}this.addNodeToRender(e,!1),this.rerender()}connectedCallback(){this.rerender=ioe(this.rerender.bind(this),50,{maxWait:200}),this.loadPage(this.currentTime(),this.pageSize,!0,()=>xa(this.$paginatedList,!1)),this.intersectionObserver=new IntersectionObserver(e=>{bn(()=>{for(const t of e)t.target.id==="bottom-scroll"&&(t.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),t.target.id==="top-scroll"&&t.isIntersecting&&this.loadTop()})})}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&xa(this.$paginatedList)}loadTop(){var e,t,i;if(this.pagesToRender.length===0||this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize)return;const r=this.pagesToRender[0][0],n=(i=(t=(e=r.$attrs$)===null||e===void 0?void 0:e.messageItem)===null||t===void 0?void 0:t.message)===null||i===void 0?void 0:i.timeMs,s=()=>{var a;return(a=r.$elm$)===null||a===void 0?void 0:a.scrollIntoView()};this.loadPage(n-1,this.pageSize,!0,s)}loadBottom(){var e,t,i;if(this.pagesToRender.length===0){this.shouldRenderNewNodes=!0;return}if(this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize){this.shouldRenderNewNodes=!0;return}const r=this.pagesToRender.at(-1).at(-1),n=(i=(t=(e=r.$attrs$)===null||e===void 0?void 0:e.messageItem)===null||t===void 0?void 0:t.message)===null||i===void 0?void 0:i.timeMs,s=()=>{var a;return(a=r.$elm$)===null||a===void 0?void 0:a.scrollIntoView()};this.loadPage(n+1,this.pageSize,!1,s)}addNodeToRender(e,t){if(t){const i=this.pagesToRender[0];if(i&&(i==null?void 0:i.length)<this.pageSize)i.unshift(e);else{const r=[e];this.pagesToRender.unshift(r),this.removeLastPageIfNeeded(!1)}}else{const[i]=this.pagesToRender.slice(-1);if(i&&(i==null?void 0:i.length)<this.pageSize)i.push(e);else{const r=[e];this.pagesToRender.push(r),this.removeLastPageIfNeeded(!0)}}}async loadPage(e,t,i,r){const n=await this.fetchData(e,t,i);if(!(n!=null&&n.length)){i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0);return}const s=this.createNodes(n),a=s[s.length-1];let o=new Proxy(a,{set(c,d,l){return d==="$elm$"&&l&&!c.$elm$&&r(),c[d]=l,!0}});s[s.length-1]=o,s.forEach(c=>this.addNodeToRender(c,i)),this.rerender()}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(e){this.pagesToRender.length>this.pagesAllowed&&(e?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){return p(M,null,p("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},p("slot",null),p("div",{class:"show-new-messages-ctr"},p("dyte-button",{class:{"show-new-messages":!0,active:!this.shouldRenderNewNodes},kind:"icon",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),p("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e}),this.pagesToRender.map(e=>e.map(t=>t)),p("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e})))}};xx.style=roe;var noe=Object.freeze({__proto__:null,dyte_chat_message:Rx,dyte_paginated_list:xx});const soe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}",Ax=class{constructor(e){V(this,e),this.onClose=Q(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=t=>{t.key==="Escape"&&this.open&&this.close()},this.hideCloseButton=!1,this.meeting=void 0,this.config=ze,this.states=void 0,this.size=void 0,this.iconPack=$,this.t=z(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?p(M,null,p("div",{id:"dialog",part:"container"},p("slot",null),!this.hideCloseButton&&p("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};Ax.style=soe;var aoe=Object.freeze({__proto__:null,dyte_dialog:Ax});const ooe="https://cdn.dyte.in/assets/emojis-data.json",coe=async()=>(await fetch(ooe)).json(),doe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);flex-direction:column;padding:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-0, 0px);width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:grid;grid-template-columns:repeat(7, minmax(0, 1fr));padding-bottom:var(--dyte-space-12, 48px);overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(-webkit-min-content, -webkit-max-content);grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,Ix=class{constructor(e){V(this,e),this.emojiClicked=Q(this,"dyteEmojiClicked",7),this.iconPack=$,this.t=z(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){coe().then(e=>{this.emojiList=e,this.handleInputChange({value:""})})}handleInputChange(e){this.filterVal=e.value;const t=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(t)).map(i=>({name:i[1],emoji:this.emojiList.emojis[i[2]]}))}handleEmojiClick(e){this.emojiClicked.emit(e)}mapEmojiList(){var e;return((e=this.emojiList)===null||e===void 0?void 0:e.length)>0?p("div",{id:"loader"},p("dyte-spinner",{iconPack:this.iconPack,t:this.t})):p("div",{id:"emoji-grid",class:"scrollbar"},this.filteredEmojis.map(t=>p("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${t.name}`,class:"emoji",variant:"ghost",kind:"icon",title:t.name,onClick:()=>this.handleEmojiClick(t.emoji)},t.emoji)))}render(){return p(M,null,p("input",{value:this.filterVal,onInput:e=>this.handleInputChange(e.target),placeholder:this.t("Search")}),this.mapEmojiList())}};Ix.style=doe;var loe=Object.freeze({__proto__:null,dyte_emoji_picker:Ix});const uoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}",Ox=class{constructor(e){V(this,e),this.pinnedListener=({isPinned:t})=>{this.isPinned=t},this.stageListener=({webinarStageStatus:t})=>{this.isOnStage=t==="ON_STAGE"},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=$,this.t=z(),this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){this.participant==null||this.participant.removeListener==null||(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("peerStartedPresenting",this.stageListener),this.participant.removeListener("peerStoppedPresenting",this.stageListener))}meetingChanged(e){if(e!=null){const{self:t}=e;this.canDisableParticipantAudio=t.permissions.canAllowParticipantAudio||t.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=t.permissions.canAllowParticipantVideo||t.permissions.canDisableParticipantVideo,this.canKickParticipant=t.permissions.kickParticipant,this.canPinParticipant=t.permissions.pinParticipant,this.canAllowParticipantOnStage=t.permissions.acceptPresentRequests}}participantChanged(e){if(e!=null){if(this.audioEnabled=e.audioEnabled,this.videoEnabled=e.videoEnabled,this.isPinned=e.isPinned,this.isOnStage=e.webinarStageStatus==="ON_STAGE",this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},e.addListener==null)return;e.addListener("audioUpdate",this.audioUpdateListener),e.addListener("videoUpdate",this.videoUpdateListener),e.addListener("pinned",this.pinnedListener),e.addListener("unpinned",this.pinnedListener),e.addListener("peerStartedPresenting",this.stageListener),e.addListener("peerStoppedPresenting",this.stageListener)}}render(){var e,t,i,r,n,s,a,o;const c=this.canDisableParticipantAudio||this.canDisableParticipantVideo||this.canKickParticipant||this.canPinParticipant,d=$r(((e=this.participant)===null||e===void 0?void 0:e.name)||""),l=this.isOnStage||((i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0?void 0:i.viewType)==="GROUP_CALL";return p(M,null,p("div",{class:"left"},p("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),p("p",{class:"name",title:d},tr(d,16)," ",((r=this.meeting)===null||r===void 0?void 0:r.self.id)===((n=this.participant)===null||n===void 0?void 0:n.id)&&this.t("(you)"))),this.view==="sidebar"&&p("div",{class:"right"},l&&p("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),l&&p("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),c&&p("dyte-menu",{iconPack:this.iconPack,t:this.t},p("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},p("dyte-icon",{class:"more",icon:this.iconPack.more_vertical})),p("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&l&&p("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("Unpin"):this.t("Pin")),this.canDisableParticipantAudio&&l&&this.audioEnabled&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},p("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&l&&this.videoEnabled&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},p("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participant.turn_off_video")),((s=this.meeting)===null||s===void 0?void 0:s.meta.viewType)==="WEBINAR"&&this.canAllowParticipantOnStage&&((a=this.participant)===null||a===void 0?void 0:a.id)!==((o=this.meeting)===null||o===void 0?void 0:o.self.id)&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:async()=>{const u=this.participant;this.isOnStage?(u.isPinned&&u.unpin(),await u.removeFromStage()):await u.acceptJoinStageRequest(),this.isOnStage=!this.isOnStage}},p("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),this.canKickParticipant&&p("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var u,g;(u=this.meeting)===null||u===void 0||u.participants.kick((g=this.participant)===null||g===void 0?void 0:g.id)}},p("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick"))))))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};Ox.style=uoe;var poe=Object.freeze({__proto__:null,dyte_participant:Ox});const hoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm']) ::slotted(dyte-network-indicator){right:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}.pinned-icon{position:absolute;left:var(--dyte-space-3, 12px);top:var(--dyte-space-3, 12px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) .pinned-icon{top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}",Mx=class{constructor(e){V(this,e),this.onVideoUpdate=t=>{this.videoState=t,this.participant!=null&&(t.videoEnabled?mt.enableSource(this.participant.id):mt.disableSource(this.participant.id))},this.onPinned=({isPinned:t})=>{this.isPinned=t},this.isSelf=()=>{var t;return this.isPreview||this.participant.id===((t=this.meeting)===null||t===void 0?void 0:t.self.id)},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=ze,this.variant="solid",this.size=void 0,this.iconPack=$,this.t=z()}onVideoRef(e){this.videoEl=e,!(this.isPreview||this.participant==null)&&(mt.addSource(this.participant.id,this.videoEl,this.participant.videoEnabled),this.participant.videoEnabled&&mt.enableSource(this.participant.id))}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.playTimeout&&clearTimeout(this.playTimeout),this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned),mt.removeSource(this.participant.id))}participantsChanged(e){e!=null&&(this.videoState={videoEnabled:e.videoEnabled,videoTrack:e.videoTrack},this.isPinned=e.isPinned,e.addListener("videoUpdate",this.onVideoUpdate),e.addListener("pinned",this.onPinned),e.addListener("unpinned",this.onPinned))}videoStateChanged(e){var t;if(e!=null&&this.videoEl!=null)if(e.videoEnabled){!((t=this.meeting)===null||t===void 0)&&t.__internals__.features.hasFeature(Jy.LOG_PLAYING_FAILURES)&&(this.playTimeout&&clearTimeout(this.playTimeout),this.playTimeout=setTimeout(()=>{var r;(r=this.meeting)===null||r===void 0||r.__internals__.logger.log("dyte-participant-tile::playing_timeout")},6e3));const i=new MediaStream;if(e.videoTrack==null)return;i.addTrack(e.videoTrack),this.videoEl.srcObject=i}else this.playTimeout&&clearTimeout(this.playTimeout),this.videoEl.srcObject=void 0}isMirrored(){var e;if(this.participant!=null&&this.isSelf()){const t=this.states||U,i=(e=t==null?void 0:t.prefs)===null||e===void 0?void 0:e.mirrorVideo;if(typeof i=="boolean")return i}return!1}render(){var e,t,i,r;return p(M,null,p("video",{ref:n=>this.onVideoRef(n),class:{visible:(e=this.videoState)===null||e===void 0?void 0:e.videoEnabled,mirror:this.isMirrored(),[(r=(i=(t=this.config)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},onPlaying:()=>{this.playTimeout&&clearTimeout(this.playTimeout)},onPause:n=>{var s,a;this.isSelf()&&((s=this.meeting)===null||s===void 0?void 0:s.__internals__.features.hasFeature(Jy.PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),(a=n==null?void 0:n.target)===null||a===void 0||a.play())},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&p("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("Pinned"),iconPack:this.iconPack,t:this.t}),p("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};Mx.style=hoe;var goe=Object.freeze({__proto__:null,dyte_participant_tile:Mx});const moe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;height:var(--dyte-space-16, 64px);width:100%;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='md']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='lg']) #sync-button{flex-direction:row;display:flex;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}",Lx=class{constructor(e){V(this,e),this.meeting=void 0,this.iconPack=$,this.t=z(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){var t,i;e!=null&&(this.canSpotlight=e.self.permissions.canSpotlight,this.isSpotlighted=(i=(t=e.spotlight)===null||t===void 0?void 0:t.spotlighted)!==null&&i!==void 0?i:!1)}updateSpotlightState(e){var t;try{(t=this.meeting.spotlight)===null||t===void 0||t.setSpotlighted(e),this.isSpotlighted=e}catch(i){console.error(i)}}render(){if(!!this.canSpotlight)return p(M,null,p("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("Any plugin or screenshare you switch to will sync the change across the meeting")},p("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},p("span",{class:"name"},"Sync"),p("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};Lx.style=moe;var foe=Object.freeze({__proto__:null,dyte_spotlight_indicator:Lx});const voe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",Dx=class{constructor(e){V(this,e),this.logoUrl=void 0,this.config=ze,this.meeting=void 0,this.t=z()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(e){var t;if(e!=null){const i=(t=e==null?void 0:e.designTokens)===null||t===void 0?void 0:t.logo;i!=null&&this.logoUrl==null&&(this.logoUrl=i)}}meetingChanged(e){var t,i,r,n;if(e!=null){const s=(n=(r=(i=(t=e.self)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.header)===null||r===void 0?void 0:r.elements)===null||n===void 0?void 0:n.logo;s!=null&&this.logoUrl==null&&(this.logoUrl=s)}}render(){if(!this.logoUrl||this.logoUrl==="")return null;const e=this.logoUrl,t=this.t("Logo");return p(M,null,p("img",{src:e,alt:t}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};Dx.style=voe;var yoe=Object.freeze({__proto__:null,dyte_logo:Dx});const _oe=class{constructor(e){V(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=$,this.t=z()}render(){const e=vw(this.message.link);return p(M,null,!this.isContinued&&p(Rp,{name:this.message.displayName,time:this.message.time,now:this.now}),p("div",{class:"body",part:"body"},p("div",{class:"file"},p("div",{class:"file-data"},p("div",{class:"name"},this.message.name),p("div",{class:"file-data-split"},p("div",{class:"ext"},vne(this.message.name)),p("span",{class:"divider"}),p("div",{class:"size"},yne(this.message.size)))),p("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>_w(e,{name:this.message.name,fallbackName:"file"}),part:"button"},p("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},boe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}",Nx=class{constructor(e){V(this,e),this.stateUpdate=Q(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=$,this.t=z(),this.status="loading"}render(){return p(M,null,!this.isContinued&&p(Rp,{name:this.message.displayName,time:this.message.time,now:this.now}),p("div",{class:"body",part:"body"},p("div",{class:{image:!0,loaded:this.status==="loaded"}},p("img",{src:vw(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&(this.stateUpdate.emit({image:this.message}),U.image=this.message)}}),this.status==="loading"&&p("div",{class:"image-spinner",title:this.t("Loading image"),"aria-label":this.t("Loading image")},p("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&p("div",{class:"image-errored",title:this.t("Image not found"),"aria-label":this.t("Image not found")},p("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&p("div",{class:"actions"},p("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),U.image=this.message},iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.full_screen_maximize})),p("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>_w(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},p("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};Nx.style=boe;const woe=/(https?:\/\/[^\s]+)/,Soe=e=>{const t=e.split(" "),i=t.length-1;return t.map((r,n)=>woe.test(r)?p("span",null,p("a",{href:r,target:"_blank",rel:"noopener noreferrer"},r),n!==i?" ":""):`${r}${n!==i?" ":""}`)},Eoe=({message:e})=>e.split(`
`).map(i=>p("p",null,Soe(i))),Toe=class{constructor(e){V(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=$,this.t=z()}render(){return p(M,null,!this.isContinued&&p(Rp,{name:this.message.displayName,time:this.message.time,now:this.now}),p("div",{class:"body",part:"body"},p("div",{class:{text:!0,emoji:vre(this.message.message)}},p(Eoe,{message:this.message.message}))))}};var koe=Object.freeze({__proto__:null,dyte_file_message:_oe,dyte_image_message:Nx,dyte_text_message:Toe});function xp(e){return e.split("-")[0]}function Of(e){return e.split("-")[1]}function Ap(e){return["top","bottom"].includes(xp(e))?"x":"y"}function bw(e){return e==="y"?"height":"width"}function AT(e,t,i){let{reference:r,floating:n}=e;const s=r.x+r.width/2-n.width/2,a=r.y+r.height/2-n.height/2,o=Ap(t),c=bw(o),d=r[c]/2-n[c]/2,l=xp(t),u=o==="x";let g;switch(l){case"top":g={x:s,y:r.y-n.height};break;case"bottom":g={x:s,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:a};break;case"left":g={x:r.x-n.width,y:a};break;default:g={x:r.x,y:r.y}}switch(Of(t)){case"start":g[o]-=d*(i&&u?-1:1);break;case"end":g[o]+=d*(i&&u?-1:1);break}return g}const Coe=async(e,t,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:a}=i,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:n}),{x:l,y:u}=AT(d,r,c),g=r,m={},f=0;for(let w=0;w<o.length;w++){const{name:S,fn:y}=o[w],{x:_,y:T,data:P,reset:L}=await y({x:l,y:u,initialPlacement:r,placement:g,strategy:n,middlewareData:m,rects:d,platform:a,elements:{reference:e,floating:t}});if(l=_!=null?_:l,u=T!=null?T:u,m={...m,[S]:{...m[S],...P}},L&&f<=50){f++,typeof L=="object"&&(L.placement&&(g=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:n}):L.rects),{x:l,y:u}=AT(d,g,c)),w=-1;continue}}return{x:l,y:u,placement:g,strategy:n,middlewareData:m}};function Poe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ux(e){return typeof e!="number"?Poe(e):{top:e,right:e,bottom:e,left:e}}function Em(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function jx(e,t){var i;t===void 0&&(t={});const{x:r,y:n,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:l="viewport",elementContext:u="floating",altBoundary:g=!1,padding:m=0}=t,f=Ux(m),S=o[g?u==="floating"?"reference":"floating":u],y=Em(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(S)))==null||i?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:d,rootBoundary:l,strategy:c})),_=u==="floating"?{...a.floating,x:r,y:n}:a.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),P=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},L=Em(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:T,strategy:c}):_);return{top:(y.top-L.top+f.top)/P.y,bottom:(L.bottom-y.bottom+f.bottom)/P.y,left:(y.left-L.left+f.left)/P.x,right:(L.right-y.right+f.right)/P.x}}const Roe=Math.min,xoe=Math.max;function t_(e,t,i){return xoe(e,Roe(t,i))}const Aoe=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:r=0}=e!=null?e:{},{x:n,y:s,placement:a,rects:o,platform:c}=t;if(i==null)return{};const d=Ux(r),l={x:n,y:s},u=Ap(a),g=bw(u),m=await c.getDimensions(i),f=u==="y"?"top":"left",w=u==="y"?"bottom":"right",S=o.reference[g]+o.reference[u]-l[u]-o.floating[g],y=l[u]-o.reference[u],_=await(c.getOffsetParent==null?void 0:c.getOffsetParent(i));let T=_?u==="y"?_.clientHeight||0:_.clientWidth||0:0;T===0&&(T=o.floating[g]);const P=S/2-y/2,L=d[f],O=T-m[g]-d[w],B=T/2-m[g]/2+P,H=t_(L,B,O),K=Of(a)!=null&&B!=H&&o.reference[g]/2-(B<L?d[f]:d[w])-m[g]/2<0?B<L?L-B:O-B:0;return{[u]:l[u]-K,data:{[u]:H,centerOffset:B-H}}}}),Ioe={left:"right",right:"left",bottom:"top",top:"bottom"};function Tm(e){return e.replace(/left|right|bottom|top/g,t=>Ioe[t])}function Ooe(e,t,i){i===void 0&&(i=!1);const r=Of(e),n=Ap(e),s=bw(n);let a=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Tm(a)),{main:a,cross:Tm(a)}}const Moe={start:"end",end:"start"};function IT(e){return e.replace(/start|end/g,t=>Moe[t])}function Loe(e){const t=Tm(e);return[IT(e),t,IT(t)]}const $x=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:r,middlewareData:n,rects:s,initialPlacement:a,platform:o,elements:c}=t,{mainAxis:d=!0,crossAxis:l=!0,fallbackPlacements:u,fallbackStrategy:g="bestFit",flipAlignment:m=!0,...f}=e,w=xp(r),y=u||(w===a||!m?[Tm(a)]:Loe(a)),_=[a,...y],T=await jx(t,f),P=[];let L=((i=n.flip)==null?void 0:i.overflows)||[];if(d&&P.push(T[w]),l){const{main:ie,cross:K}=Ooe(r,s,await(o.isRTL==null?void 0:o.isRTL(c.floating)));P.push(T[ie],T[K])}if(L=[...L,{placement:r,overflows:P}],!P.every(ie=>ie<=0)){var O,B;const ie=((O=(B=n.flip)==null?void 0:B.index)!=null?O:0)+1,K=_[ie];if(K)return{data:{index:ie,overflows:L},reset:{placement:K}};let ge="bottom";switch(g){case"bestFit":{var H;const He=(H=L.map(Xt=>[Xt,Xt.overflows.filter(ei=>ei>0).reduce((ei,es)=>ei+es,0)]).sort((Xt,ei)=>Xt[1]-ei[1])[0])==null?void 0:H[0].placement;He&&(ge=He);break}case"initialPlacement":ge=a;break}if(r!==ge)return{reset:{placement:ge}}}return{}}}};async function Doe(e,t){const{placement:i,platform:r,elements:n}=e,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),a=xp(i),o=Of(i),c=Ap(i)==="x",d=["left","top"].includes(a)?-1:1,l=s&&c?-1:1,u=typeof t=="function"?t(e):t;let{mainAxis:g,crossAxis:m,alignmentAxis:f}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return o&&typeof f=="number"&&(m=o==="end"?f*-1:f),c?{x:m*l,y:g*d}:{x:g*d,y:m*l}}const Vx=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:r}=t,n=await Doe(t,e);return{x:i+n.x,y:r+n.y,data:n}}}};function Noe(e){return e==="x"?"y":"x"}const Fx=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:n}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:S=>{let{x:y,y:_}=S;return{x:y,y:_}}},...c}=e,d={x:i,y:r},l=await jx(t,c),u=Ap(xp(n)),g=Noe(u);let m=d[u],f=d[g];if(s){const S=u==="y"?"top":"left",y=u==="y"?"bottom":"right",_=m+l[S],T=m-l[y];m=t_(_,m,T)}if(a){const S=g==="y"?"top":"left",y=g==="y"?"bottom":"right",_=f+l[S],T=f-l[y];f=t_(_,f,T)}const w=o.fn({...t,[u]:m,[g]:f});return{...w,data:{x:w.x-i,y:w.y-r}}}}};function Dr(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zn(e){return Dr(e).getComputedStyle(e)}function La(e){return zx(e)?(e.nodeName||"").toLowerCase():""}let Eh;function Bx(){if(Eh)return Eh;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Eh=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Eh):navigator.userAgent}function Is(e){return e instanceof Dr(e).HTMLElement}function Da(e){return e instanceof Dr(e).Element}function zx(e){return e instanceof Dr(e).Node}function OT(e){if(typeof ShadowRoot>"u")return!1;const t=Dr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Mf(e){const{overflow:t,overflowX:i,overflowY:r,display:n}=Zn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(n)}function Uoe(e){return["table","td","th"].includes(La(e))}function ww(e){const t=/firefox/i.test(Bx()),i=Zn(e),r=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(r?r!=="none":!1)||t&&i.willChange==="filter"||t&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(n=>i.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const s=i.contain;return s!=null?s.includes(n):!1})}function Hx(){return!/^((?!chrome|android).)*safari/i.test(Bx())}function Sw(e){return["html","body","#document"].includes(La(e))}const MT=Math.min,Eu=Math.max,km=Math.round;function Gx(e){const t=Zn(e);let i=parseFloat(t.width),r=parseFloat(t.height);const n=e.offsetWidth,s=e.offsetHeight,a=km(i)!==n||km(r)!==s;return a&&(i=n,r=s),{width:i,height:r,fallback:a}}function Wx(e){return Da(e)?e:e.contextElement}const qx={x:1,y:1};function Ed(e){const t=Wx(e);if(!Is(t))return qx;const i=t.getBoundingClientRect(),{width:r,height:n,fallback:s}=Gx(t);let a=(s?km(i.width):i.width)/r,o=(s?km(i.height):i.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}function ip(e,t,i,r){var n,s;t===void 0&&(t=!1),i===void 0&&(i=!1);const a=e.getBoundingClientRect(),o=Wx(e);let c=qx;t&&(r?Da(r)&&(c=Ed(r)):c=Ed(e));const d=o?Dr(o):window,l=!Hx()&&i;let u=(a.left+(l&&((n=d.visualViewport)==null?void 0:n.offsetLeft)||0))/c.x,g=(a.top+(l&&((s=d.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,m=a.width/c.x,f=a.height/c.y;if(o){const w=Dr(o),S=r&&Da(r)?Dr(r):r;let y=w.frameElement;for(;y&&r&&S!==w;){const _=Ed(y),T=y.getBoundingClientRect(),P=getComputedStyle(y);T.x+=(y.clientLeft+parseFloat(P.paddingLeft))*_.x,T.y+=(y.clientTop+parseFloat(P.paddingTop))*_.y,u*=_.x,g*=_.y,m*=_.x,f*=_.y,u+=T.x,g+=T.y,y=Dr(y).frameElement}}return{width:m,height:f,top:g,right:u+m,bottom:g+f,left:u,x:u,y:g}}function Wa(e){return((zx(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lf(e){return Da(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Jx(e){return ip(Wa(e)).left+Lf(e).scrollLeft}function joe(e,t,i){const r=Is(t),n=Wa(t),s=ip(e,!0,i==="fixed",t);let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&i!=="fixed")if((La(t)!=="body"||Mf(n))&&(a=Lf(t)),Is(t)){const c=ip(t,!0);o.x=c.x+t.clientLeft,o.y=c.y+t.clientTop}else n&&(o.x=Jx(n));return{x:s.left+a.scrollLeft-o.x,y:s.top+a.scrollTop-o.y,width:s.width,height:s.height}}function rp(e){if(La(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(OT(e)?e.host:null)||Wa(e);return OT(t)?t.host:t}function LT(e){return!Is(e)||Zn(e).position==="fixed"?null:e.offsetParent}function $oe(e){let t=rp(e);for(;Is(t)&&!Sw(t);){if(ww(t))return t;t=rp(t)}return null}function DT(e){const t=Dr(e);let i=LT(e);for(;i&&Uoe(i)&&Zn(i).position==="static";)i=LT(i);return i&&(La(i)==="html"||La(i)==="body"&&Zn(i).position==="static"&&!ww(i))?t:i||$oe(e)||t}function Voe(e){return Gx(e)}function Foe(e){let{rect:t,offsetParent:i,strategy:r}=e;const n=Is(i),s=Wa(i);if(i===s)return t;let a={scrollLeft:0,scrollTop:0},o={x:1,y:1};const c={x:0,y:0};if((n||!n&&r!=="fixed")&&((La(i)!=="body"||Mf(s))&&(a=Lf(i)),Is(i))){const d=ip(i);o=Ed(i),c.x=d.x+i.clientLeft,c.y=d.y+i.clientTop}return{width:t.width*o.x,height:t.height*o.y,x:t.x*o.x-a.scrollLeft*o.x+c.x,y:t.y*o.y-a.scrollTop*o.y+c.y}}function Boe(e,t){const i=Dr(e),r=Wa(e),n=i.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(n){s=n.width,a=n.height;const d=Hx();(d||!d&&t==="fixed")&&(o=n.offsetLeft,c=n.offsetTop)}return{width:s,height:a,x:o,y:c}}function zoe(e){var t;const i=Wa(e),r=Lf(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=Eu(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=Eu(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0);let o=-r.scrollLeft+Jx(e);const c=-r.scrollTop;return Zn(n||i).direction==="rtl"&&(o+=Eu(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:a,x:o,y:c}}function Kx(e){const t=rp(e);return Sw(t)?e.ownerDocument.body:Is(t)&&Mf(t)?t:Kx(t)}function Zx(e,t){var i;t===void 0&&(t=[]);const r=Kx(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),s=Dr(r);return n?t.concat(s,s.visualViewport||[],Mf(r)?r:[]):t.concat(r,Zx(r))}function Hoe(e,t){const i=ip(e,!0,t==="fixed"),r=i.top+e.clientTop,n=i.left+e.clientLeft,s=Is(e)?Ed(e):{x:1,y:1},a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=n*s.x,d=r*s.y;return{top:d,left:c,right:c+a,bottom:d+o,x:c,y:d,width:a,height:o}}function NT(e,t,i){return t==="viewport"?Em(Boe(e,i)):Da(t)?Hoe(t,i):Em(zoe(Wa(e)))}function Goe(e,t){const i=t.get(e);if(i)return i;let r=Zx(e).filter(o=>Da(o)&&La(o)!=="body"),n=null;const s=Zn(e).position==="fixed";let a=s?rp(e):e;for(;Da(a)&&!Sw(a);){const o=Zn(a),c=ww(a);(s?!c&&!n:!c&&o.position==="static"&&!!n&&["absolute","fixed"].includes(n.position))?r=r.filter(l=>l!==a):n=o,a=rp(a)}return t.set(e,r),r}function Woe(e){let{element:t,boundary:i,rootBoundary:r,strategy:n}=e;const a=[...i==="clippingAncestors"?Goe(t,this._c):[].concat(i),r],o=a[0],c=a.reduce((d,l)=>{const u=NT(t,l,n);return d.top=Eu(u.top,d.top),d.right=MT(u.right,d.right),d.bottom=MT(u.bottom,d.bottom),d.left=Eu(u.left,d.left),d},NT(t,o,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const qoe={getClippingRect:Woe,convertOffsetParentRelativeRectToViewportRelativeRect:Foe,isElement:Da,getDimensions:Voe,getOffsetParent:DT,getDocumentElement:Wa,getScale:Ed,async getElementRects(e){let{reference:t,floating:i,strategy:r}=e;const n=this.getOffsetParent||DT,s=this.getDimensions;return{reference:joe(t,await n(i),r),floating:{x:0,y:0,...await s(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Zn(e).direction==="rtl"},Qx=(e,t,i)=>{const r=new Map,n={platform:qoe,...i},s={...n.platform,_c:r};return Coe(e,t,{...n,platform:s})},Joe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}",Yx=class{constructor(t){V(this,t),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.iconPack=$,this.t=z()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){Qx(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[Vx(10),$x(),Fx({padding:5})]}).then(({x:t,y:i})=>{Object.assign(this.menuListEl.style,{left:`${t}px`,top:`${i}px`})})}render(){return p(M,null,p("span",{id:"trigger",ref:t=>this.triggerEl=t,onClick:()=>{this.clickedThis=!0,this.menuListEl.style.display!=="block"?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},p("slot",{name:"trigger"})),p("span",{part:"menu-list",id:"menu-list",ref:t=>this.menuListEl=t},p("slot",null)))}};Yx.style=Joe;const Koe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",Xx=class{constructor(e){V(this,e),this.size=void 0,this.iconPack=$,this.t=z()}render(){return p(M,null,p("slot",{name:"start"}),p("slot",null),p("slot",{name:"end"}))}};Xx.style=Koe;const Zoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-webkit-max-content;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}",eA=class{constructor(e){V(this,e),this.iconPack=$,this.t=z()}render(){return p(M,null,p("slot",null))}};eA.style=Zoe;var Qoe=Object.freeze({__proto__:null,dyte_menu:Yx,dyte_menu_item:Xx,dyte_menu_list:eA});const Yoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));overflow:hidden;border-radius:9999px}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([size='sm']){height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);font-size:20px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}",tA=class{constructor(e){V(this,e),this.getAvatar=()=>{var t;const i=$r(((t=this.participant)===null||t===void 0?void 0:t.name)||"");let r;if(this.participant!=null&&"picture"in this.participant&&(r=this.participant.picture),r&&r.length>0&&this.imageState!=="errored")return p("div",{class:"image-ctr"},this.imageState==="loading"&&p("dyte-spinner",{iconPack:this.iconPack,t:this.t}),p("img",{src:r,class:{loaded:this.imageState==="loaded"},loading:"lazy",title:i,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const n=j7(i);return p("div",{class:"initials",title:i,part:"initials"},n)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=$,this.t=z(),this.imageState="loading"}render(){return p(M,null,this.getAvatar())}};tA.style=Yoe;var Xoe=Object.freeze({__proto__:null,dyte_avatar:tA});const ece=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(
    --dyte-controlbar-button-background-color,
    rgb(var(--dyte-colors-background-1000, 8 8 8))
  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px)}:host([variant='horizontal']) .label{display:block;font-size:14px}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}`,iA=class{constructor(e){V(this,e),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=$,this.t=z(),this.brandIcon=!1}render(){return p(M,null,p("button",{"aria-label":this.label,part:"button"},this.isLoading?p("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):p("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),p("span",{class:"label",part:"label"},this.label),this.showWarning&&p("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};iA.style=ece;var tce=Object.freeze({__proto__:null,dyte_controlbar_button:iA});const ice=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip,#arrow{position:absolute;background-color:var(--background-color)}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}:host([kind='block']){display:block}",rA=class{constructor(e){V(this,e),this.dyteOpenChange=Q(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout(()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),this.size==="sm"&&setTimeout(()=>{this.isInFocus&&this.hideMenu()},1e3))},this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=$,this.t=z(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),bn(()=>{this.openChanged(this.open)})}openChanged(e){e?this.showMenu():this.hideMenu()}update(){Qx(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[Vx(8),$x(),Fx({padding:5}),Aoe({element:this.arrowEl})]}).then(({x:e,y:t,placement:i,middlewareData:r})=>{Object.assign(this.tooltipEl.style,{left:`${e}px`,top:`${t}px`});const{x:n,y:s}=r.arrow,a={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:n!=null?`${n}px`:"",top:s!=null?`${s}px`:"",right:"",bottom:"",[a]:"-4px"})})}render(){return p(M,null,p("span",{part:"trigger",id:"trigger",ref:e=>this.triggerEl=e},p("slot",null)),p("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:e=>this.tooltipEl=e},p("div",{id:"arrow",ref:e=>this.arrowEl=e,part:"arrow"}),this.label,p("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};rA.style=ice;var rce=Object.freeze({__proto__:null,dyte_tooltip:rA});const nce=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@-webkit-keyframes spin{to{transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}.spinner{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;-webkit-animation-duration:0.7s;animation-duration:0.7s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",nA=class{constructor(e){V(this,e),this.iconPack=$,this.size="md",this.t=z()}render(){return p(M,null,p("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};nA.style=nce;var sce=Object.freeze({__proto__:null,dyte_spinner:nA});const ace=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}",sA=class{constructor(e){V(this,e),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=$,this.t=z()}render(){return p(M,null,p("button",{part:"button"},p("span",{class:"start"},p("slot",{name:"start"})),p("span",{class:"content",part:"content"},p("slot",null)),p("span",{class:"end"},p("slot",{name:"end"}))))}};sA.style=ace;var oce=Object.freeze({__proto__:null,dyte_button:sA});const cce=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}",dce=e=>{try{return JSON.parse(e)}catch{return e}},aA=class{constructor(e){V(this,e),this.icon=void 0,this.iconPack=$,this.t=z()}render(){return p(M,null,p("div",{class:"icon-wrapper",innerHTML:dce(this.icon),part:"wrapper"}))}};aA.style=cce;var lce=Object.freeze({__proto__:null,dyte_icon:aA});(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();DX();const uce=Gr("dyte-audio-visualizer"),pce=Gr("dyte-avatar"),hce=Gr("dyte-button"),gce=Gr("dyte-clock"),mce=Gr("dyte-dialog-manager"),Lv=Gr("dyte-icon"),fce=Gr("dyte-leave-button"),vce=Gr("dyte-mic-toggle"),yce=Gr("dyte-participant-count"),_ce=Gr("dyte-participants-audio"),bce=Gr("dyte-recording-indicator"),wce=Gr("dyte-tooltip");var oA=typeof global=="object"&&global&&global.Object===Object&&global,Sce=typeof self=="object"&&self&&self.Object===Object&&self,il=oA||Sce||Function("return this")(),Cm=il.Symbol,cA=Object.prototype,Ece=cA.hasOwnProperty,Tce=cA.toString,jl=Cm?Cm.toStringTag:void 0;function kce(e){var t=Ece.call(e,jl),i=e[jl];try{e[jl]=void 0;var r=!0}catch{}var n=Tce.call(e);return r&&(t?e[jl]=i:delete e[jl]),n}var Cce=Object.prototype,Pce=Cce.toString;function Rce(e){return Pce.call(e)}var xce="[object Null]",Ace="[object Undefined]",UT=Cm?Cm.toStringTag:void 0;function Df(e){return e==null?e===void 0?Ace:xce:UT&&UT in Object(e)?kce(e):Rce(e)}function lc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ip(e){return e!=null&&typeof e=="object"}const Ice=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],Oce={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},jT={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},$T={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}};function Dv(e){e=e.trim();let t="0",i="0",r="0";return e.length==4?(t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),[+t,+i,+r]}const Mce=e=>{const t=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const n=document.createElement("link");n.rel="preconnect",n.setAttribute("data-dyte-font","true"),n.href="https://fonts.googleapis.com";const s=n.cloneNode(!0);s.href="https://fonts.gstatic.com",s.crossOrigin="",i.push(n,s)}const r=document.createElement("link");r.rel="stylesheet",r.setAttribute("data-dyte-font",e),r.href=encodeURI(`https://fonts.googleapis.com/css2?family=${e}:wght@${t.join(";")}&display=swap`),i.push(r),document.head.append(...i)},Lce=(e,t)=>{Ice.forEach(i=>{e.style.setProperty(`--dyte-space-${i}`,`${i*t}px`)})},Dce=(e,t)=>{if(t in jT){const i=jT[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-width-${r}`,`${i[r]}px`)})}},Nce=(e,t)=>{if(t in $T){const i=$T[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-radius-${r}`,`${i[r]}px`)})}},VT=(e,t)=>{Object.keys(t).forEach(i=>{const r=t[i];if(typeof r=="string")if(i==="text"||i==="text-on-brand"){const n=Dv(r).join(" ");e.style.setProperty(`--dyte-colors-${i}-1000`,`${n}`),e.style.setProperty(`--dyte-colors-${i}-900`,`${n} / 0.88`),e.style.setProperty(`--dyte-colors-${i}-800`,`${n} / 0.76`),e.style.setProperty(`--dyte-colors-${i}-700`,`${n} / 0.64`),e.style.setProperty(`--dyte-colors-${i}-600`,`${n} / 0.52`)}else{const n=Dv(r).join(" ");e.style.setProperty(`--dyte-colors-${i}`,n)}else typeof r=="object"&&Object.keys(r).forEach(n=>{const s=r[n],a=Dv(s).join(" ");e.style.setProperty(`--dyte-colors-${i}-${n}`,a)})})},Uce=(e,{spacingBase:t,borderRadius:i,borderWidth:r,colors:n,fontFamily:s,googleFont:a,theme:o})=>{if(typeof e!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(Mce(a),e.style.setProperty("--dyte-font-family",a)),typeof s=="string"&&e.style.setProperty("--dyte-font-family",s),typeof t=="number"&&Lce(e,t),typeof r=="string"&&Dce(e,r),typeof i=="string"&&Nce(e,i),typeof o=="string"){const c=Oce[o];c!=null&&VT(e,c)}typeof n=="object"&&VT(e,n)};function jce(){this.__data__=[],this.size=0}function Nf(e,t){return e===t||e!==e&&t!==t}function Uf(e,t){for(var i=e.length;i--;)if(Nf(e[i][0],t))return i;return-1}var $ce=Array.prototype,Vce=$ce.splice;function Fce(e){var t=this.__data__,i=Uf(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():Vce.call(t,i,1),--this.size,!0}function Bce(e){var t=this.__data__,i=Uf(t,e);return i<0?void 0:t[i][1]}function zce(e){return Uf(this.__data__,e)>-1}function Hce(e,t){var i=this.__data__,r=Uf(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function $s(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}$s.prototype.clear=jce;$s.prototype.delete=Fce;$s.prototype.get=Bce;$s.prototype.has=zce;$s.prototype.set=Hce;function Gce(){this.__data__=new $s,this.size=0}function Wce(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function qce(e){return this.__data__.get(e)}function Jce(e){return this.__data__.has(e)}var Kce="[object AsyncFunction]",Zce="[object Function]",Qce="[object GeneratorFunction]",Yce="[object Proxy]";function Ew(e){if(!lc(e))return!1;var t=Df(e);return t==Zce||t==Qce||t==Kce||t==Yce}var Nv=il["__core-js_shared__"],FT=function(){var e=/[^.]+$/.exec(Nv&&Nv.keys&&Nv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Xce(e){return!!FT&&FT in e}var ede=Function.prototype,tde=ede.toString;function ide(e){if(e!=null){try{return tde.call(e)}catch{}try{return e+""}catch{}}return""}var rde=/[\\^$.*+?()[\]{}|]/g,nde=/^\[object .+?Constructor\]$/,sde=Function.prototype,ade=Object.prototype,ode=sde.toString,cde=ade.hasOwnProperty,dde=RegExp("^"+ode.call(cde).replace(rde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lde(e){if(!lc(e)||Xce(e))return!1;var t=Ew(e)?dde:nde;return t.test(ide(e))}function ude(e,t){return e==null?void 0:e[t]}function Tw(e,t){var i=ude(e,t);return lde(i)?i:void 0}var dA=Tw(il,"Map"),np=Tw(Object,"create");function pde(){this.__data__=np?np(null):{},this.size=0}function hde(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gde="__lodash_hash_undefined__",mde=Object.prototype,fde=mde.hasOwnProperty;function vde(e){var t=this.__data__;if(np){var i=t[e];return i===gde?void 0:i}return fde.call(t,e)?t[e]:void 0}var yde=Object.prototype,_de=yde.hasOwnProperty;function bde(e){var t=this.__data__;return np?t[e]!==void 0:_de.call(t,e)}var wde="__lodash_hash_undefined__";function Sde(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=np&&t===void 0?wde:t,this}function Qo(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Qo.prototype.clear=pde;Qo.prototype.delete=hde;Qo.prototype.get=vde;Qo.prototype.has=bde;Qo.prototype.set=Sde;function Ede(){this.size=0,this.__data__={hash:new Qo,map:new(dA||$s),string:new Qo}}function Tde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function jf(e,t){var i=e.__data__;return Tde(t)?i[typeof t=="string"?"string":"hash"]:i.map}function kde(e){var t=jf(this,e).delete(e);return this.size-=t?1:0,t}function Cde(e){return jf(this,e).get(e)}function Pde(e){return jf(this,e).has(e)}function Rde(e,t){var i=jf(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function rl(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}rl.prototype.clear=Ede;rl.prototype.delete=kde;rl.prototype.get=Cde;rl.prototype.has=Pde;rl.prototype.set=Rde;var xde=200;function Ade(e,t){var i=this.__data__;if(i instanceof $s){var r=i.__data__;if(!dA||r.length<xde-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new rl(r)}return i.set(e,t),this.size=i.size,this}function nl(e){var t=this.__data__=new $s(e);this.size=t.size}nl.prototype.clear=Gce;nl.prototype.delete=Wce;nl.prototype.get=qce;nl.prototype.has=Jce;nl.prototype.set=Ade;var Pm=function(){try{var e=Tw(Object,"defineProperty");return e({},"",{}),e}catch{}}();function kw(e,t,i){t=="__proto__"&&Pm?Pm(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function i_(e,t,i){(i!==void 0&&!Nf(e[t],i)||i===void 0&&!(t in e))&&kw(e,t,i)}function Ide(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++n];if(i(s[c],c,s)===!1)break}return t}}var Ode=Ide(),lA=typeof xe=="object"&&xe&&!xe.nodeType&&xe,BT=lA&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Mde=BT&&BT.exports===lA,zT=Mde?il.Buffer:void 0,HT=zT?zT.allocUnsafe:void 0;function Lde(e,t){if(t)return e.slice();var i=e.length,r=HT?HT(i):new e.constructor(i);return e.copy(r),r}var GT=il.Uint8Array;function Dde(e){var t=new e.constructor(e.byteLength);return new GT(t).set(new GT(e)),t}function Nde(e,t){var i=t?Dde(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Ude(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var WT=Object.create,jde=function(){function e(){}return function(t){if(!lc(t))return{};if(WT)return WT(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function $de(e,t){return function(i){return e(t(i))}}var uA=$de(Object.getPrototypeOf,Object),Vde=Object.prototype;function pA(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Vde;return e===i}function Fde(e){return typeof e.constructor=="function"&&!pA(e)?jde(uA(e)):{}}var Bde="[object Arguments]";function qT(e){return Ip(e)&&Df(e)==Bde}var hA=Object.prototype,zde=hA.hasOwnProperty,Hde=hA.propertyIsEnumerable,r_=qT(function(){return arguments}())?qT:function(e){return Ip(e)&&zde.call(e,"callee")&&!Hde.call(e,"callee")},n_=Array.isArray,Gde=9007199254740991;function gA(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Gde}function Cw(e){return e!=null&&gA(e.length)&&!Ew(e)}function Wde(e){return Ip(e)&&Cw(e)}function qde(){return!1}var mA=typeof xe=="object"&&xe&&!xe.nodeType&&xe,JT=mA&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Jde=JT&&JT.exports===mA,KT=Jde?il.Buffer:void 0,Kde=KT?KT.isBuffer:void 0,fA=Kde||qde,Zde="[object Object]",Qde=Function.prototype,Yde=Object.prototype,vA=Qde.toString,Xde=Yde.hasOwnProperty,ele=vA.call(Object);function tle(e){if(!Ip(e)||Df(e)!=Zde)return!1;var t=uA(e);if(t===null)return!0;var i=Xde.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&vA.call(i)==ele}var ile="[object Arguments]",rle="[object Array]",nle="[object Boolean]",sle="[object Date]",ale="[object Error]",ole="[object Function]",cle="[object Map]",dle="[object Number]",lle="[object Object]",ule="[object RegExp]",ple="[object Set]",hle="[object String]",gle="[object WeakMap]",mle="[object ArrayBuffer]",fle="[object DataView]",vle="[object Float32Array]",yle="[object Float64Array]",_le="[object Int8Array]",ble="[object Int16Array]",wle="[object Int32Array]",Sle="[object Uint8Array]",Ele="[object Uint8ClampedArray]",Tle="[object Uint16Array]",kle="[object Uint32Array]",ht={};ht[vle]=ht[yle]=ht[_le]=ht[ble]=ht[wle]=ht[Sle]=ht[Ele]=ht[Tle]=ht[kle]=!0;ht[ile]=ht[rle]=ht[mle]=ht[nle]=ht[fle]=ht[sle]=ht[ale]=ht[ole]=ht[cle]=ht[dle]=ht[lle]=ht[ule]=ht[ple]=ht[hle]=ht[gle]=!1;function Cle(e){return Ip(e)&&gA(e.length)&&!!ht[Df(e)]}function Ple(e){return function(t){return e(t)}}var yA=typeof xe=="object"&&xe&&!xe.nodeType&&xe,Tu=yA&&typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Rle=Tu&&Tu.exports===yA,Uv=Rle&&oA.process,ZT=function(){try{var e=Tu&&Tu.require&&Tu.require("util").types;return e||Uv&&Uv.binding&&Uv.binding("util")}catch{}}(),QT=ZT&&ZT.isTypedArray,_A=QT?Ple(QT):Cle;function s_(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var xle=Object.prototype,Ale=xle.hasOwnProperty;function Ile(e,t,i){var r=e[t];(!(Ale.call(e,t)&&Nf(r,i))||i===void 0&&!(t in e))&&kw(e,t,i)}function Ole(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?kw(i,o,c):Ile(i,o,c)}return i}function Mle(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var Lle=9007199254740991,Dle=/^(?:0|[1-9]\d*)$/;function bA(e,t){var i=typeof e;return t=t==null?Lle:t,!!t&&(i=="number"||i!="symbol"&&Dle.test(e))&&e>-1&&e%1==0&&e<t}var Nle=Object.prototype,Ule=Nle.hasOwnProperty;function jle(e,t){var i=n_(e),r=!i&&r_(e),n=!i&&!r&&fA(e),s=!i&&!r&&!n&&_A(e),a=i||r||n||s,o=a?Mle(e.length,String):[],c=o.length;for(var d in e)(t||Ule.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||bA(d,c)))&&o.push(d);return o}function $le(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var Vle=Object.prototype,Fle=Vle.hasOwnProperty;function Ble(e){if(!lc(e))return $le(e);var t=pA(e),i=[];for(var r in e)r=="constructor"&&(t||!Fle.call(e,r))||i.push(r);return i}function wA(e){return Cw(e)?jle(e,!0):Ble(e)}function zle(e){return Ole(e,wA(e))}function Hle(e,t,i,r,n,s,a){var o=s_(e,i),c=s_(t,i),d=a.get(c);if(d){i_(e,i,d);return}var l=s?s(o,c,i+"",e,t,a):void 0,u=l===void 0;if(u){var g=n_(c),m=!g&&fA(c),f=!g&&!m&&_A(c);l=c,g||m||f?n_(o)?l=o:Wde(o)?l=Ude(o):m?(u=!1,l=Lde(c,!0)):f?(u=!1,l=Nde(c,!0)):l=[]:tle(c)||r_(c)?(l=o,r_(o)?l=zle(o):(!lc(o)||Ew(o))&&(l=Fde(c))):u=!1}u&&(a.set(c,l),n(l,c,r,s,a),a.delete(c)),i_(e,i,l)}function SA(e,t,i,r,n){e!==t&&Ode(t,function(s,a){if(n||(n=new nl),lc(s))Hle(e,t,a,i,SA,r,n);else{var o=r?r(s_(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),i_(e,a,o)}},wA)}function EA(e){return e}function Gle(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var YT=Math.max;function Wle(e,t,i){return t=YT(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=YT(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),Gle(e,this,o)}}function qle(e){return function(){return e}}var Jle=Pm?function(e,t){return Pm(e,"toString",{configurable:!0,enumerable:!1,value:qle(t),writable:!0})}:EA,Kle=800,Zle=16,Qle=Date.now;function Yle(e){var t=0,i=0;return function(){var r=Qle(),n=Zle-(r-i);if(i=r,n>0){if(++t>=Kle)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Xle=Yle(Jle);function eue(e,t){return Xle(Wle(e,t,EA),e+"")}function tue(e,t,i){if(!lc(i))return!1;var r=typeof t;return(r=="number"?Cw(i)&&bA(t,i.length):r=="string"&&t in i)?Nf(i[t],e):!1}function iue(e){return eue(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&tue(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}iue(function(e,t,i){SA(e,t,i)});const Th={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9.99906 2.16577C14.6024 2.16577 18.3341 5.89744 18.3341 10.5008C18.3341 15.1033 14.6024 18.8349 9.99906 18.8349C5.39573 18.8349 1.66406 15.1033 1.66406 10.5008C1.66406 5.89744 5.39573 2.16577 9.99906 2.16577ZM12.4482 14.2499H7.54906C8.0924 16.2616 9.0374 17.5849 9.99823 17.5849C10.9591 17.5849 11.9041 16.2616 12.4474 14.2499H12.4482ZM6.25656 14.2499H3.98656C4.79114 15.5374 5.9867 16.5335 7.39823 17.0924C6.96323 16.4091 6.60406 15.5541 6.3399 14.5799L6.2549 14.2508L6.25656 14.2499ZM16.0107 14.2499H13.7424C13.4724 15.3624 13.0824 16.3333 12.5982 17.0924C13.9206 16.5694 15.0556 15.6617 15.8566 14.4866L16.0107 14.2508V14.2499ZM5.91073 8.83327H3.11156L3.1074 8.84744C2.9781 9.38904 2.91293 9.94396 2.91323 10.5008C2.91323 11.3808 3.07406 12.2233 3.3674 13.0008H6.01156C5.81031 11.621 5.77589 10.2221 5.90906 8.83411L5.91073 8.83327ZM12.8299 8.83327H7.16823C7.02162 10.221 7.05945 11.6221 7.28073 12.9999H12.7174C12.9386 11.6221 12.9764 10.221 12.8299 8.83327ZM16.8866 8.83327H14.0882C14.1399 9.37244 14.1674 9.93077 14.1674 10.4999C14.1687 11.3366 14.108 12.1722 13.9857 12.9999H16.6299C16.9308 12.2008 17.0844 11.3538 17.0832 10.4999C17.0832 9.92577 17.0149 9.3666 16.8866 8.83327ZM7.39906 3.90827L7.3799 3.91494C5.67441 4.59596 4.29862 5.91053 3.54073 7.58327H6.08073C6.3424 6.12327 6.7974 4.8516 7.3999 3.90827H7.39906ZM9.99906 3.41577L9.9024 3.41994C8.84906 3.5166 7.82906 5.18494 7.3574 7.58327H12.6424C12.1707 5.1916 11.1566 3.52577 10.1049 3.42077L9.99906 3.4166V3.41577ZM12.5991 3.90744L12.6882 4.05327C13.2457 4.97994 13.6691 6.19661 13.9174 7.58411H16.4574C15.7339 5.98751 14.4463 4.71438 12.8416 4.0091L12.5991 3.90827V3.90744Z"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 13"><path fill="currentColor" d="M10.0309 4.00462C12.24 4.00462 14.0309 5.79549 14.0309 8.00462C14.0309 10.2138 12.24 12.0046 10.0309 12.0046C7.82174 12.0046 6.03088 10.2138 6.03088 8.00462C6.03088 5.79549 7.82174 4.00462 10.0309 4.00462ZM10.0309 5.50462C8.65017 5.50462 7.53088 6.62391 7.53088 8.00462C7.53088 9.38534 8.65017 10.5046 10.0309 10.5046C11.4116 10.5046 12.5309 9.38534 12.5309 8.00462C12.5309 6.62391 11.4116 5.50462 10.0309 5.50462ZM10.0309 0.5C14.6444 0.5 18.627 3.65001 19.732 8.06439C19.8326 8.4662 19.5884 8.87348 19.1866 8.97406C18.7848 9.07465 18.3775 8.83045 18.2769 8.42863C17.338 4.67796 13.9522 2 10.0309 2C6.10781 2 2.72098 4.68026 1.78374 8.43315C1.68337 8.83502 1.27623 9.07944 0.874363 8.97908C0.472492 8.87872 0.228071 8.47158 0.328434 8.06971C1.43153 3.65272 5.41536 0.5 10.0309 0.5Z"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>'},XT={get:(e,t,i)=>(...r)=>{try{return Reflect.get(e,t,i).apply(e,r)}catch{return null}}};let ek;try{ek=new Proxy(localStorage,XT)}catch{ek=new Proxy({},XT)}function TA(e){var t,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=TA(e[t]))&&(r&&(r+=" "),r+=i);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function rue(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=TA(e))&&(r&&(r+=" "),r+=t);return r}function nue(){const{meeting:e}=ow(),t=um(n=>n.participants.active.toArray()),i=um(n=>n.participants.joined.toArray()),r=[...t,...i.filter(n=>!t.includes(n)),e.self];return gt("main",{className:"flex-1 relative flex flex-wrap content-center justify-center gap-4 p-6",children:r.map(n=>Fn("div",{className:rue("relative min-w-[180px] flex flex-col items-center justify-center gap-2 bg-zinc-100 border-2 p-6 pb-2 rounded-xl break-all",n.audioEnabled&&"border-blue-500 shadow-lg shadow-blue-100"),children:[gt(pce,{participant:n,size:"sm"}),Fn("div",{className:"flex items-center gap-0.5",children:[gt(uce,{participant:n,size:"md",className:"absolute top-2 left-2"}),Fn("div",{children:[n.name,n.id===e.self.id?" (you)":null]})]})]},n.id))})}function sue(){const{meeting:e}=ow(),t=um(i=>i.self.audioEnabled);return ai.exports.useEffect(()=>{function i(r){r.ctrlKey&&r.key.toLowerCase()==="d"&&(e.self.audioEnabled?e.self.disableAudio():e.self.enableAudio())}return window.addEventListener("keypress",i),()=>{window.removeEventListener("keypress",i)}},[]),Fn("div",{className:"h-full w-full flex flex-col",children:[Fn("header",{className:"flex items-center justify-between px-6 h-16",children:[Fn("h1",{className:"text-xl flex items-center gap-2",children:[gt(Lv,{icon:Th.mic_on,className:"h-6"}),gt("span",{children:e.meta.meetingTitle})]}),Fn("div",{children:[gt(yce,{meeting:e}),gt(gce,{meeting:e}),gt(bce,{meeting:e})]})]}),gt(nue,{}),Fn("footer",{className:"flex items-center px-6 py-4 justify-center gap-1",children:[gt(fce,{children:gt(Lv,{icon:Th.call_end,className:"h-7 w-7"})}),gt(wce,{label:"Ctrl+D to toggle mic",children:gt(vce,{meeting:e,children:gt(Lv,{icon:t?Th.mic_on:Th.mic_off,className:"h-7 w-7"})})})]}),gt(mce,{meeting:e}),gt(_ce,{meeting:e})]})}function aue(){const{meeting:e}=ow(),t=um(i=>i.self.roomJoined);return ai.exports.useEffect(()=>{e.self.on("roomLeft",()=>{alert("You've left the room")}),Uce(document.body,{theme:"light"})},[]),t?gt(sue,{}):Fn("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-6",children:[gt("h1",{className:"text-3xl font-bold",children:e.meta.meetingTitle}),Fn("h2",{className:"text-2xl",children:["You will be joining as ",e.self.name]}),gt("p",{children:"By default you will join with your mic disabled."}),gt(hce,{size:"lg",onClick:()=>e.joinRoom(),kind:"wide",className:"max-w-sm",children:"Join audio room"})]})}function oue(){const[e,t]=NY();return ai.exports.useEffect(()=>{const i=new URL(window.location.href).searchParams,r=i.get("authToken"),n=i.get("roomName")||"";if(!r){alert("An authToken wasn't passed, please pass an authToken in the URL query to join a meeting.");return}t({authToken:r,roomName:n,defaults:{audio:!1,video:!1}})},[]),gt(DY,{value:e,fallback:gt(HY,{}),children:gt(aue,{})})}jv.createRoot(document.getElementById("root")).render(gt(oue,{}))});export default cue();
