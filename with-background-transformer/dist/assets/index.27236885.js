(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();function m5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p1={},f5={exports:{}},ms={},Ca={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=Symbol.for("react.element"),c7=Symbol.for("react.portal"),d7=Symbol.for("react.fragment"),l7=Symbol.for("react.strict_mode"),u7=Symbol.for("react.profiler"),h7=Symbol.for("react.provider"),p7=Symbol.for("react.context"),g7=Symbol.for("react.forward_ref"),m7=Symbol.for("react.suspense"),f7=Symbol.for("react.memo"),v7=Symbol.for("react.lazy"),W2=Symbol.iterator;function y7(t){return t===null||typeof t!="object"?null:(t=W2&&t[W2]||t["@@iterator"],typeof t=="function"?t:null)}var v5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y5=Object.assign,b5={};function pu(t,e,i){this.props=t,this.context=e,this.refs=b5,this.updater=i||v5}pu.prototype.isReactComponent={};pu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w5(){}w5.prototype=pu.prototype;function Nk(t,e,i){this.props=t,this.context=e,this.refs=b5,this.updater=i||v5}var Uk=Nk.prototype=new w5;Uk.constructor=Nk;y5(Uk,pu.prototype);Uk.isPureReactComponent=!0;var G2=Array.isArray,k5=Object.prototype.hasOwnProperty,jk={current:null},_5={key:!0,ref:!0,__self:!0,__source:!0};function S5(t,e,i){var r,s={},n=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(n=""+e.key),e)k5.call(e,r)&&!_5.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=i;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:tg,type:t,key:n,ref:a,props:s,_owner:jk.current}}function b7(t,e){return{$$typeof:tg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $k(t){return typeof t=="object"&&t!==null&&t.$$typeof===tg}function w7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var q2=/\/+/g;function P0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?w7(""+t.key):e.toString(36)}function Nm(t,e,i,r,s){var n=typeof t;(n==="undefined"||n==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(n){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case tg:case c7:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+P0(a,0):r,G2(s)?(i="",t!=null&&(i=t.replace(q2,"$&/")+"/"),Nm(s,e,i,"",function(u){return u})):s!=null&&($k(s)&&(s=b7(s,i+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(q2,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",G2(t))for(var o=0;o<t.length;o++){n=t[o];var c=r+P0(n,o);a+=Nm(n,e,i,c,s)}else if(c=y7(t),typeof c=="function")for(t=c.call(t),o=0;!(n=t.next()).done;)n=n.value,c=r+P0(n,o++),a+=Nm(n,e,i,c,s);else if(n==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Bg(t,e,i){if(t==null)return t;var r=[],s=0;return Nm(t,r,"","",function(n){return e.call(i,n,s++)}),r}function k7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tr={current:null},Um={transition:null},_7={ReactCurrentDispatcher:Tr,ReactCurrentBatchConfig:Um,ReactCurrentOwner:jk};Xe.Children={map:Bg,forEach:function(t,e,i){Bg(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Bg(t,function(){e++}),e},toArray:function(t){return Bg(t,function(e){return e})||[]},only:function(t){if(!$k(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=pu;Xe.Fragment=d7;Xe.Profiler=u7;Xe.PureComponent=Nk;Xe.StrictMode=l7;Xe.Suspense=m7;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_7;Xe.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y5({},t.props),s=t.key,n=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,a=jk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)k5.call(e,c)&&!_5.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=i;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:tg,type:t.type,key:s,ref:n,props:r,_owner:a}};Xe.createContext=function(t){return t={$$typeof:p7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:h7,_context:t},t.Consumer=t};Xe.createElement=S5;Xe.createFactory=function(t){var e=S5.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:g7,render:t}};Xe.isValidElement=$k;Xe.lazy=function(t){return{$$typeof:v7,_payload:{_status:-1,_result:t},_init:k7}};Xe.memo=function(t,e){return{$$typeof:f7,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=Um.transition;Um.transition={};try{t()}finally{Um.transition=e}};Xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Xe.useCallback=function(t,e){return Tr.current.useCallback(t,e)};Xe.useContext=function(t){return Tr.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return Tr.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return Tr.current.useEffect(t,e)};Xe.useId=function(){return Tr.current.useId()};Xe.useImperativeHandle=function(t,e,i){return Tr.current.useImperativeHandle(t,e,i)};Xe.useInsertionEffect=function(t,e){return Tr.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return Tr.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return Tr.current.useMemo(t,e)};Xe.useReducer=function(t,e,i){return Tr.current.useReducer(t,e,i)};Xe.useRef=function(t){return Tr.current.useRef(t)};Xe.useState=function(t){return Tr.current.useState(t)};Xe.useSyncExternalStore=function(t,e,i){return Tr.current.useSyncExternalStore(t,e,i)};Xe.useTransition=function(){return Tr.current.useTransition()};Xe.version="18.2.0";(function(t){t.exports=Xe})(Ca);const zk=m5(Ca.exports);var x5={exports:{}},E5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ie){var le=K.length;K.push(ie);e:for(;0<le;){var Qe=le-1>>>1,ht=K[Qe];if(0<s(ht,ie))K[Qe]=ie,K[le]=ht,le=Qe;else break e}}function i(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],le=K.pop();if(le!==ie){K[0]=le;e:for(var Qe=0,ht=K.length,bt=ht>>>1;Qe<bt;){var ri=2*(Qe+1)-1,Ar=K[ri],Ht=ri+1,Xn=K[Ht];if(0>s(Ar,le))Ht<ht&&0>s(Xn,Ar)?(K[Qe]=Xn,K[Ht]=le,Qe=Ht):(K[Qe]=Ar,K[ri]=le,Qe=ri);else if(Ht<ht&&0>s(Xn,le))K[Qe]=Xn,K[Ht]=le,Qe=Ht;else break e}}return ie}function s(K,ie){var le=K.sortIndex-ie.sortIndex;return le!==0?le:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],l=1,p=null,m=3,y=!1,b=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(K){for(var ie=i(u);ie!==null;){if(ie.callback===null)r(u);else if(ie.startTime<=K)r(u),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=i(u)}}function O(K){if(S=!1,I(K),!b)if(i(c)!==null)b=!0,Bt(q);else{var ie=i(u);ie!==null&&Ir(O,ie.startTime-K)}}function q(K,ie){b=!1,S&&(S=!1,k(X),X=-1),y=!0;var le=m;try{for(I(ie),p=i(c);p!==null&&(!(p.expirationTime>ie)||K&&!ce());){var Qe=p.callback;if(typeof Qe=="function"){p.callback=null,m=p.priorityLevel;var ht=Qe(p.expirationTime<=ie);ie=t.unstable_now(),typeof ht=="function"?p.callback=ht:p===i(c)&&r(c),I(ie)}else r(c);p=i(c)}if(p!==null)var bt=!0;else{var ri=i(u);ri!==null&&Ir(O,ri.startTime-ie),bt=!1}return bt}finally{p=null,m=le,y=!1}}var B=!1,Y=null,X=-1,be=5,he=-1;function ce(){return!(t.unstable_now()-he<be)}function et(){if(Y!==null){var K=t.unstable_now();he=K;var ie=!0;try{ie=Y(!0,K)}finally{ie?je():(B=!1,Y=null)}}else B=!1}var je;if(typeof T=="function")je=function(){T(et)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,Ot=yt.port2;yt.port1.onmessage=et,je=function(){Ot.postMessage(null)}}else je=function(){E(et,0)};function Bt(K){Y=K,B||(B=!0,je())}function Ir(K,ie){X=E(function(){K(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,Bt(q))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var le=m;m=ie;try{return K()}finally{m=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var le=m;m=K;try{return ie()}finally{m=le}},t.unstable_scheduleCallback=function(K,ie,le){var Qe=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Qe+le:Qe):le=Qe,K){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return ht=le+ht,K={id:l++,callback:ie,priorityLevel:K,startTime:le,expirationTime:ht,sortIndex:-1},le>Qe?(K.sortIndex=le,e(u,K),i(c)===null&&K===i(u)&&(S?(k(X),X=-1):S=!0,Ir(O,le-Qe))):(K.sortIndex=ht,e(c,K),b||y||(b=!0,Bt(q))),K},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(K){var ie=m;return function(){var le=m;m=ie;try{return K.apply(this,arguments)}finally{m=le}}}})(E5);(function(t){t.exports=E5})(x5);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T5=Ca.exports,ps=x5.exports;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C5=new Set,bp={};function bd(t,e){Zl(t,e),Zl(t+"Capture",e)}function Zl(t,e){for(bp[t]=e,t=0;t<e.length;t++)C5.add(e[t])}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g1=Object.prototype.hasOwnProperty,S7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J2={},K2={};function x7(t){return g1.call(K2,t)?!0:g1.call(J2,t)?!1:S7.test(t)?K2[t]=!0:(J2[t]=!0,!1)}function E7(t,e,i,r){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T7(t,e,i,r){if(e===null||typeof e>"u"||E7(t,e,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cr(t,e,i,r,s,n,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=a}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nr[t]=new Cr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nr[e]=new Cr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nr[t]=new Cr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nr[t]=new Cr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nr[t]=new Cr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nr[t]=new Cr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nr[t]=new Cr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nr[t]=new Cr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nr[t]=new Cr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fk=/[\-:]([a-z])/g;function Vk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fk,Vk);nr[e]=new Cr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fk,Vk);nr[e]=new Cr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fk,Vk);nr[e]=new Cr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nr[t]=new Cr(t,1,!1,t.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nr[t]=new Cr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bk(t,e,i,r){var s=nr.hasOwnProperty(e)?nr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T7(e,i,s,r)&&(i=null),r||s===null?x7(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):s.mustUseProperty?t[s.propertyName]=i===null?s.type===3?!1:"":i:(e=s.attributeName,r=s.attributeNamespace,i===null?t.removeAttribute(e):(s=s.type,i=s===3||s===4&&i===!0?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}var Ua=T5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hg=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),xl=Symbol.for("react.fragment"),Hk=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),P5=Symbol.for("react.provider"),R5=Symbol.for("react.context"),Wk=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),Gk=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),I5=Symbol.for("react.offscreen"),Q2=Symbol.iterator;function qu(t){return t===null||typeof t!="object"?null:(t=Q2&&t[Q2]||t["@@iterator"],typeof t=="function"?t:null)}var ti=Object.assign,R0;function Rh(t){if(R0===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);R0=e&&e[1]||""}return`
`+R0+t}var I0=!1;function A0(t,e){if(!t||I0)return"";I0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),n=r.stack.split(`
`),a=s.length-1,o=n.length-1;1<=a&&0<=o&&s[a]!==n[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==n[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==n[o]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{I0=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Rh(t):""}function C7(t){switch(t.tag){case 5:return Rh(t.type);case 16:return Rh("Lazy");case 13:return Rh("Suspense");case 19:return Rh("SuspenseList");case 0:case 2:case 15:return t=A0(t.type,!1),t;case 11:return t=A0(t.type.render,!1),t;case 1:return t=A0(t.type,!0),t;default:return""}}function y1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xl:return"Fragment";case Sl:return"Portal";case m1:return"Profiler";case Hk:return"StrictMode";case f1:return"Suspense";case v1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R5:return(t.displayName||"Context")+".Consumer";case P5:return(t._context.displayName||"Context")+".Provider";case Wk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gk:return e=t.displayName||null,e!==null?e:y1(t.type)||"Memo";case vo:e=t._payload,t=t._init;try{return y1(t(e))}catch{}}return null}function P7(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return y1(e);case 8:return e===Hk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function A5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function R7(t){var e=A5(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,n.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wg(t){t._valueTracker||(t._valueTracker=R7(t))}function M5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=A5(t)?t.checked?"true":"false":t.value),t=r,t!==i?(e.setValue(t),!0):!1}function zf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function b1(t,e){var i=e.checked;return ti({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:t._wrapperState.initialChecked})}function Y2(t,e){var i=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;i=Vo(e.value!=null?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D5(t,e){e=e.checked,e!=null&&Bk(t,"checked",e,!1)}function w1(t,e){D5(t,e);var i=Vo(e.value),r=e.type;if(i!=null)r==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?k1(t,e.type,i):e.hasOwnProperty("defaultValue")&&k1(t,e.type,Vo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z2(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function k1(t,e,i){(e!=="number"||zf(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Ih=Array.isArray;function Nl(t,e,i,r){if(t=t.options,e){e={};for(var s=0;s<i.length;s++)e["$"+i[s]]=!0;for(i=0;i<t.length;i++)s=e.hasOwnProperty("$"+t[i].value),t[i].selected!==s&&(t[i].selected=s),s&&r&&(t[i].defaultSelected=!0)}else{for(i=""+Vo(i),e=null,s=0;s<t.length;s++){if(t[s].value===i){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return ti({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X2(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(ae(92));if(Ih(i)){if(1<i.length)throw Error(ae(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:Vo(i)}}function O5(t,e){var i=Vo(e.value),r=Vo(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),r!=null&&(t.defaultValue=""+r)}function ex(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function L5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?L5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gg,N5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,i,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gg=Gg||document.createElement("div"),Gg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wp(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I7=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(t){I7.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yh[e]=Yh[t]})});function U5(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Yh.hasOwnProperty(t)&&Yh[t]?(""+e).trim():e+"px"}function j5(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var r=i.indexOf("--")===0,s=U5(i,e[i],r);i==="float"&&(i="cssFloat"),r?t.setProperty(i,s):t[i]=s}}var A7=ti({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x1(t,e){if(e){if(A7[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function E1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T1=null;function qk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var C1=null,Ul=null,jl=null;function tx(t){if(t=sg(t)){if(typeof C1!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=iy(e),C1(t.stateNode,t.type,e))}}function $5(t){Ul?jl?jl.push(t):jl=[t]:Ul=t}function z5(){if(Ul){var t=Ul,e=jl;if(jl=Ul=null,tx(t),e)for(t=0;t<e.length;t++)tx(e[t])}}function F5(t,e){return t(e)}function V5(){}var M0=!1;function B5(t,e,i){if(M0)return t(e,i);M0=!0;try{return F5(t,e,i)}finally{M0=!1,(Ul!==null||jl!==null)&&(V5(),z5())}}function kp(t,e){var i=t.stateNode;if(i===null)return null;var r=iy(i);if(r===null)return null;i=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(ae(231,e,typeof i));return i}var P1=!1;if(Pa)try{var Ju={};Object.defineProperty(Ju,"passive",{get:function(){P1=!0}}),window.addEventListener("test",Ju,Ju),window.removeEventListener("test",Ju,Ju)}catch{P1=!1}function M7(t,e,i,r,s,n,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(l){this.onError(l)}}var Zh=!1,Ff=null,Vf=!1,R1=null,D7={onError:function(t){Zh=!0,Ff=t}};function O7(t,e,i,r,s,n,a,o,c){Zh=!1,Ff=null,M7.apply(D7,arguments)}function L7(t,e,i,r,s,n,a,o,c){if(O7.apply(this,arguments),Zh){if(Zh){var u=Ff;Zh=!1,Ff=null}else throw Error(ae(198));Vf||(Vf=!0,R1=u)}}function wd(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function H5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ix(t){if(wd(t)!==t)throw Error(ae(188))}function N7(t){var e=t.alternate;if(!e){if(e=wd(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var i=t,r=e;;){var s=i.return;if(s===null)break;var n=s.alternate;if(n===null){if(r=s.return,r!==null){i=r;continue}break}if(s.child===n.child){for(n=s.child;n;){if(n===i)return ix(s),t;if(n===r)return ix(s),e;n=n.sibling}throw Error(ae(188))}if(i.return!==r.return)i=s,r=n;else{for(var a=!1,o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a){for(o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a)throw Error(ae(189))}}if(i.alternate!==r)throw Error(ae(190))}if(i.tag!==3)throw Error(ae(188));return i.stateNode.current===i?t:e}function W5(t){return t=N7(t),t!==null?G5(t):null}function G5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G5(t);if(e!==null)return e;t=t.sibling}return null}var q5=ps.unstable_scheduleCallback,rx=ps.unstable_cancelCallback,U7=ps.unstable_shouldYield,j7=ps.unstable_requestPaint,yi=ps.unstable_now,$7=ps.unstable_getCurrentPriorityLevel,Jk=ps.unstable_ImmediatePriority,J5=ps.unstable_UserBlockingPriority,Bf=ps.unstable_NormalPriority,z7=ps.unstable_LowPriority,K5=ps.unstable_IdlePriority,Zv=null,$n=null;function F7(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Zv,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:H7,V7=Math.log,B7=Math.LN2;function H7(t){return t>>>=0,t===0?32:31-(V7(t)/B7|0)|0}var qg=64,Jg=4194304;function Ah(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hf(t,e){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,n=t.pingedLanes,a=i&268435455;if(a!==0){var o=a&~s;o!==0?r=Ah(o):(n&=a,n!==0&&(r=Ah(n)))}else a=i&~s,a!==0?r=Ah(a):n!==0&&(r=Ah(n));if(r===0)return 0;if(e!==0&&e!==r&&(e&s)===0&&(s=r&-r,n=e&-e,s>=n||s===16&&(n&4194240)!==0))return e;if((r&4)!==0&&(r|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)i=31-ln(e),s=1<<i,r|=t[i],e&=~s;return r}function W7(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G7(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,n=t.pendingLanes;0<n;){var a=31-ln(n),o=1<<a,c=s[a];c===-1?((o&i)===0||(o&r)!==0)&&(s[a]=W7(o,e)):c<=e&&(t.expiredLanes|=o),n&=~o}}function I1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q5(){var t=qg;return qg<<=1,(qg&4194240)===0&&(qg=64),t}function D0(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function ig(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=i}function q7(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var s=31-ln(i),n=1<<s;e[s]=0,r[s]=-1,t[s]=-1,i&=~n}}function Kk(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-ln(i),s=1<<r;s&e|t[r]&e&&(t[r]|=e),i&=~s}}var vt=0;function Y5(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Z5,Qk,X5,eR,tR,A1=!1,Kg=[],Io=null,Ao=null,Mo=null,_p=new Map,Sp=new Map,bo=[],J7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sx(t,e){switch(t){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":_p.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sp.delete(e.pointerId)}}function Ku(t,e,i,r,s,n){return t===null||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:n,targetContainers:[s]},e!==null&&(e=sg(e),e!==null&&Qk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function K7(t,e,i,r,s){switch(e){case"focusin":return Io=Ku(Io,t,e,i,r,s),!0;case"dragenter":return Ao=Ku(Ao,t,e,i,r,s),!0;case"mouseover":return Mo=Ku(Mo,t,e,i,r,s),!0;case"pointerover":var n=s.pointerId;return _p.set(n,Ku(_p.get(n)||null,t,e,i,r,s)),!0;case"gotpointercapture":return n=s.pointerId,Sp.set(n,Ku(Sp.get(n)||null,t,e,i,r,s)),!0}return!1}function iR(t){var e=qc(t.target);if(e!==null){var i=wd(e);if(i!==null){if(e=i.tag,e===13){if(e=H5(i),e!==null){t.blockedOn=e,tR(t.priority,function(){X5(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=M1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var r=new i.constructor(i.type,i);T1=r,i.target.dispatchEvent(r),T1=null}else return e=sg(i),e!==null&&Qk(e),t.blockedOn=i,!1;e.shift()}return!0}function nx(t,e,i){jm(t)&&i.delete(e)}function Q7(){A1=!1,Io!==null&&jm(Io)&&(Io=null),Ao!==null&&jm(Ao)&&(Ao=null),Mo!==null&&jm(Mo)&&(Mo=null),_p.forEach(nx),Sp.forEach(nx)}function Qu(t,e){t.blockedOn===e&&(t.blockedOn=null,A1||(A1=!0,ps.unstable_scheduleCallback(ps.unstable_NormalPriority,Q7)))}function xp(t){function e(s){return Qu(s,t)}if(0<Kg.length){Qu(Kg[0],t);for(var i=1;i<Kg.length;i++){var r=Kg[i];r.blockedOn===t&&(r.blockedOn=null)}}for(Io!==null&&Qu(Io,t),Ao!==null&&Qu(Ao,t),Mo!==null&&Qu(Mo,t),_p.forEach(e),Sp.forEach(e),i=0;i<bo.length;i++)r=bo[i],r.blockedOn===t&&(r.blockedOn=null);for(;0<bo.length&&(i=bo[0],i.blockedOn===null);)iR(i),i.blockedOn===null&&bo.shift()}var $l=Ua.ReactCurrentBatchConfig,Wf=!0;function Y7(t,e,i,r){var s=vt,n=$l.transition;$l.transition=null;try{vt=1,Yk(t,e,i,r)}finally{vt=s,$l.transition=n}}function Z7(t,e,i,r){var s=vt,n=$l.transition;$l.transition=null;try{vt=4,Yk(t,e,i,r)}finally{vt=s,$l.transition=n}}function Yk(t,e,i,r){if(Wf){var s=M1(t,e,i,r);if(s===null)B0(t,e,r,Gf,i),sx(t,r);else if(K7(s,t,e,i,r))r.stopPropagation();else if(sx(t,r),e&4&&-1<J7.indexOf(t)){for(;s!==null;){var n=sg(s);if(n!==null&&Z5(n),n=M1(t,e,i,r),n===null&&B0(t,e,r,Gf,i),n===s)break;s=n}s!==null&&r.stopPropagation()}else B0(t,e,r,null,i)}}var Gf=null;function M1(t,e,i,r){if(Gf=null,t=qk(r),t=qc(t),t!==null)if(e=wd(t),e===null)t=null;else if(i=e.tag,i===13){if(t=H5(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gf=t,null}function rR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($7()){case Jk:return 1;case J5:return 4;case Bf:case z7:return 16;case K5:return 536870912;default:return 16}default:return 16}}var To=null,Zk=null,$m=null;function sR(){if($m)return $m;var t,e=Zk,i=e.length,r,s="value"in To?To.value:To.textContent,n=s.length;for(t=0;t<i&&e[t]===s[t];t++);var a=i-t;for(r=1;r<=a&&e[i-r]===s[n-r];r++);return $m=s.slice(t,1<r?1-r:void 0)}function zm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qg(){return!0}function ax(){return!1}function fs(t){function e(i,r,s,n,a){this._reactName=i,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],this[o]=i?i(n):n[o]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?Qg:ax,this.isPropagationStopped=ax,this}return ti(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Qg)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Qg)},persist:function(){},isPersistent:Qg}),e}var gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xk=fs(gu),rg=ti({},gu,{view:0,detail:0}),X7=fs(rg),O0,L0,Yu,Xv=ti({},rg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yu&&(Yu&&t.type==="mousemove"?(O0=t.screenX-Yu.screenX,L0=t.screenY-Yu.screenY):L0=O0=0,Yu=t),O0)},movementY:function(t){return"movementY"in t?t.movementY:L0}}),ox=fs(Xv),e8=ti({},Xv,{dataTransfer:0}),t8=fs(e8),i8=ti({},rg,{relatedTarget:0}),N0=fs(i8),r8=ti({},gu,{animationName:0,elapsedTime:0,pseudoElement:0}),s8=fs(r8),n8=ti({},gu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a8=fs(n8),o8=ti({},gu,{data:0}),cx=fs(o8),c8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u8(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l8[t])?!!e[t]:!1}function e_(){return u8}var h8=ti({},rg,{key:function(t){if(t.key){var e=c8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e_,charCode:function(t){return t.type==="keypress"?zm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p8=fs(h8),g8=ti({},Xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dx=fs(g8),m8=ti({},rg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e_}),f8=fs(m8),v8=ti({},gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),y8=fs(v8),b8=ti({},Xv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w8=fs(b8),k8=[9,13,27,32],t_=Pa&&"CompositionEvent"in window,Xh=null;Pa&&"documentMode"in document&&(Xh=document.documentMode);var _8=Pa&&"TextEvent"in window&&!Xh,nR=Pa&&(!t_||Xh&&8<Xh&&11>=Xh),lx=String.fromCharCode(32),ux=!1;function aR(t,e){switch(t){case"keyup":return k8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var El=!1;function S8(t,e){switch(t){case"compositionend":return oR(e);case"keypress":return e.which!==32?null:(ux=!0,lx);case"textInput":return t=e.data,t===lx&&ux?null:t;default:return null}}function x8(t,e){if(El)return t==="compositionend"||!t_&&aR(t,e)?(t=sR(),$m=Zk=To=null,El=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nR&&e.locale!=="ko"?null:e.data;default:return null}}var E8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!E8[t.type]:e==="textarea"}function cR(t,e,i,r){$5(r),e=qf(e,"onChange"),0<e.length&&(i=new Xk("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var ep=null,Ep=null;function T8(t){bR(t,0)}function ey(t){var e=Pl(t);if(M5(e))return t}function C8(t,e){if(t==="change")return e}var dR=!1;if(Pa){var U0;if(Pa){var j0="oninput"in document;if(!j0){var px=document.createElement("div");px.setAttribute("oninput","return;"),j0=typeof px.oninput=="function"}U0=j0}else U0=!1;dR=U0&&(!document.documentMode||9<document.documentMode)}function gx(){ep&&(ep.detachEvent("onpropertychange",lR),Ep=ep=null)}function lR(t){if(t.propertyName==="value"&&ey(Ep)){var e=[];cR(e,Ep,t,qk(t)),B5(T8,e)}}function P8(t,e,i){t==="focusin"?(gx(),ep=e,Ep=i,ep.attachEvent("onpropertychange",lR)):t==="focusout"&&gx()}function R8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ey(Ep)}function I8(t,e){if(t==="click")return ey(e)}function A8(t,e){if(t==="input"||t==="change")return ey(e)}function M8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:M8;function Tp(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var s=i[r];if(!g1.call(e,s)||!gn(t[s],e[s]))return!1}return!0}function mx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fx(t,e){var i=mx(t);t=0;for(var r;i;){if(i.nodeType===3){if(r=t+i.textContent.length,t<=e&&r>=e)return{node:i,offset:e-t};t=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=mx(i)}}function uR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hR(){for(var t=window,e=zf();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=zf(t.document)}return e}function i_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D8(t){var e=hR(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&uR(i.ownerDocument.documentElement,i)){if(r!==null&&i_(i)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=i.textContent.length,n=Math.min(r.start,s);r=r.end===void 0?n:Math.min(r.end,s),!t.extend&&n>r&&(s=r,r=n,n=s),s=fx(i,n);var a=fx(i,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),n>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O8=Pa&&"documentMode"in document&&11>=document.documentMode,Tl=null,D1=null,tp=null,O1=!1;function vx(t,e,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;O1||Tl==null||Tl!==zf(r)||(r=Tl,"selectionStart"in r&&i_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tp&&Tp(tp,r)||(tp=r,r=qf(D1,"onSelect"),0<r.length&&(e=new Xk("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=Tl)))}function Yg(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Cl={animationend:Yg("Animation","AnimationEnd"),animationiteration:Yg("Animation","AnimationIteration"),animationstart:Yg("Animation","AnimationStart"),transitionend:Yg("Transition","TransitionEnd")},$0={},pR={};Pa&&(pR=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function ty(t){if($0[t])return $0[t];if(!Cl[t])return t;var e=Cl[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in pR)return $0[t]=e[i];return t}var gR=ty("animationend"),mR=ty("animationiteration"),fR=ty("animationstart"),vR=ty("transitionend"),yR=new Map,yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jo(t,e){yR.set(t,e),bd(e,[t])}for(var z0=0;z0<yx.length;z0++){var F0=yx[z0],L8=F0.toLowerCase(),N8=F0[0].toUpperCase()+F0.slice(1);Jo(L8,"on"+N8)}Jo(gR,"onAnimationEnd");Jo(mR,"onAnimationIteration");Jo(fR,"onAnimationStart");Jo("dblclick","onDoubleClick");Jo("focusin","onFocus");Jo("focusout","onBlur");Jo(vR,"onTransitionEnd");Zl("onMouseEnter",["mouseout","mouseover"]);Zl("onMouseLeave",["mouseout","mouseover"]);Zl("onPointerEnter",["pointerout","pointerover"]);Zl("onPointerLeave",["pointerout","pointerover"]);bd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bd("onBeforeInput",["compositionend","keypress","textInput","paste"]);bd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mh));function bx(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,L7(r,e,void 0,t),t.currentTarget=null}function bR(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var r=t[i],s=r.event;r=r.listeners;e:{var n=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==n&&s.isPropagationStopped())break e;bx(s,o,u),n=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==n&&s.isPropagationStopped())break e;bx(s,o,u),n=c}}}if(Vf)throw t=R1,Vf=!1,R1=null,t}function Nt(t,e){var i=e[$1];i===void 0&&(i=e[$1]=new Set);var r=t+"__bubble";i.has(r)||(wR(e,t,2,!1),i.add(r))}function V0(t,e,i){var r=0;e&&(r|=4),wR(i,t,r,e)}var Zg="_reactListening"+Math.random().toString(36).slice(2);function Cp(t){if(!t[Zg]){t[Zg]=!0,C5.forEach(function(i){i!=="selectionchange"&&(U8.has(i)||V0(i,!1,t),V0(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zg]||(e[Zg]=!0,V0("selectionchange",!1,e))}}function wR(t,e,i,r){switch(rR(e)){case 1:var s=Y7;break;case 4:s=Z7;break;default:s=Yk}i=s.bind(null,e,i,t),s=void 0,!P1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,i,{capture:!0,passive:s}):t.addEventListener(e,i,!0):s!==void 0?t.addEventListener(e,i,{passive:s}):t.addEventListener(e,i,!1)}function B0(t,e,i,r,s){var n=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=qc(o),a===null)return;if(c=a.tag,c===5||c===6){r=n=a;continue e}o=o.parentNode}}r=r.return}B5(function(){var u=n,l=qk(i),p=[];e:{var m=yR.get(t);if(m!==void 0){var y=Xk,b=t;switch(t){case"keypress":if(zm(i)===0)break e;case"keydown":case"keyup":y=p8;break;case"focusin":b="focus",y=N0;break;case"focusout":b="blur",y=N0;break;case"beforeblur":case"afterblur":y=N0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ox;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=t8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=f8;break;case gR:case mR:case fR:y=s8;break;case vR:y=y8;break;case"scroll":y=X7;break;case"wheel":y=w8;break;case"copy":case"cut":case"paste":y=a8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=dx}var S=(e&4)!==0,E=!S&&t==="scroll",k=S?m!==null?m+"Capture":null:m;S=[];for(var T=u,I;T!==null;){I=T;var O=I.stateNode;if(I.tag===5&&O!==null&&(I=O,k!==null&&(O=kp(T,k),O!=null&&S.push(Pp(T,O,I)))),E)break;T=T.return}0<S.length&&(m=new y(m,b,null,i,l),p.push({event:m,listeners:S}))}}if((e&7)===0){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&i!==T1&&(b=i.relatedTarget||i.fromElement)&&(qc(b)||b[Ra]))break e;if((y||m)&&(m=l.window===l?l:(m=l.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=i.relatedTarget||i.toElement,y=u,b=b?qc(b):null,b!==null&&(E=wd(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(S=ox,O="onMouseLeave",k="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(S=dx,O="onPointerLeave",k="onPointerEnter",T="pointer"),E=y==null?m:Pl(y),I=b==null?m:Pl(b),m=new S(O,T+"leave",y,i,l),m.target=E,m.relatedTarget=I,O=null,qc(l)===u&&(S=new S(k,T+"enter",b,i,l),S.target=I,S.relatedTarget=E,O=S),E=O,y&&b)t:{for(S=y,k=b,T=0,I=S;I;I=Ud(I))T++;for(I=0,O=k;O;O=Ud(O))I++;for(;0<T-I;)S=Ud(S),T--;for(;0<I-T;)k=Ud(k),I--;for(;T--;){if(S===k||k!==null&&S===k.alternate)break t;S=Ud(S),k=Ud(k)}S=null}else S=null;y!==null&&wx(p,m,y,S,!1),b!==null&&E!==null&&wx(p,E,b,S,!0)}}e:{if(m=u?Pl(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var q=C8;else if(hx(m))if(dR)q=A8;else{q=R8;var B=P8}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(q=I8);if(q&&(q=q(t,u))){cR(p,q,i,l);break e}B&&B(t,m,u),t==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&k1(m,"number",m.value)}switch(B=u?Pl(u):window,t){case"focusin":(hx(B)||B.contentEditable==="true")&&(Tl=B,D1=u,tp=null);break;case"focusout":tp=D1=Tl=null;break;case"mousedown":O1=!0;break;case"contextmenu":case"mouseup":case"dragend":O1=!1,vx(p,i,l);break;case"selectionchange":if(O8)break;case"keydown":case"keyup":vx(p,i,l)}var Y;if(t_)e:{switch(t){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else El?aR(t,i)&&(X="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(X="onCompositionStart");X&&(nR&&i.locale!=="ko"&&(El||X!=="onCompositionStart"?X==="onCompositionEnd"&&El&&(Y=sR()):(To=l,Zk="value"in To?To.value:To.textContent,El=!0)),B=qf(u,X),0<B.length&&(X=new cx(X,t,null,i,l),p.push({event:X,listeners:B}),Y?X.data=Y:(Y=oR(i),Y!==null&&(X.data=Y)))),(Y=_8?S8(t,i):x8(t,i))&&(u=qf(u,"onBeforeInput"),0<u.length&&(l=new cx("onBeforeInput","beforeinput",null,i,l),p.push({event:l,listeners:u}),l.data=Y))}bR(p,e)})}function Pp(t,e,i){return{instance:t,listener:e,currentTarget:i}}function qf(t,e){for(var i=e+"Capture",r=[];t!==null;){var s=t,n=s.stateNode;s.tag===5&&n!==null&&(s=n,n=kp(t,i),n!=null&&r.unshift(Pp(t,n,s)),n=kp(t,e),n!=null&&r.push(Pp(t,n,s))),t=t.return}return r}function Ud(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wx(t,e,i,r,s){for(var n=e._reactName,a=[];i!==null&&i!==r;){var o=i,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,s?(c=kp(i,n),c!=null&&a.unshift(Pp(i,c,o))):s||(c=kp(i,n),c!=null&&a.push(Pp(i,c,o)))),i=i.return}a.length!==0&&t.push({event:e,listeners:a})}var j8=/\r\n?/g,$8=/\u0000|\uFFFD/g;function kx(t){return(typeof t=="string"?t:""+t).replace(j8,`
`).replace($8,"")}function Xg(t,e,i){if(e=kx(e),kx(t)!==e&&i)throw Error(ae(425))}function Jf(){}var L1=null,N1=null;function U1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var j1=typeof setTimeout=="function"?setTimeout:void 0,z8=typeof clearTimeout=="function"?clearTimeout:void 0,_x=typeof Promise=="function"?Promise:void 0,F8=typeof queueMicrotask=="function"?queueMicrotask:typeof _x<"u"?function(t){return _x.resolve(null).then(t).catch(V8)}:j1;function V8(t){setTimeout(function(){throw t})}function H0(t,e){var i=e,r=0;do{var s=i.nextSibling;if(t.removeChild(i),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(r===0){t.removeChild(s),xp(e);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=s}while(i);xp(e)}function Do(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var mu=Math.random().toString(36).slice(2),Nn="__reactFiber$"+mu,Rp="__reactProps$"+mu,Ra="__reactContainer$"+mu,$1="__reactEvents$"+mu,B8="__reactListeners$"+mu,H8="__reactHandles$"+mu;function qc(t){var e=t[Nn];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Ra]||i[Nn]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=Sx(t);t!==null;){if(i=t[Nn])return i;t=Sx(t)}return e}t=i,i=t.parentNode}return null}function sg(t){return t=t[Nn]||t[Ra],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function iy(t){return t[Rp]||null}var z1=[],Rl=-1;function Ko(t){return{current:t}}function Vt(t){0>Rl||(t.current=z1[Rl],z1[Rl]=null,Rl--)}function It(t,e){Rl++,z1[Rl]=t.current,t.current=e}var Bo={},mr=Ko(Bo),Vr=Ko(!1),od=Bo;function Xl(t,e){var i=t.type.contextTypes;if(!i)return Bo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},n;for(n in i)s[n]=e[n];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Br(t){return t=t.childContextTypes,t!=null}function Kf(){Vt(Vr),Vt(mr)}function xx(t,e,i){if(mr.current!==Bo)throw Error(ae(168));It(mr,e),It(Vr,i)}function kR(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,P7(t)||"Unknown",s));return ti({},i,r)}function Qf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bo,od=mr.current,It(mr,t),It(Vr,Vr.current),!0}function Ex(t,e,i){var r=t.stateNode;if(!r)throw Error(ae(169));i?(t=kR(t,e,od),r.__reactInternalMemoizedMergedChildContext=t,Vt(Vr),Vt(mr),It(mr,t)):Vt(Vr),It(Vr,i)}var ua=null,ry=!1,W0=!1;function _R(t){ua===null?ua=[t]:ua.push(t)}function W8(t){ry=!0,_R(t)}function Qo(){if(!W0&&ua!==null){W0=!0;var t=0,e=vt;try{var i=ua;for(vt=1;t<i.length;t++){var r=i[t];do r=r(!0);while(r!==null)}ua=null,ry=!1}catch(s){throw ua!==null&&(ua=ua.slice(t+1)),q5(Jk,Qo),s}finally{vt=e,W0=!1}}return null}var Il=[],Al=0,Yf=null,Zf=0,xs=[],Es=0,cd=null,wa=1,ka="";function bc(t,e){Il[Al++]=Zf,Il[Al++]=Yf,Yf=t,Zf=e}function SR(t,e,i){xs[Es++]=wa,xs[Es++]=ka,xs[Es++]=cd,cd=t;var r=wa;t=ka;var s=32-ln(r)-1;r&=~(1<<s),i+=1;var n=32-ln(e)+s;if(30<n){var a=s-s%5;n=(r&(1<<a)-1).toString(32),r>>=a,s-=a,wa=1<<32-ln(e)+s|i<<s|r,ka=n+t}else wa=1<<n|i<<s|r,ka=t}function r_(t){t.return!==null&&(bc(t,1),SR(t,1,0))}function s_(t){for(;t===Yf;)Yf=Il[--Al],Il[Al]=null,Zf=Il[--Al],Il[Al]=null;for(;t===cd;)cd=xs[--Es],xs[Es]=null,ka=xs[--Es],xs[Es]=null,wa=xs[--Es],xs[Es]=null}var hs=null,cs=null,qt=!1,tn=null;function xR(t,e){var i=Ps(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Tx(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hs=t,cs=Do(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hs=t,cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=cd!==null?{id:wa,overflow:ka}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Ps(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,hs=t,cs=null,!0):!1;default:return!1}}function F1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function V1(t){if(qt){var e=cs;if(e){var i=e;if(!Tx(t,e)){if(F1(t))throw Error(ae(418));e=Do(i.nextSibling);var r=hs;e&&Tx(t,e)?xR(r,i):(t.flags=t.flags&-4097|2,qt=!1,hs=t)}}else{if(F1(t))throw Error(ae(418));t.flags=t.flags&-4097|2,qt=!1,hs=t}}}function Cx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hs=t}function em(t){if(t!==hs)return!1;if(!qt)return Cx(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!U1(t.type,t.memoizedProps)),e&&(e=cs)){if(F1(t))throw ER(),Error(ae(418));for(;e;)xR(t,e),e=Do(e.nextSibling)}if(Cx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){cs=Do(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}cs=null}}else cs=hs?Do(t.stateNode.nextSibling):null;return!0}function ER(){for(var t=cs;t;)t=Do(t.nextSibling)}function eu(){cs=hs=null,qt=!1}function n_(t){tn===null?tn=[t]:tn.push(t)}var G8=Ua.ReactCurrentBatchConfig;function Zs(t,e){if(t&&t.defaultProps){e=ti({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var Xf=Ko(null),ev=null,Ml=null,a_=null;function o_(){a_=Ml=ev=null}function c_(t){var e=Xf.current;Vt(Xf),t._currentValue=e}function B1(t,e,i){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function zl(t,e){ev=t,a_=Ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(zr=!0),t.firstContext=null)}function Ds(t){var e=t._currentValue;if(a_!==t)if(t={context:t,memoizedValue:e,next:null},Ml===null){if(ev===null)throw Error(ae(308));Ml=t,ev.dependencies={lanes:0,firstContext:t}}else Ml=Ml.next=t;return e}var Jc=null;function d_(t){Jc===null?Jc=[t]:Jc.push(t)}function TR(t,e,i,r){var s=e.interleaved;return s===null?(i.next=i,d_(e)):(i.next=s.next,s.next=i),e.interleaved=i,Ia(t,r)}function Ia(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var yo=!1;function l_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ea(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(t,e,i){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(nt&2)!==0){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ia(t,i)}return s=r.interleaved,s===null?(e.next=e,d_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ia(t,i)}function Fm(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,Kk(t,i)}}function Px(t,e){var i=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var s=null,n=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};n===null?s=n=a:n=n.next=a,i=i.next}while(i!==null);n===null?s=n=e:n=n.next=e}else s=n=e;i={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:r.shared,effects:r.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function tv(t,e,i,r){var s=t.updateQueue;yo=!1;var n=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?n=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(n!==null){var p=s.baseState;a=0,l=u=c=null,o=n;do{var m=o.lane,y=o.eventTime;if((r&m)===m){l!==null&&(l=l.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,S=o;switch(m=e,y=i,S.tag){case 1:if(b=S.payload,typeof b=="function"){p=b.call(y,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=S.payload,m=typeof b=="function"?b.call(y,p,m):b,m==null)break e;p=ti({},p,m);break e;case 2:yo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else y={eventTime:y,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=y,c=p):l=l.next=y,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(l===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=l,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else n===null&&(s.shared.lanes=0);ld|=a,t.lanes=a,t.memoizedState=p}}function Rx(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=i,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var PR=new T5.Component().refs;function H1(t,e,i,r){e=t.memoizedState,i=i(r,e),i=i==null?e:ti({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var sy={isMounted:function(t){return(t=t._reactInternals)?wd(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=xr(),s=No(t),n=Ea(r,s);n.payload=e,i!=null&&(n.callback=i),e=Oo(t,n,s),e!==null&&(un(e,t,s,r),Fm(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=xr(),s=No(t),n=Ea(r,s);n.tag=1,n.payload=e,i!=null&&(n.callback=i),e=Oo(t,n,s),e!==null&&(un(e,t,s,r),Fm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=xr(),r=No(t),s=Ea(i,r);s.tag=2,e!=null&&(s.callback=e),e=Oo(t,s,r),e!==null&&(un(e,t,r,i),Fm(e,t,r))}};function Ix(t,e,i,r,s,n,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,n,a):e.prototype&&e.prototype.isPureReactComponent?!Tp(i,r)||!Tp(s,n):!0}function RR(t,e,i){var r=!1,s=Bo,n=e.contextType;return typeof n=="object"&&n!==null?n=Ds(n):(s=Br(e)?od:mr.current,r=e.contextTypes,n=(r=r!=null)?Xl(t,s):Bo),e=new e(i,n),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),e}function Ax(t,e,i,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&sy.enqueueReplaceState(e,e.state,null)}function W1(t,e,i,r){var s=t.stateNode;s.props=i,s.state=t.memoizedState,s.refs=PR,l_(t);var n=e.contextType;typeof n=="object"&&n!==null?s.context=Ds(n):(n=Br(e)?od:mr.current,s.context=Xl(t,n)),s.state=t.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(H1(t,e,n,i),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sy.enqueueReplaceState(s,s.state,null),tv(t,i,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zu(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(ae(309));var r=i.stateNode}if(!r)throw Error(ae(147,t));var s=r,n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(a){var o=s.refs;o===PR&&(o=s.refs={}),a===null?delete o[n]:o[n]=a},e._stringRef=n,e)}if(typeof t!="string")throw Error(ae(284));if(!i._owner)throw Error(ae(290,t))}return t}function tm(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mx(t){var e=t._init;return e(t._payload)}function IR(t){function e(k,T){if(t){var I=k.deletions;I===null?(k.deletions=[T],k.flags|=16):I.push(T)}}function i(k,T){if(!t)return null;for(;T!==null;)e(k,T),T=T.sibling;return null}function r(k,T){for(k=new Map;T!==null;)T.key!==null?k.set(T.key,T):k.set(T.index,T),T=T.sibling;return k}function s(k,T){return k=Uo(k,T),k.index=0,k.sibling=null,k}function n(k,T,I){return k.index=I,t?(I=k.alternate,I!==null?(I=I.index,I<T?(k.flags|=2,T):I):(k.flags|=2,T)):(k.flags|=1048576,T)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function o(k,T,I,O){return T===null||T.tag!==6?(T=Z0(I,k.mode,O),T.return=k,T):(T=s(T,I),T.return=k,T)}function c(k,T,I,O){var q=I.type;return q===xl?l(k,T,I.props.children,O,I.key):T!==null&&(T.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===vo&&Mx(q)===T.type)?(O=s(T,I.props),O.ref=Zu(k,T,I),O.return=k,O):(O=qm(I.type,I.key,I.props,null,k.mode,O),O.ref=Zu(k,T,I),O.return=k,O)}function u(k,T,I,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=X0(I,k.mode,O),T.return=k,T):(T=s(T,I.children||[]),T.return=k,T)}function l(k,T,I,O,q){return T===null||T.tag!==7?(T=td(I,k.mode,O,q),T.return=k,T):(T=s(T,I),T.return=k,T)}function p(k,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Z0(""+T,k.mode,I),T.return=k,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hg:return I=qm(T.type,T.key,T.props,null,k.mode,I),I.ref=Zu(k,null,T),I.return=k,I;case Sl:return T=X0(T,k.mode,I),T.return=k,T;case vo:var O=T._init;return p(k,O(T._payload),I)}if(Ih(T)||qu(T))return T=td(T,k.mode,I,null),T.return=k,T;tm(k,T)}return null}function m(k,T,I,O){var q=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return q!==null?null:o(k,T,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Hg:return I.key===q?c(k,T,I,O):null;case Sl:return I.key===q?u(k,T,I,O):null;case vo:return q=I._init,m(k,T,q(I._payload),O)}if(Ih(I)||qu(I))return q!==null?null:l(k,T,I,O,null);tm(k,I)}return null}function y(k,T,I,O,q){if(typeof O=="string"&&O!==""||typeof O=="number")return k=k.get(I)||null,o(T,k,""+O,q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Hg:return k=k.get(O.key===null?I:O.key)||null,c(T,k,O,q);case Sl:return k=k.get(O.key===null?I:O.key)||null,u(T,k,O,q);case vo:var B=O._init;return y(k,T,I,B(O._payload),q)}if(Ih(O)||qu(O))return k=k.get(I)||null,l(T,k,O,q,null);tm(T,O)}return null}function b(k,T,I,O){for(var q=null,B=null,Y=T,X=T=0,be=null;Y!==null&&X<I.length;X++){Y.index>X?(be=Y,Y=null):be=Y.sibling;var he=m(k,Y,I[X],O);if(he===null){Y===null&&(Y=be);break}t&&Y&&he.alternate===null&&e(k,Y),T=n(he,T,X),B===null?q=he:B.sibling=he,B=he,Y=be}if(X===I.length)return i(k,Y),qt&&bc(k,X),q;if(Y===null){for(;X<I.length;X++)Y=p(k,I[X],O),Y!==null&&(T=n(Y,T,X),B===null?q=Y:B.sibling=Y,B=Y);return qt&&bc(k,X),q}for(Y=r(k,Y);X<I.length;X++)be=y(Y,k,X,I[X],O),be!==null&&(t&&be.alternate!==null&&Y.delete(be.key===null?X:be.key),T=n(be,T,X),B===null?q=be:B.sibling=be,B=be);return t&&Y.forEach(function(ce){return e(k,ce)}),qt&&bc(k,X),q}function S(k,T,I,O){var q=qu(I);if(typeof q!="function")throw Error(ae(150));if(I=q.call(I),I==null)throw Error(ae(151));for(var B=q=null,Y=T,X=T=0,be=null,he=I.next();Y!==null&&!he.done;X++,he=I.next()){Y.index>X?(be=Y,Y=null):be=Y.sibling;var ce=m(k,Y,he.value,O);if(ce===null){Y===null&&(Y=be);break}t&&Y&&ce.alternate===null&&e(k,Y),T=n(ce,T,X),B===null?q=ce:B.sibling=ce,B=ce,Y=be}if(he.done)return i(k,Y),qt&&bc(k,X),q;if(Y===null){for(;!he.done;X++,he=I.next())he=p(k,he.value,O),he!==null&&(T=n(he,T,X),B===null?q=he:B.sibling=he,B=he);return qt&&bc(k,X),q}for(Y=r(k,Y);!he.done;X++,he=I.next())he=y(Y,k,X,he.value,O),he!==null&&(t&&he.alternate!==null&&Y.delete(he.key===null?X:he.key),T=n(he,T,X),B===null?q=he:B.sibling=he,B=he);return t&&Y.forEach(function(et){return e(k,et)}),qt&&bc(k,X),q}function E(k,T,I,O){if(typeof I=="object"&&I!==null&&I.type===xl&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Hg:e:{for(var q=I.key,B=T;B!==null;){if(B.key===q){if(q=I.type,q===xl){if(B.tag===7){i(k,B.sibling),T=s(B,I.props.children),T.return=k,k=T;break e}}else if(B.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===vo&&Mx(q)===B.type){i(k,B.sibling),T=s(B,I.props),T.ref=Zu(k,B,I),T.return=k,k=T;break e}i(k,B);break}else e(k,B);B=B.sibling}I.type===xl?(T=td(I.props.children,k.mode,O,I.key),T.return=k,k=T):(O=qm(I.type,I.key,I.props,null,k.mode,O),O.ref=Zu(k,T,I),O.return=k,k=O)}return a(k);case Sl:e:{for(B=I.key;T!==null;){if(T.key===B)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){i(k,T.sibling),T=s(T,I.children||[]),T.return=k,k=T;break e}else{i(k,T);break}else e(k,T);T=T.sibling}T=X0(I,k.mode,O),T.return=k,k=T}return a(k);case vo:return B=I._init,E(k,T,B(I._payload),O)}if(Ih(I))return b(k,T,I,O);if(qu(I))return S(k,T,I,O);tm(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(i(k,T.sibling),T=s(T,I),T.return=k,k=T):(i(k,T),T=Z0(I,k.mode,O),T.return=k,k=T),a(k)):i(k,T)}return E}var tu=IR(!0),AR=IR(!1),ng={},zn=Ko(ng),Ip=Ko(ng),Ap=Ko(ng);function Kc(t){if(t===ng)throw Error(ae(174));return t}function u_(t,e){switch(It(Ap,e),It(Ip,t),It(zn,ng),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S1(e,t)}Vt(zn),It(zn,e)}function iu(){Vt(zn),Vt(Ip),Vt(Ap)}function MR(t){Kc(Ap.current);var e=Kc(zn.current),i=S1(e,t.type);e!==i&&(It(Ip,t),It(zn,i))}function h_(t){Ip.current===t&&(Vt(zn),Vt(Ip))}var Xt=Ko(0);function iv(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var G0=[];function p_(){for(var t=0;t<G0.length;t++)G0[t]._workInProgressVersionPrimary=null;G0.length=0}var Vm=Ua.ReactCurrentDispatcher,q0=Ua.ReactCurrentBatchConfig,dd=0,ei=null,zi=null,Ji=null,rv=!1,ip=!1,Mp=0,q8=0;function ar(){throw Error(ae(321))}function g_(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!gn(t[i],e[i]))return!1;return!0}function m_(t,e,i,r,s,n){if(dd=n,ei=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vm.current=t===null||t.memoizedState===null?Y8:Z8,t=i(r,s),ip){n=0;do{if(ip=!1,Mp=0,25<=n)throw Error(ae(301));n+=1,Ji=zi=null,e.updateQueue=null,Vm.current=X8,t=i(r,s)}while(ip)}if(Vm.current=sv,e=zi!==null&&zi.next!==null,dd=0,Ji=zi=ei=null,rv=!1,e)throw Error(ae(300));return t}function f_(){var t=Mp!==0;return Mp=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ji===null?ei.memoizedState=Ji=t:Ji=Ji.next=t,Ji}function Os(){if(zi===null){var t=ei.alternate;t=t!==null?t.memoizedState:null}else t=zi.next;var e=Ji===null?ei.memoizedState:Ji.next;if(e!==null)Ji=e,zi=t;else{if(t===null)throw Error(ae(310));zi=t,t={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},Ji===null?ei.memoizedState=Ji=t:Ji=Ji.next=t}return Ji}function Dp(t,e){return typeof e=="function"?e(t):e}function J0(t){var e=Os(),i=e.queue;if(i===null)throw Error(ae(311));i.lastRenderedReducer=t;var r=zi,s=r.baseQueue,n=i.pending;if(n!==null){if(s!==null){var a=s.next;s.next=n.next,n.next=a}r.baseQueue=s=n,i.pending=null}if(s!==null){n=s.next,r=r.baseState;var o=a=null,c=null,u=n;do{var l=u.lane;if((dd&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=p,a=r):c=c.next=p,ei.lanes|=l,ld|=l}u=u.next}while(u!==null&&u!==n);c===null?a=r:c.next=o,gn(r,e.memoizedState)||(zr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,i.lastRenderedState=r}if(t=i.interleaved,t!==null){s=t;do n=s.lane,ei.lanes|=n,ld|=n,s=s.next;while(s!==t)}else s===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function K0(t){var e=Os(),i=e.queue;if(i===null)throw Error(ae(311));i.lastRenderedReducer=t;var r=i.dispatch,s=i.pending,n=e.memoizedState;if(s!==null){i.pending=null;var a=s=s.next;do n=t(n,a.action),a=a.next;while(a!==s);gn(n,e.memoizedState)||(zr=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),i.lastRenderedState=n}return[n,r]}function DR(){}function OR(t,e){var i=ei,r=Os(),s=e(),n=!gn(r.memoizedState,s);if(n&&(r.memoizedState=s,zr=!0),r=r.queue,v_(UR.bind(null,i,r,t),[t]),r.getSnapshot!==e||n||Ji!==null&&Ji.memoizedState.tag&1){if(i.flags|=2048,Op(9,NR.bind(null,i,r,s,e),void 0,null),Ki===null)throw Error(ae(349));(dd&30)!==0||LR(i,e,s)}return s}function LR(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=ei.updateQueue,e===null?(e={lastEffect:null,stores:null},ei.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function NR(t,e,i,r){e.value=i,e.getSnapshot=r,jR(e)&&$R(t)}function UR(t,e,i){return i(function(){jR(e)&&$R(t)})}function jR(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!gn(t,i)}catch{return!0}}function $R(t){var e=Ia(t,1);e!==null&&un(e,t,1,-1)}function Dx(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dp,lastRenderedState:t},e.queue=t,t=t.dispatch=Q8.bind(null,ei,t),[e.memoizedState,t]}function Op(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},e=ei.updateQueue,e===null?(e={lastEffect:null,stores:null},ei.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t)),t}function zR(){return Os().memoizedState}function Bm(t,e,i,r){var s=Mn();ei.flags|=t,s.memoizedState=Op(1|e,i,void 0,r===void 0?null:r)}function ny(t,e,i,r){var s=Os();r=r===void 0?null:r;var n=void 0;if(zi!==null){var a=zi.memoizedState;if(n=a.destroy,r!==null&&g_(r,a.deps)){s.memoizedState=Op(e,i,n,r);return}}ei.flags|=t,s.memoizedState=Op(1|e,i,n,r)}function Ox(t,e){return Bm(8390656,8,t,e)}function v_(t,e){return ny(2048,8,t,e)}function FR(t,e){return ny(4,2,t,e)}function VR(t,e){return ny(4,4,t,e)}function BR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HR(t,e,i){return i=i!=null?i.concat([t]):null,ny(4,4,BR.bind(null,e,t),i)}function y_(){}function WR(t,e){var i=Os();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&g_(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function GR(t,e){var i=Os();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&g_(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function qR(t,e,i){return(dd&21)===0?(t.baseState&&(t.baseState=!1,zr=!0),t.memoizedState=i):(gn(i,e)||(i=Q5(),ei.lanes|=i,ld|=i,t.baseState=!0),e)}function J8(t,e){var i=vt;vt=i!==0&&4>i?i:4,t(!0);var r=q0.transition;q0.transition={};try{t(!1),e()}finally{vt=i,q0.transition=r}}function JR(){return Os().memoizedState}function K8(t,e,i){var r=No(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},KR(t))QR(e,i);else if(i=TR(t,e,i,r),i!==null){var s=xr();un(i,t,r,s),YR(i,e,r)}}function Q8(t,e,i){var r=No(t),s={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(KR(t))QR(e,s);else{var n=t.alternate;if(t.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var a=e.lastRenderedState,o=n(a,i);if(s.hasEagerState=!0,s.eagerState=o,gn(o,a)){var c=e.interleaved;c===null?(s.next=s,d_(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}i=TR(t,e,s,r),i!==null&&(s=xr(),un(i,t,r,s),YR(i,e,r))}}function KR(t){var e=t.alternate;return t===ei||e!==null&&e===ei}function QR(t,e){ip=rv=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function YR(t,e,i){if((i&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,Kk(t,i)}}var sv={readContext:Ds,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},Y8={readContext:Ds,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:Ds,useEffect:Ox,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Bm(4194308,4,BR.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Bm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bm(4,2,t,e)},useMemo:function(t,e){var i=Mn();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=Mn();return e=i!==void 0?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=K8.bind(null,ei,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:Dx,useDebugValue:y_,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=Dx(!1),e=t[0];return t=J8.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=ei,s=Mn();if(qt){if(i===void 0)throw Error(ae(407));i=i()}else{if(i=e(),Ki===null)throw Error(ae(349));(dd&30)!==0||LR(r,e,i)}s.memoizedState=i;var n={value:i,getSnapshot:e};return s.queue=n,Ox(UR.bind(null,r,n,t),[t]),r.flags|=2048,Op(9,NR.bind(null,r,n,i,e),void 0,null),i},useId:function(){var t=Mn(),e=Ki.identifierPrefix;if(qt){var i=ka,r=wa;i=(r&~(1<<32-ln(r)-1)).toString(32)+i,e=":"+e+"R"+i,i=Mp++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=q8++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z8={readContext:Ds,useCallback:WR,useContext:Ds,useEffect:v_,useImperativeHandle:HR,useInsertionEffect:FR,useLayoutEffect:VR,useMemo:GR,useReducer:J0,useRef:zR,useState:function(){return J0(Dp)},useDebugValue:y_,useDeferredValue:function(t){var e=Os();return qR(e,zi.memoizedState,t)},useTransition:function(){var t=J0(Dp)[0],e=Os().memoizedState;return[t,e]},useMutableSource:DR,useSyncExternalStore:OR,useId:JR,unstable_isNewReconciler:!1},X8={readContext:Ds,useCallback:WR,useContext:Ds,useEffect:v_,useImperativeHandle:HR,useInsertionEffect:FR,useLayoutEffect:VR,useMemo:GR,useReducer:K0,useRef:zR,useState:function(){return K0(Dp)},useDebugValue:y_,useDeferredValue:function(t){var e=Os();return zi===null?e.memoizedState=t:qR(e,zi.memoizedState,t)},useTransition:function(){var t=K0(Dp)[0],e=Os().memoizedState;return[t,e]},useMutableSource:DR,useSyncExternalStore:OR,useId:JR,unstable_isNewReconciler:!1};function ru(t,e){try{var i="",r=e;do i+=C7(r),r=r.return;while(r);var s=i}catch(n){s=`
Error generating stack: `+n.message+`
`+n.stack}return{value:t,source:e,stack:s,digest:null}}function Q0(t,e,i){return{value:t,source:null,stack:i!=null?i:null,digest:e!=null?e:null}}function G1(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var eN=typeof WeakMap=="function"?WeakMap:Map;function ZR(t,e,i){i=Ea(-1,i),i.tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){av||(av=!0,iw=r),G1(t,e)},i}function XR(t,e,i){i=Ea(-1,i),i.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;i.payload=function(){return r(s)},i.callback=function(){G1(t,e)}}var n=t.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(i.callback=function(){G1(t,e),typeof r!="function"&&(Lo===null?Lo=new Set([this]):Lo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),i}function Lx(t,e,i){var r=t.pingCache;if(r===null){r=t.pingCache=new eN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(i)||(s.add(i),t=gN.bind(null,t,e,i),e.then(t,t))}function Nx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ux(t,e,i,r,s){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Ea(-1,1),e.tag=2,Oo(i,e,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var tN=Ua.ReactCurrentOwner,zr=!1;function _r(t,e,i,r){e.child=t===null?AR(e,null,i,r):tu(e,t.child,i,r)}function jx(t,e,i,r,s){i=i.render;var n=e.ref;return zl(e,s),r=m_(t,e,i,r,n,s),i=f_(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Aa(t,e,s)):(qt&&i&&r_(e),e.flags|=1,_r(t,e,r,s),e.child)}function $x(t,e,i,r,s){if(t===null){var n=i.type;return typeof n=="function"&&!T_(n)&&n.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=n,e3(t,e,n,r,s)):(t=qm(i.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(n=t.child,(t.lanes&s)===0){var a=n.memoizedProps;if(i=i.compare,i=i!==null?i:Tp,i(a,r)&&t.ref===e.ref)return Aa(t,e,s)}return e.flags|=1,t=Uo(n,r),t.ref=e.ref,t.return=e,e.child=t}function e3(t,e,i,r,s){if(t!==null){var n=t.memoizedProps;if(Tp(n,r)&&t.ref===e.ref)if(zr=!1,e.pendingProps=r=n,(t.lanes&s)!==0)(t.flags&131072)!==0&&(zr=!0);else return e.lanes=t.lanes,Aa(t,e,s)}return q1(t,e,i,r,s)}function t3(t,e,i){var r=e.pendingProps,s=r.children,n=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(Ol,ss),ss|=i;else{if((i&1073741824)===0)return t=n!==null?n.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(Ol,ss),ss|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=n!==null?n.baseLanes:i,It(Ol,ss),ss|=r}else n!==null?(r=n.baseLanes|i,e.memoizedState=null):r=i,It(Ol,ss),ss|=r;return _r(t,e,s,i),e.child}function i3(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function q1(t,e,i,r,s){var n=Br(i)?od:mr.current;return n=Xl(e,n),zl(e,s),i=m_(t,e,i,r,n,s),r=f_(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Aa(t,e,s)):(qt&&r&&r_(e),e.flags|=1,_r(t,e,i,s),e.child)}function zx(t,e,i,r,s){if(Br(i)){var n=!0;Qf(e)}else n=!1;if(zl(e,s),e.stateNode===null)Hm(t,e),RR(e,i,r),W1(e,i,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=i.contextType;typeof u=="object"&&u!==null?u=Ds(u):(u=Br(i)?od:mr.current,u=Xl(e,u));var l=i.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&Ax(e,a,r,u),yo=!1;var m=e.memoizedState;a.state=m,tv(e,r,a,s),c=e.memoizedState,o!==r||m!==c||Vr.current||yo?(typeof l=="function"&&(H1(e,i,l,r),c=e.memoizedState),(o=yo||Ix(e,i,o,r,m,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,CR(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Zs(e.type,o),a.props=u,p=e.pendingProps,m=a.context,c=i.contextType,typeof c=="object"&&c!==null?c=Ds(c):(c=Br(i)?od:mr.current,c=Xl(e,c));var y=i.getDerivedStateFromProps;(l=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==c)&&Ax(e,a,r,c),yo=!1,m=e.memoizedState,a.state=m,tv(e,r,a,s);var b=e.memoizedState;o!==p||m!==b||Vr.current||yo?(typeof y=="function"&&(H1(e,i,y,r),b=e.memoizedState),(u=yo||Ix(e,i,u,r,m,b,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return J1(t,e,i,r,n,s)}function J1(t,e,i,r,s,n){i3(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ex(e,i,!1),Aa(t,e,n);r=e.stateNode,tN.current=e;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=tu(e,t.child,null,n),e.child=tu(e,null,o,n)):_r(t,e,o,n),e.memoizedState=r.state,s&&Ex(e,i,!0),e.child}function r3(t){var e=t.stateNode;e.pendingContext?xx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xx(t,e.context,!1),u_(t,e.containerInfo)}function Fx(t,e,i,r,s){return eu(),n_(s),e.flags|=256,_r(t,e,i,r),e.child}var K1={dehydrated:null,treeContext:null,retryLane:0};function Q1(t){return{baseLanes:t,cachePool:null,transitions:null}}function s3(t,e,i){var r=e.pendingProps,s=Xt.current,n=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(n=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),It(Xt,s&1),t===null)return V1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(a=r.children,t=r.fallback,n?(r=e.mode,n=e.child,a={mode:"hidden",children:a},(r&1)===0&&n!==null?(n.childLanes=0,n.pendingProps=a):n=cy(a,r,0,null),t=td(t,r,i,null),n.return=e,t.return=e,n.sibling=t,e.child=n,e.child.memoizedState=Q1(i),e.memoizedState=K1,t):b_(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return iN(t,e,a,r,o,s,i);if(n){n=r.fallback,a=e.mode,s=t.child,o=s.sibling;var c={mode:"hidden",children:r.children};return(a&1)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Uo(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?n=Uo(o,n):(n=td(n,a,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,r=n,n=e.child,a=t.child.memoizedState,a=a===null?Q1(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},n.memoizedState=a,n.childLanes=t.childLanes&~i,e.memoizedState=K1,r}return n=t.child,t=n.sibling,r=Uo(n,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=i),r.return=e,r.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=r,e.memoizedState=null,r}function b_(t,e){return e=cy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function im(t,e,i,r){return r!==null&&n_(r),tu(e,t.child,null,i),t=b_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iN(t,e,i,r,s,n,a){if(i)return e.flags&256?(e.flags&=-257,r=Q0(Error(ae(422))),im(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(n=r.fallback,s=e.mode,r=cy({mode:"visible",children:r.children},s,0,null),n=td(n,s,a,null),n.flags|=2,r.return=e,n.return=e,r.sibling=n,e.child=r,(e.mode&1)!==0&&tu(e,t.child,null,a),e.child.memoizedState=Q1(a),e.memoizedState=K1,n);if((e.mode&1)===0)return im(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,n=Error(ae(419)),r=Q0(n,r,void 0),im(t,e,a,r)}if(o=(a&t.childLanes)!==0,zr||o){if(r=Ki,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|a))!==0?0:s,s!==0&&s!==n.retryLane&&(n.retryLane=s,Ia(t,s),un(r,t,s,-1))}return E_(),r=Q0(Error(ae(421))),im(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mN.bind(null,t),s._reactRetry=e,null):(t=n.treeContext,cs=Do(s.nextSibling),hs=e,qt=!0,tn=null,t!==null&&(xs[Es++]=wa,xs[Es++]=ka,xs[Es++]=cd,wa=t.id,ka=t.overflow,cd=e),e=b_(e,r.children),e.flags|=4096,e)}function Vx(t,e,i){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),B1(t.return,e,i)}function Y0(t,e,i,r,s){var n=t.memoizedState;n===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:s}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=i,n.tailMode=s)}function n3(t,e,i){var r=e.pendingProps,s=r.revealOrder,n=r.tail;if(_r(t,e,r.children,i),r=Xt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vx(t,i,e);else if(t.tag===19)Vx(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(Xt,r),(e.mode&1)===0)e.memoizedState=null;else switch(s){case"forwards":for(i=e.child,s=null;i!==null;)t=i.alternate,t!==null&&iv(t)===null&&(s=i),i=i.sibling;i=s,i===null?(s=e.child,e.child=null):(s=i.sibling,i.sibling=null),Y0(e,!1,s,i,n);break;case"backwards":for(i=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&iv(t)===null){e.child=s;break}t=s.sibling,s.sibling=i,i=s,s=t}Y0(e,!0,i,null,n);break;case"together":Y0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hm(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Aa(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),ld|=e.lanes,(i&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,i=Uo(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Uo(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function rN(t,e,i){switch(e.tag){case 3:r3(e),eu();break;case 5:MR(e);break;case 1:Br(e.type)&&Qf(e);break;case 4:u_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;It(Xf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(Xt,Xt.current&1),e.flags|=128,null):(i&e.child.childLanes)!==0?s3(t,e,i):(It(Xt,Xt.current&1),t=Aa(t,e,i),t!==null?t.sibling:null);It(Xt,Xt.current&1);break;case 19:if(r=(i&e.childLanes)!==0,(t.flags&128)!==0){if(r)return n3(t,e,i);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),It(Xt,Xt.current),r)break;return null;case 22:case 23:return e.lanes=0,t3(t,e,i)}return Aa(t,e,i)}var a3,Y1,o3,c3;a3=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Y1=function(){};o3=function(t,e,i,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Kc(zn.current);var n=null;switch(i){case"input":s=b1(t,s),r=b1(t,r),n=[];break;case"select":s=ti({},s,{value:void 0}),r=ti({},r,{value:void 0}),n=[];break;case"textarea":s=_1(t,s),r=_1(t,r),n=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jf)}x1(i,r);var a;i=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bp.hasOwnProperty(u)?n||(n=[]):(n=n||[]).push(u,null));for(u in r){var c=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(n||(n=[]),n.push(u,i)),i=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(n=n||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(n=n||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Nt("scroll",t),n||o===c||(n=[])):(n=n||[]).push(u,c))}i&&(n=n||[]).push("style",i);var u=n;(e.updateQueue=u)&&(e.flags|=4)}};c3=function(t,e,i,r){i!==r&&(e.flags|=4)};function Xu(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function or(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,r=0;if(e)for(var s=t.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function sN(t,e,i){var r=e.pendingProps;switch(s_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(e),null;case 1:return Br(e.type)&&Kf(),or(e),null;case 3:return r=e.stateNode,iu(),Vt(Vr),Vt(mr),p_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(em(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,tn!==null&&(nw(tn),tn=null))),Y1(t,e),or(e),null;case 5:h_(e);var s=Kc(Ap.current);if(i=e.type,t!==null&&e.stateNode!=null)o3(t,e,i,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return or(e),null}if(t=Kc(zn.current),em(e)){r=e.stateNode,i=e.type;var n=e.memoizedProps;switch(r[Nn]=e,r[Rp]=n,t=(e.mode&1)!==0,i){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(s=0;s<Mh.length;s++)Nt(Mh[s],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":Y2(r,n),Nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!n.multiple},Nt("invalid",r);break;case"textarea":X2(r,n),Nt("invalid",r)}x1(i,n),s=null;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];a==="children"?typeof o=="string"?r.textContent!==o&&(n.suppressHydrationWarning!==!0&&Xg(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(n.suppressHydrationWarning!==!0&&Xg(r.textContent,o,t),s=["children",""+o]):bp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Nt("scroll",r)}switch(i){case"input":Wg(r),Z2(r,n,!0);break;case"textarea":Wg(r),ex(r);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(r.onclick=Jf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L5(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(i,{is:r.is}):(t=a.createElement(i),i==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,i),t[Nn]=e,t[Rp]=r,a3(t,e,!1,!1),e.stateNode=t;e:{switch(a=E1(i,r),i){case"dialog":Nt("cancel",t),Nt("close",t),s=r;break;case"iframe":case"object":case"embed":Nt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Mh.length;s++)Nt(Mh[s],t);s=r;break;case"source":Nt("error",t),s=r;break;case"img":case"image":case"link":Nt("error",t),Nt("load",t),s=r;break;case"details":Nt("toggle",t),s=r;break;case"input":Y2(t,r),s=b1(t,r),Nt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ti({},r,{value:void 0}),Nt("invalid",t);break;case"textarea":X2(t,r),s=_1(t,r),Nt("invalid",t);break;default:s=r}x1(i,s),o=s;for(n in o)if(o.hasOwnProperty(n)){var c=o[n];n==="style"?j5(t,c):n==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&N5(t,c)):n==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&wp(t,c):typeof c=="number"&&wp(t,""+c):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(bp.hasOwnProperty(n)?c!=null&&n==="onScroll"&&Nt("scroll",t):c!=null&&Bk(t,n,c,a))}switch(i){case"input":Wg(t),Z2(t,r,!1);break;case"textarea":Wg(t),ex(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vo(r.value));break;case"select":t.multiple=!!r.multiple,n=r.value,n!=null?Nl(t,!!r.multiple,n,!1):r.defaultValue!=null&&Nl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jf)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return or(e),null;case 6:if(t&&e.stateNode!=null)c3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(i=Kc(Ap.current),Kc(zn.current),em(e)){if(r=e.stateNode,i=e.memoizedProps,r[Nn]=e,(n=r.nodeValue!==i)&&(t=hs,t!==null))switch(t.tag){case 3:Xg(r.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xg(r.nodeValue,i,(t.mode&1)!==0)}n&&(e.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return or(e),null;case 13:if(Vt(Xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&cs!==null&&(e.mode&1)!==0&&(e.flags&128)===0)ER(),eu(),e.flags|=98560,n=!1;else if(n=em(e),r!==null&&r.dehydrated!==null){if(t===null){if(!n)throw Error(ae(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ae(317));n[Nn]=e}else eu(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;or(e),n=!1}else tn!==null&&(nw(tn),tn=null),n=!0;if(!n)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=i,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Xt.current&1)!==0?Vi===0&&(Vi=3):E_())),e.updateQueue!==null&&(e.flags|=4),or(e),null);case 4:return iu(),Y1(t,e),t===null&&Cp(e.stateNode.containerInfo),or(e),null;case 10:return c_(e.type._context),or(e),null;case 17:return Br(e.type)&&Kf(),or(e),null;case 19:if(Vt(Xt),n=e.memoizedState,n===null)return or(e),null;if(r=(e.flags&128)!==0,a=n.rendering,a===null)if(r)Xu(n,!1);else{if(Vi!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=iv(t),a!==null){for(e.flags|=128,Xu(n,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;i!==null;)n=i,t=r,n.flags&=14680066,a=n.alternate,a===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,t=a.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return It(Xt,Xt.current&1|2),e.child}t=t.sibling}n.tail!==null&&yi()>su&&(e.flags|=128,r=!0,Xu(n,!1),e.lanes=4194304)}else{if(!r)if(t=iv(a),t!==null){if(e.flags|=128,r=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Xu(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!qt)return or(e),null}else 2*yi()-n.renderingStartTime>su&&i!==1073741824&&(e.flags|=128,r=!0,Xu(n,!1),e.lanes=4194304);n.isBackwards?(a.sibling=e.child,e.child=a):(i=n.last,i!==null?i.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=yi(),e.sibling=null,i=Xt.current,It(Xt,r?i&1|2:i&1),e):(or(e),null);case 22:case 23:return x_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(ss&1073741824)!==0&&(or(e),e.subtreeFlags&6&&(e.flags|=8192)):or(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function nN(t,e){switch(s_(e),e.tag){case 1:return Br(e.type)&&Kf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return iu(),Vt(Vr),Vt(mr),p_(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return h_(e),null;case 13:if(Vt(Xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));eu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Xt),null;case 4:return iu(),null;case 10:return c_(e.type._context),null;case 22:case 23:return x_(),null;case 24:return null;default:return null}}var rm=!1,pr=!1,aN=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Dl(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){li(t,e,r)}else i.current=null}function Z1(t,e,i){try{i()}catch(r){li(t,e,r)}}var Bx=!1;function oN(t,e){if(L1=Wf,t=hR(),i_(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var s=r.anchorOffset,n=r.focusNode;r=r.focusOffset;try{i.nodeType,n.nodeType}catch{i=null;break e}var a=0,o=-1,c=-1,u=0,l=0,p=t,m=null;t:for(;;){for(var y;p!==i||s!==0&&p.nodeType!==3||(o=a+s),p!==n||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===i&&++u===s&&(o=a),m===n&&++l===r&&(c=a),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}i=o===-1||c===-1?null:{start:o,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(N1={focusedElem:t,selectionRange:i},Wf=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var b=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var S=b.memoizedProps,E=b.memoizedState,k=e.stateNode,T=k.getSnapshotBeforeUpdate(e.elementType===e.type?S:Zs(e.type,S),E);k.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(O){li(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return b=Bx,Bx=!1,b}function rp(t,e,i){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var n=s.destroy;s.destroy=void 0,n!==void 0&&Z1(e,i,n)}s=s.next}while(s!==r)}}function ay(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function X1(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function d3(t){var e=t.alternate;e!==null&&(t.alternate=null,d3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[Rp],delete e[$1],delete e[B8],delete e[H8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l3(t){return t.tag===5||t.tag===3||t.tag===4}function Hx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ew(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Jf));else if(r!==4&&(t=t.child,t!==null))for(ew(t,e,i),t=t.sibling;t!==null;)ew(t,e,i),t=t.sibling}function tw(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tw(t,e,i),t=t.sibling;t!==null;)tw(t,e,i),t=t.sibling}var tr=null,Xs=!1;function Wa(t,e,i){for(i=i.child;i!==null;)u3(t,e,i),i=i.sibling}function u3(t,e,i){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Zv,i)}catch{}switch(i.tag){case 5:pr||Dl(i,e);case 6:var r=tr,s=Xs;tr=null,Wa(t,e,i),tr=r,Xs=s,tr!==null&&(Xs?(t=tr,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):tr.removeChild(i.stateNode));break;case 18:tr!==null&&(Xs?(t=tr,i=i.stateNode,t.nodeType===8?H0(t.parentNode,i):t.nodeType===1&&H0(t,i),xp(t)):H0(tr,i.stateNode));break;case 4:r=tr,s=Xs,tr=i.stateNode.containerInfo,Xs=!0,Wa(t,e,i),tr=r,Xs=s;break;case 0:case 11:case 14:case 15:if(!pr&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var n=s,a=n.destroy;n=n.tag,a!==void 0&&((n&2)!==0||(n&4)!==0)&&Z1(i,e,a),s=s.next}while(s!==r)}Wa(t,e,i);break;case 1:if(!pr&&(Dl(i,e),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(o){li(i,e,o)}Wa(t,e,i);break;case 21:Wa(t,e,i);break;case 22:i.mode&1?(pr=(r=pr)||i.memoizedState!==null,Wa(t,e,i),pr=r):Wa(t,e,i);break;default:Wa(t,e,i)}}function Wx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new aN),e.forEach(function(r){var s=fN.bind(null,t,r);i.has(r)||(i.add(r),r.then(s,s))})}}function Fs(t,e){var i=e.deletions;if(i!==null)for(var r=0;r<i.length;r++){var s=i[r];try{var n=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:tr=o.stateNode,Xs=!1;break e;case 3:tr=o.stateNode.containerInfo,Xs=!0;break e;case 4:tr=o.stateNode.containerInfo,Xs=!0;break e}o=o.return}if(tr===null)throw Error(ae(160));u3(n,a,s),tr=null,Xs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){li(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h3(e,t),e=e.sibling}function h3(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fs(e,t),Sn(t),r&4){try{rp(3,t,t.return),ay(3,t)}catch(S){li(t,t.return,S)}try{rp(5,t,t.return)}catch(S){li(t,t.return,S)}}break;case 1:Fs(e,t),Sn(t),r&512&&i!==null&&Dl(i,i.return);break;case 5:if(Fs(e,t),Sn(t),r&512&&i!==null&&Dl(i,i.return),t.flags&32){var s=t.stateNode;try{wp(s,"")}catch(S){li(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var n=t.memoizedProps,a=i!==null?i.memoizedProps:n,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&n.type==="radio"&&n.name!=null&&D5(s,n),E1(o,a);var u=E1(o,n);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?j5(s,p):l==="dangerouslySetInnerHTML"?N5(s,p):l==="children"?wp(s,p):Bk(s,l,p,u)}switch(o){case"input":w1(s,n);break;case"textarea":O5(s,n);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!n.multiple;var y=n.value;y!=null?Nl(s,!!n.multiple,y,!1):m!==!!n.multiple&&(n.defaultValue!=null?Nl(s,!!n.multiple,n.defaultValue,!0):Nl(s,!!n.multiple,n.multiple?[]:"",!1))}s[Rp]=n}catch(S){li(t,t.return,S)}}break;case 6:if(Fs(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,n=t.memoizedProps;try{s.nodeValue=n}catch(S){li(t,t.return,S)}}break;case 3:if(Fs(e,t),Sn(t),r&4&&i!==null&&i.memoizedState.isDehydrated)try{xp(e.containerInfo)}catch(S){li(t,t.return,S)}break;case 4:Fs(e,t),Sn(t);break;case 13:Fs(e,t),Sn(t),s=t.child,s.flags&8192&&(n=s.memoizedState!==null,s.stateNode.isHidden=n,!n||s.alternate!==null&&s.alternate.memoizedState!==null||(__=yi())),r&4&&Wx(t);break;case 22:if(l=i!==null&&i.memoizedState!==null,t.mode&1?(pr=(u=pr)||l,Fs(e,t),pr=u):Fs(e,t),Sn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&(t.mode&1)!==0)for(pe=t,l=t.child;l!==null;){for(p=pe=l;pe!==null;){switch(m=pe,y=m.child,m.tag){case 0:case 11:case 14:case 15:rp(4,m,m.return);break;case 1:Dl(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,i=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(S){li(r,i,S)}}break;case 5:Dl(m,m.return);break;case 22:if(m.memoizedState!==null){qx(p);continue}}y!==null?(y.return=m,pe=y):qx(p)}l=l.sibling}e:for(l=null,p=t;;){if(p.tag===5){if(l===null){l=p;try{s=p.stateNode,u?(n=s.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=U5("display",a))}catch(S){li(t,t.return,S)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(S){li(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Fs(e,t),Sn(t),r&4&&Wx(t);break;case 21:break;default:Fs(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(l3(i)){var r=i;break e}i=i.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wp(s,""),r.flags&=-33);var n=Hx(t);tw(t,n,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Hx(t);ew(t,o,a);break;default:throw Error(ae(161))}}catch(c){li(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cN(t,e,i){pe=t,p3(t)}function p3(t,e,i){for(var r=(t.mode&1)!==0;pe!==null;){var s=pe,n=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||rm;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||pr;o=rm;var u=pr;if(rm=a,(pr=c)&&!u)for(pe=s;pe!==null;)a=pe,c=a.child,a.tag===22&&a.memoizedState!==null?Jx(s):c!==null?(c.return=a,pe=c):Jx(s);for(;n!==null;)pe=n,p3(n),n=n.sibling;pe=s,rm=o,pr=u}Gx(t)}else(s.subtreeFlags&8772)!==0&&n!==null?(n.return=s,pe=n):Gx(t)}}function Gx(t){for(;pe!==null;){var e=pe;if((e.flags&8772)!==0){var i=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:pr||ay(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(i===null)r.componentDidMount();else{var s=e.elementType===e.type?i.memoizedProps:Zs(e.type,i.memoizedProps);r.componentDidUpdate(s,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&Rx(e,n,r);break;case 3:var a=e.updateQueue;if(a!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}Rx(e,a,i)}break;case 5:var o=e.stateNode;if(i===null&&e.flags&4){i=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&xp(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}pr||e.flags&512&&X1(e)}catch(m){li(e,e.return,m)}}if(e===t){pe=null;break}if(i=e.sibling,i!==null){i.return=e.return,pe=i;break}pe=e.return}}function qx(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var i=e.sibling;if(i!==null){i.return=e.return,pe=i;break}pe=e.return}}function Jx(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{ay(4,e)}catch(c){li(e,i,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){li(e,s,c)}}var n=e.return;try{X1(e)}catch(c){li(e,n,c)}break;case 5:var a=e.return;try{X1(e)}catch(c){li(e,a,c)}}}catch(c){li(e,e.return,c)}if(e===t){pe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,pe=o;break}pe=e.return}}var dN=Math.ceil,nv=Ua.ReactCurrentDispatcher,w_=Ua.ReactCurrentOwner,Is=Ua.ReactCurrentBatchConfig,nt=0,Ki=null,Ri=null,sr=0,ss=0,Ol=Ko(0),Vi=0,Lp=null,ld=0,oy=0,k_=0,sp=null,jr=null,__=0,su=1/0,la=null,av=!1,iw=null,Lo=null,sm=!1,Co=null,ov=0,np=0,rw=null,Wm=-1,Gm=0;function xr(){return(nt&6)!==0?yi():Wm!==-1?Wm:Wm=yi()}function No(t){return(t.mode&1)===0?1:(nt&2)!==0&&sr!==0?sr&-sr:G8.transition!==null?(Gm===0&&(Gm=Q5()),Gm):(t=vt,t!==0||(t=window.event,t=t===void 0?16:rR(t.type)),t)}function un(t,e,i,r){if(50<np)throw np=0,rw=null,Error(ae(185));ig(t,i,r),((nt&2)===0||t!==Ki)&&(t===Ki&&((nt&2)===0&&(oy|=i),Vi===4&&wo(t,sr)),Hr(t,r),i===1&&nt===0&&(e.mode&1)===0&&(su=yi()+500,ry&&Qo()))}function Hr(t,e){var i=t.callbackNode;G7(t,e);var r=Hf(t,t===Ki?sr:0);if(r===0)i!==null&&rx(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(i!=null&&rx(i),e===1)t.tag===0?W8(Kx.bind(null,t)):_R(Kx.bind(null,t)),F8(function(){(nt&6)===0&&Qo()}),i=null;else{switch(Y5(r)){case 1:i=Jk;break;case 4:i=J5;break;case 16:i=Bf;break;case 536870912:i=K5;break;default:i=Bf}i=k3(i,g3.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function g3(t,e){if(Wm=-1,Gm=0,(nt&6)!==0)throw Error(ae(327));var i=t.callbackNode;if(Fl()&&t.callbackNode!==i)return null;var r=Hf(t,t===Ki?sr:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=cv(t,r);else{e=r;var s=nt;nt|=2;var n=f3();(Ki!==t||sr!==e)&&(la=null,su=yi()+500,ed(t,e));do try{hN();break}catch(o){m3(t,o)}while(1);o_(),nv.current=n,nt=s,Ri!==null?e=0:(Ki=null,sr=0,e=Vi)}if(e!==0){if(e===2&&(s=I1(t),s!==0&&(r=s,e=sw(t,s))),e===1)throw i=Lp,ed(t,0),wo(t,r),Hr(t,yi()),i;if(e===6)wo(t,r);else{if(s=t.current.alternate,(r&30)===0&&!lN(s)&&(e=cv(t,r),e===2&&(n=I1(t),n!==0&&(r=n,e=sw(t,n))),e===1))throw i=Lp,ed(t,0),wo(t,r),Hr(t,yi()),i;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:wc(t,jr,la);break;case 3:if(wo(t,r),(r&130023424)===r&&(e=__+500-yi(),10<e)){if(Hf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=j1(wc.bind(null,t,jr,la),e);break}wc(t,jr,la);break;case 4:if(wo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ln(r);n=1<<a,a=e[a],a>s&&(s=a),r&=~n}if(r=s,r=yi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dN(r/1960))-r,10<r){t.timeoutHandle=j1(wc.bind(null,t,jr,la),r);break}wc(t,jr,la);break;case 5:wc(t,jr,la);break;default:throw Error(ae(329))}}}return Hr(t,yi()),t.callbackNode===i?g3.bind(null,t):null}function sw(t,e){var i=sp;return t.current.memoizedState.isDehydrated&&(ed(t,e).flags|=256),t=cv(t,e),t!==2&&(e=jr,jr=i,e!==null&&nw(e)),t}function nw(t){jr===null?jr=t:jr.push.apply(jr,t)}function lN(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var s=i[r],n=s.getSnapshot;s=s.value;try{if(!gn(n(),s))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wo(t,e){for(e&=~k_,e&=~oy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-ln(e),r=1<<i;t[i]=-1,e&=~r}}function Kx(t){if((nt&6)!==0)throw Error(ae(327));Fl();var e=Hf(t,0);if((e&1)===0)return Hr(t,yi()),null;var i=cv(t,e);if(t.tag!==0&&i===2){var r=I1(t);r!==0&&(e=r,i=sw(t,r))}if(i===1)throw i=Lp,ed(t,0),wo(t,e),Hr(t,yi()),i;if(i===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wc(t,jr,la),Hr(t,yi()),null}function S_(t,e){var i=nt;nt|=1;try{return t(e)}finally{nt=i,nt===0&&(su=yi()+500,ry&&Qo())}}function ud(t){Co!==null&&Co.tag===0&&(nt&6)===0&&Fl();var e=nt;nt|=1;var i=Is.transition,r=vt;try{if(Is.transition=null,vt=1,t)return t()}finally{vt=r,Is.transition=i,nt=e,(nt&6)===0&&Qo()}}function x_(){ss=Ol.current,Vt(Ol)}function ed(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,z8(i)),Ri!==null)for(i=Ri.return;i!==null;){var r=i;switch(s_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kf();break;case 3:iu(),Vt(Vr),Vt(mr),p_();break;case 5:h_(r);break;case 4:iu();break;case 13:Vt(Xt);break;case 19:Vt(Xt);break;case 10:c_(r.type._context);break;case 22:case 23:x_()}i=i.return}if(Ki=t,Ri=t=Uo(t.current,null),sr=ss=e,Vi=0,Lp=null,k_=oy=ld=0,jr=sp=null,Jc!==null){for(e=0;e<Jc.length;e++)if(i=Jc[e],r=i.interleaved,r!==null){i.interleaved=null;var s=r.next,n=i.pending;if(n!==null){var a=n.next;n.next=s,r.next=a}i.pending=r}Jc=null}return t}function m3(t,e){do{var i=Ri;try{if(o_(),Vm.current=sv,rv){for(var r=ei.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rv=!1}if(dd=0,Ji=zi=ei=null,ip=!1,Mp=0,w_.current=null,i===null||i.return===null){Vi=1,Lp=e,Ri=null;break}e:{var n=t,a=i.return,o=i,c=e;if(e=sr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,p=l.tag;if((l.mode&1)===0&&(p===0||p===11||p===15)){var m=l.alternate;m?(l.updateQueue=m.updateQueue,l.memoizedState=m.memoizedState,l.lanes=m.lanes):(l.updateQueue=null,l.memoizedState=null)}var y=Nx(a);if(y!==null){y.flags&=-257,Ux(y,a,o,n,e),y.mode&1&&Lx(n,u,e),e=y,c=u;var b=e.updateQueue;if(b===null){var S=new Set;S.add(c),e.updateQueue=S}else b.add(c);break e}else{if((e&1)===0){Lx(n,u,e),E_();break e}c=Error(ae(426))}}else if(qt&&o.mode&1){var E=Nx(a);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),Ux(E,a,o,n,e),n_(ru(c,o));break e}}n=c=ru(c,o),Vi!==4&&(Vi=2),sp===null?sp=[n]:sp.push(n),n=a;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var k=ZR(n,c,e);Px(n,k);break e;case 1:o=c;var T=n.type,I=n.stateNode;if((n.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Lo===null||!Lo.has(I)))){n.flags|=65536,e&=-e,n.lanes|=e;var O=XR(n,o,e);Px(n,O);break e}}n=n.return}while(n!==null)}y3(i)}catch(q){e=q,Ri===i&&i!==null&&(Ri=i=i.return);continue}break}while(1)}function f3(){var t=nv.current;return nv.current=sv,t===null?sv:t}function E_(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),Ki===null||(ld&268435455)===0&&(oy&268435455)===0||wo(Ki,sr)}function cv(t,e){var i=nt;nt|=2;var r=f3();(Ki!==t||sr!==e)&&(la=null,ed(t,e));do try{uN();break}catch(s){m3(t,s)}while(1);if(o_(),nt=i,nv.current=r,Ri!==null)throw Error(ae(261));return Ki=null,sr=0,Vi}function uN(){for(;Ri!==null;)v3(Ri)}function hN(){for(;Ri!==null&&!U7();)v3(Ri)}function v3(t){var e=w3(t.alternate,t,ss);t.memoizedProps=t.pendingProps,e===null?y3(t):Ri=e,w_.current=null}function y3(t){var e=t;do{var i=e.alternate;if(t=e.return,(e.flags&32768)===0){if(i=sN(i,e,ss),i!==null){Ri=i;return}}else{if(i=nN(i,e),i!==null){i.flags&=32767,Ri=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vi=6,Ri=null;return}}if(e=e.sibling,e!==null){Ri=e;return}Ri=e=t}while(e!==null);Vi===0&&(Vi=5)}function wc(t,e,i){var r=vt,s=Is.transition;try{Is.transition=null,vt=1,pN(t,e,i,r)}finally{Is.transition=s,vt=r}return null}function pN(t,e,i,r){do Fl();while(Co!==null);if((nt&6)!==0)throw Error(ae(327));i=t.finishedWork;var s=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var n=i.lanes|i.childLanes;if(q7(t,n),t===Ki&&(Ri=Ki=null,sr=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||sm||(sm=!0,k3(Bf,function(){return Fl(),null})),n=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||n){n=Is.transition,Is.transition=null;var a=vt;vt=1;var o=nt;nt|=4,w_.current=null,oN(t,i),h3(i,t),D8(N1),Wf=!!L1,N1=L1=null,t.current=i,cN(i),j7(),nt=o,vt=a,Is.transition=n}else t.current=i;if(sm&&(sm=!1,Co=t,ov=s),n=t.pendingLanes,n===0&&(Lo=null),F7(i.stateNode),Hr(t,yi()),e!==null)for(r=t.onRecoverableError,i=0;i<e.length;i++)s=e[i],r(s.value,{componentStack:s.stack,digest:s.digest});if(av)throw av=!1,t=iw,iw=null,t;return(ov&1)!==0&&t.tag!==0&&Fl(),n=t.pendingLanes,(n&1)!==0?t===rw?np++:(np=0,rw=t):np=0,Qo(),null}function Fl(){if(Co!==null){var t=Y5(ov),e=Is.transition,i=vt;try{if(Is.transition=null,vt=16>t?16:t,Co===null)var r=!1;else{if(t=Co,Co=null,ov=0,(nt&6)!==0)throw Error(ae(331));var s=nt;for(nt|=4,pe=t.current;pe!==null;){var n=pe,a=n.child;if((pe.flags&16)!==0){var o=n.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(pe=u;pe!==null;){var l=pe;switch(l.tag){case 0:case 11:case 15:rp(8,l,n)}var p=l.child;if(p!==null)p.return=l,pe=p;else for(;pe!==null;){l=pe;var m=l.sibling,y=l.return;if(d3(l),l===u){pe=null;break}if(m!==null){m.return=y,pe=m;break}pe=y}}}var b=n.alternate;if(b!==null){var S=b.child;if(S!==null){b.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}pe=n}}if((n.subtreeFlags&2064)!==0&&a!==null)a.return=n,pe=a;else e:for(;pe!==null;){if(n=pe,(n.flags&2048)!==0)switch(n.tag){case 0:case 11:case 15:rp(9,n,n.return)}var k=n.sibling;if(k!==null){k.return=n.return,pe=k;break e}pe=n.return}}var T=t.current;for(pe=T;pe!==null;){a=pe;var I=a.child;if((a.subtreeFlags&2064)!==0&&I!==null)I.return=a,pe=I;else e:for(a=T;pe!==null;){if(o=pe,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:ay(9,o)}}catch(q){li(o,o.return,q)}if(o===a){pe=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,pe=O;break e}pe=o.return}}if(nt=s,Qo(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Zv,t)}catch{}r=!0}return r}finally{vt=i,Is.transition=e}}return!1}function Qx(t,e,i){e=ru(i,e),e=ZR(t,e,1),t=Oo(t,e,1),e=xr(),t!==null&&(ig(t,1,e),Hr(t,e))}function li(t,e,i){if(t.tag===3)Qx(t,t,i);else for(;e!==null;){if(e.tag===3){Qx(e,t,i);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lo===null||!Lo.has(r))){t=ru(i,t),t=XR(e,t,1),e=Oo(e,t,1),t=xr(),e!==null&&(ig(e,1,t),Hr(e,t));break}}e=e.return}}function gN(t,e,i){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&i,Ki===t&&(sr&i)===i&&(Vi===4||Vi===3&&(sr&130023424)===sr&&500>yi()-__?ed(t,0):k_|=i),Hr(t,e)}function b3(t,e){e===0&&((t.mode&1)===0?e=1:(e=Jg,Jg<<=1,(Jg&130023424)===0&&(Jg=4194304)));var i=xr();t=Ia(t,e),t!==null&&(ig(t,e,i),Hr(t,i))}function mN(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),b3(t,i)}function fN(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(i=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),b3(t,i)}var w3;w3=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vr.current)zr=!0;else{if((t.lanes&i)===0&&(e.flags&128)===0)return zr=!1,rN(t,e,i);zr=(t.flags&131072)!==0}else zr=!1,qt&&(e.flags&1048576)!==0&&SR(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hm(t,e),t=e.pendingProps;var s=Xl(e,mr.current);zl(e,i),s=m_(null,e,r,t,s,i);var n=f_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Br(r)?(n=!0,Qf(e)):n=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,l_(e),s.updater=sy,e.stateNode=s,s._reactInternals=e,W1(e,r,t,i),e=J1(null,e,r,!0,n,i)):(e.tag=0,qt&&n&&r_(e),_r(null,e,s,i),e=e.child),e;case 16:r=e.elementType;e:{switch(Hm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yN(r),t=Zs(r,t),s){case 0:e=q1(null,e,r,t,i);break e;case 1:e=zx(null,e,r,t,i);break e;case 11:e=jx(null,e,r,t,i);break e;case 14:e=$x(null,e,r,Zs(r.type,t),i);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),q1(t,e,r,s,i);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),zx(t,e,r,s,i);case 3:e:{if(r3(e),t===null)throw Error(ae(387));r=e.pendingProps,n=e.memoizedState,s=n.element,CR(t,e),tv(e,r,null,i);var a=e.memoizedState;if(r=a.element,n.isDehydrated)if(n={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){s=ru(Error(ae(423)),e),e=Fx(t,e,r,i,s);break e}else if(r!==s){s=ru(Error(ae(424)),e),e=Fx(t,e,r,i,s);break e}else for(cs=Do(e.stateNode.containerInfo.firstChild),hs=e,qt=!0,tn=null,i=AR(e,null,r,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(eu(),r===s){e=Aa(t,e,i);break e}_r(t,e,r,i)}e=e.child}return e;case 5:return MR(e),t===null&&V1(e),r=e.type,s=e.pendingProps,n=t!==null?t.memoizedProps:null,a=s.children,U1(r,s)?a=null:n!==null&&U1(r,n)&&(e.flags|=32),i3(t,e),_r(t,e,a,i),e.child;case 6:return t===null&&V1(e),null;case 13:return s3(t,e,i);case 4:return u_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tu(e,null,r,i):_r(t,e,r,i),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),jx(t,e,r,s,i);case 7:return _r(t,e,e.pendingProps,i),e.child;case 8:return _r(t,e,e.pendingProps.children,i),e.child;case 12:return _r(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,n=e.memoizedProps,a=s.value,It(Xf,r._currentValue),r._currentValue=a,n!==null)if(gn(n.value,a)){if(n.children===s.children&&!Vr.current){e=Aa(t,e,i);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){a=n.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(n.tag===1){c=Ea(-1,i&-i),c.tag=2;var u=n.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}n.lanes|=i,c=n.alternate,c!==null&&(c.lanes|=i),B1(n.return,i,e),o.lanes|=i;break}c=c.next}}else if(n.tag===10)a=n.type===e.type?null:n.child;else if(n.tag===18){if(a=n.return,a===null)throw Error(ae(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),B1(a,i,e),a=n.sibling}else a=n.child;if(a!==null)a.return=n;else for(a=n;a!==null;){if(a===e){a=null;break}if(n=a.sibling,n!==null){n.return=a.return,a=n;break}a=a.return}n=a}_r(t,e,s.children,i),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zl(e,i),s=Ds(s),r=r(s),e.flags|=1,_r(t,e,r,i),e.child;case 14:return r=e.type,s=Zs(r,e.pendingProps),s=Zs(r.type,s),$x(t,e,r,s,i);case 15:return e3(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zs(r,s),Hm(t,e),e.tag=1,Br(r)?(t=!0,Qf(e)):t=!1,zl(e,i),RR(e,r,s),W1(e,r,s,i),J1(null,e,r,!0,t,i);case 19:return n3(t,e,i);case 22:return t3(t,e,i)}throw Error(ae(156,e.tag))};function k3(t,e){return q5(t,e)}function vN(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,e,i,r){return new vN(t,e,i,r)}function T_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yN(t){if(typeof t=="function")return T_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wk)return 11;if(t===Gk)return 14}return 2}function Uo(t,e){var i=t.alternate;return i===null?(i=Ps(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function qm(t,e,i,r,s,n){var a=2;if(r=t,typeof t=="function")T_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xl:return td(i.children,s,n,e);case Hk:a=8,s|=8;break;case m1:return t=Ps(12,i,e,s|2),t.elementType=m1,t.lanes=n,t;case f1:return t=Ps(13,i,e,s),t.elementType=f1,t.lanes=n,t;case v1:return t=Ps(19,i,e,s),t.elementType=v1,t.lanes=n,t;case I5:return cy(i,s,n,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P5:a=10;break e;case R5:a=9;break e;case Wk:a=11;break e;case Gk:a=14;break e;case vo:a=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Ps(a,i,e,s),e.elementType=t,e.type=r,e.lanes=n,e}function td(t,e,i,r){return t=Ps(7,t,r,e),t.lanes=i,t}function cy(t,e,i,r){return t=Ps(22,t,r,e),t.elementType=I5,t.lanes=i,t.stateNode={isHidden:!1},t}function Z0(t,e,i){return t=Ps(6,t,null,e),t.lanes=i,t}function X0(t,e,i){return e=Ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bN(t,e,i,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=D0(0),this.expirationTimes=D0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function C_(t,e,i,r,s,n,a,o,c){return t=new bN(t,e,i,o,c),e===1?(e=1,n===!0&&(e|=8)):e=0,n=Ps(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},l_(n),t}function wN(t,e,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:i}}function _3(t){if(!t)return Bo;t=t._reactInternals;e:{if(wd(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var i=t.type;if(Br(i))return kR(t,i,e)}return e}function S3(t,e,i,r,s,n,a,o,c){return t=C_(i,r,!0,t,s,n,a,o,c),t.context=_3(null),i=t.current,r=xr(),s=No(i),n=Ea(r,s),n.callback=e!=null?e:null,Oo(i,n,s),t.current.lanes=s,ig(t,s,r),Hr(t,r),t}function dy(t,e,i,r){var s=e.current,n=xr(),a=No(s);return i=_3(i),e.context===null?e.context=i:e.pendingContext=i,e=Ea(n,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oo(s,e,a),t!==null&&(un(t,s,a,n),Fm(t,s,a)),a}function dv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function P_(t,e){Yx(t,e),(t=t.alternate)&&Yx(t,e)}function kN(){return null}var x3=typeof reportError=="function"?reportError:function(t){console.error(t)};function R_(t){this._internalRoot=t}ly.prototype.render=R_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));dy(t,e,null,null)};ly.prototype.unmount=R_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ud(function(){dy(null,t,null,null)}),e[Ra]=null}};function ly(t){this._internalRoot=t}ly.prototype.unstable_scheduleHydration=function(t){if(t){var e=eR();t={blockedOn:null,target:t,priority:e};for(var i=0;i<bo.length&&e!==0&&e<bo[i].priority;i++);bo.splice(i,0,t),i===0&&iR(t)}};function I_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zx(){}function _N(t,e,i,r,s){if(s){if(typeof r=="function"){var n=r;r=function(){var u=dv(a);n.call(u)}}var a=S3(e,r,t,0,null,!1,!1,"",Zx);return t._reactRootContainer=a,t[Ra]=a.current,Cp(t.nodeType===8?t.parentNode:t),ud(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=dv(c);o.call(u)}}var c=C_(t,0,!1,null,null,!1,!1,"",Zx);return t._reactRootContainer=c,t[Ra]=c.current,Cp(t.nodeType===8?t.parentNode:t),ud(function(){dy(e,c,i,r)}),c}function hy(t,e,i,r,s){var n=i._reactRootContainer;if(n){var a=n;if(typeof s=="function"){var o=s;s=function(){var c=dv(a);o.call(c)}}dy(e,a,t,s)}else a=_N(i,e,t,s,r);return dv(a)}Z5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Ah(e.pendingLanes);i!==0&&(Kk(e,i|1),Hr(e,yi()),(nt&6)===0&&(su=yi()+500,Qo()))}break;case 13:ud(function(){var r=Ia(t,1);if(r!==null){var s=xr();un(r,t,1,s)}}),P_(t,1)}};Qk=function(t){if(t.tag===13){var e=Ia(t,134217728);if(e!==null){var i=xr();un(e,t,134217728,i)}P_(t,134217728)}};X5=function(t){if(t.tag===13){var e=No(t),i=Ia(t,e);if(i!==null){var r=xr();un(i,t,e,r)}P_(t,e)}};eR=function(){return vt};tR=function(t,e){var i=vt;try{return vt=t,e()}finally{vt=i}};C1=function(t,e,i){switch(e){case"input":if(w1(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var s=iy(r);if(!s)throw Error(ae(90));M5(r),w1(r,s)}}}break;case"textarea":O5(t,i);break;case"select":e=i.value,e!=null&&Nl(t,!!i.multiple,e,!1)}};F5=S_;V5=ud;var SN={usingClientEntryPoint:!1,Events:[sg,Pl,iy,$5,z5,S_]},eh={findFiberByHostInstance:qc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xN={bundleType:eh.bundleType,version:eh.version,rendererPackageName:eh.rendererPackageName,rendererConfig:eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W5(t),t===null?null:t.stateNode},findFiberByHostInstance:eh.findFiberByHostInstance||kN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nm.isDisabled&&nm.supportsFiber)try{Zv=nm.inject(xN),$n=nm}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SN;ms.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I_(e))throw Error(ae(200));return wN(t,e,null,i)};ms.createRoot=function(t,e){if(!I_(t))throw Error(ae(299));var i=!1,r="",s=x3;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=C_(t,1,!1,null,null,i,!1,r,s),t[Ra]=e.current,Cp(t.nodeType===8?t.parentNode:t),new R_(e)};ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=W5(e),t=t===null?null:t.stateNode,t};ms.flushSync=function(t){return ud(t)};ms.hydrate=function(t,e,i){if(!uy(e))throw Error(ae(200));return hy(null,t,e,!0,i)};ms.hydrateRoot=function(t,e,i){if(!I_(t))throw Error(ae(405));var r=i!=null&&i.hydratedSources||null,s=!1,n="",a=x3;if(i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),e=S3(e,null,t,1,i!=null?i:null,s,!1,n,a),t[Ra]=e.current,Cp(t),r)for(t=0;t<r.length;t++)i=r[t],s=i._getVersion,s=s(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,s]:e.mutableSourceEagerHydrationData.push(i,s);return new ly(e)};ms.render=function(t,e,i){if(!uy(e))throw Error(ae(200));return hy(null,t,e,!1,i)};ms.unmountComponentAtNode=function(t){if(!uy(t))throw Error(ae(40));return t._reactRootContainer?(ud(function(){hy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ra]=null})}),!0):!1};ms.unstable_batchedUpdates=S_;ms.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!uy(i))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return hy(t,e,i,!1,r)};ms.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}e(),t.exports=ms})(f5);var Xx=f5.exports;p1.createRoot=Xx.createRoot,p1.hydrateRoot=Xx.hydrateRoot;var E3={exports:{}},py={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=Ca.exports,TN=Symbol.for("react.element"),CN=Symbol.for("react.fragment"),PN=Object.prototype.hasOwnProperty,RN=EN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IN={key:!0,ref:!0,__self:!0,__source:!0};function T3(t,e,i){var r,s={},n=null,a=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)PN.call(e,r)&&!IN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:TN,type:t,key:n,ref:a,props:s,_owner:RN.current}}py.Fragment=CN;py.jsx=T3;py.jsxs=T3;(function(t){t.exports=py})(E3);const A_=E3.exports.jsx,AN=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),C3=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),MN=(t,e,i={})=>{if(t instanceof Element){const r=DN(t.classList,e,i);r!==""&&(t.className=r),Object.keys(e).forEach(s=>{if(!(s==="children"||s==="style"||s==="ref"||s==="class"||s==="className"||s==="forwardedRef"))if(s.indexOf("on")===0&&s[2]===s[2].toUpperCase()){const n=s.substring(2),a=n[0].toLowerCase()+n.substring(1);P3(a)||ON(t,a,e[s])}else t[s]=e[s],typeof e[s]==="string"&&t.setAttribute(C3(s),e[s])})}},DN=(t,e,i)=>{const r=e.className||e.class,s=i.className||i.class,n=eb(t),a=eb(r?r.split(" "):[]),o=eb(s?s.split(" "):[]),c=[];return n.forEach(u=>{a.has(u)?(c.push(u),a.delete(u)):o.has(u)||c.push(u)}),a.forEach(u=>c.push(u)),c.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const P3=t=>{if(typeof document>"u")return!0;{const e="on"+t;let i=e in document;if(!i){const r=document.createElement("div");r.setAttribute(e,"return;"),i=typeof r[e]=="function"}return i}},ON=(t,e,i)=>{const r=t.__events||(t.__events={}),s=r[e];s&&t.removeEventListener(e,s),t.addEventListener(e,r[e]=function(a){i&&i.call(this,a)})},eb=t=>{const e=new Map;return t.forEach(i=>e.set(i,i)),e},LN=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},NN=(...t)=>e=>{t.forEach(i=>{LN(i,e)})},UN=(t,e)=>{const i=(r,s)=>A_(t,{...Object.assign({},r,{forwardedRef:s})});return i.displayName=e,zk.forwardRef(i)};var jN=globalThis&&globalThis.__rest||function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]]);return i};const $N=(t,e,i,r)=>{r!==void 0&&r();const s=AN(t),n=class extends zk.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){MN(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:c,style:u,className:l,ref:p}=a,m=jN(a,["children","forwardedRef","style","className","ref"]);let y=Object.keys(m).reduce((S,E)=>{const k=m[E];if(E.indexOf("on")===0&&E[2]===E[2].toUpperCase()){const T=E.substring(2).toLowerCase();typeof document<"u"&&P3(T)&&(S[E]=k)}else{const T=typeof k;(T==="string"||T==="boolean"||T==="number")&&(S[C3(E)]=k)}return S},{});i&&(y=i(this.props,y));const b=Object.assign(Object.assign({},y),{ref:NN(c,this.setComponentElRef),style:u});return Ca.exports.createElement(t,b,o)}static get displayName(){return s}};return e&&(n.contextType=e),UN(n,s)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__rest;const zN="modulepreload",FN=function(t,e){return new URL(t,e).href},eE={},VN=function(e,i,r){if(!i||i.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(i.map(n=>{if(n=FN(n,r),n in eE)return;eE[n]=!0;const a=n.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let l=s.length-1;l>=0;l--){const p=s[l];if(p.href===n&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":zN,a||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),a)return new Promise((l,p)=>{u.addEventListener("load",l),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())},BN="dyte-ui-kit";let rl,R3,gy,I3=!1,lv=!1,M_=!1,A3=!1,aw=null,ow=!1;const Ma=(t,e="")=>()=>{},HN=(t,e)=>()=>{},WN="{visibility:hidden}.hydrated{visibility:inherit}",tE="http://www.w3.org/1999/xlink",iE={},GN=t=>t!=null,D_=t=>(t=typeof t,t==="object"||t==="function"),d=(t,e,...i)=>{let r=null,s=null,n=null,a=!1,o=!1;const c=[],u=p=>{for(let m=0;m<p.length;m++)r=p[m],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((a=typeof t!="function"&&!D_(r))&&(r=String(r)),a&&o?c[c.length-1].$text$+=r:c.push(a?uv(null,r):r),o=a)};if(u(i),e){e.key&&(s=e.key),e.name&&(n=e.name);{const p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter(m=>p[m]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,c,JN);const l=uv(t,null);return l.$attrs$=e,c.length>0&&(l.$children$=c),l.$key$=s,l.$name$=n,l},uv=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},z={},qN=t=>t&&t.$tag$===z,JN={forEach:(t,e)=>t.map(rE).forEach(e),map:(t,e)=>t.map(rE).map(e).map(KN)},rE=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),KN=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),d(t.vtag,i,...t.vchildren||[])}const e=uv(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},QN=(t,e)=>t!=null&&!D_(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Pr=t=>Yo(t).$hostElement$,re=(t,e,i)=>{const r=Pr(t);return{emit:s=>M3(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},M3=(t,e,i)=>{const r=Ii.ce(e,i);return t.dispatchEvent(r),r},sE=new WeakMap,YN=(t,e,i)=>{let r=gv.get(t);k9&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,gv.set(t,r)},ZN=(t,e,i,r)=>{let s=D3(e);const n=gv.get(s);if(t=t.nodeType===11?t:hn,n)if(typeof n=="string"){t=t.head||t;let a=sE.get(t),o;a||sE.set(t,a=new Set),a.has(s)||(o=hn.createElement("style"),o.innerHTML=n,t.insertBefore(o,t.querySelector("link")),a&&a.add(s))}else t.adoptedStyleSheets.includes(n)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,n]);return s},XN=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,s=Ma("attachStyles",e.$tagName$),n=ZN(i.shadowRoot?i.shadowRoot:i.getRootNode(),e);r&10&&(i["s-sc"]=n,i.classList.add(n+"-h")),s()},D3=(t,e)=>"sc-"+t.$tagName$,nE=(t,e,i,r,s,n)=>{if(i!==r){let a=dE(t,e),o=e.toLowerCase();if(e==="class"){const c=t.classList,u=aE(i),l=aE(r);c.remove(...u.filter(p=>p&&!l.includes(p))),c.add(...l.filter(p=>p&&!u.includes(p)))}else if(e==="style"){for(const c in i)(!r||r[c]==null)&&(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)(!i||r[c]!==i[c])&&(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!a&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):dE(ag,o)?e=o.slice(2):e=o[2]+e.slice(3),i&&Ii.rel(t,e,i,!1),r&&Ii.ael(t,e,r,!1);else{const c=D_(r);if((a||c&&r!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r==null?"":r;e==="list"?a=!1:(i==null||t[e]!=l)&&(t[e]=l)}}catch{}let u=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,u=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(tE,e):t.removeAttribute(e)):(!a||n&4||s)&&!c&&(r=r===!0?"":r,u?t.setAttributeNS(tE,e,r):t.setAttribute(e,r))}}},e9=/\s/,aE=t=>t?t.split(e9):[],O3=(t,e,i,r)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,n=t&&t.$attrs$||iE,a=e.$attrs$||iE;for(r in n)r in a||nE(s,r,n[r],void 0,i,e.$flags$);for(r in a)nE(s,r,n[r],a[r],i,e.$flags$)},hv=(t,e,i,r)=>{const s=e.$children$[i];let n=0,a,o,c;if(I3||(M_=!0,s.$tag$==="slot"&&(rl&&r.classList.add(rl+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=hn.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=hn.createTextNode("");else if(a=s.$elm$=hn.createElement(s.$flags$&2?"slot-fb":s.$tag$),O3(null,s,A3),GN(rl)&&a["s-si"]!==rl&&a.classList.add(a["s-si"]=rl),s.$children$)for(n=0;n<s.$children$.length;++n)o=hv(t,s,n,a),o&&a.appendChild(o);return a["s-hn"]=gy,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=R3,a["s-sn"]=s.$name$||"",c=t&&t.$children$&&t.$children$[i],c&&c.$tag$===s.$tag$&&t.$elm$&&Np(t.$elm$,!1)),a},Np=(t,e)=>{Ii.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==gy&&s["s-ol"]&&(U3(s).insertBefore(s,O_(s)),s["s-ol"].remove(),s["s-ol"]=void 0,M_=!0),e&&Np(s,e)}Ii.$flags$&=-2},L3=(t,e,i,r,s,n)=>{let a=t["s-cr"]&&t["s-cr"].parentNode||t,o;for(a.shadowRoot&&a.tagName===gy&&(a=a.shadowRoot);s<=n;++s)r[s]&&(o=hv(null,i,s,t),o&&(r[s].$elm$=o,a.insertBefore(o,O_(e))))},N3=(t,e,i,r,s)=>{for(;e<=i;++e)(r=t[e])&&(s=r.$elm$,z3(r),lv=!0,s["s-ol"]?s["s-ol"].remove():Np(s,!0),s.remove())},t9=(t,e,i,r)=>{let s=0,n=0,a=0,o=0,c=e.length-1,u=e[0],l=e[c],p=r.length-1,m=r[0],y=r[p],b,S;for(;s<=c&&n<=p;)if(u==null)u=e[++s];else if(l==null)l=e[--c];else if(m==null)m=r[++n];else if(y==null)y=r[--p];else if(am(u,m))sl(u,m),u=e[++s],m=r[++n];else if(am(l,y))sl(l,y),l=e[--c],y=r[--p];else if(am(u,y))(u.$tag$==="slot"||y.$tag$==="slot")&&Np(u.$elm$.parentNode,!1),sl(u,y),t.insertBefore(u.$elm$,l.$elm$.nextSibling),u=e[++s],y=r[--p];else if(am(l,m))(u.$tag$==="slot"||y.$tag$==="slot")&&Np(l.$elm$.parentNode,!1),sl(l,m),t.insertBefore(l.$elm$,u.$elm$),l=e[--c],m=r[++n];else{for(a=-1,o=s;o<=c;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===m.$key$){a=o;break}a>=0?(S=e[a],S.$tag$!==m.$tag$?b=hv(e&&e[n],i,a,t):(sl(S,m),e[a]=void 0,b=S.$elm$),m=r[++n]):(b=hv(e&&e[n],i,n,t),m=r[++n]),b&&U3(u.$elm$).insertBefore(b,O_(u.$elm$))}s>c?L3(t,r[p+1]==null?null:r[p+1].$elm$,i,r,n,p):n>p&&N3(e,s,c)},am=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,O_=t=>t&&t["s-ol"]||t,U3=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,sl=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,s=e.$children$,n=e.$tag$,a=e.$text$;let o;a===null?(n==="slot"||O3(t,e,A3),r!==null&&s!==null?t9(i,r,e,s):s!==null?(t.$text$!==null&&(i.textContent=""),L3(i,null,e,s,0,s.length-1)):r!==null&&N3(r,0,r.length-1)):(o=i["s-cr"])?o.parentNode.textContent=a:t.$text$!==a&&(i.data=a)},j3=t=>{const e=t.childNodes;let i,r,s,n,a,o;for(r=0,s=e.length;r<s;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(a=i["s-sn"],i.hidden=!1,n=0;n<s;n++)if(o=e[n].nodeType,e[n]["s-hn"]!==i["s-hn"]||a!==""){if(o===1&&a===e[n].getAttribute("slot")){i.hidden=!0;break}}else if(o===1||o===3&&e[n].textContent.trim()!==""){i.hidden=!0;break}}j3(i)}},rn=[],$3=t=>{let e,i,r,s,n,a,o=0;const c=t.childNodes,u=c.length;for(;o<u;o++){if(e=c[o],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=e["s-sn"],a=r.length-1;a>=0;a--)i=r[a],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(oE(i,s)?(n=rn.find(l=>l.$nodeToRelocate$===i),lv=!0,i["s-sn"]=i["s-sn"]||s,n?n.$slotRefNode$=e:rn.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&rn.map(l=>{oE(l.$nodeToRelocate$,i["s-sn"])&&(n=rn.find(p=>p.$nodeToRelocate$===i),n&&!l.$slotRefNode$&&(l.$slotRefNode$=n.$slotRefNode$))})):rn.some(l=>l.$nodeToRelocate$===i)||rn.push({$nodeToRelocate$:i}));e.nodeType===1&&$3(e)}},oE=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",z3=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(z3)},i9=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,s=t.$vnode$||uv(null,null),n=qN(e)?e:d(null,null,e);gy=i.tagName,r.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},r.$attrsToReflect$.map(([a,o])=>n.$attrs$[o]=i[a])),n.$tag$=null,n.$flags$|=4,t.$vnode$=n,n.$elm$=s.$elm$=i.shadowRoot||i,rl=i["s-sc"],R3=i["s-cr"],I3=(r.$flags$&1)!==0,lv=!1,sl(s,n);{if(Ii.$flags$|=1,M_){$3(n.$elm$);let a,o,c,u,l,p,m=0;for(;m<rn.length;m++)a=rn[m],o=a.$nodeToRelocate$,o["s-ol"]||(c=hn.createTextNode(""),c["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=c,o));for(m=0;m<rn.length;m++)if(a=rn[m],o=a.$nodeToRelocate$,a.$slotRefNode$){for(u=a.$slotRefNode$.parentNode,l=a.$slotRefNode$.nextSibling,c=o["s-ol"];c=c.previousSibling;)if(p=c["s-nr"],p&&p["s-sn"]===o["s-sn"]&&u===p.parentNode&&(p=p.nextSibling,!p||!p["s-nr"])){l=p;break}(!l&&u!==o.parentNode||o.nextSibling!==l)&&o!==l&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),u.insertBefore(o,l))}else o.nodeType===1&&(o.hidden=!0)}lv&&j3(n.$elm$),Ii.$flags$&=-2,rn.length=0}},F3=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(i=>t.$onRenderResolve$=i))},my=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}return F3(t,t.$ancestorComponent$),Mi(()=>r9(t,e))},r9=(t,e)=>{const i=Ma("scheduleUpdate",t.$cmpMeta$.$tagName$),r=t.$lazyInstance$;let s;return e?(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map(([n,a])=>id(r,n,a)),t.$queuedListeners$=null),s=id(r,"componentWillLoad")):s=id(r,"componentWillUpdate"),i(),o9(s,()=>s9(t,r,e))},s9=async(t,e,i)=>{const r=t.$hostElement$,s=Ma("update",t.$cmpMeta$.$tagName$),n=r["s-rc"];i&&XN(t);const a=Ma("render",t.$cmpMeta$.$tagName$);n9(t,e),n&&(n.map(o=>o()),r["s-rc"]=void 0),a(),s();{const o=r["s-p"],c=()=>a9(t);o.length===0?c():(Promise.all(o).then(c),t.$flags$|=4,o.length=0)}},n9=(t,e,i)=>{try{aw=e,e=e.render(),t.$flags$&=-17,t.$flags$|=2,i9(t,e)}catch(r){J(r,t.$hostElement$)}return aw=null,null},cE=()=>aw,a9=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=Ma("postUpdate",e),s=t.$lazyInstance$,n=t.$ancestorComponent$;id(s,"componentDidRender"),t.$flags$&64?r():(t.$flags$|=64,B3(i),id(s,"componentDidLoad"),r(),t.$onReadyResolve$(i),n||V3()),t.$onInstanceResolve$(i),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&N_(()=>my(t,!1)),t.$flags$&=-517},pv=t=>{{const e=Yo(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&my(e,!1),i}},V3=t=>{B3(hn.documentElement),N_(()=>M3(ag,"appload",{detail:{namespace:BN}}))},id=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){J(r)}},o9=(t,e)=>t&&t.then?t.then(e):e(),B3=t=>t.classList.add("hydrated"),c9=(t,e)=>Yo(t).$instanceValues$.get(e),d9=(t,e,i,r)=>{const s=Yo(t),n=s.$hostElement$,a=s.$instanceValues$.get(e),o=s.$flags$,c=s.$lazyInstance$;i=QN(i,r.$members$[e][0]);const u=Number.isNaN(a)&&Number.isNaN(i),l=i!==a&&!u;if((!(o&8)||a===void 0)&&l&&(s.$instanceValues$.set(e,i),c)){if(r.$watchers$&&o&128){const p=r.$watchers$[e];p&&p.map(m=>{try{c[m](i,a,e)}catch(y){J(y,n)}})}(o&18)===2&&my(s,!1)}},H3=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),s=t.prototype;if(r.map(([n,[a]])=>{a&31||i&2&&a&32?Object.defineProperty(s,n,{get(){return c9(this,n)},set(o){d9(this,n,o,e)},configurable:!0,enumerable:!0}):i&1&&a&64&&Object.defineProperty(s,n,{value(...o){const c=Yo(this);return c.$onInstancePromise$.then(()=>c.$lazyInstance$[n](...o))}})}),i&1){const n=new Map;s.attributeChangedCallback=function(a,o,c){Ii.jmp(()=>{const u=n.get(a);if(this.hasOwnProperty(u))c=this[u],delete this[u];else if(s.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==c)return;this[u]=c===null&&typeof this[u]=="boolean"?!1:c})},t.observedAttributes=r.filter(([a,o])=>o[0]&15).map(([a,o])=>{const c=o[1]||a;return n.set(c,a),o[0]&512&&e.$attrsToReflect$.push([a,c]),c})}}return t},l9=async(t,e,i,r,s)=>{if((e.$flags$&32)===0){{if(e.$flags$|=32,s=w9(i),s.then){const c=HN();s=await s,c()}s.isProxied||(i.$watchers$=s.watchers,H3(s,i,2),s.isProxied=!0);const o=Ma("createInstance",i.$tagName$);e.$flags$|=8;try{new s(e)}catch(c){J(c)}e.$flags$&=-9,e.$flags$|=128,o(),W3(e.$lazyInstance$)}if(s.style){let o=s.style;const c=D3(i);if(!gv.has(c)){const u=Ma("registerStyles",i.$tagName$);YN(c,o,!!(i.$flags$&1)),u()}}}const n=e.$ancestorComponent$,a=()=>my(e,!0);n&&n["s-rc"]?n["s-rc"].push(a):a()},W3=t=>{id(t,"connectedCallback")},u9=t=>{if((Ii.$flags$&1)===0){const e=Yo(t),i=e.$cmpMeta$,r=Ma("connectedCallback",i.$tagName$);if(e.$flags$&1)G3(t,e,i.$listeners$),W3(e.$lazyInstance$);else{e.$flags$|=1,i.$flags$&12&&h9(t);{let s=t;for(;s=s.parentNode||s.host;)if(s["s-p"]){F3(e,e.$ancestorComponent$=s);break}}i.$members$&&Object.entries(i.$members$).map(([s,[n]])=>{if(n&31&&t.hasOwnProperty(s)){const a=t[s];delete t[s],t[s]=a}}),l9(t,e,i)}r()}},h9=t=>{const e=t["s-cr"]=hn.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},p9=t=>{if((Ii.$flags$&1)===0){const e=Yo(t),i=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map(r=>r()),e.$rmListeners$=void 0),id(i,"disconnectedCallback")}},g9=(t,e={})=>{const i=Ma(),r=[],s=e.exclude||[],n=ag.customElements,a=hn.head,o=a.querySelector("meta[charset]"),c=hn.createElement("style"),u=[];let l,p=!0;Object.assign(Ii,e),Ii.$resourcesUrl$=new URL(e.resourcesUrl||"./",hn.baseURI).href,t.map(m=>{m[1].map(y=>{const b={$flags$:y[0],$tagName$:y[1],$members$:y[2],$listeners$:y[3]};b.$members$=y[2],b.$listeners$=y[3],b.$attrsToReflect$=[],b.$watchers$={};const S=b.$tagName$,E=class extends HTMLElement{constructor(k){super(k),k=this,b9(k,b),b.$flags$&1&&k.attachShadow({mode:"open"})}connectedCallback(){l&&(clearTimeout(l),l=null),p?u.push(this):Ii.jmp(()=>u9(this))}disconnectedCallback(){Ii.jmp(()=>p9(this))}componentOnReady(){return Yo(this).$onReadyPromise$}};b.$lazyBundleId$=m[0],!s.includes(S)&&!n.get(S)&&(r.push(S),n.define(S,H3(E,b,1)))})}),c.innerHTML=r+WN,c.setAttribute("data-styles",""),a.insertBefore(c,o?o.nextSibling:a.firstChild),p=!1,u.length?u.map(m=>m.connectedCallback()):Ii.jmp(()=>l=setTimeout(V3,30)),i()},m9=(t,e)=>e,G3=(t,e,i,r)=>{i&&i.map(([s,n,a])=>{const o=v9(t,s),c=f9(e,a),u=y9(s);Ii.ael(o,n,c,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Ii.rel(o,n,c,u))})},f9=(t,e)=>i=>{try{t.$flags$&256?t.$lazyInstance$[e](i):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,i])}catch(r){J(r)}},v9=(t,e)=>e&8?ag:t,y9=t=>(t&2)!==0,L_=new WeakMap,Yo=t=>L_.get(t),V=(t,e)=>L_.set(e.$lazyInstance$=t,e),b9=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r),i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),t["s-p"]=[],t["s-rc"]=[],G3(t,i,e.$listeners$),L_.set(t,i)},dE=(t,e)=>e in t,J=(t,e)=>(0,console.error)(t,e),tb=new Map,w9=(t,e,i)=>{const r=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$,n=tb.get(s);if(n)return n[r];if(!i||!BUILD.hotModuleReplacement){const a=o=>(tb.set(s,o),o[r]);switch(s){case"dyte-meeting":return Promise.resolve().then(function(){return Q$}).then(a,J);case"dyte-ai":return Promise.resolve().then(function(){return Z$}).then(a,J);case"dyte-ai-chat":return Promise.resolve().then(function(){return ez}).then(a,J);case"dyte-ai-home":return Promise.resolve().then(function(){return iz}).then(a,J);case"dyte-ai-toggle":return Promise.resolve().then(function(){return sz}).then(a,J);case"dyte-ai-transcriptions":return Promise.resolve().then(function(){return az}).then(a,J);case"dyte-audio-grid":return Promise.resolve().then(function(){return cz}).then(a,J);case"dyte-audio-tile":return Promise.resolve().then(function(){return hz}).then(a,J);case"dyte-breakout-rooms-manager":return Promise.resolve().then(function(){return fz}).then(a,J);case"dyte-breakout-rooms-toggle":return Promise.resolve().then(function(){return yz}).then(a,J);case"dyte-broadcast-message-modal":return Promise.resolve().then(function(){return wz}).then(a,J);case"dyte-camera-toggle":return Promise.resolve().then(function(){return _z}).then(a,J);case"dyte-channel-creator":return Promise.resolve().then(function(){return xz}).then(a,J);case"dyte-channel-selector-ui":return Promise.resolve().then(function(){return Mz}).then(a,J);case"dyte-chat":return Promise.resolve().then(function(){return Oz}).then(a,J);case"dyte-chat-composer-ui":return Promise.resolve().then(function(){return Nz}).then(a,J);case"dyte-chat-selector-ui":return Promise.resolve().then(function(){return jz}).then(a,J);case"dyte-chat-toggle":return Promise.resolve().then(function(){return zz}).then(a,J);case"dyte-clock":return Promise.resolve().then(function(){return Vz}).then(a,J);case"dyte-confirmation-modal":return Promise.resolve().then(function(){return Hz}).then(a,J);case"dyte-controlbar":return Promise.resolve().then(function(){return Gz}).then(a,J);case"dyte-debugger":return Promise.resolve().then(function(){return Jz}).then(a,J);case"dyte-debugger-network":return Promise.resolve().then(function(){return Qz}).then(a,J);case"dyte-debugger-toggle":return Promise.resolve().then(function(){return Zz}).then(a,J);case"dyte-ended-screen":return Promise.resolve().then(function(){return eF}).then(a,J);case"dyte-file-dropzone":return Promise.resolve().then(function(){return iF}).then(a,J);case"dyte-file-message-view":return Promise.resolve().then(function(){return nF}).then(a,J);case"dyte-fullscreen-toggle":return Promise.resolve().then(function(){return oF}).then(a,J);case"dyte-grid":return Promise.resolve().then(function(){return pF}).then(a,J);case"dyte-grid-pagination":return Promise.resolve().then(function(){return mF}).then(a,J);case"dyte-header":return Promise.resolve().then(function(){return vF}).then(a,J);case"dyte-idle-screen":return Promise.resolve().then(function(){return bF}).then(a,J);case"dyte-image-message-view":return Promise.resolve().then(function(){return kF}).then(a,J);case"dyte-image-viewer":return Promise.resolve().then(function(){return SF}).then(a,J);case"dyte-leave-button":return Promise.resolve().then(function(){return EF}).then(a,J);case"dyte-leave-meeting":return Promise.resolve().then(function(){return CF}).then(a,J);case"dyte-livestream-toggle":return Promise.resolve().then(function(){return RF}).then(a,J);case"dyte-meeting-title":return Promise.resolve().then(function(){return AF}).then(a,J);case"dyte-message-list-view":return Promise.resolve().then(function(){return qF}).then(a,J);case"dyte-message-view":return Promise.resolve().then(function(){return KF}).then(a,J);case"dyte-mic-toggle":return Promise.resolve().then(function(){return YF}).then(a,J);case"dyte-mixed-grid":return Promise.resolve().then(function(){return XF}).then(a,J);case"dyte-more-toggle":return Promise.resolve().then(function(){return tV}).then(a,J);case"dyte-mute-all-button":return Promise.resolve().then(function(){return rV}).then(a,J);case"dyte-mute-all-confirmation":return Promise.resolve().then(function(){return nV}).then(a,J);case"dyte-network-indicator":return Promise.resolve().then(function(){return oV}).then(a,J);case"dyte-participant-count":return Promise.resolve().then(function(){return dV}).then(a,J);case"dyte-participant-setup":return Promise.resolve().then(function(){return uV}).then(a,J);case"dyte-participants":return Promise.resolve().then(function(){return pV}).then(a,J);case"dyte-participants-audio":return Promise.resolve().then(function(){return fV}).then(a,J);case"dyte-participants-stage-list":return Promise.resolve().then(function(){return yV}).then(a,J);case"dyte-participants-stage-queue":return Promise.resolve().then(function(){return wV}).then(a,J);case"dyte-participants-toggle":return Promise.resolve().then(function(){return _V}).then(a,J);case"dyte-participants-viewer-list":return Promise.resolve().then(function(){return xV}).then(a,J);case"dyte-participants-waiting-list":return Promise.resolve().then(function(){return TV}).then(a,J);case"dyte-permissions-message":return Promise.resolve().then(function(){return PV}).then(a,J);case"dyte-pip-toggle":return Promise.resolve().then(function(){return IV}).then(a,J);case"dyte-plugin-main":return Promise.resolve().then(function(){return MV}).then(a,J);case"dyte-plugins":return Promise.resolve().then(function(){return OV}).then(a,J);case"dyte-plugins-toggle":return Promise.resolve().then(function(){return NV}).then(a,J);case"dyte-polls":return Promise.resolve().then(function(){return jV}).then(a,J);case"dyte-polls-toggle":return Promise.resolve().then(function(){return zV}).then(a,J);case"dyte-recording-indicator":return Promise.resolve().then(function(){return VV}).then(a,J);case"dyte-recording-toggle":return Promise.resolve().then(function(){return HV}).then(a,J);case"dyte-remote-access-manager":return Promise.resolve().then(function(){return GV}).then(a,J);case"dyte-screen-share-toggle":return Promise.resolve().then(function(){return JV}).then(a,J);case"dyte-screenshare-view":return Promise.resolve().then(function(){return QV}).then(a,J);case"dyte-settings":return Promise.resolve().then(function(){return ZV}).then(a,J);case"dyte-settings-toggle":return Promise.resolve().then(function(){return eB}).then(a,J);case"dyte-setup-screen":return Promise.resolve().then(function(){return iB}).then(a,J);case"dyte-sidebar":return Promise.resolve().then(function(){return sB}).then(a,J);case"dyte-simple-grid":return Promise.resolve().then(function(){return aB}).then(a,J);case"dyte-spotlight-grid":return Promise.resolve().then(function(){return cB}).then(a,J);case"dyte-stage":return Promise.resolve().then(function(){return lB}).then(a,J);case"dyte-stage-toggle":return Promise.resolve().then(function(){return gB}).then(a,J);case"dyte-text-field":return Promise.resolve().then(function(){return fB}).then(a,J);case"dyte-transcripts":return Promise.resolve().then(function(){return yB}).then(a,J);case"dyte-ui-provider":return Promise.resolve().then(function(){return wB}).then(a,J);case"dyte-waiting-screen":return Promise.resolve().then(function(){return _B}).then(a,J);case"dyte-webinar-stage-toggle":return Promise.resolve().then(function(){return xB}).then(a,J);case"dyte-breakout-room-manager_3":return Promise.resolve().then(function(){return PB}).then(a,J);case"dyte-channel-header_8":return Promise.resolve().then(function(){return zB}).then(a,J);case"dyte-debugger-audio_3":return Promise.resolve().then(function(){return HB}).then(a,J);case"dyte-livestream-indicator_3":return Promise.resolve().then(function(){return JB}).then(a,J);case"dyte-name-tag":return Promise.resolve().then(function(){return QB}).then(a,J);case"dyte-participant":return Promise.resolve().then(function(){return ZB}).then(a,J);case"dyte-poll_2":return Promise.resolve().then(function(){return tH}).then(a,J);case"dyte-settings-audio_2":return Promise.resolve().then(function(){return sH}).then(a,J);case"dyte-sidebar-ui":return Promise.resolve().then(function(){return aH}).then(a,J);case"dyte-tab-bar":return Promise.resolve().then(function(){return cH}).then(a,J);case"dyte-transcript":return Promise.resolve().then(function(){return lH}).then(a,J);case"dyte-audio-visualizer_2":return Promise.resolve().then(function(){return pH}).then(a,J);case"dyte-channel-details":return Promise.resolve().then(function(){return mH}).then(a,J);case"dyte-draft-attachment-view_6":return Promise.resolve().then(function(){return xH}).then(a,J);case"dyte-join-stage_2":return Promise.resolve().then(function(){return CH}).then(a,J);case"dyte-notification":return Promise.resolve().then(function(){return RH}).then(a,J);case"dyte-participant-tile":return Promise.resolve().then(function(){return AH}).then(a,J);case"dyte-spotlight-indicator":return Promise.resolve().then(function(){return DH}).then(a,J);case"dyte-chat-message_5":return Promise.resolve().then(function(){return $H}).then(a,J);case"dyte-debugger-issues-ui_3":return Promise.resolve().then(function(){return QH}).then(a,J);case"dyte-dialog":return Promise.resolve().then(function(){return ZH}).then(a,J);case"dyte-logo":return Promise.resolve().then(function(){return eW}).then(a,J);case"dyte-markdown-view":return Promise.resolve().then(function(){return iW}).then(a,J);case"dyte-menu_3":return Promise.resolve().then(function(){return PW}).then(a,J);case"dyte-avatar":return Promise.resolve().then(function(){return IW}).then(a,J);case"dyte-controlbar-button":return Promise.resolve().then(function(){return MW}).then(a,J);case"dyte-tooltip":return Promise.resolve().then(function(){return OW}).then(a,J);case"dyte-spinner":return Promise.resolve().then(function(){return NW}).then(a,J);case"dyte-button":return Promise.resolve().then(function(){return jW}).then(a,J);case"dyte-icon":return Promise.resolve().then(function(){return FW}).then(a,J)}}return VN(()=>import(`./${s}.entry.js`),[],import.meta.url).then(a=>(tb.set(s,a),a[r]),J)},gv=new Map,ag=typeof window<"u"?window:{},hn=ag.document||{head:{}},Ii={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},q3=t=>Promise.resolve(t),k9=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),lE=[],J3=[],_9=(t,e)=>i=>{t.push(i),ow||(ow=!0,e&&Ii.$flags$&4?N_(cw):Ii.raf(cw))},uE=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){J(i)}t.length=0},cw=()=>{uE(lE),uE(J3),(ow=lE.length>0)&&Ii.raf(cw)},N_=t=>q3().then(t),Mi=_9(J3,!0),S9=()=>q3(),x9=(t,e)=>typeof window>"u"?Promise.resolve():S9().then(()=>g9(JSON.parse('[["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-chat",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32],"channels":[32],"selectedChannelId":[32],"editingMessage":[32],"replyMessage":[32],"searchQuery":[32],"selectorState":[32],"creatingChannel":[32]},[[8,"editMessageInit","onEditMessageInit"],[0,"switchChannel","channelSwitchListener"]]]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-debugger",[[1,"dyte-debugger",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"progress":[32]},[[0,"testProgress","progressUpdate"]]]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-chat-composer-ui",[[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"prefill":[16],"members":[16],"channelId":[1,"channel-id"],"emojiPickerActive":[32],"mentionQuery":[32],"focusedMemberIndex":[32],"filePreview":[32]}]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"showWebinarStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"connected":[32],"pipSupported":[32],"pipEnabled":[32],"mediaConnected":[32],"roomState":[32]}]]],["dyte-message-view",[[1,"dyte-message-view",{"actions":[16],"variant":[1],"viewType":[1,"view-type"],"avatarUrl":[1,"avatar-url"],"hideAvatar":[4,"hide-avatar"],"authorName":[1,"author-name"],"hideAuthorName":[4,"hide-author-name"],"hideMetadata":[4,"hide-metadata"],"time":[16],"iconPack":[16]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-polls",[[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32]}]]],["dyte-audio-tile",[[1,"dyte-audio-tile",{"meeting":[16],"config":[16],"size":[513],"states":[16],"iconPack":[16],"t":[16],"participant":[16],"audioEnabled":[32],"volume":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32]}]]],["dyte-channel-creator",[[1,"dyte-channel-creator",{"meeting":[16],"t":[16],"iconPack":[16],"channelName":[32],"searchQuery":[32],"step":[32],"loading":[32],"selectedMemberIds":[32],"focusedMemberIndex":[32],"showAllMembersList":[32]}]]],["dyte-channel-selector-ui",[[1,"dyte-channel-selector-ui",{"channels":[16],"selectedChannelId":[1,"selected-channel-id"],"iconPack":[16],"t":[16],"showRecentMessage":[4,"show-recent-message"],"isHidden":[32],"searchQuery":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-remote-access-manager",[[1,"dyte-remote-access-manager",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"acceptedRequestId":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-webinar-stage-toggle",[[1,"dyte-webinar-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"canPresent":[32],"requestProduce":[32]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-debugger-toggle",[[1,"dyte-debugger-toggle",{"variant":[513],"meeting":[16],"states":[16],"t":[16],"iconPack":[16],"size":[513]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"targetElement":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-image-message-view",[[1,"dyte-image-message-view",{"url":[1],"iconPack":[16],"t":[16],"status":[32]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"badgeCount":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipSupported":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"states":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[1040],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"currentTab":[32],"isFloating":[32],"enablePinning":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-file-message-view",[[1,"dyte-file-message-view",{"name":[1],"size":[2],"url":[1],"iconPack":[16],"t":[16]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-message-list-view",[[0,"dyte-message-list-view",{"messages":[16],"renderer":[16],"loadMore":[16],"visibleItemsCount":[2,"visible-items-count"],"estimateItemSize":[2,"estimate-item-size"],"iconPack":[16],"range":[32],"isFetching":[32],"autoScroll":[32],"totalHeight":[32]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"viewModeEnabled":[32]}]]],["dyte-plugins",[[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugins":[32],"activatedPluginsId":[32]}]]],["dyte-chat-selector-ui",[[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-file-dropzone",[[1,"dyte-file-dropzone",{"hostEl":[16],"iconPack":[16],"t":[16],"dropzoneActivated":[32]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"participantCount":[32],"isViewer":[32]}]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-participants",[[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"search":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-transcripts",[[1,"dyte-transcripts",{"meeting":[16],"states":[16],"config":[16],"t":[16],"transcripts":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat",{"t":[16]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-audio-grid",[[1,"dyte-audio-grid",{"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"size":[513],"t":[16],"hideSelf":[4,"hide-self"],"activeParticipants":[32],"onStageParticipants":[32],"offStageParticipants":[32]}]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-debugger-network",[[1,"dyte-debugger-network",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"issueKey":[32]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"states":[32],"newMeeting":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32],"showStageList":[32]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-ui-provider",[[4,"dyte-ui-provider",{"meeting":[16],"size":[1537],"config":[1040],"t":[16],"iconPackUrl":[513,"icon-pack-url"],"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"joinRoom":[4,"join-room"],"isReady":[32],"iconPack":[32]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"config":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-sidebar-ui",[[1,"dyte-sidebar-ui",{"view":[513],"tabs":[16],"currentTab":[1,"current-tab"],"iconPack":[16],"t":[16]}]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"maxLength":[2,"max-length"],"isScreenShare":[4,"is-screen-share"],"variant":[513],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-transcript",[[1,"dyte-transcript",{"transcript":[16],"t":[16]}]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"audioDevices":[32],"speakerDevices":[32],"canProduceAudio":[32],"currentDevices":[32]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoDevices":[32],"currentDevice":[32],"videoEnabled":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-channel-details",[[1,"dyte-channel-details",{"channel":[16],"t":[16],"iconPack":[16],"members":[16]}]]],["dyte-notification",[[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-participant-tile",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-debugger-audio_3",[[1,"dyte-debugger-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"micMetadata":[32],"micPreview":[32],"speakerPreview":[32],"audioTrackStats":[32],"activeTab":[32],"stage":[32],"mediaPermission":[32],"speakerDevice":[32],"speakerTest":[32]}],[1,"dyte-debugger-screenshare",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"stage":[32],"mediaPermission":[32],"screenshareEnabled":[32],"audioTrackMetadata":[32],"videoTrackMetadata":[32],"screenshareTest":[32],"audioTrackStats":[32],"videoTrackStats":[32]}],[1,"dyte-debugger-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"stage":[32],"mediaPermission":[32],"videoPreview":[32],"videoMetadata":[32],"videoTrackStats":[32]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-livestream-indicator_3",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"latency":[32],"audioPlaybackError":[32]}],[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}],[1,"dyte-viewer-count",{"meeting":[16],"variant":[513],"iconPack":[16],"t":[16],"viewerCount":[32]}]]],["dyte-join-stage_2",[[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16],"isLoading":[32]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"disableEscapeKey":[4,"disable-escape-key"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-markdown-view",[[1,"dyte-markdown-view",{"text":[1],"maxLength":[2,"max-length"]}]]],["dyte-audio-visualizer_2",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-debugger-issues-ui_3",[[1,"dyte-debugger-permissions-ui",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"mediaType":[1,"media-type"],"issueKey":[32],"permission":[32],"devices":[32]}],[1,"dyte-debugger-issues-ui",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"mediaType":[1,"media-type"],"issueIndex":[32],"reported":[32]}],[1,"dyte-information-tooltip",{"iconPack":[16]}]]],["dyte-draft-attachment-view_6",[[1,"dyte-draft-attachment-view",{"iconPack":[16],"t":[16],"attachment":[16],"filePreview":[32]}],[1,"dyte-emoji-picker-button",{"iconPack":[16],"t":[16],"isActive":[4,"is-active"]}],[1,"dyte-file-picker-button",{"filter":[1],"label":[1],"icon":[1],"iconPack":[16],"t":[16]}],[1,"dyte-text-composer-view",{"disabled":[4],"placeholder":[1],"value":[1],"maxLength":[2,"max-length"],"keyDownHandler":[16],"setText":[64]}],[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}],[0,"dyte-text-message-view",{"text":[1],"isMarkdown":[4,"is-markdown"]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-chat-message_5",[[1,"dyte-chat-message",{"message":[16],"isContinued":[4,"is-continued"],"isUnread":[4,"is-unread"],"size":[513],"iconPack":[16],"t":[16],"isSelf":[4,"is-self"],"canEdit":[4,"can-edit"],"canDelete":[4,"can-delete"],"canReply":[4,"can-reply"],"disableControls":[4,"disable-controls"],"alignRight":[4,"align-right"],"senderDisplayPicture":[1,"sender-display-picture"],"hideAvatar":[4,"hide-avatar"],"now":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"selectedItemId":[1,"selected-item-id"],"autoScroll":[4,"auto-scroll"],"iconPack":[16],"t":[16],"emptyListLabel":[1,"empty-list-label"],"isLoading":[32],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"showEmptyListLabel":[32],"onNewNode":[64],"onNodeDelete":[64],"onNodeUpdate":[64]}],[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"],"status":[32]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}]]],["dyte-channel-header_8",[[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"selectedChannel":[16],"selectedChannelId":[1,"selected-channel-id"],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-chat-search-results",{"meeting":[16],"query":[1],"channelId":[1,"channel-id"],"iconPack":[16],"t":[16]}],[1,"dyte-chat-composer-view",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"message":[1],"quotedMessage":[1,"quoted-message"],"storageKey":[1,"storage-key"],"inputTextPlaceholder":[1,"input-text-placeholder"],"isEditing":[4,"is-editing"],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"fileToUpload":[32],"isEmojiPickerOpen":[32]}],[0,"dyte-channel-header",{"meeting":[16],"channel":[16],"iconPack":[16],"t":[16],"showBackButton":[4,"show-back-button"],"showChannelDetailsDialog":[32],"showSearchBar":[32],"members":[32]}],[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-channel-selector-view",{"channels":[16],"selectedChannelId":[1,"selected-channel-id"],"disableSearch":[4,"disable-search"],"hideAvatar":[4,"hide-avatar"],"iconPack":[16],"t":[16],"viewAs":[1,"view-as"],"searchQuery":[32],"showDropdown":[32]}],[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"],[8,"dyteSendNotification","sendNotificationListener"]]]]]]'),e)),Ke={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":{children:["dyte-name-tag","dyte-network-indicator"]},"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu":[["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-recording-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.sm":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.md":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#controlbar-left":["dyte-settings-toggle","dyte-screen-share-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-more-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var K3=typeof global=="object"&&global&&global.Object===Object&&global,E9=typeof self=="object"&&self&&self.Object===Object&&self,kd=K3||E9||Function("return this")(),mv=kd.Symbol,Q3=Object.prototype,T9=Q3.hasOwnProperty,C9=Q3.toString,th=mv?mv.toStringTag:void 0;function P9(t){var e=T9.call(t,th),i=t[th];try{t[th]=void 0;var r=!0}catch{}var s=C9.call(t);return r&&(e?t[th]=i:delete t[th]),s}var R9=Object.prototype,I9=R9.toString;function A9(t){return I9.call(t)}var M9="[object Null]",D9="[object Undefined]",hE=mv?mv.toStringTag:void 0;function og(t){return t==null?t===void 0?D9:M9:hE&&hE in Object(t)?P9(t):A9(t)}function Bn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function fu(t){return t!=null&&typeof t=="object"}const rd=t=>Zo(t)?t.meta.viewType==="LIVESTREAM"&&t.stage.status!=="ON_STAGE":!1,Y3=t=>{var e;return Zo(t)?t.meta.viewType==="LIVESTREAM"&&((e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions.canLivestream):!1},Zo=t=>{var e;return((e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions.isV2)&&(t==null?void 0:t.livestream)};var Dn;(function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PLAYING="Playing",t.READY="Ready"})(Dn||(Dn={}));var fi;(function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"})(fi||(fi={}));const O9=[fi.TIME_UPDATE,fi.BUFFER_UPDATE,fi.TEXT_METADATA_CUE,fi.PLAYER_METADATA],L9=[fi.REBUFFERING,fi.AUDIO_BLOCKED,fi.PLAYBACK_BLOCKED,fi.ERROR,fi.RECOVERABLE_ERROR,fi.WORKER_ERROR,fi.NETWORK_UNAVAILABLE,fi.ANALYTICS_EVENT,fi.PLAYBACK_RATE_CHANGED,fi.QUALITY_CHANGED,fi.INITIALIZED],fv={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures",FEAT_CHANNEL_CHAT:"feat_channel_chat",FEAT_PARTICIPANT_LIST:"feat_participant_list"},N9=t=>t.connectedMeetings.supportsConnectedMeetings,vv=t=>{var e;return(t==null?void 0:t.meta.viewType)==="CHAT"||Zo(t)||((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.features.hasFeature("feat_paginated_chat"))},yv=t=>{var e,i;return((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.browserSpecs.isFirefox())&&((i=t==null?void 0:t.__internals__)===null||i===void 0?void 0:i.features.hasFeature("disable_firefox_setting_sink_id"))};let Z3=0;function U9(){return++Z3}function j9(){Z3=0}const X3="temp-";function $9(){return{id:`${X3}${Math.random().toString(36)}`,title:`Room ${U9()}`,participants:[]}}function ib(t){return t.includes(X3)}function z9(t,e){const i=t.length,r=Math.ceil(i/e),s=new Array(e);let n=0;for(let a=0;a<e;a++)s[a]=t.slice(n,n+r),n+=r;return s.filter(a=>a.length)}function bi(t){var e;return(e=t.customParticipantId)!==null&&e!==void 0?e:t.clientSpecificId}function eI(t){const e=new Map;return[t.self,...t.participants.joined.toArray()].map(i=>{e.set(bi(i),i.picture)}),[t.connectedMeetings.parentMeeting,...t.connectedMeetings.meetings].flatMap(i=>i.participants).map(i=>({id:i.id,customParticipantId:bi(i),displayName:i.displayName,displayPictureUrl:i.displayPictureUrl!==""?i.displayPictureUrl:e.get(bi(i))}))}const tI=t=>{const e=t.self.permissions.connectedMeetings;return!(!e.canAlterConnectedMeetings&&!t.connectedMeetings.isActive||!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting||!N9(t))},F9=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],V9={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},pE={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},gE={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}},U_=[-2,-1,0,1,2];function Jm(t){t=t.trim();let e="0",i="0",r="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],r="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],r="0x"+t[5]+t[6]),[+e,+i,+r]}const B9=(t,e,i)=>{let r,s,n;if(e==0)r=s=n=i;else{const a=(u,l,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?u+(l-u)*6*p:p<.5?l:p<.6666666666666666?u+(l-u)*(.6666666666666666-p)*6:u),o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;r=a(c,o,t+1/3),s=a(c,o,t),n=a(c,o,t-1/3)}return[Math.round(r*255),Math.round(s*255),Math.round(n*255)]},H9=(t,e,i)=>{t/=255,e/=255,i/=255;const r=Math.max(t,e,i),s=Math.min(t,e,i);let n,a,o=(r+s)/2;if(r==s)n=a=0;else{const c=r-s;switch(a=o>.5?c/(2-r-s):c/(r+s),r){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4;break}n/=6}return[n,a,o]},W9=(t,e,i)=>{const r=s=>s.toString(16).padStart(2,"0");return`#${r(t)}${r(e)}${r(i)}`},iI=(t,e=U_,i=.4)=>{const r=[],[s,n,a]=Jm(t),[o,c,u]=H9(s,n,a),l=Math.round(u*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const p=e.findIndex(E=>E===0);if(p===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const m=5-p,y=p+1,b=(100-l)/m,S=l/y;for(const E of e){let k;E<0?k=l+E*S*i:E>0?k=l+E*b*i:k=l;const[T,I,O]=B9(o,c,k/100);r.push(W9(T,I,O))}return r},oc=t=>typeof t=="string"&&t.length===7&&t.startsWith("#"),G9=t=>{const[e,i,r,s,n]=iI(t,U_);return{300:e,400:i,500:r,600:s,700:n}},q9=t=>{const[e,i,r,s,n]=iI(t,U_);return{1e3:e,900:i,800:r,700:s,600:n}},J9=t=>{const e=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const s=document.createElement("link");s.rel="preconnect",s.setAttribute("data-dyte-font","true"),s.href="https://fonts.googleapis.com";const n=s.cloneNode(!0);n.href="https://fonts.gstatic.com",n.crossOrigin="",i.push(s,n)}const r=document.createElement("link");r.rel="stylesheet",r.setAttribute("data-dyte-font",t),r.href=encodeURI(`https://fonts.googleapis.com/css2?family=${t}:wght@${e.join(";")}&display=swap`),i.push(r),document.head.append(...i)},K9=(t,e)=>{F9.forEach(i=>{t.style.setProperty(`--dyte-space-${i}`,`${i*e}px`)})},Q9=(t,e)=>{if(e in pE){const i=pE[e];Object.keys(i).forEach(r=>{t.style.setProperty(`--dyte-border-width-${r}`,`${i[r]}px`)})}},Y9=(t,e)=>{if(e in gE){const i=gE[e];Object.keys(i).forEach(r=>{t.style.setProperty(`--dyte-border-radius-${r}`,`${i[r]}px`)})}},mE=(t,e)=>{Object.keys(e).forEach(i=>{const r=e[i];if(typeof r=="string")if(i==="text"||i==="text-on-brand"){const s=Jm(r).join(" ");t.style.setProperty(`--dyte-colors-${i}-1000`,`${s}`),t.style.setProperty(`--dyte-colors-${i}-900`,`${s} / 0.88`),t.style.setProperty(`--dyte-colors-${i}-800`,`${s} / 0.76`),t.style.setProperty(`--dyte-colors-${i}-700`,`${s} / 0.64`),t.style.setProperty(`--dyte-colors-${i}-600`,`${s} / 0.52`)}else{const s=Jm(r).join(" ");t.style.setProperty(`--dyte-colors-${i}`,s)}else typeof r=="object"&&Object.keys(r).forEach(s=>{const n=r[s],a=Jm(n).join(" ");t.style.setProperty(`--dyte-colors-${i}-${s}`,a)})})},dw=(t,{spacingBase:e,borderRadius:i,borderWidth:r,colors:s,fontFamily:n,googleFont:a,theme:o})=>{if(typeof t!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(J9(a),t.style.setProperty("--dyte-font-family",a)),typeof n=="string"&&t.style.setProperty("--dyte-font-family",n),typeof e=="number"&&K9(t,e),typeof r=="string"&&Q9(t,r),typeof i=="string"&&Y9(t,i),typeof o=="string"){const c=V9[o];c!=null&&mE(t,c)}typeof s=="object"&&mE(t,s)};function Z9(){this.__data__=[],this.size=0}function fy(t,e){return t===e||t!==t&&e!==e}function vy(t,e){for(var i=t.length;i--;)if(fy(t[i][0],e))return i;return-1}var X9=Array.prototype,eU=X9.splice;function tU(t){var e=this.__data__,i=vy(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():eU.call(e,i,1),--this.size,!0}function iU(t){var e=this.__data__,i=vy(e,t);return i<0?void 0:e[i][1]}function rU(t){return vy(this.__data__,t)>-1}function sU(t,e){var i=this.__data__,r=vy(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function ja(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}ja.prototype.clear=Z9;ja.prototype.delete=tU;ja.prototype.get=iU;ja.prototype.has=rU;ja.prototype.set=sU;function nU(){this.__data__=new ja,this.size=0}function aU(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function oU(t){return this.__data__.get(t)}function cU(t){return this.__data__.has(t)}var dU="[object AsyncFunction]",lU="[object Function]",uU="[object GeneratorFunction]",hU="[object Proxy]";function j_(t){if(!Bn(t))return!1;var e=og(t);return e==lU||e==uU||e==dU||e==hU}var rb=kd["__core-js_shared__"],fE=function(){var t=/[^.]+$/.exec(rb&&rb.keys&&rb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function pU(t){return!!fE&&fE in t}var gU=Function.prototype,mU=gU.toString;function fU(t){if(t!=null){try{return mU.call(t)}catch{}try{return t+""}catch{}}return""}var vU=/[\\^$.*+?()[\]{}|]/g,yU=/^\[object .+?Constructor\]$/,bU=Function.prototype,wU=Object.prototype,kU=bU.toString,_U=wU.hasOwnProperty,SU=RegExp("^"+kU.call(_U).replace(vU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xU(t){if(!Bn(t)||pU(t))return!1;var e=j_(t)?SU:yU;return e.test(fU(t))}function EU(t,e){return t==null?void 0:t[e]}function $_(t,e){var i=EU(t,e);return xU(i)?i:void 0}var rI=$_(kd,"Map"),Up=$_(Object,"create");function TU(){this.__data__=Up?Up(null):{},this.size=0}function CU(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var PU="__lodash_hash_undefined__",RU=Object.prototype,IU=RU.hasOwnProperty;function AU(t){var e=this.__data__;if(Up){var i=e[t];return i===PU?void 0:i}return IU.call(e,t)?e[t]:void 0}var MU=Object.prototype,DU=MU.hasOwnProperty;function OU(t){var e=this.__data__;return Up?e[t]!==void 0:DU.call(e,t)}var LU="__lodash_hash_undefined__";function NU(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Up&&e===void 0?LU:e,this}function hd(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}hd.prototype.clear=TU;hd.prototype.delete=CU;hd.prototype.get=AU;hd.prototype.has=OU;hd.prototype.set=NU;function UU(){this.size=0,this.__data__={hash:new hd,map:new(rI||ja),string:new hd}}function jU(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function yy(t,e){var i=t.__data__;return jU(e)?i[typeof e=="string"?"string":"hash"]:i.map}function $U(t){var e=yy(this,t).delete(t);return this.size-=e?1:0,e}function zU(t){return yy(this,t).get(t)}function FU(t){return yy(this,t).has(t)}function VU(t,e){var i=yy(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function vu(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}vu.prototype.clear=UU;vu.prototype.delete=$U;vu.prototype.get=zU;vu.prototype.has=FU;vu.prototype.set=VU;var BU=200;function HU(t,e){var i=this.__data__;if(i instanceof ja){var r=i.__data__;if(!rI||r.length<BU-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new vu(r)}return i.set(t,e),this.size=i.size,this}function yu(t){var e=this.__data__=new ja(t);this.size=e.size}yu.prototype.clear=nU;yu.prototype.delete=aU;yu.prototype.get=oU;yu.prototype.has=cU;yu.prototype.set=HU;var bv=function(){try{var t=$_(Object,"defineProperty");return t({},"",{}),t}catch{}}();function z_(t,e,i){e=="__proto__"&&bv?bv(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function lw(t,e,i){(i!==void 0&&!fy(t[e],i)||i===void 0&&!(e in t))&&z_(t,e,i)}function WU(t){return function(e,i,r){for(var s=-1,n=Object(e),a=r(e),o=a.length;o--;){var c=a[t?o:++s];if(i(n[c],c,n)===!1)break}return e}}var GU=WU(),sI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vE=sI&&typeof module=="object"&&module&&!module.nodeType&&module,qU=vE&&vE.exports===sI,yE=qU?kd.Buffer:void 0,bE=yE?yE.allocUnsafe:void 0;function JU(t,e){if(e)return t.slice();var i=t.length,r=bE?bE(i):new t.constructor(i);return t.copy(r),r}var wE=kd.Uint8Array;function KU(t){var e=new t.constructor(t.byteLength);return new wE(e).set(new wE(t)),e}function QU(t,e){var i=e?KU(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function YU(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}var kE=Object.create,ZU=function(){function t(){}return function(e){if(!Bn(e))return{};if(kE)return kE(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function XU(t,e){return function(i){return t(e(i))}}var nI=XU(Object.getPrototypeOf,Object),ej=Object.prototype;function aI(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||ej;return t===i}function tj(t){return typeof t.constructor=="function"&&!aI(t)?ZU(nI(t)):{}}var ij="[object Arguments]";function _E(t){return fu(t)&&og(t)==ij}var oI=Object.prototype,rj=oI.hasOwnProperty,sj=oI.propertyIsEnumerable,uw=_E(function(){return arguments}())?_E:function(t){return fu(t)&&rj.call(t,"callee")&&!sj.call(t,"callee")},hw=Array.isArray,nj=9007199254740991;function cI(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nj}function F_(t){return t!=null&&cI(t.length)&&!j_(t)}function aj(t){return fu(t)&&F_(t)}function oj(){return!1}var dI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,SE=dI&&typeof module=="object"&&module&&!module.nodeType&&module,cj=SE&&SE.exports===dI,xE=cj?kd.Buffer:void 0,dj=xE?xE.isBuffer:void 0,lI=dj||oj,lj="[object Object]",uj=Function.prototype,hj=Object.prototype,uI=uj.toString,pj=hj.hasOwnProperty,gj=uI.call(Object);function mj(t){if(!fu(t)||og(t)!=lj)return!1;var e=nI(t);if(e===null)return!0;var i=pj.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&uI.call(i)==gj}var fj="[object Arguments]",vj="[object Array]",yj="[object Boolean]",bj="[object Date]",wj="[object Error]",kj="[object Function]",_j="[object Map]",Sj="[object Number]",xj="[object Object]",Ej="[object RegExp]",Tj="[object Set]",Cj="[object String]",Pj="[object WeakMap]",Rj="[object ArrayBuffer]",Ij="[object DataView]",Aj="[object Float32Array]",Mj="[object Float64Array]",Dj="[object Int8Array]",Oj="[object Int16Array]",Lj="[object Int32Array]",Nj="[object Uint8Array]",Uj="[object Uint8ClampedArray]",jj="[object Uint16Array]",$j="[object Uint32Array]",$t={};$t[Aj]=$t[Mj]=$t[Dj]=$t[Oj]=$t[Lj]=$t[Nj]=$t[Uj]=$t[jj]=$t[$j]=!0;$t[fj]=$t[vj]=$t[Rj]=$t[yj]=$t[Ij]=$t[bj]=$t[wj]=$t[kj]=$t[_j]=$t[Sj]=$t[xj]=$t[Ej]=$t[Tj]=$t[Cj]=$t[Pj]=!1;function zj(t){return fu(t)&&cI(t.length)&&!!$t[og(t)]}function Fj(t){return function(e){return t(e)}}var hI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ap=hI&&typeof module=="object"&&module&&!module.nodeType&&module,Vj=ap&&ap.exports===hI,sb=Vj&&K3.process,EE=function(){try{var t=ap&&ap.require&&ap.require("util").types;return t||sb&&sb.binding&&sb.binding("util")}catch{}}(),TE=EE&&EE.isTypedArray,pI=TE?Fj(TE):zj;function pw(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Bj=Object.prototype,Hj=Bj.hasOwnProperty;function Wj(t,e,i){var r=t[e];(!(Hj.call(t,e)&&fy(r,i))||i===void 0&&!(e in t))&&z_(t,e,i)}function Gj(t,e,i,r){var s=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=r?r(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),s?z_(i,o,c):Wj(i,o,c)}return i}function qj(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}var Jj=9007199254740991,Kj=/^(?:0|[1-9]\d*)$/;function gI(t,e){var i=typeof t;return e=e==null?Jj:e,!!e&&(i=="number"||i!="symbol"&&Kj.test(t))&&t>-1&&t%1==0&&t<e}var Qj=Object.prototype,Yj=Qj.hasOwnProperty;function Zj(t,e){var i=hw(t),r=!i&&uw(t),s=!i&&!r&&lI(t),n=!i&&!r&&!s&&pI(t),a=i||r||s||n,o=a?qj(t.length,String):[],c=o.length;for(var u in t)(e||Yj.call(t,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||gI(u,c)))&&o.push(u);return o}function Xj(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var e$=Object.prototype,t$=e$.hasOwnProperty;function i$(t){if(!Bn(t))return Xj(t);var e=aI(t),i=[];for(var r in t)r=="constructor"&&(e||!t$.call(t,r))||i.push(r);return i}function mI(t){return F_(t)?Zj(t,!0):i$(t)}function r$(t){return Gj(t,mI(t))}function s$(t,e,i,r,s,n,a){var o=pw(t,i),c=pw(e,i),u=a.get(c);if(u){lw(t,i,u);return}var l=n?n(o,c,i+"",t,e,a):void 0,p=l===void 0;if(p){var m=hw(c),y=!m&&lI(c),b=!m&&!y&&pI(c);l=c,m||y||b?hw(o)?l=o:aj(o)?l=YU(o):y?(p=!1,l=JU(c,!0)):b?(p=!1,l=QU(c,!0)):l=[]:mj(c)||uw(c)?(l=o,uw(o)?l=r$(o):(!Bn(o)||j_(o))&&(l=tj(c))):p=!1}p&&(a.set(c,l),s(l,c,r,n,a),a.delete(c)),lw(t,i,l)}function fI(t,e,i,r,s){t!==e&&GU(e,function(n,a){if(s||(s=new yu),Bn(n))s$(t,e,a,i,fI,r,s);else{var o=r?r(pw(t,a),n,a+"",t,e,s):void 0;o===void 0&&(o=n),lw(t,a,o)}},mI)}function vI(t){return t}function n$(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var CE=Math.max;function a$(t,e,i){return e=CE(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=CE(r.length-e,0),a=Array(n);++s<n;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i(a),n$(t,this,o)}}function o$(t){return function(){return t}}var c$=bv?function(t,e){return bv(t,"toString",{configurable:!0,enumerable:!1,value:o$(e),writable:!0})}:vI,d$=800,l$=16,u$=Date.now;function h$(t){var e=0,i=0;return function(){var r=u$(),s=l$-(r-i);if(i=r,s>0){if(++e>=d$)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var p$=h$(c$);function g$(t,e){return p$(a$(t,e,vI),t+"")}function m$(t,e,i){if(!Bn(i))return!1;var r=typeof e;return(r=="number"?F_(i)&&gI(e,i.length):r=="string"&&e in i)?fy(i[e],t):!1}function f$(t){return g$(function(e,i){var r=-1,s=i.length,n=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(s--,n):void 0,a&&m$(i[0],i[1],a)&&(n=s<3?void 0:n,s=1),e=Object(e);++r<s;){var o=i[r];o&&t(e,o,r,n)}return e})}var yI=f$(function(t,e,i){fI(t,e,i)});const v$=(t,e=Ke)=>{let i=Object.assign({},e);return yI(i,t),i},bI=(t,e,i={},r={grid_pagination:!0,settings_toggle:!0})=>{var s,n,a,o,c,u,l,p,m,y,b,S,E,k,T,I;const O={showSetupScreen:!0};let q,B=["dyte-stage"],Y={},X={};const be=(r==null?void 0:r.settings_toggle)!==!1,he=(r==null?void 0:r.grid_pagination)!==!1;if(!((s=t.controlBar)===null||s===void 0)&&s.isEnabled){B.push("dyte-controlbar");const{elements:je}=t.controlBar,yt=[...je.fullscreen?["dyte-fullscreen-toggle"]:[],...be?["dyte-settings-toggle"]:[]],Ot=[],Bt=[];e.troubleshoot!==void 0&&Bt.push("dyte-debugger-toggle"),e.participants.pip.isSupported()&&((a=(n=e.self)===null||n===void 0?void 0:n.config)===null||a===void 0?void 0:a.pipMode)&&((o=e.self.config)===null||o===void 0?void 0:o.viewType)!=="LIVESTREAM"&&Bt.push("dyte-pip-toggle"),e!=null&&e.self.permissions.canDisableParticipantAudio&&Bt.push("dyte-mute-all-button"),tI(e)&&Bt.push("dyte-breakout-rooms-toggle"),!((c=e.self)===null||c===void 0)&&c.permissions.canRecord&&Bt.push("dyte-recording-toggle"),Y3(e)&&yt.push("dyte-livestream-toggle"),je.screenshare&&yt.push("dyte-screen-share-toggle"),je.chat&&Ot.push("dyte-chat-toggle"),je.polls&&Ot.push("dyte-polls-toggle"),je.participants&&Ot.push("dyte-participants-toggle"),je.plugins&&Ot.push("dyte-plugins-toggle"),Ot.push("dyte-ai-toggle");const Ir=["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle","dyte-leave-button"];Bt.length>0&&Ir.push("dyte-more-toggle");const K=yt.concat(Ot).concat(Bt);let ie=!1;K.length>0&&(ie=!0),X={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":yt,"div#controlbar-center":Ir,"div#controlbar-right":Ot,"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-more-toggle.activeMoreMenu":Bt.map(le=>[le,{variant:"horizontal",slot:"more-elements"}]),"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu.md":K.map(le=>[le,{variant:"horizontal",slot:"more-elements"}]),"dyte-more-toggle.activeMoreMenu.sm":K.map(le=>[le,{variant:"horizontal",slot:"more-elements"}]),"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle",ie&&"dyte-more-toggle","dyte-leave-button"]}}if(!((u=t.header)===null||u===void 0)&&u.isEnabled){B.unshift("dyte-header");const{elements:je}=t.header;let yt=["dyte-recording-indicator","dyte-livestream-indicator"],Ot=[],Bt=[];he&&Bt.push("dyte-grid-pagination"),je.title&&Ot.push("dyte-meeting-title"),typeof je.logo=="string"&&je.logo.length>0&&(q=je.logo,yt.unshift("dyte-logo")),je.participantCount&&Bt.push("dyte-participant-count","dyte-viewer-count"),je.timer&&Bt.push("dyte-clock"),Y={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":yt,"div#header-center":Ot,"div#header-right":Bt,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}B.push("dyte-participants-audio","dyte-dialog-manager");let ce={logo:q};t.isV2===!0?(ce=t.designTokens,oc((p=(l=t==null?void 0:t.designTokens)===null||l===void 0?void 0:l.colors)===null||p===void 0?void 0:p.textOnBrand)&&(ce.colors["text-on-brand"]=(y=(m=t==null?void 0:t.designTokens)===null||m===void 0?void 0:m.colors)===null||y===void 0?void 0:y.textOnBrand),oc((S=(b=t==null?void 0:t.designTokens)===null||b===void 0?void 0:b.colors)===null||S===void 0?void 0:S.videoBg)&&(ce.colors["video-bg"]=(k=(E=t==null?void 0:t.designTokens)===null||E===void 0?void 0:E.colors)===null||k===void 0?void 0:k.videoBg)):t.colors!=null&&(ce.colors={},oc(t.colors.primary)?ce.colors.brand=G9(t.colors.primary):typeof t.colors.primary=="object"&&(ce.colors.brand=t.colors.primary),oc(t.colors.secondary)?ce.colors.background=q9(t.colors.secondary):typeof t.colors.secondary=="object"&&(ce.colors.background=t.colors.secondary),oc(t.colors.text)&&(ce.colors.text=t.colors.text),oc(t.colors.textPrimary)&&(ce.colors["text-on-brand"]=t.colors.textPrimary),oc(t.colors.videoBackground)&&(ce.colors["video-bg"]=t.colors.videoBackground));let et={designTokens:ce,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":B,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},Y),X),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],state:"viewType",children:["dyte-simple-grid"]},"dyte-grid[viewType=AUDIO_ROOM]":["dyte-audio-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activeScreenshare":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid[viewType=AUDIO_ROOM].activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],state:"viewType",children:["dyte-simple-grid"]},"dyte-mixed-grid[viewType=AUDIO_ROOM]":["dyte-audio-grid"],"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-media",...be?["div#setupcontrols-settings"]:[]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}],["dyte-debugger-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return et=v$(i,et),O.showSetupScreen=(I=(T=t.setupScreen)===null||T===void 0?void 0:T.isEnabled)!==null&&I!==void 0?I:!0,{config:et,data:O}},H={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999ZM14.939 16.5H9.06c.652 2.414 1.786 4.002 2.939 4.002s2.287-1.588 2.939-4.002Zm-7.43 0H4.785a8.532 8.532 0 0 0 4.094 3.411c-.522-.82-.953-1.846-1.27-3.015l-.102-.395Zm11.705 0h-2.722c-.324 1.335-.792 2.5-1.373 3.411a8.528 8.528 0 0 0 3.91-3.127l.185-.283ZM7.094 10H3.735l-.005.017a8.525 8.525 0 0 0-.233 1.984c0 1.056.193 2.067.545 3h3.173a20.847 20.847 0 0 1-.123-5Zm8.303 0H8.603a18.966 18.966 0 0 0 .135 5h6.524a18.974 18.974 0 0 0 .135-5Zm4.868 0h-3.358c.062.647.095 1.317.095 2a20.3 20.3 0 0 1-.218 3h3.173a8.482 8.482 0 0 0 .544-3c0-.689-.082-1.36-.236-2ZM8.88 4.09l-.023.008A8.531 8.531 0 0 0 4.25 8.5h3.048c.314-1.752.86-3.278 1.583-4.41ZM12 3.499l-.116.005C10.62 3.62 9.396 5.622 8.83 8.5h6.342c-.566-2.87-1.783-4.869-3.045-4.995L12 3.5Zm3.12.59.107.175c.669 1.112 1.177 2.572 1.475 4.237h3.048a8.533 8.533 0 0 0-4.339-4.29l-.291-.121Z" fill="currentColor"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.005a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM12 5.5c4.613 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365 8.503 8.503 0 0 0-16.493.004.75.75 0 0 1-1.455-.363A10.003 10.003 0 0 1 12 5.5Z" fill="currentColor"/></svg>',debug:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10.05 15.42 6.256-8.476a.694.694 0 0 1 1.235.57l-.03.098-3.87 9.8a2.07 2.07 0 1 1-3.737-1.766l.069-.115.076-.11 6.257-8.477-6.257 8.476Zm2.05-4.549-1.226 1.66a3.32 3.32 0 0 0-2.29 3.024.75.75 0 0 1-1.5-.063A4.819 4.819 0 0 1 9.14 11.74c.9-.631 1.942-.911 2.961-.87Zm4.167 2.752c.28.586.436 1.22.463 1.866a.75.75 0 0 1-1.376.444l.913-2.31Zm-2.233-5.37-.969 1.311a6.22 6.22 0 0 0-4.736 1.02 6.208 6.208 0 0 0-2.419 3.39.75.75 0 0 1-1.442-.412 7.708 7.708 0 0 1 3-4.207 7.724 7.724 0 0 1 6.566-1.102Zm3.51 2.138c.25.267.486.556.702.865a7.727 7.727 0 0 1 1.097 2.288.75.75 0 0 1-1.44.417 6.23 6.23 0 0 0-.885-1.845l-.102-.138.627-1.587ZM15.98 5.852l-.088.054c-.123.082-.236.18-.337.295l-.096.12-.54.732a9.138 9.138 0 0 0-8.261 1.146A9.103 9.103 0 0 0 3.38 12.37a.75.75 0 1 1-1.398-.543A10.603 10.603 0 0 1 5.799 6.97 10.642 10.642 0 0 1 15.98 5.852Zm2.629 1.562a10.646 10.646 0 0 1 2.022 2.171c.49.702.892 1.451 1.199 2.235a.75.75 0 1 1-1.397.547 9.188 9.188 0 0 0-2.327-3.405l.381-.964c.076-.19.115-.388.122-.584Z" fill="currentColor"/></svg>',info:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999Zm0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5Zm-.004 7a.75.75 0 0 1 .744.648l.007.102.003 5.502a.75.75 0 0 1-1.493.102l-.007-.101-.003-5.502a.75.75 0 0 1 .75-.75ZM12 7.003a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997Z" fill="currentColor"/></svg>',devices:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm5.5-8.5V9a5.5 5.5 0 1 0-11 0v1H9a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H6.5v.25a2.25 2.25 0 0 0 2.096 2.245l.154.005h1.128a2.251 2.251 0 1 1 0 1.5H8.75a3.75 3.75 0 0 1-3.745-3.55L5 16.25V9a7 7 0 0 1 14 0v5a2 2 0 0 1-1.85 1.995L17 16h-2a1 1 0 0 1-.993-.883L14 15v-4a1 1 0 0 1 .883-.993L15 10h2.5Zm-9 1.5h-2v3h2v-3Zm9 0h-2v3H17a.5.5 0 0 0 .492-.41L17.5 14v-2.5Z" fill="currentColor"/></svg>',horizontal_dots:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM18 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill="currentColor"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>',create_channel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" d="M2 14.75A3.25 3.25 0 0 0 5.25 18H6v2.75a1.25 1.25 0 0 0 1.999 1l2.125-1.59.396-1.583c.071-.286.177-.56.312-.82L7.5 20.252 7.499 16.5H5.25a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.966.784-1.75 1.75-1.75h13.5c.966 0 1.75.784 1.75 1.75v3.845a3.27 3.27 0 0 1 1.5.83V6.25A3.25 3.25 0 0 0 18.75 3H5.25A3.25 3.25 0 0 0 2 6.25v8.5Z"/><path fill="currentColor" d="m18.098 11.67-5.902 5.902a2.684 2.684 0 0 0-.707 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902a2.285 2.285 0 1 0-3.232-3.232Z"/></svg>',create_channel_illustration:'<svg width="503" height="362" viewBox="0 0 503 362" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M93.3477 192.893C93.3477 190.684 95.1385 188.893 97.3477 188.893H476C478.209 188.893 480 190.684 480 192.893V311.824C480 314.033 478.209 315.824 476 315.824H469.354C467.145 315.824 465.354 317.615 465.354 319.824V339.364C465.354 342.928 461.045 344.712 458.525 342.193L433.328 316.996C432.578 316.245 431.561 315.824 430.5 315.824H97.3477C95.1385 315.824 93.3477 314.033 93.3477 311.824V192.893Z" fill="#282828"/> <path d="M306.606 230.9H136.121C134.648 230.9 133.453 232.095 133.453 233.568C133.453 235.041 134.648 236.236 136.121 236.236H306.606C308.079 236.236 309.274 235.041 309.274 233.568C309.274 232.095 308.079 230.9 306.606 230.9Z" fill="#2160FD"/> <path d="M437.226 249.358H136.121C134.648 249.358 133.453 250.553 133.453 252.026C133.453 253.499 134.648 254.694 136.121 254.694H437.226C438.7 254.694 439.894 253.499 439.894 252.026C439.894 250.553 438.7 249.358 437.226 249.358Z" fill="#5C5C5C"/> <path d="M436.926 267.816H136.121C134.648 267.816 133.453 269.011 133.453 270.484C133.453 271.957 134.648 273.152 136.121 273.152H436.926C438.4 273.152 439.594 271.957 439.594 270.484C439.594 269.011 438.399 267.816 436.926 267.816Z" fill="#5C5C5C"/> <path d="M411.652 23C411.652 20.7909 409.861 19 407.652 19H29C26.7909 19 25 20.7909 25 23V141.931C25 144.14 26.7909 145.931 29 145.931H35.646C37.8551 145.931 39.646 147.722 39.646 149.931V169.472C39.646 173.036 43.9546 174.82 46.4745 172.3L71.6714 147.103C72.4216 146.352 73.439 145.931 74.4999 145.931H407.652C409.861 145.931 411.652 144.14 411.652 141.931V23Z" fill="#282828"/> <path d="M241.188 61.9839H70.703C69.2296 61.9839 68.0352 63.1783 68.0352 64.6517C68.0352 66.1252 69.2296 67.3196 70.703 67.3196H241.188C242.662 67.3196 243.856 66.1252 243.856 64.6517C243.856 63.1783 242.662 61.9839 241.188 61.9839Z" fill="#2160FD"/> <path d="M371.808 80.4419H70.703C69.2296 80.4419 68.0352 81.6363 68.0352 83.1098C68.0352 84.5832 69.2296 85.7776 70.703 85.7776H371.808C373.282 85.7776 374.476 84.5832 374.476 83.1098C374.476 81.6363 373.282 80.4419 371.808 80.4419Z" fill="#5C5C5C"/> <path d="M371.508 98.8999H70.703C69.2296 98.8999 68.0352 100.094 68.0352 101.568C68.0352 103.041 69.2296 104.236 70.703 104.236H371.508C372.982 104.236 374.176 103.041 374.176 101.568C374.176 100.094 372.982 98.8999 371.508 98.8999Z" fill="#5C5C5C"/> </svg>'},wI=async t=>{if(t==null)return H;try{const e=await fetch(t);return e.ok?Object.assign({},H,await e.json()):H}catch{return H}},y$=640,b$=768,w$=1080,k$=2160,PE={sm:y$,md:b$,lg:w$,xl:k$},kI=t=>t>=PE.lg?"lg":t>=PE.md?"md":"sm",RE={about_call:"About Call",screen:"Screen",leave:"Leave",dismiss:"Dismiss",logo:"Logo",page:"Page",more:"More","page.prev":"Previous Page","page.next":"Next Page",layout:"Layout","layout.auto":"Auto Layout",settings:"Settings",file:"File",image:"Image",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",cancel:"Cancel",yes:"Yes",you:"You",to:"To",mute:"Mute",kick:"Kick",pin:"Pin",pinned:"Pinned",unpin:"Unpin",pip_on:"Show PiP",pip_off:"Hide PiP",viewers:"Viewers",join:"Join",joined:"Joined",create:"Create",close:"Close",ask:"Ask",type:"Type",activate:"Activate",mic_off:"Mic Off",disable_mic:"Disable Mic",mic_on:"Mic On",enable_mic:"Enable Mic",audio:"Audio",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted.","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute",video_off:"Video Off",disable_video:"Disable Video",video_on:"Video On",enable_video:"Enable Video",video:"Video",offline:"You're offline","offline.description":"Please ensure that you are connected to the internet.",disconnected:"You haven't joined the meeting.","disconnected.description":"Please join the meeting in order to see and interact with other participants.",participants:"Participants","participants.errors.empty_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.","participants.turn_off_video":"Turn off video",polls:"Polls","polls.by":"Poll by","polls.question":"Poll Question","polls.question.placeholder":"What is your poll for?","polls.answers":"Answers","polls.option":"Add an option.","polls.option.placeholder":"Enter an option","polls.results.anon":"Anonymous","polls.results.hide":"Hide results before voting","polls.create":"Create Poll","polls.cancel":"Cancel Poll Creation","polls.errors.question_required":"Question is required.","polls.errors.empty_option":"Empty options not allowed.",screenshare:"Screen Share","screenshare.min_preview":"Minimize Preview","screenshare.max_preview":"Expand Preview","screenshare.shared":"Your screen is being shared.","screenshare.start":"Share Screen","screenshare.stop":"Stop Sharing","screenshare.error.unknown":"An error occured while starting screenshare.","screenshare.error.max_count":"Maximum screen share limit reached.",plugins:"Plugins",perm_denied:"Permission denied by browser.","perm_denied.audio":"Mic Permission denied by browser","perm_denied.video":"Camera Permission denied by browser","perm_denied.screenshare":"Screenshare Permission denied by browser","perm_denied.audio.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Microphone', provide permission and reload this application.","perm_denied.video.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Camera', provide permission and reload this application.","perm_denied.screenshare.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Screenshare', provide permission and reload this application.","perm_denied.audio.safari.message":"Under Safari settings, navigate to 'Websites > Microphone', provide permission and reload this application.","perm_denied.video.safari.message":"Under Safari settings, navigate to 'Websites > Camera', provide permission and reload this application.","perm_denied.screenshare.safari.message":"Under Safari settings, navigate to 'Websites > Screenshare', provide permission and reload this application.","perm_denied.audio.edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Microphone', provide permission and reload this application.","perm_denied.video.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.others.message":"From your browser settings, enable 'Microphone' permissions and reload this application.","perm_denied.video.others.message":"From your browser settings, enable 'Camera' permissions and reload this application.","perm_denied.screenshare.others.message":"From your browser settings, enable 'Screenshare' permissions and reload this application.",perm_sys_denied:"Permission denied by system","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_sys_denied.audio.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Microphone'. Allow access to your browser and reload this application.","perm_sys_denied.video.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Camera'. Allow access to your browser and reload this application.","perm_sys_denied.screenshare.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Screenshare'. Allow access to your browser and reload this application.","perm_sys_denied.audio.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Microphone', allow access to your browser and reload this application.","perm_sys_denied.video.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Camera', allow access to your browser and reload this application.","perm_sys_denied.screenshare.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Screenshare', allow access to your browser and reload this application.","perm_sys_denied.audio.windows.message":"Go to windows settings, select 'Settings > Privacy > Microphone'. Allow permissions to your browser and reload this application.","perm_sys_denied.video.windows.message":"Go to windows settings, select 'Settings > Privacy > Camera'. Allow permissions to your browser and reload this application.","perm_sys_denied.screenshare.windows.message":"Go to windows settings, select 'Settings > Privacy > Screenshare'. Allow permissions to your browser and reload this application.","perm_sys_denied.audio.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Microphone permissions and reload this application.","perm_sys_denied.video.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Camera permissions and reload this application.","perm_sys_denied.screenshare.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Screenshare permissions and reload this application.","perm_sys_denied.audio.others.message":"Navigate to your system settings. Allow 'Microphone' permissions for your browser and reload this application.","perm_sys_denied.video.others.message":"Navigate to your system settings. Allow 'Camera' permissions for your browser and reload this application.","perm_sys_denied.screenshare.others.message":"Navigate to your system settings. Allow 'Screenshare' permissions for your browser and reload this application.",perm_could_not_start:"Could not capture device.","perm_could_not_start.audio":"Unable to start your Microphone","perm_could_not_start.video":"Unable to start your Camera","perm_could_not_start.screenshare":"Unable to start your Screenshare","perm_could_not_start.audio.message":"Looks like the system could not capture your microphone. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.video.message":"Looks like the system could not capture your camera. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.screenshare.message":"Looks like the system could not capture your screenshare. Please restart your device or upgrade your browser to fix this.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"You are off stage. You can manage stage request from the participants tab.","stage.empty_viewer":"There is no one on stage","stage.remove_from_stage":"Remove from stage","stage.invited_notification":"has been invited to join stage.","stage.add_to_stage":"Invite to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...","recording.label":"REC","recording.indicator":"This meeting is being recorded.","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.","recording.error.start":"Error while starting recording.","recording.error.stop":"Error while stopping recording","recording.start":"Start Recording","recording.stop":"Stop Recording","recording.starting":"Starting","recording.stopping":"Stopping","recording.loading":"Loading","recording.idle":"Record",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.delete":"Delete Room","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View","ai.chat.tooltip":"This conversation will just be visible to you and not to others in the call.","ai.chat.summerise":"Hey AI, summarise this call","ai.chat.agenda":"Hey AI, what is today's agenda?",search:"Search","search.could_not_find":"Couldn't find a participant with the specified name or ID.","search.empty":"It looks like nobody is here.",end:"End Meeting","end.all":"End meeting for all",ended:"The meeting ended.","ended.rejected":"Your request to join the meeting was denied.","ended.left":"You left the meeting.","ended.kicked":"You were removed from the meeting.","ended.disconnected":"The call ended because the connection was lost.","ended.network":"Please check your internet connection and try again.",network:"Network","network.reconnecting":"Connection lost. Trying to reconnect...","network.delay":"Taking too long to reconnect...","network.delay_extended":"Taking too long to reconnect. Please check your network connection.","network.restored":"Connection restored","network.lost":"Connection lost","network.lost_extended":"Connection lost. Please check your network connection.","network.disconnected":"Could not reconnect. Please leave the meeting and try refreshing the window.","network.leaving":"Automatically leaving the meeting in 10 seconds.",livestream:"Livestream","livestream.indicator":"This meeting is being livestreamed.","livestream.skip":"Skip to Live","livestream.idle":"Waiting to go live.","livestream.starting":"Livestream is starting...","livestream.stopping":"Livestream is stopping...","livestream.error.not_supported":"Player not supported.","livestream.error.not_found":"Playback URL not found.","livestream.error.unknown":"An unknown error occured.","livestream.error.sync":"Could not sync livestream please try again later.","livestream.error.start":"Error while starting livestream.","livestream.error.stop":"Error while stopping livestream.","livestream.go_live":"Go Live","livestream.end_live":"End Live","livestream.error":"Error","cta.help":"Need help on how to do this?","cta.continue":"Continue as it is","cta.reload":"Reload","cta.confirmation":"Are you sure?","remote_access.empty":"There are no remote requests, yet.","remote_access.requests":"The following people have requested remote control to your screen share.","remote_access.allow":"Please select whom you want to give access to.","remote_access.grant":"Grant acess","remote_access.indicator":"Any plugin or screenshare you switch to will sync the change across the meeting",chat:"Chat","chat.new":"New","chat.new_channel":"Create new channel","chat.channel_name":"Enter channel name","chat.member_name":"Enter member name","chat.add_members":"Add members","chat.delete_msg":"Delete","chat.edit_msg":"Edit","chat.send_msg":"Send message","chat.send_attachment":"Drop files/images to send","chat.send_img":"Send an image","chat.send_file":"Send a file","chat.send_emoji":"Send an emoji","chat.update_msg":"Update message","chat.channel_members":"Channel Members","chat.img.loading":"Loading image","chat.error.img_not_found":"Image not found","chat.error.empty_results":"Couldn't find a member with the specified name.","chat.img.shared_by":"Shared by","chat.reply":"Reply","chat.message_placeholder":"Message..","chat.click_to_send":"Click to send as message","chat.search_msgs":"Search messages","chat.search_conversations":"Search conversations","chat.start_conversation":"Start a conversation..","chat.empty_search":"No messages found","chat.empty_channel":"Send a message to get started","chat.cancel_upload":"Cancel upload","chat.view_chats":"View chats","chat.everyone":"everyone","date.today":"Today","date.yesteday":"Yesterday","date.sunday":"Sunday","date.monday":"Monday","date.tuesday":"Tuesday","date.wednesday":"Wednesday","date.thursday":"Thursday","date.friday":"Friday","date.saturday":"Saturday","list.empty":"No items found","grid.listening":"Listening"},W=(t=RE)=>{const e=Object.assign({},RE,t);return i=>{var r;return(r=e[i])!==null&&r!==void 0?r:i}},_I=({element:t,size:e,states:i={},config:r={}})=>{let s=[];const n=r==null?void 0:r.root[t],a=o=>{s.push(o),typeof e=="string"&&s.push(`${o}.${e}`)};if(a(t),typeof n=="object"&&!Array.isArray(n)&&n!==null){const{state:o,states:c}=n;let u=t,l=[];if(Array.isArray(c)){l=c.filter(p=>i[p]),l.sort();for(const p of l)a(`${u}.${p}`);if(l.length>1){const p=[u,...l].join(".");a(p)}}if(typeof o=="string"){const p=`${t}[${o}=${i[o]}]`;a(p);for(const m of l)a(`${p}.${m}`);if(l.length>1){const m=[p,...l].join(".");a(m)}}}return s},_$=({selectors:t,styles:e})=>{if(!Array.isArray(t)||e==null)return{};const i={};for(const r of t){const s=e[r];s!=null&&Object.assign(i,s)}return i},SI=({selectors:t,root:e})=>{if(!e||!Array.isArray(t))return[];let i=[];for(const r of t){const s=e[r];if(Array.isArray(s))i=[...s];else if(s){if(s.children&&(i=[...s.children]),Array.isArray(s.remove))for(const n of s.remove)i=i.filter(a=>typeof a=="string"?a!==n:Array.isArray(a)?a[0]!==n:!0);if(s.addBefore)for(const[n,a]of Object.entries(s.addBefore)){const o=i.findIndex(c=>typeof c=="string"?c===n:Array.isArray(c)?c[0]===n:!1);o>=0&&i.splice(o,0,...a)}Array.isArray(s.add)&&(i=i.concat(s.add)),Array.isArray(s.prepend)&&(i=s.prepend.concat(i))}}return i},om=({elements:t,defaults:e,props:i={},deepProps:r=!1,elementProps:s={}})=>!Array.isArray(t)||t.length===0?null:t.map(n=>d(Be,{element:n,defaults:e,props:i,childProps:r&&i,elementProps:s})),S$=({element:t,defaults:e,props:i={},elementProps:r={}})=>{var s;const{config:n,size:a,states:o}=e;let c,u={},l=[];Array.isArray(t)?[c,u,...l]=t:c=t;const p=(s=n==null?void 0:n.root)===null||s===void 0?void 0:s[c];p!=null&&"props"in p&&(i=Object.assign(Object.assign({},p.props),i)),i=Object.assign(Object.assign({},i),u),c in r&&(i=Object.assign(Object.assign({},i),r[c]));const m=_I({element:c,size:a,states:o,config:n});return SI({selectors:m,root:n.root}).length},Be=({element:t,defaults:e,childProps:i={},props:r={},onlyChildren:s=!1,asHost:n=!1,deepProps:a=!1,elementProps:o={}},c)=>{var u;const{config:l,size:p,states:m}=e;let y,b={},S=[];Array.isArray(t)?[y,b,...S]=t:y=t;const E=(u=l==null?void 0:l.root)===null||u===void 0?void 0:u[y];E!=null&&"props"in E&&(r=Object.assign(Object.assign({},E.props),r)),r=Object.assign(Object.assign({},r),b),y in o&&(r=Object.assign(Object.assign({},r),o[y]));const k=_I({element:y,size:p,states:m,config:l}),T=SI({selectors:k,root:l.root});if(s)return d(om,{elements:T,defaults:e,props:i,deepProps:a,elementProps:o});const I=_$({selectors:k,styles:l.styles});if(n)return d(z,Object.assign({},e,{style:I},r),d(om,{elements:T,defaults:e,props:i,deepProps:a,elementProps:o}),c,S.map(O=>{if(Array.isArray(O)){const[q,B]=O;return d(q,Object.assign({},e,B))}return O}));if(["dyte-header","dyte-controlbar"].includes(y)&&(r.disableRender=!0),y.startsWith("dyte-"))return d(y,Object.assign({},e,{style:I},r),d(om,{elements:T,defaults:e,props:i,deepProps:a,elementProps:o}),c,S.map(O=>{if(Array.isArray(O)){const[q,B]=O;return d(q,Object.assign({},e,B))}return O}));{const[O,q]=y.split("#");return d(O,Object.assign({id:q,style:I},r),d(om,{elements:T,defaults:e,props:i,deepProps:a,elementProps:o}),c,S.map(B=>{if(Array.isArray(B)){const[Y,X]=B;return d(Y,Object.assign({},e,X))}return B}))}},IE={get:(t,e,i)=>(...r)=>{try{return Reflect.get(t,e,i).apply(t,r)}catch{return null}}};let gw;try{gw=new Proxy(localStorage,IE)}catch{gw=new Proxy({},IE)}const ds=gw,V_="dyte-prefs",xI=(t,e)=>{const i=JSON.parse(ds.getItem(V_)||"{}");i[t]=JSON.stringify(e),ds.setItem("dyte-prefs",JSON.stringify(i))},EI=t=>JSON.parse(ds.getItem(V_)||"{}")[t],x$=()=>{const t=JSON.parse(ds.getItem(V_)||"{}"),e=t["mirror-video"]?t["mirror-video"]==="true":!0,i=t["mute-notification-sounds"]?t["mute-notification-sounds"]==="true":!1;return{mirrorVideo:e,muteNotificationSounds:i}},wv={},E$=(t,e,i)=>{const r=t.get(e);r?r.includes(i)||r.push(i):t.set(e,[i])},T$=(t,e)=>{let i;return(...r)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,t(...r)},e)}},C$=t=>!("isConnected"in t)||t.isConnected,AE=T$(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(C$))},2e3),P$=()=>{if(typeof cE!="function")return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const i=cE();i&&E$(t,e,i)},set:e=>{const i=t.get(e);i&&t.set(e,i.filter(pv)),AE(t)},reset:()=>{t.forEach(e=>e.forEach(pv)),AE(t)}}},nb=t=>typeof t=="function"?t():t,R$=(t,e=(i,r)=>i!==r)=>{const i=nb(t);let r=new Map(Object.entries(i!=null?i:{}));const s={dispose:[],get:[],set:[],reset:[]},n=()=>{var b;r=new Map(Object.entries((b=nb(t))!==null&&b!==void 0?b:{})),s.reset.forEach(S=>S())},a=()=>{s.dispose.forEach(b=>b()),n()},o=b=>(s.get.forEach(S=>S(b)),r.get(b)),c=(b,S)=>{const E=r.get(b);e(S,E,b)&&(r.set(b,S),s.set.forEach(k=>k(b,S,E)))},u=typeof Proxy>"u"?{}:new Proxy(i,{get(b,S){return o(S)},ownKeys(b){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(b,S){return r.has(S)},set(b,S,E){return c(S,E),!0}}),l=(b,S)=>(s[b].push(S),()=>{I$(s[b],S)});return{state:u,get:o,set:c,on:l,onChange:(b,S)=>{const E=l("set",(T,I)=>{T===b&&S(I)}),k=l("reset",()=>S(nb(t)[b]));return()=>{E(),k()}},use:(...b)=>{const S=b.reduce((E,k)=>(k.set&&E.push(l("set",k.set)),k.get&&E.push(l("get",k.get)),k.reset&&E.push(l("reset",k.reset)),k.dispose&&E.push(l("dispose",k.dispose)),E),[]);return()=>S.forEach(E=>E())},dispose:a,reset:n,forceUpdate:b=>{const S=r.get(b);s.set.forEach(E=>E(b,S,S))}}},I$=(t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)},A$=(t,e)=>{const i=R$(t,e);return i.use(P$()),i},{state:G,onChange:bu}=A$({});var TI=function(){if(typeof Map<"u")return Map;function t(e,i){var r=-1;return e.some(function(s,n){return s[0]===i?(r=n,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(i){var r=t(this.__entries__,i),s=this.__entries__[r];return s&&s[1]},e.prototype.set=function(i,r){var s=t(this.__entries__,i);~s?this.__entries__[s][1]=r:this.__entries__.push([i,r])},e.prototype.delete=function(i){var r=this.__entries__,s=t(r,i);~s&&r.splice(s,1)},e.prototype.has=function(i){return!!~t(this.__entries__,i)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(i,r){r===void 0&&(r=null);for(var s=0,n=this.__entries__;s<n.length;s++){var a=n[s];i.call(r,a[1],a[0])}},e}()}(),mw=typeof window<"u"&&typeof document<"u"&&window.document===document,kv=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),M$=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(kv):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),D$=2;function O$(t,e){var i=!1,r=!1,s=0;function n(){i&&(i=!1,t()),r&&o()}function a(){M$(n)}function o(){var c=Date.now();if(i){if(c-s<D$)return;r=!0}else i=!0,r=!1,setTimeout(a,e);s=c}return o}var L$=20,N$=["top","right","bottom","left","width","height","size","weight"],U$=typeof MutationObserver<"u",j$=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=O$(this.refresh.bind(this),L$)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var i=this.observers_,r=i.indexOf(e);~r&&i.splice(r,1),!i.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return e.forEach(function(i){return i.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!mw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),U$?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!mw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var i=e.propertyName,r=i===void 0?"":i,s=N$.some(function(n){return!!~r.indexOf(n)});s&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),CI=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i++){var s=r[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},nu=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||kv},PI=by(0,0,0,0);function _v(t){return parseFloat(t)||0}function ME(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(r,s){var n=t["border-"+s+"-width"];return r+_v(n)},0)}function $$(t){for(var e=["top","right","bottom","left"],i={},r=0,s=e;r<s.length;r++){var n=s[r],a=t["padding-"+n];i[n]=_v(a)}return i}function z$(t){var e=t.getBBox();return by(0,0,e.width,e.height)}function F$(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return PI;var r=nu(t).getComputedStyle(t),s=$$(r),n=s.left+s.right,a=s.top+s.bottom,o=_v(r.width),c=_v(r.height);if(r.boxSizing==="border-box"&&(Math.round(o+n)!==e&&(o-=ME(r,"left","right")+n),Math.round(c+a)!==i&&(c-=ME(r,"top","bottom")+a)),!B$(t)){var u=Math.round(o+n)-e,l=Math.round(c+a)-i;Math.abs(u)!==1&&(o-=u),Math.abs(l)!==1&&(c-=l)}return by(s.left,s.top,o,c)}var V$=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof nu(t).SVGGraphicsElement}:function(t){return t instanceof nu(t).SVGElement&&typeof t.getBBox=="function"}}();function B$(t){return t===nu(t).document.documentElement}function H$(t){return mw?V$(t)?z$(t):F$(t):PI}function W$(t){var e=t.x,i=t.y,r=t.width,s=t.height,n=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(n.prototype);return CI(a,{x:e,y:i,width:r,height:s,top:i,right:e+r,bottom:s+i,left:e}),a}function by(t,e,i,r){return{x:t,y:e,width:i,height:r}}var G$=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=by(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=H$(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),q$=function(){function t(e,i){var r=W$(i);CI(this,{target:e,contentRect:r})}return t}(),J$=function(){function t(e,i,r){if(this.activeObservations_=[],this.observations_=new TI,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=i,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof nu(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(e)||(i.set(e,new G$(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof nu(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;!i.has(e)||(i.delete(e),i.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&e.activeObservations_.push(i)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,i=this.activeObservations_.map(function(r){return new q$(r.target,r.broadcastRect())});this.callback_.call(e,i,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),RI=typeof WeakMap<"u"?new WeakMap:new TI,II=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=j$.getInstance(),r=new J$(e,i,this);RI.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){II.prototype[t]=function(){var e;return(e=RI.get(this))[t].apply(e,arguments)}});var AI=function(){return typeof kv.ResizeObserver<"u"?kv.ResizeObserver:II}();const K$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}",MI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),G.meeting="joined"},this.socketServiceRoomJoinedListener=()=>{this.meeting.stage.status==="ON_STAGE"||this.meeting.stage.status===void 0||(this.setStates({meeting:"joined"}),G.meeting="joined")},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),G.meeting="waiting"},this.roomLeftListener=({state:e})=>{const i=this.states||G;if((i==null?void 0:i.roomLeftState)==="disconnected"){this.setStates({meeting:"ended",roomLeftState:e}),G.meeting="ended";return}this.setStates({meeting:"ended",roomLeftState:e}),G.meeting="ended",G.roomLeftState=e},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{if(["audio","video"].includes(e)){if(i==="ACCEPTED"||G.activeDebugger)return;const r={enabled:!0,kind:e};this.setStates({activePermissionsMessage:r}),G.activePermissionsMessage=r}},this.joinStateAcceptedListener=()=>{this.setStates({activeJoinStage:!0}),this.stateUpdate.emit({activeJoinStage:!0}),G.activeJoinStage=!0},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=W(),this.config=Ke,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.newMeeting=void 0,this.iconPack=H}connectedCallback(){var t;this.resizeObserver=new AI(()=>this.handleResize()),this.resizeObserver.observe(this.host),this.applyDesignSystem&&((t=this.config)===null||t===void 0?void 0:t.designTokens)!=null&&typeof document<"u"&&dw(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.initializePreferences()}clearListeners(t){t!=null&&(t.self.removeListener("roomJoined",this.roomJoinedListener),t.self.removeListener("socketServiceRoomJoined",this.roomJoinedListener),t.meta.removeListener("socketReconnected",this.roomJoinedListener),t.self.removeListener("roomLeft",this.roomLeftListener),t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.self.removeListener("waitlisted",this.waitlistedListener),t.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener))}disconnectedCallback(){var t;this.leaveOnUnmount&&((t=this.meeting)===null||t===void 0||t.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(t){var e,i;if(t!=null){if(this.setStates({viewType:t.meta.viewType}),this.loadConfigFromPreset&&t.self.config!=null){const r=t.self.config,{config:s,data:n}=bI(r,t);this.config===Ke&&(this.config=s),this.showSetupScreen==null&&(this.showSetupScreen=n.showSetupScreen),t.connectedMeetings.supportsConnectedMeetings&&((e=G.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&((i=this.config)===null||i===void 0?void 0:i.designTokens)!=null&&typeof document<"u"&&dw(document.documentElement,this.config.designTokens),t.meta.viewType==="LIVESTREAM"&&t.self.addListener("socketServiceRoomJoined",this.socketServiceRoomJoinedListener),t.self.addListener("roomJoined",this.roomJoinedListener),t.self.addListener("waitlisted",this.waitlistedListener),t.self.addListener("roomLeft",this.roomLeftListener),t.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),t.connectedMeetings.supportsConnectedMeetings&&t.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),t.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),G.meeting="joined"):this.showSetupScreen&&this.newMeeting==null?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),G.meeting="setup"):t.joinRoom()}}async iconPackUrlChanged(t){this.iconPack=await wI(t)}listenState(t){t.stopPropagation(),this.setStates(t.detail)}initializePreferences(){const t=x$();this.setStates({prefs:t}),G.prefs=t}handleChangingMeeting(t){G.activeBreakoutRoomsManager=Object.assign(Object.assign({},G.activeBreakoutRoomsManager),{destinationMeetingId:t})}handleResize(){this.size=kI(this.host.clientWidth)}setStates(t){const e=Object.assign({},this.states);yI(e,t),this.states=e}render(){var t,e,i;const r={meeting:(t=this.newMeeting)!==null&&t!==void 0?t:this.meeting,size:this.size,states:this.states||G,config:this.config,iconPack:this.iconPack,t:this.t},s={"dyte-grid":{layout:this.gridLayout}};return((i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.viewType)==="CHAT"?d(Be,{element:"dyte-chat",defaults:r}):d(Be,{element:"dyte-meeting",defaults:r,asHost:!0,elementProps:s})}get host(){return Pr(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};MI.style=K$;var Q$=Object.freeze({__proto__:null,dyte_meeting:MI});const Y$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",DI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),G.activeAI=!1},this.transcriptionHandler=()=>{this.tab!=="transcriptions"&&(this.newTranscriptionAvailable=!0)},this.defaultSection="home",this.meeting=void 0,this.states=void 0,this.config=Ke,this.iconPack=H,this.t=W(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var t,e;this.viewChanged(this.view),(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.on("transcript",this.transcriptionHandler)}disconnectedCallback(){var t,e;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.off("transcript",this.transcriptionHandler)}viewChanged(t){t==="full-screen"&&(this.keydownListener=e=>{e.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(t){t==="transcriptions"&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),t==="home"&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(t){this.tab=t,G.activeSidebar=!0}render(){var t,e,i;if(!((e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.permissions).transcriptionEnabled||!(!((i=this.states)===null||i===void 0)&&i.activeAI))return null;const r={meeting:this.meeting,config:this.config,states:this.states||G,size:this.size,t:this.t,iconPack:this.iconPack};return d(z,null,d("h3",{class:"title"},this.t("ai")),d("div",{id:"mobile-header"},d("dyte-button",{variant:"ghost",class:{active:this.tab==="home"},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&d("span",{class:"dot"},".")),d("dyte-button",{variant:"ghost",class:{active:this.tab==="transcriptions"},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&d("span",{class:"dot"},"."))),d("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("close"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.tab==="home"&&d(Be,{element:"dyte-ai-home",defaults:r,props:{meeting:this.meeting}}),this.tab==="transcriptions"&&d(Be,{element:"dyte-ai-transcriptions",defaults:r}),this.tab==="personal"&&d(Be,{element:"dyte-ai-chat",defaults:r}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};DI.style=Y$;var Z$=Object.freeze({__proto__:null,dyte_ai:DI});const X$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}",OI=class{constructor(t){V(this,t),this.t=W()}render(){return d(z,null,d("p",{class:"private-message"},this.t("ai.chat.tooltip")),d("div",{class:"hint-message"},d("p",null,this.t("ask")," ",d("i",null,'"',this.t("ai.chat.summerise"),'"'),d("br",null)," or ",d("br",null),this.t("type")," ",d("i",null,'"',this.t("ai.chat.agenda"),'"'))))}};OI.style=X$;var ez=Object.freeze({__proto__:null,dyte_ai_chat:OI});const LI=(t,e)=>{const i=e.getTime()-t.getTime();return Math.round(Math.abs(i/1e3/60))},NI=(t,e)=>{const i=LI(t,e);if(i<2)return"just now";if(i<60)return`${i}m ago`;const r=Math.round(i/60);if(i<90)return`about ${r}h ago`;if(r<24)return`${r}h ago`;const s=Math.round(r/24);return s<7?`${s}d ago`:`${Math.round(s/7)}w ago`},UI=t=>t.toDateString()+" "+t.toLocaleTimeString(),ls=(t,e=20)=>t==null?"":t.length>e?`${t.substring(0,e)}...`:t,jI=t=>{const e=/^\d+$/;return/^\p{Emoji}+$/u.test(t)&&!e.test(t)},cg=t=>t!=null&&t.trim().toLowerCase().startsWith("javascript:")?"https://dyte.io":t,As=t=>(t=t==null?void 0:t.trim(),t===""?"Participant":t);function B_(t,e=2){return t.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,e).map(s=>s.charAt(0)).join("").toUpperCase()}const dg=({name:t,time:e,now:i})=>d("div",{class:"head"},d("div",{class:"name"},ls(As(t),20)),d("div",{class:"time",title:UI(e)},NI(e,i))),jo=(t,e=!0)=>{t!=null&&t.scrollTo({top:t.scrollHeight,behavior:e?"smooth":"auto"})},tz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}`,$I=class{constructor(t){V(this,t),this.handleSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],this.prompt=""},this.handleSummarise=()=>{},this.handleAgenda=()=>{},this.handleMoM=()=>{},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0}connectedCallback(){this.initialMessages&&(this.messages=this.initialMessages.map(t=>Object.assign(Object.assign({},t),{action:this.mapMessageAction(t.action)})))}disconnectedCallback(){}messagesUpdated(){setTimeout(()=>{jo(this.contentContainer,!1)},100)}mapMessageAction(t){switch(t){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return d(z,null,d("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},d("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&d("div",{class:"hint-message"},d("p",null,"Ask ",d("i",null,'"Hey AI, summarise this call"'),d("br",null)," or ",d("br",null),"Type ",d("i",null,`"Hey AI, what is today's agenda?"`))),this.messages.length>0&&d("div",{class:""},this.messages.map(t=>d("div",{class:"message"},d(dg,{name:t.action,time:new Date(t.createdAt),now:new Date}),d("p",{class:"subtitle"},"Triggered by ",t.participantName),t.prompt&&d("div",{class:"prompt-text"},t.prompt),t.loading?d("div",{class:"loader"},d("dyte-spinner",{size:"sm"}),"\xA0\xA0Generating..."):d("div",{class:"body"},t.response))))),d("div",{class:"actions"},d("span",null,"Quick actions:"),d("div",null,d("button",{onClick:this.handleSummarise},"Summarise"),d("button",{onClick:this.handleAgenda},"Agenda"),d("button",{onClick:this.handleMoM},"MoM"))),d("form",{class:"prompt",onSubmit:this.handleSubmit},d("input",{value:this.prompt,onInput:t=>{this.prompt=t.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};$I.style=tz;var iz=Object.freeze({__proto__:null,dyte_ai_home:$I});const rz=":host{display:block}",zI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.aiActive=!1}statesChanged(t){const e=t||G;this.aiActive=e.activeAI}toggleAI(){const t=this.states||G;this.aiActive=!(t!=null&&t.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),G.activeAI=this.aiActive,G.activeMoreMenu=!1}render(){var t,e;const i=this.t("ai.meeting_ai");return((e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.permissions).transcriptionEnabled?d(z,{title:i},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:i,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};zI.style=rz;var sz=Object.freeze({__proto__:null,dyte_ai_toggle:zI});const nz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}`,FI=class{constructor(t){V(this,t),this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=W(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0}transcriptionHandler(t){this.transcriptions=[...this.transcriptions,t]}connectedCallback(){var t,e;this.initialTranscriptions&&(this.transcriptions=[...this.initialTranscriptions]),(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.on("transcript",i=>this.transcriptionHandler(i))}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.off("transcript",i=>this.transcriptionHandler(i))}transcriptionsChanged(){setTimeout(()=>{jo(this.contentContainer,!1)},100)}render(){return d(z,null,d("div",{class:"search-bar"},d("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:t=>this.participantQuery=t.target.value})),this.isProcessing&&d("div",{class:"processing"},d("p",null,"Processing audio....")),!this.isProcessing&&d("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},d("div",{class:"started-message"},"Transcription started"),this.transcriptions.filter(t=>this.participantQuery?t.name.toLowerCase().includes(this.participantQuery.toLowerCase()):!0).map(t=>d("div",{class:"message"},d(dg,{name:t.name,time:new Date(t.date),now:new Date}),d("div",{class:"body"},t.transcript)))),this.captionViewEnabled&&d("dyte-ai-caption",null))}static get watchers(){return{transcriptions:["transcriptionsChanged"]}}};FI.style=nz;var az=Object.freeze({__proto__:null,dyte_ai_transcriptions:FI});const oz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;height:100%;width:100%;box-sizing:border-box}.content{position:relative;display:flex;height:100%;width:100%;flex-direction:column;overflow-y:auto}.waitlist-area{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.listening-title{text-align:center;margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-4, 16px)}.waitlist-grid{flex:1 1 0%}.grid{box-sizing:border-box;flex:1 1 0%;gap:var(--dyte-space-6, 24px);display:flex;align-content:center;justify-content:center;flex-wrap:wrap}:host([size='md']) .grid{gap:var(--dyte-space-4, 16px)}:host([size='sm']) .grid{gap:var(--dyte-space-3, 12px)}dyte-audio-tile{aspect-ratio:1 / 1;flex:none;width:calc(20%);max-width:var(--dyte-space-48, 192px);transition:all 0.3s}dyte-audio-tile[size='md']{width:100%;max-width:var(--dyte-space-36, 144px)}dyte-audio-tile[size='sm']{width:100%;max-width:var(--dyte-space-24, 96px)}`,VI=class{constructor(t){V(this,t),this.onParticipantListUpdate=()=>{if(!this.meeting)return;let e=this.meeting.participants.active.toArray();this.hideSelf||(e=[...e,this.meeting.self]);let i=this.meeting.participants.joined.toArray().filter(r=>!e.some(s=>s.id===r.id));this.activeParticipants=e,this.onStageParticipants=i},this.meeting=void 0,this.config=void 0,this.states=void 0,this.iconPack=H,this.size=void 0,this.t=W(),this.hideSelf=!1,this.activeParticipants=[],this.onStageParticipants=[],this.offStageParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){!t||t.self.config.viewType!=="AUDIO_ROOM"||(this.onParticipantListUpdate(),t.participants.active.addListener("participantJoined",this.onParticipantListUpdate),t.participants.active.addListener("participantLeft",this.onParticipantListUpdate),t.participants.joined.addListener("participantJoined",this.onParticipantListUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantListUpdate))}disconnectedCallback(){this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.meeting.participants.active.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.active.removeListener("participantLeft",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantLeft",this.onParticipantListUpdate)}renderGrid(t=[]){const e={meeting:this.meeting,size:this.size,config:this.config,t:this.t,iconPack:this.iconPack,states:this.states};return t.map(i=>d(Be,{element:"dyte-audio-tile",defaults:e,props:{key:i.id,participant:i},childProps:{participant:i},deepProps:!0}))}render(){const t=this.activeParticipants.concat(this.onStageParticipants);return d(z,null,d("div",{class:"content scrollbar"},d("div",{class:"stage grid"},this.renderGrid(t)),this.offStageParticipants.length>0&&d("div",{class:"waitlist-area"},d("div",{class:"listening-title"},this.offStageParticipants.length," ",this.t("grid.listening")),d("div",{class:"waitlist-grid grid"},this.renderGrid(this.offStageParticipants)))),d("slot",null))}get host(){return Pr(this)}static get watchers(){return{meeting:["meetingChanged"]}}};VI.style=oz;var cz=Object.freeze({__proto__:null,dyte_audio_grid:VI}),dz=Sv;function Sv(){}Sv.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(i,r,s){this.callbacks=this.callbacks||{};var n=arguments.length===3,a=n?arguments[1]:void 0,o=n?arguments[2]:arguments[1];return o._groupName=a,(this.callbacks[i]=this.callbacks[i]||[]).push(o),this},e.once=function(i,r,s){var n=this,a=arguments.length===3,o=a?arguments[1]:void 0,c=a?arguments[2]:arguments[1];function u(){n.off(i,u),c.apply(this,arguments)}return this.on(i,o,u),this},e.releaseGroup=function(i){this.callbacks=this.callbacks||{};var r,s,n,a;for(r in this.callbacks)for(a=this.callbacks[r],s=0,n=a.length;s<n;s++)a[s]._groupName===i&&(a.splice(s,1),s--,n--);return this},e.off=function(i,r){this.callbacks=this.callbacks||{};var s=this.callbacks[i],n;return s?arguments.length===1?(delete this.callbacks[i],this):(n=s.indexOf(r),n!==-1&&(s.splice(n,1),s.length===0&&delete this.callbacks[i]),this):this},e.emit=function(i){this.callbacks=this.callbacks||{};var r=[].slice.call(arguments,1),s=this.callbacks[i],n=this.getWildcardCallbacks(i),a,o,c;if(s)for(c=s.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,r);if(n)for(o=n.length,c=n.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,[i].concat(r));return this},e.getWildcardCallbacks=function(i){this.callbacks=this.callbacks||{};var r,s,n=[];for(r in this.callbacks)s=r.split("*"),(r==="*"||s.length===2&&i.slice(0,s[0].length)===s[0])&&(n=n.concat(this.callbacks[r]));return n}};Sv.mixin(Sv);function lz(t,e){var i=-1/0;t.getFloatFrequencyData(e);for(var r=4,s=e.length;r<s;r++)e[r]>i&&e[r]<0&&(i=e[r]);return i}var fw;typeof window<"u"&&(fw=window.AudioContext||window.webkitAudioContext);var Vs=null,BI=function(t,r){var i=new dz;if(!fw)return i;var r=r||{},s=r.smoothing||.1,n=r.interval||50,a=r.threshold,o=r.play,c=r.history||10,u=!0;Vs=r.audioContext||Vs||new fw;var l,p,m;m=Vs.createAnalyser(),m.fftSize=512,m.smoothingTimeConstant=s,p=new Float32Array(m.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(l=Vs.createMediaElementSource(t),typeof o>"u"&&(o=!0),a=a||-50):(l=Vs.createMediaStreamSource(t),a=a||-50),l.connect(m),o&&m.connect(Vs.destination),i.speaking=!1,i.suspend=function(){return Vs.suspend()},i.resume=function(){return Vs.resume()},Object.defineProperty(i,"state",{get:function(){return Vs.state}}),Vs.onstatechange=function(){i.emit("state_change",Vs.state)},i.setThreshold=function(S){a=S},i.setInterval=function(S){n=S},i.stop=function(){u=!1,i.emit("volume_change",-100,a),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),m.disconnect(),l.disconnect()},i.speakingHistory=[];for(var y=0;y<c;y++)i.speakingHistory.push(0);var b=function(){setTimeout(function(){if(!!u){var S=lz(m,p);i.emit("volume_change",S,a);var E=0;if(S>a&&!i.speaking){for(var k=i.speakingHistory.length-3;k<i.speakingHistory.length;k++)E+=i.speakingHistory[k];E>=2&&(i.speaking=!0,i.emit("speaking"))}else if(S<a&&i.speaking){for(var k=0;k<i.speakingHistory.length;k++)E+=i.speakingHistory[k];E==0&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(S>a)),b()}},n)};return b(),i};const uz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column}.avatar-ctr{box-sizing:border-box;width:100%;flex:1 1 0%;padding:var(--dyte-space-1\\.5, 6px);border:2px solid transparent;border-radius:calc(var(--dyte-border-radius-xl, 40px) + var(--dyte-space-1\\.5, 6px))}.avatar-ctr.speaking{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.bar-0{box-shadow:none}.bar-1{box-shadow:0 0 4px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-2{box-shadow:0 0 8px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-3{box-shadow:0 0 16px 1px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-4{box-shadow:0 0 20px 3px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-5{box-shadow:0 0 24px 6px rgb(var(--dyte-colors-brand-500, 33 96 253))}dyte-avatar{aspect-ratio:1 / 1;height:100%;width:100%;position:relative;border-radius:var(--dyte-border-radius-xl, 40px)}dyte-name-tag{display:block;height:var(--dyte-space-10, 40px);width:100%;text-align:center;line-height:2.5rem}:host([size='sm']) .avatar-ctr{border-radius:calc(var(--dyte-border-radius-lg, 12px) + var(--dyte-space-1\\.5, 6px))}:host([size='sm']) dyte-name-tag{height:var(--dyte-space-7, 28px);line-height:1.75rem}:host([size='sm']) dyte-avatar{border-radius:var(--dyte-border-radius-lg, 12px)}.mic-icon{position:absolute;bottom:calc(var(--dyte-space-1, 4px) * -1);right:calc(var(--dyte-space-1, 4px) * -1);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.mic-icon dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) .mic-icon dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='md']) .mic-icon dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}",HI=class{constructor(t){V(this,t),this.onAudioUpdate=({audioEnabled:e,audioTrack:i})=>{if(!!this.participant)if(e&&i){const r=new MediaStream;r.addTrack(i),this.calcVolume(r),this.audioEnabled=!0}else this.volume=0,this.audioEnabled=!1},this.meeting=void 0,this.config=void 0,this.size=void 0,this.states=void 0,this.iconPack=H,this.t=W(),this.participant=void 0,this.audioEnabled=!1,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}disconnectedCallback(){var t,e;(t=this.hark)===null||t===void 0||t.stop(),(e=this.participant)===null||e===void 0||e.removeListener("audioUpdate",this.onAudioUpdate)}participantChanged(t){!t||(this.audioEnabled=t.audioEnabled,t.addListener("audioUpdate",this.onAudioUpdate))}calcVolume(t){this.hark=BI(t,{play:!1,interval:1e3/10}),this.hark.on("volume_change",e=>{const i=this.volume;let r=Math.round(10**(e/115)*10);r<3&&(r=0);let s=Math.round((i*2+r)/3);i!==s&&(this.volume=s)})}render(){const t={meeting:this.meeting,size:this.size,config:this.config,states:this.states,iconPack:this.iconPack,t:this.t};let e="bar-0";return this.volume>5?e="bar-5":this.volume<0?e="bar-0":e="bar-"+this.volume,d(z,null,d("div",{class:{"avatar-ctr":!0,speaking:this.audioEnabled,[e]:!0}},d("dyte-avatar",{participant:this.participant,size:this.size},!this.audioEnabled&&d("div",{class:"mic-icon"},d("dyte-icon",{icon:H.mic_off})))),d("dyte-name-tag",Object.assign({variant:"text",participant:this.participant},t)),d("slot",null))}static get watchers(){return{participant:["participantChanged"]}}};HI.style=uz;var hz=Object.freeze({__proto__:null,dyte_audio_tile:HI}),es=function(t,e,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i},fe=function(t,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(t):r?r.value:e.get(t)},pz=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]]);return i},Xr,to,sn,nn,Vc,ns,ko,an,op,cp,WI,xv,GI,qI,nl;class gz{constructor(){Xr.add(this),to.set(this,!1),sn.set(this,void 0),nn.set(this,void 0),Vc.set(this,void 0),ns.set(this,void 0),ko.set(this,void 0),an.set(this,void 0),op.set(this,void 0),cp.set(this,void 0)}get hasLocalChanges(){return fe(this,to,"f")}get currentState(){let e,i=[];return Array.from(fe(this,ns,"f").keys()).forEach(r=>{const s=fe(this,an,"f").get(r);s.isParent?e=Object.assign(Object.assign({},s),{participants:fe(this,Xr,"m",nl).call(this,r)}):i.push(Object.assign(Object.assign({},s),{participants:fe(this,Xr,"m",nl).call(this,r)}))}),{parentMeeting:e,meetings:i}}get allConnectedMeetings(){return this.currentState.meetings.sort((e,i)=>e.title.localeCompare(i.title))}get allParticipants(){return Array.from(fe(this,ko,"f").values())}get unassignedParticipants(){return fe(this,Xr,"m",nl).call(this,fe(this,sn,"f").parentMeeting.id)}getParticipantsForMeeting(e){return fe(this,Xr,"m",nl).call(this,e)}addNewMeeting(){es(this,to,!0,"f");const e=$9(),i=pz(e,["participants"]);return fe(this,Xr,"m",xv).call(this,Object.assign(Object.assign({},i),{isParent:!1})),i}addNewMeetings(e){return Array.from({length:e}).map(()=>this.addNewMeeting())}updateMeetingTitle(e,i){fe(this,an,"f").get(e).title=i,ib(e)||fe(this,op,"f").add(e)}deleteMeeting(e){es(this,to,!0,"f");const i=fe(this,an,"f").get(e),r=fe(this,Xr,"m",nl).call(this,i.id).map(bi);this.assignParticipantsToMeeting(r,fe(this,sn,"f").parentMeeting.id),fe(this,an,"f").delete(i.id),fe(this,ns,"f").delete(i.id),ib(i.id)||fe(this,cp,"f").add(i.id)}assignParticipantsToMeeting(e,i){return es(this,to,!0,"f"),e.forEach(r=>{const s=fe(this,nn,"f").get(r);fe(this,ns,"f").get(s).delete(r),fe(this,ns,"f").get(i).add(r),fe(this,nn,"f").set(r,i)}),this.currentState}assignParticipantsRandomly(){const e=z9(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach((i,r)=>{const s=e[r];s&&s.length!==0&&this.assignParticipantsToMeeting(s.map(n=>n.customParticipantId),i.id)}),this.currentState}unassignParticipants(e){const i=fe(this,sn,"f").parentMeeting.id;return this.assignParticipantsToMeeting(e,i)}unassignAllParticipants(){const e=fe(this,sn,"f").parentMeeting.id,i=this.allParticipants.map(bi);return this.assignParticipantsToMeeting(i,e)}updateCurrentState(e){fe(this,to,"f")||fe(this,Xr,"m",WI).call(this,e),[e.parentMeeting,...e.meetings].forEach((i,r)=>{const s=Object.assign(Object.assign({},i),{isParent:r===0});fe(this,Xr,"m",xv).call(this,s),i.participants.forEach(n=>{fe(this,Xr,"m",GI).call(this,n,s)})})}get meetingsToCreate(){return this.allConnectedMeetings.filter(e=>ib(e.id)).map(({id:e,title:i})=>({id:e,title:i}))}get meetingsToUpdate(){return this.allConnectedMeetings.filter(e=>fe(this,op,"f").has(e.id)).map(({id:e,title:i})=>({id:e,title:i}))}get meetingsToDelete(){return Array.from(fe(this,cp,"f"))}get participantsToMove(){const e=new Map;return Array.from(fe(this,nn,"f").keys()).forEach(i=>{const r=fe(this,Vc,"f").get(i),s=fe(this,nn,"f").get(i);if(r===s)return;const n=`${r}__${s}`;e.has(n)||e.set(n,[]);const a=fe(this,ko,"f").get(i);e.get(n).push(a.id)}),Array.from(e.keys()).map(i=>{const[r,s]=i.split("__");return{sourceMeetingId:r,destinationMeetingId:s,participantIds:e.get(i)}})}async applyChanges(e){const i=this.meetingsToCreate.length!==0?e.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),r=this.meetingsToUpdate.length!==0?e.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[s]=await Promise.all([i,r]);s&&s.forEach(n=>{this.meetingsToCreate.forEach(a=>{a.title===n.title&&fe(this,Xr,"m",qI).call(this,fe(this,an,"f").get(a.id),n.id)})}),this.participantsToMove.length!==0&&this.participantsToMove.forEach(({sourceMeetingId:n,destinationMeetingId:a,participantIds:o})=>{e.connectedMeetings.moveParticipants(n,a,o)}),this.meetingsToDelete.length!==0&&e.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return es(this,to,!1,"f"),this.updateCurrentState(fe(this,sn,"f")),this.currentState}}to=new WeakMap,sn=new WeakMap,nn=new WeakMap,Vc=new WeakMap,ns=new WeakMap,ko=new WeakMap,an=new WeakMap,op=new WeakMap,cp=new WeakMap,Xr=new WeakSet,WI=function(e){es(this,sn,e,"f"),es(this,an,new Map,"f"),es(this,ko,new Map,"f"),es(this,op,new Set,"f"),es(this,cp,new Set,"f"),es(this,ns,new Map,"f"),es(this,nn,new Map,"f"),es(this,Vc,new Map,"f"),es(this,Vc,new Map,"f"),fe(this,sn,"f").parentMeeting.participants.forEach(i=>{fe(this,Vc,"f").set(bi(i),fe(this,sn,"f").parentMeeting.id)}),fe(this,sn,"f").meetings.forEach(i=>{i.participants.forEach(r=>{fe(this,Vc,"f").set(bi(r),i.id)})})},xv=function(e){fe(this,an,"f").has(e.id)||(fe(this,an,"f").set(e.id,e),fe(this,ns,"f").set(e.id,new Set))},GI=function(e,i){fe(this,ko,"f").has(bi(e))||(fe(this,ko,"f").set(bi(e),e),fe(this,nn,"f").set(bi(e),i.id),fe(this,ns,"f").get(i.id).add(bi(e)))},qI=function(e,i){const r=e.id;fe(this,Xr,"m",xv).call(this,Object.assign(Object.assign({},e),{id:i})),fe(this,an,"f").delete(r);const s=fe(this,ns,"f").get(r);fe(this,ns,"f").set(i,s),fe(this,ns,"f").delete(r),Array.from(fe(this,nn,"f").keys()).forEach(n=>{fe(this,nn,"f").get(n)===r&&fe(this,nn,"f").set(n,i)})},nl=function(e){return Array.from(fe(this,ns,"f").get(e)).map(r=>fe(this,ko,"f").get(r))};const mz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",ih=1,JI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.updateLocalState=e=>{this.stateManager.updateCurrentState(e),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),this.roomConfig.mode==="create"&&!this.meeting.connectedMeetings.isActive&&j9(),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:e.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=e=>{const{detail:i}=e;this.stateManager.updateMeetingTitle(i.id,i.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=e=>{this.stateManager.allConnectedMeetings.find(r=>r.id===e)&&(this.stateManager.deleteMeeting(e),this.draftState=this.stateManager.currentState)},this.unassignParticipant=e=>{this.stateManager.unassignParticipants([e]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=e=>{this.selectedParticipants.length===0||this.assigningParticipants==!1||(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,e),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(e,i)=>{e.emit({activeBreakoutRoomsManager:{active:!0}}),i.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(e="start-breakout")=>{let i={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};e==="close-breakout"&&(i={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:i}),G.activeBreakoutRoomsManager={active:!1},G.activeConfirmationModal=i},this.close=()=>{var e;this.stateManager.discardChanges(),(e=this.stateUpdate)===null||e===void 0||e.emit({activeBreakoutRoomsManager:{active:!1}}),G.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=H,this.t=W()}onSelectedParticipantsChanged(t){t.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissions=this.meeting.self.permissions.connectedMeetings,this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.stateManager=new gz,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(t){this.ephemeralStatusText=t,setTimeout(()=>{this.ephemeralStatusText=""},3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(t){const{detail:e}=t,i=bi(e);i!=null&&this.unassignParticipant(i)}toggleDragMode(t){this.isDragMode=t.detail}assignParticipantsRandomly(){this.stateManager.unassignedParticipants.length!==0&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(t){const e=bi(this.meeting.self);this.stateManager.assignParticipantsToMeeting([e],t),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach(t=>this.stateManager.deleteMeeting(t.id)),await this.applyChanges()}updateSelectedParticipants(t){this.selectedParticipants=t.detail}updateAllParticipants(t){this.selectedParticipants=t.detail}getStatusText(){if(this.ephemeralStatusText!=="")return this.ephemeralStatusText;let t="";return this.roomConfig.mode==="create"&&(t=this.t("breakout_rooms.status.assign_multiple"),this.selectedParticipants.length!==0&&(t=this.t("breakout_rooms.status.select_room"))),t}getApproxDistribution(){const t=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||ih);return Math.max(ih,Math.round(t))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return this.permissions.canAlterConnectedMeetings===!1}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter(t=>t.id===this.meeting.meta.roomName)}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?d("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return d(z,null,d("div",{class:"room-switcher-container"},d("header",null,d("dyte-icon",{icon:this.iconPack.breakout_rooms}),d("span",null,this.t("breakout_rooms.join_breakout_header"))),d("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map((t,e)=>d("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:e===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:!1})))))}renderLoading(){return d(z,null,d("div",{class:"loading-content"},d("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return d(z,null,d("div",{class:"room-config"},d("header",null,d("dyte-icon",{icon:this.iconPack.breakout_rooms}),d("span",null,this.t("breakout_rooms.room_config_header"))),d("div",{class:"create-room"},d("p",null,this.t("breakout_rooms.num_of_rooms")),d("dyte-counter",{value:this.roomConfig.rooms,minValue:ih,iconPack:this.iconPack,t:this.t,onValueChange:t=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+t.detail,ih)})}})),d("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",d("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),d("footer",null,d("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:this.roomConfig.rooms===0,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():this.roomConfig.step==="room-config"?this.renderRoomConfig():d(z,null,d("div",{class:"participant-config-wrapper"},d("div",{class:"participant-config"},d("aside",{part:"menu"},d("header",null,this.t("breakout_rooms.assign_participants")),d("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map(bi),selectedParticipantIds:this.selectedParticipants},d("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},d("dyte-button",{disabled:this.roomConfig.mode==="edit"||this.stateManager.unassignedParticipants.length===0,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},d("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),this.selectedParticipants.length!==0&&d("div",{class:"participants-assign-actions"},d("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),d("dyte-button",{disabled:this.roomConfig.mode==="edit",iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),d("div",{class:"assign-rooms"},d("div",{class:"row"},d("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&d("div",{class:"cta-buttons"},d("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},d("div",{onClick:this.onAddNewRoom},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),this.stateManager.allConnectedMeetings.flatMap(t=>t.participants).length!==0&&d("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),d("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map((t,e)=>d("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:e===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>ih})),d("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},d("div",null,d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),d("span",null,this.t("breakout_rooms.add_room_brief"))))))),d("div",{class:"participant-config-actions"},d("div",{class:{"status-bar":!0,"ephemeral-status":this.ephemeralStatusText!==""}},this.ephemeralStatusText!==""&&d("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),d("div",{class:"breakout-actions"},this.roomConfig.mode==="create"&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),this.roomConfig.mode==="edit"&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};JI.style=mz;var fz=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:JI});const vz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",KI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.breakoutRoomToggle=()=>{var e,i,r;const s=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(!((i=(e=this.states)===null||e===void 0?void 0:e.activeBreakoutRoomsManager)===null||i===void 0)&&i.active),mode:s}}),G.activeBreakoutRoomsManager={active:!(!((r=G.activeBreakoutRoomsManager)===null||r===void 0)&&r.active),mode:s}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W()}render(){if(!!tI(this.meeting))return d(z,{title:this.t("breakout_rooms")},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}};KI.style=vz;var yz=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:KI});const bz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}",QI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=H,this.t=W(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var t;(t=this.stateUpdate)===null||t===void 0||t.emit({activeBroadcastMessageModal:!1}),G.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout(()=>{this.close()},2e3)}render(){return d(z,null,d("div",{class:"content-col"},d("h2",null,"Broadcast message to"),d("select",{onChange:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:t.target.value})}},d("option",null,"Everyone"),d("option",null,"List of rooms")),d("textarea",{placeholder:"Type message here...",onInput:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:t.target.value})}}),this.successMessage?d("p",null,"Message sent to ",this.messagePayload.to,d("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):d("div",{class:"content-row"},d("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel"),"\u2002",d("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};QI.style=bz;var wz=Object.freeze({__proto__:null,dyte_broadcast_message_modal:QI});const kz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",YI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:e})=>{this.videoEnabled=e},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{e==="video"&&(this.cameraPermission=i)},this.toggleCamera=()=>{var e,i,r,s,n,a,o,c,u,l,p;if((e=this.meeting)===null||e===void 0||e.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.videoEnabled),permission:this.cameraPermission,canProduce:(a=(n=(s=this.meeting)===null||s===void 0?void 0:s.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo}},webinar:{stageStatus:(o=this.meeting)===null||o===void 0?void 0:o.stage.status},livestream:{stageStatus:(u=(c=this.meeting)===null||c===void 0?void 0:c.stage)===null||u===void 0?void 0:u.status},moduleExists:{self:Boolean((l=this.meeting)===null||l===void 0?void 0:l.self)}}),this.hasPermissionError()){const y={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:y}),G.activePermissionsMessage=y,!1}const m=(p=this.meeting)===null||p===void 0?void 0:p.self;m==null||!this.canProduceVideo||(m.videoEnabled?m.disableVideo():m.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r;(t=this.meeting)===null||t===void 0||t.self.removeListener("videoUpdate",this.videoUpdateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.cameraPermission=e.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=e.videoEnabled,e.addListener("videoUpdate",this.videoUpdateListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),i==null||i.addListener("stageStatusUpdate",this.stageStatusListener)}}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceVideo==="ALLOWED",n=i.viewType==="WEBINAR"||t.self.permissions.stageEnabled,a=i.viewType==="LIVESTREAM";this.canProduceVideo=!1,s&&!a&&!n?this.canProduceVideo=!0:(n||a)&&(s&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceVideo=!0),e.permissions.canProduceVideo==="CAN_REQUEST"&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canProduceVideo=!0))}hasPermissionError(){return this.cameraPermission==="DENIED"||this.cameraPermission==="SYSTEM_DENIED"}getState(){let t="",e="",i="",r={},s=this.hasPermissionError(),n=this.cameraPermission==="COULD_NOT_START";return this.videoEnabled&&!s?(e=this.t("video_on"),i=this.iconPack.video_on):(e=this.t("video_off"),i=this.iconPack.video_off,r["red-icon"]=!0),n?t=this.t("perm_could_not_start.video"):this.cameraPermission==="SYSTEM_DENIED"?t=this.t("perm_sys_denied.video"):this.cameraPermission==="DENIED"?t=this.t("perm_denied.video"):t=this.videoEnabled?this.t("disable_video"):this.t("enable_video"),{tooltipLabel:t,label:e,icon:i,classList:r,showWarning:s||n,disable:s}}render(){var t;if(!this.canProduceVideo||((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM")return null;const{tooltipLabel:e,label:i,icon:r,classList:s,showWarning:n,disable:a}=this.getState();return d(z,{title:i},d("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:s,variant:this.variant,label:i,icon:r,onClick:this.toggleCamera,showWarning:n,disabled:a})))}static get watchers(){return{meeting:["meetingChanged"]}}};YI.style=kz;var _z=Object.freeze({__proto__:null,dyte_camera_toggle:YI});const Sz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}.channel-name-input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-3, 12px);font-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px}.channel-name-input:focus{outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}footer{margin-top:var(--dyte-space-5, 20px);display:flex;justify-content:flex-end}.member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px)}.member dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.input-container{position:relative;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px;outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5);border-radius:var(--dyte-border-radius-sm, 4px)}.input-container .members{margin:var(--dyte-space-0, 0px);max-height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);list-style-type:none;display:flex;flex-wrap:wrap;gap:var(--dyte-space-1, 4px);cursor:text;font-size:16px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));overflow-y:auto;min-height:var(--dyte-space-7, 28px)}.input-container .pill{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.input-container .pill dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.input-container .pill span{max-width:var(--dyte-space-32, 128px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-container .pill dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.input-container input{width:var(--dyte-space-24, 96px);border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-1, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;font-size:16px;line-height:1.25rem}.input-container input.wide-input{width:100%}.search-results{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);width:100%;padding:var(--dyte-space-0, 0px);position:absolute;list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.search-results .member{cursor:pointer}.search-results .member dyte-avatar{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.search-results .member:hover,.search-results .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}`,ZI=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.switchChannel=re(this,"switchChannel",7),this.allMembers=new Map,this.inputTextRef=null,this.searchInputTextRef=null,this.focusOnSearch=(e=!1)=>{this.focusedMemberIndex=-1,Mi(()=>{var i,r;(i=this.searchInputTextRef)===null||i===void 0||i.focus(),e&&((r=this.searchInputTextRef)===null||r===void 0||r.select())})},this.onClickHandler=async()=>{if(this.channelName.length!==0){if(this.step===1){const e=this.meeting.participants.all.toArray(),i=this.meeting.self.userId;e.filter(s=>s.userId!==i).forEach(s=>this.allMembers.set(s.userId,s)),this.step=2,this.focusOnSearch();return}await this.createChannel()}},this.createChannel=async()=>{const e=Array.from(this.selectedMemberIds),i=await this.meeting.chat.createChannel(this.channelName,e,{displayPictureUrl:"",visibility:"public",isDirectMessage:!1});this.switchChannel.emit(i.id),this.stateUpdate.emit({activeChannelCreator:!1}),G.activeChannelCreator=!1},this.onMemberAdd=e=>{this.showAllMembersList=!1,this.selectedMemberIds.add(e),this.searchQuery="",this.focusOnSearch()},this.keyDownHandler=(e,i)=>{if(e.key==="ArrowDown")this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,i.length-1);else if(e.key==="ArrowUp"){if(this.focusedMemberIndex===-1)return;if(this.focusedMemberIndex===0){this.focusOnSearch(!0);return}this.focusedMemberIndex=Math.max(this.focusedMemberIndex-1,0)}else if(e.key==="Enter")this.onMemberAdd(i[this.focusedMemberIndex].userId);else if(e.key==="Backspace"){if(this.searchQuery.length!==0||this.selectedMemberIds.size===0)return;const r=Array.from(this.selectedMemberIds.values()).at(-1);this.selectedMemberIds.delete(r),pv(this.$el)}},this.renderMemberSelector=()=>{const e=Array.from(this.allMembers.values()).filter(s=>!this.selectedMemberIds.has(s.userId)&&s.name.toLowerCase().includes(this.searchQuery.toLowerCase())),i=Array.from(this.selectedMemberIds.values()).map(s=>this.allMembers.get(s)),r=this.selectedMemberIds.size===this.allMembers.size;return d("div",{class:"input-container"},d("ul",{class:"members scrollbar",onClick:()=>{var s;(s=this.searchInputTextRef)===null||s===void 0||s.focus()}},i.map(s=>d("li",{class:"pill"},d("dyte-avatar",{participant:{name:s.name,picture:s.picture},size:"sm"}),d("span",null,s.name),d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.selectedMemberIds.delete(s.userId),pv(this.$el),this.focusOnSearch()}}))),!r&&d("input",{type:"text",ref:s=>this.searchInputTextRef=s,value:this.searchQuery,placeholder:this.selectedMemberIds.size===0?this.t("chat.member_name"):"",class:{"wide-input":this.selectedMemberIds.size===0},onInput:s=>{this.searchQuery=s.target.value.trim()},onClick:()=>{this.showAllMembersList=!this.showAllMembersList},onKeyDown:s=>this.keyDownHandler(s,e)})),(this.searchQuery.length!==0||this.showAllMembersList)&&d("ul",{class:"search-results"},e.map((s,n)=>d("li",{class:{member:!0,selected:n===this.focusedMemberIndex},onClick:()=>this.onMemberAdd(s.userId),ref:a=>{n===this.focusedMemberIndex&&Mi(()=>{a&&a.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}},d("dyte-avatar",{participant:{name:s.name,picture:s.picture},size:"sm"}),d("span",null,s.name))),e.length===0&&d("li",{class:"member"},d("span",null,this.t("chat.error.empty_results")))))},this.meeting=void 0,this.t=W(),this.iconPack=H,this.channelName="",this.searchQuery="",this.step=1,this.loading=!1,this.selectedMemberIds=new Set,this.focusedMemberIndex=-1,this.showAllMembersList=!1}componentDidLoad(){var t;(t=this.inputTextRef)===null||t===void 0||t.focus()}render(){return d(z,null,d("header",null,this.step===1?this.t("chat.new_channel"):this.t("chat.add_members")),this.step===1&&d("input",{class:"channel-name-input",type:"text",placeholder:this.t("chat.channel_name"),ref:t=>this.inputTextRef=t,onInput:t=>{this.channelName=t.target.value.trim()}}),this.step===2&&this.renderMemberSelector(),d("footer",null,d("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",disabled:this.channelName.length===0,onClick:this.onClickHandler},this.step===1?this.t("chat.add_members"):this.t("create"))))}get $el(){return Pr(this)}};ZI.style=Sz;var xz=Object.freeze({__proto__:null,dyte_channel_creator:ZI});const XI=t=>{let e=null;try{const i=JSON.parse(t.message),{target:r,message:s}=i;r===void 0||s===void 0?e=t:e=Object.assign(Object.assign({},t),{targetUserIds:r,message:s})}catch{e=t}return e};function vw(t,e){return t.localeCompare(e)}function Dh(t){return t.sort((e,i)=>e.localeCompare(i)).join("_")}function eA(t,e){if(t==null)return!0;for(const i of t)if(i.kind==="file"){const r=i.getAsFile();i.type.startsWith("image/")?e("image",r):e("file",r)}}const cm="dm__";function DE(t){return t.isDirectMessage}function OE(t){return[...new Set(t)].sort(vw).join("<>")}function rh(t){return t.split("").reverse().join("")}const LE=/^\*([^*\s]+)\*/,NE=/^_([^_\s]+)_/,UE=/^~([^~\s]+)~/,jE=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.,~#?&//=]*)/,H_=/<blockquote>[.\s\S]*<\/blockquote>\n\n/m;function W_(t,e=!1){if(!H_.test(t))return"";let i=0,r=13;return e&&(i=12,r=0),t.substring(t.indexOf("<blockquote>")+i,t.indexOf("</blockquote>")+r)}function wy(t){return t.replace(H_,"")}const ky=2e3,Ez=["<a>","<b>","<i>","<q>","<s>"];function Ev(t){t=t.split(" ").map(i=>{if(jE.test(i)){const r=jE.exec(i);i=i.replace(r[0],`<a>${r[0]}</a>`)}else{if(LE.test(i)){const r=LE.exec(i);i=i.replace(r[0],`<b>${r[1]}</b>`)}if(NE.test(i)){const r=NE.exec(i);i=i.replace(r[0],`<i>${r[1]}</i>`)}if(UE.test(i)){const r=UE.exec(i);i=i.replace(r[0],`<s>${r[1]}</s>`)}}return i}).join(" "),t=t.split(" ").map((i,r)=>i===">"&&(r===0||i[r-1]===">")?"<q></q>":i).join(" ");const[e]=tA(t);return e}function tA(t,e=""){const i=[];if(t.length===0)return[i,0];let r=0;for(;r<t.length;){if(e.length&&e===t.substring(r,r+e.length))return[i,r+e.length];if(Ez.includes(t.substring(r,r+3))){const[s,n]=tA(t.substring(r+3),`</${t[r+1]}>`);i.push({type:t[r+1],content:s.length===1&&s[0].type==="plain_text"?s[0].content:s}),r+=n+3}else{let s=i[i.length-1];(!s||s.type!=="plain_text")&&(i.push({type:"plain_text",content:""}),s=i[i.length-1]),s.content+=t[r],r++}}return[i,r]}const Tz=t=>d("a",{class:"link",href:t,target:"_blank",rel:"noopener noreferrer"},t),Cz=t=>typeof t=="string"?d("b",null,t):d("b",null,au(t)),Pz=t=>typeof t=="string"?d("i",null,t):d("i",null,au(t)),Rz=t=>typeof t=="string"?d("s",null,t):d("b",null,au(t)),Iz=t=>typeof t=="string"?t:d("p",null,au(t)),au=t=>t.map(e=>{switch(e.type){case"a":if(typeof e.content=="string")return Tz(e.content);case"b":return Cz(e.content);case"i":return Pz(e.content);case"s":return Rz(e.content);case"q":return d("span",{class:"block-quote"});case"plain_text":default:return Iz(e.content)}}),_y=({message:t})=>{const e=t.slice(0,ky),i=W_(e,!0),r=wy(e);return d("p",null,i.length!==0&&d("blockquote",null,i.split(`
`).map(s=>{const n=Ev(s);return d("p",null,au(n))})),r.split(`
`).map(s=>{const n=Ev(s);return d("p",null,au(n))}))},Az=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex}.container{display:flex;height:100%;width:var(--dyte-space-96, 384px);flex-direction:column;position:absolute;--tw-translate-x:calc(var(--dyte-space-96, 384px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-sm, 1px);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}@keyframes fade{0%{opacity:0}100%{opacity:1}}.overlay-container{width:100vw;--tw-translate-x:var(--dyte-space-96, 384px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;animation:fade 0.8s}.overlay-container .sidebar-btn{position:static;padding:var(--dyte-space-4, 16px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.sidebar-btn{position:absolute;right:calc(var(--dyte-space-9, 36px) * -1);top:var(--dyte-space-4, 16px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-7, 28px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: landscape) and (min-width: 400px){.container{position:static;--tw-translate-x:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar-btn,.overlay-container{display:none}}.search-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px);width:100%}.search .search-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));border-top-right-radius:var(--dyte-border-radius-sm, 4px);border-bottom-right-radius:var(--dyte-border-radius-sm, 4px)}.search input{box-sizing:border-box;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;font-size:14px;line-height:1.25rem}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input{border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px)}.channel-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);overflow-y:scroll}.channel-container .channel{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}.channel-container .channel:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .channel:hover .latest-msg-time,.channel-container .channel:hover .latest-msg,.channel-container .channel:hover .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .channel-display{display:flex;gap:var(--dyte-space-2, 8px);align-self:center;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-0, 0px)}.channel-container .channel-display dyte-avatar{height:var(--dyte-space-9, 36px);width:var(--dyte-space-9, 36px);flex-shrink:0;font-size:12px}.channel-container .channel-display dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-shrink:0;padding:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.channel-container .channel-card{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-1, 4px)}.channel-container .channel-card .channel-name{max-width:var(--dyte-space-60, 240px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:500}.channel-container .channel-card .latest-msg{margin:var(--dyte-space-0, 0px);max-width:var(--dyte-space-56, 224px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px}.channel-container .channel-card .latest-msg.new{font-weight:200;font-style:italic;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.channel-container .channel-card .latest-msg-time{font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.channel-container .channel-meta{width:var(--dyte-space-12, 48px);display:flex;flex-direction:column;align-items:flex-end;justify-content:space-between;gap:var(--dyte-space-1\\.5, 6px);font-size:12px;font-weight:600}.channel-container .new-msgs-count{height:var(--dyte-space-4, 16px);min-width:var(--dyte-space-4, 16px);padding-top:1px;padding-bottom:1px;padding-left:2px;padding-right:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-sm, 4px);text-align:center;font-size:12px}.channel-container .selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .selected .latest-msg-time,.channel-container .selected .latest-msg,.channel-container .selected .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .highlight .channel-title span{font-weight:700}.latest-msg p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.latest-msg blockquote{display:none}.recent-message-row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:row;justify-content:space-between}`,iA=class{constructor(t){V(this,t),this.channelChanged=re(this,"channelChanged",7),this.handleResize=e=>{this.isHidden=!e.matches},this.channelSelected=e=>{this.channelChanged.emit(e),this.onRevealClicked()},this.onSearchInput=e=>{this.searchQuery=e.target.value},this.onRevealClicked=()=>{this.matchMedia.matches||(this.isHidden=!this.isHidden)},this.renderChannelDisplayPic=e=>{const i=e.displayPictureUrl&&e.displayPictureUrl.length!==0;return e.isDirectMessage||i?d("div",{class:"channel-display"},d("dyte-avatar",{participant:{name:e.displayName,picture:e.displayPictureUrl}})):d("div",{class:"channel-display"},d("dyte-icon",{icon:this.iconPack.people,slot:"start"}))},this.renderRecentMessage=e=>{if(!e.latestMessage)return d("p",{class:"latest-msg new"},this.t("chat.start_conversation"));let i=e.isDirectMessage?"":`${e.latestMessage.displayName}: `;if(e.latestMessage.type==="text")return d("p",{class:"latest-msg"},i,d(_y,{message:e.latestMessage.message}));let r="";return e.latestMessage.type==="image"?r=this.t("image"):e.latestMessage.type==="file"&&(r=this.t("file")),d("p",{class:"latest-msg"},`${i}${r}`)},this.channels=void 0,this.selectedChannelId=void 0,this.iconPack=H,this.t=W(),this.showRecentMessage=!1,this.isHidden=!1,this.searchQuery=""}connectedCallback(){this.matchMedia=window.matchMedia("(orientation: landscape) and (min-width: 400px)"),this.matchMedia.addEventListener("change",this.handleResize),this.isHidden=!this.matchMedia.matches}disconnectedCallback(){this.matchMedia.removeEventListener("change",this.handleResize)}componentDidRender(){this.$el.style.transform=this.isHidden?"translateX(-380px)":"translateX(0)"}getTimeLabel(t){const e=t.time,i=new Date,r=new Date(i);r.setDate(i.getDate()-1);const s=new Date(i);if(s.setDate(i.getDate()-i.getDay()-1),e.toDateString()===i.toDateString())return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.toDateString()===r.toDateString())return this.t("date.yesteday");if(e>s){const n=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(n[e.getDay()])}else return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(e)}render(){return d(z,null,d("div",{class:"container",ref:t=>this.$el=t},this.isHidden&&d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},d("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),d("slot",{name:"header"}),d("div",{class:"search-wrapper"},d("div",{class:"search"},d("input",{type:"search",autocomplete:"off",placeholder:this.t("chat.search_conversations"),onInput:this.onSearchInput}),d("dyte-icon",{icon:this.iconPack.search,iconPack:this.iconPack,t:this.t,class:"search-icon"}))),d("div",{class:"channel-container scrollbar",role:"list"},this.channels.filter(t=>this.searchQuery===""||t.displayName.includes(this.searchQuery)).map(t=>d("div",{class:{channel:!0,selected:t.id===this.selectedChannelId,highlight:!!t.unreadCount},role:"listitem",onClick:()=>{this.channelSelected(t.id)}},this.renderChannelDisplayPic(t),d("div",{class:"channel-card","is-direct-message":t.isDirectMessage},d("div",{class:"recent-message-row"},d("span",{class:"channel-name"},t.displayName),t.latestMessage&&d("span",{class:"latest-msg-time"},this.getTimeLabel(t.latestMessage))),d("div",{class:"recent-message-row"},this.renderRecentMessage(t),t.unreadCount>0&&t.id!==this.selectedChannelId?d("span",{class:"new-msgs-count"},t.unreadCount<99?t.unreadCount:"99+"):null)))))),!this.isHidden&&d("div",{class:"overlay-container"},d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},d("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))))}};iA.style=Az;var Mz=Object.freeze({__proto__:null,dyte_channel_selector_ui:iA});const Dz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;position:relative;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;animation:0.2s slide-up ease-in}dyte-chat-messages-ui,dyte-chat-messages-ui-paginated{flex:1 0 0}dyte-chat-composer-view{margin:var(--dyte-space-2, 8px)}.chat-container{display:flex;height:100%;width:100%;flex-direction:row}.chat{display:flex;flex:1 1 0%;flex-direction:column}.banner{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.banner .welcome-new-channel{width:var(--dyte-space-48, 192px)}.banner .create-channel-illustration{height:var(--dyte-space-40, 160px);width:var(--dyte-space-40, 160px)}.channel-selector-header{box-sizing:border-box;height:var(--dyte-space-16, 64px);padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.channel-selector-header .channel-create-btn{width:var(--dyte-space-8, 32px);justify-content:center}.channel-selector-header .channel-create-btn:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.view-chats-btn{margin-top:var(--dyte-space-4, 16px)}.selector-container{z-index:50;width:100%;max-width:var(--dyte-space-80, 320px);border-right:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.selector-container.hide{display:none}.mobile-close-btn{display:none}.selector-container.mobile{height:100%;width:100%;max-width:100%;position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);display:flex}.selector-container.mobile dyte-channel-selector-view{max-width:var(--dyte-space-96, 384px);animation:0.3s swipe-in}.selector-container.mobile .mobile-close-btn{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);margin-left:var(--dyte-space-6, 24px);margin-right:var(--dyte-space-6, 24px);display:block}@keyframes swipe-in{from{transform:translateX(-100%)}to{transform:translateX(0)}}`,rA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.channelMap=new Map,this.disconnectMeeting=e=>{var i,r,s,n,a,o;this.isPrivateChatSupported()&&(e==null||e.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),e==null||e.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),(i=e==null?void 0:e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener),(r=e==null?void 0:e.chat)===null||r===void 0||r.removeListener("channelCreate",this.onChannelCreateOrUpdate),(s=e==null?void 0:e.chat)===null||s===void 0||s.removeListener("channelUpdate",this.onChannelCreateOrUpdate),(n=e==null?void 0:e.chat)===null||n===void 0||n.removeListener("channelMessageUpdate",this.onChannelCreateOrUpdate),(o=(a=e==null?void 0:e.participants)===null||a===void 0?void 0:a.all)===null||o===void 0||o.removeListener("participantsUpdate",this.onChannelCreateOrUpdate),e.self.permissions.removeListener("*",this.chatPermissionUpdateListener)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter(e=>this.privatePresetFilter.length===0||this.privatePresetFilter.includes(e.presetName)),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>vv(this.meeting),this.updateUnreadCountGroups=e=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),e)},this.isPrivateChatSupported=()=>{var e,i,r;return!vv(this.meeting)&&this.canPrivateMessage&&!this.disablePrivateChat&&((r=(i=(e=this.meeting)===null||e===void 0?void 0:e.__internals__)===null||i===void 0?void 0:i.features)===null||r===void 0?void 0:r.getFeatureValue("chat_socket_server"))==="socket-service"},this.updateRecipients=e=>{const{id:i}=e.detail;if(this.chatRecipientId=i,this.selectedParticipant=this.participants.find(r=>r.userId===i),this.chatRecipientId!=="everyone"){const r=[this.chatRecipientId,this.meeting.self.userId],s=Dh(r);this.selectedGroup=s}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.onChannelChanged=e=>{const i=e.detail;i.id.includes(cm)?this.createDMChannel(i.id.replace(cm,"")):this.selectedChannelId=i.id,this.cleanup(),this.selectorState!=="desktop"&&(this.selectorState="hide")},this.createDMChannel=async e=>{this.creatingChannel=!0;const i=await this.meeting.chat.createChannel("Direct Message",[e],{visibility:"private",isDirectMessage:!0});this.creatingChannel=!1,this.selectedChannelId=i.id},this.cleanup=()=>{this.editingMessage=null,this.replyMessage=null,this.searchQuery=""},this.onChannelCreateOrUpdate=e=>{e?this.channelMap.set(e.id,e):this.meeting.chat.channels.forEach(a=>this.channelMap.set(a.id,a));const i=Array.from(this.channelMap.values()).filter(a=>!DE(a)).sort((a,o)=>vw(a.displayName,o.displayName)),r=Array.from(this.channelMap.values()).filter(DE).map(a=>Object.assign(Object.assign({},a),{displayName:this.getMemberDisplayName(a)})),s=this.meeting.participants.all.toArray().filter(a=>{if(a.userId===this.meeting.self.userId)return!1;const o=OE([this.meeting.self.userId,a.userId]);return r.every(c=>OE(c.memberIds)!==o)}).map(a=>({id:`${cm}${a.userId}`,displayName:a.name,displayPictureUrl:a.picture,isDirectMessage:!0,unreadCount:0})),n=[...r,...s].sort((a,o)=>vw(a.displayName,o.displayName));this.channels=[...i,...n],!this.selectedChannelId&&this.channels.length!==0&&(this.selectedChannelId=this.channels[0].id)},this.getMemberDisplayName=e=>{var i;let r;e.memberIds.length===1?r=e.memberIds[0]:r=e.memberIds[0]===this.meeting.self.userId?e.memberIds[1]:e.memberIds[0];const s=this.meeting.participants.all.toArray().find(n=>n.userId===r);return(i=s==null?void 0:s.name)!==null&&i!==void 0?i:r},this.toDyteMessage=e=>{if(e.type==="image")return{type:e.type,image:e.file};if(e.type==="file")return{type:e.type,file:e.file};if(e.type==="text")return e},this.onNewMessageHandler=async e=>{const i=e.detail;this.isChatViewType?(await this.meeting.chat.sendMessageToChannel(this.toDyteMessage(i),this.selectedChannelId,this.replyMessage?{replyTo:this.replyMessage}:{}),this.replyMessage=null):this.meeting.chat.sendMessage(this.toDyteMessage(i),this.getRecipientPeerIds())},this.onEditMessageHandler=async e=>{var i,r;await((r=(i=this.meeting)===null||i===void 0?void 0:i.chat)===null||r===void 0?void 0:r.editTextMessage(this.editingMessage.id,e.detail,this.editingMessage.channelId)),this.editingMessage=null},this.onSearchHandler=async e=>{this.searchQuery=e.detail},this.onSearchDismissed=()=>{this.searchQuery=""},this.onChannelCreateClicked=()=>{this.stateUpdate.emit({activeChannelCreator:!0}),G.activeChannelCreator=!0},this.getChannelItems=()=>this.channels.map(e=>{const i={id:e.id,name:e.displayName,avatarUrl:e.displayPictureUrl};return e.latestMessage&&(i.latestMessage=e.latestMessage.type==="text"?wy(e.latestMessage.message):"",i.latestMessageTime=e.latestMessage.time),i}),this.getPrivateChatRecipients=()=>{const e=this.participants.map(r=>{const s=Dh([r.userId,this.meeting.self.userId]);return{id:r.userId,name:r.name,avatarUrl:r.picture,unreadCount:this.unreadCountGroups[s]}});return[{id:"everyone",name:this.t("chat.everyone"),icon:"participants",unreadCount:this.unreadCountGroups.everyone},...e]},this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.t=W(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0,this.channels=[],this.selectedChannelId=void 0,this.editingMessage=null,this.replyMessage=null,this.searchQuery="",this.selectorState="hide",this.creatingChannel=!1}connectedCallback(){!this.meeting||(this.meetingChanged(this.meeting),!(this.meeting&&!this.meeting.chat)&&this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",t=>{t.preventDefault(),this.dropzoneActivated=!0}),this.host.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.host.addEventListener("drop",t=>{t.preventDefault(),this.dropzoneActivated=!1,eA(t.dataTransfer.items,(e,i)=>{var r,s,n,a;switch(e){case"image":this.isFileMessagingAllowed()&&((s=(r=this.meeting)===null||r===void 0?void 0:r.chat)===null||s===void 0||s.sendImageMessage(i,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&((a=(n=this.meeting)===null||n===void 0?void 0:n.chat)===null||a===void 0||a.sendFileMessage(i,this.getRecipientPeerIds()));break}})})))}onEditMessageInit(t){t.detail.flags.isReply?this.replyMessage=t.detail.payload:t.detail.flags.isEdit&&(this.editingMessage=t.detail.payload)}disconnectedCallback(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect(),this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i,r,s,n,a;e!=null&&this.disconnectMeeting(e),!(t&&!t.chat)&&t!=null&&(this.canSend=t.self.permissions.chatPublic.canSend,this.canSendTextMessage=t.self.permissions.chatPublic.text,this.canSendFiles=t.self.permissions.chatPublic.files,this.canPrivateMessage=!!(((i=t.self.permissions.chatPrivate)===null||i===void 0?void 0:i.canSend)||((r=t.self.permissions.chatPrivate)===null||r===void 0?void 0:r.canReceive)),this.canSendPrivateTexts=!!(!((s=t.self.permissions.chatPrivate)===null||s===void 0)&&s.text),this.canSendPrivateFiles=!!(!((n=t.self.permissions.chatPrivate)===null||n===void 0)&&n.files),this.isChatViewType=t.meta.viewType==="CHAT",this.isChatViewType&&(this.onChannelCreateOrUpdate(),this.channels.filter(c=>!c.id.includes(cm)).length&&(this.selectedChannelId=this.channels[0].id),this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(c=>{for(const u of c)u.contentBoxSize[0].inlineSize<758?this.selectorState="hide":this.selectorState="desktop"}),this.isChatViewType&&this.resizeObserver.observe(this.host)),this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:o})=>{o.channelId||(this.addToChatGroup(o),this.chatGroups=Object.assign({},this.chatGroups))},this.chatPermissionUpdateListener=()=>{this.canSend=t.self.permissions.chatPublic.canSend,this.canSendTextMessage=t.self.permissions.chatPublic.text,this.canSendFiles=t.self.permissions.chatPublic.files},t.self.permissions.on("*",this.chatPermissionUpdateListener),this.onParticipantUpdate(),this.usePaginatedChat()||(a=t.chat)===null||a===void 0||a.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(t.participants.joined.addListener("participantJoined",this.onParticipantUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantUpdate)),this.isChatViewType&&(t.chat.addListener("channelCreate",this.onChannelCreateOrUpdate),t.chat.addListener("channelUpdate",this.onChannelCreateOrUpdate),t.chat.addListener("channelMessageUpdate",this.onChannelCreateOrUpdate),t.participants.all.addListener("participantsUpdate",this.onChannelCreateOrUpdate)))}chatGroupsChanged(t){var e,i;if(!this.isPrivateChatSupported())return;const r={};for(const s in t){const n=(e=wv[s])!==null&&e!==void 0?e:0;r[s]=t[s].filter(a=>a.type=="chat"&&a.message.time>n&&a.message.userId!==this.meeting.self.userId).length,(s===Dh([this.meeting.self.userId,(i=this.selectedParticipant)===null||i===void 0?void 0:i.userId])||s==="everyone"&&this.selectedParticipant===null)&&(r[s]=0,wv[s]=new Date)}this.updateUnreadCountGroups(r)}initializeChatGroups(){var t;(t=this.meeting.chat)===null||t===void 0||t.messages.forEach(e=>{this.addToChatGroup(e)})}addToChatGroup(t){var e;const i=XI(t);let r="everyone";if(((e=i.targetUserIds)===null||e===void 0?void 0:e.length)>0){const s=new Set([i.userId,...i.targetUserIds]);r=Dh(Array.from(s))}this.chatGroups[r]===void 0&&(this.chatGroups[r]=[]),this.chatGroups[r]=[...this.chatGroups[r],{type:"chat",message:i}]}getRecipientPeerIds(){let t=[];return this.chatRecipientId!=="everyone"&&(t=[this.selectedParticipant.id]),t}channelSwitchListener(t){this.onChannelChanged(t)}renderHeadlessComponents(){return d(m9,null,d("dyte-dialog-manager",{meeting:this.meeting}),d("dyte-notifications",{meeting:this.meeting}))}renderComposerUI(){var t,e,i;if(this.isChatViewType&&this.channels.length===0||this.isChatViewType&&this.searchQuery!==""||this.isChatViewType&&!this.selectedChannelId)return null;if(this.chatRecipientId==="everyone"){if(!this.canSendTextMessage&&!this.canSendFiles)return null}else if(!this.canSendPrivateTexts&&!this.canSendPrivateFiles)return null;const r={iconPack:this.iconPack,t:this.t,size:this.size},s=this.editingMessage?this.editingMessage.message:"",n=this.replyMessage?this.replyMessage.message:"";return d("dyte-chat-composer-view",Object.assign({message:s,storageKey:(t=this.selectedChannelId)!==null&&t!==void 0?t:`draft-${this.selectedChannelId}`,quotedMessage:n,isEditing:!!this.editingMessage,canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(!((i=(e=this.meeting)===null||e===void 0?void 0:e.__internals__)===null||i===void 0)&&i.features.hasFeature(fv.DISABLE_EMOJI_PICKER)),onNewMessage:this.onNewMessageHandler,onEditMessage:this.onEditMessageHandler,onEditCancel:()=>this.editingMessage=null,onQuotedMessageDismiss:()=>this.replyMessage=null},r),d("slot",{name:"chat-addon",slot:"chat-addon"}))}renderFullChat(){if(this.creatingChannel)return d("div",{class:"banner"},d("dyte-spinner",{size:"lg"}));if(this.channels.length===0||!this.selectedChannelId)return d("div",{class:"banner"},d("dyte-icon",{icon:this.iconPack.create_channel_illustration,iconPack:this.iconPack,t:this.t,slot:"start",class:"create-channel-illustration"}),d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"wide",variant:"primary",size:"md",onClick:this.onChannelCreateClicked,class:"welcome-new-channel"},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t,slot:"start"}),d("span",null,this.t("chat.new_channel"))),(this.selectorState==="mobile"||this.selectorState==="hide")&&d("dyte-button",{kind:"button",variant:"secondary",size:"md",class:"view-chats-btn",onClick:()=>{this.selectorState="mobile"}},d("dyte-icon",{icon:this.iconPack.chat,slot:"start"}),d("span",null,this.t("chat.view_chats"))));const t=this.channels.find(e=>e.id===this.selectedChannelId);return d("div",{class:"chat"},d("dyte-channel-header",{slot:"header",meeting:this.meeting,channel:t,onSearch:this.onSearchHandler,onSearchDismissed:this.onSearchDismissed,showBackButton:this.selectorState==="mobile"||this.selectorState==="hide",onBack:()=>{this.selectorState="mobile"}}),this.searchQuery!==""&&d("dyte-chat-search-results",{meeting:this.meeting,query:this.searchQuery,channelId:this.selectedChannelId}),this.searchQuery===""&&d("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t,selectedChannelId:this.selectedChannelId,selectedChannel:t}))}render(){var t,e;if(!this.meeting)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},r=(t=this.meeting)===null||t===void 0?void 0:t.self.userId,s=this.chatGroups[this.selectedGroup]||[];return d(z,null,this.isChatViewType&&this.renderHeadlessComponents(),d("div",{class:"chat-container"},this.isChatViewType&&d("div",{class:{"selector-container":!0,[this.selectorState]:!0}},d("dyte-channel-selector-view",{channels:this.getChannelItems(),selectedChannelId:this.selectedChannelId,onChannelChange:this.onChannelChanged},d("div",{class:"channel-selector-header",slot:"header"},d("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t}),d("dyte-tooltip",{label:this.t("chat.new_channel"),iconPack:this.iconPack,t:this.t},d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:this.onChannelCreateClicked,class:"channel-create-btn"},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}))))),d("dyte-button",{kind:"icon",variant:"ghost",class:"mobile-close-btn",onClick:()=>this.selectorState="hide"},d("dyte-icon",{icon:this.iconPack.dismiss}))),d("div",{class:"chat"},this.isFileMessagingAllowed()&&d("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},d("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),d("p",null,this.t("chat.send_attachment"))),this.isPrivateChatSupported()&&d("dyte-channel-selector-view",{channels:this.getPrivateChatRecipients(),selectedChannelId:((e=this.selectedParticipant)===null||e===void 0?void 0:e.userId)||"everyone",onChannelChange:this.updateRecipients,viewAs:"dropdown"}),this.isChatViewType?this.renderFullChat():this.usePaginatedChat()?d("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):d("dyte-chat-messages-ui",Object.assign({messages:s,selfUserId:r,selectedGroup:this.selectedGroup},i)),this.renderComposerUI())))}get host(){return Pr(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};rA.style=Dz;var Oz=Object.freeze({__proto__:null,dyte_chat:rA});const Lz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.chat-input{position:relative;margin:var(--dyte-space-2, 8px);z-index:10;box-sizing:border-box;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));box-sizing:border-box;padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea{border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px);font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:60px;font-size:14px}.chat-buttons{border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons .right{z-index:10}.chat-buttons .right .edit-buttons{display:flex;gap:var(--dyte-space-2, 8px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;position:absolute;bottom:var(--dyte-space-32, 128px);border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));animation:0.3s slide-up ease}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}.member-list{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);padding:var(--dyte-space-0, 0px);position:absolute;bottom:var(--dyte-space-28, 112px);list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.member-list .member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-4, 16px);cursor:pointer}.member-list .member dyte-avatar{flex-shrink:0;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.member-list .member span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.member-list .member:hover,.member-list .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.suggested-replies{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-3, 12px);display:flex;flex-wrap:nowrap;gap:var(--dyte-space-2, 8px);list-style-type:none;overflow-x:auto}.suggested-replies dyte-tooltip{flex-shrink:0}.suggested-replies li{padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.75);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));cursor:pointer}.suggested-replies li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px)}.file-preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.file-preview:hover dyte-tooltip{display:block}.file-preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.file-preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.file-preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}@keyframes scroll-text{0%{transform:translateX(0%)}70%{transform:translateX(-100%)}80%{transform:translateX(0%)}100%{transform:translateX(0%)}}`,cc="@",sA=class{constructor(t){V(this,t),this.onNewMessage=re(this,"dyteNewMessage",7),this.onEditMessage=re(this,"dyteEditMessage",7),this.onEditCancelled=re(this,"dyteEditCancelled",7),this.fileReader=new FileReader,this.fileToUpload=null,this.handleKeyDown=e=>{if(e.key===cc&&[void 0," "].includes(this.$textArea.value.at(-1))&&(this.mentionQuery=cc),e.key==="ArrowDown"&&(this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,this.getFilteredMembers().length-1)),e.key==="ArrowUp"&&(this.focusedMemberIndex=Math.max(0,this.focusedMemberIndex-1)),(e.key==="Escape"||e.key==="Backspace"&&this.mentionQuery===cc)&&(this.mentionQuery=""),["Enter","Tab"," "].includes(e.key)&&this.mentionQuery!==""){const i=this.getFilteredMembers()[this.focusedMemberIndex];this.onMemberSelect(i),e.preventDefault();return}e.key==="Enter"&&e.shiftKey?this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px"):e.key==="Enter"?(e.preventDefault(),this.prefill.editMessage?this.handleEditMessage():this.handleSendMessage()):e.key==="Backspace"&&(this.$textArea.value.endsWith(`
`)?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":this.$textArea.value===""&&(this.$textArea.style.height="auto"))},this.handleKeyUp=e=>{if(this.mentionQuery!==""){const i=rh(this.$textArea.value.trim()),r=i.substring(0,i.indexOf(cc));this.mentionQuery=`${cc}${rh(r)}`}},this.onPaste=e=>{const i=e.clipboardData||e.originalEvent.clipboardData;Mi(()=>{i&&i.items&&i.items.length>0&&(eA(i.items,this.generateFilePreview),this.$textArea.value="")})},this.generateFilePreview=(e,i)=>{this.fileToUpload={type:e,image:i,file:i},e==="image"?this.fileReader.readAsDataURL(i):e==="file"&&(this.filePreview=i.name)},this.sendFile=()=>{!this.canSendFiles||(this.fileToUpload.type==="image"?this.onNewMessage.emit({type:"image",file:this.fileToUpload.image,image:this.fileToUpload.image}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.cleanUpFileUpload())},this.handleSendMessage=()=>{if(!this.canSendTextMessage)return;if(this.fileToUpload!==null){this.sendFile();return}const e=this.$textArea.value.trim();e.length>0&&(this.prefill.replyMessage?this.onNewMessage.emit({type:"text",message:e,replyTo:this.prefill.replyMessage}):this.onNewMessage.emit({type:"text",message:e}),this.cleanup())},this.cleanup=()=>{this.mentionQuery="",this.focusedMemberIndex=0,this.$textArea.value="",this.$textArea.style.height="auto",ds.setItem(this.storageKey,"")},this.handleEditMessage=()=>{var e;let i=this.$textArea.value.trim();((e=this.prefill.editMessage)===null||e===void 0?void 0:e.message)&&H_.test(this.prefill.editMessage.message)&&(i=`${W_(this.prefill.editMessage.message)}

${i}`),this.onEditMessage.emit({id:this.prefill.editMessage.id,message:i,channelId:this.prefill.editMessage.channelId}),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancelled.emit(),this.cleanup()},this.initializeTextField=e=>{this.$textArea=e;const i=ds.getItem(this.storageKey)||"";this.$textArea.value=i},this.onMemberSelect=e=>{const i=rh(this.mentionQuery),r=rh(this.$textArea.value.trim()).replace(i,"");this.$textArea.value=rh(r)+`${cc}${e.name} `,this.mentionQuery="",this.focusedMemberIndex=0,Mi(()=>this.$textArea.focus())},this.getFilteredMembers=()=>{const e=this.mentionQuery.replace(cc,"");return this.members.filter(i=>i.name.toLowerCase().includes(e.toLowerCase()))},this.cleanUpFileUpload=()=>{this.filePreview=null,this.fileToUpload=null},this.renderSuggestedReplies=()=>{if(!!this.prefill.suggestedReplies&&this.prefill.suggestedReplies.length!==0)return d("ul",{class:"suggested-replies scrollbar"},this.prefill.suggestedReplies.map(e=>d("dyte-tooltip",{label:this.t("chat.click_to_send")},d("li",{onClick:()=>this.onNewMessage.emit({type:"text",message:e})},e))))},this.renderMenu=()=>{if(this.mentionQuery.length===0)return;const e=this.getFilteredMembers();if(e.length!==0)return d("ul",{class:"member-list scrollbar"},e.map((i,r)=>d("li",{class:{member:!0,selected:r===this.focusedMemberIndex},onClick:()=>this.onMemberSelect(i),ref:s=>{r===this.focusedMemberIndex&&Mi(()=>{s&&s.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}},d("dyte-avatar",{participant:{name:i.name,picture:i.picture},size:"sm"}),d("span",null,i.name))))},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=H,this.t=W(),this.disableEmojiPicker=!1,this.prefill={},this.members=[],this.channelId=void 0,this.emojiPickerActive=!1,this.mentionQuery="",this.focusedMemberIndex=0,this.filePreview=null}connectedCallback(){this.fileReader.onload=t=>{typeof t.target.result=="string"&&(this.filePreview=t.target.result)}}onChannelChanged(){this.mentionQuery="",this.focusedMemberIndex=0;const t=ds.getItem(this.storageKey)||"";this.$textArea.value=t,this.emojiPickerActive=!1}componentDidRender(){(this.prefill.editMessage||this.prefill.replyMessage)&&Mi(()=>this.$textArea.focus())}get storageKey(){return this.channelId?`dyte-text-message-${this.channelId}`:"dyte-text-message"}uploadFile(t){const e=document.createElement("input");e.type="file",t==="image"&&(e.accept="image/*"),e.onchange=i=>{const{validity:r,files:[s]}=i.target;r.valid&&this.generateFilePreview(t,s)},e.click()}renderFilePreview(){if(typeof this.filePreview=="string")return d("div",{class:"preview-overlay"},d("div",{class:"file-preview"},d("dyte-tooltip",{label:this.t("chat.cancel_upload")},d("dyte-button",{variant:"secondary",kind:"icon",onClick:this.cleanUpFileUpload},d("dyte-icon",{icon:this.iconPack.dismiss}))),this.fileToUpload.type==="image"?d("img",{class:"preview-image",src:this.filePreview}):d("div",{class:"preview-file"},d("span",null,this.filePreview))))}render(){var t;const e={iconPack:this.iconPack,t:this.t,size:this.size};let i="";return!((t=this.prefill.editMessage)===null||t===void 0)&&t.message&&(i=wy(this.prefill.editMessage.message)),d(z,null,this.canSendTextMessage&&this.emojiPickerActive&&d("dyte-emoji-picker",{part:"emoji-picker",onPickerClose:()=>{this.emojiPickerActive=!1},onDyteEmojiClicked:r=>{this.$textArea.value+=r.detail,this.$textArea.focus()},t:this.t}),this.renderSuggestedReplies(),d("slot",{name:"chat-addon"}),d("slot",{name:"quote-block"}),d("div",{class:"chat-input",part:"chat-input"},this.renderMenu(),this.canSendTextMessage&&d("textarea",{class:"scrollbar",part:"textarea",ref:this.initializeTextField,autoFocus:!0,placeholder:this.fileToUpload?"":this.t("chat.message_placeholder"),value:i,onPaste:this.onPaste,maxLength:ky,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onInput:r=>{ds.setItem(this.storageKey,r.target.value)},disabled:!!this.filePreview}),d("div",{class:"chat-buttons",part:"chat-buttons"},d("div",{class:"left",part:"chat-buttons-left"},!this.prefill.editMessage&&this.canSendFiles&&[d("dyte-tooltip",Object.assign({label:this.t("chat.send_file")},e),d("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("chat.send_file"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.attach}))),d("dyte-tooltip",Object.assign({label:this.t("chat.send_img")},e),d("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("chat.send_img"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.image})))],!this.prefill.editMessage&&this.canSendTextMessage&&!this.disableEmojiPicker&&d("dyte-tooltip",Object.assign({label:this.t("chat.send_emoji")},e),d("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("chat.send_emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},d("dyte-icon",{icon:this.iconPack.emoji_multiple})))),!!this.filePreview&&this.renderFilePreview(),this.canSendTextMessage&&d("div",{class:"right",part:"chat-buttons-right"},!this.prefill.editMessage&&d("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},e),d("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.send}))),this.prefill.editMessage&&d("div",{class:"edit-buttons"},d("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},e),d("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss}))),d("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},e),d("dyte-button",{kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.checkmark}))))))))}static get watchers(){return{channelId:["onChannelChanged"]}}};sA.style=Lz;var Nz=Object.freeze({__proto__:null,dyte_chat_composer_ui:sA});const Uz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);animation:0.3s slide-down ease}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,nA=class{constructor(t){V(this,t),this.groupChanged=re(this,"dyteChatGroupChanged",7),this.onScopeClick=e=>{this.showParticipantsPanel=!1,this.groupChanged.emit(e)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=H,this.t=W(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter(t=>t.name.toLowerCase().includes(this.query.toLowerCase()))}getName(){if(!this.selectedGroupId||this.selectedGroupId==="everyone")return this.t("everyone");const t=this.groups.find(e=>e.userId===this.selectedGroupId);return t?t.name:this.t("everyone")}render(){const t=Object.keys(this.unreadCounts).reduce((e,i)=>e+this.unreadCounts[i],0);return d(z,null,d("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&d("div",{class:"participants-container"},d("div",{class:"search",part:"search"},d("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),d("input",{type:"search",autocomplete:"off",placeholder:"Search",value:this.query,onInput:e=>{this.query=e.target.value},part:"search-input"})),d("ul",{class:"scope-list scrollbar"},this.query===""&&d("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},d("div",{class:"everyone-icon"},d("dyte-icon",{icon:this.iconPack.participants})),"Everyone",this.unreadCounts.everyone>0&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,this.unreadCounts.everyone))),this.getGroups().map(e=>{const i=this.unreadCounts[Dh([this.selfUserId,e.userId])];return d("li",{class:"scope",onClick:()=>this.onScopeClick(e),key:e.userId},e.name,i>0&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,i)))}))),d("button",{onClick:()=>this.toggleParticipants()},d("span",null,`${this.t("to")} ${this.getName()}`,"  ",t>0&&d("div",{class:"unread-count selector"},d("span",null,t))),d("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};nA.style=Uz;var jz=Object.freeze({__proto__:null,dyte_chat_selector_ui:nA});const yw=t=>{if(t&&!t.chat)return!1;const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:r}=t.self.permissions;return i.canSend||i.text||i.files||r.canSend||r.canReceive||r.files||r.text},bw=t=>{if(t&&!t.polls)return!1;const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.polls)return!1;const{polls:i}=t.self.permissions;return i.canCreate||i.canView||i.canVote},ww=t=>{var e,i,r,s;if(((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.features.hasFeature(fv.FEAT_PARTICIPANT_LIST))&&!(!((i=t.self.permissions)===null||i===void 0)&&i.showParticipantList)||Zo(t)&&!(!((r=t.self.permissions)===null||r===void 0)&&r.acceptPresentRequests)||t&&!t.participants)return!1;if(t.meta.viewType==="LIVESTREAM")return t.self.permissions.acceptPresentRequests||((s=t==null?void 0:t.stage)===null||s===void 0?void 0:s.status)==="ON_STAGE";const n=t==null?void 0:t.self.config;return!(n&&!n.controlBar.elements.participants)},kw=t=>{if(rd(t)||t&&!t.plugins)return!1;if(t.meta.viewType==="LIVESTREAM")return t.stage.status==="ON_STAGE";const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.plugins)return!1;const{plugins:i}=t.self.permissions;return i.canClose||i.canStart},$z=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",aA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onChatUpdate=({action:e,message:i})=>{var r;this.chatActive||e==="add"&&i.userId!==((r=this.meeting)===null||r===void 0?void 0:r.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const e=this.states||G;this.chatActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="chat"),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),G.activeSidebar=this.chatActive,G.activeMoreMenu=!1,G.sidebar=this.chatActive?"chat":void 0,this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":void 0,activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=yw(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),bu("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i,r;(e=(t=this.meeting)===null||t===void 0?void 0:t.chat)===null||e===void 0||e.removeListener("chatUpdate",this.onChatUpdate),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e,i,r,s;t!=null&&(vv(t)&&((e=t.chat)===null||e===void 0||e.getMessages(new Date().getTime(),1,!0).then(n=>{var a;!((a=n==null?void 0:n.messages)===null||a===void 0)&&a.length&&(this.hasNewMessages=!0)})),this.unreadMessageCount=((i=t.chat)===null||i===void 0?void 0:i.messages.length)||0,(r=t.chat)===null||r===void 0||r.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=yw(t),(s=t==null?void 0:t.stage)===null||s===void 0||s.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||G;e!=null&&(this.chatActive=e.activeSidebar===!0&&e.sidebar==="chat")}render(){if(!!this.canViewChat)return d(z,{title:this.t("chat")},vv(this.meeting)?this.hasNewMessages&&d("div",{class:"unread-count-dot",part:"unread-count-dot"}):this.unreadMessageCount!==0&&!this.chatActive&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};aA.style=$z;var zz=Object.freeze({__proto__:null,dyte_chat_toggle:aA});const Fz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",ab=t=>Math.trunc(t).toString().padStart(2,"0"),oA=class{constructor(t){V(this,t),this.disconnectMeeting=()=>{var e,i;this.timeout&&clearTimeout(this.timeout),typeof this.request=="number"&&cancelAnimationFrame(this.request),(i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0||i.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var e,i,r;this.startedTime=(r=(i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.meetingStartedTimestamp)===null||r===void 0?void 0:r.toISOString()},this.meeting=void 0,this.iconPack=H,this.t=W(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(t){var e,i,r;this.disconnectMeeting(),t!=null&&(this.startedTime=(i=(e=t.meta)===null||e===void 0?void 0:e.meetingStartedTimestamp)===null||i===void 0?void 0:i.toISOString(),(r=t.meta)===null||r===void 0||r.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(t){if(t!==void 0){const e=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(e))},500)};this.request=requestAnimationFrame(e)}}getFormattedTime(){if(this.timeDiff==null)return null;const t=this.timeDiff;let e="";return t>=3600&&(e=`${ab(t/3600)}:`),e+=`${ab(t%3600/60)}:${ab(t%60)}`,e}render(){return d(z,{tabIndex:0,role:"timer","aria-live":"off"},this.startedTime!==void 0&&[d("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),d("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};oA.style=Fz;var Vz=Object.freeze({__proto__:null,dyte_clock:oA});const Bz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",cA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.close=()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),G.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClose(this.stateUpdate,G,this.meeting)},this.onConfirmation=async()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),G.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClick(this.stateUpdate,G,this.meeting)},this.meeting=void 0,this.states=void 0,this.iconPack=H,this.t=W()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var t,e;const i=this.states.activeConfirmationModal;return d(z,null,d("div",{class:"leave-modal"},d("div",{class:"header"},d("h2",{class:"title"},i.header?this.t(i.header):this.t("cta.confirmation"))),d("p",{class:"message"},i.content?this.t(i.content):""),d("div",{class:"content"},d("div",{class:"leave-meeting"},d("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),d("dyte-button",{onClick:()=>this.onConfirmation(),variant:(e=(t=this.states.activeConfirmationModal)===null||t===void 0?void 0:t.variant)!==null&&e!==void 0?e:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};cA.style=Bz;var Hz=Object.freeze({__proto__:null,dyte_confirmation_modal:cA});const Wz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);position:relative;z-index:10}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{padding-top:var(--dyte-space-0, 0px) !important}}",dA=class{constructor(t){V(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Ke,this.states=void 0,this.iconPack=H,this.t=W(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return d(z,null,!this.disableRender&&d(Be,{element:"dyte-controlbar",defaults:t,onlyChildren:!0}),d("slot",null))}};dA.style=Wz;var Gz=Object.freeze({__proto__:null,dyte_controlbar:dA});const qz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-between;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}header h3{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px)}.back-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;max-width:var(--dyte-space-56, 224px) !important;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:14px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}main{position:relative;box-sizing:border-box;display:flex;height:100%;width:100%;flex-direction:column;padding-top:var(--dyte-space-1, 4px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));width:100% !important;max-width:100% !important;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;height:100%;width:100%;padding:var(--dyte-space-0, 0px)}:host([size='sm']) main.active{display:block}:host([size='sm']) header{margin:var(--dyte-space-0, 0px);justify-content:center}:host([size='sm']) header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb:hover{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.progress-bar{height:var(--dyte-space-1, 4px);width:100%;overflow:hidden;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.progress-indicator{height:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,lA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.activeTab="audio",this.isMobileMainVisible=!1,this.progress=0}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}disconnectedCallback(){this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener)}progressUpdate(t){this.progress=t.detail}changeTab(t){this.activeTab=t,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeDebugger:!1}),G.activeDebugger=!1}getActiveTab(){switch(this.activeTab){case"audio":return this.t("Audio Troubleshooting");case"screenshare":return this.t("Media Troubleshooting");case"video":return this.t("Video Troubleshooting");default:return this.t("Troubleshooting")}}render(){if(this.meeting==null)return null;const t={meeting:this.meeting,states:this.states||G,iconPack:this.iconPack,t:this.t,size:this.size},e=this.getActiveTab();return d(z,null,d("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},d("header",null,d("h3",null,this.t("Troubleshooting"))),d("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),d("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),d("button",{type:"button",class:{active:this.activeTab==="screenshare"},onClick:()=>this.changeTab("screenshare")},this.t("Screenshare"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.share_screen_start,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t})))),d("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&d("header",null,d("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),d("h4",null,e)),this.activeTab==="audio"&&d("dyte-debugger-audio",Object.assign({},t)),this.activeTab==="video"&&d("dyte-debugger-video",Object.assign({},t)),this.activeTab==="screenshare"&&d("dyte-debugger-screenshare",Object.assign({},t)),this.progress>1&&d("div",{class:"progress-bar"},d("div",{class:"progress-indicator",style:{width:`${this.progress}%`}}))))}};lA.style=qz;var Jz=Object.freeze({__proto__:null,dyte_debugger:lA});const Kz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:flex-start;justify-content:flex-start}`,uA=class{constructor(t){V(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.issueKey=0}render(){return d(z,null)}};uA.style=Kz;var Qz=Object.freeze({__proto__:null,dyte_debugger_network:uA});const Yz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",hA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.t=W(),this.iconPack=H,this.size=void 0}toggleDebugger(){var t;this.stateUpdate.emit({activeDebugger:!(!((t=this.states)===null||t===void 0)&&t.activeDebugger),activeMoreMenu:!1}),G.activeDebugger=!G.activeDebugger,G.activeMoreMenu=!1}render(){var t;if(!!(!((t=this.meeting)===null||t===void 0)&&t.troubleshoot))return d(z,{title:this.t("Network & Trouble Shooting")},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleDebugger(),icon:this.iconPack.debug,label:this.t("Troubleshooting and Help"),variant:this.variant}))}};hA.style=Yz;var Zz=Object.freeze({__proto__:null,dyte_debugger_toggle:hA});const Xz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-8, 32px)}dyte-logo.loaded{height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}",pA=class{constructor(t){V(this,t),this.config=Ke,this.size=void 0,this.icon=H,this.states=void 0,this.t=W(),this.iconPack=H,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),bu("roomLeftState",()=>this.statesChanged())}getBreakoutRoomsMessage(t){var e;let i;return(t==null?void 0:t.roomLeftState)==="connected-meeting"&&(((e=G.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?i="breakout_rooms.move_reason.switch_main_room":i="breakout_rooms.move_reason.switch_room"),i}statesChanged(t){const e=t||G;if(e!=null)switch(e==null?void 0:e.roomLeftState){case"left":this.message="ended.left";break;case"kicked":this.message="ended.kicked";break;case"disconnected":this.message="ended.disconnected";break;case"rejected":this.message="ended.rejected";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(e);break;default:this.message="ended"}}renderBreakoutRoomScreen(){return d(z,null,d("div",{class:"ctr",part:"container"},d("dyte-icon",{icon:this.iconPack.breakout_rooms}),d("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const t=this.states||G;return t.roomLeftState==="connected-meeting"?this.renderBreakoutRoomScreen():d(z,null,d("div",{class:"ctr",part:"container"},d("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),d("p",{part:"message"},this.t(this.message)),(t==null?void 0:t.roomLeftState)==="disconnected"&&d("span",{part:"description"},this.t("ended.network"))))}static get watchers(){return{states:["statesChanged"]}}};pA.style=Xz;var eF=Object.freeze({__proto__:null,dyte_ended_screen:pA});const tF="#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;animation:0.2s slide-up ease-in}",gA=class{constructor(t){V(this,t),this.onDropCallback=re(this,"dropCallback",7),this.hostEl=void 0,this.iconPack=H,this.t=W(),this.dropzoneActivated=!1}connectedCallback(){if(!this.hostEl)throw new Error("hostEl prop is required");this.hostEl.addEventListener("dragover",t=>{t.preventDefault(),this.dropzoneActivated=!0}),this.hostEl.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.hostEl.addEventListener("drop",t=>{t.preventDefault(),this.dropzoneActivated=!1,this.onDropCallback.emit(t)})}render(){return d(z,null,d("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},d("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),d("p",null,this.t("chat.send_attachment"))))}};gA.style=tF;var iF=Object.freeze({__proto__:null,dyte_file_dropzone:gA});const mA=t=>t.split(/[#?]/)[0].split(".").pop().trim(),fA=t=>{if(!t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return`${(t/1024**e).toFixed(2)} ${["B","kB","MB","GB","TB"][e]}`},rF=(t,e="file")=>{try{const r=new URL(t).pathname.split("/").pop();return r!=="/"?r:e}catch{return e}},lg=async(t,e)=>{t=cg(t);let i=e==null?void 0:e.name;const r=await fetch(t);if(!r.ok){window.open(t,"_blank");return}const s=URL.createObjectURL(await r.blob()),n=document.createElement("a");n.href=s,n.download=i!=null?i:rF(t,e==null?void 0:e.fallbackName),n.click()},sF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{margin-left:var(--dyte-space-1, 4px);flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}",vA=class{constructor(t){V(this,t),this.name=void 0,this.size=void 0,this.url=void 0,this.iconPack=H,this.t=W()}render(){return d("div",{class:"file"},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>lg(cg(this.url),{name:this.name,fallbackName:"file"}),part:"button"},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})),d("div",{class:"file-data"},d("div",{class:"name"},this.name),d("div",{class:"file-data-split"},d("div",{class:"ext"},mA(this.name)),d("span",{class:"divider"}),d("div",{class:"size"},fA(this.size)))))}};vA.style=sF;var nF=Object.freeze({__proto__:null,dyte_file_message_view:vA});const yA=t=>{t!=null&&(t.requestFullscreen!=null?t.requestFullscreen():t.mozRequestFullScreen!=null?t.mozRequestFullScreen():t.webkitRequestFullscreen!=null?t.webkitRequestFullscreen():t.msRequestFullscreen!=null&&t.msRequestFullscreen())},bA=()=>{document.exitFullscreen!=null?document.exitFullscreen():document.mozExitFullScreen!=null?document.mozExitFullScreen():document.webkitExitFullscreen!=null?document.webkitExitFullscreen():document.msExitFullscreen!=null&&document.msExitFullscreen()},wA=()=>document.fullscreenElement!=null||document.webkitCurrentFullScreenElement!=null,kA=()=>typeof document<"u"?document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled:!1,aF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",_A=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=wA()},this.toggleFullScreen=()=>{let e=this.targetElement||document.querySelector("dyte-meeting");!e||(this.fullScreenActive?(bA(),this.fullScreenActive=!1):(yA(e),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),G.activeMoreMenu=!1)},this.states=void 0,this.targetElement=void 0,this.variant="button",this.size=void 0,this.iconPack=H,this.t=W(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=kA(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?d(z,{title:this.t("full_screen")},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};_A.style=aF;var oF=Object.freeze({__proto__:null,dyte_fullscreen_toggle:_A});function $E(t,e){const i=Math.pow(10,e);return Math.floor(t*i)/i}function cF({dimensions:t,count:e,aspectRatio:i,gap:r}){const{width:s,height:n,rows:a,cols:o}=dF({dimensions:t,count:e,aspectRatio:i,gap:r}),c=lF({parentDimensions:t,dimensions:{width:s,height:n},rows:a,cols:o,count:e,gap:r});return{width:s,height:n,getPosition:c}}function dF({count:t,dimensions:e,aspectRatio:i,gap:r}){let{width:s,height:n}=e;if(s===0||n===0)return{width:0,height:0,rows:1,cols:1};s-=r*2,n-=r*2;const a=r,o=t,c=uF(i);let u=0,l=0,p=1,m=1;const y=[];for(let b=1;b<=o;b++)y.push((s-a*(b-1))/b),y.push((n-a*(b-1))/(b*c));y.sort((b,S)=>S-b);for(const b of y)if(u=$E(b,4),l=$E(u*c,4),p=Math.floor((s+a)/(u+a)),m=Math.floor((n+a)/(l+a)),p*m>=o){m=Math.ceil(o/p);break}return{width:u,height:l,rows:m,cols:p}}function lF({parentDimensions:t,dimensions:e,rows:i,cols:r,count:s,gap:n}){const{width:a,height:o}=t,{width:c,height:u}=e,l=(o-(u*i+(i-1)*n))/2;let p=(a-(c*r+(r-1)*n))/2;const m=u+n,y=c+n;let b=0,S=0;const E=s%r;function k(T){const I=s-T;I===E&&(p=(a-(c*I+(I-1)*n))/2);const O=l+S*m,q=p+b*y;return b++,(T+1)%r===0&&(S++,b=0),{top:O,left:q}}return k}const uF=t=>{const[e,i]=t.split(":");return Number.parseInt(i)/Number.parseInt(e)},G_={spotlight:"sm",mixed:"sm"},hF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%}.offline-grid{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center}.offline-grid h3{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);font-size:20px;font-weight:500;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.offline-grid p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.offline-grid dyte-icon{margin-bottom:var(--dyte-space-2, 8px)}.webinar-stage{box-sizing:border-box;height:100%;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}dyte-viewer-count{display:none}.ctr{display:flex;flex-direction:column;align-items:center}.message{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.description{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}dyte-livestream-indicator{display:none}@media only screen and (max-device-height: 480px) and (orientation: landscape){dyte-viewer-count[variant='embedded']{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}dyte-livestream-indicator{position:absolute;top:var(--dyte-space-0, 0px);left:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}}",SA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.hideSelf=!1,this.networkUpdateListener=({event:e})=>{this.connected=e==="connected"},this.meetingDisconnectedListener=()=>{this.networkUpdateListener({event:"disconnected"})},this.meetingConnectedListener=()=>{this.networkUpdateListener({event:"connected"})},this.filterParticipants=e=>{var i;if(this.overrides&&((i=this.overrides)===null||i===void 0?void 0:i.videoUnsubscribed)){const r=this.overrides.videoUnsubscribed.preset;r.length>0&&(e=e.filter(s=>!r.some(a=>s.presetName===void 0?!1:s.presetName.match(a))))}return e},this.onViewModeChanged=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onParticipantJoined=e=>{this.meeting!=null&&(this.participants.some(i=>i.id===e.id)||(this.participants=this.filterParticipants([e,...this.participants])),e.isPinned&&!this.pinnedParticipants.some(i=>i.id===e.id)&&(this.pinnedParticipants=this.pinnedParticipants.concat([e])),this.updateWebinarStage())},this.onParticipantLeft=e=>{this.participants=this.participants.filter(i=>i.id!==e.id),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter(i=>!this.participants.find(r=>r.id===i.id))),this.participants=this.filterParticipants(this.participants),this.pinnedParticipants=this.pinnedParticipants.filter(i=>i.id!==e.id),e.screenShareEnabled&&this.removeScreenShare(e),this.updateWebinarStage()},this.stageStatusListener=()=>{this.updateActiveParticipants(),this.showLiveStreamPlayer=rd(this.meeting),this.meeting.stage.status!=="ON_STAGE"&&this.removeScreenShare(this.meeting.self)},this.peerStageStatusListener=e=>{this.updateActiveParticipants(),this.meeting.stage.status!=="ON_STAGE"&&(this.removePinned(e),this.removeScreenShare(e))},this.onScreenShareUpdate=e=>{e.screenShareEnabled?this.addScreenShare(e):this.removeScreenShare(e)},this.onSelfScreenShareUpdate=({screenShareEnabled:e})=>{e?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(e,{active:i})=>{i?this.plugins.some(r=>r.id===e.id)||(this.plugins=[...this.plugins,e]):this.plugins=this.plugins.filter(r=>r.id!==e.id)},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.roomJoinedListener=()=>{this.mediaConnected=this.meeting.meta.mediaConnected},this.updateRoomStateListener=()=>{this.roomState=this.meeting.self.roomState},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.showWebinarStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.connected=!0,this.pipSupported=!1,this.pipEnabled=!1,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=G,this.config=Ke,this.iconPack=H,this.t=W(),this.gridSize=G_,this.overrides={},this.mediaConnected=!0,this.roomState=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectMeeting(t){var e;if(t==null)return;this.participants=[],this.plugins=[];const{self:i,participants:r,plugins:s,meta:n}=t;r.active.removeListener("participantJoined",this.onParticipantJoined),r.active.removeListener("participantLeft",this.onParticipantLeft),r.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),r.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener),i.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),s==null||s.all.removeListener("stateUpdate",this.onPluginStateUpdate),r.pinned.removeListener("participantJoined",this.onParticipantPinned),r.pinned.removeListener("participantLeft",this.onParticipantUnpinned),i.removeListener("pinned",this.onParticipantPinned),i.removeListener("unpinned",this.onParticipantUnpinned),r.removeListener("viewModeChanged",this.onViewModeChanged),n.removeListener("disconnected",this.meetingDisconnectedListener),n.removeListener("connected",this.meetingConnectedListener),(e=t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStatusListener),n.removeListener("connected",this.roomJoinedListener),n.removeListener("disconnected",this.roomJoinedListener),i.removeListener("roomLeft",this.updateRoomStateListener),i.removeListener("roomJoined",this.updateRoomStateListener)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}overridesChanged(t){this.updateActiveParticipants()}screenShareParticipantsChanged(t){const e=t.length>0;this.stateUpdate.emit({activeScreenShare:e}),G.activeScreenShare=e}pluginsChanged(t){const e=t.length>0;this.stateUpdate.emit({activePlugin:e}),G.activePlugin=e}pinnedParticipantsChanged(t){const e=t.length>0;this.stateUpdate.emit({activeSpotlight:e}),G.activeSpotlight=e}updateActiveParticipants(){var t,e;const{self:i,participants:r,stage:s}=this.meeting,n=((t=i.config)===null||t===void 0?void 0:t.viewType)==="WEBINAR"&&s.status!=="ON_STAGE",a=(e=i.permissions)===null||e===void 0?void 0:e.isRecorder;this.hideSelf=n||a||i.permissions.hiddenParticipant,this.participants=this.filterParticipants([...r.active.toArray().filter(o=>o.id!==i.id),...r.viewMode==="ACTIVE_GRID"&&!i.isPinned&&!this.hideSelf?[i]:[]]),this.pinnedParticipants=[...r.pinned.toArray().filter(o=>o.id!==i.id),...i.isPinned&&!this.hideSelf?[i]:[]],this.screenShareParticipants=r.joined.toArray().filter(o=>o.screenShareEnabled),i.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([i])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&this.meeting.meta.viewType==="WEBINAR"?this.showWebinarStage=this.participants.length===0&&this.pinnedParticipants.length===0:this.showWebinarStage=!1}meetingChanged(t,e){var i,r,s;if(e!==null&&this.disconnectMeeting(e),t!=null){const{self:n,participants:a,plugins:o,meta:c,stage:u}=t,{config:l,permissions:p}=n;this.roomState=n.roomState,this.mediaConnected=c.mediaConnected;const m=this.meeting.stage.status!=="ON_STAGE",y=p==null?void 0:p.isRecorder;this.hideSelf=m||y||p.hiddenParticipant,this.participants=this.filterParticipants([...a.active.toArray(),...!n.isPinned&&!this.hideSelf?[n]:[]]),this.pinnedParticipants=[...a.pinned.toArray(),...n.isPinned&&!this.hideSelf?[n]:[]],this.screenShareParticipants=a.joined.toArray().filter(b=>b.screenShareEnabled),this.plugins=(o==null?void 0:o.active.toArray())||[],(l==null?void 0:l.viewType)==="WEBINAR"&&(this.canCurrentPeerHost=p.acceptPresentRequests||p.canPresent,this.updateWebinarStage()),this.pipSupported=this.meeting.participants.pip.isSupported()&&((i=t.self.config)===null||i===void 0?void 0:i.pipMode),this.pipSupported&&this.meeting.participants.pip.init(),a.active.addListener("participantJoined",this.onParticipantJoined),a.active.addListener("participantLeft",this.onParticipantLeft),a.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),(r=a==null?void 0:a.joined)===null||r===void 0||r.on("stageStatusUpdate",this.peerStageStatusListener),n.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),o==null||o.all.addListener("stateUpdate",this.onPluginStateUpdate),a.pinned.addListener("participantJoined",this.onParticipantPinned),a.pinned.addListener("participantLeft",this.onParticipantUnpinned),n.addListener("pinned",this.onParticipantPinned),n.addListener("unpinned",this.onParticipantUnpinned),c.addListener("disconnected",this.meetingDisconnectedListener),c.addListener("connected",this.meetingConnectedListener),u==null||u.addListener("stageStatusUpdate",this.stageStatusListener.bind(this)),a.addListener("viewModeChanged",this.onViewModeChanged),c.addListener("connected",this.roomJoinedListener),c.addListener("disconnected",this.roomJoinedListener),n.addListener("roomLeft",this.updateRoomStateListener),n.addListener("roomJoined",this.updateRoomStateListener),!((s=t.stage)===null||s===void 0)&&s.status&&this.stageStatusListener()}}addScreenShare(t){this.screenShareParticipants.some(e=>e.id===t.id)||(this.screenShareParticipants=[...this.screenShareParticipants,t])}removeScreenShare(t){this.screenShareParticipants=this.screenShareParticipants.filter(e=>e.id!==t.id)}removePinned(t){this.pinnedParticipants=this.pinnedParticipants.filter(e=>e.id!==t.id)}render(){const t={meeting:this.meeting,size:this.size,states:this.states||G,config:this.config,iconPack:this.iconPack,t:this.t};return this.roomState!=="joined"&&!rd(this.meeting)?d(z,null,d("div",{class:"offline-grid"},d("dyte-icon",{icon:this.iconPack.join_stage,size:"xl"}),d("h3",null,this.t("disconnected")),d("p",null,this.t("disconnected.description")))):!this.mediaConnected&&!rd(this.meeting)?d(z,null,d("div",{class:"offline-grid"},d("dyte-icon",{icon:this.iconPack.disconnected,size:"xl"}),d("h3",null,this.t("offline")),d("p",null,this.t("offline.description")))):!this.connected&&this.hideSelf?d("div",{class:"webinar-stage"},d("div",{class:"center"},d("h2",null,this.t("stage.reconnecting")))):this.showWebinarStage?d(z,null,d("div",{class:"webinar-stage"},d("div",{class:"center"},this.canCurrentPeerHost&&d("div",{class:"ctr",part:"container"},d("p",{class:"message",part:"message"},this.t("stage.empty_host")),d("span",{class:"description",part:"description"},this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&d("div",{class:"ctr",part:"container"},d("p",{class:"message",part:"message"},this.t("stage.empty_viewer")))))):this.showLiveStreamPlayer?d(z,null,d("dyte-livestream-player",{meeting:this.meeting,size:this.size}),d("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),d("dyte-viewer-count",{meeting:this.meeting,variant:"embedded",t:this.t})):d(z,null,d(Be,{element:"dyte-grid",defaults:t,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}),d("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),d("dyte-viewer-count",{meeting:this.meeting,variant:"embedded"}))}static get watchers(){return{overrides:["overridesChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};SA.style=hF;var pF=Object.freeze({__proto__:null,dyte_grid:SA});const gF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}",xA=class{constructor(t){V(this,t),this.onPageChanged=({currentPage:e,pageCount:i})=>{this.pageCount=i,this.page=e},this.toggleGridPagination=()=>{var e;const{self:i,participants:r}=this.meeting,{mobile:s,desktop:n}=(e=i.config)===null||e===void 0?void 0:e.maxVideoStreams,a=this.size==="sm"?s:n;r.joined.size<a?this.showPagination=!1:this.showPagination=!0},this.onParticipantJoin=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.onParticipantLeave=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.prevPage=()=>{if(this.meeting==null)return;const{participants:e}=this.meeting;this.page>1?e.setPage(this.page-=1):e.viewMode==="PAGINATED"&&e.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(this.meeting==null)return;const{participants:e}=this.meeting;this.page>0&&this.page<this.pageCount?e.setPage(this.page+=1):e.count>0&&this.pageCount===0&&e.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=H,this.t=W(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(this.meeting==null)return;const{participants:t}=this.meeting;t.removeListener("pageChanged",this.onPageChanged),t.removeListener("viewModeChanged",this.onPageChanged),t.joined.removeListener("participantJoined",this.onParticipantJoin),t.joined.removeListener("participantLeft",this.onParticipantLeave)}meetingChanged(t){if(t!=null){const{participants:e}=t;this.page=e.currentPage,this.pageCount=e.pageCount,e.addListener("viewModeChanged",this.onPageChanged),e.addListener("pageChanged",this.onPageChanged),e.joined.addListener("participantJoined",this.onParticipantJoin),e.joined.addListener("participantLeft",this.onParticipantLeave),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){const t=this.meeting.meta.viewType==="WEBINAR";if(!(this.meeting.meta.viewType==="AUDIO_ROOM"||t||!this.showPagination))return d(z,null,d("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:this.pageCount===0,onClick:this.prevPage,"aria-label":this.t("page.prev"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),this.variant!=="grid"&&d("div",{class:"center"},d("span",{class:"page"},this.pageCount===0?d("dyte-tooltip",{label:this.t("layout.auto"),iconPack:this.iconPack,t:this.t},d("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),this.pageCount!==0&&[d("span",{class:"slash"},"/"),d("span",{class:"pages"},this.pageCount)]),this.variant==="grid"&&this.pageCount>0&&d("div",{class:"dots"},[...Array(this.pageCount)].map((i,r)=>d("div",{key:`dot-${r}`,class:{dot:!0,active:r+1===this.page}}))),d("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:this.page!==0&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("page.next"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};xA.style=gF;var mF=Object.freeze({__proto__:null,dyte_grid_pagination:xA});const fF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{display:none !important}}",EA=class{constructor(t){V(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Ke,this.states=void 0,this.iconPack=H,this.t=W(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return d(z,null,!this.disableRender&&d(Be,{element:"dyte-header",defaults:t,onlyChildren:!0}),d("slot",null))}};EA.style=fF;var vF=Object.freeze({__proto__:null,dyte_header:EA});const yF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-8, 32px)}dyte-logo.loaded{height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",TA=class{constructor(t){V(this,t),this.meeting=void 0,this.config=Ke,this.iconPack=H,this.t=W()}render(){return d(z,null,d("slot",null,d("div",{class:"ctr",part:"container"},d("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),d("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};TA.style=yF;var bF=Object.freeze({__proto__:null,dyte_idle_screen:TA});const wF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}.image{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}",CA=class{constructor(t){V(this,t),this.onPreview=re(this,"preview",7),this.url=void 0,this.iconPack=H,this.t=W(),this.status="loading"}render(){return d("div",{class:{image:!0,loaded:this.status==="loaded"}},d("img",{src:cg(this.url),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&this.onPreview.emit(this.url)}}),this.status==="loading"&&d("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},d("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&d("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},d("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&d("div",{class:"actions"},d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.onPreview.emit(this.url)},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.full_screen_maximize})),d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>lg(this.url,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))}};CA.style=wF;var kF=Object.freeze({__proto__:null,dyte_image_message_view:CA});const _F=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}`,PA=class{constructor(t){V(this,t),this.close=re(this,"close",7),this.keypressListener=e=>{e.key==="Escape"&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=W(),this.iconPack=H}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return d(z,{class:"scrollbar",onClick:t=>t.stopPropagation()},d("div",{class:"header"},d("div",{class:"shared-by-user"},this.t("chat.img.shared_by")," ",d("span",{class:"displayName"},As(ls(this.image.displayName)))),d("div",{class:"actions"},d("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.full_screen_minimize,iconPack:this.iconPack,t:this.t})),d("dyte-button",{onClick:()=>lg(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"))),d("div",{class:"image-ctr"},d("img",{src:this.image.link})))}};PA.style=_F;var SF=Object.freeze({__proto__:null,dyte_image_viewer:PA});const xF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",RA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),G.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=H,this.t=W()}render(){const t=this.t("leave");return d(z,{label:t},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave",onClick:this.leave,icon:this.iconPack.call_end,label:t,variant:this.variant,part:"controlbar-button"}))}};RA.style=xF;var EF=Object.freeze({__proto__:null,dyte_leave_button:RA});const TF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",IA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),G.activeLeaveConfirmation=!1},this.handleLeave=()=>{var e;(e=this.meeting)===null||e===void 0||e.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.roomName,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var e;(e=this.meeting)===null||e===void 0||e.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=H,this.t=W(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}meetingChanged(t){t!=null&&(this.canEndMeeting=t.self.permissions.kickParticipant,this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some(e=>e.id===t.meta.roomName),this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting)}render(){return d(z,null,d("div",{class:"leave-modal"},d("div",{class:"header"},d("h2",{class:"title"},this.t("leave"))),d("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),d("div",{class:"content"},d("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&d("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),d("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&d("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end.all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};IA.style=TF;var CF=Object.freeze({__proto__:null,dyte_leave_meeting:IA});const PF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",AA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.dyteAPIError=re(this,"dyteAPIError",7),this.livestreamStateListener=e=>{this.livestreamState=e,(e==="LIVESTREAMING"||e==="IDLE")&&(this.stateUpdate.emit({activeMoreMenu:!1}),G.activeMoreMenu=!1)},this.isLoading=()=>this.meeting==null||this.livestreamState==="STARTING"||this.livestreamState==="STOPPING",this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(t){var e,i;t!=null&&(this.livestreamState=(e=this.meeting.livestream)===null||e===void 0?void 0:e.state,(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var t,e;if(this.livestreamState==="LIVESTREAMING")try{await((t=this.meeting.livestream)===null||t===void 0?void 0:t.stop())}catch{this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("livestream.error.stop")})}else try{await((e=this.meeting.livestream)===null||e===void 0?void 0:e.start())}catch{this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("livestream.error.start")})}}clearListeners(){var t;(t=this.meeting.livestream)===null||t===void 0||t.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("livestream.go_live");case"LIVESTREAMING":return this.t("livestream.end_live");case"STARTING":return this.t("livestream.starting");case"STOPPING":return this.t("livestream.stopping");default:return this.t("livestream.error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":return this.iconPack.start_livestream;case"LIVESTREAMING":return this.iconPack.stop_livestream;case"STARTING":case"STOPPING":default:return this.iconPack.stop_livestream}}render(){if(!!Y3(this.meeting))return d(z,null,d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":this.livestreamState==="LIVESTREAMING"},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};AA.style=PF;var RF=Object.freeze({__proto__:null,dyte_livestream_toggle:AA});const IF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}",MA=class{constructor(t){V(this,t),this.meeting=void 0,this.iconPack=H,this.t=W()}render(){var t;const e=(t=this.meeting)===null||t===void 0?void 0:t.meta.meetingTitle;return e==null?null:d(z,{tabIndex:0,role:"banner","aria-label":e},d("dyte-tooltip",{label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},d("div",{class:"title",part:"title"},e)))}};MA.style=IF;var AF=Object.freeze({__proto__:null,dyte_meeting_title:MA}),MF="[object Symbol]";function DF(t){return typeof t=="symbol"||fu(t)&&og(t)==MF}var OF=/\s/;function LF(t){for(var e=t.length;e--&&OF.test(t.charAt(e)););return e}var NF=/^\s+/;function UF(t){return t&&t.slice(0,LF(t)+1).replace(NF,"")}var zE=0/0,jF=/^[-+]0x[0-9a-f]+$/i,$F=/^0b[01]+$/i,zF=/^0o[0-7]+$/i,FF=parseInt;function FE(t){if(typeof t=="number")return t;if(DF(t))return zE;if(Bn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Bn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=UF(t);var i=$F.test(t);return i||zF.test(t)?FF(t.slice(2),i?2:8):jF.test(t)?zE:+t}var ob=function(){return kd.Date.now()},VF="Expected a function",BF=Math.max,HF=Math.min;function q_(t,e,i){var r,s,n,a,o,c,u=0,l=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(VF);e=FE(e)||0,Bn(i)&&(l=!!i.leading,p="maxWait"in i,n=p?BF(FE(i.maxWait)||0,e):n,m="trailing"in i?!!i.trailing:m);function y(B){var Y=r,X=s;return r=s=void 0,u=B,a=t.apply(X,Y),a}function b(B){return u=B,o=setTimeout(k,e),l?y(B):a}function S(B){var Y=B-c,X=B-u,be=e-Y;return p?HF(be,n-X):be}function E(B){var Y=B-c,X=B-u;return c===void 0||Y>=e||Y<0||p&&X>=n}function k(){var B=ob();if(E(B))return T(B);o=setTimeout(k,S(B))}function T(B){return o=void 0,m&&r?y(B):(r=s=void 0,a)}function I(){o!==void 0&&clearTimeout(o),u=0,r=c=s=o=void 0}function O(){return o===void 0?a:T(ob())}function q(){var B=ob(),Y=E(B);if(r=arguments,s=this,c=B,Y){if(o===void 0)return b(c);if(p)return clearTimeout(o),o=setTimeout(k,e),y(c)}return o===void 0&&(o=setTimeout(k,e)),a}return q.cancel=I,q.flush=O,q}const WF=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.loading{cursor:wait}.content-wrapper{height:100%;overflow-y:auto;position:relative;contain:strict}.scroller{width:1px;opacity:0}.content{position:absolute;top:0;width:100%}.smallest-dom-element{width:100%;height:2px;background:red}.loader{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;justify-content:center}`,GF=20,sh=5,DA=class{constructor(t){V(this,t),this.sizes=new Map,this.lastScrollTop=0,this.scrollToBottomRetries=0,this.elementObserver=(()=>{let e=null;const i=()=>e||(typeof ResizeObserver<"u"?e=new ResizeObserver(r=>{r.forEach(s=>{this.measureElement(s.target,s)})}):null);return{disconnect:()=>{var r;return(r=i())===null||r===void 0?void 0:r.disconnect()},observe:r=>{var s;return(s=i())===null||s===void 0?void 0:s.observe(r,{box:"border-box"})},unobserve:r=>{var s;return(s=i())===null||s===void 0?void 0:s.unobserve(r)}}})(),this.measureElement=(e,i)=>{if(!e)return;const r=e.dataset.id;if(this.sizes.has(r)){this.elementObserver.unobserve(e);return}if(i){const n=i.borderBoxSize[0];if(n&&n.blockSize>0){this.saveItemSize(r,n.blockSize),this.elementObserver.unobserve(e);return}}const s=e.getBoundingClientRect();s.height>0&&this.saveItemSize(r,s.height)},this.getVisibleItems=()=>this.messages.slice(this.range.start,this.range.end+1),this.updateVisibleItems=(e,i)=>{const r=this.messages.length;let s=e,n=i;r<=this.visibleItemsCount?(s=0,n=r-1):i-e<this.visibleItemsCount-1&&(s=this.range.end-this.visibleItemsCount+1),this.range.start!==s&&(this.range={start:s,end:n},this.totalHeight=this.getRangeSize(0,r))},this.getEstimatedItemSize=()=>this.estimateItemSize,this.getRangeSize=(e,i)=>{let r=0,s=0;for(let n=e;n<i;n++)s=this.sizes.get(this.messages[n].id),r=r+(s||this.getEstimatedItemSize());return r},this.getScrollTop=()=>this.$listRef?Math.ceil(this.$listRef.scrollTop):0,this.getClientHeight=()=>this.$listRef?Math.ceil(this.$listRef.clientHeight):0,this.getScrollHeight=()=>this.$listRef?Math.ceil(this.$listRef.scrollHeight):0,this.getItemsScrolled=()=>{const e=this.lastScrollTop;if(e<=0)return 0;let i=0,r=0,s=0,n=this.messages.length;for(;i<=n;){if(r=i+n>>>1,s=this.getRangeSize(0,r),s===e)return r;s<e?i=r+1:s>e&&(n=r-1)}return i>0?--i:0},this.getEndByStart=e=>Math.min(e+this.visibleItemsCount,this.messages.length-1),this.scrollToOffset=e=>{this.$listRef&&(this.$listRef.scrollTop=e)},this.scrollToIndex=e=>{if(e>=this.messages.length-1)this.scrollToBottom();else{const i=e<1?0:this.getRangeSize(0,e);this.scrollToOffset(i)}},this.scrollToBottom=()=>{!this.$listEndRef||Mi(()=>{this.$listEndRef.scrollIntoView(),this.getScrollHeight()-(this.getScrollTop()+this.getClientHeight())>0&&this.scrollToBottomRetries<10?setTimeout(()=>{this.scrollToBottom()},1e3/60):(this.scrollToBottomRetries=0,this.autoScroll=!0)})},this.handleScroll=async()=>{if(this.isFetching)return;const e=this.getScrollTop(),i=e<this.lastScrollTop||e===0?"UP":"DOWN";if(this.lastScrollTop=e,this.loadMore&&e===0&&i==="UP"&&this.isFetching===!1){this.isFetching=!0;const r=await this.loadMore(this.messages[0]);r&&r.length&&(this.messages=[...r,...this.messages]),this.isFetching=!1}i==="UP"?this.handleTop():i==="DOWN"&&this.handleBottom()},this.handleTop=()=>{const e=this.getItemsScrolled();if(e<=this.range.end-sh&&(this.autoScroll=!1),e>this.range.start+sh)return;const i=Math.max(this.range.start-sh,0);this.updateVisibleItems(i,this.getEndByStart(i))},this.handleBottom=()=>{if(this.getItemsScrolled()<this.range.start+sh)return;const i=this.range.start+sh,r=this.getEndByStart(i);r===this.messages.length-1?this.updateVisibleItems(r-this.visibleItemsCount,r):this.updateVisibleItems(i,r)},this.updateTotalHeight=q_(()=>{this.totalHeight=this.getRangeSize(0,this.messages.length)},1e3/30,{leading:!0}),this.rendererInternal=(e,i,r)=>{if(!e||e.dataset.id===i.id)return;const s=this.renderer(i,r);e.hasChildNodes&&(e.innerHTML=""),this.elementObserver.observe(e),e.dataset.id=i.id,e.appendChild(s)},this.messages=void 0,this.renderer=void 0,this.loadMore=void 0,this.visibleItemsCount=GF,this.estimateItemSize=100,this.iconPack=H,this.range=void 0,this.isFetching=!1,this.autoScroll=!0,this.totalHeight=0}connectedCallback(){const t=this.messages.length-1;this.range={start:t-this.visibleItemsCount,end:t},this.updateVisibleItems(this.range.start,this.range.end),this.totalHeight=this.getRangeSize(0,t)}componentDidLoad(){this.autoScroll&&this.scrollToBottom()}messagesUpdated(t,e){if(t.length>e.length){const i=t.length-e.length;this.updateVisibleItems(i,this.getEndByStart(i)),this.scrollToIndex(this.range.start)}}saveItemSize(t,e){this.sizes.set(t,Math.round(e)),this.updateTotalHeight()}render(){return d("div",{class:"scrollbar content-wrapper",ref:t=>this.$listRef=t,onScroll:this.handleScroll},d("div",{class:"scroller"},d("div",{style:{height:`${this.totalHeight}px`}}),d("div",{class:"smallest-dom-element",id:"list-end",ref:t=>this.$listEndRef=t})),d("div",{class:"content",style:{transform:`translateY(${this.getRangeSize(0,this.range.start)}px)`}},this.isFetching&&d("div",{class:"loader"},d("dyte-spinner",{size:"md"})),this.getVisibleItems().map((t,e)=>d("div",{key:t.id,ref:i=>this.rendererInternal(i,t,e)}))))}static get watchers(){return{messages:["messagesUpdated"]}}};DA.style=WF;var qF=Object.freeze({__proto__:null,dyte_message_list_view:DA});const JF=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.message-wrapper{display:flex;flex-direction:row-reverse;gap:var(--dyte-space-2, 8px)}.message-wrapper.incoming{flex-direction:row}.message{display:flex;flex-direction:column}.header{margin-bottom:var(--dyte-space-1, 4px);align-self:flex-end;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));font-size:14px;font-weight:600}.incoming .header{align-self:flex-start}.body{display:flex;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));font-size:14px;line-height:1.375;position:relative}.body .metadata{margin-top:var(--dyte-space-1, 4px);align-self:flex-end;font-size:10px}.body:hover dyte-menu{visibility:visible}.bubble{max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-md, 8px)}.incoming .bubble{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.avatar{display:none}dyte-menu{position:absolute;right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);border-radius:var(--dyte-border-radius-lg, 12px);visibility:hidden}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.actions{display:flex;align-items:center;justify-content:center;padding-left:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background:radial-gradient(
    at top right,
    rgb(var(--dyte-colors-brand-300, 73 124 253)) 60%,
    rgba(255, 255, 255, 0) 80%
  )}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.incoming .actions{background:radial-gradient(
      at top right,
      rgb(var(--dyte-colors-background-600, 60 60 60)) 60%,
      rgba(255, 255, 255, 0) 80%
    )}.incoming dyte-avatar{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px}}`,OA=class{constructor(t){V(this,t),this.onAction=re(this,"action",7),this.actions=[],this.variant="bubble",this.viewType="outgoing",this.avatarUrl=void 0,this.hideAvatar=!1,this.authorName=void 0,this.hideAuthorName=!1,this.hideMetadata=!1,this.time=void 0,this.iconPack=H}renderActions(){return d("dyte-menu",{placement:"top-end"},d("button",{slot:"trigger",class:"actions"},d("dyte-icon",{icon:this.iconPack.chevron_down})),d("dyte-menu-list",null,this.actions.map(t=>d("dyte-menu-item",{onClick:()=>this.onAction.emit(t.id)},t.icon&&d("dyte-icon",{icon:t.icon,slot:"start"}),t.label))))}render(){return d(z,null,d("div",{class:{"message-wrapper":!0,[this.viewType]:!0}},!this.hideAvatar&&d("aside",{class:"avatar"},d("dyte-avatar",{participant:{name:this.authorName,picture:this.avatarUrl},size:"sm"})),d("div",{class:"message"},!this.hideAuthorName&&d("div",{class:"header"},this.authorName),d("div",{class:{body:!0,bubble:this.variant==="bubble"}},d("slot",null),!this.hideMetadata&&d("div",{class:"metadata",title:UI(this.time)},NI(this.time,new Date(Date.now()))),this.actions.length!==0&&this.renderActions()))))}};OA.style=JF;var KF=Object.freeze({__proto__:null,dyte_message_view:OA});const QF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",LA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:e})=>{this.audioEnabled=e},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{e==="audio"&&(this.micPermission=i)},this.toggleMic=()=>{var e,i,r,s,n,a,o,c,u,l,p,m;if((e=this.meeting)===null||e===void 0||e.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.audioEnabled),permission:this.micPermission,canProduce:(a=(n=(s=this.meeting)===null||s===void 0?void 0:s.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceAudio}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0?void 0:c.status},livestream:{stageStatus:(l=(u=this.meeting)===null||u===void 0?void 0:u.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((p=this.meeting)===null||p===void 0?void 0:p.self)}}),this.hasPermissionError()){const b={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:b}),G.activePermissionsMessage=b,!1}const y=(m=this.meeting)===null||m===void 0?void 0:m.self;y==null||!this.canProduceAudio||(y.audioEnabled?y.disableAudio():y.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s;(t=this.meeting)===null||t===void 0||t.self.removeListener("audioUpdate",this.audioUpdateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.stageStatusListener),(s=this.meeting)===null||s===void 0||s.self.permissions.removeListener("micPermissionUpdate",this.micPermissionUpdateListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.micPermission=t.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=e.audioEnabled,this.micPermissionUpdateListener=()=>{this.updateCanProduce(t),this.canProduceAudio||t.self.disableAudio()},t.self.permissions.on("micPermissionUpdate",this.micPermissionUpdateListener),e.addListener("audioUpdate",this.audioUpdateListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),i==null||i.addListener("stageStatusUpdate",this.stageStatusListener)}}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceAudio==="ALLOWED",n=i.viewType==="WEBINAR"||t.self.permissions.stageEnabled,a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,s&&!a&&!n?this.canProduceAudio=!0:(n||a)&&(s&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceAudio=!0),e.permissions.canProduceAudio==="CAN_REQUEST"&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canProduceAudio=!0))}hasPermissionError(){return this.micPermission==="DENIED"||this.micPermission==="SYSTEM_DENIED"}getState(){let t="",e="",i="",r={},s=this.hasPermissionError(),n=this.micPermission==="COULD_NOT_START";return this.audioEnabled&&!s?(e=this.t("mic_on"),i=this.iconPack.mic_on):(e=this.t("mic_off"),i=this.iconPack.mic_off,r["red-icon"]=!0),n?t=this.t("perm_could_not_start.audio"):this.micPermission==="SYSTEM_DENIED"?t=this.t("perm_sys_denied.audio"):this.micPermission==="DENIED"?t=this.t("perm_denied.audio"):t=this.audioEnabled?this.t("disable_mic"):this.t("enable_mic"),{tooltipLabel:t,label:e,icon:i,classList:r,showWarning:s||n,disable:s}}render(){if(!this.canProduceAudio)return null;const{tooltipLabel:t,label:e,icon:i,classList:r,showWarning:s,disable:n}=this.getState();return d(z,{title:e},d("dyte-tooltip",{kind:"block",label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:r,onClick:this.toggleMic,showWarning:s,disabled:n})))}static get watchers(){return{meeting:["meetingChanged"]}}};LA.style=QF;var YF=Object.freeze({__proto__:null,dyte_mic_toggle:LA});const ZF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}",NA=class{constructor(t){V(this,t),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Ke,this.iconPack=H,this.t=W(),this.gridSize=G_,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting.meta)===null||t===void 0||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)}meetingChanged(t){var e,i,r,s;t!=null&&(((e=t.meta)===null||e===void 0?void 0:e.selfActiveTab)!=null&&this.onActiveTabUpdate((i=t.meta.selfActiveTab)===null||i===void 0?void 0:i.type,(r=t.meta.selfActiveTab)===null||r===void 0?void 0:r.id),this.activeTabUpdateListener=n=>{this.onActiveTabUpdate(n==null?void 0:n.type,n==null?void 0:n.id)},(s=t.meta)===null||s===void 0||s.addListener("activeTabUpdate",this.activeTabUpdateListener))}screenShareParticipantsChanged(t=[]){!this.initialised&&this.activeTab!=null||(this.activeTab==null&&t.length>0?this.setActiveTab({type:"screenshare",participant:t[0]}):this.revalidateActiveTab())}pluginsChanged(t){if(!(!this.initialised&&this.activeTab!=null))if(t.length>0){const e=t.length-1;this.setActiveTab({type:"plugin",plugin:t[e]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(this.activeTab!=null)if(this.activeTab.type==="screenshare"){const{participant:t}=this.activeTab;this.screenShareParticipants.some(e=>e.id===t.id)||this.reassignActiveTab()}else{const{plugin:t}=this.activeTab;this.plugins.some(e=>e.id===t.id)||this.reassignActiveTab()}}setActiveTab(t,e=!0){var i;this.activeTab=t;const r=t.type==="screenshare"?t.participant.id:t.plugin.id;e&&((i=this.meeting.meta)===null||i===void 0||i.setSelfActiveTab({type:t.type,id:r},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const t=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[t]})}}onActiveTabUpdate(t,e){if(t!=null&&e!=null)switch(t){case"plugin":const i=this.plugins.find(s=>s.id===e);i!=null&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":const r=this.screenShareParticipants.find(s=>s.id===e);r!=null&&this.setActiveTab({type:"screenshare",participant:r},!1)}}getTabs(){const t=this.screenShareParticipants.map(i=>({type:"screenshare",participant:i})),e=this.plugins.map(i=>({type:"plugin",plugin:i}));return t.concat(e)}render(){var t,e;const i={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return d(z,null,d("main",{id:"main-view",part:"main-view"},((t=this.getTabs())===null||t===void 0?void 0:t.length)>1&&d("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:r=>this.setActiveTab(r.detail)},i)),d("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map(r=>{var s,n;return d(Be,{element:"dyte-screenshare-view",defaults:i,props:{participant:r,key:r.id,style:{display:((s=this.activeTab)===null||s===void 0?void 0:s.type)==="screenshare"&&((n=this.activeTab)===null||n===void 0?void 0:n.participant.id)===r.id?"flex":"none"}},childProps:{participant:r,isScreenShare:!0},deepProps:!0})}),this.plugins.map(r=>{var s,n;return d(Be,{element:"dyte-plugin-main",defaults:i,props:{plugin:r,key:r.id,style:{display:((s=this.activeTab)===null||s===void 0?void 0:s.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===r.id?"flex":"none"}}})}))),d(Be,{element:"dyte-mixed-grid",defaults:i,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:((e=this.meeting.meta)===null||e===void 0?void 0:e.viewType)==="AUDIO_ROOM"?"md":"sm",layout:"row"},onlyChildren:!0}))}get host(){return Pr(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};NA.style=ZF;var XF=Object.freeze({__proto__:null,dyte_mixed_grid:NA});const eV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:visible}.more-menu{position:absolute;right:calc(var(--dyte-space-24, 96px) * -1);bottom:var(--dyte-space-16, 64px);z-index:50;margin-bottom:var(--dyte-space-3, 12px);box-sizing:border-box;max-height:60vh;width:var(--dyte-space-64, 256px);overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));outline:2px solid transparent;outline-offset:2px}:host([size='sm']) .more-menu{bottom:var(--dyte-space-10, 40px)}.more-menu::-webkit-scrollbar{height:var(--dyte-space-0, 0px);width:var(--dyte-space-1\\.5, 6px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.more-menu::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",UA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.handleKeyDown=({key:e})=>{e==="Escape"&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),G.activeMoreMenu=!G.activeMoreMenu)},this.handleOnClick=e=>{!e.composedPath().includes(this.host)&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),G.activeMoreMenu=!G.activeMoreMenu)},this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!G.activeMoreMenu}),G.activeMoreMenu=!G.activeMoreMenu},this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W()}connectedCallback(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleOnClick)}disconnectedCallback(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleOnClick)}render(){const t=this.t("more");return d(z,{title:t},this.states.activeMoreMenu&&d("div",{class:"more-menu"},d("slot",{name:"more-elements"})),d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:e=>{e.stopPropagation(),this.toggleMoreMenu()},icon:this.iconPack.horizontal_dots,label:t,part:"controlbar-button"}),d("slot",{name:"expanded"}))}get host(){return Pr(this)}};UA.style=eV;var tV=Object.freeze({__proto__:null,dyte_more_toggle:UA});const iV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",jA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0})},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W()}render(){var t;if(!(!((t=this.meeting)===null||t===void 0)&&t.self.permissions.canDisableParticipantAudio))return null;const e=this.t("mute_all");return d(z,{title:e},d("dyte-tooltip",{kind:"block",label:e,part:"tooltip"},d("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}};jA.style=iV;var rV=Object.freeze({__proto__:null,dyte_mute_all_button:jA});const sV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.message{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}",$A=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),G.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var e;(e=this.meeting)===null||e===void 0||e.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=H,this.t=W(),this.allowUnmute=!0}render(){return d(z,null,d("div",{class:"leave-modal"},d("div",{class:"header"},d("h2",{class:"title"},this.t("mute_all.header"))),d("p",{class:"message"},this.t("mute_all.description")),d("div",{class:"content"},d("div",{class:"leave-meeting"},d("dyte-button",{variant:"secondary",title:this.t("close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),d("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};$A.style=sV;var nV=Object.freeze({__proto__:null,dyte_mute_all_confirmation:$A});const aV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}",zA=class{constructor(t){V(this,t),this.onMediaScoreUpdate=({kind:e,isScreenshare:i,score:r})=>{(e==="video"||this.isScreenShare&&i)&&(this.score=r)},this.participant=void 0,this.meeting=void 0,this.iconPack=H,this.t=W(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(t){!t||t.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var t;(t=this.participant)===null||t===void 0||t.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){if(this.meeting&&this.meeting.self.userId===this.participant.userId)return null;let t=Math.round(this.score/2),e="good";if(t>3)return null;switch(t<1&&(t=1),t){case 3:case 2:e="poor";break;case 1:e="poorest"}return d(z,null,d("dyte-icon",{icon:this.iconPack[`signal_${t}`],class:e}),d("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};zA.style=aV;var oV=Object.freeze({__proto__:null,dyte_network_indicator:zA});const cV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",FA=class{constructor(t){V(this,t),this.disconnectMeeting=e=>{e!=null&&this.countListener!=null&&(e.participants.joined.removeListener("participantJoined",this.countListener),e.participants.joined.removeListener("participantLeft",this.countListener),(e==null?void 0:e.stage)&&this.stageUpdateListener&&e.stage.removeListener("stageStatusUpdate",this.stageUpdateListener),e.self.removeListener("roomJoined",this.countListener))},this.meeting=void 0,this.iconPack=H,this.t=W(),this.size=void 0,this.participantCount=0,this.isViewer=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){this.disconnectMeeting(e),t!=null&&(this.countListener=()=>{this.participantCount=t.participants.joined.size+(t.self.roomJoined?1:0)},this.countListener(),this.isViewer=rd(this.meeting),t.participants.joined.addListener("participantJoined",this.countListener),t.participants.joined.addListener("participantLeft",this.countListener),t!=null&&t.stage&&(this.stageUpdateListener=()=>{this.isViewer=rd(this.meeting)},t==null||t.stage.addListener("stageStatusUpdate",this.stageUpdateListener)),t.self.addListener("roomJoined",this.countListener))}render(){return this.isViewer?null:d(z,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},d("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};FA.style=cV;var dV=Object.freeze({__proto__:null,dyte_participant_count:FA});const lV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}",VA=class{constructor(t){V(this,t),this.onVideoUpdate=e=>{this.videoState=e},this.onPinned=({isPinned:e})=>{this.isPinned=e},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=Ke,this.variant="solid",this.size=void 0,this.iconPack=H,this.t=W()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned))}async participantsChanged(t){t!=null&&(this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.isPinned=t.isPinned,t.addListener("videoUpdate",this.onVideoUpdate),t.addListener("pinned",this.onPinned),t.addListener("unpinned",this.onPinned))}videoStateChanged(t){if(t!=null&&this.videoEl!=null)if(t.videoEnabled){const e=new MediaStream;e.addTrack(t.videoTrack),this.videoEl.srcObject=e}else this.videoEl.srcObject=void 0}isMirrored(){var t;if(this.participant!=null&&("preview"in this.participant||this.isPreview)){const i=this.states||G,r=(t=i==null?void 0:i.prefs)===null||t===void 0?void 0:t.mirrorVideo;if(typeof r=="boolean")return r}return!1}render(){var t,e,i,r;return d(z,null,d("video",{ref:s=>this.videoEl=s,class:{visible:(t=this.videoState)===null||t===void 0?void 0:t.videoEnabled,mirror:this.isMirrored(),[(r=(i=(e=this.config)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&d("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t}),d("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};VA.style=lV;var uV=Object.freeze({__proto__:null,dyte_participant_setup:VA});const hV=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}`,BA=class{constructor(e){V(this,e),this.onSearchInput=i=>{this.search=i.target.value},this.meeting=void 0,this.states=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.t=W(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting!=null}meetingChanged(e){e!=null}render(){const e={meeting:this.meeting,states:this.states||G,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return d(z,null,d("div",{class:"search",part:"search"},d("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),d("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),d("slot",{name:"start"}),d("div",{class:"ctr scrollbar",part:"container"},d(Be,{element:"dyte-participants-waiting-list",defaults:e}),d(Be,{element:"dyte-participants-stage-queue",defaults:e}),d(Be,{element:"dyte-participants-stage-list",defaults:e,props:{search:this.search}}),d(Be,{element:"dyte-participants-viewer-list",defaults:e,props:{search:this.search}})),d("slot",{name:"end"}))}static get watchers(){return{meeting:["meetingChanged"]}}};BA.style=hV;var pV=Object.freeze({__proto__:null,dyte_participants:BA});const jp=console;class gV{constructor(e){this.meeting=e,this.audio=document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(e,i){this.audioTracks.some(r=>r.id===e)||(this.audioTracks.push({id:e,track:i}),this.audioStream.addTrack(i),this.play())}removeTrack(e){const i=this.audioTracks.find(r=>r.id===e);i!=null&&(this.audioStream.removeTrack(i.track),this.audioTracks=this.audioTracks.filter(r=>r.id!==e))}async play(){var e;this.audio.srcObject=this.audioStream,await((e=this.audio.play())===null||e===void 0?void 0:e.catch(i=>{i.name==="NotAllowedError"?this._onError!=null&&this._onError():i.name!=="AbortError"&&jp.error(`[dyte-audio] play() error
`,i)}))}async setDevice(e){var i,r,s;yv(this.meeting)||await((s=(r=(i=this.audio).setSinkId)===null||r===void 0?void 0:r.call(i,e))===null||s===void 0?void 0:s.catch(n=>{jp.error(`[dyte-audio] setSinkId() error
`,n)}))}onError(e){this._onError=e}}const mV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}",HA=class{constructor(t){V(this,t),this.dialogClose=re(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=H,this.t=W(),this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.meeting!=null&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&((t=this.meeting.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}setupAudio(){this.audio=new gV(this.meeting)}async handleAutoPlayError(){this.audio||this.setupAudio(),this.audio.onError(()=>{this.showPlayDialog=!0}),this.audio.play()}async handleEvents(t){const e=t.self.getCurrentDevices();e.speaker!=null&&await this.audio.setDevice(e.speaker.deviceId),this.audioUpdateListener=({id:r,audioEnabled:s,audioTrack:n})=>{const a=`audio-${r}`;s&&n!=null?this.audio.addTrack(a,n):this.audio.removeTrack(a)};const i=t.participants.joined.toArray();for(const r of i)this.audioUpdateListener(r);this.participantLeftListener=({id:r})=>{this.audio.removeTrack(`audio-${r}`),this.audio.removeTrack(`screenshare-${r}`)},this.screenShareUpdateListener=({id:r,screenShareEnabled:s,screenShareTracks:n})=>{const a=`screenshare-${r}`;s&&n.audio!=null?this.audio.addTrack(a,n.audio):this.audio.removeTrack(a)},this.deviceUpdateListener=({device:r,preview:s})=>{s||r.kind==="audiooutput"&&this.audio.setDevice(r.deviceId)},t.participants.joined.addListener("audioUpdate",this.audioUpdateListener),t.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener)}async meetingChanged(t){var e;t!=null&&(this.setupAudio(),rd(t)?(this.stageStatusUpdateListener=async i=>{i==="ON_STAGE"&&await this.handleAutoPlayError()},(e=t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.stageStatusUpdateListener)):await this.handleAutoPlayError(),await this.handleEvents(t))}render(){return d(z,null,this.showPlayDialog&&d("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,disableEscapeKey:!0,iconPack:this.iconPack,t:this.t},d("div",{class:"modal"},d("h3",null,this.t("audio_playback.title")),d("p",null,this.t("audio_playback.description")),d("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};HA.style=mV;var fV=Object.freeze({__proto__:null,dyte_participants_audio:HA});const vV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}",WA=class{constructor(t){V(this,t),this.updateStageList=()=>{var e,i,r;((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="LIVESTREAM"?this.showStageList=((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE":this.showStageList=!0,this.getParticipants(this.search)},this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.view="sidebar",this.t=W(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.meeting!=null&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.getParticipants),e==null||e.removeListener("stageStatusUpdate",this.updateStageList))}meetingChanged(t){t!=null&&(this.participantJoinedListener=e=>{if(e.stageStatus!=="ON_STAGE")return;const i=this.search.toLowerCase();!e.name.toLowerCase().includes(i)||!e.id.toLowerCase().includes(i)||(this.participants=[...this.participants.filter(r=>r.id!==e.id),e])},this.participantLeftListener=e=>{this.participants=this.participants.filter(i=>i.id!==e.id)},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),this.updateStageList(),t==null||t.participants.joined.on("stageStatusUpdate",this.updateStageList),t==null||t.stage.on("stageStatusUpdate",this.updateStageList))}searchChanged(t){this.getParticipants(t)}getParticipants(t=this.search){let e=this.meeting.stage.status==="ON_STAGE"?[this.meeting.self]:[];e=[...e,...this.meeting.participants.joined.toArray().filter(i=>i.stageStatus==="ON_STAGE")],t===""?this.participants=e:this.participants=e.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(t.toLowerCase())})}render(){if(!this.showStageList)return;const t={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:G,size:this.size,iconPack:this.iconPack};return d(z,null,d("div",{class:"participants-container"},d("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),d("ul",{class:"participants",part:"participants"},this.participants.map(e=>d(Be,{element:"dyte-participant",defaults:t,props:{role:"listitem",participant:e},childProps:Object.assign(Object.assign({},t),{participant:e,size:this.size}),deepProps:!0})),this.participants.length===0&&d("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("search.could_not_find"):this.t("search.empty")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};WA.style=vV;var yV=Object.freeze({__proto__:null,dyte_participants_stage_list:WA});const bV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",GA=class{constructor(t){V(this,t),this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(e=>e.stageStatus==="REQUESTED_TO_JOIN_STAGE")},this.acceptStageRequest=async e=>{const{userId:i}=e;await this.meeting.stage.grantAccess([i]),this.updateStageRequestedParticipants()},this.rejectStageRequest=async e=>{const{userId:i}=e;await this.meeting.stage.denyAccess([i]),this.updateStageRequestedParticipants()},this.acceptAllStageRequest=async()=>{await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map(e=>e.userId)),this.updateStageRequestedParticipants()},this.denyAllStageRequest=async()=>{var e;await((e=this.meeting.stage)===null||e===void 0?void 0:e.denyAccess(this.stageRequestedParticipants.map(i=>i.userId))),this.updateStageRequestedParticipants()},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async e=>{var i,r,s,n;this.meeting.meta.viewType==="WEBINAR"?this.stageRequestedParticipants=(i=[this.meeting.self,...this.meeting.participants.joined.toArray()])===null||i===void 0?void 0:i.filter(a=>a.stageStatus==="REQUESTED_TO_JOIN_STAGE"):this.meeting.meta.viewType==="LIVESTREAM"&&this.meeting.self.permissions.acceptPresentRequests&&(e||(e=(n=(s=await((r=this.meeting.stage)===null||r===void 0?void 0:r.getAccessRequests()))===null||s===void 0?void 0:s.stageRequests)!==null&&n!==void 0?n:[]),this.stageRequestedParticipants=e.map(a=>Object.assign(Object.assign({},a),{name:a.displayName})))},this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.view="sidebar",this.t=W(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantLeftListener&&t.joined.removeListener("participantLeft",this.participantLeftListener),e==null||e.removeListener("stageAccessRequestUpdate",this.updateRequestList)}meetingChanged(t){var e;t!=null&&(this.participantLeftListener=i=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!==i.id)},this.updateRequestList(),(e=t.stage)===null||e===void 0||e.on("stageAccessRequestUpdate",this.updateRequestList),t.participants.joined.addListener("participantLeft",this.participantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowStageRequests()))return d("div",{class:"stage-requested-participants"},d("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),d("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map(t=>d("li",{class:"waiting-participant",key:t.id},d("div",{class:"participant-details"},d("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),d("p",{class:"name",title:t.name},t.name)),d("div",{class:"waitlist-controls"},d("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t),iconPack:this.iconPack,t:this.t},d("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),d("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(t)},d("dyte-icon",{class:"accept",icon:this.iconPack.checkmark}))))))),d("div",{class:"bulk-actions"},d("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),d("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};GA.style=bV;var wV=Object.freeze({__proto__:null,dyte_participants_stage_queue:GA});const kV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}",qA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.updateStageRequests=async e=>{var i,r,s;if(this.meeting.meta.viewType==="LIVESTREAM")e||(e=(s=(r=await((i=this.meeting.stage)===null||i===void 0?void 0:i.getAccessRequests()))===null||r===void 0?void 0:r.stageRequests)!==null&&s!==void 0?s:[]),this.stageRequestedParticipants=e;else{const n=this.meeting.participants.joined.toArray().filter(a=>a.stageStatus==="REQUESTED_TO_JOIN_STAGE");this.stageRequestedParticipants=this.meeting.stage.status==="REQUESTED_TO_JOIN_STAGE"?[this.meeting.self]:[],this.stageRequestedParticipants=[...this.stageRequestedParticipants,...n]}this.updateBadgeCount()},this.updateBadgeCount=()=>{this.badgeCount=this.waitlistedParticipants.length+this.stageRequestedParticipants.length},this.updateCanView=()=>{this.canViewParticipants=ww(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.badgeCount=0,this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),bu("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i,r;this.meeting!=null&&((e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),(i=this.meeting.stage)===null||i===void 0||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests),(r=this.meeting.participants)===null||r===void 0||r.joined.removeListener("stageStatusUpdate",this.updateStageRequests))}meetingChanged(t){var e;t!=null&&(this.canViewParticipants=ww(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView),t.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=i=>{this.waitlistedParticipants.some(r=>r.id===i.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,i],this.updateBadgeCount())},this.waitlistedParticipantLeftListener=i=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(r=>r.id!==i.id),this.updateBadgeCount()},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.acceptPresentRequests&&(this.updateStageRequests(),t==null||t.stage.on("stageAccessRequestUpdate",this.updateStageRequests),t==null||t.participants.joined.on("stageStatusUpdate",this.updateStageRequests)),this.updateBadgeCount())}statesChanged(t){const e=t||G;e!=null&&(this.participantsActive=e.activeSidebar===!0&&e.sidebar==="participants")}toggleParticipantsTab(){const t=this.states||G;this.participantsActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="participants"),G.activeSidebar=this.participantsActive,G.sidebar=this.participantsActive?"participants":void 0,this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":void 0,activeMoreMenu:!1,activeAI:!1}),G.activeMoreMenu=!1}render(){if(!this.canViewParticipants)return;const t=this.t("participants");return d(z,{title:t},this.badgeCount!==0&&!this.participantsActive&&d("div",{class:"waiting-participants-count",part:"waiting-participants-count"},d("span",null,this.badgeCount<=100?this.badgeCount:"99+")),d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};qA.style=kV;var _V=Object.freeze({__proto__:null,dyte_participants_toggle:qA});const SV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",JA=class{constructor(t){V(this,t),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>this.meeting.meta.viewType==="WEBINAR",this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.view="sidebar",this.search="",this.t=W(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(t){t!=null&&(this.participantJoinedListener=e=>{if(e.stageStatus==="ON_STAGE")return;const i=this.search.toLowerCase();!e.name.toLowerCase().includes(i)||!e.id.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter(r=>r.id!==e.id),e])},this.participantLeftListener=e=>{this.stageViewers=this.stageViewers.filter(i=>i.id!==e.id)},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.on("stageStatusUpdate",this.updateStageViewers),t.stage.on("stageStatusUpdate",this.updateStageViewers))}searchChanged(t){this.getViewers(t)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageViewers),e.removeListener("stageStatusUpdate",this.updateStageViewers)}getViewers(t){let e=this.meeting.stage.status==="ON_STAGE"?[]:[this.meeting.self];e=[...e,...this.meeting.participants.joined.toArray()].filter(i=>i.stageStatus!=="ON_STAGE"),t===""?this.stageViewers=e:this.stageViewers=e.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(t.toLowerCase())})}render(){if(!(this.view!=="sidebar"||!this.shouldShowViewers()))return d("div",{class:"list"},d("div",{class:"heading-count",part:"heading-count"},this.t("viewers")," (",this.stageViewers.length,")"),d("ul",{class:"participants",part:"participants"},this.stageViewers.map(t=>{if(t.stageStatus!=="ON_STAGE")return d("dyte-participant",{role:"listitem",key:t.id,meeting:this.meeting,participant:t,view:this.view,iconPack:this.iconPack,config:this.config,t:this.t})}),this.stageViewers.length===0&&d("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("participants.errors.empty_results"):this.t("participants.empty_list"))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};JA.style=SV;var xV=Object.freeze({__proto__:null,dyte_participants_viewer_list:JA});const EV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",KA=class{constructor(t){V(this,t),this.acceptWaitingRoomRequest=async e=>{await this.meeting.participants.acceptWaitingRoomRequest(e)},this.acceptAllWaitingRoomRequests=async()=>{await this.meeting.participants.acceptAllWaitingRoomRequest(this.waitlistedParticipants.map(e=>e.id))},this.rejectWaitingRoomRequest=async e=>{await this.meeting.participants.rejectWaitingRoomRequest(e)},this.shouldShowWaitlist=()=>this.meeting.meta.viewType==="LIVESTREAM"?!1:this.meeting.self.permissions.acceptWaitingRequests&&this.waitlistedParticipants.length!==0,this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.view="sidebar",this.t=W(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:t}=this.meeting;this.waitlistedParticipantJoinedListener&&t.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&t.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t!=null&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=e=>{this.waitlistedParticipants.some(i=>i.id===e.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,e])},this.waitlistedParticipantLeftListener=e=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(i=>i.id!==e.id)},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowWaitlist()))return d("div",{class:"waiting-participants"},d("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),d("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map(t=>d("li",{class:"waiting-participant",key:t.id},d("div",{class:"participant-details"},d("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),d("p",{class:"name",title:t.name},t.name)),d("div",{class:"waitlist-controls"},d("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(t.id)},d("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),d("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(t.id)},d("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}))))))),d("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};KA.style=EV;var TV=Object.freeze({__proto__:null,dyte_participants_waiting_list:KA});const CV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;width:560px;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}",QA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),G.activePermissionsMessage={enabled:!1}},this.reload=()=>{typeof window<"u"&&window.location.reload()},this.meeting=void 0,this.t=W(),this.iconPack=H,this.states=void 0,this.device=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t!=null&&(this.device=t.self.device)}getLink(t){let e;switch(t){case"audio":e="microphone";break;case"video":e="camera";break;default:e="screenshare";break}const i="https://www.google.com/search?q=";let r=`Allow+${e}+access`;if(this.device!=null){const{browserName:s,isMobile:n}=this.device;r+="+"+s,n&&(r+="+mobile")}return i+r}isDeniedBySystem(){var t;const e=(t=this.meeting)===null||t===void 0?void 0:t.self.mediaPermissions;return e==null?!1:!!Object.values(e).includes("SYSTEM_DENIED")}getTitle(){var t,e,i;const r=this.isDeniedBySystem(),s=(i=(e=(t=this.states)===null||t===void 0?void 0:t.activePermissionsMessage)===null||e===void 0?void 0:e.kind)!==null&&i!==void 0?i:"audio";return r?this.t(`perm_sys_denied.${s}`):this.t(`perm_denied.${s}`)}getMessage(){var t,e,i,r;const{browserName:s,osName:n}=this.meeting.self.device,a=this.isDeniedBySystem(),o=(t=s.toLowerCase())!==null&&t!==void 0?t:"others",c=n!=null?n:"others",u=(r=(i=(e=this.states)===null||e===void 0?void 0:e.activePermissionsMessage)===null||i===void 0?void 0:i.kind)!==null&&r!==void 0?r:"audio";return a?this.t(`perm_sys_denied.${u}.${c}.message`):this.t(`perm_denied.${u}.${o}.message`)}render(){var t,e,i;const r=this.isDeniedBySystem();return d(z,null,d("h2",null,d("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),this.getTitle()),d("p",null,this.getMessage()),!r&&d("a",{class:"need-help-link",href:this.getLink((i=(e=(t=this.states)===null||t===void 0?void 0:t.activePermissionsMessage)===null||e===void 0?void 0:e.kind)!==null&&i!==void 0?i:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},d("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("cta.help")),d("div",{class:"actions"},d("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("cta.continue")),d("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("cta.reload"))),d("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};QA.style=CV;var PV=Object.freeze({__proto__:null,dyte_permissions_message:QA});const RV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",YA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=Ke,this.iconPack=H,this.size=void 0,this.t=W(),this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i;t!==null&&(this.pipSupported=t.participants.pip.isSupported()&&((e=t.self.config)===null||e===void 0?void 0:e.pipMode)&&((i=t.self.config)===null||i===void 0?void 0:i.viewType)!=="LIVESTREAM")}togglePip(){this.meeting.participants.pip.isActive?this.meeting.participants.pip.disable():this.meeting.participants.pip.enable(),this.stateUpdate.emit({activeMoreMenu:!1}),G.activeMoreMenu=!1}render(){if(!this.pipSupported)return;const t=this.meeting.participants.pip.isActive;return d(z,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:t?this.iconPack.pip_on:this.iconPack.pip_off,label:t?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};YA.style=RV;var IV=Object.freeze({__proto__:null,dyte_pip_toggle:YA});const AV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}",ZA=class{constructor(t){V(this,t),this.canInteractWithPlugin=()=>{const e=this.plugin.id;if(!e)return!0;if(this.meeting.self.permissions.isV2){const i=this.meeting.self.permissions.plugins.config[e];return!i||!i.accessControl?!0:i.accessControl==="FULL_ACCESS"}else return!0},this.meeting=void 0,this.plugin=void 0,this.iconPack=H,this.t=W(),this.canClosePlugin=!1,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(t==null)return;const e=this.canInteractWithPlugin();this.viewModeEnabled=!e,Mi(()=>{this.canClosePlugin=t.self.permissions.plugins.canClose})}pluginChanged(t){this.toggleViewModeListener=e=>{this.viewModeEnabled=e},t!=null&&(t.addPluginView(this.iframeEl),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t;(t=this.plugin)===null||t===void 0||t.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return this.plugin==null?null:d(z,null,d("header",{part:"header"},d("div",null,this.plugin.name),this.canClosePlugin&&d("div",null,d("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),d("div",{class:"iframe-container"},!this.canInteractWithPlugin()||this.viewModeEnabled?d("div",{class:"block-inputs"}):null,d("iframe",{ref:t=>this.iframeEl=t,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};ZA.style=AV;var MV=Object.freeze({__proto__:null,dyte_plugin_main:ZA});const DV=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}`,XA=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:void 0}),G.activeSidebar=!1,G.sidebar=void 0},this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.t=W(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugins=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting)===null||t===void 0||t.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(t){t!=null&&(this.canStartPlugins=t.self.permissions.plugins.canStart,this.canClosePlugins=t.self.permissions.plugins.canClose,this.plugins=t.plugins.all.toArray().filter(e=>{var i;return!(!((i=t.self.config.disabledPlugins)===null||i===void 0)&&i.includes(e.id))}),this.updateActivePlugins=()=>{this.activatedPluginsId=t.plugins.active.toArray().map(e=>e.id)},this.updateActivePlugins(),t.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return d(z,null,d("ul",{class:"scrollbar"},this.plugins.map(t=>d("li",{key:t.name,class:"plugin"},d("div",{class:"metadata"},d("img",{src:t.picture}),d("div",{class:"name"},t.name)),!this.activatedPluginsId.includes(t.id)&&this.canStartPlugins&&d("div",{class:"buttons"},d("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{t.activate(),this.close()},"aria-label":`${this.t("activate")} ${t.name}`},d("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(t.id)&&this.canClosePlugins&&d("div",{class:"buttons"},d("dyte-button",{kind:"icon",size:"lg",onClick:()=>{t.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("close")} ${t.name}`},d("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};XA.style=DV;var OV=Object.freeze({__proto__:null,dyte_plugins:XA});const LV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",e6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=kw(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),bu("sidebar",()=>this.statesChanged())}meetingChanged(t){var e;t!=null&&(this.canViewPlugins=kw(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||G;e!=null&&(this.pluginsActive=e.activeSidebar===!0&&e.sidebar==="plugins")}togglePlugins(){const t=this.states||G;this.pluginsActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="plugins"),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":void 0,activeMoreMenu:!1,activeAI:!1}),G.activeSidebar=this.pluginsActive,G.sidebar=this.pluginsActive?"plugins":void 0,G.activeMoreMenu=!1}render(){if(!this.canViewPlugins)return;const t=this.t("plugins");return d(z,{title:t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};e6.style=LV;var NV=Object.freeze({__proto__:null,dyte_plugins_toggle:e6});const UV=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}`,t6=class{constructor(e){V(this,e),this.onPollsUpdate=i=>{this.polls=[...i.polls]},this.meeting=void 0,this.config=Ke,this.size=void 0,this.iconPack=H,this.t=W(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.meeting!=null&&((e=this.meeting.polls)===null||e===void 0||e.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(e){e!=null&&(e&&!e.polls||(this.polls=[...e.polls.items],e.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async i=>{this.create=!1,await e.polls.create(i.question,i.options,i.anonymous,i.hideVotes)},this.onVote=async(i,r)=>{await e.polls.vote(i,r)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){jo(this.pollEl)}render(){return d(z,null,d("div",{class:"ctr",part:"container"},d("div",{class:"polls-view scrollbar",ref:e=>this.pollEl=e,part:"polls"},this.polls.map(e=>{var i;return d("dyte-poll",{key:e.id,poll:e,onDyteVotePoll:r=>{this.onVote(r.detail.id,r.detail.index)},self:(i=this.meeting)===null||i===void 0?void 0:i.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})}),this.create&&d("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:e=>{this.onCreate(e.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&d("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("polls.cancel"):this.t("polls.create"))))}static get watchers(){return{meeting:["meetingChanged"]}}};t6.style=UV;var jV=Object.freeze({__proto__:null,dyte_polls:t6});const $V=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",i6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:e})=>{e===!0&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=bw(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),bu("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i;(t=this.meeting.polls)===null||t===void 0||t.removeListener("pollsUpdate",this.onPollsUpdate),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e;t&&t.polls&&(this.unreadPollsCount=t.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),this.canViewPolls=bw(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||G;e!=null&&(this.pollsActive=e.activeSidebar===!0&&e.sidebar==="polls")}togglePollsTab(){const t=this.states||G;this.unreadPollsCount=0,this.pollsActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="polls"),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":void 0,activeMoreMenu:!1,activeAI:!1}),G.activeSidebar=this.pollsActive,G.sidebar=this.pollsActive?"polls":void 0,G.activeMoreMenu=!1}render(){if(!this.canViewPolls)return;const t=this.t("polls");return d(z,{title:t},this.unreadPollsCount!==0&&!this.pollsActive&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};i6.style=$V;var zV=Object.freeze({__proto__:null,dyte_polls_toggle:i6});const FV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",r6=class{constructor(t){V(this,t),this.setIsRecording=e=>{this.isRecording=e==="RECORDING"},this.meeting=void 0,this.size=void 0,this.t=W(),this.iconPack=H,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting)===null||t===void 0||t.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(t){t!=null&&(this.setIsRecording(t.recording.recordingState),this.updateRecordingStatus=e=>{this.setIsRecording(e)},t.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return d(z,null,this.isRecording&&d("div",{class:"indicator","aria-label":this.t("recording.indicator"),part:"indicator"},d("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),d("span",null,this.t("recording.label"))))}static get watchers(){return{meeting:["meetingChanged"]}}};r6.style=FV;var VV=Object.freeze({__proto__:null,dyte_recording_indicator:r6});const BV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",s6=class{constructor(t){V(this,t),this.dyteAPIError=re(this,"dyteAPIError",7),this.toggleRecording=async()=>{var e,i;if(!(this.isLoading()||this.disabled))switch(this.recordingState){case"IDLE":try{await((e=this.meeting)===null||e===void 0?void 0:e.recording.start());return}catch{this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("recording.error.start")})}return;case"RECORDING":try{await((i=this.meeting)===null||i===void 0?void 0:i.recording.stop());return}catch{this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("recording.error.stop")})}return;case"STARTING":case"STOPPING":default:return}},this.isLoading=()=>this.meeting==null||this.recordingState==="STARTING"||this.recordingState==="STOPPING",this.variant="button",this.meeting=void 0,this.t=W(),this.iconPack=H,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.recordingStateUpdateListener&&((t=this.meeting)===null||t===void 0||t.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener))}meetingChanged(t){t!=null&&(this.recordingState=t.recording.recordingState,this.canRecord=t.self.permissions.canRecord===!0,this.recordingStateUpdateListener=e=>{this.recordingState=e},t.recording.addListener("recordingUpdate",this.recordingStateUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return this.t("recording.idle");case"RECORDING":return this.t("recording.stop");case"STARTING":return this.t("recording.starting");case"STOPPING":return this.t("recording.stopping");default:return this.t("recording.loading")}}getIcon(){switch(this.recordingState){case"IDLE":return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording;case"STARTING":case"STOPPING":default:return this.iconPack.recording}}render(){if(!!this.canRecord)return d(z,{title:this.t(this.recordingState==="RECORDING"?"recording.stop":"recording.idle")},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};s6.style=BV;var HV=Object.freeze({__proto__:null,dyte_recording_toggle:s6});const WV=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3,p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}h3{margin-bottom:var(--dyte-space-4, 16px);font-size:20px;line-height:1.5}p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}p.empty-message{text-align:center;font-size:16px}label>input{margin-right:var(--dyte-space-2, 8px)}input{background-color:transparent;accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}#allow-requests-label{display:flex;align-items:center;font-size:12px}#actions{margin-top:var(--dyte-space-4, 16px);display:flex;align-items:center}dyte-button{flex:1 1 0%;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px}#participants-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-56, 224px);overflow-y:auto}.participant{box-sizing:border-box;display:flex;height:var(--dyte-space-14, 56px);align-items:center;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.participant:last-child{border-bottom-width:var(--dyte-border-width-none, 0)}.participant{cursor:pointer;font-size:14px}.participant input{margin-right:var(--dyte-space-3, 12px)}dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,n6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.acceptedRequestId=void 0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W()}disconnectedCallback(){}meetingChanged(t){var e,i,r,s,n;t!=null&&!Boolean(this.acceptedRequestId)&&Boolean((r=(i=(e=this.meeting)===null||e===void 0?void 0:e.remote)===null||i===void 0?void 0:i.active)===null||r===void 0?void 0:r.id)&&(this.acceptedRequestId=(n=(s=this.meeting.remote)===null||s===void 0?void 0:s.active)===null||n===void 0?void 0:n.id)}render(){var t,e,i,r;return Boolean((e=(t=this===null||this===void 0?void 0:this.meeting)===null||t===void 0?void 0:t.remote)===null||e===void 0?void 0:e.incomingRequests.toArray().length)?d(z,null,d("h3",null,this.t("remote_access.requests")),d("p",null,this.t("remote_access.allow")),d("div",{class:"scrollbar"},(r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.incomingRequests.toArray().map(s=>{const n=this.meeting.participants.joined.get(s.remotePeerId);return d("label",{onClick:()=>{this.acceptedRequestId=s.id},class:"participant",htmlFor:n.id},d("input",{type:"radio",checked:this.acceptedRequestId===s.id,name:"remote-access-participant",value:s.id}),d("dyte-avatar",{participant:n,size:"sm"}),n.name)})),d("div",{id:"actions"},d("dyte-button",{disabled:!Boolean(this.acceptedRequestId),iconPack:this.iconPack,t:this.t,onClick:()=>{var s,n;(n=(s=this.meeting)===null||s===void 0?void 0:s.remote)===null||n===void 0||n.acceptControl(this.acceptedRequestId),this.stateUpdate.emit({activeRemoteAccessManager:!1})}},this.t("remote_access.grant")))):d(z,null,d("p",{class:"empty-message"},this.t("remote_access.empty")))}static get watchers(){return{meeting:["meetingChanged"]}}};n6.style=WV;var GV=Object.freeze({__proto__:null,dyte_remote_access_manager:n6});const qV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",VE=()=>typeof navigator<"u"&&typeof navigator.mediaDevices<"u"&&"getDisplayMedia"in navigator.mediaDevices,a6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.dyteAPIError=re(this,"dyteAPIError",7),this.selfScreenShareListener=({screenShareEnabled:e})=>{this.screenShareEnabled=e;const i=this.screenShareCount+(e?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.screenShareListener=({screenShareEnabled:e})=>{const i=this.screenShareCount+(e?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:e})=>{e&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{if(e==="screenshare"&&(this.shareScreenPermission=i,this.getState(),i==="COULD_NOT_START"&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("screenshare.error.unknown")}),this.hasPermissionError())){const r={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:r}),G.activePermissionsMessage=r}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var e;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const r={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:r}),G.activePermissionsMessage=r,!1}const i=(e=this.meeting)===null||e===void 0?void 0:e.self;if(this.screenShareEnabled){i.disableScreenShare();return}i==null||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await i.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),G.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("screenshare.start"),label:this.t("screenshare.start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1}}connectedCallback(){if(!VE()){jp.error("[dyte-screenshare-toggle] Device does not support screensharing.");return}this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r,s,n;(t=this.meeting)===null||t===void 0||t.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),(e=this.meeting)===null||e===void 0||e.participants.joined.removeListener("participantLeft",this.participantLeftListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("screenShareUpdate",this.selfScreenShareListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(n=(s=this.meeting)===null||s===void 0?void 0:s.stage)===null||n===void 0||n.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.maxScreenShareCount=e.config.maxScreenShareCount,this.screenShareEnabled=e.screenShareEnabled;let r=0;for(const s of t.participants.joined.toArray())s.screenShareEnabled&&r++;this.screenShareCount=r,this.getState(),t.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),t.participants.joined.addListener("screenShareUpdate",this.screenShareListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),e.addListener("screenShareUpdate",this.selfScreenShareListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),i==null||i.addListener("stageStatusUpdate",this.stageStatusListener)}}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceScreenshare==="ALLOWED",n=i.viewType==="WEBINAR"||t.self.permissions.stageEnabled,a=i.viewType==="LIVESTREAM";this.canScreenShare=!1,s&&!a&&!n?this.canScreenShare=!0:(n||a)&&(s&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canScreenShare=!0),e.permissions.canProduceScreenshare==="CAN_REQUEST"&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canScreenShare=!0))}hasPermissionError(){return this.shareScreenPermission==="SYSTEM_DENIED"||this.shareScreenPermission==="DENIED"}getState(){let t="",e="",i="",r={};const s=this.hasPermissionError()&&!this.screenShareEnabled,n=this.reachedMaxScreenShares()&&!this.screenShareEnabled,a=this.shareScreenPermission==="COULD_NOT_START";this.screenShareEnabled&&!s?(e=this.t("screenshare.stop"),i=this.iconPack.share_screen_stop,r["red-icon"]=!0):(e=this.t("screenshare.start"),i=this.iconPack.share_screen_start),this.shareScreenPermission==="SYSTEM_DENIED"?(t=this.t("perm_sys_denied.screenshare"),r["red-icon"]=!0):this.shareScreenPermission==="DENIED"?(t=this.t("perm_denied.screenshare"),r["red-icon"]=!0):t=e,n&&(t=this.t("screenshare.error.max_count")),a&&(t=this.t("screenshare.error.unknown")),this.screenShareState={tooltipLabel:t,label:e,icon:i,classList:r,disable:s||n,showWarning:s||n||a}}render(){return!VE()||!this.canScreenShare?null:d(z,{title:this.screenShareState.label},d("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning})))}static get watchers(){return{meeting:["meetingChanged"]}}};a6.style=qV;var JV=Object.freeze({__proto__:null,dyte_screen_share_toggle:a6}),as;(function(t){t.REQUEST_RECEIVED="REQUEST_RECEIVED",t.REQUEST_SENT="REQUEST_SENT",t.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",t.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",t.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",t.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"})(as||(as={}));const KV=`:host {
  line-height: initial;
  font-family: var(--dyte-font-family, sans-serif);

  font-feature-settings: normal;
  font-variation-settings: normal;
}

p {
  margin: var(--dyte-space-0, 0px);
  padding: var(--dyte-space-0, 0px);
}


:host {
  height: 100%;
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: var(--dyte-border-radius-lg, 12px);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));
  container-type: inline-size;
  container-name: screentile;
}

::slotted(dyte-name-tag) {
  position: absolute;
  left: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
  opacity: 0.8;
}

#video-container {
  position: absolute;
  display: block;
  height: 100%;
  width: 100%;
}

#video-container .fit-in-container {
  -o-object-fit: fill;
     object-fit: fill;
}

video {
  height: 100%;
  width: 100%;
  -o-object-fit: contain;
     object-fit: contain;
}

:host([variant='gradient']) ::slotted(dyte-audio-visualizer) {
  position: absolute;
  top: var(--dyte-space-2, 8px);
  right: var(--dyte-space-2, 8px);
  border-radius: 9999px;
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));
  padding: var(--dyte-space-2, 8px);
}

:host([variant='gradient']) ::slotted(dyte-name-tag) {
  bottom: var(--dyte-space-0, 0px);
  left: var(--dyte-space-0, 0px);
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: transparent;
  background-image: linear-gradient(to top, var(--tw-gradient-stops));
  --tw-gradient-from: rgb(var(--dyte-colors-background-1000, 8 8 8));
  --tw-gradient-to: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  --tw-gradient-to: transparent;
}

:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer) {
  height: var(--dyte-space-5, 20px);
  width: var(--dyte-space-5, 20px);
}

video.visible {
  animation: video-fadein 0.4s ease;
}

#controls {
  display: none;
  position: absolute;
  top: var(--dyte-space-3, 12px);
  right: var(--dyte-space-3, 12px);
  align-items: center;
  justify-content: flex-end;
  gap: var(--dyte-space-2, 8px);
}

:host(:hover) #controls, 
:host(:active) #controls, 
:host(:focus-visible) #controls {
  display: flex;
}

#full-screen-btn {
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));
}

/** For self view */

h3 {
  margin-top: var(--dyte-space-10, 40px);
  margin-bottom: var(--dyte-space-6, 24px);
  text-align: center;
  font-size: 20px;
  font-weight: 500;
}

:host([size='sm']) h3 {
  font-size: 16px;
}

#self-message {
  padding-left: var(--dyte-space-4, 16px);
  padding-right: var(--dyte-space-4, 16px);
}

:host(.isSelf) #self-view {
  flex: 1 1 0%;
}

:host(.isSelf) #video-container {
  position: static;
  aspect-ratio: auto;
  height: auto;
  width: 50%;
  max-width: var(--dyte-space-96, 384px);
  border-radius: var(--dyte-border-radius-md, 8px);
  transition: 0.6s ease;
}

:host(.isSelf) #video-container.expand {
  width: 60%;
  max-width: 100%;
}

.actions {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--dyte-space-2, 8px);
}

:host([size='sm'].isSelf) #video-container,
:host([size='md'].isSelf) #video-container,
:host([size='sm'].isSelf) #expand-btn,
:host([size='md'].isSelf) #expand-btn {
  /** Hide video, fullscreen buttons in sm and md breakpoints */
  display: none;
}

/** Remote control */

p {
  margin: var(--dyte-space-0, 0px);
  padding: var(--dyte-space-0, 0px);
}

.remote-control {
  z-index: 10;
  height: 100%;
  max-height: 100%;
  flex: 0 1 auto;
}

#remote-control-self {
  position: absolute;
  top: var(--dyte-space-0, 0px);
  left: 50%;
  z-index: 10;
  width: -moz-max-content;
  width: max-content;
  max-width: 100%;
  box-sizing: border-box;
  display: flex;
  height: var(--dyte-space-8, 32px);
  align-items: center;
  overflow: hidden;
  border-radius: var(--dyte-border-radius-sm, 4px);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));
  font-size: 12px;
  color: rgb(var(--dyte-colors-text-1000, 255 255 255));
  transform: translateX(-50%);
}

#remote-control-self p {
  padding-left: var(--dyte-space-3, 12px);
  padding-right: var(--dyte-space-3, 12px);
  padding-top: var(--dyte-space-2, 8px);
  padding-bottom: var(--dyte-space-2, 8px);
}

#remote-control-self dyte-button {
  height: 100%;
  border-radius: var(--dyte-border-radius-none, 0);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));
  font-size: 12px;
}

:host([size='sm']) #remote-control-self {
  height: auto;
  flex-direction: column;
}

:host([size='sm']) #remote-control-self dyte-button {
  width: 100%;
  padding-top: var(--dyte-space-1, 4px);
  padding-bottom: var(--dyte-space-1, 4px);
}

/** Name tag positions */

:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag) {
  left: auto;
  right: var(--dyte-space-3, 12px);
}

:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag) {
  left: auto;
  right: auto;
}

:host([name-tag-position='top-left']) ::slotted(dyte-name-tag) {
  top: var(--dyte-space-3, 12px);
  bottom: auto;
}

:host([name-tag-position='top-right']) ::slotted(dyte-name-tag) {
  top: var(--dyte-space-3, 12px);
  right: var(--dyte-space-3, 12px);
  left: auto;
  bottom: auto;
}

:host([name-tag-position='top-center']) ::slotted(dyte-name-tag) {
  left: auto;
  right: auto;
  bottom: auto;
  top: var(--dyte-space-3, 12px);
}

/** Keyframes */

@keyframes video-fadein {
  0% {
    opacity: 0;
    transform: scale(1.4) translateY(20px);
  }

  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

::slotted(dyte-network-indicator) {
  position: absolute;
  right: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
}

@container screentile (max-width: 400px) {
  ::slotted(dyte-name-tag) {
    transform-origin: 0 130%;
    transform: scale(0.7)
  }
}`,o6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.fullScreenListener=()=>{this.isFullScreen=wA()},this.onRemoteUpdate=({payload:e,type:i})=>{var r,s;let n="";i===as.INCOMING_REQUEST_ACCEPTED&&(n=`${this.meeting.participants.joined.get(e.request.remotePeerId).name} is controlling your screen.`),i===as.OUTGOING_REQUEST_ACCEPTED&&(n=`You are controlling ${this.meeting.participants.joined.get(e.request.hostPeerId).name}'s screen.`),(i===as.INCOMING_REQUEST_ENDED||i===as.OUTGOING_REQUEST_ENDED)&&(n=""),i===as.REQUEST_RECEIVED&&!Boolean((s=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||s===void 0?void 0:s.active)&&this.stateUpdate.emit({activeRemoteAccessManager:!0}),this.remoteControlInfo=n},this.onMouseEvent=e=>{var i,r;this.shouldSkipEventTrigger()||(e.stopPropagation(),e.preventDefault(),(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.mouseEvent(e,this.videoEl))},this.onKeyDown=e=>{var i,r;this.shouldSkipEventTrigger()||(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.keyboardEvent(e)},this.toggleFullScreen=()=>{this.isFullScreen?(bA(),this.isFullScreen=!1):(yA(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=H,this.t=W(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}participantScreenshareUpdate(t){t.id===this.participant.id&&this.screenShareListener(t)}connectedCallback(){window==null||window.addEventListener("fullscreenchange",this.fullScreenListener),window==null||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){var t,e;const{self:i}=this.meeting;this.participant.id===i.id&&this.screenShareListener?this.participant.removeListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.removeListener("screenShareUpdate",this.participantScreenshareUpdate),(e=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||e===void 0||e.removeListener("remoteUpdate",this.onRemoteUpdate),window==null||window.removeEventListener("fullscreenchange",this.fullScreenListener),window==null||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(t){var e,i,r,s,n;if(t!=null){const{self:a}=this.meeting;this.screenShareListener=({screenShareEnabled:o,screenShareTracks:c})=>{const u=o&&c.video!=null;if(Mi(()=>{this.screenShareEnabled=u}),u){const l=new MediaStream;l.addTrack(c.video),this.videoEl!=null&&(this.videoEl.srcObject=l,this.videoEl.play())}else this.videoEl!=null&&(this.videoEl.srcObject=void 0)},this.screenShareListener(t),Boolean((i=(e=this.meeting)===null||e===void 0?void 0:e.remote)===null||i===void 0?void 0:i.active)&&[this.meeting.remote.active.hostPeerId,this.meeting.remote.active.remotePeerId].includes(t==null?void 0:t.id)&&this.onRemoteUpdate({payload:{request:this.meeting.remote.active},type:((r=this.meeting.remote.active)===null||r===void 0?void 0:r.hostPeerId)===this.meeting.self.id?"INCOMING_REQUEST_ACCEPTED":"OUTGOING_REQUEST_ACCEPTED"}),t.id===a.id?t.addListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.addListener("screenShareUpdate",this.participantScreenshareUpdate.bind(this)),(n=(s=this.meeting)===null||s===void 0?void 0:s.remote)===null||n===void 0||n.addListener("remoteUpdate",this.onRemoteUpdate)}}shouldSkipEventTrigger(){var t,e,i;return this.meeting==null||this.participant==null?!0:!Boolean((t=this.meeting.remote)===null||t===void 0?void 0:t.active)||!Boolean(this.meeting.participants.joined.get((e=this.meeting.remote)===null||e===void 0?void 0:e.active.hostPeerId))||((i=this.meeting.remote)===null||i===void 0?void 0:i.active.hostPeerId)!=this.participant.id}render(){var t,e,i,r,s,n,a,o;const c=((t=this.participant)===null||t===void 0?void 0:t.id)===((e=this.meeting)===null||e===void 0?void 0:e.self.id),u=this.isFullScreen?this.t("full_screen.exit"):this.t("full_screen"),l=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return d(z,{class:{isSelf:c}},Boolean(((r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.active)&&this.remoteControlInfo)&&d("div",{id:"remote-control-self",key:"remote-control-self"},d("p",{class:"remote-control-message"},this.remoteControlInfo),d("dyte-button",{onClick:()=>{var p;return(p=this.meeting.remote)===null||p===void 0?void 0:p.endControl()},iconPack:this.iconPack,t:this.t},((n=(s=this.meeting.remote)===null||s===void 0?void 0:s.active)===null||n===void 0?void 0:n.hostPeerId)===this.meeting.self.id?"Revoke access":"Stop")),d("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded},contentEditable:Boolean((a=this.meeting.remote)===null||a===void 0?void 0:a.active),onKeyDown:this.onKeyDown},d("video",{ref:p=>this.videoEl=p,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`,onMouseMove:this.onMouseEvent,onClick:this.onMouseEvent,onContextMenu:this.onMouseEvent})),d("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!c&&kA()&&d("dyte-tooltip",{label:u,iconPack:this.iconPack,t:this.t},d("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:u,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:l,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t}))),((o=this.participant)===null||o===void 0?void 0:o.supportsRemoteControl)===!0&&d("dyte-menu",{id:"menu",key:"menu",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.more_vertical,iconPack:this.iconPack,t:this.t})),d("dyte-menu-list",{iconPack:this.iconPack,t:this.t},!c&&d("dyte-menu-item",{style:{cursor:this.participant.supportsRemoteControl?"pointer":"not-allowed"},iconPack:this.iconPack,t:this.t,onClick:()=>{var p,m;!((p=this.participant)===null||p===void 0)&&p.supportsRemoteControl&&((m=this.meeting.remote)===null||m===void 0||m.requestControl(this.participant.id))}},"Request remote control"),c&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>this.stateUpdate.emit({activeRemoteAccessManager:!0})},"Manage remote control requests")))),c&&d("div",{id:"self-message",key:"self-message"},d("h3",null,this.t("screenshare.shared")),d("div",{class:"actions"},this.meeting!=null&&d("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("screenshare.stop")),d("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},d("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("screenshare.min_preview"):this.t("screenshare.max_preview")))),d("slot",null))}get host(){return Pr(this)}static get watchers(){return{participant:["participantChanged"]}}};o6.style=KV;var QV=Object.freeze({__proto__:null,dyte_screenshare_view:o6});const YV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%;max-width:calc(100% - var(--dyte-space-56, 224px))}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;max-width:100%;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}",c6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&((t=this.meeting)===null||t===void 0||t.meta.removeListener("poorConnection",this.poorConnectionListener)),this.meeting.stage.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){t!=null&&(this.updateCanProduce(t),this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:e})=>{e<7?this.networkStatus="poor":e<4&&(this.networkStatus="poorest"),setTimeout(()=>{this.networkStatus="good"},5e3)},t.meta.addListener("poorConnection",this.poorConnectionListener),t.stage.addListener("stageStatusUpdate",this.stageStatusListener))}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceVideo==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";if(!n&&!a)this.canProduceVideo=s;else{const o=e.permissions.canProduceVideo==="CAN_REQUEST";(s||o&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceVideo=!0)}}changeTab(t){this.activeTab=t,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),G.activeSettings=!1}render(){if(this.meeting==null)return null;const t={meeting:this.meeting,states:this.states||G,iconPack:this.iconPack,t:this.t};return d(z,null,d("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},d("header",null,d("h2",null,this.t("settings"))),d("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&d("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),d("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),d("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&d("header",null,d("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),d("h2",null,this.t(this.activeTab==="audio"?"audio":"video"))),this.activeTab==="audio"&&d("dyte-settings-audio",Object.assign({},t)),this.activeTab==="video"&&d("dyte-settings-video",Object.assign({},t))))}static get watchers(){return{meeting:["meetingChanged"]}}};c6.style=YV;var ZV=Object.freeze({__proto__:null,dyte_settings:c6});const XV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",d6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W()}toggleSettings(){var t;this.stateUpdate.emit({activeSettings:!(!((t=this.states)===null||t===void 0)&&t.activeSettings),activeMoreMenu:!1}),G.activeSettings=!G.activeSettings,G.activeMoreMenu=!1}render(){const t=this.t("settings");return d(z,{title:t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:t,variant:this.variant}))}};d6.style=XV;var eB=Object.freeze({__proto__:null,dyte_settings_toggle:d6});const tB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}dyte-camera-toggle{margin-left:var(--dyte-space-1\\.5, 6px)}dyte-participant-tile{height:auto;width:100%;max-width:var(--dyte-space-96, 384px)}",l6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.join=async()=>{var e,i,r;((e=this.displayName)===null||e===void 0?void 0:e.trim())!==""&&!this.isJoining&&(this.isJoining=!0,(i=this.meeting)===null||i===void 0||i.self.setName(this.displayName),ds.setItem("dyte-display-name",this.displayName),await((r=this.meeting)===null||r===void 0?void 0:r.joinRoom()))},this.meeting=void 0,this.states=G,this.size=void 0,this.config=Ke,this.iconPack=H,this.t=W(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0}connectedCallback(){this.meetingChanged(this.meeting)}componentDidLoad(){var t;(t=this.inputEl)===null||t===void 0||t.focus()}meetingChanged(t){var e,i;t!=null&&(this.canEditName=(e=t.self.permissions.canEditDisplayName)!==null&&e!==void 0?e:!0,this.displayName=((i=t.self.name)===null||i===void 0?void 0:i.trim())||"",G.meeting="setup")}render(){var t,e,i,r;const s=((t=this.displayName)===null||t===void 0?void 0:t.trim())==="",n={meeting:this.meeting,config:this.config,states:this.states||G,size:this.size,iconPack:this.iconPack,t:this.t};return d(z,null,d("div",{class:"container"},d(Be,{element:"dyte-participant-tile",defaults:n,props:{participant:(e=this.meeting)===null||e===void 0?void 0:e.self,size:"md"},childProps:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},deepProps:!0}),d("div",{class:"metadata"},((r=this.displayName)===null||r===void 0?void 0:r.trim())===""?d("div",{class:"name"},this.t("setup_screen.join_in_as")):d("div",{class:"label"},d("p",null,this.t("setup_screen.joining_as")),d("div",{class:"name"},ls(this.displayName,20))),this.canEditName&&d("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,autoFocus:!0,ref:a=>{this.inputEl=a},onInput:a=>{this.displayName=a.target.value},onKeyDown:a=>{a.key==="Enter"&&this.join()}}),d("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:s,iconPack:this.iconPack,t:this.t},this.isJoining?d("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")))))}static get watchers(){return{meeting:["meetingChanged"]}}};l6.style=tB;var iB=Object.freeze({__proto__:null,dyte_setup_screen:l6});const rB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;max-width:var(--dyte-space-80, 320px);box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}:host([view='sidebar']){right:var(--dyte-space-2, 8px);overflow:clip;border-radius:var(--dyte-border-radius-lg, 12px);--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-900, 26 26 26));--tw-shadow:var(--tw-shadow-colored)}:host([view='full-screen']){top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%}:host(.floating){position:absolute !important;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);left:auto;z-index:50}.pinned-state{position:absolute;right:var(--dyte-space-1, 4px);display:inline-flex;width:var(--dyte-space-2, 8px);justify-content:flex-end}",u6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.getTabs=()=>this.meeting.self.config?this.enabledSections.filter(e=>this.meeting.self.config.controlBar.elements[e.id]):this.enabledSections,this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),G.sidebar=this.currentTab},this.toggleFloating=()=>{this.isFloating=!this.isFloating,G.sidebarFloating=this.isFloating},this.enabledSections=[],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=Ke,this.iconPack=H,this.t=W(),this.size=void 0,this.view="sidebar",this.currentTab=this.defaultSection,this.isFloating=!1,this.enablePinning=!0}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),bu("sidebar",()=>this.statesChanged()),this.isFloating=(G==null?void 0:G.sidebarFloating)||!1}disconnectedCallback(){var t,e;document.removeEventListener("keydown",this.keydownListener),(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateEnabledSections)}meetingChanged(t){var e,i;this.updateEnabledSections(t),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.updateEnabledSections)}statesChanged(t){const e=t||G;e!=null&&e.sidebar&&(this.currentTab=e.sidebar)}viewChanged(t){t==="full-screen"?(this.enablePinning=!1,this.keydownListener=e=>{e.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener)):this.enablePinning=!0}viewSection(t){this.currentTab=t,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.currentTab}),G.activeSidebar=!0,G.sidebar=this.currentTab}updateEnabledSections(t=this.meeting){const e=[];yw(t)&&e.push({id:"chat",name:this.t("chat")}),bw(t)&&e.push({id:"polls",name:this.t("polls")}),ww(t)&&e.push({id:"participants",name:this.t("participants")}),kw(t)&&e.push({id:"plugins",name:this.t("plugins")}),this.enabledSections=e}render(){var t;const e={meeting:this.meeting,config:this.config,states:this.states||G,size:this.size,t:this.t,iconPack:this.iconPack};return((t=e.states)===null||t===void 0?void 0:t.activeSidebar)===!1||!this.currentTab?null:d(z,{class:this.enablePinning?this.isFloating?"floating":"":"floating"},d("dyte-sidebar-ui",{tabs:this.getTabs(),currentTab:this.currentTab,view:this.view,onTabChange:i=>{this.viewSection(i.detail)},onSidebarClose:this.close},this.enablePinning&&d("div",{class:"pinned-state",slot:"pinned-state"},d("dyte-button",{variant:"ghost",kind:"icon",onClick:this.toggleFloating,"aria-label":this.isFloating?this.t("pin"):this.t("unpin")},d("dyte-icon",{icon:this.isFloating?this.iconPack.pin:this.iconPack.pin_off}))),d(Be,{element:"dyte-chat",defaults:e,props:{slot:"chat"}}),d(Be,{element:"dyte-polls",defaults:e,props:{slot:"polls"}}),d(Be,{element:"dyte-participants",defaults:e,props:{slot:"participants"}}),d(Be,{element:"dyte-plugins",defaults:e,props:{slot:"plugins"}})))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};u6.style=rB;var sB=Object.freeze({__proto__:null,dyte_sidebar:u6});const nB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}",h6=class{constructor(t){V(this,t),this.setHostDimensions=()=>{const{clientWidth:e,clientHeight:i}=this.host;this.dimensions={width:e,height:i}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Ke,this.iconPack=H,this.t=W(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new AI(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:e,height:i,getPosition:r}=cF({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return d(z,null,this.participants.map((s,n)=>{const{top:a,left:o}=r(n);return d(Be,{element:"dyte-participant-tile",defaults:t,props:{participant:s,style:{position:"absolute",top:`${a}px`,left:`${o}px`,width:`${e}px`,height:`${i}px`},key:s.id,"data-participant":s.id},childProps:{participant:s},deepProps:!0})}),d("slot",null))}get host(){return Pr(this)}};h6.style=nB;var aB=Object.freeze({__proto__:null,dyte_simple_grid:h6});const oB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}",p6=class{constructor(t){V(this,t),this.getAdaptiveSize=e=>this.size==="sm"||e>3||this.size==="md"?"sm":"md",this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Ke,this.iconPack=H,this.t=W(),this.gridSize=G_}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},e=this.participants.filter(i=>this.pinnedParticipants.some(r=>r.id!=i.id));return d(z,null,d("main",{part:"main"},d(Be,{element:"dyte-simple-grid",defaults:t,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(this.pinnedParticipants.length)}})),e.length>0&&d("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},d(Be,{element:"dyte-simple-grid",defaults:t,props:{part:"aside-grid",participants:e,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(e.length)}})))}get host(){return Pr(this)}};p6.style=oB;var cB=Object.freeze({__proto__:null,dyte_spotlight_grid:p6});const dB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}",g6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.iconPack=H,this.t=W()}render(){return d(z,null,d("slot",null))}};g6.style=dB;var lB=Object.freeze({__proto__:null,dyte_stage:g6});const uB=t=>{var e,i,r,s,n,a;return(t.meta.viewType==="LIVESTREAM"||t.meta.viewType==="WEBINAR")&&(((i=(e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions)===null||i===void 0?void 0:i.canProduceAudio)==="ALLOWED"||((s=(r=t==null?void 0:t.self)===null||r===void 0?void 0:r.permissions)===null||s===void 0?void 0:s.canProduceScreenshare)==="ALLOWED"||((a=(n=t==null?void 0:t.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo)==="ALLOWED")},hB=t=>{var e,i,r,s,n,a,o,c,u,l;return(t.meta.viewType==="LIVESTREAM"||t.meta.viewType==="WEBINAR")&&(((i=(e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions)===null||i===void 0?void 0:i.canProduceAudio)!=="NOT_ALLOWED"||((s=(r=t==null?void 0:t.self)===null||r===void 0?void 0:r.permissions)===null||s===void 0?void 0:s.canProduceScreenshare)!=="NOT_ALLOWED"||((a=(n=t==null?void 0:t.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo)!=="NOT_ALLOWED"||((c=(o=t==null?void 0:t.self)===null||o===void 0?void 0:o.permissions)===null||c===void 0?void 0:c.canLivestream)||((l=(u=t==null?void 0:t.self)===null||u===void 0?void 0:u.permissions)===null||l===void 0?void 0:l.canLivestream))},pB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",m6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var e,i,r,s,n,a,o;const c=(e=this.meeting.stage)===null||e===void 0?void 0:e.status;c==="ON_STAGE"&&await((r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),c==="OFF_STAGE"&&((n=(s=this===null||this===void 0?void 0:this.meeting)===null||s===void 0?void 0:s.stage)===null||n===void 0||n.requestAccess(),uB(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),c==="REQUESTED_TO_JOIN_STAGE"&&((o=(a=this===null||this===void 0?void 0:this.meeting)===null||a===void 0?void 0:a.stage)===null||o===void 0||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=W()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(t,e){this.stageStatus=e,e==="ACCEPTED_TO_JOIN_STAGE"&&(t.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",i=>this.stageStatusHandler(this.meeting,i))}meetingChanged(t){var e,i,r,s;t!=null&&(this.stageStatus=(e=t.stage)===null||e===void 0?void 0:e.status,this.stageStatusHandler(t,(i=t.stage)===null||i===void 0?void 0:i.status),(s=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||s===void 0||s.on("stageStatusUpdate",n=>this.stageStatusHandler(t,n)))}getState(){let t="",e="",i=!1;switch(this.stageStatus){case"ON_STAGE":{e=this.iconPack.leave_stage,t="Leave Stage",i=!1;break}case"ACCEPTED_TO_JOIN_STAGE":{e=this.iconPack.join_stage,t="Join Stage",i=!0;break}case"REQUESTED_TO_JOIN_STAGE":{e=this.iconPack.join_stage,t="Requested",i=!1;break}default:{e=this.iconPack.join_stage,t="Join Stage",i=!1;break}}return{label:t,disabled:i,icon:e}}render(){if(!!hB(this.meeting))return d(z,{title:this.state.label},d("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};m6.style=pB;var gB=Object.freeze({__proto__:null,dyte_stage_toggle:m6});const mB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}",f6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=H,this.t=W()}connectedCallback(){this.stateUpdate.emit({abc:!1}),G.abc=!1}get value(){return this.input.value}render(){return d(z,null,d("input",{ref:t=>this.input=t,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};f6.style=mB;var fB=Object.freeze({__proto__:null,dyte_text_field:f6});const vB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;width:100%;justify-content:center;z-index:50}dyte-transcript{margin-top:var(--dyte-space-2, 8px)}",v6=class{constructor(t){V(this,t),this.onTranscript=e=>{e.transcript&&this.add(e)},this.meeting=void 0,this.states=void 0,this.config=Ke,this.t=W(),this.transcripts=[]}connectedCallback(){this.meetingChanged(this.meeting)}clearListeners(t){this.onTranscript&&t.meta.removeListener("transcript",this.onTranscript),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){this.meeting!=null&&this.clearListeners(this.meeting)}meetingChanged(t,e){clearTimeout(this.disconnectTimeout),e!==void 0&&this.clearListeners(e),t!=null&&this.meeting.meta.addListener("transcript",this.onTranscript)}add(t){this.transcripts.splice(0,this.transcripts.length-2),this.transcripts=[...this.transcripts,t]}remove(t){this.transcripts=this.transcripts.filter(e=>e.id!==t)}handleDismiss(t){t.stopPropagation();const e=t.detail,i=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{Mi(()=>{this.remove(e)})},400)}render(){var t;return d(z,null,(t=this.transcripts)===null||t===void 0?void 0:t.map(e=>d("dyte-transcript",{key:e.id,"data-id":e.id,transcript:e,onDyteTranscriptDismiss:i=>this.handleDismiss(i),t:this.t})))}get host(){return Pr(this)}static get watchers(){return{meeting:["meetingChanged"]}}};v6.style=vB;var yB=Object.freeze({__proto__:null,dyte_transcripts:v6});const bB=class{constructor(t){V(this,t),this.meeting=void 0,this.size=void 0,this.config=Ke,this.t=W(),this.iconPackUrl=void 0,this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.joinRoom=!0,this.isReady=!1,this.iconPack=H}async iconPackUrlChanged(t){this.iconPack=await wI(t)}async meetingChanged(t){var e;if(!!t){if(!t.self.roomJoined&&this.joinRoom&&(this.isReady=!1,await t.joinRoom(),this.isReady=!0),this.loadConfigFromPreset&&t.self.config!=null){const i=t.self.config,{config:r}=bI(i,t);this.config===Ke&&(this.config=Object.assign(Object.assign(Object.assign({},Ke),r),{designTokens:Object.assign(Object.assign({},Ke.designTokens),r.designTokens)}))}this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&dw(document.documentElement,this.config.designTokens),Array.from(this.hostEl.children).filter(i=>i.tagName.startsWith("DYTE-")).forEach(i=>{i.meeting=t,i.config=this.config,i.size=this.size,i.iconPack=this.iconPack,i.t=this.t})}}connectedCallback(){this.resizeObserver=new ResizeObserver(()=>this.handleResize()),this.resizeObserver.observe(this.hostEl),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}handleResize(){this.size=kI(this.hostEl.clientWidth)}render(){return this.isReady?d("slot",null):null}get hostEl(){return Pr(this)}static get watchers(){return{iconPackUrl:["iconPackUrlChanged"],meeting:["meetingChanged"]}}};var wB=Object.freeze({__proto__:null,dyte_ui_provider:bB});const kB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}",y6=class{constructor(t){V(this,t),this.meeting=void 0,this.config=Ke,this.iconPack=H,this.t=W()}render(){return d(z,null,d("slot",null,d("div",{class:"centered",part:"content"},d("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),d("p",null,this.t("waitlist.body_text")))))}};y6.style=kB;var _B=Object.freeze({__proto__:null,dyte_waiting_screen:y6});const SB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",b6=class{constructor(t){V(this,t),this.requestToJoinAcceptedListener=()=>{this.stageStatus="ACCEPTED"},this.requestToJoinRejectedListener=()=>{this.stageStatus="DENIED"},this.stageJoinedListener=()=>{this.stageStatus="ACCEPTED"},this.removeFromStageListener=()=>{this.stageStatus="NOT_REQUESTED"},this.selfStageLeftListener=()=>{this.stageStatus="NOT_REQUESTED"},this.requestStageListener=()=>{this.stageStatus="PENDING"},this.stageCallback=async()=>{var e;const i=(e=this.meeting)===null||e===void 0?void 0:e.self;if(!(i==null||!this.requestProduce&&!this.canPresent)){if(this.stageStatus==="PENDING"){await i.withdrawRequestToJoinStage();return}if(this.stageStatus==="ACCEPTED"){await i.leaveStage(),this.stageStatus="NOT_REQUESTED";return}this.canPresent?(await i.joinStage(),this.stageStatus="ACCEPTED"):(await i.requestToJoinStage(),this.stageStatus="PENDING")}},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.stageStatus="NOT_REQUESTED",this.canPresent=!1,this.requestProduce=!1}connectedCallback(){this.meetingChanged(this.meeting),this.meeting.self.addListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.addListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.addListener("stageJoined",this.stageJoinedListener),this.meeting.self.addListener("removedFromStage",this.removeFromStageListener),this.meeting.self.addListener("stageLeft",this.selfStageLeftListener),this.meeting.self.addListener("peerRequestToJoinStage",this.requestStageListener)}disconnectedCallback(){this.meeting.self.removeListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.removeListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.removeListener("removedFromStage",this.removeFromStageListener),this.meeting.self.removeListener("stageJoined",this.stageJoinedListener),this.meeting.self.removeListener("stageLeft",this.selfStageLeftListener),this.meeting.self.removeListener("peerRequestToJoinStage",this.requestStageListener)}meetingChanged(t){t!=null&&(this.requestProduce=t.self.permissions.requestProduce,this.canPresent=t.self.permissions.canPresent,(this.canPresent||t.self.webinarStageStatus==="ON_STAGE")&&(this.stageStatus="ACCEPTED"))}getState(){let t="",e="",i="",r={},s=!1;return this.stageStatus==="PENDING"?(e=this.t("stage_request.cancel_request"),t=this.t("stage_request.pending_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1):this.stageStatus==="ACCEPTED"?(e=this.t("stage_request.leave_stage"),t=this.t("stage_request.leave_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1,s=!1):this.stageStatus==="DENIED"?(e=this.t("stage_request.denied"),t=this.t("stage_request.denied_tip"),i=this.iconPack.join_stage,r["red-icon"]=!1,s=!0):(e=this.t("stage_request.request"),this.canPresent?t=this.t("stage_request.request"):t=this.t("stage_request.request_tip"),i=this.iconPack.join_stage,s=!1),{tooltipLabel:t,label:e,icon:i,classList:r,disabled:s}}render(){if(!this.requestProduce&&!this.canPresent||this.meeting.self.config.viewType!=="WEBINAR")return null;const{tooltipLabel:t,label:e,icon:i,classList:r,disabled:s}=this.getState();return d(z,{title:e},d("dyte-tooltip",{placement:"top",kind:"block",label:t,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:e,icon:i,class:r,onClick:this.stageCallback,disabled:s,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};b6.style=SB;var xB=Object.freeze({__proto__:null,dyte_webinar_stage_toggle:b6});const EB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}",BE=3,w6=class{constructor(t){V(this,t),this.onParticipantsAdd=re(this,"participantsAdd",7),this.onParticipantDelete=re(this,"participantDelete",7),this.onRoomJoin=re(this,"roomJoin",7),this.deleteRoom=re(this,"delete",7),this.updateRoom=re(this,"update",7),this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<BE)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,Mi(()=>{this.inputTextEl.focus(),this.inputTextEl.select()})},this.onDrop=e=>{e.currentTarget instanceof HTMLParagraphElement&&(e.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=e=>{e.currentTarget instanceof HTMLParagraphElement&&(e.currentTarget.classList.add("drop-zone-active"),e.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=H,this.t=W(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var t;this.allParticipants=eI(this.meeting),this.permissions=this.meeting.self.permissions.connectedMeetings,this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):(t=this.room)===null||t===void 0?void 0:t.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive}onDragLeave(t){t.currentTarget instanceof HTMLParagraphElement&&t.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){if(this.assigningParticipants&&this.isDragMode)return this.t("breakout_rooms.drag_drop_participants");if(this.assigningParticipants)return this.t("breakout_rooms.click_drop_participants");if(this.room.participants.length===0)return this.t("breakout_rooms.none_assigned")}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout(()=>{this.glowingCard=!1},2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(t){t.key==="Enter"&&(this.newTitle=t.target.value,this.onEditClick())}renderPeer(t){const{displayPictureUrl:e}=this.allParticipants.find(r=>bi(r)===bi(t)),i=As(t.displayName||"");return d("div",{class:"peer-ui-container"},d("dyte-avatar",{participant:{name:i,picture:e},size:"sm"}),d("p",{class:"name",title:i},ls(i,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&!!this.getAssignmentHint()&&!!this.permissions.canAlterConnectedMeetings)return d("div",{class:"message-container"},d("p",{class:{"compact-height":this.room.participants.length!==0},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&this.room.participants.length!==0)return d("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map(t=>d("div",{class:"participant-item",role:"listitem",key:t.id},this.renderPeer(t),this.permissions.canAlterConnectedMeetings&&d("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(t)}}))))}render(){var t,e,i;return d(z,null,d("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},d("div",{class:"header"},d("input",{ref:r=>this.inputTextEl=r,placeholder:this.t("breakout_rooms.room_name"),disabled:this.editingTitleRoomId!==this.room.id,value:this.roomTitle,minlength:BE,onChange:r=>{this.newTitle=r.target.value},onKeyPress:r=>this.onTitleChanged(r),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&d("span",{class:"participant-count"},"(",d("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),(i=(e=(t=this.room)===null||t===void 0?void 0:t.participants)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:"0",")"),this.canEditMeetingTitle&&d("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),d("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&d("dyte-tooltip",{label:this.t("breakout_rooms.delete"),class:"danger",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),this.mode==="edit"&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.roomName,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.roomName?this.t("joined"):this.t("join")),!this.room.isParent&&d("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};w6.style=EB;const TB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';-webkit-clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%);clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}`,k6=class{constructor(t){V(this,t),this.onSelectedParticipantsUpdate=re(this,"selectedParticipantsUpdate",7),this.onAllToggled=re(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=re(this,"participantsDragging",7),this.onSearchInput=e=>{this.search=e.target.value},this.onDragStart=e=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(e,!0)},this.onDragEnd=e=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(e,!1)},this.onClick=e=>{const i=this.selectedParticipantIds.includes(bi(e));this.updateSelectedParticipants(e,!i)},this.onToggleAll=e=>{const i=e?this.participantsToShow.map(bi):[];this.onAllToggled.emit(i)},this.meeting=void 0,this.participantIds=[],this.iconPack=H,this.t=W(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting!=null}updateSelectedParticipants(t,e){const i=bi(t);let r=[];e&&!this.selectedParticipantIds.includes(i)?r=[...this.selectedParticipantIds,i]:r=[...this.selectedParticipantIds.filter(s=>s!==i)],this.onSelectedParticipantsUpdate.emit(r)}meetingChanged(t){t!=null&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(t){this.getParticipants(t)}getParticipants(t){const e=eI(this.meeting);this.participantsToShow=e.filter(i=>{var r;return this.participantIds.includes(bi(i))&&((r=i.displayName)!==null&&r!==void 0?r:"").toLowerCase().includes(t.toLowerCase())})}renderPeer(t){const e=As(t.displayName||"");return d("div",{class:"peer-ui-container"},d("dyte-avatar",{participant:{name:t.displayName,picture:t.displayPictureUrl},size:"sm"}),d("p",{class:"name",title:e},ls(e,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}render(){return d(z,null,d("div",{class:"search-wrapper"},d("div",{class:"search",part:"search"},d("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),d("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),d("slot",{name:"shuffle-button"})),d("div",{class:"header"},d("div",{class:"title-wrapper"},d("span",null,this.t("breakout_rooms.main_room")),d("span",{class:"participant-count"},"(",d("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),this.selectedParticipantIds.length!==0&&d("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},d("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:t=>this.onToggleAll(!!t.target.checked)}))),d("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&d("ul",{class:"participants",part:"participants"},this.participantsToShow.map(t=>d("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(t),onDragStart:()=>this.onDragStart(t),onDragEnd:()=>this.onDragEnd(t),draggable:this.selectedParticipantIds.length===0,role:"listitem",key:t.id},this.renderPeer(t),!this.isDragging&&d("input",{type:"checkbox",class:{"hide-checkbox":this.selectedParticipantIds.length===0},checked:this.selectedParticipantIds.includes(bi(t))})))),this.participantsToShow.length===0&&this.search.length>0&&d("div",{class:"empty-message"},this.t("participants.errors.empty_results")),this.participantsToShow.length===0&&this.search.length===0&&d("div",{class:"empty-room"},d("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),d("p",null,this.t("breakout_rooms.all_assigned")),d("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};k6.style=TB;const CB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}",_6=class{constructor(t){V(this,t),this.onChange=re(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=H,this.t=W()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(t){this.onChange.emit(t)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return d(z,null,d("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),d("input",{type:"number",value:this.input,min:this.minValue,onInput:t=>{const e=parseInt(t.target.value,10);isNaN(e)||e<this.minValue?this.input=this.minValue.toString():this.input=e.toString()}}),d("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};_6.style=CB;var PB=Object.freeze({__proto__:null,dyte_breakout_room_manager:w6,dyte_breakout_room_participants:k6,dyte_counter:_6});const RB={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class IB{constructor(e){this.meeting=e,this.audio=document.createElement("audio"),this.audio.volume=.3}play(e,i=3e3){var r;this.playing||(this.playing=!0,this.audio.src=RB[e],this.audio.volume=.3,(r=this.audio.play())===null||r===void 0||r.catch(s=>{jp.error(`[dyte-notifications] play() failed
`,{sound:e,duration:i},s)}),setTimeout(()=>{this.playing=!1},i))}async setDevice(e){var i,r,s;yv(this.meeting)||await((s=(r=(i=this.audio)===null||i===void 0?void 0:i.setSinkId)===null||r===void 0?void 0:r.call(i,e))===null||s===void 0?void 0:s.catch(n=>{jp.error(`[dyte-notifications] setSinkId() error
`,n)}))}}const AB="header{box-sizing:border-box;height:var(--dyte-space-16, 64px);width:100%;padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}header.searching{justify-content:flex-end}header.searching .channel-details{display:none}header .channel-details{display:flex;flex-grow:1;flex-direction:column;justify-content:center;height:var(--dyte-space-9, 36px);width:var(--dyte-space-1, 4px)}header .channel-details .name{font-weight:500}header .channel-details .members{margin-top:var(--dyte-space-0\\.5, 2px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}header .channel-tools{display:flex;flex-shrink:0;justify-content:flex-end;gap:var(--dyte-space-1, 4px);min-width:var(--dyte-space-24, 96px)}header .channel-tools dyte-tooltip{height:var(--dyte-space-8, 32px);width:var(--dyte-space-10, 40px);display:flex}header .search-input{height:var(--dyte-space-8, 32px);width:var(--dyte-space-48, 192px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header .name{font-size:16px}header .br-primary-btn{background-color:transparent}header .br-primary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){header.searching .channel-details{display:flex}}.back-btn{margin-right:var(--dyte-space-3, 12px)}",S6=class{constructor(t){V(this,t),this.search=re(this,"search",7),this.searchDismissed=re(this,"searchDismissed",7),this.back=re(this,"back",7),this.meeting=void 0,this.channel=void 0,this.iconPack=H,this.t=W(),this.showChannelDetailsDialog=!1,this.showSearchBar=!1,this.members=[],this.showBackButton=!1}onChannelChanged(){this.$searchInput&&(this.$searchInput.value=""),this.showSearchBar=!1,this.channel.isDirectMessage||this.meeting.chat.getChannelMembers(this.channel.id).then(t=>{this.members=t})}connectedCallback(){this.onChannelChanged()}renderChannelDetails(){return d("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.showChannelDetailsDialog=!1},iconPack:this.iconPack,t:this.t},d("dyte-channel-details",{members:this.members,channel:this.channel}))}render(){return this.channel?d(z,null,this.showChannelDetailsDialog&&this.renderChannelDetails(),d("header",{class:{searching:this.showSearchBar}},this.showBackButton&&d("dyte-button",{kind:"icon",variant:"secondary",class:"back-btn",onClick:()=>{this.back.emit()}},d("dyte-icon",{icon:this.iconPack.chevron_left})),d("div",{class:"channel-details"},d("span",{class:"name"},this.channel.displayName),!this.channel.isDirectMessage&&d("span",{class:"members"},this.members.map(t=>t.name).join(", "))),d("div",{class:"channel-tools"},!this.channel.isDirectMessage&&d("dyte-tooltip",{label:this.t("chat.channel_members"),iconPack:this.iconPack,t:this.t,variant:"primary"},d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>{this.showChannelDetailsDialog=!this.showChannelDetailsDialog},class:"br-primary-btn"},d("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t})))))):null}static get watchers(){return{channel:["onChannelChanged"]}}};S6.style=AB;const MB=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));position:relative;min-height:48px}.dropdown-trigger{height:var(--dyte-space-12, 48px);width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));cursor:pointer;position:absolute;z-index:10}.dropdown-trigger span{display:flex;flex:1 1 0%;align-items:center;justify-content:space-between}.dropdown-trigger dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-shrink:0}.dropdown{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);z-index:10;animation:0.3s slide-down ease}.dropdown .channels-container{max-height:var(--dyte-space-80, 320px)}.list{display:flex;flex-direction:column}.list .channel .channel-data{align-items:flex-start}.unread-count{display:flex;justify-content:center;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-3, 12px);border-radius:9999px;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);font-size:12px;line-height:1.25rem;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}input{height:var(--dyte-space-9, 36px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);box-sizing:border-box;border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.search-container{display:flex;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:center;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.search-container dyte-icon{margin-left:calc(var(--dyte-space-8, 32px) * -1);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.channels-container{display:flex;flex-direction:column;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px);flex:1 1 auto;overflow-y:auto}.channel{flex-shrink:0;box-sizing:border-box;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;outline:2px solid transparent;outline-offset:2px;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.channel:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.channel .channel-data{flex:1 1 0%;align-items:center;justify-content:space-between;display:flex;gap:var(--dyte-space-2, 8px)}.channel .name,.channel .last-message{text-align:left;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.channel .no-message{font-style:italic}.channel dyte-avatar{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);overflow:clip;border-radius:9999px;font-size:14px}.channel .avatar-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));overflow:clip;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.channel time,.channel .last-message{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.channel.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.channel.active .unread-count{background-color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.channel.active time{color:rgb(var(--dyte-colors-text-on-brand-800, var(--dyte-colors-text-800, 255 255 255 / 0.76)))}.channel.active .last-message{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel.active dyte-avatar{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.col{gap:var(--dyte-space-1, 4px);display:flex;flex-direction:column}.channel-meta{flex-shrink:0;align-items:flex-end}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}`,x6=class{constructor(t){V(this,t),this.channelChange=re(this,"channelChange",7),this.calculateListHeight=q_(()=>{if(this.viewAs==="list"&&this.$listEl){let e=0;const i=this.$el.shadowRoot.querySelector('slot[name="header"]');i&&i.assignedElements().forEach(r=>e+=r.offsetHeight),this.$searchEl&&(e+=this.$searchEl.offsetHeight),this.$listEl.style.height=`${window.innerHeight-e-16}px`}},60),this.getFilteredChannels=()=>this.searchQuery.trim()===""?this.channels:this.channels.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())),this.toggleDropdown=()=>{this.showDropdown=!this.showDropdown},this.getChannelById=e=>this.channels.find(i=>i.id===e),this.getTotalUnreads=()=>this.channels.reduce((e,i)=>e+i.unreadCount,0),this.onChannelClickHandler=e=>{this.channelChange.emit(e),this.viewAs==="dropdown"&&(this.showDropdown=!1)},this.channels=void 0,this.selectedChannelId=void 0,this.disableSearch=!1,this.hideAvatar=!1,this.iconPack=H,this.t=W(),this.viewAs="list",this.searchQuery="",this.showDropdown=!1}connectedCallback(){this.resizeObserver=new ResizeObserver(this.calculateListHeight)}componentDidLoad(){this.resizeObserver.observe(this.$el),this.calculateListHeight()}disconnectedCallback(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()}getTimeLabel(t){const e=new Date,i=new Date(e);i.setDate(e.getDate()-1);const r=new Date(e);if(r.setDate(e.getDate()-e.getDay()-1),t.toDateString()===e.toDateString())return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(t.toDateString()===i.toDateString())return this.t("date.yesteday");if(t>r){const s=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(s[t.getDay()])}else return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(t)}render(){const t=this.getFilteredChannels(),e=this.viewAs==="list"||this.viewAs==="dropdown"&&this.showDropdown;return d(z,null,this.viewAs==="list"&&d("slot",{name:"header"}),e&&d("div",{class:{dropdown:this.viewAs==="dropdown",scrollbar:this.viewAs==="dropdown",list:this.viewAs==="list"}},!this.disableSearch&&d("div",{class:"search-container",ref:i=>this.$searchEl=i},d("input",{type:"text",placeholder:this.t("chat.search_conversations"),value:this.searchQuery,onInput:i=>this.searchQuery=i.target.value}),d("dyte-icon",{icon:this.iconPack.search})),d("div",{class:"channels-container scrollbar",ref:i=>this.$listEl=i},t.map(i=>d("button",{class:{channel:!0,active:this.selectedChannelId===i.id},onClick:()=>this.onChannelClickHandler(i)},!this.hideAvatar&&d("div",null,i.icon?d("dyte-icon",{class:"avatar-icon",icon:this.iconPack[i.icon]}):d("dyte-avatar",{participant:{name:i.name,picture:i.avatarUrl}})),d("div",{class:"channel-data"},d("div",{class:"col"},d("div",{class:"name"},i.name),i.latestMessage&&d("div",{class:{"last-message":!0,"no-message":!i.latestMessage}},d("dyte-text-message-view",{text:i.latestMessage}))),d("div",{class:"col channel-meta"},i.latestMessageTime&&d("time",{class:"time"},this.getTimeLabel(i.latestMessageTime)),i.unreadCount>0&&d("div",{class:"unread-count"},i.unreadCount))))))),this.viewAs==="dropdown"&&d("button",{class:"dropdown-trigger",onClick:this.toggleDropdown},d("span",null,`${this.t("to")} ${this.getChannelById(this.selectedChannelId).name}`,this.getTotalUnreads()>0&&d("div",{class:"unread-count"},this.getTotalUnreads())),d("dyte-icon",{icon:this.showDropdown?this.iconPack.chevron_up:this.iconPack.chevron_down})))}get $el(){return Pr(this)}};x6.style=MB;const DB=":host{display:flex;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);font-size:14px;position:relative}.quoted-message-container{margin-bottom:var(--dyte-space-2, 8px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.quoted-message-container .quoted-message{flex:1 1 0%;padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-24, 96px);overflow-y:auto;word-break:break-all}.quoted-message-container .quoted-message blockquote{display:none}.quoted-message-container dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.quoted-message-container dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.quoted-message-container dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.composer-container{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px);overflow:hidden;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.composer-container>.composers{min-height:60px}.chat-buttons{padding:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-buttons .right{z-index:10}.chat-buttons .right .edit-buttons{display:flex;gap:var(--dyte-space-2, 8px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:20;position:absolute;top:calc(var(--dyte-space-72, 288px) * -1);border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));animation:0.3s slide-up ease}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}",E6=class{constructor(t){V(this,t),this.onNewMessage=re(this,"newMessage",7),this.onEditMessage=re(this,"editMessage",7),this.onEditCancel=re(this,"editCancel",7),this.onQuotedMessageDismiss=re(this,"quotedMessageDismiss",7),this.textMessage="",this.sendFile=()=>{!this.canSendFiles||(this.fileToUpload.type==="image"?this.onNewMessage.emit({type:"image",file:this.fileToUpload.file}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.fileToUpload=null)},this.handleSendMessage=()=>{if(!this.canSendTextMessage)return;if(this.fileToUpload!==null){this.sendFile();return}const e=this.textMessage;e.length>0&&(this.quotedMessage.length!==0?this.onNewMessage.emit({type:"text",message:e}):this.onNewMessage.emit({type:"text",message:e}),this.cleanup())},this.handleEditMessage=()=>{this.onEditMessage.emit(this.textMessage),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancel.emit(),this.cleanup()},this.onTextChangeHandler=e=>{this.textMessage=e.detail,ds.setItem(this.storageKey,e.detail)},this.onKeyDownHandler=e=>{e.key==="Enter"&&e.shiftKey||e.key==="Enter"&&(e.preventDefault(),this.isEditing?this.handleEditMessage():this.handleSendMessage())},this.onFileUploadHandler=(e,i)=>{this.fileToUpload={type:e,file:i}},this.onQuotedMessageDismissHandler=()=>{this.onQuotedMessageDismiss.emit()},this.cleanup=()=>{this.textMessage="",this.fileToUpload=null,ds.setItem(this.storageKey,""),this.$textComposer.setText("",!0),this.isEmojiPickerOpen=!1},this.canSendTextMessage=!0,this.canSendFiles=!0,this.message="",this.quotedMessage="",this.storageKey="dyte-text-message",this.inputTextPlaceholder="Enter you message",this.isEditing=!1,this.iconPack=H,this.t=W(),this.disableEmojiPicker=!1,this.fileToUpload=null,this.isEmojiPickerOpen=!1}connectedCallback(){this.textMessage=this.message||ds.getItem(this.storageKey)||""}componentWillUpdate(){this.textMessage=this.message||ds.getItem(this.storageKey)||""}componentDidLoad(){this.message&&Mi(()=>this.$textComposer.setText(this.message,!0))}render(){const t={iconPack:this.iconPack,t:this.t};return d(z,null,this.canSendTextMessage&&this.isEmojiPickerOpen&&d("dyte-emoji-picker",Object.assign({part:"emoji-picker",onPickerClose:()=>{this.isEmojiPickerOpen=!1},onDyteEmojiClicked:e=>{this.textMessage+=e.detail,this.$textComposer.setText(this.textMessage,!0)}},t)),d("slot",{name:"chat-addon"}),this.quotedMessage&&this.quotedMessage.length!==0&&d("div",{class:"quoted-message-container",part:"quoted-message-container"},d("div",{class:"quoted-message scrollbar"},d("dyte-text-message-view",{text:this.quotedMessage})),d("div",null,d("dyte-icon",Object.assign({"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:this.onQuotedMessageDismissHandler},t)))),d("div",{class:"composer-container"},d("div",{class:"composers"},this.fileToUpload&&d("dyte-draft-attachment-view",{attachment:this.fileToUpload,onDeleteAttachment:()=>this.fileToUpload=null}),!this.fileToUpload&&d("dyte-text-composer-view",{value:this.textMessage,placeholder:this.inputTextPlaceholder,onTextChange:this.onTextChangeHandler,keyDownHandler:this.onKeyDownHandler,maxLength:ky,ref:e=>this.$textComposer=e})),d("div",{class:"chat-buttons",part:"chat-buttons"},d("div",{class:"left",part:"chat-buttons-left"},!this.fileToUpload&&!this.isEditing&&d("div",null,this.canSendFiles&&[d("dyte-file-picker-button",{onFileChange:e=>this.onFileUploadHandler("file",e.detail)}),d("dyte-file-picker-button",{filter:"image/*",label:this.t("chat.send_img"),icon:"image",onFileChange:e=>this.onFileUploadHandler("image",e.detail)})],this.canSendTextMessage&&!this.disableEmojiPicker&&d("dyte-emoji-picker-button",{isActive:this.isEmojiPickerOpen,onClick:()=>{this.isEmojiPickerOpen=!this.isEmojiPickerOpen}}),d("slot",{name:"chat-buttons"}))),d("div",{class:"right",part:"chat-buttons-right"},!this.isEditing&&d("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},t),d("dyte-button",Object.assign({kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg")},t),d("dyte-icon",{icon:this.iconPack.send}))),this.isEditing&&d("div",{class:"edit-buttons"},d("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},t),d("dyte-button",Object.assign({kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel")},t),d("dyte-icon",{icon:this.iconPack.dismiss}))),d("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},t),d("dyte-button",Object.assign({kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg")},t),d("dyte-icon",{icon:this.iconPack.checkmark}))))))))}};E6.style=DB;const OB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));word-break:break-word}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,T6=class{constructor(t){V(this,t),this.observingEl=[],this.autoScrollEnabled=!0,this.onScroll=e=>{const i=e.target;Mi(()=>{const{scrollTop:r,clientHeight:s,scrollHeight:n}=i;r+s+10>=n?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1})},this.scrollToBottom=()=>{jo(this.$chat)},this.observeMessage=e=>{e&&this.observingEl.push(e);try{this.intersectionObserver.observe(e)}catch{}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var t;this.lastReadTimestamp=(t=wv.everyone)!==null&&t!==void 0?t:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver(i=>{!document.hasFocus()||Mi(()=>{for(const r of i)r.isIntersecting&&parseInt(r.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(wv[this.selectedGroup]=new Date)})});const e=()=>{this.now=new Date,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(e))},60*1e3)};this.request=requestAnimationFrame(e),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll),this.$chat.scrollTop=this.$chat.scrollHeight}componentDidRender(){this.autoScrollEnabled?jo(this.$chat):this.autoScrollEnabled==null&&jo(this.$chat,!1)}chatChanged(t){if(this.$chat!=null&&!(this.autoScrollEnabled||this.$chat.clientHeight===this.$chat.scrollHeight)){for(let e=t.length-1;e>=0;e--)if(t[e].message.time>this.lastReadTimestamp&&t[e].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach(t=>{this.intersectionObserver.unobserve(t)}),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var t;let e=null,i=!1;return d(z,null,d("div",{class:"chat-container scrollbar",ref:r=>this.$chat=r,part:"container"},d("div",{class:"spacer",part:"spacer"}),d("div",{class:"chat",part:"chat"},(t=this.messages)===null||t===void 0?void 0:t.map(r=>{if(r.type==="chat"){const{message:s}=r,a=!(s.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&s.time>this.lastReadTimestamp;a&&(i=a);const o=!a&&s.userId===(e==null?void 0:e.userId)&&LI(s.time,e==null?void 0:e.time)<2;switch(e=s,s.type){case"text":return d("div",{"is-continued":o,key:r.message.id},a&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-text-message",{message:s,now:this.now,isContinued:o,"data-timestamp":s.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return d("div",{"is-continued":o,key:r.message.id},a&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-image-message",{message:s,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":s.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return d("div",{"is-continued":o,key:r.message.id},a&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-file-message",{message:s,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":s.time.getTime(),ref:this.observeMessage}))}}return null}))),d("div",{class:"show-new-messages-ctr"},d("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};T6.style=OB;const LB=":host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));flex:1 0 0px}",C6=class{constructor(t){V(this,t),this.editMessageInit=re(this,"editMessageInit",7),this.pageSize=25,this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead=e=>{if(!this.selectedChannelId||e.length===0||this.lastReadMessageIndex!==-1)return;const i=e.at(0).time>e.at(-1).time?e.at(0):e.at(-1);!i.channelIndex||(this.lastReadMessageIndex=parseInt(i.channelIndex,10),this.meeting.chat.markLastReadMessage(this.selectedChannelId,i))},this.getChatMessages=async(e,i,r)=>{const{messages:s}=await this.meeting.chat.getMessages(e,i,r,void 0,this.selectedChannelId);return this.maybeMarkChannelAsRead(s),s},this.createChatNodes=e=>e.map((i,r)=>{var s;const n=i.userId===((s=e[r-1])===null||s===void 0?void 0:s.userId);return this.createChatNode(i,n)}),this.disconnectMeeting=e=>{var i;(i=e==null?void 0:e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(e,i)=>{var r,s,n;const a=this.meeting.self.userId===e.userId,o=(r=this.meeting.self.permissions)===null||r===void 0?void 0:r.chatMessage,c=o===void 0?a:o.canEdit==="ALL"||o.canEdit==="SELF"&&a,u=o===void 0?a:o.canDelete==="ALL"||o.canDelete==="SELF"&&a;return d("dyte-chat-message",{message:e,isContinued:i,isUnread:!1,size:this.size,iconPack:this.iconPack,key:e.id,isSelf:a,alignRight:a&&this.meeting.meta.viewType==="CHAT",disableControls:this.meeting.meta.viewType!=="CHAT",senderDisplayPicture:(s=this.meeting.participants.all.toArray().find(l=>l.userId===e.userId))===null||s===void 0?void 0:s.picture,hideAvatar:a&&this.meeting.meta.viewType==="CHAT"||((n=this.selectedChannel)===null||n===void 0?void 0:n.isDirectMessage),canEdit:c&&e.type==="text",canDelete:u,canReply:e.type==="text",onEdit:()=>{e.type==="text"&&this.editMessageInit.emit({payload:e,flags:{isEdit:!0}})},onReply:()=>{e.type==="text"&&this.editMessageInit.emit({payload:e,flags:{isReply:!0}})},onDelete:async()=>{var l;await this.meeting.chat.deleteMessage(e.id,(l=this.selectedChannel)===null||l===void 0?void 0:l.id).catch(()=>{})}})},this.chatUpdateListener=e=>{this.selectedChannelId&&e.message.channelId!==this.selectedChannelId||(e.action==="add"?(this.$paginatedListRef.onNewNode(e.message),this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead([e.message])):e.action==="delete"?this.$paginatedListRef.onNodeDelete(e.message.id):e.action==="edit"&&this.$paginatedListRef.onNodeUpdate(e.message.id,e.message))},this.meeting=void 0,this.selectedChannel=void 0,this.selectedChannelId=void 0,this.size=void 0,this.iconPack=H,this.t=W()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;e!=null&&this.disconnectMeeting(e),!(t&&!t.chat)&&t!=null&&((i=t.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener))}channelChanged(){this.lastReadMessageIndex=-1}render(){return d(z,null,d("dyte-paginated-list",{ref:t=>this.$paginatedListRef=t,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes,selectedItemId:this.selectedChannelId,emptyListLabel:this.t("chat.empty_channel")}))}static get watchers(){return{meeting:["meetingChanged"],selectedChannelId:["channelChanged"]}}};C6.style=LB;const NB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;flex-direction:column;position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}",P6=class{constructor(t){V(this,t),this.pageSize=50,this.searchMessages=async(e,i,r)=>this.meeting.chat.searchMessages(this.query,{channelId:this.channelId,timestamp:e,size:i,reversed:r}),this.nodeRenderer=e=>e.map(i=>d("dyte-chat-message",{key:i.id,message:i,disableControls:!0})),this.meeting=void 0,this.query=void 0,this.channelId=void 0,this.iconPack=H,this.t=W()}render(){return d(z,null,d("dyte-paginated-list",{pageSize:this.pageSize,pagesAllowed:3,fetchData:this.searchMessages,createNodes:this.nodeRenderer,selectedItemId:this.query}))}};P6.style=NB;const UB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",R6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onDyteDialogClose=(e,i)=>{G[e]=i,this.stateUpdate.emit({[e]:i})},this.cancelJoinStage=async()=>{var e,i,r;((e=this.meeting.stage)===null||e===void 0?void 0:e.status)==="ACCEPTED_TO_JOIN_STAGE"&&await((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{await this.meeting.stage.join()},this.stageStatusUpdateListener=e=>{var i;((i=this.states)===null||i===void 0?void 0:i.activeJoinStage)===!0&&e==="ON_STAGE"&&this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=Ke,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.stage.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)}meetingChanged(t){if(t==null)return;const{stage:e}=t;e.addListener("stageStatusUpdate",this.stageStatusUpdateListener)}render(){var t,e,i,r;const s={meeting:this.meeting,states:this.states||G,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},n=this.states||G;if((n==null?void 0:n.image)!=null){const a=n.image,o=()=>{this.stateUpdate.emit({image:null}),G.image=null};return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:o,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-image-viewer",defaults:s,props:{image:a,onClose:o}})))}else{if((n==null?void 0:n.activeSettings)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-settings",defaults:s})));if((n==null?void 0:n.activeDebugger)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeDebugger",!1),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-debugger",defaults:s})));if((n==null?void 0:n.activeLeaveConfirmation)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-leave-meeting",defaults:s})));if(((t=n==null?void 0:n.activePermissionsMessage)===null||t===void 0?void 0:t.enabled)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-permissions-message",defaults:s})));if((n==null?void 0:n.activeRemoteAccessManager)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-remote-access-manager",defaults:s})));if(((e=n==null?void 0:n.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.active)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-breakout-rooms-manager",defaults:s,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(((i=n==null?void 0:n.activeConfirmationModal)===null||i===void 0?void 0:i.active)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-confirmation-modal",defaults:s})));if(((r=n==null?void 0:n.activeOverlayModal)===null||r===void 0?void 0:r.active)===!0)return d(z,null,d("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(n!=null&&n.activeBroadcastMessageModal)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-broadcast-message-modal",defaults:s})));if((n==null?void 0:n.activeJoinStage)===!0){const a={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:this.cancelJoinStage,iconPack:this.iconPack,t:this.t},d("dyte-join-stage",Object.assign({dataConfig:a,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.cancelJoinStage},s))))}else{if((n==null?void 0:n.activeMuteAllConfirmation)===!0)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-mute-all-confirmation",defaults:s})));if(n!=null&&n.activeChannelCreator)return d(z,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeChannelCreator",!1)},iconPack:this.iconPack,t:this.t},d(Be,{element:"dyte-channel-creator",defaults:s})))}}return null}static get watchers(){return{meeting:["meetingChanged"]}}};R6.style=UB;const ts=2e3,_w=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:ts,polls:ts,webinar:ts,tab_sync:ts},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10}),jB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";function $B(t){const e=Object.assign({},_w);return t==null||(Object.assign(e.notification_sounds,t.notification_sounds),Object.assign(e.notifications,t.notifications),Object.assign(e.notification_duration,t.notification_duration),e.participant_chat_message_sound_notification_limit=t.participant_chat_message_sound_notification_limit,e.participant_joined_sound_notification_limit=t.participant_joined_sound_notification_limit),e}function HE(t){return Object.keys(t).filter(e=>t[e])}const I6=class{constructor(t){V(this,t),this.permissions=_w,this.enabledSounds=HE(_w.notification_sounds),this.addStagePeersListeners=e=>{e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.meta.addListener("disconnected",this.networkDisconnectedListener),e.meta.addListener("connected",this.networkConnectedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=e=>{e.participants.joined.removeListener("participantJoined",this.participantJoinedListener),e.meta.removeListener("disconnected",this.networkDisconnectedListener),e.meta.removeListener("connected",this.networkConnectedListener),e.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:e,type:i})=>{if(i===as.INCOMING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${r.name}`,duration:ts})}if(i===as.OUTGOING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has granted remote control.`,duration:ts})}if(i===as.REQUEST_RECEIVED){let r=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has requested for remote control.`,duration:ts})}if((i===as.INCOMING_REQUEST_ENDED||i===as.OUTGOING_REQUEST_ENDED)&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:ts}),i===as.REQUEST_SENT){let r=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${r.name}`,duration:ts})}},this.onDyteNotification=e=>{this.add(e.detail);const i=e.detail.playSound;i!=null&&this.audio.play(i)},this.onRecordingUpdate=e=>{e==="RECORDING"?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:ts}):e==="STOPPING"&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:ts})},this.meeting=void 0,this.states=void 0,this.config=Ke,this.t=W(),this.size=void 0,this.iconPack=H,this.notifications=[]}connectedCallback(){typeof document<"u"&&(document==null||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(t){var e,i,r,s,n,a,o,c,u;const l=t.meta.viewType==="LIVESTREAM";(l&&((e=t.stage)===null||e===void 0?void 0:e.status)==="ON_STAGE"||!l)&&this.removeStagePeersListeners(t),this.chatUpdateListener&&((i=t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&((r=t.polls)===null||r===void 0||r.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&t.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&t.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&t.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&t.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&t.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&((s=t.stage)===null||s===void 0||s.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&((n=t.stage)===null||n===void 0||n.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&((a=t.stage)===null||a===void 0||a.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&((o=t.stage)===null||o===void 0||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),(c=t.remote)===null||c===void 0||c.removeListener("remoteUpdate",this.onRemoteUpdate),(u=t.recording)===null||u===void 0||u.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var t;typeof document<"u"&&(document==null||document.removeEventListener("dyteNotification",this.onDyteNotification)),this.meeting!=null&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.activeTabUpdateListener&&((t=this.meeting.meta)===null||t===void 0||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)),this.peerStageStatusListener&&this.meeting.participants.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener))}meetingChanged(t,e){var i,r,s,n,a,o,c,u,l;if(clearTimeout(this.disconnectTimeout),e!==void 0&&this.clearListeners(e),t==null)return;const p=t.meta.viewType==="LIVESTREAM";this.audio=new IB(t);const{notifications:m,notification_duration:y,notification_sounds:b}=this.permissions;if(this.participantJoinedListener=E=>{m.participant_joined&&this.add({id:`${E.id}-joined`,message:`${As(E.name)} just joined`,image:E.picture,duration:y.participant_joined}),b.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=E=>{m.participant_left&&this.add({id:`${E.id}-left`,message:`${As(E.name)} left`,image:E.picture,duration:y.participant_left}),b.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=E=>{const k=`${E.id}-joined-waitlist`;this.add({id:k,message:`${As(E.name)} is requesting to join the meeting`,image:E.picture,duration:y.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(E.id),this.remove(k)}}}),b.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:E})=>{const k=XI(E);if(k!=null){if(k.userId===t.self.userId)return;k.type==="text"&&(m.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${k.displayName}: ${k.message}`,duration:y.chat}),b.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:E,newPoll:k})=>{k!==!1&&(m.polls&&this.meeting.self.userId!==E[E.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${E[E.length-1].createdBy}`,duration:y.polls}),b.polls&&this.meeting.self.userId!==E[E.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:E,preview:k})=>{k||(E.kind==="audiooutput"?(this.audio.setDevice(E.deviceId),this.add({id:`speaker-switched-${E.deviceId}`,message:`Connected to ${E.label}`,icon:this.iconPack.speaker,duration:5e3})):E.kind==="videoinput"?this.add({id:`camera-switched-${E.deviceId}`,message:`Connected to ${E.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${E.deviceId}`,message:`Connected to ${E.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{this.remove("network");let E;E=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("network.reconnecting"),duration:E}),this.disconnectTimeout=setTimeout(()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("network.delay"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var k;return(k=this.meeting)===null||k===void 0?void 0:k.leaveRoom()}}})},E)},this.networkConnectedListener=()=>{this.remove("network");let E;this.remove("network-lost"),E=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:E}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:E,attempt:k})=>{this.remove("socket"),E==="reconnected"?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:3e3})):E==="disconnected"?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.lost"),duration:3e3}):E==="reconnecting"?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.lost_extended")}):E==="reconnectFailure"?k>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.delay_extended"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var T;return(T=this.meeting)===null||T===void 0?void 0:T.leaveRoom()}}})):E==="failed"&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("network.disconnected")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("network.leaving")}),setTimeout(()=>{var T;(T=this.meeting)===null||T===void 0||T.leaveRoom("disconnected")},1e4))},this.activeTabUpdateListener=E=>{if(!!m.tab_sync)switch(E.type){case"plugin":const k=t.plugins.active.toArray().find(I=>I.id==E.id);k!=null&&this.add({id:"activeTab",message:`Plugin switched to ${k.name}`,duration:y.participant_joined});break;case"screenshare":const T=t.participants.joined.toArray().filter(I=>I.screenShareEnabled).find(I=>I.id==E.id);T!=null&&this.add({id:"spotlight",message:`Now watching ${T.name}'s screen`,duration:y.webinar});break}},this.peerStageStatusListener=E=>{E.stageStatus==="REQUESTED_TO_JOIN_STAGE"&&(this.add({id:`stage-request-${E.id}`,message:`${E.name} has requested to join stage`,duration:y.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.stage.grantAccess([E.userId]),this.remove(`stage-request-${E.id}`)}}}),b.webinar&&this.audio.play("joined")),E.stageStatus==="ON_STAGE"&&(this.add({id:`stage-joined-${E.id}`,message:`${E.name} has joined stage`,duration:y.webinar}),b.webinar&&this.audio.play("joined"))},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:E})=>{this.add({id:"new-stage-request",message:`You have ${E} pending request${E===1?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=E=>{E==="ON_STAGE"?this.addStagePeersListeners(t):this.removeStagePeersListeners(t)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:E})=>this.socketUpdateListener({event:"reconnectFailure",attempt:E}),!Zo(t)&&((i=t.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener)),t.self.config.viewType==="CHAT")return;const S=t.self.getCurrentDevices();S.speaker!=null&&this.audio.setDevice(S.speaker.deviceId),p?(r=t.stage)===null||r===void 0||r.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(t),t.participants.joined.on("stageStatusUpdate",this.peerStageStatusListener),this.canAcceptWaitingRequests()&&t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),(s=t.polls)===null||s===void 0||s.addListener("pollsUpdate",this.pollUpdateListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener),t.meta.addListener("socketReconnected",this.socketReconnectedListener),t.meta.addListener("socketDisconnected",this.socketDisconnectedListener),t.meta.addListener("socketReconnecting",this.socketReconnectingListener),t.meta.addListener("socketFailure",this.socketFailureListener),t.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),(n=t.remote)===null||n===void 0||n.addListener("remoteUpdate",this.onRemoteUpdate),(a=t.meta)===null||a===void 0||a.addListener("activeTabUpdate",this.activeTabUpdateListener),(o=t.recording)===null||o===void 0||o.addListener("recordingUpdate",this.onRecordingUpdate),(c=t.stage)===null||c===void 0||c.addListener("stageRequestApproved",this.stageRequestAccepted),(u=t.stage)===null||u===void 0||u.addListener("stageRequestRejected",this.stageRequestRejected),t.self.permissions.acceptPresentRequests&&((l=t.stage)===null||l===void 0||l.addListener("newStageRequest",this.newStageRequests))}configChanged(t){t!=null&&(t==null?void 0:t.config)!=null&&(this.permissions=$B(t.config),this.enabledSounds=HE(this.permissions.notification_sounds))}statesChanged(t){var e;if(t!=null){const i=!(!((e=t==null?void 0:t.prefs)===null||e===void 0)&&e.muteNotificationSounds);for(const r of this.enabledSounds)r in this.permissions.notification_sounds&&(this.permissions.notification_sounds[r]=i)}}apiErrorListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:ts,icon:this.iconPack.warning})}sendNotificationListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:ts})}add(t){document.visibilityState==="visible"&&this.notifications.length<5&&(this.notifications=[...this.notifications,t])}remove(t){this.notifications=this.notifications.filter(e=>e.id!==t)}handleDismiss(t){t.stopPropagation();const e=t.detail,i=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{Mi(()=>{this.remove(e)})},400)}canPlayParticipantJoinedSound(){return this.permissions.participant_joined_sound_notification_limit==null||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return this.permissions.participant_chat_message_sound_notification_limit==null||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return d(z,null,this.notifications.map(t=>d("dyte-notification",{size:this.size,key:t.id,"data-id":t.id,notification:t,onDyteNotificationDismiss:e=>this.handleDismiss(e),iconPack:this.iconPack,t:this.t})))}get host(){return Pr(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};I6.style=jB;var zB=Object.freeze({__proto__:null,dyte_channel_header:S6,dyte_channel_selector_view:x6,dyte_chat_composer_view:E6,dyte_chat_messages_ui:T6,dyte_chat_messages_ui_paginated:C6,dyte_chat_search_results:P6,dyte_dialog_manager:R6,dyte_notifications:I6});const FB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.failed,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}.row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.section{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.status-text{margin-top:var(--dyte-space-3, 12px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;flex-direction:row;align-items:center;justify-content:center}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-40, 160px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.m3{margin-top:var(--dyte-space-3, 12px)}.m1{margin-top:var(--dyte-space-1, 4px)}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.error-text{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;font-size:14px;font-weight:100 !important;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.error-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.volume-indicator{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.volume-level{height:var(--dyte-space-3, 12px);width:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-bg-opacity));transition:width 0.5s}.stage-manager{position:sticky;bottom:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}.speaker-test{margin-top:var(--dyte-space-4, 16px);display:flex;flex-direction:row}.speaker-test dyte-button{margin-right:var(--dyte-space-2, 8px)}",A6=class{constructor(t){V(this,t),this.testProgress=re(this,"testProgress",7),this.lowVolCount=0,this.silenceCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.micMetadata={},this.micPreview=!1,this.speakerPreview=!1,this.audioTrackStats={lowVolume:!1,clip:!1,silence:!1,volume:0,timestamp:0},this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.speakerDevice=void 0,this.speakerTest="none"}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var t;const{self:e,troubleshoot:i}=this.meeting;this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest(),e==null||e.removeListener("deviceUpdate",this.deviceUpdateListener),e==null||e.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(t=i==null?void 0:i.audio)===null||t===void 0||t.removeListener("audioTrackStats",this.audioTrackUpdateListener)}async meetingChanged(t){var e,i;if(!t)return;const{self:r,troubleshoot:s}=t;r!=null&&r.audioTrack&&await this.getTrackInfo(),r==null||r.on("deviceUpdate",this.deviceUpdateListener.bind(this)),r.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this));const n=(e=r==null?void 0:r.mediaPermissions)===null||e===void 0?void 0:e.audio;this.mediaPermissionUpdateListener({kind:"audio",message:n}),(i=s==null?void 0:s.audio)===null||i===void 0||i.on("audioTrackStats",this.audioTrackUpdateListener.bind(this))}deviceUpdateListener({device:t,preview:e}){e||(t.kind==="audioInput"&&(this.speakerDevice=t),t.kind==="audiooutput"&&this.getTrackInfo())}mediaPermissionUpdateListener({kind:t,message:e}){t==="audio"&&(this.mediaPermission=e,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress(),this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest()))}audioTrackUpdateListener(t){this.audioTrackStats=Object.assign(Object.assign({},t),{volume:this.normalizeVolume(t==null?void 0:t.volume)}),this.volumeEl&&(this.volumeEl.style.width=`${this.audioTrackStats.volume}%`)}setActiveTab(t){this.activeTab=t,this.updateProgress()}async toggleMicTest(){var t,e,i;const r=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;this.micPreview=!this.micPreview,this.micPreview?(await this.getTrackInfo(),r.stopTrackAnalysis(),await(r==null?void 0:r.startTrackAnalysis(!0))):((i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.audio)===null||i===void 0||i.stopTrackAnalysis(),this.audioTrackStats.volume=0,this.volumeEl&&(this.volumeEl.style.width="5%"))}async toggleSpeakerTest(){var t,e,i,r;const s=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;if(!((e=this.testAudioEl)===null||e===void 0)&&e.paused?(this.testAudioEl.currentTime=.2,(i=this.testAudioEl)===null||i===void 0||i.play(),this.speakerPreview=!0,s==null||s.startTrackAnalysis(!0),this.testAudioEl.addEventListener("ended",()=>{this.speakerPreview=!1,s==null||s.stopTrackAnalysis()})):((r=this.testAudioEl)===null||r===void 0||r.pause(),this.speakerPreview=!1,s==null||s.stopTrackAnalysis()),this.speakerPreview){const{self:n}=this.meeting,a=await(n==null?void 0:n.getSpeakerDevices());if(!a)return;this.speakerDevice=a[0],n==null||n.setDevice(a[0])}}async getTrackInfo(){var t,e;this.micMetadata=await((e=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio)===null||e===void 0?void 0:e.getTrackMetadata(!0))}changeStage(t){this.mediaPermission==="ACCEPTED"&&(t=Math.max(0,t),t=Math.min(2,t),this.stage=t,this.updateProgress(),this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/3):this.testProgress.emit(0)}getAudioLevelStatus(){let t="All systems are functional.",e="checkmark",i="success";return this.detectLowVolume()&&(t="Low volume detected, please move closer to the device.",e="warning",i="warning"),this.audioTrackStats.clip&&(t="Clipping detected. Your audio may be noisy.",e="warning",i="error"),this.detectSilence()&&(t="Silence detected. Your device is not picking up audio.",e="warning",i="error"),d("div",{class:`row status-text ${i}`},d("dyte-icon",{size:"sm",icon:this.iconPack[e]}),this.t(t))}getDeviceInformationStatus(){let t="All systems are functional.",e="checkmark",i="success";const{channelCount:r,channelInterpretation:s,channelType:n,outputs:a}=this.micMetadata;return(s==="discrete"&&a>r||n==="STEREO"&&a===1||n==="QUAD"&&a===1||n==="QUAD"&&a===2)&&(t="Audio quality might be degraded.",e="warning",i="warning"),(n==="MONO"&&r<1||n==="STEREO"&&r<2||n==="QUAD"&&r<4)&&(t="Looks like your device is not functioning properly.",e="warning",i="error"),d("div",{class:`row status-text ${i}`},d("dyte-icon",{size:"sm",icon:this.iconPack[e]}),this.t(t))}getSpeakerTestStatus(){if(this.speakerTest==="success")return"All systems are functional.";if(this.speakerTest==="failed")return"Test failed. Please ensure your system volume is not 0."}setSpeakerTestResult(t){this.speakerPreview&&this.toggleSpeakerTest(),this.speakerTest=t}boolToStr(t){return t?"Yes":"No"}formatLabel(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}normalizeVolume(t=0){let e=.3;const i=.001;return t>e&&(e=t),Math.max(5,Math.round(t*100/(e-i)))}detectLowVolume(){var t;return!((t=this.audioTrackStats)===null||t===void 0)&&t.lowVolume?this.lowVolCount++:this.lowVolCount=0,this.lowVolCount>10}detectSilence(){var t;return!((t=this.audioTrackStats)===null||t===void 0)&&t.silence?this.silenceCount++:this.silenceCount=0,this.silenceCount>5}render(){const t={meeting:this.meeting,states:this.states||G,iconPack:this.iconPack,t:this.t,size:this.size},e=["label","channelType"];return d(z,null,d("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:i=>this.testAudioEl=i}),d("div",{id:"header"},["Report","Troubleshoot"].map(i=>d("dyte-button",{key:i,variant:"ghost",class:{active:this.activeTab===i},onClick:()=>this.setActiveTab(i),iconPack:this.iconPack,t:this.t},this.t(i)))),this.activeTab==="Troubleshoot"&&d("div",{class:"tab-body"},d("div",null,d("div",{class:"stage-indicator"},"Step ",this.stage+1,"/3"),this.stage===0&&d("dyte-debugger-permissions-ui",Object.assign({},t,{mediaType:"audio"})),this.stage===1&&d("div",null,d("div",{class:"title"},"Microphone Test"),d("div",{class:"text"},this.t("Please start the microphone test and start speaking in order to test your audio device.")),d("dyte-button",{size:"md",onClick:()=>this.toggleMicTest()},this.micPreview?"Stop":"Start"," Microphone Test"),this.micPreview&&d("div",{class:"col"},d("div",{class:"sub-title"},"Device Information",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.micMetadata).map(i=>d("div",null,this.formatLabel(i),": ",d("span",null,this.micMetadata[i])))))),e.map(i=>{const r=this.micMetadata[i];if(!!r)return d("div",{class:"row"},d("div",{class:"label"},d("span",null,this.t(this.formatLabel(i))),":"),d("div",{class:"text"},this.t(r)))}),this.getDeviceInformationStatus(),d("div",{class:"sub-title"},"Audio Level Analysis",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},d("div",null,"Volume Level:",d("span",null,this.audioTrackStats.volume,"/100")),d("div",null,"Low Volume:",d("span",null,this.boolToStr(this.audioTrackStats.lowVolume))),d("div",null,"Silence Detected:",d("span",null,this.boolToStr(this.audioTrackStats.silence))),d("div",null,"Noise Detected:",d("span",null,this.boolToStr(this.audioTrackStats.clip))),d("div",null,"Time:",d("span",null,new Date(this.audioTrackStats.timestamp).toLocaleTimeString()))))),d("div",{class:"row"},d("dyte-icon",{icon:this.iconPack.speaker,size:"md"}),d("div",{class:"volume-indicator"},d("div",{class:"volume-level",ref:i=>this.volumeEl=i}))),this.getAudioLevelStatus())),this.stage===2&&d("div",{class:"col"},d("div",{class:"title"},"Speaker Test"),d("div",{class:"text"},this.t("Upon starting this test, an audio will be played. Please ensure your system volume is not set to zero.")),d("dyte-button",{onClick:()=>this.toggleSpeakerTest(),size:"md"},this.speakerPreview?"Stop":"Start"," Speaker Test"),this.speakerDevice&&d("div",null,d("div",{class:"sub-title"},"Device Information"),d("div",{class:"row"},d("div",{class:"label"},d("span",null,"Label"),":"),d("div",{class:"text"},this.speakerDevice.label))),this.speakerPreview&&d("div",null,d("p",{class:"sub-title"},"Are you able to hear the audio?"),d("div",{class:"speaker-test"},d("dyte-button",{onClick:()=>this.setSpeakerTestResult("success"),size:"sm",variant:"primary"},"Yes"),d("dyte-button",{onClick:()=>this.setSpeakerTestResult("failed"),size:"sm",variant:"secondary"},"No"))),!this.speakerPreview&&this.speakerTest!=="none"&&d("div",{class:`row status-text ${this.speakerTest}`},d("dyte-icon",{size:"sm",icon:this.iconPack[this.speakerTest==="failed"?"dismiss":"checkmark"]}),this.getSpeakerTestStatus()))),d("div",{class:"stage-manager"},this.stage<2&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})),this.stage>0&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"))),this.activeTab==="Report"&&d("div",{class:"tab-body"},d("dyte-debugger-issues-ui",Object.assign({},t,{mediaType:"audio"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};A6.style=FB;const VB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.status-text{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;width:100%;flex-direction:row;align-items:center;justify-content:flex-start}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-icon{margin-left:var(--dyte-space-2, 8px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-28, 112px) !important;min-width:var(--dyte-space-28, 112px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.align-start{align-items:flex-start !important}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.info{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;font-size:14px;font-weight:100 !important;--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity));opacity:0.7}.info dyte-icon{margin-right:var(--dyte-space-2, 8px)}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.stage-manager{margin-top:var(--dyte-space-4, 16px);display:flex;width:100%;flex-direction:row-reverse;align-items:center;justify-content:space-between;align-self:flex-end;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{position:relative;display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}",M6=class{constructor(e){V(this,e),this.testProgress=re(this,"testProgress",7),this.lowVolCount=0,this.silenceCount=0,this.frozenFramesCount=0,this.blackFramesCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.screenshareEnabled=!1,this.audioTrackMetadata={},this.videoTrackMetadata={},this.screenshareTest=!1,this.audioTrackStats={lowVolume:!1,clip:!1,silence:!1,volume:0,timestamp:0},this.videoTrackStats={isBlackFrame:!1,isFrozenFrame:!1,timestamp:0,videoScore:0}}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var e,i;const{self:r,troubleshoot:s}=this.meeting;this.screenshareTest&&this.toggleScreenshareTest(),r==null||r.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),r.removeListener("screenShareUpdate",this.screenShareUpdateListener),(e=s==null?void 0:s.screenshare)===null||e===void 0||e.removeListener("audioTrackStats",this.audioTrackUpdateListener),(i=s==null?void 0:s.screenshare)===null||i===void 0||i.removeListener("videoTrackStats",this.videoTrackUpdateListener)}async meetingChanged(e){var i,r,s;if(!e)return;const{self:n,troubleshoot:a}=e;n.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this)),n.addListener("screenShareUpdate",this.screenShareUpdateListener.bind(this)),(i=a==null?void 0:a.screenshare)===null||i===void 0||i.on("audioTrackStats",this.audioTrackUpdateListener.bind(this)),(r=a==null?void 0:a.screenshare)===null||r===void 0||r.on("videoTrackStats",this.videoTrackUpdateListener.bind(this));const o=(s=n==null?void 0:n.mediaPermissions)===null||s===void 0?void 0:s.screenshare;this.mediaPermissionUpdateListener({kind:"screenshare",message:o});const c=n==null?void 0:n.screenShareEnabled;this.screenShareUpdateListener({screenShareEnabled:c})}mediaPermissionUpdateListener({kind:e,message:i}){e==="screenshare"&&(this.mediaPermission=i,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress()))}screenShareUpdateListener({screenShareEnabled:e}){this.screenshareEnabled=e,!this.screenshareEnabled&&this.screenshareTest&&this.toggleScreenshareTest()}audioTrackUpdateListener(e){this.audioTrackStats=Object.assign(Object.assign({},e),{volume:this.normalizeVolume(e==null?void 0:e.volume)})}videoTrackUpdateListener(e){this.videoTrackStats=Object.assign(Object.assign({},e),{videoScore:this.normalizeVideoScore(e==null?void 0:e.videoScore)})}async toggleScreenshareTest(){var e,i,r;this.screenshareTest=!this.screenshareTest;const s=(e=this.meeting)===null||e===void 0?void 0:e.troubleshoot.screenshare;this.screenshareTest&&this.screenshareEnabled?(this.audioTrackMetadata=(i=s==null?void 0:s.getAudioTrackMetaData())!==null&&i!==void 0?i:{},this.videoTrackMetadata=(r=s==null?void 0:s.getVideoTrackMetaData())!==null&&r!==void 0?r:{},await s.startAudioTrackAnalysis(),await s.startVideoTrackAnalysis()):(s==null||s.stopAudioTrackAnalysis(),s==null||s.stopVideoTrackAnalysis())}setActiveTab(e){this.activeTab=e,this.updateProgress()}changeStage(e){this.mediaPermission==="ACCEPTED"&&(e=Math.max(0,e),e=Math.min(1,e),this.stage=e,this.updateProgress(),this.screenshareTest&&this.toggleScreenshareTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/2):this.testProgress.emit(0)}getDeviceInformationStatus(){let e="All systems are functional.",i="checkmark",r="success";if(this.audioTrackMetadata){const{channelCount:s,channelInterpretation:n,channelType:a,outputs:o}=this.audioTrackMetadata;(n==="discrete"&&o>s||a==="STEREO"&&o===1||a==="QUAD"&&o===1||a==="QUAD"&&o===2)&&(e="Audio quality might be degraded.",i="warning",r="warning"),(a==="MONO"&&s<1||a==="STEREO"&&s<2||a==="QUAD"&&s<4)&&(e="Looks like your device is not functioning properly.",i="warning",r="error")}return d("div",{class:`row status-text ${r}`},d("dyte-icon",{size:"sm",icon:this.iconPack[i]}),this.t(e))}getAudioAnalysisStatus(){var e;let i="All systems are functional.",r="checkmark",s="success";return!((e=this.audioTrackMetadata)===null||e===void 0)&&e.label?(this.detectLowVolume()&&(i="Low volume detected.",r="warning",s="warning"),this.audioTrackStats.clip&&(i="Your audio may be noisy.",r="warning",s="error"),this.detectSilence()&&(i="Silence detected.",r="warning",s="error"),d("div",{class:`row status-text ${s}`},d("dyte-icon",{size:"sm",icon:this.iconPack[r]}),this.t(i))):d("div",{class:"row status-text warning"},d("dyte-icon",{size:"sm",icon:this.iconPack.warning}),this.t("Not Available"))}getVideoAnalysisStatus(){var e,i;let r="All systems are functional.",s="checkmark",n="success";return!((e=this.videoTrackStats)===null||e===void 0)&&e.isBlackFrame?this.blackFramesCount++:this.blackFramesCount=0,!((i=this.videoTrackStats)===null||i===void 0)&&i.isFrozenFrame?this.frozenFramesCount++:this.frozenFramesCount=0,this.frozenFramesCount>4&&(r="Looks like the video is frozen.",s="warning",n="error"),this.blackFramesCount>4&&(r="Video is not being processed by the camera.",s="warning",n="error"),d("div",{class:`row status-text ${n}`},d("dyte-icon",{size:"sm",icon:this.iconPack[s]}),this.t(r))}formatLabel(e){const i=e.replace(/([A-Z])/g," $1");return i.charAt(0).toUpperCase()+i.slice(1)}nullToStr(e){return e||"Not Available"}normalizeVolume(e=0){let i=.3;const r=.001;return e>i&&(i=e),Math.max(5,Math.round(e*100/(i-r)))}normalizeVideoScore(e=0){let i=1;const r=0;return e>i&&(i=e),Math.max(5,Math.round(e*10/(i-r)))}detectLowVolume(){var e;return!((e=this.audioTrackStats)===null||e===void 0)&&e.lowVolume?this.lowVolCount++:this.lowVolCount=0,this.lowVolCount>10}detectSilence(){var e;return!((e=this.audioTrackStats)===null||e===void 0)&&e.silence?this.silenceCount++:this.silenceCount=0,this.silenceCount>5}render(){var e,i;const r={meeting:this.meeting,states:this.states||G,iconPack:this.iconPack,t:this.t,size:this.size};return d(z,null,d("div",{id:"header"},["Report","Troubleshoot"].map(s=>d("dyte-button",{key:s,variant:"ghost",class:{active:this.activeTab===s},onClick:()=>this.setActiveTab(s),iconPack:this.iconPack,t:this.t},this.t(s)))),this.activeTab==="Troubleshoot"&&d("div",{class:"tab-body"},d("div",null,d("div",{class:"stage-indicator"},"Step ",this.stage+1,"/2"),this.stage===0&&d("dyte-debugger-permissions-ui",Object.assign({},r,{mediaType:"screenshare"})),this.stage===1&&(this.screenshareEnabled?d("div",{class:"col"},d("div",{class:"text"},"Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots."),d("dyte-button",{onClick:()=>this.toggleScreenshareTest()},this.screenshareTest?"Stop":"Start"," Screenshare Tests"),this.screenshareTest&&d("div",null,d("div",{class:"sub-title"},"Device Information",d("dyte-information-tooltip",null,d("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.audioTrackMetadata).map(s=>{if(s!=="label")return d("div",null,"Audio ",this.formatLabel(s),":"," ",d("span",null,this.audioTrackMetadata[s]))}),Object.keys(this.videoTrackMetadata).map(s=>{if(s!=="label")return d("div",null,"Video ",this.formatLabel(s),":"," ",d("span",null,JSON.stringify(this.videoTrackMetadata[s])))})))),d("div",{class:"row align-start"},d("div",{class:"label"},d("span",null,"Audio Label"),":"),d("div",{class:"text"},this.nullToStr((e=this.audioTrackMetadata)===null||e===void 0?void 0:e.label))),d("div",{class:"row align-start"},d("div",{class:"label"},d("span",null,"Video Label"),":"),d("div",{class:"text"},this.nullToStr((i=this.videoTrackMetadata)===null||i===void 0?void 0:i.label))),this.getDeviceInformationStatus(),d("div",{class:"sub-title"},"Device Analysis"),d("div",{class:"row "},d("div",{class:"label"},d("span",null,"Audio Analysis")," :"),this.getAudioAnalysisStatus()),d("div",{class:"row"},d("div",{class:"label"},d("span",null,"Video Analysis")," :"),this.getVideoAnalysisStatus()))):d("div",{class:"col"},d("div",{class:"info"},d("dyte-icon",{size:"sm",icon:this.iconPack.warning}),"You are not sharing your screen."),d("div",{class:"text"},"In order for us to test your screenshare, you need to be sharing your screen. You can enable screenshare from the control bar.")))),d("div",{class:"stage-manager"},this.stage<1&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})),this.stage>0&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"))),this.activeTab==="Report"&&d("div",{class:"tab-body"},d("dyte-debugger-issues-ui",Object.assign({},r,{mediaType:"screenshare"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};M6.style=VB;const BB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}.row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.status-text{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;flex-direction:row;align-items:center;justify-content:center}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-40, 160px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.stage-manager{position:sticky;bottom:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);display:flex;width:100%;flex-direction:row-reverse;align-items:center;justify-content:space-between;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}.video-container{position:relative;width:-moz-fit-content;width:fit-content}.no-video-preview{position:absolute;top:50%;left:50%;z-index:50;display:flex;height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);align-items:center;justify-content:center;border-radius:50%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));translate:-50% -50%}.video-preview{margin-top:var(--dyte-space-1, 4px);aspect-ratio:16 / 9;height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}video{transform:scaleX(-1)}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}",D6=class{constructor(e){V(this,e),this.testProgress=re(this,"testProgress",7),this.blackFramesCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.videoPreview=!1,this.videoMetadata={},this.videoTrackStats={isBlackFrame:!1,isFrozenFrame:!1,timestamp:0,videoScore:0}}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var e;const{self:i,troubleshoot:r}=this.meeting;this.videoPreview&&this.toggleVideoTest(),i==null||i.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(e=r==null?void 0:r.video)===null||e===void 0||e.removeListener("videoTrackStats",this.videoTrackUpdateListener)}async meetingChanged(e){var i,r;if(!e)return;const{self:s,troubleshoot:n}=e;s!=null&&s.videoTrack&&await this.getTrackInfo(),s==null||s.on("deviceUpdate",this.deviceUpdateListner.bind(this)),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this));const a=(i=s==null?void 0:s.mediaPermissions)===null||i===void 0?void 0:i.video;this.mediaPermissionUpdateListener({kind:"video",message:a}),(r=n==null?void 0:n.video)===null||r===void 0||r.on("videoTrackStats",this.videoTrackUpdateListener.bind(this))}mediaPermissionUpdateListener({kind:e,message:i}){e==="video"&&(this.mediaPermission=i,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress(),this.videoPreview&&this.toggleVideoTest()))}deviceUpdateListner({device:e,preview:i}){i||(e==null?void 0:e.kind)==="videoinput"&&this.getTrackInfo()}videoTrackUpdateListener(e){this.videoTrackStats=Object.assign(Object.assign({},e),{videoScore:this.normalizeVideoScore(e==null?void 0:e.videoScore)})}setActiveTab(e){this.activeTab=e,this.updateProgress()}async toggleVideoTest(){var e,i;this.videoPreview=!this.videoPreview;const r=(i=(e=this.meeting)===null||e===void 0?void 0:e.troubleshoot)===null||i===void 0?void 0:i.video;if(this.videoPreview){const s=await(r==null?void 0:r.startPreview()),n=new MediaStream;if(!s)return;n.addTrack(s),setTimeout(()=>{this.videoEl.srcObject=n},500),this.getTrackInfo(),await(r==null?void 0:r.startTrackAnalysis())}else r==null||r.stopPreview(),r==null||r.stopTrackAnalysis(),this.videoEl.srcObject=void 0}getTrackInfo(){var e,i;this.videoMetadata=(i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.video)===null||i===void 0?void 0:i.getTrackMetadata()}getAnalysisStatus(){var e,i;let r="All systems are functional.",s="checkmark",n="success";return!((e=this.videoTrackStats)===null||e===void 0)&&e.isBlackFrame?this.blackFramesCount++:this.blackFramesCount=0,!((i=this.videoTrackStats)===null||i===void 0)&&i.isFrozenFrame&&(r="Looks like the video is frozen.",s="warning",n="error"),this.blackFramesCount>10&&(r="Video is not being processed by the camera.",s="warning",n="error"),d("div",{class:`row status-text ${n}`},d("dyte-icon",{size:"sm",icon:this.iconPack[s]}),this.t(r))}changeStage(e){this.mediaPermission==="ACCEPTED"&&(e=Math.max(0,e),e=Math.min(1,e),this.stage=e,this.updateProgress(),this.videoPreview&&this.toggleVideoTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/2):this.testProgress.emit(0)}formatLabel(e){const i=e.replace(/([A-Z])/g," $1");return i.charAt(0).toUpperCase()+i.slice(1)}boolToStr(e){return e?"Yes":"No"}normalizeVideoScore(e=0){let i=1;const r=0;return e>i&&(i=e),Math.max(5,Math.round(e*10/(i-r)))}render(){const e={meeting:this.meeting,states:this.states||G,iconPack:this.iconPack,t:this.t,size:this.size};return d(z,null,d("div",{id:"header"},["Report","Troubleshoot"].map(i=>d("dyte-button",{key:i,variant:"ghost",class:{active:this.activeTab===i},onClick:()=>this.setActiveTab(i),iconPack:this.iconPack,t:this.t},this.t(i)))),this.activeTab==="Troubleshoot"&&d("div",{class:"tab-body"},d("div",null,d("div",{class:"stage-indicator"},"Step ",this.stage+1,"/2"),this.stage===0&&d("dyte-debugger-permissions-ui",Object.assign({},e,{mediaType:"video"})),this.stage===1&&d("div",null,d("div",{class:"title"},"Camera Test"),d("div",{class:"text"},this.t("Upon starting the Camera Test, a video preview will be enabled for you.")),d("dyte-button",{size:"md",onClick:()=>this.toggleVideoTest()},this.videoPreview?"Stop":"Start"," Camera Test"),this.videoPreview&&this.videoMetadata&&d("div",{class:"col"},d("div",{class:"sub-title"},"Device Information",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.videoMetadata).map(i=>d("div",null,this.formatLabel(i),":",d("span",null,JSON.stringify(this.videoMetadata[i]))))))),d("div",{class:"row"},d("div",{class:"label"},d("span",null,this.t("Device Label")),":"),d("div",{class:"text"},this.t(this.videoMetadata.label))),d("div",{class:"sub-title"},"Video & Device Analysis",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},d("div",null,"Video Score:",d("span",null,this.videoTrackStats.videoScore,"/10")),d("div",null,"Black Frame Detected:",d("span",null,this.boolToStr(this.videoTrackStats.isBlackFrame))),d("div",null,"Frozen Frame Detected:",d("span",null,this.boolToStr(this.videoTrackStats.isFrozenFrame))),d("div",null,"Time:",d("span",null,new Date(this.videoTrackStats.timestamp).toLocaleTimeString()))))),d("div",{class:"video-container"},!this.videoPreview&&d("div",{class:"no-video-preview"},d("dyte-icon",{icon:this.iconPack.video_off,size:"md"})),d("video",{ref:i=>this.videoEl=i,autoPlay:!0,playsInline:!0,muted:!0,class:"video-preview"})),this.getAnalysisStatus()))),d("div",{class:"stage-manager"},this.stage>0&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"),this.stage<1&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})))),this.activeTab==="Report"&&d("div",{class:"tab-body"},d("dyte-debugger-issues-ui",Object.assign({},e,{mediaType:"video"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};D6.style=BB;var HB=Object.freeze({__proto__:null,dyte_debugger_audio:A6,dyte_debugger_screenshare:M6,dyte_debugger_video:D6});const WB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",O6=class{constructor(t){V(this,t),this.setIsLivestreaming=e=>{this.isLivestreaming=e==="LIVESTREAMING"},this.meeting=void 0,this.size=void 0,this.t=W(),this.isLivestreaming=void 0,this.iconPack=H}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.livestream)===null||e===void 0||e.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(t){var e,i;t!=null&&(this.setIsLivestreaming((e=this.meeting.livestream)===null||e===void 0?void 0:e.state),(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(!(!Zo(this.meeting)||!this.isLivestreaming))return d(z,null,d("div",{class:"indicator","aria-label":this.t("livestream.indicator"),part:"indicator"},d("dyte-icon",{icon:this.iconPack.start_livestream,size:this.size}),d("span",null,this.t("LIVE"))))}static get watchers(){return{meeting:["meetingChanged"]}}};O6.style=WB;const GB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px)}video{z-index:0;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.latency-controls{position:absolute;bottom:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);z-index:20;display:flex;flex-direction:row;align-items:center}.sync-live-stream{cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}",L6=class{constructor(t){V(this,t),this.dyteAPIError=re(this,"dyteAPIError",7),this.showLatencyIndicator=!1,this.LoadPlayer=(e=this.ivsPlayer)=>{this.player&&e&&(e.attachHTMLVideoElement(this.player),e.setAutoplay(!0),e.setVolume(1))},this.livestreamUpdateListener=e=>{var i,r;this.livestreamState=e,e==="LIVESTREAMING"?(this.LoadPlayer(),this.getPlaybackUrl(),!((r=(i=this.meeting.__internals__)===null||i===void 0?void 0:i.browserSpecs)===null||r===void 0)&&r.isIOSMobile()||(this.fetchLatency(),this.updateLatency=setInterval(this.fetchLatency,2e3)),this.meeting.participants.pip.enableSource("livestream-player")):(this.showLatencyIndicator=!1,this.updateLatency&&clearInterval(this.updateLatency),this.meeting.participants.pip.disableSource("livestream-player"))},this.getLoadingState=()=>{let e="",i=!1,r=!1;switch(this.livestreamState){case"IDLE":e=this.t("livestream.idle"),i=!0,r=!1;break;case"STARTING":e=this.t("livestream.starting"),i=!0,r=!0;break;case"STOPPING":e=this.t("livestream.stopping"),i=!0,r=!0;break;case"LIVESTREAMING":this.playerState!==Dn.PLAYING&&(e=this.t("livestream.starting"),r=!0,i=!0);break;default:i=!1,e=this.t(""),r=!0;break}return{isLoading:i,loadingMessage:e,showIcon:r}},this.getErrorState=()=>{var e,i;let r=!1,s="";return this.livestreamState!=="LIVESTREAMING"?(r=!1,s=this.t(""),{isError:r,errorMessage:s}):(this.isSupported||(r=!0,s=this.t("livestream.error.not_supported")),this.playbackUrl||(r=!0,s=this.t("livestream.error.not_found")),this.playerError&&(r=!0,s=this.t((i=(e=this.playerError)===null||e===void 0?void 0:e.message)!==null&&i!==void 0?i:"livestream.error.unknown")),{isError:r,errorMessage:s})},this.fetchLatency=()=>{this.ivsPlayer&&(this.latency=this.ivsPlayer.getLiveLatency(),this.meeting.__internals__.logger.info("IVS.Player.LivestreamLatency",{livestream:{latency:this.latency}}))},this.meeting=void 0,this.size=void 0,this.t=W(),this.iconPack=H,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=Dn.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.latency=0,this.audioPlaybackError=!1}AddPlayerListeners(t=this.ivsPlayer){Object.values(Object.assign(Object.assign({},fi),Dn)).forEach(e=>{O9.includes(e)||t==null||t.addEventListener(e,i=>{var r,s,n;(e===Dn.IDLE||e===Dn.PLAYING||e===fi.ERROR||e===Dn.READY)&&(this.playerState=e),e===fi.ERROR&&(this.playerError=i),e===Dn.IDLE&&t.isPaused()&&t.play(),e===fi.AUDIO_BLOCKED&&(this.audioPlaybackError=!0),this.playerState===Dn.PLAYING&&!(!((s=(r=this.meeting.__internals__)===null||r===void 0?void 0:r.browserSpecs)===null||s===void 0)&&s.isIOSMobile())?this.showLatencyIndicator=!0:this.showLatencyIndicator=!1,this.meeting.__internals__.logger.info(`IVS.Player.${e}`,i),L9.includes(e)&&((n=this.meeting.__internals__.callStats)===null||n===void 0||n.ivsPlayerEvent(e,i))})})}getPlaybackUrl(t=this.ivsPlayer){this.playbackUrl=this.meeting.livestream.playbackUrl,this.playbackUrl&&t&&(t.load(this.playbackUrl),t.play())}onPlayerRef(t){this.player=t,this.meeting.participants.pip.addSource("livestream-player",this.player,!!this.playbackUrl),this.playbackUrl&&this.meeting.participants.pip.enableSource("livestream-player")}connectedCallback(){this.meetingChanged(this.meeting),window.onDyteLivestreamPlayer=t=>{t?(this.isSupported=!0,this.ivsPlayer=t,this.AddPlayerListeners(t),this.LoadPlayer(t),this.getPlaybackUrl(t)):this.isSupported=!1},this.sendLatencyToCallStats=setInterval(()=>{var t;this.fetchLatency(),(t=this.meeting.__internals__.callStats)===null||t===void 0||t.livestreamLatency(this.latency)},1e4)}disconnectedCallback(){window.onDyteLivestreamPlayer=void 0,this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),clearInterval(this.sendLatencyToCallStats),this.ivsPlayer.load(""),this.ivsPlayer=void 0,this.player=void 0}async componentDidLoad(){const t=`
    import IVSPlayer from 'https://cdn.jsdelivr.net/npm/amazon-ivs-player@1.16.0/+esm'
    let player = undefined;
    if (IVSPlayer.isPlayerSupported) {
      player = IVSPlayer.create({
        wasmBinary:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.wasm',
        wasmWorker:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.js',
      });
    }
    window.onDyteLivestreamPlayer && window.onDyteLivestreamPlayer(player);
    `,e=document.createElement("script");e.type="module",e.innerHTML=t,document.body.appendChild(e)}meetingChanged(t){t!=null&&(this.livestreamState=this.meeting.livestream.state,this.livestreamState==="LIVESTREAMING"&&(this.LoadPlayer(),this.getPlaybackUrl(),this.meeting.participants.pip.enableSource("livestream-player")),this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){if(!Zo(this.meeting))return;const{isError:t,errorMessage:e}=this.getErrorState(),{isLoading:i,loadingMessage:r,showIcon:s}=this.getLoadingState();return d(z,null,d("div",{class:"player-container"},d("video",{ref:n=>this.onPlayerRef(n),playsInline:!0}),this.audioPlaybackError&&d("div",{class:"unmute-popup"},d("h3",null,this.t("audio_playback.title")),d("p",null,this.t("audio_playback.description")),d("dyte-button",{kind:"wide",onClick:()=>{this.player.muted=!1,this.audioPlaybackError=!1},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),this.livestreamState==="LIVESTREAMING"&&this.showLatencyIndicator&&d("div",{class:"latency-controls"}),t&&d("div",{class:"loader"},d("dyte-icon",{icon:this.iconPack.warning,t:this.t}),d("p",null,e)),!t&&i&&d("div",{class:"loader"},s&&d("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),d("p",null,r))))}static get watchers(){return{meeting:["meetingChanged"]}}};L6.style=GB;const qB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:14px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([variant='embedded']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));opacity:0.5;margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px}:host([variant='embedded']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",N6=class{constructor(t){V(this,t),this.disconnectMeeting=e=>{var i;e!=null&&this.countListener!=null&&((i=e.livestream)===null||i===void 0||i.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.variant="primary",this.iconPack=H,this.t=W(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;this.disconnectMeeting(e),t!=null&&(this.countListener=()=>{var r;this.viewerCount=(r=t.livestream)===null||r===void 0?void 0:r.viewerCount},this.countListener(),(i=t.livestream)===null||i===void 0||i.addListener("viewerCountUpdate",this.countListener))}render(){return Zo(this.meeting)?d(z,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},d("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};N6.style=qB;var JB=Object.freeze({__proto__:null,dyte_livestream_indicator:O6,dyte_livestream_player:L6,dyte_viewer_count:N6});const KB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}:host([variant='text']){background-color:transparent;padding:var(--dyte-space-0, 0px)}",U6=class{constructor(t){V(this,t),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.maxLength=20,this.isScreenShare=!1,this.variant="default",this.iconPack=H,this.t=W(),this.length=13}sizeChanged(t){this.length=t==="sm"?8:13}formatNameTag(t,e){return this.isScreenShare?e?`${this.t("screen")} - ${ls(t,this.length-3)} (${this.t("you")})`:`${this.t("screen")} - ${ls(t,this.length)}`:e?`${ls(t,this.length-3)} (${this.t("you")})`:ls(t,this.length)}render(){var t,e,i;const r=As(((t=this.participant)===null||t===void 0?void 0:t.name)||""),s=((e=this.participant)===null||e===void 0?void 0:e.id)===((i=this.meeting)===null||i===void 0?void 0:i.self.id);return d(z,{title:r},d("slot",{name:"start"}),d("span",{class:"name"},this.formatNameTag(r,s)),d("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};U6.style=KB;var QB=Object.freeze({__proto__:null,dyte_name_tag:U6});const YB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}",j6=class{constructor(t){V(this,t),this.dyteSendNotification=re(this,"dyteSendNotification",7),this.pinnedListener=({isPinned:e})=>{this.isPinned=e},this.stageListener=({stageStatus:e})=>{this.isOnStage=e==="ON_STAGE"},this.inviteToStageToggle=async()=>{const e=this.participant,{stage:i}=this.meeting;if(e.stageStatus==="ACCEPTED_TO_JOIN_STAGE"){this.dyteSendNotification.emit({message:`${e.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-${e.id}`});return}this.isOnStage?(e.isPinned&&e.unpin(),await i.kick([e.userId])):(await i.grantAccess([e.userId]),this.dyteSendNotification.emit({message:`${e.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-invite-${e.id}`})),this.isOnStage=e.stageStatus==="ON_STAGE"},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=H,this.t=W(),this.config=Ke,this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){this.participant==null||this.participant.removeListener==null||(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("stageStatusUpdate",this.stageListener))}meetingChanged(t){if(t!=null){const{self:e}=t;this.canDisableParticipantAudio=e.permissions.canAllowParticipantAudio||e.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=e.permissions.canAllowParticipantVideo||e.permissions.canDisableParticipantVideo,this.canKickParticipant=e.permissions.kickParticipant,this.canPinParticipant=e.permissions.pinParticipant,this.canAllowParticipantOnStage=e.permissions.acceptPresentRequests}}participantChanged(t){if(t!=null){if(this.audioEnabled=t.audioEnabled,this.videoEnabled=t.videoEnabled,this.isPinned=t.isPinned,this.isOnStage=t.stageStatus==="ON_STAGE",this.audioUpdateListener=({audioEnabled:e})=>{this.audioEnabled=e},this.videoUpdateListener=({videoEnabled:e})=>{this.videoEnabled=e},t.addListener==null)return;t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("pinned",this.pinnedListener),t.addListener("unpinned",this.pinnedListener),t.addListener("stageStatusUpdate",this.stageListener)}}render(){var t,e,i,r,s,n,a,o,c;const u=((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM",l=((e=this.meeting)===null||e===void 0?void 0:e.self.id)===this.participant.id,p=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&!u||this.canKickParticipant||this.canPinParticipant,m=As(((i=this.participant)===null||i===void 0?void 0:i.name)||""),y=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes((r=this.meeting)===null||r===void 0?void 0:r.meta.viewType),b={meeting:this.meeting,size:"sm",states:G,config:this.config,iconPack:this.iconPack,t:this.t};return d(z,null,d("div",{class:"left"},d("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),d("p",{class:"name",title:m},ls(m,16)," ",((s=this.meeting)===null||s===void 0?void 0:s.self.id)===((n=this.participant)===null||n===void 0?void 0:n.id)&&this.t("(you)"))),this.view==="sidebar"&&d("div",{class:"right"},y&&d("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),y&&!u&&d("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),(p||S$({element:"dyte-participant",defaults:b,childProps:{participant:this.participant}})>0)&&d("dyte-menu",{iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},d("dyte-icon",{class:"more",icon:this.iconPack.more_vertical})),d("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&y&&d("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("unpin"):this.t("pin")),this.canDisableParticipantAudio&&y&&this.audioEnabled&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},d("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&y&&this.videoEnabled&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},d("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participants.turn_off_video")),((a=this.meeting)===null||a===void 0?void 0:a.meta.viewType)==="WEBINAR"&&this.canAllowParticipantOnStage&&((o=this.participant)===null||o===void 0?void 0:o.id)!==((c=this.meeting)===null||c===void 0?void 0:c.self.id)&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:this.inviteToStageToggle},d("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),!l&&this.canKickParticipant&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var S,E;(S=this.meeting)===null||S===void 0||S.participants.kick((E=this.participant)===null||E===void 0?void 0:E.id)}},d("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick")),d("slot",null,d(Be,{element:"dyte-participant",defaults:b,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0}))))))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};j6.style=YB;var ZB=Object.freeze({__proto__:null,dyte_participant:j6});const XB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:100%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-4, 16px)}.poll-question{padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;overflow-wrap:break-word}.poll-answers{display:flex;flex-direction:row;justify-content:space-between;font-size:12px;margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-3, 12px)}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option.open-vote:hover{cursor:pointer}.poll-option label{display:flex;flex-direction:row;cursor:inherit}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between;padding:var(--dyte-space-1, 4px)}.poll-option-header[data-disabled='true']:hover{cursor:default}.poll-option-header input{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-2, 8px);cursor:inherit}.poll-option-header .counter{color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:12px}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.active .counter{color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}`,$6=class{constructor(t){V(this,t),this.onVote=re(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=H,this.t=W()}vote(t,e){this.poll.voted.includes(this.self)?t.preventDefault():this.onVote.emit({id:this.poll.id,index:e})}render(){const t=this.poll.voted.includes(this.self);return d(z,null,d("div",{class:"ctr"},d("p",{class:"poll-title"},this.t("polls.by")," ",ls(As(this.poll.createdBy),20)),d("div",{class:"poll"},d("p",{class:"poll-question"},this.poll.question),d("div",{class:"poll-answers"},d("span",null,this.t("polls.answers")),d("span",null,this.poll.voted.length)),this.poll.options.map((e,i)=>d("div",{class:{active:e.votes.some(r=>r.id===this.self),"open-vote":this.permissions.polls.canVote&&!t,"poll-option":!0}},d("div",{class:"poll-option-header","data-disabled":!this.permissions.polls.canVote},d("label",null,!t&&d("input",{disabled:!this.permissions.polls.canVote,readOnly:t,type:"radio",checked:e.votes.some(r=>r.id===this.self),onClick:r=>this.vote(r,i)}),d("p",null,e.text)),d("span",{class:"counter"},e.count)),d("div",{class:"votes"},e.votes.map(r=>{if(!(this.poll.anonymous&&this.self!==this.poll.createdByUserId))return d("dyte-tooltip",{label:r.name,iconPack:this.iconPack,t:this.t},d("div",{class:"vote"},B_(r.name)))})))))))}};$6.style=XB;const eH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}`,z6=class{constructor(t){V(this,t),this.onCreate=re(this,"dyteCreatePoll",7),this.iconPack=H,this.t=W(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(t){var e;this.options=this.options.filter((i,r)=>r!==t),((e=this.error)===null||e===void 0?void 0:e.code)===1&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(t,e){var i;this.options[e]=t.target.value,((i=this.error)===null||i===void 0?void 0:i.code)===1&&(this.error=void 0)}handleSubmit(){const t={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:this.anonymous?!0:this.hideVotes};if(!t.question){this.error={code:0,message:this.t("polls.errors.question_required")};return}if(this.options.filter(e=>e.trim()==="").length>0){this.error={code:1,message:this.t("polls.errors.empty_option")};return}this.onCreate.emit(t)}render(){return d(z,null,d("div",{class:"create-poll"},d("p",null,this.t("polls.question")),d("textarea",{onInput:()=>{this.error&&this.error.code===0&&(this.error=void 0)},ref:t=>this.question=t,placeholder:this.t("polls.question.placeholder")}),this.options.map((t,e)=>d("div",{class:"option"},d("input",{placeholder:this.t("polls.option.placeholder"),value:t,onInput:i=>this.updateOption(i,e)}),e>1&&d("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(e),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})))),d("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("polls.option")),d("label",null,d("input",{id:"anonymous",type:"checkbox",onChange:t=>this.anonymous=t.target.checked}),this.t("polls.results.anon")),d("label",null,d("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:this.anonymous?!0:this.hideVotes,onChange:t=>this.hideVotes=t.target.checked}),this.t("polls.results.hide")),d("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("polls.create")),this.error&&d("span",{class:"error-text"},this.error.message)))}};z6.style=eH;var tH=Object.freeze({__proto__:null,dyte_poll:$6,dyte_poll_form:z6});const iH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.dyte-select{width:100%;max-width:100%;text-overflow:ellipsis}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}`,F6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.stageStateListener=()=>{this.updateCanProduce(this.meeting)},this.deviceListUpdateListener=({added:e,removed:i})=>{e.map(r=>{r.kind==="audioinput"&&(this.audioDevices=[...this.audioDevices,r]),r.kind==="audiooutput"&&(this.speakerDevices=[...this.speakerDevices,r])}),i.map(r=>{r.kind==="audioinput"&&(this.audioDevices=this.audioDevices.filter(s=>s.deviceId!==r.deviceId)),r.kind==="audiooutput"&&(this.speakerDevices=this.speakerDevices.filter(s=>s.deviceId!==r.deviceId))})},this.deviceUpdateListener=({device:e})=>{e.kind==="audioinput"&&(this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{audio:e})),e.kind==="audiooutput"&&(this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{speaker:e}))},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.audioDevices=[],this.speakerDevices=[],this.canProduceAudio=!0,this.currentDevices={audio:void 0,speaker:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,r;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("deviceUpdate",this.deviceUpdateListener)}updateCanProduce(t){const{self:e,meta:i,stage:r}=t,s=e.permissions.canProduceAudio==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,s?this.canProduceAudio=!0:(n||a)&&e.permissions.canProduceAudio==="CAN_REQUEST"&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canProduceAudio=!0)}meetingChanged(t){t!=null&&Mi(async()=>{var e,i,r,s;const{self:n,stage:a}=t,o=await t.self.getAudioDevices(),c=await t.self.getSpeakerDevices(),u=(e=t.self.getCurrentDevices())===null||e===void 0?void 0:e.audio,l=(i=t.self.getCurrentDevices())===null||i===void 0?void 0:i.speaker;this.currentDevices={audio:u,speaker:l},this.updateCanProduce(t),a==null||a.addListener("stageStatusUpdate",this.stageStateListener),n.addListener("deviceListUpdate",this.deviceListUpdateListener),n.addListener("deviceUpdate",this.deviceUpdateListener),u!=null?this.audioDevices=[(r=o.find(p=>p.deviceId===u.deviceId))!==null&&r!==void 0?r:u,...o.filter(p=>p.deviceId!==u.deviceId)]:this.audioDevices=o,l!=null?this.speakerDevices=[(s=c.find(p=>p.deviceId===l.deviceId))!==null&&s!==void 0?s:l,...c.filter(p=>p.deviceId!==l.deviceId)]:this.speakerDevices=c})}testAudio(){var t;(t=this.testAudioEl)===null||t===void 0||t.play()}setDevice(t,e){var i,r;if(yv(this.meeting))return;const s=t==="audio"?this.audioDevices.find(n=>n.deviceId===e):this.speakerDevices.find(n=>n.deviceId===e);this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{[t]:s}),s!=null&&((i=this.meeting)===null||i===void 0||i.self.setDevice(s),s.kind==="audiooutput"&&((r=this.testAudioEl)===null||r===void 0||r.setSinkId(s.deviceId)))}render(){var t,e;if(this.meeting==null)return null;let i=0,r=0;const s=this.states||G,n=((t=s==null?void 0:s.prefs)===null||t===void 0?void 0:t.muteNotificationSounds)===!0||EI("mute-notification-sounds")==="true";return d(z,null,d("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:a=>this.testAudioEl=a}),this.canProduceAudio&&d("div",{class:"group",part:"microphone-selection"},d("label",null,"Microphone (input)"),d("div",{class:"row"},d("select",{class:"dyte-select",onChange:a=>this.setDevice("audio",a.target.value)},this.audioDevices.map(({deviceId:a,label:o})=>{var c;return d("option",{value:a,selected:((c=this.currentDevices.audio)===null||c===void 0?void 0:c.deviceId)===a},o||`Microphone ${++i}`)})),d("dyte-audio-visualizer",{participant:(e=this.meeting)===null||e===void 0?void 0:e.self,iconPack:this.iconPack,t:this.t}))),d("div",{class:"group",part:"speaker-selection"},this.speakerDevices.length>0&&!yv(this.meeting)&&d("div",null,d("label",null,"Speaker (output)"),d("div",{class:"row"},d("select",{class:"dyte-select",onChange:a=>this.setDevice("speaker",a.target.value)},this.speakerDevices.map(({deviceId:a,label:o})=>{var c;return d("option",{value:a,selected:((c=this.currentDevices.speaker)===null||c===void 0?void 0:c.deviceId)===a},o||`Speaker ${++r}`)})))),d("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),"Test")),d("div",{class:"group",part:"notification-toggle"},d("div",{class:"row"},d("label",{htmlFor:"notification-toggle"},"Notification sound"),d("dyte-switch",{id:"notification-toggle",checked:!n,onDyteChange:a=>{var o;const{checked:c}=a.target,u=!c;this.stateUpdate.emit({prefs:{muteNotificationSounds:u}}),G.prefs=Object.assign(Object.assign({},(o=G.prefs)!==null&&o!==void 0?o:{}),{muteNotificationSounds:u}),xI("mute-notification-sounds",u)},iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{meeting:["meetingChanged"]}}};F6.style=iH;const rH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}.dyte-select{width:100%;text-overflow:ellipsis}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}`,V6=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.onVideoUpdate=e=>{this.videoEnabled=e.videoEnabled},this.deviceListUpdateListener=({added:e,removed:i})=>{e.map(r=>{r.kind==="videoinput"&&(this.videoDevices=[...this.videoDevices,r])}),i.map(r=>{r.kind==="videoinput"&&(this.videoDevices=this.videoDevices.filter(s=>s.deviceId!==r.deviceId))})},this.deviceUpdateListener=({device:e})=>{e.kind==="videoinput"&&(this.currentDevice=e)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.videoDevices=[],this.currentDevice=void 0,this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i,r;t!=null&&(this.videoEnabled=t.self.videoEnabled,(e=t.self)===null||e===void 0||e.addListener("videoUpdate",this.onVideoUpdate),(i=t.self)===null||i===void 0||i.addListener("deviceListUpdate",this.deviceListUpdateListener),(r=t.self)===null||r===void 0||r.addListener("deviceUpdate",this.deviceUpdateListener),Mi(async()=>{var s,n;const a=await t.self.getVideoDevices(),o=(s=t.self.getCurrentDevices())===null||s===void 0?void 0:s.video;o!=null?this.videoDevices=[(n=a.find(c=>c.deviceId===o.deviceId))!==null&&n!==void 0?n:o,...a.filter(c=>c.deviceId!==o.deviceId)]:this.videoDevices=a}))}disconnectedCallback(){var t,e,i;(t=this.meeting.self)===null||t===void 0||t.removeListener("videoUpdate",this.onVideoUpdate),(e=this.meeting)===null||e===void 0||e.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("deviceUpdate",this.deviceUpdateListener)}async setDevice(t){var e;const i=this.videoDevices.find(r=>r.deviceId===t);this.currentDevice=i,i!=null&&await((e=this.meeting)===null||e===void 0?void 0:e.self.setDevice(i))}render(){var t,e,i;if(this.meeting==null)return null;let r=0;const s=this.states||G,n=((t=s==null?void 0:s.prefs)===null||t===void 0?void 0:t.mirrorVideo)===!0||EI("mirror-video")==="true";return d(z,null,d("div",{class:"group",part:"tile-preview"},this.videoEnabled===!0?d("dyte-participant-tile",{meeting:this.meeting,participant:(e=this.meeting)===null||e===void 0?void 0:e.self,iconPack:this.iconPack,t:this.t,states:s,isPreview:!0}):d("div",{class:"camera-off-helper"},d("dyte-participant-tile",{meeting:this.meeting,participant:(i=this.meeting)===null||i===void 0?void 0:i.self},d("div",null,d("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),d("div",null,"Camera is off"))))),d("div",{class:"group",part:"camera-selection"},d("label",null,"Camera"),d("div",{class:"row"},d("select",{class:"dyte-select",onChange:a=>this.setDevice(a.target.value)},this.videoDevices.map(({deviceId:a,label:o})=>{var c;return d("option",{selected:((c=this.currentDevice)===null||c===void 0?void 0:c.deviceId)===a,value:a},o||`Camera ${++r}`)})))),d("div",{class:"group",part:"mirror-toggle"},d("div",{class:"row"},d("label",{htmlFor:"mirror-toggle"},"Mirror my Video"),d("dyte-switch",{checked:n,iconPack:this.iconPack,t:this.t,onDyteChange:a=>{var o;const{checked:c}=a.target;this.stateUpdate.emit({prefs:{mirrorVideo:c}}),G.prefs=Object.assign(Object.assign({},(o=G.prefs)!==null&&o!==void 0?o:{}),{mirrorVideo:c}),xI("mirror-video",c)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};V6.style=rH;var sH=Object.freeze({__proto__:null,dyte_settings_audio:F6,dyte_settings_video:V6});const nH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;height:100%;width:100%;font-family:var(--dyte-font-family, sans-serif);z-index:50;display:flex;flex-direction:column}:host([view='sidebar']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%;border:none}::slotted(*){flex-grow:1}.close{position:absolute;top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px);z-index:10}.main-header{position:relative;display:flex;height:var(--dyte-space-12, 48px);place-items:center;justify-content:center}.main-header,.mobile-tabs{flex-shrink:0}.mobile-tabs{display:flex;place-items:center;justify-content:space-evenly;border-bottom:1px solid rgb(var(--dyte-colors-background-700, 44 44 44))}.mobile-tabs button{margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;padding:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));height:var(--dyte-space-10, 40px);cursor:pointer;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);font-weight:500;border-bottom:1px solid transparent}.mobile-tabs button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}header h3{font-size:14px;font-weight:500}@media only screen and (max-device-height: 480px) and (orientation: landscape){.main-header{display:none !important}}",B6=class{constructor(t){V(this,t),this.tabChange=re(this,"tabChange",7),this.sidebarClose=re(this,"sidebarClose",7),this.onClose=()=>{this.sidebarClose.emit()},this.view="sidebar",this.tabs=[],this.currentTab=void 0,this.iconPack=H,this.t=W()}render(){const t=this.view==="full-screen",e=this.tabs.find(i=>i.id===this.currentTab);return d(z,{class:this.view},d("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.onClose,"aria-label":this.t("close")},d("dyte-icon",{icon:this.iconPack.dismiss})),e&&d("header",{class:"main-header"},d("h3",null,e.name),d("slot",{name:"pinned-state"})),t&&d("header",{class:"mobile-tabs"},this.tabs.map(i=>d("button",{onClick:()=>{this.tabChange.emit(i.id)},class:{active:this.currentTab===i.id}},i.name))),d("slot",{name:this.currentTab}))}};B6.style=nH;var aH=Object.freeze({__proto__:null,dyte_sidebar_ui:B6});const oH=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}`,H6=class{constructor(t){V(this,t),this.tabChange=re(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Ke,this.layout="row",this.iconPack=H,this.t=W(),this.activeTab=void 0,this.tabs=[]}render(){return d(z,null,d("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map(t=>{var e,i,r,s,n;if(t.type==="screenshare"){const a=t.participant,o=As(a.name);return d("dyte-button",{title:`${o}'s Screen Share`,key:t.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((e=this.activeTab)===null||e===void 0?void 0:e.type)==="screenshare"&&((i=this.activeTab)===null||i===void 0?void 0:i.participant.id)===t.participant.id},onClick:()=>this.tabChange.emit(t)},d("div",{class:"center col"},d("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),d("span",{class:"name"},a.id===((r=this.meeting)===null||r===void 0?void 0:r.self.id)?this.t("you"):ls(o,6))))}else if(t.type==="plugin"){const a=t.plugin;return d("dyte-button",{title:a.name,key:a.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((s=this.activeTab)===null||s===void 0?void 0:s.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===a.id},onClick:()=>this.tabChange.emit(t)},d("div",{class:"center col"},d("img",{src:a.picture}),d("span",{class:"name"},ls(a.name,6))))}}))}};H6.style=oH;var cH=Object.freeze({__proto__:null,dyte_tab_bar:H6});const dH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));display:flex;justify-content:center;vertical-align:middle;animation:show 0.4s ease;transition:0.4s;z-index:50}.ctr{box-sizing:border-box;display:inline-flex;height:100%;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}.message{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message p{margin:var(--dyte-space-0, 0px);display:inline-block}.message blockquote{display:none}:host(.exit){animation:exit 0.4s ease}@keyframes show{0%{opacity:0;transform:translateY(120px)}100%{opacity:1;transform:translateY(0px)}}@keyframes exit{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-120px)}}:host([size='sm']){font-size:14px}",W6=class{constructor(t){V(this,t),this.dismiss=re(this,"dyteTranscriptDismiss",7),this.transcript=void 0,this.t=W()}connectedCallback(){this.transcriptChanged(this.transcript)}transcriptChanged(t){t!=null&&t.id&&setTimeout(()=>{this.dismiss.emit(t.id)},1e4)}render(){return d(z,null,d("div",{class:"ctr"},d("p",{class:"message"},d(_y,{message:`${this.transcript.name}: ${this.transcript.transcript}`}))))}static get watchers(){return{transcript:["transcriptChanged"]}}};W6.style=dH;var lH=Object.freeze({__proto__:null,dyte_transcript:W6});const cb=(t,e)=>{if(t==null)return;const i=3,r=Math.round(i/2),s=[...Array(i)].map((y,b)=>{let S=b;return S>r-1&&(S=i-S-1),Math.round((S+1)/(r+1)*e)}),{width:n,height:a}=t,o=t.getContext("2d");let c=2;const u=4,l=n*1/s.length,p=l-u;o.clearRect(0,0,n,a),o.fillStyle="rgb(0,0,0,0.0)",o.fillRect(0,0,n,a);const m=getComputedStyle(t).getPropertyValue("color");o.fillStyle=m,o.strokeStyle=m,o.lineCap="round",o.lineWidth=4,o.beginPath();for(const y of s){const b=Math.min(-Math.abs(y*1.2/10*a)+a/2,a/2-2.5),S=Math.max((a/2-b)*2,5);o.moveTo(c+p/2,b),o.lineTo(c+p/2,b+S),c+=l}o.stroke()},uH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-6, 24px);width:-moz-fit-content;width:fit-content}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",G6=class{constructor(t){V(this,t),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){cb(this.visualizer,0)}disconnectedCallback(){var t,e,i;(t=this.hark)===null||t===void 0||t.stop(),this.audioUpdateListener&&((e=this.participant)===null||e===void 0||e.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&((i=this.participant)===null||i===void 0||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(t){t!=null&&(this.audioUpdateListener=({audioEnabled:e,audioTrack:i})=>{var r;if((r=this.hark)===null||r===void 0||r.stop(),e&&i!=null){this.audioEnabled=!0;const s=new MediaStream;s.addTrack(i),this.calcVolume(s),cb(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:e,screenShareTracks:i})=>{this.audioUpdateListener({audioEnabled:e&&i.audio!=null,audioTrack:i.audio})},this.screenShareUpdateListener(t),t.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(t),t.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(t){this.hark=BI(t,{play:!1,interval:1e3/10}),this.hark.on("volume_change",e=>{const i=this.volume;let r=Math.round(10**(e/115)*10);r<3&&(r=0);let s=Math.round((i*2+r)/3);i!==s&&(this.volume=s,cb(this.visualizer,this.volume))})}render(){return d(z,null,d("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:t=>this.visualizer=t,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&d("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t}))}static get watchers(){return{participant:["participantChanged"]}}};G6.style=uH;const hH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;background-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}",q6=class{constructor(t){V(this,t),this.dyteChange=re(this,"dyteChange",4),this.onClick=()=>{!this.readonly&&!this.disabled&&(this.checked=!this.checked)},this.onKeyPress=e=>{if(!this.readonly)switch(e.key){case"Enter":case" ":this.checked=!this.checked;break}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=H,this.t=W()}connectedCallback(){this.checkedChange(this.checked)}checkedChange(t){this.checked=t,this.dyteChange.emit(t)}render(){return d(z,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},d("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};q6.style=hH;var pH=Object.freeze({__proto__:null,dyte_audio_visualizer:G6,dyte_switch:q6});const gH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-72, 288px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px)}header{font-size:20px}dyte-spinner{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);margin-left:auto;margin-right:auto}ul{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-4, 16px);height:var(--dyte-space-48, 192px);padding:var(--dyte-space-0, 0px);overflow-y:auto;list-style-type:none;display:flex;flex-direction:column;gap:var(--dyte-space-2, 8px)}ul li{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}ul li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}ul li dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,J6=class{constructor(t){V(this,t),this.channel=void 0,this.t=W(),this.iconPack=H,this.members=[]}renderMembers(){return d("ul",{class:"scrollbar"},this.members.map(t=>d("li",null,d("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),d("span",null,t.name))))}render(){return d(z,null,d("header",null,this.t("chat.channel_members")),this.renderMembers())}};J6.style=gH;var mH=Object.freeze({__proto__:null,dyte_channel_details:J6});const fH=":host{display:flex;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px)}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);background-color:inherit}.preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.preview:hover dyte-tooltip{display:block}.preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}",K6=class{constructor(t){V(this,t),this.onDeleteAttachment=re(this,"deleteAttachment",7),this.fileReader=new FileReader,this.generatePreview=()=>{this.attachment.type==="image"?this.fileReader.readAsDataURL(this.attachment.file):this.attachment.type==="file"&&(this.filePreview=this.attachment.file.name)},this.onDeleteClickHandler=()=>{this.filePreview=null,this.onDeleteAttachment.emit()},this.iconPack=H,this.t=W(),this.attachment=null,this.filePreview=null}onAttachmentChange(){this.generatePreview()}connectedCallback(){this.fileReader.onload=t=>{typeof t.target.result=="string"&&(this.filePreview=t.target.result)}}componentWillLoad(){this.onAttachmentChange()}render(){return d(z,null,d("div",{class:"preview-overlay"},d("div",{class:"preview"},d("dyte-tooltip",{label:this.t("chat.cancel_upload")},d("dyte-button",{variant:"secondary",kind:"icon",onClick:this.onDeleteClickHandler},d("dyte-icon",{icon:this.iconPack.dismiss}))),this.attachment.type==="image"?d("img",{class:"preview-image",src:this.filePreview}):d("div",{class:"preview-file"},d("span",null,this.filePreview)))))}static get watchers(){return{attachment:["onAttachmentChange"]}}};K6.style=fH;const vH="https://cdn.dyte.in/assets/emojis-data.json",yH=async()=>(await fetch(vH)).json(),bH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.emoji-parent{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);max-width:640px;flex-direction:column;padding:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-0, 0px);width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.close-parent{display:flex;flex:1 1 0%;justify-content:flex-end;padding:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:wrap;overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,Q6=class{constructor(t){V(this,t),this.pickerClose=re(this,"pickerClose",7),this.emojiClicked=re(this,"dyteEmojiClicked",7),this.iconPack=H,this.t=W(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){yH().then(t=>{this.emojiList=t,this.handleInputChange({value:""})})}handleInputChange(t){this.filterVal=t.value;const e=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(e)).map(i=>({name:i[1],emoji:this.emojiList.emojis[i[2]]}))}handleEmojiClick(t){this.emojiClicked.emit(t)}mapEmojiList(){var t;return((t=this.emojiList)===null||t===void 0?void 0:t.length)>0?d("div",{id:"loader"},d("dyte-spinner",{iconPack:this.iconPack,t:this.t})):d("div",{id:"emoji-grid",class:"scrollbar max-w-40"},this.filteredEmojis.map(e=>d("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${e.name}`,class:"emoji",variant:"ghost",kind:"icon",title:e.name,onClick:()=>this.handleEmojiClick(e.emoji)},e.emoji)))}render(){return d(z,null,d("div",{class:"close-parent"},d("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:()=>{var t;return(t=this.pickerClose)===null||t===void 0?void 0:t.emit()},"aria-label":this.t("close")},d("dyte-icon",{icon:this.iconPack.dismiss}))),d("div",{class:"emoji-parent"},d("input",{value:this.filterVal,onInput:t=>this.handleInputChange(t.target),placeholder:this.t("search")}),this.mapEmojiList()))}};Q6.style=bH;const wH=":host{}",Y6=class{constructor(t){V(this,t),this.iconPack=H,this.t=W(),this.isActive=void 0}render(){const t={iconPack:this.iconPack,t:this.t};return d("dyte-tooltip",Object.assign({label:this.t("chat.send_emoji")},t),d("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.isActive},title:this.t("chat.send_emoji"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.emoji_multiple})))}};Y6.style=wH;const kH=":host{}",Z6=class{constructor(t){V(this,t),this.onFileChange=re(this,"fileChange",7),this.uploadFile=()=>{const e=document.createElement("input");e.type="file",this.filter&&(e.accept=this.filter),e.onchange=i=>{const{validity:r,files:[s]}=i.target;r.valid&&this.onFileChange.emit(s)},e.click()},this.filter=void 0,this.label=void 0,this.icon="attach",this.iconPack=H,this.t=W()}render(){const t={iconPack:this.iconPack,t:this.t},e=this.label||this.t("chat.send_file"),i=this.iconPack[this.icon];return d("dyte-tooltip",Object.assign({label:e},t),d("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile(),title:e,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:i})))}};Z6.style=kH;const _H=".chat-input{position:relative;z-index:10;box-sizing:border-box;display:flex;flex-direction:column;border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px)}.chat-input textarea{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));box-sizing:border-box;padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-input textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-input textarea::placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-input textarea{font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:60px;font-size:14px}",X6=class{constructor(t){V(this,t),this.onTextChange=re(this,"textChange",7),this.onInputHandler=()=>{const e=this.$textArea.value.trim();this.maybeResize(e),this.onTextChange.emit(e)},this.maybeResize=e=>{const i=[...e.matchAll(/\n/g)].length;this.$textArea.style.height=`${Math.min(200,60+20*i)}px`},this.disabled=!1,this.placeholder=void 0,this.value=void 0,this.maxLength=void 0,this.keyDownHandler=()=>{}}componentDidLoad(){this.maxLength&&(this.$textArea.maxLength=this.maxLength);const t=this.$textArea.value.trim();t!==""&&this.maybeResize(t)}async setText(t,e=!1){this.$textArea.value=t,this.maybeResize(t),e&&this.$textArea.focus(),this.onTextChange.emit(t)}render(){return d("div",{class:"chat-input",part:"chat-input-container"},d("textarea",{ref:t=>this.$textArea=t,placeholder:this.placeholder,disabled:this.disabled,onInput:this.onInputHandler,onKeyDown:this.keyDownHandler,part:"chat-input",value:this.value}))}};X6.style=_H;const SH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.text{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow-wrap:break-word;font-size:14px;line-height:1.375}.text.emoji{font-size:24px}",e4=class{constructor(t){V(this,t),this.text=void 0,this.isMarkdown=!0}render(){return d("p",{class:{text:!0,emoji:jI(this.text)}},this.isMarkdown?this.text:d("dyte-markdown-view",{text:this.text}))}};e4.style=SH;var xH=Object.freeze({__proto__:null,dyte_draft_attachment_view:K6,dyte_emoji_picker:Q6,dyte_emoji_picker_button:Y6,dyte_file_picker_button:Z6,dyte_text_composer_view:X6,dyte_text_message_view:e4});const EH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.webinar){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.webinar) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.webinar) .container dyte-button{margin:var(--dyte-space-3, 12px);flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.webinar) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.webinar) .summary{padding:var(--dyte-space-4, 16px)}:host(.livestream){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.livestream) dyte-participant-setup{display:flex;width:100%;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.livestream) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.livestream) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.livestream) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.livestream) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.livestream) .summary{margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-6, 24px);text-align:left;font-size:14px}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}`,t4=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.joinStage=re(this,"dyteJoinStage",7),this.leaveStage=re(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=Ke,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")},this.isLoading=!1}render(){var t,e,i,r;const s={meeting:this.meeting,size:this.size,states:this.states||G,config:this.config,iconPack:this.iconPack,t:this.t};return d(z,{class:{livestream:((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="LIVESTREAM",webinar:((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="WEBINAR"}},d("header",null,d("h2",null,this.dataConfig.title)),d(Be,{element:"dyte-participant-setup",defaults:s,props:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},childProps:{participant:(r=this.meeting)===null||r===void 0?void 0:r.self,size:"md"},deepProps:!0}),d("div",{class:"summary"},this.dataConfig.description),d("div",{class:"container"},d("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),d("dyte-button",{onClick:()=>{this.isLoading||(this.isLoading=!0,this.joinStage.emit())},title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.isLoading?d("dyte-icon",{icon:this.iconPack.spinner}):this.dataConfig.label.accept)))}};t4.style=EH;const TH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}",i4=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=H,this.t=W()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout(()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),G.activeOverlayModal={active:!1}},this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return d(z,null,d("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),d("h2",null,this.states.activeOverlayModal.title),d("p",null,this.states.activeOverlayModal.description))}};i4.style=TH;var CH=Object.freeze({__proto__:null,dyte_join_stage:t4,dyte_overlay_modal:i4});const PH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px);max-width:var(--dyte-space-72, 288px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.message blockquote{display:none}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){animation:exit 0.4s ease}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}",r4=class{constructor(t){V(this,t),this.dismiss=re(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(t){t!=null&&typeof t.duration=="number"&&setTimeout(()=>{this.dismiss.emit(t.id)},t.duration)}render(){return d(z,null,d("div",{class:"ctr"},this.notification.icon!=null&&d("dyte-icon",{class:"icon",icon:this.notification.icon,iconPack:this.iconPack,t:this.t}),this.notification.image!=null&&this.notification.icon==null&&this.imageState!=="errored"&&d("img",{src:this.notification.image,class:{loaded:this.imageState==="loaded"},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),d("p",{class:"message"},d(_y,{message:this.notification.message})),d("div",{class:"right"},this.notification.button!=null&&d("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),d("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};r4.style=PH;var RH=Object.freeze({__proto__:null,dyte_notification:r4});const IH=`:host {
  line-height: initial;
  font-family: var(--dyte-font-family, sans-serif);

  font-feature-settings: normal;
  font-variation-settings: normal;
}

p {
  margin: var(--dyte-space-0, 0px);
  padding: var(--dyte-space-0, 0px);
}


:host {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  aspect-ratio: 16 / 9;
  height: var(--dyte-space-56, 224px);
  overflow: hidden;
  border-radius: var(--dyte-border-radius-lg, 12px);
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));

  transition-property: var(--dyte-transition-property, all);
  transition-duration: 150ms;
  container-type: inline-size;
  container-name: participanttile;
}

@media (prefers-reduced-motion) {
  /* No transitions when disabled */
  :host {
    --dyte-transition-property: none;
  }
}

/**
  NOTE: provided :slotted(dyte-name-tag) & dyte-name-tag separately
  because ::slotted isn't applied on default slots.
*/

::slotted(dyte-name-tag), 
dyte-name-tag {
  position: absolute;
  left: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
}

:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag), 
  :host([size='sm'][variant='solid']) dyte-name-tag {
  left: var(--dyte-space-2, 8px);
  bottom: var(--dyte-space-2, 8px);
  height: var(--dyte-space-4, 16px);
}

::slotted(dyte-network-indicator), 
dyte-network-indicator {
  position: absolute;
  right: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
}

:host([size='sm']) ::slotted(dyte-network-indicator), 
  :host([size='sm']) dyte-network-indicator {
  right: var(--dyte-space-2, 8px);
  bottom: var(--dyte-space-2, 8px);
}

video {
  display: none;
  position: absolute;
  height: 100%;
  width: 100%;
  border-radius: var(--dyte-border-radius-lg, 12px);
}

video.contain {
  -o-object-fit: contain;
     object-fit: contain;
}

video.cover {
  -o-object-fit: cover;
     object-fit: cover;
}

video.visible {
  display: block;
}

video::-webkit-media-controls {
  display: none !important;
}

.pinned-icon {
  position: absolute;
  left: var(--dyte-space-3, 12px);
  top: var(--dyte-space-3, 12px);
  height: var(--dyte-space-5, 20px);
  width: var(--dyte-space-5, 20px);
  padding: var(--dyte-space-1, 4px);
  border-radius: var(--dyte-border-radius-md, 8px);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));
}

:host([size='sm']) .pinned-icon {
  top: var(--dyte-space-2, 8px);
  left: var(--dyte-space-2, 8px);
}

:host([variant='gradient']) ::slotted(dyte-audio-visualizer), 
  :host([variant='gradient']) dyte-audio-visualizer {
  position: absolute;
  top: var(--dyte-space-2, 8px);
  right: var(--dyte-space-2, 8px);
  border-radius: 9999px;
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));
  padding: var(--dyte-space-2, 8px);
}

:host([variant='gradient']) ::slotted(dyte-name-tag), 
  :host([variant='gradient']) dyte-name-tag {
  bottom: var(--dyte-space-0, 0px);
  left: var(--dyte-space-0, 0px);
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: transparent;
  background-image: linear-gradient(to top, var(--tw-gradient-stops));
  --tw-gradient-from: rgb(var(--dyte-colors-background-1000, 8 8 8));
  --tw-gradient-to: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  --tw-gradient-to: transparent;
}

video.mirror {
  transform: scaleX(-1);
}

/** Name tag positions */

:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag), 
  :host([name-tag-position='bottom-right']) dyte-name-tag {
  left: auto;
  right: var(--dyte-space-3, 12px);
}

:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag), 
  :host([name-tag-position='bottom-center']) dyte-name-tag {
  left: auto;
  right: auto;
}

:host([name-tag-position='top-left']) ::slotted(dyte-name-tag), 
  :host([name-tag-position='top-left']) dyte-name-tag {
  top: var(--dyte-space-3, 12px);
  bottom: auto;
}

:host([name-tag-position='top-right']) ::slotted(dyte-name-tag), 
  :host([name-tag-position='top-right']) dyte-name-tag {
  top: var(--dyte-space-3, 12px);
  right: var(--dyte-space-3, 12px);
  left: auto;
  bottom: auto;
}

:host([name-tag-position='top-center']) ::slotted(dyte-name-tag), 
  :host([name-tag-position='top-center']) dyte-name-tag {
  left: auto;
  right: auto;
  bottom: auto;
  top: var(--dyte-space-3, 12px);
}

@container participanttile (max-width: 300px) {
  ::slotted(dyte-name-tag),
  dyte-name-tag {
    transform-origin: 0 100%;
    transform: scale(0.8);
  }
}

@container participanttile (max-width: 150px) {
  ::slotted(dyte-name-tag),
  dyte-name-tag {
    transform-origin: -10% 130%;
    transform: scale(0.6);
    border-radius: 9999px;
  }
}
`,s4=class{constructor(t){V(this,t),this.onVideoUpdate=e=>{this.videoState=e,!(this.participant==null||this.meeting==null)&&(e.videoEnabled?this.meeting.participants.pip.enableSource(this.participant.id):this.meeting.participants.pip.disableSource(this.participant.id))},this.onPinned=({isPinned:e})=>{this.isPinned=e},this.isSelf=()=>{var e;return this.isPreview||this.participant.id===((e=this.meeting)===null||e===void 0?void 0:e.self.id)},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=Ke,this.variant="solid",this.size=void 0,this.iconPack=H,this.t=W()}onVideoRef(t){this.videoEl=t,!(this.isPreview||this.participant==null||this.meeting==null)&&(this.meeting.participants.pip.addSource(this.participant.id,this.videoEl,this.participant.videoEnabled,!1,B_(this.participant.name)),this.participant.videoEnabled&&this.meeting.participants.pip.enableSource(this.participant.id))}participantVideoUpdate(t){t.id===this.participant.id&&this.onVideoUpdate({videoEnabled:t.videoEnabled,videoTrack:t.videoTrack})}connectedCallback(){this.meeting?this.meetingChanged(this.meeting):this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){if(this.playTimeout&&clearTimeout(this.playTimeout),this.participant==null)return;const{self:t}=this.meeting;this.participant.id===t.id?this.participant.removeListener("videoUpdate",this.onVideoUpdate.bind(this)):this.meeting.participants.joined.removeListener("videoUpdate",this.participantVideoUpdate.bind(this)),this.participant.removeListener("pinned",this.onPinned.bind(this)),this.participant.removeListener("unpinned",this.onPinned.bind(this)),this.meeting.participants.pip.removeSource(this.participant.id)}meetingChanged(t){t!=null&&this.participantsChanged(this.participant)}participantsChanged(t){if(t==null)return;if(this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.meeting===void 0){this.isPreview&&t.addListener("videoUpdate",this.onVideoUpdate);return}const{self:e}=this.meeting;this.isPinned=t.isPinned,t.id===e.id?t.addListener("videoUpdate",this.onVideoUpdate.bind(this)):this.meeting.participants.joined.addListener("videoUpdate",this.participantVideoUpdate.bind(this)),t.addListener("pinned",this.onPinned.bind(this)),t.addListener("unpinned",this.onPinned.bind(this))}videoStateChanged(t){var e;if(t!=null&&this.videoEl!=null)if(t.videoEnabled){!((e=this.meeting)===null||e===void 0)&&e.__internals__.features.hasFeature(fv.LOG_PLAYING_FAILURES)&&(this.playTimeout&&clearTimeout(this.playTimeout),this.playTimeout=setTimeout(()=>{var r;(r=this.meeting)===null||r===void 0||r.__internals__.logger.log("dyte-participant-tile::playing_timeout")},6e3));const i=new MediaStream;if(t.videoTrack==null)return;i.addTrack(t.videoTrack),this.videoEl.srcObject=i}else this.playTimeout&&clearTimeout(this.playTimeout),this.videoEl.srcObject=void 0}isMirrored(){var t;if(this.participant!=null&&this.isSelf()){const e=this.states||G,i=(t=e==null?void 0:e.prefs)===null||t===void 0?void 0:t.mirrorVideo;if(typeof i=="boolean")return i}return!1}render(){var t,e,i,r;const s={meeting:this.meeting,size:this.size,states:this.states||G,config:this.config,iconPack:this.iconPack,t:this.t};return d(z,null,d("video",{ref:n=>this.onVideoRef(n),class:{visible:(t=this.videoState)===null||t===void 0?void 0:t.videoEnabled,mirror:this.isMirrored(),[(r=(i=(e=this.config)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},onPlaying:()=>{this.playTimeout&&clearTimeout(this.playTimeout)},onPause:n=>{var a,o;this.isSelf()&&((a=this.meeting)===null||a===void 0?void 0:a.__internals__.features.hasFeature(fv.PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),(o=n==null?void 0:n.target)===null||o===void 0||o.play())},autoPlay:!0,playsInline:!0,muted:!0,part:"video"}),this.isPinned&&d("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t,part:"pinned-icon"}),d("slot",null,d(Be,{element:"dyte-participant-tile",defaults:s,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0})))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantsChanged"],videoState:["videoStateChanged"]}}};s4.style=IH;var AH=Object.freeze({__proto__:null,dyte_participant_tile:s4});const MH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;height:var(--dyte-space-16, 64px);width:100%;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='md']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='lg']) #sync-button{flex-direction:row;display:flex;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}",n4=class{constructor(t){V(this,t),this.meeting=void 0,this.iconPack=H,this.t=W(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i;t!=null&&(this.canSpotlight=t.self.permissions.canSpotlight,this.isSpotlighted=(i=(e=t.meta)===null||e===void 0?void 0:e.broadcastTabChanges)!==null&&i!==void 0?i:!1)}updateSpotlightState(t){var e;try{(e=this.meeting.meta)===null||e===void 0||e.setBroadcastTabChanges(t),this.isSpotlighted=t}catch(i){console.error(i)}}render(){if(!!this.canSpotlight)return d(z,null,d("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("remote_access.indicator")},d("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},d("span",{class:"name"},"Sync"),d("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};n4.style=MH;var DH=Object.freeze({__proto__:null,dyte_spotlight_indicator:n4});const OH=".message-wrapper{display:flex;gap:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-4, 16px);margin-top:var(--dyte-space-4, 16px)}[is-continued] .message-wrapper{margin-top:var(--dyte-space-0, 0px)}.message-wrapper.align-right{flex-direction:row-reverse}.avatar{display:none}.file-picker{display:none}.message{position:relative;display:flex}.show-on-hover dyte-menu{visibility:hidden}.show-on-hover:hover dyte-menu{visibility:visible}.align-right .message{justify-content:flex-end;margin-left:auto}.align-right .message .head{margin-right:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);flex-direction:row-reverse;gap:var(--dyte-space-4, 16px)}.align-right .message dyte-text-message .bubble,.align-right .message dyte-image-message .bubble,.align-right .message dyte-file-message .bubble{padding-right:var(--dyte-space-5, 20px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .message .actions dyte-icon{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right dyte-menu{left:auto;right:var(--dyte-space-0, 0px)}.head{margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.head .name{font-size:14px;font-weight:600}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}dyte-menu{position:absolute;left:var(--dyte-space-0, 0px);top:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-lg, 12px)}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}[is-continued] dyte-menu{top:var(--dyte-space-2, 8px)}.actions{display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0\\.5, 2px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.body{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}.body.bubble{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);max-width:var(--dyte-space-96, 384px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);overflow-wrap:break-word;font-size:14px;line-height:1.375;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.body.bubble p{margin:var(--dyte-space-0, 0px);word-break:break-word}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-0, 0px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);background-color:transparent}.block-quote,blockquote{--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px) !important;border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}.link{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.align-right .block-quote{border-color:rgb(var(--dyte-colors-text-on-brand-600, var(--dyte-colors-text-600, 255 255 255 / 0.52)));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.align-right .link{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .image .actions dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}@media (orientation: landscape) and (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px}.message{width:75%}}",a4=class{constructor(t){V(this,t),this.edit=re(this,"edit",7),this.reply=re(this,"reply",7),this.delete=re(this,"delete",7),this.renderMessage=()=>{switch(this.message.type){case"text":return d("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-text-message",{message:this.message,now:this.now,isContinued:this.isContinued,"data-timestamp":this.message.time.getTime(),iconPack:this.iconPack,t:this.t,showBubble:!0}));case"image":return d("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-image-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":this.message.time.getTime(),t:this.t,showBubble:!0}));case"file":return d("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-file-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":this.message.time.getTime(),showBubble:!0}))}},this.onReply=()=>{this.reply.emit(this.message)},this.onDelete=()=>{this.delete.emit(this.message)},this.onEdit=async()=>{this.edit.emit(this.message)},this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.message=void 0,this.isContinued=void 0,this.isUnread=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.isSelf=!1,this.canEdit=!1,this.canDelete=!1,this.canReply=!1,this.disableControls=!1,this.alignRight=!1,this.senderDisplayPicture=void 0,this.hideAvatar=!1,this.now=new Date}renderControls(){if(!this.disableControls)return d("dyte-menu",{placement:this.alignRight?"bottom-end":"bottom-start"},d("button",{slot:"trigger",class:"actions"},d("dyte-icon",{icon:this.iconPack.chevron_down})),d("dyte-menu-list",null,this.canReply&&d("dyte-menu-item",{onClick:this.onReply},d("dyte-icon",{icon:this.iconPack.back,slot:"start"}),this.t("chat.reply")),this.canEdit&&d("dyte-menu-item",{onClick:this.onEdit},d("dyte-icon",{icon:this.iconPack.edit,slot:"start"}),this.t("chat.edit_msg")),this.canDelete&&d("dyte-menu-item",{onClick:this.onDelete},d("dyte-icon",{icon:this.iconPack.delete,slot:"start"}),this.t("chat.delete_msg"))))}renderAvatar(){if(!this.hideAvatar)return this.isContinued?d("div",{class:"avatar"}):d("div",{class:"avatar"},d("dyte-avatar",{size:"sm",participant:{name:this.message.displayName,picture:this.senderDisplayPicture}}))}render(){return d(z,null,d("div",{class:{"message-wrapper":!0,"align-right":this.alignRight},"is-continued":this.isContinued},this.renderAvatar(),d("div",{class:{message:!0,"show-on-hover":!this.isTouchDevice()},"is-continued":this.isContinued},this.renderMessage(),this.renderControls())))}get $el(){return Pr(this)}};a4.style=OH;const LH=class{constructor(t){V(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=H,this.t=W(),this.showBubble=!1}render(){const t=cg(this.message.link);return d(z,null,!this.isContinued&&d(dg,{name:this.message.displayName,time:this.message.time,now:this.now}),d("div",{class:{body:!0,bubble:this.showBubble},part:"body"},d("div",{class:"file"},d("div",{class:"file-data"},d("div",{class:"name"},this.message.name),d("div",{class:"file-data-split"},d("div",{class:"ext"},mA(this.message.name)),d("span",{class:"divider"}),d("div",{class:"size"},fA(this.message.size)))),d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>lg(t,{name:this.message.name,fallbackName:"file"}),part:"button"},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},NH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}",o4=class{constructor(t){V(this,t),this.stateUpdate=re(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=H,this.t=W(),this.showBubble=!1,this.status="loading"}render(){return d(z,null,!this.isContinued&&d(dg,{name:this.message.displayName,time:this.message.time,now:this.now}),d("div",{class:{body:!0,bubble:this.showBubble},part:"body"},d("div",{class:{image:!0,loaded:this.status==="loaded"}},d("img",{src:cg(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&(this.stateUpdate.emit({image:this.message}),G.image=this.message)}}),this.status==="loading"&&d("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},d("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&d("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},d("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&d("div",{class:"actions"},d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),G.image=this.message},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.full_screen_maximize})),d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>lg(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};o4.style=NH;const UH=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column-reverse;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}.smallest-dom-element{width:1px}#top-scroll{transform:translateY(20vh)}#bottom-scroll{transform:translateY(-20vh)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:10;margin-top:calc(var(--dyte-space-14, 56px) * -1);--tw-translate-y:var(--dyte-space-28, 112px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages-ctr.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}.show-new-messages{pointer-events:auto;border-radius:9999px}.show-new-messages:hover{border-radius:9999px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-ring-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}dyte-spinner,.empty-list{margin:auto}`,c4=class{constructor(t){V(this,t),this.pagesToRender=[[]],this.currentTime=()=>new Date().getTime(),this.observe=e=>{!e||this.intersectionObserver.observe(e)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.selectedItemId=void 0,this.autoScroll=!0,this.iconPack=H,this.t=W(),this.emptyListLabel=null,this.isLoading=!1,this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.showEmptyListLabel=!1}async onNewNode(t){if(!this.shouldRenderNewNodes){this.hasNewNodesToRender=!0;return}this.addNodeToRender(t,!1),this.rerender()}async onNodeDelete(t){const e=this.pagesToRender.flat().length;this.pagesToRender=this.pagesToRender.map(i=>i.filter(r=>r.id!==t)),e!==this.pagesToRender.flat().length&&this.rerender()}async onNodeUpdate(t,e){let i=!1;this.pagesToRender=this.pagesToRender.map(r=>r.map(s=>s.id===t?(i=!0,e):s)),i&&this.rerender()}onItemChanged(t,e){t!==e&&(this.pagesToRender=[[]],this.loadFirstPage().then(()=>this.rerender()))}connectedCallback(){this.rerender=q_(this.rerender.bind(this),50,{maxWait:200}),this.intersectionObserver=new IntersectionObserver(t=>{Mi(()=>{for(const e of t)e.target.id==="bottom-scroll"&&(e.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),e.target.id==="top-scroll"&&e.isIntersecting&&this.loadTop()})})}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.loadFirstPage(),this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&this.autoScroll&&jo(this.$paginatedList)}loadFirstPage(){return this.loadPage(this.currentTime(),this.pageSize,!0,t=>{t.length===0&&(this.showEmptyListLabel=!0)})}loadTop(){if(this.pagesToRender.length===0||this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize)return;const e=this.pagesToRender[0][0].timeMs,i=()=>{};this.loadPage(e-1,this.pageSize,!0,i)}loadBottom(){if(this.pagesToRender.length===0){this.shouldRenderNewNodes=!0;return}if(this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize){this.shouldRenderNewNodes=!0;return}const e=this.pagesToRender.at(-1).at(-1).timeMs,i=()=>jo(this.$paginatedList);this.loadPage(e+1,this.pageSize,!1,i)}addNodeToRender(t,e){if(e){const i=this.pagesToRender[0];if(i&&(i==null?void 0:i.length)<this.pageSize)i.unshift(t);else{const r=[t];this.pagesToRender.unshift(r),this.removeLastPageIfNeeded(!1)}}else{const[i]=this.pagesToRender.slice(-1);if(i&&(i==null?void 0:i.length)<this.pageSize)i.push(t);else{const r=[t];this.pagesToRender.push(r),this.removeLastPageIfNeeded(!0)}}}async loadPage(t,e,i,r=()=>{}){this.isLoading=!0;const s=await this.fetchData(t,e,i);if(this.isLoading=!1,!(s!=null&&s.length)){i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0),r([]);return}s.forEach(n=>this.addNodeToRender(n,i)),this.rerender(),r(s)}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(t){this.pagesToRender.length>this.pagesAllowed&&(t?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){var t;return d(z,null,d("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},d("div",{class:{"show-new-messages-ctr":!0,active:!this.shouldRenderNewNodes}},d("dyte-button",{class:"show-new-messages",kind:"icon",variant:"secondary",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),d("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e}),this.isLoading&&this.pagesToRender.flat().length===0&&d("dyte-spinner",{size:"lg"}),this.pagesToRender.flat().length===0&&this.showEmptyListLabel?d("div",{class:"empty-list"},(t=this.emptyListLabel)!==null&&t!==void 0?t:this.t("list.empty")):d("div",{class:"page-wrapper"},this.pagesToRender.map(e=>this.createNodes(e))),d("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e})))}static get watchers(){return{selectedItemId:["onItemChanged"]}}};c4.style=UH;const jH=class{constructor(t){V(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=H,this.t=W(),this.showBubble=!1}render(){return d(z,null,!this.isContinued&&d(dg,{name:this.message.displayName,time:this.message.time,now:this.now}),d("div",{class:{body:!0,bubble:this.showBubble},part:"body"},d("div",{class:{text:!0,emoji:jI(this.message.message)}},d(_y,{message:this.message.message}))))}};var $H=Object.freeze({__proto__:null,dyte_chat_message:a4,dyte_file_message:LH,dyte_image_message:o4,dyte_paginated_list:c4,dyte_text_message:jH});function J_({osName:t,browserName:e,media:i}){function r(){return i==="audio"?"Microphone":i==="video"?"Camera":"Screenshare"}if(e==="Chrome")return["Open Chrome browser settings by clicking the three dots at the top right.","Select Settings, Under Privacy and Security, click Site Settings, navigate to Permissions.",`Choose ${r()}, provide the appropriate permission and reload this application.`];if(e==="Safari")return["Open Safari browser settings by clicking on Safari > Preferences at the top left.",`Under Websites, select ${r()} from the devices on the left and pick this webiste.`,"Allow permissions from the pop-up menu and reload this application."];if(e.includes("Opera")){let s=[];return t==="macOS"||t==="iOS"?s.push("To open settings, click Opera in the toolbar (top-left) > Preferences."):s.push("To open settings, click the Opera icon (top-left) > Settings."),s=[...s,"Under Privacy and Security, click Site Settings.",`Select ${r()}, enable permissions and reload this application.`],s}if(e==="Firefox"){let s=[];return t==="macOS"||t==="iOS"?s.push("To open settings, at the top right, click Preferneces"):s.push("To open settings, at the top right, click Options"),s=[...s,"Under Privacy and Security, scroll down to the  Permissions  section",`Select Settings for ${r()}`,"Enter the website URL in the search field, enable permissions and reload this application."],s}if(e.includes("Edge"))return["To open settings, at the top right click Settings & More > Settings.",`Under Site Premissions, click ${r()}.`,"Use the drop-down menu and select the default device, allow permission and reload this application."]}function K_({osName:t,media:e}){function i(){return e==="audio"?"Microphone":e==="video"?"Camera":"Screenshare"}return t==="macOS"?[" To give ${getDevice()} access to your browser, choose Apple menu  > System Settings, then click Privacy & Security.",`From the sidebar select ${i()}`,`If you don\u2019t see  ${i()}, upgrade to macOS Mojave or later.`,"Allow access to your browser,","Reload this application."]:t==="iOS"?[`To give ${i()} access to your browser, go to phone Settings > Privacy.`,`Tap on ${i()}. Allow access for your browser.`,"Reload this application."]:t==="Windows"?[`To give ${i()} access to your browser, go to the Start menu on Windows.`,`Select Settings > Privacy > ${i()}`,"Allow permissions and reload this application."]:t.includes("Android")?[`To give ${i()} access to your browser, go to phone Settings > Apps.`,"Select your browser from the list",`Tap Permissions and allow ${i()} permissions.`,"Reload this application."]:[]}function Q_({browserName:t,isMobile:e,osName:i}){if(t==="Chrome")return!e&&i==="macOS"?"Desktop_Chrome.mp4":e?i==="iOS"?"Chrome_ios.mp4":"Android_Chrome.mp4":"";if(t==="Firefox")return!e&&i==="macOs"?"Desktop_Firefox.mp4":!e||i==="iOS"?"":"Android_Firefox.mp4";if(t==="Safari")return e?"iOS Safari.mp4":"Desktop_Safari.mp4";if(t.includes("Edge"))return!e&&i==="macOs"?"Desktop_Edge.mp4":(!e||i==="iOS","");if(t==="Opera")return!e&&i==="macOs"||!e||i==="iOS","";if(t==="Opera")return!e||i==="iOS",""}function Y_({osName:t}){if(t==="macOS"||t==="iOS"||t==="Windows"||t.includes("Android"))return""}const zH={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your audio devices, such as microphones and speakers, should work as expected.",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to access your microphone",steps:K_,image:Y_},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not have the required permissions to access your microphone",steps:J_,image:Q_},COULD_NOT_START:{info:"Could not start device",icon:"dismiss",text:"Access to the microphone may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser.","If using an external device, try switching to another device.","Switch to a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used your microphone yet",icon:"warning",text:'We cannot access the data to troubleshoot unless you try to use the microphone at least once. Please click on the "Allow Permissions" button to fix this. Others will not be able to hear you.',steps:()=>[],image:()=>""}},FH={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your camera devices should work as expected",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to access your camera",steps:K_,image:Y_},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not not have the required permissions to access your camera",steps:J_,image:Q_},COULD_NOT_START:{info:"Could not start device",icon:"dismiss",text:"Access to the camera may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser.","If using an external device, try switching to another device.","Switch to a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used your camera yet",icon:"warning",text:'We cannot access the data to troubleshoot unless you try to use the camera at least once. Please click on the "Allow Permissions" button to fix this. Others will not be able to see you.',steps:()=>[],image:()=>""}},VH={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your screen share should work as expected",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to share screen",steps:K_,image:Y_},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not have the required permissions to share screen",steps:J_,image:Q_},COULD_NOT_START:{info:"Could not start screenshare",icon:"dismiss",text:"Access for screen share may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser to the latest version.","Try sharing a tab or window instead of the entire screen.","Switch a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used shared screen yet",icon:"warning",text:"We cannot access the data to troubleshoot unless you screenshare at least once. You can try screensharing fix this.",steps:()=>[],image:()=>""}},BH=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"Participants can't hear me",steps:["Please make sure that your microphone is unmuted. You can do this by clicking on the mic icon from the control bar.","If using an external device, please make sure that you are sitting close to the microphone."],troubleshoot:!1},{index:2,value:"I can't hear participants",steps:["Please ensure that the window or tab is not muted.","Please ensure that the volume level of your audio device is not set to 0.","Please ensure you are connected to the correct speaker device."],troubleshoot:!1},{index:3,value:"My audio is laggy",steps:["Please ensure that you have a stable internet connection.","Please try switching to a different audio device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:4,value:"My audio is unclear",steps:["Please make sure you are using a good-quality microphone.","Please make sure you are in close proximity to the microphone."],troubleshoot:!1},{index:5,value:"Participant's audio is laggy",steps:["Please ensure that you have a stable internet connection.","Please request the participant to use an alternative audio device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:6,value:"The audio from a participant is not clear",steps:["Please ensure that your system's speaker volume is checked and adjusted if necessary.","Please request the participant to move close to the microphone."],troubleshoot:!1}],HH=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"Participants can't see my video",steps:["Please ensure you have turned on your video from the control bar.","If using an external device, please ensure your device is connected and working properly."],troubleshoot:!1},{index:2,value:"Not able to view participnats video",steps:["Please ensure you have a stable internet connection.","If you have a poor network connection, please try moving closer to the Wi-Fi router."],troubleshoot:!1},{index:3,value:"My video is laggy",steps:["Please ensure that you have a stable internet connection.","Please try switching to a different video device."],troubleshoot:!1},{index:4,value:"My video is unclear",steps:["Please ensure you are not using a faulty device.","Please make sure you are in a well-lit area.","Please ensure you have a stable internet connection."],troubleshoot:!1},{index:5,value:"Participant's video is laggy",steps:["Please ensure you have a stable internet connection.","Please request the participant to use an alternative video device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:6,value:"Participant's video is unclear",steps:["Please ensure you have a stable internet connection.","Please ensure the participant is not using a faulty device.","Please make sure the participant is in a well-lit area."],troubleshoot:!1}],WH=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"There is a delay in my screen sharing",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1},{index:2,value:"There is a delay in participant's screen share",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1},{index:3,value:"Not able to start or stop screen share",steps:["This error is most likely related to the browser or system you are using. Please ensure that your browser is updated to the latest version.","Please try switching to another browser","Please try sharing a tab or a window incase you are unable to share your entire screen."],troubleshoot:!1},{index:4,value:"Not able to view a participant's screen share",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1}],GH={audio:zH,video:FH,screenshare:VH},WE={audio:BH,video:HH,screenshare:WH},qH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.section{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.title{display:flex;width:-moz-fit-content;width:fit-content;flex-direction:row;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title dyte-icon{margin-right:var(--dyte-space-2, 8px)}.sub-title{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));letter-spacing:0.5px}.text{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation div{margin-right:var(--dyte-space-2, 8px)}.device{margin-top:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-size:12px}select{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0) !important;border-style:none !important;outline:2px solid transparent !important;outline-offset:2px !important}.dyte-select{width:100%;max-width:100%;font-size:14px}.disabled{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.report-link{margin-bottom:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-6, 24px);cursor:pointer;font-size:12px;--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity)) !important;-webkit-text-decoration-line:underline;text-decoration-line:underline}.report-issue{margin-top:var(--dyte-space-2, 8px)}`,d4=class{constructor(t){V(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.mediaType=void 0,this.issueIndex=0,this.reported=!0}selectIssue(t){this.issueIndex=parseInt(t),this.reported=!1,setTimeout(()=>{var e;(e=this.reportEl)===null||e===void 0||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},100)}reportIssue(){const{value:t}=WE[this.mediaType][this.issueIndex];this.meeting.__internals__.logger.info("dyteTroubleshooting::issue",{issue:t}),this.reported=!0,setTimeout(()=>{this.reported=!1},3e3)}render(){var t,e,i,r,s,n,a;const o=(t=WE[this.mediaType])!==null&&t!==void 0?t:[];return d(z,null,d("div",{class:"text"},this.t("Please select a prompt that best describes your issue")),d("select",{class:`dyte-select ${this.issueIndex===0?"disabled":""}`,onChange:c=>this.selectIssue(c.target.value)},o.map(c=>d("option",{value:c.index},d("span",null,c.value)))),((i=(e=o[this.issueIndex])===null||e===void 0?void 0:e.steps)===null||i===void 0?void 0:i.length)>0&&d("div",{class:"sub-title"},this.t("How to fix this:")),(s=(r=o[this.issueIndex])===null||r===void 0?void 0:r.steps)===null||s===void 0?void 0:s.map(c=>d("div",{class:"recommendation"},d("div",null,"\u2022"),this.t(c))),((a=(n=o[this.issueIndex])===null||n===void 0?void 0:n.steps)===null||a===void 0?void 0:a.length)>0&&(this.reported?d("p",{class:"report-link"},this.t("Your issue has been reported.")):d("div",{class:"report-issue"},d("p",{class:"recommendation",ref:c=>this.reportEl=c},this.t("Still facing the issue?")),d("dyte-button",{size:"sm",variant:"secondary",onClick:()=>this.reportIssue()},this.t("Report Now")))))}};d4.style=qH;const JH=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;width:100%}h3{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px}.info{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:14px}.info dyte-icon{margin-right:var(--dyte-space-2, 8px)}.text{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px;font-weight:100 !important;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.title{display:flex;width:-moz-fit-content;width:fit-content;flex-direction:row;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title dyte-icon{margin-right:var(--dyte-space-2, 8px)}.device-indicator{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:column}.sub-title{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));letter-spacing:0.5px}.recommendation{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;font-size:12px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation div{margin-right:var(--dyte-space-2, 8px)}.device{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;font-size:14px}.device .label{width:var(--dyte-space-32, 128px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.device .seperator{margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.ACCEPTED{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.NOT_REQUESTED{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.NOT_REQUESTED dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}.DENIED,.SYSTEM_DENIED,.COULD_NOT_START{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}video{margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-36, 144px);width:auto;border-radius:var(--dyte-border-radius-md, 8px)}dyte-button{margin-top:var(--dyte-space-2, 8px)}`,l4=class{constructor(t){V(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.issueKey=0,this.permission=void 0,this.devices={},this.mediaType=void 0}connectedCallback(){this.permissionUpdate(this.meeting,this.mediaType)}disconnectedCallback(){const{self:t}=this.meeting;t==null||t.removeListener("mediaPermissionUpdate",this.updatePermission)}permissionUpdate(t,e){var i,r;if(!t||!e)return;const{self:s,troubleshoot:n}=t;this.permission=(r=(i=n[e])===null||i===void 0?void 0:i.mediaPermission)!==null&&r!==void 0?r:"NOT_REQUESTED",this.getDevices(),s==null||s.addListener("mediaPermissionUpdate",this.updatePermission.bind(this)),s==null||s.addListener("deviceUpdate",this.deviceUpdateListener.bind(this))}updatePermission({kind:t,message:e}){t===this.mediaType&&(this.permission=e)}async allowPermission(){var t,e;if(this.mediaType==="audio"){const i=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;await(i==null?void 0:i.startTrackAnalysis(!0)),i.stopTrackAnalysis()}if(this.mediaType==="video"){const i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.video;await i.startPreview(),i.stopPreview()}}deviceUpdateListener({device:t,preview:e}){e||(t.kind==="audioinput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Microphone:t})),t.kind==="audiooutput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Speaker:t})),t.kind==="videoinput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Camera:t})))}getDevices(){var t,e;const i=(e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.getCurrentDevices(),r=i==null?void 0:i.audio,s=i==null?void 0:i.speaker,n=i==null?void 0:i.video;r&&(this.devices=Object.assign(Object.assign({},this.devices),{Microphone:r})),s&&(this.devices=Object.assign(Object.assign({},this.devices),{Speaker:s})),n&&(this.devices=Object.assign(Object.assign({},this.devices),{Camera:n}))}render(){var t;const e=(t=GH[this.mediaType])===null||t===void 0?void 0:t[this.permission],{browserName:i,osName:r,isMobile:s}=this.meeting.self.device,n=e.steps({browserName:i,osName:r,media:this.mediaType}),a=e.image({browserName:i,isMobile:s,osName:r}),o=this.mediaType==="audio"?["Microphone","Speaker"]:this.mediaType==="video"?["Camera"]:[];return d(z,null,d("h3",null,"Device Permissions"),d("div",{class:`info ${this.permission}`},d("dyte-icon",{size:"sm",icon:this.iconPack[e.icon]}),e.info),d("div",{class:"text"},e.text),this.permission==="ACCEPTED"&&o.length>0&&d("div",{class:"device-indicator"},o.map(c=>{var u;return d("div",{class:"device"},d("div",{class:"label"},"Active ",c),d("div",{class:"seperator"},":"),d("div",{class:"device-name"},(u=this.devices[c])===null||u===void 0?void 0:u.label))}),d("div",{class:"text"},this.t("You can change the active devices from settings."))),n.length>0&&d("div",{class:"sub-title"},this.t("How to fix this:")),n==null?void 0:n.map(c=>d("div",{class:"recommendation"},d("div",null,"\u2022"),this.t(c))),a!==""&&d("video",{src:`https://cdn.dyte.in/assets/permissions/${a}`,autoPlay:!0,muted:!0,loop:!0}),this.mediaType!=="screenshare"&&this.permission==="NOT_REQUESTED"&&d("dyte-button",{onClick:()=>this.allowPermission()},"Allow Device Permission"))}static get watchers(){return{meeting:["permissionUpdate"],mediaType:["permissionUpdate"]}}};l4.style=JH;const KH=":host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);cursor:pointer}.tooltip-container{position:relative;display:flex;flex-direction:row;align-items:center}.tooltip-container dyte-icon{cursor:pointer;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.tooltip-container dyte-icon:hover+.tooltip{display:flex !important}.tooltip{position:absolute;margin-left:var(--dyte-space-2, 8px);display:none !important;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));z-index:50;display:flex;min-width:var(--dyte-space-60, 240px);flex-direction:column;--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);left:14px}",u4=class{constructor(t){V(this,t),this.iconPack=H}render(){return d(z,null,d("div",{class:"tooltip-container"},d("dyte-icon",{icon:this.iconPack.info,size:"sm"}),d("div",{class:"tooltip"},d("slot",{name:"tootlip-text"}))))}};u4.style=KH;var QH=Object.freeze({__proto__:null,dyte_debugger_issues_ui:d4,dyte_debugger_permissions_ui:l4,dyte_information_tooltip:u4});const YH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}",h4=class{constructor(t){V(this,t),this.onClose=re(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=e=>{!this.disableEscapeKey&&e.key==="Escape"&&this.open&&this.close()},this.hideCloseButton=!1,this.disableEscapeKey=!1,this.meeting=void 0,this.config=Ke,this.states=void 0,this.size=void 0,this.iconPack=H,this.t=W(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?d(z,null,d("div",{id:"dialog",part:"container"},d("slot",null),!this.hideCloseButton&&d("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};h4.style=YH;var ZH=Object.freeze({__proto__:null,dyte_dialog:h4});const XH=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",p4=class{constructor(t){V(this,t),this.logoUrl=void 0,this.config=Ke,this.meeting=void 0,this.t=W()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(t){var e;if(t!=null){const i=(e=t==null?void 0:t.designTokens)===null||e===void 0?void 0:e.logo;i!=null&&this.logoUrl==null&&(this.logoUrl=i)}}meetingChanged(t){var e,i,r,s;if(t!=null){const n=(s=(r=(i=(e=t.self)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.header)===null||r===void 0?void 0:r.elements)===null||s===void 0?void 0:s.logo;n!=null&&this.logoUrl==null&&(this.logoUrl=n)}}render(){if(!this.logoUrl||this.logoUrl==="")return null;const t=this.logoUrl,e=this.t("logo");return d(z,{class:"loaded"},d("img",{src:t,alt:e}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};p4.style=XH;var eW=Object.freeze({__proto__:null,dyte_logo:p4});const tW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}a{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.block-quote,blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}",g4=class{constructor(t){V(this,t),this.restoreEmpty=(e,i,r)=>e.trim().length===0?`${i}${e}${i}`:r(e),this.renderLink=e=>d("a",{class:"link",href:e,target:"_blank",rel:"noopener noreferrer"},e),this.renderBold=e=>typeof e=="string"?this.restoreEmpty(e,"*",i=>d("b",null,i)):d("b",null,this.renderTokens(e)),this.renderItalic=e=>typeof e=="string"?this.restoreEmpty(e,"_",i=>d("i",null,i)):d("i",null,this.renderTokens(e)),this.renderStrikethrough=e=>typeof e=="string"?this.restoreEmpty(e,"~",i=>d("s",null,i)):d("b",null,this.renderTokens(e)),this.renderPlainText=e=>typeof e=="string"?e:d("p",null,this.renderTokens(e)),this.renderTokens=e=>e.map(i=>{switch(i.type){case"a":if(typeof i.content=="string")return this.renderLink(i.content);case"b":return this.renderBold(i.content);case"i":return this.renderItalic(i.content);case"s":return this.renderStrikethrough(i.content);case"q":return d("span",{class:"block-quote"});case"plain_text":default:return this.renderPlainText(i.content)}}),this.text=void 0,this.maxLength=ky}render(){const t=this.text.slice(0,this.maxLength),e=W_(t,!0),i=wy(t);return d("p",null,e.length!==0&&d("blockquote",null,e.split(`
`).map(r=>{const s=Ev(r);return d("p",null,this.renderTokens(s))})),i.split(`
`).map(r=>{const s=Ev(r);return d("p",null,this.renderTokens(s))}))}};g4.style=tW;var iW=Object.freeze({__proto__:null,dyte_markdown_view:g4});function ug(t){return t.split("-")[0]}function Sy(t){return t.split("-")[1]}function hg(t){return["top","bottom"].includes(ug(t))?"x":"y"}function Z_(t){return t==="y"?"height":"width"}function GE(t,e,i){let{reference:r,floating:s}=t;const n=r.x+r.width/2-s.width/2,a=r.y+r.height/2-s.height/2,o=hg(e),c=Z_(o),u=r[c]/2-s[c]/2,l=ug(e),p=o==="x";let m;switch(l){case"top":m={x:n,y:r.y-s.height};break;case"bottom":m={x:n,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:a};break;case"left":m={x:r.x-s.width,y:a};break;default:m={x:r.x,y:r.y}}switch(Sy(e)){case"start":m[o]-=u*(i&&p?-1:1);break;case"end":m[o]+=u*(i&&p?-1:1);break}return m}const rW=async(t,e,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:a}=i,o=n.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:l,y:p}=GE(u,r,c),m=r,y={},b=0;for(let S=0;S<o.length;S++){const{name:E,fn:k}=o[S],{x:T,y:I,data:O,reset:q}=await k({x:l,y:p,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:t,floating:e}});if(l=T!=null?T:l,p=I!=null?I:p,y={...y,[E]:{...y[E],...O}},q&&b<=50){b++,typeof q=="object"&&(q.placement&&(m=q.placement),q.rects&&(u=q.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):q.rects),{x:l,y:p}=GE(u,m,c)),S=-1;continue}}return{x:l,y:p,placement:m,strategy:s,middlewareData:y}};function sW(t){return{top:0,right:0,bottom:0,left:0,...t}}function m4(t){return typeof t!="number"?sW(t):{top:t,right:t,bottom:t,left:t}}function Tv(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function f4(t,e){var i;e===void 0&&(e={});const{x:r,y:s,platform:n,rects:a,elements:o,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=e,b=m4(y),E=o[m?p==="floating"?"reference":"floating":p],k=Tv(await n.getClippingRect({element:(i=await(n.isElement==null?void 0:n.isElement(E)))==null||i?E:E.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(o.floating)),boundary:u,rootBoundary:l,strategy:c})),T=p==="floating"?{...a.floating,x:r,y:s}:a.reference,I=await(n.getOffsetParent==null?void 0:n.getOffsetParent(o.floating)),O=await(n.isElement==null?void 0:n.isElement(I))?await(n.getScale==null?void 0:n.getScale(I))||{x:1,y:1}:{x:1,y:1},q=Tv(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({rect:T,offsetParent:I,strategy:c}):T);return{top:(k.top-q.top+b.top)/O.y,bottom:(q.bottom-k.bottom+b.bottom)/O.y,left:(k.left-q.left+b.left)/O.x,right:(q.right-k.right+b.right)/O.x}}const nW=Math.min,aW=Math.max;function Sw(t,e,i){return aW(t,nW(e,i))}const oW=t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:r=0}=t!=null?t:{},{x:s,y:n,placement:a,rects:o,platform:c}=e;if(i==null)return{};const u=m4(r),l={x:s,y:n},p=hg(a),m=Z_(p),y=await c.getDimensions(i),b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",E=o.reference[m]+o.reference[p]-l[p]-o.floating[m],k=l[p]-o.reference[p],T=await(c.getOffsetParent==null?void 0:c.getOffsetParent(i));let I=T?p==="y"?T.clientHeight||0:T.clientWidth||0:0;I===0&&(I=o.floating[m]);const O=E/2-k/2,q=u[b],B=I-y[m]-u[S],Y=I/2-y[m]/2+O,X=Sw(q,Y,B),he=Sy(a)!=null&&Y!=X&&o.reference[m]/2-(Y<q?u[b]:u[S])-y[m]/2<0?Y<q?q-Y:B-Y:0;return{[p]:l[p]-he,data:{[p]:X,centerOffset:Y-X}}}}),cW={left:"right",right:"left",bottom:"top",top:"bottom"};function Cv(t){return t.replace(/left|right|bottom|top/g,e=>cW[e])}function dW(t,e,i){i===void 0&&(i=!1);const r=Sy(t),s=hg(t),n=Z_(s);let a=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(a=Cv(a)),{main:a,cross:Cv(a)}}const lW={start:"end",end:"start"};function qE(t){return t.replace(/start|end/g,e=>lW[e])}function uW(t){const e=Cv(t);return[qE(t),e,qE(e)]}const v4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i;const{placement:r,middlewareData:s,rects:n,initialPlacement:a,platform:o,elements:c}=e,{mainAxis:u=!0,crossAxis:l=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",flipAlignment:y=!0,...b}=t,S=ug(r),k=p||(S===a||!y?[Cv(a)]:uW(a)),T=[a,...k],I=await f4(e,b),O=[];let q=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&O.push(I[S]),l){const{main:be,cross:he}=dW(r,n,await(o.isRTL==null?void 0:o.isRTL(c.floating)));O.push(I[be],I[he])}if(q=[...q,{placement:r,overflows:O}],!O.every(be=>be<=0)){var B,Y;const be=((B=(Y=s.flip)==null?void 0:Y.index)!=null?B:0)+1,he=T[be];if(he)return{data:{index:be,overflows:q},reset:{placement:he}};let ce="bottom";switch(m){case"bestFit":{var X;const et=(X=q.map(je=>[je,je.overflows.filter(yt=>yt>0).reduce((yt,Ot)=>yt+Ot,0)]).sort((je,yt)=>je[1]-yt[1])[0])==null?void 0:X[0].placement;et&&(ce=et);break}case"initialPlacement":ce=a;break}if(r!==ce)return{reset:{placement:ce}}}return{}}}};async function hW(t,e){const{placement:i,platform:r,elements:s}=t,n=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ug(i),o=Sy(i),c=hg(i)==="x",u=["left","top"].includes(a)?-1:1,l=n&&c?-1:1,p=typeof e=="function"?e(t):e;let{mainAxis:m,crossAxis:y,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return o&&typeof b=="number"&&(y=o==="end"?b*-1:b),c?{x:y*l,y:m*u}:{x:m*u,y:y*l}}const y4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:i,y:r}=e,s=await hW(e,t);return{x:i+s.x,y:r+s.y,data:s}}}};function pW(t){return t==="x"?"y":"x"}const b4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:s}=e,{mainAxis:n=!0,crossAxis:a=!1,limiter:o={fn:E=>{let{x:k,y:T}=E;return{x:k,y:T}}},...c}=t,u={x:i,y:r},l=await f4(e,c),p=hg(ug(s)),m=pW(p);let y=u[p],b=u[m];if(n){const E=p==="y"?"top":"left",k=p==="y"?"bottom":"right",T=y+l[E],I=y-l[k];y=Sw(T,y,I)}if(a){const E=m==="y"?"top":"left",k=m==="y"?"bottom":"right",T=b+l[E],I=b-l[k];b=Sw(T,b,I)}const S=o.fn({...e,[p]:y,[m]:b});return{...S,data:{x:S.x-i,y:S.y-r}}}}};function Rs(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Hn(t){return Rs(t).getComputedStyle(t)}function Ho(t){return k4(t)?(t.nodeName||"").toLowerCase():""}let dm;function w4(){if(dm)return dm;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(dm=t.brands.map(e=>e.brand+"/"+e.version).join(" "),dm):navigator.userAgent}function Da(t){return t instanceof Rs(t).HTMLElement}function Wo(t){return t instanceof Rs(t).Element}function k4(t){return t instanceof Rs(t).Node}function JE(t){if(typeof ShadowRoot>"u")return!1;const e=Rs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function xy(t){const{overflow:e,overflowX:i,overflowY:r,display:s}=Hn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!["inline","contents"].includes(s)}function gW(t){return["table","td","th"].includes(Ho(t))}function X_(t){const e=/firefox/i.test(w4()),i=Hn(t),r=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(r?r!=="none":!1)||e&&i.willChange==="filter"||e&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(s=>i.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const n=i.contain;return n!=null?n.includes(s):!1})}function _4(){return!/^((?!chrome|android).)*safari/i.test(w4())}function eS(t){return["html","body","#document"].includes(Ho(t))}const KE=Math.min,dp=Math.max,Pv=Math.round;function S4(t){const e=Hn(t);let i=parseFloat(e.width),r=parseFloat(e.height);const s=t.offsetWidth,n=t.offsetHeight,a=Pv(i)!==s||Pv(r)!==n;return a&&(i=s,r=n),{width:i,height:r,fallback:a}}function x4(t){return Wo(t)?t:t.contextElement}const E4={x:1,y:1};function Vl(t){const e=x4(t);if(!Da(e))return E4;const i=e.getBoundingClientRect(),{width:r,height:s,fallback:n}=S4(e);let a=(n?Pv(i.width):i.width)/r,o=(n?Pv(i.height):i.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}function $p(t,e,i,r){var s,n;e===void 0&&(e=!1),i===void 0&&(i=!1);const a=t.getBoundingClientRect(),o=x4(t);let c=E4;e&&(r?Wo(r)&&(c=Vl(r)):c=Vl(t));const u=o?Rs(o):window,l=!_4()&&i;let p=(a.left+(l&&((s=u.visualViewport)==null?void 0:s.offsetLeft)||0))/c.x,m=(a.top+(l&&((n=u.visualViewport)==null?void 0:n.offsetTop)||0))/c.y,y=a.width/c.x,b=a.height/c.y;if(o){const S=Rs(o),E=r&&Wo(r)?Rs(r):r;let k=S.frameElement;for(;k&&r&&E!==S;){const T=Vl(k),I=k.getBoundingClientRect(),O=getComputedStyle(k);I.x+=(k.clientLeft+parseFloat(O.paddingLeft))*T.x,I.y+=(k.clientTop+parseFloat(O.paddingTop))*T.y,p*=T.x,m*=T.y,y*=T.x,b*=T.y,p+=I.x,m+=I.y,k=Rs(k).frameElement}}return{width:y,height:b,top:m,right:p+y,bottom:m+b,left:p,x:p,y:m}}function Xo(t){return((k4(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ey(t){return Wo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function T4(t){return $p(Xo(t)).left+Ey(t).scrollLeft}function mW(t,e,i){const r=Da(e),s=Xo(e),n=$p(t,!0,i==="fixed",e);let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&i!=="fixed")if((Ho(e)!=="body"||xy(s))&&(a=Ey(e)),Da(e)){const c=$p(e,!0);o.x=c.x+e.clientLeft,o.y=c.y+e.clientTop}else s&&(o.x=T4(s));return{x:n.left+a.scrollLeft-o.x,y:n.top+a.scrollTop-o.y,width:n.width,height:n.height}}function zp(t){if(Ho(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(JE(t)?t.host:null)||Xo(t);return JE(e)?e.host:e}function QE(t){return!Da(t)||Hn(t).position==="fixed"?null:t.offsetParent}function fW(t){let e=zp(t);for(;Da(e)&&!eS(e);){if(X_(e))return e;e=zp(e)}return null}function YE(t){const e=Rs(t);let i=QE(t);for(;i&&gW(i)&&Hn(i).position==="static";)i=QE(i);return i&&(Ho(i)==="html"||Ho(i)==="body"&&Hn(i).position==="static"&&!X_(i))?e:i||fW(t)||e}function vW(t){return S4(t)}function yW(t){let{rect:e,offsetParent:i,strategy:r}=t;const s=Da(i),n=Xo(i);if(i===n)return e;let a={scrollLeft:0,scrollTop:0},o={x:1,y:1};const c={x:0,y:0};if((s||!s&&r!=="fixed")&&((Ho(i)!=="body"||xy(n))&&(a=Ey(i)),Da(i))){const u=$p(i);o=Vl(i),c.x=u.x+i.clientLeft,c.y=u.y+i.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+c.x,y:e.y*o.y-a.scrollTop*o.y+c.y}}function bW(t,e){const i=Rs(t),r=Xo(t),s=i.visualViewport;let n=r.clientWidth,a=r.clientHeight,o=0,c=0;if(s){n=s.width,a=s.height;const u=_4();(u||!u&&e==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}return{width:n,height:a,x:o,y:c}}function wW(t){var e;const i=Xo(t),r=Ey(t),s=(e=t.ownerDocument)==null?void 0:e.body,n=dp(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=dp(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let o=-r.scrollLeft+T4(t);const c=-r.scrollTop;return Hn(s||i).direction==="rtl"&&(o+=dp(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:a,x:o,y:c}}function C4(t){const e=zp(t);return eS(e)?t.ownerDocument.body:Da(e)&&xy(e)?e:C4(e)}function P4(t,e){var i;e===void 0&&(e=[]);const r=C4(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),n=Rs(r);return s?e.concat(n,n.visualViewport||[],xy(r)?r:[]):e.concat(r,P4(r))}function kW(t,e){const i=$p(t,!0,e==="fixed"),r=i.top+t.clientTop,s=i.left+t.clientLeft,n=Da(t)?Vl(t):{x:1,y:1},a=t.clientWidth*n.x,o=t.clientHeight*n.y,c=s*n.x,u=r*n.y;return{top:u,left:c,right:c+a,bottom:u+o,x:c,y:u,width:a,height:o}}function ZE(t,e,i){return e==="viewport"?Tv(bW(t,i)):Wo(e)?kW(e,i):Tv(wW(Xo(t)))}function _W(t,e){const i=e.get(t);if(i)return i;let r=P4(t).filter(o=>Wo(o)&&Ho(o)!=="body"),s=null;const n=Hn(t).position==="fixed";let a=n?zp(t):t;for(;Wo(a)&&!eS(a);){const o=Hn(a),c=X_(a);(n?!c&&!s:!c&&o.position==="static"&&!!s&&["absolute","fixed"].includes(s.position))?r=r.filter(l=>l!==a):s=o,a=zp(a)}return e.set(t,r),r}function SW(t){let{element:e,boundary:i,rootBoundary:r,strategy:s}=t;const a=[...i==="clippingAncestors"?_W(e,this._c):[].concat(i),r],o=a[0],c=a.reduce((u,l)=>{const p=ZE(e,l,s);return u.top=dp(p.top,u.top),u.right=KE(p.right,u.right),u.bottom=KE(p.bottom,u.bottom),u.left=dp(p.left,u.left),u},ZE(e,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const xW={getClippingRect:SW,convertOffsetParentRelativeRectToViewportRelativeRect:yW,isElement:Wo,getDimensions:vW,getOffsetParent:YE,getDocumentElement:Xo,getScale:Vl,async getElementRects(t){let{reference:e,floating:i,strategy:r}=t;const s=this.getOffsetParent||YE,n=this.getDimensions;return{reference:mW(e,await s(i),r),floating:{x:0,y:0,...await n(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Hn(t).direction==="rtl"},R4=(t,e,i)=>{const r=new Map,s={platform:xW,...i},n={...s.platform,_c:r};return rW(t,e,{...s,platform:n})},EW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}",I4=class{constructor(e){V(this,e),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.iconPack=H,this.t=W()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){R4(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[y4(10),v4(),b4({padding:5})]}).then(({x:e,y:i})=>{Object.assign(this.menuListEl.style,{left:`${e}px`,top:`${i}px`})})}render(){return d(z,null,d("span",{id:"trigger",ref:e=>this.triggerEl=e,onClick:()=>{this.clickedThis=!0,this.menuListEl.style.display!=="block"?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},d("slot",{name:"trigger"})),d("span",{part:"menu-list",id:"menu-list",ref:e=>this.menuListEl=e},d("slot",null)))}};I4.style=EW;const TW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",A4=class{constructor(t){V(this,t),this.size=void 0,this.iconPack=H,this.t=W()}render(){return d(z,null,d("slot",{name:"start"}),d("slot",null),d("slot",{name:"end"}))}};A4.style=TW;const CW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}",M4=class{constructor(t){V(this,t),this.iconPack=H,this.t=W()}render(){return d(z,null,d("slot",null))}};M4.style=CW;var PW=Object.freeze({__proto__:null,dyte_menu:I4,dyte_menu_item:A4,dyte_menu_list:M4});const RW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([variant='square']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)}:host([size='sm']){height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);font-size:12px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}",D4=class{constructor(t){V(this,t),this.getAvatar=()=>{var e;const i=As(((e=this.participant)===null||e===void 0?void 0:e.name)||"");let r;if(this.participant!=null&&"picture"in this.participant&&(r=this.participant.picture),r&&r.length>0&&this.imageState!=="errored")return d("div",{class:"image-ctr"},this.imageState==="loading"&&d("dyte-spinner",{iconPack:this.iconPack,t:this.t}),d("img",{src:r,class:{loaded:this.imageState==="loaded"},loading:"lazy",title:i,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const s=B_(i);return d("div",{class:"initials",title:i,part:"initials"},s)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=H,this.t=W(),this.imageState="loading"}render(){return d(z,null,this.getAvatar(),d("slot",null))}};D4.style=RW;var IW=Object.freeze({__proto__:null,dyte_avatar:D4});const AW=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(
    --dyte-controlbar-button-background-color,
    rgb(var(--dyte-colors-background-1000, 8 8 8))
  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;outline:2px solid transparent !important;outline-offset:2px !important;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){margin:var(--dyte-space-0, 0px);height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px);width:var(--dyte-space-6, 24px)}:host([variant='horizontal']) .label{display:block;font-size:14px;line-height:1.25rem}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host .label{display:none}:slotted(dyte-icon){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}}`,O4=class{constructor(t){V(this,t),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=H,this.t=W(),this.brandIcon=!1}render(){return d(z,null,d("button",{"aria-label":this.label,part:"button"},this.isLoading?d("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):d("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),d("span",{class:"label",part:"label"},this.label),this.showWarning&&d("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};O4.style=AW;var MW=Object.freeze({__proto__:null,dyte_controlbar_button:O4});const DW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));--color:var(--dyte-tooltip-color, rgb(var(--dyte-colors-text-1000, 255 255 255)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}.tooltip,#arrow{position:absolute;background-color:var(--background-color);color:var(--color)}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253));--color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host([kind='block']){display:block}",L4=class{constructor(t){V(this,t),this.dyteOpenChange=re(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout(()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),this.size==="sm"&&setTimeout(()=>{this.isInFocus&&this.hideMenu()},1e3))},this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=H,this.t=W(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),Mi(()=>{this.openChanged(this.open)})}openChanged(t){t?this.showMenu():this.hideMenu()}update(){R4(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[y4(8),v4(),b4({padding:5}),oW({element:this.arrowEl})]}).then(({x:t,y:e,placement:i,middlewareData:r})=>{Object.assign(this.tooltipEl.style,{left:`${t}px`,top:`${e}px`});const{x:s,y:n}=r.arrow,a={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:s!=null?`${s}px`:"",top:n!=null?`${n}px`:"",right:"",bottom:"",[a]:"-4px"})})}render(){return d(z,null,d("span",{part:"trigger",id:"trigger",ref:t=>this.triggerEl=t},d("slot",null)),d("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:t=>this.tooltipEl=t},d("div",{id:"arrow",ref:t=>this.arrowEl=t,part:"arrow"}),this.label,d("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};L4.style=DW;var OW=Object.freeze({__proto__:null,dyte_tooltip:L4});const LW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@keyframes spin{to{transform:rotate(360deg)}}.spinner{animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;animation-duration:1.3s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",N4=class{constructor(t){V(this,t),this.iconPack=H,this.size="md",this.t=W()}render(){return d(z,null,d("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};N4.style=LW;var NW=Object.freeze({__proto__:null,dyte_spinner:N4});const UW=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}",U4=class{constructor(t){V(this,t),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=H,this.t=W()}render(){return d(z,null,d("button",{part:"button"},d("span",{class:"start"},d("slot",{name:"start"})),d("span",{class:"content",part:"content"},d("slot",null)),d("span",{class:"end"},d("slot",{name:"end"}))))}};U4.style=UW;var jW=Object.freeze({__proto__:null,dyte_button:U4});const $W=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}:host([size='xl']){box-sizing:border-box;display:block;height:var(--dyte-space-16, 64px) !important;width:var(--dyte-space-16, 64px) !important;--dyte-spinner-color:currentColor}:host([size='md']){box-sizing:border-box;display:block;height:var(--dyte-space-6, 24px) !important;width:var(--dyte-space-6, 24px) !important;--dyte-spinner-color:currentColor}:host([size='sm']){box-sizing:border-box;display:block;height:var(--dyte-space-4, 16px) !important;width:var(--dyte-space-4, 16px) !important;--dyte-spinner-color:currentColor}",zW=t=>{try{return JSON.parse(t)}catch{return t}},j4=class{constructor(t){V(this,t),this.icon=void 0,this.iconPack=H,this.t=W(),this.size="lg"}render(){return d(z,null,d("div",{class:"icon-wrapper",innerHTML:zW(this.icon),part:"wrapper"}))}};j4.style=$W;var FW=Object.freeze({__proto__:null,dyte_icon:j4});(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();x9();const VW=$N("dyte-meeting");var $4=typeof global=="object"&&global&&global.Object===Object&&global,BW=typeof self=="object"&&self&&self.Object===Object&&self,Jn=$4||BW||Function("return this")(),ou=Jn.Symbol,z4=Object.prototype,HW=z4.hasOwnProperty,WW=z4.toString,nh=ou?ou.toStringTag:void 0;function GW(t){var e=HW.call(t,nh),i=t[nh];try{t[nh]=void 0;var r=!0}catch{}var s=WW.call(t);return r&&(e?t[nh]=i:delete t[nh]),s}var qW=Object.prototype,JW=qW.toString;function KW(t){return JW.call(t)}var QW="[object Null]",YW="[object Undefined]",XE=ou?ou.toStringTag:void 0;function wu(t){return t==null?t===void 0?YW:QW:XE&&XE in Object(t)?GW(t):KW(t)}function _d(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function pg(t){return t!=null&&typeof t=="object"}var eT;(function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PLAYING="Playing",t.READY="Ready"})(eT||(eT={}));var rr;(function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"})(rr||(rr={}));rr.TIME_UPDATE,rr.BUFFER_UPDATE,rr.TEXT_METADATA_CUE,rr.PLAYER_METADATA;rr.REBUFFERING,rr.AUDIO_BLOCKED,rr.PLAYBACK_BLOCKED,rr.ERROR,rr.RECOVERABLE_ERROR,rr.WORKER_ERROR,rr.NETWORK_UNAVAILABLE,rr.ANALYTICS_EVENT,rr.PLAYBACK_RATE_CHANGED,rr.QUALITY_CHANGED,rr.INITIALIZED;function ZW(){this.__data__=[],this.size=0}function Ty(t,e){return t===e||t!==t&&e!==e}function Cy(t,e){for(var i=t.length;i--;)if(Ty(t[i][0],e))return i;return-1}var XW=Array.prototype,eG=XW.splice;function tG(t){var e=this.__data__,i=Cy(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():eG.call(e,i,1),--this.size,!0}function iG(t){var e=this.__data__,i=Cy(e,t);return i<0?void 0:e[i][1]}function rG(t){return Cy(this.__data__,t)>-1}function sG(t,e){var i=this.__data__,r=Cy(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function $a(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}$a.prototype.clear=ZW;$a.prototype.delete=tG;$a.prototype.get=iG;$a.prototype.has=rG;$a.prototype.set=sG;function nG(){this.__data__=new $a,this.size=0}function aG(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function oG(t){return this.__data__.get(t)}function cG(t){return this.__data__.has(t)}var dG="[object AsyncFunction]",lG="[object Function]",uG="[object GeneratorFunction]",hG="[object Proxy]";function tS(t){if(!_d(t))return!1;var e=wu(t);return e==lG||e==uG||e==dG||e==hG}var db=Jn["__core-js_shared__"],tT=function(){var t=/[^.]+$/.exec(db&&db.keys&&db.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function pG(t){return!!tT&&tT in t}var gG=Function.prototype,mG=gG.toString;function Sd(t){if(t!=null){try{return mG.call(t)}catch{}try{return t+""}catch{}}return""}var fG=/[\\^$.*+?()[\]{}|]/g,vG=/^\[object .+?Constructor\]$/,yG=Function.prototype,bG=Object.prototype,wG=yG.toString,kG=bG.hasOwnProperty,_G=RegExp("^"+wG.call(kG).replace(fG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SG(t){if(!_d(t)||pG(t))return!1;var e=tS(t)?_G:vG;return e.test(Sd(t))}function xG(t,e){return t==null?void 0:t[e]}function xd(t,e){var i=xG(t,e);return SG(i)?i:void 0}var Fp=xd(Jn,"Map"),Vp=xd(Object,"create");function EG(){this.__data__=Vp?Vp(null):{},this.size=0}function TG(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var CG="__lodash_hash_undefined__",PG=Object.prototype,RG=PG.hasOwnProperty;function IG(t){var e=this.__data__;if(Vp){var i=e[t];return i===CG?void 0:i}return RG.call(e,t)?e[t]:void 0}var AG=Object.prototype,MG=AG.hasOwnProperty;function DG(t){var e=this.__data__;return Vp?e[t]!==void 0:MG.call(e,t)}var OG="__lodash_hash_undefined__";function LG(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Vp&&e===void 0?OG:e,this}function pd(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}pd.prototype.clear=EG;pd.prototype.delete=TG;pd.prototype.get=IG;pd.prototype.has=DG;pd.prototype.set=LG;function NG(){this.size=0,this.__data__={hash:new pd,map:new(Fp||$a),string:new pd}}function UG(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Py(t,e){var i=t.__data__;return UG(e)?i[typeof e=="string"?"string":"hash"]:i.map}function jG(t){var e=Py(this,t).delete(t);return this.size-=e?1:0,e}function $G(t){return Py(this,t).get(t)}function zG(t){return Py(this,t).has(t)}function FG(t,e){var i=Py(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function ku(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}ku.prototype.clear=NG;ku.prototype.delete=jG;ku.prototype.get=$G;ku.prototype.has=zG;ku.prototype.set=FG;var VG=200;function BG(t,e){var i=this.__data__;if(i instanceof $a){var r=i.__data__;if(!Fp||r.length<VG-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new ku(r)}return i.set(t,e),this.size=i.size,this}function _u(t){var e=this.__data__=new $a(t);this.size=e.size}_u.prototype.clear=nG;_u.prototype.delete=aG;_u.prototype.get=oG;_u.prototype.has=cG;_u.prototype.set=BG;var Rv=function(){try{var t=xd(Object,"defineProperty");return t({},"",{}),t}catch{}}();function iS(t,e,i){e=="__proto__"&&Rv?Rv(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function xw(t,e,i){(i!==void 0&&!Ty(t[e],i)||i===void 0&&!(e in t))&&iS(t,e,i)}function HG(t){return function(e,i,r){for(var s=-1,n=Object(e),a=r(e),o=a.length;o--;){var c=a[t?o:++s];if(i(n[c],c,n)===!1)break}return e}}var WG=HG(),F4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,iT=F4&&typeof module=="object"&&module&&!module.nodeType&&module,GG=iT&&iT.exports===F4,rT=GG?Jn.Buffer:void 0,sT=rT?rT.allocUnsafe:void 0;function qG(t,e){if(e)return t.slice();var i=t.length,r=sT?sT(i):new t.constructor(i);return t.copy(r),r}var nT=Jn.Uint8Array;function JG(t){var e=new t.constructor(t.byteLength);return new nT(e).set(new nT(t)),e}function KG(t,e){var i=e?JG(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function QG(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}var aT=Object.create,YG=function(){function t(){}return function(e){if(!_d(e))return{};if(aT)return aT(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function ZG(t,e){return function(i){return t(e(i))}}var V4=ZG(Object.getPrototypeOf,Object),XG=Object.prototype;function B4(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||XG;return t===i}function eq(t){return typeof t.constructor=="function"&&!B4(t)?YG(V4(t)):{}}var tq="[object Arguments]";function oT(t){return pg(t)&&wu(t)==tq}var H4=Object.prototype,iq=H4.hasOwnProperty,rq=H4.propertyIsEnumerable,Ew=oT(function(){return arguments}())?oT:function(t){return pg(t)&&iq.call(t,"callee")&&!rq.call(t,"callee")},Tw=Array.isArray,sq=9007199254740991;function W4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=sq}function rS(t){return t!=null&&W4(t.length)&&!tS(t)}function nq(t){return pg(t)&&rS(t)}function aq(){return!1}var G4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cT=G4&&typeof module=="object"&&module&&!module.nodeType&&module,oq=cT&&cT.exports===G4,dT=oq?Jn.Buffer:void 0,cq=dT?dT.isBuffer:void 0,q4=cq||aq,dq="[object Object]",lq=Function.prototype,uq=Object.prototype,J4=lq.toString,hq=uq.hasOwnProperty,pq=J4.call(Object);function gq(t){if(!pg(t)||wu(t)!=dq)return!1;var e=V4(t);if(e===null)return!0;var i=hq.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&J4.call(i)==pq}var mq="[object Arguments]",fq="[object Array]",vq="[object Boolean]",yq="[object Date]",bq="[object Error]",wq="[object Function]",kq="[object Map]",_q="[object Number]",Sq="[object Object]",xq="[object RegExp]",Eq="[object Set]",Tq="[object String]",Cq="[object WeakMap]",Pq="[object ArrayBuffer]",Rq="[object DataView]",Iq="[object Float32Array]",Aq="[object Float64Array]",Mq="[object Int8Array]",Dq="[object Int16Array]",Oq="[object Int32Array]",Lq="[object Uint8Array]",Nq="[object Uint8ClampedArray]",Uq="[object Uint16Array]",jq="[object Uint32Array]",zt={};zt[Iq]=zt[Aq]=zt[Mq]=zt[Dq]=zt[Oq]=zt[Lq]=zt[Nq]=zt[Uq]=zt[jq]=!0;zt[mq]=zt[fq]=zt[Pq]=zt[vq]=zt[Rq]=zt[yq]=zt[bq]=zt[wq]=zt[kq]=zt[_q]=zt[Sq]=zt[xq]=zt[Eq]=zt[Tq]=zt[Cq]=!1;function $q(t){return pg(t)&&W4(t.length)&&!!zt[wu(t)]}function zq(t){return function(e){return t(e)}}var K4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lp=K4&&typeof module=="object"&&module&&!module.nodeType&&module,Fq=lp&&lp.exports===K4,lb=Fq&&$4.process,cu=function(){try{var t=lp&&lp.require&&lp.require("util").types;return t||lb&&lb.binding&&lb.binding("util")}catch{}}(),lT=cu&&cu.isTypedArray,Q4=lT?zq(lT):$q;function Cw(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Vq=Object.prototype,Bq=Vq.hasOwnProperty;function Hq(t,e,i){var r=t[e];(!(Bq.call(t,e)&&Ty(r,i))||i===void 0&&!(e in t))&&iS(t,e,i)}function Wq(t,e,i,r){var s=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=r?r(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),s?iS(i,o,c):Hq(i,o,c)}return i}function Gq(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}var qq=9007199254740991,Jq=/^(?:0|[1-9]\d*)$/;function Y4(t,e){var i=typeof t;return e=e==null?qq:e,!!e&&(i=="number"||i!="symbol"&&Jq.test(t))&&t>-1&&t%1==0&&t<e}var Kq=Object.prototype,Qq=Kq.hasOwnProperty;function Yq(t,e){var i=Tw(t),r=!i&&Ew(t),s=!i&&!r&&q4(t),n=!i&&!r&&!s&&Q4(t),a=i||r||s||n,o=a?Gq(t.length,String):[],c=o.length;for(var u in t)(e||Qq.call(t,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Y4(u,c)))&&o.push(u);return o}function Zq(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var Xq=Object.prototype,eJ=Xq.hasOwnProperty;function tJ(t){if(!_d(t))return Zq(t);var e=B4(t),i=[];for(var r in t)r=="constructor"&&(e||!eJ.call(t,r))||i.push(r);return i}function Z4(t){return rS(t)?Yq(t,!0):tJ(t)}function iJ(t){return Wq(t,Z4(t))}function rJ(t,e,i,r,s,n,a){var o=Cw(t,i),c=Cw(e,i),u=a.get(c);if(u){xw(t,i,u);return}var l=n?n(o,c,i+"",t,e,a):void 0,p=l===void 0;if(p){var m=Tw(c),y=!m&&q4(c),b=!m&&!y&&Q4(c);l=c,m||y||b?Tw(o)?l=o:nq(o)?l=QG(o):y?(p=!1,l=qG(c,!0)):b?(p=!1,l=KG(c,!0)):l=[]:gq(c)||Ew(c)?(l=o,Ew(o)?l=iJ(o):(!_d(o)||tS(o))&&(l=eq(c))):p=!1}p&&(a.set(c,l),s(l,c,r,n,a),a.delete(c)),xw(t,i,l)}function X4(t,e,i,r,s){t!==e&&WG(e,function(n,a){if(s||(s=new _u),_d(n))rJ(t,e,a,i,X4,r,s);else{var o=r?r(Cw(t,a),n,a+"",t,e,s):void 0;o===void 0&&(o=n),xw(t,a,o)}},Z4)}function eM(t){return t}function sJ(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var uT=Math.max;function nJ(t,e,i){return e=uT(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=uT(r.length-e,0),a=Array(n);++s<n;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i(a),sJ(t,this,o)}}function aJ(t){return function(){return t}}var oJ=Rv?function(t,e){return Rv(t,"toString",{configurable:!0,enumerable:!1,value:aJ(e),writable:!0})}:eM,cJ=800,dJ=16,lJ=Date.now;function uJ(t){var e=0,i=0;return function(){var r=lJ(),s=dJ-(r-i);if(i=r,s>0){if(++e>=cJ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var hJ=uJ(oJ);function pJ(t,e){return hJ(nJ(t,e,eM),t+"")}function gJ(t,e,i){if(!_d(i))return!1;var r=typeof e;return(r=="number"?rS(i)&&Y4(e,i.length):r=="string"&&e in i)?Ty(i[e],t):!1}function mJ(t){return pJ(function(e,i){var r=-1,s=i.length,n=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(s--,n):void 0,a&&gJ(i[0],i[1],a)&&(n=s<3?void 0:n,s=1),e=Object(e);++r<s;){var o=i[r];o&&t(e,o,r,n)}return e})}mJ(function(t,e,i){X4(t,e,i)});const hT={get:(t,e,i)=>(...r)=>{try{return Reflect.get(t,e,i).apply(t,r)}catch{return null}}};let pT;try{pT=new Proxy(localStorage,hT)}catch{pT=new Proxy({},hT)}var Pw=xd(Jn,"DataView"),Rw=xd(Jn,"Promise"),Iw=xd(Jn,"Set"),Aw=xd(Jn,"WeakMap"),gT="[object Map]",fJ="[object Object]",mT="[object Promise]",fT="[object Set]",vT="[object WeakMap]",yT="[object DataView]",vJ=Sd(Pw),yJ=Sd(Fp),bJ=Sd(Rw),wJ=Sd(Iw),kJ=Sd(Aw),jd=wu;(Pw&&jd(new Pw(new ArrayBuffer(1)))!=yT||Fp&&jd(new Fp)!=gT||Rw&&jd(Rw.resolve())!=mT||Iw&&jd(new Iw)!=fT||Aw&&jd(new Aw)!=vT)&&(jd=function(t){var e=wu(t),i=e==fJ?t.constructor:void 0,r=i?Sd(i):"";if(r)switch(r){case vJ:return yT;case yJ:return gT;case bJ:return mT;case wJ:return fT;case kJ:return vT}return e});var bT=ou?ou.prototype:void 0;bT&&bT.valueOf;cu&&cu.isMap;cu&&cu.isSet;var lm,_J=new Uint8Array(16);function SJ(){if(!lm&&(lm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!lm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lm(_J)}const xJ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sS(t){return typeof t=="string"&&xJ.test(t)}var er=[];for(var ub=0;ub<256;++ub)er.push((ub+256).toString(16).substr(1));function EJ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(er[t[e+0]]+er[t[e+1]]+er[t[e+2]]+er[t[e+3]]+"-"+er[t[e+4]]+er[t[e+5]]+"-"+er[t[e+6]]+er[t[e+7]]+"-"+er[t[e+8]]+er[t[e+9]]+"-"+er[t[e+10]]+er[t[e+11]]+er[t[e+12]]+er[t[e+13]]+er[t[e+14]]+er[t[e+15]]).toLowerCase();if(!sS(i))throw TypeError("Stringified UUID is invalid");return i}function gg(t,e,i){t=t||{};var r=t.random||(t.rng||SJ)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){i=i||0;for(var s=0;s<16;++s)e[i+s]=r[s];return e}return EJ(r)}var tM={exports:{}},nS={exports:{}},iM=function(e,i){return function(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];return e.apply(i,s)}},TJ=iM,ec=Object.prototype.toString;function aS(t){return Array.isArray(t)}function Mw(t){return typeof t>"u"}function CJ(t){return t!==null&&!Mw(t)&&t.constructor!==null&&!Mw(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function rM(t){return ec.call(t)==="[object ArrayBuffer]"}function PJ(t){return ec.call(t)==="[object FormData]"}function RJ(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rM(t.buffer),e}function IJ(t){return typeof t=="string"}function AJ(t){return typeof t=="number"}function sM(t){return t!==null&&typeof t=="object"}function Km(t){if(ec.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function MJ(t){return ec.call(t)==="[object Date]"}function DJ(t){return ec.call(t)==="[object File]"}function OJ(t){return ec.call(t)==="[object Blob]"}function nM(t){return ec.call(t)==="[object Function]"}function LJ(t){return sM(t)&&nM(t.pipe)}function NJ(t){return ec.call(t)==="[object URLSearchParams]"}function UJ(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function jJ(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function oS(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),aS(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function Dw(){var t={};function e(s,n){Km(t[n])&&Km(s)?t[n]=Dw(t[n],s):Km(s)?t[n]=Dw({},s):aS(s)?t[n]=s.slice():t[n]=s}for(var i=0,r=arguments.length;i<r;i++)oS(arguments[i],e);return t}function $J(t,e,i){return oS(e,function(s,n){i&&typeof s=="function"?t[n]=TJ(s,i):t[n]=s}),t}function zJ(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Gr={isArray:aS,isArrayBuffer:rM,isBuffer:CJ,isFormData:PJ,isArrayBufferView:RJ,isString:IJ,isNumber:AJ,isObject:sM,isPlainObject:Km,isUndefined:Mw,isDate:MJ,isFile:DJ,isBlob:OJ,isFunction:nM,isStream:LJ,isURLSearchParams:NJ,isStandardBrowserEnv:jJ,forEach:oS,merge:Dw,extend:$J,trim:UJ,stripBOM:zJ},$d=Gr;function wT(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var aM=function(e,i,r){if(!i)return e;var s;if(r)s=r(i);else if($d.isURLSearchParams(i))s=i.toString();else{var n=[];$d.forEach(i,function(c,u){c===null||typeof c>"u"||($d.isArray(c)?u=u+"[]":c=[c],$d.forEach(c,function(p){$d.isDate(p)?p=p.toISOString():$d.isObject(p)&&(p=JSON.stringify(p)),n.push(wT(u)+"="+wT(p))}))}),s=n.join("&")}if(s){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},FJ=Gr;function Ry(){this.handlers=[]}Ry.prototype.use=function(e,i,r){return this.handlers.push({fulfilled:e,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Ry.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Ry.prototype.forEach=function(e){FJ.forEach(this.handlers,function(r){r!==null&&e(r)})};var VJ=Ry,BJ=Gr,HJ=function(e,i){BJ.forEach(e,function(s,n){n!==i&&n.toUpperCase()===i.toUpperCase()&&(e[i]=s,delete e[n])})},oM=function(e,i,r,s,n){return e.config=i,r&&(e.code=r),e.request=s,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},hb,kT;function cM(){if(kT)return hb;kT=1;var t=oM;return hb=function(i,r,s,n,a){var o=new Error(i);return t(o,r,s,n,a)},hb}var pb,_T;function WJ(){if(_T)return pb;_T=1;var t=cM();return pb=function(i,r,s){var n=s.config.validateStatus;!s.status||!n||n(s.status)?i(s):r(t("Request failed with status code "+s.status,s.config,null,s.request,s))},pb}var gb,ST;function GJ(){if(ST)return gb;ST=1;var t=Gr;return gb=t.isStandardBrowserEnv()?function(){return{write:function(r,s,n,a,o,c){var u=[];u.push(r+"="+encodeURIComponent(s)),t.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),t.isString(a)&&u.push("path="+a),t.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),gb}var mb,xT;function qJ(){return xT||(xT=1,mb=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),mb}var fb,ET;function JJ(){return ET||(ET=1,fb=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}),fb}var vb,TT;function KJ(){if(TT)return vb;TT=1;var t=qJ(),e=JJ();return vb=function(r,s){return r&&!t(s)?e(r,s):s},vb}var yb,CT;function QJ(){if(CT)return yb;CT=1;var t=Gr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return yb=function(r){var s={},n,a,o;return r&&t.forEach(r.split(`
`),function(u){if(o=u.indexOf(":"),n=t.trim(u.substr(0,o)).toLowerCase(),a=t.trim(u.substr(o+1)),n){if(s[n]&&e.indexOf(n)>=0)return;n==="set-cookie"?s[n]=(s[n]?s[n]:[]).concat([a]):s[n]=s[n]?s[n]+", "+a:a}}),s},yb}var bb,PT;function YJ(){if(PT)return bb;PT=1;var t=Gr;return bb=t.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function n(a){var o=a;return i&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(o){var c=t.isString(o)?n(o):o;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),bb}var wb,RT;function Iy(){if(RT)return wb;RT=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,wb=t,wb}var kb,IT;function AT(){if(IT)return kb;IT=1;var t=Gr,e=WJ(),i=GJ(),r=aM,s=KJ(),n=QJ(),a=YJ(),o=cM(),c=Ay(),u=Iy();return kb=function(p){return new Promise(function(y,b){var S=p.data,E=p.headers,k=p.responseType,T;function I(){p.cancelToken&&p.cancelToken.unsubscribe(T),p.signal&&p.signal.removeEventListener("abort",T)}t.isFormData(S)&&delete E["Content-Type"];var O=new XMLHttpRequest;if(p.auth){var q=p.auth.username||"",B=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";E.Authorization="Basic "+btoa(q+":"+B)}var Y=s(p.baseURL,p.url);O.open(p.method.toUpperCase(),r(Y,p.params,p.paramsSerializer),!0),O.timeout=p.timeout;function X(){if(!!O){var he="getAllResponseHeaders"in O?n(O.getAllResponseHeaders()):null,ce=!k||k==="text"||k==="json"?O.responseText:O.response,et={data:ce,status:O.status,statusText:O.statusText,headers:he,config:p,request:O};e(function(yt){y(yt),I()},function(yt){b(yt),I()},et),O=null}}if("onloadend"in O?O.onloadend=X:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(X)},O.onabort=function(){!O||(b(o("Request aborted",p,"ECONNABORTED",O)),O=null)},O.onerror=function(){b(o("Network Error",p,null,O)),O=null},O.ontimeout=function(){var ce=p.timeout?"timeout of "+p.timeout+"ms exceeded":"timeout exceeded",et=p.transitional||c.transitional;p.timeoutErrorMessage&&(ce=p.timeoutErrorMessage),b(o(ce,p,et.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},t.isStandardBrowserEnv()){var be=(p.withCredentials||a(Y))&&p.xsrfCookieName?i.read(p.xsrfCookieName):void 0;be&&(E[p.xsrfHeaderName]=be)}"setRequestHeader"in O&&t.forEach(E,function(ce,et){typeof S>"u"&&et.toLowerCase()==="content-type"?delete E[et]:O.setRequestHeader(et,ce)}),t.isUndefined(p.withCredentials)||(O.withCredentials=!!p.withCredentials),k&&k!=="json"&&(O.responseType=p.responseType),typeof p.onDownloadProgress=="function"&&O.addEventListener("progress",p.onDownloadProgress),typeof p.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",p.onUploadProgress),(p.cancelToken||p.signal)&&(T=function(he){!O||(b(!he||he&&he.type?new u("canceled"):he),O.abort(),O=null)},p.cancelToken&&p.cancelToken.subscribe(T),p.signal&&(p.signal.aborted?T():p.signal.addEventListener("abort",T))),S||(S=null),O.send(S)})},kb}var _b,MT;function Ay(){if(MT)return _b;MT=1;var t=Gr,e=HJ,i=oM,r={"Content-Type":"application/x-www-form-urlencoded"};function s(c,u){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=u)}function n(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=AT()),c}function a(c,u,l){if(t.isString(c))try{return(u||JSON.parse)(c),t.trim(c)}catch(p){if(p.name!=="SyntaxError")throw p}return(l||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:n(),transformRequest:[function(u,l){return e(l,"Accept"),e(l,"Content-Type"),t.isFormData(u)||t.isArrayBuffer(u)||t.isBuffer(u)||t.isStream(u)||t.isFile(u)||t.isBlob(u)?u:t.isArrayBufferView(u)?u.buffer:t.isURLSearchParams(u)?(s(l,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):t.isObject(u)||l&&l["Content-Type"]==="application/json"?(s(l,"application/json"),a(u)):u}],transformResponse:[function(u){var l=this.transitional||o.transitional,p=l&&l.silentJSONParsing,m=l&&l.forcedJSONParsing,y=!p&&this.responseType==="json";if(y||m&&t.isString(u)&&u.length)try{return JSON.parse(u)}catch(b){if(y)throw b.name==="SyntaxError"?i(b,this,"E_JSON_PARSE"):b}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(u){o.headers[u]={}}),t.forEach(["post","put","patch"],function(u){o.headers[u]=t.merge(r)}),_b=o,_b}var ZJ=Gr,XJ=Ay(),eK=function(e,i,r){var s=this||XJ;return ZJ.forEach(r,function(a){e=a.call(s,e,i)}),e},Sb,DT;function dM(){return DT||(DT=1,Sb=function(e){return!!(e&&e.__CANCEL__)}),Sb}var OT=Gr,xb=eK,tK=dM(),iK=Ay(),rK=Iy();function Eb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rK("canceled")}var sK=function(e){Eb(e),e.headers=e.headers||{},e.data=xb.call(e,e.data,e.headers,e.transformRequest),e.headers=OT.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),OT.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var i=e.adapter||iK.adapter;return i(e).then(function(s){return Eb(e),s.data=xb.call(e,s.data,s.headers,e.transformResponse),s},function(s){return tK(s)||(Eb(e),s&&s.response&&(s.response.data=xb.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},Yr=Gr,lM=function(e,i){i=i||{};var r={};function s(l,p){return Yr.isPlainObject(l)&&Yr.isPlainObject(p)?Yr.merge(l,p):Yr.isPlainObject(p)?Yr.merge({},p):Yr.isArray(p)?p.slice():p}function n(l){if(Yr.isUndefined(i[l])){if(!Yr.isUndefined(e[l]))return s(void 0,e[l])}else return s(e[l],i[l])}function a(l){if(!Yr.isUndefined(i[l]))return s(void 0,i[l])}function o(l){if(Yr.isUndefined(i[l])){if(!Yr.isUndefined(e[l]))return s(void 0,e[l])}else return s(void 0,i[l])}function c(l){if(l in i)return s(e[l],i[l]);if(l in e)return s(void 0,e[l])}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return Yr.forEach(Object.keys(e).concat(Object.keys(i)),function(p){var m=u[p]||n,y=m(p);Yr.isUndefined(y)&&m!==c||(r[p]=y)}),r},Tb,LT;function uM(){return LT||(LT=1,Tb={version:"0.25.0"}),Tb}var nK=uM().version,cS={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){cS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var NT={};cS.transitional=function(e,i,r){function s(n,a){return"[Axios v"+nK+"] Transitional option '"+n+"'"+a+(r?". "+r:"")}return function(n,a,o){if(e===!1)throw new Error(s(a," has been removed"+(i?" in "+i:"")));return i&&!NT[a]&&(NT[a]=!0,console.warn(s(a," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(n,a,o):!0}};function aK(t,e,i){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),s=r.length;s-- >0;){var n=r[s],a=e[n];if(a){var o=t[n],c=o===void 0||a(o,n,t);if(c!==!0)throw new TypeError("option "+n+" must be "+c);continue}if(i!==!0)throw Error("Unknown option "+n)}}var oK={assertOptions:aK,validators:cS},hM=Gr,cK=aM,UT=VJ,jT=sK,My=lM,pM=oK,zd=pM.validators;function mg(t){this.defaults=t,this.interceptors={request:new UT,response:new UT}}mg.prototype.request=function(e,i){if(typeof e=="string"?(i=i||{},i.url=e):i=e||{},!i.url)throw new Error("Provided config url is not valid");i=My(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&pM.assertOptions(r,{silentJSONParsing:zd.transitional(zd.boolean),forcedJSONParsing:zd.transitional(zd.boolean),clarifyTimeoutError:zd.transitional(zd.boolean)},!1);var s=[],n=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(i)===!1||(n=n&&y.synchronous,s.unshift(y.fulfilled,y.rejected))});var a=[];this.interceptors.response.forEach(function(y){a.push(y.fulfilled,y.rejected)});var o;if(!n){var c=[jT,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),o=Promise.resolve(i);c.length;)o=o.then(c.shift(),c.shift());return o}for(var u=i;s.length;){var l=s.shift(),p=s.shift();try{u=l(u)}catch(m){p(m);break}}try{o=jT(u)}catch(m){return Promise.reject(m)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};mg.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=My(this.defaults,e),cK(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};hM.forEach(["delete","get","head","options"],function(e){mg.prototype[e]=function(i,r){return this.request(My(r||{},{method:e,url:i,data:(r||{}).data}))}});hM.forEach(["post","put","patch"],function(e){mg.prototype[e]=function(i,r,s){return this.request(My(s||{},{method:e,url:i,data:r}))}});var dK=mg,Cb,$T;function lK(){if($T)return Cb;$T=1;var t=Iy();function e(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var s=this;this.promise.then(function(n){if(!!s._listeners){var a,o=s._listeners.length;for(a=0;a<o;a++)s._listeners[a](n);s._listeners=null}}),this.promise.then=function(n){var a,o=new Promise(function(c){s.subscribe(c),a=c}).then(n);return o.cancel=function(){s.unsubscribe(a)},o},i(function(a){s.reason||(s.reason=new t(a),r(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(!!this._listeners){var s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}},e.source=function(){var r,s=new e(function(a){r=a});return{token:s,cancel:r}},Cb=e,Cb}var Pb,zT;function uK(){return zT||(zT=1,Pb=function(e){return function(r){return e.apply(null,r)}}),Pb}var Rb,FT;function hK(){if(FT)return Rb;FT=1;var t=Gr;return Rb=function(i){return t.isObject(i)&&i.isAxiosError===!0},Rb}var VT=Gr,pK=iM,Qm=dK,gK=lM,mK=Ay();function gM(t){var e=new Qm(t),i=pK(Qm.prototype.request,e);return VT.extend(i,Qm.prototype,e),VT.extend(i,e),i.create=function(s){return gM(gK(t,s))},i}var Kn=gM(mK);Kn.Axios=Qm;Kn.Cancel=Iy();Kn.CancelToken=lK();Kn.isCancel=dM();Kn.VERSION=uM().version;Kn.all=function(e){return Promise.all(e)};Kn.spread=uK();Kn.isAxiosError=hK();nS.exports=Kn;nS.exports.default=Kn;(function(t){t.exports=nS.exports})(tM);const Iv=m5(tM.exports),fK={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},mM={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},pi={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},br={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},io={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ee{static getFirstMatch(e,i){const r=i.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,i){const r=i.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,i,r){if(e.test(i))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const i=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const i=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,i,r=!1){const s=ee.getVersionPrecision(e),n=ee.getVersionPrecision(i);let a=Math.max(s,n),o=0;const c=ee.map([e,i],u=>{const l=a-ee.getVersionPrecision(u),p=u+new Array(l+1).join(".0");return ee.map(p.split("."),m=>new Array(20-m.length).join("0")+m).reverse()});for(r&&(o=a-Math.min(s,n)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(e,i){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,i);for(s=0;s<e.length;s+=1)r.push(i(e[s]));return r}static find(e,i){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,i);for(r=0,s=e.length;r<s;r+=1){const n=e[r];if(i(n,r))return n}}static assign(e,...i){const r=e;let s,n;if(Object.assign)return Object.assign(e,...i);for(s=0,n=i.length;s<n;s+=1){const a=i[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return e}static getBrowserAlias(e){return fK[e]}static getBrowserTypeByAlias(e){return mM[e]||""}}const St=/version\/(\d+(\.?_?\d+)+)/i,vK=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},i=ee.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},i=ee.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},i=ee.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},i=ee.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},i=ee.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},i=ee.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},i=ee.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},i=ee.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=ee.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},i=ee.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},i=ee.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},i=ee.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},i=ee.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},i=ee.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},i=ee.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},i=ee.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},i=ee.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},i=ee.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},i=ee.getFirstMatch(St,t)||ee.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},i=ee.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},i=ee.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},i=ee.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},i=ee.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},i=ee.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},i=ee.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},i=ee.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},i=ee.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},i=ee.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e={name:"Android Browser"},i=ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},i=ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},i=ee.getFirstMatch(St,t);return i&&(e.version=i),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?i:e;return{name:ee.getFirstMatch(s,t),version:ee.getSecondMatch(s,t)}}}],yK=[{test:[/Roku\/DVP/],describe(t){const e=ee.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:br.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=ee.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:br.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=ee.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=ee.getWindowsVersionName(e);return{name:br.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:br.iOS},i=ee.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe(t){const e=ee.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=ee.getMacOSVersionName(e),r={name:br.MacOS,version:e};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=ee.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:br.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e=ee.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=ee.getAndroidVersionName(e),r={name:br.Android,version:e};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=ee.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:br.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=ee.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||ee.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||ee.getFirstMatch(/\bbb(\d+)/i,t);return{name:br.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=ee.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:br.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=ee.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:br.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:br.Linux}}},{test:[/CrOS/],describe(){return{name:br.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=ee.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:br.PlayStation4,version:e}}}],bK=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=ee.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:pi.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:pi.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:pi.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:pi.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:pi.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:pi.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:pi.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe(t){const e=ee.getFirstMatch(/(ipod|iphone)/i,t);return{type:pi.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:pi.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:pi.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:pi.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:pi.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:pi.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:pi.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:pi.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:pi.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:pi.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:pi.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:pi.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:pi.tv}}}],wK=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:io.Blink};const i=ee.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:io.EdgeHTML,version:i}}},{test:[/trident/i],describe(t){const e={name:io.Trident},i=ee.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:io.Presto},i=ee.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe(t){const e={name:io.Gecko},i=ee.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:io.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:io.WebKit},i=ee.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];class BT{constructor(e,i=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ee.find(vK,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ee.find(yK,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:i}=this.getOS();return e?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:i}=this.getPlatform();return e?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const e=ee.find(bK,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ee.find(wK,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ee.assign({},this.parsedResult)}satisfies(e){const i={};let r=0;const s={};let n=0;if(Object.keys(e).forEach(o=>{const c=e[o];typeof c=="string"?(s[o]=c,n+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=ee.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const u=ee.find(o,l=>this.isPlatform(l));if(u){const l=this.satisfies(i[u]);if(l!==void 0)return l}}if(n>0){const o=Object.keys(s),c=ee.find(o,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(e,i=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const n=ee.getBrowserTypeByAlias(s);return i&&n&&(s=n.toLowerCase()),s===r}compareVersion(e){let i=[0],r=e,s=!1;const n=this.getBrowserVersion();if(typeof n=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):i=[],e[0]===">"?i.push(1):i.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),i.indexOf(ee.compareVersions(n,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,i=!1){return this.isBrowser(e,i)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class dS{static getParser(e,i=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new BT(e,i)}static parse(e){return new BT(e).getResult()}static get BROWSER_MAP(){return mM}static get ENGINE_MAP(){return io}static get OS_MAP(){return br}static get PLATFORMS_MAP(){return pi}}var fM={},lS={exports:{}},HT=lS.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(HT).forEach(function(t){var e=HT[t];e.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});(function(t){var e=function(o){return String(Number(o))===o?Number(o):o},i=function(o,c,u,l){if(l&&!u)c[l]=e(o[1]);else for(var p=0;p<u.length;p+=1)o[p+1]!=null&&(c[u[p]]=e(o[p+1]))},r=function(o,c,u){var l=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:l&&!c[o.name]&&(c[o.name]={});var p=o.push?{}:l?c[o.name]:c;i(u.match(o.reg),p,o.names,o.name),o.push&&c[o.push].push(p)},s=lS.exports,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(o){var c={},u=[],l=c;return o.split(/(\r\n|\r|\n)/).filter(n).forEach(function(p){var m=p[0],y=p.slice(2);m==="m"&&(u.push({rtp:[],fmtp:[]}),l=u[u.length-1]);for(var b=0;b<(s[m]||[]).length;b+=1){var S=s[m][b];if(S.reg.test(y))return r(S,l,y)}}),c.media=u,c};var a=function(o,c){var u=c.split(/=(.+)/,2);return u.length===2?o[u[0]]=e(u[1]):u.length===1&&c.length>1&&(o[u[0]]=void 0),o};t.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(o){return o.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(o){for(var c=[],u=o.split(" ").map(e),l=0;l<u.length;l+=3)c.push({component:u[l],ip:u[l+1],port:u[l+2]});return c},t.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(u){var l,p=!1;return u[0]!=="~"?l=e(u):(l=e(u.substring(1,u.length)),p=!0),{scid:l,paused:p}})})}})(fM);var Ib=lS.exports,kK=/%[sdv%]/g,_K=function(t){var e=1,i=arguments,r=i.length;return t.replace(kK,function(s){if(e>=r)return s;var n=i[e];switch(e+=1,s){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}})},ah=function(t,e,i){var r=e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format,s=[t+"="+r];if(e.names)for(var n=0;n<e.names.length;n+=1){var a=e.names[n];e.name?s.push(i[e.name][a]):s.push(i[e.names[n]])}else s.push(i[e.name]);return _K.apply(null,s)},SK=["v","o","s","i","u","e","p","c","b","t","r","z","a"],xK=["i","c","b","a"],EK=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(n){n.payloads==null&&(n.payloads="")});var i=e.outerOrder||SK,r=e.innerOrder||xK,s=[];return i.forEach(function(n){Ib[n].forEach(function(a){a.name in t&&t[a.name]!=null?s.push(ah(n,a,t)):a.push in t&&t[a.push]!=null&&t[a.push].forEach(function(o){s.push(ah(n,a,o))})})}),t.media.forEach(function(n){s.push(ah("m",Ib.m[0],n)),r.forEach(function(a){Ib[a].forEach(function(o){o.name in n&&n[o.name]!=null?s.push(ah(a,o,n)):o.push in n&&n[o.push]!=null&&n[o.push].forEach(function(c){s.push(ah(a,o,c))})})})}),s.join(`\r
`)+`\r
`},Ed=fM,TK=EK,pn=TK,ze=Ed.parse,vM=Ed.parseParams;Ed.parseFmtpConfig;Ed.parsePayloads;Ed.parseRemoteCandidates;Ed.parseImageAttributes;var yM=Ed.parseSimulcastStreamList;function uS(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function CK(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}let va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Dy=[];for(let t=0;t<va.length;t++)Dy[va[t].charCodeAt(0)]=t;Dy["-".charCodeAt(0)]=va.indexOf("+");Dy["_".charCodeAt(0)]=va.indexOf("/");function PK(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let i=new Uint8Array(e),r=0,s=0,n,a=0;for(let o=0;o<t.length;o++){if(n=Dy[t.charCodeAt(o)],n===void 0)switch(t[o]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:a=n,s=1;break;case 1:i[r++]=a<<2|(n&48)>>4,a=n,s=2;break;case 2:i[r++]=(a&15)<<4|(n&60)>>2,a=n,s=3;break;case 3:i[r++]=(a&3)<<6|n,s=0;break}}if(s==1)throw Error("invalid base64 string.");return i.subarray(0,r)}function RK(t){let e="",i=0,r,s=0;for(let n=0;n<t.length;n++)switch(r=t[n],i){case 0:e+=va[r>>2],s=(r&3)<<4,i=1;break;case 1:e+=va[s|r>>4],s=(r&15)<<2,i=2;break;case 2:e+=va[s|r>>6],e+=va[r&63],i=0;break}return i&&(e+=va[s],e+="=",i==1&&(e+="=")),e}var Av;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(i,r,s,n,a)=>{(e(r)?r[t.symbol]:r[t.symbol]=[]).push({no:s,wireType:n,data:a})},t.onWrite=(i,r,s)=>{for(let{no:n,wireType:a,data:o}of t.list(r))s.tag(n,a).raw(o)},t.list=(i,r)=>{if(e(i)){let s=i[t.symbol];return r?s.filter(n=>n.no==r):s}return[]},t.last=(i,r)=>t.list(i,r).slice(-1)[0];const e=i=>i&&Array.isArray(i[t.symbol])})(Av||(Av={}));var mi;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(mi||(mi={}));function IK(){let t=0,e=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[t,e]}let i=this.buf[this.pos++];if(t|=(i&15)<<28,e=(i&112)>>4,(i&128)==0)return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Ab(t,e,i){for(let n=0;n<28;n=n+7){const a=t>>>n,o=!(a>>>7==0&&e==0),c=(o?a|128:a)&255;if(i.push(c),!o)return}const r=t>>>28&15|(e&7)<<4,s=e>>3!=0;if(i.push((s?r|128:r)&255),!!s){for(let n=3;n<31;n=n+7){const a=e>>>n,o=a>>>7!=0,c=(o?a|128:a)&255;if(i.push(c),!o)return}i.push(e>>>31&1)}}const Ym=(1<<16)*(1<<16);function bM(t){let e=t[0]=="-";e&&(t=t.slice(1));const i=1e6;let r=0,s=0;function n(a,o){const c=Number(t.slice(a,o));s*=i,r=r*i+c,r>=Ym&&(s=s+(r/Ym|0),r=r%Ym)}return n(-24,-18),n(-18,-12),n(-12,-6),n(-6),[e,r,s]}function Ow(t,e){if(e>>>0<=2097151)return""+(Ym*e+(t>>>0));let i=t&16777215,r=(t>>>24|e<<8)>>>0&16777215,s=e>>16&65535,n=i+r*6777216+s*6710656,a=r+s*8147497,o=s*2,c=1e7;n>=c&&(a+=Math.floor(n/c),n%=c),a>=c&&(o+=Math.floor(a/c),a%=c);function u(l,p){let m=l?String(l):"";return p?"0000000".slice(m.length)+m:m}return u(o,0)+u(a,o)+u(n,1)}function WT(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let i=0;i<9;i++)e.push(t&127|128),t=t>>7;e.push(1)}}function AK(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let i=5;(t&128)!==0&&i<10;i++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}let Et;function MK(){const t=new DataView(new ArrayBuffer(8));Et=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}MK();function wM(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const kM=/^-?[0-9]+$/,Mv=4294967296,um=2147483648;class _M{constructor(e,i){this.lo=e|0,this.hi=i|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*Mv+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class gr extends _M{static from(e){if(Et)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=Et.C(e);case"number":if(e===0)return this.ZERO;e=Et.C(e);case"bigint":if(!e)return this.ZERO;if(e<Et.UMIN)throw new Error("signed value for ulong");if(e>Et.UMAX)throw new Error("ulong too large");return Et.V.setBigUint64(0,e,!0),new gr(Et.V.getInt32(0,!0),Et.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!kM.test(e))throw new Error("string is no integer");let[i,r,s]=bM(e);if(i)throw new Error("signed value for ulong");return new gr(r,s);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new gr(e,e/Mv)}throw new Error("unknown value "+typeof e)}toString(){return Et?this.toBigInt().toString():Ow(this.lo,this.hi)}toBigInt(){return wM(Et),Et.V.setInt32(0,this.lo,!0),Et.V.setInt32(4,this.hi,!0),Et.V.getBigUint64(0,!0)}}gr.ZERO=new gr(0,0);class At extends _M{static from(e){if(Et)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=Et.C(e);case"number":if(e===0)return this.ZERO;e=Et.C(e);case"bigint":if(!e)return this.ZERO;if(e<Et.MIN)throw new Error("signed long too small");if(e>Et.MAX)throw new Error("signed long too large");return Et.V.setBigInt64(0,e,!0),new At(Et.V.getInt32(0,!0),Et.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!kM.test(e))throw new Error("string is no integer");let[i,r,s]=bM(e);if(i){if(s>um||s==um&&r!=0)throw new Error("signed long too small")}else if(s>=um)throw new Error("signed long too large");let n=new At(r,s);return i?n.negate():n;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new At(e,e/Mv):new At(-e,-e/Mv).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&um)!==0}negate(){let e=~this.hi,i=this.lo;return i?i=~i+1:e+=1,new At(i,e)}toString(){if(Et)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Ow(e.lo,e.hi)}return Ow(this.lo,this.hi)}toBigInt(){return wM(Et),Et.V.setInt32(0,this.lo,!0),Et.V.setInt32(4,this.hi,!0),Et.V.getBigInt64(0,!0)}}At.ZERO=new At(0,0);const GT={readUnknownField:!0,readerFactory:t=>new OK(t)};function DK(t){return t?Object.assign(Object.assign({},GT),t):GT}class OK{constructor(e,i){this.varint64=IK,this.uint32=AK,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=i!=null?i:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),i=e>>>3,r=e&7;if(i<=0||r<0||r>5)throw new Error("illegal tag: field no "+i+" wire type "+r);return[i,r]}skip(e){let i=this.pos;switch(e){case mi.Varint:for(;this.buf[this.pos++]&128;);break;case mi.Bit64:this.pos+=4;case mi.Bit32:this.pos+=4;break;case mi.LengthDelimited:let r=this.uint32();this.pos+=r;break;case mi.StartGroup:let s;for(;(s=this.tag()[1])!==mi.EndGroup;)this.skip(s);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new At(...this.varint64())}uint64(){return new gr(...this.varint64())}sint64(){let[e,i]=this.varint64(),r=-(e&1);return e=(e>>>1|(i&1)<<31)^r,i=i>>>1^r,new At(e,i)}bool(){let[e,i]=this.varint64();return e!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new gr(this.sfixed32(),this.sfixed32())}sfixed64(){return new At(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),i=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(i,i+e)}string(){return this.textDecoder.decode(this.bytes())}}function ut(t,e){if(!t)throw new Error(e)}const LK=34028234663852886e22,NK=-34028234663852886e22,UK=4294967295,jK=2147483647,$K=-2147483648;function up(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>jK||t<$K)throw new Error("invalid int 32: "+t)}function Dv(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>UK||t<0)throw new Error("invalid uint 32: "+t)}function hS(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(!!Number.isFinite(t)&&(t>LK||t<NK))throw new Error("invalid float 32: "+t)}const qT={writeUnknownFields:!0,writerFactory:()=>new FK};function zK(t){return t?Object.assign(Object.assign({},qT),t):qT}class FK{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let i=new Uint8Array(e),r=0;for(let s=0;s<this.chunks.length;s++)i.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,i){return this.uint32((e<<3|i)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Dv(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return up(e),WT(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let i=this.textEncoder.encode(e);return this.uint32(i.byteLength),this.raw(i)}float(e){hS(e);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,e,!0),this.raw(i)}double(e){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),this.raw(i)}fixed32(e){Dv(e);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,e,!0),this.raw(i)}sfixed32(e){up(e);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,e,!0),this.raw(i)}sint32(e){return up(e),e=(e<<1^e>>31)>>>0,WT(e,this.buf),this}sfixed64(e){let i=new Uint8Array(8),r=new DataView(i.buffer),s=At.from(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(i)}fixed64(e){let i=new Uint8Array(8),r=new DataView(i.buffer),s=gr.from(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(i)}int64(e){let i=At.from(e);return Ab(i.lo,i.hi,this.buf),this}sint64(e){let i=At.from(e),r=i.hi>>31,s=i.lo<<1^r,n=(i.hi<<1|i.lo>>>31)^r;return Ab(s,n,this.buf),this}uint64(e){let i=gr.from(e);return Ab(i.lo,i.hi,this.buf),this}}const JT={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},KT={ignoreUnknownFields:!1};function VK(t){return t?Object.assign(Object.assign({},KT),t):KT}function BK(t){return t?Object.assign(Object.assign({},JT),t):JT}const SM=Symbol.for("protobuf-ts/message-type");function QT(t){let e=!1;const i=[];for(let r=0;r<t.length;r++){let s=t.charAt(r);s=="_"?e=!0:/\d/.test(s)?(i.push(s),e=!0):e?(i.push(s.toUpperCase()),e=!1):r==0?i.push(s.toLowerCase()):i.push(s)}return i.join("")}var Q;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Q||(Q={}));var Fn;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(Fn||(Fn={}));var Ov;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(Ov||(Ov={}));function HK(t){var e,i,r,s;return t.localName=(e=t.localName)!==null&&e!==void 0?e:QT(t.name),t.jsonName=(i=t.jsonName)!==null&&i!==void 0?i:QT(t.name),t.repeat=(r=t.repeat)!==null&&r!==void 0?r:Ov.NO,t.opt=(s=t.opt)!==null&&s!==void 0?s:t.repeat||t.oneof?!1:t.kind=="message",t}function WK(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}class GK{constructor(e){var i;this.fields=(i=e.fields)!==null&&i!==void 0?i:[]}prepare(){if(this.data)return;const e=[],i=[],r=[];for(let s of this.fields)if(s.oneof)r.includes(s.oneof)||(r.push(s.oneof),e.push(s.oneof),i.push(s.oneof));else switch(i.push(s.localName),s.kind){case"scalar":case"enum":(!s.opt||s.repeat)&&e.push(s.localName);break;case"message":s.repeat&&e.push(s.localName);break;case"map":e.push(s.localName);break}this.data={req:e,known:i,oneofs:Object.values(r)}}is(e,i,r=!1){if(i<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let s=Object.keys(e),n=this.data;if(s.length<n.req.length||n.req.some(a=>!s.includes(a))||!r&&s.some(a=>!n.known.includes(a)))return!1;if(i<1)return!0;for(const a of n.oneofs){const o=e[a];if(!WK(o))return!1;if(o.oneofKind===void 0)continue;const c=this.fields.find(u=>u.localName===o.oneofKind);if(!c||!this.field(o[o.oneofKind],c,r,i))return!1}for(const a of this.fields)if(a.oneof===void 0&&!this.field(e[a.localName],a,r,i))return!1;return!0}field(e,i,r,s){let n=i.repeat;switch(i.kind){case"scalar":return e===void 0?i.opt:n?this.scalars(e,i.T,s,i.L):this.scalar(e,i.T,i.L);case"enum":return e===void 0?i.opt:n?this.scalars(e,Q.INT32,s):this.scalar(e,Q.INT32);case"message":return e===void 0?!0:n?this.messages(e,i.T(),r,s):this.message(e,i.T(),r,s);case"map":if(typeof e!="object"||e===null)return!1;if(s<2)return!0;if(!this.mapKeys(e,i.K,s))return!1;switch(i.V.kind){case"scalar":return this.scalars(Object.values(e),i.V.T,s,i.V.L);case"enum":return this.scalars(Object.values(e),Q.INT32,s);case"message":return this.messages(Object.values(e),i.V.T(),r,s)}break}return!0}message(e,i,r,s){return r?i.isAssignable(e,s):i.is(e,s)}messages(e,i,r,s){if(!Array.isArray(e))return!1;if(s<2)return!0;if(r){for(let n=0;n<e.length&&n<s;n++)if(!i.isAssignable(e[n],s-1))return!1}else for(let n=0;n<e.length&&n<s;n++)if(!i.is(e[n],s-1))return!1;return!0}scalar(e,i,r){let s=typeof e;switch(i){case Q.UINT64:case Q.FIXED64:case Q.INT64:case Q.SFIXED64:case Q.SINT64:switch(r){case Fn.BIGINT:return s=="bigint";case Fn.NUMBER:return s=="number"&&!isNaN(e);default:return s=="string"}case Q.BOOL:return s=="boolean";case Q.STRING:return s=="string";case Q.BYTES:return e instanceof Uint8Array;case Q.DOUBLE:case Q.FLOAT:return s=="number"&&!isNaN(e);default:return s=="number"&&Number.isInteger(e)}}scalars(e,i,r,s){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e)){for(let n=0;n<e.length&&n<r;n++)if(!this.scalar(e[n],i,s))return!1}return!0}mapKeys(e,i,r){let s=Object.keys(e);switch(i){case Q.INT32:case Q.FIXED32:case Q.SFIXED32:case Q.SINT32:case Q.UINT32:return this.scalars(s.slice(0,r).map(n=>parseInt(n)),i,r);case Q.BOOL:return this.scalars(s.slice(0,r).map(n=>n=="true"?!0:n=="false"?!1:n),i,r);default:return this.scalars(s,i,r,Fn.STRING)}}}function dn(t,e){switch(e){case Fn.BIGINT:return t.toBigInt();case Fn.NUMBER:return t.toNumber();default:return t.toString()}}class qK{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};const i=(e=this.info.fields)!==null&&e!==void 0?e:[];for(const r of i)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(e,i,r){if(!e){let s=uS(r);throw(s=="number"||s=="boolean")&&(s=r.toString()),new Error(`Cannot parse JSON ${s} for ${this.info.typeName}#${i}`)}}read(e,i,r){this.prepare();const s=[];for(const[n,a]of Object.entries(e)){const o=this.fMap[n];if(!o){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${n}`);continue}const c=o.localName;let u;if(o.oneof){if(a===null&&(o.kind!=="enum"||o.T()[0]!=="google.protobuf.NullValue"))continue;if(s.includes(o.oneof))throw new Error(`Multiple members of the oneof group "${o.oneof}" of ${this.info.typeName} are present in JSON.`);s.push(o.oneof),u=i[o.oneof]={oneofKind:c}}else u=i;if(o.kind=="map"){if(a===null)continue;this.assert(CK(a),o.name,a);const l=u[c];for(const[p,m]of Object.entries(a)){this.assert(m!==null,o.name+" map value",null);let y;switch(o.V.kind){case"message":y=o.V.T().internalJsonRead(m,r);break;case"enum":if(y=this.enum(o.V.T(),m,o.name,r.ignoreUnknownFields),y===!1)continue;break;case"scalar":y=this.scalar(m,o.V.T,o.V.L,o.name);break}this.assert(y!==void 0,o.name+" map value",m);let b=p;o.K==Q.BOOL&&(b=b=="true"?!0:b=="false"?!1:b),b=this.scalar(b,o.K,Fn.STRING,o.name).toString(),l[b]=y}}else if(o.repeat){if(a===null)continue;this.assert(Array.isArray(a),o.name,a);const l=u[c];for(const p of a){this.assert(p!==null,o.name,null);let m;switch(o.kind){case"message":m=o.T().internalJsonRead(p,r);break;case"enum":if(m=this.enum(o.T(),p,o.name,r.ignoreUnknownFields),m===!1)continue;break;case"scalar":m=this.scalar(p,o.T,o.L,o.name);break}this.assert(m!==void 0,o.name,a),l.push(m)}}else switch(o.kind){case"message":if(a===null&&o.T().typeName!="google.protobuf.Value"){this.assert(o.oneof===void 0,o.name+" (oneof member)",null);continue}u[c]=o.T().internalJsonRead(a,r,u[c]);break;case"enum":let l=this.enum(o.T(),a,o.name,r.ignoreUnknownFields);if(l===!1)continue;u[c]=l;break;case"scalar":u[c]=this.scalar(a,o.T,o.L,o.name);break}}}enum(e,i,r,s){if(e[0]=="google.protobuf.NullValue"&&ut(i===null||i==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),i===null)return 0;switch(typeof i){case"number":return ut(Number.isInteger(i),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${i}.`),i;case"string":let n=i;e[2]&&i.substring(0,e[2].length)===e[2]&&(n=i.substring(e[2].length));let a=e[1][n];return typeof a>"u"&&s?!1:(ut(typeof a=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${i}".`),a)}ut(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof i}".`)}scalar(e,i,r,s){let n;try{switch(i){case Q.DOUBLE:case Q.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){n="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){n="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let a=Number(e);if(Number.isNaN(a)){n="not a number";break}if(!Number.isFinite(a)){n="too large or small";break}return i==Q.FLOAT&&hS(a),a;case Q.INT32:case Q.FIXED32:case Q.SFIXED32:case Q.SINT32:case Q.UINT32:if(e===null)return 0;let o;if(typeof e=="number"?o=e:e===""?n="empty string":typeof e=="string"&&(e.trim().length!==e.length?n="extra whitespace":o=Number(e)),o===void 0)break;return i==Q.UINT32?Dv(o):up(o),o;case Q.INT64:case Q.SFIXED64:case Q.SINT64:if(e===null)return dn(At.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return dn(At.from(e),r);case Q.FIXED64:case Q.UINT64:if(e===null)return dn(gr.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return dn(gr.from(e),r);case Q.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case Q.STRING:if(e===null)return"";if(typeof e!="string"){n="extra whitespace";break}try{encodeURIComponent(e)}catch(c){c="invalid UTF8";break}return e;case Q.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return PK(e)}}catch(a){n=a.message}this.assert(!1,s+(n?" - "+n:""),e)}}class JK{constructor(e){var i;this.fields=(i=e.fields)!==null&&i!==void 0?i:[]}write(e,i){const r={},s=e;for(const n of this.fields){if(!n.oneof){let u=this.field(n,s[n.localName],i);u!==void 0&&(r[i.useProtoFieldName?n.name:n.jsonName]=u);continue}const a=s[n.oneof];if(a.oneofKind!==n.localName)continue;const o=n.kind=="scalar"||n.kind=="enum"?Object.assign(Object.assign({},i),{emitDefaultValues:!0}):i;let c=this.field(n,a[n.localName],o);ut(c!==void 0),r[i.useProtoFieldName?n.name:n.jsonName]=c}return r}field(e,i,r){let s;if(e.kind=="map"){ut(typeof i=="object"&&i!==null);const n={};switch(e.V.kind){case"scalar":for(const[c,u]of Object.entries(i)){const l=this.scalar(e.V.T,u,e.name,!1,!0);ut(l!==void 0),n[c.toString()]=l}break;case"message":const a=e.V.T();for(const[c,u]of Object.entries(i)){const l=this.message(a,u,e.name,r);ut(l!==void 0),n[c.toString()]=l}break;case"enum":const o=e.V.T();for(const[c,u]of Object.entries(i)){ut(u===void 0||typeof u=="number");const l=this.enum(o,u,e.name,!1,!0,r.enumAsInteger);ut(l!==void 0),n[c.toString()]=l}break}(r.emitDefaultValues||Object.keys(n).length>0)&&(s=n)}else if(e.repeat){ut(Array.isArray(i));const n=[];switch(e.kind){case"scalar":for(let c=0;c<i.length;c++){const u=this.scalar(e.T,i[c],e.name,e.opt,!0);ut(u!==void 0),n.push(u)}break;case"enum":const a=e.T();for(let c=0;c<i.length;c++){ut(i[c]===void 0||typeof i[c]=="number");const u=this.enum(a,i[c],e.name,e.opt,!0,r.enumAsInteger);ut(u!==void 0),n.push(u)}break;case"message":const o=e.T();for(let c=0;c<i.length;c++){const u=this.message(o,i[c],e.name,r);ut(u!==void 0),n.push(u)}break}(r.emitDefaultValues||n.length>0||r.emitDefaultValues)&&(s=n)}else switch(e.kind){case"scalar":s=this.scalar(e.T,i,e.name,e.opt,r.emitDefaultValues);break;case"enum":s=this.enum(e.T(),i,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":s=this.message(e.T(),i,e.name,r);break}return s}enum(e,i,r,s,n,a){if(e[0]=="google.protobuf.NullValue")return!n&&!s?void 0:null;if(i===void 0){ut(s);return}if(!(i===0&&!n&&!s))return ut(typeof i=="number"),ut(Number.isInteger(i)),a||!e[1].hasOwnProperty(i)?i:e[2]?e[2]+e[1][i]:e[1][i]}message(e,i,r,s){return i===void 0?s.emitDefaultValues?null:void 0:e.internalJsonWrite(i,s)}scalar(e,i,r,s,n){if(i===void 0){ut(s);return}const a=n||s;switch(e){case Q.INT32:case Q.SFIXED32:case Q.SINT32:return i===0?a?0:void 0:(up(i),i);case Q.FIXED32:case Q.UINT32:return i===0?a?0:void 0:(Dv(i),i);case Q.FLOAT:hS(i);case Q.DOUBLE:return i===0?a?0:void 0:(ut(typeof i=="number"),Number.isNaN(i)?"NaN":i===Number.POSITIVE_INFINITY?"Infinity":i===Number.NEGATIVE_INFINITY?"-Infinity":i);case Q.STRING:return i===""?a?"":void 0:(ut(typeof i=="string"),i);case Q.BOOL:return i===!1?a?!1:void 0:(ut(typeof i=="boolean"),i);case Q.UINT64:case Q.FIXED64:ut(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let o=gr.from(i);return o.isZero()&&!a?void 0:o.toString();case Q.INT64:case Q.SFIXED64:case Q.SINT64:ut(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let c=At.from(i);return c.isZero()&&!a?void 0:c.toString();case Q.BYTES:return ut(i instanceof Uint8Array),i.byteLength?RK(i):a?"":void 0}}}function Lw(t,e=Fn.STRING){switch(t){case Q.BOOL:return!1;case Q.UINT64:case Q.FIXED64:return dn(gr.ZERO,e);case Q.INT64:case Q.SFIXED64:case Q.SINT64:return dn(At.ZERO,e);case Q.DOUBLE:case Q.FLOAT:return 0;case Q.BYTES:return new Uint8Array(0);case Q.STRING:return"";default:return 0}}class KK{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const i=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(i.map(r=>[r.no,r]))}}read(e,i,r,s){this.prepare();const n=s===void 0?e.len:e.pos+s;for(;e.pos<n;){const[a,o]=e.tag(),c=this.fieldNoToField.get(a);if(!c){let m=r.readUnknownField;if(m=="throw")throw new Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let y=e.skip(o);m!==!1&&(m===!0?Av.onRead:m)(this.info.typeName,i,a,o,y);continue}let u=i,l=c.repeat,p=c.localName;switch(c.oneof&&(u=u[c.oneof],u.oneofKind!==p&&(u=i[c.oneof]={oneofKind:p})),c.kind){case"scalar":case"enum":let m=c.kind=="enum"?Q.INT32:c.T,y=c.kind=="scalar"?c.L:void 0;if(l){let E=u[p];if(o==mi.LengthDelimited&&m!=Q.STRING&&m!=Q.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)E.push(this.scalar(e,m,y))}else E.push(this.scalar(e,m,y))}else u[p]=this.scalar(e,m,y);break;case"message":if(l){let E=u[p],k=c.T().internalBinaryRead(e,e.uint32(),r);E.push(k)}else u[p]=c.T().internalBinaryRead(e,e.uint32(),r,u[p]);break;case"map":let[b,S]=this.mapEntry(c,e,r);u[p][b]=S;break}}}mapEntry(e,i,r){let s=i.uint32(),n=i.pos+s,a,o;for(;i.pos<n;){let[c,u]=i.tag();switch(c){case 1:e.K==Q.BOOL?a=i.bool().toString():a=this.scalar(i,e.K,Fn.STRING);break;case 2:switch(e.V.kind){case"scalar":o=this.scalar(i,e.V.T,e.V.L);break;case"enum":o=i.int32();break;case"message":o=e.V.T().internalBinaryRead(i,i.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${u}) in map entry for ${this.info.typeName}#${e.name}`)}}if(a===void 0){let c=Lw(e.K);a=e.K==Q.BOOL?c.toString():c}if(o===void 0)switch(e.V.kind){case"scalar":o=Lw(e.V.T,e.V.L);break;case"enum":o=0;break;case"message":o=e.V.T().create();break}return[a,o]}scalar(e,i,r){switch(i){case Q.INT32:return e.int32();case Q.STRING:return e.string();case Q.BOOL:return e.bool();case Q.DOUBLE:return e.double();case Q.FLOAT:return e.float();case Q.INT64:return dn(e.int64(),r);case Q.UINT64:return dn(e.uint64(),r);case Q.FIXED64:return dn(e.fixed64(),r);case Q.FIXED32:return e.fixed32();case Q.BYTES:return e.bytes();case Q.UINT32:return e.uint32();case Q.SFIXED32:return e.sfixed32();case Q.SFIXED64:return dn(e.sfixed64(),r);case Q.SINT32:return e.sint32();case Q.SINT64:return dn(e.sint64(),r)}}}class QK{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((i,r)=>i.no-r.no)}}write(e,i,r){this.prepare();for(const n of this.fields){let a,o,c=n.repeat,u=n.localName;if(n.oneof){const l=e[n.oneof];if(l.oneofKind!==u)continue;a=l[u],o=!0}else a=e[u],o=!1;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?Q.INT32:n.T;if(c)if(ut(Array.isArray(a)),c==Ov.PACKED)this.packed(i,l,n.no,a);else for(const p of a)this.scalar(i,l,n.no,p,!0);else a===void 0?ut(n.opt):this.scalar(i,l,n.no,a,o||n.opt);break;case"message":if(c){ut(Array.isArray(a));for(const p of a)this.message(i,r,n.T(),n.no,p)}else this.message(i,r,n.T(),n.no,a);break;case"map":ut(typeof a=="object"&&a!==null);for(const[p,m]of Object.entries(a))this.mapEntry(i,r,n,p,m);break}}let s=r.writeUnknownFields;s!==!1&&(s===!0?Av.onWrite:s)(this.info.typeName,e,i)}mapEntry(e,i,r,s,n){e.tag(r.no,mi.LengthDelimited),e.fork();let a=s;switch(r.K){case Q.INT32:case Q.FIXED32:case Q.UINT32:case Q.SFIXED32:case Q.SINT32:a=Number.parseInt(s);break;case Q.BOOL:ut(s=="true"||s=="false"),a=s=="true";break}switch(this.scalar(e,r.K,1,a,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,n,!0);break;case"enum":this.scalar(e,Q.INT32,2,n,!0);break;case"message":this.message(e,i,r.V.T(),2,n);break}e.join()}message(e,i,r,s,n){n!==void 0&&(r.internalBinaryWrite(n,e.tag(s,mi.LengthDelimited).fork(),i),e.join())}scalar(e,i,r,s,n){let[a,o,c]=this.scalarInfo(i,s);(!c||n)&&(e.tag(r,a),e[o](s))}packed(e,i,r,s){if(!s.length)return;ut(i!==Q.BYTES&&i!==Q.STRING),e.tag(r,mi.LengthDelimited),e.fork();let[,n]=this.scalarInfo(i);for(let a=0;a<s.length;a++)e[n](s[a]);e.join()}scalarInfo(e,i){let r=mi.Varint,s,n=i===void 0,a=i===0;switch(e){case Q.INT32:s="int32";break;case Q.STRING:a=n||!i.length,r=mi.LengthDelimited,s="string";break;case Q.BOOL:a=i===!1,s="bool";break;case Q.UINT32:s="uint32";break;case Q.DOUBLE:r=mi.Bit64,s="double";break;case Q.FLOAT:r=mi.Bit32,s="float";break;case Q.INT64:a=n||At.from(i).isZero(),s="int64";break;case Q.UINT64:a=n||gr.from(i).isZero(),s="uint64";break;case Q.FIXED64:a=n||gr.from(i).isZero(),r=mi.Bit64,s="fixed64";break;case Q.BYTES:a=n||!i.byteLength,r=mi.LengthDelimited,s="bytes";break;case Q.FIXED32:r=mi.Bit32,s="fixed32";break;case Q.SFIXED32:r=mi.Bit32,s="sfixed32";break;case Q.SFIXED64:a=n||At.from(i).isZero(),r=mi.Bit64,s="sfixed64";break;case Q.SINT32:s="sint32";break;case Q.SINT64:a=n||At.from(i).isZero(),s="sint64";break}return[r,s,n||a]}}function YK(t){const e=t.messagePrototype?Object.create(t.messagePrototype):Object.defineProperty({},SM,{value:t});for(let i of t.fields){let r=i.localName;if(!i.opt)if(i.oneof)e[i.oneof]={oneofKind:void 0};else if(i.repeat)e[r]=[];else switch(i.kind){case"scalar":e[r]=Lw(i.T,i.L);break;case"enum":e[r]=0;break;case"map":e[r]={};break}}return e}function Mb(t,e,i){let r,s=i,n;for(let a of t.fields){let o=a.localName;if(a.oneof){const c=s[a.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(r=c[o],n=e[a.oneof],n.oneofKind=c.oneofKind,r==null){delete n[o];continue}}else if(r=s[o],n=e,r==null)continue;switch(a.repeat&&(n[o].length=r.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let u=0;u<r.length;u++)n[o][u]=r[u];else n[o]=r;break;case"message":let c=a.T();if(a.repeat)for(let u=0;u<r.length;u++)n[o][u]=c.create(r[u]);else n[o]===void 0?n[o]=c.create(r):c.mergePartial(n[o],r);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(n[o],r);break;case"message":let u=a.V.T();for(let l of Object.keys(r))n[o][l]=u.create(r[l]);break}break}}}function ZK(t,e,i){if(e===i)return!0;if(!e||!i)return!1;for(let r of t.fields){let s=r.localName,n=r.oneof?e[r.oneof][s]:e[s],a=r.oneof?i[r.oneof][s]:i[s];switch(r.kind){case"enum":case"scalar":let o=r.kind=="enum"?Q.INT32:r.T;if(!(r.repeat?YT(o,n,a):xM(o,n,a)))return!1;break;case"map":if(!(r.V.kind=="message"?ZT(r.V.T(),hm(n),hm(a)):YT(r.V.kind=="enum"?Q.INT32:r.V.T,hm(n),hm(a))))return!1;break;case"message":let c=r.T();if(!(r.repeat?ZT(c,n,a):c.equals(n,a)))return!1;break}}return!0}const hm=Object.values;function xM(t,e,i){if(e===i)return!0;if(t!==Q.BYTES)return!1;let r=e,s=i;if(r.length!==s.length)return!1;for(let n=0;n<r.length;n++)if(r[n]!=s[n])return!1;return!0}function YT(t,e,i){if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!xM(t,e[r],i[r]))return!1;return!0}function ZT(t,e,i){if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!t.equals(e[r],i[r]))return!1;return!0}class ${constructor(e,i,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=i.map(HK),this.options=r!=null?r:{},this.messagePrototype=Object.defineProperty({},SM,{value:this}),this.refTypeCheck=new GK(this),this.refJsonReader=new qK(this),this.refJsonWriter=new JK(this),this.refBinReader=new KK(this),this.refBinWriter=new QK(this)}create(e){let i=YK(this);return e!==void 0&&Mb(this,i,e),i}clone(e){let i=this.create();return Mb(this,i,e),i}equals(e,i){return ZK(this,e,i)}is(e,i=this.defaultCheckDepth){return this.refTypeCheck.is(e,i,!1)}isAssignable(e,i=this.defaultCheckDepth){return this.refTypeCheck.is(e,i,!0)}mergePartial(e,i){Mb(this,e,i)}fromBinary(e,i){let r=DK(i);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,i){return this.internalJsonRead(e,VK(i))}fromJsonString(e,i){let r=JSON.parse(e);return this.fromJson(r,i)}toJson(e,i){return this.internalJsonWrite(e,BK(i))}toJsonString(e,i){var r;let s=this.toJson(e,i);return JSON.stringify(s,null,(r=i==null?void 0:i.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(e,i){let r=zK(i);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,i,r){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let s=r!=null?r:this.create();return this.refJsonReader.read(e,s,i),s}throw new Error(`Unable to parse message ${this.typeName} from JSON ${uS(e)}.`)}internalJsonWrite(e,i){return this.refJsonWriter.write(e,i)}internalBinaryWrite(e,i,r){return this.refBinWriter.write(e,i,r),i}internalBinaryRead(e,i,r,s){let n=s!=null?s:this.create();return this.refBinReader.read(e,n,r,i),n}}var sd={},Oy={},Nw={exports:{}},Db,XT;function XK(){if(XT)return Db;XT=1;var t=1e3,e=t*60,i=e*60,r=i*24,s=r*7,n=r*365.25;Db=function(l,p){p=p||{};var m=typeof l;if(m==="string"&&l.length>0)return a(l);if(m==="number"&&isFinite(l))return p.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(!!p){var m=parseFloat(p[1]),y=(p[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return m*n;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*i;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(l){var p=Math.abs(l);return p>=r?Math.round(l/r)+"d":p>=i?Math.round(l/i)+"h":p>=e?Math.round(l/e)+"m":p>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var p=Math.abs(l);return p>=r?u(l,p,r,"day"):p>=i?u(l,p,i,"hour"):p>=e?u(l,p,e,"minute"):p>=t?u(l,p,t,"second"):l+" ms"}function u(l,p,m,y){var b=p>=m*1.5;return Math.round(l/m)+" "+y+(b?"s":"")}return Db}function eQ(t){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=s,i.enabled=a,i.humanize=XK(),i.destroy=u,Object.keys(t).forEach(l=>{i[l]=t[l]}),i.names=[],i.skips=[],i.formatters={};function e(l){let p=0;for(let m=0;m<l.length;m++)p=(p<<5)-p+l.charCodeAt(m),p|=0;return i.colors[Math.abs(p)%i.colors.length]}i.selectColor=e;function i(l){let p,m=null,y,b;function S(...E){if(!S.enabled)return;const k=S,T=Number(new Date),I=T-(p||T);k.diff=I,k.prev=p,k.curr=T,p=T,E[0]=i.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let O=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(B,Y)=>{if(B==="%%")return"%";O++;const X=i.formatters[Y];if(typeof X=="function"){const be=E[O];B=X.call(k,be),E.splice(O,1),O--}return B}),i.formatArgs.call(k,E),(k.log||i.log).apply(k,E)}return S.namespace=l,S.useColors=i.useColors(),S.color=i.selectColor(l),S.extend=r,S.destroy=i.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==i.namespaces&&(y=i.namespaces,b=i.enabled(l)),b),set:E=>{m=E}}),typeof i.init=="function"&&i.init(S),S}function r(l,p){const m=i(this.namespace+(typeof p>"u"?":":p)+l);return m.log=this.log,m}function s(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let p;const m=(typeof l=="string"?l:"").split(/[\s,]+/),y=m.length;for(p=0;p<y;p++)!m[p]||(l=m[p].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function n(){const l=[...i.names.map(o),...i.skips.map(o).map(p=>"-"+p)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let p,m;for(p=0,m=i.skips.length;p<m;p++)if(i.skips[p].test(l))return!1;for(p=0,m=i.names.length;p<m;p++)if(i.names[p].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var tQ=eQ;(function(t,e){e.formatArgs=r,e.save=s,e.load=n,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let l=0,p=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(l++,m==="%c"&&(p=l))}),c.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function n(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=tQ(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Nw,Nw.exports);Object.defineProperty(Oy,"__esModule",{value:!0});Oy.Logger=void 0;const Fd=Nw.exports,Vd="awaitqueue";class iQ{constructor(e){e?(this._debug=(0,Fd.default)(`${Vd}:${e}`),this._warn=(0,Fd.default)(`${Vd}:WARN:${e}`),this._error=(0,Fd.default)(`${Vd}:ERROR:${e}`)):(this._debug=(0,Fd.default)(Vd),this._warn=(0,Fd.default)(`${Vd}:WARN`),this._error=(0,Fd.default)(`${Vd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Oy.Logger=iQ;Object.defineProperty(sd,"__esModule",{value:!0});var Lv=sd.AwaitQueue=sd.AwaitQueueRemovedTaskError=sd.AwaitQueueStoppedError=void 0;const rQ=Oy,Ga=new rQ.Logger;class Ly extends Error{constructor(e){super(e!=null?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ly)}}sd.AwaitQueueStoppedError=Ly;class Ny extends Error{constructor(e){super(e!=null?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ny)}}sd.AwaitQueueRemovedTaskError=Ny;class sQ{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,i){if(i=i!=null?i:e.name,Ga.debug(`push() [name:${i}]`),typeof e!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(e,"name",{value:i})}catch{}return new Promise((r,s)=>{const n={id:this.nextTaskId++,task:e,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),Ga.debug(`resolving task [name:${n.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),Ga.debug(`rejecting task [name:${n.name}]: %s`,String(a)),s(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){Ga.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())Ga.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new Ly);this.stopping=!1}remove(e){Ga.debug(`remove() [taskIdx:${e}]`);const i=Array.from(this.pendingTasks.values())[e];if(!i){Ga.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}i.reject(new Ny)}dump(){const e=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0}))}async execute(e){if(Ga.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const i=await e.task();e.resolve(i)}catch(i){e.reject(i)}}}Lv=sd.AwaitQueue=sQ;const Wn=Object.create(null);Wn.open="0";Wn.close="1";Wn.ping="2";Wn.pong="3";Wn.message="4";Wn.upgrade="5";Wn.noop="6";const Zm=Object.create(null);Object.keys(Wn).forEach(t=>{Zm[Wn[t]]=t});const nQ={type:"error",data:"parser error"},aQ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",oQ=typeof ArrayBuffer=="function",cQ=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,EM=({type:t,data:e},i,r)=>aQ&&e instanceof Blob?i?r(e):eC(e,r):oQ&&(e instanceof ArrayBuffer||cQ(e))?i?r(e):eC(new Blob([e]),r):r(Wn[t]+(e||"")),eC=(t,e)=>{const i=new FileReader;return i.onload=function(){const r=i.result.split(",")[1];e("b"+(r||""))},i.readAsDataURL(t)},tC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<tC.length;t++)Oh[tC.charCodeAt(t)]=t;const dQ=t=>{let e=t.length*.75,i=t.length,r,s=0,n,a,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),l=new Uint8Array(u);for(r=0;r<i;r+=4)n=Oh[t.charCodeAt(r)],a=Oh[t.charCodeAt(r+1)],o=Oh[t.charCodeAt(r+2)],c=Oh[t.charCodeAt(r+3)],l[s++]=n<<2|a>>4,l[s++]=(a&15)<<4|o>>2,l[s++]=(o&3)<<6|c&63;return u},lQ=typeof ArrayBuffer=="function",TM=(t,e)=>{if(typeof t!="string")return{type:"message",data:CM(t,e)};const i=t.charAt(0);return i==="b"?{type:"message",data:uQ(t.substring(1),e)}:Zm[i]?t.length>1?{type:Zm[i],data:t.substring(1)}:{type:Zm[i]}:nQ},uQ=(t,e)=>{if(lQ){const i=dQ(t);return CM(i,e)}else return{base64:!0,data:t}},CM=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},PM=String.fromCharCode(30),hQ=(t,e)=>{const i=t.length,r=new Array(i);let s=0;t.forEach((n,a)=>{EM(n,!1,o=>{r[a]=o,++s===i&&e(r.join(PM))})})},pQ=(t,e)=>{const i=t.split(PM),r=[];for(let s=0;s<i.length;s++){const n=TM(i[s],e);if(r.push(n),n.type==="error")break}return r},RM=4;function Di(t){if(t)return gQ(t)}function gQ(t){for(var e in Di.prototype)t[e]=Di.prototype[e];return t}Di.prototype.on=Di.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Di.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this};Di.prototype.off=Di.prototype.removeListener=Di.prototype.removeAllListeners=Di.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return i.length===0&&delete this._callbacks["$"+t],this};Di.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,s=i.length;r<s;++r)i[r].apply(this,e)}return this};Di.prototype.emitReserved=Di.prototype.emit;Di.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Di.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ts=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function IM(t,...e){return e.reduce((i,r)=>(t.hasOwnProperty(r)&&(i[r]=t[r]),i),{})}const mQ=Ts.setTimeout,fQ=Ts.clearTimeout;function Uy(t,e){e.useNativeTimers?(t.setTimeoutFn=mQ.bind(Ts),t.clearTimeoutFn=fQ.bind(Ts)):(t.setTimeoutFn=Ts.setTimeout.bind(Ts),t.clearTimeoutFn=Ts.clearTimeout.bind(Ts))}const vQ=1.33;function yQ(t){return typeof t=="string"?bQ(t):Math.ceil((t.byteLength||t.size)*vQ)}function bQ(t){let e=0,i=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(r++,i+=4);return i}class wQ extends Error{constructor(e,i,r){super(e),this.description=i,this.context=r,this.type="TransportError"}}class AM extends Di{constructor(e){super(),this.writable=!1,Uy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,i,r){return super.emitReserved("error",new wQ(e,i,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const i=TM(e,this.socket.binaryType);this.onPacket(i)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const MM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Uw=64,kQ={};let iC=0,pm=0,rC;function sC(t){let e="";do e=MM[t%Uw]+e,t=Math.floor(t/Uw);while(t>0);return e}function DM(){const t=sC(+new Date);return t!==rC?(iC=0,rC=t):t+"."+sC(iC++)}for(;pm<Uw;pm++)kQ[MM[pm]]=pm;function OM(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}function _Q(t){let e={},i=t.split("&");for(let r=0,s=i.length;r<s;r++){let n=i[r].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}let LM=!1;try{LM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const SQ=LM;function NM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||SQ))return new XMLHttpRequest}catch{}if(!e)try{return new Ts[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function xQ(){}const EQ=function(){return new NM({xdomain:!1}).responseType!=null}();class TQ extends AM{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==r}const i=e&&e.forceBase64;this.supportsBinary=EQ&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const i=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||i()})),this.writable||(r++,this.once("drain",function(){--r||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const i=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};pQ(e,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,hQ(e,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const i=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=DM()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const s=OM(e),n=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(s.length?"?"+s:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Vn(this.uri(),e)}doWrite(e,i){const r=this.request({method:"POST",data:e});r.on("success",i),r.on("error",(s,n)=>{this.onError("xhr post error",s,n)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(i,r)=>{this.onError("xhr poll error",i,r)}),this.pollXhr=e}}class Vn extends Di{constructor(e,i){super(),Uy(this,i),this.opts=i,this.method=i.method||"GET",this.uri=e,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const e=IM(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const i=this.xhr=new NM(e);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Vn.requestsCount++,Vn.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=xQ,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Vn.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Vn.requestsCount=0;Vn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",nC);else if(typeof addEventListener=="function"){const t="onpagehide"in Ts?"pagehide":"unload";addEventListener(t,nC,!1)}}function nC(){for(let t in Vn.requests)Vn.requests.hasOwnProperty(t)&&Vn.requests[t].abort()}const UM=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,i)=>i(e,0))(),gm=Ts.WebSocket||Ts.MozWebSocket,aC=!0,CQ="arraybuffer",oC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class PQ extends AM{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),i=this.opts.protocols,r=oC?{}:IM(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=aC&&!oC?i?new gm(e,i):new gm(e):new gm(e,i,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType||CQ,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const r=e[i],s=i===e.length-1;EM(r,this.supportsBinary,n=>{const a={};try{aC&&this.ws.send(n)}catch{}s&&UM(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const i=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=DM()),this.supportsBinary||(e.b64=1);const s=OM(e),n=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(s.length?"?"+s:"")}check(){return!!gm}}const RQ={websocket:PQ,polling:TQ},IQ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,AQ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jw(t){const e=t,i=t.indexOf("["),r=t.indexOf("]");i!=-1&&r!=-1&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));let s=IQ.exec(t||""),n={},a=14;for(;a--;)n[AQ[a]]=s[a]||"";return i!=-1&&r!=-1&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=MQ(n,n.path),n.queryKey=DQ(n,n.query),n}function MQ(t,e){const i=/\/{2,9}/g,r=e.replace(i,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function DQ(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,n){s&&(i[s]=n)}),i}class _o extends Di{constructor(e,i={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(i=e,e=null),e?(e=jw(e),i.hostname=e.host,i.secure=e.protocol==="https"||e.protocol==="wss",i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=jw(i.host).host),Uy(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=_Q(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const i=Object.assign({},this.opts.query);i.EIO=RM,i.transport=e,this.id&&(i.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new RQ[e](r)}open(){let e;if(this.opts.rememberUpgrade&&_o.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(e){let i=this.createTransport(e),r=!1;_o.priorWebsocketSuccess=!1;const s=()=>{r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;_o.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=i.name,this.emitReserved("upgradeError",m)}}))};function n(){r||(r=!0,l(),i.close(),i=null)}const a=p=>{const m=new Error("probe error: "+p);m.transport=i.name,n(),this.emitReserved("upgradeError",m)};function o(){a("transport closed")}function c(){a("socket closed")}function u(p){i&&p.name!==i.name&&n()}const l=()=>{i.removeListener("open",s),i.removeListener("error",a),i.removeListener("close",o),this.off("close",c),this.off("upgrading",u)};i.once("open",s),i.once("error",a),i.once("close",o),this.once("close",c),this.once("upgrading",u),i.open()}onOpen(){if(this.readyState="open",_o.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const i=this.upgrades.length;for(;e<i;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=e.data,this.onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(i+=yQ(s)),r>0&&i>this.maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}write(e,i,r){return this.sendPacket("message",e,i,r),this}send(e,i,r){return this.sendPacket("message",e,i,r),this}sendPacket(e,i,r,s){if(typeof i=="function"&&(s=i,i=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const n={type:e,data:i,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){_o.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const i=[];let r=0;const s=e.length;for(;r<s;r++)~this.transports.indexOf(e[r])&&i.push(e[r]);return i}}_o.protocol=RM;function OQ(t,e="",i){let r=t;i=i||typeof location<"u"&&location,t==null&&(t=i.protocol+"//"+i.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=i.protocol+t:t=i.host+t),/^(https?|wss?):\/\//.test(t)||(typeof i<"u"?t=i.protocol+"//"+t:t="https://"+t),r=jw(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const n=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+n+":"+r.port+e,r.href=r.protocol+"://"+n+(i&&i.port===r.port?"":":"+r.port),r}const LQ=typeof ArrayBuffer=="function",NQ=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,jM=Object.prototype.toString,UQ=typeof Blob=="function"||typeof Blob<"u"&&jM.call(Blob)==="[object BlobConstructor]",jQ=typeof File=="function"||typeof File<"u"&&jM.call(File)==="[object FileConstructor]";function pS(t){return LQ&&(t instanceof ArrayBuffer||NQ(t))||UQ&&t instanceof Blob||jQ&&t instanceof File}function Xm(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let i=0,r=t.length;i<r;i++)if(Xm(t[i]))return!0;return!1}if(pS(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Xm(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Xm(t[i]))return!0;return!1}function $Q(t){const e=[],i=t.data,r=t;return r.data=$w(i,e),r.attachments=e.length,{packet:r,buffers:e}}function $w(t,e){if(!t)return t;if(pS(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}else if(Array.isArray(t)){const i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=$w(t[r],e);return i}else if(typeof t=="object"&&!(t instanceof Date)){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=$w(t[r],e));return i}return t}function zQ(t,e){return t.data=zw(t.data,e),delete t.attachments,t}function zw(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=zw(t[i],e);else if(typeof t=="object")for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=zw(t[i],e));return t}const FQ=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],VQ=5;var it;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(it||(it={}));class BQ{constructor(e){this.replacer=e}encode(e){return(e.type===it.EVENT||e.type===it.ACK)&&Xm(e)?this.encodeAsBinary({type:e.type===it.EVENT?it.BINARY_EVENT:it.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let i=""+e.type;return(e.type===it.BINARY_EVENT||e.type===it.BINARY_ACK)&&(i+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(i+=e.nsp+","),e.id!=null&&(i+=e.id),e.data!=null&&(i+=JSON.stringify(e.data,this.replacer)),i}encodeAsBinary(e){const i=$Q(e),r=this.encodeAsString(i.packet),s=i.buffers;return s.unshift(r),s}}function cC(t){return Object.prototype.toString.call(t)==="[object Object]"}class gS extends Di{constructor(e){super(),this.reviver=e}add(e){let i;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(e);const r=i.type===it.BINARY_EVENT;r||i.type===it.BINARY_ACK?(i.type=r?it.EVENT:it.ACK,this.reconstructor=new HQ(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(pS(e)||e.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(e),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let i=0;const r={type:Number(e.charAt(0))};if(it[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===it.BINARY_EVENT||r.type===it.BINARY_ACK){const n=i+1;for(;e.charAt(++i)!=="-"&&i!=e.length;);const a=e.substring(n,i);if(a!=Number(a)||e.charAt(i)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(i+1)==="/"){const n=i+1;for(;++i&&!(e.charAt(i)===","||i===e.length););r.nsp=e.substring(n,i)}else r.nsp="/";const s=e.charAt(i+1);if(s!==""&&Number(s)==s){const n=i+1;for(;++i;){const a=e.charAt(i);if(a==null||Number(a)!=a){--i;break}if(i===e.length)break}r.id=Number(e.substring(n,i+1))}if(e.charAt(++i)){const n=this.tryParse(e.substr(i));if(gS.isPayloadValid(r.type,n))r.data=n;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,i){switch(e){case it.CONNECT:return cC(i);case it.DISCONNECT:return i===void 0;case it.CONNECT_ERROR:return typeof i=="string"||cC(i);case it.EVENT:case it.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&FQ.indexOf(i[0])===-1);case it.ACK:case it.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class HQ{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const i=zQ(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const WQ=Object.freeze(Object.defineProperty({__proto__:null,protocol:VQ,get PacketType(){return it},Encoder:BQ,Decoder:gS},Symbol.toStringTag,{value:"Module"}));function en(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const GQ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $M extends Di{constructor(e,i,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=i,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[en(e,"open",this.onopen.bind(this)),en(e,"packet",this.onpacket.bind(this)),en(e,"error",this.onerror.bind(this)),en(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...i){if(GQ.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:it.EVENT,data:i};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const a=this.ids++,o=i.pop();this._registerAckCallback(a,o),r.id=a}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,i){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=i;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(n),i.apply(this,[null,...a])}}emitWithAck(e,...i){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((s,n)=>{i.push((a,o)=>r?a?n(a):s(o):s(a)),this.emit(e,...i)})}_addToQueue(e){let i;typeof e[e.length-1]=="function"&&(i=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...n)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(s)):(this._queue.shift(),i&&i(null,...n)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!e||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:it.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,i)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case it.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case it.EVENT:case it.BINARY_EVENT:this.onevent(e);break;case it.ACK:case it.BINARY_ACK:this.onack(e);break;case it.DISCONNECT:this.ondisconnect();break;case it.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const i=e.data||[];e.id!=null&&i.push(this.ack(e.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const r of i)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const i=this;let r=!1;return function(...s){r||(r=!0,i.packet({type:it.ACK,id:e,data:s}))}}onack(e){const i=this.acks[e.id];typeof i=="function"&&(i.apply(this,e.data),delete this.acks[e.id])}onconnect(e,i){this.id=e,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:it.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const i=this._anyListeners;for(let r=0;r<i.length;r++)if(e===i[r])return i.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const i=this._anyOutgoingListeners;for(let r=0;r<i.length;r++)if(e===i[r])return i.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const r of i)r.apply(this,e.data)}}}function Su(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Su.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-i:t+i}return Math.min(t,this.max)|0};Su.prototype.reset=function(){this.attempts=0};Su.prototype.setMin=function(t){this.ms=t};Su.prototype.setMax=function(t){this.max=t};Su.prototype.setJitter=function(t){this.jitter=t};class Fw extends Di{constructor(e,i){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,Uy(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((r=i.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Su({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=e;const s=i.parser||WQ;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var i;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(i=this.backoff)===null||i===void 0||i.setMin(e),this)}randomizationFactor(e){var i;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(i=this.backoff)===null||i===void 0||i.setJitter(e),this)}reconnectionDelayMax(e){var i;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(i=this.backoff)===null||i===void 0||i.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new _o(this.uri,this.opts);const i=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=en(i,"open",function(){r.onopen(),e&&e()}),n=en(i,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),e?e(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&s();const o=this.setTimeoutFn(()=>{s(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(s),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(en(e,"ping",this.onping.bind(this)),en(e,"data",this.ondata.bind(this)),en(e,"error",this.onerror.bind(this)),en(e,"close",this.onclose.bind(this)),en(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(i){this.onclose("parse error",i)}}ondecoded(e){UM(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,i){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new $M(this,e,i),this.nsps[e]=r),r}_destroy(e){const i=Object.keys(this.nsps);for(const r of i)if(this.nsps[r].active)return;this._close()}_packet(e){const i=this.encoder.encode(e);for(let r=0;r<i.length;r++)this.engine.write(i[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},i);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const oh={};function ef(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const i=OQ(t,e.path||"/socket.io"),r=i.source,s=i.id,n=i.path,a=oh[s]&&n in oh[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new Fw(r,e):(oh[s]||(oh[s]=new Fw(r,e)),c=oh[s]),i.query&&!e.query&&(e.query=i.queryKey),c.socket(i.path,e)}Object.assign(ef,{Manager:Fw,Socket:$M,io:ef,connect:ef});const qQ=t=>(e,i)=>(t.set(e,i),i),dC=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,zM=536870912,lC=zM*2,JQ=(t,e)=>i=>{const r=e.get(i);let s=r===void 0?i.size:r<lC?r+1:0;if(!i.has(s))return t(i,s);if(i.size<zM){for(;i.has(s);)s=Math.floor(Math.random()*lC);return t(i,s)}if(i.size>dC)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(s);)s=Math.floor(Math.random()*dC);return t(i,s)},FM=new WeakMap,KQ=qQ(FM),mm=JQ(KQ,FM),QQ=t=>t.method!==void 0&&t.method==="call",YQ=t=>t.error===null&&typeof t.id=="number",ZQ=t=>{const e=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),r=new Map,s=new Worker(t);return s.addEventListener("message",({data:u})=>{if(QQ(u)){const{params:{timerId:l,timerType:p}}=u;if(p==="interval"){const m=e.get(l);if(typeof m=="number"){const y=r.get(m);if(y===void 0||y.timerId!==l||y.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof m<"u")m();else throw new Error("The timer is in an undefined state.")}else if(p==="timeout"){const m=i.get(l);if(typeof m=="number"){const y=r.get(m);if(y===void 0||y.timerId!==l||y.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof m<"u")m(),i.delete(l);else throw new Error("The timer is in an undefined state.")}}else if(YQ(u)){const{id:l}=u,p=r.get(l);if(p===void 0)throw new Error("The timer is in an undefined state.");const{timerId:m,timerType:y}=p;r.delete(l),y==="interval"?e.delete(m):i.delete(m)}else{const{error:{message:l}}=u;throw new Error(l)}}),{clearInterval:u=>{const l=mm(r);r.set(l,{timerId:u,timerType:"interval"}),e.set(u,l),s.postMessage({id:l,method:"clear",params:{timerId:u,timerType:"interval"}})},clearTimeout:u=>{const l=mm(r);r.set(l,{timerId:u,timerType:"timeout"}),i.set(u,l),s.postMessage({id:l,method:"clear",params:{timerId:u,timerType:"timeout"}})},setInterval:(u,l)=>{const p=mm(e);return e.set(p,()=>{u(),typeof e.get(p)=="function"&&s.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:p,timerType:"interval"}})}),s.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:p,timerType:"interval"}}),p},setTimeout:(u,l)=>{const p=mm(i);return i.set(p,u),s.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:p,timerType:"timeout"}}),p}}},XQ=(t,e)=>{let i=null;return()=>{if(i!==null)return i;const r=new Blob([e],{type:"application/javascript; charset=utf-8"}),s=URL.createObjectURL(r);return i=t(s),setTimeout(()=>URL.revokeObjectURL(s)),i}},eY=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,VM=XQ(ZQ,eY),BM=t=>VM().clearInterval(t),HM=(t,e)=>VM().setInterval(t,e);var tY=Object.defineProperty,iY=(t,e,i)=>e in t?tY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,w=(t,e,i)=>(iY(t,typeof e!="symbol"?e+"":e,i),i),mS=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},h=(t,e,i)=>(mS(t,e,"read from private field"),i?i.call(t):e.get(t)),N=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},L=(t,e,i,r)=>(mS(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),qe=(t,e,i)=>(mS(t,e,"access private method"),i),Ee;(function(t){t[t.MAJOR_EVENT=0]="MAJOR_EVENT",t[t.MINOR_EVENT=1]="MINOR_EVENT"})(Ee||(Ee={}));var ne;(function(t){t.PRECALL_TEST_BEGIN="precall_begin",t.PRECALL_TEST_COMPLETE="precall_end",t.CALL_JOIN_BEGIN="call_join",t.NET_QUALITY_TEST_BEGIN="net_quality_test_begin",t.NET_QUALITY_TEST_END="net_quality_test_end",t.WEBSOCKET_CONNECTED="websocket_connected",t.TRANSPORT_CONNECTED="transport_connected",t.AUDIO_ON="audio_on",t.AUDIO_OFF="audio_off",t.VIDEO_ON="video_on",t.VIDEO_OFF="video_off",t.PARTICIPANT_ROLE="participant_role",t.PING_STAT="ping_stat",t.DISCONNECT="disconnect",t.RECONNECT_ATTEMPT="reconnect_attempt",t.SCREENSHARE_START_REQUESTED="screenshare_start_requested",t.SCREENSHARE_STARTED="screenshare_started",t.SCREENSHARE_STOPPED="screenshare_stopped",t.TAB_CHANGE="tab_change",t.BROWSER_BACKGROUNDED="browser_backgrounded",t.BROWSER_FOREGROUNDED="browser_foregrounded",t.DOMINANT_SPEAKER="dominant_speaker",t.AUDIO_DEVICES_UPDATES="audio_devices_updates",t.VIDEO_DEVICES_UPDATES="video_devices_updates",t.SPEAKER_DEVICES_UPDATES="speaker_devices_updates",t.SELECTED_MICROHPONE_UPDATE="selected_microphone_update",t.SELECTED_CAMERA_UPDATE="selected_camera_update",t.SELECTED_SPEAKER_UPDATE="selected_speaker_update",t.MEDIA_PERMISSION="camera_permission",t.LEGACY_SWITCH="legacy_switch",t.AUDIO_PLAY_FAILED="audio_play_failed",t.VIDEO_PLAY_FAILED="video_play_failed",t.AUDIO_TRACK_MUTED="audio_track_muted",t.VIDEO_TRACK_MUTED="video_track_muted",t.IVS_PLAYER_REBUFFERING="ivs_player_rebuffering",t.IVS_PLAYER_AUDIO_BLOCKED="ivs_player_audio_blocked",t.IVS_PLAYER_PLAYBACK_BLOCKED="ivs_player_playback_blocked",t.IVS_PLAYER_ERROR="ivs_player_error",t.IVS_PLAYER_RECOVERABLE_ERROR="ivs_player_recoverable_error",t.IVS_PLAYER_WORKER_ERROR="ivs_player_worker_error",t.IVS_PLAYER_NETWORK_UNAVAILABLE="ivs_player_network_unavailable",t.LIVESTREAM_LATENCY="livestream_latency",t.IVS_PLAYER_ANALYTICS_EVENT="ivs_player_analytics_event",t.IVS_PLAYER_PLAYBACK_RATE_CHANGED="ivs_player_playback_rate_changed",t.IVS_PLAYER_QUALITY_CHANGED="ivs_player_quality_changed",t.IVS_PLAYER_INITIALIZED="ivs_player_initialized"})(ne||(ne={}));const rY=new Map([[ne.PRECALL_TEST_BEGIN,Ee.MINOR_EVENT],[ne.PRECALL_TEST_COMPLETE,Ee.MINOR_EVENT],[ne.CALL_JOIN_BEGIN,Ee.MAJOR_EVENT],[ne.NET_QUALITY_TEST_BEGIN,Ee.MINOR_EVENT],[ne.NET_QUALITY_TEST_END,Ee.MINOR_EVENT],[ne.WEBSOCKET_CONNECTED,Ee.MINOR_EVENT],[ne.TRANSPORT_CONNECTED,Ee.MAJOR_EVENT],[ne.AUDIO_ON,Ee.MINOR_EVENT],[ne.AUDIO_OFF,Ee.MINOR_EVENT],[ne.VIDEO_ON,Ee.MINOR_EVENT],[ne.VIDEO_OFF,Ee.MINOR_EVENT],[ne.PARTICIPANT_ROLE,Ee.MINOR_EVENT],[ne.PING_STAT,Ee.MAJOR_EVENT],[ne.DISCONNECT,Ee.MAJOR_EVENT],[ne.RECONNECT_ATTEMPT,Ee.MAJOR_EVENT],[ne.SCREENSHARE_START_REQUESTED,Ee.MINOR_EVENT],[ne.SCREENSHARE_STARTED,Ee.MINOR_EVENT],[ne.SCREENSHARE_STOPPED,Ee.MINOR_EVENT],[ne.TAB_CHANGE,Ee.MINOR_EVENT],[ne.BROWSER_BACKGROUNDED,Ee.MINOR_EVENT],[ne.BROWSER_FOREGROUNDED,Ee.MINOR_EVENT],[ne.DOMINANT_SPEAKER,Ee.MINOR_EVENT],[ne.AUDIO_DEVICES_UPDATES,Ee.MINOR_EVENT],[ne.VIDEO_DEVICES_UPDATES,Ee.MINOR_EVENT],[ne.SPEAKER_DEVICES_UPDATES,Ee.MINOR_EVENT],[ne.SELECTED_MICROHPONE_UPDATE,Ee.MINOR_EVENT],[ne.SELECTED_CAMERA_UPDATE,Ee.MINOR_EVENT],[ne.SELECTED_SPEAKER_UPDATE,Ee.MINOR_EVENT],[ne.MEDIA_PERMISSION,Ee.MINOR_EVENT],[ne.LEGACY_SWITCH,Ee.MINOR_EVENT],[ne.AUDIO_PLAY_FAILED,Ee.MINOR_EVENT],[ne.VIDEO_PLAY_FAILED,Ee.MINOR_EVENT],[ne.AUDIO_TRACK_MUTED,Ee.MINOR_EVENT],[ne.VIDEO_TRACK_MUTED,Ee.MINOR_EVENT],[ne.IVS_PLAYER_REBUFFERING,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_AUDIO_BLOCKED,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_PLAYBACK_BLOCKED,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_ERROR,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_RECOVERABLE_ERROR,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_WORKER_ERROR,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_NETWORK_UNAVAILABLE,Ee.MAJOR_EVENT],[ne.LIVESTREAM_LATENCY,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_ANALYTICS_EVENT,Ee.MINOR_EVENT],[ne.IVS_PLAYER_PLAYBACK_RATE_CHANGED,Ee.MINOR_EVENT],[ne.IVS_PLAYER_QUALITY_CHANGED,Ee.MINOR_EVENT],[ne.IVS_PLAYER_INITIALIZED,Ee.MINOR_EVENT]]);var Vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={},sY={get exports(){return Er},set exports(t){Er=t}},Bl=typeof Reflect=="object"?Reflect:null,uC=Bl&&typeof Bl.apply=="function"?Bl.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},tf;Bl&&typeof Bl.ownKeys=="function"?tf=Bl.ownKeys:Object.getOwnPropertySymbols?tf=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:tf=function(t){return Object.getOwnPropertyNames(t)};function nY(t){console&&console.warn&&console.warn(t)}var WM=Number.isNaN||function(t){return t!==t};function kt(){kt.init.call(this)}sY.exports=kt;Er.once=dY;kt.EventEmitter=kt;kt.prototype._events=void 0;kt.prototype._eventsCount=0;kt.prototype._maxListeners=void 0;var hC=10;function jy(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kt,"defaultMaxListeners",{enumerable:!0,get:function(){return hC},set:function(t){if(typeof t!="number"||t<0||WM(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");hC=t}});kt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||WM(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function GM(t){return t._maxListeners===void 0?kt.defaultMaxListeners:t._maxListeners}kt.prototype.getMaxListeners=function(){return GM(this)};kt.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=s[t];if(o===void 0)return!1;if(typeof o=="function")uC(o,this,e);else for(var c=o.length,u=YM(o,c),i=0;i<c;++i)uC(u[i],this,e);return!0};function qM(t,e,i,r){var s,n,a;if(jy(i),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),a=n[e]),a===void 0)a=n[e]=i,++t._eventsCount;else if(typeof a=="function"?a=n[e]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),s=GM(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,nY(o)}return t}kt.prototype.addListener=function(t,e){return qM(this,t,e,!1)};kt.prototype.on=kt.prototype.addListener;kt.prototype.prependListener=function(t,e){return qM(this,t,e,!0)};function aY(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function JM(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=aY.bind(r);return s.listener=i,r.wrapFn=s,s}kt.prototype.once=function(t,e){return jy(e),this.on(t,JM(this,t,e)),this};kt.prototype.prependOnceListener=function(t,e){return jy(e),this.prependListener(t,JM(this,t,e)),this};kt.prototype.removeListener=function(t,e){var i,r,s,n,a;if(jy(e),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){a=i[n].listener,s=n;break}if(s<0)return this;s===0?i.shift():oY(i,s),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};kt.prototype.off=kt.prototype.removeListener;kt.prototype.removeAllListeners=function(t){var e,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),n;for(r=0;r<s.length;++r)n=s[r],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function KM(t,e,i){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?i?[s.listener||s]:[s]:i?cY(s):YM(s,s.length)}kt.prototype.listeners=function(t){return KM(this,t,!0)};kt.prototype.rawListeners=function(t){return KM(this,t,!1)};kt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):QM.call(t,e)};kt.prototype.listenerCount=QM;function QM(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}kt.prototype.eventNames=function(){return this._eventsCount>0?tf(this._events):[]};function YM(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function oY(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function cY(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function dY(t,e){return new Promise(function(i,r){function s(a){t.removeListener(e,n),r(a)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",s),i([].slice.call(arguments))}ZM(t,e,n,{once:!0}),e!=="error"&&lY(t,s,{once:!0})})}function lY(t,e,i){typeof t.on=="function"&&ZM(t,"error",e,i)}function ZM(t,e,i,r){if(typeof t.on=="function")r.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(n){r.once&&t.removeEventListener(e,s),i(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var pC;(function(t){t.CHROMIUM="chromum",t.FIREFOX="firefox",t.SAFARI="safari"})(pC||(pC={}));var Bp;(function(t){t.DEV="dev",t.STAGING="staging",t.PRODUCTION="production"})(Bp||(Bp={}));var Ss;(function(t){t.AUDIO="AUDIO",t.VIDEO="VIDEO",t.SPEAKER="SPEAKER"})(Ss||(Ss={}));var Po;(function(t){t[t.INIT=0]="INIT",t[t.ACCEPTED=1]="ACCEPTED",t[t.DENIED=2]="DENIED",t[t.SYS_DENIED=3]="SYS_DENIED",t[t.FAILED=4]="FAILED",t[t.NOTFOUND=5]="NOTFOUND",t[t.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(Po||(Po={}));class uY{constructor(){w(this,"events"),this.events=[]}add(e){this.events.push(e)}flush(){return{entries:this.events.splice(0,25)}}}class hY extends Er{constructor({logger:e,peerId:i,env:r}){super(),w(this,"logger"),w(this,"peerId"),w(this,"eventStore"),w(this,"apiEndpoint"),this.logger=e,this.peerId=i,r===Bp.PRODUCTION?this.apiEndpoint="https://collector.prod.da.dyte.io/api/v1/message":this.apiEndpoint="https://collector.non-prod.da.dyte.io/api/v1/message",this.eventStore=new uY}async sendEventsChunkToServer(e){var i;const r={payload:e,peerId:this.peerId};try{return await fetch(this.apiEndpoint,{method:"POST",body:JSON.stringify(r)}),!0}catch(s){return this.logger.error("callStats::sendEventsChunkToServer::catch",{error:s}),(i=e.entries)==null||i.forEach(n=>{this.eventStore.add(n)}),!1}}callEvent(e){e.timestamp=new Date,this.eventStore.add(e),this.emit(e.event,e.metaData),rY.get(e.event)===Ee.MAJOR_EVENT&&this.flush()}async flush(){var e;const i=this.eventStore.flush();return(e=i==null?void 0:i.entries)!=null&&e.length?(await this.sendEventsChunkToServer(i),!0):!1}}class Oa{constructor(e){w(this,"pc1"),w(this,"pc2"),w(this,"constrainVideoBitrateKbps"),w(this,"constrainOfferToRemoveVideoFec",!1),w(this,"iceCandidateFilter");const i=new RTCPeerConnection(e),r=new RTCPeerConnection(e);this.pc1=i,this.pc2=r,this.iceCandidateFilter=Oa.noFilter,this.pc1.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc1))}static parseCandidate(e){const i="candidate:",r=e.indexOf(i)+i.length,s=e.substr(r).split(" ");return{type:s[7],protocol:s[2],address:s[4]}}static isNotHostCandidate(e){return e.type!=="host"}static isHost(e){return e.type==="host"}static isRelay(e){return e.type==="relay"}static isReflexive(e){return e.type==="srflx"}static noFilter(e){return!0}onIceCandidate(e,i){if(i.candidate){const r=Oa.parseCandidate(i.candidate.candidate);this.iceCandidateFilter(r)&&e.addIceCandidate(i.candidate)}}setIceCandidateFilter(e){this.iceCandidateFilter=e}constrainVideoBitrate(e){this.constrainVideoBitrateKbps=e}disableVideoFec(){this.constrainOfferToRemoveVideoFec=!0}gotOffer(e){this.constrainOfferToRemoveVideoFec&&(e.sdp=e.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),e.sdp=e.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(e),this.pc2.setRemoteDescription(e),this.pc2.createAnswer().then(this.gotAnswer.bind(this),this.reportFatal.bind(this))}gotAnswer(e){this.constrainVideoBitrateKbps&&(e.sdp=e.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${this.constrainVideoBitrateKbps}\r
`)),this.pc2.setLocalDescription(e),this.pc1.setRemoteDescription(e)}establishConnection(){this.pc1.createOffer().then(this.gotOffer.bind(this),this.reportFatal.bind(this))}reportFatal(e){console.error("Error:",e)}async getRoundTripTime(){const[e,i]=await Promise.all([this.pc1.getStats(),this.pc2.getStats()]);let r,s;if(e.forEach(n=>{n.type==="candidate-pair"&&n.nominated===!0&&n.bytesSent>0&&(r=n)}),i.forEach(n=>{n.type==="candidate-pair"&&n.nominated===!0&&n.bytesReceived>0&&(s=n)}),r&&s)try{if(r.currentRoundTripTime&&s.currentRoundTripTime)return{rtt:r.currentRoundTripTime,backendRTT:s.currentRoundTripTime};const n=(s.lastPacketReceivedTimestamp-r.lastPacketSentTimestamp)/1e3;return{rtt:n,backendRTT:n}}catch{return}}close(){this.pc1.close(),this.pc2.close()}}class XM extends Er{constructor(e){super(),w(this,"call"),w(this,"timeOut"),this.call=new Oa(e)}start(e=1e4){this.call.establishConnection(),this.timeOut=setTimeout(this.testFailed.bind(this),e)}testComplete(e){clearTimeout(this.timeOut),this.call.close(),this.emit("done",e)}testFailed(e){console.warn("Test failed, ",e),this.call.close(),this.emit("failed",e)}}const pY=8,gY=1/1e3;class mY extends XM{constructor(e){super(e),w(this,"senderChannel"),w(this,"recieveChannel"),w(this,"startTime"),w(this,"lastBitrateMeasureTime"),w(this,"sentPayloadBytes",0),w(this,"recievedPayloadBytes",0),w(this,"lastReceivedPayloadBytes",0),w(this,"stopSending",!1),w(this,"testProgress",0),w(this,"samplePacket",""),w(this,"finalBitrateSum",0),w(this,"bitRateSampels",0),w(this,"maxNumberOfPacketsToSend",0),w(this,"bytesToKeepBuffered",0),w(this,"testDurationSeconds",5),this.call.setIceCandidateFilter(Oa.isNotHostCandidate),this.senderChannel=this.call.pc1.createDataChannel(null);for(let i=0;i<1024*256;i+=1)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.testDurationSeconds=4,this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onRecieverChannel.bind(this))}sendingStep(){const e=new Date;this.startTime||(this.startTime=e,this.lastBitrateMeasureTime=e);for(let r=0;r!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);r+=1){this.sentPayloadBytes+=this.samplePacket.length;try{this.senderChannel.send(this.samplePacket)}catch{}}const i=e.getTime()-this.startTime.getTime();i>=1e3*this.testDurationSeconds?(this.stopSending=!0,this.testProgress=100):(this.testProgress=i/(10*this.testDurationSeconds),setTimeout(this.sendingStep.bind(this),1))}onMessageRecieved(e){this.recievedPayloadBytes+=e.data.length;const i=new Date,r=i.getTime()-this.lastBitrateMeasureTime.getTime();if(r>=1e3){const s=(this.recievedPayloadBytes-this.lastReceivedPayloadBytes)*pY/(r/1e3);this.finalBitrateSum+=s,this.bitRateSampels+=1,this.lastReceivedPayloadBytes=this.recievedPayloadBytes,this.lastBitrateMeasureTime=i}if(this.stopSending&&this.sentPayloadBytes===this.recievedPayloadBytes){const s=this.finalBitrateSum/this.bitRateSampels;this.testComplete({throughput:Math.round(s*gY)})}}testComplete(e){this.call.getRoundTripTime().then(({rtt:i,backendRTT:r})=>super.testComplete({RTT:i,backendRTT:r,throughput:e.throughput}))}onRecieverChannel(e){this.recieveChannel=e.channel,this.recieveChannel.addEventListener("message",this.onMessageRecieved.bind(this))}}class fS extends XM{constructor(e,i=Oa.noFilter){super(e),w(this,"ch1"),w(this,"ch2"),this.call.setIceCandidateFilter(i);const r=this.call.pc1.createDataChannel(null);this.ch1=r,r.addEventListener("open",()=>{r.send("hello")}),r.addEventListener("message",this.onCh1Recieve.bind(this)),this.call.pc2.addEventListener("datachannel",this.dataChannelHandler.bind(this))}onCh1Recieve(e){e.data!=="world"?this.hangup("Invalid data transmitted."):this.testComplete({connectivity:!0})}onCh2Recieve(e){if(e.data!=="hello")this.hangup("Invalid data transmitted.");else try{this.ch2.send("world")}catch{}}dataChannelHandler(e){const i=e.channel;this.ch2=i,i.addEventListener("message",this.onCh2Recieve.bind(this))}hangup(e){this.testFailed(e)}}class fY extends fS{constructor(e){super(e,Oa.isHost)}}class vY extends fS{constructor(e){super(e,Oa.isRelay)}}class yY extends fS{constructor(e){super(e,Oa.isReflexive)}}class bY{constructor(){w(this,"ipInformation",null)}async getIPDetails({peerId:e}){var i;if(!this.ipInformation){try{const s=await(await fetch("https://media-location.dyte.io")).json();if(((i=s.loc)==null?void 0:i.length)>5)return this.ipInformation=s,s;throw Error("Insufficient data")}catch{}const r=await fetch(`https://location-service.dyte.io/?token=3c493932b0624c&peerId=${e}`,{method:"POST"});this.ipInformation=await r.json()}return this.ipInformation}}const vS=new bY,gC=[{urls:"turn:turn.dyte.in:443?transport=tcp",username:"dyte",credential:"dytein",credentialType:"password"},{urls:"turn:turn.dyte.in:3478?transport=udp",username:"dyte",credential:"dytein",credentialType:"password"}];function wY(t){const[e,i]=t.split(",");return{coords:{latitude:Number(e),longitude:Number(i)}}}class eD{constructor(){w(this,"transport"),w(this,"candidatePair"),w(this,"outboundVideoRtp",new Map),w(this,"inboundVideoRtp",new Map),w(this,"outboundAudioRtp",new Map),w(this,"inboundAudioRtp",new Map),w(this,"remoteInboundRtp",new Map),w(this,"producerStreamMap",new Map),w(this,"consumerStreamMap",new Map),w(this,"staleProducerStreamMap",!1),w(this,"staleConsumerStreamMap",!1)}}class tD{constructor(){w(this,"outboundProducerMap",new Map),w(this,"inboundConsumerMap",new Map),w(this,"consumerPeerIdMap",new Map),w(this,"overallProducingTransportsStatsMap",{}),w(this,"overallConsumingTransportsStatsMap",{}),w(this,"overallConsumersStatsMap",{}),w(this,"overallProducersStatsMap",{}),w(this,"consumerIdsWithFreezedVideo",new Set),w(this,"consumerIdsWithFreezedAudio",new Set),w(this,"producerIdsWithFreezedVideo",new Set),w(this,"producerIdsWithFreezedAudio",new Set),w(this,"freezedProducingTransportIds",new Set),w(this,"freezedConsumingTransportIds",new Set),w(this,"ipDetails"),w(this,"callStatsInstance")}async registerProducer(e){await this.generateProducerStreamMap(e),e.observer.on("close",this.deregisterProducer.bind(this,e))}processInboundConsumerVideoStats(e,i,r){var s,n;const a=((n=(s=this==null?void 0:this.callStatsInstance)==null?void 0:s.consumerSharedMediaStatesMap)==null?void 0:n.get(e))||{};i.totalVideoPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedVideo.add(e),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoFreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_video_status","pause",e))):(i.totalVideoPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedVideo.has(e)&&(this.consumerIdsWithFreezedVideo.delete(e),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoDefreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_video_status","resume",e))))}processInboundConsumerAudioStats(e,i,r){var s,n;const a=((n=(s=this==null?void 0:this.callStatsInstance)==null?void 0:s.consumerSharedMediaStatesMap)==null?void 0:n.get(e))||{};i.totalAudioPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedAudio.add(e),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioFreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","pause",e))):(i.totalAudioPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedAudio.has(e)&&(this.consumerIdsWithFreezedAudio.delete(e),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioDefreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","resume",e))))}processOutboundProducerVideoStats(e,i,r){var s;const n=((s=this==null?void 0:this.callStatsInstance)==null?void 0:s.currentUserMediaStates)||{};i.totalVideoPacketsSent===r.packetsSent?(this.producerIdsWithFreezedVideo.add(e),this.callStatsInstance&&n.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoFreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_video_status","pause",e))):(i.totalVideoPacketsSent=r.packetsSent,this.producerIdsWithFreezedVideo.has(e)&&(this.producerIdsWithFreezedVideo.delete(e),this.callStatsInstance&&n.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoDefreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_video_status","resume",e))))}processOutboundProducerAudioStats(e,i,r){var s;const n=((s=this==null?void 0:this.callStatsInstance)==null?void 0:s.currentUserMediaStates)||{};i.totalAudioPacketsSent===r.packetsSent?(this.producerIdsWithFreezedAudio.add(e),this.callStatsInstance&&n.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioFreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_audio_status","pause",e))):(i.totalAudioPacketsSent=r.packetsSent,this.producerIdsWithFreezedAudio.has(e)&&(this.producerIdsWithFreezedAudio.delete(e),this.callStatsInstance&&n.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioDefreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_audio_status","resume",e))))}processProducingTransportStats(e,i,r){var s;const n=((s=this==null?void 0:this.callStatsInstance)==null?void 0:s.currentUserMediaStates)||{},{audio:a,video:o,screen:c}=n,u=a||o||c;i.totalPacketsSent===r.packetsSent?(this.freezedProducingTransportIds.add(e),this.callStatsInstance&&u&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportFreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("producing_transport_status","pause",e))):(i.totalPacketsSent=r.packetsSent,this.freezedProducingTransportIds.has(e)&&(this.freezedProducingTransportIds.delete(e),this.callStatsInstance&&u&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportDefreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("producing_transport_status","resume",e))))}processConsumingTransportStats(e,i,r){var s,n;const a=!!Array.from(((n=(s=this==null?void 0:this.callStatsInstance)==null?void 0:s.consumerSharedMediaStatesMap)==null?void 0:n.values())||[]).reduce((o,c)=>o||c.audio||c.video||c.screen,!1);i.totalPacketsReceived===r.packetsSent?(this.freezedConsumingTransportIds.add(e),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportFreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","pause",e))):(i.totalPacketsReceived=r.packetsSent,this.freezedConsumingTransportIds.has(e)&&(this.freezedConsumingTransportIds.delete(e),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportDefreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","resume",e))))}async registerConsumer(e){await this.generateConsumerStreamMap(e),this.consumerPeerIdMap.set(e.id,{producerId:e.producerId,peerId:e.appData.peerId,appData:e.appData}),e.observer.on("close",this.deregisterConsumer.bind(this,e))}async generateProducerStreamMap(e,i=!1){const r=await e.getStats(),s=i?this.getProducerStatsFromReport(this.parseRTCReport(r,["outbound-rtp","remote-inbound-rtp"],!1,e.id))[0]:void 0;for(const n of r.values())switch(n.type){case"outbound-rtp":{this.outboundProducerMap.set(n.id,e.id);break}}return s}async generateConsumerStreamMap(e,i=!1){const r=await e.getStats(),s=i?this.getConsumerStatsFromReport(this.parseRTCReport(r,["inbound-rtp"],!1,e.id))[0]:void 0;for(const n of r.values())switch(n.type){case"inbound-rtp":{this.inboundConsumerMap.set(n.id,e.id);break}}return s}deregisterProducer(e){this.outboundProducerMap.forEach((i,r)=>{i===e.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(e){this.inboundConsumerMap.forEach((i,r)=>{i===e.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(e.id)}parseRTCReport(e,i=[],r=!1,s=void 0,n=void 0){const a=e,o=new eD,c=i.length?new Set(i):void 0;for(const u of a.values()){if(c){if(c.size===0)break;if(c.has(u.type))r&&c.delete(u.type);else continue}switch(u.type){case"candidate-pair":{if(u.nominated===!0||u.selected===!0){const l=u,p={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=p;break}break}case"transport":{const l=u;n&&(n.producing&&(this.overallProducingTransportsStatsMap[n.id]||(this.overallProducingTransportsStatsMap[n.id]={totalPacketsSent:0})),n.consuming&&(this.overallConsumingTransportsStatsMap[n.id]||(this.overallConsumingTransportsStatsMap[n.id]={totalPacketsReceived:0})));const p={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=p,n){if(n.producing){const m=this.overallProducingTransportsStatsMap[n.id];this.processProducingTransportStats(n.id,m,p)}if(n.consuming){const m=this.overallConsumingTransportsStatsMap[n.id];this.processConsumingTransportStats(n.id,m,p)}}break}case"remote-inbound-rtp":{const l=u,p={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,p);break}case"outbound-rtp":{const l=u,p=s||this.outboundProducerMap.get(u.id);this.overallProducersStatsMap[p]||(this.overallProducersStatsMap[p]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const m=this.overallProducersStatsMap[p];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(u.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(p)||o.producerStreamMap.set(p,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const y={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,S={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesEncoded:b.framesEncoded,framesDropped:b.framesDropped,framesPerSecond:b.framesPerSecond,framesSent:b.framesSent,keyFramesEncoded:b.keyFramesEncoded,firCount:b.firCount,encoderImplementation:b.encoderImplementation,hugeFramesSent:b.hugeFramesSent,pliCount:b.pliCount,qpSum:b.qpSum,qualityLimitationDurations:b.qualityLimitationDurations,qualityLimitationReason:b.qualityLimitationReason,qualityLimitationResolutionChanges:b.qualityLimitationResolutionChanges,totalEncodeTime:b.targetBitrate,totalPacketSendDelay:b.totalPacketSendDelay,retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundVideoRtp.set(u.id,S),o.producerStreamMap.get(p).outboundVideoRtpId.push(u.id),this.processOutboundProducerVideoStats(p,m,S)}else if(l.mediaType==="audio"){const b=l,S={retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundAudioRtp.set(u.id,S),o.producerStreamMap.get(p).outboundAudioRtpId.push(u.id),this.processOutboundProducerAudioStats(p,m,S)}}break}case"inbound-rtp":{const l=u,p=s||this.inboundConsumerMap.get(u.id);if(l.ssrc===1234)break;this.overallConsumersStatsMap[p]||(this.overallConsumersStatsMap[p]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const m=this.overallConsumersStatsMap[p];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(u.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(p)||o.consumerStreamMap.set(p,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const y={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,S={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesDecoded:b.framesDecoded,framesDropped:b.framesDropped,framesPerSecond:b.framesPerSecond,framesReceived:b.framesReceived,keyFramesDecoded:b.keyFramesDecoded,firCount:b.firCount,decoderImplementation:b.decoderImplementation,...y};o.inboundVideoRtp.set(u.id,S),o.consumerStreamMap.get(p).inboundVideoRtpId.push(u.id),this.processInboundConsumerVideoStats(p,m,S)}else if(l.mediaType==="audio"){const b=l,S={audioLevel:b.audioLevel,concealedSampels:b.concealedSampels,concealmentEvents:b.concealmentEvents,jitterBufferDelay:b.jitterBufferDelay,jitterBufferEmittedCount:b.jitterBufferEmittedCount,totalAudioEnergy:b.totalAudioEnergy,totalSamplesDuration:b.totalSamplesDuration,totalSamplesReceived:b.totalSamplesReceived,...y};o.inboundAudioRtp.set(u.id,S),o.consumerStreamMap.get(p).inboundAudioRtpId.push(u.id),this.processInboundConsumerAudioStats(p,m,S)}}break}}}if(o.outboundVideoRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let u=0,l=0;o.remoteInboundRtp.forEach((p,m)=>{p.roundTripTime&&p.roundTripTime>u&&(u=p.roundTripTime,l=p.totalRoundTripTime)}),o.transport.roundTripTime=u,o.transport.totalRoundTripTime=l}return o}async getProducersReport(e){const i=e.map(r=>this.generateProducerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getConsumersReport(e){const i=e.map(r=>this.generateConsumerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getTransportReport(e){return e.getStats()}async getProcessedStats(e,i,r){const s=await this.getTransportReport(e),n={producing:r,consuming:i,id:e.id},a=s,o=this.parseRTCReport(a,["transport","candidate-pair","inbound-rtp","outbound-rtp","remote-inbound-rtp"],!1,void 0,n);if(!o)return;const c={stats:o.transport,transportId:e.id,consuming:i,producing:r},u=o.staleProducerStreamMap?void 0:this.getProducerStatsFromReport(o),l=o.staleConsumerStreamMap?void 0:this.getConsumerStatsFromReport(o);return{transportReport:c,producerReport:u,consumerReport:l}}getProducerStatsFromReport(e){const i=[];try{e.producerStreamMap.forEach((r,s)=>{var n,a;i.push({producerId:s,videoStats:r.outboundVideoRtpId.map(o=>e.outboundVideoRtp.get(o)),audioStats:r.outboundAudioRtpId.map(o=>e.outboundAudioRtp.get(o)),appData:((a=(n=this.callStatsInstance.producers)==null?void 0:n.get(s))==null?void 0:a.appData)||null})})}catch(r){this.callStatsInstance.logger.error("callStats::measurements::getProducerStatsFromReport",{error:{reason:r.reason,message:r.message}})}return i}getConsumerStatsFromReport(e){const i=[];try{e.consumerStreamMap.forEach((r,s)=>{const{peerId:n,producerId:a,appData:o}=this.consumerPeerIdMap.get(s);i.push({consumerId:s,peerId:n,producerId:a,appData:o,videoStats:r.inboundVideoRtpId.map(c=>e.inboundVideoRtp.get(c)),audioStats:r.inboundAudioRtpId.map(c=>e.inboundAudioRtp.get(c))})})}catch(r){console.error("getConsumersReport: ",r,e)}return i}async getUserLocation(){return new Promise((e,i)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{e(r)}):i()}catch(r){i(r)}})}async getConnectivity(e){try{const i={iceServers:e||gC},r=new Promise((u,l)=>{try{const p=new fY(i);p.addListener("done",u),p.addListener("failed",()=>{u({connectivity:!1})}),p.start(2e3)}catch(p){l(p)}}),s=new Promise((u,l)=>{try{const p=new vY(i);p.addListener("done",u),p.addListener("failed",()=>{u({connectivity:!1})}),p.start(2e3)}catch(p){l(p)}}),n=new Promise((u,l)=>{try{const p=new yY(i);p.addListener("done",u),p.addListener("failed",()=>{u({connectivity:!1})}),p.start(2e3)}catch(p){l(p)}}),[a,o,c]=await Promise.all([r,s,n]);return{host:a==null?void 0:a.connectivity,relay:o==null?void 0:o.connectivity,reflexive:c==null?void 0:c.connectivity}}catch{return{host:!1,relay:!1,reflexive:!1}}}async getThroughput(e){try{const i=await new Promise((r,s)=>{try{const n={iceServers:e||gC},a=new mY(n);a.addListener("done",r),a.addListener("failed",s),a.start(1e4)}catch(n){s(n)}});return{throughput:i.throughput,fractionalLoss:0,RTT:i.RTT,jitter:0,backendRTT:i.backendRTT}}catch{return}}async getIPDetails(){var e;try{return this.ipDetails||(this.ipDetails=await vS.getIPDetails({peerId:(e=this.callStatsInstance)==null?void 0:e.peerId})),this.ipDetails}catch{return}}async getNetworkQuality(e){const[i,r]=await Promise.all([this.getConnectivity(e),this.getThroughput(e)]);return{connectivity:i,throughput:r==null?void 0:r.throughput,fractionalLoss:r==null?void 0:r.fractionalLoss,RTT:r==null?void 0:r.RTT,jitter:r==null?void 0:r.jitter,backendRTT:r==null?void 0:r.backendRTT}}async getNetworkInfo(e){var i;const[r,s,n]=await Promise.all([this.getConnectivity(e),this.getThroughput(e),this.getIPDetails()]);return{ipDetails:n,effectiveNetworkType:(i=navigator.connection)==null?void 0:i.effectiveType,location:n.loc?wY(n.loc):void 0,turnConnectivity:r?r.host||r.relay||r.reflexive:!1,connectivity:r,throughput:s==null?void 0:s.throughput,fractionalLoss:s==null?void 0:s.fractionalLoss,RTT:s==null?void 0:s.RTT,jitter:s==null?void 0:s.jitter,backendRTT:s==null?void 0:s.backendRTT}}}class kY extends tD{}class iD extends tD{constructor(){super(...arguments),w(this,"producerMap",new Map),w(this,"consumerMap",new Map)}async registerProducer(e){this.producerMap.set(e.id,e),await this.generateProducerStreamMap(e),e.observer.on("close",this.deregisterProducer.bind(this,e))}async registerConsumer(e){this.consumerMap.set(e.id,e),await this.generateConsumerStreamMap(e),this.consumerPeerIdMap.set(e.id,{producerId:e.producerId,peerId:e.appData.peerId,appData:e.appData}),e.observer.on("close",this.deregisterConsumer.bind(this,e))}async generateConsumerStreamMap(e,i=!1){const r=await e.getStats(),s=this.parseRTCReport(r,["inbound-rtp"],!1,e.id),n=[...s.consumerStreamMap.values()][0],a=i?this.getConsumerStatsFromParsedConsumerStats(s,n,e.id):void 0;for(const o of r.values())switch(o.type){case"inbound-rtp":{this.inboundConsumerMap.set(o.id,e.id);break}}return a}deregisterProducer(e){this.producerMap.delete(e.id),this.outboundProducerMap.forEach((i,r)=>{i===e.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(e){this.consumerMap.delete(e.id),this.inboundConsumerMap.forEach((i,r)=>{i===e.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(e.id)}parseRTCReport(e,i=[],r=!1,s=void 0,n=void 0){const a=e,o=new eD,c=i.length?new Set(i):void 0;for(const u of a.values()){if(c){if(c.size===0)break;if(c.has(u.type))r&&c.delete(u.type);else continue}switch(u.type){case"candidate-pair":{if(u.nominated===!0||u.selected===!0){const l=u,p={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=p;break}break}case"transport":{const l=u;n&&(n.producing&&(this.overallProducingTransportsStatsMap[n.id]||(this.overallProducingTransportsStatsMap[n.id]={totalPacketsSent:0})),n.consuming&&(this.overallConsumingTransportsStatsMap[n.id]||(this.overallConsumingTransportsStatsMap[n.id]={totalPacketsReceived:0})));const p={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=p,n){if(n.producing){const m=this.overallProducingTransportsStatsMap[n.id];this.processProducingTransportStats(n.id,m,p)}if(n.consuming){const m=this.overallConsumingTransportsStatsMap[n.id];this.processConsumingTransportStats(n.id,m,p)}}break}case"remote-inbound-rtp":{const l=u,p={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,p);break}case"outbound-rtp":{const l=u,p=s||this.outboundProducerMap.get(u.id);this.overallProducersStatsMap[p]||(this.overallProducersStatsMap[p]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const m=this.overallProducersStatsMap[p];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(u.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(p)||o.producerStreamMap.set(p,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const y={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,S={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesEncoded:b.framesEncoded,framesDropped:b.framesDropped?b.framesDropped:b.droppedFrames,framesPerSecond:b.framesPerSecond?b.framesPerSecond:b.framerateMean,framesSent:b.framesSent,keyFramesEncoded:b.keyFramesEncoded,firCount:b.firCount,encoderImplementation:b.encoderImplementation,hugeFramesSent:b.hugeFramesSent,pliCount:b.pliCount,qpSum:b.qpSum,qualityLimitationReason:b.qualityLimitationReason,qualityLimitationDurations:b.qualityLimitationDurations,qualityLimitationResolutionChanges:b.qualityLimitationResolutionChanges,totalEncodeTime:b.totalEncodeTime,totalPacketSendDelay:b.totalEncodeTime,retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundVideoRtp.set(u.id,S),o.producerStreamMap.get(p).outboundVideoRtpId.push(u.id),this.processOutboundProducerVideoStats(p,m,S)}else if(l.mediaType==="audio"){const b=l,S={retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundAudioRtp.set(u.id,S),o.producerStreamMap.get(p).outboundAudioRtpId.push(u.id),this.processOutboundProducerAudioStats(p,m,S)}}break}case"inbound-rtp":{const l=u,p=s||this.inboundConsumerMap.get(u.id);this.overallConsumersStatsMap[p]||(this.overallConsumersStatsMap[p]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const m=this.overallConsumersStatsMap[p];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(u.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(p)||o.consumerStreamMap.set(p,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const y={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,S={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesDecoded:b.framesDecoded,framesDropped:b.framesDropped?b.framesDropped:b.droppedFrames,framesPerSecond:b.framesPerSecond?b.framesPerSecond:b.framerateMean,framesReceived:b.framesReceived,keyFramesDecoded:b.keyFramesDecoded,firCount:b.firCount,decoderImplementation:b.decoderImplementation,...y};o.inboundVideoRtp.set(u.id,S),o.consumerStreamMap.get(p).inboundVideoRtpId.push(u.id),this.processInboundConsumerVideoStats(p,m,S)}else if(l.mediaType==="audio"){const b=l,S={audioLevel:b.audioLevel,concealedSampels:b.concealedSampels,concealmentEvents:b.concealmentEvents,jitterBufferDelay:b.jitterBufferDelay,jitterBufferEmittedCount:b.jitterBufferEmittedCount,totalAudioEnergy:b.totalAudioEnergy,totalSamplesDuration:b.totalSamplesDuration,totalSamplesReceived:b.totalSamplesReceived,...y};o.inboundAudioRtp.set(u.id,S),o.consumerStreamMap.get(p).inboundAudioRtpId.push(u.id),this.processInboundConsumerAudioStats(p,m,S)}}break}}}if(o.outboundVideoRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.bytesReceived=o.candidatePair.bytesReceived,o.transport.bytesSent=o.candidatePair.bytesSent,o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let u=0,l=0;o.remoteInboundRtp.forEach((p,m)=>{p.roundTripTime&&p.roundTripTime>u&&(u=p.roundTripTime,l=p.totalRoundTripTime)}),o.transport.roundTripTime=u,o.transport.totalRoundTripTime=l}return o}getProducerStatsFromReport(e){const i=[];try{e.producerStreamMap.forEach((r,s)=>{const n=this.producerMap.get(s),a=n.track.getSettings(),o=r.outboundVideoRtpId.map(u=>{const l=e.outboundVideoRtp.get(u);return l.frameHeight||(l.frameHeight=a.height,l.frameWidth=a.width,l.framesPerSecond=a.frameRate),l}),c={producerId:s,appData:n.appData,videoStats:o,audioStats:r.outboundAudioRtpId.map(u=>e.outboundAudioRtp.get(u))};i.push(c)})}catch(r){console.error("getProducersReport: ",r,e)}return i}getConsumerStatsFromParsedConsumerStats(e,i,r){let s;try{const{peerId:n,producerId:a,appData:o}=this.consumerPeerIdMap.get(r),c=i==null?void 0:i.inboundVideoRtpId.map(u=>{const l=this.consumerMap.get(r).track.getSettings(),p=e.inboundVideoRtp.get(u);return p.frameHeight||(p.frameHeight=l.height,p.frameWidth=l.width,p.framesPerSecond=l.frameRate),p});s={consumerId:r,peerId:n,producerId:a,appData:o,videoStats:c,audioStats:i==null?void 0:i.inboundAudioRtpId.map(u=>e.inboundAudioRtp.get(u))}}catch(n){console.error("getConsumerStatsFromParsedConsumerStats: ",n,e)}return s}getConsumerStatsFromReport(e){const i=[];try{e.consumerStreamMap.forEach((r,s)=>{i.push(this.getConsumerStatsFromParsedConsumerStats(e,r,s))})}catch(r){console.error("getConsumerStatsFromReport: ",r,e)}return i}}class _Y extends iD{}function Nv(t,e,i,r){if(typeof i=="function"&&r instanceof e)i.call(null,r,t);else throw r}function mC(t,e,i){const r=t.value;return t.value=function(...s){try{const n=r.apply(this,s);return n&&n instanceof Promise?n.catch(a=>{Nv(this,e,i,a)}):n}catch(n){Nv(this,e,i,n)}return null},t}const Oe=(t,e)=>(i,r,s)=>{const n=s.value;return s.value=function(...a){try{const o=n.apply(this,a);return o&&o instanceof Promise?o.catch(c=>{Nv(this,t,e,c)}):o}catch(o){Nv(this,t,e,o)}return null},s},SY=(t,e)=>(i,r,s)=>{if(s)return mC(s,t,e);for(const n of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,n);a.value instanceof Function&&Object.defineProperty(i.prototype,n,mC(a,t,e))}};var Ae=globalThis&&globalThis.__decorate||function(t,e,i,r){var s=arguments.length,n=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(n=(s<3?a(n):s>3?a(e,i,n):a(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n};const Me=console;let Ce=class{constructor(t="https://api.testingv3.dyte.in",e="Blink",i=Bp.PRODUCTION,r,s,n){switch(w(this,"eventHandler"),w(this,"measurements"),w(this,"producingTransport"),w(this,"consumingTransport"),w(this,"producers",new Map),w(this,"consumers",new Map),w(this,"iceServers"),w(this,"connectionInfoPromise"),w(this,"pingStatsTimeout"),w(this,"logger"),w(this,"env"),w(this,"peerId"),w(this,"consumerSharedMediaStatesMap",new Map),w(this,"currentUserMediaStates",{}),this.env=i,this.logger=s,this.peerId=n,this.eventHandler=new hY({logger:s,peerId:n,env:i}),this.logger.debug("callStats::engineName: ",{engineName:e}),e){case"Blink":this.measurements=new kY;break;case"Gecko":this.measurements=new iD;break;case"WebKit":this.measurements=new _Y;break;default:throw Error(`Unknown engineName! ${e}`)}this.measurements.callStatsInstance=this,this.registerProducer=this.registerProducer.bind(this),this.registerConsumer=this.registerConsumer.bind(this)}registerIceServers(t){this.iceServers=t}registerConsumer(t){var e;this.consumerSharedMediaStatesMap.has(t.id)||this.consumerSharedMediaStatesMap.set(t.id,{}),this.consumers.set(t.id,t),this.measurements.registerConsumer(t),this.logger.debug("callStats::registerConsumer",{consumerId:t.id,consumerkind:t.kind,isScreenShare:!!((e=t.appData)!=null&&e.screenShare)}),t.observer.on("close",this.deRegisterConsumer.bind(this,t))}registerProducer(t){var e;this.producers.set(t.id,t),this.measurements.registerProducer(t),this.logger.debug("callStats::registerProducer",{producerId:t.id,producerKind:t.kind,isScreenShare:!!((e=t.appData)!=null&&e.screenShare)}),t.observer.on("close",this.deRegisterProducer.bind(this,t))}sendConsumerSharedMediaStateEvent(t,e){this.consumerSharedMediaStatesMap.has(t)||this.consumerSharedMediaStatesMap.set(t,{});const i=this.consumerSharedMediaStatesMap.get(t);this.consumerSharedMediaStatesMap.set(t,Object.assign(i,e))}registerProducingTransport(t){var e;this.producingTransport=t,t.observer.on("close",this.disconnectProducingTransport.bind(this,t)),t.observer.on("disconnect",this.disconnectProducingTransport.bind(this,t)),Array.from(((e=t._producers)==null?void 0:e.values())||[]).forEach(i=>{this.registerProducer(i)}),t.observer.on("newproducer",this.registerProducer)}registerConsumingTransport(t){var e;this.consumingTransport=t,t.observer.on("close",this.disconnectConsumingTransport.bind(this,t)),t.observer.on("disconnect",this.disconnectConsumingTransport.bind(this,t)),Array.from(((e=t._consumers)==null?void 0:e.values())||[]).forEach(i=>{this.registerConsumer(i)}),t.observer.on("newconsumer",this.registerConsumer)}deRegisterConsumer(t){this.consumers.delete(t.id)}deRegisterProducer(t){this.producers.delete(t.id)}disconnectConsumingTransport(){this.consumingTransport=void 0}disconnectProducingTransport(){this.producingTransport=void 0}callEvent(t){this.eventHandler.callEvent(t)}sendPreCallTestBeginEvent(){this.connectionInfoPromise=this.measurements.getNetworkInfo(this.iceServers),this.eventHandler.callEvent({event:ne.PRECALL_TEST_BEGIN,timestamp:new Date}),this.connectionInfoPromise&&this.connectionInfoPromise.then(t=>{this.eventHandler.callEvent({event:ne.PRECALL_TEST_COMPLETE,metaData:{connectionInfo:t},timestamp:new Date})})}sendScreenShareToggleEvent(t,e){this.currentUserMediaStates.screen=t,this.eventHandler.callEvent({event:t?ne.SCREENSHARE_STARTED:ne.SCREENSHARE_STOPPED,metaData:{ssrc:e},timestamp:new Date})}sendScreenShareRequestedEvent(){this.eventHandler.callEvent({event:ne.SCREENSHARE_START_REQUESTED,timestamp:new Date})}sendActiveSpeakerEvent(t){this.eventHandler.callEvent({event:ne.DOMINANT_SPEAKER,metaData:{peerId:t},timestamp:new Date})}devices(t,e){this.eventHandler.callEvent({event:t===Ss.AUDIO&&ne.AUDIO_DEVICES_UPDATES||t===Ss.VIDEO&&ne.VIDEO_DEVICES_UPDATES||t===Ss.SPEAKER&&ne.SPEAKER_DEVICES_UPDATES,metaData:{deviceList:e},timestamp:new Date})}selectedDevice(t,e){this.eventHandler.callEvent({event:t===Ss.AUDIO&&ne.SELECTED_MICROHPONE_UPDATE||t===Ss.VIDEO&&ne.SELECTED_CAMERA_UPDATE||t===Ss.SPEAKER&&ne.SELECTED_SPEAKER_UPDATE,metaData:{device:e},timestamp:new Date})}mediaPermission(t,e){this.eventHandler.callEvent({event:ne.MEDIA_PERMISSION,metaData:{deviceType:t,permission:e},timestamp:new Date})}mediaPlaybackFailed(t){this.eventHandler.callEvent({event:t===Ss.AUDIO&&ne.AUDIO_PLAY_FAILED||t===Ss.VIDEO&&ne.VIDEO_PLAY_FAILED,metaData:{deviceType:t},timestamp:new Date})}mediaTrackMuted(t){this.eventHandler.callEvent({event:t===Ss.AUDIO&&ne.AUDIO_TRACK_MUTED||t===Ss.VIDEO&&ne.VIDEO_TRACK_MUTED,metaData:{deviceType:t},timestamp:new Date})}tabChanged(t){this.eventHandler.callEvent({event:ne.TAB_CHANGE,metaData:{isMeetingsTabActive:t},timestamp:new Date})}browserBackgrounded(){this.eventHandler.callEvent({event:ne.BROWSER_BACKGROUNDED,timestamp:new Date})}browserForegrounded(){this.eventHandler.callEvent({event:ne.BROWSER_FOREGROUNDED,timestamp:new Date})}legacySwitch(t){this.eventHandler.callEvent({event:ne.LEGACY_SWITCH,metadata:{on:t},timestamp:new Date})}async getPreCallTestResults(){return this.connectionInfoPromise}sendCallJoinBeginEvent(t){t={...t,meetingEnv:this.env},t.deviceInfo={...t.deviceInfo,userAgent:navigator.userAgent,cpus:navigator.hardwareConcurrency,memory:navigator.deviceMemory},this.eventHandler.callEvent({event:ne.CALL_JOIN_BEGIN,metaData:{peerMetaData:t},timestamp:new Date})}sendNetworkQualityTestBeginEvent(t){this.eventHandler.callEvent({event:ne.NET_QUALITY_TEST_BEGIN,timestamp:new Date}),new Promise(async(e,i)=>{const r=[];try{for(const s of t)try{if(s.iceServers&&s.iceServers.length>0){const n=await this.measurements.getNetworkQuality(s.iceServers);r.push({...s,networkResults:n})}}catch(n){console.warn("Error handling ",n)}e({regionData:r})}catch(s){console.warn("Error in callstats, ",s),i(s)}}).then(e=>{this.eventHandler.callEvent({event:ne.NET_QUALITY_TEST_END,timestamp:new Date,metaData:e})})}sendWebSocketConnectedEvent(){this.eventHandler.callEvent({event:ne.WEBSOCKET_CONNECTED,timestamp:new Date})}sendTransportConnectedEvent(){this.eventHandler.callEvent({event:ne.TRANSPORT_CONNECTED,timestamp:new Date})}sendAudioToggleEvent(t){this.currentUserMediaStates.audio=t;let e;t?e=ne.AUDIO_ON:e=ne.AUDIO_OFF,this.eventHandler.callEvent({event:e,timestamp:new Date})}sendVideoToggleEvent(t){this.currentUserMediaStates.video=t;let e;t?e=ne.VIDEO_ON:e=ne.VIDEO_OFF,this.eventHandler.callEvent({event:e,timestamp:new Date})}sendParticipantRoleToggleEvent(t){this.eventHandler.callEvent({event:ne.PARTICIPANT_ROLE,timestamp:new Date,metaData:t})}startPingStats(t=7e3){this.sendPingStatsEvent(!1),this.pingStatsTimeout=setInterval(this.sendPingStatsEvent.bind(this),t)}stopPingStats(){clearInterval(this.pingStatsTimeout)}async sendPingStatsEvent(t=!0){let e,i;if(this.producingTransport&&(e=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),!e||!(e!=null&&e.producerReport))){this.logger.debug("callStats::sendPingStatsEvent::staleProducingTransport",{disclaimer:"Stale producer? Regenerating Stream Maps!"});const s=await this.measurements.getProducersReport([...this.producers.values()]);e&&s?e.producerReport=s:(e=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),(!e||!(e!=null&&e.producerReport))&&this.logger.debug("callStats::sendPingStatsEvent::noProducingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}if(this.consumingTransport&&(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),!i||!i.consumerReport)){this.logger.debug("callStats::sendPingStatsEvent::staleConsumingTransport",{disclaimer:"Stale consumer? Regenerating Stream Maps!"});const s=await this.measurements.getConsumersReport([...this.consumers.values()]);i&&s?i.consumerReport=s:(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),(!i||!i.consumerReport)&&this.logger.debug("callStats::sendPingStatsEvent::noConsumingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}const r={producingTransportStats:e?e==null?void 0:e.transportReport:void 0,consumingTransportStats:i?i==null?void 0:i.transportReport:void 0,producerStats:[].concat((e==null?void 0:e.producerReport)||[]).concat((i==null?void 0:i.producerReport)||[]),consumerStats:[].concat((i==null?void 0:i.consumerReport)||[]).concat((e==null?void 0:e.consumerReport)||[])};if(t&&r.producerStats.length===0&&r.consumerStats.length===0){await this.eventHandler.flush();return}this.eventHandler.callEvent({event:ne.PING_STAT,metaData:r,timestamp:new Date})}sendIVSPlayerRebufferEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_REBUFFERING,timestamp:new Date})}sendIVSPlayerAudioBlockEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_AUDIO_BLOCKED,timestamp:new Date})}sendIVSPlayerPlaybackBlockedEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_PLAYBACK_BLOCKED,timestamp:new Date})}sendIVSPlayerNetworkUnavailableEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_NETWORK_UNAVAILABLE,timestamp:new Date})}sendIVSPlayerInitializedEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_INITIALIZED,timestamp:new Date})}sendIVSPlayerWorkerErrorEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_WORKER_ERROR,timestamp:new Date})}sendIVSPlayerErrorEvent(t){this.eventHandler.callEvent({event:ne.IVS_PLAYER_ERROR,timestamp:new Date,metaData:t})}sendIVSPlayerRecoverableErrorEvent(t){this.eventHandler.callEvent({event:ne.IVS_PLAYER_RECOVERABLE_ERROR,timestamp:new Date,metaData:t})}sendIVSPlayerAnalyticsEvent(t){this.eventHandler.callEvent({event:ne.IVS_PLAYER_ANALYTICS_EVENT,timestamp:new Date,metaData:t})}sendIVSPlayerPlaybackRateChangedEvent(t){this.eventHandler.callEvent({event:ne.IVS_PLAYER_PLAYBACK_RATE_CHANGED,timestamp:new Date,metaData:{updatedPlaybackRate:t}})}sendIVSPlayerQualityChanged(t){this.eventHandler.callEvent({event:ne.IVS_PLAYER_QUALITY_CHANGED,timestamp:new Date,metaData:t})}sendPlayerLiveLatency(t){this.eventHandler.callEvent({event:ne.LIVESTREAM_LATENCY,timestamp:new Date,metaData:{latency:t}})}sendDisconnectEvent(){this.eventHandler.callEvent({event:ne.DISCONNECT,timestamp:new Date})}sendReconnectEvent(){this.eventHandler.callEvent({event:ne.RECONNECT_ATTEMPT,timestamp:new Date})}};Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"registerIceServers",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"registerConsumer",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"registerProducer",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendConsumerSharedMediaStateEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"registerProducingTransport",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"registerConsumingTransport",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"deRegisterConsumer",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"deRegisterProducer",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"disconnectConsumingTransport",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"disconnectProducingTransport",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendPreCallTestBeginEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendScreenShareToggleEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendScreenShareRequestedEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendActiveSpeakerEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"devices",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"selectedDevice",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"mediaPermission",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"mediaPlaybackFailed",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"mediaTrackMuted",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"tabChanged",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"browserBackgrounded",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"browserForegrounded",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"legacySwitch",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"getPreCallTestResults",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendCallJoinBeginEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendNetworkQualityTestBeginEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendWebSocketConnectedEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendTransportConnectedEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendAudioToggleEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendVideoToggleEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendParticipantRoleToggleEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"startPingStats",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"stopPingStats",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendPingStatsEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerRebufferEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerAudioBlockEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerPlaybackBlockedEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerNetworkUnavailableEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerInitializedEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerWorkerErrorEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerErrorEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerRecoverableErrorEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerAnalyticsEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerPlaybackRateChangedEvent",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendIVSPlayerQualityChanged",null);Ae([Oe(TypeError,(t,e)=>Me.error(e,t))],Ce.prototype,"sendPlayerLiveLatency",null);Ce=Ae([SY(TypeError,(t,e)=>Me.error(e,t))],Ce);const xY=Ce;class EY extends Er{constructor(){super(...arguments),w(this,"stats"),w(this,"roomURL"),w(this,"peerId"),w(this,"backend"),w(this,"iceServers"),w(this,"initialized",!1),w(this,"stalled",!1),w(this,"ipInformation"),w(this,"logger")}async initialize({peerId:e,engineName:i,env:r=Bp.PRODUCTION,iceServers:s,apiBase:n="https://api.cluster.dyte.in",flags:a,logger:o=console}){var c,u,l;try{this.peerId=e,this.logger=o,this.ipInformation=await vS.getIPDetails({peerId:e}),this.backend=new xY(n,i,r,a,o,e),this.iceServers=s,(c=this.backend)==null||c.registerIceServers(this.iceServers),this.initialized=!0,(l=(u=this.backend)==null?void 0:u.eventHandler)==null||l.emit("initialized",this.ipInformation),this.emit("initialized",this.ipInformation),this.startPreCallTest()}catch(p){this.logger.error("callStats::CallStatsIntegration: ",{error:{reason:p.reason}}),this.stallCallStats()}}setRoomName(e){this.roomURL=e}configureSendTransport(e){var i;(i=this.backend)==null||i.registerProducingTransport(e)}configureRecvTransport(e){var i;(i=this.backend)==null||i.registerConsumingTransport(e)}async candidateRegionalNetworkQualityTest(e){var i;try{(i=this.backend)==null||i.sendNetworkQualityTestBeginEvent(e)}catch(r){this.logger.error("callStats::sendNetworkQualityTestBeginEvent",{error:{reason:r.reason}})}}async roomJoined(e){var i,r;(i=this.backend)==null||i.sendCallJoinBeginEvent(e),this.backend,(r=this.backend)==null||r.startPingStats()}audioOff(){var e;(e=this.backend)==null||e.sendAudioToggleEvent(!1)}audioOn(){var e;(e=this.backend)==null||e.sendAudioToggleEvent(!0)}videoOff(){var e;(e=this.backend)==null||e.sendVideoToggleEvent(!1)}videoOn(){var e;(e=this.backend)==null||e.sendVideoToggleEvent(!0)}callEnded(){var e,i;(e=this.backend)==null||e.stopPingStats(),(i=this.backend)==null||i.sendDisconnectEvent()}screenShareStart(e){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!0,e)}consumerSharedMediaState(e,i){var r;(r=this.backend)==null||r.sendConsumerSharedMediaStateEvent(e,i)}screenShareStop(e){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!1,e)}screenShareRequested(){var e;(e=this.backend)==null||e.sendScreenShareRequestedEvent()}activeSpeaker(e){var i;e===this.peerId&&((i=this.backend)==null||i.sendActiveSpeakerEvent(e))}devices(e,i){var r;(r=this.backend)==null||r.devices(e,i)}selectedDevice(e,i){var r;(r=this.backend)==null||r.selectedDevice(e,i)}mediaPermission(e,i){var r;(r=this.backend)==null||r.mediaPermission(e,i)}mediaPlaybackFailed(e){var i;(i=this.backend)==null||i.mediaPlaybackFailed(e)}mediaTrackMuted(e){var i;(i=this.backend)==null||i.mediaTrackMuted(e)}tabChanged(e=!1){var i;(i=this.backend)==null||i.tabChanged(e)}browserBackgrounded(){var e;(e=this.backend)==null||e.browserBackgrounded()}browserForegrounded(){var e;(e=this.backend)==null||e.browserForegrounded()}legacySwitch(e){var i;(i=this.backend)==null||i.legacySwitch(e)}async startPreCallTest(){var e;(e=this.backend)==null||e.sendPreCallTestBeginEvent()}onPreCallTestResults(e){var i;return(i=this.backend)==null||i.eventHandler.once("precall_end",e),e}onReceivingConsumerAudioStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consumer_audio_status",e)}onReceivingConsumerVideoStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consumer_video_status",e)}onReceivingProducerAudioStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producer_audio_status",e)}onReceivingProducerVideoStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producer_video_status",e)}onReceivingProducingTransportStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producing_transport_status",e)}onReceivingConsumingTransportStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consuming_transport_status",e)}onSafeInitialization(e){if(this.initialized)e(this.ipInformation,!1);else if(!this.stalled){const i=r=>{e(r,!0)};return this.once("initialized",i),i}return()=>{}}removeInitializationListener(e){this.removeListener("initialized",e)}stallCallStats(){this.stalled=!0,this.removeAllListeners("initialized")}ivsPlayerEvent(e,i){var r,s,n,a,o,c,u,l,p,m,y;switch(e){case"PlayerRebuffering":(r=this.backend)==null||r.sendIVSPlayerRebufferEvent();break;case"PlayerAudioBlocked":(s=this.backend)==null||s.sendIVSPlayerAudioBlockEvent();break;case"PlayerPlaybackBlocked":(n=this.backend)==null||n.sendIVSPlayerPlaybackBlockedEvent();break;case"PlayerNetworkUnavailable":(a=this.backend)==null||a.sendIVSPlayerNetworkUnavailableEvent();break;case"PlayerInitialized":(o=this.backend)==null||o.sendIVSPlayerInitializedEvent();break;case"PlayerWorkerError":(c=this.backend)==null||c.sendIVSPlayerWorkerErrorEvent();break;case"PlayerError":(u=this.backend)==null||u.sendIVSPlayerErrorEvent(i);break;case"PlayerRecoverableError":(l=this.backend)==null||l.sendIVSPlayerRecoverableErrorEvent(i);break;case"PlayerAnalyticsEvent":(p=this.backend)==null||p.sendIVSPlayerAnalyticsEvent(i);break;case"PlayerPlaybackRateChanged":(m=this.backend)==null||m.sendIVSPlayerPlaybackRateChangedEvent(i);break;case"PlayerQualityChanged":(y=this.backend)==null||y.sendIVSPlayerQualityChanged(i);break}}livestreamLatency(e){var i;(i=this.backend)==null||i.sendPlayerLiveLatency(e)}}const ue=new EY;ue.setMaxListeners(30);function TY(t){const{length:e}=this,i=t>=0?t:e+t;return i<0||i>=e?void 0:this[i]}Array.prototype.at||Object.assign(Array.prototype,{at:TY});function CY(t){const{length:e}=this,i=t>=0?t:e+t;return i<0||i>=e?void 0:this[i]}String.prototype.at||Object.assign(String.prototype,{at:CY});var Hp;(function(t){t.skip="SKIP",t.onAccept="ON_ACCEPT",t.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",t.skipOnAccept="SKIP_ON_ACCEPT"})(Hp||(Hp={}));var gd;(function(t){t.none="NONE",t.recorder="RECORDER",t.livestreamer="LIVESTREAMER"})(gd||(gd={}));var Uv;(function(t){t.groupCall="GROUP_CALL",t.webinar="WEBINAR",t.audioRoom="AUDIO_ROOM",t.livestream="LIVESTREAM",t.chat="CHAT"})(Uv||(Uv={}));var fC;(function(t){t.SKIP="skip",t.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",t.ON_ACCEPT="skipOnAccept",t.SKIP_ON_ACCEPT="skipOnAccept"})(fC||(fC={}));Uv.groupCall,Hp.skipOnAccept,gd.none;Uv.groupCall,gd.none,Hp.skipOnAccept;let rD="hXgU8Wc8pwuGNq9ms5q9Hh";var vC;typeof process<"u"&&(vC=process==null?void 0:process.env)!=null&&vC.FLAGSMITH_ENVIRONMENT_KEY&&(rD={}.FLAGSMITH_ENVIRONMENT_KEY);function PY(t=[]){const e={};return t.forEach(i=>{e[i.feature.name]={enabled:i.enabled,value:i.feature_state_value}}),e}class RY{constructor(e=rD){w(this,"flags",{}),w(this,"environmentKey",null),this.environmentKey=e,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(e,i={},r=!1,s=5e3){const n=JSON.parse(JSON.stringify(i)),a=Object.entries(n).map(o=>({trait_key:o[0],trait_value:o[1]}));try{const o="_"+(Math.random()+1).toString(36).substring(2),c=await Iv.post("https://edge.api.flagsmith.com/api/v1/identities/",{identifier:e+(r?o:""),traits:a},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:s});this.flags=PY(c.data.flags||[])}catch{}return this.flags}getValue(e){return this.flags&&this.flags[e]&&this.flags[e].value}hasFeature(e){return this.flags&&this.flags[e]&&this.flags[e].enabled}getAllFlags(){return this.flags}}const ge=new RY,sD=[-2,-1,0,1,2],IY=[0,1,2,3,4];function AY(t){t=t.trim();let e="0",i="0",r="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],r="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],r="0x"+t[5]+t[6]),[+e,+i,+r]}const MY=(t,e,i)=>{let r,s,n;if(e==0)r=s=n=i;else{const a=(u,l,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?u+(l-u)*6*p:p<.5?l:p<.6666666666666666?u+(l-u)*(.6666666666666666-p)*6:u),o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;r=a(c,o,t+1/3),s=a(c,o,t),n=a(c,o,t-1/3)}return[Math.round(r*255),Math.round(s*255),Math.round(n*255)]},DY=(t,e,i)=>{t/=255,e/=255,i/=255;const r=Math.max(t,e,i),s=Math.min(t,e,i);let n,a;const o=(r+s)/2;if(r==s)n=a=0;else{const c=r-s;switch(a=o>.5?c/(2-r-s):c/(r+s),r){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4;break}n/=6}return[n,a,o]},OY=(t,e,i)=>{const r=s=>s.toString(16).padStart(2,"0");return`#${r(t)}${r(e)}${r(i)}`},nD=(t,e=sD,i=.4)=>{const r=[],[s,n,a]=AY(t),[o,c,u]=DY(s,n,a),l=Math.round(u*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const p=e.findIndex(E=>E===0);if(p===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const m=5-p,y=p+1,b=(100-l)/m,S=l/y;for(const E of e){let k;E<0?k=l+E*S*i:E>0?k=l+E*b*i:k=l;const[T,I,O]=MY(o,c,k/100);r.push(OY(T,I,O))}return r},yC={dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},LY=t=>{const[e,i,r,s,n]=nD(t,sD);return{300:e,400:i,500:r,600:s,700:n}},NY=t=>{if(t==="#FFFFFF")return yC.light.background;if(t==="#000000")return yC.dark.background;const[e,i,r,s,n]=nD(t,IY);return{1e3:e,900:i,800:r,700:s,600:n}};function UY(){this.__data__=[],this.size=0}function yS(t,e){return t===e||t!==t&&e!==e}function $y(t,e){for(var i=t.length;i--;)if(yS(t[i][0],e))return i;return-1}var jY=Array.prototype,$Y=jY.splice;function zY(t){var e=this.__data__,i=$y(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():$Y.call(e,i,1),--this.size,!0}function FY(t){var e=this.__data__,i=$y(e,t);return i<0?void 0:e[i][1]}function VY(t){return $y(this.__data__,t)>-1}function BY(t,e){var i=this.__data__,r=$y(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}function za(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}za.prototype.clear=UY;za.prototype.delete=zY;za.prototype.get=FY;za.prototype.has=VY;za.prototype.set=BY;function HY(){this.__data__=new za,this.size=0}function WY(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function GY(t){return this.__data__.get(t)}function qY(t){return this.__data__.has(t)}var JY=typeof global=="object"&&global&&global.Object===Object&&global;const aD=JY;var KY=typeof self=="object"&&self&&self.Object===Object&&self,QY=aD||KY||Function("return this")();const fn=QY;var YY=fn.Symbol;const Gn=YY;var oD=Object.prototype,ZY=oD.hasOwnProperty,XY=oD.toString,ch=Gn?Gn.toStringTag:void 0;function eZ(t){var e=ZY.call(t,ch),i=t[ch];try{t[ch]=void 0;var r=!0}catch{}var s=XY.call(t);return r&&(e?t[ch]=i:delete t[ch]),s}var tZ=Object.prototype,iZ=tZ.toString;function rZ(t){return iZ.call(t)}var sZ="[object Null]",nZ="[object Undefined]",bC=Gn?Gn.toStringTag:void 0;function xu(t){return t==null?t===void 0?nZ:sZ:bC&&bC in Object(t)?eZ(t):rZ(t)}function Go(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var aZ="[object AsyncFunction]",oZ="[object Function]",cZ="[object GeneratorFunction]",dZ="[object Proxy]";function cD(t){if(!Go(t))return!1;var e=xu(t);return e==oZ||e==cZ||e==aZ||e==dZ}var lZ=fn["__core-js_shared__"];const Ob=lZ;var wC=function(){var t=/[^.]+$/.exec(Ob&&Ob.keys&&Ob.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function uZ(t){return!!wC&&wC in t}var hZ=Function.prototype,pZ=hZ.toString;function Td(t){if(t!=null){try{return pZ.call(t)}catch{}try{return t+""}catch{}}return""}var gZ=/[\\^$.*+?()[\]{}|]/g,mZ=/^\[object .+?Constructor\]$/,fZ=Function.prototype,vZ=Object.prototype,yZ=fZ.toString,bZ=vZ.hasOwnProperty,wZ=RegExp("^"+yZ.call(bZ).replace(gZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kZ(t){if(!Go(t)||uZ(t))return!1;var e=cD(t)?wZ:mZ;return e.test(Td(t))}function _Z(t,e){return t==null?void 0:t[e]}function Cd(t,e){var i=_Z(t,e);return kZ(i)?i:void 0}var SZ=Cd(fn,"Map");const Wp=SZ;var xZ=Cd(Object,"create");const Gp=xZ;function EZ(){this.__data__=Gp?Gp(null):{},this.size=0}function TZ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var CZ="__lodash_hash_undefined__",PZ=Object.prototype,RZ=PZ.hasOwnProperty;function IZ(t){var e=this.__data__;if(Gp){var i=e[t];return i===CZ?void 0:i}return RZ.call(e,t)?e[t]:void 0}var AZ=Object.prototype,MZ=AZ.hasOwnProperty;function DZ(t){var e=this.__data__;return Gp?e[t]!==void 0:MZ.call(e,t)}var OZ="__lodash_hash_undefined__";function LZ(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Gp&&e===void 0?OZ:e,this}function md(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}md.prototype.clear=EZ;md.prototype.delete=TZ;md.prototype.get=IZ;md.prototype.has=DZ;md.prototype.set=LZ;function NZ(){this.size=0,this.__data__={hash:new md,map:new(Wp||za),string:new md}}function UZ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function zy(t,e){var i=t.__data__;return UZ(e)?i[typeof e=="string"?"string":"hash"]:i.map}function jZ(t){var e=zy(this,t).delete(t);return this.size-=e?1:0,e}function $Z(t){return zy(this,t).get(t)}function zZ(t){return zy(this,t).has(t)}function FZ(t,e){var i=zy(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}function Pd(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Pd.prototype.clear=NZ;Pd.prototype.delete=jZ;Pd.prototype.get=$Z;Pd.prototype.has=zZ;Pd.prototype.set=FZ;var VZ=200;function BZ(t,e){var i=this.__data__;if(i instanceof za){var r=i.__data__;if(!Wp||r.length<VZ-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Pd(r)}return i.set(t,e),this.size=i.size,this}function Ta(t){var e=this.__data__=new za(t);this.size=e.size}Ta.prototype.clear=HY;Ta.prototype.delete=WY;Ta.prototype.get=GY;Ta.prototype.has=qY;Ta.prototype.set=BZ;function HZ(t,e){for(var i=-1,r=t==null?0:t.length;++i<r&&e(t[i],i,t)!==!1;);return t}var WZ=function(){try{var t=Cd(Object,"defineProperty");return t({},"",{}),t}catch{}}();const jv=WZ;function dD(t,e,i){e=="__proto__"&&jv?jv(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var GZ=Object.prototype,qZ=GZ.hasOwnProperty;function lD(t,e,i){var r=t[e];(!(qZ.call(t,e)&&yS(r,i))||i===void 0&&!(e in t))&&dD(t,e,i)}function Fy(t,e,i,r){var s=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=r?r(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),s?dD(i,o,c):lD(i,o,c)}return i}function JZ(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function La(t){return t!=null&&typeof t=="object"}var KZ="[object Arguments]";function kC(t){return La(t)&&xu(t)==KZ}var uD=Object.prototype,QZ=uD.hasOwnProperty,YZ=uD.propertyIsEnumerable,ZZ=kC(function(){return arguments}())?kC:function(t){return La(t)&&QZ.call(t,"callee")&&!YZ.call(t,"callee")};const bS=ZZ;var XZ=Array.isArray;const fd=XZ;function eX(){return!1}var hD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_C=hD&&typeof module=="object"&&module&&!module.nodeType&&module,tX=_C&&_C.exports===hD,SC=tX?fn.Buffer:void 0,iX=SC?SC.isBuffer:void 0,rX=iX||eX;const qp=rX;var sX=9007199254740991,nX=/^(?:0|[1-9]\d*)$/;function aX(t,e){var i=typeof t;return e=e==null?sX:e,!!e&&(i=="number"||i!="symbol"&&nX.test(t))&&t>-1&&t%1==0&&t<e}var oX=9007199254740991;function pD(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=oX}var cX="[object Arguments]",dX="[object Array]",lX="[object Boolean]",uX="[object Date]",hX="[object Error]",pX="[object Function]",gX="[object Map]",mX="[object Number]",fX="[object Object]",vX="[object RegExp]",yX="[object Set]",bX="[object String]",wX="[object WeakMap]",kX="[object ArrayBuffer]",_X="[object DataView]",SX="[object Float32Array]",xX="[object Float64Array]",EX="[object Int8Array]",TX="[object Int16Array]",CX="[object Int32Array]",PX="[object Uint8Array]",RX="[object Uint8ClampedArray]",IX="[object Uint16Array]",AX="[object Uint32Array]",Ft={};Ft[SX]=Ft[xX]=Ft[EX]=Ft[TX]=Ft[CX]=Ft[PX]=Ft[RX]=Ft[IX]=Ft[AX]=!0;Ft[cX]=Ft[dX]=Ft[kX]=Ft[lX]=Ft[_X]=Ft[uX]=Ft[hX]=Ft[pX]=Ft[gX]=Ft[mX]=Ft[fX]=Ft[vX]=Ft[yX]=Ft[bX]=Ft[wX]=!1;function MX(t){return La(t)&&pD(t.length)&&!!Ft[xu(t)]}function Vy(t){return function(e){return t(e)}}var gD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hp=gD&&typeof module=="object"&&module&&!module.nodeType&&module,DX=hp&&hp.exports===gD,Lb=DX&&aD.process,OX=function(){try{var t=hp&&hp.require&&hp.require("util").types;return t||Lb&&Lb.binding&&Lb.binding("util")}catch{}}();const du=OX;var xC=du&&du.isTypedArray,LX=xC?Vy(xC):MX;const wS=LX;var NX=Object.prototype,UX=NX.hasOwnProperty;function mD(t,e){var i=fd(t),r=!i&&bS(t),s=!i&&!r&&qp(t),n=!i&&!r&&!s&&wS(t),a=i||r||s||n,o=a?JZ(t.length,String):[],c=o.length;for(var u in t)(e||UX.call(t,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||aX(u,c)))&&o.push(u);return o}var jX=Object.prototype;function By(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||jX;return t===i}function fD(t,e){return function(i){return t(e(i))}}var $X=fD(Object.keys,Object);const zX=$X;var FX=Object.prototype,VX=FX.hasOwnProperty;function vD(t){if(!By(t))return zX(t);var e=[];for(var i in Object(t))VX.call(t,i)&&i!="constructor"&&e.push(i);return e}function Hy(t){return t!=null&&pD(t.length)&&!cD(t)}function kS(t){return Hy(t)?mD(t):vD(t)}function BX(t,e){return t&&Fy(e,kS(e),t)}function HX(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var WX=Object.prototype,GX=WX.hasOwnProperty;function qX(t){if(!Go(t))return HX(t);var e=By(t),i=[];for(var r in t)r=="constructor"&&(e||!GX.call(t,r))||i.push(r);return i}function _S(t){return Hy(t)?mD(t,!0):qX(t)}function JX(t,e){return t&&Fy(e,_S(e),t)}var yD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,EC=yD&&typeof module=="object"&&module&&!module.nodeType&&module,KX=EC&&EC.exports===yD,TC=KX?fn.Buffer:void 0,CC=TC?TC.allocUnsafe:void 0;function QX(t,e){if(e)return t.slice();var i=t.length,r=CC?CC(i):new t.constructor(i);return t.copy(r),r}function YX(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}function bD(t,e){for(var i=-1,r=t==null?0:t.length,s=0,n=[];++i<r;){var a=t[i];e(a,i,t)&&(n[s++]=a)}return n}function wD(){return[]}var ZX=Object.prototype,XX=ZX.propertyIsEnumerable,PC=Object.getOwnPropertySymbols,eee=PC?function(t){return t==null?[]:(t=Object(t),bD(PC(t),function(e){return XX.call(t,e)}))}:wD;const SS=eee;function tee(t,e){return Fy(t,SS(t),e)}function xS(t,e){for(var i=-1,r=e.length,s=t.length;++i<r;)t[s+i]=e[i];return t}var iee=fD(Object.getPrototypeOf,Object);const kD=iee;var ree=Object.getOwnPropertySymbols,see=ree?function(t){for(var e=[];t;)xS(e,SS(t)),t=kD(t);return e}:wD;const _D=see;function nee(t,e){return Fy(t,_D(t),e)}function SD(t,e,i){var r=e(t);return fd(t)?r:xS(r,i(t))}function Bw(t){return SD(t,kS,SS)}function aee(t){return SD(t,_S,_D)}var oee=Cd(fn,"DataView");const Hw=oee;var cee=Cd(fn,"Promise");const Ww=cee;var dee=Cd(fn,"Set");const Hl=dee;var lee=Cd(fn,"WeakMap");const Gw=lee;var RC="[object Map]",uee="[object Object]",IC="[object Promise]",AC="[object Set]",MC="[object WeakMap]",DC="[object DataView]",hee=Td(Hw),pee=Td(Wp),gee=Td(Ww),mee=Td(Hl),fee=Td(Gw),kc=xu;(Hw&&kc(new Hw(new ArrayBuffer(1)))!=DC||Wp&&kc(new Wp)!=RC||Ww&&kc(Ww.resolve())!=IC||Hl&&kc(new Hl)!=AC||Gw&&kc(new Gw)!=MC)&&(kc=function(t){var e=xu(t),i=e==uee?t.constructor:void 0,r=i?Td(i):"";if(r)switch(r){case hee:return DC;case pee:return RC;case gee:return IC;case mee:return AC;case fee:return MC}return e});const lu=kc;var vee=Object.prototype,yee=vee.hasOwnProperty;function bee(t){var e=t.length,i=new t.constructor(e);return e&&typeof t[0]=="string"&&yee.call(t,"index")&&(i.index=t.index,i.input=t.input),i}var wee=fn.Uint8Array;const $v=wee;function ES(t){var e=new t.constructor(t.byteLength);return new $v(e).set(new $v(t)),e}function kee(t,e){var i=e?ES(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var _ee=/\w*$/;function See(t){var e=new t.constructor(t.source,_ee.exec(t));return e.lastIndex=t.lastIndex,e}var OC=Gn?Gn.prototype:void 0,LC=OC?OC.valueOf:void 0;function xee(t){return LC?Object(LC.call(t)):{}}function Eee(t,e){var i=e?ES(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var Tee="[object Boolean]",Cee="[object Date]",Pee="[object Map]",Ree="[object Number]",Iee="[object RegExp]",Aee="[object Set]",Mee="[object String]",Dee="[object Symbol]",Oee="[object ArrayBuffer]",Lee="[object DataView]",Nee="[object Float32Array]",Uee="[object Float64Array]",jee="[object Int8Array]",$ee="[object Int16Array]",zee="[object Int32Array]",Fee="[object Uint8Array]",Vee="[object Uint8ClampedArray]",Bee="[object Uint16Array]",Hee="[object Uint32Array]";function Wee(t,e,i){var r=t.constructor;switch(e){case Oee:return ES(t);case Tee:case Cee:return new r(+t);case Lee:return kee(t,i);case Nee:case Uee:case jee:case $ee:case zee:case Fee:case Vee:case Bee:case Hee:return Eee(t,i);case Pee:return new r;case Ree:case Mee:return new r(t);case Iee:return See(t);case Aee:return new r;case Dee:return xee(t)}}var NC=Object.create,Gee=function(){function t(){}return function(e){if(!Go(e))return{};if(NC)return NC(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();const qee=Gee;function Jee(t){return typeof t.constructor=="function"&&!By(t)?qee(kD(t)):{}}var Kee="[object Map]";function Qee(t){return La(t)&&lu(t)==Kee}var UC=du&&du.isMap,Yee=UC?Vy(UC):Qee;const Zee=Yee;var Xee="[object Set]";function ete(t){return La(t)&&lu(t)==Xee}var jC=du&&du.isSet,tte=jC?Vy(jC):ete;const ite=tte;var rte=1,ste=2,nte=4,xD="[object Arguments]",ate="[object Array]",ote="[object Boolean]",cte="[object Date]",dte="[object Error]",ED="[object Function]",lte="[object GeneratorFunction]",ute="[object Map]",hte="[object Number]",TD="[object Object]",pte="[object RegExp]",gte="[object Set]",mte="[object String]",fte="[object Symbol]",vte="[object WeakMap]",yte="[object ArrayBuffer]",bte="[object DataView]",wte="[object Float32Array]",kte="[object Float64Array]",_te="[object Int8Array]",Ste="[object Int16Array]",xte="[object Int32Array]",Ete="[object Uint8Array]",Tte="[object Uint8ClampedArray]",Cte="[object Uint16Array]",Pte="[object Uint32Array]",Rt={};Rt[xD]=Rt[ate]=Rt[yte]=Rt[bte]=Rt[ote]=Rt[cte]=Rt[wte]=Rt[kte]=Rt[_te]=Rt[Ste]=Rt[xte]=Rt[ute]=Rt[hte]=Rt[TD]=Rt[pte]=Rt[gte]=Rt[mte]=Rt[fte]=Rt[Ete]=Rt[Tte]=Rt[Cte]=Rt[Pte]=!0;Rt[dte]=Rt[ED]=Rt[vte]=!1;function rf(t,e,i,r,s,n){var a,o=e&rte,c=e&ste,u=e&nte;if(i&&(a=s?i(t,r,s,n):i(t)),a!==void 0)return a;if(!Go(t))return t;var l=fd(t);if(l){if(a=bee(t),!o)return YX(t,a)}else{var p=lu(t),m=p==ED||p==lte;if(qp(t))return QX(t,o);if(p==TD||p==xD||m&&!s){if(a=c||m?{}:Jee(t),!o)return c?nee(t,JX(a,t)):tee(t,BX(a,t))}else{if(!Rt[p])return s?t:{};a=Wee(t,p,o)}}n||(n=new Ta);var y=n.get(t);if(y)return y;n.set(t,a),ite(t)?t.forEach(function(E){a.add(rf(E,e,i,E,t,n))}):Zee(t)&&t.forEach(function(E,k){a.set(k,rf(E,e,i,k,t,n))});var b=u?c?aee:Bw:c?_S:kS,S=l?void 0:b(t);return HZ(S||t,function(E,k){S&&(k=E,E=t[k]),lD(a,k,rf(E,e,i,k,t,n))}),a}var Rte=1,Ite=4;function TS(t){return rf(t,Rte|Ite)}var Ate="[object Symbol]";function Mte(t){return typeof t=="symbol"||La(t)&&xu(t)==Ate}function Dte(t,e){for(var i=-1,r=t==null?0:t.length,s=Array(r);++i<r;)s[i]=e(t[i],i,t);return s}var Tt;(function(t){t.GroupCall="GROUP_CALL",t.Webinar="WEBINAR",t.AudioRoom="AUDIO_ROOM",t.Livestream="LIVESTREAM",t.Chat="CHAT"})(Tt||(Tt={}));var zv;(function(t){t.Skip="SKIP",t.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",t.SkipOnAccept="SKIP_ON_ACCEPT"})(zv||(zv={}));var ct;(function(t){t.Allowed="ALLOWED",t.NotAllowed="NOT_ALLOWED",t.CanRequest="CAN_REQUEST"})(ct||(ct={}));var Fv;(function(t){t.Allowed="ALLOWED",t.NotAllowed="NOT_ALLOWED"})(Fv||(Fv={}));var $C;(function(t){t.FULL_ACCESS="FULL_ACCESS",t.VIEW_ONLY="VIEW_ONLY"})($C||($C={}));const Ote={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:LY("#2160FD"),background:NY("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function CD(){return TS(Ote)}const Lte={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:zv.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:ct.Allowed,can_consume:Fv.Allowed},audio:{can_produce:ct.Allowed},screenshare:{can_produce:ct.Allowed,can_consume:Fv.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1},channel:{can_create:"ALL",can_delete:"ALL",can_update:"ALL",can_read_all:!1},message:{can_delete:"ALL",can_edit:"ALL",delete_cutoff_time_seconds:0,edit_cutoff_time_seconds:0}},hidden_participant:!1,is_recorder:!1,recorder_type:gd.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{oldTheme:{setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",textPrimary:"#EEEEEE",videoBackground:"#1A1A1A"},dimensions:{mode:"fillParent"},grid:{multi:{maxVideoCount:6,videoFit:"cover"},single:{maxVideoCount:6,videoFit:"cover"},defaultView:"MULTI"},controls:{pip_toggle:!1},plugins:[]},design_tokens:CD(),config_diff:{}},config:{view_type:Tt.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"hybrid"};function Nte(){return TS(Lte)}gd.none,Hp.skip;const Ute={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:zv.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:ct.Allowed},audio:{can_produce:ct.Allowed},screenshare:{can_produce:ct.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:gd.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{design_tokens:CD(),config_diff:{}},config:{view_type:Tt.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"2.0.0"};function CS(){return TS(Ute)}var on={},jte={get exports(){return on},set exports(t){on=t}},Nb,zC;function $te(){if(zC)return Nb;zC=1;var t=1e3,e=t*60,i=e*60,r=i*24,s=r*7,n=r*365.25;Nb=function(l,p){p=p||{};var m=typeof l;if(m==="string"&&l.length>0)return a(l);if(m==="number"&&isFinite(l))return p.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(p){var m=parseFloat(p[1]),y=(p[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return m*n;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*i;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(l){var p=Math.abs(l);return p>=r?Math.round(l/r)+"d":p>=i?Math.round(l/i)+"h":p>=e?Math.round(l/e)+"m":p>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var p=Math.abs(l);return p>=r?u(l,p,r,"day"):p>=i?u(l,p,i,"hour"):p>=e?u(l,p,e,"minute"):p>=t?u(l,p,t,"second"):l+" ms"}function u(l,p,m,y){var b=p>=m*1.5;return Math.round(l/m)+" "+y+(b?"s":"")}return Nb}function zte(t){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=s,i.enabled=a,i.humanize=$te(),i.destroy=u,Object.keys(t).forEach(l=>{i[l]=t[l]}),i.names=[],i.skips=[],i.formatters={};function e(l){let p=0;for(let m=0;m<l.length;m++)p=(p<<5)-p+l.charCodeAt(m),p|=0;return i.colors[Math.abs(p)%i.colors.length]}i.selectColor=e;function i(l){let p,m=null,y,b;function S(...E){if(!S.enabled)return;const k=S,T=Number(new Date),I=T-(p||T);k.diff=I,k.prev=p,k.curr=T,p=T,E[0]=i.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let O=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(q,B)=>{if(q==="%%")return"%";O++;const Y=i.formatters[B];if(typeof Y=="function"){const X=E[O];q=Y.call(k,X),E.splice(O,1),O--}return q}),i.formatArgs.call(k,E),(k.log||i.log).apply(k,E)}return S.namespace=l,S.useColors=i.useColors(),S.color=i.selectColor(l),S.extend=r,S.destroy=i.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(y!==i.namespaces&&(y=i.namespaces,b=i.enabled(l)),b),set:E=>{m=E}}),typeof i.init=="function"&&i.init(S),S}function r(l,p){const m=i(this.namespace+(typeof p>"u"?":":p)+l);return m.log=this.log,m}function s(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let p;const m=(typeof l=="string"?l:"").split(/[\s,]+/),y=m.length;for(p=0;p<y;p++)m[p]&&(l=m[p].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function n(){const l=[...i.names.map(o),...i.skips.map(o).map(p=>"-"+p)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let p,m;for(p=0,m=i.skips.length;p<m;p++)if(i.skips[p].test(l))return!1;for(p=0,m=i.names.length;p<m;p++)if(i.names[p].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var Fte=zte;(function(t,e){e.formatArgs=r,e.save=s,e.load=n,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let l=0,p=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(l++,m==="%c"&&(p=l))}),c.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function n(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=Fte(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(jte,on);const Bd="mediasoup-client";let qr=class{constructor(t){t?(this._debug=on(`${Bd}:${t}`),this._warn=on(`${Bd}:WARN:${t}`),this._error=on(`${Bd}:ERROR:${t}`)):(this._debug=on(Bd),this._warn=on(`${Bd}:WARN`),this._error=on(`${Bd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const Vte=new qr("EnhancedEventEmitter");let Ls=class extends Er.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(t,...e){return super.emit(t,...e)}safeEmit(t,...e){const i=super.listenerCount(t);try{return super.emit(t,...e)}catch(r){return Vte.error("safeEmit() | event listener threw an error [eventName:%s]:%o",t,r),Boolean(i)}}on(t,e){return super.on(t,e),this}off(t,e){return super.off(t,e),this}addListener(t,e){return super.on(t,e),this}prependListener(t,e){return super.prependListener(t,e),this}once(t,e){return super.once(t,e),this}prependOnceListener(t,e){return super.prependOnceListener(t,e),this}removeListener(t,e){return super.off(t,e),this}removeAllListeners(t){return super.removeAllListeners(t),this}listenerCount(t){return super.listenerCount(t)}listeners(t){return super.listeners(t)}rawListeners(t){return super.rawListeners(t)}},Ur=class PD extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,PD):this.stack=new Error(e).stack}},Gt=class RD extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,RD):this.stack=new Error(e).stack}};function Oi(t,e){return typeof t>"u"?e:JSON.parse(JSON.stringify(t))}function Ub(){return Math.round(Math.random()*1e7)}var qw={};(function(t){const e=on("h264-profile-level-id");e.log=console.info.bind(console);const i=1,r=2,s=3,n=4,a=5;t.ProfileConstrainedBaseline=i,t.ProfileBaseline=r,t.ProfileMain=s,t.ProfileConstrainedHigh=n,t.ProfileHigh=a;const o=0,c=10,u=11,l=12,p=13,m=20,y=21,b=22,S=30,E=31,k=32,T=40,I=41,O=42,q=50,B=51,Y=52;t.Level1_b=o,t.Level1=c,t.Level1_1=u,t.Level1_2=l,t.Level1_3=p,t.Level2=m,t.Level2_1=y,t.Level2_2=b,t.Level3=S,t.Level3_1=E,t.Level3_2=k,t.Level4=T,t.Level4_1=I,t.Level4_2=O,t.Level5=q,t.Level5_1=B,t.Level5_2=Y;class X{constructor(ie,le){this.profile=ie,this.level=le}}t.ProfileLevelId=X;const be=new X(i,E),he=16;class ce{constructor(ie){this._mask=~yt("x",ie),this._maskedValue=yt("1",ie)}isMatch(ie){return this._maskedValue===(ie&this._mask)}}class et{constructor(ie,le,Qe){this.profile_idc=ie,this.profile_iop=le,this.profile=Qe}}const je=[new et(66,new ce("x1xx0000"),i),new et(77,new ce("1xxx0000"),i),new et(88,new ce("11xx0000"),i),new et(66,new ce("x0xx0000"),r),new et(88,new ce("10xx0000"),r),new et(77,new ce("0x0x0000"),s),new et(100,new ce("00000000"),a),new et(100,new ce("00001100"),n)];t.parseProfileLevelId=function(K){if(typeof K!="string"||K.length!==6)return null;const ie=parseInt(K,16);if(ie===0)return null;const le=ie&255,Qe=ie>>8&255,ht=ie>>16&255;let bt;switch(le){case u:{bt=Qe&he?o:u;break}case c:case l:case p:case m:case y:case b:case S:case E:case k:case T:case I:case O:case q:case B:case Y:{bt=le;break}default:return e("parseProfileLevelId() | unrecognized level_idc:%s",le),null}for(const ri of je)if(ht===ri.profile_idc&&ri.profile_iop.isMatch(Qe))return new X(ri.profile,bt);return e("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(K){if(K.level==o)switch(K.profile){case i:return"42f00b";case r:return"42100b";case s:return"4d100b";default:return e("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",K.profile),null}let ie;switch(K.profile){case i:{ie="42e0";break}case r:{ie="4200";break}case s:{ie="4d00";break}case n:{ie="640c";break}case a:{ie="6400";break}default:return e("profileLevelIdToString() | unrecognized profile:%s",K.profile),null}let le=K.level.toString(16);return le.length===1&&(le=`0${le}`),`${ie}${le}`},t.parseSdpProfileLevelId=function(K={}){const ie=K["profile-level-id"];return ie?t.parseProfileLevelId(ie):be},t.isSameProfile=function(K={},ie={}){const le=t.parseSdpProfileLevelId(K),Qe=t.parseSdpProfileLevelId(ie);return Boolean(le&&Qe&&le.profile===Qe.profile)},t.generateProfileLevelIdForAnswer=function(K={},ie={}){if(!K["profile-level-id"]&&!ie["profile-level-id"])return e("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const le=t.parseSdpProfileLevelId(K),Qe=t.parseSdpProfileLevelId(ie);if(!le)throw new TypeError("invalid local_profile_level_id");if(!Qe)throw new TypeError("invalid remote_profile_level_id");if(le.profile!==Qe.profile)throw new TypeError("H264 Profile mismatch");const ht=Ir(K)&&Ir(ie),bt=le.level,ri=Qe.level,Ar=Bt(bt,ri),Ht=ht?bt:Ar;return e("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",le.profile,Ht),t.profileLevelIdToString(new X(le.profile,Ht))};function yt(K,ie){return(ie[0]===K)<<7|(ie[1]===K)<<6|(ie[2]===K)<<5|(ie[3]===K)<<4|(ie[4]===K)<<3|(ie[5]===K)<<2|(ie[6]===K)<<1|(ie[7]===K)<<0}function Ot(K,ie){return K===o?ie!==c&&ie!==o:ie===o?K!==c:K<ie}function Bt(K,ie){return Ot(K,ie)?K:ie}function Ir(K={}){const ie=K["level-asymmetry-allowed"];return ie===1||ie==="1"}})(qw);const Bte="probator",Hte=1234,Wte=127;function jb(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(t.codecs&&!Array.isArray(t.codecs))throw new TypeError("caps.codecs is not an array");t.codecs||(t.codecs=[]);for(const e of t.codecs)Gte(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)qte(e)}function Gte(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=e.exec(t.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(t.kind=i[1].toLowerCase(),t.preferredPayloadType&&typeof t.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");t.kind==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const r of Object.keys(t.parameters)){let s=t.parameters[r];if(s===void 0&&(t.parameters[r]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${s}]`);if(r==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const r of t.rtcpFeedback)ID(r)}function ID(t){if(typeof t!="object")throw new TypeError("fb is not an object");if(!t.type||typeof t.type!="string")throw new TypeError("missing fb.type");(!t.parameter||typeof t.parameter!="string")&&(t.parameter="")}function qte(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(t.kind!=="audio"&&t.kind!=="video")throw new TypeError("invalid ext.kind");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.preferredId!="number")throw new TypeError("missing ext.preferredId");if(t.preferredEncrypt&&typeof t.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(t.preferredEncrypt||(t.preferredEncrypt=!1),t.direction&&typeof t.direction!="string")throw new TypeError("invalid ext.direction");t.direction||(t.direction="sendrecv")}function PS(t){if(typeof t!="object")throw new TypeError("params is not an object");if(t.mid&&typeof t.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(t.codecs))throw new TypeError("missing params.codecs");for(const e of t.codecs)Jte(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("params.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)Kte(e);if(t.encodings&&!Array.isArray(t.encodings))throw new TypeError("params.encodings is not an array");t.encodings||(t.encodings=[]);for(const e of t.encodings)Qte(e);if(t.rtcp&&typeof t.rtcp!="object")throw new TypeError("params.rtcp is not an object");t.rtcp||(t.rtcp={}),Yte(t.rtcp)}function Jte(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=e.exec(t.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof t.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const r of Object.keys(t.parameters)){let s=t.parameters[r];if(s===void 0&&(t.parameters[r]="",s=""),typeof s!="string"&&typeof s!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${s}]`);if(r==="apt"&&typeof s!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const r of t.rtcpFeedback)ID(r)}function Kte(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.id!="number")throw new TypeError("missing ext.id");if(t.encrypt&&typeof t.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");t.encrypt||(t.encrypt=!1),(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const e of Object.keys(t.parameters)){let i=t.parameters[e];if(i===void 0&&(t.parameters[e]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function Qte(t){if(typeof t!="object")throw new TypeError("encoding is not an object");if(t.ssrc&&typeof t.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(t.rid&&typeof t.rid!="string")throw new TypeError("invalid encoding.rid");if(t.rtx&&typeof t.rtx!="object")throw new TypeError("invalid encoding.rtx");if(t.rtx&&typeof t.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!t.dtx||typeof t.dtx!="boolean")&&(t.dtx=!1),t.scalabilityMode&&typeof t.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function Yte(t){if(typeof t!="object")throw new TypeError("rtcp is not an object");if(t.cname&&typeof t.cname!="string")throw new TypeError("invalid rtcp.cname");(!t.reducedSize||typeof t.reducedSize!="boolean")&&(t.reducedSize=!0)}function Zte(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(!t.numStreams||typeof t.numStreams!="object")throw new TypeError("missing caps.numStreams");Xte(t.numStreams)}function Xte(t){if(typeof t!="object")throw new TypeError("numStreams is not an object");if(typeof t.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof t.MIS!="number")throw new TypeError("missing numStreams.MIS")}function FC(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.streamId!="number")throw new TypeError("missing params.streamId");let e=!1;if(typeof t.ordered=="boolean"?e=!0:t.ordered=!0,t.maxPacketLifeTime&&typeof t.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(t.maxRetransmits&&typeof t.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(t.maxPacketLifeTime&&t.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(e&&t.ordered&&(t.maxPacketLifeTime||t.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!e&&(t.maxPacketLifeTime||t.maxRetransmits)&&(t.ordered=!1),t.label&&typeof t.label!="string")throw new TypeError("invalid params.label");if(t.protocol&&typeof t.protocol!="string")throw new TypeError("invalid params.protocol")}function eie(t,e){const i={codecs:[],headerExtensions:[]};for(const r of e.codecs||[]){if(pp(r))continue;const s=(t.codecs||[]).find(a=>AD(a,r,{strict:!0,modify:!0}));if(!s)continue;const n={mimeType:s.mimeType,kind:s.kind,clockRate:s.clockRate,channels:s.channels,localPayloadType:s.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:r.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:s.parameters,remoteParameters:r.parameters,rtcpFeedback:nie(s,r)};i.codecs.push(n)}for(const r of i.codecs){const s=t.codecs.find(a=>pp(a)&&a.parameters.apt===r.localPayloadType),n=e.codecs.find(a=>pp(a)&&a.parameters.apt===r.remotePayloadType);s&&n&&(r.localRtxPayloadType=s.preferredPayloadType,r.remoteRtxPayloadType=n.preferredPayloadType)}for(const r of e.headerExtensions){const s=t.headerExtensions.find(a=>sie(a,r));if(!s)continue;const n={kind:r.kind,uri:r.uri,sendId:s.preferredId,recvId:r.preferredId,encrypt:s.preferredEncrypt,direction:"sendrecv"};switch(r.direction){case"sendrecv":n.direction="sendrecv";break;case"recvonly":n.direction="sendonly";break;case"sendonly":n.direction="recvonly";break;case"inactive":n.direction="inactive";break}i.headerExtensions.push(n)}return i}function tie(t){const e={codecs:[],headerExtensions:[]};for(const i of t.codecs){const r={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(e.codecs.push(r),!i.remoteRtxPayloadType)continue;const s={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};e.codecs.push(s)}for(const i of t.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const r={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};e.headerExtensions.push(r)}return e}function Ns(t,e){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of e.codecs){if(r.kind!==t)continue;const s={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(s),r.localRtxPayloadType){const n={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(n)}}for(const r of e.headerExtensions){if(r.kind&&r.kind!==t||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const s={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(s)}return i}function qn(t,e){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of e.codecs){if(r.kind!==t)continue;const s={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.remoteParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(s),r.localRtxPayloadType){const n={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(n)}}for(const r of e.headerExtensions){if(r.kind&&r.kind!==t||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const s={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(s)}if(i.headerExtensions.some(r=>r.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(s=>s.type!=="goog-remb");else if(i.headerExtensions.some(r=>r.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(s=>s.type!=="transport-cc");else for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(s=>s.type!=="transport-cc"&&s.type!=="goog-remb");return i}function mn(t,e){const i=[];if(!e)i.push(t[0]),pp(t[1])&&i.push(t[1]);else{for(let r=0;r<t.length;++r)if(AD(t[r],e)){i.push(t[r]),pp(t[r+1])&&i.push(t[r+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function iie(t){t=Oi(t,{}),PS(t);const e={mid:Bte,codecs:[],headerExtensions:[],encodings:[{ssrc:Hte}],rtcp:{cname:"probator"}};return e.codecs.push(t.codecs[0]),e.codecs[0].payloadType=Wte,e.headerExtensions=t.headerExtensions,e}function VC(t,e){return e.codecs.some(i=>i.kind===t)}function rie(t,e){if(PS(t),t.codecs.length===0)return!1;const i=t.codecs[0];return e.codecs.some(r=>r.remotePayloadType===i.payloadType)}function pp(t){return t?/.+\/rtx$/i.test(t.mimeType):!1}function AD(t,e,{strict:i=!1,modify:r=!1}={}){const s=t.mimeType.toLowerCase(),n=e.mimeType.toLowerCase();if(s!==n||t.clockRate!==e.clockRate||t.channels!==e.channels)return!1;switch(s){case"video/h264":{if(i){const a=t.parameters["packetization-mode"]||0,o=e.parameters["packetization-mode"]||0;if(a!==o||!qw.isSameProfile(t.parameters,e.parameters))return!1;let c;try{c=qw.generateProfileLevelIdForAnswer(t.parameters,e.parameters)}catch{return!1}r&&(c?(t.parameters["profile-level-id"]=c,e.parameters["profile-level-id"]=c):(delete t.parameters["profile-level-id"],delete e.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const a=t.parameters["profile-id"]||0,o=e.parameters["profile-id"]||0;if(a!==o)return!1}break}}return!0}function sie(t,e){return!(t.kind&&e.kind&&t.kind!==e.kind||t.uri!==e.uri)}function nie(t,e){const i=[];for(const r of t.rtcpFeedback||[]){const s=(e.rtcpFeedback||[]).find(n=>n.type===r.type&&(n.parameter===r.parameter||!n.parameter&&!r.parameter));s&&i.push(s)}return i}var nd={},Wy={},aie=Vw&&Vw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wy,"__esModule",{value:!0});Wy.Logger=void 0;const Hd=aie(on),Wd="awaitqueue";let oie=class{constructor(t){t?(this._debug=(0,Hd.default)(`${Wd}:${t}`),this._warn=(0,Hd.default)(`${Wd}:WARN:${t}`),this._error=(0,Hd.default)(`${Wd}:ERROR:${t}`)):(this._debug=(0,Hd.default)(Wd),this._warn=(0,Hd.default)(`${Wd}:WARN`),this._error=(0,Hd.default)(`${Wd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Wy.Logger=oie;Object.defineProperty(nd,"__esModule",{value:!0});var MD=nd.AwaitQueue=nd.AwaitQueueRemovedTaskError=nd.AwaitQueueStoppedError=void 0;const cie=Wy,qa=new cie.Logger;class RS extends Error{constructor(e){super(e!=null?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,RS)}}nd.AwaitQueueStoppedError=RS;class Gy extends Error{constructor(e){super(e!=null?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Gy)}}nd.AwaitQueueRemovedTaskError=Gy;class die{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,i){if(i=i!=null?i:e.name,qa.debug(`push() [name:${i}]`),typeof e!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(e,"name",{value:i})}catch{}return new Promise((r,s)=>{const n={id:this.nextTaskId++,task:e,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),qa.debug(`resolving task [name:${n.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),qa.debug(`rejecting task [name:${n.name}]: %s`,String(a)),s(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){qa.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())qa.debug(`stop() | stopping task [name:${e.name}]`);this.stopping=!1}remove(e){qa.debug(`remove() [taskIdx:${e}]`);const i=Array.from(this.pendingTasks.values())[e];if(!i){qa.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}i.reject(new Gy)}dump(){const e=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0}))}async execute(e){if(qa.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const i=await e.task();e.resolve(i)}catch(i){e.reject(i)}}}MD=nd.AwaitQueue=die;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let BC;var $b=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Vw):t=>(BC||(BC=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const xn=new qr("Producer");let lie=class extends Ls{constructor({id:t,localId:e,rtpSender:i,track:r,rtpParameters:s,stopTracks:n,disableTrackOnPause:a,zeroRtpOnPause:o,appData:c}){super(),this._closed=!1,this._observer=new Ls,xn.debug("constructor()"),this._id=t,this._localId=e,this._rtpSender=i,this._track=r,this._kind=r.kind,this._rtpParameters=s,this._paused=a?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=n,this._disableTrackOnPause=a,this._zeroRtpOnPause=o,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(xn.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(xn.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new Gt("closed");return new Promise((t,e)=>{this.safeEmit("@getstats",t,e)})}pause(){if(xn.debug("pause()"),this._closed){xn.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((t,e)=>{this.safeEmit("@pause",t,e)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(xn.debug("resume()"),this._closed){xn.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((t,e)=>{this.safeEmit("@resume",t,e)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:t}){if(xn.debug("replaceTrack() [track:%o]",t),this._closed){if(t&&this._stopTracks)try{t.stop()}catch{}throw new Gt("closed")}else if(t&&t.readyState==="ended")throw new Gt("track ended");if(t===this._track){xn.debug("replaceTrack() | same track, ignored");return}await new Promise((e,i)=>{this.safeEmit("@replacetrack",t,e,i)}),this.destroyTrack(),this._track=t,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(t){if(this._closed)throw new Gt("closed");if(this._kind!=="video")throw new Ur("not a video Producer");if(typeof t!="number")throw new TypeError("invalid spatialLayer");t!==this._maxSpatialLayer&&(await new Promise((e,i)=>{this.safeEmit("@setmaxspatiallayer",t,e,i)}).catch(()=>{}),this._maxSpatialLayer=t)}async setRtpEncodingParameters(t){if(this._closed)throw new Gt("closed");if(typeof t!="object")throw new TypeError("invalid params");await new Promise((e,i)=>{this.safeEmit("@setrtpencodingparameters",t,e,i)})}onTrackEnded(){xn.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};const En=new qr("Consumer");let uie=class extends Ls{constructor({id:t,localId:e,producerId:i,rtpReceiver:r,track:s,rtpParameters:n,appData:a}){super(),this._closed=!1,this._observer=new Ls,En.debug("constructor()"),this._id=t,this._localId=e,this._producerId=i,this._rtpReceiver=r,this._track=s,this._rtpParameters=n,this._paused=!s.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(En.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(En.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new Gt("closed");return new Promise((t,e)=>{this.safeEmit("@getstats",t,e)})}pause(){if(En.debug("pause()"),this._closed){En.error("pause() | Consumer closed");return}if(this._paused){En.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(En.debug("resume()"),this._closed){En.error("resume() | Consumer closed");return}if(!this._paused){En.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){En.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};const ia=new qr("DataProducer");class hie extends Ls{constructor({id:e,dataChannel:i,sctpStreamParameters:r,appData:s}){super(),this._closed=!1,this._observer=new Ls,ia.debug("constructor()"),this._id=e,this._dataChannel=i,this._sctpStreamParameters=r,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(ia.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(ia.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(ia.debug("send()"),this._closed)throw new Gt("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(ia.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:i}=e;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?ia.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):ia.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(ia.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||ia.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}const dc=new qr("DataConsumer");class pie extends Ls{constructor({id:e,dataProducerId:i,dataChannel:r,sctpStreamParameters:s,appData:n}){super(),this._closed=!1,this._observer=new Ls,dc.debug("constructor()"),this._id=e,this._dataProducerId=i,this._dataChannel=r,this._sctpStreamParameters=s,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(dc.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(dc.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(dc.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:i}=e;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?dc.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):dc.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(dc.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}const Ni=new qr("Transport");class gie{constructor(e){this.consumerOptions=e,this.promise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}}let mie=class extends Ls{constructor({direction:t,id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l,handlerFactory:p,extendedRtpCapabilities:m,canProduceByKind:y}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new MD,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new Ls,Ni.debug("constructor() [id:%s, direction:%s]",e,t),this._id=e,this._direction=t,this._extendedRtpCapabilities=m,this._canProduceByKind=y,this._maxSctpMessageSize=n?n.maxMessageSize:null,c=Oi(c,{}),delete c.iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=p(),this._handler.run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:m}),this._appData=l||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}get producers(){return this._producers}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){Ni.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const t of this._producers.values())t.transportClosed();this._producers.clear();for(const t of this._consumers.values())t.transportClosed();this._consumers.clear();for(const t of this._dataProducers.values())t.transportClosed();this._dataProducers.clear();for(const t of this._dataConsumers.values())t.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new Gt("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:t}){if(Ni.debug("restartIce()"),this._closed)throw new Gt("closed");if(!t)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(t),"transport.restartIce()")}async updateIceServers({iceServers:t}={}){if(Ni.debug("updateIceServers()"),this._closed)throw new Gt("closed");if(!Array.isArray(t))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(t),"transport.updateIceServers()")}async produce({track:t,encodings:e,codecOptions:i,codec:r,stopTracks:s=!0,disableTrackOnPause:n=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(Ni.debug("produce() [track:%o]",t),this._closed)throw new Gt("closed");if(t){if(this._direction!=="send")throw new Ur("not a sending Transport");if(this._canProduceByKind[t.kind]){if(t.readyState==="ended")throw new Gt("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new Ur(`cannot produce ${t.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let c;if(e&&!Array.isArray(e))throw TypeError("encodings must be an array");e&&e.length===0?c=void 0:e&&(c=e.map(m=>{const y={active:!0};return m.active===!1&&(y.active=!1),typeof m.dtx=="boolean"&&(y.dtx=m.dtx),typeof m.scalabilityMode=="string"&&(y.scalabilityMode=m.scalabilityMode),typeof m.scaleResolutionDownBy=="number"&&(y.scaleResolutionDownBy=m.scaleResolutionDownBy),typeof m.maxBitrate=="number"&&(y.maxBitrate=m.maxBitrate),typeof m.maxFramerate=="number"&&(y.maxFramerate=m.maxFramerate),typeof m.adaptivePtime=="boolean"&&(y.adaptivePtime=m.adaptivePtime),typeof m.priority=="string"&&(y.priority=m.priority),typeof m.networkPriority=="string"&&(y.networkPriority=m.networkPriority),y}));const{localId:u,rtpParameters:l,rtpSender:p}=await this._handler.send({track:t,encodings:c,codecOptions:i,codec:r});try{PS(l);const{id:m}=await new Promise((b,S)=>{this.safeEmit("produce",{kind:t.kind,rtpParameters:l,appData:o},b,S)}),y=new lie({id:m,localId:u,rtpSender:p,track:t,rtpParameters:l,stopTracks:s,disableTrackOnPause:n,zeroRtpOnPause:a,appData:o});return this._producers.set(y.id,y),this.handleProducer(y),this._observer.safeEmit("newproducer",y),y}catch(m){throw this._handler.stopSending(u).catch(()=>{}),m}},"transport.produce()").catch(c=>{if(s)try{t.stop()}catch{}throw c})}async consume({id:t,producerId:e,kind:i,rtpParameters:r,streamId:s,appData:n={}}){if(Ni.debug("consume()"),r=Oi(r,void 0),this._closed)throw new Gt("closed");if(this._direction!=="recv")throw new Ur("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing id");if(typeof e!="string")throw new TypeError("missing producerId");if(i!=="audio"&&i!=="video")throw new TypeError(`invalid kind '${i}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object");if(!rie(r,this._extendedRtpCapabilities))throw new Ur("cannot consume this Producer");const a=new gie({id:t,producerId:e,kind:i,rtpParameters:r,streamId:s,appData:n});return this._pendingConsumerTasks.push(a),$b(()=>{if(this._closed)throw new Gt("closed");this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),a.promise}async produceData({ordered:t=!0,maxPacketLifeTime:e,maxRetransmits:i,label:r="",protocol:s="",appData:n={}}={}){if(Ni.debug("produceData()"),this._closed)throw new Gt("closed");if(this._direction!=="send")throw new Ur("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object")}else throw new Ur("SCTP not enabled by remote Transport");return(e||i)&&(t=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:t,maxPacketLifeTime:e,maxRetransmits:i,label:r,protocol:s});FC(o);const{id:c}=await new Promise((l,p)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:r,protocol:s,appData:n},l,p)}),u=new hie({id:c,dataChannel:a,sctpStreamParameters:o,appData:n});return this._dataProducers.set(u.id,u),this.handleDataProducer(u),this._observer.safeEmit("newdataproducer",u),u},"transport.produceData()")}async consumeData({id:t,dataProducerId:e,sctpStreamParameters:i,label:r="",protocol:s="",appData:n={}}){if(Ni.debug("consumeData()"),i=Oi(i,void 0),this._closed)throw new Gt("closed");if(this._direction!=="recv")throw new Ur("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof t!="string")throw new TypeError("missing id");if(typeof e!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object")}else throw new Ur("SCTP not enabled by remote Transport");return FC(i),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:i,label:r,protocol:s}),o=new pie({id:t,dataProducerId:e,dataChannel:a,sctpStreamParameters:i,appData:n});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){Ni.debug("createPendingConsumers() | there is no Consumer to be created");return}const t=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let e;const i=[];for(const r of t){const{id:s,kind:n,rtpParameters:a,streamId:o}=r.consumerOptions;i.push({trackId:s,kind:n,rtpParameters:a,streamId:o})}try{const r=await this._handler.receive(i);for(let s=0;s<r.length;s++){const n=t[s],a=r[s],{id:o,producerId:c,kind:u,rtpParameters:l,appData:p}=n.consumerOptions,{localId:m,rtpReceiver:y,track:b}=a,S=new uie({id:o,localId:m,producerId:c,rtpReceiver:y,track:b,rtpParameters:l,appData:p});this._consumers.set(S.id,S),this.handleConsumer(S),!this._probatorConsumerCreated&&!e&&u==="video"&&(e=S),this._observer.safeEmit("newconsumer",S),n.resolve(S)}}catch(r){for(const s of t)s.reject(r)}if(e)try{const r=iie(e.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:r}]),Ni.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(r){Ni.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",r)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){Ni.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const t=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const e=t.map(i=>i.localId);await this._handler.pauseReceiving(e)}catch(e){Ni.error("pausePendingConsumers() | failed to pause Consumers:",e)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){Ni.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const t=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const e=t.map(i=>i.localId);await this._handler.resumeReceiving(e)}catch(e){Ni.error("resumePendingConsumers() | failed to resume Consumers:",e)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){Ni.debug("closePendingConsumers() | there is no Consumer to be closed");return}const t=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(t.map(e=>e.localId))}catch(e){Ni.error("closePendingConsumers() | failed to close Consumers:",e)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const t=this._handler;t.on("@connect",({dtlsParameters:e},i,r)=>{if(this._closed){r(new Gt("closed"));return}this.safeEmit("connect",{dtlsParameters:e},i,r)}),t.on("@connectionstatechange",e=>{e!==this._connectionState&&(Ni.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))})}handleProducer(t){t.on("@close",()=>{this._producers.delete(t.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(t.localId),"producer @close event").catch(e=>Ni.warn("producer.close() failed:%o",e))}),t.on("@pause",(e,i)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(t.localId),"producer @pause event").then(e).catch(i)}),t.on("@resume",(e,i)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(t.localId),"producer @resume event").then(e).catch(i)}),t.on("@replacetrack",(e,i,r)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(t.localId,e),"producer @replacetrack event").then(i).catch(r)}),t.on("@setmaxspatiallayer",(e,i,r)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(t.localId,e),"producer @setmaxspatiallayer event").then(i).catch(r)}),t.on("@setrtpencodingparameters",(e,i,r)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(t.localId,e),"producer @setrtpencodingparameters event").then(i).catch(r)}),t.on("@getstats",(e,i)=>{if(this._closed)return i(new Gt("closed"));this._handler.getSenderStats(t.localId).then(e).catch(i)})}handleConsumer(t){t.on("@close",()=>{this._consumers.delete(t.id),this._pendingPauseConsumers.delete(t.id),this._pendingResumeConsumers.delete(t.id),!this._closed&&(this._pendingCloseConsumers.set(t.id,t),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),t.on("@pause",()=>{this._pendingResumeConsumers.has(t.id)&&this._pendingResumeConsumers.delete(t.id),this._pendingPauseConsumers.set(t.id,t),$b(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),t.on("@resume",()=>{this._pendingPauseConsumers.has(t.id)&&this._pendingPauseConsumers.delete(t.id),this._pendingResumeConsumers.set(t.id,t),$b(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),t.on("@getstats",(e,i)=>{if(this._closed)return i(new Gt("closed"));this._handler.getReceiverStats(t.localId).then(e).catch(i)})}handleDataProducer(t){t.on("@close",()=>{this._dataProducers.delete(t.id)})}handleDataConsumer(t){t.on("@close",()=>{this._dataConsumers.delete(t.id)})}};const ir=new qr("Device");function fie(){var t,e,i,r;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){ir.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(ir.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(ir.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){let s=navigator.userAgent;s=s==null?void 0:s.replace("motorola edge","motorola x");const n=dS.getParser(s),a=n.getEngine();if(n.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(n.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(n.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(n.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}}))return"Safari12";if(n.satisfies({firefox:">=111"}))return"Firefox111";if(n.satisfies({firefox:">=60"}))return"Firefox60";if(n.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||((e=(t=n.parsedResult)===null||t===void 0?void 0:t.os)===null||e===void 0?void 0:e.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(n.satisfies({"microsoft edge":">=11"})&&n.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(a.name&&a.name.toLowerCase()==="blink"){const o=s.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(o){const c=Number(o[1]);return c>=111?"Chrome111":c>=74?"Chrome74":"Chrome70"}else return"Chrome111"}else{if(((r=(i=n.parsedResult)===null||i===void 0?void 0:i.os)===null||r===void 0?void 0:r.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||a.name&&a.name.toLowerCase()==="webkit"&&a.version&&parseFloat(a.version)>605)return"Safari12";ir.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",n.getBrowserName(),n.getBrowserVersion());return}}else{ir.warn("this._detectDevice() | unknown device");return}}class vie{constructor({handlerName:e,handlerFactory:i,Handler:r}={}){if(this._loaded=!1,this._observer=new Ls,ir.debug("constructor()"),r)if(ir.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof r=="string")e=r;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(e&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(e)ir.debug("constructor() | handler given: %s",e);else if(e=fie(),e)ir.debug("constructor() | detected handler: %s",e);else throw new Ur("device not supported");this.switchDevice(e)}const s=this._handlerFactory();this._handlerName=s.name,s.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new Gt("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new Gt("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){ir.debug("load() [routerRtpCapabilities:%o]",e),e=Oi(e,void 0);let i;try{if(this._loaded)throw new Gt("already loaded");jb(e),i=this._handlerFactory();const r=await i.getNativeRtpCapabilities();ir.debug("load() | got native RTP capabilities:%o",r),jb(r),this._extendedRtpCapabilities=eie(r,e),ir.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=VC("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=VC("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=tie(this._extendedRtpCapabilities),jb(this._recvRtpCapabilities),ir.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await i.getNativeSctpCapabilities(),ir.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Zte(this._sctpCapabilities),ir.debug("load() succeeded"),this._loaded=!0,i.close()}catch(r){throw i&&i.close(),r}}canProduce(e){if(this._loaded){if(e!=="audio"&&e!=="video")throw new TypeError(`invalid kind "${e}"`)}else throw new Gt("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l}){return ir.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l})}createRecvTransport({id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l}){return ir.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l})}createTransport({direction:e,id:i,iceParameters:r,iceCandidates:s,dtlsParameters:n,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,appData:p}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof r!="object")throw new TypeError("missing iceParameters");if(Array.isArray(s)){if(typeof n!="object")throw new TypeError("missing dtlsParameters");if(a&&typeof a!="object")throw new TypeError("wrong sctpParameters");if(p&&typeof p!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new Gt("not loaded");const m=new mie({direction:e,id:i,iceParameters:r,iceCandidates:s,dtlsParameters:n,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,appData:p,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",m),m}}function fg({sdpObject:t}){const e=new Map,i=[];let r=!1,s=!1;for(const n of t.media){const a=n.type;switch(a){case"audio":{if(r)continue;r=!0;break}case"video":{if(s)continue;s=!0;break}default:continue}for(const o of n.rtp){const c={kind:a,mimeType:`${a}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};e.set(c.preferredPayloadType,c)}for(const o of n.fmtp||[]){const c=vM(o.config),u=e.get(o.payload);u&&(c&&c.hasOwnProperty("profile-level-id")&&(c["profile-level-id"]=String(c["profile-level-id"])),u.parameters=c)}for(const o of n.rtcpFb||[]){const c={type:o.type,parameter:o.subtype};if(c.parameter||delete c.parameter,o.payload!=="*"){const u=e.get(o.payload);if(!u)continue;u.rtcpFeedback.push(c)}else for(const u of e.values())u.kind===a&&!/.+\/rtx$/i.test(u.mimeType)&&u.rtcpFeedback.push(c)}for(const o of n.ext||[]){if(o["encrypt-uri"])continue;const c={kind:a,uri:o.uri,preferredId:o.value};i.push(c)}}return{codecs:Array.from(e.values()),headerExtensions:i}}function vg({sdpObject:t}){const e=(t.media||[]).find(s=>s.iceUfrag&&s.port!==0);if(!e)throw new Error("no active media section found");const i=e.fingerprint||t.fingerprint;let r;switch(e.setup){case"active":r="client";break;case"passive":r="server";break;case"actpass":r="auto";break}return{role:r,fingerprints:[{algorithm:i.type,value:i.hash}]}}function yg({offerMediaObject:t}){const e=(t.ssrcs||[]).find(i=>i.attribute==="cname");return e?e.value:""}function bg({offerRtpParameters:t,answerMediaObject:e}){for(const i of t.codecs){const r=i.mimeType.toLowerCase();if(r!=="audio/opus"||!(e.rtp||[]).find(a=>a.payload===i.payloadType))continue;e.fmtp=e.fmtp||[];let s=e.fmtp.find(a=>a.payload===i.payloadType);s||(s={payload:i.payloadType,config:""},e.fmtp.push(s));const n=vM(s.config);switch(r){case"audio/opus":{const a=i.parameters["sprop-stereo"];a!==void 0&&(n.stereo=a?1:0);break}}s.config="";for(const a of Object.keys(n))s.config&&(s.config+=";"),s.config+=`${a}=${n[a]}`}}function qo({offerMediaObject:t}){const e=new Set;for(const s of t.ssrcs||[]){const n=s.id;e.add(n)}if(e.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const s of t.ssrcGroups||[]){if(s.semantics!=="FID")continue;let[n,a]=s.ssrcs.split(/\s+/);n=Number(n),a=Number(a),e.has(n)&&(e.delete(n),e.delete(a),i.set(n,a))}for(const s of e)i.set(s,null);const r=[];for(const[s,n]of i){const a={ssrc:s};n&&(a.rtx={ssrc:n}),r.push(a)}return r}function Vv({offerMediaObject:t,numStreams:e}){if(e<=1)throw new TypeError("numStreams must be greater than 1");const i=(t.ssrcs||[]).find(p=>p.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[r,s]=i.value.split(" "),n=i.id;let a;(t.ssrcGroups||[]).some(p=>{if(p.semantics!=="FID")return!1;const m=p.ssrcs.split(/\s+/);return Number(m[0])===n?(a=Number(m[1]),!0):!1});const o=t.ssrcs.find(p=>p.attribute==="cname");if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,u=[],l=[];for(let p=0;p<e;++p)u.push(n+p),a&&l.push(a+p);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:u.join(" ")});for(let p=0;p<u.length;++p){const m=u[p];t.ssrcs.push({id:m,attribute:"cname",value:c}),t.ssrcs.push({id:m,attribute:"msid",value:`${r} ${s}`})}for(let p=0;p<l.length;++p){const m=u[p],y=l[p];t.ssrcs.push({id:y,attribute:"cname",value:c}),t.ssrcs.push({id:y,attribute:"msid",value:`${r} ${s}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${y}`})}}let Eu=class extends Ls{constructor(){super()}};class DD{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,planB:s=!1}){if(this._mediaObject={},this._planB=s,e&&this.setIceParameters(e),i){this._mediaObject.candidates=[];for(const n of i){const a={};a.component=1,a.foundation=n.foundation,a.ip=n.ip,a.port=n.port,a.priority=n.priority,a.transport=n.protocol,a.type=n.type,n.tcpType&&(a.tcptype=n.tcpType),this._mediaObject.candidates.push(a)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}muxSimulcastStreams(e){if(this._mediaObject.simulcast&&this._mediaObject.simulcast.list1){const i={};e.forEach(n=>{n.rid&&(i[n.rid]=n)});const r=this._mediaObject.simulcast.list1,s=yM(r);s.forEach(n=>{n.forEach(a=>{var o;a.paused=!(!((o=i[a.scid])===null||o===void 0)&&o.active)})}),this._mediaObject.simulcast.list1=s.map(n=>n.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}}class HC extends DD{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,sctpParameters:s,plainRtpParameters:n,planB:a=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:u,codecOptions:l,extmapAllowMixed:p=!1,forceGoogConference:m=!1}){switch(super({iceParameters:e,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,n?(this._mediaObject.connection={ip:n.ip,version:n.ipVersion},this._mediaObject.port=n.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const y of u.codecs){const b={payload:y.payloadType,codec:Jw(y),rate:y.clockRate};y.channels>1&&(b.encoding=y.channels),this._mediaObject.rtp.push(b);const S=Oi(y.parameters,{});if(l){const{opusStereo:k,opusFec:T,opusDtx:I,opusMaxPlaybackRate:O,opusMaxAverageBitrate:q,opusPtime:B,videoGoogleStartBitrate:Y,videoGoogleMaxBitrate:X,videoGoogleMinBitrate:be}=l,he=c.codecs.find(ce=>ce.payloadType===y.payloadType);switch(y.mimeType.toLowerCase()){case"audio/opus":{k!==void 0&&(he.parameters["sprop-stereo"]=k?1:0,S.stereo=k?1:0),T!==void 0&&(he.parameters.useinbandfec=T?1:0,S.useinbandfec=T?1:0),I!==void 0&&(he.parameters.usedtx=I?1:0,S.usedtx=I?1:0),O!==void 0&&(S.maxplaybackrate=O),q!==void 0&&(S.maxaveragebitrate=q),B!==void 0&&(he.parameters.ptime=B,S.ptime=B);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{Y!==void 0&&(S["x-google-start-bitrate"]=Y),X!==void 0&&(S["x-google-max-bitrate"]=X),be!==void 0&&(S["x-google-min-bitrate"]=be);break}}}const E={payload:y.payloadType,config:""};for(const k of Object.keys(S))E.config&&(E.config+=";"),E.config+=`${k}=${S[k]}`;E.config&&this._mediaObject.fmtp.push(E);for(const k of y.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:y.payloadType,type:k.type,subtype:k.parameter})}this._mediaObject.payloads=u.codecs.map(y=>y.payloadType).join(" "),this._mediaObject.ext=[];for(const y of u.headerExtensions)(o.ext||[]).some(b=>b.uri===y.uri)&&this._mediaObject.ext.push({uri:y.uri,value:y.id});if(p&&o.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const y of o.rids||[])y.direction==="send"&&this._mediaObject.rids.push({id:y.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const y of o.rids||[])y.direction==="send"&&this._mediaObject.rids.push({id:y.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",(this._planB||m)&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof o.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=s.port,this._mediaObject.maxMessageSize=s.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=s.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:s.port,maxMessageSize:s.maxMessageSize});break}}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){var i;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const a of e)a.rid&&(r[a.rid]=a);const s=this._mediaObject.simulcast.list1,n=yM(s);for(const a of n)for(const o of a)o.paused=!(!((i=r[o.scid])===null||i===void 0)&&i.active);this._mediaObject.simulcast.list1=n.map(a=>a.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}class WC extends DD{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,sctpParameters:s,plainRtpParameters:n,planB:a=!1,mid:o,kind:c,offerRtpParameters:u,streamId:l,trackId:p,oldDataChannelSpec:m=!1}){switch(super({iceParameters:e,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o),this._mediaObject.type=c,n?(this._mediaObject.connection={ip:n.ip,version:n.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=n.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},s?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${l||"-"} ${p}`);for(const E of u.codecs){const k={payload:E.payloadType,codec:Jw(E),rate:E.clockRate};E.channels>1&&(k.encoding=E.channels),this._mediaObject.rtp.push(k);const T={payload:E.payloadType,config:""};for(const I of Object.keys(E.parameters))T.config&&(T.config+=";"),T.config+=`${I}=${E.parameters[I]}`;T.config&&this._mediaObject.fmtp.push(T);for(const I of E.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:E.payloadType,type:I.type,subtype:I.parameter})}this._mediaObject.payloads=u.codecs.map(E=>E.payloadType).join(" "),this._mediaObject.ext=[];for(const E of u.headerExtensions)this._mediaObject.ext.push({uri:E.uri,value:E.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const y=u.encodings[0],b=y.ssrc,S=y.rtx&&y.rtx.ssrc?y.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],u.rtcp.cname&&this._mediaObject.ssrcs.push({id:b,attribute:"cname",value:u.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:b,attribute:"msid",value:`${l||"-"} ${p}`}),S&&(u.rtcp.cname&&this._mediaObject.ssrcs.push({id:S,attribute:"cname",value:u.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:S,attribute:"msid",value:`${l||"-"} ${p}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${b} ${S}`}));break}case"application":{m?(this._mediaObject.payloads=s.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:s.port,maxMessageSize:s.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=s.port,this._mediaObject.maxMessageSize=s.maxMessageSize);break}}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:i,trackId:r}){const s=e.encodings[0],n=s.ssrc,a=s.rtx&&s.rtx.ssrc?s.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const c of e.codecs){if(o.includes(String(c.payloadType)))continue;const u={payload:c.payloadType,codec:Jw(c),rate:c.clockRate};c.channels>1&&(u.encoding=c.channels),this._mediaObject.rtp.push(u);const l={payload:c.payloadType,config:""};for(const p of Object.keys(c.parameters))l.config&&(l.config+=";"),l.config+=`${p}=${c.parameters[p]}`;l.config&&this._mediaObject.fmtp.push(l);for(const p of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:p.type,subtype:p.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:n,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:n,attribute:"msid",value:`${i||"-"} ${r}`}),a&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${i||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${n} ${a}`}))}planBStopReceiving({offerRtpParameters:e}){const i=e.encodings[0],r=i.ssrc,s=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(n=>n.id!==r&&n.id!==s),s&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(n=>n.ssrcs!==`${r} ${s}`))}}function Jw(t){const e=new RegExp("^(audio|video)/(.+)","i").exec(t.mimeType);if(!e)throw new TypeError("invalid codec.mimeType");return e[2]}const zb=new qr("RemoteSdp");class wg{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:r,sctpParameters:s,plainRtpParameters:n,planB:a=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=i,this._dtlsParameters=r,this._sctpParameters=s,this._plainRtpParameters=n,this._planB=a,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const o=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[o-1].algorithm,hash:r.fingerprints[o-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}n&&(this._sdpObject.origin.address=n.ip,this._sdpObject.origin.ipVer=n.ipVersion)}updateIceParameters(e){zb.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(e)}updateDtlsRole(e){zb.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const i of this._mediaSections)i.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const i=this._mediaSections[e];if(i.closed)return{idx:e,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:i,offerRtpParameters:r,answerRtpParameters:s,codecOptions:n,extmapAllowMixed:a=!1,forceGoogConference:o=!1}){const c=new HC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:r,answerRtpParameters:s,codecOptions:n,extmapAllowMixed:a,forceGoogConference:o});i?this._replaceMediaSection(c,i):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}receive({mid:e,kind:i,offerRtpParameters:r,streamId:s,trackId:n}){const a=this._midToIndex.get(e);let o;if(a!==void 0&&(o=this._mediaSections[a]),o)o.planBReceive({offerRtpParameters:r,streamId:s,trackId:n}),this._replaceMediaSection(o);else{o=new WC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:i,offerRtpParameters:r,streamId:s,trackId:n});const c=this._mediaSections.find(u=>u.closed);c?this._replaceMediaSection(o,c.mid):this._addMediaSection(o)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const i=this._findMediaSection(e);return e===this._firstMid?(zb.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,i){const r=this._midToIndex.get(e);if(r===void 0)throw new Error(`no media section found with mid '${e}'`);const s=this._mediaSections[r];if(s===void 0)throw new Error(`no media section found with idx '${r}'`);s.muxSimulcastStreams(i),this._replaceMediaSection(s)}planBStopReceiving({mid:e,offerRtpParameters:i}){const r=this._findMediaSection(e);r.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:e}){const i=new HC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const i=new WC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,pn(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,i){if(typeof i=="string"){const r=this._midToIndex.get(i);if(r===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const s=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(s.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{const r=this._midToIndex.get(e.mid);if(r===void 0)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[r]=e,this._sdpObject.media[r]=e.getObject()}}_findMediaSection(e){const i=this._midToIndex.get(e);if(i===void 0)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}const yie=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function kg(t){const e=yie.exec(t||"");return e?{spatialLayers:Number(e[1]),temporalLayers:Number(e[2])}:{spatialLayers:1,temporalLayers:1}}const Fe=new qr("Chrome70"),GC={OS:1024,MIS:1024};class IS extends Eu{static createFactory(){return()=>new IS}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(Fe.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Fe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=ze(i.sdp);return fg({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return Fe.debug("getNativeSctpCapabilities()"),{numStreams:GC}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){Fe.debug("run()"),this._direction=e,this._remoteSdp=new wg({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:Ns("audio",l),video:Ns("video",l)},this._sendingRemoteRtpParametersByKind={audio:qn("audio",l),video:qn("video",l)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Fe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Fe.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(Fe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Fe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Fe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Fe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Fe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n;this.assertSendDirection(),Fe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=Oi(this._sendingRtpParametersByKind[e.kind],{});a.codecs=mn(a.codecs,s);const o=Oi(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=mn(o.codecs,s);const c=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),p=ze(l.sdp),m;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:p}),i&&i.length>1&&(Fe.debug("send() | enabling legacy simulcast"),p=ze(l.sdp),m=p.media[c.idx],Vv({offerMediaObject:m,numStreams:i.length}),l={type:"offer",sdp:pn(p)});let y=!1;const b=kg((i||[{}])[0].scalabilityMode);if(i&&i.length===1&&b.spatialLayers>1&&a.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Fe.debug("send() | enabling legacy simulcast for VP9 SVC"),y=!0,p=ze(l.sdp),m=p.media[c.idx],Vv({offerMediaObject:m,numStreams:b.spatialLayers}),l={type:"offer",sdp:pn(p)}),Fe.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),i){Fe.debug("send() | applying given encodings");const k=u.sender.getParameters();for(let T=0;T<(k.encodings||[]).length;++T){const I=k.encodings[T],O=i[T];if(!O)break;k.encodings[T]=Object.assign(I,O)}await u.sender.setParameters(k)}const S=u.mid;if(a.mid=S,p=ze(this._pc.localDescription.sdp),m=p.media[c.idx],a.rtcp.cname=yg({offerMediaObject:m}),a.encodings=qo({offerMediaObject:m}),i)for(let k=0;k<a.encodings.length;++k)i[k]&&Object.assign(a.encodings[k],i[k]);if(y&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const k of a.encodings)k.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const E={type:"answer",sdp:this._remoteSdp.getSdp()};return Fe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E),this._mapMidTransceiver.set(S,u),{localId:S,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),Fe.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();Fe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Fe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,i){this.assertSendDirection(),i?Fe.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Fe.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),Fe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Fe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Fe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),Fe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Fe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Fe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:r,protocol:n};Fe.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%GC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),p=ze(l.sdp),m=p.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),Fe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:m});const y={type:"answer",sdp:this._remoteSdp.getSdp()};Fe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:p,streamId:m}=c;Fe.debug("receive() [trackId:%s, kind:%s]",u,l);const y=p.mid||String(this._mapMidTransceiver.size);s.set(u,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:p,streamId:m||p.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Fe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=ze(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,p=s.get(u),m=o.media.find(y=>String(y.mid)===p);bg({offerRtpParameters:l,answerMediaObject:m})}a={type:"answer",sdp:pn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),Fe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=s.get(u),p=this._pc.getTransceivers().find(m=>m.mid===l);if(!p)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,p),r.push({localId:l,track:p.receiver.track,rtpReceiver:p.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){Fe.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Fe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Fe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:c,protocol:r};Fe.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};Fe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const m=await this._pc.createAnswer();if(!this._transportReady){const y=ze(m.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:y})}Fe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setLocalDescription(m),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=ze(this._pc.localDescription.sdp));const r=vg({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}const _e=new qr("Chrome74"),qC={OS:1024,MIS:1024};let bie=class OD extends Eu{static createFactory(){return()=>new OD}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(_e.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){_e.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=ze(i.sdp);return fg({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return _e.debug("getNativeSctpCapabilities()"),{numStreams:qC}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){_e.debug("run()"),this._direction=e,this._remoteSdp=new wg({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:Ns("audio",l),video:Ns("video",l)},this._sendingRemoteRtpParametersByKind={audio:qn("audio",l),video:qn("video",l)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(_e.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){_e.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(_e.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});_e.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n,a;this.assertSendDirection(),_e.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&i.length>1&&i.forEach((T,I)=>{T.rid=`r${I}`});const o=Oi(this._sendingRtpParametersByKind[e.kind],{});o.codecs=mn(o.codecs,s);const c=Oi(this._sendingRemoteRtpParametersByKind[e.kind],{});c.codecs=mn(c.codecs,s);const u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i});let p=await this._pc.createOffer(),m=ze(p.sdp),y;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:m});let b=!1;const S=kg((i||[{}])[0].scalabilityMode);i&&i.length===1&&S.spatialLayers>1&&o.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(_e.debug("send() | enabling legacy simulcast for VP9 SVC"),b=!0,m=ze(p.sdp),y=m.media[u.idx],Vv({offerMediaObject:y,numStreams:S.spatialLayers}),p={type:"offer",sdp:pn(m)}),_e.debug("send() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const E=l.mid;if(o.mid=E,m=ze(this._pc.localDescription.sdp),y=m.media[u.idx],o.rtcp.cname=yg({offerMediaObject:y}),!i)o.encodings=qo({offerMediaObject:y});else if(i.length===1){let T=qo({offerMediaObject:y});Object.assign(T[0],i[0]),b&&(T=[T[0]]),o.encodings=T}else o.encodings=i;if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const T of o.encodings)T.scalabilityMode?T.scalabilityMode=`L1T${S.temporalLayers}`:T.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:y,reuseMid:u.reuseMid,offerRtpParameters:o,answerRtpParameters:c,codecOptions:r,extmapAllowMixed:!0,forceGoogConference:(a=r==null?void 0:r.forceGoogConference)!==null&&a!==void 0?a:!1});const k={type:"answer",sdp:this._remoteSdp.getSdp()};return _e.debug("send() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.set(E,l),{localId:E,rtpParameters:o,rtpSender:l.sender}}async stopSending(e){this.assertSendDirection(),_e.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();_e.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),_e.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();_e.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),_e.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();_e.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?_e.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):_e.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),_e.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();_e.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),_e.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();_e.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};_e.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%qC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),p=ze(l.sdp),m=p.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),_e.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:m});const y={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:p,streamId:m}=c;_e.debug("receive() [trackId:%s, kind:%s]",u,l);const y=p.mid||String(this._mapMidTransceiver.size);s.set(u,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:p,streamId:m||p.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=ze(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,p=s.get(u),m=o.media.find(y=>String(y.mid)===p);bg({offerRtpParameters:l,answerMediaObject:m})}a={type:"answer",sdp:pn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),_e.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=s.get(u),p=this._pc.getTransceivers().find(m=>m.mid===l);if(p)this._mapMidTransceiver.set(l,p),r.push({localId:l,track:p.receiver.track,rtpReceiver:p.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){_e.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){_e.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){_e.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};_e.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const m=await this._pc.createAnswer();if(!this._transportReady){const y=ze(m.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:y})}_e.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setLocalDescription(m),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=ze(this._pc.localDescription.sdp));const r=vg({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const xe=new qr("Chrome111"),JC={OS:1024,MIS:1024};class AS extends Eu{static createFactory(){return()=>new AS}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(xe.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){xe.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=ze(i.sdp);return fg({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return xe.debug("getNativeSctpCapabilities()"),{numStreams:JC}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){xe.debug("run()"),this._direction=e,this._remoteSdp=new wg({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:Ns("audio",l),video:Ns("video",l)},this._sendingRemoteRtpParametersByKind={audio:qn("audio",l),video:qn("video",l)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(xe.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){xe.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(xe.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});xe.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();xe.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n;if(this.assertSendDirection(),xe.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&i.length>1){i.forEach((k,T)=>{k.rid=`r${T}`});let S=1,E=1;for(const k of i){const T=k.scalabilityMode?kg(k.scalabilityMode).temporalLayers:3;T>E&&(E=T)}for(const k of i)k.rid=`r${S++}`,k.scalabilityMode=`L1T${E}`}const a=Oi(this._sendingRtpParametersByKind[e.kind],{});a.codecs=mn(a.codecs,s);const o=Oi(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=mn(o.codecs,s);const c=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),l=await this._pc.createOffer();let p=ze(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:p}),xe.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m=u.mid;a.mid=m,p=ze(this._pc.localDescription.sdp);const y=p.media[c.idx];if(a.rtcp.cname=yg({offerMediaObject:y}),!i)a.encodings=qo({offerMediaObject:y});else if(i.length===1){const S=qo({offerMediaObject:y});Object.assign(S[0],i[0]),a.encodings=S}else a.encodings=i;this._remoteSdp.send({offerMediaObject:y,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return xe.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(m,u),{localId:m,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),xe.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();xe.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),xe.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();xe.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),xe.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();xe.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?xe.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):xe.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),xe.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();xe.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),xe.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();xe.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};xe.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%JC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),p=ze(l.sdp),m=p.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),xe.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:m});const y={type:"answer",sdp:this._remoteSdp.getSdp()};xe.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:p,streamId:m}=c;xe.debug("receive() [trackId:%s, kind:%s]",u,l);const y=p.mid||String(this._mapMidTransceiver.size);s.set(u,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:p,streamId:m||p.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=ze(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,p=s.get(u),m=o.media.find(y=>String(y.mid)===p);bg({offerRtpParameters:l,answerMediaObject:m})}a={type:"answer",sdp:pn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),xe.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=s.get(u),p=this._pc.getTransceivers().find(m=>m.mid===l);if(p)this._mapMidTransceiver.set(l,p),r.push({localId:l,track:p.receiver.track,rtpReceiver:p.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){xe.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();xe.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){xe.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();xe.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){xe.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();xe.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};xe.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};xe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const m=await this._pc.createAnswer();if(!this._transportReady){const y=ze(m.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:y})}xe.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setLocalDescription(m),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=ze(this._pc.localDescription.sdp));const r=vg({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}function wie(){const t=RTCRtpReceiver.getCapabilities(),e=Oi(t,{});for(const i of e.codecs){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType||`${i.kind}/${i.name}`,i.parameters){const r=i.parameters;r.apt&&(r.apt=Number(r.apt)),r["packetization-mode"]&&(r["packetization-mode"]=Number(r["packetization-mode"]))}for(const r of i.rtcpFeedback||[])r.parameter||(r.parameter="")}return e}function KC(t){const e=Oi(t,{});e.mid&&(e.muxId=e.mid,delete e.mid);for(const i of e.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return e}const pt=new qr("Edge11");class MS extends Eu{static createFactory(){return()=>new MS}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){pt.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const e of this._rtpSenders.values())try{e.stop()}catch{}for(const e of this._rtpReceivers.values())try{e.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return pt.debug("getNativeRtpCapabilities()"),wie()}async getNativeSctpCapabilities(){return pt.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){pt.debug("run()"),this._sendingRtpParametersByKind={audio:Ns("audio",l),video:Ns("video",l)},this._remoteIceParameters=i,this._remoteIceCandidates=r,this._remoteDtlsParameters=s,this._cname=`CNAME-${Ub()}`,this.setIceGatherer({iceServers:a,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new Ur("not supported")}async restartIce(e){if(pt.debug("restartIce()"),this._remoteIceParameters=e,!!this._transportReady){pt.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const i of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(i);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){pt.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),pt.debug("send() | calling new RTCRtpSender()");const n=new RTCRtpSender(e,this._dtlsTransport),a=Oi(this._sendingRtpParametersByKind[e.kind],{});a.codecs=mn(a.codecs,s);const o=a.codecs.some(l=>/.+\/rtx$/i.test(l.mimeType));i||(i=[{}]);for(const l of i)l.ssrc=Ub(),o&&(l.rtx={ssrc:Ub()});a.encodings=i,a.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=KC(a);pt.debug("send() | calling rtpSender.send() [params:%o]",c),await n.send(c);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(u,n),{localId:u,rtpParameters:a,rtpSender:n}}async stopSending(e){pt.debug("stopSending() [localId:%s]",e);const i=this._rtpSenders.get(e);if(!i)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{pt.debug("stopSending() | calling rtpSender.stop()"),i.stop()}catch(r){throw pt.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,i){i?pt.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):pt.debug("replaceTrack() [localId:%s, no track]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(i)}async setMaxSpatialLayer(e,i){pt.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const s=r.getParameters();s.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await r.setParameters(s)}async setRtpEncodingParameters(e,i){pt.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const s=r.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.setParameters(s)}async getSenderStats(e){const i=this._rtpSenders.get(e);if(!i)throw new Error("RTCRtpSender not found");return i.getStats()}async sendDataChannel(e){throw new Ur("not implemented")}async receive(e){const i=[];for(const r of e){const{trackId:s,kind:n}=r;pt.debug("receive() [trackId:%s, kind:%s]",s,n)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of e){const{trackId:s,kind:n,rtpParameters:a}=r;pt.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,n);o.addEventListener("error",l=>{pt.error('rtpReceiver "error" event [event:%o]',l)});const c=KC(a);pt.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await o.receive(c);const u=s;this._rtpReceivers.set(u,o),i.push({localId:u,track:o.track,rtpReceiver:o})}return i}async stopReceiving(e){for(const i of e){pt.debug("stopReceiving() [localId:%s]",i);const r=this._rtpReceivers.get(i);if(!r)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(i);try{pt.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(s){pt.warn("stopReceiving() | rtpReceiver.stop() failed:%o",s)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const i=this._rtpReceivers.get(e);if(!i)throw new Error("RTCRtpReceiver not found");return i.getStats()}async receiveDataChannel(e){throw new Ur("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:i}){const r=new RTCIceGatherer({iceServers:e||[],gatherPolicy:i||"all"});r.addEventListener("error",s=>{pt.error('iceGatherer "error" event [event:%o]',s)});try{r.gather()}catch(s){pt.debug("setIceGatherer() | iceGatherer.gather() failed: %s",s.toString())}this._iceGatherer=r}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("candidatepairchange",i=>{pt.debug('iceTransport "candidatepairchange" event [pair:%o]',i.pair)}),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{pt.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{pt.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),e.state==="closed"&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",i=>{pt.error('dtlsTransport "error" event [event:%o]',i)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){pt.debug("setupTransport()");const i=this._dtlsTransport.getLocalParameters();i.role=e,await new Promise((r,s)=>{this.safeEmit("@connect",{dtlsParameters:i},r,s)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(r=>r.algorithm==="sha-256"||r.algorithm==="sha-384"||r.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}const Ie=new qr("Firefox60"),QC={OS:16,MIS:2048};let YC=class LD extends Eu{static createFactory(e=!1){return()=>new LD(e)}constructor(e=!1){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1,this.supportsSendEncoding=!1,this.supportsSendEncoding=e}get name(){return"Firefox60"}close(){if(Ie.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ie.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const r=i.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const s=e.addTransceiver(r,{direction:"sendrecv"}),n=s.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];n.encodings=a,await s.sender.setParameters(n);const o=await e.createOffer();try{i.remove()}catch{}try{r.stop()}catch{}try{e.close()}catch{}const c=ze(o.sdp);return fg({sdpObject:c})}catch(s){try{i.remove()}catch{}try{r.stop()}catch{}try{e.close()}catch{}throw s}}async getNativeSctpCapabilities(){return Ie.debug("getNativeSctpCapabilities()"),{numStreams:QC}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){Ie.debug("run()"),this._direction=e,this._remoteSdp=new wg({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:Ns("audio",l),video:Ns("video",l)},this._sendingRemoteRtpParametersByKind={audio:qn("audio",l),video:qn("video",l)},this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ie.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){throw new Ur("not supported")}async restartIce(e){if(Ie.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Ie.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ie.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Ie.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){this.assertSendDirection(),Ie.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&(i=Oi(i,[]),i.length>1&&(i.forEach((S,E)=>{S.rid=`r${E}`}),i.reverse()));const n=Oi(this._sendingRtpParametersByKind[e.kind],{});n.codecs=mn(n.codecs,s);const a=Oi(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=mn(a.codecs,s);const o=this.supportsSendEncoding?{sendEncodings:i}:{},c=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],...o});if(!this.supportsSendEncoding&&i){const S=c.sender.getParameters();S.encodings=i,await c.sender.setParameters(S)}const u=await this._pc.createOffer();let l=ze(u.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l});const p=kg((i||[{}])[0].scalabilityMode);Ie.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const m=c.mid;n.mid=m,l=ze(this._pc.localDescription.sdp);const y=l.media[l.media.length-1];if(n.rtcp.cname=yg({offerMediaObject:y}),!i)n.encodings=qo({offerMediaObject:y});else if(i.length===1){const S=qo({offerMediaObject:y});Object.assign(S[0],i[0]),n.encodings=S}else n.encodings=i.reverse();if(n.encodings.length>1&&(n.codecs[0].mimeType.toLowerCase()==="video/vp8"||n.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const S of n.encodings)S.scalabilityMode?S.scalabilityMode=`L1T${p.temporalLayers}`:S.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:y,offerRtpParameters:n,answerRtpParameters:a,codecOptions:r,extmapAllowMixed:!0});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return Ie.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(m,c),{localId:m,rtpParameters:n,rtpSender:c.sender}}async stopSending(e){Ie.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const r=await this._pc.createOffer();Ie.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),Ie.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();Ie.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),Ie.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();Ie.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?Ie.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Ie.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),Ie.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");const s=r.sender.getParameters();i=s.encodings.length-1-i,s.encodings.forEach((o,c)=>{c>=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Ie.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),Ie.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Ie.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};Ie.debug("sendDataChannel() [options:%o]",a);const o=this._pc.createDataChannel(s,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%QC.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),l=ze(u.sdp),p=l.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l}),Ie.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:p});const m={type:"answer",sdp:this._remoteSdp.getSdp()};Ie.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const c={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:o,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const i=[],r=new Map;for(const o of e){const{trackId:c,kind:u,rtpParameters:l,streamId:p}=o;Ie.debug("receive() [trackId:%s, kind:%s]",c,u);const m=l.mid||String(this._mapMidTransceiver.size);r.set(c,m),this._remoteSdp.receive({mid:m,kind:u,offerRtpParameters:l,streamId:p||l.rtcp.cname,trackId:c})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};Ie.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let n=await this._pc.createAnswer();const a=ze(n.sdp);for(const o of e){const{trackId:c,rtpParameters:u}=o,l=r.get(c),p=a.media.find(m=>String(m.mid)===l);bg({offerRtpParameters:u,answerMediaObject:p}),n={type:"answer",sdp:pn(a)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:a}),Ie.debug("receive() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const o of e){const{trackId:c}=o,u=r.get(c),l=this._pc.getTransceivers().find(p=>p.mid===u);if(!l)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,l),i.push({localId:u,track:l.receiver.track,rtpReceiver:l.receiver})}return i}async stopReceiving(e){this.assertRecvDirection();for(const s of e){Ie.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ie.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Ie.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){Ie.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ie.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Ie.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){Ie.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ie.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Ie.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){this.assertRecvDirection();const{streamId:s,ordered:n,maxPacketLifeTime:a,maxRetransmits:o}=e,c={negotiated:!0,id:s,ordered:n,maxPacketLifeTime:a,maxRetransmits:o,protocol:r};Ie.debug("receiveDataChannel() [options:%o]",c);const u=this._pc.createDataChannel(i,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const l={type:"offer",sdp:this._remoteSdp.getSdp()};Ie.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const p=await this._pc.createAnswer();if(!this._transportReady){const m=ze(p.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:m})}Ie.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=ze(this._pc.localDescription.sdp));const r=vg({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const Se=new qr("Safari12"),ZC={OS:1024,MIS:1024};let kie=class ND extends Eu{static createFactory(){return()=>new ND}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(Se.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Se.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const r=ze(i.sdp);return fg({sdpObject:r})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return Se.debug("getNativeSctpCapabilities()"),{numStreams:ZC}}run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){Se.debug("run()"),this._direction=e,this._remoteSdp=new wg({iceParameters:i,iceCandidates:r,dtlsParameters:s,sctpParameters:n}),this._sendingRtpParametersByKind={audio:Ns("audio",l),video:Ns("video",l)},this._sendingRemoteRtpParametersByKind={audio:qn("audio",l),video:qn("video",l)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Se.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Se.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(Se.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Se.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:r,codec:s}){var n;this.assertSendDirection(),Se.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=Oi(this._sendingRtpParametersByKind[e.kind],{});a.codecs=mn(a.codecs,s);const o=Oi(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=mn(o.codecs,s);const c=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),p=ze(l.sdp),m;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:p});const y=kg((i||[{}])[0].scalabilityMode);i&&i.length>1&&(Se.debug("send() | enabling legacy simulcast"),p=ze(l.sdp),m=p.media[c.idx],Vv({offerMediaObject:m,numStreams:i.length}),l={type:"offer",sdp:pn(p)}),Se.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const b=u.mid;if(a.mid=b,p=ze(this._pc.localDescription.sdp),m=p.media[c.idx],a.rtcp.cname=yg({offerMediaObject:m}),a.encodings=qo({offerMediaObject:m}),i)for(let E=0;E<a.encodings.length;++E)i[E]&&Object.assign(a.encodings[E],i[E]);if(a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const E of a.encodings)E.scalabilityMode?E.scalabilityMode=`L1T${y.temporalLayers}`:E.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return Se.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(b,u),{localId:b,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),Se.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();Se.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),Se.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();Se.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async resumeSending(e){this.assertSendDirection(),Se.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();Se.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async replaceTrack(e,i){this.assertSendDirection(),i?Se.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Se.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),Se.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Se.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),Se.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((o,c)=>{s.encodings[c]={...o,...i}}),await r.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(e,s.encodings);const n=await this._pc.createOffer();Se.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:r,label:s,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:r,protocol:n};Se.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(s,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%ZC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),p=ze(l.sdp),m=p.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:p}),Se.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:m});const y={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const r=[],s=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:p,streamId:m}=c;Se.debug("receive() [trackId:%s, kind:%s]",u,l);const y=p.mid||String(this._mapMidTransceiver.size);s.set(u,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:p,streamId:m||p.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=ze(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,p=s.get(u),m=o.media.find(y=>String(y.mid)===p);bg({offerRtpParameters:l,answerMediaObject:m})}a={type:"answer",sdp:pn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),Se.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=s.get(u),p=this._pc.getTransceivers().find(m=>m.mid===l);if(!p)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,p),r.push({localId:l,track:p.receiver.track,rtpReceiver:p.receiver})}return r}async stopReceiving(e){this.assertRecvDirection();for(const s of e){Se.debug("stopReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const s of e)this._mapMidTransceiver.delete(s)}async pauseReceiving(e){this.assertRecvDirection();for(const s of e){Se.debug("pauseReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertRecvDirection();for(const s of e){Se.debug("resumeReceiving() [localId:%s]",s);const n=this._mapMidTransceiver.get(s);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(s)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:r}){var s;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};Se.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const p={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const m=await this._pc.createAnswer();if(!this._transportReady){const y=ze(m.sdp);await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:y})}Se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setLocalDescription(m),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=ze(this._pc.localDescription.sdp));const r=vg({sdpObject:i});r.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((s,n)=>{this.safeEmit("@connect",{dtlsParameters:r},s,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}},UD=class extends vie{constructor({handlerName:t,handlerFactory:e,Handler:i}={}){super({handlerName:t,handlerFactory:e,Handler:i})}switchDevice(t){switch(t){case"Chrome111":this._handlerFactory=AS.createFactory();break;case"Chrome74":this._handlerFactory=bie.createFactory();break;case"Chrome70":this._handlerFactory=IS.createFactory();break;case"Firefox111":this._handlerFactory=YC.createFactory(!0);break;case"Firefox60":this._handlerFactory=YC.createFactory(!1);break;case"Safari12":this._handlerFactory=kie.createFactory();break;case"Edge11":this._handlerFactory=MS.createFactory();break;default:throw new TypeError(`unknown handlerName "${t}"`)}}};const Jp="chrome",jD="opera",$D="firefox",zD="iexplorer",FD="safari",VD="nwjs",BD="electron",HD="react-native",DS="unknown",Bv={Chrome:Jp,Chromium:Jp,Opera:jD,Firefox:$D,"Internet Explorer":zD,Safari:FD};function _ie(){const{userAgent:t}=navigator,e={name:DS,version:void 0};if(t.match(/Chrome/)&&!t.match(/Edge/))if(t.match(/Edg(A?)/)){const i=t.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(i,10)>72&&(e.name=Jp,e.version=i)}else e.name=Jp,e.version=t.match(/Chrome\/([\d.]+)/)[1];return e}function Sie(){const{userAgent:t}=navigator;if(t.match(/Electron/)){const e=t.match(/Electron\/([\d.]+)/)[1];return{name:BD,version:e}}return null}function xie(){const{userAgent:t}=navigator;if(t.match(/JitsiMeetNW/)){const e=t.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:VD,version:e}}}function Eie(){const t=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let e;if(t||navigator.product==="ReactNative")return t&&t.length>2&&(t[1],e=t[2]),e||(e="unknown"),{name:HD,version:e}}function Tie(t){let e;const i=[Eie,Sie,xie];for(let s=0;s<i.length;s+=1)if(e=i[s](),e)return e;const r=t.getBrowserName();return r in Bv?{name:Bv[r],version:t.getBrowserVersion()}:(e=_ie(),e||{name:DS,version:void 0})}class Cie{constructor(){w(this,"_bowser"),w(this,"_name"),w(this,"_version"),w(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(e){let i,r;if(this._bowser=dS.getParser(navigator.userAgent),typeof e>"u"){const s=Tie(this._bowser);i=s.name,r=s.version}else e.name in Bv?(i=Bv[e.name],r=e.version):(i=DS,r=void 0);this._name=i,this._version=r}getName(){return this._name}isChrome(){return this._name===Jp}isOpera(){return this._name===jD}isFirefox(){return this._name===$D}isIExplorer(){return this._name===zD}isSafari(){return this._name===FD}isNWJS(){return this._name===VD}isElectron(){return this._name===BD}isReactNative(){return this._name===HD||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(e){if(this._version)return this._bowser.satisfies(e)}isVersionGreaterThan(e){return this._checkCondition({[this._name]:`>${e}`})}isVersionLessThan(e){return this._checkCondition({[this._name]:`<${e}`})}isVersionEqualTo(e){return this._checkCondition({[this._name]:`~${e}`})}}const Pie=72;class Rie extends Cie{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=Pie||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange<"u"&&typeof navigator.mediaDevices.addEventListener<"u"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver<"u"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia<"u"||typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getDisplayMedia<"u"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender<"u"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const e=new ReadableStream;try{return window.postMessage(e,"*",[e]),!0}catch{return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(e=>e.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(e=>e.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const e=navigator.userAgent;if(e.match(/Chrome/))return Number.parseInt(e.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Ze=new Rie,WD={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}},hd_cropped:{width:{ideal:900},height:{ideal:720}},fhd:{width:{ideal:1920},height:{ideal:1080}}},XC={},Iie=[{rid:"r0",scalabilityMode:"L1T2"},{rid:"r1",scalabilityMode:"L1T2"}],Aie=[{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:25e5}],Mie=[{active:!1,priority:"low"},{active:!1,priority:"low"},{active:!0,priority:"low"}],eP={320:[{rid:"q",maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"}],640:[{rid:"q",scaleResolutionDownBy:2,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"}],1280:[{rid:"q",scaleResolutionDownBy:4,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",scaleResolutionDownBy:2,maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"f",maxBitrate:15e5,maxFramerate:30,scalabilityMode:"L1T3"}]},Die=[{scalabilityMode:"L3T3_KEY"}];var ke=(t=>(t.WEBCAM="webcam",t.MIC="mic",t.SCREENSHARE_VIDEO="screenshare_video",t.SCREENSHARE_AUDIO="screenshare_audio",t))(ke||{});function Oie(t){return t.replace(/([-_]\w)/g,e=>e[1].toUpperCase())}function Ms(t){if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>Ms(i));const e={};return Object.keys(t).forEach(i=>{const r=sS(i)?i:Oie(i);e[r]=Ms(t[i])}),e}function Lie(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function GD(t){if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>GD(i));const e={};return Object.keys(t).forEach(i=>{const r=sS(i)?i:Lie(i);e[r]=t[i]}),e}function Kw(t,e={}){return t==null?{}:(Object.getOwnPropertyNames(t).forEach(i=>{if(typeof t[i]!="function"){if(typeof t[i]=="object"){Kw(t[i],e[i]={});return}e[i]=t[i]}}),e)}function Nie(t,e){const i=t.indexOf(e);return i>-1&&t.splice(i,1),t}var Qw=(t=>(t.PARTICIPANT="PARTICIPANT",t.PEER="PEER",t.CLIENT="CLIENT",t))(Qw||{});const me={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY:"enable_hive_fail_recovery",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints",FEAT_CHAT_SDK:"feat_chat_sdk",FEAT_CHAT_SDK_SEARCH:"chat_search",OBS_QUALITY:"obs_quality"},tt={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,baseURI:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{},viewType:void 0};function Uie(t){var e;tt.roomName!=null||(tt.roomName=t==null?void 0:t.roomName),tt.authToken!=null||(tt.authToken=t==null?void 0:t.authToken),tt.peerId!=null||(tt.peerId=t==null?void 0:t.peerId),tt.apiBase!=null||(tt.apiBase=t==null?void 0:t.apiBase),tt.baseURI!=null||(tt.baseURI=t==null?void 0:t.baseURI),tt.modules!=null||(tt.modules=t==null?void 0:t.modules),tt.organizationId!=null||(tt.organizationId=t==null?void 0:t.organizationId),tt.defaults={...tt.defaults,...(e=t==null?void 0:t.defaults)!=null?e:{}}}const _g="1.20.0",OS="web-core",jie=Nte(),Fr=Ms(jie.config.media);var sf;class qD{constructor(e){N(this,sf,void 0),w(this,"getScreenShareConstraints",()=>{var i,r;const{displaySurface:s}=(i=tt.defaults.screenShare)!=null?i:{};let n={width:{max:1920},height:{max:1080},frameRate:{ideal:parseInt((r=ge.getValue(me.VAL_MIN_FRAMERATE))!=null?r:"5",10),max:5}};if(ge.hasFeature(me.SCREENSHARE_CONSTRAINTS)){const a=ge.getValue(me.SCREENSHARE_CONSTRAINTS);n=JSON.parse(a)}return s!==void 0&&["monitor","browser","window"].includes(s)&&(n={...n,displaySurface:s}),{audio:!0,video:n}}),w(this,"getAudioConstraints",i=>{const r={};return Ze.isFirefox()||Ze.isWebKitBased()?(r.audio={deviceId:i,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},r):(r.audio={},r.audio.optional=[i?{sourceId:i}:{sourceId:"default"},{echoCancellation:!0},{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0}],r)}),w(this,"getVideoConstraints",i=>{const r={},{quality:s}=h(this,sf).video;let n=WD[s];if(n.frameRate={ideal:24},Ze.isChromiumBased()&&(n.frameRate.max=30),ge.hasFeature(me.VIDEO_CONSTRAINTS)){const a=ge.getValue(me.VIDEO_CONSTRAINTS);n=JSON.parse(a)}return r.video=n,i?r.video.deviceId={exact:i}:r.video.facingMode="user",r}),L(this,sf,e!=null?e:Fr)}getUpdatedVideoConstraints(e){return e}}sf=new WeakMap;var $ie=/\s/;function zie(t){for(var e=t.length;e--&&$ie.test(t.charAt(e)););return e}var Fie=/^\s+/;function Vie(t){return t&&t.slice(0,zie(t)+1).replace(Fie,"")}var tP=0/0,Bie=/^[-+]0x[0-9a-f]+$/i,Hie=/^0b[01]+$/i,Wie=/^0o[0-7]+$/i,Gie=parseInt;function iP(t){if(typeof t=="number")return t;if(Mte(t))return tP;if(Go(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Go(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Vie(t);var i=Hie.test(t);return i||Wie.test(t)?Gie(t.slice(2),i?2:8):Bie.test(t)?tP:+t}function JD(t){return t}function qie(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function Jie(){}var Kie=800,Qie=16,Yie=Date.now;function Zie(t){var e=0,i=0;return function(){var r=Yie(),s=Qie-(r-i);if(i=r,s>0){if(++e>=Kie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Xie(t){return function(){return t}}var ere=jv?function(t,e){return jv(t,"toString",{configurable:!0,enumerable:!1,value:Xie(e),writable:!0})}:JD;const tre=ere;var ire=Zie(tre);const rre=ire;function sre(t,e,i,r){for(var s=t.length,n=i+(r?1:-1);r?n--:++n<s;)if(e(t[n],n,t))return n;return-1}function nre(t){return t!==t}function are(t,e,i){for(var r=i-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function ore(t,e,i){return e===e?are(t,e,i):sre(t,nre,i)}function KD(t,e){var i=t==null?0:t.length;return!!i&&ore(t,e,0)>-1}var rP=Math.max;function cre(t,e,i){return e=rP(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,n=rP(r.length-e,0),a=Array(n);++s<n;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=i(a),qie(t,this,o)}}function dre(t,e){return rre(cre(t,e,JD),t+"")}var sP=Gn?Gn.isConcatSpreadable:void 0;function lre(t){return fd(t)||bS(t)||!!(sP&&t&&t[sP])}function QD(t,e,i,r,s){var n=-1,a=t.length;for(i||(i=lre),s||(s=[]);++n<a;){var o=t[n];e>0&&i(o)?e>1?QD(o,e-1,i,r,s):xS(s,o):r||(s[s.length]=o)}return s}var ure="__lodash_hash_undefined__";function hre(t){return this.__data__.set(t,ure),this}function pre(t){return this.__data__.has(t)}function uu(t){var e=-1,i=t==null?0:t.length;for(this.__data__=new Pd;++e<i;)this.add(t[e])}uu.prototype.add=uu.prototype.push=hre;uu.prototype.has=pre;function gre(t,e){for(var i=-1,r=t==null?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}function LS(t,e){return t.has(e)}var mre=1,fre=2;function YD(t,e,i,r,s,n){var a=i&mre,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=n.get(t),l=n.get(e);if(u&&l)return u==e&&l==t;var p=-1,m=!0,y=i&fre?new uu:void 0;for(n.set(t,e),n.set(e,t);++p<o;){var b=t[p],S=e[p];if(r)var E=a?r(S,b,p,e,t,n):r(b,S,p,t,e,n);if(E!==void 0){if(E)continue;m=!1;break}if(y){if(!gre(e,function(k,T){if(!LS(y,T)&&(b===k||s(b,k,i,r,n)))return y.push(T)})){m=!1;break}}else if(!(b===S||s(b,S,i,r,n))){m=!1;break}}return n.delete(t),n.delete(e),m}function vre(t){var e=-1,i=Array(t.size);return t.forEach(function(r,s){i[++e]=[s,r]}),i}function NS(t){var e=-1,i=Array(t.size);return t.forEach(function(r){i[++e]=r}),i}var yre=1,bre=2,wre="[object Boolean]",kre="[object Date]",_re="[object Error]",Sre="[object Map]",xre="[object Number]",Ere="[object RegExp]",Tre="[object Set]",Cre="[object String]",Pre="[object Symbol]",Rre="[object ArrayBuffer]",Ire="[object DataView]",nP=Gn?Gn.prototype:void 0,Fb=nP?nP.valueOf:void 0;function Are(t,e,i,r,s,n,a){switch(i){case Ire:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rre:return!(t.byteLength!=e.byteLength||!n(new $v(t),new $v(e)));case wre:case kre:case xre:return yS(+t,+e);case _re:return t.name==e.name&&t.message==e.message;case Ere:case Cre:return t==e+"";case Sre:var o=vre;case Tre:var c=r&yre;if(o||(o=NS),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=bre,a.set(t,e);var l=YD(o(t),o(e),r,s,n,a);return a.delete(t),l;case Pre:if(Fb)return Fb.call(t)==Fb.call(e)}return!1}var Mre=1,Dre=Object.prototype,Ore=Dre.hasOwnProperty;function Lre(t,e,i,r,s,n){var a=i&Mre,o=Bw(t),c=o.length,u=Bw(e),l=u.length;if(c!=l&&!a)return!1;for(var p=c;p--;){var m=o[p];if(!(a?m in e:Ore.call(e,m)))return!1}var y=n.get(t),b=n.get(e);if(y&&b)return y==e&&b==t;var S=!0;n.set(t,e),n.set(e,t);for(var E=a;++p<c;){m=o[p];var k=t[m],T=e[m];if(r)var I=a?r(T,k,m,e,t,n):r(k,T,m,t,e,n);if(!(I===void 0?k===T||s(k,T,i,r,n):I)){S=!1;break}E||(E=m=="constructor")}if(S&&!E){var O=t.constructor,q=e.constructor;O!=q&&"constructor"in t&&"constructor"in e&&!(typeof O=="function"&&O instanceof O&&typeof q=="function"&&q instanceof q)&&(S=!1)}return n.delete(t),n.delete(e),S}var Nre=1,aP="[object Arguments]",oP="[object Array]",fm="[object Object]",Ure=Object.prototype,cP=Ure.hasOwnProperty;function jre(t,e,i,r,s,n){var a=fd(t),o=fd(e),c=a?oP:lu(t),u=o?oP:lu(e);c=c==aP?fm:c,u=u==aP?fm:u;var l=c==fm,p=u==fm,m=c==u;if(m&&qp(t)){if(!qp(e))return!1;a=!0,l=!1}if(m&&!l)return n||(n=new Ta),a||wS(t)?YD(t,e,i,r,s,n):Are(t,e,c,i,r,s,n);if(!(i&Nre)){var y=l&&cP.call(t,"__wrapped__"),b=p&&cP.call(e,"__wrapped__");if(y||b){var S=y?t.value():t,E=b?e.value():e;return n||(n=new Ta),s(S,E,i,r,n)}}return m?(n||(n=new Ta),Lre(t,e,i,r,s,n)):!1}function ZD(t,e,i,r,s){return t===e?!0:t==null||e==null||!La(t)&&!La(e)?t!==t&&e!==e:jre(t,e,i,r,ZD,s)}var $re=function(){return fn.Date.now()};const Vb=$re;var zre="Expected a function",Fre=Math.max,Vre=Math.min;function US(t,e,i){var r,s,n,a,o,c,u=0,l=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(zre);e=iP(e)||0,Go(i)&&(l=!!i.leading,p="maxWait"in i,n=p?Fre(iP(i.maxWait)||0,e):n,m="trailing"in i?!!i.trailing:m);function y(B){var Y=r,X=s;return r=s=void 0,u=B,a=t.apply(X,Y),a}function b(B){return u=B,o=setTimeout(k,e),l?y(B):a}function S(B){var Y=B-c,X=B-u,be=e-Y;return p?Vre(be,n-X):be}function E(B){var Y=B-c,X=B-u;return c===void 0||Y>=e||Y<0||p&&X>=n}function k(){var B=Vb();if(E(B))return T(B);o=setTimeout(k,S(B))}function T(B){return o=void 0,m&&r?y(B):(r=s=void 0,a)}function I(){o!==void 0&&clearTimeout(o),u=0,r=c=s=o=void 0}function O(){return o===void 0?a:T(Vb())}function q(){var B=Vb(),Y=E(B);if(r=arguments,s=this,c=B,Y){if(o===void 0)return b(c);if(p)return clearTimeout(o),o=setTimeout(k,e),y(c)}return o===void 0&&(o=setTimeout(k,e)),a}return q.cancel=I,q.flush=O,q}function Bre(t){return La(t)&&Hy(t)}function XD(t,e,i){for(var r=-1,s=t==null?0:t.length;++r<s;)if(i(e,t[r]))return!0;return!1}var Hre=200;function Wre(t,e,i,r){var s=-1,n=KD,a=!0,o=t.length,c=[],u=e.length;if(!o)return c;i&&(e=Dte(e,Vy(i))),r?(n=XD,a=!1):e.length>=Hre&&(n=LS,a=!1,e=new uu(e));e:for(;++s<o;){var l=t[s],p=i==null?l:i(l);if(l=r||l!==0?l:0,a&&p===p){for(var m=u;m--;)if(e[m]===p)continue e;c.push(l)}else n(e,p,r)||c.push(l)}return c}function Gre(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var qre="[object Map]",Jre="[object Set]",Kre=Object.prototype,Qre=Kre.hasOwnProperty;function eO(t){if(t==null)return!0;if(Hy(t)&&(fd(t)||typeof t=="string"||typeof t.splice=="function"||qp(t)||wS(t)||bS(t)))return!t.length;var e=lu(t);if(e==qre||e==Jre)return!t.size;if(By(t))return!vD(t).length;for(var i in t)if(Qre.call(t,i))return!1;return!0}function Yre(t,e){return ZD(t,e)}var Zre=1/0,Xre=Hl&&1/NS(new Hl([,-0]))[1]==Zre?function(t){return new Hl(t)}:Jie;const ese=Xre;var tse=200;function dP(t,e,i){var r=-1,s=KD,n=t.length,a=!0,o=[],c=o;if(i)a=!1,s=XD;else if(n>=tse){var u=e?null:ese(t);if(u)return NS(u);a=!1,s=LS,c=new uu}else c=e?[]:o;e:for(;++r<n;){var l=t[r],p=e?e(l):l;if(l=i||l!==0?l:0,a&&p===p){for(var m=c.length;m--;)if(c[m]===p)continue e;e&&c.push(p),o.push(l)}else s(c,p,i)||(c!==o&&c.push(p),o.push(l))}return o}function ise(t,e,i){var r=t.length;if(r<2)return r?dP(t[0]):[];for(var s=-1,n=Array(r);++s<r;)for(var a=t[s],o=-1;++o<r;)o!=s&&(n[s]=Wre(n[s]||a,t[o],e,i));return dP(QD(n,1),e,i)}var rse=dre(function(t){var e=Gre(t);return e=typeof e=="function"?e:void 0,ise(bD(t,Bre),void 0,e)});const sse=rse;function nf(t){const e={};return typeof(t==null?void 0:t.code)=="number"&&(e.code=t.code),typeof(t==null?void 0:t.code)=="string"&&(e.code=t.code.substring(0,100)),typeof(t==null?void 0:t.name)=="string"&&(e.name=t.name.substring(0,500)),typeof(t==null?void 0:t.message)=="string"&&(e.message=t.message.substring(0,500)),typeof(t==null?void 0:t.reason)=="string"&&(e.reason=t.reason.substring(0,500)),typeof(t==null?void 0:t.stack)=="string"&&(e.stack=t.stack.substring(0,500)),e}function Yw(){var t,e,i,r;const s=typeof navigator<"u"&&!navigator.isReactNative&&((t=window.location.host)==null?void 0:t.includes("devel"))&&((e=window.location.host)==null?void 0:e.includes("dyte.io")),n=!!((r=(i=tt.modules)==null?void 0:i.devTools)!=null&&r.logs);return s||n}function nse(t){if(ge.hasFeature(me.LOG_LEVEL)){let e=ge.getValue(me.LOG_LEVEL)||"all";if(e=e.toLowerCase().trim(),e==="off")return!1;if(e!=="all"){const i=["debug","log","info","warn","error"],r=i.indexOf(t),s=i.indexOf(e);if(r<s)return!1}}return!0}function tO(t,e,i={}){return Object.getOwnPropertyNames(t).forEach(r=>{var s;if([null,void 0,NaN].includes(t[r])||e&&(((s=e.match(/\./g))==null?void 0:s.length)||0)>=10)return;const n=e?`${e}.${r}`:r;typeof t[r]=="object"?tO(t[r],n,i):["number","string","boolean"].includes(typeof t[r])&&(i[n]=t[r])}),i}function lP(t,e={},i=""){const r={};try{const s=JSON.stringify(e),n=JSON.parse(s),a=tO(n,i),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${t}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw Yw()&&console.error(c,{log:e,flattened:o}),new Error(c)}return JSON.parse(o)}catch(s){const n=nf(s);r[`${i}.error.message`]=n.message||"",r[`${i}.error.stack`]=n.stack||"",r[`${i}.error.reason`]=n.reason||"",r[`${i}.error.source`]="safelyFlattenObjForOpenTelemetry"}return r}const ft=class{static get logsEndpoint(){return Yw()?"https://api-silos-staging.dyte.io/otel/logs":"https://api-silos.dyte.io/otel/logs"}static init(t,e){navigator.isReactNative||(ft.tracingEnabled=e,ft.meetingMetadata.peerId=t,ft.meetingMetadata.sdkVersion=_g,ft.meetingMetadata.deviceInfo=Ze.getDeviceInfo(),ft.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window<"u"&&window.location.href,document.addEventListener("visibilitychange",ft.processCachedLogs),ft.logsProcessorTimer=setInterval(ft.processCachedLogs,ft.logsProcessingInterval),e&&(ft.initialized=!0))}static trace(t){return(e,i,r)=>{const s=r.value;return r.value=function(...n){if(!ft.initialized||navigator.isReactNative||!ft.tracingEnabled||ge.hasFeature(me.SKIP_OTEL_TRACES))return s.apply(this,n);ft.addLogInCurrentSpan("info",t);const a=performance.now(),o=s.apply(this,n);return Promise.resolve(o).then(()=>{const c=performance.now();ft.addLogInCurrentSpan("info",`${t}_timing`,{execTime:c-a})}).catch(()=>{const c=performance.now();ft.addLogInCurrentSpan("info",`${t}_timing`,{execTime:c-a})}),o},r}}static injectContext(t){var e;const i=gg().replace(/-/g,"").substring(0,16),r=(e=ft.meetingMetadata.peerId)==null?void 0:e.replace(/-/g,"");t.TRACEPARENT=`00-${r}-${i}-01`}static addLogInCurrentSpan(t,e,i={},r=!1){if(i!=null&&i.error&&Object.assign(i,{error:nf(i.error)}),Yw()&&(eO(i)?console[t]("DyteInternalLogs:: ",t,e):console[t]("DyteInternalLogs:: ",t,e,i)),!!nse(t))try{const s=lP(e,i,"metadata"),n=new Date,a={message:e,level:t,...s,loggedAt:n.toISOString(),loggedAtTzOffset:n.getTimezoneOffset()};r?ft.sendOtelLogsToNewRelic([a]):ft.logsCache.push(a)}catch(s){ft.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:nf(s)})}}static sendOtelLogsToNewRelic(t){Iv.post(ft.logsEndpoint,{meetingMetadata:lP("sendOtelLogsToNewRelic",ft.meetingMetadata,"meetingMetadata"),serviceName:OS,logs:t}).catch(e=>{ft.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:nf(e)}),ft.logsCache.push(...t)})}static processCachedLogs(){const t=ft.logsCache.splice(0,25);t!=null&&t.length&&ft.sendOtelLogsToNewRelic(t)}static destruct(){clearInterval(ft.logsProcessorTimer),ft.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",ft.processCachedLogs)}};let C=ft;w(C,"logsCache",[]),w(C,"logsProcessorTimer"),w(C,"tracingEnabled",!0),w(C,"initialized",!1),w(C,"logsProcessingInterval",7e3),w(C,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),w(C,"meetingMetadata",{});class x{static info(e,i,r){C.addLogInCurrentSpan("info",e,i,r)}static error(e,i,r){C.addLogInCurrentSpan("error",e,i,r)}static debug(e,i,r){C.addLogInCurrentSpan("debug",e,i,r)}static log(e,i,r){C.addLogInCurrentSpan("log",e,i,r)}static warn(e,i,r){C.addLogInCurrentSpan("warn",e,i,r)}}class Mt extends Er.EventEmitter{emit(e,...i){return super.emit("*",e,...i),super.emit(e,...i)}on(e,i){try{const r=this.listenerCount(e);r>25&&r%25===0&&x.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:e.toString(),listenerCount:this.listenerCount(e)}})}catch{}return super.on(e,i)}addListener(e,i){try{const r=this.listenerCount(e);r>25&&r%25===0&&x.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:e.toString(),listenerCount:this.listenerCount(e)}})}catch{}return super.addListener(e,i)}off(e,i){return super.off(e,i)}once(e,i){return super.once(e,i)}prependListener(e,i){return super.prependListener(e,i)}prependOnceListener(e,i){return super.prependOnceListener(e,i)}removeListener(e,i){return super.removeListener(e,i)}removeAllListeners(e){return super.removeAllListeners(e)}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}}const ase={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler"},af={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0510":"Invalid channel name.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1700:"Internal exception"};Object.keys(af).forEach(t=>{af[t]=`{${ase[t.slice(0,2)]}} ${af[t]}`});class U extends Error{constructor(e,i,r=!1){super(e),w(this,"code"),this.code=i,this.name="DyteError",this.message=`[ERR${this.code}]: ${af[this.code]}
${this.message}`;try{let s=r;i&&i.endsWith("00")&&(s=!0),s&&x.error("DyteError",{error:{message:this.message,name:this.name,code:i}})}catch{}}}function vm(t,e,i,r){if(typeof i=="function"&&r instanceof e)i.call(null,r,t);else throw r}function uP(t,e,i){if(!t.value){const s=t.get,n=t.set;return s&&(t.get=function(){try{return s.apply(this)}catch(a){vm(this,e,i,a)}}),n&&(t.set=function(a){try{return n.apply(this,[a])}catch(o){vm(this,e,i,o)}}),t}const r=t.value;return t.value=function(...s){try{const n=r.apply(this,s);return n&&n instanceof Promise?n.catch(a=>{vm(this,e,i,a)}):n}catch(n){vm(this,e,i,n)}},t}function ose(t,e){return(i,r,s)=>{if(s)return uP(s,t,e);for(const n of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,n);(a.value instanceof Function||a.get instanceof Function||a.set instanceof Function)&&Object.defineProperty(i.prototype,n,uP(a,t,e))}}}const Hi=t=>ose(Error,t);var _c=(t=>(t.allowed="ALLOWED",t.notAllowed="NOT_ALLOWED",t.canRequest="CAN_REQUEST",t))(_c||{});const cse={view_type:Tt.GroupCall,accept_waiting_requests:!1,request_produce:!1,can_allow_participant_audio:!0,can_allow_participant_screensharing:!1,can_allow_participant_video:!0,request_kick_participant:!1,kick_participant:!0,pin_participant:!0,can_record:!1,waiting_room_type:"SKIP",plugins:{can_close:!0,can_start:!0,can_edit_acl:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},produce:{video:{allow:!0,quality:Fr.video.quality,frame_rate:Fr.video.frameRate},audio:!0,screenshare:{allow:!0,quality:Fr.screenshare.quality,frame_rate:Fr.screenshare.frameRate}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},reactions:!1,hidden_participant:!1,show_participant_list:!0,can_change_participant_role:!0,can_change_theme:!1,can_present:!1,accept_present_requests:!1,can_edit_display_name:!1,max_screenshare_count:1,is_recorder:!1,can_spotlight:!1},dse=Ms(cse);var Ve;const Zw=class extends Mt{constructor(t){if(super(),N(this,Ve,void 0),!t)throw x.error("DytePermissionsPresetV1::load_preset_permissions_failed"),new U("Could not load preset permissions.");L(this,Ve,t)}static fromResponse(t){return new Zw(t)}static default(){return new Zw(dse)}get viewType(){return h(this,Ve).viewType}get stageEnabled(){return this.viewType===Tt.Webinar||this.viewType===Tt.Livestream}get stageAccess(){return this.canProduceVideo==="ALLOWED"||this.canProduceAudio==="ALLOWED"||this.canProduceScreenshare==="ALLOWED"?"ALLOWED":this.canProduceVideo==="CAN_REQUEST"||this.canProduceAudio==="CAN_REQUEST"||this.canProduceScreenshare==="CAN_REQUEST"?"CAN_REQUEST":"NOT_ALLOWED"}get acceptWaitingRequests(){return h(this,Ve).acceptWaitingRequests}get requestProduce(){return h(this,Ve).requestProduce}get requestProduceAudio(){return this.requestProduce}get requestProduceScreenshare(){return this.requestProduce}get canAllowParticipantAudio(){return h(this,Ve).canAllowParticipantAudio}get canAllowParticipantScreensharing(){return h(this,Ve).canAllowParticipantScreensharing}get canAllowParticipantVideo(){return h(this,Ve).canAllowParticipantVideo}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){return h(this,Ve).kickParticipant}get pinParticipant(){return h(this,Ve).pinParticipant}get canRecord(){return h(this,Ve).canRecord}get waitingRoomType(){return h(this,Ve).waitingRoomType}get waitingRoomBehaviour(){return h(this,Ve).waitingRoomType==="SKIP"?"SKIP":h(this,Ve).waitingRoomType==="SKIP_ON_PRIVILEGED_USER_ENTRY"?"ON_PRIVILEGED_USER_ENTRY":h(this,Ve).waitingRoomType==="ON_ACCEPT"?"SKIP_ON_ACCEPT":"SKIP"}get plugins(){return h(this,Ve).plugins}get polls(){return{...h(this,Ve).polls,canViewResults:h(this,Ve).polls.canView}}get produceVideo(){return{...h(this,Ve).produce.video,allow:h(this,Ve).produce.video.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceVideo(){const t=h(this,Ve).produce.video.allow;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get produceScreenshare(){return{...h(this,Ve).produce.screenshare,allow:h(this,Ve).produce.screenshare.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceScreenshare(){const t=h(this,Ve).produce.screenshare.allow;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get produceAudio(){return h(this,Ve).produce.audio?"ALLOWED":"NOT_ALLOWED"}get canProduceAudio(){const t=h(this,Ve).produce.audio;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get chatPublic(){return h(this,Ve).chat.public}get chatPrivate(){return h(this,Ve).chat.private}get chatChannel(){return{canCreate:"NONE",canDelete:"NONE",canUpdate:"NONE",canReadAll:!1}}get chatMessage(){return{canDelete:"NONE",canEdit:"NONE",deleteCutoffTimeSeconds:0,editCutoffTimeSeconds:0}}get connectedMeetings(){return{canAlterConnectedMeetings:!1,canSwitchConnectedMeetings:!1,canSwitchToParentMeeting:!1}}get reactions(){return h(this,Ve).reactions}get hiddenParticipant(){return h(this,Ve).hiddenParticipant}get showParticipantList(){return h(this,Ve).showParticipantList}get canChangeParticipantRole(){return h(this,Ve).canChangeParticipantRole}get canChangeTheme(){return h(this,Ve).canChangeTheme}get canPresent(){return h(this,Ve).canPresent}get acceptPresentRequests(){return h(this,Ve).acceptPresentRequests}get canEditDisplayName(){return h(this,Ve).canEditDisplayName}get maxScreenShareCount(){return h(this,Ve).maxScreenshareCount}get isRecorder(){return h(this,Ve).isRecorder}get canLivestream(){return!1}get canSpotlight(){return h(this,Ve).canSpotlight}get isV2(){return!1}};let hP=Zw;Ve=new WeakMap;const Ne={isV2AuthToken:!1,meetingId:null,overrides:{},roomNodeOptions:void 0},dh={baseURL:"http://localhost:5000",createdAt:"2021-08-05T10:49:56.602Z",description:"Develop plugins locally",id:"09259e3b-7be8-46f6-9801-106bf1866e1c",name:"Localhost Dev",organizationId:"4ad15a19-80e2-4105-bf43-48039fd2963e",picture:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png",private:!1,published:!0,staggered:!1,tags:["#localhost","#dev"],type:"self_hosted",updatedAt:"2021-08-05T10:50:07.681Z"};function lse(t,e){if(e){Ne.isV2AuthToken=!1;return}try{const{meetingId:i}=JSON.parse(atob(t.split(".")[1]));if(!i)throw Error(`Received V1 auth token ${t}`);Ne.isV2AuthToken=!0,Ne.meetingId=i}catch(i){throw x.error("constants::setIsV2AuthToken",{error:i,debuggingHint:`Unable to decode auth token: ${t}`},!0),new U("Invalid auth token")}}function use(t){Ne.overrides=t}function Xw(t){return Ne.overrides&&Ne.overrides[t]?Ne.overrides[t]:!1}function iO(t){Ne.roomNodeOptions=t}function rO(t,e){return!!(Ne.isV2AuthToken&&(ge.hasFeature(me.CONNECTED_MEETINGS)||t===Tt.Livestream||t===Tt.Chat)||e.includes("HIVE"))}function jS(t,e){return rO(t,e)?!0:(ge.getValue(me.CHAT_SOCKET_SERVER)||Xw(me.CHAT_SOCKET_SERVER)||"socket-service")==="socket-service"}function sO(t,e){return rO(t,e)?!0:(ge.getValue(me.POLL_SOCKET_SERVER)||"socket-service")==="socket-service"}function $S(t,e){return e.includes("HIVE")?!0:(ge.getValue(me.PLUGIN_SOCKET_SERVER)||"socket-service")==="socket-service"}function nO(t,e){return jS(t,e)||sO(t,e)||$S(t,e)}var ro,so;class hse extends Er.EventEmitter{constructor(){super(),N(this,ro,void 0),N(this,so,void 0),w(this,"asyncPromiseTimeout"),L(this,ro,new Map),L(this,so,new Map),this.asyncPromiseTimeout=8e3}async emitAsync(e,...i){h(this,ro).set(e,[]);const r=h(this,so).get(e).map(()=>new Promise(s=>{h(this,ro).get(e).push(s)}));super.emit(e,...i),await Promise.race([Promise.all(r),new Promise((s,n)=>setTimeout(()=>n(new Error("emitAsync failed to resolve.")),this.asyncPromiseTimeout))]),h(this,ro).delete(e)}onAsync(e,i){const r=h(this,ro),s=async(...n)=>{var a;try{await i(...n)}catch(c){x.error("[onAsync]",{error:c})}const o=(a=r.get(e))==null?void 0:a.shift();o==null||o()};return h(this,so).get(e)||h(this,so).set(e,[]),h(this,so).get(e).push(s),super.on(e,s)}reset(){L(this,ro,new Map),L(this,so,new Map),super.removeAllListeners()}}ro=new WeakMap,so=new WeakMap;const R=new hse;var P=(t=>(t.NEW_PRODUCER="NEW_PRODUCER",t.PRODUCER_TRACK_ENDED="PRODUCER_TRACK_ENDED",t.ROOM_NODE_CONNECTED="ROOM_NODE_CONNECTED",t.ROOM_NODE_DISCONNECTED="ROOM_NODE_DISCONNECTED",t.ROOM_NODE_CONNECTION_ERROR="ROOM_NODE_CONNECTION_ERROR",t.SOCKET_SERVICE_CONNECTED="SOCKET_SERVICE_CONNECTED",t.SOCKET_SERVICE_DISCONNECTED="SOCKET_SERVICE_DISCONNECTED",t.SOCKET_SERVICE_RECONNECTING="SOCKET_SERVICE_RECONNECTING",t.SOCKET_SERVICE_RECONNECTION_ATTEMPT="SOCKET_SERVICE_RECONNECTION_ATTEMPT",t.SOCKET_SERVICE_RECONNECT_FAILURE="SOCKET_SERVICE_RECONNECT_FAILURE",t.SOCKET_SERVICE_RECONNECTED="SOCKET_SERVICE_RECONNECTED",t.SOCKET_SERVICE_FAILED="SOCKET_SERVICE_FAILED",t.ROOM_JOINED="ROOM_JOINED",t.SOCKET_SERVICE_ROOM_JOINED="SOCKET_SERVICE_ROOM_JOINED",t.SELF_ROOM_JOINED="SELF_ROOM_JOINED",t.PRODUCER_SCORE_UPDATE="PRODUCER_SCORE_UPDATE",t.CONSUMER_SCORE_UPDATE="CONSUMER_SCORE_UPDATE",t.PRODUCER_STATUS_UPDATE="PRODUCER_STATUS_UPDATE",t.CONSUMER_STATUS_UPDATE="CONSUMER_STATUS_UPDATE",t.LOW_PRODUCER_SCORE="LOW_PRODUCER_SCORE",t.LOW_CONSUMER_SCORE="LOW_CONSUMER_SCORE",t.MEDIA_PERMISSION_ERROR="MEDIA_PERMISSION_ERROR",t.MEDIA_PERMISSION_UPDATE="MEDIA_PERMISSION_UPDATE",t.WAITLISTED="WAIT_LISTED",t.WAITLIST_ACCEPTED="websocket/waitlist-accepted",t.WAITLIST_REJECTED="websocket/waitlist-rejected",t.WAITLIST_PEER_ADDED="websocket/waitlist-peer-added",t.WAITLIST_PEER_REMOVED="websocket/waitlist-peer-closed",t.MESSAGE="websocket/message",t.ROOM_MESSAGE="websocket/room-message",t.DISABLE_AUDIO="websocket/disable-audio",t.DISABLE_VIDEO="websocket/disable-video",t.PEER_JOINED="websocket/peer-joined",t.PEER_CLOSED="websocket/peer-closed",t.PEER_MUTED="websocket/peer-muted",t.PEER_UNMUTED="websocket/peer-unmuted",t.PEER_PINNED="websocket/pin-peer",t.PEER_UNPINNED="websocker/unpin-peer",t.MUTE_ALL="websocket/mute-all",t.MUTE_ALL_VIDEO="websocket/mute-all-video",t.CONSUMER_CLOSED="websocket/consumer-closed",t.CONSUMER_PAUSED="websocket/consumer-paused",t.CONSUMER_RESUMED="websocket/consumer-resumed",t.PRODUCER_CLOSED="websocket/producer-closed",t.NEW_CONSUMER="websocket/new-consumer",t.CONNECTED_MEETING_STATE="websocket/connectedMeetingState",t.MOVE_TO_CONNECTED_MEETING="websocket/transferMeeting",t.GET_CHAT_MESSAGES="websocket/get-chat-messages",t.NEW_CHAT_MESSAGE="websocket/new-chat-message",t.PIN_CHAT_MESSAGE="websocket/pin-chat-message",t.UNPIN_CHAT_MESSAGE="websocket/unpin-chat-message",t.GET_POLLS="websocket/get-polls",t.UPDATE_POLL="websocket/update-poll",t.SELECTED_PEERS="websocket/selected-peers",t.GET_PAGE="websocket/get-page",t.ACTIVE_SPEAKER="websocket/active-speaker",t.NO_ACTIVE_SPEAKER="websocket/no-active-speaker",t.PRODUCER_SCORE="websocket/producer-score",t.CONSUMER_SCORE="websocket/consumer-score",t.ENABLE_PLUGIN="websocket/enable-plugin",t.DISABLE_PLUGIN="websocket/disable-plugin",t.PLUGIN_EVENT="websocket/plugin-event",t.PLUGIN_DATA="websocket/plugin-data",t.PLUGIN_INTERNAL_DATA="websocket/plugin-internal-data",t.KICKED="websocket/kicked",t.RECORDING_STARTED="websocket/recording-started",t.RECORDING_STOPPED="websocket/recording-stopped",t.ICE_CONNECTED="ICE_CONNECTED",t.ICE_DISCONNECTED="ICE_DISCONNECTED",t.ICE_FAILED="ICE_FAILED",t.ICE_RECONNECTING="ICE_RECONNECTING",t.AUDIO_TRACK_ANALYSIS="AUDIO_TRACK_ANALYSIS",t.AUDIO_TRACK_CLOSED="AUDIO_TRACK_CLOSED",t.AUDIO_TRACK_CHANGED="AUDIO_TRACK_CHANGED",t.AUDIO_TRACK_CREATED="AUDIO_TRACK_CREATED",t.VIDEO_TRACK_ANALYSIS="VIDEO_TRACK_ANALYSIS",t.VIDEO_TRACK_ANALYSIS_ERROR="VIDEO_TRACK_ANALYSIS_ERROR",t.VIDEO_TRACK_CLOSED="VIDEO_TRACK_CLOSED",t.VIDEO_TRACK_CHANGED="VIDEO_TRACK_CHANGED",t.VIDEO_TRACK_CREATED="VIDEO_TRACK_CREATED",t.SCREENSHARE_AUDIO_TRACK_ANALYSIS="SCREENSHARE_AUDIO_TRACK_ANALYSIS",t.SCREENSHARE_AUDIO_TRACK_CLOSED="SCREENSHARE_AUDIO_TRACK_CLOSED",t.SCREENSHARE_AUDIO_TRACK_CREATED="SCREENSHARE_AUDIO_TRACK_CREATED",t.SCREENSHARE_VIDEO_TRACK_ANALYSIS="SCREENSHARE_VIDEO_TRACK_ANALYSIS",t.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR="SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR",t.SCREENSHARE_VIDEO_TRACK_CLOSED="SCREENSHARE_VIDEO_TRACK_CLOSED",t.SCREENSHARE_VIDEO_TRACK_CREATED="SCREENSHARE_VIDEO_TRACK_CREATED",t.SCREENSHARE_TRACK_CHANGED="SCREENSHARE_TRACK_CHANGED",t.CANDIDATE_PEER_UPDATE="CANDIDATE_PEER_UPDATE",t.INBOUND_RTP_UPDATE="INBOUND_RTP_UPDATE",t.OUTBOUND_RTP_UPDATE="OUTBOUND_RTP_UPDATE",t.SEND_TRANSPORT_CLOSED="SEND_TRANSPORT_CLOSED",t.RECV_TRANSPORT_CLOSED="RECV_TRANSPORT_CLOSED",t.SEND_TRANSPORT_CREATED="SEND_TRANSPORT_CREATED",t.RECV_TRANSPORT_CREATED="RECV_TRANSPORT_CREATED",t.PRODUCER_TOGGLE="hive/producer-toggle",t.CONSUMER_TOGGLE="hive/consumer-toggle",t.SELECTED_PEERS_DIFF="hive/selected-peers-diff",t.REFRESH_GRID="hive/refresh-grid",t.RESET_PRODUCER_STATE="hive/reset-producer-state",t.HIVE_RECORDING_STARTED="hive/recording-started",t.HIVE_RECORDING_STOPPED="hive/recording-stopped",t.HIVE_TRANSPORT_STATE_CHANGED="hive/transport-state-changed",t.HIVE_ROOM_REJOINING="hive/room-rejoining",t.HIVE_TRANPSORT_RECONNECTING="hive/transport-reconnecting",t.ROOM_STATE="sockethub/room-state",t.PEER_DISPLAY_NAME_CHANGED="hive/display-name-changed",t.ASSERT_SPOTLIGHTER="websocket/assert-spotlighter",t.PEER_REQUESTED_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-added",t.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-withdrawn",t.PEER_REJECTED_TO_JOIN_STAGE="websocket/peer-rejected-to-join-stage",t.PEER_ADDED_TO_STAGE="websocket/peer-added-to-stage",t.PEER_REMOVED_FROM_STAGE="websocket/peer-removed-from-stage",t.PEER_STARTED_PRESENTING="websocket/peer-started-presenting",t.PEER_STOPPED_PRESENTING="websocket/peer-stopped-presenting",t.STAGE_REQUESTS_UPDATED="STAGE_REQUESTS_UPDATED",t.REQUEST_TO_JOIN_STAGE_ACCEPTED="websocket/request-to-join-stage-accepted",t.REQUEST_TO_JOIN_STAGE_REJECTED="websocket/request-to-join-stage-rejected",t.STARTED_PRESENTING="websocket/started-presenting",t.STOPPED_PRESENTING="websocket/stopped-presenting",t.REMOVED_FROM_STAGE="websocket/removed-from-stage",t.JOIN_MEDIA_ROOM="JOIN_MEDIA_ROOM",t.LEAVE_MEDIA_ROOM="LEAVE_MEDIA_ROOM",t.UPDATE_PEER_STAGE_STATUS="UPDATE_PEER_STAGE_STATUS",t.GET_WEBINAR_STAGE_STATUS="GET_WEBINAR_STAGE_STATUS",t.REQUEST_TO_JOIN_STAGE="REQUEST_TO_JOIN_STAGE",t.WITHDRAW_REQUEST_TO_JOIN_STAGE="WITHDRAW_REQUEST_TO_JOIN_STAGE",t.LEAVE_STAGE="LEAVE_STAGE",t.JOIN_STAGE="JOIN_STAGE",t.SET_WEBINAR_STAGE_STATUS="SET_WEBINAR_STAGE_STATUS",t.SET_STAGE_STATUS="SET_STAGE_STATUS",t.ACCEPT_JOIN_STAGE_REQUEST="ACCEPT_JOIN_STAGE_REQUEST",t.REMOVE_FROM_STAGE="REMOVE_FROM_STAGE",t.REJECT_REQUEST_TO_JOIN_STAGE="REJECT_REQUEST_TO_JOIN_STAGE",t.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE="ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE",t.PIP_HANGUP="PIP_HANGUP",t))(P||{}),So;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(So||(So={}));var cn;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO"})(cn||(cn={}));class pse extends ${constructor(){super("media.Pair",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new pse;class gse extends ${constructor(){super("media.Codec",[])}}new gse;class mse extends ${constructor(){super("media.Fingerprint",[{no:1,name:"algorithm",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new mse;class fse extends ${constructor(){super("media.SessionDescription",[{no:1,name:"target",kind:"enum",T:()=>["media.Target",So]},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"sdp",kind:"scalar",T:9}])}}const Fa=new fse;class vse extends ${constructor(){super("media.CreateTransportRequest",[{no:1,name:"consuming",kind:"scalar",T:8},{no:2,name:"force_tcp",kind:"scalar",opt:!0,T:8},{no:3,name:"description",kind:"message",T:()=>Fa}])}}const yse=new vse;class bse extends ${constructor(){super("media.CreateTransportResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Fa},{no:3,name:"transcription_enabled",kind:"scalar",opt:!0,T:8}])}}const aO=new bse;class wse extends ${constructor(){super("media.RenegotiateRequest",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Fa}])}}const kse=new wse;class _se extends ${constructor(){super("media.RenegotiateResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Fa}])}}new _se;class Sse extends ${constructor(){super("media.NestedScore",[{no:1,name:"encoding_idx",kind:"scalar",T:5},{no:2,name:"rid",kind:"scalar",T:9},{no:3,name:"score",kind:"scalar",T:5},{no:4,name:"ssrc",kind:"scalar",T:3,L:0}])}}const xse=new Sse;class Ese extends ${constructor(){super("media.ProducerTrack",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"stream_id",kind:"scalar",T:9}])}}const Tse=new Ese;class Cse extends ${constructor(){super("media.ProducerEntry",[{no:1,name:"producing_transport_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9}])}}new Cse;class Pse extends ${constructor(){super("media.ConsumerEntry",[{no:1,name:"consuming_transport_id",kind:"scalar",T:9},{no:2,name:"consumer_id",kind:"scalar",T:9}])}}new Pse;class Rse extends ${constructor(){super("media.ProducerState",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"kind",kind:"enum",T:()=>["media.ProducerKind",cn]},{no:3,name:"pause",kind:"scalar",T:8},{no:4,name:"screen_share",kind:"scalar",T:8}])}}const Sg=new Rse;class Ise extends ${constructor(){super("media.ConsumerState",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sg},{no:3,name:"producer_track",kind:"message",T:()=>Tse}])}}const Ase=new Ise;class Mse extends ${constructor(){super("media.ProducerIdToConsumerMap",[{no:1,name:"map",kind:"map",K:9,V:{kind:"message",T:()=>Ase}}])}}const oO=new Mse;class Dse extends ${constructor(){super("media.edge.PeerJoinRequest",[{no:1,name:"display_name",kind:"scalar",opt:!0,T:9},{no:2,name:"prejoined",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:5,name:"preset",kind:"scalar",opt:!0,T:12},{no:6,name:"user_id",kind:"scalar",opt:!0,T:9},{no:7,name:"organization_id",kind:"scalar",opt:!0,T:9}])}}const Ose=new Dse;class Lse extends ${constructor(){super("media.edge.PeerJoinCompleteRequest",[])}}const Nse=new Lse;class Use extends ${constructor(){super("media.edge.PeerLeaveRequest",[{no:1,name:"close_room",kind:"scalar",T:8}])}}const jse=new Use;class $se extends ${constructor(){super("media.edge.ConsumeMultipleProducerRequest",[{no:1,name:"producer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8}])}}new $se;class zse extends ${constructor(){super("media.edge.ConsumePeerRequest",[{no:1,name:"producing_peer_id",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8},{no:3,name:"producer_id",kind:"scalar",opt:!0,T:9}])}}const Fse=new zse;class Vse extends ${constructor(){super("media.edge.ProducerCreateRequest",[{no:1,name:"kind",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"description",kind:"message",T:()=>Fa},{no:5,name:"msid",kind:"scalar",T:9}])}}const Bse=new Vse;class Hse extends ${constructor(){super("media.edge.SelectedPeersRequest",[])}}new Hse;class Wse extends ${constructor(){super("media.edge.GlobalPeerPinningRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Gse=new Wse;class qse extends ${constructor(){super("media.edge.ProducerToggleRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const ym=new qse;class Jse extends ${constructor(){super("media.edge.ConsumerToggleRequest",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const pP=new Jse;class Kse extends ${constructor(){super("media.edge.ProducerCloseRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>Fa}])}}const Qse=new Kse;class Yse extends ${constructor(){super("media.edge.ConsumerCloseRequest",[{no:1,name:"consumer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"description",kind:"message",T:()=>Fa}])}}const Zse=new Yse;class Xse extends ${constructor(){super("media.edge.KickPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const ene=new Xse;class tne extends ${constructor(){super("media.edge.KickAllPeersRequest",[])}}const ine=new tne;class rne extends ${constructor(){super("media.edge.PeerDisplayNameEditRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const sne=new rne;class nne extends ${constructor(){super("media.edge.HostMediaControlForPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"video",kind:"scalar",T:8},{no:4,name:"scree_share",kind:"scalar",T:8}])}}const ane=new nne;class one extends ${constructor(){super("media.edge.HostMediaControlForAllPeerRequest",[{no:1,name:"audio",kind:"scalar",T:8},{no:2,name:"video",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8}])}}const cne=new one;class dne extends ${constructor(){super("media.edge.GetRoomStateResponse",[{no:1,name:"display_title",kind:"scalar",T:9},{no:2,name:"locked_mode",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"room_name",kind:"scalar",T:9},{no:5,name:"current_peer_id",kind:"scalar",T:9},{no:6,name:"is_recording",kind:"scalar",opt:!0,T:8},{no:7,name:"recorder_participant_id",kind:"scalar",opt:!0,T:9}])}}const lne=new dne;class une extends ${constructor(){super("media.edge.ErrorResponse",[{no:1,name:"error_message",kind:"scalar",T:9},{no:2,name:"event_id",kind:"scalar",T:5}])}}const hne=new une;class pne extends ${constructor(){super("media.edge.EmptyResponse",[])}}new pne;class gne extends ${constructor(){super("media.edge.RoomParticipants",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"producer_states",kind:"message",repeat:1,T:()=>Sg},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",opt:!0,T:9}])}}const cO=new gne;class mne extends ${constructor(){super("media.edge.SelectedPeersResponse",[{no:1,name:"audio_peers",kind:"scalar",repeat:2,T:9},{no:2,name:"compulsory_peers",kind:"scalar",repeat:2,T:9}])}}const dO=new mne;class fne extends ${constructor(){super("media.edge.SelectedPeersDiffEntry",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"priority",kind:"scalar",T:5}])}}const vne=new fne;class yne extends ${constructor(){super("media.edge.SelectedPeersDiffResponse",[{no:1,name:"entries",kind:"message",repeat:1,T:()=>vne}])}}const bne=new yne;class wne extends ${constructor(){super("media.edge.PeerJoinResponse",[])}}new wne;class kne extends ${constructor(){super("media.edge.PeerJoinCompleteResponse",[{no:1,name:"room_state",kind:"message",T:()=>lne},{no:2,name:"participants",kind:"message",repeat:1,T:()=>cO},{no:3,name:"selected_peers",kind:"message",T:()=>dO},{no:4,name:"max_preferred_streams",kind:"scalar",T:5}])}}const _ne=new kne;class Sne extends ${constructor(){super("media.edge.PeerLeaveResponse",[{no:1,name:"closed",kind:"scalar",T:8}])}}const xne=new Sne;class Ene extends ${constructor(){super("media.edge.ConsumeMultipleProducerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>oO}])}}new Ene;class Tne extends ${constructor(){super("media.edge.ConsumePeerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>oO}])}}const Cne=new Tne;class Pne extends ${constructor(){super("media.edge.ProducerCreateResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"producer_id",kind:"scalar",T:9},{no:4,name:"description",kind:"message",T:()=>Fa}])}}const Rne=new Pne;class Ine extends ${constructor(){super("media.edge.ProducerScoreResponse",[{no:1,name:"responseid",kind:"scalar",T:9},{no:2,name:"score",kind:"message",T:()=>xse}])}}new Ine;class Ane extends ${constructor(){super("media.edge.ActiveSpeakerResponse",[{no:1,name:"responsepeer_id",kind:"scalar",T:9},{no:2,name:"volume",kind:"scalar",T:5}])}}new Ane;class Mne extends ${constructor(){super("media.edge.NoActiveSpeakerResponse",[])}}new Mne;class Dne extends ${constructor(){super("media.edge.ProducerToggleResponse",[])}}new Dne;class One extends ${constructor(){super("media.edge.ConsumerToggleResponse",[])}}new One;class Lne extends ${constructor(){super("media.edge.ProducerClosingResponse",[{no:1,name:"description",kind:"message",T:()=>Fa}])}}const Nne=new Lne;class Une extends ${constructor(){super("media.edge.ConsumerClosingResponse",[])}}new Une;class jne extends ${constructor(){super("media.edge.GlobalPeerPinningResponse",[])}}new jne;class $ne extends ${constructor(){super("media.edge.KickPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const zne=new $ne;class Fne extends ${constructor(){super("media.edge.KickAllPeersResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Vne=new Fne;class Bne extends ${constructor(){super("media.edge.HostMediaControlForPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Hne=new Bne;class Wne extends ${constructor(){super("media.edge.HostMediaControlForAllPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Gne=new Wne;class qne extends ${constructor(){super("media.edge.PeerDisplayNameEditResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Jne=new qne;class Kne extends ${constructor(){super("media.edge.PeerJoinBroadcastResponse",[{no:1,name:"participant",kind:"message",T:()=>cO}])}}const Qne=new Kne;class Yne extends ${constructor(){super("media.edge.PeerProducingTransportCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"transport_details",kind:"message",T:()=>aO}])}}new Yne;class Zne extends ${constructor(){super("media.edge.PeerProducerCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sg}])}}const Xne=new Zne;class eae extends ${constructor(){super("media.edge.PeerProducerToggleBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sg}])}}const tae=new eae;class iae extends ${constructor(){super("media.edge.PeerProducerCloseBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>Sg}])}}const rae=new iae;class sae extends ${constructor(){super("media.edge.PeerLeaveBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const nae=new sae;class aae extends ${constructor(){super("media.edge.GlobalPeerPinningBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const oae=new aae;class cae extends ${constructor(){super("media.edge.RecordingStartedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const dae=new cae;class lae extends ${constructor(){super("media.edge.RecordingStoppedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const uae=new lae;class hae extends ${constructor(){super("media.edge.PeerDisplayNameEditBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const pae=new hae;class gae extends ${constructor(){super("media.edge.PeerPingRequestBroadcastResponse",[{no:1,name:"password",kind:"scalar",T:9}])}}new gae;class mae extends ${constructor(){super("socket.ai.MeetingTranscript",[{no:1,name:"meeting_id",kind:"scalar",T:9},{no:2,name:"transcript",kind:"scalar",T:9}])}}const Bb=new mae;class fae extends ${constructor(){super("socket.api.BaseSocketHubMessage",[{no:1,name:"event",kind:"scalar",T:5},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9},{no:4,name:"room_id",kind:"scalar",T:9},{no:5,name:"user_id",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}])}}new fae;class vae extends ${constructor(){super("socket.api.ErrorMessage",[{no:1,name:"code",kind:"scalar",opt:!0,T:5},{no:2,name:"message",kind:"scalar",T:9}])}}const yae=new vae;class bae extends ${constructor(){super("socket.PeerPreset",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"message",T:()=>Fae}])}}new bae;class wae extends ${constructor(){super("socket.PeerPreset.Plugins",[{no:1,name:"can_close",kind:"scalar",T:8},{no:2,name:"can_start",kind:"scalar",T:8}])}}const kae=new wae;class _ae extends ${constructor(){super("socket.PeerPreset.Polls",[{no:1,name:"can_create",kind:"scalar",T:8},{no:2,name:"can_vote",kind:"scalar",T:8},{no:3,name:"can_view",kind:"scalar",T:8}])}}const Sae=new _ae;class xae extends ${constructor(){super("socket.PeerPreset.Video",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const Eae=new xae;class Tae extends ${constructor(){super("socket.PeerPreset.Screenshare",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const Cae=new Tae;class Pae extends ${constructor(){super("socket.PeerPreset.Produce",[{no:1,name:"video",kind:"message",T:()=>Eae},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"screenshare",kind:"message",T:()=>Cae}])}}const Rae=new Pae;class Iae extends ${constructor(){super("socket.PeerPreset.Public",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:8},{no:3,name:"files",kind:"scalar",T:8}])}}const Aae=new Iae;class Mae extends ${constructor(){super("socket.PeerPreset.Private",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"can_receive",kind:"scalar",T:8},{no:3,name:"text",kind:"scalar",T:8},{no:4,name:"files",kind:"scalar",T:8}])}}const Dae=new Mae;class Oae extends ${constructor(){super("socket.PeerPreset.Chat",[{no:1,name:"public",kind:"message",T:()=>Aae},{no:2,name:"private",kind:"message",T:()=>Dae}])}}const Lae=new Oae;class Nae extends ${constructor(){super("socket.PeerPreset.Permissions",[{no:1,name:"view_type",kind:"scalar",T:9},{no:2,name:"accept_waiting_requests",kind:"scalar",T:8},{no:3,name:"request_produce",kind:"scalar",T:8},{no:4,name:"can_allow_participant_audio",kind:"scalar",T:8},{no:5,name:"can_allow_participant_screensharing",kind:"scalar",T:8},{no:6,name:"can_allow_participant_video",kind:"scalar",T:8},{no:7,name:"request_kick_participant",kind:"scalar",T:8},{no:8,name:"kick_participant",kind:"scalar",T:8},{no:9,name:"pin_participant",kind:"scalar",T:8},{no:10,name:"can_record",kind:"scalar",T:8},{no:11,name:"waiting_room_type",kind:"scalar",T:9},{no:12,name:"plugins",kind:"message",T:()=>kae},{no:13,name:"polls",kind:"message",T:()=>Sae},{no:14,name:"produce",kind:"message",T:()=>Rae},{no:15,name:"chat",kind:"message",T:()=>Lae},{no:16,name:"reactions",kind:"scalar",T:8},{no:17,name:"hidden_participant",kind:"scalar",T:8},{no:18,name:"show_participant_list",kind:"scalar",T:8},{no:19,name:"can_change_participant_role",kind:"scalar",T:8},{no:20,name:"can_change_theme",kind:"scalar",T:8},{no:21,name:"can_present",kind:"scalar",T:8},{no:22,name:"is_recorder",kind:"scalar",opt:!0,T:8}])}}const Uae=new Nae;class jae extends ${constructor(){super("socket.PeerPreset.Preset",[{no:1,name:"permissions",kind:"message",T:()=>Uae},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"preset_name",kind:"scalar",T:9}])}}const $ae=new jae;class zae extends ${constructor(){super("socket.PeerPreset.Data",[{no:1,name:"preset",kind:"message",T:()=>$ae}])}}const Fae=new zae;class Vae extends ${constructor(){super("socket.chat.ChatMessage",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"pinned",kind:"scalar",T:8},{no:6,name:"is_edited",kind:"scalar",T:8},{no:7,name:"payload_type",kind:"scalar",T:5},{no:8,name:"payload",kind:"scalar",T:9},{no:10,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:11,name:"created_at",kind:"scalar",T:4,L:2},{no:12,name:"created_at_ms",kind:"scalar",opt:!0,T:4,L:2},{no:13,name:"channel_id",kind:"scalar",opt:!0,T:9},{no:14,name:"channel_index",kind:"scalar",opt:!0,T:9}])}}const Rd=new Vae;class Bae extends ${constructor(){super("socket.chat.GetPaginatedChatMessageRoomRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const Hae=new Bae;class Wae extends ${constructor(){super("socket.chat.GetPaginatedChatMessageRoomResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Rd},{no:2,name:"next",kind:"scalar",T:8}])}}const Gae=new Wae;class qae extends ${constructor(){super("socket.chat.GetChatMessagesResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Rd}])}}const lO=new qae;class Jae extends ${constructor(){super("socket.chat.SendChatMessageToRoomRequest",[{no:1,name:"payload_type",kind:"scalar",T:5},{no:2,name:"payload",kind:"scalar",T:9}])}}const Kae=new Jae;class Qae extends ${constructor(){super("socket.chat.SendChatMessageToRoomResponse",[{no:1,name:"message",kind:"message",T:()=>Rd}])}}const Hb=new Qae;class Yae extends ${constructor(){super("socket.chat.SendChatMessageToPeersRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const Zae=new Yae;class Xae extends ${constructor(){super("socket.chat.SendChatMessageToPeersResponse",[{no:1,name:"message",kind:"message",T:()=>Rd}])}}const Wb=new Xae;class eoe extends ${constructor(){super("socket.chat.SendChatMessageToChannelRequest",[{no:1,name:"channel_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const toe=new eoe;class ioe extends ${constructor(){super("socket.chat.SendChatMessageToChannelResponse",[{no:1,name:"message",kind:"message",T:()=>Rd}])}}new ioe;class roe extends ${constructor(){super("socket.chat.EditChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",opt:!0,T:5},{no:3,name:"payload",kind:"scalar",opt:!0,T:9},{no:4,name:"pinned",kind:"scalar",opt:!0,T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const soe=new roe;class noe extends ${constructor(){super("socket.chat.EditChatMessageResponse",[{no:1,name:"message",kind:"message",T:()=>Rd}])}}const bm=new noe;class aoe extends ${constructor(){super("socket.chat.DeleteChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const ooe=new aoe;class coe extends ${constructor(){super("socket.chat.DeleteChatMessageResponse",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const wm=new coe;class doe extends ${constructor(){super("socket.chat.SearchChatMessagesRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9},{no:6,name:"search_term",kind:"scalar",T:9}])}}const loe=new doe;class uoe extends ${constructor(){super("socket.chat.MarkChannelIndexAsReadRequest",[{no:1,name:"channel_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"channel_index",kind:"scalar",T:9}])}}const hoe=new uoe;class poe extends ${constructor(){super("socket.chat.MarkChannelIndexAsReadResponse",[{no:1,name:"channel_index",kind:"scalar",T:9}])}}const goe=new poe;class moe extends ${constructor(){super("socket.chat.CreateChatChannelRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:4,name:"visibility",kind:"scalar",T:9},{no:5,name:"is_direct_message",kind:"scalar",T:8}])}}const foe=new moe;class voe extends ${constructor(){super("socket.chat.UpdateChatChannelRequest",[{no:1,name:"chat_channel_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:4,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:5,name:"visibility",kind:"scalar",opt:!0,T:9},{no:6,name:"is_direct_message",kind:"scalar",opt:!0,T:8}])}}const yoe=new voe;class boe extends ${constructor(){super("socket.chat.CreateChatChannelResponse",[{no:1,name:"chat_channel_id",kind:"scalar",T:9}])}}new boe;class woe extends ${constructor(){super("socket.chat.GetChatChannelRequest",[{no:1,name:"chat_channel_id",kind:"scalar",T:9}])}}const koe=new woe;class _oe extends ${constructor(){super("socket.chat.LatestMessageAndUnreadCount",[{no:1,name:"message",kind:"message",T:()=>Rd},{no:2,name:"unread_count",kind:"scalar",T:4,L:2}])}}const Soe=new _oe;class xoe extends ${constructor(){super("socket.chat.ChatChannel",[{no:1,name:"chat_channel_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9},{no:3,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:4,name:"visibility",kind:"scalar",T:9},{no:5,name:"is_direct_message",kind:"scalar",T:8},{no:6,name:"latest_message_and_unread_count",kind:"message",T:()=>Soe},{no:7,name:"target_user_ids",kind:"scalar",repeat:2,T:9}])}}const Eoe=new xoe;class Toe extends ${constructor(){super("socket.chat.GetChatChannelResponse",[{no:1,name:"chat_channels",kind:"message",repeat:1,T:()=>Eoe}])}}const na=new Toe;class Coe extends ${constructor(){super("socket.chat.ChannelMember",[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",opt:!0,T:9},{no:3,name:"picture",kind:"scalar",opt:!0,T:9},{no:4,name:"custom_participant_id",kind:"scalar",T:9}])}}const Poe=new Coe;class Roe extends ${constructor(){super("socket.chat.GetChatChannelMembersResponse",[{no:1,name:"channel_members",kind:"message",repeat:1,T:()=>Poe}])}}const Ioe=new Roe;var ek;(function(t){t[t.BROWSER=0]="BROWSER",t[t.TRACK=1]="TRACK",t[t.COMPOSITE=2]="COMPOSITE"})(ek||(ek={}));var os;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ON_STAGE=1]="ON_STAGE",t[t.APPROVED_STAGE=2]="APPROVED_STAGE",t[t.REQUESTED_STAGE=3]="REQUESTED_STAGE",t[t.OFF_STAGE=4]="OFF_STAGE"})(os||(os={}));var Hv;(function(t){t[t.HIVE=0]="HIVE",t[t.CHAT=1]="CHAT",t[t.PING=2]="PING"})(Hv||(Hv={}));class Aoe extends ${constructor(){super("socket.room.Peer",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",os,"STAGE_TYPE_"]},{no:5,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:6,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:7,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:8,name:"waitlisted",kind:"scalar",T:8}])}}const qy=new Aoe;class Moe extends ${constructor(){super("socket.room.PeerInfoResponse",[{no:1,name:"peer",kind:"message",T:()=>qy}])}}const km=new Moe;class Doe extends ${constructor(){super("socket.room.PeerStatusUpdate",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",os,"STAGE_TYPE_"]}])}}new Doe;class Ooe extends ${constructor(){super("socket.room.RoomPeersInfoRequest",[{no:1,name:"seach_query",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5},{no:3,name:"offset",kind:"scalar",T:5}])}}const Loe=new Ooe;class Noe extends ${constructor(){super("socket.room.RoomPeersInfoResponse",[{no:1,name:"peers",kind:"message",repeat:1,T:()=>qy}])}}const Uoe=new Noe;class joe extends ${constructor(){super("socket.room.RoomPeerCountResponse",[{no:1,name:"count",kind:"scalar",T:4,L:2}])}}const gP=new joe;class $oe extends ${constructor(){super("socket.room.Room",[{no:1,name:"room_id",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",T:9},{no:4,name:"created_at",kind:"scalar",T:4,L:2},{no:5,name:"active_recordings",kind:"message",repeat:1,T:()=>Foe}])}}const uO=new $oe;class zoe extends ${constructor(){super("socket.room.ActiveRecording",[{no:1,name:"recording_id",kind:"scalar",T:9},{no:2,name:"recording_type",kind:"enum",T:()=>["common.RecordingType",ek]}])}}const Foe=new zoe;class Voe extends ${constructor(){super("socket.room.RoomInfoResponse",[{no:1,name:"room",kind:"message",T:()=>uO}])}}const mP=new Voe;class Boe extends ${constructor(){super("socket.room.GetPeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9}])}}new Boe;class Hoe extends ${constructor(){super("socket.room.UpdatePeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9}])}}new Hoe;class Woe extends ${constructor(){super("socket.room.JoinRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>qy},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"organization_id",kind:"scalar",opt:!0,T:9},{no:5,name:"use_hive",kind:"scalar",opt:!0,T:8},{no:6,name:"preset",kind:"scalar",opt:!0,T:12},{no:7,name:"capabilities",kind:"enum",repeat:1,T:()=>["socket.room.Capabilities",Hv,"CAPABILITIES_"]},{no:8,name:"timestamp",kind:"scalar",opt:!0,T:4,L:2}])}}const Goe=new Woe;class qoe extends ${constructor(){super("socket.room.LeaveRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>qy},{no:2,name:"timestamp",kind:"scalar",opt:!0,T:4,L:2}])}}const Joe=new qoe;class Koe extends ${constructor(){super("socket.room.UpdateRoomInfoRequest",[{no:1,name:"room",kind:"message",T:()=>uO}])}}new Koe;class Qoe extends ${constructor(){super("socket.room.GetConnectedRoomsDumpRequest",[])}}new Qoe;class Yoe extends ${constructor(){super("socket.room.ServiceError",[{no:1,name:"message",kind:"scalar",opt:!0,T:9},{no:2,name:"code",kind:"scalar",opt:!0,T:9}])}}const zS=new Yoe;class Zoe extends ${constructor(){super("socket.room.ConnectedMeetingPeer",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:4,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:5,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const Xoe=new Zoe;class ece extends ${constructor(){super("socket.room.ConnectedMeetingDump",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>Xoe}])}}const fP=new ece;class tce extends ${constructor(){super("socket.room.GetConnectedRoomsDumpResponse",[{no:1,name:"parent_meeting",kind:"message",T:()=>fP},{no:2,name:"meetings",kind:"message",repeat:1,T:()=>fP}])}}const ice=new tce;class rce extends ${constructor(){super("socket.room.CreateRoomRequestPayload",[{no:1,name:"title",kind:"scalar",opt:!0,T:9}])}}const sce=new rce;class nce extends ${constructor(){super("socket.room.CreateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>sce}])}}const ace=new nce;class oce extends ${constructor(){super("socket.room.CreateRoomResponsePayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>zS}])}}const cce=new oce;class dce extends ${constructor(){super("socket.room.CreateConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>cce}])}}const vP=new dce;class lce extends ${constructor(){super("socket.room.UpdateRoomRequestPayload",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}}const uce=new lce;class hce extends ${constructor(){super("socket.room.UpdateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>uce}])}}new hce;class pce extends ${constructor(){super("socket.room.DisableRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const gce=new pce;class mce extends ${constructor(){super("socket.room.DisableConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>gce}])}}const fce=new mce;class vce extends ${constructor(){super("socket.room.DisableConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>wce}])}}const yce=new vce;class bce extends ${constructor(){super("socket.room.DisableConnectedRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"status",kind:"scalar",opt:!0,T:9},{no:3,name:"title",kind:"scalar",opt:!0,T:9},{no:4,name:"error",kind:"message",T:()=>zS}])}}const wce=new bce;class kce extends ${constructor(){super("socket.room.MovePeerPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const _ce=new kce;class Sce extends ${constructor(){super("socket.room.MovePeersBetweenRoomsRequest",[{no:1,name:"source_meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"destination_meeting_id",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>_ce}])}}const xce=new Sce;class Ece extends ${constructor(){super("socket.room.MovedPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>zS}])}}const hO=new Ece;class Tce extends ${constructor(){super("socket.room.MovePeersBetweenRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>hO}])}}new Tce;class Cce extends ${constructor(){super("socket.room.TransferPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"auth_token",kind:"scalar",opt:!0,T:9}])}}const Pce=new Cce;class Rce extends ${constructor(){super("socket.room.GetAllAddedParticipantsResponse",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>Mce}])}}const Ice=new Rce;class Ace extends ${constructor(){super("socket.room.AddedParticipant",[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",opt:!0,T:9},{no:3,name:"picture",kind:"scalar",opt:!0,T:9},{no:4,name:"custom_participant_id",kind:"scalar",T:9}])}}const Mce=new Ace;class Dce extends ${constructor(){super("socket.room.RemoveParticipantsRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Oce=new Dce;class Lce extends ${constructor(){super("socket.room.BroadcastMessage",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"timestamp",kind:"scalar",T:4,L:2},{no:4,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const yP=new Lce;class Nce extends ${constructor(){super("socket.room.AcceptWaitingRoomRequests",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const Uce=new Nce;class jce extends ${constructor(){super("socket.room.DenyWaitingRoomRequests",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const $ce=new jce;class zce extends ${constructor(){super("socket.room.WaitingRoomRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9}])}}const Fce=new zce;class Vce extends ${constructor(){super("socket.room.GetWaitingRoomRequests",[{no:1,name:"requests",kind:"message",repeat:1,T:()=>Fce}])}}const bP=new Vce;class Bce extends ${constructor(){super("socket.plugin.AddPluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const Hce=new Bce;class Wce extends ${constructor(){super("socket.plugin.RemovePluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const Gce=new Wce;class qce extends ${constructor(){super("socket.plugin.EnablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Jce=new qce;class Kce extends ${constructor(){super("socket.plugin.DisablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Qce=new Kce;class Yce extends ${constructor(){super("socket.plugin.EnablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Zce=new Yce;class Xce extends ${constructor(){super("socket.plugin.DisablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const ede=new Xce;class tde extends ${constructor(){super("socket.plugin.PluginEventToRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const ide=new tde;class rde extends ${constructor(){super("socket.plugin.PluginEventToPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"plugin_data",kind:"scalar",T:12}])}}const sde=new rde;class nde extends ${constructor(){super("socket.plugin.StoreKeys",[{no:1,name:"store_key",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",opt:!0,T:12}])}}const FS=new nde;class ade extends ${constructor(){super("socket.plugin.PluginStoreInsertKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"insert_keys",kind:"message",repeat:1,T:()=>FS}])}}const wP=new ade;class ode extends ${constructor(){super("socket.plugin.PluginStoreGetKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"get_keys",kind:"message",repeat:1,T:()=>FS}])}}const cde=new ode;class dde extends ${constructor(){super("socket.plugin.PluginStoreDeleteKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"delete_keys",kind:"message",repeat:1,T:()=>FS}])}}const lde=new dde;class ude extends ${constructor(){super("socket.plugin.PluginStoreDeleteRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9}])}}const hde=new ude;class pde extends ${constructor(){super("socket.plugin.EnablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"enabled_by",kind:"scalar",T:9}])}}const tk=new pde;class gde extends ${constructor(){super("socket.plugin.EnablePluginsResponse",[{no:1,name:"plugins",kind:"message",repeat:1,T:()=>tk}])}}const mde=new gde;class fde extends ${constructor(){super("socket.plugin.DisablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"disabled_by",kind:"scalar",T:9}])}}const kP=new fde;class vde extends ${constructor(){super("socket.plugin.PluginStoreItem",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"store_key",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}])}}const yde=new vde;class bde extends ${constructor(){super("socket.plugin.PluginStoreResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"store_items",kind:"message",repeat:1,T:()=>yde}])}}const _P=new bde;class wde extends ${constructor(){super("socket.plugin.PluginEventResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const SP=new wde;class kde extends ${constructor(){super("socket.livestreaming.LiveStreamingEvent",[{no:1,name:"livestream_id",kind:"scalar",T:9},{no:2,name:"err_message",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",T:9},{no:5,name:"playback_url",kind:"scalar",T:9},{no:6,name:"org_id",kind:"scalar",T:9},{no:7,name:"room_name",kind:"scalar",T:9},{no:8,name:"room_uuid",kind:"scalar",T:9},{no:9,name:"status",kind:"scalar",T:9}])}}const xP=new kde;class _de extends ${constructor(){super("socket.livestreaming.GetStagePeersResponse",[{no:1,name:"stage_peers",kind:"scalar",repeat:2,T:9}])}}const EP=new _de;class Sde extends ${constructor(){super("socket.livestreaming.StageRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9}])}}const xde=new Sde;class Ede extends ${constructor(){super("socket.livestreaming.GetStageRequestsResponse",[{no:1,name:"stage_requests",kind:"message",repeat:1,T:()=>xde}])}}const Gb=new Ede;class Tde extends ${constructor(){super("socket.livestreaming.GrantStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const Cde=new Tde;class Pde extends ${constructor(){super("socket.livestreaming.DenyStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const Rde=new Pde;class Ide extends ${constructor(){super("socket.livestreaming.LeaveStageRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const TP=new Ide;class Ade extends ${constructor(){super("socket.polls.Poll",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"created_by",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"question",kind:"scalar",T:9},{no:5,name:"options",kind:"message",repeat:1,T:()=>Dde},{no:6,name:"hide_votes",kind:"scalar",T:8},{no:7,name:"anonymous",kind:"scalar",T:8},{no:8,name:"votes",kind:"scalar",repeat:2,T:9}])}}const pO=new Ade;class Mde extends ${constructor(){super("socket.polls.PollOption",[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",opt:!0,T:4,L:2},{no:3,name:"votes",kind:"message",repeat:1,T:()=>Lde}])}}const Dde=new Mde;class Ode extends ${constructor(){super("socket.polls.PollVote",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}}const Lde=new Ode;class Nde extends ${constructor(){super("socket.polls.NewPollRequest",[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"options",kind:"scalar",repeat:2,T:9},{no:3,name:"anonymous",kind:"scalar",T:8},{no:4,name:"hide_votes",kind:"scalar",T:8},{no:5,name:"created_by",kind:"scalar",opt:!0,T:9},{no:6,name:"created_by_user_id",kind:"scalar",opt:!0,T:9}])}}const Ude=new Nde;class jde extends ${constructor(){super("socket.polls.VotePollRequest",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"index",kind:"scalar",T:4,L:2}])}}const $de=new jde;class zde extends ${constructor(){super("socket.polls.UpdatePollResponse",[{no:1,name:"poll",kind:"message",T:()=>pO}])}}const qb=new zde;class Fde extends ${constructor(){super("socket.polls.GetPollsResponse",[{no:1,name:"polls",kind:"message",repeat:1,T:()=>pO}])}}const Vde=new Fde;var ik;(function(t){t[t.ACTION=0]="ACTION",t[t.RESPONSE=1]="RESPONSE",t[t.EVENT=2]="EVENT"})(ik||(ik={}));var rk;(function(t){t[t.SERVICE_NOT_FOUND=0]="SERVICE_NOT_FOUND",t[t.PARAMETER_VALIDATION_ERROR=1]="PARAMETER_VALIDATION_ERROR",t[t.TIMEOUT_ERROR=2]="TIMEOUT_ERROR",t[t.APPLICATION_ERROR=3]="APPLICATION_ERROR"})(rk||(rk={}));class Bde extends ${constructor(){super("bridge.BridgeMessage",[{no:1,name:"type",kind:"enum",T:()=>["bridge.BridgeMessageType",ik]},{no:2,name:"action",kind:"message",oneof:"data",T:()=>Wde},{no:3,name:"response",kind:"message",oneof:"data",T:()=>qde},{no:4,name:"event",kind:"message",oneof:"data",T:()=>Yde}])}}new Bde;class Hde extends ${constructor(){super("bridge.BridgeAction",[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const Wde=new Hde;class Gde extends ${constructor(){super("bridge.BridgeResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"response",kind:"scalar",T:9},{no:3,name:"error",kind:"message",T:()=>Kde}])}}const qde=new Gde;class Jde extends ${constructor(){super("bridge.BridgeError",[{no:1,name:"type",kind:"enum",T:()=>["bridge.ErrorType",rk]},{no:2,name:"message",kind:"scalar",T:9}])}}const Kde=new Jde;class Qde extends ${constructor(){super("bridge.BridgeEvent",[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const Yde=new Qde;class Zde extends ${constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3,L:0},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),i=Date.now();return e.seconds=At.from(Math.floor(i/1e3)).toBigInt(),e.nanos=i%1e3*1e6,e}toDate(e){return new Date(At.from(e.seconds).toNumber()*1e3+Math.ceil(e.nanos/1e6))}fromDate(e){const i=this.create(),r=e.getTime();return i.seconds=At.from(Math.floor(r/1e3)).toBigInt(),i.nanos=r%1e3*1e6,i}internalJsonWrite(e,i){let r=At.from(e.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let s="Z";if(e.nanos>0){let n=(e.nanos+1e9).toString().substring(1);n.substring(3)==="000000"?s="."+n.substring(0,3)+"Z":n.substring(6)==="000"?s="."+n.substring(0,6)+"Z":s="."+n+"Z"}return new Date(r).toISOString().replace(".000Z",s)}internalJsonRead(e,i,r){if(typeof e!="string")throw new Error("Unable to parse Timestamp from JSON "+uS(e)+".");let s=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!s)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let n=Date.parse(s[1]+"-"+s[2]+"-"+s[3]+"T"+s[4]+":"+s[5]+":"+s[6]+(s[8]?s[8]:"Z"));if(Number.isNaN(n))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=At.from(n/1e3).toBigInt(),r.nanos=0,s[7]&&(r.nanos=parseInt("1"+s[7]+"0".repeat(9-s[7].length))-1e9),r}}new Zde;const Xde=3,ele=30,tle=8e3;class ile{constructor(e){w(this,"ipInfo"),w(this,"axios"),w(this,"requests"),w(this,"roomName"),w(this,"roomUUID"),w(this,"peerId"),w(this,"authToken"),w(this,"organizationId");const{timeout:i=tle,retry:r=Xde,retryDelay:s=ele,baseURL:n="https://api.cluster.dyte.in",authToken:a}=e||{};this.requests=Iv.create({baseURL:n,responseType:"json",timeout:i,retry:r,retryDelay:s}),this.axios=Iv,this.setAuthToken(a,{bearer:!0}),this.requests.interceptors.request.use(o=>(C.injectContext(this.requests.defaults.headers.common),o),async o=>{x.error("xhr::axios",{debuggingHint:"otelRequestInterceptor failed.",error:o})}),this.requests.interceptors.response.use(o=>{try{o.config.url!==C.logsEndpoint&&x.debug("xhr::axios",{networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,method:o.config.method}})}catch(c){console.error("xhr::dyte",{error:"responseInterceptorFailed",err:c,response:o})}return o},async o=>{var c;try{if(!o)return Promise.reject(new Error("Unknown error occurred"));o&&o.config&&((c=o.config)==null?void 0:c.url)!==C.logsEndpoint&&x.error("xhr::axios",{error:o,networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,retries:o.config.retry,method:o.config.method,isOnline:navigator.onLine?"online":"offline"}});const{config:u,message:l}=o;return u&&l&&u.retry!==void 0&&u.retry>0&&(l.includes("timeout")||l.includes("Network Error"))?(u.retry-=1,u.baseURL==="https://api.cluster.dyte.in"?u.baseURL="https://network2.dyte.io":u.baseURL==="https://network2.dyte.io"&&(u.baseURL="https://api.cluster.dyte.in"),this.requests(u)):Promise.reject(o)}catch(u){return console.error("xhr::dyte",{error:"responseInterceptorFailed",err:u,responseError:o}),Promise.reject(u)}})}setAuthToken(e,i){const{bearer:r}=i||{};this.authToken=e,this.requests.defaults.headers.common.Authorization=r?`Bearer ${e}`:e}setHeader(e,i){this.requests.defaults.headers.common[e]=i}setRoomName(e){this.roomName=e}setRoomUUID(e){this.roomUUID=e}setPeerId(e){this.peerId=e}setOrganizationId(e){this.organizationId=e}}var rle=Object.defineProperty,sle=Object.getOwnPropertyDescriptor,gO=(t,e,i,r)=>{for(var s=r>1?void 0:r?sle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&rle(e,i,s),s};class Jy extends ile{constructor(e){super(e),this.setHeader("x-dyte-web-core-version",_g)}async getIPDetails({peerId:e}){var i;try{const r=(await this.requests.get("https://media-location.dyte.io")).data;if(((i=r.loc)==null?void 0:i.length)>5)return r;throw Error("Insufficient data")}catch{x.error("getIPDetails::failed")}try{const r=await vS.getIPDetails({peerId:e});return x.info("gotIPDetails",{networkCall:{ip:r.ip,timezone:r.timezone}}),r}catch(r){x.warn("ApiClient.getRoomNodeLinkAndTitleV1 Failed to get ip details",{error:{name:r.name,message:r.message}});return}}async getICEServers(){const{success:e,iceServers:i}=(await this.requests.get("/iceservers")).data;if(e)return i}async getPlugins(e){var i,r,s,n,a,o,c;let{plugins:u}=(await this.requests.get("/v2/plugins/user")).data.data;const l=((r=(i=ge.getValue(me.V1_PLUGINS))==null?void 0:i.toString())==null?void 0:r.split(","))||[],p=u.reduce((m,y)=>(m[l.includes(y.id)?"v1":"v2"].push(y),m),{v1:[],v2:[]});return e?u=p.v2:u=p.v1,(a=(n=(s=tt.modules)==null?void 0:s.devTools)==null?void 0:n.plugins)!=null&&a.length&&((c=(o=tt.modules)==null?void 0:o.devTools)==null||c.plugins.forEach(m=>{var y,b,S;const E={...dh,tags:[...dh.tags]};E.baseURL=`http://localhost:${m.port}`,E.name=m.name,E.picture=(y=m.picture)!=null?y:dh.picture,E.description=(b=m.description)!=null?b:dh.description,E.staggered=(S=m.staggered)!=null?S:dh.staggered,E.createdAt=new Date().toISOString(),E.updatedAt=new Date().toISOString(),E.id=m.id,E.organizationId=this.organizationId,u.push(E)})),u}async getPluginDetails(e){const{plugin:i}=(await this.requests.get(`/v2/plugins/view/${e}`)).data.data;return i}async getPluginConfig(e){return(await this.axios.get(`${e}/dyte-config.json`)).data}async authorizePlugin(e){const i={peerId:this.peerId};Ne.isV2AuthToken||(i.roomName=this.roomName);const{token:r}=(await this.requests.post(`/v2/plugins/authorize/${e}`,i)).data.data;return r}async getPresignedUrls(e,i){const r={roomUUID:this.roomUUID,filename:e};ge.hasFeature(me.FEAT_CHAT_SDK)&&(r.viewType=i);const{getLocation:s,putLocation:n}=(await this.requests.post("/v1/meetings/genPreSignedUploadUrl",r)).data.data;return{getLocation:s,putLocation:n}}async uploadFile(e,i){if(navigator.isReactNative&&"uri"in e)try{await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:{uri:e.uri,name:e.name}})}catch(r){x.error(`sendFileMessage::${r}`)}else await this.axios.put(i,e,{headers:{"Content-Type":e.type}})}}gO([C.trace("APIClient.getIPDetails")],Jy.prototype,"getIPDetails",1);gO([C.trace("APIClient.getICEServers")],Jy.prototype,"getICEServers",1);var nle=Object.defineProperty,ale=Object.getOwnPropertyDescriptor,Va=(t,e,i,r)=>{for(var s=r>1?void 0:r?ale(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&nle(e,i,s),s};class Qn extends Jy{async startLivestreaming(){var e,i;return(i=(e=(await this.requests.post(`/v2/meetings/${Ne.meetingId}/livestreams`)).data)==null?void 0:e.data)==null?void 0:i.playback_url}async stopLivestreaming(){return this.requests.post(`/v2/meetings/${Ne.meetingId}/active-livestream/stop`)}async getActiveLivestream(){const{playbackUrl:e,status:i}=Ms((await this.requests.get(`/v2/meetings/${Ne.meetingId}/active-livestream`)).data.data);return{status:i,playbackUrl:e}}async getUserDetails(){const e=(await this.requests.get("v2/internals/participant-details")).data.data;return Ms(e)}getUserPreset(){throw new Error("getUserPreset does not exist for v2")}async startRecording(e){return(await this.requests.post("/v2/recordings",{...GD(e),meeting_id:Ne.meetingId})).data.id}stopRecording(e){return this.requests.put(`v2/recordings/${e}`,{action:"stop"})}async getActiveRecording(){const{status:e,id:i}=(await this.requests.get(`v2/recordings/active-recording/${Ne.meetingId}`)).data.data;return{status:e,id:i}}async getRoomNodeData({peerId:e}){const i=await this.getIPDetails({peerId:e});this.ipInfo=i;const{roomNodeLink:r,title:s,useHiveMedia:n}=Ms((await this.requests.post("v2/internals/rooms",{ip_information:i})).data.data);return{roomNodeUrl:r,meetingTitle:s,useHiveMedia:n!=null?n:!1}}}Va([C.trace("APIClient.startLivestreaming")],Qn.prototype,"startLivestreaming",1);Va([C.trace("APIClient.stopLivestreaming")],Qn.prototype,"stopLivestreaming",1);Va([C.trace("APIClient.getActiveLivestream")],Qn.prototype,"getActiveLivestream",1);Va([C.trace("APIClient.getUserDetails")],Qn.prototype,"getUserDetails",1);Va([C.trace("APIClient.getUserPreset")],Qn.prototype,"getUserPreset",1);Va([C.trace("APIClient.startRecording")],Qn.prototype,"startRecording",1);Va([C.trace("APIClient.stopRecording")],Qn.prototype,"stopRecording",1);Va([C.trace("APIClient.getActiveRecording")],Qn.prototype,"getActiveRecording",1);Va([C.trace("APIClient.getRoomNodeData")],Qn.prototype,"getRoomNodeData",1);var ole=Object.defineProperty,cle=Object.getOwnPropertyDescriptor,Tu=(t,e,i,r)=>{for(var s=r>1?void 0:r?cle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&ole(e,i,s),s};class Id extends Jy{startLivestreaming(){throw new Error("Method not implemented.")}stopLivestreaming(){throw new Error("Method not implemented.")}getActiveLivestream(){throw new Error("Method not implemented.")}async getUserDetails(){const{user:e}=(await this.requests.get("/auth/basicUserDetails")).data;return e}async getUserPreset(e){const{preset:i}=(await this.requests.post("/v1/userpreset",{roomName:e,authToken:this.authToken,clientType:"CLIENT_APP",version:"0.5.0"})).data.data;return Ms(i)}async startRecording(e){const i=await this.requests.post(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recording`,e);if(i.status!==201)throw new Error("Recording failed to start");return i.data.data.recording.id}async stopRecording(e){if((await this.requests.put(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recordings/${e}`,{recordingAction:"stop"})).status!==201)throw new Error("Recording failed to stop")}async getActiveRecording(){return this.organizationId?(await this.requests.get(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/active-recording?limit=50`)).data.data.recording:{}}async getRoomNodeData({roomName:e,peerId:i}){const r=`
				query Session($roomName: String!, $password: String, $ipInformation: String) {
						session(roomName: $roomName, password: $password) {
							title,
							roomNodeLink(ipInformation: $ipInformation),
							useHiveMedia,
							roomName,
							password
						}
					}
				`,s=await this.getIPDetails({peerId:i});this.ipInfo=s;const{roomNodeLink:n,title:a,useHiveMedia:o}=(await this.requests.post("/graphql",{query:r,variables:{roomName:e,ipInformation:JSON.stringify(s)}})).data.data.session;return{roomNodeUrl:n,meetingTitle:a,useHiveMedia:o!=null?o:!1}}}Tu([C.trace("APIClientV1.getUserDetails")],Id.prototype,"getUserDetails",1);Tu([C.trace("APIClientV1.getUserPreset")],Id.prototype,"getUserPreset",1);Tu([C.trace("APIClientV1.startRecording")],Id.prototype,"startRecording",1);Tu([C.trace("APIClientV1.stopRecording")],Id.prototype,"stopRecording",1);Tu([C.trace("APIClientV1.getActiveRecording")],Id.prototype,"getActiveRecording",1);Tu([C.trace("APIClientV1.getRoomNodeData")],Id.prototype,"getRoomNodeData",1);let sk;function dle(t){return sk=Ne.isV2AuthToken?new Qn(t):new Id(t),sk}function Bi(){return sk}const lle=0,ule=1,hle=2,ple=3,gle=4,mle={getPeerInfo:0,updatePeerInfo:1,getRoomPeersInfo:2,joinRoom:3,leaveRoom:4,getRoomInfo:5,updateRoomInfo:6,closeRoom:7,startedLivestream:8,stoppedLivestream:9,erroredLivestream:10,getStagePeers:11,getStageRequests:12,requestStageAccess:13,cancelStageRequest:14,grantStageAccess:15,denyStageAccess:16,roomPeerCount:17,joinStage:18,leaveStage:19,getConnectedRoomsDump:20,createConnectedRooms:21,deleteConnectedRooms:22,movePeers:23,transferPeer:24,movedPeer:25,connectedRoomsUpdated:26,connectedRoomsDeleted:27,getAllAddedParticipants:28,broadcastMessage:29,kick:30,kickAll:31,transcript:32,getWaitingRoomRequests:33,acceptWaitingRoomRequests:34,waitingRoomRequestAccepted:35,denyWaitingRoomRequests:36,waitingRoomRequestDenied:37},fle={getMessages:0,sendMessageToRoom:1,sendMessageToPeers:2,editMessage:3,deleteMessage:4,getPaginatedMessages:5,sendMessageToChannel:6,searchChannelMessages:7,getAllChatChannels:8,markChannelIndexAsRead:9},vle={getPlugins:0,addPlugin:1,enablePluginForRoom:2,disablePluginForPeers:3,enablePluginForPeers:4,disablePluginForRoom:5,removePlugin:6,customPluginEventToRoom:7,customPluginEventToPeers:8,storeInsertKeys:9,storeGetKeys:10,storeDeleteKeys:11,storeDelete:12},yle={createPoll:0,getPolls:1,votePoll:2,updatePoll:3},ble={unknown:0,createWebRTCTransport:1,produce:2,consume:3,toggleProducer:4,toggleConsumer:5,closeProducer:6,closeConsumer:7,joinRoom:16,leaveRoom:17,selectedPeer:18,globalPinPeer:19,selfJoinComplete:20,peerJoinedBroadcast:25,peerLeaveBroadcast:26,peerProducerCreateBroadcast:27,peerProducerToggleBroadcast:28,peerProducerCloseBroadcast:29,globalPeerPinBroadcast:30,recordingStartedBroadcast:31,recordingStoppedBroadcast:32,peerDisplayNameEditBroadcast:33,selectedPeerDiff:40,renegotiateSessionDescription:50,errorResponse:60,kickPeer:90,kickAll:91,changeDisplayName:92,hostControlPeer:93,hostControlAllPeers:94},wle={createChatChannel:0,getChatChannel:1,deprecatedGetAllChatChannels:2,getChannelMembers:3,updateChatChannel:4};function xg(t,e){return Object.keys(e).reduce((i,r)=>(i[r]=(t<<16)+e[r],i),{})}function kle(t){return Object.keys(t).reduce((e,i)=>(e[i]=16777216|t[i],e),{})}const ye=xg(lle,mle),Ci=xg(ule,fle),Te=xg(hle,vle),ha=xg(ple,yle),Bc=xg(gle,wle),st=kle(ble);var nk;class mO{constructor(){w(this,"meetingTitle"),w(this,"roomName"),w(this,"roomUUID"),w(this,"isDisconnected"),w(this,"roomJoined"),N(this,nk,void 0),w(this,"peerId"),w(this,"authToken"),w(this,"maxPreferredStreams"),w(this,"mediaConnected")}get sfuHandler(){return h(this,nk)}reconnect(){throw new U("Method not implemented.")}async joinRoom(e,i,r,s,n={}){throw new U("Method not implemented.")}async leaveRoom(){throw new U("Method not implemented.")}async handleSocketCallbacks(e){throw new U("Method not implemented.")}async handleSockets(e,i){throw new U("Method not implemented.")}async shareMic(e){throw new U("Method not implemented.")}async shareWebcam(e){throw new U("Method not implemented.")}async shareScreen(e){throw new U("Method not implemented.")}async unmuteSelf(){throw new U("Method not implemented.")}async muteSelf(){throw new U("Method not implemented.")}async pauseWebcam(){throw new U("Method not implemented.")}async disableScreenShare(){throw new U("Method not implemented.")}async acceptWaitingRequest(e){throw new U("Method not implemented.")}async rejectWaitingRequest(e){throw new U("Method not implemented.")}async muteAll(e){throw new U("Method not implemented.")}async muteAllVideo(){throw new U("Method not implemented.")}async disableAudio(e){throw new U("Method not implemented.")}async disableVideo(e){throw new U("Method not implemented.")}async kickAll(){throw new U("Method not implemented.")}async kick(e){throw new U("Method not implemented.")}async pinPeer(e){throw new U("Method not implemented.")}async getChatMessages(){throw new U("Method not implemented.")}async requestRemoteControl(e){throw new U("Method not implemented.")}async acceptRemoteControl(e){throw new U("Method not implemented.")}async terminateRemoteControl(e,i){throw new U("Method not implemented.")}async sendEventRemoteControl(e,i,r){throw new U("Method not implemented.")}async getPolls(){throw new U("Method not implemented.")}async newPoll(e){throw new U("Method not implemented.")}async votePoll(e){throw new U("Method not implemented.")}async getPage(e){throw new U("Method not implemented.")}getConsumers(){throw new U("Method not implemented.")}async sendMessage(e){throw new U("Method not implemented.")}async getRoomState(){throw new U("Method not implemented.")}async addRoomPlugin(e){throw new U("Method not implemented.")}async removeRoomPlugin(e){throw new U("Method not implemented.")}async unpinChatMessage(e){throw new U("Method not implemented.")}async pinChatMessage(e){throw new U("Method not implemented.")}async sendChatMessage(e){throw new U("Method not implemented.")}async broadcastMessage(e,i){throw new U("Method not implemented.")}async acceptAllRequestToJoinStage(e){throw new U("Method not implemented.")}async grantStageAccess(e){throw new U("Method not implemented.")}async stopPresenting(){}async startPresenting(){}async requestToJoinStage(e){throw new U("Method not implemented.")}async rejectRequestToJoinStage(e){throw new U("Method not implemented.")}async denyStageAccess(e){throw new U("Method not implemented.")}async withdrawRequestToJoinStage(){throw new U("Method not implemented.")}async removePeerFromStage(e,i){throw new U("Method not implemented.")}async kickPeerFromStage(e){throw new U("Method not implemented.")}stopAllProducers(){throw new U("Method not implemented.")}}nk=new WeakMap;class _le extends Er.EventEmitter{}var Hs;const al=class{constructor(t){N(this,Hs,void 0),L(this,Hs,t)}static getLogger(t){return new al(t)}static format(t,...e){const i=t.split("%");let r=t;i.length&&([r]=i),e.reverse();for(let s=1;s<i.length&&e.length;s+=1){const n=e.pop();let a=i[s];switch(a.at(0)){case"s":a=a.replace("s",n);break;case"d":a=a.replace("d",n.toString());break;case"o":a=a.replace("o",JSON.stringify(n));break}r=`${r}${a}`}return e.length&&e.reverse().forEach(s=>{r=`${r} ${JSON.stringify(s)}`}),r}info(t,...e){let i=al.format(t,...e);h(this,Hs)&&(i=`${h(this,Hs)}::${i}`),x.info(i)}debug(t,...e){let i=al.format(t,...e);h(this,Hs)&&(i=`${h(this,Hs)}::${i}`),x.info(i)}warn(t,...e){let i=al.format(t,...e);h(this,Hs)&&(i=`${h(this,Hs)}::${i}`),x.info(i)}error(t,...e){let i=al.format(t,...e);h(this,Hs)&&(i=`${h(this,Hs)}::${i}`),x.error(i)}};let Yn=al;Hs=new WeakMap;const CP=Yn.getLogger("EnhancedEventEmitter");class vd extends Er.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(e,...i){const r=this.listenerCount(e);try{return this.emit(e,...i)}catch(s){return CP.error("safeEmit() | event listener threw an error [event:%s]:%o",e,s),Boolean(r)}}async safeEmitAsPromise(e,...i){const r={}.EVENT_PROMISE_TIMEOUT?parseInt({}.EVENT_PROMISE_TIMEOUT,10):1e4;return this.safeEmitAsPromiseWithTimeout(e,r,...i)}async safeEmitAsPromiseWithTimeout(e,i,...r){return new Promise((s,n)=>{setTimeout(n,i,"event request timeout");try{this.emit(e,...r,s,n)}catch(a){CP.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",e,a),n(a)}})}}class VS extends vd{constructor(){super(),w(this,"_mapMidTransceiver",new Map),this._mapMidTransceiver=new Map}get midTransceiverMap(){return this._mapMidTransceiver}}const Ye=Yn.getLogger("Chrome74");class BS extends VS{constructor(){super(),w(this,"_direction"),w(this,"_pc"),w(this,"_sendWebStream",new MediaStream),w(this,"_sendScreenShareStream",new MediaStream),w(this,"_transportReady",!1)}static createFactory(){return()=>new BS}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(Ye.debug("close()"),this._pc)try{this._pc.close()}catch(e){Ye.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Ye.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Ye.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){Ye.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(){Ye.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return Ye.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{Ye.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOption:r,screenShare:s}){var n;this._assertSendDirection(),Ye.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[s?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i});if(!navigator.isReactNative){Ye.debug("creating new transceiver");const c=RTCRtpSender.getCapabilities(e.kind);Ye.info("senders available params:",c);const u=[];if(r){const l=c.codecs.find(p=>p.mimeType.includes(r.name));if(r.parameters){Ye.info("codecOption.parameters:",r.parameters);const p=((n=l.sdpFmtpLine)==null?void 0:n.split(";"))||[];p.push(...r.parameters);const m=Array.from(new Set(p).values());l.sdpFmtpLine=m.join(";")}u.push(l)}Ye.info("selected codecs:",u),a.setCodecPreferences(u)}const o=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(o),r&&r.name==="opus"&&(o.sdp=o.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),o.sdp+=`a=rtcp-fb:111 nack\r
`),{offerSdp:o,callback:async c=>(Ye.debug("send() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(e){this._assertSendDirection(),Ye.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Ye.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{Ye.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?Ye.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Ye.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),Ye.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),Ye.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){throw this._assertRecvDirection(),Ye.debug("stopReceiving() [localId:%s]",e),Error("method not implemented")}async pauseReceiving(e){throw this._assertRecvDirection(),Ye.debug("pauseReceiving() [localId:%s]",e),Error("method not implemented")}async resumeReceiving(e){throw this._assertRecvDirection(),Ye.debug("resumeReceiving() [localId:%s]",e),Error("method not implemented")}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){Ye.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Ye.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Ye.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Ye.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Ye.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Ye.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{Ye.info("icecandidateerror",e)}),this._pc.addEventListener("datachannel",e=>{Ye.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{Ye.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{Ye.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{Ye.error("data channel error: ",e.channel.label,r)},i.onmessage=r=>{Ye.info("data channel message: ",e.channel.label,r),this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(r.data)))}})}}const $e=Yn.getLogger("Firefox60");class Wv extends VS{constructor(e){super(),w(this,"_direction"),w(this,"_pc"),w(this,"_sendWebStream",new MediaStream),w(this,"_sendScreenShareStream",new MediaStream),w(this,"_transportReady",!1),w(this,"supportsSendEncodings",!1),this.supportsSendEncodings=e.supportsSendEncodings}static createFactory(e){return()=>new Wv(e)}get name(){return"Firefox60"}get pc(){return this._pc}close(){if($e.debug("close()"),this._pc)try{this._pc.close()}catch(e){$e.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){$e.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return $e.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{$e.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){throw $e.debug("updateIceServers()"),new Error("not supported")}async restartIce(){$e.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return $e.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{$e.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,screenShare:r}){this._assertSendDirection(),$e.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),$e.debug("creating new transceiver");const s=this.supportsSendEncodings?{sendEncodings:i}:{},n=this._pc.addTransceiver(e,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream],...s});if(!this.supportsSendEncodings&&i){i.reverse();const o=n.sender.getParameters();o.encodings=i,await n.sender.setParameters(o)}const a=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(a),a.sdp=a.sdp.replace("minptime=10;useinbandfec=1",`minptime=10;useinbandfec=1;usedtx=1${this.supportsSendEncodings?"":";maxaveragebitrate=16000"}`),{offerSdp:a,callback:async o=>($e.debug("send() | calling pc.setRemoteDescription() [answer:%o]",o),await this._pc.setRemoteDescription(o),this.midTransceiverMap.set(n.mid,n),n.mid)}}async stopSending(e){this._assertSendDirection(),$e.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return $e.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{$e.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?$e.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):$e.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),$e.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters(),n=s.encodings.length-1-i;s.encodings.forEach((a,o)=>{o>=n?a.active=!0:a.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),$e.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){this._assertRecvDirection(),$e.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",$e.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return $e.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{$e.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),$e.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return $e.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{$e.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async resumeReceiving(e){this._assertRecvDirection(),$e.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return $e.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async s=>{$e.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){$e.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("datachannel",e=>{$e.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{$e.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{$e.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{$e.error("data channel error: ",e.channel.label,r)},i.onmessage=async r=>{$e.debug("data channel message: ",e.channel.label,r);const s=await r.data.arrayBuffer();this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(s)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:$e.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),$e.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":$e.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":$e.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:$e.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{$e.info("chrome74::icecandidateerror",e)})}}const De=Yn.getLogger("Safari12");class HS extends VS{constructor(){super(),w(this,"_direction"),w(this,"_pc"),w(this,"_sendWebStream",new MediaStream),w(this,"_sendScreenShareStream",new MediaStream),w(this,"_transportReady",!1)}static createFactory(){return()=>new HS}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(De.debug("close()"),this._pc)try{this._pc.close()}catch(e){De.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,onTrackHandler:a}){De.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...s},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return De.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{De.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),e.close()}}}async updateIceServers(e){De.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(){De.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return De.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{De.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOption:r,screenShare:s}){var n;this._assertSendDirection(),De.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),De.debug("creating new transceiver");const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[s?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(e.kind);De.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(p=>p.mimeType.includes(r.name));if(r.parameters){De.info("codecOption.parameters:",r.parameters);const p=((n=l.sdpFmtpLine)==null?void 0:n.split(";"))||[];p.push(...r.parameters);const m=[...new Set(p).values()];l.sdpFmtpLine=m.join(";")}c.push(l)}De.info("selected codecs:",c),a.setCodecPreferences(c);const u=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(u),u.sdp=u.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:u,callback:async l=>(De.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(e){this._assertSendDirection(),De.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return De.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{De.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?De.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):De.debug("replaceTrack() [localId:%s, no track]",e);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),De.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await r.sender.setParameters(s)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),De.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const r=this.midTransceiverMap.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const s=r.sender.getParameters();s.encodings.forEach((n,a)=>{s.encodings[a]={...n,...i}}),await r.sender.setParameters(s)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async receive(e){this._assertRecvDirection(),De.debug("recieve() | calling pc.setLocalDescription() [answer:%o]",e);const i=this._pc.getTransceivers().at(-1);return De.info("Transceiver is now receiving",i,this._pc.getTransceivers()),this.midTransceiverMap.set(i.mid,i),{track:i.receiver.track,localId:i.mid}}async stopReceiving(e){this._assertRecvDirection(),De.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",De.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return De.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{De.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),De.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return De.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async s=>{De.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async resumeReceiving(e){this._assertRecvDirection(),De.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return De.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async s=>{De.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){De.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:De.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),De.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":De.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":De.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:De.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{De.info("chrome74::icecandidateerror",e)}),this._pc.ondatachannel=e=>{De.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{De.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{De.warn("data channel closed: ",e.channel.label)},i.onerror=r=>{De.error("data channel error: ",e.channel.label,r)},i.onmessage=async r=>{De.debug("data channel message: ",e.channel.label,r);const s=String.fromCharCode(...new Uint8Array(r.data));this.safeEmit("datachannel",e.channel,s)}}}}class Wl extends U{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Wl):this.stack=new Error(e).stack}}class Sr extends U{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,Sr):this.stack=new Error(e).stack}}const Tn=Yn.getLogger("Producer");class Sle extends vd{constructor({id:e,localId:i,track:r,stopTracks:s,disableTrackOnPause:n,zeroRtpOnPause:a,handler:o,appData:c}){super(),w(this,"_id"),w(this,"_localId"),w(this,"_closed",!1),w(this,"_handler"),w(this,"_track"),w(this,"_kind"),w(this,"_paused"),w(this,"_maxSpatialLayer"),w(this,"_stopTracks"),w(this,"_disableTrackOnPause"),w(this,"_zeroRtpOnPause"),w(this,"_appData"),w(this,"observer"),this._id=e,this._localId=i,this._track=r,this._kind=r.kind,this._paused=n?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=n,this._zeroRtpOnPause=a,this._appData=c||{},this._onTrackEnded=this._onTrackEnded.bind(this),this._handler=o,this.observer=new vd,this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get track(){return this._track}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}close(e){if(!this._closed){if(Tn.debug("close() with reason:",e),this._closed=!0,this._destroyTrack(),e===ck){this.observer.emit("close");return}this._handler.stopSending(this.localId).then(({offerSdp:i,callback:r})=>{this.safeEmit("close",i,r,e)}).finally(()=>{this.observer.emit("close")})}}async getStats(){if(this._closed)throw new Sr("closed");return this._handler.getSenderStats(this.localId)}pause(){Tn.debug(`producer(${this.id}):pause()`),this._closed&&Tn.error("pause() | Producer closed"),this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,null),this.observer.emit("pause")}resume(){if(Tn.debug(`producer(${this.id}):resume()`),this._closed){Tn.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,this._track),this.observer.emit("resume")}async replaceTrack({track:e}){if(Tn.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(i){Tn.error(i)}throw new Sr("closed")}else if(e&&e.readyState==="ended")throw new Sr("track ended");if(e===this._track){Tn.debug("replaceTrack() | same track, ignored");return}(!this._zeroRtpOnPause||!this._paused)&&await this._handler.replaceTrack(this.localId,e),this._destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new Sr("closed");if(this._kind!=="video")throw new Wl("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");await this._handler.setMaxSpatialLayer(this.localId,e),this._maxSpatialLayer=e}async setRtpEncodingParameters(e){if(this._closed)throw new Sr("closed");if(typeof e!="object")throw new TypeError("invalid params");await this._handler.setRtpEncodingParameters(this.localId,e)}_onTrackEnded(){Tn.debug('track "ended" event'),this.observer.emit("trackended"),this.safeEmit("trackended",this.track.id)}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){Tn.error(e)}}}const Hc=Yn.getLogger("Consumer");var of,cf,df,aa,lf,uf,Ln,ol,hf,pf,gf,Jb,ak,fO,ok,vO;class xle extends vd{constructor({id:e,localId:i,producerId:r,producingPeerId:s,handler:n,track:a,appData:o,paused:c,reuseTrack:u}){super(),N(this,gf),N(this,ak),N(this,ok),w(this,"observer"),N(this,of,void 0),N(this,cf,void 0),N(this,df,void 0),N(this,aa,void 0),N(this,lf,void 0),N(this,uf,void 0),N(this,Ln,void 0),N(this,ol,void 0),N(this,hf,void 0),N(this,pf,void 0),L(this,of,e),L(this,cf,i),L(this,uf,n),L(this,pf,o),L(this,hf,s),L(this,aa,!1),L(this,df,r),L(this,Ln,a),L(this,ol,c!=null?c:!1),L(this,lf,u),this.observer=new vd,qe(this,ak,fO).call(this)}get id(){return h(this,of)}get peerId(){return h(this,hf)}get localId(){return h(this,cf)}get producerId(){return h(this,df)}get closed(){return h(this,aa)}get kind(){return h(this,Ln).kind}get track(){return h(this,Ln)}get paused(){return h(this,ol)}get remotelyPaused(){return this.paused}get appData(){return h(this,pf)}close(e){h(this,aa)||(Hc.debug("close() with reason:",e),L(this,aa,!0),h(this,lf)||qe(this,ok,vO).call(this),this.emit("close",e),this.observer.safeEmit("close",e))}async getStats(){if(h(this,aa))throw new Sr("closed");return h(this,uf).getReceiverStats(this.localId)}pause(){if(Hc.debug(`consumer(${this.id}):pause()`),h(this,aa)){Hc.error("pause() | Consumer closed");return}L(this,ol,!0),h(this,Ln).enabled=!1,this.observer.safeEmit("pause")}resume(){if(Hc.debug(`consumer(${this.id}):resume()`),h(this,aa)){Hc.error("resume() | Consumer closed");return}L(this,ol,!1),h(this,Ln).enabled=!0,this.observer.safeEmit("resume")}}of=new WeakMap,cf=new WeakMap,df=new WeakMap,aa=new WeakMap,lf=new WeakMap,uf=new WeakMap,Ln=new WeakMap,ol=new WeakMap,hf=new WeakMap,pf=new WeakMap,gf=new WeakSet,Jb=function(){Hc.debug('track "ended" event'),this.safeEmit("trackended"),this.observer.safeEmit("trackended")},ak=new WeakSet,fO=function(){h(this,Ln).addEventListener("ended",qe(this,gf,Jb).bind(this))},ok=new WeakSet,vO=function(){try{h(this,Ln).removeEventListener("ended",qe(this,gf,Jb)),h(this,Ln).stop()}catch(t){Hc.error(t.toString())}};const PP=t=>new Promise(e=>setTimeout(e,t));async function Qc(t,e){return new Promise(async(i,r)=>{const{strategy:s,maxRetryCount:n,delayTime:a}={strategy:"linear",maxRetryCount:3,delayTime:10,...e};let o=0,c,u=!1;const l=p=>{u=!0,r(p)};for(;o<n;){try{const p=await t(o,l);return i(p)}catch(p){if(c=p,u)break;if(o<n)s==="linear"?await PP(a*(o+1)):s==="exponential"&&await PP(a*(o+Math.max(0,o-1)));else break}o+=1}return r(c)})}function Ele(t,e){return typeof t>"u"?e:typeof window<"u"&&Object.getOwnPropertyDescriptor(window,"structuredClone")?structuredClone(t):JSON.parse(JSON.stringify(t))}function RP(t){if(Promise.allSettled)return Promise.allSettled(t);const e=t.map(i=>i.then(r=>({status:"fulfilled",value:r})).catch(r=>({status:"rejected",reason:r})));return Promise.all(e)}const ck="transport closed",Ei=Yn.getLogger("Transport");var mf,gp,ks,Sc,yO,$i,no,xc,Yc,Ec,Tc,cl,ff,xo,Zc,Wc,vf,ao,Lh,yf,dk,bO,lk,wO;class Tle extends vd{constructor({id:e,direction:i,handlerFactory:r,iceServers:s,iceTransportPolicy:n,proprietaryConstraints:a,additionalSettings:o,appData:c}){super(),N(this,Lh),N(this,dk),N(this,lk),w(this,"awaitQueue"),w(this,"observer"),N(this,mf,void 0),N(this,gp,void 0),N(this,ks,!1),N(this,Sc,void 0),N(this,yO,void 0),N(this,$i,void 0),N(this,no,"new"),N(this,xc,void 0),N(this,Yc,void 0),N(this,Ec,void 0),N(this,Tc,!1),N(this,cl,null),N(this,ff,void 0),N(this,xo,void 0),N(this,Zc,void 0),N(this,Wc,void 0),N(this,vf,void 0),N(this,ao,new Map),Ei.debug("constructor() [id: %s, direction: %s]",e,i),L(this,mf,e),L(this,Sc,i);const u=Ele(o,{});delete u.iceServers,delete u.iceTransportPolicy,delete u.bundlePolicy,delete u.rtcpMuxPolicy,delete u.sdpSemantics,L(this,xc,new Map),L(this,Yc,new Map),L(this,Ec,new Map),L(this,xo,new Map),L(this,Wc,new Map),L(this,Zc,new Map),this.awaitQueue=new Lv,this.observer=new vd,L(this,$i,r()),h(this,$i).init({onTrackHandler:this._ontrack.bind(this),direction:i,iceServers:s,iceTransportPolicy:n,additionalSettings:o,proprietaryConstraints:a}),L(this,vf,c||{}),L(this,ff,new Promise(l=>{this.observer.once("connected",()=>{l(!0)}),this.observer.once("disconnect",()=>{l(!1)}),this.observer.once("close",()=>{l(!1)})})),h(this,$i).on("@connectionstatechange",l=>{l!==h(this,no)&&(Ei.debug("connection state changed to %s",l),L(this,no,l),l==="connected"&&(L(this,Tc,!0),this.observer.emit("connected")),l==="disconnected"&&(L(this,Tc,!1),this.observer.emit("disconnect")),(l==="failed"||l==="closed")&&(L(this,Tc,!1),this.observer.emit("close")),h(this,ks)||this.safeEmit("connectionstatechange",l))}),h(this,$i).on("@icecandidate",({candidate:l})=>{h(this,ks)||this.safeEmit("icecandidate",l)}),h(this,$i).on("dc_open",l=>{L(this,cl,!1),setTimeout(()=>{l==="events"&&!h(this,cl)&&this.safeEmit("dc_error",l)},5e3)}),h(this,$i).on("datachannel",(l,p)=>{var m,y;l.label==="events"&&L(this,cl,!0),h(this,Ec).has(l.label)||h(this,Ec).set(l.label,l);const b=JSON.parse(p);if(h(this,ao).has(b.id)||h(this,ao).set(b.id,[]),(m=h(this,ao).get(b.id))==null||m.push(b),((y=h(this,ao).get(b.id))==null?void 0:y.length)===b.count){const S=h(this,ao).get(b.id),E=S==null?void 0:S.reduce((k,T)=>k+T.chunk,"");h(this,ao).delete(b.id);try{const k=JSON.parse(E);this.safeEmit(`datachannel:${l.label}`,l,k)}catch(k){Ei.error("error parsing message",k)}}})}get id(){return h(this,mf)}get serverId(){return h(this,gp)}get connected(){return h(this,Tc)}get isConnected(){return h(this,ff)}get datachannels(){return h(this,Ec)}get eventsDCReady(){return h(this,cl)}get closed(){return h(this,ks)}get direction(){return h(this,Sc)}get handler(){return h(this,$i)}get connectionState(){return h(this,no)}get appData(){return h(this,vf)}setServerId(e){L(this,gp,e)}getDatachannel(e){return h(this,Ec).get(e)}close(){h(this,ks)||(Ei.debug("close()"),L(this,Tc,!1),L(this,ks,!0),h(this,$i).close(),Array.from(h(this,xc).values()).forEach(e=>{e.close(ck)}),h(this,xc).clear(),Array.from(h(this,Yc).values()).forEach(e=>{e.close(ck)}),h(this,Yc).clear(),h(this,Wc).clear(),h(this,xo).clear(),this.emit("close"),this.observer.emit("close"))}async getStats(){if(h(this,ks))throw new Sr("closed");return h(this,$i).getTransportStats()}async connect(){try{const{offerSdp:e,callback:i}=await h(this,$i).connect(),{answer:r}=await this.safeEmitAsPromise("connect",{offer:e});if(await i(r),!await this.isConnected)throw new Error("ice connection failed")}catch(e){throw Ei.error("transport failed to connect:",e),e}}async restartIce(){if(Ei.debug("restartIce()"),h(this,ks))throw new Sr("closed");return h(this,$i).restartIce()}async updateIceServers({iceServers:e}={}){if(Ei.debug("updateIceServers()"),h(this,ks))throw new Sr("closed");return h(this,$i).updateIceServers(e)}async produce({track:e,encodings:i,codecOptions:r,stopTracks:s=!0,disableTrackOnPause:n=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(Ei.debug(`produce() [track:${e.id}]`),e){if(h(this,Sc)!=="send")throw new Wl("not a sending Transport");if(e.readyState==="ended")throw new Sr("track ended");if(this.listenerCount("connect")===0&&h(this,no)==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing track");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const{producerId:c,localId:u}=await this.awaitQueue.push(async()=>{const{offerSdp:p,callback:m}=await h(this,$i).send({track:e,encodings:i,codecOption:r,screenShare:o==null?void 0:o.screenShare}),{answer:y,producerId:b}=await this.safeEmitAsPromise("produce",{offer:p,kind:e.kind,paused:n?!e.enabled:!1,appData:o}),S=await m(y);return{producerId:b,localId:S}},"produce"),l=new Sle({id:c,localId:u,track:e,stopTracks:s,disableTrackOnPause:n,zeroRtpOnPause:a,appData:o,handler:this.handler});return h(this,xc).set(c,l),l.observer.on("close",()=>{h(this,xc).delete(l.id)}),this.emit("newproducer",l),this.observer.emit("newproducer",l),l}async consumePeer(e,i={}){if(Ei.debug("consumePeer() producingPeerId:",e),h(this,ks))throw new Sr("closed");if(h(this,Sc)!=="recv")throw new Wl("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing producingPeerId");if(this.listenerCount("connect")===0&&h(this,no)==="new")throw new TypeError('no "connect" listener set into this transport');if(i&&typeof i!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const r=[],{consumersMap:s}=await this.safeEmitAsPromise("consumePeer",{producingPeerId:e});return s.forEach((n,a)=>{const{consumerId:o,trackId:c,screenShare:u,paused:l,streamId:p,kind:m}=n;r.push(Qc(async y=>(y>0&&Ei.warn("retrying consumer creation task:",o),qe(this,Lh,yf).call(this,{consumerId:o,trackId:c,streamId:p,kind:m,producerId:a,producingPeerId:e,paused:l,screenShare:u,appData:i}))))}),RP(r)}async consume({producerId:e,producingPeerId:i,appData:r={}}){if(Ei.debug("consume()"),h(this,ks))throw new Sr("closed");if(h(this,Sc)!=="recv")throw new Wl("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing producerId");if(this.listenerCount("connect")===0&&h(this,no)==="new")throw new TypeError('no "connect" listener set into this transport');if(r&&typeof r!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));try{const{consumerId:s,screenShare:n,trackId:a,paused:o,streamId:c,kind:u}=await this.safeEmitAsPromise("consume",{producerId:e,producingPeerId:i});return await Qc(async l=>(l>0&&Ei.warn("retrying consumer creation task:",s),qe(this,Lh,yf).call(this,{consumerId:s,screenShare:n,trackId:a,streamId:c,kind:u,paused:o,producerId:e,producingPeerId:i,appData:r})))}catch(s){throw Ei.error("consume failed:",s),s}}async setRemoteOffer(e){await qe(this,dk,bO).call(this,e);const i=await h(this,$i).pc.createAnswer(),r=ze(i.sdp);return r.media=r.media.map(s=>{if(s.type==="audio"){const n={...s};return n.rtcpFb||(n.rtcpFb=[]),n.rtcpFb.some(a=>a.type==="nack")||n.rtcpFb.push({payload:parseInt(n.payloads,10),type:"nack"}),n}return s}),i.sdp=pn(r),await qe(this,lk,wO).call(this,i),i}async retryFailedConsumerCreationTasks(e){return RP(e.map(async i=>Qc(async r=>(r>0&&Ei.warn("retrying failed consumer creation task",i),qe(this,Lh,yf).call(this,{...i})))))}_ontrack(e){const{track:i,transceiver:r,streams:s}=e;Ei.info("track event received",{trackId:i.id,tId:r.receiver.track.id});const n=`${s[0].id}:${i.kind}`;i.addEventListener("ended",()=>{Ei.info("rtc consumer track ended",i.id),h(this,Wc).delete(i.id),h(this,Zc).delete(n)}),h(this,Wc).set(i.id,[i,r]);const a=h(this,xo).get(n);a?(a(i,r),h(this,xo).delete(n)):(Ei.warn(`track event handler not found ${n}`),h(this,Zc).set(n,e))}}mf=new WeakMap,gp=new WeakMap,ks=new WeakMap,Sc=new WeakMap,yO=new WeakMap,$i=new WeakMap,no=new WeakMap,xc=new WeakMap,Yc=new WeakMap,Ec=new WeakMap,Tc=new WeakMap,cl=new WeakMap,ff=new WeakMap,xo=new WeakMap,Zc=new WeakMap,Wc=new WeakMap,vf=new WeakMap,ao=new WeakMap,Lh=new WeakSet,yf=async function({consumerId:t,producerId:e,producingPeerId:i,streamId:r,trackId:s,paused:n,screenShare:a,appData:o,kind:c}){const u=`${r}:${c}`,l={consumerId:t,producerId:e,producingPeerId:i,streamId:r,trackId:s,appData:o,kind:c,paused:n,screenShare:a,name:"consumer creation task error",message:"consumer creation failed"};return new Promise((p,m)=>{const y=setTimeout(()=>{h(this,xo).delete(u),l.isTimedout=!0,m(l)},5e3),b=(k,T)=>{try{if(k.readyState==="ended")clearTimeout(y),m(l);else{const I=k;I.enabled=!0,this.handler.midTransceiverMap.set(T.mid,T);const O=new xle({id:t,localId:T.mid,track:I,paused:n,producerId:e,producingPeerId:i,handler:h(this,$i),appData:{...o,screenShare:a},reuseTrack:!0});h(this,Yc).set(t,O),O.once("close",()=>{h(this,Yc).delete(O.id),this.handler.midTransceiverMap.delete(T.mid)}),Ei.info("consumer created for ",{producerId:e,trackId:s,producingPeerId:i}),this.observer.emit("newconsumer",O),clearTimeout(y),p(O)}}catch(I){Ei.warn("error while creating consumer:",I),clearTimeout(y),m(l)}},S=h(this,Wc).get(t);if((S==null?void 0:S.length)===2){b(S[0],S[1]);return}const E=h(this,Zc).get(u);E?(h(this,Zc).delete(u),b(E.track,E.transceiver)):h(this,xo).set(u,b)})},dk=new WeakSet,bO=async function(t){await h(this,$i).pc.setRemoteDescription(t)},lk=new WeakSet,wO=async function(t){Ei.debug(`${this.direction}() {transportId: ${h(this,gp)}} | calling pc.setLocalDescription() [offer:%o]`,t),await h(this,$i).pc.setLocalDescription(t)};const Un=Yn.getLogger("Device");function Cle(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){Un.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection");return}return Un.debug("this._detectDevice() | ReactNative handler chosen"),"Chrome74"}if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const t=navigator.userAgent,e=dS.getParser(t),i=e.getEngine();if(Un.debug("current browser info",e.getBrowser()),e.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(e.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(e.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(e.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(e.satisfies({firefox:">=110"}))return"Firefox110";if(e.satisfies({firefox:">=60"}))return"Firefox60";if(e.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||e.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(e.satisfies({safari:">=11"}))return"Safari11";if(e.satisfies({"microsoft edge":">=11"})&&e.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(i.name&&i.name.toLowerCase()==="blink"){const r=t.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(r){const s=Number(r[1]);return s>=74?"Chrome74":s>=70?"Chrome70":s>=67?"Chrome67":"Chrome55"}return"Chrome74"}Un.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",e.getBrowserName(),e.getBrowserVersion());return}Un.warn("this._detectDevice() | unknown device")}class Ple{constructor({handlerName:e,handlerFactory:i}={}){if(w(this,"_handlerFactory"),w(this,"_handlerName"),w(this,"_observer"),Un.debug("constructor()"),e&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(e)Un.debug("constructor() | handler given: %s",e);else if(e=Cle(),e)Un.debug("constructor() | detected handler: %s",e);else throw new Error("device not supported");switch(e){case"Chrome74":this._handlerFactory=BS.createFactory();break;case"Safari12":this._handlerFactory=HS.createFactory();break;case"Firefox60":this._handlerFactory=Wv.createFactory({supportsSendEncodings:!1});break;case"Firefox110":this._handlerFactory=Wv.createFactory({supportsSendEncodings:!0});break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const r=this._handlerFactory();this._handlerName=r.name,r.close(),this._observer=new Er}get handlerName(){return this._handlerName}createSendTransport({iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n}){return Un.debug("createSendTransport()"),this._createTransport({direction:"send",iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n})}createRecvTransport({iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n}){return Un.debug("createRecvTransport()"),this._createTransport({direction:"recv",iceServers:e,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:s,appData:n})}_createTransport({direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,appData:a}){const o=gg(),c=new Tle({id:o,direction:e,iceServers:i,iceTransportPolicy:r,additionalSettings:s,proprietaryConstraints:n,appData:a,handlerFactory:this._handlerFactory});return this._observer.emit("newtransport",c),c}}var wr;class Rle{constructor(e){N(this,wr,void 0),L(this,wr,e)}async joinRoom(e,i){const r={roomUuid:e,displayName:i,prejoined:!1};return(await h(this,wr).sendMessagePromise(st.joinRoom,Ose.toBinary(r))).payload}async connectTransport(e){const i=(await h(this,wr).sendMessagePromise(st.createWebRTCTransport,yse.toBinary(e))).payload,{transportId:r,description:s}=aO.fromBinary(i),n={sdp:s==null?void 0:s.sdp,type:s.type};return{transportId:r,answer:n}}async produce(e){var i,r;const s=(await h(this,wr).sendMessagePromise(st.produce,Bse.toBinary(e))).payload,n=Rne.fromBinary(s);return{answer:{sdp:(i=n==null?void 0:n.description)==null?void 0:i.sdp,type:(r=n==null?void 0:n.description)==null?void 0:r.type},producerId:n.producerId}}async consume(e){const i=(await h(this,wr).sendMessagePromise(st.consume,Fse.toBinary(e))).payload,{consumerIdsMap:{map:r}}=Cne.fromBinary(i);return r}async closeProducer(e){const i=(await h(this,wr).sendMessagePromise(st.closeProducer,Qse.toBinary(e))).payload,{description:r}=Nne.fromBinary(i);return r}async closeConsumer(e){return(await h(this,wr).sendMessagePromise(st.closeConsumer,Zse.toBinary(e))).payload}async hostControlForPeer(e,i){const r={audio:i==="audio",screeShare:!1,video:i==="video",participantId:e},s=(await h(this,wr).sendMessagePromise(st.hostControlPeer,ane.toBinary(r))).payload;if(!s)return!1;const{status:n}=Hne.fromBinary(s);return n==="success"}async hostControlForAll(e){const i={audio:e==="audio",screenShare:!1,video:e==="video"},r=(await h(this,wr).sendMessagePromise(st.hostControlAllPeers,cne.toBinary(i))).payload;if(!r)return!1;const{status:s}=Gne.fromBinary(r);return s==="success"}async kickAll(){const e={},i=(await h(this,wr).sendMessagePromise(st.kickAll,ine.toBinary(e))).payload;if(!i)return!1;const{status:r}=Vne.fromBinary(i);return r==="success"}async kickPeer(e){const i=(await h(this,wr).sendMessagePromise(st.kickPeer,ene.toBinary(e))).payload;if(!i)return!1;const{status:r}=zne.fromBinary(i);return r==="success"}async changeDisplayName(e){const i=(await h(this,wr).sendMessagePromise(st.changeDisplayName,sne.toBinary(e))).payload;if(!i)return!1;const{status:r}=Jne.fromBinary(i);return r==="success"}async notifySelfJoinComplete(){const e={},i=(await h(this,wr).sendMessagePromise(st.selfJoinComplete,Nse.toBinary(e))).payload;return _ne.fromBinary(i)}}wr=new WeakMap;const Ile=2e3;class Ale extends _le{constructor(e){super(),w(this,"_device"),w(this,"_sendTransport"),w(this,"_recvTransport"),w(this,"_consumers"),w(this,"_producers"),w(this,"_producerIdToConsumerIdMap"),w(this,"_logger"),w(this,"_socket"),w(this,"_socketHandler"),w(this,"_totalTransportReconnectionCount"),w(this,"_transportReconnectFailureCount"),w(this,"_consumerCreationFailureCount"),w(this,"_producerNotReadyFailureCount"),w(this,"_consumerNotBoundFailureCount"),w(this,"_transportDisconnectedTimer"),w(this,"transportConnectionStatus"),this._device=new Ple,this._logger=Yn.getLogger("HiveSFUHandler"),this._socket=e,this._socketHandler=new Rle(e),this.reset()}get socket(){return this._socket}get producers(){return this._producers}get consumers(){return this._consumers}get producerIdToConsumerIdMap(){return this._producerIdToConsumerIdMap}get hiveSocketHandler(){return this._socketHandler}get sendTransport(){return this._sendTransport}get recvTransport(){return this._recvTransport}reset(){this._producers=new Map,this._consumers=new Map,this._producerIdToConsumerIdMap=new Map,this.transportConnectionStatus=new Map,this._transportReconnectFailureCount=0,this._consumerCreationFailureCount=0,this._totalTransportReconnectionCount=0,this._producerNotReadyFailureCount=0,this._consumerNotBoundFailureCount=0,this._transportDisconnectedTimer={consuming:void 0,producing:void 0}}async setupTransports(e,i){const r=await Bi().getICEServers(),s=e.map(n=>{const a=this.transportConnectionStatus.get(n);if(a&&!i)return a;switch(n){case"send":{const o=this.createSendTransport({iceServers:r});return this.transportConnectionStatus.set(n,o),o}case"recv":{const o=this.createRecvTransport({iceServers:r});return this.transportConnectionStatus.set(n,o),o}default:return this._logger.warn(`what are you thinking when passing this ${n}?`),Promise.reject(Error("TYPE_OF_TRANSPORT_UNKNOWN"))}});return Promise.all(s).finally(()=>{e.forEach(n=>{this.transportConnectionStatus.delete(n)})})}async stopAllTransports(){var e,i,r,s;this._logger.info("closing all the transports"),(e=this._sendTransport)==null||e.close(),(i=this._sendTransport)==null||i.removeAllListeners(),(r=this._recvTransport)==null||r.close(),(s=this._recvTransport)==null||s.removeAllListeners(),this._sendTransport=void 0,this._recvTransport=void 0,this.reset()}async createSendTransport(e){if(this._sendTransport&&this._sendTransport.connected){this._logger.info("sendTransport::already_exists_in_connected_state");return}this._logger.info("sendTransport::initializing_transport");const i=this._device.createSendTransport(e);ue.onSafeInitialization(()=>{ue.configureSendTransport(i)}),this._transportDisconnectedTimer.producing=void 0,this._logger.info("sendTransport::initialized_transport"),this.handleTransport(i,!1),this._logger.info("sendTransport::connecting_transport");try{await Qc(async r=>{r>0&&this._logger.debug("retrying transport connect, count:",r);try{await i.connect()}catch(s){throw this._logger.error("fail to connect send transport:",i.id,"[Error]:",s),s}},{delayTime:100}),this._logger.info("sendTransport::connected_transport"),this._transportReconnectFailureCount=Math.max(0,this._transportReconnectFailureCount-1),this._producerNotReadyFailureCount=0,this._sendTransport=i,ue.onSafeInitialization(()=>{ue.configureSendTransport(i)})}catch(r){this._logger.error("failed to connect send transport after retry:",i.id,"[Error]:",r),i.close(),i.removeAllListeners(),this._transportReconnectFailureCount+=1,this.handleFailure()}}async createRecvTransport(e){if(this._recvTransport&&this._recvTransport.connected){this._logger.info("recvTransport::already_exists_in_connected_state");return}this._logger.info("recvTransport::initializing_transport");const i=this._device.createRecvTransport({...e,additionalSettings:{rtcAudioJitterBufferMaxPackets:25,rtcAudioJitterBufferFastAccelerate:!0,rtcAudioJitterBufferMinDelayMs:20}});ue.onSafeInitialization(()=>{ue.configureRecvTransport(i)}),this._transportDisconnectedTimer.consuming=void 0,this._logger.info("recvTransport::initialized_transport"),this.handleTransport(i,!0),this._logger.info("recvTransport::connecting_transport");try{await Qc(async r=>{r>0&&this._logger.debug("retrying transport connect, count:",r);try{await i.connect()}catch(s){throw this._logger.error("fail to connect recv transport:",i.id,"[Error]:",s),s}},{delayTime:100}),this._logger.info("recvTransport::connected_transport"),this._transportReconnectFailureCount=Math.max(0,this._transportReconnectFailureCount-1),this._consumerCreationFailureCount=0,this._consumerNotBoundFailureCount=0,this._recvTransport=i,this.producerIdToConsumerIdMap.clear()}catch(r){this._logger.error("failed to connect recv transport after retry:",i.id,"[Error]:",r),i.close(),i.removeAllListeners(),this._transportReconnectFailureCount+=1,this.handleFailure()}}handleTransport(e,i){if(e.on("connect",async({offer:r},s,n)=>{try{const a={consuming:i,description:{sdp:r.sdp,type:r.type,target:i?So.SUBSCRIBER:So.PUBLISHER}},{transportId:o,answer:c}=await this._socketHandler.connectTransport(a);e.setServerId(o),s({answer:c})}catch(a){this._logger.error(`${i?"consumer":"producer"} transport connection error:`,a),n(a)}}),e.on("connectionstatechange",async r=>{this._logger.info(`${i?"consumer":"producer"} transport connectionState:`,r);const s=()=>{this._transportDisconnectedTimer[i?"consuming":"producing"]!==void 0&&(clearTimeout(this._transportDisconnectedTimer[i?"consuming":"producing"]),this._transportDisconnectedTimer[i?"consuming":"producing"]=void 0)};switch(r){case"connected":s();break;case"disconnected":this._transportDisconnectedTimer[i?"consuming":"producing"]=setTimeout(()=>{this.triggerTransportReconnection(e,i)&&R.emit(P.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"})},Ile);break;case"failed":if(e.closed)return;s(),this.triggerTransportReconnection(e,i)||R.emit(P.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break;case"new":case"closed":break;default:R.emit(P.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break}}),e.on("icecandidate",async r=>{this._logger.debug("sending icecandidate:",r.toJSON())}),e.on("datachannel:events",async(r,s)=>{this._logger.debug("got data channel message on event:",s);try{switch(s.type){case"offer":{this.negotiateOverDC(s.payload,r,e);break}case"handshake":{r.send(JSON.stringify({type:"handshake",payload:{message:"pong"}}));break}case"consumer_toggle":{this.handleConsumerToggle(s.payload);break}case"error":{this.handleErrorOverDC(s.payload);break}default:this._logger.warn("unknown event received from hive node, event:",s.type);break}}catch{this._logger.error("Unable to handle the incoming datachannel message on",r.label)}}),e.on("dc_error",()=>{e.direction==="recv"&&(this._logger.warn("events datachannel did not open in 5s"),this.handleFailure())}),e.on("negotiate",async({description:r},s,n)=>{try{const a={sdp:r==null?void 0:r.sdp,type:r==null?void 0:r.type},o=await this.negotiate(e,a);s({answer:o})}catch(a){this._logger.error("negotiate error:",a),n(a)}}),!i){e.on("produce",async({offer:r,kind:s,paused:n,appData:a},o,c)=>{var u;const l=ze(r.sdp).media.filter(m=>s==="video"?m.type==="video":m.type==="audio").at(-1).msid,p={description:{sdp:r.sdp,type:r.type,target:So.PUBLISHER},paused:n,kind:s,msid:l,screenShare:(u=a.screenShare)!=null?u:!1};try{const{answer:m,producerId:y}=await this._socketHandler.produce(p);o({answer:m,producerId:y})}catch(m){this._logger.error("create producer error:",m),c(m)}});return}e.on("datachannel:negotiation",async(r,s)=>{try{this._logger.info("datachannel message recieved:",r.label,s);const n={sdp:s,type:"offer"},a=await e.setRemoteOffer(n);this._logger.info("datachannel answer:",a),r.send(a.sdp)}catch(n){this._logger.error("datachannel:negotiation::Error:",n)}}),e.on("consumePeer",async({producingPeerId:r},s,n)=>{this._logger.info("consumePeer:",r);const a={producingPeerId:r};try{const o=await this._socketHandler.consume(a);this._logger.debug(`consumePeer response for ${r}:`,{consumerStateMap:o});const c=new Map;Object.entries(o).forEach(([u,l])=>{var p,m,y;c.set(u,{consumerId:l.consumerId,trackId:(p=l.producerTrack)==null?void 0:p.trackId,streamId:l.producerTrack.streamId,kind:l.producerState.kind===cn.VIDEO?"video":"audio",screenShare:(m=l.producerState)==null?void 0:m.screenShare,paused:(y=l.producerState)==null?void 0:y.pause})}),s({consumersMap:c})}catch(o){this._logger.error("consumePeer error:",o),n(o)}}),e.on("consume",async({producerId:r,producingPeerId:s},n,a)=>{var o,c,u,l;const p={producingPeerId:s,producerId:r};try{const m=(await this._socketHandler.consume(p))[r];this._logger.info("consumer create response:",{consumerState:m,paused:(o=m.producerState)==null?void 0:o.pause}),n({consumerId:m.consumerId,screenShare:(c=m.producerState)==null?void 0:c.screenShare,trackId:(u=m.producerTrack)==null?void 0:u.trackId,streamId:m.producerTrack.streamId,kind:m.producerState.kind===cn.VIDEO?"video":"audio",paused:(l=m.producerState)==null?void 0:l.pause})}catch(m){this._logger.error("error during consuming on server:",m),a(m)}})}async createProducer(e,i,r){if(this._sendTransport===void 0||this._sendTransport.closed)return;const s=await this._sendTransport.produce(i);s.on("close",async(n,a,o)=>{this._logger.info("producer id:",s.id,"closed with reason:",o);const c={producerId:s.id,description:{sdp:n.sdp,type:n.type,target:So.PUBLISHER}};try{const u=await this._socketHandler.closeProducer(c);this._logger.info("response",u);const l={sdp:u==null?void 0:u.sdp,type:u==null?void 0:u.type};a(l)}catch(u){this._logger.error("producer close error:",u)}this._producers.delete(e),r(),e===ke.SCREENSHARE_VIDEO&&this._switchWebcamLayers(3)}),s.on("trackended",()=>{x.info("producer::trackended",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:s==null?void 0:s.appData}}),[ke.MIC,ke.WEBCAM].includes(e)||r()}),this._producers.set(e,s),this._producers.has(ke.SCREENSHARE_VIDEO)&&this._switchWebcamLayers(0)}async _switchWebcamLayers(e){const i=this._producers.get(ke.WEBCAM);if(i)try{this._logger.debug("switching layer of webcam producer to:",e),await i.setMaxSpatialLayer(e)}catch(r){this._logger.error("failed to switch spatial layer",r)}}_initConsumer(e){e&&(e.observer.on("close",async i=>{this._logger.debug("consumer closed",i),this._consumers.delete(e.id),R.emit(P.CONSUMER_CLOSED,{id:e.id})}),this._consumers.set(e.id,e),this.producerIdToConsumerIdMap.set(e.producerId,e.id),R.emit(P.NEW_CONSUMER,{id:e.id}))}async consumePeer(e){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)throw Error("Receiving transport not connected");await Qc(async i=>{i>0&&this._logger.debug("retrying consumePeer call, retryCount:",i);try{const r=await this._recvTransport.consumePeer(e),s=[];r.forEach(n=>{n.status==="rejected"?s.push(n.reason):this._initConsumer(n.value)}),this._recvTransport.retryFailedConsumerCreationTasks(s).then(n=>{n.forEach(a=>{a.status==="rejected"?(this._logger.error("consumer creation task is failing",a.reason),this._consumerCreationFailureCount+=1,setTimeout(this.handleFailure.bind(this),0)):this._initConsumer(a.value)})})}catch(r){throw this._logger.error("got error in consumePeer",r),r}}).catch(i=>{this._logger.error("consumePeer failed after retries",i),this._consumerCreationFailureCount+=1,this.handleFailure()})}async createConsumer(e){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)return;const{producerId:i,producingPeerId:r,appData:s}=e;if(this.getProducer(i)){this._logger.warn("why are you creating a consumer for local producer?");return}await Qc(async n=>{n>0&&this._logger.debug("retrying createConsumer call, retryCount:",n);const a=await this._recvTransport.consume({producerId:i,producingPeerId:r,appData:s});this._initConsumer(a)}).catch(n=>{this._logger.error("createConsumer failed after retries",n),this._consumerCreationFailureCount+=1,this.handleFailure()})}async pauseProducer(e){const i=this._producers.get(e);if(!i){this._logger.warn("producer type:",e,"not found");return}i.pause(),this._logger.info(e,"producer id:",i.id,"paused")}async resumeProducer(e){const i=this._producers.get(e);if(!i){this._logger.warn("producer type:",e,"not found");return}i.resume(),this._logger.info(e,"producer id:",i.id,"resumed")}async replaceTrack(e,i){const r=this._producers.get(e);if(!r){this._logger.warn("producer type:",e,"not found");return}await r.replaceTrack({track:i}),this._logger.info("track replaced with id:",i.id,"on producer:",e)}async removeProducer(e,i){const r=this._producers.get(e);if(!r){this._logger.warn("producer type:",e,"not found");return}i&&r.track.stop(),r.close()}async pauseConsumer(e){if(!this._consumers.get(e)){this._logger.warn("consumer id:",e,"not found");return}this.toggleConsumerOverDC(e,!0)}async pauseConsumerOverSocket(e){try{const i={consumerId:e.id,pause:!0};await this.socket.sendMessagePromise(st.toggleConsumer,pP.toBinary(i)),e.pause(),R.emit(P.CONSUMER_PAUSED,{id:e.id}),this._logger.info("consumer:",e.id,"paused")}catch(i){this._logger.error("error on pausing consumer",i)}}async toggleConsumerOverDC(e,i){const r={type:"consumer_toggle",payload:{consumerId:e,mute:i}},s=this._recvTransport.getDatachannel("events");if(!s){this._logger.warn("events datachannel not found");return}s.send(JSON.stringify(r))}async resumeConsumer(e){const i=this._consumers.get(e);if(!i){this._logger.warn("consumer id:",e,"not found");return}if(!i.paused){this._logger.warn("consumer is not paused so not resuming",e);return}try{const r={consumerId:e,pause:!1};await this.socket.sendMessagePromise(st.toggleConsumer,pP.toBinary(r)),i.resume(),R.emit(P.CONSUMER_RESUMED,{id:i.id}),this._logger.info("consumer:",e,"resumed")}catch(r){this._logger.error("error on resuming consumer",r)}}async closeConsumer(e,i){return this.closeConsumers([e],i)}async closeConsumers(e,i=!1){this._logger.info("Closing consumers:",e,"with force:",i);let r=!0;const s=e.filter(o=>this._consumers.get(o)?!0:(this._logger.warn("consumer id:",o,"not found"),!1)),n={consumerIds:s},a=async()=>{var o;return(o=this._recvTransport)==null?void 0:o.awaitQueue.push(async()=>{await this._socketHandler.closeConsumer(n)},"close_consumer").catch(c=>{this._logger.warn("error on closing consumer:",c),r=i})};i?a():await a(),r&&s.forEach(o=>{const c=this.consumers.get(o);this.producerIdToConsumerIdMap.delete(c.producerId),c.close(i?"force closed":void 0)})}async cleanupConsumers(e){this._logger.debug("cleaning up all consumers");const i=[];this._consumers.forEach(r=>{e?r.peerId===e&&i.push(r.id):i.push(r.id)}),this.closeConsumers(i,!0)}async stopAllProducers(){this._logger.info("stopping all available producers"),this._producers.forEach((e,i)=>{this._logger.debug("closing producer type",i),e.close()})}getProducer(e){return Array.from(this.producers.values()).filter(i=>i.id===e).at(0)}async negotiate(e,i){this._logger.info("setting remote offer :",i,"on transport",e.serverId);const r=await e.setRemoteOffer(i),s={transportId:e.serverId,description:{sdp:r.sdp,type:r.type,target:So.SUBSCRIBER}};return this._logger.info("sending renegotiate request",s),await this.socket.sendMessagePromise(st.renegotiateSessionDescription,kse.toBinary(s)),this._logger.info("renegotiation done",e.serverId),r}async negotiateOverDC(e,i,r){const s={sdp:e.sdp,type:"offer"};let n;try{const a=await r.setRemoteOffer(s);n={type:"answer",payload:{type:a.type,sdp:a.sdp}}}catch(a){this._logger.error("datachannel:events::Error:",a),n={type:"error",payload:{error:a.message}}}this._logger.debug("datachannel answer:",n),i.send(JSON.stringify(n))}handleConsumerToggle(e){const{mute:i,trackId:r}=e;this._logger.info("consumer toggled for",r,"muted:",i);const s=this.consumers.get(r);if(!s){this._logger.warn("consumer with id",r," not found");return}s.paused!==i&&(this._logger.debug("consumer state is not same",{consumerPaused:s.paused,mute:i}),i?(s.pause(),R.emit(P.CONSUMER_PAUSED,{id:s.id})):(s.resume(),R.emit(P.CONSUMER_RESUMED,{id:s.id})))}async handleErrorOverDC(e){this._logger.error("got error over dc:",e);const{type:i,error:r,id:s}=e;if(i==="consumer"){if(r==="bind-fail"){if(this._consumerNotBoundFailureCount>=2){this.handleFailure();return}this._consumerNotBoundFailureCount+=1;const n=this.consumers.get(s);if(!n)return;try{await this.closeConsumer(n.id),await this.createConsumer({producerId:n.producerId,producingPeerId:n.peerId,appData:n.appData})}catch(a){this._logger.error("failed to recreate consumer on downtrack bound failure, consumerID:",n.id,"producerId:",n.producerId,"error:",a)}}}else if(i==="producer"&&r==="ready-fail"){if(this._producerNotReadyFailureCount>=2){this.handleFailure();return}this._producerNotReadyFailureCount+=1;const[n]=Array.from(this.producers.entries()).find(a=>a[1].id===s);if(!n)return;await this.removeProducer(n).catch(a=>{this._logger.error("failed to remove ready-fail producer:",s,"error:",a)})}}async handleFailure(){var e;if(this._transportReconnectFailureCount>0||((e=this._recvTransport)==null?void 0:e.eventsDCReady)===!1||this._totalTransportReconnectionCount>3){this._logger.warn("transport failure detected"),ge.hasFeature(me.ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY)&&(this._logger.debug("rejoining room"),this.emit("rejoin"));return}(this._consumerCreationFailureCount>0||this._consumerNotBoundFailureCount>=2)&&(this._logger.warn("consumer creation failure detected or consumer not bound failure increased"),ge.hasFeature(me.ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY)&&(this._logger.debug("reconnecting recv transport"),this._totalTransportReconnectionCount+=1,this.emit("reconnect_transport",this._recvTransport))),this._producerNotReadyFailureCount>=2&&(this._logger.warn("producer receiver not getting added needs to reconnect send transport"),this._totalTransportReconnectionCount+=1,this.emit("reconnect_transport",this._sendTransport))}triggerTransportReconnection(e,i){return this._logger.info(`${i?"consumer":"producer"} transport, reconnecting...`,"transport id:",e.id,"serverid:",e.serverId),ge.hasFeature(me.ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED)?(R.emit(P.HIVE_TRANSPORT_STATE_CHANGED,{state:"reconnecting",transportDirection:i?"recv":"send"}),this.emit("reconnect_transport",e),!0):!1}}var Mle=Object.defineProperty,Dle=Object.getOwnPropertyDescriptor,rt=(t,e,i,r)=>{for(var s=r>1?void 0:r?Dle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Mle(e,i,s),s},wi,dt,lh,Ja,IP;const kO=(IP=class extends mO{constructor(t){super(),N(this,wi,void 0),N(this,dt,void 0),N(this,lh,void 0),N(this,Ja,void 0),w(this,"legacyMode"),w(this,"roomNodeUrl"),w(this,"peerDisplayName"),w(this,"activatedProducingPeerIds"),w(this,"logger"),w(this,"_totalRejoinCount"),w(this,"_transportQueue");const{roomName:e,peerId:i,authToken:r,legacyMode:s,socketClient:n,meetingTitle:a}=t;this.roomName=e,this.peerId=i,this.authToken=r,this.legacyMode=s,this.roomJoined=!1,this.mediaConnected=!1,this.meetingTitle=a,L(this,Ja,!1),L(this,wi,n),L(this,dt,new Ale(n)),this.maxPreferredStreams=6,this.activatedProducingPeerIds=new Set,this.logger=Yn.getLogger("HiveNodeClient()"),this._totalRejoinCount=0,this._transportQueue=new Lv,ue.legacySwitch(s),this.handleSocketEvents(),this.handleSFUEvents(),L(this,lh,()=>{this.logger.info("noop reconnection handler")})}static async init(t){const{legacyMode:e=!0,roomName:i,peerId:r,authToken:s,meetingTitle:n,socket:a}=t,o=new kO({legacyMode:e,authToken:s,socketClient:a,peerId:r,roomName:i,meetingTitle:n});a.onStateEvent("disconnected",u=>{var l;o.isDisconnected=!0,(l=h(o,dt))==null||l.cleanupConsumers(),o.mediaConnected=!1,R.emit(P.ROOM_NODE_DISCONNECTED,u),o.roomJoined=!1,o.activatedProducingPeerIds=new Set,x.info("HiveNodeClient::HIVE_NODE_DISCONNECTED")}),a.onStateEvent("reconnected",async()=>{o.mediaConnected=!0});const c=u=>{o.mediaConnected=!0,R.emit(P.ROOM_NODE_CONNECTED,{...u,wasDisconnected:o.isDisconnected}),o.isDisconnected=!1,x.info("HiveNodeClient::HIVE_NODE_CONNECTED")};return a.onStateEvent("connected",async u=>{c(u)}),a.isConnected&&c({}),o}get sfuHandler(){return h(this,dt)}set onSocketReconnection(t){L(this,lh,t)}async reset(){this.activatedProducingPeerIds.clear(),this._transportQueue.stop(),await this.sfuHandler.stopAllTransports(),this.sfuHandler.reset(),this._transportQueue=new Lv}async reconnectTransport(t){if(this.logger.info("Room joining state",h(this,Ja)),!(!t||h(this,Ja))){if(t.close(),t.removeAllListeners(),t.direction==="send"){await this.sfuHandler.setupTransports(["send"]),this.logger.info("send transport reconected!"),R.emit(P.RESET_PRODUCER_STATE);return}this.sfuHandler.cleanupConsumers(),await this.sfuHandler.setupTransports(["recv"]),this.logger.info("recv transport reconnected!"),this.activatedProducingPeerIds=new Set,R.emit(P.REFRESH_GRID,!0)}}async setupTransports(t=!1){await h(this,dt).setupTransports(["recv","send"],t)}async joinRoom(t,e,i,r,s={}){return L(this,Ja,!0),this.reset(),this._transportQueue.push(()=>this._joinRoom(t,i,s),"joinRoom")}async _joinRoom(t,e,i={}){this.peerDisplayName=t;try{return await this.sfuHandler.hiveSocketHandler.joinRoom(e,t),await this.setupTransports(!0),ge.hasFeature(me.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{var r;const s=await Bi().getUserDetails(),n=Ne.isV2AuthToken?s.participant:s,a={userId:(r=n.id)!=null?r:n.participant.id,peerId:this.peerId,displayName:t,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Ze.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:OS,sdkVersion:_g,metaData:{},permissions:{}};ue.roomJoined(a),i!=null&&i.audio?ue.audioOn():ue.audioOff(),i!=null&&i.video?ue.videoOn():ue.videoOff()}),{roomJoined:await this.completeJoinRoom()}}catch(r){return this.logger.error("error on sending join room request",r),{roomJoined:!1}}}async completeJoinRoom(){try{const{maxPreferredStreams:t,participants:e,roomState:i,selectedPeers:r}=await this.sfuHandler.hiveSocketHandler.notifySelfJoinComplete();this.logger.debug("peerJoinCompleteResponse",{participants:e,roomState:i,selectedPeers:r}),this.roomUUID=i.roomUuid,this.maxPreferredStreams=t!=null?t:6;const s=e.map(c=>{const u=c.producerStates,l={id:c.peerId,isHost:!1,displayName:c.displayName,flags:{},userId:c.userId,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};return u.forEach(p=>{p.kind===cn.AUDIO?l.audioMuted=p.pause:l.videoEnabled=!p.pause,l.producers.push({producerId:p.producerId,kind:p.kind===cn.AUDIO?"audio":"video",pause:p.pause,screenShare:p.screenShare})}),l}),{audioPeers:n,compulsoryPeers:a}=r!=null?r:{},o=s.filter(c=>c.id!==this.peerId);return L(this,Ja,!1),this.roomJoined=!0,this.mediaConnected=!0,x.info("HiveNodeClient::joinRoom::pre_emitasync_room_joined"),await R.emitAsync(P.ROOM_JOINED,{peers:o}),i.isRecording&&R.emit(P.HIVE_RECORDING_STARTED,i.recorderParticipantId),x.info("HiveNodeClient::joinRoom::post_emitasync_room_joined"),R.emit(P.SELF_ROOM_JOINED),R.emit(P.SELECTED_PEERS,{peerIds:n!=null?n:[],compulsoryPeers:a}),R.emit(P.REFRESH_GRID,!0),!0}catch(t){return this.logger.error("error on completing join room:",t),!1}}async leaveRoom(){await h(this,dt).stopAllTransports();const t={closeRoom:!1};h(this,wi).sendMessagePromise(st.leaveRoom,jse.toBinary(t)).then(e=>{var i;(i=xne.fromBinary(e.payload))!=null&&i.closed||this.logger.warn("weird state on peer closed and should not happen")}).catch(e=>{this.logger.error("error on sending leave room request",e)}),ue.callEnded(),C.destruct()}getConsumers(){return h(this,dt).consumers}async activatePeers(t){const e=t.map(({peerId:i,producers:r,force:s})=>{if(r.length===0)return Promise.resolve();if(s)return this.consumePeer(i,s);const n=[];return r.every(a=>{const o=this.sfuHandler.producerIdToConsumerIdMap.get(a.producerId);if(!o)return!1;const c=this.sfuHandler.consumers.get(o);return c&&!a.pause&&c.paused&&n.push(o),!0})?n.length>0?this.resumeConsumers(n):Promise.resolve():this.consumePeer(i)});await Promise.all(e)}async deactivatePeers(t){if(this.logger.info("deactivating producers",t),t.producers.some(e=>e.screenShare&&e.kind==="video")){this.logger.debug("peer is screensharing can't deactivate");return}t.producers.forEach(({producerId:e,kind:i})=>{if(i==="audio"){this.logger.debug("we don't want to deactive audio consumers");return}const r=this.sfuHandler.producerIdToConsumerIdMap.get(e);if(!r){this.logger.warn("consumer not found in deactivate producers:",e);return}this.sfuHandler.closeConsumer(r)}),this.activatedProducingPeerIds.delete(t.peerId)}async createConsumer({producerId:t,producingPeerId:e,screenShare:i}){return this.sfuHandler.createConsumer({producerId:t,producingPeerId:e,appData:{screenShare:i}})}async pauseConsumers(t){t.forEach(e=>{this.sfuHandler.pauseConsumer(e)})}async resumeConsumers(t){t.forEach(e=>{this.sfuHandler.resumeConsumer(e)})}async closeConsumers(t){const e=Array.from(this.getConsumers().values()).filter(i=>t.includes(i.peerId)).map(i=>i.id);return t.forEach(i=>{this.activatedProducingPeerIds.delete(i)}),this.sfuHandler.closeConsumers(e)}async consumePeer(t,e){if(this.logger.info("current activated Peer ids",Array.from(this.activatedProducingPeerIds.values()),"forced?:",e),!this.activatedProducingPeerIds.has(t)||e)try{await h(this,dt).consumePeer(t),this.activatedProducingPeerIds.add(t)}catch(i){this.logger.error("consumePeer failed in HiveNodeClient.ts",i)}else this.logger.info("not creating consumer for this peerId",t)}async shareWebcam(t){if(t===void 0)return;if(h(this,dt).producers.has(ke.WEBCAM)){const r=h(this,dt).producers.get(ke.WEBCAM);if(!r.closed&&!navigator.isReactNative){await r.replaceTrack({track:t}),await this.resumeWebcam();return}await h(this,dt).removeProducer(r.id)}const e={track:t,codecOptions:{name:"VP8"},appData:{screenShare:!1},stopTracks:!1};if(ge.hasFeature(me.ENABLE_HIVE_SIMULCAST)){let r=t.getConstraints().width;r in eP||(r=320),e.encodings=eP[r]}const i=()=>{this.disableWebcam()};await h(this,dt).createProducer(ke.WEBCAM,e,i)}async shareScreen(t){const{video:e,audio:i}=t;if(e===void 0)return;const r={track:e,codecOptions:{name:"VP8"},appData:{screenShare:!0,supportsRemoteControl:Ze.isElectron()},stopTracks:!1};let s=()=>{this.disableScreenShare()};if(ue.screenShareRequested(),await h(this,dt).createProducer(ke.SCREENSHARE_VIDEO,r,s),i){const n={track:i,codecOptions:{name:"opus"},appData:{screenShare:!0,supportsRemoteControl:Ze.isElectron()},stopTracks:!1};s=()=>{},await h(this,dt).createProducer(ke.SCREENSHARE_AUDIO,n,s)}}async shareMic(t){try{if(t===void 0)throw new Sr("track undefined");if(h(this,dt).producers.has(ke.MIC)){const r=h(this,dt).producers.get(ke.MIC);if(!r.closed&&!navigator.isReactNative){await r.replaceTrack({track:t}),await this.resumeMic();return}await h(this,dt).removeProducer(ke.MIC,!1)}const e={track:t,encodings:[{priority:"high"}],codecOptions:{name:"opus"},stopTracks:!1},i=()=>{this.disableMic()};await h(this,dt).createProducer(ke.MIC,e,i)}catch(e){throw new U(e)}}pauseMic(){const t=h(this,dt).producers.get(ke.MIC);if(!t){x.error("pauseMic::could_not_find_mic_producer");return}if(t.paused){x.info("pauseMic::mic_producer_already_paused");return}t.pause();const e={producerId:t.id,pause:!0};h(this,wi).sendMessage(st.toggleProducer,ym.toBinary(e))}async pauseWebcam(){const t=h(this,dt).producers.get(ke.WEBCAM);if(!t){x.error("pauseWebcam::could_not_find_webcam_producer");return}t.pause();const e={producerId:t.id,pause:!0};h(this,wi).sendMessage(st.toggleProducer,ym.toBinary(e))}async resumeMic(){const t=h(this,dt).producers.get(ke.MIC);if(!t){x.error("resumeMic::could_not_find_mic_producer");return}if(!t.pause){x.info("resumeMic::mic_producer_already_resumed");return}t.resume();const e={producerId:t.id,pause:!1};h(this,wi).sendMessage(st.toggleProducer,ym.toBinary(e))}async resumeWebcam(){const t=h(this,dt).producers.get(ke.WEBCAM);if(!t){x.error("resumeWebcam::could_not_find_webcam_producer");return}t.resume();const e={producerId:t.id,pause:!1};h(this,wi).sendMessage(st.toggleProducer,ym.toBinary(e))}async disableWebcam(){await h(this,dt).removeProducer(ke.WEBCAM)}async disableMic(){await h(this,dt).removeProducer(ke.MIC)}async disableScreenShare(){x.info("screen_sharing_stopped"),await h(this,dt).removeProducer(ke.SCREENSHARE_VIDEO),await h(this,dt).removeProducer(ke.SCREENSHARE_AUDIO)}async muteSelf(){this.pauseMic()}async unmuteSelf(){}async resetVideoProducers(t,e){t&&(await h(this,dt).removeProducer(ke.WEBCAM,!1),this.shareWebcam(t)),e&&(await h(this,dt).removeProducer(ke.SCREENSHARE_VIDEO,!1),this.shareScreen({video:e}))}async getPolls(){return{payload:{polls:{}}}}async changeDisplayName(t,e){const i={displayName:t,participantId:e!=null?e:this.peerId};if(!await this.sfuHandler.hiveSocketHandler.changeDisplayName(i))throw new Error("failed to change display name!")}async kick(t){const e={participantId:t};if(!await this.sfuHandler.hiveSocketHandler.kickPeer(e))throw new Error("failed to kickout the participant!")}async kickAll(){if(!await this.sfuHandler.hiveSocketHandler.kickAll())throw new Error("failed to kickout all participant!")}async muteAll(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("audio"))throw new Error("failed to mute all participant")}async muteAllVideo(){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("video"))throw new Error("failed to mute all video participant")}async mutePeer(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(t,"audio"))throw new Error("failed to mute given participant")}async mutePeerVideo(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(t,"video"))throw new Error("failed to mute video of given participant")}async pinPeer(t){const e={participantId:t!=null?t:""};try{await h(this,wi).sendMessagePromise(st.globalPinPeer,Gse.toBinary(e))}catch(i){this.logger.error(`Error in pinning peer: ${i}`)}}async handleSocketEvents(){h(this,wi).on(st.peerJoinedBroadcast,({id:t,payload:e})=>{if(this.roomJoined){this.logger.debug("got peer joined with id",t);try{const{participant:{peerId:i,displayName:r,producerStates:s,userId:n}}=Qne.fromBinary(e);if(i===this.peerId)return;this.logger.info("peer-joined",{peerId:i,displayName:r,producerStates:s});const a={id:i,isHost:!1,displayName:r,flags:{},userId:n,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};s.forEach(o=>{o.kind===cn.AUDIO?a.audioMuted=o.pause:a.videoEnabled=!o.pause,a.producers.push({producerId:o.producerId,kind:o.kind===cn.AUDIO?"audio":"video",pause:o.pause,screenShare:o.screenShare})}),R.emit(P.PEER_JOINED,a),R.emit(P.REFRESH_GRID)}catch(i){this.logger.error("error in peer-joined-broadcast",i)}}}),h(this,wi).on(st.peerProducerCreateBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:i}=Xne.fromBinary(t);if(e===this.peerId)return;this.logger.info("producer created broadcast:",e,"producer state",i),R.emit(P.NEW_PRODUCER,{peerId:e,producer:{producerId:i.producerId,kind:i.kind===cn.AUDIO?"audio":"video",pause:i.pause,screenShare:i.screenShare}})}catch(e){this.logger.error("error in peer-producer-create-broadcast",e)}}),h(this,wi).on(st.peerProducerToggleBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:{kind:i,pause:r,producerId:s}}=tae.fromBinary(t),n=i===cn.AUDIO?"audio":"video";if(this.logger.info("producer toggle broadcast:",e,"producerId",s,"kind",n,"paused",r),e===this.peerId&&r){R.emit(n==="audio"?P.MUTE_ALL:P.MUTE_ALL_VIDEO);return}R.emit(P.PRODUCER_TOGGLE,{peerId:e,producerId:s,paused:r,kind:n}),[...this.getConsumers().values()].filter(a=>a.producerId===s).forEach(a=>{a.paused!==r&&(this.logger.debug("consumer state mismatched for",a.id,". updating consumer pause state",a.paused,"to",r),r?(a.pause(),R.emit(P.CONSUMER_PAUSED,{id:a.id})):(a.resume(),R.emit(P.CONSUMER_RESUMED,{id:a.id})))})}catch(e){this.logger.error("error in producer toggle broadcast handler",e)}}),h(this,wi).on(st.selectedPeer,({payload:t})=>{if(this.roomJoined)try{const{audioPeers:e,compulsoryPeers:i}=dO.fromBinary(t);this.logger.info("selected peers:",e,i),R.emit(P.SELECTED_PEERS,{peerIds:i.concat(e)})}catch(e){this.logger.error("error in selected-peer",e)}}),h(this,wi).on(st.selectedPeerDiff,({payload:t})=>{if(this.roomJoined)try{const{entries:e}=bne.fromBinary(t);this.logger.debug("selected peers diff:",e);const i=e.map(r=>({peerId:r.peerId,priority:r.priority}));R.emit(P.SELECTED_PEERS_DIFF,{entries:i})}catch(e){this.logger.error("error in selected-peer-diff",e)}}),h(this,wi).on(st.peerLeaveBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e}=nae.fromBinary(t);if(e===this.peerId){this.logger.warn("peer got kicked out of the room"),R.emit(P.KICKED);return}this.logger.info("peer left broadcast:",e),this.sfuHandler.cleanupConsumers(e),R.emit(P.PEER_CLOSED,{id:e})}catch(e){this.logger.error("error in peer left broadcast",e)}}),h(this,wi).on(st.peerProducerCloseBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:{producerId:i}}=rae.fromBinary(t);if(e===this.peerId)return;this.logger.info("producer closed broadcast:",e),R.emit(P.PRODUCER_CLOSED,{peerId:e,producerId:i});const r=this.sfuHandler.producerIdToConsumerIdMap.get(i);if(!r){this.logger.warn("no consumer found for producer",i);return}this.logger.info("closing consumer",r,"producer id ",i),this.sfuHandler.closeConsumer(r).then(()=>{this.logger.info("closed consumer",r),this.sfuHandler.producerIdToConsumerIdMap.delete(i),R.emit(P.CONSUMER_CLOSED,{id:r})}).catch(s=>{this.logger.error("error closing consumer",s)})}catch(e){this.logger.error("error on producer close broadcast",e)}}),h(this,wi).on(st.globalPeerPinBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=oae.fromBinary(t);this.logger.info("pinning peerId: ",i),e=i.participantId}R.emit(P.PEER_PINNED,{peerId:e})}catch(e){this.logger.error("error on global peer pin broadcast",e)}}),h(this,wi).on(st.recordingStartedBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=dae.fromBinary(t);this.logger.info("recording started. peerId: ",i),e=i.participantId}R.emit(P.HIVE_RECORDING_STARTED,e)}catch(e){this.logger.error("error on recording started broadcast",e)}}),h(this,wi).on(st.recordingStoppedBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=uae.fromBinary(t);this.logger.info("recording stopped. peerId: ",i),e=i.participantId}R.emit(P.HIVE_RECORDING_STOPPED,e)}catch(e){this.logger.error("error on recording started broadcast",e)}}),h(this,wi).on(st.peerDisplayNameEditBroadcast,({payload:t})=>{if(this.roomJoined)try{const e=pae.fromBinary(t);this.logger.debug("peer display name changed to:",e.displayName),R.emit(P.PEER_DISPLAY_NAME_CHANGED,e.participantId)}catch(e){this.logger.error("failed to handle peerDisplayNameEditBroadcast:",e)}})}handleSFUEvents(){h(this,dt).on("reconnect_transport",async t=>{try{R.emit(P.HIVE_TRANPSORT_RECONNECTING),await this._transportQueue.push(this.reconnectTransport.bind(this,t),"reconnect_transport"),this.logger.info("transport reconnected [id:%s]",t.id)}catch(e){this.logger.error("error on reconnection transports",e)}}),h(this,dt).on("rejoin",()=>{if(this._totalRejoinCount>1){this.logger.warn("cannot rejoin more already rejoined 3 times");return}if(h(this,Ja)){this.logger.warn("room joining in progress, cannot start rejoining");return}this._totalRejoinCount+=1,this.logger.warn("rejoining the room because transports are failing",{rejoinCount:this._totalRejoinCount}),R.emit(P.HIVE_ROOM_REJOINING),h(this,lh).call(this)})}},wi=new WeakMap,dt=new WeakMap,lh=new WeakMap,Ja=new WeakMap,IP);let Le=kO;rt([C.trace("HiveNodeClient.reset")],Le.prototype,"reset",1);rt([C.trace("HiveNodeClient.reconnect")],Le.prototype,"reconnectTransport",1);rt([C.trace("HiveNodeClient.setupTransport")],Le.prototype,"setupTransports",1);rt([C.trace("HiveNodeClient.joinRoom")],Le.prototype,"joinRoom",1);rt([C.trace("HiveNodeClient.completeJoinRoom")],Le.prototype,"completeJoinRoom",1);rt([C.trace("HiveNodeClient.leaveRoom")],Le.prototype,"leaveRoom",1);rt([C.trace("HiveNodeClient.activatePeers")],Le.prototype,"activatePeers",1);rt([C.trace("HiveNodeClient.deactivatePeers")],Le.prototype,"deactivatePeers",1);rt([C.trace("HiveNodeClient.createConsumer")],Le.prototype,"createConsumer",1);rt([C.trace("HiveNodeClient.pauseConsumers")],Le.prototype,"pauseConsumers",1);rt([C.trace("HiveNodeClient.resumeConsumers")],Le.prototype,"resumeConsumers",1);rt([C.trace("HiveNodeClient.closeConsumers")],Le.prototype,"closeConsumers",1);rt([C.trace("HiveNodeClient.consumePeer")],Le.prototype,"consumePeer",1);rt([C.trace("HiveNodeClient.shareWebcam")],Le.prototype,"shareWebcam",1);rt([C.trace("HiveNodeClient.shareScreen")],Le.prototype,"shareScreen",1);rt([C.trace("HiveNodeClient.shareMic")],Le.prototype,"shareMic",1);rt([C.trace("HiveNodeClient.pauseMic")],Le.prototype,"pauseMic",1);rt([C.trace("HiveNodeClient.pauseWebcam")],Le.prototype,"pauseWebcam",1);rt([C.trace("HiveNodeClient.resumeMic")],Le.prototype,"resumeMic",1);rt([C.trace("HiveNodeClient.resumeWebcam")],Le.prototype,"resumeWebcam",1);rt([C.trace("HiveNodeClient.disableWebcam")],Le.prototype,"disableWebcam",1);rt([C.trace("HiveClient.disableMic")],Le.prototype,"disableMic",1);rt([C.trace("HiveClient.disableScreenShare")],Le.prototype,"disableScreenShare",1);rt([C.trace("HiveNodeClient.muteSelf")],Le.prototype,"muteSelf",1);rt([C.trace("HiveNodeClient.resetVideoProducers")],Le.prototype,"resetVideoProducers",1);rt([C.trace("HiveNodeClient.getPolls")],Le.prototype,"getPolls",1);rt([C.trace("HiveNodeClient.changeDisplayName")],Le.prototype,"changeDisplayName",1);rt([C.trace("HiveNodeClient.kickPeer")],Le.prototype,"kick",1);rt([C.trace("HiveNodeClient.kickAllPeers")],Le.prototype,"kickAll",1);rt([C.trace("HiveNodeClient.muteAll")],Le.prototype,"muteAll",1);rt([C.trace("HiveNodeClient.muteAllVideo")],Le.prototype,"muteAllVideo",1);rt([C.trace("HiveNodeClient.mute")],Le.prototype,"mutePeer",1);rt([C.trace("HiveNodeClient.muteVideo")],Le.prototype,"mutePeerVideo",1);rt([C.trace("HiveNodeClient.pinPeer")],Le.prototype,"pinPeer",1);rt([C.trace("HiveNodeClient.init")],Le,"init",1);var jn=(t=>(t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DISCONNECTED="SOCKET_DISCONNECTED",t.SOCKET_CONNECTION_ERROR="SOCKET_CONNECTION_ERROR",t.SOCKET_MESSAGE="SOCKET_MESSAGE",t))(jn||{}),Nh=(t=>(t[t.NOT_STARTED=0]="NOT_STARTED",t[t.CONNECTED=1]="CONNECTED",t[t.DISCONNECTED=2]="DISCONNECTED",t[t.ERRORED=3]="ERRORED",t))(Nh||{}),Ole=Object.defineProperty,Lle=Object.getOwnPropertyDescriptor,Ky=(t,e,i,r)=>{for(var s=r>1?void 0:r?Lle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Ole(e,i,s),s};const Nle="event://server-simple-message",Ule="event://send-message";class Eg extends Er{constructor(e){super(),w(this,"socket"),w(this,"socketState"),w(this,"callbackHandler",null),this.socketState=Nh.NOT_STARTED,e.callbackHandler&&(this.callbackHandler=e.callbackHandler)}connect(e){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=ef(e,{closeOnBeforeunload:!1}),this.setupSocket()}disconnect(){this.socket.disconnect()}reconnect(){this.socket.connect()}setupSocket(){this.socket.on("disconnect",e=>{this.socketState=Nh.DISCONNECTED,x.warn("SocketClient::socket_disconnected",{error:{reason:e}}),this.emit(jn.SOCKET_DISCONNECTED,{reason:e})}),this.socket.on("connect_error",e=>{this.socketState=Nh.ERRORED,ge.hasFeature(me.SOCKET_POLLING)&&(this.socket.io.opts.transports=["polling","websocket"]),x.error("SocketClient::socket_connection_errored",{error:e}),this.emit(jn.SOCKET_CONNECTION_ERROR,{err:e})}),this.socket.on("connect",()=>{this.socketState=Nh.CONNECTED,x.info("SocketClient::socket_connected"),this.emit(jn.SOCKET_CONNECTED)}),this.socket.on(Nle,async(e,i)=>{const r=JSON.parse(e);if((!C.logExclusionList.includes(r==null?void 0:r.type)||ge.hasFeature(me.BYPASS_LOG_EXCLUSION_LIST))&&x.info(`SocketClient::SIMPLE_SERVER_MESSAGE_EVENT::${r==null?void 0:r.type}`),i){let s="OK";this.callbackHandler&&(s=await this.callbackHandler(r)),i(s)}else this.emit(jn.SOCKET_MESSAGE,r);Object.values(P).find(s=>s===r.type)&&R.emit(r.type,r.payload)})}async sendMessage(e){return(!C.logExclusionList.includes(e==null?void 0:e.type)||ge.hasFeature(me.BYPASS_LOG_EXCLUSION_LIST))&&x.info(`SocketClient::sendMessage::${e==null?void 0:e.type}`),Object.assign(e,{metadata:e.metadata||{}}),C.injectContext(e.metadata),new Promise(i=>{this.socket.emit(Ule,JSON.stringify(e),r=>{if(!r){i(void 0);return}const s=JSON.parse(r);i(s)})})}}Ky([C.trace("SocketClient.connect")],Eg.prototype,"connect",1);Ky([C.trace("SocketClient.disconnect")],Eg.prototype,"disconnect",1);Ky([C.trace("SocketClient.reconnect")],Eg.prototype,"reconnect",1);Ky([C.trace("SocketClient.setupSocket")],Eg.prototype,"setupSocket",1);var uk,_O,hk,SO,_m,Kb;const pk=class{constructor(t=1e3){N(this,uk),N(this,hk),w(this,"sendTransport"),w(this,"recvTransport"),w(this,"collectStpStats"),w(this,"collectRtpStats"),w(this,"pingInterval"),this.pingInterval=t}initSendTransport(t){this.sendTransport=t,R.emit(P.SEND_TRANSPORT_CREATED)}initRecvTransport(t){this.recvTransport=t,R.emit(P.RECV_TRANSPORT_CREATED)}collectSendTransportStats(){return!this.sendTransport||this.collectStpStats?!1:(this.collectStpStats=setInterval(qe(this,uk,_O).bind(this),this.pingInterval),!0)}collectRecvTransportStats(){return!this.recvTransport||this.collectRtpStats?!1:(this.collectRtpStats=setInterval(qe(this,hk,SO).bind(this),this.pingInterval),!0)}stopStatsCollection(t){return t==="send"?(clearInterval(this.collectStpStats),this.collectStpStats=void 0,!0):t==="receive"?(clearInterval(this.collectRtpStats),this.collectRtpStats=void 0,!0):!1}cleanup(t){this.stopStatsCollection(t),t==="send"?(this.sendTransport=void 0,this.collectStpStats=void 0,R.emit(P.SEND_TRANSPORT_CLOSED)):(this.recvTransport=void 0,this.collectRtpStats=void 0,R.emit(P.RECV_TRANSPORT_CLOSED))}};let xO=pk;uk=new WeakSet,_O=function(){this.sendTransport||this.stopStatsCollection("send"),this.sendTransport.getStats().then(t=>{var e;return qe(e=pk,_m,Kb).call(e,t,"send")})},hk=new WeakSet,SO=function(){this.recvTransport||this.stopStatsCollection("receive"),this.recvTransport.getStats().then(t=>{var e;return qe(e=pk,_m,Kb).call(e,t,"receive")})},_m=new WeakSet,Kb=function(t,e){t.forEach(i=>{i.type==="candidate-pair"&&R.emit(P.CANDIDATE_PEER_UPDATE,{...i,transport:e}),i.type==="inbound-rtp"&&R.emit(P.INBOUND_RTP_UPDATE,{...i,transport:e}),i.type==="outbound-rtp"&&R.emit(P.OUTBOUND_RTP_UPDATE,{...i,transport:e})})},N(xO,_m);const Ro=new xO;var jle=Object.defineProperty,$le=Object.getOwnPropertyDescriptor,Jr=(t,e,i,r)=>{for(var s=r>1?void 0:r?$le(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&jle(e,i,s),s};class Rr extends Er{constructor(e,i){super(),w(this,"device"),w(this,"sendTransport"),w(this,"recvTransport"),w(this,"sendTransportIceStateDisconnectTime"),w(this,"recvTransportIceStateDisconnectTime"),w(this,"producerCreationStatus"),w(this,"consumers"),w(this,"producers"),w(this,"socketClient"),w(this,"iceRestartInProgress"),this.producers=new Map,this.consumers=new Map,this.producerCreationStatus=new Map,this.iceRestartInProgress={sendTransport:!1,recvTransport:!1},i!==void 0?this.device=i:this.device=new UD,this.socketClient=e}async setupTransports(){const e=await Bi().getICEServers();await this.loadRouter(),await Promise.all([this.createRecvTransport(e),this.createSendTransport(e)])}async loadRouter(){(this.recvTransport||this.sendTransport)&&await this.stopAllTransports()}getRTPCapabilities(){return this.device.rtpCapabilities}async createRecvTransport(e){if(!this.socketClient)return;const i={forceTcp:!1,producing:!1,consuming:!0},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(x.info("recvTransport::initializing_transport"),this.recvTransport=this.device.createRecvTransport({...r,iceServers:e,proprietaryConstraints:XC}),Ro.initRecvTransport(this.recvTransport),x.info("recvTransport::initialized_transport"),ue.onSafeInitialization(()=>{ue.configureRecvTransport(this.recvTransport)}),this.recvTransport.on("connect",async({dtlsParameters:s},n,a)=>{var o,c,u,l;const p=await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:this.recvTransport.id,dtlsParameters:s}});(o=p.payload)!=null&&o.error?(x.error("recvTransport::transport_status",{error:(u=p.payload)==null?void 0:u.error,transport:{id:(l=this==null?void 0:this.recvTransport)==null?void 0:l.id,status:"failed",type:"recv"}}),a(new Error("failed"))):(n(),x.info("recvTransport::transport_status",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"connected",type:"recv"}}))}),ge.hasFeature(me.ENABLE_ICE_STATE_LOGGING)){x.info("enabling_ice_state_logging_for_recv_transport");let s;this.recvTransport.on("connectionstatechange",async n=>{var a,o,c,u,l,p,m,y;switch(x.info("recvTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.recvTransport)==null?void 0:a.id,status:n,type:"recv"}}),n){case"failed":if(R.emit(P.ICE_FAILED,{transport:"recv"}),x.warn("recvTransport::ice_state_failed"),ge.hasFeature(me.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.recvTransport)}catch(b){x.error("recvTransport::ice_restart_failed",{error:b,transport:{id:(o=this==null?void 0:this.recvTransport)==null?void 0:o.id,status:"failed",type:"recv"}})}break;case"disconnected":R.emit(P.ICE_DISCONNECTED,{transport:"recv"}),x.warn("recvTransport::ice_state_disconnected"),this.recvTransportIceStateDisconnectTime&&x.warn("recvTransport::ice_state_disconnected_again",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"disconnected",type:"recv",lastDisconnectedTime:(u=this.recvTransportIceStateDisconnectTime)==null?void 0:u.toISOString(),lastDisconnectedTimeOffset:(l=this.recvTransportIceStateDisconnectTime)==null?void 0:l.getTimezoneOffset(),durationPassed:new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime()}}),this.recvTransportIceStateDisconnectTime=new Date;try{s=ge.getValue(me.ICE_RESTART_ON_DISCONNECTED_STATE),typeof s!="number"&&(s=void 0)}catch{s=void 0}s&&setTimeout(async()=>{var b,S,E,k,T;if(this.recvTransportIceStateDisconnectTime!==void 0){R.emit(P.ICE_RECONNECTING,{transport:"recv"}),x.info("recvTransport::attempting_ice_restart",{transport:{id:(b=this==null?void 0:this.recvTransport)==null?void 0:b.id,type:"recv",status:"reconnecting",lastDisconnectedTime:(S=this.recvTransportIceStateDisconnectTime)==null?void 0:S.toISOString(),lastDisconnectedTimeOffset:(E=this.recvTransportIceStateDisconnectTime)==null?void 0:E.getTimezoneOffset()},iceRestart:{isSendTransport:(k=this==null?void 0:this.iceRestartInProgress)==null?void 0:k.sendTransport,isRecvTransport:(T=this==null?void 0:this.iceRestartInProgress)==null?void 0:T.recvTransport}});try{await this.restartIceTillSuccess(this.recvTransport)}catch(I){x.info("SFUHandler.disconnected.restartIceFailed",{error:I,iceRestart:{status:"failed",isRecvTransport:!0}})}}},s);break;case"connected":R.emit(P.ICE_CONNECTED,{transport:"recv"}),x.info("recvTransport::ice_state_connected",{transport:{id:(p=this==null?void 0:this.recvTransport)==null?void 0:p.id,type:"recv",status:"connected",lastDisconnectedTime:(m=this.recvTransportIceStateDisconnectTime)==null?void 0:m.toISOString(),lastDisconnectedTimeOffset:(y=this.recvTransportIceStateDisconnectTime)==null?void 0:y.getTimezoneOffset(),durationPassed:this.recvTransportIceStateDisconnectTime?new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime():null}}),this.recvTransportIceStateDisconnectTime=void 0;break}})}this.recvTransport.observer.on("close",()=>{this.recvTransport=void 0,Ro.cleanup("receive"),x.warn("recvTransport_closed")})}async createSendTransport(e){const i={forceTcp:!1,producing:!0,consuming:!1},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(x.info("sendTransport::initializing_transport"),this.sendTransport=this.device.createSendTransport({...r,iceServers:e,proprietaryConstraints:XC}),Ro.initSendTransport(this.sendTransport),x.info("sendTransport::initialized_transport"),ue.onSafeInitialization(()=>{ue.configureSendTransport(this.sendTransport)}),this.sendTransport.on("connect",async({dtlsParameters:s},n,a)=>{var o,c,u,l;(c=(await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:(o=this.sendTransport)==null?void 0:o.id,dtlsParameters:s}})).payload)!=null&&c.error?(x.error("sendTransport::transport_status",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"failed",type:"send"}}),a(new Error("failed"))):(x.info("sendTransport::transport_status",{transport:{id:(u=this==null?void 0:this.sendTransport)==null?void 0:u.id,status:"connected",type:"send"}}),n())}),this.sendTransport.on("produce",async({kind:s,rtpParameters:n,appData:a},o,c)=>{var u,l,p,m,y,b;const S=await this.socketClient.sendMessage({type:"produce",payload:{transportId:(u=this.sendTransport)==null?void 0:u.id,kind:s,rtpParameters:n,appData:a}});(l=S.payload)!=null&&l.error?(x.info("sendTransport::producer_status::failed",{producer:{kind:s,appData:a,status:"failed",id:(y=S==null?void 0:S.payload)==null?void 0:y.id}}),c((b=S.payload)==null?void 0:b.error)):(x.info("sendTransport::producer_status::producing",{producer:{kind:s,appData:a,status:"producing",id:(p=S==null?void 0:S.payload)==null?void 0:p.id}}),o({id:(m=S.payload)==null?void 0:m.id}))}),ge.hasFeature(me.ENABLE_ICE_STATE_LOGGING)){x.info("Enabling ice state logging for send transport");let s;this.sendTransport.on("connectionstatechange",async n=>{var a,o,c,u;switch(x.info("sendTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.sendTransport)==null?void 0:a.id,status:n,type:"send"}}),n){case"failed":if(R.emit(P.ICE_FAILED,{transport:"send"}),x.warn("sendTransport::ice_state_failed"),ge.hasFeature(me.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.sendTransport)}catch(l){x.error("sendTransport::ice_restart_failed",{error:l})}break;case"disconnected":R.emit(P.ICE_DISCONNECTED,{transport:"send"}),x.warn("sendTransport::ice_state_disconnected"),this.sendTransportIceStateDisconnectTime&&x.warn("sendTransport::ice_state_disconnected_again",{transport:{id:(o=this==null?void 0:this.sendTransport)==null?void 0:o.id,status:"disconnected",lastDisconnectedTime:this.sendTransportIceStateDisconnectTime.toLocaleTimeString(),durationPassed:new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime(),type:"send"}}),this.sendTransportIceStateDisconnectTime=new Date;try{s=ge.getValue(me.ICE_RESTART_ON_DISCONNECTED_STATE),typeof s!="number"&&(s=void 0)}catch{s=void 0}s&&setTimeout(async()=>{var l,p,m,y;if(this.sendTransportIceStateDisconnectTime!==void 0){R.emit(P.ICE_RECONNECTING,{transport:"send"}),x.info("sendTransport::attempting_ice_restart",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"reconnecting",type:"send",lastDisconnectedTime:(p=this.sendTransportIceStateDisconnectTime)==null?void 0:p.toISOString(),lastDisconnectedTimeOffset:(m=this.sendTransportIceStateDisconnectTime)==null?void 0:m.getTimezoneOffset()},iceRestart:{status:"connecting"}});try{await this.restartIceTillSuccess(this.sendTransport)}catch(b){x.info("SFUHandler.disconnected.restartIceFailed",{error:b,transport:{id:(y=this==null?void 0:this.sendTransport)==null?void 0:y.id,type:"send",status:"failed"}})}}},s);break;case"connected":R.emit(P.ICE_CONNECTED,{transport:"send"}),x.info("sendTransport::ice_state_connected",{transport:{id:(c=this==null?void 0:this.sendTransport)==null?void 0:c.id,type:"send",status:"connected",lastDisconnectedTime:(u=this.sendTransportIceStateDisconnectTime)==null?void 0:u.toLocaleTimeString(),durationPassed:this.sendTransportIceStateDisconnectTime?new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime():null}}),this.sendTransportIceStateDisconnectTime=void 0;break}})}this.sendTransport.observer.on("close",()=>{this.sendTransport=void 0,Ro.cleanup("send"),x.warn("sendTransport_closed")})}async restartIce(e){const{direction:i}=e;if(!(i==="recv"?this.iceRestartInProgress.recvTransport:this.iceRestartInProgress.sendTransport)){i==="recv"?this.iceRestartInProgress.recvTransport=!0:this.iceRestartInProgress.sendTransport=!0;try{const r=(await this.socketClient.sendMessage({type:"restartIce",payload:{transportId:e.id}})).payload;await e.restartIce(r)}catch(r){x.error("SFUHandler.restartIce.Failed",{error:r,iceRestart:{status:"failed"},transport:{id:e==null?void 0:e.id,status:"failed",type:i}})}i==="recv"?this.iceRestartInProgress.recvTransport=!1:this.iceRestartInProgress.sendTransport=!1}}async createConsumer(e){if(this.recvTransport===void 0||this.recvTransport.closed)return;const{peerId:i,producerId:r,id:s,kind:n,rtpParameters:a,appData:o,remotelyPaused:c}=e;x.info("createConsumer::initializing_consumer",{consumer:{id:s,peerId:i,kind:n,appData:o,remotelyPaused:c,producerId:r}});const u=await this.recvTransport.consume({id:s,producerId:r,kind:n,rtpParameters:a,appData:{...o,peerId:i}});x.info("createConsumer::initialized_consumer",{consumer:{id:u.id,peerId:i,kind:n,appData:o,remotelyPaused:c,producerId:r}});const l=u;l.peerId=i,l.remotelyPaused=c,l.score=10,this.consumers.set(u.id,l)}async closeConsumer(e){const{id:i}=e,r=this.consumers.get(i);r&&(x.info("SFUHandler::close_consumer",{consumer:r}),r.close(),this.consumers.delete(i))}async cleanupConsumers(){var e;(e=this.consumers)==null||e.forEach(i=>{R.emit(P.CONSUMER_CLOSED,{id:i.id}),this.closeConsumer({id:i.id})})}async pauseConsumer(e){const{id:i}=e,r=this.consumers.get(i);r&&r.pause()}async resumeConsumer(e){const{id:i}=e,r=this.consumers.get(i);r&&r.resume()}async createProducer(e,i,r){if(this.sendTransport===void 0||this.sendTransport.closed)return;if(x.info("createProducer::initializing_producer",{producer:{id:"TO_BE_CREATED",kind:e,status:"initializing",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.get(e)&&this.producerCreationStatus.get(e)==="INITIALIZING"){x.info("createProducer::producer getting initializing",{producer:{id:"GETTING_CREATED",status:"initializing",kind:e,appData:i==null?void 0:i.appData}});return}this.producerCreationStatus.set(e,"INITIALIZING");const s=await Promise.race([this.sendTransport.produce(i),new Promise(a=>setTimeout(()=>a(void 0),6e3))]);if(!s)throw x.error("createProducer::transport_initialization_timed_out",{producer:{id:"FAILED_TO_CREATE",kind:e,status:"failed",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),new U(`Producer Creation timed out! ${e}`);this.producerCreationStatus.set(e,"INITIALIZED"),x.info("createProducer::initialized_producer",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),s.on("transportclose",()=>{x.info("producer::transportclose",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),this.producers.delete(e)}),s.on("trackended",()=>{R.emit(P.PRODUCER_TRACK_ENDED,{kind:e}),x.info("producer::trackended",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),[ke.MIC,ke.WEBCAM].includes(e)||r()});const n=s;n.score=10,this.producers.set(e,n),await this.reconfigureWebcamLayers(),await this.reconfigureSafariScreenshareLayers()}async removeProducer(e,i=!0){const r=this.producers.get(e);!r||r.closed||(x.info("SFUHandler::remove_producer",{producer:{id:r==null?void 0:r.id,kind:e,status:"UNKNOWN",appData:r==null?void 0:r.appData},debuggingHint:`stopTrack was ${i}`}),i&&r.track.stop(),r.close(),await this.socketClient.sendMessage({type:"closeProducer",payload:{producerId:r.id}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),this.producers.delete(e),await this.reconfigureWebcamLayers())}stopAllProducers(){Array.from(this.producers.keys()).forEach(e=>{this.removeProducer(e)})}async stopAllTransports(){if(this.sendTransport){try{this.sendTransport.close()}catch(e){x.error("stopAllTransports",{error:e})}this.sendTransport=void 0}if(this.recvTransport){try{this.recvTransport.close()}catch(e){x.error("SFUHandler::stopAllTransports::error",e)}this.recvTransport=void 0}}async reconfigureWebcamLayers(){if(!ge.hasFeature(me.DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE))return;const e=this.producers.get(ke.WEBCAM);e&&await e.setMaxSpatialLayer(this.producers.get(ke.SCREENSHARE_VIDEO)?0:1)}async reconfigureSafariScreenshareLayers(){if(!ge.hasFeature(me.SCREENSHARE_SIMULCAST)||!Ze.isSafari())return;const e=this.producers.get(ke.SCREENSHARE_VIDEO);if(!e)return;const i=e.rtpSender.getParameters();i.encodings=Mie,e.rtpSender.setParameters(i)}async restartIceTillSuccess(e,i=3){let r=!1,s=0;for(;!r&&s<i;)try{x.info("SFUHandler.restartIceTillSuccess.AttemptRestart",{iceRestart:{currentAttempt:s,isSendTransport:e.direction==="send",isRecvTransport:e.direction==="recv"}}),await this.restartIce(e),r=!0}catch{s+=1}if(!r)throw new U("Failed to restart Ice")}}Jr([C.trace("SFUHandler.setupTransports")],Rr.prototype,"setupTransports",1);Jr([C.trace("SFUHandler.loadRouter")],Rr.prototype,"loadRouter",1);Jr([C.trace("SFUHandler.createRecvTransport")],Rr.prototype,"createRecvTransport",1);Jr([C.trace("SFUHandler.createSendTransport")],Rr.prototype,"createSendTransport",1);Jr([C.trace("SFUHandler.restartIce")],Rr.prototype,"restartIce",1);Jr([C.trace("SFUHandler.createConsumer")],Rr.prototype,"createConsumer",1);Jr([C.trace("SFUHandler.closeConsumer")],Rr.prototype,"closeConsumer",1);Jr([C.trace("SFUHandler.cleanupConsumers")],Rr.prototype,"cleanupConsumers",1);Jr([C.trace("SFUHandler.pauseConsumer")],Rr.prototype,"pauseConsumer",1);Jr([C.trace("SFUHandler.resumeConsumer")],Rr.prototype,"resumeConsumer",1);Jr([C.trace("SFUHandler.createProducer")],Rr.prototype,"createProducer",1);Jr([C.trace("SFUHandler.removeProducer")],Rr.prototype,"removeProducer",1);Jr([C.trace("SFUHandler.stopAllProducers")],Rr.prototype,"stopAllProducers",1);Jr([C.trace("SFUHandler.stopAllTransports")],Rr.prototype,"stopAllTransports",1);var zle=Object.defineProperty,Fle=Object.getOwnPropertyDescriptor,Vle=(t,e,i,r)=>{for(var s=r>1?void 0:r?Fle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&zle(e,i,s),s},_a=(t=>(t.REQUEST="REQUEST",t.ACCEPT="ACCEPT",t.REJECT="REJECT",t.END="END",t.EVENT="EVENT",t))(_a||{}),Gl=(t=>(t.PENDING="PENDING",t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED",t.ENDED="ENDED",t))(Gl||{}),Kp=(t=>(t.KEYBOARD="KEYBOARD",t.MOUSE="MOUSE",t))(Kp||{}),bf=(t=>(t.LEFT_CLICK="click",t.RIGHT_CLICK="contextmenu",t.MOVE="mousemove",t))(bf||{}),Sa=(t=>(t.REQUEST_RECEIVED="REQUEST_RECEIVED",t.REQUEST_SENT="REQUEST_SENT",t.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",t.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",t.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",t.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED",t))(Sa||{});let Qp=class extends Mt{constructor(t){super(),w(this,"id"),w(this,"remotePeerId"),w(this,"hostPeerId"),w(this,"state");const{remotePeerId:e,requestId:i,hostPeerId:r,state:s}=t;this.id=i,this.remotePeerId=e,this.hostPeerId=r,this.state=s}};Qp=Vle([Hi(t=>{throw new U(t.message,"1400")})],Qp);var EO=(t=>(t.REQUESTED_BY_PARTICIPANT="REQUESTED_BY_PARTICIPANT",t.REQUESTED_BY_MODERATOR="REQUESTED_BY_MODERATOR",t))(EO||{}),TO=(t=>(t.PRESENT="REQUEST_TO_PRESENT",t))(TO||{}),Ble=Object.defineProperty,Hle=Object.getOwnPropertyDescriptor,Kr=(t,e,i,r)=>{for(var s=r>1?void 0:r?Hle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Ble(e,i,s),s},Ge,lc,AP;const gk=(AP=class extends mO{constructor(t){super(),N(this,Ge,void 0),w(this,"isV2AuthToken"),N(this,lc,void 0),w(this,"legacyMode"),w(this,"roomNodeUrl"),w(this,"peerDisplayName");const{roomName:e,roomNodeUrl:i,peerId:r,authToken:s,legacyMode:n,socketClient:a,meetingTitle:o,viewType:c}=t;this.roomName=e,this.roomNodeUrl=i,this.peerId=r,this.authToken=s,this.legacyMode=n,L(this,Ge,a),this.roomJoined=!1,this.mediaConnected=!1,this.meetingTitle=o,this.isV2AuthToken=Ne.isV2AuthToken,L(this,lc,new Rr(a,t.device)),ue.legacySwitch(n);let u=0;const l=async({err:p})=>{var m;this.isDisconnected=!0,(m=this.sfuHandler)==null||m.cleanupConsumers(),this.mediaConnected=!1,R.emit(P.ROOM_NODE_CONNECTION_ERROR,p),this.roomJoined=!1,x.error("RoomNodeClient::ROOM_NODE_CONNECTION_ERROR",p);const y=Ne.isV2AuthToken?Ne.meetingId:e,b=Bi(),{roomNodeUrl:S}=await b.getRoomNodeData({roomName:y,peerId:r}),E=`${S}?roomURL=${e}&peerId=${r}&authToken=${s}&version=0.5.0`;u+=1,!(u>3)&&(x.log("RoomNodeClient::SocketReconnection",{socket:{retryAttempt:u}}),h(this,Ge).connect(E),iO({...Ne.roomNodeOptions,roomNodeUrl:S}),this.roomNodeUrl=S)};c===Tt.Livestream&&(a.removeListener(jn.SOCKET_CONNECTION_ERROR,l.bind(this)),a.on(jn.SOCKET_CONNECTION_ERROR,l.bind(this)))}static async init(t){const{legacyMode:e=!0,roomName:i,peerId:r,authToken:s,meetingTitle:n,device:a,viewType:o}=t;let c;const u=`${t.roomNodeUrl}?roomURL=${i}&peerId=${r}&authToken=${s}&version=0.5.0`,l=new Eg({callbackHandler:async p=>{await c.handleSocketCallbacks(p)}});return l.on(jn.SOCKET_MESSAGE,async(p,m)=>{await c.handleSockets(p,m)}),l.connect(u),c=new gk({legacyMode:e,authToken:s,peerId:r,roomName:i,roomNodeUrl:u,socketClient:l,meetingTitle:n,device:a,viewType:o}),l.on(jn.SOCKET_DISCONNECTED,p=>{var m,y;c.isDisconnected=!0,(m=c.sfuHandler)==null||m.cleanupConsumers(),(y=c.sfuHandler)==null||y.stopAllTransports(),c.mediaConnected=!1,R.emit(P.ROOM_NODE_DISCONNECTED,p),c.roomJoined=!1,x.info("RoomNodeClient::ROOM_NODE_DISCONNECTED")}),l.on(jn.SOCKET_CONNECTED,async p=>{c.mediaConnected=!0,R.emit(P.ROOM_NODE_CONNECTED,{...p,wasDisconnected:c.isDisconnected}),c.isDisconnected=!1,x.info("RoomNodeClient::ROOM_NODE_CONNECTED")}),c}get sfuHandler(){return h(this,lc)}reconnect(){h(this,Ge).reconnect()}async setupTransports(){await this.sfuHandler.setupTransports()}async handleSocketCallbacks(t){switch(t.type){case P.NEW_CONSUMER:return this.sfuHandler.createConsumer(t.payload);default:return null}}async handleSockets(t,e){if(t){switch((!C.logExclusionList.includes(t==null?void 0:t.type)||ge.hasFeature(me.BYPASS_LOG_EXCLUSION_LIST))&&x.info(`RoomNodeClient::handleSockets::${t==null?void 0:t.type}`),t.type){case P.CONSUMER_CLOSED:this.sfuHandler.closeConsumer(t.payload);break;case P.CONSUMER_PAUSED:this.sfuHandler.pauseConsumer(t.payload);break;case P.CONSUMER_RESUMED:this.sfuHandler.resumeConsumer(t.payload);break;case P.CONSUMER_SCORE:this.handleConsumerScore(t.payload);break;case P.PRODUCER_SCORE:this.handleProducerScore(t.payload);break;case P.PRODUCER_CLOSED:this.handleProducerClosed(t.payload);break}typeof e=="function"&&e()}}async joinRoom(t,e,i,r,s={}){var n,a,o;this.peerDisplayName=t,this.roomUUID=i;const c=await h(this,Ge).sendMessage({type:"joinRoom",payload:{device:Ze.getDeviceInfo(),displayName:t,rtpCapabilities:this.sfuHandler.getRTPCapabilities(),isLegacy:this.legacyMode,audioMuted:e}});if((n=c.payload)!=null&&n.waitlisted)return R.emit(P.WAITLISTED),{roomJoined:!1};this.roomJoined=!0,this.mediaConnected=!0,(o=(a=c.payload)==null?void 0:a.waitlistedPeers)==null||o.forEach(l=>{R.emit(P.WAITLIST_PEER_ADDED,l)}),this.legacyMode=c.payload.legacyMode||this.legacyMode,r&&r!==""&&await this.changeRoomDisplayTitle(r),this.maxPreferredStreams=c.payload.maxPreferredStreams;const u=Bi();x.info("RoomNodeClient::joinRoom::pre emitasync room_joined");try{await R.emitAsync(P.ROOM_JOINED,c.payload)}catch(l){x.error("RoomNodeClient::joinRoom::emitAsync",{error:l})}return x.info("RoomNodeClient::joinRoom::post emitasync room_joined"),R.emit(P.SELF_ROOM_JOINED),ge.hasFeature(me.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{const l=await u.getUserDetails(),p={userId:Ne.isV2AuthToken?l.participant.id:l.id,peerId:this.peerId,displayName:t,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Ze.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:OS,sdkVersion:_g,metaData:{},permissions:{}};ue.roomJoined(p),s!=null&&s.audio?ue.audioOn():ue.audioOff(),s!=null&&s.video?ue.videoOn():ue.videoOff()}),{roomJoined:!0}}async leaveRoom(){this.sfuHandler.stopAllProducers(),await this.sfuHandler.stopAllTransports(),h(this,Ge).disconnect(),ue.callEnded(),C.destruct()}handleProducerClosed({id:t}){this.sfuHandler.producers.forEach((e,i)=>{e.id===t&&this.sfuHandler.removeProducer(i)})}getConsumers(){return this.sfuHandler.consumers}static getComputedScore(t){var e,i;let r=0;try{Array.isArray(t)?t.length===1?r=t[0].score:r=t.map(({score:s})=>s!=null?s:10).filter(s=>s>0).reduce((s,n)=>s+n,0)/t.length:r=(e=t==null?void 0:t.score)!=null?e:10}catch{r=(i=t==null?void 0:t.score)!=null?i:10}return r}handleConsumerScore({id:t,score:e}){var i;const r=h(this,lc).consumers.get(t);r&&(r.score=e&&e.producerScore!==void 0&&e.producerScore>=0?e.producerScore:(i=e==null?void 0:e.score)!=null?i:10,R.emit(P.CONSUMER_SCORE_UPDATE,{id:r.id,kind:r.kind,peerId:r.peerId,score:r.score}))}handleProducerScore({id:t,score:e}){const i=Array.from(h(this,lc).producers.values()).find(s=>s.id===t);if(!i){x.error(`RoomNodeClient::producer_not_found. ProducerId: ${t}`);return}if(!i)return;const r=gk.getComputedScore(e);r!==void 0&&r!==i.score&&(i.score=r,R.emit(P.PRODUCER_SCORE_UPDATE,{id:i.id,kind:i.kind,appData:i.appData,score:i.score}))}async shareWebcam(t){if(t===void 0)return;if(this.sfuHandler.producers.has(ke.WEBCAM)){const c=this.sfuHandler.producers.get(ke.WEBCAM);if(!c.closed&&!navigator.isReactNative){await c.replaceTrack({track:t}),await this.resumeWebcam();return}await this.sfuHandler.removeProducer(ke.WEBCAM,!1)}let e=Iie;const i=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp9")||void 0,r=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp8")||void 0,s=ge.getValue(me.OVERRIDE_WEBCAM_SIMULCAST);if(i&&!this.legacyMode)e=Die;else if(s!==void 0)try{e=JSON.parse(s)}catch{x.error("Failed to parse flagsmith simulcast")}const n=()=>this.legacyMode?r:i,a={track:t,encodings:ge.hasFeature(me.DISABLE_WEBCAM_SIMULCAST)?void 0:e,codecOptions:{videoGoogleStartBitrate:1e3},codec:n(),appData:{screenShare:!1},stopTracks:!1},o=()=>{this.disableWebcam()};await this.sfuHandler.createProducer(ke.WEBCAM,a,o)}async shareScreen(t){var e,i;const{video:r,audio:s}=t;if(r===void 0)return;let n;ge.hasFeature(me.SCREENSHARE_SIMULCAST)&&(n=Aie);const a={track:r,appData:{screenShare:!0,supportsRemoteControl:Ze.isElectron()},encodings:n,stopTracks:!1};let o=()=>{this.disableScreenShare()};ue.screenShareRequested(),await this.sfuHandler.createProducer(ke.SCREENSHARE_VIDEO,a,o);const c={opusDtx:!1,opusStereo:!1,opusFec:!0,forceGoogConference:!1};if(ge.hasFeature(me.SCREENSHARE_FORCE_GOOG_CONFERENCE)&&(c.forceGoogConference=!0),s){const u={track:s,codecOptions:c,appData:{screenShare:!0,supportsRemoteControl:Ze.isElectron()},stopTracks:!1};o=()=>{},await this.sfuHandler.createProducer(ke.SCREENSHARE_AUDIO,u,o)}ue.screenShareStart((i=(e=this.sfuHandler.producers.get(ke.SCREENSHARE_VIDEO))==null?void 0:e.rtpParameters.encodings[0])==null?void 0:i.ssrc)}async shareMic(t){try{if(t===void 0)throw new U("track undefined");if(this.sfuHandler.producers.has(ke.MIC)){const r=this.sfuHandler.producers.get(ke.MIC);if(!r.closed&&!navigator.isReactNative){await r.replaceTrack({track:t}),await this.resumeMic();return}await this.sfuHandler.removeProducer(ke.MIC,!1)}const e={track:t,codecOptions:{opusDtx:!1,opusStereo:!1,opusFec:!0,opusMaxAverageBitrate:16e3},stopTracks:!1},i=()=>{this.disableMic()};await this.sfuHandler.createProducer(ke.MIC,e,i)}catch(e){throw new U(e)}}pauseMic(){const t=this.sfuHandler.producers.get(ke.MIC);if(!t){x.error("pauseMic::could_not_find_mic_producer");return}t.pause(),h(this,Ge).sendMessage({type:"pauseProducer",payload:{producerId:t.id}})}async pauseWebcam(){const t=this.sfuHandler.producers.get(ke.WEBCAM);if(!t){x.error("pauseWebcam::could_not_find_webcam_producer");return}t.pause(),await h(this,Ge).sendMessage({type:"pauseProducer",payload:{producerId:t.id}})}async resumeMic(){const t=this.sfuHandler.producers.get(ke.MIC);if(!t){x.error("resumeMic::could_not_find_mic_producer");return}t.resume(),await h(this,Ge).sendMessage({type:"resumeProducer",payload:{producerId:t.id}})}async resumeWebcam(){const t=this.sfuHandler.producers.get(ke.WEBCAM);if(!t){x.error("resumeWebcam::could_not_find_webcam_producer");return}t.resume(),await h(this,Ge).sendMessage({type:"resumeProducer",payload:{producerId:t.id}})}async disableWebcam(){await this.sfuHandler.removeProducer(ke.WEBCAM)}async disableMic(){await this.sfuHandler.removeProducer(ke.MIC)}async disableScreenShare(){var t,e;x.info("screen_sharing_stopped"),ue.screenShareStop((e=(t=this.sfuHandler.producers.get(ke.SCREENSHARE_VIDEO))==null?void 0:t.rtpParameters.encodings[0])==null?void 0:e.ssrc),await this.sfuHandler.removeProducer(ke.SCREENSHARE_VIDEO),await this.sfuHandler.removeProducer(ke.SCREENSHARE_AUDIO)}async resetVideoProducers(t,e){t&&(await this.sfuHandler.removeProducer(ke.WEBCAM,!1),this.shareWebcam(t)),e&&(await this.sfuHandler.removeProducer(ke.SCREENSHARE_VIDEO,!1),this.shareScreen({video:e}))}async getRoomState(){return h(this,Ge).sendMessage({type:"getRoomState"})}async changeRoomDisplayTitle(t){await h(this,Ge).sendMessage({type:"changeDisplayTitle",payload:{displayTitle:t}})}async sendMessage(t){return h(this,Ge).sendMessage(t)}async broadcastMessage(t,e){const i={payload:e,type:t};return h(this,Ge).sendMessage({type:"roomMessage",payload:i})}async sendChatMessage(t){await h(this,Ge).sendMessage({type:"chatMessage",payload:t})}async getChatMessages(){return h(this,Ge).sendMessage({type:"getChatMessages"})}async pinChatMessage(t){return h(this,Ge).sendMessage({type:"pinChatMessage",payload:t})}async unpinChatMessage(t){return h(this,Ge).sendMessage({type:"unpinChatMessage",payload:t})}async getPolls(){return h(this,Ge).sendMessage({type:"getPolls"})}async newPoll(t){await h(this,Ge).sendMessage({type:"newPoll",payload:t})}async votePoll(t){await h(this,Ge).sendMessage({type:"votePoll",payload:t})}async acceptWaitingRequest(t){await h(this,Ge).sendMessage({type:"acceptWaitingRequest",payload:{id:t}})}async rejectWaitingRequest(t){await h(this,Ge).sendMessage({type:"rejectWaitingRequest",payload:{id:t}})}async muteAll(t){await h(this,Ge).sendMessage({type:"muteAllNew",payload:{allowUnMute:t}})}async muteAllVideo(){await h(this,Ge).sendMessage({type:"muteAllVideo"})}async pinPeer(t){return h(this,Ge).sendMessage({type:"pinPeer",payload:{id:t}})}async unpinPeer(t){return h(this,Ge).sendMessage({type:"unpinPeer",payload:{id:t}})}async disableAudio(t){await h(this,Ge).sendMessage({type:"disableAudioPeerNew",payload:{id:t}})}async disableVideo(t){await h(this,Ge).sendMessage({type:"disableVideoPeer",payload:{id:t}})}async kickAll(){await h(this,Ge).sendMessage({type:"kickAll"})}async kick(t){await h(this,Ge).sendMessage({type:"kick",payload:{id:t}})}async getPage(t){return h(this,Ge).sendMessage({type:"getPage",payload:{pageNum:t}})}async muteSelf(){this.pauseMic(),await h(this,Ge).sendMessage({type:"muteSelf"})}async unmuteSelf(){await this.resumeMic(),await h(this,Ge).sendMessage({type:"unmuteSelf"})}async addRoomPlugin(t){return h(this,Ge).sendMessage({type:"addPlugin",payload:t})}async removeRoomPlugin(t){return h(this,Ge).sendMessage({type:"removePlugin",payload:t})}async remoteControlMessage(t){return h(this,Ge).sendMessage({type:"message",payload:t})}async requestRemoteControl(t){return this.remoteControlMessage({peerId:t.hostPeerId,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:_a.REQUEST})}async acceptRemoteControl(t){return this.remoteControlMessage({peerId:t.remotePeerId,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:_a.ACCEPT})}async terminateRemoteControl(t,e){return this.remoteControlMessage({peerId:t,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:_a.END})}async sendEventRemoteControl(t,e,i){return this.remoteControlMessage({peerId:t,remoteRequestId:e,remoteEvent:i,hostPeerId:this.peerId,remotePeerId:t,remoteRequestType:_a.EVENT})}async assertSpotlight(t,e){return h(this,Ge).sendMessage({type:t,payload:{...e,roomMessageType:"spotlight"}})}async assertSpotlightToRoom(t){return this.assertSpotlight("roomMessage",t)}async assertSpotlightToPeer(t){return this.assertSpotlight("message",t)}async requestToJoinStage(t){await this.sendMessage({type:"requestToJoinStage",payload:t})}async withdrawRequestToJoinStage(){await this.sendMessage({type:"withdrawRequestToJoinStage"})}async acceptAllRequestToJoinStage(t){await this.sendMessage({type:"acceptAllRequestToJoinStage",payload:t.map(e=>({...e,type:EO.REQUESTED_BY_MODERATOR}))})}async grantStageAccess(t){await this.sendMessage({type:"grantStageAccess",payload:{userIDs:t}})}async removePeerFromStage(t,e){await this.sendMessage({type:"removePeerFromStage",payload:{id:t,type:e}})}async kickPeerFromStage(t){await this.sendMessage({type:"kickPeerFromStage",payload:{userIDs:t}})}stopAllProducers(){h(this,lc).stopAllProducers()}async startPresenting(){await this.sendMessage({type:"startPresenting"})}async stopPresenting(){this.stopAllProducers(),await this.sendMessage({type:"stopPresenting"})}async rejectRequestToJoinStage(t){await this.sendMessage({type:"rejectRequestToJoinStage",payload:{id:t}})}async denyStageAccess(t){await this.sendMessage({type:"denyStageAccess",payload:{userIDs:t}})}},Ge=new WeakMap,lc=new WeakMap,AP);let Je=gk;Kr([C.trace("RoomNodeClient.reconnect")],Je.prototype,"reconnect",1);Kr([C.trace("RoomNodeClient.joinRoom")],Je.prototype,"joinRoom",1);Kr([C.trace("RoomNodeClient.leaveRoom")],Je.prototype,"leaveRoom",1);Kr([C.trace("RoomNodeClient.shareWebcam")],Je.prototype,"shareWebcam",1);Kr([C.trace("RoomNodeClient.shareScreen")],Je.prototype,"shareScreen",1);Kr([C.trace("RoomNodeClient.shareMic")],Je.prototype,"shareMic",1);Kr([C.trace("RoomNodeClient.pauseMic")],Je.prototype,"pauseMic",1);Kr([C.trace("RoomNodeClient.pauseWebcam")],Je.prototype,"pauseWebcam",1);Kr([C.trace("RoomNodeClient.resumeMic")],Je.prototype,"resumeMic",1);Kr([C.trace("RoomNodeClient.resumeWebcam")],Je.prototype,"resumeWebcam",1);Kr([C.trace("RoomNodeClient.disableWebcam")],Je.prototype,"disableWebcam",1);Kr([C.trace("RoomNodeClient.disableMic")],Je.prototype,"disableMic",1);Kr([C.trace("RoomNodeClient.disableScreenShare")],Je.prototype,"disableScreenShare",1);Kr([C.trace("RoomNodeClient.resetVideoProducers")],Je.prototype,"resetVideoProducers",1);let $r;async function CO(t){if($r!=null&&$r.roomJoined)throw new Error("Room Node Client already setup");$r&&($r=void 0),$r=await Le.init(t)}async function PO(t){if($r!=null&&$r.roomJoined)throw new Error("Room Node Client already setup");$r&&($r=void 0),$r=await Je.init(t)}function RO(){try{$r==null||$r.leaveRoom()}catch{x.error("roomNodeClient::cleanupRoomNodeClient")}$r=void 0}function Ai(){return $r}function Gc(t){var e,i,r,s,n,a,o,c,u,l,p,m,y;return t?{media:{audio:{enabled:t.audioEnabled,trackId:(e=t.audioTrack)==null?void 0:e.id,permission:"mediaPermissions"in t?(i=t.mediaPermissions)==null?void 0:i.audio:null},video:{enabled:t.videoEnabled,trackId:(r=t.videoTrack)==null?void 0:r.id,permission:"mediaPermissions"in t?(s=t.mediaPermissions)==null?void 0:s.video:null},screenshare:{enabled:t.screenShareEnabled,permission:"mediaPermissions"in t?(n=t.mediaPermissions)==null?void 0:n.screenshare:null,audio:{enabled:(o=(a=t.screenShareTracks)==null?void 0:a.audio)==null?void 0:o.enabled,trackId:(u=(c=t.screenShareTracks)==null?void 0:c.audio)==null?void 0:u.id},video:{enabled:(p=(l=t.screenShareTracks)==null?void 0:l.video)==null?void 0:p.enabled,trackId:(y=(m=t.screenShareTracks)==null?void 0:m.video)==null?void 0:y.id}}}}:{}}class Wle extends Error{constructor(e,i){super(e),w(this,"code"),this.code=i}}class ya extends Error{constructor(e,i,r){super(i),w(this,"constraints"),w(this,"name"),this.name=e,this.constraints=r}}var Gle=Object.defineProperty,qle=Object.getOwnPropertyDescriptor,Ba=(t,e,i,r)=>{for(var s=r>1?void 0:r?qle(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Gle(e,i,s),s};const Qb={port:void 0},Jle=["virtual","emulator","krisp","solstice conference","teams","manycam","blackHole"];function pa(t){const e=t.label.toLowerCase();return Ze._bowser.getOSName()==="macOS"&&e.includes("iphone")?(x.log("isVirtualDevice::ignore_macos_continuity"),!0):Jle.some(i=>e.includes(i))}var Ka,uh,MP;const oo=(MP=class{constructor(t){N(this,Ka,void 0),N(this,uh,void 0),L(this,Ka,t),L(this,uh,new AbortController)}static async init(){let t=[];return oo.isDeviceListAvailable()?(t=await oo.enumerateDevices(),x.info("initial_full_device_list",{devices:JSON.stringify(t)})):x.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices",{debuggingHint:"Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues."}),new oo(t)}async destruct(){var t;(t=h(this,uh))==null||t.abort()}static isDeviceListAvailable(){return!!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}static enumerateDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(t){return x.error("enumerate_devices_failed",{error:t}),Promise.resolve([])}}static getAudioConstraints(t){const e={},{disableAP:i=!1,disableAEC:r=!1,disableNS:s=!1,disableAGC:n=!1,disableHPF:a=!1}=t.audioOptions||{};if(Ze.isFirefox()||Ze.isWebKitBased())e.audio={deviceId:t.audioDeviceId,autoGainControl:!n&&!i,echoCancellation:!r&&!i,noiseSuppression:!s&&!i};else{if(typeof e.audio=="boolean")return e;e.audio={},e.audio.optional=[t.audioDeviceId?{sourceId:t.audioDeviceId}:{sourceId:"default"},{echoCancellation:!r&&!i},{googEchoCancellation:!r&&!i},{googAutoGainControl:!n&&!i},{googNoiseSuppression:!s&&!i},{googHighpassFilter:!a&&!i},{googNoiseSuppression2:!s&&!i},{googEchoCancellation2:!r&&!i},{googAutoGainControl2:!n&&!i}]}return e}static getVideoConstraints(t){const e={},{videoDeviceId:i,videoTrackConstraints:r,facingMode:s="user",frameRate:n={ideal:24,max:30}}=t;return e.video=r||WD.vga,typeof e.video=="boolean"||(i&&(e.video.deviceId={exact:i}),e.video.facingMode=s,e.video.frameRate=n),e}static async getUserMediaWithTimeout(t={},e=0){try{if(x.info("getUserMediaWithTimeout::requesting_user_media",{timeout:e,constraints:JSON.stringify(t)}),!e){const r=await navigator.mediaDevices.getUserMedia(t);return x.info("getUserMediaWithTimeout::received_user_media",{timeout:e,constraints:JSON.stringify(t)}),r}const i=await Promise.race([navigator.mediaDevices.getUserMedia(t),new Promise((r,s)=>{setTimeout(()=>s(new Wle("Get user media timed out","ERR_GUM_TIMEOUT")),e)})]);return x.info("getUserMediaWithTimeout::received_user_media",{timeout:e,constraints:JSON.stringify(t)}),i}catch(i){throw x.error("getUserMediaWithTimeout::failed_to_access_local_media",{error:i,constraints:JSON.stringify(t)}),x.error("Failed to get access to local media.",{error:i,constraints:JSON.stringify(t)}),new ya(i.name,i.message,t)}}static async getAudioTrack(t){return(await oo.getUserMediaWithTimeout(t)).getAudioTracks()[0]}static async getVideoTrack(t){return(await oo.getUserMediaWithTimeout(t)).getVideoTracks()[0]}static async getScreenShareTracks(t){var e,i;let r=ge.hasFeature(me.EXTENSION_HACK),s=null;if(r)try{Qb.port=window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome",{name:"chooseDesktopMedia"})}catch{C.addLogInCurrentSpan("error","Extension connect error"),r=!1}r&&(s=await new Promise(a=>{const o=setTimeout(()=>a(void 0),12e3);Qb.port.onMessage.addListener(async c=>{if(c.value.streamId){const{streamId:u}=c.value;clearTimeout(o),a(u)}}),Qb.port.postMessage({method:"chooseDesktopMedia",sources:["screen"]})}));let n;return s?(C.addLogInCurrentSpan("error","Acquiring extension screenshare track"),n=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{maxWidth:1920,maxHeight:1080,chromeMediaSource:"desktop",chromeMediaSourceId:s},optional:[{maxFrameRate:parseInt((e=ge.getValue(me.VAL_MAX_FRAMERATE_EXT))!=null?e:"12",10)},{minFrameRate:parseInt((i=ge.getValue(me.VAL_MIN_FRAMERATE_EXT))!=null?i:"8",10)}]}}),C.addLogInCurrentSpan("error","Acquired extension screenshare track")):n=await navigator.mediaDevices.getDisplayMedia(t),{video:n.getVideoTracks()[0],audio:n.getAudioTracks()[0]}}static async getAudioAndVideoTrack(t){const e=await oo.getUserMediaWithTimeout(t),i=e.getAudioTracks()[0],r=e.getVideoTracks()[0];return{audioTrack:i,videoTrack:r}}onDeviceChange(t){Ze.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",US(async e=>{const i=this.availableDevices,r=new Set(i.map(o=>o.deviceId));await this.repopulateAvailableDevices();const s=this.availableDevices,n=new Set(s.map(o=>o.deviceId)),a={added:s.filter(o=>!r.has(o.deviceId)),removed:i.filter(o=>!n.has(o.deviceId))};this.repopulateAvailableDevices().then(()=>t(e,a))},100),{signal:h(this,uh).signal})}async repopulateAvailableDevices(){const t=await oo.enumerateDevices();!eO(sse(t,h(this,Ka),Yre))&&(L(this,Ka,t),ue.devices("AUDIO",this.getAudioDevices()),ue.devices("VIDEO",this.getVideoDevices()),ue.devices("SPEAKER",this.getSpeakerDevices()),x.info("repopulated_full_device_list",{devices:JSON.stringify(t)}))}get availableDevices(){return h(this,Ka)}getAvailableDevicesByKind(t){return h(this,Ka).filter(e=>e.kind===t)}getDeviceById(t,e){return h(this,Ka).find(i=>i.deviceId===t&&i.kind===e)}getAudioDevices(){return this.getAvailableDevicesByKind("audioinput").sort((t,e)=>{const i=pa(t)?0:1;return(pa(e)?0:1)-i})}getVideoDevices(){return this.getAvailableDevicesByKind("videoinput").sort((t,e)=>{const i=pa(t)?0:1;return(pa(e)?0:1)-i})}getSpeakerDevices(){return this.getAvailableDevicesByKind("audiooutput").sort((t,e)=>{const i=pa(t)?0:1;return(pa(e)?0:1)-i})}},Ka=new WeakMap,uh=new WeakMap,MP);let Zt=oo;Ba([C.trace("LocalMediaUtils.onDeviceChange")],Zt.prototype,"onDeviceChange",1);Ba([C.trace("LocalMediaUtils.repopulateAvailableDevices")],Zt.prototype,"repopulateAvailableDevices",1);Ba([C.trace("LocalMediaUtils.isDeviceListAvailable")],Zt,"isDeviceListAvailable",1);Ba([C.trace("LocalMediaUtils.enumerateDevices")],Zt,"enumerateDevices",1);Ba([C.trace("LocalMediaUtils.getUserMediaWithTimeout")],Zt,"getUserMediaWithTimeout",1);Ba([C.trace("LocalMediaUtils.getAudioTrack")],Zt,"getAudioTrack",1);Ba([C.trace("LocalMediaUtils.getVideoTrack")],Zt,"getVideoTrack",1);Ba([C.trace("LocalMediaUtils.getScreenShareTracks")],Zt,"getScreenShareTracks",1);Ba([C.trace("LocalMediaUtils.getAudioAndVideoTrack")],Zt,"getAudioAndVideoTrack",1);const ga={setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(i){x.error("LocalStorage::setItem::crashed",{error:i,localStorage:{key:t,value:e}})}},getItem:t=>{try{return localStorage.getItem(t)}catch(e){x.error("LocalStorage::getItem::crashed",{error:e,localStorage:{key:t}})}return null}},Kle=(t=0)=>new Promise(e=>setTimeout(e,t)),Qle=(t,e,i)=>{const r=typeof i=="number"?i:250,s=t.createMediaStreamSource(e),n=t.createAnalyser();n.fftSize=2048,s.connect(n);const a=new Uint8Array(n.fftSize);let o=!1;setTimeout(()=>{o=!0},r);function c(){return o?Promise.resolve(!0):(n.getByteTimeDomainData(a),a.some(u=>u!==128&&u!==0)?Promise.resolve(!1):Kle().then(c))}return c().then(u=>(s.disconnect(),u),u=>{throw s.disconnect(),u})},Yle=typeof AudioContext<"u"?AudioContext:null;class WS{constructor(e){w(this,"_AudioContext"),w(this,"audioContext"),w(this,"_audioContextRefContainers");const i={AudioContext:Yle,...e};Object.defineProperties(this,{_AudioContext:{value:i.AudioContext},audioContext:{value:null,writable:!0},_audioContextRefContainers:{value:new Set},AudioContextProvider:{enumerable:!0,value:WS}})}getOrCreate(e){if(!this._audioContextRefContainers.has(e)&&(this._audioContextRefContainers.add(e),this._AudioContext&&!this.audioContext))try{this.audioContext=new this._AudioContext}catch{}return this.audioContext}release(e){this._audioContextRefContainers.has(e)&&(this._audioContextRefContainers.delete(e),!this._audioContextRefContainers.size&&this.audioContext&&(this.audioContext.close(),this.audioContext=null))}}const DP=new WS,Zle=3,Xle=250;function eue(t){const e={},i=DP.getOrCreate(e);let r=Zle;function s(){return r-=1,Qle(i,t.srcObject,Xle).then(n=>n?r>0?s():!0:!1).catch(()=>!0)}return s().finally(()=>{DP.release(e)})}async function mp(t){const e=new Audio,i=new MediaStream;i.addTrack(t),e.srcObject=i;let r=!1;try{const s=e.play();s&&await s,r=await eue(e),r&&x.info("checkIfAudioTrackIsSilent::silence_detected")}catch(s){x.error("checkIfAudioTrackIsSilent::failed_to_detect_silence",{error:s})}finally{e.pause(),e.remove()}return r}async function tue(t,e){if(!(t!=null&&t.length))return e;const i=new AudioContext,r=await Promise.all(t==null?void 0:t.map(a=>a(i))),s=i.createMediaStreamSource(new MediaStream([e])),n=i.createMediaStreamDestination();try{let a=s;for(let o=0;o<r.length;o+=1)a.connect(r[o]),a=r[o];a.connect(n)}catch(a){return x.error("getTransformedAudioTrack::middleware_execution_failed",{error:a}),e}return n.stream.getAudioTracks()[0]}var iue=Object.defineProperty,rue=Object.getOwnPropertyDescriptor,sue=(t,e,i,r)=>{for(var s=r>1?void 0:r?rue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&iue(e,i,s),s};let mk=class extends Mt{constructor(t,e,i){super(),w(this,"constructorName",this.constructor.name),w(this,"userSelectedDevice"),w(this,"mediaInterface"),w(this,"isNonPreferredDevice"),w(this,"_mediaTrack"),w(this,"transformedMediaTrack"),w(this,"middlewares",[]),w(this,"currentDevice"),this.mediaInterface=t,e&&this.setMediaTrack(e),this.userSelectedDevice=void 0,this.isNonPreferredDevice=i,this.onTrackEnded=this.onTrackEnded.bind(this),this.onTrackMuted=this.onTrackMuted.bind(this)}disableTrack(){var t,e;this.removeMediaTrackListeners(),(t=this._mediaTrack)==null||t.stop(),this._mediaTrack=void 0,(e=this.transformedMediaTrack)==null||e.stop(),this.transformedMediaTrack=void 0}get mediaTrack(){return this._mediaTrack}async setMediaTrack(t){const e=i=>{x.error(`${this.constructorName}.setMediaTrack.error`,{error:i})};try{this.disableTrack()}catch(i){e(i)}this._mediaTrack=await this.conditionallyChangeTrack(t),await this.setTransformedTrack();try{this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(i){e(i)}}get trackEnabled(){return!!this.mediaTrack&&this.mediaTrack.readyState==="live"&&this.mediaTrack.enabled}muteTrack(){if(!this.mediaTrack){x.warn("BaseMediaHandler.muteTrack Tried muting with no track present");return}this.transformedMediaTrack&&(this.transformedMediaTrack.enabled=!1),this.mediaTrack.enabled=!1}async unmuteTrack(){try{this.mediaTrack?this.mediaTrack.enabled=!0:await this.enableTrack(!1)}catch(t){throw x.error(`${this.constructorName}.unmuteTrack.error`,{error:t}),this.disableTrack(),new U("Failed to unmute track")}}async setCurrentDevice(){var t;if(!this.mediaTrack){this.currentDevice=void 0;return}((t=this.currentDevice)==null?void 0:t.deviceId)!==this.mediaTrack.getSettings().deviceId&&(this.currentDevice=await this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId))}async addMiddleware(t){if(Ze.isSafari())return{success:!1,message:"Middlewares are not yet supported in Safari."};if(this.middlewares.includes(t))return{success:!1,message:"This middleware has been applied, already. Skipping."};try{return this.trackEnabled&&await this.setTransformedTrack(),this.middlewares.push(t),{success:!0,message:"Successfully added the middleware."}}catch(e){return x.error("While adding middleware",{error:e}),{success:!1,message:e==null?void 0:e.message}}}async removeMiddleware(t){const e=this.middlewares.indexOf(t,0);if(e>-1)try{return await this.setTransformedTrack(),this.middlewares.splice(e,1),{success:!0,message:"Successfully removed the middleware."}}catch(i){return x.error("While removing middleware",{error:i}),{success:!1,message:i==null?void 0:i.message}}return{success:!1,message:"No such middleware was found. Skipping."}}addMediaTrackListeners(){var t,e,i;this.mediaTrack&&(x.info(`${this.constructorName}.addMediaTrackListeners for deviceId ${(e=(t=this.mediaTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),this.mediaTrack.addEventListener("ended",this.onTrackEnded),this.mediaTrack.addEventListener("mute",this.onTrackMuted))}removeMediaTrackListeners(){var t,e,i;this.mediaTrack&&(x.info(`${this.constructorName}.removeMediaTrackListeners for deviceId ${(e=(t=this.mediaTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),x.info(`${this.constructorName}.removeMediaTrackListeners`),this.mediaTrack.removeEventListener("ended",this.onTrackEnded),this.mediaTrack.removeEventListener("mute",this.onTrackMuted))}};mk=sue([Hi(t=>{throw new U(t.message,"1600")})],mk);const IO=mk;var nue=Object.defineProperty,aue=Object.getOwnPropertyDescriptor,GS=(t,e,i,r)=>{for(var s=r>1?void 0:r?aue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&nue(e,i,s),s};const Yb="[Dyte]nonSilentDeviceLabels";class Qy extends IO{async setDevice(e){if(!e)throw x.warn("AudioMediaHandler.setDevice No device received"),new U("No device received!","1603");if(e.kind!=="audioinput")throw x.warn("AudioMediaHandler.setDevice Received non audio device"),new U("Non audio device received while setting device!","1603");try{const i=this.trackEnabled;this.userSelectedDevice=e.deviceId,await this.setMediaTrack(await this.mediaInterface.getAudioTrack(!i,e.deviceId))}catch(i){throw x.error("AudioMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new U(i.message,"1604")}}async enableTrack(e){if(this.trackEnabled){x.warn("AudioMediaHandler.enableTrack Track already enabled!");return}const i=await this.mediaInterface.getAudioTrack(e,this.userSelectedDevice);await this.setMediaTrack(i)}async setTransformedTrack(){var e;if(!((e=this.middlewares)!=null&&e.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await tue(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){x.error("AudioMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async onTrackEnded(){x.info("AudioMediaHandler.TrackEnded"),this.emit("trackEnded");const e=this.mediaTrack.enabled;this.disableTrack(),await this.enableTrack(!e),await this.setTransformedTrack(),this.emit("trackChanged")}onTrackMuted(){x.info("AudioMediaHandler.TrackMuted"),this.emit("trackMuted")}async conditionallyChangeTrack(e){var i;if(!e||this.userSelectedDevice)return e;let r=e;const s=await this.mediaInterface.getAudioInputDevices(),n=this.isNonPreferredDevice?s.filter(c=>c&&!this.isNonPreferredDevice(c)):s;if(!(n!=null&&n.length))return r;n.find(c=>c.deviceId===e.getSettings().deviceId)||(r.stop(),x.info("localmediahandler::setupstreams::found_audio_non_preferred"),r=await this.mediaInterface.getAudioTrack(!1,n[0].deviceId));const a=JSON.parse(ga.getItem(Yb));if(a!=null&&a.devices.some(c=>c.label===r.label))return r;if(!await mp(r)){const c=(i=a==null?void 0:a.devices.concat({label:r.label}))!=null?i:[{label:r.label}];return ga.setItem(Yb,JSON.stringify({devices:c})),r}x.info("AudioMediaHandler.conditionallyChangeTrack.DetectedSilentTrack");const o=r.getSettings().deviceId;return n.filter(c=>c.deviceId!==o).some(async c=>{if(r=await this.mediaInterface.getAudioTrack(!1,c.deviceId),!await mp(r)){const u=a.devices.concat({label:r.label});return ga.setItem(Yb,JSON.stringify({devices:u})),x.info("AudioMediaHandler.conditionallyChangeTrack.SuccesfullyChangedTrack"),!0}return x.info("AudioMediaHandler.conditionallyChangeTrack.AnotherSilentTrackFound"),!1}),r}}GS([C.trace("AudioMediaHandler.setTransformedTrack")],Qy.prototype,"setTransformedTrack",1);GS([C.trace("AudioMediaHandler.onTrackEnded")],Qy.prototype,"onTrackEnded",1);GS([C.trace("AudioMediaHandler.conditionallyChangeTrack")],Qy.prototype,"conditionallyChangeTrack",1);function Yy(t,e,i){if(Ze.isChromiumBased()){if(e==="NotAllowedError")return i.indexOf("by system")>0?"SYSTEM_DENIED":t==="screenshare"?"CANCELED":"DENIED";if(e==="NotReadableError")return"COULD_NOT_START"}else if(Ze.isSafari()){if(e==="NotAllowedError")return"DENIED"}else if(Ze.isFirefox()){if(e==="NotFoundError"||e==="NotReadableError")return"SYSTEM_DENIED";if(e==="NotAllowedError")return"DENIED";if(e==="AbortError")return"COULD_NOT_START"}return"COULD_NOT_START"}function Zb(t){return t===2 .toString()?Po.DENIED:t===4 .toString()?Po.SYS_DENIED:t===1 .toString()?Po.ACCEPTED:Po.FAILED}class oue{constructor(){w(this,"permissions"),this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"}}async getAudioInputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="audioinput")}async getVideoInputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="videoinput")}async getAudioOutputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="audiooutput")}}var cue=Object.defineProperty,due=Object.getOwnPropertyDescriptor,vn=(t,e,i,r)=>{for(var s=r>1?void 0:r?due(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&cue(e,i,s),s},Sm,hh,ra,OP;let gs=(OP=class extends oue{constructor(t){super(),N(this,Sm,void 0),N(this,hh,void 0),N(this,ra,void 0),L(this,ra,new qD(t)),L(this,hh,new AbortController),this.getAvailableDevices()}get constraintsBuilder(){return h(this,ra)}async destruct(){var t;(t=h(this,hh))==null||t.abort()}handlePermissionErrors(t,e){const i=Yy(t,e.name,e.message);this.permissions[t]=i,R.emit(P.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:t})}async getAudioAndVideoTrack(){const t={audio:h(this,ra).getAudioConstraints().audio,video:h(this,ra).getVideoConstraints().video};try{const e=await navigator.mediaDevices.getUserMedia(t),i=e.getAudioTracks()[0];let r=e.getVideoTracks()[0];if(this.permissions.audio="ACCEPTED",this.permissions.video="ACCEPTED",ge.hasFeature(me.OBS_QUALITY)&&r.label.includes("OBS Virtual")){const s=(await this.getVideoInputDevices()).find(n=>n.label.includes("OBS Virtual"));r=await this.getVideoTrack(s.deviceId)}return R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),{audioTrack:i,videoTrack:r}}catch(e){throw x.error("WebMediaInterface.getAudioAndVideoTrack",{error:e}),new U("Couldnt fetch audio and video track")}}async getAudioTrack(t,e){const i=h(this,ra).getAudioConstraints(e);try{const r=(await navigator.mediaDevices.getUserMedia(i)).getAudioTracks()[0];return r.enabled=!t,this.permissions.audio="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),r}catch(r){throw this.handlePermissionErrors("audio",new ya(r.name,r.message,i)),new U(r.message,"1601")}}async getScreenShareTracks(){const t=h(this,ra).getScreenShareConstraints();try{const e=await navigator.mediaDevices.getDisplayMedia(t);return this.permissions.screenshare="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"}),{audioTrack:e.getAudioTracks()[0],videoTrack:e.getVideoTracks()[0]}}catch(e){throw this.handlePermissionErrors("screenshare",new ya(e.name,e.message,t)),x.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks",{error:e}),new U("Couldnt fetch screen share tracks")}}async getCurrentDeviceLabel(t){const e=await this.getDevice(t||"default");return e==null?void 0:e.label}async getVideoTrack(t){const e=ge.hasFeature(me.OBS_QUALITY),i=await this.getCurrentDeviceLabel(t),r=i&&i.includes("OBS Virtual"),{video:s}=h(this,ra).getVideoConstraints(t);let n={};e&&r&&typeof s!="boolean"?n={deviceId:s.deviceId}:n=s;try{const a=(await navigator.mediaDevices.getUserMedia({video:n})).getVideoTracks()[0];if(e&&r&&typeof s!="boolean"&&typeof s.width=="object"){const{width:o,height:c}=a.getSettings(),{ideal:u}=s.width;a.applyConstraints({width:{ideal:u},height:{ideal:Math.floor(c*u/o)},frameRate:s.frameRate})}return this.permissions.video="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),a}catch(a){throw this.handlePermissionErrors("video",new ya(a.name,a.message,n)),x.error("WebMediaInterface.getVideoTrack Error while fetching video track",{error:a}),new U("Couldnt fetch video track")}}async getAvailableDevices(){try{const t=await navigator.mediaDevices.enumerateDevices();return L(this,Sm,t),t}catch(t){throw x.error("enumerate_devices_failed",{error:t}),new U("Failed to get available devices")}}async getAvailableDevicesByKind(t){try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:e})=>t===e)}catch(e){throw x.error("enumerate_devices_failed",{error:e}),new U("Failed to get available devices by kind")}}async getDevice(t){try{return(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.deviceId===t)[0]}catch(e){throw x.error("enumerate_devices_failed",{error:e}),new U("Failed to get device")}}onDeviceChange(t){Ze.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",US(async e=>{const i=h(this,Sm),r=new Set(i.map(o=>o.deviceId)),s=await this.getAvailableDevices(),n=new Set(s.map(o=>o.deviceId)),a={added:s.filter(o=>!r.has(o.deviceId)),removed:i.filter(o=>!n.has(o.deviceId))};t(e,a)},100),{signal:h(this,hh).signal})}},Sm=new WeakMap,hh=new WeakMap,ra=new WeakMap,OP);vn([C.trace("WebMediaInterface.destruct")],gs.prototype,"destruct",1);vn([C.trace("WebMediaInterface.handlePermissionErrors")],gs.prototype,"handlePermissionErrors",1);vn([C.trace("WebMediaInterface.getAudioAndVideoTrack")],gs.prototype,"getAudioAndVideoTrack",1);vn([C.trace("WebMediaInterface.getAudioTrack")],gs.prototype,"getAudioTrack",1);vn([C.trace("WebMediaInterface.getScreenShareTracks")],gs.prototype,"getScreenShareTracks",1);vn([C.trace("WebMediaInterface.getVideoTrack")],gs.prototype,"getVideoTrack",1);vn([C.trace("WebMediaInterface.getAvailableDevices")],gs.prototype,"getAvailableDevices",1);vn([C.trace("WebMediaInterface.getAvailableDevicesByKind")],gs.prototype,"getAvailableDevicesByKind",1);vn([C.trace("WebMediaInterface.getDevice")],gs.prototype,"getDevice",1);vn([C.trace("WebMediaInterface.onDeviceChange")],gs.prototype,"onDeviceChange",1);gs=vn([Hi(t=>{throw new U(t.message,"1600")})],gs);const AO=gs;var Uh;class lue{constructor(e){N(this,Uh,void 0),w(this,"currentDevice"),L(this,Uh,e)}async setupSpeaker(e){var i;if(!(h(this,Uh)instanceof AO))return;let r=e;if(e||([r]=await h(this,Uh).getAvailableDevicesByKind("audiooutput")),!r)throw new U("No speaker found");((i=this.currentDevice)==null?void 0:i.deviceId)!==r.deviceId&&(this.currentDevice!=null||(this.currentDevice=r),document.querySelectorAll("audio").forEach(async s=>{if(typeof s.sinkId<"u"&&this.currentDevice.deviceId&&s.sinkId!==this.currentDevice.deviceId)try{await s.setSinkId(this.currentDevice.deviceId)}catch{}}))}}Uh=new WeakMap;class uue extends Mt{constructor(e){super(),w(this,"mediaInterface"),w(this,"audioMediaTrack"),w(this,"videoMediaTrack"),this.mediaInterface=e}get trackEnabled(){return!!this.videoMediaTrack}async enableScreenShare(){var e,i;const{audioTrack:r,videoTrack:s}=await this.mediaInterface.getScreenShareTracks();this.audioMediaTrack=r,this.videoMediaTrack=s,this.addMediaTrackListeners(),((i=(e=this.mediaInterface)==null?void 0:e.permissions)==null?void 0:i.screenshare)!=="ACCEPTED"&&this.mediaInterface.permissions&&(this.mediaInterface.permissions.screenshare="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.mediaInterface.permissions.screenshare,kind:"screenshare"}))}disableScreenShare(){var e,i;this.removeMediaTrackListeners(),(e=this.audioMediaTrack)==null||e.stop(),(i=this.videoMediaTrack)==null||i.stop(),this.videoMediaTrack=void 0,this.audioMediaTrack=void 0}async updateConstraints(e){if(!this.videoMediaTrack)throw new U("No media track enabled!");const i=this.mediaInterface;if(!i.constraintsBuilder)throw new U("update constraints not supported for non web clients","1100");try{this.videoMediaTrack.applyConstraints(i.constraintsBuilder.getUpdatedVideoConstraints(e)),this.addMediaTrackListeners()}catch(r){x.error("ScreenShareHandler.updateConstraints.error",{error:r})}}addMediaTrackListeners(){var e;(e=this.videoMediaTrack)==null||e.addEventListener("ended",this.onTrackEnded.bind(this))}removeMediaTrackListeners(){var e;(e=this.videoMediaTrack)==null||e.removeEventListener("ended",this.onTrackEnded)}onTrackEnded(){this.emit("trackEnded")}}var dl;class hue{constructor(){N(this,dl,void 0)}terminateMiddlewareWebWorker(){if(h(this,dl))try{BM(h(this,dl)),L(this,dl,void 0)}catch{x.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(e,i){if(!(e!=null&&e.length))return i;const r=await Promise.all(e==null?void 0:e.map(u=>u())),s=new MediaStream;s.addTrack(i);const n=document.createElement("canvas"),a=n.getContext("2d"),o=document.createElement("video");o.srcObject=s,o.autoplay=!0,this.terminateMiddlewareWebWorker();const c=async()=>{if(i.enabled===!1||i.readyState==="ended"){this.terminateMiddlewareWebWorker(),o.remove(),n.remove();return}try{a.drawImage(o,0,0);for(let u=0;u<r.length;u+=1)await r[u](n,a)}catch(u){x.error("getTransformedVideoTrack::middleware_execution_failed",{error:u})}};try{o.play()}catch{}return o.addEventListener("play",()=>{n.width=o.width||i.getSettings().width,n.height=o.width||i.getSettings().height,L(this,dl,HM(c,50))},!1),n.captureStream().getVideoTracks()[0]}}dl=new WeakMap;var pue=Object.defineProperty,gue=Object.getOwnPropertyDescriptor,qS=(t,e,i,r)=>{for(var s=r>1?void 0:r?gue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&pue(e,i,s),s},jh;class Zy extends IO{constructor(e,i,r){super(e,i,r),N(this,jh,void 0),L(this,jh,new hue)}async setDevice(e){if(!e)throw x.warn("VideoMediaHandler.setDevice No device received"),new U("No device received!");if(e.kind!=="videoinput")throw x.warn("VideoMediaHandler.setDevice Received non video device",{devices:[e]}),new U("Non video device received while setting video device!");if(this.userSelectedDevice=e.deviceId,!(this.mediaTrack&&this.mediaTrack.enabled)){x.warn("VideoMediaHandler.setDevice Tried switching device with video disabled",{devices:[e]}),this.currentDevice=e;return}try{await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}catch(i){throw x.error("VideoMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new U("Failed to change device")}}async enableTrack(){if(this.trackEnabled){x.warn("VideoMediaHandler.enableTrack Track already enabled!");return}await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}async setTransformedTrack(){var e;if(!((e=this.middlewares)!=null&&e.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await h(this,jh).getTransformedVideoTrack(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){x.error("VideoMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async updateConstraints(e){if(!this._mediaTrack)throw new U("No media track enabled!");const i=this.mediaInterface;if(!i.constraintsBuilder)throw new U("update constraints not supported for non web clients","1100");try{this._mediaTrack.applyConstraints(i.constraintsBuilder.getUpdatedVideoConstraints(e)),await this.setTransformedTrack(),this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(r){x.error("VideoMediaHandler.updateConstraints.error",{error:r})}}terminateMiddlewareWebWorker(){h(this,jh).terminateMiddlewareWebWorker()}async onTrackEnded(){x.info("VideoMediaHandler.TrackEnded"),this.disableTrack(),this.emit("trackEnded")}onTrackMuted(){x.info("VideoMediaHandler.TrackMuted"),this.emit("trackMuted")}async conditionallyChangeTrack(e){if(!e||this.userSelectedDevice)return e;let i=e;const r=await this.mediaInterface.getVideoInputDevices(),s=this.isNonPreferredDevice?r.filter(n=>!this.isNonPreferredDevice(n)):r;return s!=null&&s.length&&(s.find(n=>n.deviceId===e.getSettings().deviceId)||(i.stop(),x.info("localmediahandler::setupstreams::found_video_non_preferred"),i=await this.mediaInterface.getVideoTrack(s[0].deviceId))),i}}jh=new WeakMap;qS([C.trace("VideoMediaHandler.setTransformedTrack")],Zy.prototype,"setTransformedTrack",1);qS([C.trace("VideoMediaHandler.onTrackEnded")],Zy.prototype,"onTrackEnded",1);qS([C.trace("VideoMediaHandler.conditionallyChangeTrack")],Zy.prototype,"conditionallyChangeTrack",1);var mue=Object.defineProperty,fue=Object.getOwnPropertyDescriptor,vs=(t,e,i,r)=>{for(var s=r>1?void 0:r?fue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&mue(e,i,s),s},Wi,lr,Gi,Cc,Ws,wf;class Qr extends Mt{constructor(e,i=pa,r=!0){super(),N(this,Wi,void 0),N(this,lr,void 0),N(this,Gi,void 0),N(this,Cc,void 0),N(this,Ws,void 0),N(this,wf,void 0),L(this,Wi,new AO(e)),L(this,lr,new Qy(h(this,Wi),void 0,i)),L(this,Gi,new Zy(h(this,Wi),void 0,i)),L(this,Ws,new uue(h(this,Wi))),L(this,Cc,new lue(h(this,Wi))),L(this,wf,r),h(this,lr).on("trackMuted",this.onAudioTrackMuted.bind(this)),h(this,lr).on("trackChanged",this.onAudioTrackChanged.bind(this)),h(this,Gi).on("trackChanged",this.onVideoTrackChanged.bind(this)),h(this,Gi).on("trackEnded",this.onVideoTrackEnded.bind(this)),h(this,Ws).on("trackEnded",this.onScreenShareEnded.bind(this))}async repopulateAvailableDevices(){return!0}async setupStreams({audio:e,video:i}){let r,s;if(e&&i)try{const n=await h(this,Wi).getAudioAndVideoTrack();r=n.audioTrack,s=n.videoTrack}catch(n){x.error("LocalMediaHandler::init::Failed to get audio video tracks",{error:n})}if(!r&&e)try{r=await h(this,Wi).getAudioTrack(!1)}catch(n){x.error("LocalMediaHandler::init::Failed to get audio track",{error:n})}if(!s&&i)try{s=await h(this,Wi).getVideoTrack()}catch(n){x.error("LocalMediaHandler::init::Failed to get video track",{error:n})}await h(this,lr).setMediaTrack(r),await h(this,Gi).setMediaTrack(s);try{await h(this,Cc).setupSpeaker()}catch{}h(this,Wi).onDeviceChange((n,a)=>{this.onDeviceChange(a)})}getCurrentDevices(){return{audio:h(this,lr).currentDevice,video:h(this,Gi).currentDevice,speaker:h(this,Cc).currentDevice}}get permissions(){return h(this,Wi).permissions}getAllDevices(){return h(this,Wi).getAvailableDevices()}getDeviceById(e,i){return h(this,Wi).getDevice(e)}onAudioTrackMuted(){this.emit("AUDIO_TRACK_SILENT")}onAudioTrackChanged(){this.emit("AUDIO_TRACK_CHANGE")}get rawAudioTrack(){return h(this,lr).mediaTrack}get audioTrack(){return h(this,lr).transformedMediaTrack}get audioEnabled(){return h(this,lr).trackEnabled}async enableAudio(){await h(this,lr).unmuteTrack()}disableAudio(){h(this,lr).muteTrack()}getAudioDevices(){return h(this,Wi).getAudioInputDevices()}async setAudioDevice(e){await h(this,lr).setDevice(e),this.emit("AUDIO_TRACK_CHANGE"),this.emit("DEVICE_CHANGE",{device:e})}setupSpeaker(){return h(this,Cc).setupSpeaker()}async setSpeakerDevice(e){await h(this,Cc).setupSpeaker(e),this.emit("DEVICE_CHANGE",{device:e})}onVideoTrackChanged(){this.emit("VIDEO_TRACK_CHANGE")}onVideoTrackEnded(){this.emit("VIDEO_TRACK_CHANGE")}get rawVideoTrack(){return h(this,Gi).mediaTrack}get videoTrack(){return h(this,Gi).transformedMediaTrack}get videoEnabled(){return h(this,Gi).trackEnabled}async enableVideo(){await h(this,Gi).unmuteTrack()}disableVideo(){h(this,Gi).disableTrack()}getVideoDevices(){return h(this,Wi).getVideoInputDevices()}async setVideoDevice(e){await h(this,Gi).setDevice(e),this.emit("VIDEO_TRACK_CHANGE"),this.emit("DEVICE_CHANGE",{device:e})}async updateVideoConstraints(e){await h(this,Gi).updateConstraints(e)}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}get screenShareTracks(){return{audio:h(this,Ws).audioMediaTrack,video:h(this,Ws).videoMediaTrack}}get screenShareEnabled(){return h(this,Ws).trackEnabled}async enableScreenShare(){await h(this,Ws).enableScreenShare()}async disableScreenShare(){h(this,Ws).disableScreenShare()}async updateScreenshareConstraints(e){await h(this,Ws).updateConstraints(e)}getSpeakerDevices(){return h(this,Wi).getAudioOutputDevices()}addAudioMiddleware(e){return h(this,lr).addMiddleware(e)}removeAudioMiddleware(e){return h(this,lr).removeMiddleware(e)}addVideoMiddleware(e){return h(this,Gi).addMiddleware(e)}removeVideoMiddleware(e){return h(this,Gi).removeMiddleware(e)}destruct(){h(this,lr).disableTrack(),h(this,Gi).disableTrack(),h(this,Gi).terminateMiddlewareWebWorker(),h(this,Ws).disableScreenShare(),h(this,Wi).destruct()}async onDeviceChange(e){var i;(i=e==null?void 0:e.added)==null||i.forEach(async r=>{var s;if(r&&!pa(r)){if(!h(this,wf)){this.emit("DEVICE_LIST_UPDATED",e);return}r.kind==="audioinput"&&((s=this.audioTrack)==null?void 0:s.enabled)===!0?await this.setAudioDevice(r):r.kind==="audiooutput"&&await this.setSpeakerDevice(r)}})}removeAllTracks(){this.destruct()}async removeDocumentEventListeners(){}}Wi=new WeakMap,lr=new WeakMap,Gi=new WeakMap,Cc=new WeakMap,Ws=new WeakMap,wf=new WeakMap;vs([C.trace("MediaHandler.setupStreams")],Qr.prototype,"setupStreams",1);vs([C.trace("MediaHandler.enableAudio")],Qr.prototype,"enableAudio",1);vs([C.trace("MediaHandler.disableAudio")],Qr.prototype,"disableAudio",1);vs([C.trace("MediaHandler.setAudioDevice")],Qr.prototype,"setAudioDevice",1);vs([C.trace("MediaHandler.enableVideo")],Qr.prototype,"enableVideo",1);vs([C.trace("MediaHandler.disableVideo")],Qr.prototype,"disableVideo",1);vs([C.trace("MediaHandler.setVideoDevice")],Qr.prototype,"setVideoDevice",1);vs([C.trace("MediaHandler.updateVideoConstraints")],Qr.prototype,"updateVideoConstraints",1);vs([C.trace("MediaHandler.enableScreenShare")],Qr.prototype,"enableScreenShare",1);vs([C.trace("MediaHandler.disableScreenShare")],Qr.prototype,"disableScreenShare",1);vs([C.trace("MediaHandler.updateScreenshareConstraints")],Qr.prototype,"updateScreenshareConstraints",1);vs([C.trace("MediaHandler.destruct")],Qr.prototype,"destruct",1);vs([C.trace("MediaHandler.onDeviceChange")],Qr.prototype,"onDeviceChange",1);var vue=Object.defineProperty,yue=Object.getOwnPropertyDescriptor,Cu=(t,e,i,r)=>{for(var s=r>1?void 0:r?yue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&vue(e,i,s),s},Si,ll;class Ad{constructor(e){N(this,Si,void 0),w(this,"audioMiddlewares",[]),w(this,"videoMiddlewares",[]),N(this,ll,void 0),L(this,Si,e)}terminateMiddlewareWebWorker(){if(h(this,ll))try{BM(h(this,ll)),L(this,ll,void 0)}catch{x.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(e){var i,r;if(!((i=this.videoMiddlewares)!=null&&i.length))return e;const s=await Promise.all((r=this.videoMiddlewares)==null?void 0:r.map(l=>l())),n=new MediaStream;n.addTrack(e);const a=document.createElement("canvas"),o=a.getContext("2d"),c=document.createElement("video");c.srcObject=n,c.autoplay=!0,this.terminateMiddlewareWebWorker();const u=async()=>{if(!h(this,Si).videoEnabled||e.readyState==="ended"){this.terminateMiddlewareWebWorker(),c.remove(),a.remove();return}try{o.drawImage(c,0,0);for(let l=0;l<s.length;l+=1)await s[l](a,o)}catch(l){x.error("getTransformedVideoTrack::middleware_execution_failed",{error:l})}};try{c.play()}catch{}return c.addEventListener("play",()=>{a.width=c.width||e.getSettings().width,a.height=c.width||e.getSettings().height,L(this,ll,HM(u,50))},!1),a.captureStream().getVideoTracks()[0]}async addVideoMiddleware(e){return Ze.isSafari()?{success:!1,message:"Video middlewares are not yet supported in Safari."}:this.videoMiddlewares.includes(e)?{success:!0,message:"This video middleware has been applied, already. Skipping."}:(this.videoMiddlewares.push(e),h(this,Si).videoEnabled?(h(this,Si).setVideoTrack(await this.getTransformedVideoTrack(h(this,Si).rawVideoTrack)),h(this,Si).emit("VIDEO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the video middleware."}):{success:!0,message:"Successfully added the video middleware. It will be applied automatically once webcam is turned on."})}async removeVideoMiddleware(e){const i=this.videoMiddlewares.indexOf(e,0);return i>-1?(this.videoMiddlewares.splice(i,1),h(this,Si).videoEnabled&&(h(this,Si).setVideoTrack(await this.getTransformedVideoTrack(h(this,Si).rawVideoTrack)),h(this,Si).emit("VIDEO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the video middleware."}):{success:!0,message:"No such video middleware was found. Skipping."}}async getTransformedAudioTrack(e){var i,r;if(!((i=this.audioMiddlewares)!=null&&i.length))return e;const s=new AudioContext,n=await Promise.all((r=this.audioMiddlewares)==null?void 0:r.map(c=>c(s))),a=s.createMediaStreamSource(new MediaStream([e])),o=s.createMediaStreamDestination();try{let c=a;for(let u=0;u<n.length;u+=1)c.connect(n[u]),c=n[u];c.connect(o)}catch(c){return x.error("getTransformedAudioTrack::middleware_execution_failed",{error:c}),e}return o.stream.getAudioTracks()[0]}async addAudioMiddleware(e){return Ze.isSafari()?{success:!1,message:"Audio middlewares are not yet supported in Safari."}:this.audioMiddlewares.includes(e)?{success:!0,message:"This audio middleware has been applied, already. Skipping."}:(this.audioMiddlewares.push(e),h(this,Si).audioEnabled?(h(this,Si).setAudioTrack(await this.getTransformedAudioTrack(h(this,Si).rawAudioTrack)),h(this,Si).emit("AUDIO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the audio middleware."}):{success:!0,message:"Successfully added the audio middleware. It will be applied automatically once mic is turned on."})}async removeAudioMiddleware(e){const i=this.audioMiddlewares.indexOf(e,0);return i>-1?(this.audioMiddlewares.splice(i,1),h(this,Si).audioEnabled&&(h(this,Si).setAudioTrack(await this.getTransformedAudioTrack(h(this,Si).rawAudioTrack)),h(this,Si).emit("AUDIO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the audio middleware."}):{success:!0,message:"No such audio middleware was found. Skipping."}}}Si=new WeakMap,ll=new WeakMap;Cu([C.trace("MediaMiddlewareUtils.getTransformedVideoTrack")],Ad.prototype,"getTransformedVideoTrack",1);Cu([C.trace("MediaMiddlewareUtils.addVideoMiddleware")],Ad.prototype,"addVideoMiddleware",1);Cu([C.trace("MediaMiddlewareUtils.removeVideoMiddleware")],Ad.prototype,"removeVideoMiddleware",1);Cu([C.trace("MediaMiddlewareUtils.getTransformedAudioTrack")],Ad.prototype,"getTransformedAudioTrack",1);Cu([C.trace("MediaMiddlewareUtils.addAudioMiddleware")],Ad.prototype,"addAudioMiddleware",1);Cu([C.trace("MediaMiddlewareUtils.removeAudioMiddleware")],Ad.prototype,"removeAudioMiddleware",1);const $h=class{constructor(){w(this,"mediaPermissionEvent"),this.mediaPermissionEvent=!0}static getInstance(){return $h.instance||($h.instance=new $h),$h.instance}get shouldEmitMediaPermissionEvent(){return this.mediaPermissionEvent}setEmitMediaPermissionEvent(t){this.mediaPermissionEvent=t}};let MO=$h;w(MO,"instance");const xm=MO.getInstance(),bue={lowVolumeThreshold:-40,clipThreshold:1,silentThreshold:1/1987,delay:500,media:"audio"};var Gv,Ll,fk,DO,kf,Xb;const OO=class{constructor(t){N(this,fk),N(this,kf),w(this,"analyser"),w(this,"silentThreshold"),w(this,"lowVolumeThreshold"),w(this,"clipThreshold"),w(this,"delay"),w(this,"audioContext"),w(this,"audioSource"),w(this,"metadata",{}),w(this,"analysing"),w(this,"track"),N(this,Gv,void 0),N(this,Ll,void 0);const{lowVolumeThreshold:e,silentThreshold:i,clipThreshold:r,delay:s,media:n}={...bue,...t};this.lowVolumeThreshold=e,this.silentThreshold=i,this.clipThreshold=r,this.delay=s,this.analysing=!1,L(this,Ll,n)}setTrack(t){if(!t)return;this.track=t.clone();const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.analyser=this.audioContext.createAnalyser(),h(this,Ll)==="screenshare"){R.emit(P.SCREENSHARE_AUDIO_TRACK_CREATED);return}R.emit(P.AUDIO_TRACK_CREATED)}getTrackMetadata(){if(!this.track)return null;switch(this.metadata.label=this.track.label,this.metadata.channelCountMode=this.analyser.channelCountMode,this.metadata.channelCount=this.analyser.channelCount,this.metadata.channelInterpretation=this.analyser.channelInterpretation,this.metadata.outputs=this.analyser.numberOfOutputs,this.analyser.numberOfOutputs){case 1:this.metadata.channelType="MONO";break;case 2:this.metadata.channelType="STEREO";break;case 4:this.metadata.channelType="QUAD";break}return this.metadata}async startTrackAnalysis(){if(!this.track||this.analysing)return!1;try{return await this.audioContext.resume(),await qe(this,fk,DO).call(this),this.analysing=!0,!0}catch(t){return x.error(t),!1}}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,Gv)))}cleanup(){var t,e,i,r,s;if(this.stopTrackAnalysis(),(t=this.analyser)==null||t.disconnect(),(e=this.audioSource)==null||e.disconnect(this.analyser),(i=this.audioSource)==null||i.disconnect(),(r=this.audioContext)==null||r.close(),this.audioContext=void 0,this.analyser=void 0,this.audioSource=void 0,(s=this.track)==null||s.stop(),this.track=void 0,h(this,Ll)==="screenshare"){R.emit(P.SCREENSHARE_AUDIO_TRACK_CLOSED);return}R.emit(P.AUDIO_TRACK_CLOSED)}static dbFS(t){const e=20*(Math.log(t)/Math.log(10));return Math.round(e*10)/10}};let LO=OO;Gv=new WeakMap,Ll=new WeakMap,fk=new WeakSet,DO=async function(){try{const t=new MediaStream;t.addTrack(this.track),this.audioSource=this.audioContext.createMediaStreamSource(t),this.audioSource.connect(this.analyser),await new Promise(e=>{window.requestAnimationFrame(()=>{qe(this,kf,Xb).call(this),e(!0)})})}catch(t){x.error(t)}},kf=new WeakSet,Xb=function(){const t=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData(t);let e=0;for(const n of t)e+=n*n;const i=Math.sqrt(e/t.length),r=OO.dbFS(i),s={volume:i,lowVolume:r<this.lowVolumeThreshold,silence:i<this.silentThreshold,clip:i>this.clipThreshold,timestamp:new Date().getTime()};h(this,Ll)==="screenshare"?R.emit(P.SCREENSHARE_AUDIO_TRACK_ANALYSIS,s):R.emit(P.AUDIO_TRACK_ANALYSIS,s),L(this,Gv,setTimeout(()=>{window.requestAnimationFrame(qe(this,kf,Xb).bind(this))},this.delay))};const On=new LO,ad=new LO({media:"screenshare"});var wue=Object.defineProperty,kue=Object.getOwnPropertyDescriptor,Dt=(t,e,i,r)=>{for(var s=r>1?void 0:r?kue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&wue(e,i,s),s},gt,uc,LP;const NO=(LP=class extends Er.EventEmitter{constructor(t,e){super(),N(this,gt,void 0),N(this,uc,void 0),w(this,"mediaMiddlewareUtils"),w(this,"audioTrack"),w(this,"rawAudioTrack"),w(this,"videoTrack"),w(this,"rawVideoTrack"),w(this,"screenShareTracks"),w(this,"audioEnabled"),w(this,"videoEnabled"),w(this,"screenShareEnabled"),w(this,"currentDevices"),w(this,"permissions"),w(this,"audioUpdateInProgress"),w(this,"videoUpdateInProgress"),w(this,"audioRestartInProgress"),w(this,"videoRestartInProgress"),w(this,"screenShareUpdateInProgress"),w(this,"initialSetupComplete",!1),w(this,"isDeprecated",()=>!0),L(this,gt,t),L(this,uc,new qD(e)),this.audioEnabled=!0,this.videoEnabled=!0,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.audioRestartInProgress=!1,this.videoRestartInProgress=!1,this.screenShareUpdateInProgress=!1,this.screenShareEnabled=!1,this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"},this.screenShareTracks={audio:void 0,video:void 0},this.currentDevices={audio:void 0,video:void 0,speaker:void 0},h(this,gt).onDeviceChange((i,r)=>{this.onDeviceChange(r,!1),this.emit("DEVICE_LIST_UPDATED",r)}),this.conditionallyRestartAudio=this.conditionallyRestartAudio.bind(this),this.conditionallyRestartVideo=this.conditionallyRestartVideo.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange),this.on("AUDIO_TRACK_CHANGE",()=>{this.notifyIfTrackSilent()}),R.on(P.PRODUCER_TRACK_ENDED,({kind:i})=>{i==="mic"&&this.conditionallyRestartAudio(),i==="webcam"&&this.conditionallyRestartVideo()})}handlePermissionErrors(t,e){const i=Yy(t,e.name,e.message);this.permissions[t]=i,R.emit(P.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:t})}async repopulateAvailableDevices(){return h(this,gt).repopulateAvailableDevices()}onVisibilityChange(t){document.visibilityState==="visible"&&(Ze.isMobile()&&this.conditionallyRestartAudio(),this.conditionallyRestartVideo()),ue.tabChanged(document.visibilityState==="visible"),document.visibilityState!=="visible"?ue.browserBackgrounded():ue.browserForegrounded()}async conditionallyRestartAudio(t){var e,i;if(this.audioRestartInProgress||(this.audioRestartInProgress=!0,!((e=this.currentDevices)!=null&&e.audio)||!this.audioEnabled))return;await Promise.race([new Promise(s=>{var n;return(n=this.rawAudioTrack)==null?void 0:n.addEventListener("unmute",a=>{s(a)})}),new Promise(s=>setTimeout(s,50))]),x.info("performingCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}});const r=await this.shouldReacquireTrack("audio");x.info("performedCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{reacquireTrack:r}}}),r&&(x.info("reacquiring_audio_track"),this.removeMediaStreamTrackListeners(this.rawAudioTrack),Ze.isChromiumBased()&&await h(this,gt).repopulateAvailableDevices(),await this.setupAudioStream((i=this.currentDevices.audio)==null?void 0:i.deviceId),this.addMediaStreamTrackListeners(this.rawAudioTrack),this.emit("AUDIO_TRACK_CHANGE")),this.audioRestartInProgress=!1}async conditionallyRestartVideo(t){var e;if(this.videoRestartInProgress||(this.videoRestartInProgress=!0,!((e=this.currentDevices)!=null&&e.video)||!this.videoEnabled))return;x.info("performingCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}}),await Promise.race([new Promise(r=>{var s;return(s=this.rawVideoTrack)==null?void 0:s.addEventListener("unmute",r)}),new Promise(r=>setTimeout(r,50))]);const i=await this.shouldReacquireTrack("video");x.info("performedCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{reacquireTrack:i}}}),i&&(x.info("reacquiring_video_track"),this.removeMediaStreamTrackListeners(this.rawVideoTrack),await h(this,gt).repopulateAvailableDevices(),await this.setupVideoStream(this.currentDevices.video.deviceId),this.addMediaStreamTrackListeners(this.rawVideoTrack),this.emit("VIDEO_TRACK_CHANGE")),this.videoRestartInProgress=!1}async shouldReacquireTrack(t){if(t==="audio"){if(this.audioUpdateInProgress||!this.audioEnabled)return!1;if(!this.rawAudioTrack||!this.audioTrack)return!0;const r=this.rawAudioTrack.muted||this.audioTrack.muted,s=(this.rawAudioTrack.readyState==="ended"||this.audioTrack.readyState==="ended")&&this.audioEnabled,n=await mp(this.rawAudioTrack);return document.visibilityState==="visible"&&(n||s||r)}if(this.videoUpdateInProgress||!this.videoEnabled)return!1;if(!this.rawVideoTrack||!this.videoTrack)return!0;const e=this.rawVideoTrack.muted||this.videoTrack.muted,i=(this.rawVideoTrack.readyState==="ended"||this.videoTrack.readyState==="ended")&&this.videoEnabled;return document.visibilityState==="visible"&&(i||e)}onAudioUnmute(t){x.info("audio_track_unmuted",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}})}onVideoUnmute(t){x.info("video_track_unmuted",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}})}removeMediaStreamTrackListeners(t){if(x.info(`Removing ${t.kind} listerners`),!t)return;const e=t.kind==="audio"?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return t.removeEventListener("ended",e),t.removeEventListener("mute",e),t.removeEventListener("unmute",t.kind==="audio"?this.onAudioUnmute:this.onVideoUnmute),t}addMediaStreamTrackListeners(t){if(!t)return null;x.info(`adding_${t.kind}_stream_listerners`);const e=t.kind==="audio",i=e?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return t.addEventListener("ended",async()=>{await i();const r=e?this.audioEnabled:this.videoEnabled,s=e?this.audioTrack:this.videoTrack,n=e?"FORCE_MUTE_AUDIO":"FORCE_MUTE_VIDEO";r&&!(s&&s.readyState==="live"&&s.enabled)&&(x.info(`LocalMediaHandler::trackEnded::Failed to restart ${t.kind} track`),this.emit(n))}),t.addEventListener("mute",i),t.addEventListener("unmute",e?this.onAudioUnmute:this.onVideoUnmute),t}async notifyIfTrackSilent(){var t,e,i,r,s,n;this.audioEnabled&&this.audioTrack&&this.audioTrack.readyState!=="ended"&&this.audioTrack.enabled&&await mp(this.audioTrack)===!0&&(x.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent",{media:{audio:{enabled:this.audioEnabled,deviceId:(e=(t=this.audioTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId,permission:(i=this.permissions)==null?void 0:i.audio,deviceName:(s=(r=this.currentDevices)==null?void 0:r.audio)==null?void 0:s.label,trackId:(n=this.audioTrack)==null?void 0:n.id}}}),this.emit("AUDIO_TRACK_SILENT"))}async setupAudioStream(t,e=!0){var i,r,s;if(!this.audioUpdateInProgress)try{this.audioUpdateInProgress=!0;const n=h(this,gt).getAudioDevices();if(!n.length)throw this.audioEnabled=!1,new ya("COULD_NOT_START","No audio devices",{});let a=t;(!a||!n.find(c=>c.deviceId===a))&&(a=await this.getPreferredDeviceId("AUDIO"),x.debug("setupAudioStream::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}}));const o=Zt.getAudioConstraints({audioDeviceId:a});e&&((i=this.rawAudioTrack)==null||i.stop(),(r=this.audioTrack)==null||r.stop()),this.rawAudioTrack=await Zt.getAudioTrack(o),a=this.rawAudioTrack.getSettings().deviceId,((s=this.currentDevices.audio)==null?void 0:s.deviceId)!==a&&(this.currentDevices.audio=h(this,gt).getDeviceById(a,"audioinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.audio})),this.rawAudioTrack.enabled=this.audioEnabled,this.setAudioTrack(await this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack)),this.addMediaStreamTrackListeners(this.rawAudioTrack),await h(this,gt).repopulateAvailableDevices(),this.permissions.audio="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),ue.mediaPermission("AUDIO",Po.ACCEPTED),ue.selectedDevice("AUDIO",this.currentDevices.audio),a&&ga.setItem("lastUsedAudioDeviceId",a)}catch(n){this.handlePermissionErrors("audio",n)}finally{this.audioUpdateInProgress=!1}}async getPreferredDeviceId(t){var e,i;let r;if(t==="AUDIO"){const s=h(this,gt).getAudioDevices(),n=ga.getItem("lastUsedAudioDeviceId");x.debug("getPreferredDeviceId::lastUsedAudioDeviceId",{preferredDevice:{lastUsedPreferredDeviceId:n,kind:"audio"}});let a;n&&(a=s.find(o=>o.deviceId===n)),a?r=n:ge.hasFeature(me.REMOVE_OPERATIONAL_MIC)||(r=(await this.getOperationalMicDeviceId()).deviceId),r||(r=(e=s[0])==null?void 0:e.deviceId)}if(t==="VIDEO"){const s=ga.getItem("lastUsedVideoDeviceId");x.debug("getPreferredDeviceId::lastUsedVideoDeviceId",{preferredDevice:{kind:"video",lastUsedPreferredDeviceId:s}});const n=h(this,gt).getVideoDevices();let a;s&&(a=n.find(o=>o.deviceId===s)),a?r=s:r=(await this.getOperationalWebcamDeviceId()).deviceId,r||(r=(i=n[0])==null?void 0:i.deviceId)}return r}async setupVideoStream(t,e=!0){var i,r;if(!this.videoUpdateInProgress)try{this.videoUpdateInProgress=!0;const s=h(this,gt).getVideoDevices();if(!s.length)throw this.videoEnabled=!1,new ya("COULD_NOT_START","No video devices",{});let n=t;if((!n||!s.find(a=>a.deviceId===n))&&(n=await this.getPreferredDeviceId("VIDEO"),x.debug("setupVideoStream::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:n,kind:"video"}})),e&&((i=this.videoTrack)==null||i.stop()),this.videoEnabled){const a=h(this,uc).getVideoConstraints(n);this.rawVideoTrack=await Zt.getVideoTrack(a),n=this.rawVideoTrack.getSettings().deviceId,this.setVideoTrack(await this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack)),this.addMediaStreamTrackListeners(this.rawVideoTrack)}await h(this,gt).repopulateAvailableDevices(),((r=this.currentDevices.video)==null?void 0:r.deviceId)!==n&&(this.currentDevices.video=h(this,gt).getDeviceById(n,"videoinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.video})),this.permissions.video="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),ue.mediaPermission("VIDEO",Po.ACCEPTED),ue.selectedDevice("VIDEO",this.currentDevices.video),n&&ga.setItem("lastUsedVideoDeviceId",n)}catch(s){this.handlePermissionErrors("video",s)}finally{this.videoUpdateInProgress=!1}}async setupScreenShareStreams(){if(this.screenShareUpdateInProgress)return;const t=h(this,uc).getScreenShareConstraints();ge.hasFeature(me.SCREENSHARE_MAX_DIMENSIONS)&&(t.video.width.max=window.screen.width,t.video.height.max=window.screen.height);try{this.screenShareUpdateInProgress=!0;const e=await Zt.getScreenShareTracks(t);this.setScreenShareTracks(e)}catch(e){throw this.handlePermissionErrors("screenshare",new ya(e.name,e.message,t)),new U(e.message)}finally{this.screenShareUpdateInProgress=!1}}async setupSpeaker(t){var e;const i=h(this,gt).getSpeakerDevices();if(!i.length)return;const r=t!=null?t:i[0].deviceId;((e=this.currentDevices.speaker)==null?void 0:e.deviceId)!==r&&(this.currentDevices.speaker=h(this,gt).getDeviceById(r,"audiooutput"),ue.selectedDevice("SPEAKER",this.currentDevices.speaker),this.emit("DEVICE_CHANGE",{device:this.currentDevices.speaker})),document.querySelectorAll("audio").forEach(async s=>{if(typeof s.sinkId<"u"&&this.currentDevices.speaker.deviceId&&s.sinkId!==this.currentDevices.speaker.deviceId)try{await s.setSinkId(this.currentDevices.speaker.deviceId)}catch{}})}async getOperationalWebcamDeviceId(){const t=h(this,gt).getVideoDevices();if(!t.length)return{isOperational:!1,deviceId:null};xm.setEmitMediaPermissionEvent(!1);const e=[],i=await t.reduce(async(r,s)=>{const n=await r;if(n!==null)return n;const a=h(this,uc).getVideoConstraints(s.deviceId);try{return(await Zt.getVideoTrack(a)).stop(),s.deviceId}catch(o){x.error("getOperationalWebcamDeviceId::could_not_acquire_video_device",{error:o,constraints:a}),e.push({exception:o,constraints:a})}return n},Promise.resolve(null));if(xm.setEmitMediaPermissionEvent(!0),!i&&e.length>0&&e.length===t.length){const{exception:r,constraints:s}=e[0];throw new ya(r.name,r.message,s)}return i?{isOperational:!0,deviceId:i}:{isOperational:!1,deviceId:t[0].deviceId}}async getOperationalMicDeviceId(){const t=h(this,gt).getAudioDevices();if(!t.length)return{isOperational:!1,deviceId:null};const e=[];xm.setEmitMediaPermissionEvent(!1);const i=await t.reduce(async(r,s)=>{const n=await r;if(n!==null)return n;const a=Zt.getAudioConstraints({audioDeviceId:s.deviceId});try{const o=await Zt.getAudioTrack(a),c=await mp(o);if(o==null||o.stop(),!c)return s}catch(o){x.error("getOperationalMicDeviceId::could_not_acquire_audio_device",{error:o,constraints:a}),e.push({exception:o,constraints:a})}return n},Promise.resolve(null));if(xm.setEmitMediaPermissionEvent(!0),!i&&e.length>0&&e.length===t.length){const{exception:r,constraints:s}=e[0];throw new ya(r.name,r.message,s)}return i?{isOperational:!0,deviceId:i.deviceId}:{isOperational:!1,deviceId:t[0].deviceId}}async setupStreams({audio:t,video:e}){var i;const r={};this.currentDevices||(this.currentDevices={audio:void 0,video:void 0,speaker:void 0});try{if(t&&!this.audioUpdateInProgress&&h(this,gt).getAudioDevices().length!==0){const a=await this.getPreferredDeviceId("AUDIO");x.info("setupStreams::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}});const o=Zt.getAudioConstraints({audioDeviceId:a});r.audio=o.audio}if(e&&!this.videoUpdateInProgress&&h(this,gt).getVideoDevices().length!==0){const a=await this.getPreferredDeviceId("VIDEO");x.info("setupStreams::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"video"}});const o=h(this,uc).getVideoConstraints(a);r.video=o.video}if(((i=Object.keys(r))==null?void 0:i.length)===0){this.audioEnabled=t!=null?t:this.audioEnabled,this.videoEnabled=e!=null?e:this.videoEnabled,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.initialSetupComplete=!0;return}const{audioTrack:s,videoTrack:n}=await Zt.getAudioAndVideoTrack(r);t&&s&&(this.audioTrack=s,this.rawAudioTrack=s,this.permissions.audio="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),this.currentDevices.audio=h(this,gt).getDeviceById(s.getSettings().deviceId,"audioinput"),ga.setItem("lastUsedAudioDeviceId",s.getSettings().deviceId)),e&&n&&(this.videoTrack=n,this.rawVideoTrack=n,this.permissions.video="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),this.currentDevices.video=h(this,gt).getDeviceById(n.getSettings().deviceId,"videoinput"),ga.setItem("lastUsedVideoDeviceId",n.getSettings().deviceId)),await h(this,gt).repopulateAvailableDevices()}catch(s){s.name==="NotAllowedError"&&(t&&await this.setupAudioStream(),e&&await this.setupVideoStream())}this.audioEnabled=!!this.audioTrack,this.videoEnabled=!!this.videoTrack,this.screenShareEnabled=!1,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.initialSetupComplete=!0,await this.setupSpeaker()}stopAudioTrack(){var t,e;this.audioUpdateInProgress||(this.audioUpdateInProgress=!0,(t=this.audioTrack)==null||t.stop(),(e=this.rawAudioTrack)==null||e.stop(),this.audioEnabled=!1,this.audioUpdateInProgress=!1)}stopVideoTrack(){var t,e;this.videoUpdateInProgress||(this.videoUpdateInProgress=!0,(t=this.videoTrack)==null||t.stop(),(e=this.rawVideoTrack)==null||e.stop(),this.videoEnabled=!1,this.videoUpdateInProgress=!1)}stopScreenShareTracks(t={}){var e,i,r,s;if(this.screenShareUpdateInProgress)return;this.screenShareUpdateInProgress=!0;const{audio:n=!0,video:a=!0}=t;n&&((i=(e=this.screenShareTracks)==null?void 0:e.audio)==null||i.stop()),a&&((s=(r=this.screenShareTracks)==null?void 0:r.video)==null||s.stop()),this.screenShareEnabled=!1,this.screenShareUpdateInProgress=!1}removeAudioTrack(){this.stopAudioTrack(),this.audioTrack=void 0,this.rawAudioTrack=void 0,ge.hasFeature(me.TROUBLESHOOTING)&&On.cleanup()}removeVideoTrack(){this.stopVideoTrack(),this.videoTrack=void 0,this.rawVideoTrack=void 0}removeScreenShareTracks(t){var e;(e=this.screenShareTracks.video)==null||e.removeEventListener("ended",this.onScreenShareEnded),this.stopScreenShareTracks(t),this.screenShareTracks={audio:void 0,video:void 0}}removeAllTracks(){this.removeAudioTrack(),this.removeVideoTrack(),this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video})}setAudioTrack(t){t!==this.audioTrack&&(t===void 0&&this.stopAudioTrack(),this.audioTrack=t,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled))}setVideoTrack(t){t!==this.videoTrack&&(t===void 0&&this.stopVideoTrack(),this.videoTrack=t)}setScreenShareTracks(t){var e;const{audio:i,video:r}=t;(!i||!r)&&this.stopScreenShareTracks({audio:!!i,video:!!r}),this.screenShareTracks=t,(e=this.screenShareTracks.video)==null||e.addEventListener("ended",this.onScreenShareEnded.bind(this))}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}disableAudio(){this.audioEnabled=!1,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async enableAudio(){var t;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((t=this.currentDevices.audio)==null?void 0:t.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1,x.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio",{debuggingHint:"Refer to SelfController::mediaPermissionError log."});return}this.audioEnabled=!0}catch(e){this.audioEnabled=!1,this.audioTrack=void 0,this.rawAudioTrack=void 0,x.error("LocalMediaHandler::enableAudio",{error:e},!0)}this.audioTrack&&(this.audioTrack.enabled=!0),this.rawAudioTrack&&(this.rawAudioTrack.enabled=!0),!(this.permissions.audio==="ACCEPTED"||!this.audioEnabled)&&(this.permissions.audio="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}))}async toggleAudio(){var t;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((t=this.currentDevices.audio)==null?void 0:t.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1;return}this.audioEnabled=!this.audioEnabled}catch(e){this.audioEnabled=!1,x.error("LocalMediaHandler::toggleAudio",{error:e},!0)}this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async toggleVideo(){var t;if(this.permissions.video==="DENIED"){this.videoEnabled=!1;return}if(this.videoEnabled){this.removeVideoTrack();return}this.videoEnabled=!0;try{await this.setupVideoStream((t=this.currentDevices.video)==null?void 0:t.deviceId)}catch{this.videoEnabled=!1}this.videoTrack&&(this.videoTrack.enabled=this.videoEnabled),this.rawVideoTrack&&(this.rawVideoTrack.enabled=this.videoEnabled),!(this.permissions.video==="ACCEPTED"||!this.videoEnabled)&&(this.permissions.video="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}))}async toggleScreenShare(){if(this.screenShareEnabled){this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video});return}try{if(await this.setupScreenShareStreams(),this.screenShareEnabled=!0,this.permissions.screenshare==="ACCEPTED")return;this.permissions.screenshare="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"})}catch{this.screenShareEnabled=!1}}getAllDevices(){return h(this,gt).availableDevices}getDeviceById(t,e){return h(this,gt).getDeviceById(t,e)}getAudioDevices(){return h(this,gt).getAudioDevices()}getVideoDevices(){return h(this,gt).getVideoDevices()}getSpeakerDevices(){return h(this,gt).getSpeakerDevices()}async onDeviceChange(t,e){var i,r;this.initialSetupComplete&&((i=t==null?void 0:t.added)==null||i.forEach(async s=>{s&&(e||!pa(s))&&(s.kind==="audioinput"?(await this.setupAudioStream(s.deviceId),this.emit("AUDIO_TRACK_CHANGE")):s.kind==="videoinput"&&this.videoEnabled?(await this.setupVideoStream(s.deviceId),this.emit("VIDEO_TRACK_CHANGE")):s.kind==="audiooutput"&&await this.setupSpeaker(s.deviceId))}),(r=t==null?void 0:t.removed)==null||r.forEach(async s=>{var n,a,o;s&&((s.kind==="audioinput"&&!this.audioEnabled||s.kind==="videoinput"&&!this.videoEnabled||ge.hasFeature(me.DEVICE_REMOVE_EXP)||!Ze.isChromiumBased())&&(s.kind==="audioinput"&&s.deviceId===((n=this.currentDevices.audio)==null?void 0:n.deviceId)?(await this.setupAudioStream(),this.emit("AUDIO_TRACK_CHANGE")):s.kind==="videoinput"&&s.deviceId===((a=this.currentDevices.video)==null?void 0:a.deviceId)&&(await this.setupVideoStream(),this.emit("VIDEO_TRACK_CHANGE"))),s.kind==="audiooutput"&&s.deviceId===((o=this.currentDevices.speaker)==null?void 0:o.deviceId)&&await this.setupSpeaker())}))}static async init(t){const e=await Zt.init(),i=new NO(e,t),r=new Ad(i);return i.mediaMiddlewareUtils=r,i}emit(t,...e){return super.emit(t,...e)}on(t,e){return super.on(t,e)}async removeDocumentEventListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}addAudioMiddleware(t){return this.mediaMiddlewareUtils.addAudioMiddleware(t)}removeAudioMiddleware(t){return this.mediaMiddlewareUtils.removeAudioMiddleware(t)}addVideoMiddleware(t){return this.mediaMiddlewareUtils.addVideoMiddleware(t)}removeVideoMiddleware(t){return this.mediaMiddlewareUtils.removeVideoMiddleware(t)}async enableVideo(){await this.toggleVideo()}async disableVideo(){await this.toggleVideo()}async enableScreenShare(){await this.toggleScreenShare()}async disableScreenShare(){await this.toggleScreenShare()}getCurrentDevices(){return this.currentDevices}destruct(){this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(),h(this,gt).destruct(),this.removeAllTracks(),this.removeAllListeners()}},gt=new WeakMap,uc=new WeakMap,LP);let Ct=NO;Dt([C.trace("OldMediaHandler.shouldReacquireTrack")],Ct.prototype,"shouldReacquireTrack",1);Dt([C.trace("OldMediaHandler.removeMediaStreamTrackListeners")],Ct.prototype,"removeMediaStreamTrackListeners",1);Dt([C.trace("OldMediaHandler.addMediaStreamTrackListeners")],Ct.prototype,"addMediaStreamTrackListeners",1);Dt([C.trace("OldMediaHandler.setupAudioStream")],Ct.prototype,"setupAudioStream",1);Dt([C.trace("OldMediaHandler.getPreferredDeviceId")],Ct.prototype,"getPreferredDeviceId",1);Dt([C.trace("OldMediaHandler.setupVideoStream")],Ct.prototype,"setupVideoStream",1);Dt([C.trace("OldMediaHandler.setupScreenShareStreams")],Ct.prototype,"setupScreenShareStreams",1);Dt([C.trace("OldMediaHandler.setupSpeaker")],Ct.prototype,"setupSpeaker",1);Dt([C.trace("OldMediaHandler.getOperationalWebcamDeviceId")],Ct.prototype,"getOperationalWebcamDeviceId",1);Dt([C.trace("OldMediaHandler.getOperationalMicDeviceId")],Ct.prototype,"getOperationalMicDeviceId",1);Dt([C.trace("OldMediaHandler.setupStreams")],Ct.prototype,"setupStreams",1);Dt([C.trace("OldMediaHandler.stopAudioTrack")],Ct.prototype,"stopAudioTrack",1);Dt([C.trace("OldMediaHandler.stopVideoTrack")],Ct.prototype,"stopVideoTrack",1);Dt([C.trace("OldMediaHandler.stopScreenShareTracks")],Ct.prototype,"stopScreenShareTracks",1);Dt([C.trace("OldMediaHandler.removeAudioTrack")],Ct.prototype,"removeAudioTrack",1);Dt([C.trace("OldMediaHandler.removeVideoTrack")],Ct.prototype,"removeVideoTrack",1);Dt([C.trace("OldMediaHandler.removeScreenShareTracks")],Ct.prototype,"removeScreenShareTracks",1);Dt([C.trace("OldMediaHandler.removeAllTracks")],Ct.prototype,"removeAllTracks",1);Dt([C.trace("OldMediaHandler.setAudioTrack")],Ct.prototype,"setAudioTrack",1);Dt([C.trace("OldMediaHandler.setVideoTrack")],Ct.prototype,"setVideoTrack",1);Dt([C.trace("OldMediaHandler.setScreenShareTracks")],Ct.prototype,"setScreenShareTracks",1);Dt([C.trace("OldMediaHandler::disableAudio")],Ct.prototype,"disableAudio",1);Dt([C.trace("OldMediaHandler::enableAudio")],Ct.prototype,"enableAudio",1);Dt([C.trace("OldMediaHandler.toggleAudio")],Ct.prototype,"toggleAudio",1);Dt([C.trace("OldMediaHandler.toggleVideo")],Ct.prototype,"toggleVideo",1);Dt([C.trace("OldMediaHandler.toggleScreenShare")],Ct.prototype,"toggleScreenShare",1);class UO extends Mt{constructor(){super(...arguments),w(this,"localMediaHandler")}async updatePermission(){var e,i;const r=(u,l)=>{this.mediaPermissions[u]=l;const p={message:this.mediaPermissions[u],kind:u};l==="DENIED"?R.emit(P.MEDIA_PERMISSION_ERROR,p):R.emit(P.MEDIA_PERMISSION_UPDATE,p)};if(Ze.getName()==="firefox")return;const s="microphone",n="camera",a=await((e=navigator==null?void 0:navigator.permissions)==null?void 0:e.query({name:s})),o=await((i=navigator==null?void 0:navigator.permissions)==null?void 0:i.query({name:n})),c=(u,l)=>{switch(l){case"granted":r(u,"ACCEPTED");break;case"denied":r(u,"DENIED");break}this.localMediaHandler.repopulateAvailableDevices()};a&&(a.onchange=()=>c("audio",a.state)),o&&(o.onchange=()=>c("video",o.state))}async init(e={}){var i,r,s,n;if(Ze.init(),!this.localMediaHandler){this.updatePermission();try{let a=!0;const o=e.constraints||Fr;if(tt.defaults.mediaHandler)a=!1,this.localMediaHandler=tt.defaults.mediaHandler.localMediaHandler;else if(navigator.RNLocalMediaHandlerImpl){const{RNLocalMediaHandlerImpl:c}=navigator;this.localMediaHandler=await c.init()}else ge.hasFeature(me.NEW_LOCAL_MEDIA_HANDLER)?this.localMediaHandler=new Qr(o,(i=tt==null?void 0:tt.defaults)==null?void 0:i.isNonPreferredDevice,(r=tt==null?void 0:tt.defaults)==null?void 0:r.autoSwitchAudioDevice):this.localMediaHandler=await Ct.init(o);R.on(P.MEDIA_PERMISSION_UPDATE,async c=>{if(c.message==="ACCEPTED"){const u=this.getCurrentDevices(),l=await this.getAudioDevices(),p=await this.getVideoDevices(),m=await this.getSpeakerDevices();switch(c==null?void 0:c.kind){case"audio":!u.audio&&l.length>0&&this.setDevice(l[0]),!u.speaker&&m.length>0&&this.setDevice(m[0]);break;case"video":!u.video&&p.length>0&&this.setDevice(p[0]);break;default:break}}this.emit("mediaPermissionUpdate",c)}),R.on(P.MEDIA_PERMISSION_ERROR,async c=>{const{kind:u,message:l}=c;u==="audio"?(ue.mediaPermission("AUDIO",Zb(l)),this.disableAudio()):u==="video"?(ue.mediaPermission("VIDEO",Zb(l)),this.disableVideo()):u==="screenshare"&&(ue.mediaPermission("VIDEO",Zb(l)),this.disableScreenShare()),x.error("SelfController::mediaPermissionError",{error:{message:c.message},constraints:c.constraints,mediaPermissionsErrors:{kind:u,message:l}}),this.emit("mediaPermissionError",c),this.emit("mediaPermissionUpdate",{message:l,kind:u})}),a&&await this.localMediaHandler.setupStreams({video:(s=e==null?void 0:e.video)!=null?s:!0,audio:(n=e==null?void 0:e.audio)!=null?n:!0})}catch(a){x.error("DyteSelf::init::Failed To Setup Streams",{error:{name:a.name,message:a.message}})}}}get audioTrack(){return this.localMediaHandler.audioTrack}get rawAudioTrack(){return this.localMediaHandler.rawAudioTrack}get mediaPermissions(){return this.localMediaHandler.permissions}async addAudioMiddleware(e){return this.localMediaHandler.addAudioMiddleware(e)}async removeAudioMiddleware(e){return this.localMediaHandler.removeAudioMiddleware(e)}get videoTrack(){return this.localMediaHandler.videoTrack}get rawVideoTrack(){return this.localMediaHandler.rawVideoTrack}async addVideoMiddleware(e){return this.localMediaHandler.addVideoMiddleware(e)}async removeVideoMiddleware(e){return this.localMediaHandler.removeVideoMiddleware(e)}get screenShareTracks(){return this.localMediaHandler.screenShareTracks}get audioEnabled(){return this.localMediaHandler.audioEnabled}get videoEnabled(){return this.localMediaHandler.videoEnabled}get screenShareEnabled(){return this.localMediaHandler.screenShareEnabled}async enableAudio(){await this.localMediaHandler.enableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async enableVideo(){await this.localMediaHandler.enableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableAudio(){this.localMediaHandler.disableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async disableVideo(){await this.localMediaHandler.disableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableScreenShare(){}getCurrentDevices(){return this.localMediaHandler.getCurrentDevices()}async getAudioDevices(){return await this.localMediaHandler.getAudioDevices()}async getVideoDevices(){return await this.localMediaHandler.getVideoDevices()}async getSpeakerDevices(){return await this.localMediaHandler.getSpeakerDevices()}getDeviceById(e,i){let r;return i==="audio"?r="audioinput":i==="video"?r="videoinput":i==="speaker"&&(r="audiooutput"),this.localMediaHandler.getDeviceById(e,r)}async setDevice(e){const i={added:[e],removed:[]};if("isDeprecated"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(i,!0);return}switch(e.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(e)}catch{}finally{this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(e);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(e)}catch{}finally{this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:e})}}const _ue={nonBlackPixelLumaThreshold:20,identicalFrameSsimThreshold:.985,media:"video"};var qv,Xc,ul,Jv,vk,yk,NP,bk,UP,e1,jP,Em,t1,i1,$P;const zh=class{constructor(t){N(this,Jv),N(this,yk),N(this,bk),w(this,"metadata",{}),w(this,"video"),w(this,"canvas"),w(this,"nonBlackPixelLumaThreshold"),w(this,"identicalFrameSsimThreshold"),w(this,"previousFrame",new Uint8ClampedArray),N(this,qv,void 0),w(this,"track"),w(this,"analysing"),N(this,Xc,void 0),N(this,ul,void 0),w(this,"preview");const{nonBlackPixelLumaThreshold:e,identicalFrameSsimThreshold:i,media:r}={..._ue,...t};this.nonBlackPixelLumaThreshold=e,this.identicalFrameSsimThreshold=i,this.analysing=!1,L(this,Xc,r),this.preview=!1}setTrack(t){var e,i,r;(e=this.track)==null||e.stop(),this.track=t;const{height:s,width:n}=(r=(i=this.track)==null?void 0:i.getConstraints())!=null?r:{};if(this.metadata.resolution=[n,s],h(this,Xc)==="screenshare"){R.emit(P.SCREENSHARE_VIDEO_TRACK_CREATED);return}R.emit(P.VIDEO_TRACK_CREATED)}getTrackMetadata(){return this.track?(this.metadata.label=this.track.label,this.metadata):null}async startTrackAnalysis(){var t;return!this.track||this.analysing?!1:(!this.video&&!((t=this.video)!=null&&t.src)&&(L(this,ul,new MediaStream),h(this,ul).addTrack(this.track),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),[this.video.width,this.video.height]=this.metadata.resolution,this.video.srcObject=h(this,ul)),window.requestAnimationFrame(qe(this,Jv,vk).bind(this)),this.analysing=!0,!0)}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(h(this,qv)))}cleanup(){var t;if(this.stopTrackAnalysis(),(t=this.track)==null||t.stop(),this.track=void 0,L(this,ul,void 0),this.video&&(this.video.srcObject=void 0,this.video=void 0),this.canvas=void 0,this.previousFrame=new Uint8ClampedArray,h(this,Xc)==="screenshare"){R.emit(P.SCREENSHARE_VIDEO_TRACK_CLOSED);return}R.emit(P.VIDEO_TRACK_CLOSED)}};let fp=zh;qv=new WeakMap,Xc=new WeakMap,ul=new WeakMap,Jv=new WeakSet,vk=function(){var t;try{const e=qe(this,yk,NP).call(this),i=qe(this,bk,UP).call(this,e.data,e.data.length),r=qe(t=zh,e1,jP).call(t,this.previousFrame,e.data);this.previousFrame=e.data;const s={isBlackFrame:i,videoScore:r,isFrozenFrame:r>this.identicalFrameSsimThreshold,timestamp:new Date().getTime()};h(this,Xc)==="screenshare"?R.emit(P.SCREENSHARE_VIDEO_TRACK_ANALYSIS,s):R.emit(P.VIDEO_TRACK_ANALYSIS,s),L(this,qv,setTimeout(()=>{this.track&&window.requestAnimationFrame(qe(this,Jv,vk).bind(this))},3e3))}catch{h(this,Xc)==="screenshare"?R.emit(P.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR):R.emit(P.VIDEO_TRACK_ANALYSIS_ERROR)}},yk=new WeakSet,NP=function(){var t,e;this.canvas.width=(t=this.video)==null?void 0:t.width,this.canvas.height=(e=this.video)==null?void 0:e.height;const i=this.canvas.getContext("2d",{willReadFrequently:!0});return i.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),i.getImageData(0,0,this.canvas.width,this.canvas.height)},bk=new WeakSet,UP=function(t,e){const i=this.nonBlackPixelLumaThreshold;let r=0;for(let s=4;s<e;s+=4)if(r+=.21*t[s]+.72*t[s+1]+.07*t[s+2],r>i*(s/4))return!1;return!0},e1=new WeakSet,jP=function(t,e){var i,r,s;if(t.length!==e.length)return 0;const n=.01,a=.03,o=255,c=n*o*(n*o),u=a*o*(a*o),l=u/2,p=qe(i=zh,Em,t1).call(i,t),m=p.mean,y=p.variance,b=Math.sqrt(y),S=qe(r=zh,Em,t1).call(r,e),E=S.mean,k=S.variance,T=Math.sqrt(k),I=qe(s=zh,i1,$P).call(s,t,e,m,E),O=(2*m*E+c)/(m*m+E*E+c),q=(I+l)/(b*T+l),B=(2*b*T+u)/(y+k+u);return O*B*q},Em=new WeakSet,t1=function(t){let e=0,i;for(i=0;i<t.length;i++)e+=t[i];const r=e/(t.length-1);let s=0;for(i=1;i<t.length;i++)s=t[i-1]-r,e+=t[i]+s*s;return{mean:r,variance:e/t.length}},i1=new WeakSet,$P=function(t,e,i,r){let s=0;for(let n=0;n<t.length;n+=1)s+=(t[n]-i)*(e[n]-r);return s/t.length},N(fp,e1),N(fp,Em),N(fp,i1);const is=new fp,$o=new fp({media:"screenshare"});var Sue=Object.defineProperty,xue=Object.getOwnPropertyDescriptor,Li=(t,e,i,r)=>{for(var s=r>1?void 0:r?xue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Sue(e,i,s),s},Fi=(t=>(t.OFF_STAGE="OFF_STAGE",t.REQUESTED_TO_JOIN_STAGE="REQUESTED_TO_JOIN_STAGE",t.ACCEPTED_TO_JOIN_STAGE="ACCEPTED_TO_JOIN_STAGE",t.ON_STAGE="ON_STAGE",t))(Fi||{}),r1,ph,sa,gh,Gd,ot,lt,zP;let ii=(zP=class extends UO{constructor(t,e,i,r,s){var n;super(),N(this,ot),w(this,"id"),w(this,"name"),w(this,"picture"),w(this,"clientSpecificId"),w(this,"waitlistStatus"),N(this,r1,void 0),N(this,ph,void 0),N(this,sa,void 0),N(this,gh,void 0),w(this,"role"),w(this,"userId"),w(this,"organizationId"),w(this,"supportsRemoteControl",!1),w(this,"device"),N(this,Gd,void 0),w(this,"presetName"),w(this,"roomState","init"),this.id=t,this.userId=e.id,this.name=e.name,this.picture=e.picture,this.clientSpecificId=(n=e.customParticipantId)!=null?n:e.clientSpecificId,this.waitlistStatus="none",L(this,sa,i),L(this,ph,r),L(this,gh,!1),this.organizationId=e.organizationId,this.supportsRemoteControl=Ze.isElectron(),this.device=Ze.getDeviceInfo(),this.presetName=s,L(this,r1,Ne.isV2AuthToken?r.viewType:i.viewType)}get stageStatus(){return h(this,Gd)}static async __init__(t,e,i,r,s){var n,a,o,c;let u=(a=(n=tt.defaults)==null?void 0:n.audio)!=null?a:!0,l=(c=(o=tt.defaults)==null?void 0:o.video)!=null?c:!0;i.canProduceAudio!=="ALLOWED"&&(u=!1),i.canProduceVideo!=="ALLOWED"&&(l=!1);const p=new ii(t,e,i,r,s);return r.viewType===Tt.Chat||(await p.init({audio:u,video:l}),p.setupEvents()),p}setupEvents(){R.on(P.ROOM_NODE_CONNECTED,async({wasDisconnected:t})=>{t&&await this.resetSelf()}),R.on(P.SET_STAGE_STATUS,t=>{switch(L(this,Gd,t),t){case"ACCEPTED_TO_JOIN_STAGE":this.emit("joinStageRequestAccepted");break;case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}),R.on(P.RESET_PRODUCER_STATE,async()=>{if(this.roomJoined&&h(this,ot,lt)instanceof Le){if(this.localMediaHandler.videoEnabled&&await h(this,ot,lt).shareWebcam(this.localMediaHandler.videoTrack),this.localMediaHandler.audioEnabled)try{await h(this,ot,lt).shareMic(this.localMediaHandler.audioTrack)}catch{this.localMediaHandler.disableAudio()}this.localMediaHandler.screenShareEnabled&&await h(this,ot,lt).shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio})}}),R.on(P.STOPPED_PRESENTING,()=>{this.localMediaHandler.destruct(),this.setWebinarStageStatus("OFF_STAGE"),this.emit("stageLeft")}),this.localMediaHandler.on("AUDIO_TRACK_CHANGE",async()=>{if(R.emit(P.AUDIO_TRACK_CHANGED),x.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE",{...Gc(this)}),this.roomJoined&&this.audioEnabled)try{await h(this,ot,lt).shareMic(this.audioTrack)}catch(t){x.error("DyteSelf::setupEvents::Error while sharing mic",{error:t}),this.localMediaHandler.disableAudio()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}),this.localMediaHandler.on("VIDEO_TRACK_CHANGE",async()=>{if(R.emit(P.VIDEO_TRACK_CHANGED),x.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE",{...Gc(this)}),this.roomJoined&&this.rawVideoTrack===void 0)x.info("DyteSelf::VIDEO_TRACK_CHANGE::Forcing_disable_video"),this.disableVideo();else if(this.videoEnabled&&this.roomJoined)try{await h(this,ot,lt).shareWebcam(this.videoTrack)}catch(t){x.error("DyteSelf::setupEvents::failed shareWebcam",{error:t}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}),this.localMediaHandler.on("DEVICE_CHANGE",async({device:t})=>{this.emit("deviceUpdate",{device:t})}),this.localMediaHandler.on("DEVICE_LIST_UPDATED",t=>{this.emit("deviceListUpdate",t)}),this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE",async()=>{if(R.emit(P.SCREENSHARE_TRACK_CHANGED),!this.roomJoined){x.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode");return}if(this.screenShareEnabled)try{await h(this,ot,lt).shareScreen(this.screenShareTracks)}catch(t){x.error("DyteSelf::setupEvents::Error while sharing screen",{error:t}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}x.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE",{...Gc(this)}),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}),this.localMediaHandler.on("SCREENSHARE_ENDED",async()=>{await this.disableScreenShare(),x.info("DyteSelf::setupEvents::SCREENSHARE_ENDED",{...Gc(this)})}),this.localMediaHandler.on("AUDIO_TRACK_SILENT",()=>{this.emit("audioTrackSilent"),ue.mediaTrackMuted("AUDIO")}),this.localMediaHandler.on("FORCE_MUTE_AUDIO",()=>{this.disableAudio()}),this.localMediaHandler.on("FORCE_MUTE_VIDEO",async()=>{this.roomJoined&&await h(this,ot,lt).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),ue.videoOff()})}get permissions(){return h(this,sa)}get suggestedTheme(){return h(this,ph)}get config(){return h(this,ph)}get roomJoined(){var t;return((t=h(this,ot,lt))==null?void 0:t.roomJoined)===!0}setName(t){if(!t)throw new U("Name cannot be empty.");this.name=t}async setupTracks(t={}){var e,i;return t.forceReset&&(h(this,ot,lt).stopAllProducers(),this.localMediaHandler.removeAllTracks()),this.localMediaHandler.setupStreams({video:(e=t.video)!=null?e:!0,audio:(i=t.audio)!=null?i:!0})}async resetSelf(){var t,e,i,r,s,n,a,o,c,u;if(ue.callEnded(),(i=(e=(t=h(this,ot,lt))==null?void 0:t.sfuHandler)==null?void 0:e.cleanupConsumers)==null||i.call(e),h(this,ot,lt)instanceof Je&&await((n=(s=(r=h(this,ot,lt))==null?void 0:r.sfuHandler)==null?void 0:s.setupTransports)==null?void 0:n.call(s)),await((a=h(this,ot,lt))==null?void 0:a.joinRoom(this.name,!this.localMediaHandler.audioEnabled,h(this,ot,lt).roomUUID,h(this,ot,lt).meetingTitle,{audio:this.localMediaHandler.audioEnabled,video:this.localMediaHandler.videoEnabled,screen:this.localMediaHandler.screenShareEnabled})),this.localMediaHandler.videoEnabled&&await((o=h(this,ot,lt))==null?void 0:o.shareWebcam(this.localMediaHandler.videoTrack)),this.localMediaHandler.audioEnabled)try{await((c=h(this,ot,lt))==null?void 0:c.shareMic(this.localMediaHandler.audioTrack))}catch{this.localMediaHandler.disableAudio()}this.localMediaHandler.screenShareEnabled&&await((u=h(this,ot,lt))==null?void 0:u.shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio}))}async destructMediaHandler(){return this.localMediaHandler.destruct()}async removeDocumentEventListeners(){return this.localMediaHandler.removeDocumentEventListeners()}async enableAudio(){if(!(this.permissions.canProduceAudio===_c.notAllowed||h(this,sa).canProduceAudio===_c.canRequest&&(this.stageStatus==="OFF_STAGE"||this.stageStatus==="REQUESTED_TO_JOIN_STAGE")||this.audioEnabled)){if(await this.localMediaHandler.enableAudio(),this.roomJoined){if(this.audioTrack)try{await h(this,ot,lt).shareMic(this.audioTrack)}catch(t){x.error("DyteSelf::enableAudio::Error while sharing mic",{error:t}),this.localMediaHandler.disableAudio()}if(!this.audioEnabled)return;h(this,ot,lt).unmuteSelf()}if(this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),ue.audioOn(),ge.hasFeature(me.TROUBLESHOOTING))try{On.setTrack(this.rawAudioTrack)}catch(t){x.error("Troubleshooter::micTest::Error while setting track",{error:t})}}}async enableVideo(){var t;if(!(h(this,sa).canProduceVideo===_c.notAllowed||h(this,sa).canProduceVideo===_c.canRequest&&(this.stageStatus==="OFF_STAGE"||this.stageStatus==="REQUESTED_TO_JOIN_STAGE")||this.videoEnabled)){if(await this.localMediaHandler.enableVideo(),this.roomJoined)try{await h(this,ot,lt).shareWebcam(this.videoTrack)}catch(e){x.error("DyteSelf::enableVideo::Error while sharing video",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}if(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),x.info("DyteSelf.enableVideo",{...Gc(this)}),ue.videoOn(),ge.hasFeature(me.TROUBLESHOOTING))try{is.setTrack((t=this.videoTrack)==null?void 0:t.clone())}catch(e){x.error("Troubleshooter::camTest::Error while setting track",{error:e})}}}async updateVideoConstraints(t){if(!this.localMediaHandler.updateVideoConstraints)throw new U("Unsupported");await this.localMediaHandler.updateVideoConstraints(t)}async enableScreenShare(){var t;if(!this.roomJoined)throw new U("Can`t enable screenshare without joining room");if(h(this,sa).canProduceScreenshare===_c.notAllowed||h(this,sa).canProduceScreenshare===_c.canRequest&&(this.stageStatus==="OFF_STAGE"||this.stageStatus==="REQUESTED_TO_JOIN_STAGE")||this.screenShareEnabled)return;if(await this.localMediaHandler.enableScreenShare(),this.screenShareTracks.audio||this.screenShareTracks.video)try{await h(this,ot,lt).shareScreen(this.screenShareTracks)}catch(i){x.error("DyteSelf::enableScreenShare::Error while sharing screen",{error:i}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks});const e=ge.hasFeature(me.TROUBLESHOOTING);if(e&&this.screenShareTracks.audio)try{ad.setTrack(this.screenShareTracks.audio)}catch(i){x.error("Troubleshooter::screenshareMicTest::Error while setting track",{error:i})}if(e&&this.screenShareTracks.video)try{$o.setTrack((t=this.screenShareTracks.video)==null?void 0:t.clone())}catch(i){x.error("Troubleshooter::screenshareCamTest::Error while setting track",{error:i})}}async updateScreenshareConstraints(t){if(!this.localMediaHandler.updateScreenshareConstraints)throw new U("Unsupported");await this.localMediaHandler.updateScreenshareConstraints(t)}async disableAudio(){this.audioEnabled&&(this.localMediaHandler.disableAudio(),this.roomJoined&&h(this,ot,lt).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),ue.audioOff())}async disableVideo(){!this.videoEnabled||(await this.localMediaHandler.disableVideo(),this.roomJoined&&await h(this,ot,lt).pauseWebcam(),this.mediaPermissions.video!=="ACCEPTED")||(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),ue.videoOff(),ge.hasFeature(me.TROUBLESHOOTING)&&!is.preview&&is.cleanup())}async disableScreenShare(){!this.screenShareEnabled||(await this.localMediaHandler.disableScreenShare(),this.roomJoined&&await h(this,ot,lt).disableScreenShare(),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks}),ge.hasFeature(me.TROUBLESHOOTING)&&($o.cleanup(),ad.cleanup()))}getAllDevices(){return this.localMediaHandler.getAllDevices()}setIsPinned(t,e=!0){L(this,gh,t);const i=t?"pinned":"unpinned";e&&this.emit(i,this)}get isPinned(){return h(this,gh)}get webinarStageStatus(){return h(this,Gd)}async pin(){if(!this.roomJoined)throw new U("Can`t pin participants without joining room");return h(this,ot,lt).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new U("Can`t unpin participants without joining room");return h(this,ot,lt).pinPeer(null)}async setDevice(t){const e={added:[t],removed:[]};if("isDeprecated"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(e,!0);return}switch(t.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(t)}catch{this.roomJoined&&await h(this,ot,lt).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(t);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(t)}catch{this.roomJoined&&await h(this,ot,lt).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}}cleanUpTracks(){var t,e,i,r;(t=this.audioTrack)==null||t.stop(),(e=this.rawAudioTrack)==null||e.stop(),(i=this.videoTrack)==null||i.stop(),(r=this.rawVideoTrack)==null||r.stop()}async requestToJoinStage(){R.emitAsync(P.REQUEST_TO_JOIN_STAGE)}async withdrawRequestToJoinStage(){R.emitAsync(P.WITHDRAW_REQUEST_TO_JOIN_STAGE)}async leaveStage(){R.emitAsync(P.LEAVE_STAGE)}async joinStage(){R.emitAsync(P.JOIN_STAGE)}setWebinarStageStatus(t){switch(L(this,Gd,t),R.emit(P.SET_WEBINAR_STAGE_STATUS,t),t){case"ACCEPTED_TO_JOIN_STAGE":this.emit("joinStageRequestAccepted");break;case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}async disablePreview(){return this}},r1=new WeakMap,ph=new WeakMap,sa=new WeakMap,gh=new WeakMap,Gd=new WeakMap,ot=new WeakSet,lt=function(){return Ai()},zP);Li([C.trace("DyteSelf.setupEvents")],ii.prototype,"setupEvents",1);Li([C.trace("DyteSelf.setupTracks")],ii.prototype,"setupTracks",1);Li([C.trace("DyteSelf.resetSelf")],ii.prototype,"resetSelf",1);Li([C.trace("DyteSelf.destructMediaHandler")],ii.prototype,"destructMediaHandler",1);Li([C.trace("DyteSelf.removeDocumentEventListeners")],ii.prototype,"removeDocumentEventListeners",1);Li([C.trace("DyteSelf.enableAudio")],ii.prototype,"enableAudio",1);Li([C.trace("DyteSelf.enableVideo")],ii.prototype,"enableVideo",1);Li([C.trace("DyteSelf.updateVideoConstraints")],ii.prototype,"updateVideoConstraints",1);Li([C.trace("DyteSelf.enableScreenShare")],ii.prototype,"enableScreenShare",1);Li([C.trace("DyteSelf.updateScreenshareConstraints")],ii.prototype,"updateScreenshareConstraints",1);Li([C.trace("DyteSelf.disableAudio")],ii.prototype,"disableAudio",1);Li([C.trace("DyteSelf.disableVideo")],ii.prototype,"disableVideo",1);Li([C.trace("DyteSelf.disableScreenShare")],ii.prototype,"disableScreenShare",1);Li([C.trace("DyteSelf.setDevice")],ii.prototype,"setDevice",1);Li([C.trace("DyteSelf.requestToJoinStage")],ii.prototype,"requestToJoinStage",1);Li([C.trace("DyteSelf.withdrawRequestToJoinStage")],ii.prototype,"withdrawRequestToJoinStage",1);Li([C.trace("DyteSelf.leaveStage")],ii.prototype,"leaveStage",1);Li([C.trace("DyteSelf.joinStage")],ii.prototype,"joinStage",1);Li([C.trace("DyteSelf.deprecated.disablePreview")],ii.prototype,"disablePreview",1);ii=Li([Hi(t=>{throw new U(t.message,"1100")})],ii);function Eue(t){return Ne.isV2AuthToken?t.stageAccess===ct.Allowed:!1}function jO(t){return!(t.viewType==="LIVESTREAM"||t.viewType==="CHAT")}let qd;class Yp{constructor(e){w(this,"socket"),this.socket=e,this.handleSocketEvents()}static create(e){return qd||(qd=new Yp(e)),qd}static cleanup(){var e;try{(e=qd==null?void 0:qd.socket)==null||e.disconnect()}catch{x.error("roomSocketHandler::cleanup")}qd=void 0}set onReconnect(e){this.socket.onStateEvent("reconnected",e)}async joinRoom(e,i,r,s){const n={capabilities:[],peer:{displayName:e,peerId:i,userId:r,waitlisted:!1},roomUuid:s},a=km.fromBinary((await this.socket.sendMessagePromise(ye.joinRoom,Goe.toBinary(n))).payload);await R.emitAsync(P.SOCKET_SERVICE_ROOM_JOINED,a);try{const{room:o}=await this.getRoomState();R.emit(P.ROOM_STATE,o)}catch(o){x.error("RoomSocketHandler.joinRoom.failedToGetRoomState",{error:o})}}async getAllAddedParticipants(){try{return Ice.fromBinary((await this.socket.sendMessagePromise(ye.getAllAddedParticipants)).payload).participants.map(({id:e,...i})=>({...i,userId:e}))}catch{return[]}}async getRoomPeers(e,i,r){let s;try{const n={seachQuery:e,limit:i,offset:r},a=await this.socket.sendMessagePromise(ye.getRoomPeersInfo,Loe.toBinary(n));s=Uoe.fromBinary(a.payload)}catch(n){x.error("getRoomPeers::binary_decode_error",{error:n})}return s}async getRoomState(){let e=mP.create();try{const i=await this.socket.sendMessagePromise(ye.getRoomInfo);e=mP.fromBinary(i.payload)}catch(i){x.error("getRoomState::binary_decode_error",{error:i})}return e}async broadcastMessage(e,i){const r={type:e,payload:new TextEncoder().encode(JSON.stringify(i)),timestamp:Date.now(),peerIds:[]};return this.socket.sendMessagePromise(ye.broadcastMessage,yP.toBinary(r))}leaveRoom(){this.socket.sendMessage(ye.leaveRoom,Joe.toBinary({}))}async kick(e){const i={peerIds:[e]};this.socket.sendMessage(ye.kick,Oce.toBinary(i))}async kickAll(){this.socket.sendMessage(ye.kickAll)}getWaitingRoomRequests(){this.socket.sendMessage(ye.getWaitingRoomRequests)}acceptWaitingRoomRequest(e){const i={userIds:e};this.socket.sendMessage(ye.acceptWaitingRoomRequests,Uce.toBinary(i))}rejectWaitingRoomRequest(e){const i={userIds:e};this.socket.sendMessage(ye.denyWaitingRoomRequests,$ce.toBinary(i))}handleSocketEvents(){this.socket.on(ye.broadcastMessage,({payload:e})=>{try{const i=yP.fromBinary(e);R.emit(P.ROOM_MESSAGE,{payload:JSON.parse(new TextDecoder().decode(i.payload)),type:i.type,timestamp:i.timestamp})}catch(i){x.error("failed to decode broadcast message:",i)}})}on(e,i){let r,s;switch(e){case ye.joinRoom:case ye.leaveRoom:case ye.kick:case ye.kickAll:{r=km.fromBinary.bind(km),s=km.create();break}case ye.getWaitingRoomRequests:{r=(n,a)=>n?bP.fromBinary(n,a):{requests:[]},s=bP.create();break}}this.socket.on(e,({payload:n})=>{let a=s;if(!r)return i(void 0);try{a=r(n)}catch(o){x.error("roomSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}var Tue=Object.defineProperty,Cue=Object.getOwnPropertyDescriptor,Tg=(t,e,i,r)=>{for(var s=r>1?void 0:r?Cue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Tue(e,i,s),s},Jd,ws,ni,hi,FP;const $O=(FP=class{constructor(t,e,i,r){N(this,ni),w(this,"self"),w(this,"authToken"),w(this,"peerId"),N(this,Jd,void 0),w(this,"roomNodeSetupInProgress",!1),w(this,"viewType"),N(this,ws,void 0);var s,n,a,o;L(this,Jd,t),L(this,ws,i),this.authToken=(n=(s=Ai())==null?void 0:s.authToken)!=null?n:t.authToken,this.peerId=(o=(a=Ai())==null?void 0:a.peerId)!=null?o:t.peerId,this.self=e,this.viewType=r,e.config.viewType!==Tt.Chat&&this.setupEvents()}get roomJoined(){var t;return((t=h(this,ni,hi))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,r,s,n){var a,o;const c=Bi(),{isV2AuthToken:u}=Ne,l=await ii.__init__((o=(a=Ai())==null?void 0:a.peerId)!=null?o:t.peerId,Ne.isV2AuthToken?i.participant:i,r,s,n),p=u?i.participant.organizationId:i.organizationId;if(C.meetingMetadata.organizationId=p,ge.hasFeature(me.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"){ge.getValue(me.CALLSTATS_INGESTION_LAYER);let m="dev";tt.apiBase.indexOf("cluster.dyte")>-1||tt.apiBase.indexOf("api.dyte")>-1?m="production":tt.apiBase.indexOf("staging.dyte")>-1&&(m="staging"),setTimeout(async()=>{var y,b;ue.initialize({peerId:(b=(y=Ai())==null?void 0:y.peerId)!=null?b:t.peerId,engineName:Ze.getDeviceInfo().engineName,env:m,iceServers:await c.getICEServers(),apiBase:tt.apiBase,flags:ge.getAllFlags(),logger:x})})}return new $O(t,l,e,s.viewType)}async shareMediaTracks(){if(this.self.audioTrack)try{await h(this,ni,hi).shareMic(this.self.audioTrack)}catch{this.self.disableAudio()}if(this.self.videoTrack)try{await h(this,ni,hi).shareWebcam(this.self.videoTrack)}catch{this.self.disableVideo()}}async kickHandler(t){let e="kicked";(t==null?void 0:t.kickType)==="kickAll"&&(e="ended"),this.leaveRoom(e)}waitlistedHandler(t){x.info("SelController.waitlisted",{source:t}),this.self.waitlistStatus="waiting",this.self.roomState="waitlisted",this.self.emit("waitlisted")}waitlistAcceptHandler(t){if(x.info("SelController.waitlistAccepted",{source:t}),this.self.waitlistStatus==="accepted"){x.warn("SelfController.WAITLIST_ACCEPTED.UserAlreadyAccepted");return}this.self.waitlistStatus="accepted",this.joinRoom()}waitlistRejectedHandler(t){if(x.info("SelfController.waitlistRejected",{source:t}),this.self.waitlistStatus==="rejected"){x.warn("SelfController.WAITLIST_REJECTED.UserAlreadyRejected");return}this.self.waitlistStatus="rejected",this.leaveRoom("rejected")}setupEvents(){R.on(P.DISABLE_AUDIO,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),ue.audioOff())}),R.on(P.DISABLE_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),ue.videoOff())}),R.on(P.MUTE_ALL,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),ue.audioOff())}),R.on(P.MUTE_ALL_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),ue.videoOff())}),R.onAsync(P.SOCKET_SERVICE_ROOM_JOINED,async t=>{var e;(e=t==null?void 0:t.peer)!=null&&e.waitlisted&&this.waitlistedHandler("socketservice")}),R.on(P.WAITLISTED,()=>{this.waitlistedHandler("roomnode")}),R.on(P.WAITLIST_ACCEPTED,async()=>{this.waitlistAcceptHandler("roomnode")}),h(this,ws).on(ye.waitingRoomRequestAccepted,()=>{this.waitlistAcceptHandler("socketservice")}),R.on(P.WAITLIST_REJECTED,async()=>{this.waitlistRejectedHandler("roomnode")}),h(this,ws).on(ye.waitingRoomRequestDenied,()=>{this.waitlistRejectedHandler("socketservice")}),R.on(P.KICKED,this.kickHandler.bind(this)),h(this,ws).on(ye.kick,()=>{this.kickHandler({kickType:"kick"})}),h(this,ws).on(ye.kickAll,()=>{this.kickHandler({kickType:"kickAll"})}),R.on(P.PRODUCER_SCORE_UPDATE,({score:t,kind:e,appData:i})=>{var r;const s=e==="video"&&((r=i==null?void 0:i.screenShare)!=null?r:!1);this.self.emit("mediaScoreUpdate",{kind:e,isScreenshare:s,score:t})}),R.on(P.PRODUCER_STATUS_UPDATE,({status:t})=>{this.self.emit("mediaChannelUpdate",{status:t})}),R.onAsync(P.JOIN_MEDIA_ROOM,this.setupRoomNode.bind(this)),R.onAsync(P.LEAVE_MEDIA_ROOM,this.leaveMediaRoom.bind(this)),R.on(P.PIP_HANGUP,this.leaveRoom.bind(this))}async setupRoomNode(){var t;if(this.roomNodeSetupInProgress){x.warn("SelfController.roomNodeSetupInProgress");return}if((t=h(this,ni,hi))!=null&&t.roomJoined){x.warn("SelfController.roomNodeAlreadySetup");return}this.roomNodeSetupInProgress=!0;const e=async()=>{var r,s;let n="";if(h(this,ni,hi)instanceof Je){await h(this,ni,hi).setupTransports();const a=await h(this,ni,hi).getRoomState();({roomUUID:n}=(s=(r=a==null?void 0:a.payload)==null?void 0:r.roomState)!=null?s:{}),Bi().setRoomUUID(n)}await this.joinMediaRoom(n),this.roomNodeSetupInProgress=!1,this.self.roomState="joined",this.self.emit("roomJoined")},i=Ne.roomNodeOptions;i.useHiveMedia?await CO({...i,roomName:i.roomName,peerId:i.peerId,socket:h(this,Jd)}):await PO({...i,roomName:i.roomName,peerId:i.peerId,viewType:this.viewType}),h(this,ni,hi).mediaConnected?e():R.once(P.ROOM_NODE_CONNECTED,async()=>{e()})}async joinRoom(){var t,e;try{const i=Bi();let r="";if(h(this,ni,hi)instanceof Je){const s=await h(this,ni,hi).getRoomState();({roomUUID:r}=(e=(t=s==null?void 0:s.payload)==null?void 0:t.roomState)!=null?e:{}),i.setRoomUUID(r)}else i.setRoomUUID(Ne.meetingId);nO(this.self.config.viewType,h(this,Jd).capabilities)&&(await h(this,ws).joinRoom(this.self.name,this.self.id,this.self.userId,r),h(this,ws).socket.flush(),h(this,ws).onReconnect=async()=>{await h(this,ws).joinRoom(this.self.name,this.self.id,this.self.userId,r),h(this,ws).socket.flush()}),jO(this.self.config)&&await this.joinMediaRoom(r)}catch(i){throw x.error("Error in joinRoom",{error:i}),i}}async leaveRoom(t="left"){var e;const{roomJoined:i}=this;await this.leaveMediaRoom();try{(e=h(this,Jd))==null||e.disconnect()}catch{x.error("SelfController::leaveRoom::socketDisconnect")}this.self.roomState=t,RO(),Yp.cleanup(),!(t!=="rejected"&&this.self.config.viewType!=="LIVESTREAM"&&!i)&&this.self.emit("roomLeft",{state:t})}async joinMediaRoom(t){var e,i,r,s;if((e=h(this,ni,hi))!=null&&e.isDisconnected&&h(this,ni,hi)instanceof Je){(i=h(this,ni,hi))==null||i.reconnect();return}if(h(this,ni,hi)instanceof Le&&this.self.waitlistStatus==="waiting")return;const{roomJoined:n}=(s=await((r=h(this,ni,hi))==null?void 0:r.joinRoom(this.self.name,!this.self.audioEnabled,t,void 0,{audio:this.self.audioEnabled,video:this.self.videoEnabled,screen:this.self.screenShareEnabled})))!=null?s:{};h(this,ni,hi)instanceof Le&&(h(this,ni,hi).onSocketReconnection=this.joinMediaRoom.bind(this,t)),n&&await this.shareMediaTracks()}async leaveMediaRoom(){await this.cleanupSelf(),h(this,ni,hi)&&this.roomJoined&&(await h(this,ni,hi).leaveRoom(),h(this,ni,hi).roomJoined=!1)}async cleanupSelf(){await this.self.disableAudio(),await this.self.disableVideo(),await this.self.disableScreenShare(),this.self.cleanUpTracks(),this.self.destructMediaHandler(),this.self.removeDocumentEventListeners()}},Jd=new WeakMap,ws=new WeakMap,ni=new WeakSet,hi=function(){return Ai()},FP);let Pu=$O;Tg([C.trace("SelfController.setupEvents")],Pu.prototype,"setupEvents",1);Tg([C.trace("SelfController.joinRoom")],Pu.prototype,"joinRoom",1);Tg([C.trace("SelfController.leaveRoom")],Pu.prototype,"leaveRoom",1);Tg([C.trace("SelfController.joinMediaRoom")],Pu.prototype,"joinMediaRoom",1);Tg([C.trace("SelfController.leaveMediaRoom")],Pu.prototype,"leaveMediaRoom",1);var Pue=Object.defineProperty,Rue=Object.getOwnPropertyDescriptor,tc=(t,e,i,r)=>{for(var s=r>1?void 0:r?Rue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Pue(e,i,s),s},mh,Kd,Qa,hc,Qd,VP;let us=(VP=class extends Mt{constructor(t,e){super(),N(this,Qa),w(this,"id"),w(this,"userId"),w(this,"name"),w(this,"picture"),w(this,"isHost"),w(this,"clientSpecificId"),w(this,"flags"),w(this,"device"),w(this,"videoTrack"),w(this,"audioTrack"),w(this,"screenShareTracks"),w(this,"videoEnabled"),w(this,"audioEnabled"),w(this,"screenShareEnabled"),w(this,"producers"),N(this,mh,void 0),w(this,"supportsRemoteControl",!1),N(this,Kd,void 0),w(this,"presetName"),N(this,Qd,void 0);const{id:i,userId:r,displayName:s,device:n,picture:a,isHost:o,flags:c,clientSpecificId:u,stageStatus:l,customParticipantId:p,audioMuted:m,audioTrack:y,videoEnabled:b=!1,videoTrack:S,producers:E,metadata:k}=t;this.id=i,this.userId=r,this.name=s,this.device=n,this.picture=a,this.isHost=o,this.flags=c,L(this,Kd,l!=null?l:Fi.ON_STAGE),this.clientSpecificId=p!=null?p:u,this.audioEnabled=!m,this.audioTrack=y,this.videoEnabled=b,this.videoTrack=S,this.screenShareTracks={audio:void 0,video:void 0},this.producers=E!=null?E:[],this.presetName=k==null?void 0:k.preset_name,L(this,mh,!1),L(this,Qd,e),this.setupEvents()}get webinarStageStatus(){return h(this,Kd)}get stageStatus(){return h(this,Kd)}get roomJoined(){var t;return((t=h(this,Qa,hc))==null?void 0:t.roomJoined)===!0}setVideoEnabled(t,e=!0){this.videoEnabled=t,e&&(x.info("DyteParticipant::setVideoEnabled::videoUpdate",{...Gc(this)}),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}))}setAudioEnabled(t,e=!0){this.audioEnabled=t,e&&(x.info("DyteParticipant::setAudioEnabled::audioUpdate",{...Gc(this)}),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}))}setScreenShareEnabled(t,e=!0){this.screenShareEnabled=t,e&&this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}setupEvents(){R.onAsync(P.UPDATE_PEER_STAGE_STATUS,async({id:t,status:e})=>{t===this.id&&e!==this.stageStatus&&this.setStageStatus(e)})}async pin(){if(!this.roomJoined)throw new U("Can`t pin participant without joining room");return h(this,Qa,hc).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new U("Can`t unpin participant without joining room");return h(this,Qa,hc).pinPeer(null)}setIsPinned(t,e=!0){L(this,mh,t);const i=t?"pinned":"unpinned";e&&this.emit(i,this)}async disableAudio(){const t=this.id;if(x.info("DyteParticipant::disable_audio",{dyteParticipant:{id:t}}),!this.roomJoined)throw new U("Can`t disable participant audio without joining room");if(h(this,Qd).permissions.canDisableParticipantAudio)return h(this,Qa,hc).disableAudio(t);throw x.error("DyteParticipant::unauthorized_disable_audio",{dyteParticipant:{id:t}}),new U("Unauthorized: User does not have permission to disable participant audio.")}async kick(){const t=this.id;if(x.info("DyteParticipant::kick",{dyteParticipant:{id:t}}),!this.roomJoined)throw new U("Can`t kick participant without joining room");if(h(this,Qd).permissions.kickParticipant)return h(this,Qa,hc).kick(t);throw x.error("DyteParticipant::unauthorized_kick",{dyteParticipant:{id:t}}),new U("Unauthorized: User does not have permission to kick participants.")}async disableVideo(){const t=this.id;if(x.info("DyteParticipant::disable_video",{dyteParticipant:{id:t}}),!this.roomJoined)throw new U("Can`t disable participant video without joining room");if(h(this,Qd).permissions.canDisableParticipantVideo)return h(this,Qa,hc).disableVideo(t);throw x.error("DyteParticipant::unauthorized_disable_video",{dyteParticipant:{id:t}}),new U("Unauthorized: User does not have permission to disable participant video.")}async acceptJoinStageRequest(){R.emitAsync(P.ACCEPT_JOIN_STAGE_REQUEST,{userId:this.userId})}async rejectRequestToJoinStage(){R.emitAsync(P.REJECT_REQUEST_TO_JOIN_STAGE,{userId:this.userId})}async removeFromStage(){R.emitAsync(P.REMOVE_FROM_STAGE,{userId:this.userId})}setStageStatus(t){L(this,Kd,t);let e;t===Fi.OFF_STAGE&&(e="peerStoppedPresenting"),t===Fi.ON_STAGE&&(e="peerStartedPresenting"),t===Fi.ACCEPTED_TO_JOIN_STAGE&&(e="peerAcceptedToJoinStage"),t===Fi.REQUESTED_TO_JOIN_STAGE&&(e="peerRequestToJoinStage"),e&&this.emit(e,this),this.emit("stageStatusUpdate",this)}setWebinarStageStatus(t){this.setStageStatus(t)}get isPinned(){return h(this,mh)}},mh=new WeakMap,Kd=new WeakMap,Qa=new WeakSet,hc=function(){return Ai()},Qd=new WeakMap,VP);tc([C.trace("DyteParticipant.disableAudio")],us.prototype,"disableAudio",1);tc([C.trace("DyteParticipant.kick")],us.prototype,"kick",1);tc([C.trace("DyteParticipant.disableVideo")],us.prototype,"disableVideo",1);tc([C.trace("DyteParticipant.acceptJoinStageRequest")],us.prototype,"acceptJoinStageRequest",1);tc([C.trace("DyteParticipant.rejectRequestToJoinStage")],us.prototype,"rejectRequestToJoinStage",1);tc([C.trace("DyteParticipant.removeFromStage")],us.prototype,"removeFromStage",1);tc([C.trace("DyteParticipant.setStageStatus")],us.prototype,"setStageStatus",1);us=tc([Hi(t=>{throw new U(t.message,"1200")})],us);var xi,hl;class JS extends Map{constructor(e){const{onAddEvent:i="added",onDeleteEvent:r="deleted",onClearEvent:s="cleared"}=e!=null?e:{};super(),N(this,xi,void 0),N(this,hl,void 0),w(this,"onAddEvent"),w(this,"onDeleteEvent"),w(this,"onClearEvent"),L(this,xi,new Mt),this.onAddEvent=i,this.onDeleteEvent=r,this.onClearEvent=s,L(this,hl,new Map)}emit(e,...i){return h(this,xi).emit(e,...i)}on(e,i){return h(this,xi).on(e,i)}addListener(e,i){return h(this,xi).addListener(e,i)}off(e,i){return h(this,xi).off(e,i)}once(e,i){return h(this,xi).once(e,i)}prependListener(e,i){return h(this,xi).prependListener(e,i)}prependOnceListener(e,i){return h(this,xi).prependOnceListener(e,i)}removeListener(e,i){return h(this,xi).removeListener(e,i)}removeAllListeners(e){return h(this,xi).removeAllListeners(e)}listeners(e){return h(this,xi).listeners(e)}listenerCount(e){return h(this,xi).listenerCount(e)}getMaxListeners(){return h(this,xi).getMaxListeners()}setMaxListeners(e){return h(this,xi).setMaxListeners(e)}eventNames(){return h(this,xi).eventNames()}add(e,i=!0){return this.set(e.id,e,i)}set(e,i,r=!0){const s=super.set(e,i),n=(a,...o)=>{this.emit(a,i,...o)};return h(this,hl).set(e,n),i.on("*",n),r&&h(this,xi).emit(this.onAddEvent,i),s}delete(e,i=!0,r=!1){const s=this.get(e);if(!s)return!1;s.removeListener("*",h(this,hl).get(e));const n=super.delete(e);return r&&s.removeAllListeners(),i&&h(this,xi).emit(this.onDeleteEvent,s),n}clear(e=!0,i=!1){this.forEach(s=>{s.removeListener("*",h(this,hl).get(s.id)),i&&s.removeAllListeners()});const r=super.clear();return e&&h(this,xi).emit(this.onClearEvent),r}toArray(){return Array.from(this.values())}}xi=new WeakMap,hl=new WeakMap;class Tm extends JS{constructor(e){const{onAddEvent:i="participantJoined",onDeleteEvent:r="participantLeft",onClearEvent:s="participantsCleared"}=e!=null?e:{};super({onAddEvent:i,onDeleteEvent:r,onClearEvent:s})}add(e,i=!0){return super.add(e,i)}clear(e=!0,i=!1){return super.clear(e,i)}delete(e,i=!0,r=!1){return super.delete(e,i,r)}}class Iue{constructor(){w(this,"_orderedArray"),w(this,"_map"),this._map=new Map,this._orderedArray=[]}add(e,i){if(!this._map.has(e))return this._map.set(e,{peerId:e,priority:i}),this._orderedArray.splice(Math.max(i-1,0),0,e),this.index(e);const r=this.index(e);this.delete(e);const s=this.add(e,i);return r!==s?(x.info("DyteSelectedPeer::add()::new_position_for_active_speaker",{selectedPeer:{oldIndex:r,newIndex:s}}),s):-1}delete(e){if(this._map.has(e)){const i=this.index(e);this._map.delete(e),this._orderedArray.splice(i,1)}}index(e){return this._map.has(e)?this._orderedArray.indexOf(e):-1}[Symbol.iterator](){return this._orderedArray[Symbol.iterator]()}}class Aue{constructor(){w(this,"_activeSpeakerPeers"),w(this,"_compulsoryPeers"),this._activeSpeakerPeers=new Iue,this._compulsoryPeers=new Set}add(e,i){if(i<0)return this._compulsoryPeers.add(e),0;if(this.compulsoryPeers.includes(e)&&(i>0||i===246267631)){if(x.info("DyteSelectedPeer::removing_compulsory_peer",{selectedPeer:{peerId:e}}),this._removeFromCompulsoryPeer(e),i===246267631)return-1}else if(i===229490415)return this.delete(e),-1;return this._activeSpeakerPeers.add(e,i)}delete(e){x.info("DyteSelectedPeer::deleting_peer_from_selectedPeer",{selectedPeer:{peerId:e}}),this._removeFromCompulsoryPeer(e),this._activeSpeakerPeers.delete(e)}index(e){return this._activeSpeakerPeers.index(e)}get peers(){return Array.from(new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers)))}get compulsoryPeers(){return Array.from(this._compulsoryPeers.values())}get peerPriorities(){return Array.from(this._activeSpeakerPeers).map((e,i)=>i)}get activeSpeakerPeers(){return Array.from(this._activeSpeakerPeers)}_removeFromCompulsoryPeer(e){this._compulsoryPeers.delete(e)}}var Pc;class Mue extends Mt{constructor(){super(),N(this,Pc,void 0),L(this,Pc,new Map)}__set(e,i){return h(this,Pc).set(e,i)}__clear(){return h(this,Pc).clear()}get(e){return h(this,Pc).get(e)}toArray(){return Array.from(h(this,Pc).values())}}Pc=new WeakMap;const Due={setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{logo:"",timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,grid:{multi:{max_video_count:9,video_fit:"cover"},single:{max_video_count:6,video_fit:"cover"},default_view:"MULTI"},colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",text_primary:"#EEEEEE",video_background:"#1A1A1A"},controls:{pip_toggle:!1},plugins:[]},Oue=Ms(Due);var ur,Fh,Vh,_f,Sf;const wk=class{constructor(t){if(N(this,ur,void 0),N(this,Fh,void 0),N(this,Vh,void 0),N(this,_f,void 0),N(this,Sf,[]),!t)throw new U("Could not load preset theme.");L(this,ur,t),L(this,Fh,1),L(this,Vh,Tt.GroupCall)}static fromResponse(t){return new wk(t)}static default(){return new wk(Oue)}configFromPermissions(t){var e,i,r,s,n,a,o,c,u,l,p,m;L(this,Fh,t.maxScreenshareCount||1),L(this,Vh,t.viewType),L(this,_f,{video:{quality:(r=(i=(e=t==null?void 0:t.produce)==null?void 0:e.video)==null?void 0:i.quality)!=null?r:Fr.video.quality,frameRate:(a=(n=(s=t==null?void 0:t.produce)==null?void 0:s.video)==null?void 0:n.frameRate)!=null?a:Fr.video.frameRate},screenshare:{quality:(u=(c=(o=t==null?void 0:t.produce)==null?void 0:o.screenshare)==null?void 0:c.quality)!=null?u:Fr.screenshare.quality,frameRate:(m=(p=(l=t==null?void 0:t.produce)==null?void 0:l.screenshare)==null?void 0:p.frameRate)!=null?m:Fr.screenshare.frameRate}})}setDisabledPlugins(t){const e=h(this,ur).plugins;e&&e.length>0&&L(this,Sf,t.filter(i=>!e.includes(i)))}get setupScreen(){return h(this,ur).setupScreen}get aloneHere(){return h(this,ur).aloneHere}get waitingRoom(){return h(this,ur).waitingRoom}get controlBar(){return h(this,ur).controlBar}get header(){return h(this,ur).header}get pipMode(){var t;return((t=h(this,ur).controls)==null?void 0:t.pipToggle)||h(this,ur).pipMode}get viewType(){return h(this,Vh)}get autoTune(){return h(this,ur).autoTune}get grid(){return h(this,ur).grid}get maxVideoStreams(){return{mobile:this.grid.multi.maxVideoCount>6?6:this.grid.multi.maxVideoCount,desktop:this.grid.multi.maxVideoCount}}get maxScreenShareCount(){return h(this,Fh)}get colors(){return h(this,ur).colors}get controls(){return h(this,ur).controls}get plugins(){return h(this,ur).plugins}get disabledPlugins(){return h(this,Sf)}get mediaConstraints(){return h(this,_f)}get isV2(){return!1}};let kk=wk;ur=new WeakMap,Fh=new WeakMap,Vh=new WeakMap,_f=new WeakMap,Sf=new WeakMap;const BP=1080,HP=1920,Lue=(t,e,i,r,s,n)=>{let a=.5,o=.5;const c=s,u=n,l=Math.min(i/c,r/u);let p=c*l,m=u*l,y,b,S,E,k=1;return p<i&&(k=i/p),Math.abs(k-1)<1e-14&&m<r&&(k=r/m),p*=k,m*=k,S=c/(p/i),E=u/(m/r),y=(c-S)*a,b=(u-E)*o,y<0&&(y=0),b<0&&(b=0),S>c&&(S=c),E>u&&(E=u),[y,b,S,E,t,e,i,r]};var Pn,Rc,Jt,oa,co,Gs,Kt;class Nue extends Mt{constructor(e){var i,r,s,n,a,o,c,u;if(super(),N(this,Pn,void 0),N(this,Rc,void 0),N(this,Jt,{height:BP,width:HP}),N(this,oa,{brand:"#2160FD",background:"#141414",videoBackground:"#191919",textOnBrand:"#EEEEEE"}),N(this,co,void 0),N(this,Gs,{}),N(this,Kt,void 0),w(this,"cleanupEventListeners",()=>{h(this,Kt).removeListener("stageJoined",this.enablePipMediaControls),h(this,Kt).removeListener("stageLeft",this.unmountEvents),h(this,Kt).removeListener("videoUpdate",this.onSelfVideoUpdateListener),h(this,Kt).removeListener("audioUpdate",this.onSelfAudioUpdateListener),h(this,Kt).removeListener("roomLeft",this.disable)}),w(this,"enablePipMediaControls",()=>{this.mountAudioEvents(),this.mountVideoEvents()}),w(this,"onSelfVideoUpdateListener",({videoEnabled:l})=>{this.updateMediaSession("CAMERA",l)}),w(this,"onSelfAudioUpdateListener",({audioEnabled:l})=>{this.updateMediaSession("MIC",l)}),w(this,"eventCallback",l=>{l==="CAMERA"&&(h(this,Kt).videoEnabled?h(this,Kt).disableVideo():h(this,Kt).enableVideo(),this.emit("cameraToggled")),l==="MIC"&&(h(this,Kt).audioEnabled?h(this,Kt).disableAudio():h(this,Kt).enableAudio(),this.emit("micToggled")),l==="END"&&(R.emit(P.PIP_HANGUP),this.cleanupEventListeners(),this.emit("hangup"),this.cleanup())}),w(this,"unmountEvents",()=>{navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||(navigator.mediaSession.setActionHandler("togglemicrophone",void 0),navigator.mediaSession.setActionHandler("togglecamera",void 0))}),w(this,"animate",()=>{h(this,Gs)!==void 0&&this.paintCanvas(),h(this,co)!==void 0&&L(this,co,requestAnimationFrame(()=>this.animate()))}),w(this,"disable",()=>{this.cleanupEventListeners(),cancelAnimationFrame(h(this,co)),L(this,co,void 0),document.exitPictureInPicture()}),L(this,Kt,e),e.config.isV2===!0)L(this,oa,{brand:e.config.designTokens.colors.brand[500],background:e.config.designTokens.colors.background[1e3],videoBackground:e.config.designTokens.colors.videoBg,textOnBrand:e.config.designTokens.colors.textOnBrand});else if(e.config.isV2===!1){const l=kk.default();L(this,oa,{brand:(r=(i=e.config.colors)==null?void 0:i.primary)!=null?r:l.colors.primary,background:(n=(s=e.config.colors)==null?void 0:s.background)!=null?n:l.colors.background,videoBackground:(o=(a=e.config.colors)==null?void 0:a.videoBackground)!=null?o:l.colors.videoBackground,textOnBrand:(u=(c=e.config.colors)==null?void 0:c.textPrimary)!=null?u:l.colors.textPrimary})}}setupEventListeners(){h(this,Kt).addListener("stageJoined",this.enablePipMediaControls),h(this,Kt).addListener("stageLeft",this.unmountEvents),h(this,Kt).addListener("videoUpdate",this.onSelfVideoUpdateListener),h(this,Kt).addListener("audioUpdate",this.onSelfAudioUpdateListener),h(this,Kt).addListener("roomLeft",this.disable)}createCanvas(){const e=document.createElement("canvas");e.height=h(this,Jt).height,e.width=h(this,Jt).width,L(this,Pn,e)}setupMediaSessionEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||(navigator.mediaSession.setActionHandler("hangup",()=>{this.eventCallback("END")}),this.mountAudioEvents(),this.mountVideoEvents())}mountAudioEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setMicrophoneActive===void 0||h(this,Kt).permissions.canProduceAudio&&navigator.mediaSession.setActionHandler("togglemicrophone",()=>{this.eventCallback("MIC")})}mountVideoEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||h(this,Kt).permissions.canProduceVideo&&navigator.mediaSession.setActionHandler("togglecamera",()=>{this.eventCallback("CAMERA")})}getSources(){const e=Object.values(h(this,Gs)),i=e.filter(r=>r.pinned);return i.length===1?i:e}drawEmptyTile(e,i,r,s,n){if(h(this,Pn)===void 0)return;const a=h(this,Pn).getContext("2d"),o=h(this,Pn).width,c=4,u=4,l=i-c*2,p=r-c*2,m=Math.floor(o/l),y=Math.floor(e/m),b=e%m*(l+c)+c,S=y*(p+c)+c;a.fillStyle=h(this,oa).videoBackground,a.strokeStyle=h(this,oa).brand,a.beginPath(),a.moveTo(b+u,S),a.arcTo(b+l,S,b+l,S+u,u),a.arcTo(b+l,S+p,b+l-u,S+p,u),a.arcTo(b,S+p,b,S+p-u,u),a.arcTo(b,S,b+u,S,u),a.closePath(),a.fill(),a.stroke();const E=l/6,k=l/2+b,T=p/2+S;if(a.save(),(s||n)&&(a.beginPath(),a.arc(k,T,E,0,Math.PI*2),a.fillStyle=h(this,oa).brand,a.fill()),s&&(a.fillStyle=h(this,oa).textOnBrand,a.font=`${E/2}px sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(s,k,T)),n){const I=new Image;I.src=n,I.onload=()=>{a.drawImage(I,k-E,T-E,E*2,E*2),a.restore()}}}drawGrid(e,i,r){if(h(this,Pn)===void 0)return;const s=h(this,Pn).getContext("2d");s.fillStyle=h(this,oa).background,s.fillRect(0,0,h(this,Jt).width,h(this,Jt).height);const n=this.getSources();let a=0,o=0;for(;a<h(this,Jt).height-5;){let c=0;for(;c<h(this,Jt).width-5&&o<r;){const u=n[o].element;if(n[o].enabled){const[l,p,m,y,b,S,E,k]=Lue(c,a,e,i,u.videoWidth,u.videoHeight);s.drawImage(u,l,p,m,y,b,S,E,k)}else this.drawEmptyTile(o,e,i,n[o].displayText);o+=1,c+=e}a+=i}}calcGridElemSize(e){switch(e){case 0:case 1:return[h(this,Jt).width,h(this,Jt).height];case 2:return[Math.floor(h(this,Jt).width/2),h(this,Jt).height];case 3:case 4:return[Math.floor(h(this,Jt).width/2),Math.floor(h(this,Jt).height/2)];case 5:case 6:return[Math.floor(h(this,Jt).width/3),Math.floor(h(this,Jt).height/2)];case 7:case 8:case 9:return[Math.floor(h(this,Jt).width/3),Math.floor(h(this,Jt).height/3)];default:return[Math.floor(h(this,Jt).width/3),Math.floor(h(this,Jt).height/2)]}}paintCanvas(){const e=this.getSources().length,[i,r]=this.calcGridElemSize(e);this.drawGrid(i,r,e)}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}get isActive(){return document.pictureInPictureElement!==null}cleanup(){this.isSupported()&&document.exitPictureInPicture!==void 0&&document.pictureInPictureElement!==null&&document.exitPictureInPicture(),this.removeAllSources(),L(this,Pn,void 0),L(this,Rc,void 0),L(this,co,void 0)}init({height:e,width:i}={}){this.cleanup(),this.createCanvas(),this.setupMediaSessionEvents();const r=document.createElement("video");L(this,Jt,{height:e!=null?e:BP,width:i!=null?i:HP}),r.height=h(this,Jt).height,r.width=h(this,Jt).width,r.autoplay=!0,r.srcObject=h(this,Pn).captureStream(24),L(this,Rc,r),h(this,Rc).onloadedmetadata=()=>{try{this.emit("pipStarted"),h(this,Rc).onleavepictureinpicture=()=>{this.emit("pipEnded")}}catch{this.emit("pipEnded")}},this.paintCanvas()}updateMediaSession(e,i){navigator.mediaSession!==void 0&&(e==="CAMERA"&&navigator.mediaSession.setCameraActive!==void 0&&navigator.mediaSession.setCameraActive(i),e==="MIC"&&navigator.mediaSession.setMicrophoneActive!==void 0&&navigator.mediaSession.setMicrophoneActive(i))}enableSource(e){h(this,Gs)[e]!==void 0&&(h(this,Gs)[e].enabled=!0)}disableSource(e){h(this,Gs)[e]!==void 0&&(h(this,Gs)[e].enabled=!1)}addSource(e,i,r,s=!1,n=void 0){s&&this.removePinnedSource(),h(this,Gs)[e]={id:e,element:i,enabled:r,pinned:s,displayText:n?n.substring(0,2):void 0}}removeSource(e){delete h(this,Gs)[e]}removePinnedSource(){const[e]=this.getSources();e&&this.removeSource(e.id)}removeAllSources(){L(this,Gs,{})}enable(){this.setupEventListeners(),this.updateMediaSession("CAMERA",h(this,Kt).videoEnabled),this.updateMediaSession("MIC",h(this,Kt).audioEnabled),L(this,co,requestAnimationFrame(()=>this.animate())),h(this,Rc).requestPictureInPicture()}}Pn=new WeakMap,Rc=new WeakMap,Jt=new WeakMap,oa=new WeakMap,co=new WeakMap,Gs=new WeakMap,Kt=new WeakMap;var Uue=Object.defineProperty,jue=Object.getOwnPropertyDescriptor,Us=(t,e,i,r)=>{for(var s=r>1?void 0:r?jue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Uue(e,i,s),s},ki,Ui,Ya,Cn,WP;let Wr=(WP=class extends Mt{constructor(t,e){super(),N(this,ki),w(this,"waitlisted"),w(this,"joined"),w(this,"active"),w(this,"pinned"),w(this,"all"),w(this,"pip"),N(this,Ya,void 0),N(this,Cn,void 0),w(this,"viewMode"),w(this,"currentPage"),w(this,"lastActiveSpeaker"),w(this,"selectedPeers"),L(this,Ya,t),L(this,Cn,e),this.waitlisted=new Tm,this.joined=new Tm,this.active=new Tm,this.pinned=new Tm,this.all=new Mue,this.pip=new Nue(t),this.selectedPeers=new Aue,this.viewMode="ACTIVE_GRID",this.currentPage=0}get roomJoined(){var t;return((t=h(this,ki,Ui))==null?void 0:t.roomJoined)===!0}get count(){return this.joined.size}get maxActiveParticipantsCount(){return h(this,ki,Ui).maxPreferredStreams}get pageCount(){return this.viewMode==="PAGINATED"?Math.ceil(this.joined.size/this.maxActiveParticipantsCount):0}acceptWaitingRoomRequest(t){var e,i;if(h(this,ki,Ui)instanceof Je){if(!this.roomJoined)throw new U("Can`t accept waiting room request without joining room");return h(this,ki,Ui).acceptWaitingRequest(t)}const r=(i=(e=this.waitlisted.get(t))==null?void 0:e.userId)!=null?i:t;return h(this,Cn).acceptWaitingRoomRequest([r])}async acceptAllWaitingRoomRequest(t){if(h(this,ki,Ui)instanceof Je){const i=t.map(r=>this.acceptWaitingRoomRequest(r));return Promise.all(i)}const e=t.map(i=>{var r,s;return(s=(r=this.waitlisted.get(i))==null?void 0:r.userId)!=null?s:i});return h(this,Cn).acceptWaitingRoomRequest(e)}async rejectWaitingRoomRequest(t){var e,i;if(h(this,ki,Ui)instanceof Je){if(!this.roomJoined)throw new U("Can`t reject waiting room request without joining room");await h(this,ki,Ui).rejectWaitingRequest(t),this.waitlisted.delete(t)}const r=(i=(e=this.waitlisted.get(t))==null?void 0:e.userId)!=null?i:t;h(this,Cn).rejectWaitingRoomRequest([r])}async setViewMode(t){if(x.info("DyteParticipants::set_view_mode",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),!["ACTIVE_GRID","PAGINATED"].includes(t))throw x.error("DyteParticipants::setViewMode::invalid_view_mode",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new U(`Invalid view mode: ${t}. Try ACTIVE_GRID or PAGINATED.`);if(this.viewMode===t){x.info("DyteParticipants::setViewMode::view_mode_same_as_previous",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});return}if(this.viewMode=t,t==="PAGINATED"){this.currentPage=1;let e=[];h(this,ki,Ui)instanceof Je?{peerIds:e}=(await h(this,ki,Ui).getPage(this.currentPage)).payload:e=this.getPeerIdsForCurrentPage(),R.emit(P.GET_PAGE,{peerIds:e})}else t==="ACTIVE_GRID"&&(this.currentPage=0,h(this,ki,Ui)instanceof Je?h(this,ki,Ui).getPage(this.currentPage):R.emit(P.REFRESH_GRID));this.emit("viewModeChanged",{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount})}getPeerIdsForCurrentPage(){x.info("DyteParticipants::getPeerIdsForCurrentPage()",{pageNavigation:{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});const{compulsoryPeers:t}=this.selectedPeers,e=t.filter(a=>this.joined.has(a)),i=Array.from(this.pinned.keys()).filter(a=>!e.includes(a)),r=Array.from(this.joined.keys()),s=Math.max((this.currentPage-1)*(this.maxActiveParticipantsCount-e.length-i.length)),n=this.currentPage*(this.maxActiveParticipantsCount-e.length-i.length);return e.concat(i,r.slice(s,n))}async setPage(t){if(x.info("DyteParticipants::set_page",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),this.viewMode!=="PAGINATED")return;if(!Number.isInteger(t))throw x.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new U(`Invalid page: ${t}. Page must be an integer.`);if(t<1||t>this.pageCount)throw x.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new U(`Invalid page: ${t}. Page must be greater than 0 and less than or equal to ${this.pageCount}.`);this.currentPage=t;let e=[];h(this,ki,Ui)instanceof Je?{peerIds:e}=(await h(this,ki,Ui).getPage(t)).payload:e=this.getPeerIdsForCurrentPage(),R.emit(P.GET_PAGE,{peerIds:e}),this.emit("pageChanged",{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount})}async disableAllAudio(t){if(x.info("DyteParticipants::disable_all_audio",{actions:{disableAllAudio:{allowUnmute:t}}}),!this.roomJoined)throw new U("Can`t disable all audio without joining room");if(h(this,Ya).permissions.canAllowParticipantAudio)return h(this,ki,Ui).muteAll(t);throw x.error("DyteParticipants::unauthorized_disable_all_audio",{actions:{disableAllAudio:{allowUnmute:t}}}),new U("Unauthorized: User does not have permission to disable peer audio.")}async disableAllVideo(){if(x.info("DyteParticipants::disable_all_video"),!this.roomJoined)throw new U("Can`t disable all video without joining room");if(h(this,Ya).permissions.canAllowParticipantVideo)return h(this,ki,Ui).muteAllVideo();throw x.error("DyteParticipants::unauthorized_disable_all_video"),new U("Unauthorized: User does not have permission to disable peer video.")}async disableAudio(t){this.joined.get(t).disableAudio()}async disableVideo(t){this.joined.get(t).disableVideo()}async kick(t){await this.joined.get(t).kick(),await h(this,Cn).kick(t)}async kickAll(){if(x.info("DyteParticipants::kick_all"),!this.roomJoined)throw new U("Can`t kick all without joining room");if(!h(this,Ya).permissions.kickParticipant)throw x.error("DyteParticipants::unauthorized_kick_all"),new U("Unauthorized: User does not have permission to kick peers.");h(this,ki,Ui).kickAll(),h(this,Cn).kickAll()}async broadcastMessage(t,e){if(x.info("DyteParticipants::broadcastMessage"),!this.roomJoined)throw new U("Can`t broadcast message without joining room");if(!(t!=null&&t.trim()))throw new U("`type` must be a non-empty string.");h(this,ki,Ui)instanceof Je&&h(this,Ya).config.viewType!=="LIVESTREAM"&&h(this,Ya).config.viewType!=="CHAT"?h(this,ki,Ui).broadcastMessage(t,e):h(this,Cn).broadcastMessage(t,e)}async acceptAllRequestToJoinStageRequests(t){R.emitAsync(P.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE,{data:t})}async getAllJoinedPeers(t,e,i){return(await h(this,Cn).getRoomPeers(t,e,i)).peers.map(Zn.formatSocketServiceMessage)}},ki=new WeakSet,Ui=function(){return Ai()},Ya=new WeakMap,Cn=new WeakMap,WP);Us([C.trace("DyteParticipants.setViewMode")],Wr.prototype,"setViewMode",1);Us([C.trace("DyteParticipants.setPage")],Wr.prototype,"setPage",1);Us([C.trace("DyteParticipants.disableAllAudio")],Wr.prototype,"disableAllAudio",1);Us([C.trace("DyteParticipants.disableAllVideo")],Wr.prototype,"disableAllVideo",1);Us([C.trace("DyteParticipants.disablePeerAudio")],Wr.prototype,"disableAudio",1);Us([C.trace("DyteParticipants.disablePeerVideo")],Wr.prototype,"disableVideo",1);Us([C.trace("DyteParticipants.kickPeer")],Wr.prototype,"kick",1);Us([C.trace("DyteParticipants.kickAll")],Wr.prototype,"kickAll",1);Us([C.trace("DyteParticipants.broadcastMessage")],Wr.prototype,"broadcastMessage",1);Us([C.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")],Wr.prototype,"acceptAllRequestToJoinStageRequests",1);Us([C.trace("DyteParticipants.getAllJoinedPeers")],Wr.prototype,"getAllJoinedPeers",1);Wr=Us([Hi(t=>{throw new U(t.message,"1200")})],Wr);var $ue=Object.defineProperty,zue=Object.getOwnPropertyDescriptor,ic=(t,e,i,r)=>{for(var s=r>1?void 0:r?zue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&$ue(e,i,s),s},ji,pl,ca,xf,lo,Ut,Wt;class Zn{constructor(e,i,r){N(this,Ut),w(this,"participants"),N(this,ji,void 0),N(this,pl,void 0),N(this,ca,new Set),N(this,xf,void 0),N(this,lo,void 0),w(this,"syncMembers",async()=>{const s=await h(this,lo).getAllAddedParticipants();this.participants.all.__clear(),s.forEach(n=>this.participants.all.__set(n.userId,n)),this.participants.all.emit("participantsUpdate")}),w(this,"chatRoomJoinHandler",async s=>{s.peer&&s.peer.userId!==h(this,ji).userId&&await this.syncMembers()}),L(this,lo,i),this.participants=new Wr(e,h(this,lo)),L(this,pl,new Map),L(this,ji,e),L(this,xf,jS(e.config.viewType,r)?"socket-service":"room-node"),h(this,xf)==="socket-service"&&e.config.viewType==="CHAT"?this.setupChatEvents():this.setupEvents()}get roomJoined(){var e;return((e=h(this,Ut,Wt))==null?void 0:e.roomJoined)===!0}updatePageParticipants(e){const i=new Set(e),r=new Map(this.participants.active);if(this.participants.active.forEach((s,n)=>{this.participants.active.delete(n,!i.has(n))}),i.forEach(s=>{if(!this.participants.joined.get(s)){x.warn("updatePageParticipants::participant_not_in_joined_list",{dyteParticipant:{id:s}});return}this.participants.active.add(this.participants.joined.get(s),!r.get(s))}),h(this,Ut,Wt)instanceof Le){L(this,ca,new Set(this.participants.active.keys())),Array.from(r.keys()).forEach(n=>{if(i.has(n))return;const a=this.participants.joined.get(n);if(!a)return;const o={producers:a.producers,peerId:a.id};h(this,Ut,Wt).deactivatePeers(o)});const s=[];this.participants.active.forEach(n=>{const a={peerId:n.id,producers:n.producers};s.push(a)}),h(this,Ut,Wt).activatePeers(s)}}updatePinnedParticipants(){this.participants.pinned.forEach(e=>{e.setIsPinned(!1),this.participants.pinned.delete(e.id)})}refreshGridParticipants(e=!1){const i=Array.from(this.participants.joined.keys()),r=this.participants.selectedPeers.peers,s=Array.from(this.participants.pinned.keys());if(this.participants.viewMode!=="ACTIVE_GRID"){x.warn("ParticipantController::refreshGridParticipants::not_refreshing_grid_in_not_active_grid_mode");return}const n=this.participants.maxActiveParticipantsCount-1,a=new Set(r.concat(s).filter(u=>u!==h(this,ji).id&&this.participants.joined.has(u)));let o=Array.from(a);const c=n-a.size;if(c>=0){const u=i.filter(l=>!a.has(l)&&l!==h(this,ji).id).slice(0,c);o=Array.from(a).concat(u)}else o=o.slice(0,n);this.updateActiveParticipantsHiveNode(o,e)}updateActiveParticipantsHiveNode(e,i=!1){if(!this.roomJoined){x.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const r=Array.from(this.participants.active.keys()),s=new Map(this.participants.active),n={};e.forEach(l=>{n[l]=!0});const a=[];r.forEach((l,p)=>{(!n[l]||!this.participants.joined.get(l))&&a.push(p)}),e.forEach(l=>{s.get(l)||(r.length<e.length?r.push(l):r[a.shift()]=l)}),r.forEach((l,p)=>{n[l]||r.splice(p,1)}),Array.from(this.participants.active.keys()).forEach(l=>{this.participants.active.delete(l,!n[l])}),r.forEach(l=>{if(!this.participants.joined.get(l)){x.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:l}});return}this.participants.active.add(this.participants.joined.get(l),!s.get(l))}),this.participants.active.emit("participantsUpdate"),x.info("ParticipantController::updateActiveParticipants::updating_current_selected_peers",{debuggingHint:i?"Forcefully updating currentActiveGridParticipants set":null}),i&&L(this,ca,new Set);const o=new Set(e),c=[],u=[];if(h(this,ca).forEach(l=>{o.has(l)||c.push(l)}),o.forEach(l=>{h(this,ca).has(l)||u.push(l)}),L(this,ca,o),u.length===0&&c.length===0){x.info("ParticipantController::updateActiveParticipants::current_selected_peers_is_same");return}if(h(this,Ut,Wt)instanceof Le){const l=[];c.forEach(p=>{const m=this.participants.joined.get(p);if(!m)return;const y={producers:m.producers,peerId:m.id};l.push(h(this,Ut,Wt).deactivatePeers(y))}),Promise.all(l).then(()=>{const p=[];u.forEach(m=>{const y=this.participants.active.get(m);if(!y){x.warn("peer is not in active map which is going to activate, should not happen",{dyteParticipant:{id:m}});return}const b={peerId:y.id,producers:y.producers,force:i};p.push(b)}),h(this,Ut,Wt).activatePeers(p)}).catch(p=>{x.info("Error on deactivating peers",p)})}}updateActiveParticipants(e){if(!this.roomJoined){x.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const i=Array.from(this.participants.active.keys()),r=new Map(this.participants.active),s={};e.forEach(a=>{s[a]=!0});const n=[];i.forEach((a,o)=>{(!s[a]||!this.participants.joined.get(a))&&n.push(o)}),e.forEach(a=>{r.get(a)||(i.length<e.length?i.push(a):i[n.shift()]=a)}),i.forEach((a,o)=>{s[a]||i.splice(o,1)}),Array.from(this.participants.active.keys()).forEach(a=>{this.participants.active.delete(a,!s[a])}),i.forEach(a=>{if(!this.participants.joined.get(a)){x.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:a}});return}this.participants.active.add(this.participants.joined.get(a),!r.get(a))}),this.participants.active.emit("participantsUpdate")}updateActiveParticipantsWithPriorities(e,i=!1){if(!this.roomJoined){x.warn("Skipped::ParticipantController::updateActiveParticipantsWithPriorities",{roomJoined:this.roomJoined});return}e.forEach(r=>{this.participants.selectedPeers.add(r.peerId,r.priority)}),i&&this.refreshGridParticipants()}setupChatEvents(){R.onAsync(P.SOCKET_SERVICE_ROOM_JOINED,this.syncMembers),h(this,lo).on(ye.joinRoom,this.chatRoomJoinHandler)}waitingRoomRequestHandler(e){if(h(this,Ut,Wt)instanceof Je)return;const i=e.requests.filter(s=>!this.participants.waitlisted.toArray().find(n=>n.userId===s.userId)),r=this.participants.waitlisted.toArray().filter(s=>!e.requests.find(n=>n.userId===s.userId));i.forEach(s=>this.participants.waitlisted.add(new us({id:s.peerId,displayName:s.displayName,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,stageStatus:Fi.OFF_STAGE,userId:s.userId,flags:{},isHost:!1},h(this,ji)))),r.forEach(s=>this.participants.waitlisted.delete(s.id))}setupEvents(){R.on(P.PEER_JOINED,async e=>{var i,r,s;const n=new us(e,h(this,ji));h(this,ji).id!==n.id&&!((i=e.flags)!=null&&i.recorder)&&!((r=n.flags)!=null&&r.hidden_participant)&&!((s=n.flags)!=null&&s.hiddenParticipant)&&(this.participants.joined.add(n),this.participants.waitlisted.delete(n.id),e.stageStatus===Fi.REQUESTED_TO_JOIN_STAGE&&R.emit(P.STAGE_REQUESTS_UPDATED),this.participants.currentPage===this.participants.pageCount&&h(this,Ut,Wt)instanceof Je&&R.emit(P.GET_PAGE,(await h(this,Ut,Wt).getPage(this.participants.currentPage)).payload))}),h(this,lo).on(ye.getWaitingRoomRequests,this.waitingRoomRequestHandler.bind(this)),R.on(P.SOCKET_SERVICE_ROOM_JOINED,()=>{h(this,Ut,Wt)instanceof Je||h(this,lo).getWaitingRoomRequests()}),R.on(P.WAITLIST_PEER_ADDED,({id:e,name:i})=>{this.participants.waitlisted.add(new us({id:e,displayName:i,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,stageStatus:Fi.OFF_STAGE,userId:void 0,flags:{},isHost:!1},h(this,ji)))}),R.on(P.WAITLIST_PEER_REMOVED,({id:e})=>{this.participants.waitlisted.delete(e)}),R.on(P.ROOM_JOINED,e=>{h(this,Ut,Wt)instanceof Le&&this.participants.joined.clear(),e.peers.forEach(i=>{var r,s,n;if((r=i.flags)!=null&&r.recorder||(s=i.flags)!=null&&s.hidden_participant||(n=i.flags)!=null&&n.hiddenParticipant)return;const a=new us(i,h(this,ji));a.id===e.pinnedPeerId&&(a.setIsPinned(!0,!1),this.participants.pinned.add(a)),this.participants.joined.add(a)}),e.requestToJoinPeersList&&e.requestToJoinPeersList.forEach(({id:i})=>{R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:i,status:Fi.REQUESTED_TO_JOIN_STAGE})}),h(this,Ut,Wt)instanceof Je&&h(this,Ut,Wt).getPage(this.participants.currentPage)}),R.on(P.PEER_CLOSED,async({id:e})=>{if(this.participants.joined.delete(e,!0,!0),this.participants.pinned.delete(e,!0,!0),h(this,Ut,Wt)instanceof Le&&(this.participants.selectedPeers.delete(e),this.participants.active.get(e)&&this.participants.currentPage===0)){this.refreshGridParticipants();return}const{currentPage:i}=this.participants,r=h(this,ji).config.maxVideoStreams,s=(Ze.isMobile()?r.mobile:r.desktop)*(i-1),n=this.participants.active.get(e);if(s===0)this.participants.setViewMode("ACTIVE_GRID");else if(this.participants.joined.size<=s)i===2?this.participants.setViewMode("ACTIVE_GRID"):this.participants.setPage(i-1);else if(n){let a=[];h(this,Ut,Wt)instanceof Je?{peerIds:a}=(await h(this,Ut,Wt).getPage(i)).payload:a=this.participants.getPeerIdsForCurrentPage(),R.emit(P.GET_PAGE,{peerIds:a})}}),R.on(P.ROOM_NODE_DISCONNECTED,()=>{Array.from(this.participants.joined.keys()).forEach(e=>{this.participants.joined.delete(e)}),Array.from(this.participants.active.keys()).forEach(e=>{this.participants.active.delete(e)}),Array.from(this.participants.pinned.keys()).forEach(e=>{this.participants.pinned.delete(e)}),this.participants.currentPage=0,this.participants.viewMode="ACTIVE_GRID",this.participants.emit("viewModeChanged",{viewMode:"ACTIVE_GRID",currentPage:this.participants.currentPage,pageCount:this.participants.pageCount}),L(this,ca,new Set)}),R.on(P.PEER_MUTED,({peerId:e})=>{const i=this.participants.joined.get(e);i&&i.setAudioEnabled(!1)}),R.on(P.PEER_UNMUTED,({peerId:e})=>{const i=this.participants.joined.get(e);i&&i.setAudioEnabled(!0)}),R.on(P.CONSUMER_PAUSED,({id:e})=>{this.processConsumerPaused(e)}),R.on(P.CONSUMER_RESUMED,({id:e})=>{this.processConsumerResumed(e)}),R.on(P.NEW_CONSUMER,({id:e})=>{this.processNewConsumer(e)}),R.on(P.CONSUMER_CLOSED,({id:e})=>{this.processConsumerClosed(e)}),R.on(P.GET_PAGE,({peerIds:e})=>{this.participants.viewMode==="PAGINATED"&&this.updatePageParticipants(e)}),R.on(P.SELECTED_PEERS,({peerIds:e,compulsoryPeers:i})=>{if(this.participants.viewMode!=="ACTIVE_GRID")return;if(h(this,Ut,Wt)instanceof Je){this.updateActiveParticipants(e);return}const r=e.map((n,a)=>({peerId:n,priority:a+1})),s=i==null?void 0:i.map((n,a)=>({peerId:n,priority:-(a+1)}));r.push(...s!=null?s:[]),r.length>0&&this.updateActiveParticipantsWithPriorities(r)}),R.on(P.SELECTED_PEERS_DIFF,({entries:e})=>{this.participants.viewMode==="ACTIVE_GRID"&&this.updateActiveParticipantsWithPriorities(e,!0)}),R.on(P.REFRESH_GRID,(e=!1)=>{this.participants.viewMode==="ACTIVE_GRID"&&US(()=>{this.refreshGridParticipants(e)},500,{maxWait:1e3,leading:!0})()}),R.on(P.NEW_PRODUCER,({peerId:e,producer:i})=>{const r=this.participants.joined.get(e);if(!r){x.warn("ParticipantController::NEW_PRODUCER::participant not found",{producer:{id:i==null?void 0:i.producerId,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}},dyteParticipant:{id:e}});return}r.producers.push(i),x.info("ParticipantController::NEW_PRODUCER::producer_added_to_participant",{producer:{id:i==null?void 0:i.producerId,peerId:e,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}}),(i==null?void 0:i.kind)==="audio"||i!=null&&i.screenShare||h(this,ca).has(e)?h(this,Ut,Wt).createConsumer({producingPeerId:e,producerId:i.producerId,screenShare:i.screenShare}):x.info("ParticipantController::NEW_PRODUCER::not_consuming_producer",{producer:{id:i==null?void 0:i.producerId,peerId:e,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}})}),R.on(P.PRODUCER_CLOSED,({peerId:e,producerId:i})=>{const r=this.participants.joined.get(e);if(!r){x.warn("ParticipantController::NEW_PRODUCER::participant not found",{dyteParticipant:{id:e}});return}r.producers=r.producers.filter(s=>s.producerId!==i)}),R.on(P.PRODUCER_TOGGLE,({peerId:e,producerId:i,paused:r,kind:s})=>{const n=this.participants.joined.get(e);if(n){s==="audio"&&n.setAudioEnabled(!r);const a=n.producers.find(o=>o.producerId===i);a&&(a.pause=r)}}),R.on(P.ACTIVE_SPEAKER,({peerId:e,volume:i})=>{this.participants.lastActiveSpeaker=e,this.participants.emit("activeSpeaker",{peerId:e,volume:i})}),R.on(P.ROOM_MESSAGE,async({payload:e,type:i,timestamp:r})=>{this.participants.emit("broadcastedMessage",{type:i,payload:e,timestamp:r})}),R.on(P.LOW_CONSUMER_SCORE,({peerId:e,score:i,kind:r})=>{const s=this.participants.joined.get(e);s&&(s.emit("poorConnection",{score:i,kind:r}),this.participants.emit("poorConnection",{participantId:e,score:i,kind:r}))}),R.on(P.CONSUMER_SCORE_UPDATE,({score:e,kind:i,appData:r,peerId:s})=>{var n;const a=i==="video"&&((n=r==null?void 0:r.screenShare)!=null?n:!1),o=this.participants.joined.get(s);o&&(o.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:e,participantId:s}),this.participants.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:e,participantId:s}))}),R.on(P.PEER_PINNED,({peerId:e})=>{if(!e){h(this,ji).isPinned&&h(this,ji).setIsPinned(!1),this.participants.pinned.size!==0&&this.updatePinnedParticipants();return}if(e===h(this,ji).id){this.participants.pinned.size!==0&&this.updatePinnedParticipants(),h(this,ji).setIsPinned(!0);return}const i=this.participants.joined.get(e);h(this,ji).isPinned&&h(this,ji).setIsPinned(!1),this.updatePinnedParticipants(),i.setIsPinned(!0),this.participants.pinned.add(i),h(this,Ut,Wt)instanceof Le&&h(this,Ut,Wt).activatePeers([{peerId:i.id,producers:i.producers}]).catch(r=>{x.error("unable to create consumers",{error:r})})})}processMedia(e){var i;const r=h(this,Ut,Wt).getConsumers(),{peerId:s,kind:n,appData:a,remotelyPaused:o,track:c,producerId:u}=(i=r.get(e))!=null?i:{};if(!s)return x.warn("processMedia::Peer ID is undefined",{consumer:{id:e,kind:n,peerId:s,appData:{supportsRemoteControl:a==null?void 0:a.supportsRemoteControl,screenShare:a==null?void 0:a.screenShare},remotelyPaused:o,producerId:u}}),{};const l=a;return x.info("ParticipantController::processMedia",{consumer:{id:e,peerId:s,kind:n,appData:l,remotelyPaused:o,producerId:u}}),h(this,pl).set(e,{type:n,peerId:s,appData:l,remotelyPaused:o,producerId:u}),{peerId:s,kind:n,appData:l,remotelyPaused:o,track:c,producerId:u}}processConsumerClosed(e){const{peerId:i,type:r,appData:s,remotelyPaused:n,producerId:a}=h(this,pl).get(e)||{},o=this.participants.joined.get(i);if(x.info("ParticipantController::processConsumerClosed",{consumer:{id:e,peerId:i,appData:s,kind:r,remotelyPaused:n,producerId:a}}),h(this,pl).delete(e),!!o){if(s&&s.screenShare){o.setScreenShareEnabled(!1),ue.consumerSharedMediaState(e,{screen:!1}),o.screenShareTracks={audio:void 0,video:void 0};return}r==="audio"?(o.setAudioEnabled(!1),ue.consumerSharedMediaState(e,{audio:!1}),o.audioTrack=void 0):r==="video"&&(o.setVideoEnabled(!1),ue.consumerSharedMediaState(e,{video:!1}),o.videoTrack=void 0)}}processConsumerResumed(e){const{peerId:i,kind:r,appData:s,track:n,remotelyPaused:a,producerId:o}=this.processMedia(e);if(!i)return;x.info("ParticipantController::processConsumerResumed",{consumer:{id:e,peerId:i,kind:r,appData:s,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(s.screenShare){r==="video"?c.screenShareTracks.video=n:r==="audio"&&(c.screenShareTracks.audio=n),c.setScreenShareEnabled(!0),ue.consumerSharedMediaState(e,{screen:!0});return}r==="video"?(c.videoTrack=n,c.setVideoEnabled(!0),ue.consumerSharedMediaState(e,{video:!0})):r==="audio"&&(c.audioTrack=n,c.setAudioEnabled(c.audioEnabled),ue.consumerSharedMediaState(e,{audio:c.audioEnabled}))}}processConsumerPaused(e){x.info(`ParticipantController::processConsumerPaused called for consumerId: ${e}`);const{peerId:i,kind:r,track:s,appData:n,remotelyPaused:a,producerId:o}=this.processMedia(e);if(!i)return;x.info("ParticipantController::processConsumerPaused",{consumer:{id:e,peerId:i,kind:r,appData:n,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);c&&(r==="video"?(c.videoTrack=s,c.setVideoEnabled(!1),ue.consumerSharedMediaState(e,{video:!1})):r==="audio"&&(c.audioTrack=s,c.setAudioEnabled(c.audioEnabled),ue.consumerSharedMediaState(e,{audio:c.audioEnabled})))}processNewConsumer(e){const{peerId:i,kind:r,remotelyPaused:s,track:n,appData:a,producerId:o}=this.processMedia(e);if(!i)return;x.info("ParticipantController::processNewConsumer",{consumer:{id:e,peerId:i,kind:r,remotelyPaused:s,appData:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(a.screenShare){r==="video"?c.screenShareTracks.video=n:r==="audio"&&(c.screenShareTracks.audio=n),(!s||h(this,ji).permissions.isRecorder||ge.hasFeature(me.SCREEENSHARE_ERR_HACK))&&c.setScreenShareEnabled(!0),a.supportsRemoteControl&&(c.supportsRemoteControl=!0);return}r==="video"?(c.videoTrack=n,s||c.setVideoEnabled(!0),ue.consumerSharedMediaState(e,{video:!s})):r==="audio"&&h(this,Ut,Wt)instanceof Le&&(c.audioTrack=n,s||c.setAudioEnabled(!0),ue.consumerSharedMediaState(e,{audio:!s}))}}static formatSocketServiceMessage(e){let i;switch(e.stageType){case os.UNSPECIFIED:i="OFF_STAGE";break;case os.REQUESTED_STAGE:i="REQUESTED_TO_JOIN_STAGE";break;case os.APPROVED_STAGE:i="ACCEPTED_TO_JOIN_STAGE";break;case os.OFF_STAGE:i="OFF_STAGE";break;case os.ON_STAGE:i="ON_STAGE";break;default:i="OFF_STAGE"}return{id:e.peerId,userId:e.userId,name:e.displayName,stageType:i,customParticipantId:e.customParticipantId,presetId:e.presetId,picture:e.displayPictureUrl,waitlisted:e.waitlisted}}}ji=new WeakMap,pl=new WeakMap,ca=new WeakMap,xf=new WeakMap,lo=new WeakMap,Ut=new WeakSet,Wt=function(){return Ai()};ic([C.trace("ParticipantController.updatePageParticipants")],Zn.prototype,"updatePageParticipants",1);ic([C.trace("ParticipantController.setupChatEvents")],Zn.prototype,"setupChatEvents",1);ic([C.trace("ParticipantController.setupEvents")],Zn.prototype,"setupEvents",1);ic([C.trace("ParticipantController.processMedia")],Zn.prototype,"processMedia",1);ic([C.trace("ParticipantController.processConsumerClosed")],Zn.prototype,"processConsumerClosed",1);ic([C.trace("ParticipantController.processConsumerResumed")],Zn.prototype,"processConsumerResumed",1);ic([C.trace("ParticipantController.processConsumerPaused")],Zn.prototype,"processConsumerPaused",1);ic([C.trace("ParticipantController.processNewConsumer")],Zn.prototype,"processNewConsumer",1);var Fue=Object.defineProperty,Vue=Object.getOwnPropertyDescriptor,Bue=(t,e,i,r)=>{for(var s=r>1?void 0:r?Vue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Fue(e,i,s),s},zO=(t=>(t[t.User=0]="User",t[t.Meeting=1]="Meeting",t))(zO||{}),pc,Yd,Zd,Cm,GP;let _k=(GP=class extends Mt{constructor(t,e,i,r){super(),N(this,pc),w(this,"selfActiveTab"),w(this,"broadcastTabChanges"),N(this,Zd,void 0),N(this,Cm,void 0),w(this,"viewType"),w(this,"meetingStartedTimestamp"),w(this,"meetingTitle"),L(this,Zd,t),this.viewType=e,L(this,Cm,i),this.meetingTitle=r,this.broadcastTabChanges=t.permissions.canSpotlight}get joined(){var t;return(t=h(this,pc,Yd))==null?void 0:t.roomJoined}get roomName(){var t;return(t=h(this,pc,Yd))==null?void 0:t.roomName}get mediaConnected(){var t,e;return(e=(t=h(this,pc,Yd))==null?void 0:t.mediaConnected)!=null?e:!1}get socketConnected(){return h(this,Cm).isConnected}setBroadcastTabChanges(t){if(!h(this,Zd).permissions.canSpotlight)throw x.error("DyteSpotlight::setSpotlighted::permission_denied"),new U("User does not have permission to toggle spotlight");this.broadcastTabChanges=t,this.emit("broadcastTabChangesUpdate",this.broadcastTabChanges),this.broadcastTabChanges&&this.assertActiveTabToRoom()}setSelfActiveTab(t,e){var i;x.info("DyteSpotlight::setActiveTab",{spotlight:{currentTab:{id:t.id,type:t.type}}}),this.selfActiveTab=t,e===0&&this.emit("selfTabUpdate",t),(i=h(this,Zd).permissions)!=null&&i.canSpotlight&&this.broadcastTabChanges&&e===0&&this.assertActiveTabToRoom()}assertActiveTabToRoom(){h(this,pc,Yd)instanceof Je&&this.selfActiveTab&&h(this,pc,Yd).assertSpotlightToRoom({userId:h(this,Zd).userId,currentTab:this.selfActiveTab,peerId:void 0})}},pc=new WeakSet,Yd=function(){return Ai()},Zd=new WeakMap,Cm=new WeakMap,GP);_k=Bue([Hi(t=>{throw new U(t.message,"0800")})],_k);function Hue(t){let e="",i=[""];const r=[i];let s=0,n=0,a=!0,o;for(o of t)o==='"'?(a&&o===e&&(i[s]+=o),a=!a):o===","&&a?o=i[++s]="":o===`
`&&a?(e==="\r"&&(i[s]=i[s].slice(0,-1)),i=r[++n]=[o=""],s=0):i[s]+=o,e=o;return r}var Wue=Object.defineProperty,Gue=Object.getOwnPropertyDescriptor,que=(t,e,i,r)=>{for(var s=r>1?void 0:r?Gue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Wue(e,i,s),s};let Sk=class extends Mt{constructor(){super(),w(this,"transcripts"),this.transcripts=[]}async onTranscript(t){this.transcripts.push(t),this.emit("transcript",t)}};Sk=que([Hi(t=>{throw new U(t.message,"0000")})],Sk);var Jue=Object.defineProperty,Kue=Object.getOwnPropertyDescriptor,Que=(t,e,i,r)=>{for(var s=r>1?void 0:r?Kue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Jue(e,i,s),s},Ic,gl,Bh;class FO{constructor(e,i,r,s){N(this,gl),w(this,"meta"),w(this,"ai"),N(this,Ic,void 0),w(this,"aiSocketHandler"),this.meta=new _k(e,Ne.isV2AuthToken?e.config.viewType:e.permissions.viewType,i,s),this.ai=new Sk,L(this,Ic,e),this.aiSocketHandler=r,e.config.viewType!==Tt.Chat&&this.setupEvents()}get roomName(){return this.meta.roomName}conditionallySetActiveTab(e){var i;e!=null&&e.currentTab&&((i=this.meta.selfActiveTab)==null?void 0:i.id)!==e.currentTab.id&&(this.meta.setSelfActiveTab(e.currentTab,zO.Meeting),this.meta.emit("activeTabUpdate",e.currentTab))}setupEvents(){R.on(P.ROOM_JOINED,e=>{e.startedAt&&(this.meta.meetingStartedTimestamp=new Date(e.startedAt),this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp}))}),R.on(P.ROOM_STATE,({createdAt:e})=>{const i=this.meta.meetingStartedTimestamp;if(e&&!i){const r=new Date(e*1e3);this.meta.meetingStartedTimestamp=r,this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp})}}),R.on(P.ROOM_NODE_CONNECTED,()=>{this.meta.emit("connected")}),R.on(P.ROOM_NODE_DISCONNECTED,()=>{this.meta.emit("disconnected")}),R.on(P.ICE_CONNECTED,({transport:e})=>{this.meta.emit("iceConnected",{transport:e})}),R.on(P.ICE_DISCONNECTED,({transport:e})=>{this.meta.emit("iceDisconnected",{transport:e})}),R.on(P.ICE_RECONNECTING,({transport:e})=>{this.meta.emit("iceReconnecting",{transport:e})}),R.on(P.ICE_FAILED,({transport:e})=>{this.meta.emit("iceFailed",{transport:e})}),R.on(P.PRODUCER_SCORE_UPDATE,({score:e})=>{e<5&&this.meta.emit("poorConnection",{score:e})}),R.on(P.SOCKET_SERVICE_CONNECTED,()=>{this.meta.emit("socketConnected")}),R.on(P.SOCKET_SERVICE_DISCONNECTED,()=>{this.meta.emit("socketDisconnected")}),R.on(P.SOCKET_SERVICE_RECONNECTING,()=>{this.meta.emit("socketReconnecting")}),R.on(P.SOCKET_SERVICE_RECONNECTION_ATTEMPT,({attempt:e})=>{this.meta.emit("socketReconnectAttempt",{attempt:e})}),R.on(P.SOCKET_SERVICE_RECONNECT_FAILURE,({attempt:e})=>{this.meta.emit("socketReconnectFailure",{attempt:e})}),R.on(P.SOCKET_SERVICE_RECONNECTED,()=>{this.meta.emit("socketReconnected")}),R.on(P.SOCKET_SERVICE_FAILED,()=>{this.meta.emit("socketFailure")}),R.on(P.ROOM_NODE_CONNECTION_ERROR,e=>{const{message:i}=e;i.match(/room '([a-z0-9-]+)' not found/i)&&this.meta.emit("connectionError",{reason:"ROOM_NOT_FOUND"})}),h(this,Ic).permissions.canSpotlight&&(x.info("DyteSpotlightController::Asserting Spotlight"),h(this,gl,Bh)instanceof Je&&this.meta.selfActiveTab&&h(this,gl,Bh).assertSpotlightToRoom({userId:h(this,Ic).userId,currentTab:this.meta.selfActiveTab,peerId:void 0})),R.on(P.PEER_JOINED,async e=>{h(this,Ic).permissions.canSpotlight&&h(this,gl,Bh)instanceof Je&&this.meta.selfActiveTab&&h(this,gl,Bh).assertSpotlightToPeer({userId:h(this,Ic).userId,currentTab:this.meta.selfActiveTab,peerId:e.id})}),R.on(P.ROOM_MESSAGE,e=>{var i,r;e.roomMessageType==="spotlight"&&(x.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:e.userId},currentTab:{id:(i=e.currentTab)==null?void 0:i.id,type:(r=e.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(e))}),R.on(P.MESSAGE,e=>{var i,r;e.roomMessageType==="spotlight"&&(x.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:e.userId},currentTab:{id:(i=e.currentTab)==null?void 0:i.id,type:(r=e.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(e))}),this.aiSocketHandler.on(ye.transcript,e=>{const{meetingId:i,transcript:r}=e,[[s,n,a,o]]=Hue(r),c={id:gg(),name:a,transcript:o,isPartialTranscript:!1,date:new Date(parseInt(s,10)*1e3)};this.ai.onTranscript(c),this.meta.emit("transcript",c),x.debug(`${i} Received transcript for peer ${n} - ${a}: ${o}`)})}}Ic=new WeakMap,gl=new WeakSet,Bh=function(){return Ai()};Que([C.trace("MetaController.setupEvents")],FO.prototype,"setupEvents",1);var Yue=Object.defineProperty,Zue=Object.getOwnPropertyDescriptor,KS=(t,e,i,r)=>{for(var s=r>1?void 0:r?Zue(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Yue(e,i,s),s};const Ti={getPeer:14,getPeers:15,chatMessage:16,getRoomName:17,getDisplayTitle:18,getPluginInitiator:19,customPluginEventToParent:20,peerJoined:22,peerLeft:23,sendData:24};var vr,gc,Or,fh,vh,mc,yh,yr,Lr,qP;let Zp=(qP=class extends Mt{constructor({baseURL:t,createdAt:e,description:i,id:r,name:s,organizationId:n,picture:a,private:o,published:c,staggered:u,tags:l,type:p,updatedAt:m},y,b,S,E,k){super(),N(this,yr),N(this,vr,void 0),N(this,gc,void 0),w(this,"baseURL"),w(this,"createdAt"),w(this,"description"),w(this,"id"),w(this,"name"),N(this,Or,void 0),N(this,fh,void 0),N(this,vh,void 0),w(this,"organizationId"),w(this,"picture"),w(this,"private"),w(this,"published"),w(this,"staggered"),w(this,"tags"),w(this,"type"),w(this,"updatedAt"),N(this,mc,void 0),w(this,"config"),N(this,yh,void 0),w(this,"active"),w(this,"iframes"),w(this,"enabledBy"),this.baseURL=t,this.createdAt=new Date(e),this.description=i,this.id=r,this.name=s,L(this,Or,S),this.organizationId=n,this.picture=a,this.private=o,this.published=c,this.staggered=u,this.tags=l,this.type=p,this.updatedAt=new Date(m),this.active=!1,this.iframes=new Map,L(this,vr,y),L(this,gc,b),L(this,fh,E),L(this,vh,k),this.enabledBy=""}get roomJoined(){var t;return((t=h(this,yr,Lr))==null?void 0:t.roomJoined)===!0}sendIframeEvent(t){this.iframes.size&&this.iframes.forEach(e=>{const{iframe:i}=e;i&&(navigator.isReactNative?i.postMessage(JSON.stringify(t)):i.contentWindow.postMessage(t,"*"))})}async handleIframeMessage(t){var e,i,r,s;let n;if(h(this,gc)==="socket-service"){const c=t,{payload:u,uuid:l,type:p}=c;switch(p){case Te.customPluginEventToRoom:{h(this,vr).customPluginEventToRoom(this.id,u,l);break}case Te.customPluginEventToPeers:{h(this,vr).customPluginEventToPeers(this.id,u.peerIds,u,l);break}case Te.enablePluginForRoom:{h(this,vr).enablePluginForRoom(this.id,l);break}case Te.enablePluginForPeers:{h(this,vr).enablePluginForPeers(this.id,u.peerIds,l);break}case Te.disablePluginForRoom:{h(this,vr).disablePluginForRoom(this.id,l);break}case Te.disablePluginForPeers:{h(this,vr).disablePluginForPeers(this.id,u.peerIds,l);break}case Te.storeInsertKeys:{h(this,vr).storeInsertKeys(this.id,u.store,u.insertKeys,l);break}case Te.storeGetKeys:{h(this,vr).storeGetKeys(this.id,u.store,u.getKeys,l);break}case Te.storeDeleteKeys:{h(this,vr).storeDeleteKeys(this.id,u.store,u.deleteKeys,l);break}case Te.storeDelete:{h(this,vr).storeDelete(this.id,u.store,l);break}case Ti.chatMessage:{const{messagePayload:m,peerIds:y}=u;if(!h(this,vh)){this.sendIframeEvent({type:Ti.chatMessage,uuid:c.uuid,payload:{error:"Chat is disabled for this room."}});return}try{await h(this,vh).sendMessage(m,y),this.sendIframeEvent({type:Ti.chatMessage,uuid:c.uuid,payload:{success:!0}})}catch(b){this.sendIframeEvent({type:Ti.chatMessage,uuid:c.uuid,payload:{error:b}})}break}case Ti.getPeer:{let m;const{peerId:y}=u,b={...h(this,Or),isRecorder:(e=h(this,Or).permissions)==null?void 0:e.isRecorder,isHidden:h(this,Or).permissions.hiddenParticipant};y?(m=h(this,fh).joined.get(u.peerId),h(this,Or).id===y&&(m=b)):m=b,this.sendIframeEvent({type:Ti.getPeer,payload:{peer:m&&Kw(m)},uuid:c.uuid});break}case Ti.getPeers:{const m=h(this,fh).joined.toArray().map(y=>Kw(y));this.sendIframeEvent({type:Ti.getPeers,payload:{peers:m},uuid:c.uuid});break}case Ti.getPluginInitiator:{this.sendIframeEvent({type:Ti.getPluginInitiator,payload:{enabledBy:this.enabledBy},uuid:c.uuid});break}case Ti.getDisplayTitle:{this.sendIframeEvent({type:Ti.getDisplayTitle,payload:{displayTitle:h(this,yr,Lr).meetingTitle},uuid:c.uuid});break}case Ti.getRoomName:{this.sendIframeEvent({type:Ti.getRoomName,payload:{roomName:h(this,yr,Lr).roomName},uuid:c.uuid});break}case Ti.customPluginEventToParent:{this.emit(c.payload.eventName,c.payload.data);break}}return}const a=(c,u)=>{if(h(this,Or).userId===c)return h(this,Or).id;let l;return u.forEach(p=>{p.userId===c&&(l=p.id)}),l},o=t;switch(o.type){case"pluginEvent":case"storePluginData":case"getPluginData":case"enablePluginForAll":case"enablePluginForUser":case"disablePluginForUser":case"chatMessage":{n=await h(this,yr,Lr).sendMessage(o),this.sendIframeEvent(n);break}case"getJoinedPeers":{n=await h(this,yr,Lr).getRoomState(),this.sendIframeEvent({type:"websocket/get-joined-peers",payload:{...o.payload,peers:n.payload.roomState.peers}});break}case"getPeerInfo":{n=await h(this,yr,Lr).sendMessage({type:o.type,payload:{...o.payload,peerId:(r=(i=o.payload)==null?void 0:i.peerId)!=null?r:h(this,Or).id}}),this.sendIframeEvent(n);break}case"getRoomState":{n=await h(this,yr,Lr).getRoomState();const{plugins:c,peers:u}=n.payload.roomState,{enabledBy:l}=c.find(m=>m.id===this.id),p=a(l,u);this.sendIframeEvent({type:"websocket/get-room-state",payload:{...o.payload,roomName:n.payload.roomState.roomName,pluginInitiatorPeerId:p,pluginInitiatorUserId:l,peers:n.payload.roomState.peers,displayTitle:n.payload.roomState.displayTitle,roomUUID:n.payload.roomState.roomUUID,currentPeer:h(this,Or).id,isRecorder:(s=h(this,Or).permissions)==null?void 0:s.isRecorder}});break}case"getPluginInitiatorId":{n=await h(this,yr,Lr).getRoomState();const{plugins:c,peers:u}=n.payload.roomState,{enabledBy:l}=c.find(m=>m.id===this.id),p=a(l,u);this.sendIframeEvent({type:"websocket/get-plugin-initiator-peer-id",payload:{...o.payload,pluginInitiatorPeerId:p}});break}case"getPluginInitiatorUserId":{n=await h(this,yr,Lr).getRoomState();const{plugins:c}=n.payload.roomState,{enabledBy:u}=c.find(l=>l.id===this.id);this.sendIframeEvent({type:"websocket/get-plugin-initiator-user-id",payload:{...o.payload,pluginInitiatorUserId:u}});break}case"pluginEventToParent":{this.emit(o.payload.eventName,o.payload.data);break}case"toggleViewMode":{this.emit("toggleViewMode",o.payload.data);break}}}sendData(t){if(h(this,gc)==="socket-service"){this.sendIframeEvent({type:Ti.sendData,uuid:"",payload:t});return}this.sendIframeEvent({type:P.PLUGIN_INTERNAL_DATA,payload:{pluginId:this.id,data:t}})}removePluginView(t="default"){var e;const{iframe:i,listener:r}=(e=this.iframes.get(t))!=null?e:{};(i||r)&&(navigator.isReactNative?i.props.onMessage=void 0:window.removeEventListener("message",r),this.iframes.delete(t))}addPluginView(t,e="default"){var i;if(!h(this,yh))throw x.error("DytePlugin::addPluginView::no_auth_token_set_for_plugin"),new U("No auth token set for plugin.");if(!t)throw x.error("DytePlugin::addPluginView::iframe_was_not_provided"),new U("Iframe was not provided.");this.removePluginView(e);const r=t,s=new URL(this.baseURL),n={auth:h(this,yh),parent:navigator.isReactNative?this.baseURL:window.location.origin,backend:tt.apiBase,pluginId:this.id,roomName:(i=h(this,yr,Lr).roomName)!=null?i:"",displayTitle:h(this,yr,Lr).meetingTitle};if(Object.keys(n).forEach(a=>{s.searchParams.set(a,n[a])}),r.src=s.href,r.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",r.title=e,navigator.isReactNative)r.props.onMessage=a=>{this.handleIframeMessage(JSON.parse(a.nativeEvent.data))},this.iframes.set(e,{iframe:r});else{const a=async o=>{o.source===t.contentWindow&&await this.handleIframeMessage(o.data)};window.addEventListener("message",a),this.iframes.set(e,{iframe:r,listener:a})}}setActive(t){var e,i;if(this.active=t,t){this.emit("stateUpdate",{active:this.active,pluginId:this.id,bind:this.addPluginView.bind(this),views:(e=this.config)==null?void 0:e.views});return}this.active=!1,this.emit("stateUpdate",{active:this.active,pluginId:this.id,views:(i=this.config)==null?void 0:i.views})}async activateForSelf(){const t=Bi(),e=await t.authorizePlugin(this.id);L(this,yh,e),L(this,mc,new Date);try{const i=await t.getPluginConfig(this.baseURL);this.config=i}catch(i){x.error("DytePlugin::activateForSelf",{error:i})}this.setActive(!0),this.emit("enabled")}deactivateForSelf(){Array.from(this.iframes.keys()).forEach(t=>{this.removePluginView(t)}),L(this,mc,void 0),this.iframes.clear(),this.setActive(!1),this.emit("closed")}async enable(){return this.activateForSelf()}disable(){return this.deactivateForSelf()}async activate(){var t,e;this.active||(e=(t=h(this,Or).permissions)==null?void 0:t.plugins)!=null&&e.canStart&&(h(this,gc)==="socket-service"?h(this,vr).addPlugin(this.id,this.staggered):await h(this,yr,Lr).addRoomPlugin(this),L(this,mc,new Date),x.info("plugin::activated",{plugin:{id:this.id,enabledBy:this.enabledBy,name:this.name}}))}async deactivate(){var t,e;this.activate&&(e=(t=h(this,Or).permissions)==null?void 0:t.plugins)!=null&&e.canClose&&(h(this,gc)==="socket-service"?h(this,vr).removePlugin(this.id):await h(this,yr,Lr).removeRoomPlugin(this),x.info("plugin::deactivated",{plugin:{id:this.id,name:this.name,duration:new Date().getTime()-h(this,mc).getTime()}}),L(this,mc,void 0))}},vr=new WeakMap,gc=new WeakMap,Or=new WeakMap,fh=new WeakMap,vh=new WeakMap,mc=new WeakMap,yh=new WeakMap,yr=new WeakSet,Lr=function(){return Ai()},qP);KS([C.trace("PluginController.activatePlugin")],Zp.prototype,"activate",1);KS([C.trace("PluginController.deactivatePlugin")],Zp.prototype,"deactivate",1);Zp=KS([Hi(t=>{throw new U(t.message,"0600")})],Zp);class JP extends JS{constructor(){super({onAddEvent:"pluginAdded",onDeleteEvent:"pluginDeleted"})}add(e,i=!0){return super.add(e,i)}delete(e,i=!0,r=!1){return super.delete(e,i,r)}}var Xue=Object.defineProperty,ehe=Object.getOwnPropertyDescriptor,the=(t,e,i,r)=>{for(var s=r>1?void 0:r?ehe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Xue(e,i,s),s};let xk=class{constructor(){w(this,"all"),w(this,"active"),this.all=new JP,this.active=new JP}};xk=the([Hi(t=>{throw new U(t.message,"0600")})],xk);var ihe=Object.defineProperty,rhe=Object.getOwnPropertyDescriptor,QS=(t,e,i,r)=>{for(var s=r>1?void 0:r?rhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&ihe(e,i,s),s},fc,KP;const Ek=(KP=class{constructor(t){N(this,fc,void 0),L(this,fc,t)}async createChannel(t,e,i,r="public",s=!1){const n={displayName:t,targetUserIds:e,displayPictureUrl:i,visibility:r,isDirectMessage:s};s&&(n.visibility="private");const a=await h(this,fc).sendMessagePromise(Bc.createChatChannel,foe.toBinary(n)),o=na.fromBinary(a.payload).chatChannels;return Ek.formatChannel(o[0])}async updateChannel(t,e){const i=await h(this,fc).sendMessagePromise(Bc.updateChatChannel,yoe.toBinary({chatChannelId:t,targetUserIds:e.memberIds,displayName:e.displayName,displayPictureUrl:e.displayPictureUrl,visibility:e.visibility})),r=na.fromBinary(i.payload).chatChannels;return Ek.formatChannel(r[0])}static formatChannel(t){var e;const{latestMessageAndUnreadCount:i}=t,r={...t,id:t.chatChannelId,memberIds:t.targetUserIds,unreadCount:(e=i==null?void 0:i.unreadCount)!=null?e:0};return i!=null&&i.message&&(r.latestMessage=xa.formatSocketServiceMessage(i.message)),delete r.chatChannelId,delete r.targetUserIds,delete r.latestMessageAndUnreadCount,r}async getChannelMembers(t){try{const e=await h(this,fc).sendMessagePromise(Bc.getChannelMembers,koe.toBinary({chatChannelId:t}));return Ioe.fromBinary(e.payload).channelMembers.map(({id:i,...r})=>({...r,userId:i}))}catch{return[]}}on(t,e){let i,r;switch(t){case Bc.createChatChannel:{i=na.fromBinary.bind(na),r=na.create();break}case Bc.updateChatChannel:{i=na.fromBinary.bind(na),r=na.create();break}}if(!i){x.warn(`ChatChannelSocketHandler::Event ${t} is not recognized`);return}h(this,fc).on(t,({payload:s})=>{let n=r;try{n=i(s)}catch(a){x.error("ChatChannelSocketHandler::on::binary_decode_error",{error:a})}return e(n)})}},fc=new WeakMap,KP);let yd=Ek;QS([C.trace("ChatChannelHandler.createChannel")],yd.prototype,"createChannel",1);QS([C.trace("ChatChannelHandler.updateChannel")],yd.prototype,"updateChannel",1);QS([C.trace("ChatChannelHandler.getChannelMembers")],yd.prototype,"getChannelMembers",1);var she=Object.defineProperty,nhe=Object.getOwnPropertyDescriptor,yn=(t,e,i,r)=>{for(var s=r>1?void 0:r?nhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&she(e,i,s),s},rs=(t=>(t[t.TEXT=0]="TEXT",t[t.IMAGE=1]="IMAGE",t[t.FILE=2]="FILE",t))(rs||{}),Nr;class js{constructor(e){N(this,Nr,void 0),L(this,Nr,e)}getChatMessages(){return h(this,Nr).sendMessagePromise(Ci.getMessages)}async getChatMessagesPaginated(e,i,r,s=0,n=""){const a={timeStamp:e,size:i,from:s,reversed:r,channelId:n},o=await h(this,Nr).sendMessagePromise(Ci.getPaginatedMessages,Hae.toBinary(a));return o.payload?Gae.fromBinary(o.payload):{messages:[],next:!1}}sendMessageToRoom(e,i){const r={payloadType:i,payload:e};h(this,Nr).sendMessage(Ci.sendMessageToRoom,Kae.toBinary(r))}sendMessageToPeers(e,i,r){const s={payloadType:i,peerIds:r,payload:e};h(this,Nr).sendMessage(Ci.sendMessageToPeers,Zae.toBinary(s))}sendMessageToChannel(e,i,r){const s={payloadType:i,channelId:r,payload:e};h(this,Nr).sendMessage(Ci.sendMessageToChannel,toe.toBinary(s))}sendMessage(e,i,r,s){if(s&&this.sendMessageToChannel(e,i,s),r&&r.length>0){this.sendMessageToPeers(e,i,r);return}this.sendMessageToRoom(e,i)}async editMessage(e,i,r,s){const n={chatId:e,payloadType:r,payload:i};s&&(n.channelId=s);const a=await h(this,Nr).sendMessagePromise(Ci.editMessage,soe.toBinary(n));return bm.fromBinary(a.payload).message}async deleteMessage(e,i){const r={chatId:e};i&&(r.channelId=i);const s=await h(this,Nr).sendMessagePromise(Ci.deleteMessage,ooe.toBinary(r)),n=wm.fromBinary(s.payload);return{id:n.chatId,...n.channelId?{channelId:n.channelId}:{}}}async searchMessages(e,i){var r,s,n;const a={searchTerm:e,timeStamp:(r=i.timestamp)!=null?r:Date.now(),size:(s=i.size)!=null?s:75,from:0,reversed:(n=i.reversed)!=null?n:!0};i.channelId&&(a.channelId=i.channelId);try{const o=await h(this,Nr).sendMessagePromise(Ci.searchChannelMessages,loe.toBinary(a));return lO.fromBinary(o.payload).messages}catch{return[]}}async getAllChannels(){try{const e=await h(this,Nr).sendMessagePromise(Ci.getAllChatChannels);return na.fromBinary(e.payload).chatChannels.map(yd.formatChannel)}catch{return[]}}async markLastReadMessage(e,i){const r=await h(this,Nr).sendMessagePromise(Ci.markChannelIndexAsRead,hoe.toBinary({channelId:e,userId:i.userId,channelIndex:i.channelIndex}));return goe.fromBinary(r.payload).channelIndex}on(e,i){let r,s;switch(e){case Ci.sendMessageToRoom:{r=Hb.fromBinary.bind(Hb),s=Hb.create();break}case Ci.sendMessageToPeers:{r=Wb.fromBinary.bind(Wb),s=Wb.create();break}case Ci.editMessage:{r=bm.fromBinary.bind(bm),s=bm.create();break}case Ci.deleteMessage:{r=wm.fromBinary.bind(wm),s=wm.create();break}}if(!r){x.warn(`ChatSocketHandler::Event ${e} is not recognized`);return}h(this,Nr).on(e,({payload:n})=>{let a=s;try{a=r(n)}catch(o){x.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}Nr=new WeakMap;yn([C.trace("SocketService.getChatMessages")],js.prototype,"getChatMessages",1);yn([C.trace("SocketService.getChatMessagesPaginated")],js.prototype,"getChatMessagesPaginated",1);yn([C.trace("SocketService.sendMessageToRoom")],js.prototype,"sendMessageToRoom",1);yn([C.trace("SocketService.sendMessageToPeers")],js.prototype,"sendMessageToPeers",1);yn([C.trace("SocketService.sendMessageToChannel")],js.prototype,"sendMessageToChannel",1);yn([C.trace("SocketService.sendMessage")],js.prototype,"sendMessage",1);yn([C.trace("SocketService.editMessage")],js.prototype,"editMessage",1);yn([C.trace("SocketService.deleteMessage")],js.prototype,"deleteMessage",1);yn([C.trace("SocketService.searchMessages")],js.prototype,"searchMessages",1);yn([C.trace("SocketService.getAllChannels")],js.prototype,"getAllChannels",1);yn([C.trace("SocketService.markLastReadMessage")],js.prototype,"markLastReadMessage",1);function ahe(t,e){return`<blockquote>${e.replace(/<blockquote>[.\s\S]*<\/blockquote>\n\n/m,"")}</blockquote>

${t}`}var ohe=Object.defineProperty,che=Object.getOwnPropertyDescriptor,fr=(t,e,i,r)=>{for(var s=r>1?void 0:r?che(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&ohe(e,i,s),s};const ql=["text","image","file","poll"];var Ue,Xd,cr,el,dr,Za,vc,QP;let Qi=(QP=class extends Mt{constructor(t,e,i,r,s){super(),N(this,Za),w(this,"messages"),w(this,"channels",[]),N(this,Ue,void 0),N(this,Xd,void 0),N(this,cr,void 0),N(this,el,void 0),N(this,dr,void 0),L(this,cr,t),L(this,el,e),L(this,dr,i),L(this,Ue,r),L(this,Xd,s),this.messages=[]}get roomJoined(){var t;return((t=h(this,Za,vc))==null?void 0:t.roomJoined)===!0}async sendMessageInternal(t,e,i,r={}){switch(t.type){case"text":{const s=r.replyTo&&r.replyTo.type==="text"?ahe(t.message,r.replyTo.message):t.message;await this.sendTextMessageInternal(s,e,i);break}case"image":await this.sendImageMessageInternal(t.image,e,i);break;case"file":await this.sendFileMessageInternal(t.file,e,i);break;default:x.error("sendMessage::message_type_not_supported",{dyteChat:{messageType:t.type}});break}}async sendTextMessageInternal(t,e,i){var r,s,n,a,o,c;if(e&&e.length>0){if(!((r=h(this,Ue).permissions)!=null&&r.chatPrivate.canSend)||!((s=h(this,Ue).permissions)!=null&&s.chatPrivate.text))throw x.error("sendTextMessage::private_chat_permission_denied"),new U("Could not send message to private chat.","0501")}else if(!((a=(n=h(this,Ue).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Ue).permissions)==null?void 0:o.chatPublic)!=null&&c.text))throw x.error("sendTextMessage::public_chat_permission_denied"),new U("Could not send message to public chat.","0501");if(!t)throw x.error("sendTextMessage::message_can_not_be_empty"),new U("Message can not be empty.","0502");if(i){if(h(this,dr)!=="socket-service")throw new Error("Socket service required for channel support");h(this,cr).sendMessageToChannel(t,rs.TEXT,i);return}if(h(this,dr)==="socket-service"){let l=[];e&&e.length>0&&(e.push(h(this,Ue).id),l=h(this,Xd).joined.toArray().filter(p=>e.includes(p.id)).map(p=>p.userId),l.push(h(this,Ue).userId)),h(this,cr).sendMessage(t,rs.TEXT,e);return}if(e!==void 0&&e.length>0){x.error("sendTextMessage::private_chat_unsupported");return}const u={userId:h(this,Ue).userId,displayName:h(this,Ue).name,message:t,type:ql.indexOf("text"),time:+new Date};if(!this.roomJoined)throw x.error("DyteChat.sendTextMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new U("Can`t sendTextMessage without joining room");await h(this,Za,vc).sendChatMessage(u)}async sendImageMessageInternal(t,e,i){var r,s,n,a,o,c;if(e&&e.length>0){if(!((r=h(this,Ue).permissions)!=null&&r.chatPrivate.canSend)||!((s=h(this,Ue).permissions)!=null&&s.chatPrivate.files)){x.error("sendImageMessage::private_chat_permission_denied");return}}else if(!((a=(n=h(this,Ue).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Ue).permissions)==null?void 0:o.chatPublic)!=null&&c.files)){x.error("sendImageMessage::permission_denied");return}if(!t){x.error("sendImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(t.type)){x.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:t.type}});return}try{const u=Bi(),{getLocation:l,putLocation:p}=await u.getPresignedUrls(t.name,h(this,Ue).config.viewType);if(await u.uploadFile(t,p),i){if(h(this,dr)!=="socket-service")throw new Error("Socket service required for channel support");h(this,cr).sendMessageToChannel(l,rs.IMAGE,i);return}if(h(this,dr)==="socket-service"){let y=[];e&&e.length>0&&(e.push(h(this,Ue).id),y=h(this,Xd).joined.toArray().filter(b=>e.includes(b.id)).map(b=>b.userId),y.push(h(this,Ue).userId)),h(this,cr).sendMessage(l,rs.IMAGE,e);return}if(e!==void 0&&e.length>0){x.error("sendImageMessage::private_chat_unsupported");return}const m={userId:h(this,Ue).userId,displayName:h(this,Ue).name,type:ql.indexOf("image"),link:l,time:+new Date};if(!this.roomJoined)throw x.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new U("Can`t sendImageMessage without joining room");await h(this,Za,vc).sendChatMessage(m)}catch{throw new U("Error sending image message.")}}async sendFileMessageInternal(t,e,i){var r,s,n,a,o,c;if(e&&e.length>0){if(!((r=h(this,Ue).permissions)!=null&&r.chatPrivate.canSend)||!((s=h(this,Ue).permissions)!=null&&s.chatPrivate.files)){x.error("sendFileMessage::private_chat_permission_denied");return}}else if(!((a=(n=h(this,Ue).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Ue).permissions)==null?void 0:o.chatPublic)!=null&&c.files)){x.error("sendFileMessage::permission_denied");return}if(!t){x.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const u=Bi(),{getLocation:l,putLocation:p}=await u.getPresignedUrls(t.name,h(this,Ue).config.viewType);if(await u.uploadFile(t,p),i){if(h(this,dr)!=="socket-service")throw new Error("Socket service required for channel support");h(this,cr).sendMessageToChannel(JSON.stringify({link:l,name:t.name,size:"size"in t?t.size:0}),rs.FILE,i);return}if(h(this,dr)==="socket-service"){let y=[];e&&e.length>0&&(e.push(h(this,Ue).id),y=h(this,Xd).joined.toArray().filter(S=>e.includes(S.id)).map(S=>S.userId),y.push(h(this,Ue).userId));const b=JSON.stringify({link:l,name:t.name,size:"size"in t?t.size:0});h(this,cr).sendMessage(b,rs.FILE,e);return}if(e!==void 0&&e.length>0){x.error("sendFileMessage::private_chat_unsupported");return}const m={userId:h(this,Ue).userId,displayName:h(this,Ue).name,type:ql.indexOf("file"),link:l,name:t.name,size:"size"in t?t.size:0,time:+new Date};if(!this.roomJoined)throw x.error("DyteChat.sendFileMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new U("Can`t sendFileMessage without joining room");await h(this,Za,vc).sendChatMessage(m)}catch{throw new U("Error sending file message.")}}async sendTextMessage(t,e){return this.sendTextMessageInternal(t,e)}async sendImageMessage(t,e){return this.sendImageMessageInternal(t,e)}async sendFileMessage(t,e){return this.sendFileMessageInternal(t,e)}async sendMessage(t,e){return this.sendMessageInternal(t,e)}async editTextMessage(t,e,i){var r,s,n,a,o,c;if(h(this,dr)!=="socket-service"){x.warn("editTextMessage::Coming soon!");return}if(((s=(r=h(this,Ue).permissions)==null?void 0:r.chatMessage)==null?void 0:s.canEdit)==="NONE")throw new U("Not permitted to edit messages","0501");if(!((a=(n=h(this,Ue).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=h(this,Ue).permissions)==null?void 0:o.chatPublic)!=null&&c.text)){x.error("editTextMessage::permission_denied");return}if(!e){x.error("editTextMessage::message_can_not_be_empty");return}h(this,cr).editMessage(t,e,rs.TEXT,i)}async editImageMessage(t,e,i){var r,s,n,a;if(h(this,dr)!=="socket-service"){x.warn("editImageMessage::Coming soon!");return}if(!((s=(r=h(this,Ue).permissions)==null?void 0:r.chatPublic)!=null&&s.canSend)||!((a=(n=h(this,Ue).permissions)==null?void 0:n.chatPublic)!=null&&a.files)){x.error("editImageMessage::permission_denied");return}if(!e){x.error("editImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(e.type)){x.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:e.type}});return}try{const o=Bi(),{getLocation:c,putLocation:u}=await o.getPresignedUrls(e.name,h(this,Ue).config.viewType);await o.uploadFile(e,u),h(this,cr).editMessage(t,c,rs.IMAGE,i)}catch{throw new U("Error editing image message.")}}async editFileMessage(t,e,i){var r,s,n,a;if(h(this,dr)!=="socket-service"){x.warn("editFileMessage::Coming soon!");return}if(!((s=(r=h(this,Ue).permissions)==null?void 0:r.chatPublic)!=null&&s.canSend)||!((a=(n=h(this,Ue).permissions)==null?void 0:n.chatPublic)!=null&&a.files)){x.error("sendFileMessage::permission_denied");return}if(!e){x.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const o=Bi(),{getLocation:c,putLocation:u}=await o.getPresignedUrls(e.name,h(this,Ue).config.viewType);await o.uploadFile(e,u),h(this,cr).editMessage(t,JSON.stringify({link:c,name:e.name,size:"size"in e?e.size:0}),rs.FILE,i)}catch{throw new U("Error editing file message.")}}async editMessage(t,e,i){if(h(this,dr)!=="socket-service"){x.warn("editMessage::Coming soon!");return}switch(e.type){case"text":{this.editTextMessage(t,e.message,i);break}case"image":{this.editImageMessage(t,e.image,i);break}case"file":{this.editFileMessage(t,e.file,i);break}default:{x.error("editMessage::message_type_not_supported",{dyteChat:{messageType:e.type}});break}}}async deleteMessage(t,e){var i,r;if(h(this,dr)!=="socket-service"){x.warn("editMessage::Coming soon!");return}if(((r=(i=h(this,Ue).permissions)==null?void 0:i.chatMessage)==null?void 0:r.canDelete)==="NONE")throw new U("Not permitted to delete messages","0501");h(this,cr).deleteMessage(t,e)}getMessagesByUser(t){return this.messages.filter(e=>e.userId===t)}getMessagesByType(t){return this.messages.filter(e=>e.type===t)}async pin(t){if(h(this,dr)!=="socket-service"){if(!this.roomJoined)throw new U("Can`t pin message without joining room");await h(this,Za,vc).pinChatMessage({id:t})}}async unpin(t){if(h(this,dr)!=="socket-service"){if(!this.roomJoined)throw new U("Can`t unpin message without joining room");await h(this,Za,vc).unpinChatMessage({id:t})}}async getMessages(t,e,i,r=0,s=void 0){const n=await h(this,cr).getChatMessagesPaginated(t,e,i,r,s);return{messages:n.messages.map(a=>xa.formatSocketServiceMessage(a)),next:n.next}}async createChannel(t,e,i={}){var r;const s=(r=h(this,Ue).permissions)==null?void 0:r.chatChannel;if(s){if(s.canCreate==="NONE")throw new U("Not permitted to create channels","0501");if(i.visibility==="public"&&!(s.canCreate==="PUBLIC"||s.canCreate==="ALL"))throw new U("Not permitted to create public channels","0501");if(i.visibility==="private"&&!(s.canCreate==="PRIVATE"||s.canCreate==="ALL"))throw new U("Not permitted to create private channels","0501")}if(!t||t.trim().length===0)throw new U("channel name cannot be empty.","0510");const n=[...new Set([...e,h(this,Ue).userId])];return await h(this,el).createChannel(t.trim(),n,i.displayPictureUrl,i.visibility,i.isDirectMessage)}updateChannel(t,e){var i,r,s,n,a;const o=this.channels.find(l=>l.id===t),c=(i=h(this,Ue).permissions)==null?void 0:i.chatChannel;if(c){if(c.canUpdate==="NONE")throw new U("Not permitted to update channels","0501");if(o.visibility==="public"&&!(c.canUpdate==="PUBLIC"||c.canUpdate==="ALL"))throw new U("Not permitted to update public channels","0501");if(o.visibility==="private"&&!(c.canUpdate==="PRIVATE"||c.canUpdate==="ALL"))throw new U("Not permitted to update private channels","0501")}const u={memberIds:(r=e.memberIds)!=null?r:o.memberIds,displayName:(s=e.displayName)!=null?s:o.displayName,displayPictureUrl:(n=e.displayPictureUrl)!=null?n:o.displayPictureUrl,visibility:(a=e.visibility)!=null?a:o.visibility};return h(this,el).updateChannel(t,u)}async sendMessageToChannel(t,e,i={}){return this.sendMessageInternal(t,null,e,i)}async getChannelMembers(t){return h(this,el).getChannelMembers(t)}async searchMessages(t,e={}){if(!ge.hasFeature(me.FEAT_CHAT_SDK_SEARCH))throw new U("searchMessages is temporarily disabled!");return(await h(this,cr).searchMessages(t,e)).map(xa.formatSocketServiceMessage)}async markLastReadMessage(t,e){await h(this,cr).markLastReadMessage(t,e);const i=this.channels.find(r=>r.id===t);if(i){const r={...i,unreadCount:0};this.channels=this.channels.map(s=>s.id===t?r:s),this.emit("channelMessageUpdate",r)}}get pinned(){return this.messages.filter(t=>t.pinned)}},Ue=new WeakMap,Xd=new WeakMap,cr=new WeakMap,el=new WeakMap,dr=new WeakMap,Za=new WeakSet,vc=function(){return Ai()},QP);fr([C.trace("DyteChat.sendTextMessage")],Qi.prototype,"sendTextMessage",1);fr([C.trace("DyteChat.sendImageMessage")],Qi.prototype,"sendImageMessage",1);fr([C.trace("DyteChat.sendFileMessage")],Qi.prototype,"sendFileMessage",1);fr([C.trace("DyteChat.sendMessage")],Qi.prototype,"sendMessage",1);fr([C.trace("DyteChat.editTextMessage")],Qi.prototype,"editTextMessage",1);fr([C.trace("DyteChat.editImageMessage")],Qi.prototype,"editImageMessage",1);fr([C.trace("DyteChat.editFileMessage")],Qi.prototype,"editFileMessage",1);fr([C.trace("DyteChat.editMessage")],Qi.prototype,"editMessage",1);fr([C.trace("DyteChat.deleteMessage")],Qi.prototype,"deleteMessage",1);fr([C.trace("DyteChat.createChannel")],Qi.prototype,"createChannel",1);fr([C.trace("DyteChat.updateChannel")],Qi.prototype,"updateChannel",1);fr([C.trace("DyteChat.sendMessageToChannel")],Qi.prototype,"sendMessageToChannel",1);fr([C.trace("DyteChat.getChannelMembers")],Qi.prototype,"getChannelMembers",1);fr([C.trace("DyteChat.searchMessages")],Qi.prototype,"searchMessages",1);fr([C.trace("DyteChat.markLastReadMessage")],Qi.prototype,"markLastReadMessage",1);Qi=fr([Hi(t=>{throw new U(t.message,"0500")})],Qi);var dhe=Object.defineProperty,lhe=Object.getOwnPropertyDescriptor,uhe=(t,e,i,r)=>{for(var s=r>1?void 0:r?lhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&dhe(e,i,s),s},Pm,s1,bh,YP;const qs=(YP=class{constructor(t,e,i,r,s){N(this,Pm),w(this,"chat"),w(this,"chatSocketHandler"),w(this,"chatChannelSocketHandler"),w(this,"self"),N(this,bh,void 0),this.chatSocketHandler=t,this.chatChannelSocketHandler=e,L(this,bh,i),this.chat=new Qi(t,e,i,r,s),this.self=r,this.setupEvents()}get roomJoined(){var t;return((t=h(this,Pm,s1))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,r,s){const n=jS(i.config.viewType,s)?"socket-service":"room-node";return x.info(`Using socket server :: ${n} for chat`),new qs(t,e,n,i,r)}static formatMessage(t){return{...t,time:new Date(t.time),type:ql[t.type]}}static formatSocketServiceMessage(t){const e=t.createdAt*1e3,i={displayName:t.displayName,id:t.chatId,time:e,timeMs:t.createdAtMs,type:t.payloadType,isEdited:t.isEdited,userId:t.userId,targetUserIds:t.targetUserIds,channelId:t.channelId,channelIndex:t.channelIndex,message:"",link:"",name:"",size:0};switch(i.type){case rs.TEXT:{i.message=t.payload;break}case rs.IMAGE:{i.link=t.payload;break}case rs.FILE:{const{link:r,name:s,size:n}=JSON.parse(t.payload);i.link=r,i.name=s,i.size=n;break}}return qs.formatMessage(i)}async getChatMessages(){if(this.self.config.viewType==="LIVESTREAM"||this.self.config.viewType==="CHAT"||ge.hasFeature(me.FEAT_PAGINATED_CHAT))return;if(h(this,bh)==="socket-service"){const e=await this.chatSocketHandler.getChatMessages();if(!(e!=null&&e.payload))return;const i=lO.fromBinary(e.payload).messages;this.chat.messages=i.map(r=>qs.formatSocketServiceMessage(r));return}if(!this.roomJoined){x.error("ChatController.getChatMessages.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{messages:t}=(await h(this,Pm,s1).getChatMessages()).payload;this.chat.messages=t.filter(e=>ql[e.type]!=="poll").map(qs.formatMessage)}async getAllChannels(){this.self.config.viewType==="CHAT"&&(this.chat.channels=await this.chatSocketHandler.getAllChannels())}setupEvents(){h(this,bh)==="socket-service"?R.onAsync(P.SOCKET_SERVICE_ROOM_JOINED,async()=>{this.getChatMessages(),await this.getAllChannels()}):R.onAsync(P.ROOM_JOINED,async()=>{await this.getChatMessages()}),this.chatSocketHandler.on(Ci.sendMessageToRoom,t=>{const e=qs.formatSocketServiceMessage(t.message);if(!e.channelId)this.chat.messages=[...this.chat.messages,e];else{const i=this.chat.channels.find(r=>r.id===e.channelId);i&&(i.latestMessage=e,i.unreadCount+=1,this.chat.emit("channelMessageUpdate",i))}this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),this.chatSocketHandler.on(Ci.sendMessageToPeers,t=>{const e=qs.formatSocketServiceMessage(t.message);this.chat.messages=[...this.chat.messages,e],this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),this.chatSocketHandler.on(Ci.editMessage,t=>{const e=qs.formatSocketServiceMessage(t.message);if(e.channelId){this.chat.emit("chatUpdate",{action:"edit",message:e,messages:this.chat.messages});return}const i=this.chat.messages.findIndex(r=>r.id===e.id);i!==-1&&(this.chat.messages[i]=e,this.chat.emit("chatUpdate",{action:"edit",message:e,messages:this.chat.messages}))}),this.chatSocketHandler.on(Ci.deleteMessage,t=>{if(t.channelId){this.chat.emit("chatUpdate",{action:"delete",message:{id:t.chatId,channelId:t.channelId},messages:this.chat.messages});return}const e=this.chat.messages.findIndex(r=>r.id===t.chatId);if(e===-1)return;const[i]=this.chat.messages.splice(e,1);this.chat.emit("chatUpdate",{action:"delete",message:i,messages:this.chat.messages})}),this.chatChannelSocketHandler.on(Bc.createChatChannel,t=>{const[e]=t.chatChannels,i=yd.formatChannel(e);this.chat.channels.push(i),this.chat.emit("channelCreate",i)}),this.chatChannelSocketHandler.on(Bc.updateChatChannel,t=>{const[e]=t.chatChannels,i=yd.formatChannel(e);this.chat.channels=this.chat.channels.map(r=>r.id===i.id?i:r),this.chat.emit("channelUpdate",i)}),R.on(P.NEW_CHAT_MESSAGE,t=>{if(ql[t==null?void 0:t.type]==="poll")return;const e=qs.formatMessage(t);this.chat.messages=[...this.chat.messages,e],this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),R.on(P.PIN_CHAT_MESSAGE,async t=>{const e=qs.formatMessage(t),i=this.chat.messages.findIndex(r=>r.id===e.id);this.chat.messages[i]=e,this.chat.emit("pinMessage",{message:e,messages:this.chat.messages})}),R.on(P.UNPIN_CHAT_MESSAGE,async t=>{const e=qs.formatMessage(t),i=this.chat.messages.findIndex(r=>r.id===e.id);this.chat.messages[i]=e,this.chat.emit("unpinMessage",{message:e,messages:this.chat.messages})})}},Pm=new WeakSet,s1=function(){return Ai()},bh=new WeakMap,YP);let xa=qs;uhe([C.trace("ChatController.setupEvents")],xa.prototype,"setupEvents",1);var hhe=Object.defineProperty,phe=Object.getOwnPropertyDescriptor,Xy=(t,e,i,r)=>{for(var s=r>1?void 0:r?phe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&hhe(e,i,s),s},Bs,wh,kh,Rm,n1,ZP;const VO=(ZP=class{constructor(t,e,i,r){N(this,Rm),w(this,"plugins"),N(this,Bs,void 0),N(this,wh,void 0),N(this,kh,void 0),L(this,Bs,t),L(this,kh,e),L(this,wh,i),this.plugins=r,this.setupEvents()}get roomJoined(){var t;return((t=h(this,Rm,n1))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,r,s,n,a){const o=$S(s.config.viewType,a)?"socket-service":"room-node";x.info(`Using socket server ${o} for plugin`);const c=new xk;return t.forEach(u=>{const l=new Zp(u,e,o,s,n,r);c.all.add(l)}),s.config.isV2===!1&&s.config.setDisabledPlugins(c.all.toArray().map(u=>u.id)),new VO(e,i,o,c)}async getRoomPlugins(){if(h(this,wh)==="socket-service"){const{plugins:e}=await h(this,Bs).getActivePlugins();await Promise.all(e.map(i=>this.enablePlugin({id:i.pluginId,enabledBy:i.enabledBy})));return}if(!this.roomJoined){x.error("PluginController.getRoomPlugins.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{payload:t}=await h(this,Rm,n1).getRoomState();await Promise.all(t.roomState.plugins.map(e=>this.enablePlugin(e)))}async enablePlugin({id:t,enabledBy:e}){const i=this.plugins.all.get(t);i&&(await i.activateForSelf(),i.enabledBy=e)}async disablePlugin({id:t}){const e=this.plugins.all.get(t);e&&e.deactivateForSelf()}sendIframeEventOld(t,e){const{id:i}=e,r=this.plugins.all.get(i);r&&r.sendIframeEvent({type:t,payload:e})}sendIframeEvent(t,e,i,r){const s=this.plugins.all.get(e);e&&s.sendIframeEvent({type:t,uuid:i,payload:r})}broadcastIframeEventOld(t,e){this.plugins.active.forEach(i=>{this.sendIframeEventOld(t,{...e,id:i.id})})}broadcastIframeEvent(t,e){this.plugins.active.forEach(i=>{this.sendIframeEvent(t,i.id,"",e)})}setupEvents(){if(this.plugins.all.on("stateUpdate",({active:t,id:e})=>{if(t){this.plugins.active.add(this.plugins.all.get(e));return}this.plugins.active.delete(e)}),R.onAsync(P.ROOM_JOINED,async()=>{await this.getRoomPlugins(),x.debug("[ROOM_JOINED] resolved request to fetch plugins.")}),h(this,wh)==="socket-service"){h(this,Bs).on(Te.addPlugin,async t=>{var e;const i=t.pluginId;(e=this.plugins.all.get(i))!=null&&e.active||await this.enablePlugin({id:i,enabledBy:t.enabledBy})}),h(this,Bs).on(Te.removePlugin,async t=>{var e;const i=t.pluginId;(e=this.plugins.all.get(i))!=null&&e.active&&await this.disablePlugin({id:i})}),[Te.enablePluginForPeers,Te.enablePluginForRoom].forEach(t=>{h(this,Bs).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{enabledBy:e.enabledBy})})}),[Te.disablePluginForPeers,Te.disablePluginForRoom].forEach(t=>{h(this,Bs).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{disabledBy:e.disabledBy})})}),[Te.customPluginEventToPeers,Te.customPluginEventToRoom].forEach(t=>{h(this,Bs).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{data:JSON.parse(new TextDecoder().decode(e.pluginData))})})}),[Te.storeInsertKeys,Te.storeGetKeys,Te.storeDeleteKeys].forEach(t=>{h(this,Bs).on(t,async(e,i)=>{var r;const s=(r=e.storeItems)==null?void 0:r.map(n=>{var a;return{timestamp:n.timestamp,peerId:n.peerId,payload:JSON.parse((a=n.payload)!=null&&a.length?new TextDecoder().decode(n.payload):"{}"),key:n.storeKey}});this.sendIframeEvent(t,e.pluginId,i,{storeName:e.storeName,storeItems:s})})}),h(this,Bs).on(Te.storeDelete,async(t,e)=>{this.sendIframeEvent(Te.storeDelete,t.pluginId,e,{storeName:t.storeName})}),h(this,kh).on(Ci.sendMessageToPeers,t=>{const e=xa==null?void 0:xa.formatSocketServiceMessage(t.message);this.broadcastIframeEvent(Ti.chatMessage,{message:e})}),h(this,kh).on(Ci.sendMessageToRoom,t=>{const e=xa==null?void 0:xa.formatSocketServiceMessage(t.message);this.broadcastIframeEvent(Ti.chatMessage,{message:e})}),R.on(P.PEER_JOINED,t=>{this.broadcastIframeEvent(Ti.peerJoined,t)}),R.on(P.PEER_CLOSED,t=>{this.broadcastIframeEvent(Ti.peerLeft,t)});return}R.on(P.ENABLE_PLUGIN,async({id:t,enabledBy:e})=>{await this.enablePlugin({id:t,enabledBy:e})}),R.on(P.DISABLE_PLUGIN,async({id:t})=>{await this.disablePlugin({id:t})}),[P.PLUGIN_DATA,P.PLUGIN_EVENT].forEach(t=>{R.on(t,e=>{this.sendIframeEventOld(t,e)})}),[P.PEER_JOINED,P.PEER_CLOSED,P.NEW_CHAT_MESSAGE].forEach(t=>{R.on(t,e=>{this.broadcastIframeEventOld(t,e)})})}},Bs=new WeakMap,wh=new WeakMap,kh=new WeakMap,Rm=new WeakSet,n1=function(){return Ai()},ZP);let Cg=VO;Xy([C.trace("PluginController.getRoomPlugins")],Cg.prototype,"getRoomPlugins",1);Xy([C.trace("PluginController.enableForSelf")],Cg.prototype,"enablePlugin",1);Xy([C.trace("PluginController.disableForSelf")],Cg.prototype,"disablePlugin",1);Xy([C.trace("PluginController.setupEvents")],Cg.prototype,"setupEvents",1);function ghe(){Ze.isElectron()&&window.dyteElectronGetDisplayMediaSource&&(navigator.mediaDevices.getDisplayMedia=async()=>{const t=await window.dyteElectronGetDisplayMediaSource({types:["window","screen"]});let e=[];if(t&&(Array.isArray(t)?e=t:e=[t]),!(e!=null&&e.length))throw new Error("Couldn't find any media source for screen share.");let i=e.find(s=>{var n;return(n=s.id)==null?void 0:n.includes("screen")});i=i!=null?i:e[0];const r={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i.id}}};return await navigator.mediaDevices.getUserMedia(r)})}var mhe=Object.defineProperty,fhe=Object.getOwnPropertyDescriptor,vhe=(t,e,i,r)=>{for(var s=r>1?void 0:r?fhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&mhe(e,i,s),s},_h,Im,Xa,Sh,xh,XP;let Tk=(XP=class extends Mt{constructor(t,e,i){super(),N(this,_h),w(this,"items"),N(this,Xa,void 0),N(this,Sh,void 0),N(this,xh,void 0),L(this,Xa,t),L(this,Sh,e),L(this,xh,i),this.items=[]}get roomJoined(){var t;return((t=h(this,_h,Im))==null?void 0:t.roomJoined)===!0}async create(t,e,i=!1,r=!1){if(h(this,Xa).config.viewType!=="LIVESTREAM"&&!this.roomJoined)throw new U("Can't create polls without joining room");if(!h(this,Xa).permissions.polls.canCreate){x.error("DytePolls::create::permission_denied");return}if(!t||!e){x.error("DytePolls::question_and_options_can_not_be_empty",{dytePolls:{hasQuestion:!!t,optionsLength:e==null?void 0:e.length}});return}if(e.length<2){x.error("DytePolls::there_must_be_at_least_two_options",{dytePolls:{hasQuestion:!!t,optionsLength:e.length}});return}if(h(this,xh)==="socket-service"){await h(this,Sh).createPoll(t,e,i,r);return}const s={question:t,options:e,anonymous:i,hideVotes:r,createdBy:h(this,Xa).name,createdByUserId:h(this,Xa).userId};await h(this,_h,Im).newPoll(s)}async vote(t,e){if(!h(this,Xa).permissions.polls.canVote){x.error("DytePolls::vote::permission_denied");return}if(h(this,xh)==="socket-service"){await h(this,Sh).votePoll(t,e);return}const i={pollId:t,index:e};await h(this,_h,Im).votePoll(i)}},_h=new WeakSet,Im=function(){return Ai()},Xa=new WeakMap,Sh=new WeakMap,xh=new WeakMap,XP);Tk=vhe([Hi(t=>{throw new U(t.message,"0700")})],Tk);var yhe=Object.defineProperty,bhe=Object.getOwnPropertyDescriptor,whe=(t,e,i,r)=>{for(var s=r>1?void 0:r?bhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&yhe(e,i,s),s},Am,yc,Eh,Mm,a1,e5;const ml=(e5=class{constructor(t,e,i){N(this,Mm),w(this,"polls"),N(this,Am,void 0),N(this,yc,void 0),N(this,Eh,void 0),this.polls=new Tk(t,e,i),L(this,Am,t),L(this,yc,e),L(this,Eh,i),this.setupEvents()}static async init(t,e,i){const r=sO(t.config.viewType,i)?"socket-service":"room-node";return x.info(`Using socket server ${r} for polls`),new ml(t,e,r)}canViewPolls(){return h(this,Am).permissions.polls.canView}setupEvents(){if(h(this,Eh)==="socket-service"){if(!this.canViewPolls())return;R.on(P.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getPolls()}),h(this,yc).on(ha.createPoll,t=>{t.poll&&this.updatePoll(ml.formatSocketServicePoll(t.poll))}),h(this,yc).on(ha.updatePoll,t=>{t.poll&&this.updatePoll(ml.formatSocketServicePoll(t.poll))}),h(this,yc).on(ha.votePoll,t=>{t.poll&&this.updatePoll(ml.formatSocketServicePoll(t.poll))})}else R.onAsync(P.ROOM_JOINED,async()=>{this.canViewPolls()&&this.getPolls()});R.on(P.UPDATE_POLL,async({poll:t})=>{this.updatePoll(t)})}updatePoll(t){if(!this.canViewPolls())return;const e=this.polls.items.findIndex(i=>i.id===t.id);if(e>-1){const i=JSON.stringify(this.polls.items[e]);this.polls.items[e]=t,i!==JSON.stringify(t)&&this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!1});return}this.polls.items=[...this.polls.items,t],this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!0})}async getPolls(){if(h(this,Eh)==="socket-service"){const t=await h(this,yc).getPolls();if(!(t!=null&&t.payload))return;const{polls:e}=Vde.fromBinary(t.payload);this.polls.items=e.map(i=>ml.formatSocketServicePoll(i));return}if(h(this,Mm,a1)instanceof Je){const{polls:t}=(await h(this,Mm,a1).getPolls()).payload;this.polls.items=Object.values(t)}}static formatSocketServicePoll(t){const e=t.options.map(i=>({count:i.count,text:i.text,votes:i.votes.map(r=>({id:r.userId,name:r.name}))}));return{anonymous:t.anonymous,createdBy:t.createdBy,createdByUserId:t.createdByUserId,hideVotes:t.hideVotes,id:t.pollId,options:e,question:t.question,voted:t.votes}}},Am=new WeakMap,yc=new WeakMap,Eh=new WeakMap,Mm=new WeakSet,a1=function(){return Ai()},e5);let BO=ml;whe([C.trace("PollController.setupEvents")],BO.prototype,"setupEvents",1);class t5 extends JS{constructor(){super({onAddEvent:"remoteRequestAdd",onDeleteEvent:"remoteRequestRemove"})}add(e,i=!0){return super.add(e,i)}delete(e,i=!0,r=!1){return super.delete(e,i,r)}}var Ac,fl,vl,Ef;const Ck=class extends Mt{constructor(t,e){super(),N(this,Ac),w(this,"incomingRequests"),w(this,"outgoingRequests"),w(this,"active"),N(this,vl,void 0),N(this,Ef,void 0),L(this,Ef,e),L(this,vl,t),this.incomingRequests=new t5,this.outgoingRequests=new t5,this.active=null,this.mouseEvent=this.mouseEvent.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this)}async requestControl(t){var e;if(!h(this,Ef).joined.get(t))throw new U("Invalid peer.");const i=(e=this.outgoingRequests)==null?void 0:e.toArray().find(n=>n.hostPeerId===t);if(i)return i.id;const r=gg(),s=new Qp({requestId:r,hostPeerId:t,remotePeerId:h(this,vl).id,state:Gl.PENDING});return this.outgoingRequests.add(s),await h(this,Ac,fl).requestRemoteControl(s),this.emit("remoteUpdate",{payload:{request:{id:s.id,hostPeerId:s.hostPeerId,remotePeerId:s.remotePeerId}},type:Sa.REQUEST_SENT}),r}async acceptControl(t){var e;if(((e=this.active)==null?void 0:e.id)===t)return;const i=this.incomingRequests.get(t);if(!i)throw new U("No request found.");i.state=Gl.ACCEPTED,this.endControl(),this.active=i,h(this,Ac,fl).acceptRemoteControl(i),this.emit("remoteUpdate",{payload:{request:{id:this.active.id,hostPeerId:this.active.hostPeerId,remotePeerId:this.active.remotePeerId}},type:Sa.INCOMING_REQUEST_ACCEPTED})}async endControl(){if(!this.active)return;const t={...this.active};h(this,Ac,fl).terminateRemoteControl(this.active.hostPeerId===h(this,vl).id?this.active.remotePeerId:this.active.hostPeerId,this.active),this.active=null,this.emit("remoteUpdate",{payload:{request:{id:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:t.hostPeerId===h(this,vl).id?Sa.INCOMING_REQUEST_ENDED:Sa.OUTGOING_REQUEST_ENDED})}async keyboardEvent(t){if(!this.active)return;const e=Ck.getFormattedKeyboardEvent(t);if(e){const i={eventType:Kp.KEYBOARD,keyboardEvent:e};h(this,Ac,fl).sendEventRemoteControl(this.active.hostPeerId,this.active.id,i)}}async mouseEvent(t,e){if(!this.active)return;const i=Ck.getFormattedRemoteMouseEvent(t,e);if(i){const r={eventType:Kp.MOUSE,mouseEvent:i};h(this,Ac,fl).sendEventRemoteControl(this.active.hostPeerId,this.active.id,r)}}static getFormattedRemoteMouseEvent(t,e){const i=e.getBoundingClientRect();return{type:t.type,position:{x:Math.floor(t.x-i.left),y:Math.floor(t.y-i.top)},boundingRect:{width:i.width,height:i.height}}}static getFormattedKeyboardEvent(t){return t.type==="keydown"?{type:t.type,key:t.key}:null}};let khe=Ck;Ac=new WeakSet,fl=function(){return Ai()},vl=new WeakMap,Ef=new WeakMap;var Tf,Pk;const Rk=class{constructor(t,e){w(this,"remote"),w(this,"hostPeetId"),w(this,"remotePeetId"),w(this,"remoteRequestTokens"),w(this,"activeRemoteToken"),N(this,Tf,void 0),N(this,Pk,void 0),L(this,Tf,t),L(this,Pk,e),this.hostPeetId=t.id,this.remote=new khe(t,e),this.setupEvents()}setupEvents(){R.on(P.MESSAGE,t=>{var e;if(t.remoteRequestType===_a.REQUEST&&(this.remote.incomingRequests.add(new Qp({requestId:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,state:Gl.PENDING})),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:Sa.REQUEST_RECEIVED})),t.remoteRequestType===_a.ACCEPT){const i=this.remote.outgoingRequests.get(t.remoteRequestId);if(!i)throw new U("There is no pending remote control request to accept.");this.remote.endControl(),i.state=Gl.ACCEPTED,this.remote.active=new Qp({requestId:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,state:Gl.ACCEPTED}),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:Sa.OUTGOING_REQUEST_ACCEPTED})}t.remoteRequestType===_a.END&&(((e=this.remote.active)==null?void 0:e.id)===t.remoteRequestId&&(this.remote.active=null),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:t.hostPeerId===h(this,Tf).id?Sa.INCOMING_REQUEST_ENDED:Sa.OUTGOING_REQUEST_ENDED})),t.remoteRequestType===_a.EVENT&&this.remote.active&&this.remote.active.id===t.remoteRequestId&&window.DyteRobot&&(t.remoteEvent.eventType===Kp.MOUSE?Rk.executeMouseEvent(t.remoteEvent.mouseEvent):t.remoteEvent.eventType===Kp.KEYBOARD&&Rk.executeKeyboardEvent(t.remoteEvent.keyboardEvent))}),R.on(P.PEER_CLOSED,({id:t})=>{var e,i,r,s,n,a,o,c;[(i=(e=this.remote)==null?void 0:e.active)==null?void 0:i.hostPeerId,(s=(r=this.remote)==null?void 0:r.active)==null?void 0:s.remotePeerId].includes(t)&&this.remote.endControl(),(a=(n=this.remote)==null?void 0:n.incomingRequests)==null||a.toArray().forEach(u=>{[u.hostPeerId,u.remotePeerId].includes(t)&&this.remote.incomingRequests.delete(u.id)}),(c=(o=this.remote)==null?void 0:o.outgoingRequests)==null||c.toArray().forEach(u=>{[u.hostPeerId,u.remotePeerId].includes(t)&&this.remote.outgoingRequests.delete(u.id)})})}static executeMouseEvent(t){const e=window.screen.width*t.position.x/t.boundingRect.width,i=window.screen.height*t.position.y/t.boundingRect.height,r={width:window.screen.width,height:window.screen.height};switch(t.type){case bf.LEFT_CLICK:window.DyteRobot.mouse.leftClick(e,i,r);break;case bf.RIGHT_CLICK:window.DyteRobot.mouse.rightClick(e,i,r);break;case bf.MOVE:window.DyteRobot.mouse.moveTo(e,i,r);break}}static executeKeyboardEvent(t){switch(t.type){case"keydown":window.DyteRobot.keyboard.press(t.key);break}}};let _he=Rk;Tf=new WeakMap,Pk=new WeakMap;var She=Object.defineProperty,xhe=(t,e,i)=>e in t?She(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Ehe=(t,e,i)=>(xhe(t,typeof e!="symbol"?e+"":e,i),i),YS=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Z=(t,e,i)=>(YS(t,e,"read from private field"),i?i.call(t):e.get(t)),ai=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Yt=(t,e,i,r)=>(YS(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),oi=(t,e,i)=>(YS(t,e,"access private method"),i),uo,Mc,Dc,ci,yl,jt,vi,ho,Pi,ma,Cs,Jl,fa,Ik,HO,Hh,Cf,Ak,WO,ZS,GO,Kl,Xp,vp,Kv,Qv,XS,Ql,eg,yp,Yv,e2={exports:{}},Yl=typeof Reflect=="object"?Reflect:null,i5=Yl&&typeof Yl.apply=="function"?Yl.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},Pf;Yl&&typeof Yl.ownKeys=="function"?Pf=Yl.ownKeys:Object.getOwnPropertySymbols?Pf=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Pf=function(t){return Object.getOwnPropertyNames(t)};function The(t){console&&console.warn&&console.warn(t)}var qO=Number.isNaN||function(t){return t!==t};function _t(){_t.init.call(this)}e2.exports=_t;e2.exports.once=Ihe;_t.EventEmitter=_t;_t.prototype._events=void 0;_t.prototype._eventsCount=0;_t.prototype._maxListeners=void 0;var r5=10;function e0(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return r5},set:function(t){if(typeof t!="number"||t<0||qO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r5=t}});_t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||qO(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function JO(t){return t._maxListeners===void 0?_t.defaultMaxListeners:t._maxListeners}_t.prototype.getMaxListeners=function(){return JO(this)};_t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=s[t];if(o===void 0)return!1;if(typeof o=="function")i5(o,this,e);else for(var c=o.length,u=XO(o,c),i=0;i<c;++i)i5(u[i],this,e);return!0};function KO(t,e,i,r){var s,n,a;if(e0(i),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),a=n[e]),a===void 0)a=n[e]=i,++t._eventsCount;else if(typeof a=="function"?a=n[e]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),s=JO(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,The(o)}return t}_t.prototype.addListener=function(t,e){return KO(this,t,e,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(t,e){return KO(this,t,e,!0)};function Che(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function QO(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=Che.bind(r);return s.listener=i,r.wrapFn=s,s}_t.prototype.once=function(t,e){return e0(e),this.on(t,QO(this,t,e)),this};_t.prototype.prependOnceListener=function(t,e){return e0(e),this.prependListener(t,QO(this,t,e)),this};_t.prototype.removeListener=function(t,e){var i,r,s,n,a;if(e0(e),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){a=i[n].listener,s=n;break}if(s<0)return this;s===0?i.shift():Phe(i,s),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};_t.prototype.off=_t.prototype.removeListener;_t.prototype.removeAllListeners=function(t){var e,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),n;for(r=0;r<s.length;++r)n=s[r],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function YO(t,e,i){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?i?[s.listener||s]:[s]:i?Rhe(s):XO(s,s.length)}_t.prototype.listeners=function(t){return YO(this,t,!0)};_t.prototype.rawListeners=function(t){return YO(this,t,!1)};_t.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ZO.call(t,e)};_t.prototype.listenerCount=ZO;function ZO(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?Pf(this._events):[]};function XO(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function Phe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Rhe(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function Ihe(t,e){return new Promise(function(i,r){function s(a){t.removeListener(e,n),r(a)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",s),i([].slice.call(arguments))}eL(t,e,n,{once:!0}),e!=="error"&&Ahe(t,s,{once:!0})})}function Ahe(t,e,i){typeof t.on=="function"&&eL(t,"error",e,i)}function eL(t,e,i,r){if(typeof t.on=="function")r.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(n){r.once&&t.removeEventListener(e,s),i(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Mhe=e2.exports;class Dhe extends ${constructor(){super("message.v1.SocketMessage",[{no:1,name:"event",kind:"scalar",T:13},{no:2,name:"id",kind:"scalar",opt:!0,T:9},{no:3,name:"payload",kind:"scalar",opt:!0,T:12},{no:4,name:"metadata",kind:"scalar",opt:!0,T:12}])}}const s5=new Dhe;class tL{static encode(e){return s5.toBinary(e)}static decode(e){return s5.fromBinary(new Uint8Array(e))}}function Ohe(t,e){return Math.floor(Math.random()*(e-t+1)+t)}class Lhe{constructor(e={}){Ehe(this,"opts"),ai(this,uo,void 0),this.opts={initialTimeout:e.initialTimeout||1e3,maxTimeout:e.maxTimeout||1e4,factor:e.factor||2},Yt(this,uo,0)}async wait(){Yt(this,uo,Z(this,uo)+1);const e=Ohe(0,Math.min(this.opts.maxTimeout,this.opts.initialTimeout*2**Z(this,uo)));await new Promise(i=>{setTimeout(i,e)})}getAttempts(){return Z(this,uo)}reset(){Yt(this,uo,0)}}uo=new WeakMap;const eo={debug:0,info:1,warn:2,error:3};class Nhe{constructor(e){ai(this,Mc,void 0),ai(this,Dc,void 0),Yt(this,Mc,console),Yt(this,Dc,e)}debug(...e){eo[Z(this,Dc)]>eo.debug||Z(this,Mc).debug("[Sockrates]:",...e)}info(...e){eo[Z(this,Dc)]>eo.info||Z(this,Mc).info("[Sockrates]:",...e)}warn(...e){eo[Z(this,Dc)]>eo.warn||Z(this,Mc).warn("[Sockrates]:",...e)}error(...e){eo[Z(this,Dc)]>eo.error||Z(this,Mc).error("[Sockrates]:",...e)}}Mc=new WeakMap;Dc=new WeakMap;var iL=(t=>(t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED",t))(iL||{});const Uhe="2",jhe="3";class $he{constructor(e,i){ai(this,Ik),ai(this,Hh),ai(this,Ak),ai(this,ZS),ai(this,Kl),ai(this,vp),ai(this,Qv),ai(this,Ql),ai(this,yp),ai(this,ci,void 0),ai(this,yl,void 0),ai(this,jt,void 0),ai(this,vi,void 0),ai(this,ho,void 0),ai(this,Pi,void 0),ai(this,ma,void 0),ai(this,Cs,void 0),ai(this,Jl,void 0),ai(this,fa,void 0);var r,s,n,a,o,c,u,l,p,m;Yt(this,yl,e),Yt(this,ho,[]),Yt(this,Pi,new Mhe),Yt(this,ma,!0),Yt(this,Cs,!1),Yt(this,jt,i!=null?i:{}),(r=Z(this,jt)).autoReconnect!=null||(r.autoReconnect=!0),(s=Z(this,jt)).retryConnectionInterval!=null||(s.retryConnectionInterval=1e3),(n=Z(this,jt)).pingTimeout!=null||(n.pingTimeout=3e4),(a=Z(this,jt)).connectionTimeout!=null||(a.connectionTimeout=5e3),(o=Z(this,jt)).debug!=null||(o.debug=!0),(c=Z(this,jt)).maxReconnectionAttempts!=null||(c.maxReconnectionAttempts=10),(u=Z(this,jt)).disconnectOnPingTimeout!=null||(u.disconnectOnPingTimeout=!0),(l=Z(this,jt)).queueOnDisconnect!=null||(l.queueOnDisconnect=!1),(p=Z(this,jt)).flushOnReconnect!=null||(p.flushOnReconnect=!1),Yt(this,vi,(m=Z(this,jt).logger)!=null?m:new Nhe(Z(this,jt).debug?"debug":"info")),Yt(this,fa,new Lhe)}get readyState(){var e;return(e=Z(this,ci))==null?void 0:e.readyState}get url(){return Z(this,yl)}get config(){return Z(this,jt)}get sendQueue(){return Z(this,ho)}flush(){if(!Z(this,jt).queueOnDisconnect)return!1;const e=[];return Z(this,ho).forEach(i=>{this.send(i.event,i.id,i.payload,i.metadata)||e.push(i)}),Yt(this,ho,e),Z(this,ho)}async connect(e=!1){if(!e&&[0,1].includes(this.readyState)){Z(this,vi).debug("Websocket was already connecting or connected.");return}if(Z(this,ma)!==!1)return new Promise((i,r)=>{oi(this,Ql,eg).call(this),oi(this,yp,Yv).call(this);try{Yt(this,ci,new WebSocket(oi(this,Ik,HO).call(this,Z(this,yl)))),Z(this,ci).binaryType="arraybuffer",Z(this,vi).debug("Connecting to",Z(this,yl));const s=setTimeout(()=>{Z(this,vi).debug("Connection timeout. Closing socket"),Yt(this,ma,!0),oi(this,yp,Yv).call(this),Z(this,ci).close(3001,"Connection Timeout"),Z(this,jt).autoReconnect&&!Z(this,Cs)&&(Z(this,Pi).emit("reconnecting"),oi(this,Kl,Xp).call(this)),r(new Error("Connection timed out!"))},Z(this,jt).connectionTimeout);Z(this,ci).onopen=()=>{Z(this,vi).debug(`Ready State: ${iL[Z(this,ci).readyState]}`),s&&clearTimeout(s),oi(this,Qv,XS).call(this),Z(this,Pi).emit("connected"),Z(this,jt).flushOnReconnect&&this.flush(),i()},Z(this,ci).onclose=n=>{try{s&&clearTimeout(s);const{code:a,reason:o}=n;if(r(o),Z(this,vi).debug("Socket closed. Close event:",n),Z(this,vi).debug("Connection closed code:",a),Z(this,vi).debug("Connection closed reason:",o),Z(this,ma)&&a!==1e3&&Z(this,jt).autoReconnect&&!Z(this,Cs)){Z(this,Pi).emit("reconnecting"),oi(this,Kl,Xp).call(this);return}Z(this,Cs)||Z(this,Pi).emit("disconnected",{code:a,reason:o})}catch(a){oi(this,Hh,Cf).call(this,a)}},Z(this,ci).onerror=n=>{oi(this,Hh,Cf).call(this,n)},Z(this,ci).onmessage=n=>oi(this,Ak,WO).call(this,n)}catch(s){oi(this,Hh,Cf).call(this,s,r)}})}send(e,i,r,s){const n={event:e,id:i,payload:r,metadata:s};if(Z(this,jt).queueOnDisconnect&&(!Z(this,ci)||Z(this,ci).readyState!==1))return Z(this,vi).debug("Queuing message since socket is not connected!",n),Z(this,ho).push(n),!1;const a=tL.encode(n);return oi(this,vp,Kv).call(this,a)}emit(e,i,r,s){return this.send(e,i,r,s)}sendRaw(e){return oi(this,vp,Kv).call(this,e)}receive(e,i){return Z(this,Pi).on(e.toString(),i)}on(e,i){if(typeof e=="string"&&(e==="connected"||e==="disconnected"||e==="errored"||e==="reconnected"||e==="reconnecting"||e==="reconnectAttempt"||e==="reconnectFailure"||e==="failed")){Z(this,Pi).on(e,i);return}this.receive(e,i)}removeAllListeners(){Z(this,Pi).removeAllListeners()}removeReceiver(e,i){this.removeListener(e,i)}removeListener(e,i){Z(this,Pi).removeListener(e.toString(),i)}removeReceivers(e){this.removeListeners(e)}removeListeners(e){Z(this,Pi).listeners(e.toString()).map(i=>this.removeListener(e,i))}disconnect(){Yt(this,ma,!1),oi(this,Ql,eg).call(this),this.removeAllListeners(),Z(this,ci).close(1e3,"Sockrates disconnect method called.")}}ci=new WeakMap;yl=new WeakMap;jt=new WeakMap;vi=new WeakMap;ho=new WeakMap;Pi=new WeakMap;ma=new WeakMap;Cs=new WeakMap;Jl=new WeakMap;fa=new WeakMap;Ik=new WeakSet;HO=function(t){if(t.startsWith("ws://")||t.startsWith("wss://"))return t;if(t.startsWith("https://"))return`wss://${t.substring(8)}`;if(t.startsWith("http://"))return`ws://${t.substring(7)}`;throw new Error("Invalid URL. URL must start with http(s):// or ws(s)://.")};Hh=new WeakSet;Cf=function(t,e){Z(this,vi).error("Error:",t),Z(this,Pi).emit("errored",{error:t}),e==null||e(t)};Ak=new WeakSet;WO=function(t){if(t.data===Uhe){Z(this,vi).debug("Received ping from server"),oi(this,Qv,XS).call(this),oi(this,vp,Kv).call(this,jhe);return}Z(this,vi).debug("Received data:",t.data);const e=tL.decode(t.data),{id:i,payload:r}=e;Z(this,Pi).emit(e.event.toString(),{id:i,payload:r})};ZS=new WeakSet;GO=function(){return Z(this,ci).readyState===1};Kl=new WeakSet;Xp=async function(t=!0){if(t&&Z(this,Cs)){Z(this,vi).debug("Reconnect called when already in a reconnect loop. Ignoring.");return}if(Z(this,Cs)||Z(this,fa).reset(),Z(this,jt).maxReconnectionAttempts!==null&&Z(this,fa).getAttempts()>=Z(this,jt).maxReconnectionAttempts){Z(this,Pi).emit("failed"),Yt(this,Cs,!1);return}Yt(this,Cs,!0),oi(this,yp,Yv).call(this),oi(this,Ql,eg).call(this);try{if(await Z(this,fa).wait(),Z(this,ma)===!1)return;if(Z(this,vi).debug(`Reconnection attempt ${Z(this,fa).getAttempts()}`),Z(this,Pi).emit("reconnectAttempt",{attempt:Z(this,fa).getAttempts()}),await this.connect(),!oi(this,ZS,GO).call(this))throw Error("Reconnect Failed");Yt(this,Cs,!1),Z(this,Pi).emit("reconnected")}catch{Z(this,vi).debug("Failed to reconnect."),Z(this,Pi).emit("reconnectFailure",{attempt:Z(this,fa).getAttempts()}),oi(this,Kl,Xp).call(this,!1)}};vp=new WeakSet;Kv=function(t){try{return Z(this,ci).send(t),!0}catch(e){return Z(this,vi).error(e.message),!1}};Qv=new WeakSet;XS=function(){this.config.disconnectOnPingTimeout&&(Z(this,vi).debug("Resetting ping timeout"),oi(this,Ql,eg).call(this),Yt(this,Jl,setTimeout(()=>{var t;Z(this,vi).debug("Disconnecting the socket due to ping timeout"),Yt(this,ma,!0);const e=3002,i="Ping timeout";(t=Z(this,ci))==null||t.close(e,i),Z(this,Pi).emit("disconnected",{code:e,reason:i}),Z(this,jt).autoReconnect&&!Z(this,Cs)&&(Z(this,vi).debug("Triggering reconnection due to ping timeout"),Z(this,Pi).emit("reconnecting"),oi(this,Kl,Xp).call(this))},Z(this,jt).pingTimeout)))};Ql=new WeakSet;eg=function(){Z(this,Jl)&&(clearTimeout(Z(this,Jl)),Yt(this,Jl,void 0))};yp=new WeakSet;Yv=function(){Z(this,ci)&&(Z(this,ci).onopen=void 0,Z(this,ci).onerror=void 0,Z(this,ci).onmessage=void 0,Z(this,ci).onclose=void 0)};var zhe=Object.defineProperty,Fhe=Object.getOwnPropertyDescriptor,t0=(t,e,i,r)=>{for(var s=r>1?void 0:r?Fhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&zhe(e,i,s),s};const n5=65535;var Th,Xi,Dm,Om,o1,a5;const rL=(a5=class{constructor({peerId:t,roomName:e,authToken:i,capabilities:r}){N(this,Om),N(this,Th,void 0),N(this,Xi,void 0),N(this,Dm,void 0),w(this,"roomName"),w(this,"peerId"),w(this,"authToken"),w(this,"capabilities");var s;if(!t||!e||!i)throw new U("peerId, roomName, or authToken can not be empty");const{apiBase:n,baseURI:a}=tt;let o=rL.getSocketEdgeDomain(n,a);typeof Xw("socket_server_base")=="string"&&(o=Xw("socket_server_base"));const c=`wss://${o}`;this.roomName=e,this.peerId=t,this.authToken=i,this.capabilities=r;const u=new URL(`${c}/ws`),l={roomID:e,peerID:t,authToken:i,useMediaV2:r.includes("HIVE"),ping:r.includes("PING"),capabilities:r.map(p=>Hv[p]).join(" ")};Object.entries(l).forEach(([p,m])=>{u.searchParams.append(p,m.toString())}),L(this,Th,u.href),L(this,Dm,t),L(this,Xi,new $he(h(this,Th),{autoReconnect:!0,disconnectOnPingTimeout:(s=r.includes("PING"))!=null?s:!1,queueOnDisconnect:!0,flushOnReconnect:!1,logger:x}))}static getSocketEdgeDomain(t,e){let i="";return e?`socket-edge.${e}`:(t.includes("api.cluster.dyte")||t.includes("api.dyte")?i="edge":t.includes("api.staging.dyte")?i="staging":t.includes("api.preprod.dyte")?i="preprod":t.includes("api.devel.dyte")&&(i="devel"),`socket-${i}.dyte.io`)}get url(){return h(this,Th)}async connect(){const t=()=>{x.info("SocketService::connect::Connected to socket-edge"),R.emit(P.SOCKET_SERVICE_CONNECTED)};this.onStateEvent("connected",t);const e=({reason:o,code:c})=>{x.info("SocketService::connect::Disconnected from socket-edge",{error:{code:c,reason:o}}),R.emit(P.SOCKET_SERVICE_DISCONNECTED),!(c<4e3||c>4002)&&(c===4e3?x.error("SocketService::connect::Bad Request",{error:{code:c,reason:o}}):c===4001?x.error("SocketService::connect::Unauthorized",{error:{code:c,reason:o}}):c===4002?x.error("SocketService::connect::Internal Error",{error:{code:c,reason:o}}):x.error("SocketService::connect::Unknown Error",{error:{code:c,reason:o}}))};this.onStateEvent("disconnected",e);const i=()=>{x.info("SocketService::connect::Reconnecting to socket-edge"),R.emit(P.SOCKET_SERVICE_RECONNECTING)};this.onStateEvent("reconnecting",i);const r=({attempt:o})=>{x.info("SocketService::connect::Attempting reconnect to socket-edge"),R.emit(P.SOCKET_SERVICE_RECONNECTION_ATTEMPT,{attempt:o})};this.onStateEvent("reconnectAttempt",r);const s=({attempt:o})=>{x.info("SocketService::connect::Reconnect attempt failed"),R.emit(P.SOCKET_SERVICE_RECONNECT_FAILURE,{attempt:o})};this.onStateEvent("reconnectFailure",s);const n=()=>{x.info("SocketService::connect::Reconnected to socket-edge"),R.emit(P.SOCKET_SERVICE_RECONNECTED)};this.onStateEvent("reconnected",n);const a=()=>{x.info("SocketService::connect::Socket-edge reconnects failed"),R.emit(P.SOCKET_SERVICE_FAILED)};this.onStateEvent("failed",a),await h(this,Xi).connect()}disconnect(){return h(this,Xi).disconnect()}get isConnected(){try{return h(this,Xi).readyState===1}catch{return!1}}sendMessage(t,e,i){const r={};return C.injectContext(r),x.info(`SocketSetvice::SendMessage::${t}`),h(this,Xi).send(t,i!=null?i:qe(this,Om,o1).call(this),e,new TextEncoder().encode(JSON.stringify(r)))}sendMessagePromise(t,e,i){const r=parseInt({}.SOCKET_SERVICE_MESSAGE_REQUEST_TIMEOUT,10)||2e4;return this.sendMessagePromiseWithTimeout({event:t,timeout:r,protobuf:e,messageId:i})}sendMessagePromiseWithTimeout({event:t,timeout:e,protobuf:i,messageId:r}){return new Promise((s,n)=>{const a=(p,m)=>{h(this,Xi).removeListener(t,p),h(this,Xi).removeListener(n5,m),h(this,Xi).removeListener(st.errorResponse,m)},o=r!=null?r:qe(this,Om,o1).call(this),c={};C.injectContext(c);const u=({id:p,payload:m})=>{if(o===p){let y;try{const b=hne.fromBinary(m);y=new Error(b.errorMessage)}catch(b){y=new Error("failed to parse error message",{cause:b})}try{const b=yae.fromBinary(m);y=new Error(b.message)}catch(b){y=new Error("failed to parse error message",{cause:b})}n(y),a(l,u)}},l=({id:p,payload:m})=>{o===p&&(s({id:p,payload:m}),a(l,u))};h(this,Xi).on(t,l),h(this,Xi).on(n5,u),h(this,Xi).on(st.errorResponse,u),setTimeout(()=>{a(l,u),n(new Error("request timeout for callback"))},e),h(this,Xi).send(t,o,i,new TextEncoder().encode(JSON.stringify(c)))})}on(t,e){h(this,Xi).on(t,e)}onStateEvent(t,e){h(this,Xi).on(t,e)}flush(){return h(this,Xi).flush()}},Th=new WeakMap,Xi=new WeakMap,Dm=new WeakMap,Om=new WeakSet,o1=function(){return`${h(this,Dm)}-${(Math.random()+1).toString(36).substring(7)}`},a5);let Pg=rL;t0([C.trace("SocketService.connect")],Pg.prototype,"connect",1);t0([C.trace("SocketService.disconnect")],Pg.prototype,"disconnect",1);t0([C.trace("SocketService.sendMessagePromise")],Pg.prototype,"sendMessagePromise",1);t0([C.trace("SocketService.sendMessagePromiseWithTimeout")],Pg.prototype,"sendMessagePromiseWithTimeout",1);var qi;class Vhe{constructor(e){N(this,qi,void 0),L(this,qi,e)}addPlugin(e,i){h(this,qi).sendMessage(Te.addPlugin,Hce.toBinary({pluginId:e,staggered:i}))}removePlugin(e){h(this,qi).sendMessage(Te.removePlugin,Gce.toBinary({pluginId:e,staggered:!1}))}async getActivePlugins(){const{payload:e}=await h(this,qi).sendMessagePromise(Te.getPlugins);return e?mde.fromBinary(e):{plugins:[]}}customPluginEventToRoom(e,i,r){const s={pluginId:e,pluginData:new TextEncoder().encode(JSON.stringify(i))};h(this,qi).sendMessage(Te.customPluginEventToRoom,ide.toBinary(s),r)}customPluginEventToPeers(e,i,r,s){const n={pluginId:e,peerIds:i,pluginData:new TextEncoder().encode(JSON.stringify(r))};h(this,qi).sendMessage(Te.customPluginEventToPeers,sde.toBinary(n),s)}enablePluginForRoom(e,i){h(this,qi).sendMessage(Te.enablePluginForRoom,Jce.toBinary({pluginId:e}),i)}enablePluginForPeers(e,i,r){h(this,qi).sendMessage(Te.enablePluginForPeers,Zce.toBinary({pluginId:e,peerIds:i}),r)}disablePluginForRoom(e,i){h(this,qi).sendMessage(Te.disablePluginForRoom,Qce.toBinary({pluginId:e}),i)}disablePluginForPeers(e,i,r){h(this,qi).sendMessage(Te.disablePluginForPeers,ede.toBinary({pluginId:e,peerIds:i}),r)}storeInsertKeys(e,i,r,s){const n={pluginId:e,storeName:i,insertKeys:r.map(a=>({storeKey:a.key,payload:new TextEncoder().encode(JSON.stringify(a.payload))}))};h(this,qi).sendMessage(Te.storeInsertKeys,wP.toBinary(n),s)}storeGetKeys(e,i,r,s){const n={pluginId:e,storeName:i,getKeys:r.map(a=>({storeKey:a.key}))};h(this,qi).sendMessage(Te.storeGetKeys,cde.toBinary(n),s)}storeDeleteKeys(e,i,r,s){const n={pluginId:e,storeName:i,deleteKeys:r.map(a=>({storeKey:a.key}))};h(this,qi).sendMessage(Te.storeDeleteKeys,lde.toBinary(n),s)}storeDelete(e,i,r){h(this,qi).sendMessage(Te.storeDelete,hde.toBinary({pluginId:e,storeName:i}),r)}getPluginDataOld(e,i){x.info("getPluginDataOld",{plugin:{id:e,storeName:i}})}storePluginDataOld(e,i,r){const s={pluginId:e,storeName:i,insertKeys:[{storeKey:r.key,payload:new TextEncoder().encode(JSON.stringify(r))}]};h(this,qi).sendMessage(Te.storeInsertKeys,wP.toBinary(s))}on(e,i){let r;switch(e){case Te.addPlugin:case Te.enablePluginForPeers:case Te.enablePluginForRoom:{r=tk.fromBinary.bind(tk);break}case Te.removePlugin:case Te.disablePluginForPeers:case Te.disablePluginForRoom:{r=kP.fromBinary.bind(kP);break}case Te.customPluginEventToPeers:case Te.customPluginEventToRoom:{r=SP.fromBinary.bind(SP);break}case Te.storeInsertKeys:case Te.storeGetKeys:case Te.storeDeleteKeys:case Te.storeDelete:{r=_P.fromBinary.bind(_P);break}}h(this,qi).on(e,({payload:s,id:n})=>{const a=r(s);return i(a,n)})}}qi=new WeakMap;var Bhe=Object.defineProperty,Hhe=Object.getOwnPropertyDescriptor,i0=(t,e,i,r)=>{for(var s=r>1?void 0:r?Hhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Bhe(e,i,s),s},tl,o5;let hu=(o5=class extends Mt{constructor(t){super(),N(this,tl,void 0),w(this,"recordingState","IDLE"),w(this,"recordingId"),w(this,"recordingPeerIds",[]),L(this,tl,t)}get activeRecordingsCount(){var t,e;return(e=(t=this.recordingPeerIds)==null?void 0:t.length)!=null?e:0}setRecordingState(t){const e=this.recordingState;this.recordingState=t,e!==t&&this.emitCurrentRecordingState()}emitCurrentRecordingState(){this.emit("recordingUpdate",this.recordingState)}async start(){if(!h(this,tl).permissions.canRecord)throw x.error("DyteRecording::start::permission_denied"),new U("User does not have permission to start recording");if(this.recordingState==="STARTING"||this.recordingState==="RECORDING"||this.recordingState==="STOPPING")throw x.error("DyteRecording::start::recording_in_progress",{recording:{state:this.recordingState}}),new U(`Cant start recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STARTING");try{const t=Bi(),{recording:e={}}=tt.defaults,i=await t.startRecording(e);this.recordingId=i}catch(t){throw x.error("DyteRecording::stop::recording_failed_to_start",{error:t}),this.setRecordingState("IDLE"),new U("Error while starting recording")}}async stop(){if(!h(this,tl).permissions.canRecord)throw x.error("DyteRecording::stop::permission_denied"),new U("User does not have permission to stop recording");if((this.recordingState!=="RECORDING"||!this.recordingId)&&(x.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),await this.getRecordingId()),this.recordingState!=="RECORDING"||!this.recordingId)throw x.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),new U(`Cant stop recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STOPPING");try{const t=Bi(),e=this.activeRecordingsCount===1?"IDLE":"RECORDING";await t.stopRecording(this.recordingId),this.recordingId=void 0,this.setRecordingState(e)}catch(t){throw x.error("DyteRecording::stop::recording_failed_to_stop",{error:t}),this.setRecordingState("RECORDING"),new U("Error while stopping recording")}}async getRecordingId(){if(!h(this,tl).permissions.canRecord)throw x.error("DyteRecording::getRecordingId::permission_denied"),new U("User does not have permission to stop recording");try{const t=Bi(),{status:e,id:i}=await t.getActiveRecording();e==="RECORDING"&&(this.recordingState="RECORDING",this.recordingId=i)}catch(t){throw x.error("DyteRecording::getRecordingId::unable_to_get_recording_id",{error:t}),new U("Unable to get recording")}}},tl=new WeakMap,o5);i0([C.trace("DyteRecording.start")],hu.prototype,"start",1);i0([C.trace("DyteRecording.stop")],hu.prototype,"stop",1);i0([C.trace("DyteRecording.getRecordingId")],hu.prototype,"getRecordingId",1);hu=i0([Hi(t=>{throw new U(t.message,"1000")})],hu);var Whe=Object.defineProperty,Ghe=Object.getOwnPropertyDescriptor,qhe=(t,e,i,r)=>{for(var s=r>1?void 0:r?Ghe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Whe(e,i,s),s};class sL{constructor(e){w(this,"recording"),this.recording=new hu(e),this.setupEvents()}setupEvents(){R.on(P.HIVE_RECORDING_STARTED,e=>{this.recording.recordingPeerIds.push(e),this.recording.setRecordingState("RECORDING")}),R.on(P.HIVE_RECORDING_STOPPED,()=>{this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE")}),R.on(P.LEAVE_MEDIA_ROOM,()=>{this.recording.setRecordingState("IDLE")}),R.on(P.PEER_JOINED,async e=>{var i;(i=e.flags)!=null&&i.recorder&&(this.recording.recordingPeerIds.push(e.id),this.recording.setRecordingState("RECORDING"))}),R.on(P.PEER_CLOSED,e=>{this.recording.recordingPeerIds=Nie(this.recording.recordingPeerIds,e.id),this.recording.recordingPeerIds.length===0&&this.recording.setRecordingState("IDLE")}),R.onAsync(P.ROOM_JOINED,async e=>{var i;x.debug("[ROOM_JOINED] resolved request to fetch recordings.");const r=(i=e.peers)==null?void 0:i.filter(s=>{var n;return!!((n=s.flags)!=null&&n.recorder)});r.length?(this.recording.recordingPeerIds=r.map(s=>s.id),this.recording.setRecordingState("RECORDING")):(this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE"))}),R.on(P.RECORDING_STARTED,()=>{this.recording.setRecordingState("RECORDING")}),R.on(P.RECORDING_STOPPED,()=>{this.recording.recordingId=void 0,this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE")})}}qhe([C.trace("RecordingController.setupEvents")],sL.prototype,"setupEvents",1);function Jhe(t){let e=0,i,r;if(!t)return e;for(i=0;i<t.length;i+=1)r=t.charCodeAt(i),e=(e<<5)-e+r,e|=0;return Math.abs(e)%100+1}class Khe{static hasFeature(e){var i;return(i=ge.hasFeature(e))!=null?i:!1}static getFeatureValue(e){return ge.getValue(e)}static getAllFeatures(){return ge.getAllFlags()}}class t2{constructor(e,i,r){w(this,"logger"),w(this,"features"),w(this,"browserSpecs"),w(this,"callStats"),this.logger=e,this.features=i,this.browserSpecs=Ze,this.callStats=r}static init(e){return new t2(x,Khe,e)}}class i2{constructor(e){w(this,"internals"),this.internals=e}static async init(){const e=t2.init(ue);return new i2(e)}}var Qhe=Object.defineProperty,Yhe=Object.getOwnPropertyDescriptor,nL=(t,e,i,r)=>{for(var s=r>1?void 0:r?Yhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Qhe(e,i,s),s},Wh;class r2 extends Mt{constructor(e){super(),N(this,Wh,void 0),w(this,"state","IDLE"),w(this,"playbackUrl"),w(this,"viewerCount"),L(this,Wh,e),this.viewerCount=0}setLivestreamState(e){const i=this.state;this.state=e,i!==e&&this.emitCurrentLivestreamState()}emitCurrentLivestreamState(){this.emit("livestreamUpdate",this.state)}async start(){if(!h(this,Wh).permissions.canLivestream)throw x.error("DyteLivestream::start::permission_denied"),new U("User does not have permission to start livestreaming");this.setLivestreamState("STARTING");try{const e=await Bi().startLivestreaming();this.playbackUrl=e}catch(e){throw x.error("DyteRecording::stop::livestream_failed_to_start",{error:e}),this.setLivestreamState("IDLE"),new U("Error while starting livestream")}}async stop(){if(!h(this,Wh).permissions.canLivestream)throw x.error("DyteLivestream::stop::permission_denied"),new U("User does not have permission to stop livestreaming");if(this.state!=="LIVESTREAMING")throw x.error("DyteLivestream::stop::inconsistent_state"),new U("Livestream not started yet");try{this.setLivestreamState("STOPPING"),await Bi().stopLivestreaming()}catch(e){throw x.error("DyteLivestream::stop::livestream_failed_to_stop",{error:e}),this.setLivestreamState("STOPPING"),new U("Error while stopping livestream")}}}Wh=new WeakMap;nL([C.trace("livestream.start")],r2.prototype,"start",1);nL([C.trace("livestream.stop")],r2.prototype,"stop",1);var Zhe=Object.defineProperty,Xhe=Object.getOwnPropertyDescriptor,epe=(t,e,i,r)=>{for(var s=r>1?void 0:r?Xhe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Zhe(e,i,s),s},Oc,Lc;class aL{constructor(e,i){w(this,"livestream"),N(this,Oc,void 0),N(this,Lc,void 0),this.livestream=new r2(e),L(this,Lc,i),this.setupEvents()}async fetchInitialLivestreamingState(){const e=Bi(),{status:i,playbackUrl:r}=await e.getActiveLivestream();this.livestream.playbackUrl=r,i==="LIVE"&&this.livestream.setLivestreamState("LIVESTREAMING")}setupEvents(){h(this,Lc).on(ye.startedLivestream,e=>{this.livestream.playbackUrl=e.playbackUrl,this.livestream.setLivestreamState("LIVESTREAMING")}),h(this,Lc).on(ye.stoppedLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,Lc).on(ye.erroredLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),h(this,Lc).on(ye.roomPeerCount,e=>{this.livestream.viewerCount=e.count,this.livestream.emit("viewerCountUpdate",e.count)}),R.on(P.PEER_JOINED,async e=>{var i;((i=e.flags)==null?void 0:i.hiddenParticipant)===!0&&e.recorderType==="LIVESTREAMER"&&(L(this,Oc,e.id),this.livestream.setLivestreamState("LIVESTREAMING"))}),R.on(P.PEER_CLOSED,e=>{e.id===h(this,Oc)&&(L(this,Oc,void 0),this.livestream.setLivestreamState("IDLE"))}),R.onAsync(P.ROOM_JOINED,async e=>{var i,r;x.debug("[ROOM_JOINED] resolved request to fetch livestream.");const s=(i=e.peers)==null?void 0:i.filter(n=>{var a;return((a=n.flags)==null?void 0:a.hiddenParticipant)===!0&&n.recorderType==="LIVESTREAMER"});s.length?(L(this,Oc,s&&((r=s[0])==null?void 0:r.id)),this.livestream.setLivestreamState("LIVESTREAMING")):(L(this,Oc,void 0),this.livestream.setLivestreamState("IDLE"))}),R.onAsync(P.LEAVE_MEDIA_ROOM,async()=>{if(!this.livestream.playbackUrl){x.info("Fetching livestreaming state on leave stage");try{await this.fetchInitialLivestreamingState()}catch{}}}),R.onAsync(P.SOCKET_SERVICE_ROOM_JOINED,async()=>{try{await this.fetchInitialLivestreamingState()}catch{}})}}Oc=new WeakMap,Lc=new WeakMap;epe([C.trace("LivestreamController.setupEvents")],aL.prototype,"setupEvents",1);const mt=Ms(CS().permissions);var we,Gh;const Mk=class extends Mt{constructor(t,e){if(super(),N(this,we,void 0),N(this,Gh,void 0),!t)throw x.error("DytePermissionsPreset::load_preset_permissions_failed"),new U("Could not load preset permissions.");L(this,Gh,e),L(this,we,t)}static fromResponse(t,e){return new Mk(t,e)}static default(t){return new Mk(mt,t)}get stageEnabled(){var t;return((t=h(this,we))==null?void 0:t.stageEnabled)||h(this,Gh)===Tt.Webinar||h(this,Gh)===Tt.Livestream}get stageAccess(){var t,e;return((t=h(this,we))==null?void 0:t.stageAccess)===ct.Allowed||h(this,we).media.audio.canProduce===ct.Allowed||h(this,we).media.video.canProduce===ct.Allowed||h(this,we).media.screenshare.canProduce===ct.Allowed?ct.Allowed:((e=h(this,we))==null?void 0:e.stageAccess)===ct.CanRequest||h(this,we).media.audio.canProduce===ct.CanRequest||h(this,we).media.video.canProduce===ct.CanRequest||h(this,we).media.screenshare.canProduce===ct.CanRequest?ct.CanRequest:ct.NotAllowed}get acceptWaitingRequests(){var t,e;return(e=(t=h(this,we))==null?void 0:t.acceptWaitingRequests)!=null?e:mt.acceptWaitingRequests}get requestProduceVideo(){var t,e,i;return((i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)===ct.CanRequest}get requestProduceAudio(){var t,e,i;return((i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.audio)==null?void 0:i.canProduce)===ct.CanRequest}get requestProduceScreenshare(){var t,e,i;return((i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)===ct.CanRequest}get canAllowParticipantAudio(){var t,e,i,r;return((e=(t=h(this,we))==null?void 0:t.canAcceptProductionRequests)!=null?e:mt.canAcceptProductionRequests)||((r=(i=h(this,we))==null?void 0:i.disableParticipantAudio)!=null?r:mt.disableParticipantAudio)}get canAllowParticipantScreensharing(){var t,e;return(e=(t=h(this,we))==null?void 0:t.canAcceptProductionRequests)!=null?e:mt.canAcceptProductionRequests}get canAllowParticipantVideo(){var t,e,i,r;return((e=(t=h(this,we))==null?void 0:t.canAcceptProductionRequests)!=null?e:mt.canAcceptProductionRequests)||((r=(i=h(this,we))==null?void 0:i.disableParticipantVideo)!=null?r:mt.disableParticipantVideo)}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){var t,e;return(e=(t=h(this,we))==null?void 0:t.kickParticipant)!=null?e:mt.kickParticipant}get pinParticipant(){var t,e;return(e=(t=h(this,we))==null?void 0:t.pinParticipant)!=null?e:mt.pinParticipant}get canRecord(){var t,e;return(e=(t=h(this,we))==null?void 0:t.canRecord)!=null?e:mt.canRecord}get waitingRoomType(){var t,e;return(e=(t=h(this,we))==null?void 0:t.waitingRoomType)!=null?e:mt.waitingRoomType}get waitingRoomBehaviour(){var t,e;return(e=(t=h(this,we))==null?void 0:t.waitingRoomType)!=null?e:mt.waitingRoomType}get plugins(){var t,e;return(e=(t=h(this,we))==null?void 0:t.plugins)!=null?e:mt.plugins}get polls(){var t,e;return(e=(t=h(this,we))==null?void 0:t.polls)!=null?e:mt.polls}get produceVideo(){var t,e,i,r;return(r=(i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)!=null?r:mt.media.video.canProduce}get requestProduce(){return h(this,we).media.audio.canProduce===ct.CanRequest||h(this,we).media.video.canProduce===ct.CanRequest||h(this,we).media.screenshare.canProduce===ct.CanRequest}get canProduceVideo(){var t,e,i,r;return(r=(i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)!=null?r:mt.media.video.canProduce}get produceScreenshare(){var t,e,i,r;return(r=(i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)!=null?r:mt.media.screenshare.canProduce}get canProduceScreenshare(){var t,e,i,r;return(r=(i=(e=(t=h(this,we))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)!=null?r:mt.media.screenshare.canProduce}get produceAudio(){var t;return(t=h(this,we).media.audio.canProduce)!=null?t:mt.media.audio.canProduce}get canProduceAudio(){var t;return(t=h(this,we).media.audio.canProduce)!=null?t:mt.media.audio.canProduce}get chatPublic(){var t,e,i;return(i=(e=(t=h(this,we))==null?void 0:t.chat)==null?void 0:e.public)!=null?i:mt.chat.public}get chatPrivate(){var t,e,i;return(i=(e=(t=h(this,we))==null?void 0:t.chat)==null?void 0:e.private)!=null?i:mt.chat.private}get chatChannel(){var t,e,i;return(i=(e=(t=h(this,we))==null?void 0:t.chat)==null?void 0:e.channel)!=null?i:mt.chat.channel}get chatMessage(){var t,e,i;return(i=(e=(t=h(this,we))==null?void 0:t.chat)==null?void 0:e.message)!=null?i:mt.chat.message}get connectedMeetings(){var t,e;return(e=(t=h(this,we))==null?void 0:t.connectedMeetings)!=null?e:mt==null?void 0:mt.connectedMeetings}get hiddenParticipant(){var t,e;return(e=(t=h(this,we))==null?void 0:t.hiddenParticipant)!=null?e:mt.hiddenParticipant}get showParticipantList(){var t;return(t=h(this,we).showParticipantList)!=null?t:mt.showParticipantList}get canChangeParticipantRole(){var t,e;return(e=(t=h(this,we))==null?void 0:t.canChangeParticipantPermissions)!=null?e:mt.canChangeParticipantPermissions}get canChangeParticipantPermissions(){var t,e;return(e=(t=h(this,we))==null?void 0:t.canChangeParticipantPermissions)!=null?e:mt.canChangeParticipantPermissions}get canChangeTheme(){return!1}get canPresent(){return h(this,we).media.audio.canProduce===ct.Allowed||h(this,we).media.video.canProduce===ct.Allowed||h(this,we).media.screenshare.canProduce===ct.Allowed}get acceptPresentRequests(){return h(this,we).canAcceptProductionRequests}get canEditDisplayName(){var t;return(t=h(this,we).canEditDisplayName)!=null?t:!1}get maxScreenShareCount(){return 1}get isRecorder(){return h(this,we).isRecorder}get canSpotlight(){return h(this,we).canSpotlight}get canLivestream(){return h(this,we).canLivestream}get transcriptionEnabled(){return h(this,we).transcriptionEnabled}get isV2(){return!0}};let c5=Mk;we=new WeakMap,Gh=new WeakMap;const tpe=Ms(CS());var Rn,bl,qh;const Dk=class{constructor(t){if(N(this,Rn,void 0),N(this,bl,void 0),N(this,qh,void 0),!t)throw new U("Could not load preset.");L(this,Rn,t.config),L(this,bl,t.ui||Ms(CS().ui)),L(this,qh,t.permissions.plugins.config)}static fromResponse(t){return new Dk(t)}static default(){return new Dk(tpe)}get setupScreen(){return{isEnabled:!0}}get waitingRoom(){return{isEnabled:!0}}get controlBar(){return{isEnabled:!0,elements:{chat:!0,fullscreen:!0,invite:!1,layout:!1,participants:!0,plugins:!0,polls:!0,reactions:!1,screenshare:!0}}}get header(){return{isEnabled:!0,elements:{logo:h(this,bl).designTokens.logo,timer:!0,title:!0,participantCount:!0,changeLayout:!1}}}get pipMode(){return!0}get viewType(){return h(this,Rn).viewType}get maxVideoStreams(){return h(this,Rn).maxVideoStreams}get maxScreenShareCount(){return h(this,Rn).maxScreenshareCount}get plugins(){return[]}get disabledPlugins(){return Object.keys(h(this,qh)).filter(t=>h(this,qh)[t].disabled)}get designTokens(){return h(this,bl).designTokens}get configDiff(){return h(this,bl).configDiff}get mediaConstraints(){var t,e,i,r,s,n,a,o,c,u,l,p,m,y,b,S;return{video:{quality:(r=(i=(e=(t=h(this,Rn))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.quality)!=null?r:Fr.video.quality,frameRate:(o=(a=(n=(s=h(this,Rn))==null?void 0:s.media)==null?void 0:n.video)==null?void 0:a.frameRate)!=null?o:Fr.video.frameRate},screenshare:{quality:(p=(l=(u=(c=h(this,Rn))==null?void 0:c.media)==null?void 0:u.screenshare)==null?void 0:l.quality)!=null?p:Fr.screenshare.quality,frameRate:(S=(b=(y=(m=h(this,Rn))==null?void 0:m.media)==null?void 0:y.screenshare)==null?void 0:b.frameRate)!=null?S:Fr.screenshare.frameRate}}}get isV2(){return!0}};let d5=Dk;Rn=new WeakMap,bl=new WeakMap,qh=new WeakMap;var Rf;class ipe{constructor(e){N(this,Rf,void 0),L(this,Rf,e)}on(e,i){let r;e===ye.roomPeerCount?r=gP.fromBinary.bind(gP):r=xP.fromBinary.bind(xP),h(this,Rf).on(e,({payload:s})=>{const n=r(s);return i(n)})}}Rf=new WeakMap;var _s;class rpe{constructor(e){N(this,_s,void 0),L(this,_s,e)}async getStageRequests(){const{payload:e}=await h(this,_s).sendMessagePromise(ye.getStageRequests);return e?Gb.fromBinary(e):{stageRequests:[]}}requestAccess(){h(this,_s).sendMessage(ye.requestStageAccess)}cancelRequestAccess(){h(this,_s).sendMessage(ye.cancelStageRequest)}async grantAccess(e){const i={userIds:e};await h(this,_s).sendMessagePromise(ye.grantStageAccess,Cde.toBinary(i))}async denyAccess(e){const i={userIds:e};await h(this,_s).sendMessagePromise(ye.denyStageAccess,Rde.toBinary(i))}joinStage(){return h(this,_s).sendMessage(ye.joinStage)}leaveStage(e){const i={userIds:[e]};return h(this,_s).sendMessage(ye.leaveStage,TP.toBinary(i))}kick(e){const i={userIds:e};return h(this,_s).sendMessagePromise(ye.leaveStage,TP.toBinary(i))}on(e,i){let r;switch(e){case ye.grantStageAccess:case ye.denyStageAccess:{r=void 0;break}case ye.getStagePeers:{r=EP.fromBinary.bind(EP);break}case ye.getStageRequests:case ye.requestStageAccess:case ye.cancelStageRequest:{r=Gb.fromBinary.bind(Gb);break}}h(this,_s).on(e,({payload:s,id:n})=>{if(!s||!r)return i(void 0,n);const a=r(s);return i(a,n)})}}_s=new WeakMap;var spe=Object.defineProperty,npe=Object.getOwnPropertyDescriptor,Md=(t,e,i,r)=>{for(var s=r>1?void 0:r?npe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&spe(e,i,s),s},Js,Ks,wt,If,Qs,In,Ys,An;class rc extends Mt{constructor(e,i,r,s,n,a){super(),N(this,Ys),N(this,Js,void 0),N(this,Ks,void 0),N(this,wt,void 0),N(this,If,void 0),N(this,Qs,void 0),N(this,In,void 0),w(this,"status"),L(this,Js,s),L(this,wt,i),L(this,If,r),L(this,In,a),L(this,Ks,e),L(this,Qs,n)}async getAccessRequests(){if(h(this,Qs)===Tt.Livestream){if(!h(this,Ks))throw new U("You do not have permissions for getStageRequests");const{stageRequests:e}=await h(this,Js).getStageRequests();return{stageRequests:e}}return{stageRequests:h(this,If).joined.toArray().filter(e=>e.stageStatus===Fi.REQUESTED_TO_JOIN_STAGE).map(e=>({displayName:e.name,userId:e.userId,peerId:e.id}))}}async requestAccess(){if(!h(this,wt).permissions.stageEnabled)throw x.error("DyteStage::stage_disabled"),new U("Stage is disabled");if(this.status!=="OFF_STAGE")throw new U(`Unable to request access you are currently ${this.status}`);if(h(this,Qs)===Tt.Livestream){if(h(this,Ks)){qe(this,Ys,An).call(this,"ACCEPTED_TO_JOIN_STAGE");return}h(this,Js).requestAccess(),qe(this,Ys,An).call(this,"REQUESTED_TO_JOIN_STAGE")}else{if(!h(this,wt).roomJoined)throw new U("Can`t request to join stage without joining room");if(h(this,Ks)){qe(this,Ys,An).call(this,"ACCEPTED_TO_JOIN_STAGE");return}if(h(this,wt).permissions.stageAccess===ct.NotAllowed)throw x.error("DyteStage::requestGoToStage::permission_denied"),new U("User does not have permission to go on stage");if(this.status!=="OFF_STAGE")return;try{qe(this,Ys,An).call(this,"REQUESTED_TO_JOIN_STAGE"),await h(this,In).requestToJoinStage(TO.PRESENT)}catch{qe(this,Ys,An).call(this,"OFF_STAGE")}}}async cancelRequestAccess(){if(!h(this,wt).permissions.stageEnabled)throw x.error("DyteStage::stage_disabled"),new U("Stage is disabled");if(h(this,Qs)===Tt.Livestream)h(this,Js).cancelRequestAccess();else{if(!h(this,wt).roomJoined)throw new U("Can`t request to join stage without joining room");if(h(this,wt).stageStatus!==Fi.REQUESTED_TO_JOIN_STAGE)return;await h(this,In).withdrawRequestToJoinStage()}qe(this,Ys,An).call(this,"OFF_STAGE")}grantAccess(e){if(!h(this,wt).permissions.stageEnabled)throw x.error("DyteStage::stage_disabled"),new U("Stage is disabled");if(h(this,Qs)===Tt.Livestream){if(!h(this,Ks))throw new U("You do not have permissions for grantAccess");return h(this,Js).grantAccess(e)}if(!h(this,wt).roomJoined)throw new U("Can`t rejectRequestToJoinStage for participant without joining room");return h(this,In).grantStageAccess(e)}denyAccess(e){if(!h(this,wt).permissions.stageEnabled)throw x.error("DyteStage::stage_disabled"),new U("Stage is disabled");if(h(this,Qs)===Tt.Livestream){if(!h(this,Ks))throw new U("You do not have permissions for denyAccess");return h(this,Js).denyAccess(e)}if(!h(this,wt).roomJoined)throw new U("Can`t rejectRequestToJoinStage for participant without joining room");return h(this,In).denyStageAccess(e)}async join(){if(h(this,Qs)===Tt.Livestream){if(!h(this,Ks)&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw new U(`Unable to join stage you are currently ${this.status}`);if(h(this,Ks)&&this.status==="ON_STAGE")throw new U("You are already on stage.");h(this,Js).joinStage(),await R.emitAsync(P.JOIN_MEDIA_ROOM)}else{if(!h(this,wt).roomJoined)throw new U("Can`t join stage without joining room");if(h(this,wt).permissions.stageAccess!==ct.Allowed&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw x.error("DyteStage::join::permission_denied"),new U("User does not have permission to join stage");await h(this,In).startPresenting(),h(this,wt).emit("stageJoined"),qe(this,Ys,An).call(this,"ON_STAGE")}}async leave(){var e;if(!h(this,wt).permissions.stageEnabled)throw x.error("DyteStage::stage_disabled"),new U("Stage is disabled");if(h(this,Qs)===Tt.Livestream){if(!(this.status==="ON_STAGE"||this.status==="ACCEPTED_TO_JOIN_STAGE"))throw new U(`Unable to leave stage you are currently ${this.status}`);h(this,wt).setIsPinned(!1),qe(this,Ys,An).call(this,"OFF_STAGE"),(e=Ai())!=null&&e.roomJoined&&await R.emitAsync(P.LEAVE_MEDIA_ROOM);try{await h(this,wt).disableScreenShare(),await h(this,wt).disableVideo(),await h(this,wt).disableAudio(),h(this,wt).destructMediaHandler()}catch(i){x.error("DyteStage.leaveStage.DisableMediaError",{error:i})}h(this,Js).leaveStage(h(this,wt).userId)}else{if(!h(this,wt).roomJoined)throw new U("Can`t leave stage without joining room");await h(this,wt).disableScreenShare(),await h(this,wt).disableAudio(),await h(this,wt).disableVideo(),await h(this,In).stopPresenting(),qe(this,Ys,An).call(this,"OFF_STAGE")}}async kick(e){if(h(this,Qs)===Tt.Livestream){if(!h(this,Ks))throw new U("You do not have permissions for kick");return h(this,Js).kick(e)}if(!h(this,wt).roomJoined)throw new U("Can`t kick participant without joining room");return h(this,In).kickPeerFromStage(e)}}Js=new WeakMap,Ks=new WeakMap,wt=new WeakMap,If=new WeakMap,Qs=new WeakMap,In=new WeakMap,Ys=new WeakSet,An=function(t){this.status!==t&&(this.status=t,R.emit(P.SET_STAGE_STATUS,t),this.emit("stageStatusUpdate",t))};Md([C.trace("DyteStage.getStageRequests")],rc.prototype,"getAccessRequests",1);Md([C.trace("DyteStage.requestAccess")],rc.prototype,"requestAccess",1);Md([C.trace("DyteStage.cancelRequestAccess")],rc.prototype,"cancelRequestAccess",1);Md([C.trace("DyteStage.grantAccess")],rc.prototype,"grantAccess",1);Md([C.trace("DyteStage.denyAccess")],rc.prototype,"denyAccess",1);Md([C.trace("DyteStage.joinStage")],rc.prototype,"join",1);Md([C.trace("DyteStage.leaveStage")],rc.prototype,"leave",1);var ape=Object.defineProperty,ope=Object.getOwnPropertyDescriptor,cpe=(t,e,i,r)=>{for(var s=r>1?void 0:r?ope(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&ape(e,i,s),s},wl,Qt,kl,Nc,Af,Jh;class oL{constructor(e,i,r,s,n,a){w(this,"stage"),N(this,wl,void 0),N(this,Qt,void 0),N(this,kl,void 0),N(this,Nc,void 0),N(this,Af,0),N(this,Jh,void 0),this.stage=new rc(i,r,s,e,n,a),L(this,Nc,e),L(this,wl,i),L(this,Jh,n),L(this,Qt,r),L(this,Jh,n),L(this,kl,s),this.setupEvents(),this.setupWebinarMigrationEvents()}setupEvents(){h(this,Nc).on(ye.grantStageAccess,()=>{h(this,wl)||(this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"))}),h(this,Nc).on(ye.denyStageAccess,()=>{h(this,wl)||(this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"))}),h(this,Nc).on(ye.getStagePeers,e=>{this.stage.status==="ON_STAGE"&&!e.stagePeers.includes(h(this,Qt).userId)&&this.stage.leave()}),h(this,Nc).on(ye.getStageRequests,e=>{var i;if(!h(this,wl))return;const r=(i=e==null?void 0:e.stageRequests)!=null?i:[];h(this,Af)<r.length&&r.length>0&&this.stage.emit("newStageRequest",{count:r.length}),L(this,Af,r.length),this.stage.emit("stageAccessRequestUpdate",r)}),R.onAsync(P.SOCKET_SERVICE_ROOM_JOINED,async e=>{var i;switch((i=e.peer)==null?void 0:i.stageType){case os.OFF_STAGE:{this.setStageStatus("OFF_STAGE");break}case os.ON_STAGE:{h(this,Qt).config.viewType==="LIVESTREAM"&&await R.emitAsync(P.JOIN_MEDIA_ROOM);break}case os.APPROVED_STAGE:{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE");break}case os.REQUESTED_STAGE:{this.setStageStatus("REQUESTED_TO_JOIN_STAGE");break}default:this.setStageStatus("OFF_STAGE")}h(this,Qt).emit("socketServiceRoomJoined")}),R.onAsync(P.ROOM_JOINED,async e=>{this.setStageStatus(e.stageStatus)}),R.on(P.SELF_ROOM_JOINED,async()=>{if(h(this,Jh)===Tt.Livestream){this.setStageStatus("ON_STAGE");return}h(this,Qt).permissions.stageAccess===ct.Allowed&&await this.stage.join(),h(this,Qt).roomState="joined",h(this,Qt).emit("roomJoined")}),R.on(P.REQUEST_TO_JOIN_STAGE_ACCEPTED,()=>{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"),h(this,Qt).emit("joinStageRequestAccepted")}),R.on(P.REQUEST_TO_JOIN_STAGE_REJECTED,()=>{this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"),h(this,Qt).emit("joinStageRequestRejected")}),R.on(P.PEER_REJECTED_TO_JOIN_STAGE,({id:e})=>{!e||e===h(this,Qt).id||R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.OFF_STAGE})}),R.on(P.PEER_ADDED_TO_STAGE,({id:e})=>{!e||e===h(this,Qt).id||(R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.ACCEPTED_TO_JOIN_STAGE}),this.stage.emit("stageAccessRequestUpdate"))}),R.on(P.PEER_STARTED_PRESENTING,({id:e})=>{!e||e===h(this,Qt).id||R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.ON_STAGE})}),R.on(P.PEER_REMOVED_FROM_STAGE,({id:e})=>{!e||e===h(this,Qt).id||(R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.OFF_STAGE}),h(this,kl).pinned.delete(e))}),R.on(P.PEER_STOPPED_PRESENTING,({id:e})=>{!e||e===h(this,Qt).id||(R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.OFF_STAGE}),h(this,kl).pinned.delete(e))}),R.on(P.PEER_REQUESTED_TO_JOIN_STAGE,async({id:e})=>{!e||e===h(this,Qt).id||(await R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.REQUESTED_TO_JOIN_STAGE}),this.stage.emit("stageAccessRequestUpdate"))}),R.on(P.STAGE_REQUESTS_UPDATED,async()=>{this.stage.emit("stageAccessRequestUpdate")}),R.on(P.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE,async({id:e})=>{!e||e===h(this,Qt).id||(await R.emitAsync(P.UPDATE_PEER_STAGE_STATUS,{id:e,status:Fi.OFF_STAGE}),this.stage.emit("stageAccessRequestUpdate"))}),R.on(P.REMOVED_FROM_STAGE,async()=>{this.setStageStatus("OFF_STAGE"),await h(this,Qt).disableScreenShare(),await h(this,Qt).disableVideo(),await h(this,Qt).disableAudio(),h(this,Qt).destructMediaHandler(),h(this,Qt).emit("removedFromStage")})}setupWebinarMigrationEvents(){R.on(P.SET_WEBINAR_STAGE_STATUS,async e=>{this.stage.status!==e&&(this.stage.status=e,this.stage.emit("stageStatusUpdate",e))}),R.onAsync(P.REQUEST_TO_JOIN_STAGE,async()=>this.stage.requestAccess()),R.onAsync(P.WITHDRAW_REQUEST_TO_JOIN_STAGE,async()=>this.stage.cancelRequestAccess()),R.onAsync(P.LEAVE_STAGE,async()=>this.stage.leave()),R.onAsync(P.JOIN_STAGE,async()=>this.stage.join()),R.onAsync(P.ACCEPT_JOIN_STAGE_REQUEST,async({userId:e})=>this.stage.grantAccess([e])),R.onAsync(P.REMOVE_FROM_STAGE,async({userId:e})=>{this.stage.kick([e])}),R.onAsync(P.REJECT_REQUEST_TO_JOIN_STAGE,async({userId:e})=>this.stage.denyAccess([e])),R.onAsync(P.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE,async({data:e})=>{const i=e.map(({id:r})=>h(this,kl).joined.get(r).userId);this.stage.grantAccess(i)})}setStageStatus(e){this.stage.status!==e&&(this.stage.status=e,R.emit(P.SET_STAGE_STATUS,e),this.stage.emit("stageStatusUpdate",e))}}wl=new WeakMap,Qt=new WeakMap,kl=new WeakMap,Nc=new WeakMap,Af=new WeakMap,Jh=new WeakMap;cpe([C.trace("DyteStage.setupEvents")],oL.prototype,"setupEvents",1);var dpe=Object.defineProperty,lpe=Object.getOwnPropertyDescriptor,s2=(t,e,i,r)=>{for(var s=r>1?void 0:r?lpe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&dpe(e,i,s),s},Uc;class r0{constructor(e){N(this,Uc,void 0),L(this,Uc,e)}getPolls(){return h(this,Uc).sendMessagePromise(ha.getPolls)}createPoll(e,i,r=!1,s=!1){const n={anonymous:r,hideVotes:s,question:e,options:i};return h(this,Uc).sendMessage(ha.createPoll,Ude.toBinary(n))}votePoll(e,i){const r={index:i,pollId:e};return h(this,Uc).sendMessage(ha.votePoll,$de.toBinary(r))}on(e,i){let r,s;switch(e){case ha.updatePoll:case ha.createPoll:case ha.votePoll:{r=qb.fromBinary.bind(qb),s=qb.create();break}}h(this,Uc).on(e,({payload:n})=>{let a=s;try{a=r(n)}catch(o){x.error("pollSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}Uc=new WeakMap;s2([C.trace("PollSocketHandler.getPolls")],r0.prototype,"getPolls",1);s2([C.trace("PollSocketHandler.createPoll")],r0.prototype,"createPoll",1);s2([C.trace("PollSocketHandler.votePoll")],r0.prototype,"votePoll",1);class upe{constructor(){w(this,"battery"),w(this,"init",async()=>{try{"getBattery"in navigator&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("chargingchange",this.updateChargeInfo),this.battery.addEventListener("levelchange",this.updateLevelInfo),this.updateLevelInfo(),this.updateChargeInfo())}catch(e){x.error("Error getting battery",e)}}),w(this,"updateChargeInfo",()=>{var e;x.log(`Battery charging? ${(e=this.battery)!=null&&e.charging?"Yes":"No"}`)}),w(this,"updateLevelInfo",()=>{if(!this.battery){x.log("Battery level: Not known");return}x.log(`Battery level: ${this.battery.level*100}%`)}),w(this,"cleanup",()=>{var e,i;"getBattery"in navigator&&((e=this.battery)==null||e.removeEventListener("chargingchange",this.updateChargeInfo),(i=this.battery)==null||i.removeEventListener("levelchange",this.updateLevelInfo))})}}const l5=new upe;var Eo,po,Mf,Ok;class hpe extends Mt{constructor(e){super(),N(this,Mf),N(this,Eo,void 0),N(this,po,void 0),L(this,Eo,e),L(this,po,!1)}get mediaPermission(){return h(this,Eo).mediaPermissions.audio}async getTrackMetadata(e=!1){if(!On.track){if(!e)return null;const i=await qe(this,Mf,Ok).call(this);On.setTrack(i)}return On.getTrackMetadata()}async startTrackAnalysis(e=!1){if(h(this,po))return!0;L(this,po,!0);let i=await On.startTrackAnalysis();if(!i&&e){const r=await qe(this,Mf,Ok).call(this);On.setTrack(r),i=await On.startTrackAnalysis()}return i||L(this,po,!1),i}stopTrackAnalysis(){return h(this,po)&&(L(this,po,!1),On.stopTrackAnalysis()),!0}}Eo=new WeakMap,po=new WeakMap,Mf=new WeakSet,Ok=async function(){var t;try{const e=h(this,Eo).getCurrentDevices(),i=(t=e==null?void 0:e.audio)==null?void 0:t.deviceId;let r={audio:!0};i&&(r=Zt.getAudioConstraints({audioDeviceId:i}));const s=await Zt.getAudioTrack(r);return h(this,Eo).mediaPermissions.audio="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:h(this,Eo).mediaPermissions.audio,kind:"audio"}),s}catch(e){const i=Yy("audio",e.name,e.message);throw h(this,Eo).mediaPermissions.audio=i,R.emit(P.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:"audio"}),new U("Failed to fetch audio track","1700")}};var jc;class ppe extends Mt{constructor(){super(),N(this,jc,void 0),L(this,jc,!1)}async getNetworkMetadata(){return new Promise(e=>{ue.onSafeInitialization(()=>{ue.onPreCallTestResults(i=>{e(i.connectionInfo)}),ue.startPreCallTest()})})}startNetworkAnalysis(){return L(this,jc,Ro.collectSendTransportStats()&&Ro.collectRecvTransportStats()),h(this,jc)}stopNetworkAnalysis(){return L(this,jc,!(Ro.stopStatsCollection("send")&&Ro.stopStatsCollection("receive"))),h(this,jc)}}jc=new WeakMap;var _l,Zr;class gpe extends Mt{constructor(e){super(),N(this,_l,void 0),N(this,Zr,void 0),L(this,_l,e),L(this,Zr,{audio:!1,video:!1})}get mediaPermission(){return h(this,_l).mediaPermissions.screenshare}getAudioTrackMetaData(){var e;return(e=h(this,_l).screenShareTracks)!=null&&e.audio?ad.getTrackMetadata():null}getVideoTrackMetaData(){var e;return(e=h(this,_l).screenShareTracks)!=null&&e.video?$o.getTrackMetadata():null}async startAudioTrackAnalysis(){if(h(this,Zr).audio)return!0;const e=await ad.startTrackAnalysis();return h(this,Zr).audio=e,h(this,Zr).audio}async startVideoTrackAnalysis(){if(h(this,Zr).video)return!0;const e=await $o.startTrackAnalysis();return h(this,Zr).video=e,h(this,Zr).video}stopAudioTrackAnalysis(){return h(this,Zr)&&(h(this,Zr).audio=!1,ad.stopTrackAnalysis()),!0}stopVideoTrackAnalysis(){return h(this,Zr)&&(h(this,Zr).video=!1,$o.stopTrackAnalysis()),!0}}_l=new WeakMap,Zr=new WeakMap;var ba,da,go,Lk,cL;class mpe extends Mt{constructor(e){super(),N(this,Lk),N(this,ba,void 0),N(this,da,void 0),N(this,go,void 0),w(this,"preview"),L(this,ba,e),L(this,da,!1),L(this,go,!1)}get mediaPermission(){return h(this,ba).mediaPermissions.video}getTrackMetadata(){return h(this,ba).videoTrack?null:is.getTrackMetadata()}async startTrackAnalysis({preview:e}={preview:!1}){return h(this,da)?!0:await is.startTrackAnalysis()?((e||this.preview)&&L(this,go,!0),L(this,da,!0),!0):!1}stopTrackAnalysis(){h(this,da)&&(is.stopTrackAnalysis(),L(this,da,!1),h(this,go)&&L(this,go,!1))}async startPreview(){let{track:e}=is;return e||(e=await qe(this,Lk,cL).call(this)),this.preview||(is.setTrack(e),this.preview=!0,is.preview=!0),e}stopPreview(){h(this,da)&&h(this,go)&&this.stopTrackAnalysis(),this.preview=!1,is.preview=!1,is.cleanup()}cleanup(){h(this,da)&&h(this,go)&&this.stopTrackAnalysis(),this.preview=!1,is.preview=!1}}ba=new WeakMap,da=new WeakMap,go=new WeakMap,Lk=new WeakSet,cL=async function(){var t;try{const e=h(this,ba).getCurrentDevices(),i=(t=e==null?void 0:e.video)==null?void 0:t.deviceId;let r={video:{width:{ideal:1280},height:{ideal:720}}};i&&(r=Zt.getVideoConstraints({videoDeviceId:i}));const s=await Zt.getVideoTrack(r);return h(this,ba).mediaPermissions.video="ACCEPTED",R.emit(P.MEDIA_PERMISSION_UPDATE,{message:h(this,ba).mediaPermissions.video,kind:"video"}),s}catch(e){const i=Yy("video",e.name,e.message);throw h(this,ba).mediaPermissions.video=i,R.emit(P.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:"video"}),new U("Failed to fetch video track","1700")}};class fpe{constructor(e){w(this,"audio"),w(this,"video"),w(this,"screenshare"),w(this,"network"),this.audio=new hpe(e),this.video=new mpe(e),this.screenshare=new gpe(e),this.network=new ppe}}const c1=t=>{const{type:e,id:i,transport:r,timestamp:s,currentRoundTripTime:n,bytesSent:a,bytesReceived:o,kind:c,jitter:u,packetsLost:l,packetSendDelay:p}=t;switch(e){case"candidate-pair":return{type:e,id:i,transport:r,timestamp:s,rtt:n,bytesSent:a,bytesReceived:o};case"inbound-rtp":return{type:e,id:i,transport:r,timestamp:s,kind:c,jitter:u,packetsLost:l,bytesReceived:o};default:return{type:e,id:i,transport:r,timestamp:s,kind:c,packetSendDelay:p,bytesSent:a}}};class vpe{constructor(e){w(this,"troubleshooter"),w(this,"self"),this.troubleshooter=new fpe(e),this.self=e,this.setupEvents()}setupEvents(){R.on(P.AUDIO_TRACK_CHANGED,()=>{var e;this.self.audioTrack&&(e=this.self.audioTrack)!=null&&e.enabled&&On.setTrack(this.self.audioTrack)}),R.on(P.VIDEO_TRACK_CHANGED,()=>{var e;this.self.videoTrack&&is.setTrack((e=this.self.videoTrack)==null?void 0:e.clone())}),R.on(P.SCREENSHARE_TRACK_CHANGED,()=>{var e,i,r,s,n;(e=this.self.screenShareTracks)!=null&&e.audio&&this.self.screenShareTracks.audio.enabled?ad.setTrack((i=this.self.screenShareTracks)==null?void 0:i.audio):ad.cleanup(),(r=this.self.screenShareTracks)!=null&&r.video?$o.setTrack((n=(s=this.self.screenShareTracks)==null?void 0:s.video)==null?void 0:n.clone()):$o.cleanup()}),R.on(P.AUDIO_TRACK_ANALYSIS,e=>{this.troubleshooter.audio.emit("audioTrackStats",e)}),R.on(P.AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"ended"})}),R.on(P.AUDIO_TRACK_CREATED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"live"})}),R.on(P.SCREENSHARE_AUDIO_TRACK_ANALYSIS,e=>{this.troubleshooter.screenshare.emit("audioTrackStats",e)}),R.on(P.SCREENSHARE_AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"ended"})}),R.on(P.SCREENSHARE_AUDIO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"live"})}),R.on(P.SCREENSHARE_VIDEO_TRACK_ANALYSIS,e=>{this.troubleshooter.screenshare.emit("videoTrackStats",e)}),R.on(P.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.screenshare.stopVideoTrackAnalysis(),$o.cleanup()}),R.on(P.SCREENSHARE_VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"ended"})}),R.on(P.SCREENSHARE_VIDEO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"live"})}),R.on(P.VIDEO_TRACK_ANALYSIS,e=>{this.troubleshooter.video.emit("videoTrackStats",e)}),R.on(P.VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.video.stopTrackAnalysis(),this.troubleshooter.video.startTrackAnalysis(),this.troubleshooter.video.stopPreview()}),R.on(P.VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.video.cleanup(),this.troubleshooter.video.emit("videoTrackUpdate",{status:"ended"})}),R.on(P.VIDEO_TRACK_CREATED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"live"})}),R.on(P.CANDIDATE_PEER_UPDATE,e=>{this.troubleshooter.network.emit("connectionDelayStats",c1(e))}),R.on(P.INBOUND_RTP_UPDATE,e=>{this.troubleshooter.audio.emit("audioConsumptionStats",c1(e))}),R.on(P.OUTBOUND_RTP_UPDATE,e=>{this.troubleshooter.audio.emit("audioProductionStats",c1(e))}),R.on(P.SEND_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"ended"})}),R.on(P.RECV_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"ended"})}),R.on(P.SEND_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"live"})}),R.on(P.RECV_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"live"})})}}const $c=class{static handleConnectedRoomsDumpRaw({payload:t}){var e;const i=ice.fromBinary(t),r=i.meetings.map(s=>{var n;return{id:s.id,title:s.title,participants:(n=s.participants)!=null?n:[]}});return{parentMeeting:{id:i.parentMeeting.id,title:i.parentMeeting.title,participants:(e=i.parentMeeting.participants)!=null?e:[]},meetings:r}}static handleTransferPeerRaw({payload:t}){const e=Pce.fromBinary(t);return{authToken:e.authToken,meetingId:e.meetingId}}static handleMovedPeerRaw({payload:t}){const e=hO.fromBinary(t);return{meetingId:e.meetingId,customParticipantId:e.customParticipantId}}static handleConnectedRoomsUpdatedRaw({payload:t}){return vP.fromBinary(t).payloads.map(e=>({id:e.id,title:e.title}))}static handleConnectedRoomsDeletedRaw({payload:t}){return yce.fromBinary(t).payloads}static async getConnectedRoomsDump(){const t=await $c.socketService.sendMessagePromise(ye.getConnectedRoomsDump);return $c.handleConnectedRoomsDumpRaw(t)}static async createConnectedRooms(t){const{payload:e}=await $c.socketService.sendMessagePromise(ye.createConnectedRooms,ace.toBinary({payloads:t}));return vP.fromBinary(e).payloads.map(i=>({id:i.id,title:i.title}))}static async updateConnectedRooms(t){}static async disableConnectedRooms(t){const e=t.map(r=>({id:r})),i=await $c.socketService.sendMessagePromise(ye.deleteConnectedRooms,fce.toBinary({payloads:e}));return $c.handleConnectedRoomsDeletedRaw(i)}static async movePeersBetweenRooms(t){try{const e=await $c.socketService.sendMessagePromise(ye.movePeers,xce.toBinary({sourceMeetingId:t.sourceMeetingId,destinationMeetingId:t.destinationMeetingId,participants:t.participants}));return new TextDecoder().decode(e.payload).includes("error")?{success:!1,error:"failed to move participants"}:{success:!0}}catch(e){return{success:!1,error:e}}}};let di=$c;w(di,"socketService"),w(di,"currentMeetingId");const ype={codecs:[{kind:"audio",mimeType:"audio/opus",clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc",parameter:""}],parameters:{},preferredPayloadType:100},{kind:"video",mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"x-google-start-bitrate":1e3},preferredPayloadType:101},{kind:"video",mimeType:"video/rtx",preferredPayloadType:102,clockRate:9e4,parameters:{apt:101},rtcpFeedback:[]},{kind:"video",mimeType:"video/VP9",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"profile-id":0,"x-google-start-bitrate":1e3},preferredPayloadType:103},{kind:"video",mimeType:"video/rtx",preferredPayloadType:104,clockRate:9e4,parameters:{apt:103},rtcpFeedback:[]},{kind:"video",mimeType:"video/H264",clockRate:9e4,parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f","x-google-start-bitrate":1e3},rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],preferredPayloadType:105},{kind:"video",mimeType:"video/rtx",preferredPayloadType:106,clockRate:9e4,parameters:{apt:105},rtcpFeedback:[]}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"}]};var Df;class bpe{constructor(e){N(this,Df,void 0),L(this,Df,e)}on(e,i){let r,s;switch(e){case ye.transcript:{r=Bb.fromBinary.bind(Bb),s=Bb.create();break}default:{x.debug("AISocketHandler switch case hit default, event not accounted for.");break}}h(this,Df).on(e,({payload:n})=>{let a=s;try{a=r(n)}catch(o){x.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}Df=new WeakMap;var wpe=Object.defineProperty,kpe=Object.getOwnPropertyDescriptor,Rg=(t,e,i,r)=>{for(var s=r>1?void 0:r?kpe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&wpe(e,i,s),s};const Of=class{constructor(t,e,i,r,s,n,a,o,c,u,l,p,m){w(this,"apiBase"),w(this,"chatController"),w(this,"metaController"),w(this,"participantController"),w(this,"pluginController"),w(this,"pollController"),w(this,"remoteController"),w(this,"selfController"),w(this,"recordingController"),w(this,"livestreamController"),w(this,"internalsController"),w(this,"stageController"),w(this,"troubleshooterController"),this.apiBase=t,this.metaController=e,this.selfController=i,this.pluginController=r,this.participantController=s,this.chatController=n,this.pollController=a,this.remoteController=o,this.recordingController=c,this.livestreamController=l,this.internalsController=u,this.stageController=p,this.troubleshooterController=m}static async init(t,e){var i,r,s,n,a,o,c,u,l,p,m,y;const{authToken:b}=t;let S="https://api.dyte.io";t.apiBase&&(S=t.apiBase),t.baseURI&&(S=`https://api.${t.baseURI}`);const E={chat:!0,participant:!0,plugin:!0,poll:!0,self:!0,meta:!0,permissions:!0,theme:!0,tracing:!0,devTools:{logs:!1},internals:!0,stage:!0,...t==null?void 0:t.modules};R.reset(),RO(),Yp.cleanup();const k=dle({authToken:b,baseURL:S});k.setHeader("dyte-tracing-id",e),k.setPeerId(e),k.setRoomName(t.roomName);const{roomName:T}=t,I=Ne.isV2AuthToken?Ne.meetingId:T,O=new UD,q=O.load({routerRtpCapabilities:ype}),B=k.getRoomNodeData({roomName:I,peerId:e}),Y=Ne.isV2AuthToken?void 0:k.getUserPreset(T),X=await k.getUserDetails(),be=Ne.isV2AuthToken?X.participant.organizationId:X.organizationId;C.meetingMetadata.userId=Ne.isV2AuthToken?X.participant.id:X.id,C.meetingMetadata.organizationId=be;const he=Jhe(I);await ge.identify(`${Qw.PEER}_${e}`,JSON.parse(JSON.stringify({entity:Qw.PEER,clientId:be,isAnonUser:!be,sdkVersion:_g,meetingHash:he,roomName:I,...Ze.getDeviceInfo()}))),ghe(),x.info("flagsmith::allFlags",{flags:JSON.stringify(ge.getAllFlags())},!0),l5.init();let ce=Ne.isV2AuthToken?d5.default():kk.default(),et=Ne.isV2AuthToken?c5.default(ce.viewType):hP.default(),je=Ne.isV2AuthToken?X.preset.name:void 0;if(Uie({...t,modules:E,apiBase:S,organizationId:be,viewType:ce.viewType}),E.permissions||E.theme){const ys=await Y;ys&&(je=ys.presetName),E.theme&&(ce=Ne.isV2AuthToken?d5.fromResponse(X.preset):kk.fromResponse(ys.theme),Ne.isV2AuthToken||ce.configFromPermissions(ys.permissions)),E.permissions&&(et=Ne.isV2AuthToken?c5.fromResponse(X.preset.permissions,ce.viewType):hP.fromResponse(ys.permissions))}const{roomNodeUrl:yt,meetingTitle:Ot,useHiveMedia:Bt}=await B;await q;const Ir=jO(ce),K=ge.hasFeature(me.CUSTOM_PING_PONG),ie=[];Bt&&ie.push("HIVE"),K&&ie.push("PING");const le=$S(ce.viewType,ie),Qe=k.getPlugins(le),ht=ce.viewType!==Tt.Chat;iO({...t,roomName:I,peerId:e,meetingTitle:Ot,roomNodeUrl:yt,device:O,useHiveMedia:Bt});const bt=await Of.createSocketServiceAndRoomNodeClient({...t,roomName:I,peerId:e,meetingTitle:Ot,roomNodeUrl:yt,capabilities:ie,shouldInitializeRoomNode:Ir,viewType:ce.viewType,device:O}),ri=Ai();let Ar,Ht,Xn,si,He,Dd,Ag,Au,Mu,Du,Ou,Lu;const Od=new js(bt),Mg=new yd(bt),ea=new r0(bt),Dg=new Vhe(bt),Ld=new ipe(bt),Nu=new rpe(bt),n0=new bpe(bt);di.socketService=bt;const Uu=Yp.create(bt);(i=E.self)==null||i?([He]=await Promise.all([Pu.init(bt,Uu,X,et,ce,je),ri instanceof Je?ri.setupTransports():null]),k.setOrganizationId(He.self.organizationId)):ri instanceof Je&&await ri.setupTransports();const a0=ge.hasFeature(me.TROUBLESHOOTING);if(He&&a0&&(Lu=new vpe(He.self)),(r=E.participant)==null||r){if(!He)throw new U("The participant module cannot be initialized without the `self` module");Ht=new Zn(He.self,Uu,ie)}if((s=E.chat)==null||s){if(!He)throw new U("The chat module cannot be initialized without the `self` module");Ar=await xa.init(Od,Mg,He.self,Ht.participants,ie)}if(ht&&((n=E.plugin)==null||n)){if(!He)throw new U("The plugin module cannot be initialized without the `self` module");if(!Ht)throw new U("The plugin module cannot be initialized without the `participant` module");const ys=await Qe;Xn=await Cg.init(ys,Dg,Od,Ar==null?void 0:Ar.chat,He.self,Ht.participants,ie)}if(ht&&((a=E.poll)==null||a)){if(!He)throw new U("The poll cannot be initialized without the `self` module");si=await BO.init(He.self,ea,ie)}if((o=E.meta)==null||o){if(!He)throw new U("The meta module cannot be initialized without the `self` module");Dd=new FO(He.self,bt,n0,Ot)}if((c=E.remoteControl)==null||c){if(!He)throw new U("The remote controller cannot be initialized without the `self` module");Ag=new _he(He.self,Ht.participants)}if(ht&&((u=E.recording)==null||u)){if(!He)throw new U("The recording controller cannot be initialized without the `self` module");Au=new sL(He.self)}if(((l=E.internals)==null||l)&&(Du=await i2.init()),ce.viewType===Tt.Livestream&&((p=E.livestream)==null||p)){if(!He)throw new U("The livestream controller cannot be initialized without the `self` module");ge.hasFeature(me.LIVESTREAM)&&(Mu=new aL(He.self,Ld))}if(ht&&((m=E.stage)==null||m)){if(!He)throw new U("The stage client cannot be initialized without the `self` module");Ou=new oL(Nu,Eue(et),He.self,Ht.participants,Dd.meta.viewType,ri)}if(nO(ce.viewType,ie)||((y=t.overrides)==null?void 0:y.chat_socket_server)==="socket-service")try{await bt.connect()}catch(ys){x.error("[Socket Service] Failed to connect to socket server:",{error:ys})}return new Of(S,Dd,He,Xn,Ht,Ar,si,Ag,Au,Du,Mu,Ou,Lu)}static async createSocketServiceAndRoomNodeClient(t){const e=Of.createSocketService(t);return t.shouldInitializeRoomNode?t.capabilities.includes("HIVE")?(await CO({...t,roomName:t.roomName,peerId:t.peerId,socket:e}),e):(await PO({...t,roomName:t.roomName,peerId:t.peerId}),e):e}static createSocketService(t){const{peerId:e,roomName:i,authToken:r,capabilities:s}=t;return new Pg({peerId:e,roomName:i,authToken:r,capabilities:s})}async joinRoom(){return this.selfController.joinRoom()}async leaveRoom(t="left"){return l5.cleanup(),this.selfController.leaveRoom(t)}};let Ru=Of;Rg([C.trace("Controller.joinRoom")],Ru.prototype,"joinRoom",1);Rg([C.trace("Controller.leaveRoom")],Ru.prototype,"leaveRoom",1);Rg([C.trace("Controller.init")],Ru,"init",1);Rg([C.trace("Controller.createSocketServiceAndRoomNodeClient")],Ru,"createSocketServiceAndRoomNodeClient",1);Rg([C.trace("Controller.createSocketService")],Ru,"createSocketService",1);var Lf;class _pe extends Mt{constructor(e){super(),N(this,Lf,void 0),w(this,"meetings",[]),w(this,"parentMeeting",null),L(this,Lf,e.self)}get supportsConnectedMeetings(){return h(this,Lf).id!==""&&Ne.isV2AuthToken&&ge.hasFeature(me.CONNECTED_MEETINGS)}get isActive(){return this.meetings.length!==0}get currentMeetingId(){return di.currentMeetingId}validateConnectedMeetingsAction(){if(!this.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
						Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`)}async getConnectedMeetings(){return this.validateConnectedMeetingsAction(),await di.getConnectedRoomsDump()}async createMeetings(e){return this.validateConnectedMeetingsAction(),(await di.createConnectedRooms(e)).map(i=>({id:i.id,title:i.title}))}async updateMeetings(e){this.validateConnectedMeetingsAction(),await di.updateConnectedRooms(e.map(i=>({meetingId:i.id,title:i.title})))}async deleteMeetings(e){this.validateConnectedMeetingsAction();const i=this.meetings.map(r=>e.includes(r.id)&&r.participants.length!==0?this.moveParticipants(r.id,this.parentMeeting.id,r.participants.map(s=>s.id)):Promise.resolve());return await Promise.all(i),await di.disableConnectedRooms(e)}async moveParticipants(e,i,r){this.validateConnectedMeetingsAction();const s=new Map;[...this.parentMeeting.participants,...this.meetings.flatMap(a=>a.participants)].forEach(a=>s.set(a.id,a));const n=await di.movePeersBetweenRooms({sourceMeetingId:e,destinationMeetingId:i,participants:r.map(a=>({id:a}))});return n.success&&(i===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.concat(r.map(a=>s.get(a)))),e===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.filter(a=>!r.includes(a.id))),this.meetings=this.meetings.map(a=>{if(i===a.id){const o=a.participants.concat(r.map(c=>s.get(c)));return{...a,participants:o}}if(e===a.id){const o=a.participants.filter(c=>!r.includes(c.id));return{...a,participants:o}}return a})),n}}Lf=new WeakMap;var Spe=Object.defineProperty,xpe=Object.getOwnPropertyDescriptor,n2=(t,e,i,r)=>{for(var s=r>1?void 0:r?xpe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Spe(e,i,s),s},il,Ch,d1;const mo=(d1=class{constructor(t,e){w(this,"connectedMeetings"),N(this,il,void 0),N(this,Ch,void 0),L(this,il,e),this.connectedMeetings=new _pe(t),this.setCurrentMeeting(t)}static init(t,e){return mo.instance||(mo.instance=new mo(t,e)),mo.instance.connectedMeetings.supportsConnectedMeetings&&(mo.instance.setupEvents(),t.self.once("roomJoined",()=>mo.instance.getConnectedMeetings())),mo.instance}setCurrentMeeting(t){L(this,Ch,t),di.currentMeetingId=t.meta.roomName}getConnectedMeetings(){this.connectedMeetings.getConnectedMeetings()}setupEvents(){di.socketService&&(di.socketService.on(ye.getConnectedRoomsDump,this.handleConnectedRoomsDump.bind(this)),di.socketService.on(ye.transferPeer,this.handleTransferPeer.bind(this)),di.socketService.on(ye.movedPeer,this.handleMovedPeer.bind(this)),di.socketService.on(ye.connectedRoomsUpdated,this.handleConnectedRoomsUpdated.bind(this)),di.socketService.on(ye.connectedRoomsDeleted,this.handleConnectedRoomsDeleted.bind(this)))}handleTransferPeer(t){const e=di.handleTransferPeerRaw(t);return this.switchMeeting(e)}async switchMeeting({authToken:t,meetingId:e}){if(!this.connectedMeetings.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
								Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);this.connectedMeetings.emit("changingMeeting",e);const i=h(this,Ch).self.videoEnabled;await h(this,Ch).leaveRoom("connected-meeting"),di.socketService=void 0;const r=await dL.init({authToken:t,apiBase:h(this,il).apiBase,defaults:{...h(this,il).defaults,video:i,audio:!1},modules:h(this,il).modules});return this.connectedMeetings.emit("meetingChanged",r),this.setCurrentMeeting(r),r}handleConnectedRoomsDump(t){const e=di.handleConnectedRoomsDumpRaw(t);this.connectedMeetings.meetings=e.meetings.map(i=>({id:i.id,title:i.title,participants:i.participants||[]})),this.connectedMeetings.parentMeeting={id:e.parentMeeting.id,title:e.parentMeeting.title,participants:e.parentMeeting.participants},this.emitStateUpdate()}handleMovedPeer(t){return di.handleMovedPeerRaw(t)}handleConnectedRoomsUpdated(t){const e=di.handleConnectedRoomsUpdatedRaw(t),i=new Map;this.connectedMeetings.meetings.forEach(r=>{i.set(r.id,r)}),e.forEach(r=>{i.has(r.id)?i.get(r.id).title=r.title:i.set(r.id,{...r,participants:[]})}),this.connectedMeetings.meetings=Array.from(i.values()),this.emitStateUpdate()}handleConnectedRoomsDeleted(t){const e=di.handleConnectedRoomsDeletedRaw(t).map(i=>i.id);this.connectedMeetings.meetings=this.connectedMeetings.meetings.filter(i=>!e.includes(i.id))}emitStateUpdate(){this.connectedMeetings.emit("stateUpdate",{meetings:this.connectedMeetings.meetings,parentMeeting:this.connectedMeetings.parentMeeting})}},il=new WeakMap,Ch=new WeakMap,w(d1,"instance"),d1);let s0=mo;n2([C.trace("ConnectedMeetingsController.getConnectedMeetings")],s0.prototype,"getConnectedMeetings",1);n2([C.trace("ConnectedMeetingsController.setupEvents")],s0.prototype,"setupEvents",1);n2([C.trace("ConnectedMeetingsController.switchMeeting")],s0.prototype,"switchMeeting",1);const Ph={},a2={executeWithLock({methodName:t,lockName:e,timeout:i}){return(r,s,n)=>{const a=n.value;return n.value=function(...o){if(Ph[e]){const l=new Error(`Unsupported concurrent calls on Dyte method: ${t}.`);throw l.name="UnsupportedConcurrentMethodExecution",x.error("DyteLocker::UnsupportedConcurrentMethodExecution",{error:{stack:l.stack},dyteLocker:{methodName:t,lockName:e}}),l}Ph[e]=!0;const c=setTimeout(()=>delete Ph[e],i),u=a.apply(this,o);return Promise.resolve(u).then(()=>{delete Ph[e],clearTimeout(c)}).catch(()=>{delete Ph[e],clearTimeout(c)}),u},n}}};var Epe=Object.defineProperty,Tpe=Object.getOwnPropertyDescriptor,Iu=(t,e,i,r)=>{for(var s=r>1?void 0:r?Tpe(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(r?a(e,i,s):a(s))||s);return r&&s&&Epe(e,i,s),s},_i,Lm,l1,u5,u1;let Na=(u1=class{constructor(t){N(this,l1),N(this,_i,void 0),N(this,Lm,void 0),L(this,_i,t)}static async init(t){var e,i,r,s,n,a;use((e=t.overrides)!=null?e:{}),Ze.init();const o=gg();window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION=!0,C.init(o,(r=(i=t.modules)==null?void 0:i.tracing)!=null?r:!0),x.info("DyteClient::init::options",{dyteClientInitOptions:{...t,authToken:`${(s=t.authToken)==null?void 0:s.slice(0,10)}...${(n=t.authToken)==null?void 0:n.slice(-10)}`}}),!navigator.isReactNative&&typeof window<"u"&&(window.addEventListener("error",l=>{var p;!((p=l.filename)!=null&&p.includes("localhost"))&&l.lineno!==0&&x.error("window::error",{error:l.error},!0)}),window.addEventListener("unhandledrejection",l=>{var p,m,y,b,S,E,k,T;x.error("window::unhandledrejection",{error:l==null?void 0:l.reason,networkCall:{url:(m=(p=l==null?void 0:l.reason)==null?void 0:p.config)==null?void 0:m.url,baseURL:(b=(y=l==null?void 0:l.reason)==null?void 0:y.config)==null?void 0:b.baseURL,method:(E=(S=l==null?void 0:l.reason)==null?void 0:S.config)==null?void 0:E.method,status:(k=l==null?void 0:l.reason)==null?void 0:k.status,statusText:(T=l==null?void 0:l.reason)==null?void 0:T.statusText}},!0)}),window.addEventListener("offline",()=>{x.info("window::offline")}),window.addEventListener("online",()=>{x.info("window::online")})),lse(t.authToken,t.roomName),C.meetingMetadata.roomName=Ne.isV2AuthToken?Ne.meetingId:t.roomName;const c=await Ru.init(t,o),u=new Na(c);return qe(a=u,l1,u5).call(a,t),u}async joinRoom(){return h(this,_i).joinRoom()}async leaveRoom(t){return h(this,_i).leaveRoom(t)}async join(){return h(this,_i).joinRoom()}async leave(t){return h(this,_i).leaveRoom(t)}get participants(){var t;return(t=h(this,_i).participantController)==null?void 0:t.participants}get self(){var t;return(t=h(this,_i).selfController)==null?void 0:t.self}get meta(){var t;return(t=h(this,_i).metaController)==null?void 0:t.meta}get ai(){var t;return(t=h(this,_i).metaController)==null?void 0:t.ai}get plugins(){var t;return(t=h(this,_i).pluginController)==null?void 0:t.plugins}get chat(){var t;return(t=h(this,_i).chatController)==null?void 0:t.chat}get polls(){var t;return(t=h(this,_i).pollController)==null?void 0:t.polls}get remote(){var t;return(t=h(this,_i).remoteController)==null?void 0:t.remote}get connectedMeetings(){var t;return(t=h(this,Lm))==null?void 0:t.connectedMeetings}get recording(){var t;return(t=h(this,_i).recordingController)==null?void 0:t.recording}get livestream(){var t;return(t=h(this,_i).livestreamController)==null?void 0:t.livestream}get stage(){var t;return(t=h(this,_i).stageController)==null?void 0:t.stage}get troubleshoot(){var t;return(t=h(this,_i).troubleshooterController)==null?void 0:t.troubleshooter}get __internals__(){var t;return(t=h(this,_i).internalsController)==null?void 0:t.internals}},_i=new WeakMap,Lm=new WeakMap,l1=new WeakSet,u5=function(t){L(this,Lm,s0.init(this,t))},w(u1,"DyteSelfMedia",UO),u1);Iu([Hi(t=>{throw new U(t.message,"0002")}),a2.executeWithLock({methodName:"meeting.joinRoom",lockName:"DyteClient.joinRoom",timeout:3e3})],Na.prototype,"joinRoom",1);Iu([Hi(t=>{throw new U(t.message,"0003")})],Na.prototype,"leaveRoom",1);Iu([Hi(t=>{throw new U(t.message,"0002")}),a2.executeWithLock({methodName:"meeting.join",lockName:"DyteClient.join",timeout:3e3})],Na.prototype,"join",1);Iu([Hi(t=>{throw new U(t.message,"0003")})],Na.prototype,"leave",1);Iu([Hi(t=>{throw new U(t.message,"0001")}),a2.executeWithLock({methodName:"DyteClient.init",lockName:"DyteClient.init",timeout:3e3})],Na,"init",1);Na=Iu([Hi(t=>{throw new U(t.message,"0000")})],Na);const dL=Na;var lL={exports:{}},Ig={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var h5=Object.getOwnPropertySymbols,Cpe=Object.prototype.hasOwnProperty,Ppe=Object.prototype.propertyIsEnumerable;function Rpe(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Ipe(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(n){s[n]=n}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Ipe();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ape=zk,uL=60103;Ig.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var p5=Symbol.for;uL=p5("react.element"),Ig.Fragment=p5("react.fragment")}var Mpe=Ape.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dpe=Object.prototype.hasOwnProperty,Ope={key:!0,ref:!0,__self:!0,__source:!0};function hL(t,e,i){var r,s={},n=null,a=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Dpe.call(e,r)&&!Ope.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uL,type:t,key:n,ref:a,props:s,_owner:Mpe.current}}Ig.jsx=hL;Ig.jsxs=hL;lL.exports=Ig;lL.exports.jsx;Ca.exports.createContext({meeting:void 0,updates:void 0});const Lpe=t=>{const e=Ca.exports.useRef(!1),[i,r]=Ca.exports.useState(),s=t==null?void 0:t.resetOnLeave;return[i,async a=>{if(!e.current){e.current=!0;try{const o=await dL.init(a);return r(o),s&&o.self.on("roomLeft",()=>r(void 0)),o}catch{}finally{e.current=!1}}}]};var pL=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},hr=(t,e,i)=>(pL(t,e,"read from private field"),i?i.call(t):e.get(t)),zo=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Fo=(t,e,i,r)=>(pL(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),Kh,zc,Nf,Qh,Fc,Uf,jf,$f;const Npe={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},gL={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},gi={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},kr={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},fo={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class te{static getFirstMatch(e,i){const r=i.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,i){const r=i.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,i,r){if(e.test(i))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const i=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const i=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,i,r=!1){const s=te.getVersionPrecision(e),n=te.getVersionPrecision(i);let a=Math.max(s,n),o=0;const c=te.map([e,i],u=>{const l=a-te.getVersionPrecision(u),p=u+new Array(l+1).join(".0");return te.map(p.split("."),m=>new Array(20-m.length).join("0")+m).reverse()});for(r&&(o=a-Math.min(s,n)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(e,i){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,i);for(s=0;s<e.length;s+=1)r.push(i(e[s]));return r}static find(e,i){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,i);for(r=0,s=e.length;r<s;r+=1){const n=e[r];if(i(n,r))return n}}static assign(e,...i){const r=e;let s,n;if(Object.assign)return Object.assign(e,...i);for(s=0,n=i.length;s<n;s+=1){const a=i[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return e}static getBrowserAlias(e){return Npe[e]}static getBrowserTypeByAlias(e){return gL[e]||""}}const xt=/version\/(\d+(\.?_?\d+)+)/i,Upe=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},i=te.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},i=te.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},i=te.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},i=te.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},i=te.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},i=te.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},i=te.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},i=te.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=te.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},i=te.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},i=te.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},i=te.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},i=te.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},i=te.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},i=te.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},i=te.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},i=te.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},i=te.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},i=te.getFirstMatch(xt,t)||te.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},i=te.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},i=te.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},i=te.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},i=te.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},i=te.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},i=te.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},i=te.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},i=te.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},i=te.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e={name:"Android Browser"},i=te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},i=te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},i=te.getFirstMatch(xt,t);return i&&(e.version=i),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?i:e;return{name:te.getFirstMatch(s,t),version:te.getSecondMatch(s,t)}}}];var jpe=[{test:[/Roku\/DVP/],describe(t){const e=te.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:kr.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=te.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:kr.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=te.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=te.getWindowsVersionName(e);return{name:kr.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:kr.iOS},i=te.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe(t){const e=te.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=te.getMacOSVersionName(e),r={name:kr.MacOS,version:e};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=te.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:kr.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e=te.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=te.getAndroidVersionName(e),r={name:kr.Android,version:e};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=te.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:kr.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=te.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||te.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||te.getFirstMatch(/\bbb(\d+)/i,t);return{name:kr.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=te.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:kr.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=te.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:kr.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:kr.Linux}}},{test:[/CrOS/],describe(){return{name:kr.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=te.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:kr.PlayStation4,version:e}}}],$pe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=te.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:gi.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:gi.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:gi.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:gi.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:gi.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:gi.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:gi.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe(t){const e=te.getFirstMatch(/(ipod|iphone)/i,t);return{type:gi.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:gi.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:gi.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:gi.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:gi.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:gi.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:gi.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:gi.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:gi.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:gi.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:gi.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:gi.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:gi.tv}}}],zpe=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:fo.Blink};const i=te.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:fo.EdgeHTML,version:i}}},{test:[/trident/i],describe(t){const e={name:fo.Trident},i=te.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:fo.Presto},i=te.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe(t){const e={name:fo.Gecko},i=te.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:fo.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:fo.WebKit},i=te.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];class g5{constructor(e,i=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=te.find(Upe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=te.find(jpe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:i}=this.getOS();return e?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:i}=this.getPlatform();return e?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const e=te.find($pe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=te.find(zpe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return te.assign({},this.parsedResult)}satisfies(e){const i={};let r=0;const s={};let n=0;if(Object.keys(e).forEach(o=>{const c=e[o];typeof c=="string"?(s[o]=c,n+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=te.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const u=te.find(o,l=>this.isPlatform(l));if(u){const l=this.satisfies(i[u]);if(l!==void 0)return l}}if(n>0){const o=Object.keys(s),c=te.find(o,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(e,i=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const n=te.getBrowserTypeByAlias(s);return i&&n&&(s=n.toLowerCase()),s===r}compareVersion(e){let i=[0],r=e,s=!1;const n=this.getBrowserVersion();if(typeof n=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):i=[],e[0]===">"?i.push(1):i.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),i.indexOf(te.compareVersions(n,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,i=!1){return this.isBrowser(e,i)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Fpe{static getParser(e,i=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new g5(e,i)}static parse(e){return new g5(e).getResult()}static get BROWSER_MAP(){return gL}static get ENGINE_MAP(){return fo}static get OS_MAP(){return kr}static get PLATFORMS_MAP(){return gi}}class mL{constructor(){this.createCameraVideoElement=e=>{const i=e,{height:r,width:s}=i.getSettings();if(r===void 0||s===void 0)throw Error("Background removal can't commence as Height and Width of the video feed is undefined");const n=document.createElement("video");return n.width=s,n.height=r,n.srcObject=new MediaStream([i]),n}}}var h1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t;function e(g){var f=0;return function(){return f<g.length?{done:!1,value:g[f++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,f,v){return g==Array.prototype||g==Object.prototype||(g[f]=v.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof h1=="object"&&h1];for(var f=0;f<g.length;++f){var v=g[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=r(this);function n(g,f){if(f)e:{var v=s;g=g.split(".");for(var _=0;_<g.length-1;_++){var M=g[_];if(!(M in v))break e;v=v[M]}g=g[g.length-1],_=v[g],f=f(_),f!=_&&f!=null&&i(v,g,{configurable:!0,writable:!0,value:f})}}n("Symbol",function(g){function f(D){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new v(_+(D||"")+"_"+M++,D)}function v(D,A){this.h=D,i(this,"description",{configurable:!0,writable:!0,value:A})}if(g)return g;v.prototype.toString=function(){return this.h};var _="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",M=0;return f}),n("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<f.length;v++){var _=s[f[v]];typeof _=="function"&&typeof _.prototype[g]!="function"&&i(_.prototype,g,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return g});function a(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function o(g){var f=typeof Symbol<"u"&&Symbol.iterator&&g[Symbol.iterator];return f?f.call(g):{next:e(g)}}function c(g){if(!(g instanceof Array)){g=o(g);for(var f,v=[];!(f=g.next()).done;)v.push(f.value);g=v}return g}var u=typeof Object.assign=="function"?Object.assign:function(g,f){for(var v=1;v<arguments.length;v++){var _=arguments[v];if(_)for(var M in _)Object.prototype.hasOwnProperty.call(_,M)&&(g[M]=_[M])}return g};n("Object.assign",function(g){return g||u});var l=typeof Object.create=="function"?Object.create:function(g){function f(){}return f.prototype=g,new f},p;if(typeof Object.setPrototypeOf=="function")p=Object.setPrototypeOf;else{var m;e:{var y={a:!0},b={};try{b.__proto__=y,m=b.a;break e}catch{}m=!1}p=m?function(g,f){if(g.__proto__=f,g.__proto__!==f)throw new TypeError(g+" is not extensible");return g}:null}var S=p;function E(g,f){if(g.prototype=l(f.prototype),g.prototype.constructor=g,S)S(g,f);else for(var v in f)if(v!="prototype")if(Object.defineProperties){var _=Object.getOwnPropertyDescriptor(f,v);_&&Object.defineProperty(g,v,_)}else g[v]=f[v];g.za=f.prototype}function k(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function T(g){if(g.m)throw new TypeError("Generator is already running");g.m=!0}k.prototype.u=function(g){this.i=g};function I(g,f){g.l={ma:f,na:!0},g.h=g.s||g.v}k.prototype.return=function(g){this.l={return:g},this.h=this.v};function O(g,f,v){return g.h=v,{value:f}}function q(g){this.h=new k,this.i=g}function B(g,f){T(g.h);var v=g.h.j;return v?Y(g,"return"in v?v.return:function(_){return{value:_,done:!0}},f,g.h.return):(g.h.return(f),X(g))}function Y(g,f,v,_){try{var M=f.call(g.h.j,v);if(!(M instanceof Object))throw new TypeError("Iterator result "+M+" is not an object");if(!M.done)return g.h.m=!1,M;var D=M.value}catch(A){return g.h.j=null,I(g.h,A),X(g)}return g.h.j=null,_.call(g.h,D),X(g)}function X(g){for(;g.h.h;)try{var f=g.i(g.h);if(f)return g.h.m=!1,{value:f.value,done:!1}}catch(v){g.h.i=void 0,I(g.h,v)}if(g.h.m=!1,g.h.l){if(f=g.h.l,g.h.l=null,f.na)throw f.ma;return{value:f.return,done:!0}}return{value:void 0,done:!0}}function be(g){this.next=function(f){return T(g.h),g.h.j?f=Y(g,g.h.j.next,f,g.h.u):(g.h.u(f),f=X(g)),f},this.throw=function(f){return T(g.h),g.h.j?f=Y(g,g.h.j.throw,f,g.h.u):(I(g.h,f),f=X(g)),f},this.return=function(f){return B(g,f)},this[Symbol.iterator]=function(){return this}}function he(g){function f(_){return g.next(_)}function v(_){return g.throw(_)}return new Promise(function(_,M){function D(A){A.done?_(A.value):Promise.resolve(A.value).then(f,v).then(D,M)}D(g.next())})}function ce(g){return he(new be(new q(g)))}n("Promise",function(g){function f(A){this.i=0,this.j=void 0,this.h=[],this.u=!1;var j=this.l();try{A(j.resolve,j.reject)}catch(F){j.reject(F)}}function v(){this.h=null}function _(A){return A instanceof f?A:new f(function(j){j(A)})}if(g)return g;v.prototype.i=function(A){if(this.h==null){this.h=[];var j=this;this.j(function(){j.m()})}this.h.push(A)};var M=s.setTimeout;v.prototype.j=function(A){M(A,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var A=this.h;this.h=[];for(var j=0;j<A.length;++j){var F=A[j];A[j]=null;try{F()}catch(se){this.l(se)}}}this.h=null},v.prototype.l=function(A){this.j(function(){throw A})},f.prototype.l=function(){function A(se){return function(oe){F||(F=!0,se.call(j,oe))}}var j=this,F=!1;return{resolve:A(this.I),reject:A(this.m)}},f.prototype.I=function(A){if(A===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(A instanceof f)this.L(A);else{e:switch(typeof A){case"object":var j=A!=null;break e;case"function":j=!0;break e;default:j=!1}j?this.F(A):this.s(A)}},f.prototype.F=function(A){var j=void 0;try{j=A.then}catch(F){this.m(F);return}typeof j=="function"?this.M(j,A):this.s(A)},f.prototype.m=function(A){this.v(2,A)},f.prototype.s=function(A){this.v(1,A)},f.prototype.v=function(A,j){if(this.i!=0)throw Error("Cannot settle("+A+", "+j+"): Promise already settled in state"+this.i);this.i=A,this.j=j,this.i===2&&this.K(),this.H()},f.prototype.K=function(){var A=this;M(function(){if(A.D()){var j=s.console;typeof j<"u"&&j.error(A.j)}},1)},f.prototype.D=function(){if(this.u)return!1;var A=s.CustomEvent,j=s.Event,F=s.dispatchEvent;return typeof F>"u"?!0:(typeof A=="function"?A=new A("unhandledrejection",{cancelable:!0}):typeof j=="function"?A=new j("unhandledrejection",{cancelable:!0}):(A=s.document.createEvent("CustomEvent"),A.initCustomEvent("unhandledrejection",!1,!0,A)),A.promise=this,A.reason=this.j,F(A))},f.prototype.H=function(){if(this.h!=null){for(var A=0;A<this.h.length;++A)D.i(this.h[A]);this.h=null}};var D=new v;return f.prototype.L=function(A){var j=this.l();A.T(j.resolve,j.reject)},f.prototype.M=function(A,j){var F=this.l();try{A.call(j,F.resolve,F.reject)}catch(se){F.reject(se)}},f.prototype.then=function(A,j){function F(ve,de){return typeof ve=="function"?function(Re){try{se(ve(Re))}catch(We){oe(We)}}:de}var se,oe,Pe=new f(function(ve,de){se=ve,oe=de});return this.T(F(A,se),F(j,oe)),Pe},f.prototype.catch=function(A){return this.then(void 0,A)},f.prototype.T=function(A,j){function F(){switch(se.i){case 1:A(se.j);break;case 2:j(se.j);break;default:throw Error("Unexpected state: "+se.i)}}var se=this;this.h==null?D.i(F):this.h.push(F),this.u=!0},f.resolve=_,f.reject=function(A){return new f(function(j,F){F(A)})},f.race=function(A){return new f(function(j,F){for(var se=o(A),oe=se.next();!oe.done;oe=se.next())_(oe.value).T(j,F)})},f.all=function(A){var j=o(A),F=j.next();return F.done?_([]):new f(function(se,oe){function Pe(Re){return function(We){ve[Re]=We,de--,de==0&&se(ve)}}var ve=[],de=0;do ve.push(void 0),de++,_(F.value).T(Pe(ve.length-1),oe),F=j.next();while(!F.done)})},f}),n("Number.isNaN",function(g){return g||function(f){return typeof f=="number"&&isNaN(f)}});function et(g,f){g instanceof String&&(g+="");var v=0,_=!1,M={next:function(){if(!_&&v<g.length){var D=v++;return{value:f(D,g[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}n("Array.prototype.keys",function(g){return g||function(){return et(this,function(f){return f})}}),n("Array.prototype.fill",function(g){return g||function(f,v,_){var M=this.length||0;for(0>v&&(v=Math.max(0,M+v)),(_==null||_>M)&&(_=M),_=Number(_),0>_&&(_=Math.max(0,M+_)),v=Number(v||0);v<_;v++)this[v]=f;return this}});function je(g){return g||Array.prototype.fill}n("Int8Array.prototype.fill",je),n("Uint8Array.prototype.fill",je),n("Uint8ClampedArray.prototype.fill",je),n("Int16Array.prototype.fill",je),n("Uint16Array.prototype.fill",je),n("Int32Array.prototype.fill",je),n("Uint32Array.prototype.fill",je),n("Float32Array.prototype.fill",je),n("Float64Array.prototype.fill",je),n("Object.is",function(g){return g||function(f,v){return f===v?f!==0||1/f===1/v:f!==f&&v!==v}}),n("Array.prototype.includes",function(g){return g||function(f,v){var _=this;_ instanceof String&&(_=String(_));var M=_.length;for(v=v||0,0>v&&(v=Math.max(v+M,0));v<M;v++){var D=_[v];if(D===f||Object.is(D,f))return!0}return!1}}),n("String.prototype.includes",function(g){return g||function(f,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(f,v||0)!==-1}});var yt=this||self;function Ot(g,f){g=g.split(".");var v=yt;g[0]in v||typeof v.execScript>"u"||v.execScript("var "+g[0]);for(var _;g.length&&(_=g.shift());)g.length||f===void 0?v[_]&&v[_]!==Object.prototype[_]?v=v[_]:v=v[_]={}:v[_]=f}var Bt=Array.prototype.map?function(g,f){return Array.prototype.map.call(g,f,void 0)}:function(g,f){for(var v=g.length,_=Array(v),M=typeof g=="string"?g.split(""):g,D=0;D<v;D++)D in M&&(_[D]=f.call(void 0,M[D],D,g));return _},Ir={},K=null;function ie(g){var f;f===void 0&&(f=0),ht(),f=Ir[f];for(var v=Array(Math.floor(g.length/3)),_=f[64]||"",M=0,D=0;M<g.length-2;M+=3){var A=g[M],j=g[M+1],F=g[M+2],se=f[A>>2];A=f[(A&3)<<4|j>>4],j=f[(j&15)<<2|F>>6],F=f[F&63],v[D++]=se+A+j+F}switch(se=0,F=_,g.length-M){case 2:se=g[M+1],F=f[(se&15)<<2]||_;case 1:g=g[M],v[D]=f[g>>2]+f[(g&3)<<4|se>>4]+F+_}return v.join("")}function le(g){var f=g.length,v=3*f/4;v%3?v=Math.floor(v):"=.".indexOf(g[f-1])!=-1&&(v="=.".indexOf(g[f-2])!=-1?v-2:v-1);var _=new Uint8Array(v),M=0;return Qe(g,function(D){_[M++]=D}),M!==v?_.subarray(0,M):_}function Qe(g,f){function v(F){for(;_<g.length;){var se=g.charAt(_++),oe=K[se];if(oe!=null)return oe;if(!/^[\s\xa0]*$/.test(se))throw Error("Unknown base64 encoding at char: "+se)}return F}ht();for(var _=0;;){var M=v(-1),D=v(0),A=v(64),j=v(64);if(j===64&&M===-1)break;f(M<<2|D>>4),A!=64&&(f(D<<4&240|A>>2),j!=64&&f(A<<6&192|j))}}function ht(){if(!K){K={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var _=g.concat(f[v].split(""));Ir[v]=_;for(var M=0;M<_.length;M++){var D=_[M];K[D]===void 0&&(K[D]=M)}}}}var bt=typeof Uint8Array<"u",ri;function Ar(){return ri||(ri=new Uint8Array(0))}var Ht={},Xn=typeof Uint8Array.prototype.slice=="function",si=0,He=0;function Dd(g){var f=0>g;g=Math.abs(g);var v=g>>>0;g=Math.floor((g-v)/4294967296),f&&(v=o(Au(v,g)),f=v.next().value,g=v.next().value,v=f),si=v>>>0,He=g>>>0}var Ag=typeof BigInt=="function";function Au(g,f){return f=~f,g?g=~g+1:f+=1,[g,f]}function Mu(g,f){this.i=g>>>0,this.h=f>>>0}function Du(g){if(!g)return Ou||(Ou=new Mu(0,0));if(!/^-?\d+$/.test(g))return null;if(16>g.length)Dd(Number(g));else if(Ag)g=BigInt(g),si=Number(g&BigInt(4294967295))>>>0,He=Number(g>>BigInt(32)&BigInt(4294967295));else{var f=+(g[0]==="-");He=si=0;for(var v=g.length,_=f,M=(v-f)%6+f;M<=v;_=M,M+=6)_=Number(g.slice(_,M)),He*=1e6,si=1e6*si+_,4294967296<=si&&(He+=si/4294967296|0,si%=4294967296);f&&(f=o(Au(si,He)),g=f.next().value,f=f.next().value,si=g,He=f)}return new Mu(si,He)}var Ou;function Lu(g,f){return Error("Invalid wire type: "+g+" (at position "+f+")")}function Od(){return Error("Failed to read varint, encoding is invalid.")}function Mg(g,f){return Error("Tried to read past the end of the data "+f+" > "+g)}function ea(){throw Error("Invalid UTF8")}function Dg(g,f){return f=String.fromCharCode.apply(null,f),g==null?f:g+f}var Ld=void 0,Nu,n0=typeof TextDecoder<"u",Uu,a0=typeof TextEncoder<"u",ys;function o2(g){if(g!==Ht)throw Error("illegal external caller")}function ju(g,f){if(o2(f),this.V=g,g!=null&&g.length===0)throw Error("ByteString should be constructed with non-empty values")}function o0(){return ys||(ys=new ju(null,Ht))}function c2(g){o2(Ht);var f=g.V;return f=f==null||bt&&f!=null&&f instanceof Uint8Array?f:typeof f=="string"?le(f):null,f==null?f:g.V=f}function wL(g){if(typeof g=="string")return{buffer:le(g),C:!1};if(Array.isArray(g))return{buffer:new Uint8Array(g),C:!1};if(g.constructor===Uint8Array)return{buffer:g,C:!1};if(g.constructor===ArrayBuffer)return{buffer:new Uint8Array(g),C:!1};if(g.constructor===ju)return{buffer:c2(g)||Ar(),C:!0};if(g instanceof Uint8Array)return{buffer:new Uint8Array(g.buffer,g.byteOffset,g.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function d2(g){this.i=null,this.m=!1,this.h=this.j=this.l=0,c0(this,g)}function c0(g,f){var v={};g.S=v.S===void 0?!1:v.S,f&&(f=wL(f),g.i=f.buffer,g.m=f.C,g.l=0,g.j=g.i.length,g.h=g.l)}d2.prototype.reset=function(){this.h=this.l};function sc(g,f){if(g.h=f,f>g.j)throw Mg(g.j,f)}function $u(g){var f=g.i,v=g.h,_=f[v++],M=_&127;if(_&128&&(_=f[v++],M|=(_&127)<<7,_&128&&(_=f[v++],M|=(_&127)<<14,_&128&&(_=f[v++],M|=(_&127)<<21,_&128&&(_=f[v++],M|=_<<28,_&128&&f[v++]&128&&f[v++]&128&&f[v++]&128&&f[v++]&128&&f[v++]&128)))))throw Od();return sc(g,v),M}function l2(g,f){if(0>f)throw Error("Tried to read a negative byte length: "+f);var v=g.h,_=v+f;if(_>g.j)throw Mg(f,g.j-v);return g.h=_,v}var u2=[];function d0(){this.h=[]}d0.prototype.length=function(){return this.h.length},d0.prototype.end=function(){var g=this.h;return this.h=[],g};function h2(g,f,v){for(;0<v||127<f;)g.h.push(f&127|128),f=(f>>>7|v<<25)>>>0,v>>>=7;g.h.push(f)}function nc(g,f){for(;127<f;)g.h.push(f&127|128),f>>>=7;g.h.push(f)}function l0(g){if(u2.length){var f=u2.pop();c0(f,g),g=f}else g=new d2(g);this.h=g,this.j=this.h.h,this.i=this.l=-1,this.setOptions(void 0)}l0.prototype.setOptions=function(g){g=g===void 0?{}:g,this.ca=g.ca===void 0?!1:g.ca},l0.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function p2(g){var f=g.h;if(f.h==f.j)return!1;g.j=g.h.h;var v=$u(g.h)>>>0;if(f=v>>>3,v&=7,!(0<=v&&5>=v))throw Lu(v,g.j);if(1>f)throw Error("Invalid field number: "+f+" (at position "+g.j+")");return g.l=f,g.i=v,!0}function Og(g){switch(g.i){case 0:if(g.i!=0)Og(g);else e:{g=g.h;for(var f=g.h,v=f+10,_=g.i;f<v;)if((_[f++]&128)===0){sc(g,f);break e}throw Od()}break;case 1:g=g.h,sc(g,g.h+8);break;case 2:g.i!=2?Og(g):(f=$u(g.h)>>>0,g=g.h,sc(g,g.h+f));break;case 5:g=g.h,sc(g,g.h+4);break;case 3:f=g.l;do{if(!p2(g))throw Error("Unmatched start-group tag: stream EOF");if(g.i==4){if(g.l!=f)throw Error("Unmatched end-group tag");break}Og(g)}while(1);break;default:throw Lu(g.i,g.j)}}var Lg=[];function kL(){this.j=[],this.i=0,this.h=new d0}function Nd(g,f){f.length!==0&&(g.j.push(f),g.i+=f.length)}function _L(g,f){if(f=f.R){Nd(g,g.h.end());for(var v=0;v<f.length;v++)Nd(g,c2(f[v])||Ar())}}var ta=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function ac(g,f){return ta?g[ta]|=f:g.A!==void 0?g.A|=f:(Object.defineProperties(g,{A:{value:f,configurable:!0,writable:!0,enumerable:!1}}),f)}function g2(g,f){ta?g[ta]&&(g[ta]&=~f):g.A!==void 0&&(g.A&=~f)}function ui(g){var f;return ta?f=g[ta]:f=g.A,f==null?0:f}function bn(g,f){ta?g[ta]=f:g.A!==void 0?g.A=f:Object.defineProperties(g,{A:{value:f,configurable:!0,writable:!0,enumerable:!1}})}function u0(g){return ac(g,1),g}function SL(g,f){bn(f,(g|0)&-51)}function h0(g,f){bn(f,(g|18)&-41)}var p0={};function Ng(g){return g!==null&&typeof g=="object"&&!Array.isArray(g)&&g.constructor===Object}var zu,m2=[];bn(m2,23),zu=Object.freeze(m2);function g0(g){if(ui(g.o)&2)throw Error("Cannot mutate an immutable Message")}function m0(g){var f=g.length;(f=f?g[f-1]:void 0)&&Ng(f)?f.g=1:(f={},g.push((f.g=1,f)))}var Ug;function xL(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":if(g)if(Array.isArray(g)){if((ui(g)&128)!==0)return g=Array.prototype.slice.call(g),m0(g),g}else{if(bt&&g!=null&&g instanceof Uint8Array)return ie(g);if(g instanceof ju){var f=g.V;return f==null?"":typeof f=="string"?f:g.V=ie(f)}}}return g}function f2(g,f,v,_){if(g!=null){if(Array.isArray(g))g=f0(g,f,v,_!==void 0);else if(Ng(g)){var M={},D;for(D in g)M[D]=f2(g[D],f,v,_);g=M}else g=f(g,_);return g}}function f0(g,f,v,_){var M=ui(g);_=_?!!(M&16):void 0,g=Array.prototype.slice.call(g);for(var D=0;D<g.length;D++)g[D]=f2(g[D],f,v,_);return v(M,g),g}function EL(g){return g.ja===p0?g.toJSON():xL(g)}function TL(g,f){g&128&&m0(f)}function v2(g){var f=g.i+g.G;return g.B||(g.B=g.o[f]={})}function $s(g,f){return f===-1?null:f>=g.i?g.B?g.B[f]:void 0:g.o[f+g.G]}function wn(g,f,v,_){g0(g),Fu(g,f,v,_)}function Fu(g,f,v,_){g.j&&(g.j=void 0),f>=g.i||_?v2(g)[f]=v:(g.o[f+g.G]=v,(g=g.B)&&f in g&&delete g[f])}function v0(g,f,v,_){var M=$s(g,f);Array.isArray(M)||(M=zu);var D=ui(M);if(D&1||u0(M),_)D&2||ac(M,2),v&1||Object.freeze(M);else{_=!(v&2);var A=D&2;v&1||!A?_&&D&16&&!A&&g2(M,16):(M=u0(Array.prototype.slice.call(M)),Fu(g,f,M))}return M}function y0(g,f){var v=$s(g,f);if(v==null)return v;if(typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"){var _=Number(v);return _!==v&&Fu(g,f,_),_}}function y2(g,f,v,_,M){g.h||(g.h={});var D=g.h[v],A=v0(g,v,3,M);if(!D){var j=A;D=[];var F=!!(ui(g.o)&16);A=!!(ui(j)&2);var se=j;!M&&A&&(j=Array.prototype.slice.call(j));for(var oe=A,Pe=0;Pe<j.length;Pe++){var ve=j[Pe],de=f,Re=!1;if(Re=Re===void 0?!1:Re,ve=Array.isArray(ve)?new de(ve):Re?new de:void 0,ve!==void 0){de=ve.o;var We=Re=ui(de);A&&(We|=2),F&&(We|=16),We!=Re&&bn(de,We),de=We,oe=oe||!!(2&de),D.push(ve)}}return g.h[v]=D,F=ui(j),f=F|33,f=oe?f&-9:f|8,F!=f&&(oe=j,Object.isFrozen(oe)&&(oe=Array.prototype.slice.call(oe)),bn(oe,f),j=oe),se!==j&&Fu(g,v,j),(M||_&&A)&&ac(D,2),_&&Object.freeze(D),D}return A=D,M||(Object.isFrozen(A)?_||(D=Array.prototype.slice.call(D),g.h[v]=D):_&&Object.freeze(A)),D}function b0(g,f,v){var _=!!(ui(g.o)&2);if(f=y2(g,f,v,_,_),g=v0(g,v,3,_),!(_||ui(g)&8)){for(_=0;_<f.length;_++){if(v=f[_],ui(v.o)&2){var M=S2(v,!1);M.j=v}else M=v;v!==M&&(f[_]=M,g[_]=M.o)}ac(g,8)}return f}function kn(g,f,v){if(v!=null&&typeof v!="number")throw Error("Value of float field must be a number|null|undefined, found "+typeof v+": "+v);wn(g,f,v)}function b2(g,f,v,_,M){g0(g);var D=y2(g,v,f,!1,!1);return v=_!=null?_:new v,g=v0(g,f,2,!1),M!=null?(D.splice(M,0,v),g.splice(M,0,v.o)):(D.push(v),g.push(v.o)),v.C()&&g2(g,8),v}function Vu(g,f){return g==null?f:g}function _n(g,f,v){return v=v===void 0?0:v,Vu(y0(g,f),v)}function w2(g,f,v){if(v=v===void 0?h0:v,g!=null){if(bt&&g instanceof Uint8Array)return g.length?new ju(new Uint8Array(g),Ht):o0();if(Array.isArray(g)){var _=ui(g);return _&2?g:f&&!(_&32)&&(_&16||_===0)?(bn(g,_|2),g):(g=f0(g,w2,v,!0),f=ui(g),f&4&&f&2&&Object.freeze(g),g)}return g.ja===p0?_2(g):g}}function k2(g,f,v,_,M,D,A){if(g=g.h&&g.h[v]){if(_=ui(g),_&2?_=g:(D=Bt(g,_2),h0(_,D),Object.freeze(D),_=D),g0(f),A=_==null?zu:u0([]),_!=null){for(D=!1,g=0;g<_.length;g++){var j=_[g];D=D||!!(ui(j.o)&2),A[g]=j.o}D=(D?0:8)|1,g=ui(A),(g&D)!==D&&(Object.isFrozen(A)&&(A=Array.prototype.slice.call(A)),bn(A,g|D)),f.h||(f.h={}),f.h[v]=_}else f.h&&(f.h[v]=void 0);Fu(f,v,A,M)}else wn(f,v,w2(_,D,A),M)}function _2(g){return ui(g.o)&2||(g=S2(g,!0),ac(g.o,2)),g}function S2(g,f){var v=g.o,_=[];ac(_,16);var M=g.constructor.h;if(M&&_.push(M),M=g.B,M){_.length=v.length,_.fill(void 0,_.length,v.length);var D={};_[_.length-1]=D}(ui(v)&128)!==0&&m0(_),f=f||g.C()?h0:SL;var A=g.constructor;Ug=_,_=new A(_),Ug=void 0,g.R&&(_.R=g.R.slice()),A=!!(ui(v)&16);for(var j=M?v.length-1:v.length,F=0;F<j;F++)k2(g,_,F-g.G,v[F],!1,A,f);if(M)for(var se in M)v=M[se],j=+se,Number.isNaN(j)?D[j]=v:k2(g,_,j,v,!0,A,f);return _}function Mr(g,f,v){g==null&&(g=Ug),Ug=void 0;var _=this.constructor.i||0,M=0<_,D=this.constructor.h,A=!1;if(g==null){g=D?[D]:[];var j=!0;bn(g,48)}else{if(!Array.isArray(g)||D&&D!==g[0])throw Error();var F=ac(g,0),se=F;if((j=(16&se)!==0)&&((A=(32&se)!==0)||(se|=32)),M){if(128&se)_=0;else if(0<g.length){var oe=g[g.length-1];if(Ng(oe)&&"g"in oe){_=0,se|=128,delete oe.g;var Pe=!0,ve;for(ve in oe){Pe=!1;break}Pe&&g.pop()}}}else if(128&se)throw Error();F!==se&&bn(g,se)}this.G=(D?0:-1)-_,this.h=void 0,this.o=g;e:{if(D=this.o.length,_=D-1,D&&(D=this.o[_],Ng(D))){this.B=D,this.i=_-this.G;break e}f!==void 0&&-1<f?(this.i=Math.max(f,_+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!M&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){f=j&&!A&&!0,M=this.i;var de;for(j=0;j<v.length;j++)A=v[j],A<M?(A+=this.G,(_=g[A])?x2(_,f):g[A]=zu):(de||(de=v2(this)),(_=de[A])?x2(_,f):de[A]=zu)}}Mr.prototype.toJSON=function(){return f0(this.o,EL,TL)},Mr.prototype.C=function(){return!!(ui(this.o)&2)};function x2(g,f){if(Array.isArray(g)){var v=ui(g),_=1;!f||v&2||(_|=16),(v&_)!==_&&bn(g,v|_)}}Mr.prototype.ja=p0,Mr.prototype.toString=function(){return this.o.toString()};function E2(g,f,v){if(v){var _={},M;for(M in v){var D=v[M],A=D.ra;A||(_.J=D.xa||D.oa.W,D.ia?(_.aa=I2(D.ia),A=function(j){return function(F,se,oe){return j.J(F,se,oe,j.aa)}}(_)):D.ka?(_.Z=A2(D.da.P,D.ka),A=function(j){return function(F,se,oe){return j.J(F,se,oe,j.Z)}}(_)):A=_.J,D.ra=A),A(f,g,D.da),_={J:_.J,aa:_.aa,Z:_.Z}}}_L(f,g)}var jg=Symbol();function T2(g,f,v){return g[jg]||(g[jg]=function(_,M){return f(_,M,v)})}function C2(g){var f=g[jg];if(!f){var v=k0(g);f=function(_,M){return M2(_,M,v)},g[jg]=f}return f}function CL(g){var f=g.ia;if(f)return C2(f);if(f=g.wa)return T2(g.da.P,f,g.ka)}function PL(g){var f=CL(g),v=g.da,_=g.oa.U;return f?function(M,D){return _(M,D,v,f)}:function(M,D){return _(M,D,v)}}function P2(g,f){var v=g[f];return typeof v=="function"&&v.length===0&&(v=v(),g[f]=v),Array.isArray(v)&&(Hu in v||Bu in v||0<v.length&&typeof v[0]=="function")?v:void 0}function R2(g,f,v,_,M,D){f.P=g[0];var A=1;if(g.length>A&&typeof g[A]!="number"){var j=g[A++];v(f,j)}for(;A<g.length;){v=g[A++];for(var F=A+1;F<g.length&&typeof g[F]!="number";)F++;switch(j=g[A++],F-=A,F){case 0:_(f,v,j);break;case 1:(F=P2(g,A))?(A++,M(f,v,j,F)):_(f,v,j,g[A++]);break;case 2:F=A++,F=P2(g,F),M(f,v,j,F,g[A++]);break;case 3:D(f,v,j,g[A++],g[A++],g[A++]);break;case 4:D(f,v,j,g[A++],g[A++],g[A++],g[A++]);break;default:throw Error("unexpected number of binary field arguments: "+F)}}return f}var $g=Symbol();function I2(g){var f=g[$g];if(!f){var v=w0(g);f=function(_,M){return D2(_,M,v)},g[$g]=f}return f}function A2(g,f){var v=g[$g];return v||(v=function(_,M){return E2(_,M,f)},g[$g]=v),v}var Bu=Symbol();function RL(g,f){g.push(f)}function IL(g,f,v){g.push(f,v.W)}function AL(g,f,v,_){var M=I2(_),D=w0(_).P,A=v.W;g.push(f,function(j,F,se){return A(j,F,se,D,M)})}function ML(g,f,v,_,M,D){var A=A2(_,D),j=v.W;g.push(f,function(F,se,oe){return j(F,se,oe,_,A)})}function w0(g){var f=g[Bu];return f||(f=R2(g,g[Bu]=[],RL,IL,AL,ML),Hu in g&&Bu in g&&(g.length=0),f)}var Hu=Symbol();function DL(g,f){g[0]=f}function OL(g,f,v,_){var M=v.U;g[f]=_?function(D,A,j){return M(D,A,j,_)}:M}function LL(g,f,v,_,M){var D=v.U,A=C2(_),j=k0(_).P;g[f]=function(F,se,oe){return D(F,se,oe,j,A,M)}}function NL(g,f,v,_,M,D,A){var j=v.U,F=T2(_,M,D);g[f]=function(se,oe,Pe){return j(se,oe,Pe,_,F,A)}}function k0(g){var f=g[Hu];return f||(f=R2(g,g[Hu]={},DL,OL,LL,NL),Hu in g&&Bu in g&&(g.length=0),f)}function M2(g,f,v){for(;p2(f)&&f.i!=4;){var _=f.l,M=v[_];if(!M){var D=v[0];D&&(D=D[_])&&(M=v[_]=PL(D))}if(!M||!M(f,g,_)){M=f,_=g,D=M.j,Og(M);var A=M;if(!A.ca){if(M=A.h.h-D,A.h.h=D,A=A.h,M==0)M=o0();else{if(D=l2(A,M),A.S&&A.m)M=A.i.subarray(D,D+M);else{A=A.i;var j=D;M=D+M,M=j===M?Ar():Xn?A.slice(j,M):new Uint8Array(A.subarray(j,M))}M=M.length==0?o0():new ju(M,Ht)}(D=_.R)?D.push(M):_.R=[M]}}}return g}function _0(g,f){if(Lg.length){var v=Lg.pop();v.setOptions(void 0),c0(v.h,g),g=v}else g=new l0(g);try{var _=k0(f);return M2(new _.P,g,_)}finally{f=g.h,f.i=null,f.m=!1,f.l=0,f.j=0,f.h=0,f.S=!1,g.l=-1,g.i=-1,100>Lg.length&&Lg.push(g)}}function D2(g,f,v){for(var _=v.length,M=_%2==1,D=M?1:0;D<_;D+=2)(0,v[D+1])(f,g,v[D]);E2(g,f,M?v[0]:void 0)}function S0(g,f){var v=new kL;D2(g,v,w0(f)),Nd(v,v.h.end()),g=new Uint8Array(v.i),f=v.j;for(var _=f.length,M=0,D=0;D<_;D++){var A=f[D];g.set(A,M),M+=A.length}return v.j=[g],g}function Wu(g,f){return{U:g,W:f}}var zs=Wu(function(g,f,v){if(g.i!==5)return!1;g=g.h;var _=g.i,M=g.h,D=_[M],A=_[M+1],j=_[M+2];return _=_[M+3],sc(g,g.h+4),A=(D<<0|A<<8|j<<16|_<<24)>>>0,g=2*(A>>31)+1,D=A>>>23&255,A&=8388607,wn(f,v,D==255?A?NaN:1/0*g:D==0?g*Math.pow(2,-149)*A:g*Math.pow(2,D-150)*(A+Math.pow(2,23))),!0},function(g,f,v){if(f=y0(f,v),f!=null){nc(g.h,8*v+5),g=g.h;var _=+f;_===0?0<1/_?si=He=0:(He=0,si=2147483648):isNaN(_)?(He=0,si=2147483647):(_=(v=0>_?-2147483648:0)?-_:_,34028234663852886e22<_?(He=0,si=(v|2139095040)>>>0):11754943508222875e-54>_?(_=Math.round(_/Math.pow(2,-149)),He=0,si=(v|_)>>>0):(f=Math.floor(Math.log(_)/Math.LN2),_*=Math.pow(2,-f),_=Math.round(8388608*_),16777216<=_&&++f,He=0,si=(v|f+127<<23|_&8388607)>>>0)),v=si,g.h.push(v>>>0&255),g.h.push(v>>>8&255),g.h.push(v>>>16&255),g.h.push(v>>>24&255)}}),UL=Wu(function(g,f,v){if(g.i!==0)return!1;var _=g.h,M=0,D=g=0,A=_.i,j=_.h;do{var F=A[j++];M|=(F&127)<<D,D+=7}while(32>D&&F&128);for(32<D&&(g|=(F&127)>>4),D=3;32>D&&F&128;D+=7)F=A[j++],g|=(F&127)<<D;if(sc(_,j),128>F)_=M>>>0,F=g>>>0,(g=F&2147483648)&&(_=~_+1>>>0,F=~F>>>0,_==0&&(F=F+1>>>0)),_=4294967296*F+(_>>>0);else throw Od();return wn(f,v,g?-_:_),!0},function(g,f,v){f=$s(f,v),f!=null&&(typeof f=="string"&&Du(f),f!=null&&(nc(g.h,8*v),typeof f=="number"?(g=g.h,Dd(f),h2(g,si,He)):(v=Du(f),h2(g.h,v.i,v.h))))}),jL=Wu(function(g,f,v){return g.i!==0?!1:(wn(f,v,$u(g.h)),!0)},function(g,f,v){if(f=$s(f,v),f!=null&&f!=null)if(nc(g.h,8*v),g=g.h,v=f,0<=v)nc(g,v);else{for(f=0;9>f;f++)g.h.push(v&127|128),v>>=7;g.h.push(1)}}),O2=Wu(function(g,f,v){if(g.i!==2)return!1;var _=$u(g.h)>>>0;g=g.h;var M=l2(g,_);if(g=g.i,n0){var D=g,A;(A=Nu)||(A=Nu=new TextDecoder("utf-8",{fatal:!0})),g=M+_,D=M===0&&g===D.length?D:D.subarray(M,g);try{var j=A.decode(D)}catch(Pe){if(Ld===void 0){try{A.decode(new Uint8Array([128]))}catch{}try{A.decode(new Uint8Array([97])),Ld=!0}catch{Ld=!1}}throw!Ld&&(Nu=void 0),Pe}}else{j=M,_=j+_,M=[];for(var F=null,se,oe;j<_;)se=g[j++],128>se?M.push(se):224>se?j>=_?ea():(oe=g[j++],194>se||(oe&192)!==128?(j--,ea()):M.push((se&31)<<6|oe&63)):240>se?j>=_-1?ea():(oe=g[j++],(oe&192)!==128||se===224&&160>oe||se===237&&160<=oe||((D=g[j++])&192)!==128?(j--,ea()):M.push((se&15)<<12|(oe&63)<<6|D&63)):244>=se?j>=_-2?ea():(oe=g[j++],(oe&192)!==128||(se<<28)+(oe-144)>>30!==0||((D=g[j++])&192)!==128||((A=g[j++])&192)!==128?(j--,ea()):(se=(se&7)<<18|(oe&63)<<12|(D&63)<<6|A&63,se-=65536,M.push((se>>10&1023)+55296,(se&1023)+56320))):ea(),8192<=M.length&&(F=Dg(F,M),M.length=0);j=Dg(F,M)}return wn(f,v,j),!0},function(g,f,v){if(f=$s(f,v),f!=null){var _=!1;if(_=_===void 0?!1:_,a0){if(_&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(f))throw Error("Found an unpaired surrogate");f=(Uu||(Uu=new TextEncoder)).encode(f)}else{for(var M=0,D=new Uint8Array(3*f.length),A=0;A<f.length;A++){var j=f.charCodeAt(A);if(128>j)D[M++]=j;else{if(2048>j)D[M++]=j>>6|192;else{if(55296<=j&&57343>=j){if(56319>=j&&A<f.length){var F=f.charCodeAt(++A);if(56320<=F&&57343>=F){j=1024*(j-55296)+F-56320+65536,D[M++]=j>>18|240,D[M++]=j>>12&63|128,D[M++]=j>>6&63|128,D[M++]=j&63|128;continue}else A--}if(_)throw Error("Found an unpaired surrogate");j=65533}D[M++]=j>>12|224,D[M++]=j>>6&63|128}D[M++]=j&63|128}}f=M===D.length?D:D.subarray(0,M)}nc(g.h,8*v+2),nc(g.h,f.length),Nd(g,g.h.end()),Nd(g,f)}}),L2=Wu(function(g,f,v,_,M){if(g.i!==2)return!1;f=b2(f,v,_),v=g.h.j,_=$u(g.h)>>>0;var D=g.h.h+_,A=D-v;if(0>=A&&(g.h.j=D,M(f,g,void 0,void 0,void 0),A=D-g.h.h),A)throw Error("Message parsing ended unexpectedly. Expected to read "+(_+" bytes, instead read "+(_-A)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return g.h.h=D,g.h.j=v,!0},function(g,f,v,_,M){if(f=b0(f,_,v),f!=null)for(_=0;_<f.length;_++){var D=g;nc(D.h,8*v+2);var A=D.h.end();Nd(D,A),A.push(D.i),D=A,M(f[_],g),A=g;var j=D.pop();for(j=A.i+A.h.length()-j;127<j;)D.push(j&127|128),j>>>=7,A.i++;D.push(j),A.i++}});function Gu(g){Mr.call(this,g)}E(Gu,Mr);var N2=[Gu,1,jL,2,zs,3,O2,4,O2];function x0(g){Mr.call(this,g,-1,$L)}E(x0,Mr),x0.prototype.addClassification=function(g,f){return b2(this,1,Gu,g,f),this};var $L=[1],zL=[x0,1,L2,N2];function zg(g){Mr.call(this,g)}E(zg,Mr);var U2=[zg,1,zs,2,zs,3,zs,4,zs,5,zs];function j2(g){Mr.call(this,g,-1,FL)}E(j2,Mr);var FL=[1],VL=[j2,1,L2,U2];function E0(g){Mr.call(this,g)}E(E0,Mr);var $2=[E0,1,zs,2,zs,3,zs,4,zs,5,zs,6,UL];function z2(g,f,v){if(v=g.createShader(v===0?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(v,f),g.compileShader(v),!g.getShaderParameter(v,g.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+g.getShaderInfoLog(v));return v}function BL(g){return b0(g,Gu,1).map(function(f){return{index:Vu($s(f,1),0),qa:_n(f,2),label:$s(f,3)!=null?Vu($s(f,3),""):void 0,displayName:$s(f,4)!=null?Vu($s(f,4),""):void 0}})}function HL(g){return{x:_n(g,1),y:_n(g,2),z:_n(g,3),visibility:y0(g,4)!=null?_n(g,4):void 0}}function T0(g,f){this.i=g,this.h=f,this.m=0}function F2(g,f,v){return WL(g,f),typeof g.h.canvas.transferToImageBitmap=="function"?Promise.resolve(g.h.canvas.transferToImageBitmap()):v?Promise.resolve(g.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(g.h.canvas):(g.j===void 0&&(g.j=document.createElement("canvas")),new Promise(function(_){g.j.height=g.h.canvas.height,g.j.width=g.h.canvas.width,g.j.getContext("2d",{}).drawImage(g.h.canvas,0,0,g.h.canvas.width,g.h.canvas.height),_(g.j)}))}function WL(g,f){var v=g.h;if(g.s===void 0){var _=z2(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),M=z2(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),D=v.createProgram();if(v.attachShader(D,_),v.attachShader(D,M),v.linkProgram(D),!v.getProgramParameter(D,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(D));_=g.s=D,v.useProgram(_),M=v.getUniformLocation(_,"sampler0"),g.l={O:v.getAttribLocation(_,"aVertex"),N:v.getAttribLocation(_,"aTex"),ya:M},g.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,g.v),v.enableVertexAttribArray(g.l.O),v.vertexAttribPointer(g.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),g.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,g.u),v.enableVertexAttribArray(g.l.N),v.vertexAttribPointer(g.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(M,0)}_=g.l,v.useProgram(g.s),v.canvas.width=f.width,v.canvas.height=f.height,v.viewport(0,0,f.width,f.height),v.activeTexture(v.TEXTURE0),g.i.bindTexture2d(f.glName),v.enableVertexAttribArray(_.O),v.bindBuffer(v.ARRAY_BUFFER,g.v),v.vertexAttribPointer(_.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(_.N),v.bindBuffer(v.ARRAY_BUFFER,g.u),v.vertexAttribPointer(_.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(_.O),v.disableVertexAttribArray(_.N),v.bindBuffer(v.ARRAY_BUFFER,null),g.i.bindTexture2d(0)}function GL(g){this.h=g}var qL=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function JL(g,f){return f+g}function V2(g,f){window[g]=f}function KL(g){var f=document.createElement("script");return f.setAttribute("src",g),f.setAttribute("crossorigin","anonymous"),new Promise(function(v){f.addEventListener("load",function(){v()},!1),f.addEventListener("error",function(){v()},!1),document.body.appendChild(f)})}function QL(){return ce(function(g){switch(g.h){case 1:return g.s=2,O(g,WebAssembly.instantiate(qL),4);case 4:g.h=3,g.s=0;break;case 2:return g.s=0,g.l=null,g.return(!1);case 3:return g.return(!0)}})}function C0(g){if(this.h=g,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=g&&g.locateFile||JL,typeof window=="object")var f=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")f=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=f,g.options){f=o(Object.keys(g.options));for(var v=f.next();!v.done;v=f.next()){v=v.value;var _=g.options[v].default;_!==void 0&&(this.l[v]=typeof _=="function"?_():_)}}}t=C0.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function YL(g){var f,v,_,M,D,A,j,F,se,oe,Pe;return ce(function(ve){switch(ve.h){case 1:return g.ga?(f=g.h.files===void 0?[]:typeof g.h.files=="function"?g.h.files(g.l):g.h.files,O(ve,QL(),2)):ve.return();case 2:if(v=ve.i,typeof window=="object")return V2("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),V2("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),A=f.filter(function(de){return de.data!==void 0}),j=f.filter(function(de){return de.data===void 0}),F=Promise.all(A.map(function(de){var Re=Fg(g,de.url);if(de.path!==void 0){var We=de.path;Re=Re.then(function(Lt){return g.overrideFile(We,Lt),Promise.resolve(Lt)})}return Re})),se=Promise.all(j.map(function(de){return de.simd===void 0||de.simd&&v||!de.simd&&!v?KL(g.locateFile(de.url,g.ha)):Promise.resolve()})).then(function(){var de,Re,We;return ce(function(Lt){if(Lt.h==1)return de=window.createMediapipeSolutionsWasm,Re=window.createMediapipeSolutionsPackedAssets,We=g,O(Lt,de(Re),2);We.i=Lt.i,Lt.h=0})}),oe=function(){return ce(function(de){return g.h.graph&&g.h.graph.url?de=O(de,Fg(g,g.h.graph.url),0):(de.h=0,de=void 0),de})}(),O(ve,Promise.all([se,F,oe]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return _=f.filter(function(de){return de.simd===void 0||de.simd&&v||!de.simd&&!v}).map(function(de){return g.locateFile(de.url,g.ha)}),importScripts.apply(null,c(_)),M=g,O(ve,createMediapipeSolutionsWasm(Module),6);case 6:M.i=ve.i,g.m=new OffscreenCanvas(1,1),g.i.canvas=g.m,D=g.i.GL.createContext(g.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),g.i.GL.makeContextCurrent(D),ve.h=4;break;case 7:if(g.m=document.createElement("canvas"),Pe=g.m.getContext("webgl2",{}),!Pe&&(Pe=g.m.getContext("webgl",{}),!Pe))return alert("Failed to create WebGL canvas context when passing video frame."),ve.return();g.K=Pe,g.i.canvas=g.m,g.i.createContext(g.m,!0,!0,{});case 4:g.j=new g.i.SolutionWasm,g.ga=!1,ve.h=0}})}function ZL(g){var f,v,_,M,D,A,j,F;return ce(function(se){if(se.h==1){if(g.h.graph&&g.h.graph.url&&g.fa===g.h.graph.url)return se.return();if(g.u=!0,!g.h.graph||!g.h.graph.url){se.h=2;return}return g.fa=g.h.graph.url,O(se,Fg(g,g.h.graph.url),3)}for(se.h!=2&&(f=se.i,g.j.loadGraph(f)),v=o(Object.keys(g.D)),_=v.next();!_.done;_=v.next())M=_.value,g.j.overrideFile(M,g.D[M]);if(g.D={},g.h.listeners)for(D=o(g.h.listeners),A=D.next();!A.done;A=D.next())j=A.value,i7(g,j);F=g.l,g.l={},g.setOptions(F),se.h=0})}t.reset=function(){var g=this;return ce(function(f){g.j&&(g.j.reset(),g.s={},g.v={}),f.h=0})},t.setOptions=function(g,f){var v=this;if(f=f||this.h.options){for(var _=[],M=[],D={},A=o(Object.keys(g)),j=A.next();!j.done;D={X:D.X,Y:D.Y},j=A.next())if(j=j.value,!(j in this.l&&this.l[j]===g[j])){this.l[j]=g[j];var F=f[j];F!==void 0&&(F.onChange&&(D.X=F.onChange,D.Y=g[j],_.push(function(se){return function(){var oe;return ce(function(Pe){if(Pe.h==1)return O(Pe,se.X(se.Y),2);oe=Pe.i,oe===!0&&(v.u=!0),Pe.h=0})}}(D))),F.graphOptionXref&&(j=Object.assign({},{calculatorName:"",calculatorIndex:0},F.graphOptionXref,{valueNumber:F.type===1?g[j]:0,valueBoolean:F.type===0?g[j]:!1,valueString:F.type===2?g[j]:""}),M.push(j)))}(_.length!==0||M.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(M),this.F=(this.F===void 0?[]:this.F).concat(_))}};function XL(g){var f,v,_,M,D,A,j;return ce(function(F){switch(F.h){case 1:if(!g.u)return F.return();if(!g.F){F.h=2;break}f=o(g.F),v=f.next();case 3:if(v.done){F.h=5;break}return _=v.value,O(F,_(),4);case 4:v=f.next(),F.h=3;break;case 5:g.F=void 0;case 2:if(g.H){for(M=new g.i.GraphOptionChangeRequestList,D=o(g.H),A=D.next();!A.done;A=D.next())j=A.value,M.push_back(j);g.j.changeOptions(M),M.delete(),g.H=void 0}g.u=!1,F.h=0}})}t.initialize=function(){var g=this;return ce(function(f){return f.h==1?O(f,YL(g),2):f.h!=3?O(f,ZL(g),3):O(f,XL(g),0)})};function Fg(g,f){var v,_;return ce(function(M){return f in g.L?M.return(g.L[f]):(v=g.locateFile(f,""),_=fetch(v).then(function(D){return D.arrayBuffer()}),g.L[f]=_,M.return(_))})}t.overrideFile=function(g,f){this.j?this.j.overrideFile(g,f):this.D[g]=f},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(g,f){var v=this,_,M,D,A,j,F,se,oe,Pe;return ce(function(ve){switch(ve.h){case 1:return v.h.inputs?(_=1e3*(f==null?performance.now():f),O(ve,v.I,2)):ve.return();case 2:return O(ve,v.initialize(),3);case 3:for(M=new v.i.PacketDataList,D=o(Object.keys(g)),A=D.next();!A.done;A=D.next())if(j=A.value,F=v.h.inputs[j]){e:{var de=g[j];switch(F.type){case"video":var Re=v.s[F.stream];if(Re||(Re=new T0(v.i,v.K),v.s[F.stream]=Re),Re.m===0&&(Re.m=Re.i.createTexture()),typeof HTMLVideoElement<"u"&&de instanceof HTMLVideoElement)var We=de.videoWidth,Lt=de.videoHeight;else typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement?(We=de.naturalWidth,Lt=de.naturalHeight):(We=de.width,Lt=de.height);Lt={glName:Re.m,width:We,height:Lt},We=Re.h,We.canvas.width=Lt.width,We.canvas.height=Lt.height,We.activeTexture(We.TEXTURE0),Re.i.bindTexture2d(Re.m),We.texImage2D(We.TEXTURE_2D,0,We.RGBA,We.RGBA,We.UNSIGNED_BYTE,de),Re.i.bindTexture2d(0),Re=Lt;break e;case"detections":for(Re=v.s[F.stream],Re||(Re=new GL(v.i),v.s[F.stream]=Re),Re.data||(Re.data=new Re.h.DetectionListData),Re.data.reset(de.length),Lt=0;Lt<de.length;++Lt){We=de[Lt];var Pt=Re.data,Yi=Pt.setBoundingBox,bs=Lt,Dr=We.la,at=new E0;if(kn(at,1,Dr.sa),kn(at,2,Dr.ta),kn(at,3,Dr.height),kn(at,4,Dr.width),kn(at,5,Dr.rotation),wn(at,6,Dr.pa),Dr=S0(at,$2),Yi.call(Pt,bs,Dr),We.ea)for(Pt=0;Pt<We.ea.length;++Pt){at=We.ea[Pt],Yi=Re.data,bs=Yi.addNormalizedLandmark,Dr=Lt,at=Object.assign({},at,{visibility:at.visibility?at.visibility:0});var Zi=new zg;kn(Zi,1,at.x),kn(Zi,2,at.y),kn(Zi,3,at.z),at.visibility&&kn(Zi,4,at.visibility),at=S0(Zi,U2),bs.call(Yi,Dr,at)}if(We.ba)for(Pt=0;Pt<We.ba.length;++Pt)Yi=Re.data,bs=Yi.addClassification,Dr=Lt,at=We.ba[Pt],Zi=new Gu,kn(Zi,2,at.qa),at.index&&wn(Zi,1,at.index),at.label&&wn(Zi,3,at.label),at.displayName&&wn(Zi,4,at.displayName),at=S0(Zi,N2),bs.call(Yi,Dr,at)}Re=Re.data;break e;default:Re={}}}switch(se=Re,oe=F.stream,F.type){case"video":M.pushTexture2d(Object.assign({},se,{stream:oe,timestamp:_}));break;case"detections":Pe=se,Pe.stream=oe,Pe.timestamp=_,M.pushDetectionList(Pe);break;default:throw Error("Unknown input config type: '"+F.type+"'")}}return v.j.send(M),O(ve,v.I,4);case 4:M.delete(),ve.h=0}})};function e7(g,f,v){var _,M,D,A,j,F,se,oe,Pe,ve,de,Re,We,Lt;return ce(function(Pt){switch(Pt.h){case 1:if(!v)return Pt.return(f);for(_={},M=0,D=o(Object.keys(v)),A=D.next();!A.done;A=D.next())j=A.value,F=v[j],typeof F!="string"&&F.type==="texture"&&f[F.stream]!==void 0&&++M;1<M&&(g.M=!1),se=o(Object.keys(v)),A=se.next();case 2:if(A.done){Pt.h=4;break}if(oe=A.value,Pe=v[oe],typeof Pe=="string")return We=_,Lt=oe,O(Pt,t7(g,oe,f[Pe]),14);if(ve=f[Pe.stream],Pe.type==="detection_list"){if(ve){for(var Yi=ve.getRectList(),bs=ve.getLandmarksList(),Dr=ve.getClassificationsList(),at=[],Zi=0;Zi<Yi.size();++Zi){var Ha=_0(Yi.get(Zi),$2),r7=_n(Ha,1),s7=_n(Ha,2),n7=_n(Ha,3),a7=_n(Ha,4),o7=_n(Ha,5,0),Vg=void 0;Vg=Vg===void 0?0:Vg,Ha={la:{sa:r7,ta:s7,height:n7,width:a7,rotation:o7,pa:Vu($s(Ha,6),Vg)},ea:b0(_0(bs.get(Zi),VL),zg,1).map(HL),ba:BL(_0(Dr.get(Zi),zL))},at.push(Ha)}Yi=at}else Yi=[];_[oe]=Yi,Pt.h=7;break}if(Pe.type==="proto_list"){if(ve){for(Yi=Array(ve.size()),bs=0;bs<ve.size();bs++)Yi[bs]=ve.get(bs);ve.delete()}else Yi=[];_[oe]=Yi,Pt.h=7;break}if(ve===void 0){Pt.h=3;break}if(Pe.type==="float_list"){_[oe]=ve,Pt.h=7;break}if(Pe.type==="proto"){_[oe]=ve,Pt.h=7;break}if(Pe.type!=="texture")throw Error("Unknown output config type: '"+Pe.type+"'");return de=g.v[oe],de||(de=new T0(g.i,g.K),g.v[oe]=de),O(Pt,F2(de,ve,g.M),13);case 13:Re=Pt.i,_[oe]=Re;case 7:Pe.transform&&_[oe]&&(_[oe]=Pe.transform(_[oe])),Pt.h=3;break;case 14:We[Lt]=Pt.i;case 3:A=se.next(),Pt.h=2;break;case 4:return Pt.return(_)}})}function t7(g,f,v){var _;return ce(function(M){return typeof v=="number"||v instanceof Uint8Array||v instanceof g.i.Uint8BlobList?M.return(v):v instanceof g.i.Texture2dDataOut?(_=g.v[f],_||(_=new T0(g.i,g.K),g.v[f]=_),M.return(F2(_,v,g.M))):M.return(void 0)})}function i7(g,f){for(var v=f.name||"$",_=[].concat(c(f.wants)),M=new g.i.StringList,D=o(f.wants),A=D.next();!A.done;A=D.next())M.push_back(A.value);D=g.i.PacketListener.implement({onResults:function(j){for(var F={},se=0;se<f.wants.length;++se)F[_[se]]=j.get(se);var oe=g.listeners[v];oe&&(g.I=e7(g,F,f.outs).then(function(Pe){Pe=oe(Pe);for(var ve=0;ve<f.wants.length;++ve){var de=F[_[ve]];typeof de=="object"&&de.hasOwnProperty&&de.hasOwnProperty("delete")&&de.delete()}Pe&&(g.I=Pe)}))}}),g.j.attachMultiListener(M,D),M.delete()}t.onResults=function(g,f){this.listeners[f||"$"]=g},Ot("Solution",C0),Ot("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function B2(g){switch(g===void 0&&(g=0),g){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function H2(g){var f=this;g=g||{},this.h=new C0({locateFile:g.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:B2(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var _,M,D;return ce(function(A){return A.h==1?(_=B2(v),M="third_party/mediapipe/modules/selfie_segmentation/"+_,O(A,Fg(f.h,_),2)):(D=A.i,f.h.overrideFile(M,D),A.return(!0))})}}}})}t=H2.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(g){this.h.onResults(g)},t.initialize=function(){var g=this;return ce(function(f){return O(f,g.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(g){var f=this;return ce(function(v){return O(v,f.h.send(g),0)})},t.setOptions=function(g){this.h.setOptions(g)},Ot("SelfieSegmentation",H2),Ot("VERSION","0.1.1671057942")}).call(h1);var Vpe=SelfieSegmentation;const fL=(t={modelSelection:1})=>{const e=new Vpe({locateFile:i=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${i}`});return e.setOptions(t),e},Bpe=t=>new Promise((e,i)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i,r.src=t,r.crossOrigin="anonymous"}),vL=class extends mL{constructor(t){super(),zo(this,Kh,void 0),zo(this,zc,void 0),zo(this,Nf,void 0),Fo(this,Kh,t),Fo(this,zc,document.createElement("canvas")),Fo(this,Nf,hr(this,zc).getContext("2d"))}static async init(){const t=fL();return await t.initialize(),new vL(t)}async createStaticBackgroundImageVideoMiddleware(t){const e=await Bpe(t);let i;return()=>(hr(this,Kh).onResults(r=>{i=r}),async(r,s)=>{hr(this,zc).width=r.width,hr(this,zc).height=r.height,hr(this,Nf).drawImage(r,0,0),hr(this,Kh).send({image:hr(this,zc)}),i&&(s.save(),s.clearRect(0,0,r.width,r.height),s.globalCompositeOperation="copy",s.filter="blur(2px)",s.drawImage(i.segmentationMask,0,0,r.width,r.height),s.globalCompositeOperation="source-in",s.filter="none",s.drawImage(i.image,0,0,r.width,r.height),s.globalCompositeOperation="destination-atop",s.drawImage(e,0,0,r.width,r.height),s.restore())})}};let Hpe=vL;Kh=new WeakMap;zc=new WeakMap;Nf=new WeakMap;const yL=class extends mL{constructor(t){super(),zo(this,Qh,void 0),zo(this,Fc,void 0),zo(this,Uf,void 0),Fo(this,Qh,t),Fo(this,Fc,document.createElement("canvas")),Fo(this,Uf,hr(this,Fc).getContext("2d"))}static async init(){const t=fL();return await t.initialize(),new yL(t)}createBackgroundBlurVideoMiddleware(t){let e;if(t<0)throw Error(`Blur Length must be 0 or more, received: ${t}`);return()=>(hr(this,Qh).onResults(i=>{e=i}),async(i,r)=>{hr(this,Fc).width=i.width,hr(this,Fc).height=i.height,hr(this,Uf).drawImage(i,0,0),hr(this,Qh).send({image:hr(this,Fc)}),e&&(r.save(),r.drawImage(e.image,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.segmentationMask,0,0,i.width,i.height),r.filter=`blur(${t}px)`,r.globalCompositeOperation="destination-over",r.drawImage(e.image,0,0,i.width,i.height),r.restore())})}};let Wpe=yL;Qh=new WeakMap;Fc=new WeakMap;Uf=new WeakMap;const bL=class{constructor(t,e){zo(this,jf,void 0),zo(this,$f,void 0),Fo(this,jf,t),Fo(this,$f,e)}static async init(){return this.isSupported()||console.error("Initialising it in an unsupported environment, the middleware might not work"),window.addEventListener("error",t=>{var e;!((e=t.filename)!=null&&e.includes("localhost"))&&t.lineno!==0&&console.error("DyteVideoBackgroundTransformer::UnhandledError",t.error)}),window.addEventListener("unhandledrejection",t=>{console.error("DyteVideoBackgroundTransformer::UnhandledRejection",t.reason)}),new bL(await Hpe.init(),await Wpe.init())}static isSupported(){let t=!1;try{const e=Fpe.getParser(window.navigator.userAgent),i=document.createElement("canvas");if(!(i.getContext("webgl2",{})||i.getContext("webgl",{}))||e.getBrowserName()==="Safari")return!1;t=!0}catch{t=!1}return t}async createStaticBackgroundVideoMiddleware(t){return await hr(this,jf).createStaticBackgroundImageVideoMiddleware(t)}async createBackgroundBlurVideoMiddleware(t=4){return hr(this,$f).createBackgroundBlurVideoMiddleware(t)}};let Gpe=bL;jf=new WeakMap;$f=new WeakMap;function qpe(){const[t,e]=Lpe();return Ca.exports.useEffect(()=>{const r=new URL(window.location.href).searchParams.get("authToken");if(!r){alert("An authToken wasn't passed, please pass an authToken in the URL query to join a meeting.");return}e({authToken:r}).then(async s=>{window.meeting=s;const n=await Gpe.init();s.self.addVideoMiddleware(await n.createBackgroundBlurVideoMiddleware(10))})},[]),A_(VW,{meeting:t})}p1.createRoot(document.getElementById("root")).render(A_(qpe,{}));
