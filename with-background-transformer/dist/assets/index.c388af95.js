var U6=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Xhe=U6((qe,Je)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var rT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A1={},bR={exports:{}},rn={},aa={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh=Symbol.for("react.element"),j6=Symbol.for("react.portal"),$6=Symbol.for("react.fragment"),F6=Symbol.for("react.strict_mode"),B6=Symbol.for("react.profiler"),V6=Symbol.for("react.provider"),z6=Symbol.for("react.context"),H6=Symbol.for("react.forward_ref"),G6=Symbol.for("react.suspense"),W6=Symbol.for("react.memo"),q6=Symbol.for("react.lazy"),nT=Symbol.iterator;function J6(e){return e===null||typeof e!="object"?null:(e=nT&&e[nT]||e["@@iterator"],typeof e=="function"?e:null)}var _R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wR=Object.assign,SR={};function Ml(e,t,i){this.props=e,this.context=t,this.refs=SR,this.updater=i||_R}Ml.prototype.isReactComponent={};Ml.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ml.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ER(){}ER.prototype=Ml.prototype;function Z_(e,t,i){this.props=e,this.context=t,this.refs=SR,this.updater=i||_R}var X_=Z_.prototype=new ER;X_.constructor=Z_;wR(X_,Ml.prototype);X_.isPureReactComponent=!0;var sT=Array.isArray,TR=Object.prototype.hasOwnProperty,ew={current:null},kR={key:!0,ref:!0,__self:!0,__source:!0};function PR(e,t,i){var r,n={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)TR.call(t,r)&&!kR.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(o===1)n.children=i;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:yh,type:e,key:s,ref:a,props:n,_owner:ew.current}}function K6(e,t){return{$$typeof:yh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tw(e){return typeof e=="object"&&e!==null&&e.$$typeof===yh}function Y6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var aT=/\/+/g;function My(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Y6(""+e.key):t.toString(36)}function Kg(e,t,i,r,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case yh:case j6:a=!0}}if(a)return a=e,n=n(a),e=r===""?"."+My(a,0):r,sT(n)?(i="",e!=null&&(i=e.replace(aT,"$&/")+"/"),Kg(n,t,i,"",function(d){return d})):n!=null&&(tw(n)&&(n=K6(n,i+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(aT,"$&/")+"/")+e)),t.push(n)),1;if(a=0,r=r===""?".":r+":",sT(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+My(s,o);a+=Kg(s,t,i,c,n)}else if(c=J6(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+My(s,o++),a+=Kg(s,t,i,c,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function rg(e,t,i){if(e==null)return e;var r=[],n=0;return Kg(e,r,"","",function(s){return t.call(i,s,n++)}),r}function Q6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var br={current:null},Yg={transition:null},Z6={ReactCurrentDispatcher:br,ReactCurrentBatchConfig:Yg,ReactCurrentOwner:ew};Qe.Children={map:rg,forEach:function(e,t,i){rg(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return rg(e,function(){t++}),t},toArray:function(e){return rg(e,function(t){return t})||[]},only:function(e){if(!tw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=Ml;Qe.Fragment=$6;Qe.Profiler=B6;Qe.PureComponent=Z_;Qe.StrictMode=F6;Qe.Suspense=G6;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z6;Qe.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wR({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=ew.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)TR.call(t,c)&&!kR.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=i;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:yh,type:e.type,key:n,ref:s,props:r,_owner:a}};Qe.createContext=function(e){return e={$$typeof:z6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:V6,_context:e},e.Consumer=e};Qe.createElement=PR;Qe.createFactory=function(e){var t=PR.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:H6,render:e}};Qe.isValidElement=tw;Qe.lazy=function(e){return{$$typeof:q6,_payload:{_status:-1,_result:e},_init:Q6}};Qe.memo=function(e,t){return{$$typeof:W6,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=Yg.transition;Yg.transition={};try{e()}finally{Yg.transition=t}};Qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Qe.useCallback=function(e,t){return br.current.useCallback(e,t)};Qe.useContext=function(e){return br.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return br.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return br.current.useEffect(e,t)};Qe.useId=function(){return br.current.useId()};Qe.useImperativeHandle=function(e,t,i){return br.current.useImperativeHandle(e,t,i)};Qe.useInsertionEffect=function(e,t){return br.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return br.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return br.current.useMemo(e,t)};Qe.useReducer=function(e,t,i){return br.current.useReducer(e,t,i)};Qe.useRef=function(e){return br.current.useRef(e)};Qe.useState=function(e){return br.current.useState(e)};Qe.useSyncExternalStore=function(e,t,i){return br.current.useSyncExternalStore(e,t,i)};Qe.useTransition=function(){return br.current.useTransition()};Qe.version="18.2.0";(function(e){e.exports=Qe})(aa);const iw=yR(aa.exports);var CR={exports:{}},RR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,re){var pe=H.length;H.push(re);e:for(;0<pe;){var He=pe-1>>>1,wt=H[He];if(0<n(wt,re))H[He]=re,H[pe]=wt,pe=He;else break e}}function i(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var re=H[0],pe=H.pop();if(pe!==re){H[0]=pe;e:for(var He=0,wt=H.length,Vt=wt>>>1;He<Vt;){var kt=2*(He+1)-1,Er=H[kt],ri=kt+1,Br=H[ri];if(0>n(Er,pe))ri<wt&&0>n(Br,Er)?(H[He]=Br,H[ri]=pe,He=ri):(H[He]=Er,H[kt]=pe,He=kt);else if(ri<wt&&0>n(Br,pe))H[He]=Br,H[ri]=pe,He=ri;else break e}}return re}function n(H,re){var pe=H.sortIndex-re.sortIndex;return pe!==0?pe:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],d=[],l=1,u=null,f=3,y=!1,b=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(H){for(var re=i(d);re!==null;){if(re.callback===null)r(d);else if(re.startTime<=H)r(d),re.sortIndex=re.expirationTime,t(c,re);else break;re=i(d)}}function D(H){if(k=!1,R(H),!b)if(i(c)!==null)b=!0,dr(V);else{var re=i(d);re!==null&&sn(D,re.startTime-H)}}function V(H,re){b=!1,k&&(k=!1,w(q),q=-1),y=!0;var pe=f;try{for(R(re),u=i(c);u!==null&&(!(u.expirationTime>re)||H&&!he());){var He=u.callback;if(typeof He=="function"){u.callback=null,f=u.priorityLevel;var wt=He(u.expirationTime<=re);re=e.unstable_now(),typeof wt=="function"?u.callback=wt:u===i(c)&&r(c),R(re)}else r(c);u=i(c)}if(u!==null)var Vt=!0;else{var kt=i(d);kt!==null&&sn(D,kt.startTime-re),Vt=!1}return Vt}finally{u=null,f=pe,y=!1}}var B=!1,W=null,q=-1,fe=5,ae=-1;function he(){return!(e.unstable_now()-ae<fe)}function tt(){if(W!==null){var H=e.unstable_now();ae=H;var re=!0;try{re=W(!0,H)}finally{re?ht():(B=!1,W=null)}}else B=!1}var ht;if(typeof E=="function")ht=function(){E(tt)};else if(typeof MessageChannel<"u"){var ii=new MessageChannel,Sr=ii.port2;ii.port1.onmessage=tt,ht=function(){Sr.postMessage(null)}}else ht=function(){P(tt,0)};function dr(H){W=H,B||(B=!0,ht())}function sn(H,re){q=P(function(){H(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,dr(V))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var pe=f;f=re;try{return H()}finally{f=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var pe=f;f=H;try{return re()}finally{f=pe}},e.unstable_scheduleCallback=function(H,re,pe){var He=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?He+pe:He):pe=He,H){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=pe+wt,H={id:l++,callback:re,priorityLevel:H,startTime:pe,expirationTime:wt,sortIndex:-1},pe>He?(H.sortIndex=pe,t(d,H),i(c)===null&&H===i(d)&&(k?(w(q),q=-1):k=!0,sn(D,pe-He))):(H.sortIndex=wt,t(c,H),b||y||(b=!0,dr(V))),H},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(H){var re=f;return function(){var pe=f;f=re;try{return H.apply(this,arguments)}finally{f=pe}}}})(RR);(function(e){e.exports=RR})(CR);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR=aa.exports,en=CR.exports;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AR=new Set,jp={};function Hc(e,t){bl(e,t),bl(e+"Capture",t)}function bl(e,t){for(jp[e]=t,e=0;e<t.length;e++)AR.add(t[e])}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I1=Object.prototype.hasOwnProperty,X6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oT={},cT={};function e4(e){return I1.call(cT,e)?!0:I1.call(oT,e)?!1:X6.test(e)?cT[e]=!0:(oT[e]=!0,!1)}function t4(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function i4(e,t,i,r){if(t===null||typeof t>"u"||t4(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,i,r,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ki[e]=new _r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ki[t]=new _r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ki[e]=new _r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ki[e]=new _r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ki[e]=new _r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ki[e]=new _r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ki[e]=new _r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ki[e]=new _r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ki[e]=new _r(e,5,!1,e.toLowerCase(),null,!1,!1)});var rw=/[\-:]([a-z])/g;function nw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rw,nw);Ki[t]=new _r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rw,nw);Ki[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rw,nw);Ki[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ki[e]=new _r(e,1,!1,e.toLowerCase(),null,!1,!1)});Ki.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ki[e]=new _r(e,1,!1,e.toLowerCase(),null,!0,!0)});function sw(e,t,i,r){var n=Ki.hasOwnProperty(t)?Ki[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(i4(t,i,n,r)&&(i=null),r||n===null?e4(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var fa=xR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ng=Symbol.for("react.element"),Fd=Symbol.for("react.portal"),Bd=Symbol.for("react.fragment"),aw=Symbol.for("react.strict_mode"),O1=Symbol.for("react.profiler"),IR=Symbol.for("react.provider"),OR=Symbol.for("react.context"),ow=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),D1=Symbol.for("react.suspense_list"),cw=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),MR=Symbol.for("react.offscreen"),dT=Symbol.iterator;function mu(e){return e===null||typeof e!="object"?null:(e=dT&&e[dT]||e["@@iterator"],typeof e=="function"?e:null)}var Jt=Object.assign,Dy;function Yu(e){if(Dy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Dy=t&&t[1]||""}return`
`+Dy+e}var Ly=!1;function Ny(e,t){if(!e||Ly)return"";Ly=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),s=r.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var c=`
`+n[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{Ly=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Yu(e):""}function r4(e){switch(e.tag){case 5:return Yu(e.type);case 16:return Yu("Lazy");case 13:return Yu("Suspense");case 19:return Yu("SuspenseList");case 0:case 2:case 15:return e=Ny(e.type,!1),e;case 11:return e=Ny(e.type.render,!1),e;case 1:return e=Ny(e.type,!0),e;default:return""}}function L1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bd:return"Fragment";case Fd:return"Portal";case O1:return"Profiler";case aw:return"StrictMode";case M1:return"Suspense";case D1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case OR:return(e.displayName||"Context")+".Consumer";case IR:return(e._context.displayName||"Context")+".Provider";case ow:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cw:return t=e.displayName||null,t!==null?t:L1(e.type)||"Memo";case za:t=e._payload,e=e._init;try{return L1(e(t))}catch{}}return null}function n4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L1(t);case 8:return t===aw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function DR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s4(e){var t=DR(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sg(e){e._valueTracker||(e._valueTracker=s4(e))}function LR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=DR(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function Hf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function N1(e,t){var i=t.checked;return Jt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function lT(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=yo(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function NR(e,t){t=t.checked,t!=null&&sw(e,"checked",t,!1)}function U1(e,t){NR(e,t);var i=yo(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?j1(e,t.type,i):t.hasOwnProperty("defaultValue")&&j1(e,t.type,yo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uT(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function j1(e,t,i){(t!=="number"||Hf(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Qu=Array.isArray;function tl(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+yo(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function $1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Jt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pT(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(se(92));if(Qu(i)){if(1<i.length)throw Error(se(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:yo(i)}}function UR(e,t){var i=yo(t.value),r=yo(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function hT(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ag,$R=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ag=ag||document.createElement("div"),ag.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ag.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $p(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var vp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a4=["Webkit","ms","Moz","O"];Object.keys(vp).forEach(function(e){a4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vp[t]=vp[e]})});function FR(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||vp.hasOwnProperty(e)&&vp[e]?(""+t).trim():t+"px"}function BR(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=FR(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var o4=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B1(e,t){if(t){if(o4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function V1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z1=null;function dw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var H1=null,il=null,rl=null;function gT(e){if(e=wh(e)){if(typeof H1!="function")throw Error(se(280));var t=e.stateNode;t&&(t=av(t),H1(e.stateNode,e.type,t))}}function VR(e){il?rl?rl.push(e):rl=[e]:il=e}function zR(){if(il){var e=il,t=rl;if(rl=il=null,gT(e),t)for(e=0;e<t.length;e++)gT(t[e])}}function HR(e,t){return e(t)}function GR(){}var Uy=!1;function WR(e,t,i){if(Uy)return e(t,i);Uy=!0;try{return HR(e,t,i)}finally{Uy=!1,(il!==null||rl!==null)&&(GR(),zR())}}function Fp(e,t){var i=e.stateNode;if(i===null)return null;var r=av(i);if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(se(231,t,typeof i));return i}var G1=!1;if(oa)try{var vu={};Object.defineProperty(vu,"passive",{get:function(){G1=!0}}),window.addEventListener("test",vu,vu),window.removeEventListener("test",vu,vu)}catch{G1=!1}function c4(e,t,i,r,n,s,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(i,d)}catch(l){this.onError(l)}}var yp=!1,Gf=null,Wf=!1,W1=null,d4={onError:function(e){yp=!0,Gf=e}};function l4(e,t,i,r,n,s,a,o,c){yp=!1,Gf=null,c4.apply(d4,arguments)}function u4(e,t,i,r,n,s,a,o,c){if(l4.apply(this,arguments),yp){if(yp){var d=Gf;yp=!1,Gf=null}else throw Error(se(198));Wf||(Wf=!0,W1=d)}}function Gc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function qR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fT(e){if(Gc(e)!==e)throw Error(se(188))}function p4(e){var t=e.alternate;if(!t){if(t=Gc(e),t===null)throw Error(se(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return fT(n),e;if(s===r)return fT(n),t;s=s.sibling}throw Error(se(188))}if(i.return!==r.return)i=n,r=s;else{for(var a=!1,o=n.child;o;){if(o===i){a=!0,i=n,r=s;break}if(o===r){a=!0,r=n,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,r=n;break}if(o===r){a=!0,r=s,i=n;break}o=o.sibling}if(!a)throw Error(se(189))}}if(i.alternate!==r)throw Error(se(190))}if(i.tag!==3)throw Error(se(188));return i.stateNode.current===i?e:t}function JR(e){return e=p4(e),e!==null?KR(e):null}function KR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=KR(e);if(t!==null)return t;e=e.sibling}return null}var YR=en.unstable_scheduleCallback,mT=en.unstable_cancelCallback,h4=en.unstable_shouldYield,g4=en.unstable_requestPaint,ui=en.unstable_now,f4=en.unstable_getCurrentPriorityLevel,lw=en.unstable_ImmediatePriority,QR=en.unstable_UserBlockingPriority,qf=en.unstable_NormalPriority,m4=en.unstable_LowPriority,ZR=en.unstable_IdlePriority,iv=null,Ps=null;function v4(e){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(iv,e,void 0,(e.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:_4,y4=Math.log,b4=Math.LN2;function _4(e){return e>>>=0,e===0?32:31-(y4(e)/b4|0)|0}var og=64,cg=4194304;function Zu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jf(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,a=i&268435455;if(a!==0){var o=a&~n;o!==0?r=Zu(o):(s&=a,s!==0&&(r=Zu(s)))}else a=i&~n,a!==0?r=Zu(a):s!==0&&(r=Zu(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&n)===0&&(n=r&-r,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-Kn(t),n=1<<i,r|=e[i],t&=~n;return r}function w4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S4(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Kn(s),o=1<<a,c=n[a];c===-1?((o&i)===0||(o&r)!==0)&&(n[a]=w4(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function q1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XR(){var e=og;return og<<=1,(og&4194240)===0&&(og=64),e}function jy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function bh(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kn(t),e[t]=i}function E4(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-Kn(i),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~s}}function uw(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Kn(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var ft=0;function ex(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var tx,pw,ix,rx,nx,J1=!1,dg=[],no=null,so=null,ao=null,Bp=new Map,Vp=new Map,qa=[],T4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vT(e,t){switch(e){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Bp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vp.delete(t.pointerId)}}function yu(e,t,i,r,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},t!==null&&(t=wh(t),t!==null&&pw(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function k4(e,t,i,r,n){switch(t){case"focusin":return no=yu(no,e,t,i,r,n),!0;case"dragenter":return so=yu(so,e,t,i,r,n),!0;case"mouseover":return ao=yu(ao,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return Bp.set(s,yu(Bp.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Vp.set(s,yu(Vp.get(s)||null,e,t,i,r,n)),!0}return!1}function sx(e){var t=bc(e.target);if(t!==null){var i=Gc(t);if(i!==null){if(t=i.tag,t===13){if(t=qR(i),t!==null){e.blockedOn=t,nx(e.priority,function(){ix(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=K1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);z1=r,i.target.dispatchEvent(r),z1=null}else return t=wh(i),t!==null&&pw(t),e.blockedOn=i,!1;t.shift()}return!0}function yT(e,t,i){Qg(e)&&i.delete(t)}function P4(){J1=!1,no!==null&&Qg(no)&&(no=null),so!==null&&Qg(so)&&(so=null),ao!==null&&Qg(ao)&&(ao=null),Bp.forEach(yT),Vp.forEach(yT)}function bu(e,t){e.blockedOn===t&&(e.blockedOn=null,J1||(J1=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,P4)))}function zp(e){function t(n){return bu(n,e)}if(0<dg.length){bu(dg[0],e);for(var i=1;i<dg.length;i++){var r=dg[i];r.blockedOn===e&&(r.blockedOn=null)}}for(no!==null&&bu(no,e),so!==null&&bu(so,e),ao!==null&&bu(ao,e),Bp.forEach(t),Vp.forEach(t),i=0;i<qa.length;i++)r=qa[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<qa.length&&(i=qa[0],i.blockedOn===null);)sx(i),i.blockedOn===null&&qa.shift()}var nl=fa.ReactCurrentBatchConfig,Kf=!0;function C4(e,t,i,r){var n=ft,s=nl.transition;nl.transition=null;try{ft=1,hw(e,t,i,r)}finally{ft=n,nl.transition=s}}function R4(e,t,i,r){var n=ft,s=nl.transition;nl.transition=null;try{ft=4,hw(e,t,i,r)}finally{ft=n,nl.transition=s}}function hw(e,t,i,r){if(Kf){var n=K1(e,t,i,r);if(n===null)Jy(e,t,r,Yf,i),vT(e,r);else if(k4(n,e,t,i,r))r.stopPropagation();else if(vT(e,r),t&4&&-1<T4.indexOf(e)){for(;n!==null;){var s=wh(n);if(s!==null&&tx(s),s=K1(e,t,i,r),s===null&&Jy(e,t,r,Yf,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else Jy(e,t,r,null,i)}}var Yf=null;function K1(e,t,i,r){if(Yf=null,e=dw(r),e=bc(e),e!==null)if(t=Gc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=qR(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yf=e,null}function ax(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f4()){case lw:return 1;case QR:return 4;case qf:case m4:return 16;case ZR:return 536870912;default:return 16}default:return 16}}var eo=null,gw=null,Zg=null;function ox(){if(Zg)return Zg;var e,t=gw,i=t.length,r,n="value"in eo?eo.value:eo.textContent,s=n.length;for(e=0;e<i&&t[e]===n[e];e++);var a=i-e;for(r=1;r<=a&&t[i-r]===n[s-r];r++);return Zg=n.slice(e,1<r?1-r:void 0)}function Xg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lg(){return!0}function bT(){return!1}function nn(e){function t(i,r,n,s,a){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lg:bT,this.isPropagationStopped=bT,this}return Jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),t}var Dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fw=nn(Dl),_h=Jt({},Dl,{view:0,detail:0}),x4=nn(_h),$y,Fy,_u,rv=Jt({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_u&&(_u&&e.type==="mousemove"?($y=e.screenX-_u.screenX,Fy=e.screenY-_u.screenY):Fy=$y=0,_u=e),$y)},movementY:function(e){return"movementY"in e?e.movementY:Fy}}),_T=nn(rv),A4=Jt({},rv,{dataTransfer:0}),I4=nn(A4),O4=Jt({},_h,{relatedTarget:0}),By=nn(O4),M4=Jt({},Dl,{animationName:0,elapsedTime:0,pseudoElement:0}),D4=nn(M4),L4=Jt({},Dl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N4=nn(L4),U4=Jt({},Dl,{data:0}),wT=nn(U4),j4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F4[e])?!!t[e]:!1}function mw(){return B4}var V4=Jt({},_h,{key:function(e){if(e.key){var t=j4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mw,charCode:function(e){return e.type==="keypress"?Xg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),z4=nn(V4),H4=Jt({},rv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ST=nn(H4),G4=Jt({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mw}),W4=nn(G4),q4=Jt({},Dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),J4=nn(q4),K4=Jt({},rv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y4=nn(K4),Q4=[9,13,27,32],vw=oa&&"CompositionEvent"in window,bp=null;oa&&"documentMode"in document&&(bp=document.documentMode);var Z4=oa&&"TextEvent"in window&&!bp,cx=oa&&(!vw||bp&&8<bp&&11>=bp),ET=String.fromCharCode(32),TT=!1;function dx(e,t){switch(e){case"keyup":return Q4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vd=!1;function X4(e,t){switch(e){case"compositionend":return lx(t);case"keypress":return t.which!==32?null:(TT=!0,ET);case"textInput":return e=t.data,e===ET&&TT?null:e;default:return null}}function eN(e,t){if(Vd)return e==="compositionend"||!vw&&dx(e,t)?(e=ox(),Zg=gw=eo=null,Vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cx&&t.locale!=="ko"?null:t.data;default:return null}}var tN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tN[e.type]:t==="textarea"}function ux(e,t,i,r){VR(r),t=Qf(t,"onChange"),0<t.length&&(i=new fw("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var _p=null,Hp=null;function iN(e){Sx(e,0)}function nv(e){var t=Gd(e);if(LR(t))return e}function rN(e,t){if(e==="change")return t}var px=!1;if(oa){var Vy;if(oa){var zy="oninput"in document;if(!zy){var PT=document.createElement("div");PT.setAttribute("oninput","return;"),zy=typeof PT.oninput=="function"}Vy=zy}else Vy=!1;px=Vy&&(!document.documentMode||9<document.documentMode)}function CT(){_p&&(_p.detachEvent("onpropertychange",hx),Hp=_p=null)}function hx(e){if(e.propertyName==="value"&&nv(Hp)){var t=[];ux(t,Hp,e,dw(e)),WR(iN,t)}}function nN(e,t,i){e==="focusin"?(CT(),_p=t,Hp=i,_p.attachEvent("onpropertychange",hx)):e==="focusout"&&CT()}function sN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nv(Hp)}function aN(e,t){if(e==="click")return nv(t)}function oN(e,t){if(e==="input"||e==="change")return nv(t)}function cN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xn=typeof Object.is=="function"?Object.is:cN;function Gp(e,t){if(Xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!I1.call(t,n)||!Xn(e[n],t[n]))return!1}return!0}function RT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xT(e,t){var i=RT(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=RT(i)}}function gx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fx(){for(var e=window,t=Hf();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Hf(e.document)}return t}function yw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dN(e){var t=fx(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&gx(i.ownerDocument.documentElement,i)){if(r!==null&&yw(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=xT(i,s);var a=xT(i,r);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lN=oa&&"documentMode"in document&&11>=document.documentMode,zd=null,Y1=null,wp=null,Q1=!1;function AT(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Q1||zd==null||zd!==Hf(r)||(r=zd,"selectionStart"in r&&yw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wp&&Gp(wp,r)||(wp=r,r=Qf(Y1,"onSelect"),0<r.length&&(t=new fw("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=zd)))}function ug(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Hd={animationend:ug("Animation","AnimationEnd"),animationiteration:ug("Animation","AnimationIteration"),animationstart:ug("Animation","AnimationStart"),transitionend:ug("Transition","TransitionEnd")},Hy={},mx={};oa&&(mx=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function sv(e){if(Hy[e])return Hy[e];if(!Hd[e])return e;var t=Hd[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in mx)return Hy[e]=t[i];return e}var vx=sv("animationend"),yx=sv("animationiteration"),bx=sv("animationstart"),_x=sv("transitionend"),wx=new Map,IT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(e,t){wx.set(e,t),Hc(t,[e])}for(var Gy=0;Gy<IT.length;Gy++){var Wy=IT[Gy],uN=Wy.toLowerCase(),pN=Wy[0].toUpperCase()+Wy.slice(1);To(uN,"on"+pN)}To(vx,"onAnimationEnd");To(yx,"onAnimationIteration");To(bx,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(_x,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);Hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function OT(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,u4(r,t,void 0,e),e.currentTarget=null}function Sx(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==s&&n.isPropagationStopped())break e;OT(n,o,d),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==s&&n.isPropagationStopped())break e;OT(n,o,d),s=c}}}if(Wf)throw e=W1,Wf=!1,W1=null,e}function Mt(e,t){var i=t[ib];i===void 0&&(i=t[ib]=new Set);var r=e+"__bubble";i.has(r)||(Ex(t,e,2,!1),i.add(r))}function qy(e,t,i){var r=0;t&&(r|=4),Ex(i,e,r,t)}var pg="_reactListening"+Math.random().toString(36).slice(2);function Wp(e){if(!e[pg]){e[pg]=!0,AR.forEach(function(i){i!=="selectionchange"&&(hN.has(i)||qy(i,!1,e),qy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pg]||(t[pg]=!0,qy("selectionchange",!1,t))}}function Ex(e,t,i,r){switch(ax(t)){case 1:var n=C4;break;case 4:n=R4;break;default:n=hw}i=n.bind(null,t,i,e),n=void 0,!G1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function Jy(e,t,i,r,n){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;o!==null;){if(a=bc(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}WR(function(){var d=s,l=dw(i),u=[];e:{var f=wx.get(e);if(f!==void 0){var y=fw,b=e;switch(e){case"keypress":if(Xg(i)===0)break e;case"keydown":case"keyup":y=z4;break;case"focusin":b="focus",y=By;break;case"focusout":b="blur",y=By;break;case"beforeblur":case"afterblur":y=By;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_T;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=I4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=W4;break;case vx:case yx:case bx:y=D4;break;case _x:y=J4;break;case"scroll":y=x4;break;case"wheel":y=Y4;break;case"copy":case"cut":case"paste":y=N4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ST}var k=(t&4)!==0,P=!k&&e==="scroll",w=k?f!==null?f+"Capture":null:f;k=[];for(var E=d,R;E!==null;){R=E;var D=R.stateNode;if(R.tag===5&&D!==null&&(R=D,w!==null&&(D=Fp(E,w),D!=null&&k.push(qp(E,D,R)))),P)break;E=E.return}0<k.length&&(f=new y(f,b,null,i,l),u.push({event:f,listeners:k}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&i!==z1&&(b=i.relatedTarget||i.fromElement)&&(bc(b)||b[ca]))break e;if((y||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,y?(b=i.relatedTarget||i.toElement,y=d,b=b?bc(b):null,b!==null&&(P=Gc(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(k=_T,D="onMouseLeave",w="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(k=ST,D="onPointerLeave",w="onPointerEnter",E="pointer"),P=y==null?f:Gd(y),R=b==null?f:Gd(b),f=new k(D,E+"leave",y,i,l),f.target=P,f.relatedTarget=R,D=null,bc(l)===d&&(k=new k(w,E+"enter",b,i,l),k.target=R,k.relatedTarget=P,D=k),P=D,y&&b)t:{for(k=y,w=b,E=0,R=k;R;R=ad(R))E++;for(R=0,D=w;D;D=ad(D))R++;for(;0<E-R;)k=ad(k),E--;for(;0<R-E;)w=ad(w),R--;for(;E--;){if(k===w||w!==null&&k===w.alternate)break t;k=ad(k),w=ad(w)}k=null}else k=null;y!==null&&MT(u,f,y,k,!1),b!==null&&P!==null&&MT(u,P,b,k,!0)}}e:{if(f=d?Gd(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var V=rN;else if(kT(f))if(px)V=oN;else{V=sN;var B=nN}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(V=aN);if(V&&(V=V(e,d))){ux(u,V,i,l);break e}B&&B(e,f,d),e==="focusout"&&(B=f._wrapperState)&&B.controlled&&f.type==="number"&&j1(f,"number",f.value)}switch(B=d?Gd(d):window,e){case"focusin":(kT(B)||B.contentEditable==="true")&&(zd=B,Y1=d,wp=null);break;case"focusout":wp=Y1=zd=null;break;case"mousedown":Q1=!0;break;case"contextmenu":case"mouseup":case"dragend":Q1=!1,AT(u,i,l);break;case"selectionchange":if(lN)break;case"keydown":case"keyup":AT(u,i,l)}var W;if(vw)e:{switch(e){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else Vd?dx(e,i)&&(q="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(q="onCompositionStart");q&&(cx&&i.locale!=="ko"&&(Vd||q!=="onCompositionStart"?q==="onCompositionEnd"&&Vd&&(W=ox()):(eo=l,gw="value"in eo?eo.value:eo.textContent,Vd=!0)),B=Qf(d,q),0<B.length&&(q=new wT(q,e,null,i,l),u.push({event:q,listeners:B}),W?q.data=W:(W=lx(i),W!==null&&(q.data=W)))),(W=Z4?X4(e,i):eN(e,i))&&(d=Qf(d,"onBeforeInput"),0<d.length&&(l=new wT("onBeforeInput","beforeinput",null,i,l),u.push({event:l,listeners:d}),l.data=W))}Sx(u,t)})}function qp(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Qf(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Fp(e,i),s!=null&&r.unshift(qp(e,s,n)),s=Fp(e,t),s!=null&&r.push(qp(e,s,n))),e=e.return}return r}function ad(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function MT(e,t,i,r,n){for(var s=t._reactName,a=[];i!==null&&i!==r;){var o=i,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,n?(c=Fp(i,s),c!=null&&a.unshift(qp(i,c,o))):n||(c=Fp(i,s),c!=null&&a.push(qp(i,c,o)))),i=i.return}a.length!==0&&e.push({event:t,listeners:a})}var gN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function DT(e){return(typeof e=="string"?e:""+e).replace(gN,`
`).replace(fN,"")}function hg(e,t,i){if(t=DT(t),DT(e)!==t&&i)throw Error(se(425))}function Zf(){}var Z1=null,X1=null;function eb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tb=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,LT=typeof Promise=="function"?Promise:void 0,vN=typeof queueMicrotask=="function"?queueMicrotask:typeof LT<"u"?function(e){return LT.resolve(null).then(e).catch(yN)}:tb;function yN(e){setTimeout(function(){throw e})}function Ky(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),zp(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);zp(t)}function oo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function NT(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Ll,Jp="__reactProps$"+Ll,ca="__reactContainer$"+Ll,ib="__reactEvents$"+Ll,bN="__reactListeners$"+Ll,_N="__reactHandles$"+Ll;function bc(e){var t=e[Ts];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ca]||i[Ts]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=NT(e);e!==null;){if(i=e[Ts])return i;e=NT(e)}return t}e=i,i=e.parentNode}return null}function wh(e){return e=e[Ts]||e[ca],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function av(e){return e[Jp]||null}var rb=[],Wd=-1;function ko(e){return{current:e}}function $t(e){0>Wd||(e.current=rb[Wd],rb[Wd]=null,Wd--)}function xt(e,t){Wd++,rb[Wd]=e.current,e.current=t}var bo={},cr=ko(bo),Dr=ko(!1),Oc=bo;function _l(e,t){var i=e.type.contextTypes;if(!i)return bo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Lr(e){return e=e.childContextTypes,e!=null}function Xf(){$t(Dr),$t(cr)}function UT(e,t,i){if(cr.current!==bo)throw Error(se(168));xt(cr,t),xt(Dr,i)}function Tx(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(se(108,n4(e)||"Unknown",n));return Jt({},i,r)}function em(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bo,Oc=cr.current,xt(cr,e),xt(Dr,Dr.current),!0}function jT(e,t,i){var r=e.stateNode;if(!r)throw Error(se(169));i?(e=Tx(e,t,Oc),r.__reactInternalMemoizedMergedChildContext=e,$t(Dr),$t(cr),xt(cr,e)):$t(Dr),xt(Dr,i)}var Hs=null,ov=!1,Yy=!1;function kx(e){Hs===null?Hs=[e]:Hs.push(e)}function wN(e){ov=!0,kx(e)}function Po(){if(!Yy&&Hs!==null){Yy=!0;var e=0,t=ft;try{var i=Hs;for(ft=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Hs=null,ov=!1}catch(n){throw Hs!==null&&(Hs=Hs.slice(e+1)),YR(lw,Po),n}finally{ft=t,Yy=!1}}return null}var qd=[],Jd=0,tm=null,im=0,ln=[],un=0,Mc=null,ea=1,ta="";function Yo(e,t){qd[Jd++]=im,qd[Jd++]=tm,tm=e,im=t}function Px(e,t,i){ln[un++]=ea,ln[un++]=ta,ln[un++]=Mc,Mc=e;var r=ea;e=ta;var n=32-Kn(r)-1;r&=~(1<<n),i+=1;var s=32-Kn(t)+n;if(30<s){var a=n-n%5;s=(r&(1<<a)-1).toString(32),r>>=a,n-=a,ea=1<<32-Kn(t)+n|i<<n|r,ta=s+e}else ea=1<<s|i<<n|r,ta=e}function bw(e){e.return!==null&&(Yo(e,1),Px(e,1,0))}function _w(e){for(;e===tm;)tm=qd[--Jd],qd[Jd]=null,im=qd[--Jd],qd[Jd]=null;for(;e===Mc;)Mc=ln[--un],ln[un]=null,ta=ln[--un],ln[un]=null,ea=ln[--un],ln[un]=null}var Xr=null,Zr=null,Bt=!1,Bn=null;function Cx(e,t){var i=fn(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function $T(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xr=e,Zr=oo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xr=e,Zr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Mc!==null?{id:ea,overflow:ta}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=fn(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Xr=e,Zr=null,!0):!1;default:return!1}}function nb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sb(e){if(Bt){var t=Zr;if(t){var i=t;if(!$T(e,t)){if(nb(e))throw Error(se(418));t=oo(i.nextSibling);var r=Xr;t&&$T(e,t)?Cx(r,i):(e.flags=e.flags&-4097|2,Bt=!1,Xr=e)}}else{if(nb(e))throw Error(se(418));e.flags=e.flags&-4097|2,Bt=!1,Xr=e}}}function FT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xr=e}function gg(e){if(e!==Xr)return!1;if(!Bt)return FT(e),Bt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eb(e.type,e.memoizedProps)),t&&(t=Zr)){if(nb(e))throw Rx(),Error(se(418));for(;t;)Cx(e,t),t=oo(t.nextSibling)}if(FT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Zr=oo(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Zr=null}}else Zr=Xr?oo(e.stateNode.nextSibling):null;return!0}function Rx(){for(var e=Zr;e;)e=oo(e.nextSibling)}function wl(){Zr=Xr=null,Bt=!1}function ww(e){Bn===null?Bn=[e]:Bn.push(e)}var SN=fa.ReactCurrentBatchConfig;function Nn(e,t){if(e&&e.defaultProps){t=Jt({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var rm=ko(null),nm=null,Kd=null,Sw=null;function Ew(){Sw=Kd=nm=null}function Tw(e){var t=rm.current;$t(rm),e._currentValue=t}function ab(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function sl(e,t){nm=e,Sw=Kd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ir=!0),e.firstContext=null)}function wn(e){var t=e._currentValue;if(Sw!==e)if(e={context:e,memoizedValue:t,next:null},Kd===null){if(nm===null)throw Error(se(308));Kd=e,nm.dependencies={lanes:0,firstContext:e}}else Kd=Kd.next=e;return t}var _c=null;function kw(e){_c===null?_c=[e]:_c.push(e)}function xx(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,kw(t)):(i.next=n.next,n.next=i),t.interleaved=i,da(e,r)}function da(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ha=!1;function Pw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ax(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function co(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(nt&2)!==0){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,da(e,i)}return n=r.interleaved,n===null?(t.next=t,kw(r)):(t.next=n.next,n.next=t),r.interleaved=t,da(e,i)}function ef(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,uw(e,i)}}function BT(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?n=s=t:s=s.next=t}else n=s=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function sm(e,t,i,r){var n=e.updateQueue;Ha=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=d:o.next=d,l.lastBaseUpdate=c))}if(s!==null){var u=n.baseState;a=0,l=d=c=null,o=s;do{var f=o.lane,y=o.eventTime;if((r&f)===f){l!==null&&(l=l.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,k=o;switch(f=t,y=i,k.tag){case 1:if(b=k.payload,typeof b=="function"){u=b.call(y,u,f);break e}u=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,f=typeof b=="function"?b.call(y,u,f):b,f==null)break e;u=Jt({},u,f);break e;case 2:Ha=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else y={eventTime:y,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(d=l=y,c=u):l=l.next=y,a|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(l===null&&(c=u),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=l,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);Lc|=a,e.lanes=a,e.memoizedState=u}}function VT(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(se(191,n));n.call(r)}}}var Ix=new xR.Component().refs;function ob(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:Jt({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var cv={isMounted:function(e){return(e=e._reactInternals)?Gc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=vr(),n=uo(e),s=sa(r,n);s.payload=t,i!=null&&(s.callback=i),t=co(e,s,n),t!==null&&(Yn(t,e,n,r),ef(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=vr(),n=uo(e),s=sa(r,n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=co(e,s,n),t!==null&&(Yn(t,e,n,r),ef(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=vr(),r=uo(e),n=sa(i,r);n.tag=2,t!=null&&(n.callback=t),t=co(e,n,r),t!==null&&(Yn(t,e,r,i),ef(t,e,r))}};function zT(e,t,i,r,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Gp(i,r)||!Gp(n,s):!0}function Ox(e,t,i){var r=!1,n=bo,s=t.contextType;return typeof s=="object"&&s!==null?s=wn(s):(n=Lr(t)?Oc:cr.current,r=t.contextTypes,s=(r=r!=null)?_l(e,n):bo),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cv,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function HT(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&cv.enqueueReplaceState(t,t.state,null)}function cb(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=Ix,Pw(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=wn(s):(s=Lr(t)?Oc:cr.current,n.context=_l(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ob(e,t,s,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&cv.enqueueReplaceState(n,n.state,null),sm(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function wu(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(se(309));var r=i.stateNode}if(!r)throw Error(se(147,e));var n=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===Ix&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(se(284));if(!i._owner)throw Error(se(290,e))}return e}function fg(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function GT(e){var t=e._init;return t(e._payload)}function Mx(e){function t(w,E){if(e){var R=w.deletions;R===null?(w.deletions=[E],w.flags|=16):R.push(E)}}function i(w,E){if(!e)return null;for(;E!==null;)t(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function n(w,E){return w=po(w,E),w.index=0,w.sibling=null,w}function s(w,E,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<E?(w.flags|=2,E):R):(w.flags|=2,E)):(w.flags|=1048576,E)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function o(w,E,R,D){return E===null||E.tag!==6?(E=r0(R,w.mode,D),E.return=w,E):(E=n(E,R),E.return=w,E)}function c(w,E,R,D){var V=R.type;return V===Bd?l(w,E,R.props.children,D,R.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===za&&GT(V)===E.type)?(D=n(E,R.props),D.ref=wu(w,E,R),D.return=w,D):(D=of(R.type,R.key,R.props,null,w.mode,D),D.ref=wu(w,E,R),D.return=w,D)}function d(w,E,R,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=n0(R,w.mode,D),E.return=w,E):(E=n(E,R.children||[]),E.return=w,E)}function l(w,E,R,D,V){return E===null||E.tag!==7?(E=Cc(R,w.mode,D,V),E.return=w,E):(E=n(E,R),E.return=w,E)}function u(w,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=r0(""+E,w.mode,R),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ng:return R=of(E.type,E.key,E.props,null,w.mode,R),R.ref=wu(w,null,E),R.return=w,R;case Fd:return E=n0(E,w.mode,R),E.return=w,E;case za:var D=E._init;return u(w,D(E._payload),R)}if(Qu(E)||mu(E))return E=Cc(E,w.mode,R,null),E.return=w,E;fg(w,E)}return null}function f(w,E,R,D){var V=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return V!==null?null:o(w,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ng:return R.key===V?c(w,E,R,D):null;case Fd:return R.key===V?d(w,E,R,D):null;case za:return V=R._init,f(w,E,V(R._payload),D)}if(Qu(R)||mu(R))return V!==null?null:l(w,E,R,D,null);fg(w,R)}return null}function y(w,E,R,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(R)||null,o(E,w,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ng:return w=w.get(D.key===null?R:D.key)||null,c(E,w,D,V);case Fd:return w=w.get(D.key===null?R:D.key)||null,d(E,w,D,V);case za:var B=D._init;return y(w,E,R,B(D._payload),V)}if(Qu(D)||mu(D))return w=w.get(R)||null,l(E,w,D,V,null);fg(E,D)}return null}function b(w,E,R,D){for(var V=null,B=null,W=E,q=E=0,fe=null;W!==null&&q<R.length;q++){W.index>q?(fe=W,W=null):fe=W.sibling;var ae=f(w,W,R[q],D);if(ae===null){W===null&&(W=fe);break}e&&W&&ae.alternate===null&&t(w,W),E=s(ae,E,q),B===null?V=ae:B.sibling=ae,B=ae,W=fe}if(q===R.length)return i(w,W),Bt&&Yo(w,q),V;if(W===null){for(;q<R.length;q++)W=u(w,R[q],D),W!==null&&(E=s(W,E,q),B===null?V=W:B.sibling=W,B=W);return Bt&&Yo(w,q),V}for(W=r(w,W);q<R.length;q++)fe=y(W,w,q,R[q],D),fe!==null&&(e&&fe.alternate!==null&&W.delete(fe.key===null?q:fe.key),E=s(fe,E,q),B===null?V=fe:B.sibling=fe,B=fe);return e&&W.forEach(function(he){return t(w,he)}),Bt&&Yo(w,q),V}function k(w,E,R,D){var V=mu(R);if(typeof V!="function")throw Error(se(150));if(R=V.call(R),R==null)throw Error(se(151));for(var B=V=null,W=E,q=E=0,fe=null,ae=R.next();W!==null&&!ae.done;q++,ae=R.next()){W.index>q?(fe=W,W=null):fe=W.sibling;var he=f(w,W,ae.value,D);if(he===null){W===null&&(W=fe);break}e&&W&&he.alternate===null&&t(w,W),E=s(he,E,q),B===null?V=he:B.sibling=he,B=he,W=fe}if(ae.done)return i(w,W),Bt&&Yo(w,q),V;if(W===null){for(;!ae.done;q++,ae=R.next())ae=u(w,ae.value,D),ae!==null&&(E=s(ae,E,q),B===null?V=ae:B.sibling=ae,B=ae);return Bt&&Yo(w,q),V}for(W=r(w,W);!ae.done;q++,ae=R.next())ae=y(W,w,q,ae.value,D),ae!==null&&(e&&ae.alternate!==null&&W.delete(ae.key===null?q:ae.key),E=s(ae,E,q),B===null?V=ae:B.sibling=ae,B=ae);return e&&W.forEach(function(tt){return t(w,tt)}),Bt&&Yo(w,q),V}function P(w,E,R,D){if(typeof R=="object"&&R!==null&&R.type===Bd&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case ng:e:{for(var V=R.key,B=E;B!==null;){if(B.key===V){if(V=R.type,V===Bd){if(B.tag===7){i(w,B.sibling),E=n(B,R.props.children),E.return=w,w=E;break e}}else if(B.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===za&&GT(V)===B.type){i(w,B.sibling),E=n(B,R.props),E.ref=wu(w,B,R),E.return=w,w=E;break e}i(w,B);break}else t(w,B);B=B.sibling}R.type===Bd?(E=Cc(R.props.children,w.mode,D,R.key),E.return=w,w=E):(D=of(R.type,R.key,R.props,null,w.mode,D),D.ref=wu(w,E,R),D.return=w,w=D)}return a(w);case Fd:e:{for(B=R.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){i(w,E.sibling),E=n(E,R.children||[]),E.return=w,w=E;break e}else{i(w,E);break}else t(w,E);E=E.sibling}E=n0(R,w.mode,D),E.return=w,w=E}return a(w);case za:return B=R._init,P(w,E,B(R._payload),D)}if(Qu(R))return b(w,E,R,D);if(mu(R))return k(w,E,R,D);fg(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(i(w,E.sibling),E=n(E,R),E.return=w,w=E):(i(w,E),E=r0(R,w.mode,D),E.return=w,w=E),a(w)):i(w,E)}return P}var Sl=Mx(!0),Dx=Mx(!1),Sh={},Cs=ko(Sh),Kp=ko(Sh),Yp=ko(Sh);function wc(e){if(e===Sh)throw Error(se(174));return e}function Cw(e,t){switch(xt(Yp,t),xt(Kp,e),xt(Cs,Sh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:F1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=F1(t,e)}$t(Cs),xt(Cs,t)}function El(){$t(Cs),$t(Kp),$t(Yp)}function Lx(e){wc(Yp.current);var t=wc(Cs.current),i=F1(t,e.type);t!==i&&(xt(Kp,e),xt(Cs,i))}function Rw(e){Kp.current===e&&($t(Cs),$t(Kp))}var Wt=ko(0);function am(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qy=[];function xw(){for(var e=0;e<Qy.length;e++)Qy[e]._workInProgressVersionPrimary=null;Qy.length=0}var tf=fa.ReactCurrentDispatcher,Zy=fa.ReactCurrentBatchConfig,Dc=0,qt=null,xi=null,Ni=null,om=!1,Sp=!1,Qp=0,EN=0;function Qi(){throw Error(se(321))}function Aw(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xn(e[i],t[i]))return!1;return!0}function Iw(e,t,i,r,n,s){if(Dc=s,qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tf.current=e===null||e.memoizedState===null?CN:RN,e=i(r,n),Sp){s=0;do{if(Sp=!1,Qp=0,25<=s)throw Error(se(301));s+=1,Ni=xi=null,t.updateQueue=null,tf.current=xN,e=i(r,n)}while(Sp)}if(tf.current=cm,t=xi!==null&&xi.next!==null,Dc=0,Ni=xi=qt=null,om=!1,t)throw Error(se(300));return e}function Ow(){var e=Qp!==0;return Qp=0,e}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ni===null?qt.memoizedState=Ni=e:Ni=Ni.next=e,Ni}function Sn(){if(xi===null){var e=qt.alternate;e=e!==null?e.memoizedState:null}else e=xi.next;var t=Ni===null?qt.memoizedState:Ni.next;if(t!==null)Ni=t,xi=e;else{if(e===null)throw Error(se(310));xi=e,e={memoizedState:xi.memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},Ni===null?qt.memoizedState=Ni=e:Ni=Ni.next=e}return Ni}function Zp(e,t){return typeof t=="function"?t(e):t}function Xy(e){var t=Sn(),i=t.queue;if(i===null)throw Error(se(311));i.lastRenderedReducer=e;var r=xi,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var o=a=null,c=null,d=s;do{var l=d.lane;if((Dc&l)===l)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:l,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,a=r):c=c.next=u,qt.lanes|=l,Lc|=l}d=d.next}while(d!==null&&d!==s);c===null?a=r:c.next=o,Xn(r,t.memoizedState)||(Ir=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do s=n.lane,qt.lanes|=s,Lc|=s,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function e0(e){var t=Sn(),i=t.queue;if(i===null)throw Error(se(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,s=t.memoizedState;if(n!==null){i.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);Xn(s,t.memoizedState)||(Ir=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function Nx(){}function Ux(e,t){var i=qt,r=Sn(),n=t(),s=!Xn(r.memoizedState,n);if(s&&(r.memoizedState=n,Ir=!0),r=r.queue,Mw(Fx.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||Ni!==null&&Ni.memoizedState.tag&1){if(i.flags|=2048,Xp(9,$x.bind(null,i,r,n,t),void 0,null),ji===null)throw Error(se(349));(Dc&30)!==0||jx(i,t,n)}return n}function jx(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function $x(e,t,i,r){t.value=i,t.getSnapshot=r,Bx(t)&&Vx(e)}function Fx(e,t,i){return i(function(){Bx(t)&&Vx(e)})}function Bx(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xn(e,i)}catch{return!0}}function Vx(e){var t=da(e,1);t!==null&&Yn(t,e,1,-1)}function WT(e){var t=bs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zp,lastRenderedState:e},t.queue=e,e=e.dispatch=PN.bind(null,qt,e),[t.memoizedState,e]}function Xp(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function zx(){return Sn().memoizedState}function rf(e,t,i,r){var n=bs();qt.flags|=e,n.memoizedState=Xp(1|t,i,void 0,r===void 0?null:r)}function dv(e,t,i,r){var n=Sn();r=r===void 0?null:r;var s=void 0;if(xi!==null){var a=xi.memoizedState;if(s=a.destroy,r!==null&&Aw(r,a.deps)){n.memoizedState=Xp(t,i,s,r);return}}qt.flags|=e,n.memoizedState=Xp(1|t,i,s,r)}function qT(e,t){return rf(8390656,8,e,t)}function Mw(e,t){return dv(2048,8,e,t)}function Hx(e,t){return dv(4,2,e,t)}function Gx(e,t){return dv(4,4,e,t)}function Wx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qx(e,t,i){return i=i!=null?i.concat([e]):null,dv(4,4,Wx.bind(null,t,e),i)}function Dw(){}function Jx(e,t){var i=Sn();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&Aw(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function Kx(e,t){var i=Sn();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&Aw(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function Yx(e,t,i){return(Dc&21)===0?(e.baseState&&(e.baseState=!1,Ir=!0),e.memoizedState=i):(Xn(i,t)||(i=XR(),qt.lanes|=i,Lc|=i,e.baseState=!0),t)}function TN(e,t){var i=ft;ft=i!==0&&4>i?i:4,e(!0);var r=Zy.transition;Zy.transition={};try{e(!1),t()}finally{ft=i,Zy.transition=r}}function Qx(){return Sn().memoizedState}function kN(e,t,i){var r=uo(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},Zx(e))Xx(t,i);else if(i=xx(e,t,i,r),i!==null){var n=vr();Yn(i,e,r,n),e5(i,t,r)}}function PN(e,t,i){var r=uo(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(Zx(e))Xx(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,i);if(n.hasEagerState=!0,n.eagerState=o,Xn(o,a)){var c=t.interleaved;c===null?(n.next=n,kw(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}i=xx(e,t,n,r),i!==null&&(n=vr(),Yn(i,e,r,n),e5(i,t,r))}}function Zx(e){var t=e.alternate;return e===qt||t!==null&&t===qt}function Xx(e,t){Sp=om=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function e5(e,t,i){if((i&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,uw(e,i)}}var cm={readContext:wn,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useInsertionEffect:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useMutableSource:Qi,useSyncExternalStore:Qi,useId:Qi,unstable_isNewReconciler:!1},CN={readContext:wn,useCallback:function(e,t){return bs().memoizedState=[e,t===void 0?null:t],e},useContext:wn,useEffect:qT,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,rf(4194308,4,Wx.bind(null,t,e),i)},useLayoutEffect:function(e,t){return rf(4194308,4,e,t)},useInsertionEffect:function(e,t){return rf(4,2,e,t)},useMemo:function(e,t){var i=bs();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=bs();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kN.bind(null,qt,e),[r.memoizedState,e]},useRef:function(e){var t=bs();return e={current:e},t.memoizedState=e},useState:WT,useDebugValue:Dw,useDeferredValue:function(e){return bs().memoizedState=e},useTransition:function(){var e=WT(!1),t=e[0];return e=TN.bind(null,e[1]),bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=qt,n=bs();if(Bt){if(i===void 0)throw Error(se(407));i=i()}else{if(i=t(),ji===null)throw Error(se(349));(Dc&30)!==0||jx(r,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,qT(Fx.bind(null,r,s,e),[e]),r.flags|=2048,Xp(9,$x.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=bs(),t=ji.identifierPrefix;if(Bt){var i=ta,r=ea;i=(r&~(1<<32-Kn(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Qp++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=EN++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RN={readContext:wn,useCallback:Jx,useContext:wn,useEffect:Mw,useImperativeHandle:qx,useInsertionEffect:Hx,useLayoutEffect:Gx,useMemo:Kx,useReducer:Xy,useRef:zx,useState:function(){return Xy(Zp)},useDebugValue:Dw,useDeferredValue:function(e){var t=Sn();return Yx(t,xi.memoizedState,e)},useTransition:function(){var e=Xy(Zp)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:Nx,useSyncExternalStore:Ux,useId:Qx,unstable_isNewReconciler:!1},xN={readContext:wn,useCallback:Jx,useContext:wn,useEffect:Mw,useImperativeHandle:qx,useInsertionEffect:Hx,useLayoutEffect:Gx,useMemo:Kx,useReducer:e0,useRef:zx,useState:function(){return e0(Zp)},useDebugValue:Dw,useDeferredValue:function(e){var t=Sn();return xi===null?t.memoizedState=e:Yx(t,xi.memoizedState,e)},useTransition:function(){var e=e0(Zp)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:Nx,useSyncExternalStore:Ux,useId:Qx,unstable_isNewReconciler:!1};function Tl(e,t){try{var i="",r=t;do i+=r4(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function t0(e,t,i){return{value:e,source:null,stack:i!=null?i:null,digest:t!=null?t:null}}function db(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var AN=typeof WeakMap=="function"?WeakMap:Map;function t5(e,t,i){i=sa(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){lm||(lm=!0,bb=r),db(e,t)},i}function i5(e,t,i){i=sa(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){db(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){db(e,t),typeof r!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),i}function JT(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new AN;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=HN.bind(null,e,t,i),t.then(e,e))}function KT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function YT(e,t,i,r,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=sa(-1,1),t.tag=2,co(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var IN=fa.ReactCurrentOwner,Ir=!1;function mr(e,t,i,r){t.child=e===null?Dx(t,null,i,r):Sl(t,e.child,i,r)}function QT(e,t,i,r,n){i=i.render;var s=t.ref;return sl(t,n),r=Iw(e,t,i,r,s,n),i=Ow(),e!==null&&!Ir?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,la(e,t,n)):(Bt&&i&&bw(t),t.flags|=1,mr(e,t,r,n),t.child)}function ZT(e,t,i,r,n){if(e===null){var s=i.type;return typeof s=="function"&&!Vw(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,r5(e,t,s,r,n)):(e=of(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var a=s.memoizedProps;if(i=i.compare,i=i!==null?i:Gp,i(a,r)&&e.ref===t.ref)return la(e,t,n)}return t.flags|=1,e=po(s,r),e.ref=t.ref,e.return=t,t.child=e}function r5(e,t,i,r,n){if(e!==null){var s=e.memoizedProps;if(Gp(s,r)&&e.ref===t.ref)if(Ir=!1,t.pendingProps=r=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(Ir=!0);else return t.lanes=e.lanes,la(e,t,n)}return lb(e,t,i,r,n)}function n5(e,t,i){var r=t.pendingProps,n=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Qd,Jr),Jr|=i;else{if((i&1073741824)===0)return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xt(Qd,Jr),Jr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,xt(Qd,Jr),Jr|=r}else s!==null?(r=s.baseLanes|i,t.memoizedState=null):r=i,xt(Qd,Jr),Jr|=r;return mr(e,t,n,i),t.child}function s5(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function lb(e,t,i,r,n){var s=Lr(i)?Oc:cr.current;return s=_l(t,s),sl(t,n),i=Iw(e,t,i,r,s,n),r=Ow(),e!==null&&!Ir?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,la(e,t,n)):(Bt&&r&&bw(t),t.flags|=1,mr(e,t,i,n),t.child)}function XT(e,t,i,r,n){if(Lr(i)){var s=!0;em(t)}else s=!1;if(sl(t,n),t.stateNode===null)nf(e,t),Ox(t,i,r),cb(t,i,r,n),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,d=i.contextType;typeof d=="object"&&d!==null?d=wn(d):(d=Lr(i)?Oc:cr.current,d=_l(t,d));var l=i.getDerivedStateFromProps,u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==d)&&HT(t,a,r,d),Ha=!1;var f=t.memoizedState;a.state=f,sm(t,r,a,n),c=t.memoizedState,o!==r||f!==c||Dr.current||Ha?(typeof l=="function"&&(ob(t,i,l,r),c=t.memoizedState),(o=Ha||zT(t,i,o,r,f,c,d))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ax(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Nn(t.type,o),a.props=d,u=t.pendingProps,f=a.context,c=i.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=Lr(i)?Oc:cr.current,c=_l(t,c));var y=i.getDerivedStateFromProps;(l=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||f!==c)&&HT(t,a,r,c),Ha=!1,f=t.memoizedState,a.state=f,sm(t,r,a,n);var b=t.memoizedState;o!==u||f!==b||Dr.current||Ha?(typeof y=="function"&&(ob(t,i,y,r),b=t.memoizedState),(d=Ha||zT(t,i,d,r,f,b,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),a.props=r,a.state=b,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ub(e,t,i,r,s,n)}function ub(e,t,i,r,n,s){s5(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return n&&jT(t,i,!1),la(e,t,s);r=t.stateNode,IN.current=t;var o=a&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Sl(t,e.child,null,s),t.child=Sl(t,null,o,s)):mr(e,t,o,s),t.memoizedState=r.state,n&&jT(t,i,!0),t.child}function a5(e){var t=e.stateNode;t.pendingContext?UT(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UT(e,t.context,!1),Cw(e,t.containerInfo)}function ek(e,t,i,r,n){return wl(),ww(n),t.flags|=256,mr(e,t,i,r),t.child}var pb={dehydrated:null,treeContext:null,retryLane:0};function hb(e){return{baseLanes:e,cachePool:null,transitions:null}}function o5(e,t,i){var r=t.pendingProps,n=Wt.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),xt(Wt,n&1),e===null)return sb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=a):s=pv(a,r,0,null),e=Cc(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hb(i),t.memoizedState=pb,e):Lw(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return ON(e,t,a,r,o,n,i);if(s){s=r.fallback,a=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=po(n,c),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=po(o,s):(s=Cc(s,a,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?hb(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~i,t.memoizedState=pb,r}return s=e.child,e=s.sibling,r=po(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function Lw(e,t){return t=pv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mg(e,t,i,r){return r!==null&&ww(r),Sl(t,e.child,null,i),e=Lw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ON(e,t,i,r,n,s,a){if(i)return t.flags&256?(t.flags&=-257,r=t0(Error(se(422))),mg(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,n=t.mode,r=pv({mode:"visible",children:r.children},n,0,null),s=Cc(s,n,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&Sl(t,e.child,null,a),t.child.memoizedState=hb(a),t.memoizedState=pb,s);if((t.mode&1)===0)return mg(e,t,a,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(se(419)),r=t0(s,r,void 0),mg(e,t,a,r)}if(o=(a&e.childLanes)!==0,Ir||o){if(r=ji,r!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(r.suspendedLanes|a))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,da(e,n),Yn(r,e,n,-1))}return Bw(),r=t0(Error(se(421))),mg(e,t,a,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=GN.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,Zr=oo(n.nextSibling),Xr=t,Bt=!0,Bn=null,e!==null&&(ln[un++]=ea,ln[un++]=ta,ln[un++]=Mc,ea=e.id,ta=e.overflow,Mc=t),t=Lw(t,r.children),t.flags|=4096,t)}function tk(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ab(e.return,t,i)}function i0(e,t,i,r,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function c5(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(mr(e,t,r.children,i),r=Wt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tk(e,i,t);else if(e.tag===19)tk(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xt(Wt,r),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&am(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),i0(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&am(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}i0(t,!0,i,null,s);break;case"together":i0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nf(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function la(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Lc|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,i=po(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=po(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function MN(e,t,i){switch(t.tag){case 3:a5(t),wl();break;case 5:Lx(t);break;case 1:Lr(t.type)&&em(t);break;case 4:Cw(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;xt(rm,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xt(Wt,Wt.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?o5(e,t,i):(xt(Wt,Wt.current&1),e=la(e,t,i),e!==null?e.sibling:null);xt(Wt,Wt.current&1);break;case 19:if(r=(i&t.childLanes)!==0,(e.flags&128)!==0){if(r)return c5(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),xt(Wt,Wt.current),r)break;return null;case 22:case 23:return t.lanes=0,n5(e,t,i)}return la(e,t,i)}var d5,gb,l5,u5;d5=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};gb=function(){};l5=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,wc(Cs.current);var s=null;switch(i){case"input":n=N1(e,n),r=N1(e,r),s=[];break;case"select":n=Jt({},n,{value:void 0}),r=Jt({},r,{value:void 0}),s=[];break;case"textarea":n=$1(e,n),r=$1(e,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zf)}B1(i,r);var a;i=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jp.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(s||(s=[]),s.push(d,i)),i=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Mt("scroll",e),s||o===c||(s=[])):(s=s||[]).push(d,c))}i&&(s=s||[]).push("style",i);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};u5=function(e,t,i,r){i!==r&&(t.flags|=4)};function Su(e,t){if(!Bt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function DN(e,t,i){var r=t.pendingProps;switch(_w(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(t),null;case 1:return Lr(t.type)&&Xf(),Zi(t),null;case 3:return r=t.stateNode,El(),$t(Dr),$t(cr),xw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bn!==null&&(Sb(Bn),Bn=null))),gb(e,t),Zi(t),null;case 5:Rw(t);var n=wc(Yp.current);if(i=t.type,e!==null&&t.stateNode!=null)l5(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return Zi(t),null}if(e=wc(Cs.current),gg(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[Ts]=t,r[Jp]=s,e=(t.mode&1)!==0,i){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(n=0;n<Xu.length;n++)Mt(Xu[n],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":lT(r,s),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Mt("invalid",r);break;case"textarea":pT(r,s),Mt("invalid",r)}B1(i,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&hg(r.textContent,o,e),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&hg(r.textContent,o,e),n=["children",""+o]):jp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Mt("scroll",r)}switch(i){case"input":sg(r),uT(r,s,!0);break;case"textarea":sg(r),hT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zf)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jR(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(i,{is:r.is}):(e=a.createElement(i),i==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,i),e[Ts]=t,e[Jp]=r,d5(e,t,!1,!1),t.stateNode=e;e:{switch(a=V1(i,r),i){case"dialog":Mt("cancel",e),Mt("close",e),n=r;break;case"iframe":case"object":case"embed":Mt("load",e),n=r;break;case"video":case"audio":for(n=0;n<Xu.length;n++)Mt(Xu[n],e);n=r;break;case"source":Mt("error",e),n=r;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),n=r;break;case"details":Mt("toggle",e),n=r;break;case"input":lT(e,r),n=N1(e,r),Mt("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=Jt({},r,{value:void 0}),Mt("invalid",e);break;case"textarea":pT(e,r),n=$1(e,r),Mt("invalid",e);break;default:n=r}B1(i,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?BR(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$R(e,c)):s==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&$p(e,c):typeof c=="number"&&$p(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(jp.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Mt("scroll",e):c!=null&&sw(e,s,c,a))}switch(i){case"input":sg(e),uT(e,r,!1);break;case"textarea":sg(e),hT(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yo(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?tl(e,!!r.multiple,s,!1):r.defaultValue!=null&&tl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Zf)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zi(t),null;case 6:if(e&&t.stateNode!=null)u5(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(i=wc(Yp.current),wc(Cs.current),gg(t)){if(r=t.stateNode,i=t.memoizedProps,r[Ts]=t,(s=r.nodeValue!==i)&&(e=Xr,e!==null))switch(e.tag){case 3:hg(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hg(r.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[Ts]=t,t.stateNode=r}return Zi(t),null;case 13:if($t(Wt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Bt&&Zr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Rx(),wl(),t.flags|=98560,s=!1;else if(s=gg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(se(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[Ts]=t}else wl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Zi(t),s=!1}else Bn!==null&&(Sb(Bn),Bn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Wt.current&1)!==0?Ai===0&&(Ai=3):Bw())),t.updateQueue!==null&&(t.flags|=4),Zi(t),null);case 4:return El(),gb(e,t),e===null&&Wp(t.stateNode.containerInfo),Zi(t),null;case 10:return Tw(t.type._context),Zi(t),null;case 17:return Lr(t.type)&&Xf(),Zi(t),null;case 19:if($t(Wt),s=t.memoizedState,s===null)return Zi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Su(s,!1);else{if(Ai!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=am(e),a!==null){for(t.flags|=128,Su(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)s=i,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return xt(Wt,Wt.current&1|2),t.child}e=e.sibling}s.tail!==null&&ui()>kl&&(t.flags|=128,r=!0,Su(s,!1),t.lanes=4194304)}else{if(!r)if(e=am(a),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Su(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Bt)return Zi(t),null}else 2*ui()-s.renderingStartTime>kl&&i!==1073741824&&(t.flags|=128,r=!0,Su(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(i=s.last,i!==null?i.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ui(),t.sibling=null,i=Wt.current,xt(Wt,r?i&1|2:i&1),t):(Zi(t),null);case 22:case 23:return Fw(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Jr&1073741824)!==0&&(Zi(t),t.subtreeFlags&6&&(t.flags|=8192)):Zi(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function LN(e,t){switch(_w(t),t.tag){case 1:return Lr(t.type)&&Xf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return El(),$t(Dr),$t(cr),xw(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Rw(t),null;case 13:if($t(Wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $t(Wt),null;case 4:return El(),null;case 10:return Tw(t.type._context),null;case 22:case 23:return Fw(),null;case 24:return null;default:return null}}var vg=!1,nr=!1,NN=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Yd(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){ei(e,t,r)}else i.current=null}function fb(e,t,i){try{i()}catch(r){ei(e,t,r)}}var ik=!1;function UN(e,t){if(Z1=Kf,e=fx(),yw(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var a=0,o=-1,c=-1,d=0,l=0,u=e,f=null;t:for(;;){for(var y;u!==i||n!==0&&u.nodeType!==3||(o=a+n),u!==s||r!==0&&u.nodeType!==3||(c=a+r),u.nodeType===3&&(a+=u.nodeValue.length),(y=u.firstChild)!==null;)f=u,u=y;for(;;){if(u===e)break t;if(f===i&&++d===n&&(o=a),f===s&&++l===r&&(c=a),(y=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=y}i=o===-1||c===-1?null:{start:o,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(X1={focusedElem:e,selectionRange:i},Kf=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var b=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,P=b.memoizedState,w=t.stateNode,E=w.getSnapshotBeforeUpdate(t.elementType===t.type?k:Nn(t.type,k),P);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(D){ei(t,t.return,D)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return b=ik,ik=!1,b}function Ep(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&fb(t,i,s)}n=n.next}while(n!==r)}}function lv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function mb(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function p5(e){var t=e.alternate;t!==null&&(e.alternate=null,p5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ts],delete t[Jp],delete t[ib],delete t[bN],delete t[_N])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function h5(e){return e.tag===5||e.tag===3||e.tag===4}function rk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||h5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vb(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Zf));else if(r!==4&&(e=e.child,e!==null))for(vb(e,t,i),e=e.sibling;e!==null;)vb(e,t,i),e=e.sibling}function yb(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(yb(e,t,i),e=e.sibling;e!==null;)yb(e,t,i),e=e.sibling}var Wi=null,Un=!1;function Ta(e,t,i){for(i=i.child;i!==null;)g5(e,t,i),i=i.sibling}function g5(e,t,i){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(iv,i)}catch{}switch(i.tag){case 5:nr||Yd(i,t);case 6:var r=Wi,n=Un;Wi=null,Ta(e,t,i),Wi=r,Un=n,Wi!==null&&(Un?(e=Wi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Wi.removeChild(i.stateNode));break;case 18:Wi!==null&&(Un?(e=Wi,i=i.stateNode,e.nodeType===8?Ky(e.parentNode,i):e.nodeType===1&&Ky(e,i),zp(e)):Ky(Wi,i.stateNode));break;case 4:r=Wi,n=Un,Wi=i.stateNode.containerInfo,Un=!0,Ta(e,t,i),Wi=r,Un=n;break;case 0:case 11:case 14:case 15:if(!nr&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&((s&2)!==0||(s&4)!==0)&&fb(i,t,a),n=n.next}while(n!==r)}Ta(e,t,i);break;case 1:if(!nr&&(Yd(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(o){ei(i,t,o)}Ta(e,t,i);break;case 21:Ta(e,t,i);break;case 22:i.mode&1?(nr=(r=nr)||i.memoizedState!==null,Ta(e,t,i),nr=r):Ta(e,t,i);break;default:Ta(e,t,i)}}function nk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new NN),t.forEach(function(r){var n=WN.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function xn(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Wi=o.stateNode,Un=!1;break e;case 3:Wi=o.stateNode.containerInfo,Un=!0;break e;case 4:Wi=o.stateNode.containerInfo,Un=!0;break e}o=o.return}if(Wi===null)throw Error(se(160));g5(s,a,n),Wi=null,Un=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){ei(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)f5(t,e),t=t.sibling}function f5(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xn(t,e),ls(e),r&4){try{Ep(3,e,e.return),lv(3,e)}catch(k){ei(e,e.return,k)}try{Ep(5,e,e.return)}catch(k){ei(e,e.return,k)}}break;case 1:xn(t,e),ls(e),r&512&&i!==null&&Yd(i,i.return);break;case 5:if(xn(t,e),ls(e),r&512&&i!==null&&Yd(i,i.return),e.flags&32){var n=e.stateNode;try{$p(n,"")}catch(k){ei(e,e.return,k)}}if(r&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=i!==null?i.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&NR(n,s),V1(o,a);var d=V1(o,s);for(a=0;a<c.length;a+=2){var l=c[a],u=c[a+1];l==="style"?BR(n,u):l==="dangerouslySetInnerHTML"?$R(n,u):l==="children"?$p(n,u):sw(n,l,u,d)}switch(o){case"input":U1(n,s);break;case"textarea":UR(n,s);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?tl(n,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?tl(n,!!s.multiple,s.defaultValue,!0):tl(n,!!s.multiple,s.multiple?[]:"",!1))}n[Jp]=s}catch(k){ei(e,e.return,k)}}break;case 6:if(xn(t,e),ls(e),r&4){if(e.stateNode===null)throw Error(se(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(k){ei(e,e.return,k)}}break;case 3:if(xn(t,e),ls(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{zp(t.containerInfo)}catch(k){ei(e,e.return,k)}break;case 4:xn(t,e),ls(e);break;case 13:xn(t,e),ls(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(jw=ui())),r&4&&nk(e);break;case 22:if(l=i!==null&&i.memoizedState!==null,e.mode&1?(nr=(d=nr)||l,xn(t,e),nr=d):xn(t,e),ls(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!l&&(e.mode&1)!==0)for(ue=e,l=e.child;l!==null;){for(u=ue=l;ue!==null;){switch(f=ue,y=f.child,f.tag){case 0:case 11:case 14:case 15:Ep(4,f,f.return);break;case 1:Yd(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,i=f.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(k){ei(r,i,k)}}break;case 5:Yd(f,f.return);break;case 22:if(f.memoizedState!==null){ak(u);continue}}y!==null?(y.return=f,ue=y):ak(u)}l=l.sibling}e:for(l=null,u=e;;){if(u.tag===5){if(l===null){l=u;try{n=u.stateNode,d?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,c=u.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=FR("display",a))}catch(k){ei(e,e.return,k)}}}else if(u.tag===6){if(l===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(k){ei(e,e.return,k)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;l===u&&(l=null),u=u.return}l===u&&(l=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:xn(t,e),ls(e),r&4&&nk(e);break;case 21:break;default:xn(t,e),ls(e)}}function ls(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(h5(i)){var r=i;break e}i=i.return}throw Error(se(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&($p(n,""),r.flags&=-33);var s=rk(e);yb(e,s,n);break;case 3:case 4:var a=r.stateNode.containerInfo,o=rk(e);vb(e,o,a);break;default:throw Error(se(161))}}catch(c){ei(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jN(e,t,i){ue=e,m5(e)}function m5(e,t,i){for(var r=(e.mode&1)!==0;ue!==null;){var n=ue,s=n.child;if(n.tag===22&&r){var a=n.memoizedState!==null||vg;if(!a){var o=n.alternate,c=o!==null&&o.memoizedState!==null||nr;o=vg;var d=nr;if(vg=a,(nr=c)&&!d)for(ue=n;ue!==null;)a=ue,c=a.child,a.tag===22&&a.memoizedState!==null?ok(n):c!==null?(c.return=a,ue=c):ok(n);for(;s!==null;)ue=s,m5(s),s=s.sibling;ue=n,vg=o,nr=d}sk(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,ue=s):sk(e)}}function sk(e){for(;ue!==null;){var t=ue;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:nr||lv(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nr)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:Nn(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&VT(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}VT(t,a,i)}break;case 5:var o=t.stateNode;if(i===null&&t.flags&4){i=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var l=d.memoizedState;if(l!==null){var u=l.dehydrated;u!==null&&zp(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}nr||t.flags&512&&mb(t)}catch(f){ei(t,t.return,f)}}if(t===e){ue=null;break}if(i=t.sibling,i!==null){i.return=t.return,ue=i;break}ue=t.return}}function ak(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ue=i;break}ue=t.return}}function ok(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{lv(4,t)}catch(c){ei(t,i,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){ei(t,n,c)}}var s=t.return;try{mb(t)}catch(c){ei(t,s,c)}break;case 5:var a=t.return;try{mb(t)}catch(c){ei(t,a,c)}}}catch(c){ei(t,t.return,c)}if(t===e){ue=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ue=o;break}ue=t.return}}var $N=Math.ceil,dm=fa.ReactCurrentDispatcher,Nw=fa.ReactCurrentOwner,vn=fa.ReactCurrentBatchConfig,nt=0,ji=null,Ei=null,Ji=0,Jr=0,Qd=ko(0),Ai=0,eh=null,Lc=0,uv=0,Uw=0,Tp=null,Rr=null,jw=0,kl=1/0,zs=null,lm=!1,bb=null,lo=null,yg=!1,to=null,um=0,kp=0,_b=null,sf=-1,af=0;function vr(){return(nt&6)!==0?ui():sf!==-1?sf:sf=ui()}function uo(e){return(e.mode&1)===0?1:(nt&2)!==0&&Ji!==0?Ji&-Ji:SN.transition!==null?(af===0&&(af=XR()),af):(e=ft,e!==0||(e=window.event,e=e===void 0?16:ax(e.type)),e)}function Yn(e,t,i,r){if(50<kp)throw kp=0,_b=null,Error(se(185));bh(e,i,r),((nt&2)===0||e!==ji)&&(e===ji&&((nt&2)===0&&(uv|=i),Ai===4&&Ja(e,Ji)),Nr(e,r),i===1&&nt===0&&(t.mode&1)===0&&(kl=ui()+500,ov&&Po()))}function Nr(e,t){var i=e.callbackNode;S4(e,t);var r=Jf(e,e===ji?Ji:0);if(r===0)i!==null&&mT(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&mT(i),t===1)e.tag===0?wN(ck.bind(null,e)):kx(ck.bind(null,e)),vN(function(){(nt&6)===0&&Po()}),i=null;else{switch(ex(r)){case 1:i=lw;break;case 4:i=QR;break;case 16:i=qf;break;case 536870912:i=ZR;break;default:i=qf}i=T5(i,v5.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function v5(e,t){if(sf=-1,af=0,(nt&6)!==0)throw Error(se(327));var i=e.callbackNode;if(al()&&e.callbackNode!==i)return null;var r=Jf(e,e===ji?Ji:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=pm(e,r);else{t=r;var n=nt;nt|=2;var s=b5();(ji!==e||Ji!==t)&&(zs=null,kl=ui()+500,Pc(e,t));do try{VN();break}catch(o){y5(e,o)}while(1);Ew(),dm.current=s,nt=n,Ei!==null?t=0:(ji=null,Ji=0,t=Ai)}if(t!==0){if(t===2&&(n=q1(e),n!==0&&(r=n,t=wb(e,n))),t===1)throw i=eh,Pc(e,0),Ja(e,r),Nr(e,ui()),i;if(t===6)Ja(e,r);else{if(n=e.current.alternate,(r&30)===0&&!FN(n)&&(t=pm(e,r),t===2&&(s=q1(e),s!==0&&(r=s,t=wb(e,s))),t===1))throw i=eh,Pc(e,0),Ja(e,r),Nr(e,ui()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:Qo(e,Rr,zs);break;case 3:if(Ja(e,r),(r&130023424)===r&&(t=jw+500-ui(),10<t)){if(Jf(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){vr(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=tb(Qo.bind(null,e,Rr,zs),t);break}Qo(e,Rr,zs);break;case 4:if(Ja(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var a=31-Kn(r);s=1<<a,a=t[a],a>n&&(n=a),r&=~s}if(r=n,r=ui()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$N(r/1960))-r,10<r){e.timeoutHandle=tb(Qo.bind(null,e,Rr,zs),r);break}Qo(e,Rr,zs);break;case 5:Qo(e,Rr,zs);break;default:throw Error(se(329))}}}return Nr(e,ui()),e.callbackNode===i?v5.bind(null,e):null}function wb(e,t){var i=Tp;return e.current.memoizedState.isDehydrated&&(Pc(e,t).flags|=256),e=pm(e,t),e!==2&&(t=Rr,Rr=i,t!==null&&Sb(t)),e}function Sb(e){Rr===null?Rr=e:Rr.push.apply(Rr,e)}function FN(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!Xn(s(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ja(e,t){for(t&=~Uw,t&=~uv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Kn(t),r=1<<i;e[i]=-1,t&=~r}}function ck(e){if((nt&6)!==0)throw Error(se(327));al();var t=Jf(e,0);if((t&1)===0)return Nr(e,ui()),null;var i=pm(e,t);if(e.tag!==0&&i===2){var r=q1(e);r!==0&&(t=r,i=wb(e,r))}if(i===1)throw i=eh,Pc(e,0),Ja(e,t),Nr(e,ui()),i;if(i===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qo(e,Rr,zs),Nr(e,ui()),null}function $w(e,t){var i=nt;nt|=1;try{return e(t)}finally{nt=i,nt===0&&(kl=ui()+500,ov&&Po())}}function Nc(e){to!==null&&to.tag===0&&(nt&6)===0&&al();var t=nt;nt|=1;var i=vn.transition,r=ft;try{if(vn.transition=null,ft=1,e)return e()}finally{ft=r,vn.transition=i,nt=t,(nt&6)===0&&Po()}}function Fw(){Jr=Qd.current,$t(Qd)}function Pc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,mN(i)),Ei!==null)for(i=Ei.return;i!==null;){var r=i;switch(_w(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xf();break;case 3:El(),$t(Dr),$t(cr),xw();break;case 5:Rw(r);break;case 4:El();break;case 13:$t(Wt);break;case 19:$t(Wt);break;case 10:Tw(r.type._context);break;case 22:case 23:Fw()}i=i.return}if(ji=e,Ei=e=po(e.current,null),Ji=Jr=t,Ai=0,eh=null,Uw=uv=Lc=0,Rr=Tp=null,_c!==null){for(t=0;t<_c.length;t++)if(i=_c[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var a=s.next;s.next=n,r.next=a}i.pending=r}_c=null}return e}function y5(e,t){do{var i=Ei;try{if(Ew(),tf.current=cm,om){for(var r=qt.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}om=!1}if(Dc=0,Ni=xi=qt=null,Sp=!1,Qp=0,Nw.current=null,i===null||i.return===null){Ai=1,eh=t,Ei=null;break}e:{var s=e,a=i.return,o=i,c=t;if(t=Ji,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,l=o,u=l.tag;if((l.mode&1)===0&&(u===0||u===11||u===15)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var y=KT(a);if(y!==null){y.flags&=-257,YT(y,a,o,s,t),y.mode&1&&JT(s,d,t),t=y,c=d;var b=t.updateQueue;if(b===null){var k=new Set;k.add(c),t.updateQueue=k}else b.add(c);break e}else{if((t&1)===0){JT(s,d,t),Bw();break e}c=Error(se(426))}}else if(Bt&&o.mode&1){var P=KT(a);if(P!==null){(P.flags&65536)===0&&(P.flags|=256),YT(P,a,o,s,t),ww(Tl(c,o));break e}}s=c=Tl(c,o),Ai!==4&&(Ai=2),Tp===null?Tp=[s]:Tp.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=t5(s,c,t);BT(s,w);break e;case 1:o=c;var E=s.type,R=s.stateNode;if((s.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(lo===null||!lo.has(R)))){s.flags|=65536,t&=-t,s.lanes|=t;var D=i5(s,o,t);BT(s,D);break e}}s=s.return}while(s!==null)}w5(i)}catch(V){t=V,Ei===i&&i!==null&&(Ei=i=i.return);continue}break}while(1)}function b5(){var e=dm.current;return dm.current=cm,e===null?cm:e}function Bw(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),ji===null||(Lc&268435455)===0&&(uv&268435455)===0||Ja(ji,Ji)}function pm(e,t){var i=nt;nt|=2;var r=b5();(ji!==e||Ji!==t)&&(zs=null,Pc(e,t));do try{BN();break}catch(n){y5(e,n)}while(1);if(Ew(),nt=i,dm.current=r,Ei!==null)throw Error(se(261));return ji=null,Ji=0,Ai}function BN(){for(;Ei!==null;)_5(Ei)}function VN(){for(;Ei!==null&&!h4();)_5(Ei)}function _5(e){var t=E5(e.alternate,e,Jr);e.memoizedProps=e.pendingProps,t===null?w5(e):Ei=t,Nw.current=null}function w5(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=DN(i,t,Jr),i!==null){Ei=i;return}}else{if(i=LN(i,t),i!==null){i.flags&=32767,Ei=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ai=6,Ei=null;return}}if(t=t.sibling,t!==null){Ei=t;return}Ei=t=e}while(t!==null);Ai===0&&(Ai=5)}function Qo(e,t,i){var r=ft,n=vn.transition;try{vn.transition=null,ft=1,zN(e,t,i,r)}finally{vn.transition=n,ft=r}return null}function zN(e,t,i,r){do al();while(to!==null);if((nt&6)!==0)throw Error(se(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(E4(e,s),e===ji&&(Ei=ji=null,Ji=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||yg||(yg=!0,T5(qf,function(){return al(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=vn.transition,vn.transition=null;var a=ft;ft=1;var o=nt;nt|=4,Nw.current=null,UN(e,i),f5(i,e),dN(X1),Kf=!!Z1,X1=Z1=null,e.current=i,jN(i),g4(),nt=o,ft=a,vn.transition=s}else e.current=i;if(yg&&(yg=!1,to=e,um=n),s=e.pendingLanes,s===0&&(lo=null),v4(i.stateNode),Nr(e,ui()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(lm)throw lm=!1,e=bb,bb=null,e;return(um&1)!==0&&e.tag!==0&&al(),s=e.pendingLanes,(s&1)!==0?e===_b?kp++:(kp=0,_b=e):kp=0,Po(),null}function al(){if(to!==null){var e=ex(um),t=vn.transition,i=ft;try{if(vn.transition=null,ft=16>e?16:e,to===null)var r=!1;else{if(e=to,to=null,um=0,(nt&6)!==0)throw Error(se(331));var n=nt;for(nt|=4,ue=e.current;ue!==null;){var s=ue,a=s.child;if((ue.flags&16)!==0){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ue=d;ue!==null;){var l=ue;switch(l.tag){case 0:case 11:case 15:Ep(8,l,s)}var u=l.child;if(u!==null)u.return=l,ue=u;else for(;ue!==null;){l=ue;var f=l.sibling,y=l.return;if(p5(l),l===d){ue=null;break}if(f!==null){f.return=y,ue=f;break}ue=y}}}var b=s.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}ue=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,ue=a;else e:for(;ue!==null;){if(s=ue,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Ep(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ue=w;break e}ue=s.return}}var E=e.current;for(ue=E;ue!==null;){a=ue;var R=a.child;if((a.subtreeFlags&2064)!==0&&R!==null)R.return=a,ue=R;else e:for(a=E;ue!==null;){if(o=ue,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:lv(9,o)}}catch(V){ei(o,o.return,V)}if(o===a){ue=null;break e}var D=o.sibling;if(D!==null){D.return=o.return,ue=D;break e}ue=o.return}}if(nt=n,Po(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(iv,e)}catch{}r=!0}return r}finally{ft=i,vn.transition=t}}return!1}function dk(e,t,i){t=Tl(i,t),t=t5(e,t,1),e=co(e,t,1),t=vr(),e!==null&&(bh(e,1,t),Nr(e,t))}function ei(e,t,i){if(e.tag===3)dk(e,e,i);else for(;t!==null;){if(t.tag===3){dk(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r))){e=Tl(i,e),e=i5(t,e,1),t=co(t,e,1),e=vr(),t!==null&&(bh(t,1,e),Nr(t,e));break}}t=t.return}}function HN(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=vr(),e.pingedLanes|=e.suspendedLanes&i,ji===e&&(Ji&i)===i&&(Ai===4||Ai===3&&(Ji&130023424)===Ji&&500>ui()-jw?Pc(e,0):Uw|=i),Nr(e,t)}function S5(e,t){t===0&&((e.mode&1)===0?t=1:(t=cg,cg<<=1,(cg&130023424)===0&&(cg=4194304)));var i=vr();e=da(e,t),e!==null&&(bh(e,t,i),Nr(e,i))}function GN(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),S5(e,i)}function WN(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),S5(e,i)}var E5;E5=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dr.current)Ir=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return Ir=!1,MN(e,t,i);Ir=(e.flags&131072)!==0}else Ir=!1,Bt&&(t.flags&1048576)!==0&&Px(t,im,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nf(e,t),e=t.pendingProps;var n=_l(t,cr.current);sl(t,i),n=Iw(null,t,r,e,n,i);var s=Ow();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(r)?(s=!0,em(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Pw(t),n.updater=cv,t.stateNode=n,n._reactInternals=t,cb(t,r,e,i),t=ub(null,t,r,!0,s,i)):(t.tag=0,Bt&&s&&bw(t),mr(null,t,n,i),t=t.child),t;case 16:r=t.elementType;e:{switch(nf(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=JN(r),e=Nn(r,e),n){case 0:t=lb(null,t,r,e,i);break e;case 1:t=XT(null,t,r,e,i);break e;case 11:t=QT(null,t,r,e,i);break e;case 14:t=ZT(null,t,r,Nn(r.type,e),i);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Nn(r,n),lb(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Nn(r,n),XT(e,t,r,n,i);case 3:e:{if(a5(t),e===null)throw Error(se(387));r=t.pendingProps,s=t.memoizedState,n=s.element,Ax(e,t),sm(t,r,null,i);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Tl(Error(se(423)),t),t=ek(e,t,r,i,n);break e}else if(r!==n){n=Tl(Error(se(424)),t),t=ek(e,t,r,i,n);break e}else for(Zr=oo(t.stateNode.containerInfo.firstChild),Xr=t,Bt=!0,Bn=null,i=Dx(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(wl(),r===n){t=la(e,t,i);break e}mr(e,t,r,i)}t=t.child}return t;case 5:return Lx(t),e===null&&sb(t),r=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,eb(r,n)?a=null:s!==null&&eb(r,s)&&(t.flags|=32),s5(e,t),mr(e,t,a,i),t.child;case 6:return e===null&&sb(t),null;case 13:return o5(e,t,i);case 4:return Cw(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Sl(t,null,r,i):mr(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Nn(r,n),QT(e,t,r,n,i);case 7:return mr(e,t,t.pendingProps,i),t.child;case 8:return mr(e,t,t.pendingProps.children,i),t.child;case 12:return mr(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,xt(rm,r._currentValue),r._currentValue=a,s!==null)if(Xn(s.value,a)){if(s.children===n.children&&!Dr.current){t=la(e,t,i);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=sa(-1,i&-i),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var l=d.pending;l===null?c.next=c:(c.next=l.next,l.next=c),d.pending=c}}s.lanes|=i,c=s.alternate,c!==null&&(c.lanes|=i),ab(s.return,i,t),o.lanes|=i;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(se(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),ab(a,i,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}mr(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,sl(t,i),n=wn(n),r=r(n),t.flags|=1,mr(e,t,r,i),t.child;case 14:return r=t.type,n=Nn(r,t.pendingProps),n=Nn(r.type,n),ZT(e,t,r,n,i);case 15:return r5(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Nn(r,n),nf(e,t),t.tag=1,Lr(r)?(e=!0,em(t)):e=!1,sl(t,i),Ox(t,r,n),cb(t,r,n,i),ub(null,t,r,!0,e,i);case 19:return c5(e,t,i);case 22:return n5(e,t,i)}throw Error(se(156,t.tag))};function T5(e,t){return YR(e,t)}function qN(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,i,r){return new qN(e,t,i,r)}function Vw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function JN(e){if(typeof e=="function")return Vw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ow)return 11;if(e===cw)return 14}return 2}function po(e,t){var i=e.alternate;return i===null?(i=fn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function of(e,t,i,r,n,s){var a=2;if(r=e,typeof e=="function")Vw(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Bd:return Cc(i.children,n,s,t);case aw:a=8,n|=8;break;case O1:return e=fn(12,i,t,n|2),e.elementType=O1,e.lanes=s,e;case M1:return e=fn(13,i,t,n),e.elementType=M1,e.lanes=s,e;case D1:return e=fn(19,i,t,n),e.elementType=D1,e.lanes=s,e;case MR:return pv(i,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case IR:a=10;break e;case OR:a=9;break e;case ow:a=11;break e;case cw:a=14;break e;case za:a=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=fn(a,i,t,n),t.elementType=e,t.type=r,t.lanes=s,t}function Cc(e,t,i,r){return e=fn(7,e,r,t),e.lanes=i,e}function pv(e,t,i,r){return e=fn(22,e,r,t),e.elementType=MR,e.lanes=i,e.stateNode={isHidden:!1},e}function r0(e,t,i){return e=fn(6,e,null,t),e.lanes=i,e}function n0(e,t,i){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function KN(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jy(0),this.expirationTimes=jy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jy(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function zw(e,t,i,r,n,s,a,o,c){return e=new KN(e,t,i,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pw(s),e}function YN(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function k5(e){if(!e)return bo;e=e._reactInternals;e:{if(Gc(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var i=e.type;if(Lr(i))return Tx(e,i,t)}return t}function P5(e,t,i,r,n,s,a,o,c){return e=zw(i,r,!0,e,n,s,a,o,c),e.context=k5(null),i=e.current,r=vr(),n=uo(i),s=sa(r,n),s.callback=t!=null?t:null,co(i,s,n),e.current.lanes=n,bh(e,n,r),Nr(e,r),e}function hv(e,t,i,r){var n=t.current,s=vr(),a=uo(n);return i=k5(i),t.context===null?t.context=i:t.pendingContext=i,t=sa(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=co(n,t,a),e!==null&&(Yn(e,n,a,s),ef(e,n,a)),a}function hm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Hw(e,t){lk(e,t),(e=e.alternate)&&lk(e,t)}function QN(){return null}var C5=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gw(e){this._internalRoot=e}gv.prototype.render=Gw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));hv(e,t,null,null)};gv.prototype.unmount=Gw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nc(function(){hv(null,e,null,null)}),t[ca]=null}};function gv(e){this._internalRoot=e}gv.prototype.unstable_scheduleHydration=function(e){if(e){var t=rx();e={blockedOn:null,target:e,priority:t};for(var i=0;i<qa.length&&t!==0&&t<qa[i].priority;i++);qa.splice(i,0,e),i===0&&sx(e)}};function Ww(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uk(){}function ZN(e,t,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var d=hm(a);s.call(d)}}var a=P5(t,r,e,0,null,!1,!1,"",uk);return e._reactRootContainer=a,e[ca]=a.current,Wp(e.nodeType===8?e.parentNode:e),Nc(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var d=hm(c);o.call(d)}}var c=zw(e,0,!1,null,null,!1,!1,"",uk);return e._reactRootContainer=c,e[ca]=c.current,Wp(e.nodeType===8?e.parentNode:e),Nc(function(){hv(t,c,i,r)}),c}function mv(e,t,i,r,n){var s=i._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var c=hm(a);o.call(c)}}hv(t,a,e,n)}else a=ZN(i,t,e,n,r);return hm(a)}tx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Zu(t.pendingLanes);i!==0&&(uw(t,i|1),Nr(t,ui()),(nt&6)===0&&(kl=ui()+500,Po()))}break;case 13:Nc(function(){var r=da(e,1);if(r!==null){var n=vr();Yn(r,e,1,n)}}),Hw(e,1)}};pw=function(e){if(e.tag===13){var t=da(e,134217728);if(t!==null){var i=vr();Yn(t,e,134217728,i)}Hw(e,134217728)}};ix=function(e){if(e.tag===13){var t=uo(e),i=da(e,t);if(i!==null){var r=vr();Yn(i,e,t,r)}Hw(e,t)}};rx=function(){return ft};nx=function(e,t){var i=ft;try{return ft=e,t()}finally{ft=i}};H1=function(e,t,i){switch(t){case"input":if(U1(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=av(r);if(!n)throw Error(se(90));LR(r),U1(r,n)}}}break;case"textarea":UR(e,i);break;case"select":t=i.value,t!=null&&tl(e,!!i.multiple,t,!1)}};HR=$w;GR=Nc;var XN={usingClientEntryPoint:!1,Events:[wh,Gd,av,VR,zR,$w]},Eu={findFiberByHostInstance:bc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},e7={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=JR(e),e===null?null:e.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||QN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{iv=bg.inject(e7),Ps=bg}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;rn.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ww(t))throw Error(se(200));return YN(e,t,null,i)};rn.createRoot=function(e,t){if(!Ww(e))throw Error(se(299));var i=!1,r="",n=C5;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=zw(e,1,!1,null,null,i,!1,r,n),e[ca]=t.current,Wp(e.nodeType===8?e.parentNode:e),new Gw(t)};rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=JR(t),e=e===null?null:e.stateNode,e};rn.flushSync=function(e){return Nc(e)};rn.hydrate=function(e,t,i){if(!fv(t))throw Error(se(200));return mv(null,e,t,!0,i)};rn.hydrateRoot=function(e,t,i){if(!Ww(e))throw Error(se(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",a=C5;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),t=P5(t,null,e,1,i!=null?i:null,n,!1,s,a),e[ca]=t.current,Wp(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new gv(t)};rn.render=function(e,t,i){if(!fv(t))throw Error(se(200));return mv(null,e,t,!1,i)};rn.unmountComponentAtNode=function(e){if(!fv(e))throw Error(se(40));return e._reactRootContainer?(Nc(function(){mv(null,null,e,!1,function(){e._reactRootContainer=null,e[ca]=null})}),!0):!1};rn.unstable_batchedUpdates=$w;rn.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!fv(i))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return mv(e,t,i,!1,r)};rn.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=rn})(bR);var pk=bR.exports;A1.createRoot=pk.createRoot,A1.hydrateRoot=pk.hydrateRoot;var R5={exports:{}},vv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t7=aa.exports,i7=Symbol.for("react.element"),r7=Symbol.for("react.fragment"),n7=Object.prototype.hasOwnProperty,s7=t7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a7={key:!0,ref:!0,__self:!0,__source:!0};function x5(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)n7.call(t,r)&&!a7.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:i7,type:e,key:s,ref:a,props:n,_owner:s7.current}}vv.Fragment=r7;vv.jsx=x5;vv.jsxs=x5;(function(e){e.exports=vv})(R5);const qw=R5.exports.jsx,o7=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),A5=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),c7=(e,t,i={})=>{if(e instanceof Element){const r=d7(e.classList,t,i);r!==""&&(e.className=r),Object.keys(t).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const s=n.substring(2),a=s[0].toLowerCase()+s.substring(1);I5(a)||l7(e,a,t[n])}else e[n]=t[n],typeof t[n]==="string"&&e.setAttribute(A5(n),t[n])})}},d7=(e,t,i)=>{const r=t.className||t.class,n=i.className||i.class,s=s0(e),a=s0(r?r.split(" "):[]),o=s0(n?n.split(" "):[]),c=[];return s.forEach(d=>{a.has(d)?(c.push(d),a.delete(d)):o.has(d)||c.push(d)}),a.forEach(d=>c.push(d)),c.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const I5=e=>{if(typeof document>"u")return!0;{const t="on"+e;let i=t in document;if(!i){const r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return i}},l7=(e,t,i)=>{const r=e.__events||(e.__events={}),n=r[t];n&&e.removeEventListener(t,n),e.addEventListener(t,r[t]=function(a){i&&i.call(this,a)})},s0=e=>{const t=new Map;return e.forEach(i=>t.set(i,i)),t},u7=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},p7=(...e)=>t=>{e.forEach(i=>{u7(i,t)})},h7=(e,t)=>{const i=(r,n)=>qw(e,{...Object.assign({},r,{forwardedRef:n})});return i.displayName=t,iw.forwardRef(i)};var g7=globalThis&&globalThis.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};const f7=(e,t,i,r)=>{r!==void 0&&r();const n=o7(e),s=class extends iw.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){c7(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:c,style:d,className:l,ref:u}=a,f=g7(a,["children","forwardedRef","style","className","ref"]);let y=Object.keys(f).reduce((k,P)=>{const w=f[P];if(P.indexOf("on")===0&&P[2]===P[2].toUpperCase()){const E=P.substring(2).toLowerCase();typeof document<"u"&&I5(E)&&(k[P]=w)}else{const E=typeof w;(E==="string"||E==="boolean"||E==="number")&&(k[A5(P)]=w)}return k},{});i&&(y=i(this.props,y));const b=Object.assign(Object.assign({},y),{ref:p7(c,this.setComponentElRef),style:d});return aa.exports.createElement(e,b,o)}static get displayName(){return n}};return t&&(s.contextType=t),h7(s,n)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__rest;const m7="modulepreload",v7=function(e){return"/"+e},hk={},y7=function(t,i,r){if(!i||i.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=v7(s),s in hk)return;hk[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let l=n.length-1;l>=0;l--){const u=n[l];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":m7,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((l,u)=>{d.addEventListener("load",l),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},b7="dyte-ui-kit";let cf,O5,M5=!1,Eb=null,Tb=!1;const ua=(e,t="")=>()=>{},_7=(e,t)=>()=>{},w7="{visibility:hidden}.hydrated{visibility:inherit}",gk="http://www.w3.org/1999/xlink",fk={},S7=e=>e!=null,Jw=e=>(e=typeof e,e==="object"||e==="function"),h=(e,t,...i)=>{let r=null,n=null,s=!1,a=!1;const o=[],c=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!Jw(r))&&(r=String(r)),s&&a?o[o.length-1].$text$+=r:o.push(s?gm(null,r):r),a=s)};if(c(i),t){t.key&&(n=t.key);{const l=t.className||t.class;l&&(t.class=typeof l!="object"?l:Object.keys(l).filter(u=>l[u]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,o,T7);const d=gm(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d.$key$=n,d},gm=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i},z={},E7=e=>e&&e.$tag$===z,T7={forEach:(e,t)=>e.map(mk).forEach(t),map:(e,t)=>e.map(mk).map(t).map(k7)},mk=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),k7=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),h(e.vtag,i,...e.vchildren||[])}const t=gm(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},P7=(e,t)=>e!=null&&!Jw(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,ma=e=>Co(e).$hostElement$,le=(e,t,i)=>{const r=ma(e);return{emit:n=>D5(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},D5=(e,t,i)=>{const r=sr.ce(t,i);return e.dispatchEvent(r),r},vk=new WeakMap,C7=(e,t,i)=>{let r=mm.get(e);K7&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,mm.set(e,r)},R7=(e,t,i,r)=>{let n=L5(t);const s=mm.get(n);if(e=e.nodeType===11?e:ho,s)if(typeof s=="string"){e=e.head||e;let a=vk.get(e),o;a||vk.set(e,a=new Set),a.has(n)||(o=ho.createElement("style"),o.innerHTML=s,e.insertBefore(o,e.querySelector("link")),a&&a.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},x7=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=ua("attachStyles",t.$tagName$),s=R7(i.shadowRoot?i.shadowRoot:i.getRootNode(),t);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h")),n()},L5=(e,t)=>"sc-"+e.$tagName$,yk=(e,t,i,r,n,s)=>{if(i!==r){let a=Sk(e,t),o=t.toLowerCase();if(t==="class"){const c=e.classList,d=bk(i),l=bk(r);c.remove(...d.filter(u=>u&&!l.includes(u))),c.add(...l.filter(u=>u&&!d.includes(u)))}else if(t==="style"){for(const c in i)(!r||r[c]==null)&&(c.includes("-")?e.style.removeProperty(c):e.style[c]="");for(const c in r)(!i||r[c]!==i[c])&&(c.includes("-")?e.style.setProperty(c,r[c]):e.style[c]=r[c])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!a&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Sk(Eh,o)?t=o.slice(2):t=o[2]+t.slice(3),i&&sr.rel(e,t,i,!1),r&&sr.ael(e,t,r,!1);else{const c=Jw(r);if((a||c&&r!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const l=r==null?"":r;t==="list"?a=!1:(i==null||e[t]!=l)&&(e[t]=l)}}catch{}let d=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(gk,t):e.removeAttribute(t)):(!a||s&4||n)&&!c&&(r=r===!0?"":r,d?e.setAttributeNS(gk,t,r):e.setAttribute(t,r))}}},A7=/\s/,bk=e=>e?e.split(A7):[],N5=(e,t,i,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||fk,a=t.$attrs$||fk;for(r in s)r in a||yk(n,r,s[r],void 0,i,t.$flags$);for(r in a)yk(n,r,s[r],a[r],i,t.$flags$)},fm=(e,t,i,r)=>{const n=t.$children$[i];let s=0,a,o;if(n.$text$!==null)a=n.$elm$=ho.createTextNode(n.$text$);else if(a=n.$elm$=ho.createElement(n.$tag$),N5(null,n,M5),S7(cf)&&a["s-si"]!==cf&&a.classList.add(a["s-si"]=cf),n.$children$)for(s=0;s<n.$children$.length;++s)o=fm(e,n,s),o&&a.appendChild(o);return a},U5=(e,t,i,r,n,s)=>{let a=e,o;for(a.shadowRoot&&a.tagName===O5&&(a=a.shadowRoot);n<=s;++n)r[n]&&(o=fm(null,i,n),o&&(r[n].$elm$=o,a.insertBefore(o,t)))},j5=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,$5(r),n.remove())},I7=(e,t,i,r)=>{let n=0,s=0,a=0,o=0,c=t.length-1,d=t[0],l=t[c],u=r.length-1,f=r[0],y=r[u],b,k;for(;n<=c&&s<=u;)if(d==null)d=t[++n];else if(l==null)l=t[--c];else if(f==null)f=r[++s];else if(y==null)y=r[--u];else if(_g(d,f))kd(d,f),d=t[++n],f=r[++s];else if(_g(l,y))kd(l,y),l=t[--c],y=r[--u];else if(_g(d,y))kd(d,y),e.insertBefore(d.$elm$,l.$elm$.nextSibling),d=t[++n],y=r[--u];else if(_g(l,f))kd(l,f),e.insertBefore(l.$elm$,d.$elm$),l=t[--c],f=r[++s];else{for(a=-1,o=n;o<=c;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===f.$key$){a=o;break}a>=0?(k=t[a],k.$tag$!==f.$tag$?b=fm(t&&t[s],i,a):(kd(k,f),t[a]=void 0,b=k.$elm$),f=r[++s]):(b=fm(t&&t[s],i,s),f=r[++s]),b&&d.$elm$.parentNode.insertBefore(b,d.$elm$)}n>c?U5(e,r[u+1]==null?null:r[u+1].$elm$,i,r,s,u):s>u&&j5(t,n,c)},_g=(e,t)=>e.$tag$===t.$tag$?e.$key$===t.$key$:!1,kd=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,s=t.$tag$,a=t.$text$;a===null?(s==="slot"||N5(e,t,M5),r!==null&&n!==null?I7(i,r,t,n):n!==null?(e.$text$!==null&&(i.textContent=""),U5(i,null,t,n,0,n.length-1)):r!==null&&j5(r,0,r.length-1)):e.$text$!==a&&(i.data=a)},$5=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map($5)},O7=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||gm(null,null),s=E7(t)?t:h(null,null,t);O5=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([a,o])=>s.$attrs$[o]=i[a])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,cf=i["s-sc"],kd(n,s)},F5=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(i=>e.$onRenderResolve$=i))},yv=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return F5(e,e.$ancestorComponent$),es(()=>M7(e,t))},M7=(e,t)=>{const i=ua("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let n;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map(([s,a])=>Pl(r,s,a)),e.$queuedListeners$=null),n=Pl(r,"componentWillLoad")),i(),U7(n,()=>D7(e,r,t))},D7=async(e,t,i)=>{const r=e.$hostElement$,n=ua("update",e.$cmpMeta$.$tagName$),s=r["s-rc"];i&&x7(e);const a=ua("render",e.$cmpMeta$.$tagName$);L7(e,t),s&&(s.map(o=>o()),r["s-rc"]=void 0),a(),n();{const o=r["s-p"],c=()=>N7(e);o.length===0?c():(Promise.all(o).then(c),e.$flags$|=4,o.length=0)}},L7=(e,t,i)=>{try{Eb=t,t=t.render(),e.$flags$&=-17,e.$flags$|=2,O7(e,t)}catch(r){te(r,e.$hostElement$)}return Eb=null,null},_k=()=>Eb,N7=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=ua("postUpdate",t),n=e.$lazyInstance$,s=e.$ancestorComponent$;Pl(n,"componentDidRender"),e.$flags$&64?r():(e.$flags$|=64,V5(i),Pl(n,"componentDidLoad"),r(),e.$onReadyResolve$(i),s||B5()),e.$onInstanceResolve$(i),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&Yw(()=>yv(e,!1)),e.$flags$&=-517},wk=e=>{{const t=Co(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&yv(t,!1),i}},B5=e=>{V5(ho.documentElement),Yw(()=>D5(Eh,"appload",{detail:{namespace:b7}}))},Pl=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){te(r)}},U7=(e,t)=>e&&e.then?e.then(t):t(),V5=e=>e.classList.add("hydrated"),j7=(e,t)=>Co(e).$instanceValues$.get(t),$7=(e,t,i,r)=>{const n=Co(e),s=n.$hostElement$,a=n.$instanceValues$.get(t),o=n.$flags$,c=n.$lazyInstance$;i=P7(i,r.$members$[t][0]);const d=Number.isNaN(a)&&Number.isNaN(i),l=i!==a&&!d;if((!(o&8)||a===void 0)&&l&&(n.$instanceValues$.set(t,i),c)){if(r.$watchers$&&o&128){const u=r.$watchers$[t];u&&u.map(f=>{try{c[f](i,a,t)}catch(y){te(y,s)}})}(o&18)===2&&yv(n,!1)}},z5=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),n=e.prototype;if(r.map(([s,[a]])=>{a&31||i&2&&a&32?Object.defineProperty(n,s,{get(){return j7(this,s)},set(o){$7(this,s,o,t)},configurable:!0,enumerable:!0}):i&1&&a&64&&Object.defineProperty(n,s,{value(...o){const c=Co(this);return c.$onInstancePromise$.then(()=>c.$lazyInstance$[s](...o))}})}),i&1){const s=new Map;n.attributeChangedCallback=function(a,o,c){sr.jmp(()=>{const d=s.get(a);if(this.hasOwnProperty(d))c=this[d],delete this[d];else if(n.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==c)return;this[d]=c===null&&typeof this[d]=="boolean"?!1:c})},e.observedAttributes=r.filter(([a,o])=>o[0]&15).map(([a,o])=>{const c=o[1]||a;return s.set(c,a),o[0]&512&&t.$attrsToReflect$.push([a,c]),c})}}return e},F7=async(e,t,i,r,n)=>{if((t.$flags$&32)===0){{if(t.$flags$|=32,n=J7(i),n.then){const c=_7();n=await n,c()}n.isProxied||(i.$watchers$=n.watchers,z5(n,i,2),n.isProxied=!0);const o=ua("createInstance",i.$tagName$);t.$flags$|=8;try{new n(t)}catch(c){te(c)}t.$flags$&=-9,t.$flags$|=128,o(),H5(t.$lazyInstance$)}if(n.style){let o=n.style;const c=L5(i);if(!mm.has(c)){const d=ua("registerStyles",i.$tagName$);C7(c,o,!!(i.$flags$&1)),d()}}}const s=t.$ancestorComponent$,a=()=>yv(t,!0);s&&s["s-rc"]?s["s-rc"].push(a):a()},H5=e=>{Pl(e,"connectedCallback")},B7=e=>{if((sr.$flags$&1)===0){const t=Co(e),i=t.$cmpMeta$,r=ua("connectedCallback",i.$tagName$);if(t.$flags$&1)G5(e,t,i.$listeners$),H5(t.$lazyInstance$);else{t.$flags$|=1;{let n=e;for(;n=n.parentNode||n.host;)if(n["s-p"]){F5(t,t.$ancestorComponent$=n);break}}i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const a=e[n];delete e[n],e[n]=a}}),F7(e,t,i)}r()}},V7=e=>{if((sr.$flags$&1)===0){const t=Co(e),i=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0),Pl(i,"disconnectedCallback")}},z7=(e,t={})=>{const i=ua(),r=[],n=t.exclude||[],s=Eh.customElements,a=ho.head,o=a.querySelector("meta[charset]"),c=ho.createElement("style"),d=[];let l,u=!0;Object.assign(sr,t),sr.$resourcesUrl$=new URL(t.resourcesUrl||"./",ho.baseURI).href,e.map(f=>{f[1].map(y=>{const b={$flags$:y[0],$tagName$:y[1],$members$:y[2],$listeners$:y[3]};b.$members$=y[2],b.$listeners$=y[3],b.$attrsToReflect$=[],b.$watchers$={};const k=b.$tagName$,P=class extends HTMLElement{constructor(w){super(w),w=this,q7(w,b),b.$flags$&1&&w.attachShadow({mode:"open"})}connectedCallback(){l&&(clearTimeout(l),l=null),u?d.push(this):sr.jmp(()=>B7(this))}disconnectedCallback(){sr.jmp(()=>V7(this))}componentOnReady(){return Co(this).$onReadyPromise$}};b.$lazyBundleId$=f[0],!n.includes(k)&&!s.get(k)&&(r.push(k),s.define(k,z5(P,b,1)))})}),c.innerHTML=r+w7,c.setAttribute("data-styles",""),a.insertBefore(c,o?o.nextSibling:a.firstChild),u=!1,d.length?d.map(f=>f.connectedCallback()):sr.jmp(()=>l=setTimeout(B5,30)),i()},G5=(e,t,i,r)=>{i&&i.map(([n,s,a])=>{const o=G7(e,n),c=H7(t,a),d=W7(n);sr.ael(o,s,c,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>sr.rel(o,s,c,d))})},H7=(e,t)=>i=>{try{e.$flags$&256?e.$lazyInstance$[t](i):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,i])}catch(r){te(r)}},G7=(e,t)=>t&8?Eh:e,W7=e=>(e&2)!==0,Kw=new WeakMap,Co=e=>Kw.get(e),X=(e,t)=>Kw.set(t.$lazyInstance$=e,t),q7=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r),i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],G5(e,i,t.$listeners$),Kw.set(e,i)},Sk=(e,t)=>t in e,te=(e,t)=>(0,console.error)(e,t),a0=new Map,J7=(e,t,i)=>{const r=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$,s=a0.get(n);if(s)return s[r];if(!i||!BUILD.hotModuleReplacement){const a=o=>(a0.set(n,o),o[r]);switch(n){case"dyte-meeting":return Promise.resolve().then(function(){return Cj}).then(a,te);case"dyte-ai":return Promise.resolve().then(function(){return xj}).then(a,te);case"dyte-ai-chat":return Promise.resolve().then(function(){return Ij}).then(a,te);case"dyte-ai-home":return Promise.resolve().then(function(){return Nj}).then(a,te);case"dyte-ai-toggle":return Promise.resolve().then(function(){return jj}).then(a,te);case"dyte-ai-transcriptions":return Promise.resolve().then(function(){return Fj}).then(a,te);case"dyte-breakout-rooms-manager":return Promise.resolve().then(function(){return Jj}).then(a,te);case"dyte-breakout-rooms-toggle":return Promise.resolve().then(function(){return Qj}).then(a,te);case"dyte-broadcast-message-modal":return Promise.resolve().then(function(){return Xj}).then(a,te);case"dyte-camera-toggle":return Promise.resolve().then(function(){return t$}).then(a,te);case"dyte-chat":return Promise.resolve().then(function(){return r$}).then(a,te);case"dyte-chat-toggle":return Promise.resolve().then(function(){return s$}).then(a,te);case"dyte-clock":return Promise.resolve().then(function(){return o$}).then(a,te);case"dyte-confirmation-modal":return Promise.resolve().then(function(){return d$}).then(a,te);case"dyte-controlbar":return Promise.resolve().then(function(){return u$}).then(a,te);case"dyte-dialog-manager":return Promise.resolve().then(function(){return h$}).then(a,te);case"dyte-ended-screen":return Promise.resolve().then(function(){return f$}).then(a,te);case"dyte-fullscreen-toggle":return Promise.resolve().then(function(){return v$}).then(a,te);case"dyte-grid":return Promise.resolve().then(function(){return C$}).then(a,te);case"dyte-grid-pagination":return Promise.resolve().then(function(){return x$}).then(a,te);case"dyte-header":return Promise.resolve().then(function(){return I$}).then(a,te);case"dyte-idle-screen":return Promise.resolve().then(function(){return M$}).then(a,te);case"dyte-image-viewer":return Promise.resolve().then(function(){return j$}).then(a,te);case"dyte-leave-button":return Promise.resolve().then(function(){return F$}).then(a,te);case"dyte-leave-meeting":return Promise.resolve().then(function(){return V$}).then(a,te);case"dyte-livestream-indicator":return Promise.resolve().then(function(){return H$}).then(a,te);case"dyte-livestream-toggle":return Promise.resolve().then(function(){return W$}).then(a,te);case"dyte-meeting-title":return Promise.resolve().then(function(){return J$}).then(a,te);case"dyte-mic-toggle":return Promise.resolve().then(function(){return Y$}).then(a,te);case"dyte-mixed-grid":return Promise.resolve().then(function(){return Z$}).then(a,te);case"dyte-more-toggle":return Promise.resolve().then(function(){return eF}).then(a,te);case"dyte-mute-all-button":return Promise.resolve().then(function(){return iF}).then(a,te);case"dyte-mute-all-confirmation":return Promise.resolve().then(function(){return nF}).then(a,te);case"dyte-name-tag":return Promise.resolve().then(function(){return aF}).then(a,te);case"dyte-network-indicator":return Promise.resolve().then(function(){return cF}).then(a,te);case"dyte-notifications":return Promise.resolve().then(function(){return hF}).then(a,te);case"dyte-participant-count":return Promise.resolve().then(function(){return fF}).then(a,te);case"dyte-participant-setup":return Promise.resolve().then(function(){return vF}).then(a,te);case"dyte-participants":return Promise.resolve().then(function(){return bF}).then(a,te);case"dyte-participants-audio":return Promise.resolve().then(function(){return SF}).then(a,te);case"dyte-participants-stage-list":return Promise.resolve().then(function(){return TF}).then(a,te);case"dyte-participants-stage-queue":return Promise.resolve().then(function(){return PF}).then(a,te);case"dyte-participants-toggle":return Promise.resolve().then(function(){return RF}).then(a,te);case"dyte-participants-viewer-list":return Promise.resolve().then(function(){return AF}).then(a,te);case"dyte-participants-waiting-list":return Promise.resolve().then(function(){return OF}).then(a,te);case"dyte-permissions-message":return Promise.resolve().then(function(){return DF}).then(a,te);case"dyte-pip-toggle":return Promise.resolve().then(function(){return NF}).then(a,te);case"dyte-plugin-main":return Promise.resolve().then(function(){return jF}).then(a,te);case"dyte-plugins":return Promise.resolve().then(function(){return FF}).then(a,te);case"dyte-plugins-toggle":return Promise.resolve().then(function(){return VF}).then(a,te);case"dyte-polls":return Promise.resolve().then(function(){return HF}).then(a,te);case"dyte-polls-toggle":return Promise.resolve().then(function(){return WF}).then(a,te);case"dyte-recording-indicator":return Promise.resolve().then(function(){return JF}).then(a,te);case"dyte-recording-toggle":return Promise.resolve().then(function(){return YF}).then(a,te);case"dyte-remote-access-manager":return Promise.resolve().then(function(){return ZF}).then(a,te);case"dyte-screen-share-toggle":return Promise.resolve().then(function(){return eB}).then(a,te);case"dyte-screenshare-view":return Promise.resolve().then(function(){return iB}).then(a,te);case"dyte-settings":return Promise.resolve().then(function(){return nB}).then(a,te);case"dyte-settings-toggle":return Promise.resolve().then(function(){return aB}).then(a,te);case"dyte-setup-screen":return Promise.resolve().then(function(){return cB}).then(a,te);case"dyte-sidebar":return Promise.resolve().then(function(){return lB}).then(a,te);case"dyte-simple-grid":return Promise.resolve().then(function(){return pB}).then(a,te);case"dyte-spotlight-grid":return Promise.resolve().then(function(){return gB}).then(a,te);case"dyte-stage":return Promise.resolve().then(function(){return mB}).then(a,te);case"dyte-stage-toggle":return Promise.resolve().then(function(){return yB}).then(a,te);case"dyte-text-field":return Promise.resolve().then(function(){return _B}).then(a,te);case"dyte-viewer-count":return Promise.resolve().then(function(){return SB}).then(a,te);case"dyte-waiting-screen":return Promise.resolve().then(function(){return TB}).then(a,te);case"dyte-webinar-stage-toggle":return Promise.resolve().then(function(){return PB}).then(a,te);case"dyte-ai-caption":return Promise.resolve().then(function(){return RB}).then(a,te);case"dyte-breakout-room-manager_3":return Promise.resolve().then(function(){return OB}).then(a,te);case"dyte-chat-composer-ui_4":return Promise.resolve().then(function(){return UB}).then(a,te);case"dyte-join-stage_2":return Promise.resolve().then(function(){return FB}).then(a,te);case"dyte-livestream-player":return Promise.resolve().then(function(){return VB}).then(a,te);case"dyte-notification":return Promise.resolve().then(function(){return HB}).then(a,te);case"dyte-poll_2":return Promise.resolve().then(function(){return qB}).then(a,te);case"dyte-settings-audio_2":return Promise.resolve().then(function(){return YB}).then(a,te);case"dyte-tab-bar":return Promise.resolve().then(function(){return ZB}).then(a,te);case"dyte-audio-visualizer_2":return Promise.resolve().then(function(){return nV}).then(a,te);case"dyte-chat-message_2":return Promise.resolve().then(function(){return wV}).then(a,te);case"dyte-dialog":return Promise.resolve().then(function(){return EV}).then(a,te);case"dyte-emoji-picker":return Promise.resolve().then(function(){return CV}).then(a,te);case"dyte-participant":return Promise.resolve().then(function(){return xV}).then(a,te);case"dyte-participant-tile":return Promise.resolve().then(function(){return IV}).then(a,te);case"dyte-spotlight-indicator":return Promise.resolve().then(function(){return MV}).then(a,te);case"dyte-logo":return Promise.resolve().then(function(){return LV}).then(a,te);case"dyte-file-message_3":return Promise.resolve().then(function(){return VV}).then(a,te);case"dyte-menu_3":return Promise.resolve().then(function(){return gz}).then(a,te);case"dyte-avatar":return Promise.resolve().then(function(){return mz}).then(a,te);case"dyte-controlbar-button":return Promise.resolve().then(function(){return yz}).then(a,te);case"dyte-tooltip":return Promise.resolve().then(function(){return _z}).then(a,te);case"dyte-spinner":return Promise.resolve().then(function(){return Sz}).then(a,te);case"dyte-button":return Promise.resolve().then(function(){return Tz}).then(a,te);case"dyte-icon":return Promise.resolve().then(function(){return Cz}).then(a,te)}}return y7(()=>import(`./${n}.entry.js`),[]).then(a=>(a0.set(n,a),a[r]),te)},mm=new Map,Eh=typeof window<"u"?window:{},ho=Eh.document||{head:{}},sr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},W5=e=>Promise.resolve(e),K7=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Ek=[],q5=[],Y7=(e,t)=>i=>{e.push(i),Tb||(Tb=!0,t&&sr.$flags$&4?Yw(kb):sr.raf(kb))},Tk=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){te(i)}e.length=0},kb=()=>{Tk(Ek),Tk(q5),(Tb=Ek.length>0)&&sr.raf(kb)},Yw=e=>W5().then(e),es=Y7(q5,!0),Q7=()=>W5(),Z7=(e,t)=>typeof window>"u"?Promise.resolve():Q7().then(()=>z7(JSON.parse('[["dyte-chat",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32]}]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32],"showStageList":[32]}]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-polls",[[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32]}]]],["dyte-remote-access-manager",[[1,"dyte-remote-access-manager",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"acceptedRequestId":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-webinar-stage-toggle",[[1,"dyte-webinar-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"canPresent":[32],"requestProduce":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"t":[16]}]]],["dyte-dialog-manager",[[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32]}]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"showWebinarStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"connected":[32],"pipSupported":[32],"pipEnabled":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"middlewares":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-notifications",[[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"]]]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipEnabled":[32],"pipSupported":[32]}]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"middlewares":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"middlewares":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"canControl":[32],"viewModeEnabled":[32]}]]],["dyte-plugins",[[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugin":[32],"activatedPluginsId":[32]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[16],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"middlewares":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-livestream-indicator",[[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"participantCount":[32]}]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-participants",[[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"search":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-viewer-count",[[1,"dyte-viewer-count",{"meeting":[16],"iconPack":[16],"t":[16],"viewerCount":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat"]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"middlewares":[16],"size":[513]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"middlewares":[16],"states":[32],"newMeeting":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"maxLength":[2,"max-length"],"isScreenShare":[4,"is-screen-share"],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-livestream-player",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"latency":[32],"audioPlaybackError":[32]}]]],["dyte-notification",[[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-ai-caption",[[1,"dyte-ai-caption"]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"audioDevices":[32],"speakerDevices":[32],"canProduceAudio":[32]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoDevices":[32],"currentDevice":[32],"videoEnabled":[32]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-emoji-picker",[[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}]]],["dyte-join-stage_2",[[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-participant-tile",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-file-message_3",[[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"status":[32]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16]}]]],["dyte-chat-message_2",[[1,"dyte-chat-message",{"messageItem":[16],"isContinued":[4,"is-continued"],"isUnread":[4,"is-unread"],"observeMessage":[16],"size":[513],"iconPack":[16],"t":[16],"now":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"iconPack":[16],"t":[16],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"pagesToRender":[32],"onNewNode":[64]}]]],["dyte-chat-composer-ui_4",[[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"emojiPickerActive":[32]}],[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}]]],["dyte-audio-visualizer_2",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]]]'),t)),ct={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",height:"76px",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#more-menu":{position:"absolute",boxSizing:"border-box",top:"0",left:"0",width:"100%",transform:"translateY(-100%)",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))",padding:"16px 12px",borderRadius:"18px 18px 0 0"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-controlbar.activeMoreMenu.sm":{add:["div#more-menu"]},"dyte-controlbar.activeMoreMenu.md":{add:["div#more-menu"]},"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#more-menu":[["dyte-chat-toggle",{variant:"horizontal"}],["dyte-participants-toggle",{variant:"horizontal"}],["dyte-polls-toggle",{variant:"horizontal"}],["dyte-plugins-toggle",{variant:"horizontal"}],["dyte-fullscreen-toggle",{variant:"horizontal"}],["dyte-screen-share-toggle",{variant:"horizontal"}],["dyte-pip-toggle",{variant:"horizontal"}],["dyte-mute-all-button",{variant:"horizontal"}],["dyte-breakout-rooms-toggle",{variant:"horizontal"}],["dyte-settings-toggle",{variant:"horizontal"}],["dyte-ai-toggle",{variant:"horizontal"}]],"div#controlbar-left":["dyte-screen-share-toggle","dyte-fullscreen-toggle","dyte-pip-toggle","dyte-recording-toggle","dyte-breakout-rooms-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-mic-toggle","dyte-camera-toggle","dyte-mute-all-button","dyte-settings-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var J5=typeof global=="object"&&global&&global.Object===Object&&global,X7=typeof self=="object"&&self&&self.Object===Object&&self,Wc=J5||X7||Function("return this")(),vm=Wc.Symbol,K5=Object.prototype,e8=K5.hasOwnProperty,t8=K5.toString,Tu=vm?vm.toStringTag:void 0;function i8(e){var t=e8.call(e,Tu),i=e[Tu];try{e[Tu]=void 0;var r=!0}catch{}var n=t8.call(e);return r&&(t?e[Tu]=i:delete e[Tu]),n}var r8=Object.prototype,n8=r8.toString;function s8(e){return n8.call(e)}var a8="[object Null]",o8="[object Undefined]",kk=vm?vm.toStringTag:void 0;function Th(e){return e==null?e===void 0?o8:a8:kk&&kk in Object(e)?i8(e):s8(e)}function As(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Nl(e){return e!=null&&typeof e=="object"}const c8=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],d8={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},Pk={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},Ck={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}},Qw=[-2,-1,0,1,2];function df(e){e=e.trim();let t="0",i="0",r="0";return e.length==4?(t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):e.length>6&&(t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),[+t,+i,+r]}const l8=(e,t,i)=>{let r,n,s;if(t==0)r=n=s=i;else{const a=(d,l,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(l-d)*6*u:u<.5?l:u<.6666666666666666?d+(l-d)*(.6666666666666666-u)*6:d),o=i<.5?i*(1+t):i+t-i*t,c=2*i-o;r=a(c,o,e+1/3),n=a(c,o,e),s=a(c,o,e-1/3)}return[Math.round(r*255),Math.round(n*255),Math.round(s*255)]},u8=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),n=Math.min(e,t,i);let s,a,o=(r+n)/2;if(r==n)s=a=0;else{const c=r-n;switch(a=o>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4;break}s/=6}return[s,a,o]},p8=(e,t,i)=>{const r=n=>n.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(i)}`},Y5=(e,t=Qw,i=.4)=>{const r=[],[n,s,a]=df(e),[o,c,d]=u8(n,s,a),l=Math.round(d*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const u=t.findIndex(P=>P===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const f=5-u,y=u+1,b=(100-l)/f,k=l/y;for(const P of t){let w;P<0?w=l+P*k*i:P>0?w=l+P*b*i:w=l;const[E,R,D]=l8(o,c,w/100);r.push(p8(E,R,D))}return r},jo=e=>typeof e=="string"&&e.length===7&&e.startsWith("#"),h8=e=>{const[t,i,r,n,s]=Y5(e,Qw);return{300:t,400:i,500:r,600:n,700:s}},g8=e=>{const[t,i,r,n,s]=Y5(e,Qw);return{1e3:t,900:i,800:r,700:n,600:s}},f8=e=>{const t=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const n=document.createElement("link");n.rel="preconnect",n.setAttribute("data-dyte-font","true"),n.href="https://fonts.googleapis.com";const s=n.cloneNode(!0);s.href="https://fonts.gstatic.com",s.crossOrigin="",i.push(n,s)}const r=document.createElement("link");r.rel="stylesheet",r.setAttribute("data-dyte-font",e),r.href=encodeURI(`https://fonts.googleapis.com/css2?family=${e}:wght@${t.join(";")}&display=swap`),i.push(r),document.head.append(...i)},m8=(e,t)=>{c8.forEach(i=>{e.style.setProperty(`--dyte-space-${i}`,`${i*t}px`)})},v8=(e,t)=>{if(t in Pk){const i=Pk[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-width-${r}`,`${i[r]}px`)})}},y8=(e,t)=>{if(t in Ck){const i=Ck[t];Object.keys(i).forEach(r=>{e.style.setProperty(`--dyte-border-radius-${r}`,`${i[r]}px`)})}},Rk=(e,t)=>{Object.keys(t).forEach(i=>{const r=t[i];if(typeof r=="string")if(i==="text"||i==="text-on-brand"){const n=df(r).join(" ");e.style.setProperty(`--dyte-colors-${i}-1000`,`${n}`),e.style.setProperty(`--dyte-colors-${i}-900`,`${n} / 0.88`),e.style.setProperty(`--dyte-colors-${i}-800`,`${n} / 0.76`),e.style.setProperty(`--dyte-colors-${i}-700`,`${n} / 0.64`),e.style.setProperty(`--dyte-colors-${i}-600`,`${n} / 0.52`)}else{const n=df(r).join(" ");e.style.setProperty(`--dyte-colors-${i}`,n)}else typeof r=="object"&&Object.keys(r).forEach(n=>{const s=r[n],a=df(s).join(" ");e.style.setProperty(`--dyte-colors-${i}-${n}`,a)})})},xk=(e,{spacingBase:t,borderRadius:i,borderWidth:r,colors:n,fontFamily:s,googleFont:a,theme:o})=>{if(typeof e!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(f8(a),e.style.setProperty("--dyte-font-family",a)),typeof s=="string"&&e.style.setProperty("--dyte-font-family",s),typeof t=="number"&&m8(e,t),typeof r=="string"&&v8(e,r),typeof i=="string"&&y8(e,i),typeof o=="string"){const c=d8[o];c!=null&&Rk(e,c)}typeof n=="object"&&Rk(e,n)};function b8(){this.__data__=[],this.size=0}function bv(e,t){return e===t||e!==e&&t!==t}function _v(e,t){for(var i=e.length;i--;)if(bv(e[i][0],t))return i;return-1}var _8=Array.prototype,w8=_8.splice;function S8(e){var t=this.__data__,i=_v(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():w8.call(t,i,1),--this.size,!0}function E8(e){var t=this.__data__,i=_v(t,e);return i<0?void 0:t[i][1]}function T8(e){return _v(this.__data__,e)>-1}function k8(e,t){var i=this.__data__,r=_v(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function va(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}va.prototype.clear=b8;va.prototype.delete=S8;va.prototype.get=E8;va.prototype.has=T8;va.prototype.set=k8;function P8(){this.__data__=new va,this.size=0}function C8(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function R8(e){return this.__data__.get(e)}function x8(e){return this.__data__.has(e)}var A8="[object AsyncFunction]",I8="[object Function]",O8="[object GeneratorFunction]",M8="[object Proxy]";function Zw(e){if(!As(e))return!1;var t=Th(e);return t==I8||t==O8||t==A8||t==M8}var o0=Wc["__core-js_shared__"],Ak=function(){var e=/[^.]+$/.exec(o0&&o0.keys&&o0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function D8(e){return!!Ak&&Ak in e}var L8=Function.prototype,N8=L8.toString;function U8(e){if(e!=null){try{return N8.call(e)}catch{}try{return e+""}catch{}}return""}var j8=/[\\^$.*+?()[\]{}|]/g,$8=/^\[object .+?Constructor\]$/,F8=Function.prototype,B8=Object.prototype,V8=F8.toString,z8=B8.hasOwnProperty,H8=RegExp("^"+V8.call(z8).replace(j8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G8(e){if(!As(e)||D8(e))return!1;var t=Zw(e)?H8:$8;return t.test(U8(e))}function W8(e,t){return e==null?void 0:e[t]}function Xw(e,t){var i=W8(e,t);return G8(i)?i:void 0}var Q5=Xw(Wc,"Map"),th=Xw(Object,"create");function q8(){this.__data__=th?th(null):{},this.size=0}function J8(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var K8="__lodash_hash_undefined__",Y8=Object.prototype,Q8=Y8.hasOwnProperty;function Z8(e){var t=this.__data__;if(th){var i=t[e];return i===K8?void 0:i}return Q8.call(t,e)?t[e]:void 0}var X8=Object.prototype,e9=X8.hasOwnProperty;function t9(e){var t=this.__data__;return th?t[e]!==void 0:e9.call(t,e)}var i9="__lodash_hash_undefined__";function r9(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=th&&t===void 0?i9:t,this}function Uc(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Uc.prototype.clear=q8;Uc.prototype.delete=J8;Uc.prototype.get=Z8;Uc.prototype.has=t9;Uc.prototype.set=r9;function n9(){this.size=0,this.__data__={hash:new Uc,map:new(Q5||va),string:new Uc}}function s9(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function wv(e,t){var i=e.__data__;return s9(t)?i[typeof t=="string"?"string":"hash"]:i.map}function a9(e){var t=wv(this,e).delete(e);return this.size-=t?1:0,t}function o9(e){return wv(this,e).get(e)}function c9(e){return wv(this,e).has(e)}function d9(e,t){var i=wv(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function Ul(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Ul.prototype.clear=n9;Ul.prototype.delete=a9;Ul.prototype.get=o9;Ul.prototype.has=c9;Ul.prototype.set=d9;var l9=200;function u9(e,t){var i=this.__data__;if(i instanceof va){var r=i.__data__;if(!Q5||r.length<l9-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ul(r)}return i.set(e,t),this.size=i.size,this}function jl(e){var t=this.__data__=new va(e);this.size=t.size}jl.prototype.clear=P8;jl.prototype.delete=C8;jl.prototype.get=R8;jl.prototype.has=x8;jl.prototype.set=u9;var ym=function(){try{var e=Xw(Object,"defineProperty");return e({},"",{}),e}catch{}}();function eS(e,t,i){t=="__proto__"&&ym?ym(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Pb(e,t,i){(i!==void 0&&!bv(e[t],i)||i===void 0&&!(t in e))&&eS(e,t,i)}function p9(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++n];if(i(s[c],c,s)===!1)break}return t}}var h9=p9(),Z5=typeof qe=="object"&&qe&&!qe.nodeType&&qe,Ik=Z5&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,g9=Ik&&Ik.exports===Z5,Ok=g9?Wc.Buffer:void 0,Mk=Ok?Ok.allocUnsafe:void 0;function f9(e,t){if(t)return e.slice();var i=e.length,r=Mk?Mk(i):new e.constructor(i);return e.copy(r),r}var Dk=Wc.Uint8Array;function m9(e){var t=new e.constructor(e.byteLength);return new Dk(t).set(new Dk(e)),t}function v9(e,t){var i=t?m9(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function y9(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var Lk=Object.create,b9=function(){function e(){}return function(t){if(!As(t))return{};if(Lk)return Lk(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function _9(e,t){return function(i){return e(t(i))}}var X5=_9(Object.getPrototypeOf,Object),w9=Object.prototype;function eA(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||w9;return e===i}function S9(e){return typeof e.constructor=="function"&&!eA(e)?b9(X5(e)):{}}var E9="[object Arguments]";function Nk(e){return Nl(e)&&Th(e)==E9}var tA=Object.prototype,T9=tA.hasOwnProperty,k9=tA.propertyIsEnumerable,Cb=Nk(function(){return arguments}())?Nk:function(e){return Nl(e)&&T9.call(e,"callee")&&!k9.call(e,"callee")},Rb=Array.isArray,P9=9007199254740991;function iA(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=P9}function tS(e){return e!=null&&iA(e.length)&&!Zw(e)}function C9(e){return Nl(e)&&tS(e)}function R9(){return!1}var rA=typeof qe=="object"&&qe&&!qe.nodeType&&qe,Uk=rA&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,x9=Uk&&Uk.exports===rA,jk=x9?Wc.Buffer:void 0,A9=jk?jk.isBuffer:void 0,nA=A9||R9,I9="[object Object]",O9=Function.prototype,M9=Object.prototype,sA=O9.toString,D9=M9.hasOwnProperty,L9=sA.call(Object);function N9(e){if(!Nl(e)||Th(e)!=I9)return!1;var t=X5(e);if(t===null)return!0;var i=D9.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&sA.call(i)==L9}var U9="[object Arguments]",j9="[object Array]",$9="[object Boolean]",F9="[object Date]",B9="[object Error]",V9="[object Function]",z9="[object Map]",H9="[object Number]",G9="[object Object]",W9="[object RegExp]",q9="[object Set]",J9="[object String]",K9="[object WeakMap]",Y9="[object ArrayBuffer]",Q9="[object DataView]",Z9="[object Float32Array]",X9="[object Float64Array]",eU="[object Int8Array]",tU="[object Int16Array]",iU="[object Int32Array]",rU="[object Uint8Array]",nU="[object Uint8ClampedArray]",sU="[object Uint16Array]",aU="[object Uint32Array]",Lt={};Lt[Z9]=Lt[X9]=Lt[eU]=Lt[tU]=Lt[iU]=Lt[rU]=Lt[nU]=Lt[sU]=Lt[aU]=!0;Lt[U9]=Lt[j9]=Lt[Y9]=Lt[$9]=Lt[Q9]=Lt[F9]=Lt[B9]=Lt[V9]=Lt[z9]=Lt[H9]=Lt[G9]=Lt[W9]=Lt[q9]=Lt[J9]=Lt[K9]=!1;function oU(e){return Nl(e)&&iA(e.length)&&!!Lt[Th(e)]}function cU(e){return function(t){return e(t)}}var aA=typeof qe=="object"&&qe&&!qe.nodeType&&qe,Pp=aA&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,dU=Pp&&Pp.exports===aA,c0=dU&&J5.process,$k=function(){try{var e=Pp&&Pp.require&&Pp.require("util").types;return e||c0&&c0.binding&&c0.binding("util")}catch{}}(),Fk=$k&&$k.isTypedArray,oA=Fk?cU(Fk):oU;function xb(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var lU=Object.prototype,uU=lU.hasOwnProperty;function pU(e,t,i){var r=e[t];(!(uU.call(e,t)&&bv(r,i))||i===void 0&&!(t in e))&&eS(e,t,i)}function hU(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?eS(i,o,c):pU(i,o,c)}return i}function gU(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var fU=9007199254740991,mU=/^(?:0|[1-9]\d*)$/;function cA(e,t){var i=typeof e;return t=t==null?fU:t,!!t&&(i=="number"||i!="symbol"&&mU.test(e))&&e>-1&&e%1==0&&e<t}var vU=Object.prototype,yU=vU.hasOwnProperty;function bU(e,t){var i=Rb(e),r=!i&&Cb(e),n=!i&&!r&&nA(e),s=!i&&!r&&!n&&oA(e),a=i||r||n||s,o=a?gU(e.length,String):[],c=o.length;for(var d in e)(t||yU.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||cA(d,c)))&&o.push(d);return o}function _U(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var wU=Object.prototype,SU=wU.hasOwnProperty;function EU(e){if(!As(e))return _U(e);var t=eA(e),i=[];for(var r in e)r=="constructor"&&(t||!SU.call(e,r))||i.push(r);return i}function dA(e){return tS(e)?bU(e,!0):EU(e)}function TU(e){return hU(e,dA(e))}function kU(e,t,i,r,n,s,a){var o=xb(e,i),c=xb(t,i),d=a.get(c);if(d){Pb(e,i,d);return}var l=s?s(o,c,i+"",e,t,a):void 0,u=l===void 0;if(u){var f=Rb(c),y=!f&&nA(c),b=!f&&!y&&oA(c);l=c,f||y||b?Rb(o)?l=o:C9(o)?l=y9(o):y?(u=!1,l=f9(c,!0)):b?(u=!1,l=v9(c,!0)):l=[]:N9(c)||Cb(c)?(l=o,Cb(o)?l=TU(o):(!As(o)||Zw(o))&&(l=S9(c))):u=!1}u&&(a.set(c,l),n(l,c,r,s,a),a.delete(c)),Pb(e,i,l)}function lA(e,t,i,r,n){e!==t&&h9(t,function(s,a){if(n||(n=new jl),As(s))kU(e,t,a,i,lA,r,n);else{var o=r?r(xb(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),Pb(e,a,o)}},dA)}function uA(e){return e}function PU(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var Bk=Math.max;function CU(e,t,i){return t=Bk(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=Bk(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),PU(e,this,o)}}function RU(e){return function(){return e}}var xU=ym?function(e,t){return ym(e,"toString",{configurable:!0,enumerable:!1,value:RU(t),writable:!0})}:uA,AU=800,IU=16,OU=Date.now;function MU(e){var t=0,i=0;return function(){var r=OU(),n=IU-(r-i);if(i=r,n>0){if(++t>=AU)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var DU=MU(xU);function LU(e,t){return DU(CU(e,t,uA),e+"")}function NU(e,t,i){if(!As(i))return!1;var r=typeof t;return(r=="number"?tS(i)&&cA(t,i.length):r=="string"&&t in i)?bv(i[t],e):!1}function UU(e){return LU(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&NU(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}var pA=UU(function(e,t,i){lA(e,t,i)});const jU=(e,t=ct)=>{let i=Object.assign({},t);return pA(i,e),i},$U=(e,t={},i={grid_pagination:!0,settings_toggle:!0})=>{var r,n,s,a,o,c,d,l,u,f,y,b;const k={showSetupScreen:!0};let P,w=["dyte-stage"],E={},R={};const D=(i==null?void 0:i.settings_toggle)!==!1,V=(i==null?void 0:i.grid_pagination)!==!1;if(!((r=e.controlBar)===null||r===void 0)&&r.isEnabled){w.push("dyte-controlbar");const{elements:q}=e.controlBar,fe=["dyte-breakout-rooms-toggle","dyte-livestream-toggle"],ae=[],he=["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-mute-all-button",...D?["dyte-settings-toggle"]:[],"dyte-leave-button"];q.fullscreen&&fe.push("dyte-fullscreen-toggle"),q.screenshare&&fe.push("dyte-screen-share-toggle"),fe.push("dyte-recording-toggle"),fe.push("dyte-pip-toggle"),q.chat&&ae.push("dyte-chat-toggle"),q.polls&&ae.push("dyte-polls-toggle"),q.participants&&ae.push("dyte-participants-toggle"),q.plugins&&ae.push("dyte-plugins-toggle"),ae.push("dyte-ai-toggle");const tt=fe.concat(["dyte-mute-all-button"]).concat(ae);D&&tt.push("dyte-settings-toggle");let ht=!1;tt.length>0&&(ht=!0),R={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":fe,"div#controlbar-center":he,"div#controlbar-right":ae,"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-controlbar.activeMoreMenu.sm":{add:["div#more-menu"]},"dyte-controlbar.activeMoreMenu.md":{add:["div#more-menu"]},"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button",ht&&"dyte-more-toggle"],"div#more-menu":tt.map(ii=>[ii,{variant:"horizontal"}])}}if(!((n=e.header)===null||n===void 0)&&n.isEnabled){w.unshift("dyte-header");const{elements:q}=e.header;let fe=["dyte-recording-indicator","dyte-livestream-indicator"],ae=[],he=[];V&&he.push("dyte-grid-pagination"),q.title&&ae.push("dyte-meeting-title"),typeof q.logo=="string"&&q.logo.length>0&&(P=q.logo,fe.unshift("dyte-logo")),q.participantCount&&he.push("dyte-participant-count","dyte-viewer-count"),q.timer&&he.push("dyte-clock"),E={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":fe,"div#header-center":ae,"div#header-right":he,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}w.push("dyte-participants-audio","dyte-dialog-manager");let B={logo:P};e.isV2===!0?(B=e.designTokens,jo((a=(s=e==null?void 0:e.designTokens)===null||s===void 0?void 0:s.colors)===null||a===void 0?void 0:a.textOnBrand)&&(B.colors["text-on-brand"]=(c=(o=e==null?void 0:e.designTokens)===null||o===void 0?void 0:o.colors)===null||c===void 0?void 0:c.textOnBrand),jo((l=(d=e==null?void 0:e.designTokens)===null||d===void 0?void 0:d.colors)===null||l===void 0?void 0:l.videoBg)&&(B.colors["video-bg"]=(f=(u=e==null?void 0:e.designTokens)===null||u===void 0?void 0:u.colors)===null||f===void 0?void 0:f.videoBg)):e.colors!=null&&(B.colors={},jo(e.colors.primary)?B.colors.brand=h8(e.colors.primary):typeof e.colors.primary=="object"&&(B.colors.brand=e.colors.primary),jo(e.colors.secondary)?B.colors.background=g8(e.colors.secondary):typeof e.colors.secondary=="object"&&(B.colors.background=e.colors.secondary),jo(e.colors.text)&&(B.colors.text=e.colors.text),jo(e.colors.textPrimary)&&(B.colors["text-on-brand"]=e.colors.textPrimary),jo(e.colors.videoBackground)&&(B.colors["video-bg"]=e.colors.videoBackground));let W={designTokens:B,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",height:"76px",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"div#more-menu":{position:"absolute",boxSizing:"border-box",top:"0",left:"0",width:"100%",transform:"translateY(-100%)",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))",padding:"16px 12px",borderRadius:"18px 18px 0 0",zIndex:"400"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":w,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},E),R),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-media",...D?["div#setupcontrols-settings"]:[]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return W=jU(t,W),k.showSetupScreen=(b=(y=e.setupScreen)===null||y===void 0?void 0:y.isEnabled)!==null&&b!==void 0?b:!0,{config:W,data:k}},FU={chat:"Chat","chat.new":"New",participants:"Participants",polls:"Polls",plugins:"Plugins",mic_off:"Mic Off",mic_on:"Mic On",video_off:"Video Off",video_on:"Video On",left_meeting:"You left the meeting",share_screen_start:"Share Screen",share_screen_stop:"Stop Sharing",leave:"Leave",dismiss:"Dismiss",page:"Page",settings:"Settings",audio:"Audio",video:"Video",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",end_meeting_for_all:"End meeting for all",cancel:"Cancel",yes:"Yes",you:"you",mute:"Mute",kick:"Kick","participant.turn_off_video":"Turn off video",perm_browser_denied:"Permission denied by browser","perm.sys_denied.message":"To enable system permission, go to Mac's System Preferences -> Security & Privacy ->  Privacy -> Select Microphone, Camera or 'Screen Recording' and allow permission for your specific browser","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_denied_title.video":"Camera permission denied","perm_denied_title.audio":"Mic permission denied","perm_denied_title.screenshare":"Screenshare permission denied","perm_denied_text.audio":"It seems like your browser or system has blocked permission for us to access microphone. Please allow this permission and reload for a smoother experience.","perm_denied_text.video":"It seems like your browser or system has blocked permission for us to access camera. Please allow this permission and reload for a smoother experience.","perm_denied_text.screenshare":"It seems like your browser or system has blocked permission for us to screenshare. Please allow this permission and reload for a smoother experience.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"To begin the webinar, please join the stage or accept a join stage request from the participants tab.","stage.empty_viewer":"Webinar has not yet been started","stage.remove_from_stage":"Remove from stage","stage.add_to_stage":"Add to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...",pip_on:"Show PiP",pip_off:"Hide PiP","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute","participants.empty_search_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",join:"Join",joined:"Joined",create:"Create",close:"Close","confirmation_modal.header":"Are you sure?",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View"},ee=(e=FU)=>t=>{var i;return(i=e[t])!==null&&i!==void 0?i:t},Z={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9.99906 2.16577C14.6024 2.16577 18.3341 5.89744 18.3341 10.5008C18.3341 15.1033 14.6024 18.8349 9.99906 18.8349C5.39573 18.8349 1.66406 15.1033 1.66406 10.5008C1.66406 5.89744 5.39573 2.16577 9.99906 2.16577ZM12.4482 14.2499H7.54906C8.0924 16.2616 9.0374 17.5849 9.99823 17.5849C10.9591 17.5849 11.9041 16.2616 12.4474 14.2499H12.4482ZM6.25656 14.2499H3.98656C4.79114 15.5374 5.9867 16.5335 7.39823 17.0924C6.96323 16.4091 6.60406 15.5541 6.3399 14.5799L6.2549 14.2508L6.25656 14.2499ZM16.0107 14.2499H13.7424C13.4724 15.3624 13.0824 16.3333 12.5982 17.0924C13.9206 16.5694 15.0556 15.6617 15.8566 14.4866L16.0107 14.2508V14.2499ZM5.91073 8.83327H3.11156L3.1074 8.84744C2.9781 9.38904 2.91293 9.94396 2.91323 10.5008C2.91323 11.3808 3.07406 12.2233 3.3674 13.0008H6.01156C5.81031 11.621 5.77589 10.2221 5.90906 8.83411L5.91073 8.83327ZM12.8299 8.83327H7.16823C7.02162 10.221 7.05945 11.6221 7.28073 12.9999H12.7174C12.9386 11.6221 12.9764 10.221 12.8299 8.83327ZM16.8866 8.83327H14.0882C14.1399 9.37244 14.1674 9.93077 14.1674 10.4999C14.1687 11.3366 14.108 12.1722 13.9857 12.9999H16.6299C16.9308 12.2008 17.0844 11.3538 17.0832 10.4999C17.0832 9.92577 17.0149 9.3666 16.8866 8.83327ZM7.39906 3.90827L7.3799 3.91494C5.67441 4.59596 4.29862 5.91053 3.54073 7.58327H6.08073C6.3424 6.12327 6.7974 4.8516 7.3999 3.90827H7.39906ZM9.99906 3.41577L9.9024 3.41994C8.84906 3.5166 7.82906 5.18494 7.3574 7.58327H12.6424C12.1707 5.1916 11.1566 3.52577 10.1049 3.42077L9.99906 3.4166V3.41577ZM12.5991 3.90744L12.6882 4.05327C13.2457 4.97994 13.6691 6.19661 13.9174 7.58411H16.4574C15.7339 5.98751 14.4463 4.71438 12.8416 4.0091L12.5991 3.90827V3.90744Z"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 13"><path fill="currentColor" d="M10.0309 4.00462C12.24 4.00462 14.0309 5.79549 14.0309 8.00462C14.0309 10.2138 12.24 12.0046 10.0309 12.0046C7.82174 12.0046 6.03088 10.2138 6.03088 8.00462C6.03088 5.79549 7.82174 4.00462 10.0309 4.00462ZM10.0309 5.50462C8.65017 5.50462 7.53088 6.62391 7.53088 8.00462C7.53088 9.38534 8.65017 10.5046 10.0309 10.5046C11.4116 10.5046 12.5309 9.38534 12.5309 8.00462C12.5309 6.62391 11.4116 5.50462 10.0309 5.50462ZM10.0309 0.5C14.6444 0.5 18.627 3.65001 19.732 8.06439C19.8326 8.4662 19.5884 8.87348 19.1866 8.97406C18.7848 9.07465 18.3775 8.83045 18.2769 8.42863C17.338 4.67796 13.9522 2 10.0309 2C6.10781 2 2.72098 4.68026 1.78374 8.43315C1.68337 8.83502 1.27623 9.07944 0.874363 8.97908C0.472492 8.87872 0.228071 8.47158 0.328434 8.06971C1.43153 3.65272 5.41536 0.5 10.0309 0.5Z"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>'},BU=({element:e,size:t,states:i={},config:r={}})=>{let n=[];const s=r==null?void 0:r.root[e],a=o=>{n.push(o),typeof t=="string"&&n.push(`${o}.${t}`)};if(a(e),typeof s=="object"&&!Array.isArray(s)&&s!==null){const{state:o,states:c}=s;let d=e,l=[];if(Array.isArray(c)){l=c.filter(u=>i[u]),l.sort();for(const u of l)a(`${d}.${u}`);if(l.length>1){const u=[d,...l].join(".");a(u)}}if(typeof o=="string"){const u=`${e}[${o}=${i[o]}]`;a(u);for(const f of l)a(`${u}.${f}`);if(l.length>1){const f=[u,...l].join(".");a(f)}}}return n},VU=({selectors:e,styles:t})=>{if(!Array.isArray(e)||t==null)return{};const i={};for(const r of e){const n=t[r];n!=null&&Object.assign(i,n)}return i},zU=({selectors:e,root:t})=>{if(!t||!Array.isArray(e))return[];let i=[];for(const r of e){const n=t[r];if(Array.isArray(n))i=[...n];else if(n){if(n.children&&(i=[...n.children]),Array.isArray(n.remove))for(const s of n.remove)i=i.filter(a=>typeof a=="string"?a!==s:Array.isArray(a)?a[0]!==s:!0);if(n.addBefore)for(const[s,a]of Object.entries(n.addBefore)){const o=i.findIndex(c=>typeof c=="string"?c===s:Array.isArray(c)?c[0]===s:!1);o>=0&&i.splice(o,0,...a)}Array.isArray(n.add)&&(i=i.concat(n.add)),Array.isArray(n.prepend)&&(i=n.prepend.concat(i))}}return i},wg=({elements:e,defaults:t,props:i={},deepProps:r=!1,elementProps:n={}})=>!Array.isArray(e)||e.length===0?null:e.map(s=>h(rt,{element:s,defaults:t,props:i,childProps:r&&i,elementProps:n})),rt=({element:e,defaults:t,childProps:i={},props:r={},onlyChildren:n=!1,asHost:s=!1,deepProps:a=!1,elementProps:o={}},c)=>{var d;const{config:l,size:u,states:f}=t;let y,b={};Array.isArray(e)?[y,b]=e:y=e;const k=(d=l==null?void 0:l.root)===null||d===void 0?void 0:d[y];k!=null&&"props"in k&&(r=Object.assign(Object.assign({},k.props),r)),r=Object.assign(Object.assign({},r),b),y in o&&(r=Object.assign(Object.assign({},r),o[y]));const P=BU({element:y,size:u,states:f,config:l}),w=zU({selectors:P,root:l.root});if(n)return h(wg,{elements:w,defaults:t,props:i,deepProps:a,elementProps:o});const E=VU({selectors:P,styles:l.styles});if(s)return h(z,Object.assign({},t,{style:E},r),h(wg,{elements:w,defaults:t,props:i,deepProps:a,elementProps:o}),c);if(["dyte-header","dyte-controlbar"].includes(y)&&(r.disableRender=!0),y.startsWith("dyte-"))return h(y,Object.assign({},t,{style:E},r),h(wg,{elements:w,defaults:t,props:i,deepProps:a,elementProps:o}),c);{const[R,D]=y.split("#");return h(R,{id:D,style:E},h(wg,{elements:w,defaults:t,props:i,deepProps:a,elementProps:o}),c)}},Vk={get:(e,t,i)=>(...r)=>{try{return Reflect.get(e,t,i).apply(e,r)}catch{return null}}};let Ab;try{Ab=new Proxy(localStorage,Vk)}catch{Ab=new Proxy({},Vk)}const go=Ab,iS="dyte-prefs",hA=(e,t)=>{const i=JSON.parse(go.getItem(iS)||"{}");i[e]=JSON.stringify(t),go.setItem("dyte-prefs",JSON.stringify(i))},gA=e=>JSON.parse(go.getItem(iS)||"{}")[e],HU=()=>{const e=JSON.parse(go.getItem(iS)||"{}"),t=e["mirror-video"]?e["mirror-video"]==="true":!0,i=e["mute-notification-sounds"]?e["mute-notification-sounds"]==="true":!1;return{mirrorVideo:t,muteNotificationSounds:i}},bm={},GU=(e,t,i)=>{const r=e.get(t);r?r.includes(i)||r.push(i):e.set(t,[i])},WU=(e,t)=>{let i;return(...r)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,e(...r)},t)}},qU=e=>!("isConnected"in e)||e.isConnected,zk=WU(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(qU))},2e3),JU=()=>{if(typeof _k!="function")return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const i=_k();i&&GU(e,t,i)},set:t=>{const i=e.get(t);i&&e.set(t,i.filter(wk)),zk(e)},reset:()=>{e.forEach(t=>t.forEach(wk)),zk(e)}}},d0=e=>typeof e=="function"?e():e,KU=(e,t=(i,r)=>i!==r)=>{const i=d0(e);let r=new Map(Object.entries(i!=null?i:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{var b;r=new Map(Object.entries((b=d0(e))!==null&&b!==void 0?b:{})),n.reset.forEach(k=>k())},a=()=>{n.dispose.forEach(b=>b()),s()},o=b=>(n.get.forEach(k=>k(b)),r.get(b)),c=(b,k)=>{const P=r.get(b);t(k,P,b)&&(r.set(b,k),n.set.forEach(w=>w(b,k,P)))},d=typeof Proxy>"u"?{}:new Proxy(i,{get(b,k){return o(k)},ownKeys(b){return Array.from(r.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(b,k){return r.has(k)},set(b,k,P){return c(k,P),!0}}),l=(b,k)=>(n[b].push(k),()=>{YU(n[b],k)});return{state:d,get:o,set:c,on:l,onChange:(b,k)=>{const P=l("set",(E,R)=>{E===b&&k(R)}),w=l("reset",()=>k(d0(e)[b]));return()=>{P(),w()}},use:(...b)=>{const k=b.reduce((P,w)=>(w.set&&P.push(l("set",w.set)),w.get&&P.push(l("get",w.get)),w.reset&&P.push(l("reset",w.reset)),w.dispose&&P.push(l("dispose",w.dispose)),P),[]);return()=>k.forEach(P=>P())},dispose:a,reset:s,forceUpdate:b=>{const k=r.get(b);n.set.forEach(P=>P(b,k,k))}}},YU=(e,t)=>{const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.length--)},QU=(e,t)=>{const i=KU(e,t);return i.use(JU()),i},{state:K,onChange:$l}=QU({});var fA=function(){if(typeof Map<"u")return Map;function e(t,i){var r=-1;return t.some(function(n,s){return n[0]===i?(r=s,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var r=e(this.__entries__,i),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(i,r){var n=e(this.__entries__,i);~n?this.__entries__[n][1]=r:this.__entries__.push([i,r])},t.prototype.delete=function(i){var r=this.__entries__,n=e(r,i);~n&&r.splice(n,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,r){r===void 0&&(r=null);for(var n=0,s=this.__entries__;n<s.length;n++){var a=s[n];i.call(r,a[1],a[0])}},t}()}(),Ib=typeof window<"u"&&typeof document<"u"&&window.document===document,_m=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ZU=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(_m):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),XU=2;function ej(e,t){var i=!1,r=!1,n=0;function s(){i&&(i=!1,e()),r&&o()}function a(){ZU(s)}function o(){var c=Date.now();if(i){if(c-n<XU)return;r=!0}else i=!0,r=!1,setTimeout(a,t);n=c}return o}var tj=20,ij=["top","right","bottom","left","width","height","size","weight"],rj=typeof MutationObserver<"u",nj=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=ej(this.refresh.bind(this),tj)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,r=i.indexOf(t);~r&&i.splice(r,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Ib||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),rj?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Ib||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,r=i===void 0?"":i,n=ij.some(function(s){return!!~r.indexOf(s)});n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),mA=function(e,t){for(var i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},Cl=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||_m},vA=Sv(0,0,0,0);function wm(e){return parseFloat(e)||0}function Hk(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(r,n){var s=e["border-"+n+"-width"];return r+wm(s)},0)}function sj(e){for(var t=["top","right","bottom","left"],i={},r=0,n=t;r<n.length;r++){var s=n[r],a=e["padding-"+s];i[s]=wm(a)}return i}function aj(e){var t=e.getBBox();return Sv(0,0,t.width,t.height)}function oj(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return vA;var r=Cl(e).getComputedStyle(e),n=sj(r),s=n.left+n.right,a=n.top+n.bottom,o=wm(r.width),c=wm(r.height);if(r.boxSizing==="border-box"&&(Math.round(o+s)!==t&&(o-=Hk(r,"left","right")+s),Math.round(c+a)!==i&&(c-=Hk(r,"top","bottom")+a)),!dj(e)){var d=Math.round(o+s)-t,l=Math.round(c+a)-i;Math.abs(d)!==1&&(o-=d),Math.abs(l)!==1&&(c-=l)}return Sv(n.left,n.top,o,c)}var cj=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Cl(e).SVGGraphicsElement}:function(e){return e instanceof Cl(e).SVGElement&&typeof e.getBBox=="function"}}();function dj(e){return e===Cl(e).document.documentElement}function lj(e){return Ib?cj(e)?aj(e):oj(e):vA}function uj(e){var t=e.x,i=e.y,r=e.width,n=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return mA(a,{x:t,y:i,width:r,height:n,top:i,right:t+r,bottom:n+i,left:t}),a}function Sv(e,t,i,r){return{x:e,y:t,width:i,height:r}}var pj=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Sv(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=lj(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),hj=function(){function e(t,i){var r=uj(i);mA(this,{target:t,contentRect:r})}return e}(),gj=function(){function e(t,i,r){if(this.activeObservations_=[],this.observations_=new fA,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Cl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new pj(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Cl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;!i.has(t)||(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(r){return new hj(r.target,r.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),yA=typeof WeakMap<"u"?new WeakMap:new fA,bA=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=nj.getInstance(),r=new gj(t,i,this);yA.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){bA.prototype[e]=function(){var t;return(t=yA.get(this))[e].apply(t,arguments)}});var _A=function(){return typeof _m.ResizeObserver<"u"?_m.ResizeObserver:bA}();const Ev=e=>ya(e)?e.meta.viewType==="LIVESTREAM"&&e.stage.status!=="ON_STAGE":!1,fj=e=>{var t;return ya(e)?e.meta.viewType==="LIVESTREAM"&&((t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions.canLivestream):!1},ya=e=>{var t;return((t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions.isV2)&&(e==null?void 0:e.livestream)};var _s;(function(e){e.BUFFERING="Buffering",e.ENDED="Ended",e.IDLE="Idle",e.PLAYING="Playing",e.READY="Ready"})(_s||(_s={}));var di;(function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.ANALYTICS_EVENT="PlayerAnalyticsEvent",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.SESSION_DATA="PlayerSessionData",e.STATE_CHANGED="PlayerStateChanged",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata",e.TEXT_CUE="PlayerTextCue",e.TEXT_METADATA_CUE="PlayerTextMetadataCue",e.AD_CUE="PlayerAdCue",e.STREAM_SOURCE_CUE="PlayerStreamSourceCue",e.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",e.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",e.SEGMENT_METADATA="PlayerSegmentMetadata",e.PLAYER_METADATA="PlayerMetadata"})(di||(di={}));const mj=[di.TIME_UPDATE,di.BUFFER_UPDATE,di.TEXT_METADATA_CUE,di.PLAYER_METADATA],vj=[di.REBUFFERING,di.AUDIO_BLOCKED,di.PLAYBACK_BLOCKED,di.ERROR,di.RECOVERABLE_ERROR,di.WORKER_ERROR,di.NETWORK_UNAVAILABLE,di.ANALYTICS_EVENT,di.PLAYBACK_RATE_CHANGED,di.QUALITY_CHANGED,di.INITIALIZED],yj=e=>{var t,i,r,n,s,a;return ya(e)?((i=(t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions)===null||i===void 0?void 0:i.canProduceAudio)==="ALLOWED"||((n=(r=e==null?void 0:e.self)===null||r===void 0?void 0:r.permissions)===null||n===void 0?void 0:n.canProduceScreenshare)==="ALLOWED"||((a=(s=e==null?void 0:e.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo)==="ALLOWED":!1},bj=e=>{var t,i,r,n,s,a,o,c;return ya(e)?((i=(t=e==null?void 0:e.self)===null||t===void 0?void 0:t.permissions)===null||i===void 0?void 0:i.canProduceAudio)!=="NOT_ALLOWED"||((n=(r=e==null?void 0:e.self)===null||r===void 0?void 0:r.permissions)===null||n===void 0?void 0:n.canProduceScreenshare)!=="NOT_ALLOWED"||((a=(s=e==null?void 0:e.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo)!=="NOT_ALLOWED"||((c=(o=e==null?void 0:e.self)===null||o===void 0?void 0:o.permissions)===null||c===void 0?void 0:c.canLivestream):!1},_j=async e=>{if(e==null)return Z;try{const t=await fetch(e);return t.ok?Object.assign({},Z,await t.json()):Z}catch{return Z}},wj=640,Sj=768,Ej=1080,Tj=2160,Gk={sm:wj,md:Sj,lg:Ej,xl:Tj},kj=e=>e>=Gk.lg?"lg":e>=Gk.md?"md":"sm",Pj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}",wA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),K.meeting="joined"},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),K.meeting="waiting"},this.roomLeftListener=({state:t})=>{const i=this.states||K;if((i==null?void 0:i.roomLeftState)==="disconnected"){this.setStates({meeting:"ended",roomLeftState:t}),K.meeting="ended";return}this.setStates({meeting:"ended",roomLeftState:t}),K.meeting="ended",K.roomLeftState=t},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{if(["audio","video"].includes(t)){if(i==="ACCEPTED")return;const r={enabled:!0,kind:t};this.setStates({activePermissionsMessage:r}),K.activePermissionsMessage=r}},this.joinStateAcceptedListener=()=>{this.setStates({activeJoinStage:!0}),this.stateUpdate.emit({activeJoinStage:!0}),K.activeJoinStage=!0},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=ee(),this.config=ct,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.middlewares={},this.newMeeting=void 0,this.iconPack=Z}connectedCallback(){var e;this.resizeObserver=new _A(()=>this.handleResize()),this.resizeObserver.observe(this.host),this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&xk(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.initializePreferences()}clearListeners(e){e!=null&&(e.self.removeListener("roomJoined",this.roomJoinedListener),e.self.removeListener("socketServiceRoomJoined",this.roomJoinedListener),e.meta.removeListener("socketReconnected",this.roomJoinedListener),e.self.removeListener("roomLeft",this.roomLeftListener),e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.removeListener("waitlisted",this.waitlistedListener),e.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener))}disconnectedCallback(){var e;this.leaveOnUnmount&&((e=this.meeting)===null||e===void 0||e.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(e){var t,i;if(e!=null){if(this.loadConfigFromPreset&&e.self.config!=null){const r=e.self.config,{config:n,data:s}=$U(r);this.config===ct&&(this.config=n),this.showSetupScreen==null&&(this.showSetupScreen=s.showSetupScreen),e.connectedMeetings.supportsConnectedMeetings&&((t=K.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&((i=this.config)===null||i===void 0?void 0:i.designTokens)!=null&&typeof document<"u"&&xk(document.documentElement,this.config.designTokens),Ev(e)?e.self.addListener("socketServiceRoomJoined",this.roomJoinedListener):e.self.addListener("roomJoined",this.roomJoinedListener),e.self.addListener("waitlisted",this.waitlistedListener),e.self.addListener("roomLeft",this.roomLeftListener),e.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),e.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),e.connectedMeetings.supportsConnectedMeetings&&e.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),e.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),K.meeting="joined"):this.showSetupScreen&&this.newMeeting==null?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),K.meeting="setup"):e.joinRoom()}}async iconPackUrlChanged(e){this.iconPack=await _j(e)}listenState(e){e.stopPropagation(),this.setStates(e.detail)}initializePreferences(){const e=HU();this.setStates({prefs:e}),K.prefs=e}handleChangingMeeting(e){K.activeBreakoutRoomsManager=Object.assign(Object.assign({},K.activeBreakoutRoomsManager),{destinationMeetingId:e})}handleResize(){this.size=kj(this.host.clientWidth)}setStates(e){const t=Object.assign({},this.states);pA(t,e),this.states=t}render(){var e;const t={meeting:(e=this.newMeeting)!==null&&e!==void 0?e:this.meeting,size:this.size,states:this.states||K,config:this.config,iconPack:this.iconPack,t:this.t,middlewares:this.middlewares},i={"dyte-grid":{layout:this.gridLayout}};return h(rt,{element:"dyte-meeting",defaults:t,asHost:!0,elementProps:i})}get host(){return ma(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};wA.style=Pj;var Cj=Object.freeze({__proto__:null,dyte_meeting:wA});const Rj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",SA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),K.activeAI=!1},this.defaultSection="home",this.meeting=void 0,this.middlewares={},this.states=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var e,t,i,r;this.viewChanged(this.view),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.on("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.on("chatGPTReply",this.aiMessageHandler)}disconnectedCallback(){var e,t,i,r;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("transcription",this.transcriptionHandler),(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.off("chatGPTReply",this.aiMessageHandler)}viewChanged(e){e==="full-screen"&&(this.keydownListener=t=>{t.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(e){e==="transcriptions"&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),e==="home"&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(e){this.tab=e,K.activeSidebar=!0}transcriptionHandler(){this.tab!=="transcriptions"&&(this.newTranscriptionAvailable=!0)}aiMessageHandler(){this.tab!=="home"&&(this.newAiMessageAvailable=!0)}render(){var e;if(!this.middlewares.speech||!(!((e=this.states)===null||e===void 0)&&e.activeAI))return null;const t={meeting:this.meeting,config:this.config,states:this.states||K,size:this.size,t:this.t,iconPack:this.iconPack,middlewares:this.middlewares},i=this.middlewares.speech;return h(z,null,h("h3",{class:"title"},this.t("ai")),h("div",{id:"mobile-header"},h("dyte-button",{variant:"ghost",class:{active:this.tab==="home"},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&h("span",{class:"dot"},".")),h("dyte-button",{variant:"ghost",class:{active:this.tab==="transcriptions"},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&h("span",{class:"dot"},"."))),h("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("Close"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.tab==="home"&&h(rt,{element:"dyte-ai-home",defaults:t,props:{aiClient:i,initialMessages:i.aiMesssages,meeting:this.meeting}}),this.tab==="transcriptions"&&h(rt,{element:"dyte-ai-transcriptions",defaults:t,props:{aiClient:i,initialTranscriptions:i.transcriptions}}),this.tab==="personal"&&h(rt,{element:"dyte-ai-chat",defaults:t}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};SA.style=Rj;var xj=Object.freeze({__proto__:null,dyte_ai:SA});const Aj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}",EA=class{constructor(e){X(this,e)}render(){return h(z,null,h("p",{class:"private-message"},"This conversation will just be visible to you and not to others in the call."),h("div",{class:"hint-message"},h("p",null,"Ask ",h("i",null,'"Hey AI, summarise this call"'),h("br",null)," or ",h("br",null),"Type ",h("i",null,`"Hey AI, what is today's agenda?"`))))}};EA.style=Aj;var Ij=Object.freeze({__proto__:null,dyte_ai_chat:EA});const TA=(e,t)=>{const i=t.getTime()-e.getTime();return Math.round(Math.abs(i/1e3/60))},Oj=(e,t)=>{const i=TA(e,t);if(i<2)return"just now";if(i<60)return`${i}m ago`;const r=Math.round(i/60);if(i<90)return`about ${r}h ago`;if(r<24)return`${r}h ago`;const n=Math.round(r/24);return n<7?`${n}d ago`:`${Math.round(n/7)}w ago`},Mj=e=>e.toDateString()+" "+e.toLocaleTimeString(),Or=(e,t=20)=>e==null?"":e.length>t?`${e.substring(0,t)}...`:e,Dj=e=>{const t=/^\d+$/;return/^\p{Emoji}+$/u.test(e)&&!t.test(e)},rS=e=>e!=null&&e.trim().toLowerCase().startsWith("javascript:")?"https://dyte.io":e,yn=e=>(e=e==null?void 0:e.trim(),e===""?"Participant":e);function kA(e,t=2){return e.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,t).map(n=>n.charAt(0)).join("").toUpperCase()}const kh=({name:e,time:t,now:i})=>h("div",{class:"head"},h("div",{class:"name"},Or(yn(e),20)),h("div",{class:"time",title:Mj(t)},Oj(t,i))),fo=(e,t=!0)=>{e!=null&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})},Lj=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}`,PA=class{constructor(e){X(this,e),this.handleSubmit=t=>{var i,r;t.preventDefault(),t.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],(r=(i=this.middlewares)===null||i===void 0?void 0:i.speech)===null||r===void 0||r.sendMessageToChatGPT({action:"default",message:this.prompt}),this.prompt=""},this.handleSummarise=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"summarization"})},this.handleAgenda=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"agenda generation"})},this.handleMoM=()=>{var t,i;(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.sendMessageToChatGPT({action:"action items generation"})},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0,this.middlewares={}}handleChatGPTReply(e){const t=this.messages.find(i=>e.action==="default"?i.id===e.id:i.id===e.id||i.action===this.mapMessageAction(e.action));t&&(t.loading||t.action!==this.mapMessageAction("default"))?this.messages=[...this.messages.map(i=>i.id===e.id||i.action===this.mapMessageAction(e.action)?Object.assign(Object.assign({},e),{action:this.mapMessageAction(e.action)}):i)]:this.messages=[...this.messages,Object.assign(Object.assign({},e),{action:this.mapMessageAction(e.action)})]}connectedCallback(){var e,t,i;this.initialMessages?this.messages=this.initialMessages.map(r=>Object.assign(Object.assign({},r),{action:this.mapMessageAction(r.action)})):!((e=this.middlewares)===null||e===void 0)&&e.speech&&setTimeout(()=>{var r;this.messages=(r=this.middlewares.speech.aiMesssages)===null||r===void 0?void 0:r.map(n=>Object.assign(Object.assign({},n),{action:this.mapMessageAction(n.action)}))},1e3),(i=(t=this.middlewares)===null||t===void 0?void 0:t.speech)===null||i===void 0||i.on("chatGPTReply",r=>this.handleChatGPTReply(r))}disconnectedCallback(){var e,t;(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("chatGPTReply",i=>this.handleChatGPTReply(i))}messagesUpdated(){setTimeout(()=>{fo(this.contentContainer,!1)},100)}mapMessageAction(e){switch(e){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return h(z,null,h("div",{class:"content scrollbar",ref:e=>this.contentContainer=e},h("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&h("div",{class:"hint-message"},h("p",null,"Ask ",h("i",null,'"Hey AI, summarise this call"'),h("br",null)," or ",h("br",null),"Type ",h("i",null,`"Hey AI, what is today's agenda?"`))),this.messages.length>0&&h("div",{class:""},this.messages.map(e=>h("div",{class:"message"},h(kh,{name:e.action,time:new Date(e.createdAt),now:new Date}),h("p",{class:"subtitle"},"Triggered by ",e.participantName),e.prompt&&h("div",{class:"prompt-text"},e.prompt),e.loading?h("div",{class:"loader"},h("dyte-spinner",{size:"sm"}),"\xA0\xA0Generating..."):h("div",{class:"body"},e.response))))),h("div",{class:"actions"},h("span",null,"Quick actions:"),h("div",null,h("button",{onClick:this.handleSummarise},"Summarise"),h("button",{onClick:this.handleAgenda},"Agenda"),h("button",{onClick:this.handleMoM},"MoM"))),h("form",{class:"prompt",onSubmit:this.handleSubmit},h("input",{value:this.prompt,onInput:e=>{this.prompt=e.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};PA.style=Lj;var Nj=Object.freeze({__proto__:null,dyte_ai_home:PA});const Uj=":host{display:block}",CA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.middlewares={},this.aiActive=!1}statesChanged(e){const t=e||K;this.aiActive=t.activeAI}toggleAI(){const e=this.states||K;this.aiActive=!(e!=null&&e.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),K.activeAI=this.aiActive,K.activeMoreMenu=!1}render(){const e=this.t("ai.meeting_ai");return this.middlewares.speech?h(z,{title:e},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:e,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};CA.style=Uj;var jj=Object.freeze({__proto__:null,dyte_ai_toggle:CA});const $j=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}`,RA=class{constructor(e){X(this,e),this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=ee(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0,this.middlewares={}}transcriptionHandler(e){this.transcriptions=[...this.transcriptions,e]}connectedCallback(){var e,t;this.initialTranscriptions&&(this.transcriptions=[...this.initialTranscriptions]),(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.on("transcription",i=>this.transcriptionHandler(i))}disconnectedCallback(){var e,t;(t=(e=this.middlewares)===null||e===void 0?void 0:e.speech)===null||t===void 0||t.off("transcription",i=>this.transcriptionHandler(i))}transcriptionsChanged(){setTimeout(()=>{fo(this.contentContainer,!1)},100)}render(){return h(z,null,h("div",{class:"search-bar"},h("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:e=>this.participantQuery=e.target.value})),this.isProcessing&&h("div",{class:"processing"},h("p",null,"Processing audio....")),!this.isProcessing&&h("div",{class:"content scrollbar",ref:e=>this.contentContainer=e},h("div",{class:"started-message"},"Transcription started"),this.transcriptions.filter(e=>this.participantQuery?e.name.toLowerCase().includes(this.participantQuery.toLowerCase()):!0).map(e=>h("div",{class:"message"},h(kh,{name:e.name,time:new Date(e.date),now:new Date}),h("div",{class:"body"},e.transcript)))),this.captionViewEnabled&&h("dyte-ai-caption",null))}static get watchers(){return{transcriptions:["transcriptionsChanged"]}}};RA.style=$j;var Fj=Object.freeze({__proto__:null,dyte_ai_transcriptions:RA});let xA=0;function Bj(){return++xA}function Vj(){xA=0}const AA="temp-";function zj(){return{id:`${AA}${Math.random().toString(36)}`,title:`Room ${Bj()}`,participants:[]}}function l0(e){return e.includes(AA)}function Hj(e,t){const i=e.length,r=Math.ceil(i/t),n=new Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e.slice(s,s+r),s+=r;return n.filter(a=>a.length)}function pi(e){var t;return(t=e.customParticipantId)!==null&&t!==void 0?t:e.clientSpecificId}function IA(e){const t=new Map;return[e.self,...e.participants.joined.toArray()].map(i=>{t.set(pi(i),i.picture)}),[e.connectedMeetings.parentMeeting,...e.connectedMeetings.meetings].flatMap(i=>i.participants).map(i=>({id:i.id,customParticipantId:pi(i),displayName:i.displayName,displayPictureUrl:i.displayPictureUrl!==""?i.displayPictureUrl:t.get(pi(i))}))}var qr=function(e,t,i,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(e,i):n?n.value=i:t.set(e,i),i},me=function(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)},Gj=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i},Wr,Oa,Vn,zn,fc,Kr,Ka,Hn,Cp,Rp,OA,Sm,MA,DA,Pd;class Wj{constructor(){Wr.add(this),Oa.set(this,!1),Vn.set(this,void 0),zn.set(this,void 0),fc.set(this,void 0),Kr.set(this,void 0),Ka.set(this,void 0),Hn.set(this,void 0),Cp.set(this,void 0),Rp.set(this,void 0)}get hasLocalChanges(){return me(this,Oa,"f")}get currentState(){let t,i=[];return Array.from(me(this,Kr,"f").keys()).forEach(r=>{const n=me(this,Hn,"f").get(r);n.isParent?t=Object.assign(Object.assign({},n),{participants:me(this,Wr,"m",Pd).call(this,r)}):i.push(Object.assign(Object.assign({},n),{participants:me(this,Wr,"m",Pd).call(this,r)}))}),{parentMeeting:t,meetings:i}}get allConnectedMeetings(){return this.currentState.meetings.sort((t,i)=>t.title.localeCompare(i.title))}get allParticipants(){return Array.from(me(this,Ka,"f").values())}get unassignedParticipants(){return me(this,Wr,"m",Pd).call(this,me(this,Vn,"f").parentMeeting.id)}getParticipantsForMeeting(t){return me(this,Wr,"m",Pd).call(this,t)}addNewMeeting(){qr(this,Oa,!0,"f");const t=zj(),i=Gj(t,["participants"]);return me(this,Wr,"m",Sm).call(this,Object.assign(Object.assign({},i),{isParent:!1})),i}addNewMeetings(t){return Array.from({length:t}).map(()=>this.addNewMeeting())}updateMeetingTitle(t,i){me(this,Hn,"f").get(t).title=i,l0(t)||me(this,Cp,"f").add(t)}deleteMeeting(t){qr(this,Oa,!0,"f");const i=me(this,Hn,"f").get(t),r=me(this,Wr,"m",Pd).call(this,i.id).map(pi);this.assignParticipantsToMeeting(r,me(this,Vn,"f").parentMeeting.id),me(this,Hn,"f").delete(i.id),me(this,Kr,"f").delete(i.id),l0(i.id)||me(this,Rp,"f").add(i.id)}assignParticipantsToMeeting(t,i){return qr(this,Oa,!0,"f"),t.forEach(r=>{const n=me(this,zn,"f").get(r);me(this,Kr,"f").get(n).delete(r),me(this,Kr,"f").get(i).add(r),me(this,zn,"f").set(r,i)}),this.currentState}assignParticipantsRandomly(){const t=Hj(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach((i,r)=>{const n=t[r];n&&n.length!==0&&this.assignParticipantsToMeeting(n.map(s=>s.customParticipantId),i.id)}),this.currentState}unassignParticipants(t){const i=me(this,Vn,"f").parentMeeting.id;return this.assignParticipantsToMeeting(t,i)}unassignAllParticipants(){const t=me(this,Vn,"f").parentMeeting.id,i=this.allParticipants.map(pi);return this.assignParticipantsToMeeting(i,t)}updateCurrentState(t){me(this,Oa,"f")||me(this,Wr,"m",OA).call(this,t),[t.parentMeeting,...t.meetings].forEach((i,r)=>{const n=Object.assign(Object.assign({},i),{isParent:r===0});me(this,Wr,"m",Sm).call(this,n),i.participants.forEach(s=>{me(this,Wr,"m",MA).call(this,s,n)})})}get meetingsToCreate(){return this.allConnectedMeetings.filter(t=>l0(t.id)).map(({id:t,title:i})=>({id:t,title:i}))}get meetingsToUpdate(){return this.allConnectedMeetings.filter(t=>me(this,Cp,"f").has(t.id)).map(({id:t,title:i})=>({id:t,title:i}))}get meetingsToDelete(){return Array.from(me(this,Rp,"f"))}get participantsToMove(){const t=new Map;return Array.from(me(this,zn,"f").keys()).forEach(i=>{const r=me(this,fc,"f").get(i),n=me(this,zn,"f").get(i);if(r===n)return;const s=`${r}__${n}`;t.has(s)||t.set(s,[]);const a=me(this,Ka,"f").get(i);t.get(s).push(a.id)}),Array.from(t.keys()).map(i=>{const[r,n]=i.split("__");return{sourceMeetingId:r,destinationMeetingId:n,participantIds:t.get(i)}})}async applyChanges(t){const i=this.meetingsToCreate.length!==0?t.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),r=this.meetingsToUpdate.length!==0?t.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[n]=await Promise.all([i,r]);n&&n.forEach(s=>{this.meetingsToCreate.forEach(a=>{a.title===s.title&&me(this,Wr,"m",DA).call(this,me(this,Hn,"f").get(a.id),s.id)})}),this.participantsToMove.length!==0&&this.participantsToMove.forEach(({sourceMeetingId:s,destinationMeetingId:a,participantIds:o})=>{t.connectedMeetings.moveParticipants(s,a,o)}),this.meetingsToDelete.length!==0&&t.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return qr(this,Oa,!1,"f"),this.updateCurrentState(me(this,Vn,"f")),this.currentState}}Oa=new WeakMap,Vn=new WeakMap,zn=new WeakMap,fc=new WeakMap,Kr=new WeakMap,Ka=new WeakMap,Hn=new WeakMap,Cp=new WeakMap,Rp=new WeakMap,Wr=new WeakSet,OA=function(t){qr(this,Vn,t,"f"),qr(this,Hn,new Map,"f"),qr(this,Ka,new Map,"f"),qr(this,Cp,new Set,"f"),qr(this,Rp,new Set,"f"),qr(this,Kr,new Map,"f"),qr(this,zn,new Map,"f"),qr(this,fc,new Map,"f"),qr(this,fc,new Map,"f"),me(this,Vn,"f").parentMeeting.participants.forEach(i=>{me(this,fc,"f").set(pi(i),me(this,Vn,"f").parentMeeting.id)}),me(this,Vn,"f").meetings.forEach(i=>{i.participants.forEach(r=>{me(this,fc,"f").set(pi(r),i.id)})})},Sm=function(t){me(this,Hn,"f").has(t.id)||(me(this,Hn,"f").set(t.id,t),me(this,Kr,"f").set(t.id,new Set))},MA=function(t,i){me(this,Ka,"f").has(pi(t))||(me(this,Ka,"f").set(pi(t),t),me(this,zn,"f").set(pi(t),i.id),me(this,Kr,"f").get(i.id).add(pi(t)))},DA=function(t,i){const r=t.id;me(this,Wr,"m",Sm).call(this,Object.assign(Object.assign({},t),{id:i})),me(this,Hn,"f").delete(r);const n=me(this,Kr,"f").get(r);me(this,Kr,"f").set(i,n),me(this,Kr,"f").delete(r),Array.from(me(this,zn,"f").keys()).forEach(s=>{me(this,zn,"f").get(s)===r&&me(this,zn,"f").set(s,i)})},Pd=function(t){return Array.from(me(this,Kr,"f").get(t)).map(r=>me(this,Ka,"f").get(r))};const qj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",ku=1,LA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.updateLocalState=t=>{this.stateManager.updateCurrentState(t),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),this.roomConfig.mode==="create"&&!this.meeting.connectedMeetings.isActive&&Vj(),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:t.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=t=>{const{detail:i}=t;this.stateManager.updateMeetingTitle(i.id,i.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=t=>{this.stateManager.allConnectedMeetings.find(r=>r.id===t)&&(this.stateManager.deleteMeeting(t),this.draftState=this.stateManager.currentState)},this.unassignParticipant=t=>{this.stateManager.unassignParticipants([t]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=t=>{this.selectedParticipants.length===0||this.assigningParticipants==!1||(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,t),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(t,i)=>{t.emit({activeBreakoutRoomsManager:{active:!0}}),i.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(t="start-breakout")=>{let i={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};t==="close-breakout"&&(i={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:i}),K.activeBreakoutRoomsManager={active:!1},K.activeConfirmationModal=i},this.close=()=>{var t;this.stateManager.discardChanges(),(t=this.stateUpdate)===null||t===void 0||t.emit({activeBreakoutRoomsManager:{active:!1}}),K.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=Z,this.t=ee()}onSelectedParticipantsChanged(e){e.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissions=this.meeting.self.permissions.connectedMeetings,this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.stateManager=new Wj,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(e){this.ephemeralStatusText=e,setTimeout(()=>{this.ephemeralStatusText=""},3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(e){const{detail:t}=e,i=pi(t);i!=null&&this.unassignParticipant(i)}toggleDragMode(e){this.isDragMode=e.detail}assignParticipantsRandomly(){this.stateManager.unassignedParticipants.length!==0&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(e){const t=pi(this.meeting.self);this.stateManager.assignParticipantsToMeeting([t],e),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach(e=>this.stateManager.deleteMeeting(e.id)),await this.applyChanges()}updateSelectedParticipants(e){this.selectedParticipants=e.detail}updateAllParticipants(e){this.selectedParticipants=e.detail}getStatusText(){if(this.ephemeralStatusText!=="")return this.ephemeralStatusText;let e="";return this.roomConfig.mode==="create"&&(e=this.t("breakout_rooms.status.assign_multiple"),this.selectedParticipants.length!==0&&(e=this.t("breakout_rooms.status.select_room"))),e}getApproxDistribution(){const e=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||ku);return Math.max(ku,Math.round(e))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return this.permissions.canAlterConnectedMeetings===!1}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter(e=>e.id===this.meeting.meta.roomName)}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?h("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return h(z,null,h("div",{class:"room-switcher-container"},h("header",null,h("dyte-icon",{icon:this.iconPack.breakout_rooms}),h("span",null,this.t("breakout_rooms.join_breakout_header"))),h("div",{class:"rooms",ref:e=>this.selectorRef=e},this.renderMainRoomMaybe(),this.getPermittedRooms().map((e,t)=>h("dyte-breakout-room-manager",{key:e.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:t===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(e.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(e.id),onRoomJoin:()=>this.joinRoom(e.id),states:this.states,room:Object.assign({},e),iconPack:this.iconPack,t:this.t,allowDelete:!1})))))}renderLoading(){return h(z,null,h("div",{class:"loading-content"},h("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return h(z,null,h("div",{class:"room-config"},h("header",null,h("dyte-icon",{icon:this.iconPack.breakout_rooms}),h("span",null,this.t("breakout_rooms.room_config_header"))),h("div",{class:"create-room"},h("p",null,this.t("breakout_rooms.num_of_rooms")),h("dyte-counter",{value:this.roomConfig.rooms,minValue:ku,iconPack:this.iconPack,t:this.t,onValueChange:e=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+e.detail,ku)})}})),h("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",h("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),h("footer",null,h("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:this.roomConfig.rooms===0,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():this.roomConfig.step==="room-config"?this.renderRoomConfig():h(z,null,h("div",{class:"participant-config-wrapper"},h("div",{class:"participant-config"},h("aside",{part:"menu"},h("header",null,this.t("breakout_rooms.assign_participants")),h("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map(pi),selectedParticipantIds:this.selectedParticipants},h("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},h("dyte-button",{disabled:this.roomConfig.mode==="edit"||this.stateManager.unassignedParticipants.length===0,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},h("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),this.selectedParticipants.length!==0&&h("div",{class:"participants-assign-actions"},h("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),h("dyte-button",{disabled:this.roomConfig.mode==="edit",iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),h("div",{class:"assign-rooms"},h("div",{class:"row"},h("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&h("div",{class:"cta-buttons"},h("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},h("div",{onClick:this.onAddNewRoom},h("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),this.stateManager.allConnectedMeetings.flatMap(e=>e.participants).length!==0&&h("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),h("div",{class:"rooms",ref:e=>this.selectorRef=e},this.renderMainRoomMaybe(),this.getPermittedRooms().map((e,t)=>h("dyte-breakout-room-manager",{key:e.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:t===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(e.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(e.id),onRoomJoin:()=>this.joinRoom(e.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},e),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>ku})),h("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},h("div",null,h("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),h("span",null,this.t("breakout_rooms.add_room_brief"))))))),h("div",{class:"participant-config-actions"},h("div",{class:{"status-bar":!0,"ephemeral-status":this.ephemeralStatusText!==""}},this.ephemeralStatusText!==""&&h("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),h("div",{class:"breakout-actions"},this.roomConfig.mode==="create"&&this.permissions.canAlterConnectedMeetings&&h("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&h("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&h("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),this.roomConfig.mode==="edit"&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&h("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};LA.style=qj;var Jj=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:LA});const Ob={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures"},Kj=e=>e.connectedMeetings.supportsConnectedMeetings,Em=e=>{var t;return ya(e)||((t=e==null?void 0:e.__internals__)===null||t===void 0?void 0:t.features.hasFeature("feat_paginated_chat"))},Yj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",NA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.breakoutRoomToggle=()=>{var t,i,r;const n=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(!((i=(t=this.states)===null||t===void 0?void 0:t.activeBreakoutRoomsManager)===null||i===void 0)&&i.active),mode:n}}),K.activeBreakoutRoomsManager={active:!(!((r=K.activeBreakoutRoomsManager)===null||r===void 0)&&r.active),mode:n}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}render(){const e=this.meeting.self.permissions.connectedMeetings;if(!(!e.canAlterConnectedMeetings&&!this.meeting.connectedMeetings.isActive)&&!(!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting)&&!!Kj(this.meeting))return h(z,{title:this.t("breakout_rooms")},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}};NA.style=Yj;var Qj=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:NA});const Zj=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}",UA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=Z,this.t=ee(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var e;(e=this.stateUpdate)===null||e===void 0||e.emit({activeBroadcastMessageModal:!1}),K.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout(()=>{this.close()},2e3)}render(){return h(z,null,h("div",{class:"content-col"},h("h2",null,"Broadcast message to"),h("select",{onChange:e=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:e.target.value})}},h("option",null,"Everyone"),h("option",null,"List of rooms")),h("textarea",{placeholder:"Type message here...",onInput:e=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:e.target.value})}}),this.successMessage?h("p",null,"Message sent to ",this.messagePayload.to,h("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):h("div",{class:"content-row"},h("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel"),"\u2002",h("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};UA.style=Zj;var Xj=Object.freeze({__proto__:null,dyte_broadcast_message_modal:UA});const e$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",jA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStateLeftListener=()=>{this.canProduceVideo=!1},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{t==="video"&&(this.cameraPermission=i)},this.toggleCamera=()=>{var t,i,r,n,s,a,o,c,d,l,u,f;if((t=this.meeting)===null||t===void 0||t.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.videoEnabled),permission:this.cameraPermission,canProduce:(a=(s=(n=this.meeting)===null||n===void 0?void 0:n.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceVideo}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((u=this.meeting)===null||u===void 0?void 0:u.self)}}),this.hasPermissionError()){const b={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:b}),K.activePermissionsMessage=b,!1}const y=(f=this.meeting)===null||f===void 0?void 0:f.self;y==null||!this.canProduceVideo||(y.videoEnabled?y.disableVideo():y.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c;(e=this.meeting)===null||e===void 0||e.self.removeListener("videoUpdate",this.videoUpdateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageJoined",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStateLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.updateCanProduce(e),this.cameraPermission=t.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=t.videoEnabled,t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStateLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceVideo==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceVideo=!1,n&&!a?this.canProduceVideo=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceVideo=!0),t.permissions.canProduceVideo==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceVideo=!0))}hasPermissionError(){return this.cameraPermission==="DENIED"||this.cameraPermission==="SYSTEM_DENIED"}getState(){let e="",t="",i="",r={},n=this.hasPermissionError(),s=this.cameraPermission==="COULD_NOT_START";return this.videoEnabled&&!n?(t=this.t("video_on"),i=this.iconPack.video_on):(t=this.t("video_off"),i=this.iconPack.video_off,r["red-icon"]=!0),s?e=this.t("Unable to capture video"):this.cameraPermission==="SYSTEM_DENIED"?e=this.t("perm_sys_denied"):this.cameraPermission==="DENIED"?e=this.t("perm_browser_denied"):e=this.videoEnabled?this.t("Disable Camera"):this.t("Enable Camera"),{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n||s,disable:n}}render(){if(!this.canProduceVideo)return null;const{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n,disable:s}=this.getState();return h(z,{title:t},h("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:r,variant:this.variant,label:t,icon:i,onClick:this.toggleCamera,showWarning:n,disabled:s})))}static get watchers(){return{meeting:["meetingChanged"]}}};jA.style=e$;var t$=Object.freeze({__proto__:null,dyte_camera_toggle:jA});const $A=e=>{let t=null;try{const i=JSON.parse(e.message),{target:r,message:n}=i;r===void 0||n===void 0?t=e:t=Object.assign(Object.assign({},e),{targetUserIds:r,message:n})}catch{t=e}return t};function lf(e){return e.sort((t,i)=>t.localeCompare(i)).join("_")}function FA(e,t){if(e!=null){for(const i of e)if(i.kind==="file"){const r=i.getAsFile();i.type.startsWith("image/")?t("image",r):t("file",r)}}}const i$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.2s slide-up ease-in;animation:0.2s slide-up ease-in}dyte-chat-messages-ui{flex:1 0 0}",BA=class{constructor(e){X(this,e),this.disconnectMeeting=t=>{var i;this.isPrivateChatSupported()&&(t==null||t.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),t==null||t.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),(i=t==null?void 0:t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter(t=>this.privatePresetFilter.length===0||this.privatePresetFilter.includes(t.presetName)),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>Em(this.meeting),this.updateUnreadCountGroups=t=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),t)},this.isPrivateChatSupported=()=>{var t,i,r;return this.canPrivateMessage&&!this.disablePrivateChat&&((r=(i=(t=this.meeting)===null||t===void 0?void 0:t.__internals__)===null||i===void 0?void 0:i.features)===null||r===void 0?void 0:r.getFeatureValue("chat_socket_server"))==="socket-service"},this.updateRecipients=t=>{if(typeof t.detail=="string")this.chatRecipientId="everyone",this.selectedParticipant=null;else{const{userId:i}=t.detail;this.chatRecipientId=i,this.selectedParticipant=this.participants.find(r=>r.userId===i)}if(this.chatRecipientId!=="everyone"){const i=[this.chatRecipientId,this.meeting.self.userId],r=lf(i);this.selectedGroup=r}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.t=ee(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0}connectedCallback(){this.meetingChanged(this.meeting),!(this.meeting&&!this.meeting.chat)&&this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",e=>{e.preventDefault(),this.dropzoneActivated=!0}),this.host.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.host.addEventListener("drop",e=>{e.preventDefault(),this.dropzoneActivated=!1,FA(e.dataTransfer.items,(t,i)=>{var r,n,s,a;switch(t){case"image":this.isFileMessagingAllowed()&&((n=(r=this.meeting)===null||r===void 0?void 0:r.chat)===null||n===void 0||n.sendImageMessage(i,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&((a=(s=this.meeting)===null||s===void 0?void 0:s.chat)===null||a===void 0||a.sendFileMessage(i,this.getRecipientPeerIds()));break}})}))}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i,r,n,s,a;t!=null&&this.disconnectMeeting(t),!(e&&!e.chat)&&e!=null&&(this.canSend=e.self.permissions.chatPublic.canSend,this.canSendTextMessage=e.self.permissions.chatPublic.text,this.canSendFiles=e.self.permissions.chatPublic.files,this.canPrivateMessage=((i=e.self.permissions.chatPrivate)===null||i===void 0?void 0:i.canSend)||((r=e.self.permissions.chatPrivate)===null||r===void 0?void 0:r.canReceive),this.canSendPrivateTexts=(n=e.self.permissions.chatPrivate)===null||n===void 0?void 0:n.text,this.canSendPrivateFiles=(s=e.self.permissions.chatPrivate)===null||s===void 0?void 0:s.files,this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:o})=>{this.addToChatGroup(o),this.chatGroups=Object.assign({},this.chatGroups)},this.onParticipantUpdate(),this.usePaginatedChat()||(a=e.chat)===null||a===void 0||a.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(e.participants.joined.addListener("participantJoined",this.onParticipantUpdate),e.participants.joined.addListener("participantLeft",this.onParticipantUpdate)))}chatGroupsChanged(e){var t,i;if(!this.isPrivateChatSupported())return;const r={};for(const n in e){const s=(t=bm[n])!==null&&t!==void 0?t:0;r[n]=e[n].filter(a=>a.type=="chat"&&a.message.time>s&&a.message.userId!==this.meeting.self.userId).length,(n===lf([this.meeting.self.userId,(i=this.selectedParticipant)===null||i===void 0?void 0:i.userId])||n==="everyone"&&this.selectedParticipant===null)&&(r[n]=0,bm[n]=new Date)}this.updateUnreadCountGroups(r)}initializeChatGroups(){var e;(e=this.meeting.chat)===null||e===void 0||e.messages.forEach(t=>{this.addToChatGroup(t)})}addToChatGroup(e){var t;const i=$A(e);let r="everyone";if(((t=i.targetUserIds)===null||t===void 0?void 0:t.length)>0){const n=new Set([i.userId,...i.targetUserIds]);r=lf(Array.from(n))}this.chatGroups[r]===void 0&&(this.chatGroups[r]=[]),this.chatGroups[r]=[...this.chatGroups[r],{type:"chat",message:i}]}getRecipientPeerIds(){let e=[];return this.chatRecipientId!=="everyone"&&(e=[this.selectedParticipant.id]),e}render(){var e,t,i,r;const n={iconPack:this.iconPack,t:this.t,size:this.size},s=(e=this.meeting)===null||e===void 0?void 0:e.self.userId,a=this.chatGroups[this.selectedGroup]||[];return h(z,null,this.isFileMessagingAllowed()&&h("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},h("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),h("p",null,this.t("Drop files/images to send"))),this.isPrivateChatSupported()&&h("dyte-chat-selector-ui",Object.assign({selfUserId:s,groups:this.participants,selectedGroupId:(t=this.selectedParticipant)===null||t===void 0?void 0:t.userId,unreadCounts:this.unreadCountGroups,onDyteChatGroupChanged:this.updateRecipients},n)),this.usePaginatedChat()?h("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):h("dyte-chat-messages-ui",Object.assign({messages:a,selfUserId:s,selectedGroup:this.selectedGroup},n)),h("dyte-chat-composer-ui",Object.assign({canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(!((r=(i=this.meeting)===null||i===void 0?void 0:i.__internals__)===null||r===void 0)&&r.features.hasFeature(Ob.DISABLE_EMOJI_PICKER)),onDyteNewMessage:o=>{var c,d,l,u,f,y;const b=o.detail;switch(b.type){case"text":(d=(c=this.meeting)===null||c===void 0?void 0:c.chat)===null||d===void 0||d.sendTextMessage(b.message,this.getRecipientPeerIds());break;case"image":(u=(l=this.meeting)===null||l===void 0?void 0:l.chat)===null||u===void 0||u.sendImageMessage(b.file,this.getRecipientPeerIds());break;case"file":(y=(f=this.meeting)===null||f===void 0?void 0:f.chat)===null||y===void 0||y.sendFileMessage(b.file,this.getRecipientPeerIds());break}}},n),h("slot",{name:"chat-addon",slot:"chat-addon"})))}get host(){return ma(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};BA.style=i$;var r$=Object.freeze({__proto__:null,dyte_chat:BA});const Mb=e=>{if(e&&!e.chat)return!1;const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:r}=e.self.permissions;return i.canSend||i.text||i.files||r.canSend||r.canReceive||r.files||r.text},Db=e=>{if(e&&!e.polls)return!1;const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.polls)return!1;const{polls:i}=e.self.permissions;return i.canCreate||i.canView||i.canVote},Lb=e=>{var t,i;if(ya(e)&&!(!((t=e.self.permissions)===null||t===void 0)&&t.acceptPresentRequests)||e&&!e.participants)return!1;if(e.meta.viewType==="LIVESTREAM")return e.self.permissions.acceptPresentRequests||((i=e==null?void 0:e.stage)===null||i===void 0?void 0:i.status)==="ON_STAGE";const r=e==null?void 0:e.self.config;return!(r&&!r.controlBar.elements.participants)},Nb=e=>{if(Ev(e)||e&&!e.plugins)return!1;if(e.meta.viewType==="LIVESTREAM")return e.stage.status==="ON_STAGE";const t=e==null?void 0:e.self.config;if(t&&!t.controlBar.elements.plugins)return!1;const{plugins:i}=e.self.permissions;return i.canClose||i.canStart},n$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",VA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onChatUpdate=({action:t,message:i})=>{var r;this.chatActive||t==="add"&&i.userId!==((r=this.meeting)===null||r===void 0?void 0:r.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const t=this.states||K;this.chatActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="chat"),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),K.activeSidebar=this.chatActive,K.activeMoreMenu=!1,K.sidebar=this.chatActive?"chat":"none",this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":"none",activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=Mb(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),$l("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i,r;(t=(e=this.meeting)===null||e===void 0?void 0:e.chat)===null||t===void 0||t.removeListener("chatUpdate",this.onChatUpdate),(r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0||r.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(e){var t,i,r,n;e!=null&&(Em(e)&&((t=e.chat)===null||t===void 0||t.getMessages(new Date().getTime(),1,!0).then(s=>{var a;!((a=s==null?void 0:s.messages)===null||a===void 0)&&a.length&&(this.hasNewMessages=!0)})),this.unreadMessageCount=((i=e.chat)===null||i===void 0?void 0:i.messages.length)||0,(r=e.chat)===null||r===void 0||r.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=Mb(e),(n=e==null?void 0:e.stage)===null||n===void 0||n.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||K;t!=null&&(this.chatActive=t.activeSidebar===!0&&t.sidebar==="chat")}render(){if(!!this.canViewChat)return h(z,{title:this.t("chat")},Em(this.meeting)?this.hasNewMessages&&h("div",{class:"unread-count-dot",part:"unread-count-dot"}):this.unreadMessageCount!==0&&!this.chatActive&&h("div",{class:"unread-count",part:"unread-count"},h("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};VA.style=n$;var s$=Object.freeze({__proto__:null,dyte_chat_toggle:VA});const a$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",u0=e=>Math.trunc(e).toString().padStart(2,"0"),zA=class{constructor(e){X(this,e),this.disconnectMeeting=()=>{var t,i;this.timeout&&clearTimeout(this.timeout),typeof this.request=="number"&&cancelAnimationFrame(this.request),(i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0||i.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var t,i,r;this.startedTime=(r=(i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0?void 0:i.meetingStartedTimestamp)===null||r===void 0?void 0:r.toISOString()},this.meeting=void 0,this.iconPack=Z,this.t=ee(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(e){var t,i,r;this.disconnectMeeting(),e!=null&&(this.startedTime=(i=(t=e.meta)===null||t===void 0?void 0:t.meetingStartedTimestamp)===null||i===void 0?void 0:i.toISOString(),(r=e.meta)===null||r===void 0||r.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(e){if(e!==void 0){const t=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(t))},500)};this.request=requestAnimationFrame(t)}}getFormattedTime(){if(this.timeDiff==null)return null;const e=this.timeDiff;let t="";return e>=3600&&(t=`${u0(e/3600)}:`),t+=`${u0(e%3600/60)}:${u0(e%60)}`,t}render(){return h(z,{tabIndex:0,role:"timer","aria-live":"off"},this.startedTime!==void 0&&[h("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),h("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};zA.style=a$;var o$=Object.freeze({__proto__:null,dyte_clock:zA});const c$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",HA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.close=()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),K.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClose(this.stateUpdate,K,this.meeting)},this.onConfirmation=async()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),K.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClick(this.stateUpdate,K,this.meeting)},this.meeting=void 0,this.states=void 0,this.iconPack=Z,this.t=ee()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var e,t;const i=this.states.activeConfirmationModal;return h(z,null,h("div",{class:"leave-modal"},h("div",{class:"header"},h("h2",{class:"title"},i.header?this.t(i.header):this.t("confirmation_modal.header"))),h("p",{class:"message"},i.content?this.t(i.content):""),h("div",{class:"content"},h("div",{class:"leave-meeting"},h("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),h("dyte-button",{onClick:()=>this.onConfirmation(),variant:(t=(e=this.states.activeConfirmationModal)===null||e===void 0?void 0:e.variant)!==null&&t!==void 0?t:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};HA.style=c$;var d$=Object.freeze({__proto__:null,dyte_confirmation_modal:HA});const l$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;height:var(--dyte-space-16, 64px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);z-index:10}",GA=class{constructor(e){X(this,e),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=ct,this.states=void 0,this.iconPack=Z,this.t=ee(),this.middlewares={},this.size=void 0}render(){const e={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size,middlewares:this.middlewares};return h(z,null,!this.disableRender&&h(rt,{element:"dyte-header",defaults:e,onlyChildren:!0}),h("slot",null))}};GA.style=l$;var u$=Object.freeze({__proto__:null,dyte_controlbar:GA});const p$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",WA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onDyteDialogClose=(t,i)=>{K[t]=i,this.stateUpdate.emit({[t]:i})},this.leaveStage=async()=>{var t,i,r;this.meeting.meta.viewType==="LIVESTREAM"&&((t=this.meeting.stage)===null||t===void 0?void 0:t.status)==="ACCEPTED_TO_JOIN_STAGE"&&await((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.leaveStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.join(),this.meeting.meta.viewType==="WEBINAR"&&await this.meeting.self.joinStage(),this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=ct,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}render(){var e,t,i,r;const n={meeting:this.meeting,states:this.states||K,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},s=this.states||K;if((s==null?void 0:s.image)!=null){const a=s.image,o=()=>{this.stateUpdate.emit({image:null}),K.image=null};return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:o,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-image-viewer",defaults:n,props:{image:a,onClose:o}})))}else{if((s==null?void 0:s.activeSettings)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-settings",defaults:n})));if((s==null?void 0:s.activeLeaveConfirmation)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-leave-meeting",defaults:n})));if(((e=s==null?void 0:s.activePermissionsMessage)===null||e===void 0?void 0:e.enabled)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-permissions-message",defaults:n})));if((s==null?void 0:s.activeRemoteAccessManager)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-remote-access-manager",defaults:n})));if(((t=s==null?void 0:s.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.active)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-breakout-rooms-manager",defaults:n,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(((i=s==null?void 0:s.activeConfirmationModal)===null||i===void 0?void 0:i.active)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-confirmation-modal",defaults:n})));if(((r=s==null?void 0:s.activeOverlayModal)===null||r===void 0?void 0:r.active)===!0)return h(z,null,h("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(s!=null&&s.activeBroadcastMessageModal)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-broadcast-message-modal",defaults:n})));if((s==null?void 0:s.activeJoinStage)===!0){const a={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:this.leaveStage,iconPack:this.iconPack,t:this.t},h("dyte-join-stage",Object.assign({dataConfig:a,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.leaveStage},n))))}else if((s==null?void 0:s.activeMuteAllConfirmation)===!0)return h(z,null,h("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},h(rt,{element:"dyte-mute-all-confirmation",defaults:n})))}return null}};WA.style=p$;var h$=Object.freeze({__proto__:null,dyte_dialog_manager:WA});const g$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}",qA=class{constructor(e){X(this,e),this.config=ct,this.size=void 0,this.icon=Z,this.states=void 0,this.t=ee(),this.iconPack=Z,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),$l("roomLeftState",()=>this.statesChanged())}getBreakoutRoomsMessage(e){var t;let i;return(e==null?void 0:e.roomLeftState)==="connected-meeting"&&(((t=K.activeBreakoutRoomsManager)===null||t===void 0?void 0:t.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?i="breakout_rooms.move_reason.switch_main_room":i="breakout_rooms.move_reason.switch_room"),i}statesChanged(e){const t=e||K;if(t!=null)switch(t==null?void 0:t.roomLeftState){case"left":this.message="You left the meeting";break;case"kicked":this.message="You were removed from the meeting";break;case"disconnected":this.message="The call ended because the connection was lost.";break;case"rejected":this.message="Your request to join the meeting was denied.";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(t);break;default:this.message="The meeting ended"}}renderBreakoutRoomScreen(){return h(z,null,h("div",{class:"ctr",part:"container"},h("dyte-icon",{icon:this.iconPack.breakout_rooms}),h("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const e=this.states||K;return e.roomLeftState==="connected-meeting"?this.renderBreakoutRoomScreen():h(z,null,h("div",{class:"ctr",part:"container"},h("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),h("p",{part:"message"},this.t(this.message)),(e==null?void 0:e.roomLeftState)==="disconnected"&&h("span",{part:"description"},this.t("Please check your internet connection and try again."))))}static get watchers(){return{states:["statesChanged"]}}};qA.style=g$;var f$=Object.freeze({__proto__:null,dyte_ended_screen:qA});const JA=e=>{e!=null&&(e.requestFullscreen!=null?e.requestFullscreen():e.mozRequestFullScreen!=null?e.mozRequestFullScreen():e.webkitRequestFullscreen!=null?e.webkitRequestFullscreen():e.msRequestFullscreen!=null&&e.msRequestFullscreen())},KA=()=>{document.exitFullscreen!=null?document.exitFullscreen():document.mozExitFullScreen!=null?document.mozExitFullScreen():document.webkitExitFullscreen!=null?document.webkitExitFullscreen():document.msExitFullscreen!=null&&document.msExitFullscreen()},YA=()=>document.fullscreenElement!=null||document.webkitCurrentFullScreenElement!=null,QA=()=>typeof document<"u"?document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled:!1,m$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",ZA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=YA()},this.toggleFullScreen=()=>{const t=document.querySelector("dyte-meeting");!t||(this.fullScreenActive?(KA(),this.fullScreenActive=!1):(JA(t),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),K.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.size=void 0,this.iconPack=Z,this.t=ee(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=QA(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?h(z,{title:this.t("Fullscreen")},h("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};ZA.style=m$;var v$=Object.freeze({__proto__:null,dyte_fullscreen_toggle:ZA});const Ys=720,Qs=1280,y$="#000000",b$=e=>{switch(e){case 0:case 1:return[Qs,Ys];case 2:return[Math.floor(Qs/2),Ys];case 3:case 4:return[Math.floor(Qs/2),Math.floor(Ys/2)];case 5:case 6:return[Math.floor(Qs/3),Math.floor(Ys/2)];default:return[Math.floor(Qs/3),Math.floor(Ys/2)]}},_$=(e,t,i,r,n,s)=>{let a=.5,o=.5;const c=n,d=s,l=Math.min(i/c,r/d);let u=c*l,f=d*l,y,b,k,P,w=1;return u<i&&(w=i/u),Math.abs(w-1)<1e-14&&f<r&&(w=r/f),u*=w,f*=w,k=c/(u/i),P=d/(f/r),y=(c-k)*a,b=(d-P)*o,y<0&&(y=0),b<0&&(b=0),k>c&&(k=c),P>d&&(P=d),[y,b,k,P,e,t,i,r]};var Ar;(function(e){e.CAMERA="CAMERA",e.MIC="MIC",e.END="END"})(Ar||(Ar={}));class w${constructor(){this.tracks=[],this.sources=[],this.enabled=!1}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}cleanup(){this.isSupported()&&document.exitPictureInPicture!==void 0&&document.pictureInPictureElement!==null&&document.exitPictureInPicture(),this.canvas=void 0,this.video=void 0,this.tracks=[],this.request=void 0}createCanvas(){const t=document.createElement("canvas");t.height=Ys,t.width=Qs,this.canvas=t}setupEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("hangup",()=>{t(Ar.END)})}mountAudioEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",()=>{t(Ar.MIC)})}mountVideoEvents(t){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",()=>{t(Ar.CAMERA)})}unmountAudioEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglemicrophone",void 0)}unmountVideoEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||navigator.mediaSession.setActionHandler("togglecamera",void 0)}drawGrid(t,i,r){if(this.canvas===void 0)return;const n=this.canvas.getContext("2d");n.fillStyle=y$,n.fillRect(0,0,Qs,Ys);let s=0,a=0;for(;s<Ys-5;){let o=0;for(;o<Qs-5&&a<r;){const c=this.tracks[a],[d,l,u,f,y,b,k,P]=_$(o,s,t,i,c.videoWidth,c.videoHeight);n.drawImage(c,d,l,u,f,y,b,k,P),a+=1,o+=t}s+=i}}paintCanvas(){const t=this.tracks.length,[i,r]=b$(t);this.drawGrid(i,r,t)}animate(){this.tracks!==void 0&&this.paintCanvas(),this.request!==void 0&&(this.request=requestAnimationFrame(()=>this.animate()))}create(t,i,r){this.cleanup(),this.createCanvas(),this.setupEvents(r);const n=document.createElement("video");n.height=Ys,n.width=Qs,n.autoplay=!0,n.srcObject=this.canvas.captureStream(24),this.video=n,this.video.onloadedmetadata=()=>{try{t(),this.video.onleavepictureinpicture=()=>{i()}}catch(s){i(s.getMessage())}},this.paintCanvas()}updateMediaSession(t,i){navigator.mediaSession!==void 0&&(t===Ar.CAMERA&&navigator.mediaSession.setCameraActive!==void 0&&navigator.mediaSession.setCameraActive(i),t===Ar.MIC&&navigator.mediaSession.setMicrophoneActive!==void 0&&navigator.mediaSession.setMicrophoneActive(i))}updateVideoSources(){const t=Object.values(this.sources).filter(r=>r.enabled),i=[];t.map(r=>{i.push(r.element)}),this.tracks=i}enableSource(t){this.sources[t]!==void 0&&(this.sources[t].enabled=!0),this.updateVideoSources()}disableSource(t){this.sources[t]!==void 0&&(this.sources[t].enabled=!1),this.updateVideoSources()}addSource(t,i,r){this.sources[t]={element:i,enabled:r}}removeSource(t){delete this.sources[t]}removeAllSource(){this.sources=[]}enable(){this.enabled=!0,this.request=requestAnimationFrame(()=>this.animate()),this.video.requestPictureInPicture()}disable(){this.enabled=!1,cancelAnimationFrame(this.request),this.request=void 0,document.exitPictureInPicture()}}const jt=new w$;function S$({dimensions:e,count:t,aspectRatio:i,gap:r}){const{width:n,height:s,rows:a,cols:o}=E$({dimensions:e,count:t,aspectRatio:i,gap:r}),c=T$({parentDimensions:e,dimensions:{width:n,height:s},rows:a,cols:o,count:t,gap:r});return{width:n,height:s,getPosition:c}}function E$({count:e,dimensions:t,aspectRatio:i,gap:r}){let{width:n,height:s}=t;if(n===0||s===0)return{width:0,height:0,rows:1,cols:1};n-=r*2,s-=r*2;const a=r,o=e,c=k$(i);let d=0,l=0,u=1,f=1;const y=[];for(let b=1;b<=o;b++)y.push((n-a*(b-1))/b),y.push((s-a*(b-1))/(b*c));y.sort((b,k)=>k-b);for(const b of y)if(d=b,l=d*c,u=Math.floor((n+a)/(d+a)),f=Math.floor((s+a)/(l+a)),u*f>=o){f=Math.ceil(o/u);break}return{width:d,height:l,rows:f,cols:u}}function T$({parentDimensions:e,dimensions:t,rows:i,cols:r,count:n,gap:s}){const{width:a,height:o}=e,{width:c,height:d}=t,l=(o-(d*i+(i-1)*s))/2;let u=(a-(c*r+(r-1)*s))/2;const f=d+s,y=c+s;let b=0,k=0;const P=n%r;function w(E){const R=n-E;R===P&&(u=(a-(c*R+(R-1)*s))/2);const D=l+k*f,V=u+b*y;return b++,(E+1)%r===0&&(k++,b=0),{top:D,left:V}}return w}const k$=e=>{const[t,i]=e.split(":");return Number.parseInt(i)/Number.parseInt(t)},nS={spotlight:"sm",mixed:"sm"},P$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;overflow:hidden;flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition:0.4s}dyte-participant-tile{aspect-ratio:initial;box-sizing:border-box}.webinar-stage{box-sizing:border-box;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}.livestream-stage{box-sizing:border-box;margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;flex-grow:1;align-content:center;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);text-align:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",XA=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.hideSelf=!1,this.networkUpdateListener=({event:t})=>{this.connected=t==="connected"},this.meetingDisconnectedListener=()=>{this.networkUpdateListener({event:"disconnected"})},this.meetingConnectedListener=()=>{this.networkUpdateListener({event:"connected"})},this.eventCallback=t=>{const{self:i}=this.meeting;t===Ar.CAMERA&&(i.videoEnabled?i.disableVideo():i.enableVideo()),t===Ar.MIC&&(i.audioEnabled?i.disableAudio():i.enableAudio()),t===Ar.END&&(jt.cleanup(),this.stateUpdate.emit({activePipMode:!1}),this.meeting.leaveRoom())},this.enablePipMediaControls=(t=this.meeting)=>{const i=t.self.permissions.canProduceAudio,r=t.self.permissions.canProduceVideo;i&&jt.mountAudioEvents(this.eventCallback),r&&jt.mountVideoEvents(this.eventCallback)},this.disablePipMediaControls=()=>{jt.unmountAudioEvents(),jt.unmountVideoEvents()},this.handlePipMediaControls=t=>{t==="ON_STAGE"?this.enablePipMediaControls():this.disablePipMediaControls()},this.filterParticipants=t=>{var i;if(this.overrides&&((i=this.overrides)===null||i===void 0?void 0:i.videoUnsubscribed)){const r=this.overrides.videoUnsubscribed.preset;r.length>0&&(t=t.filter(n=>!r.some(a=>n.presetName===void 0?!1:n.presetName.match(a))))}return t},this.onSelfVideoUpdateListener=({videoEnabled:t})=>{jt.updateMediaSession(Ar.CAMERA,t)},this.onSelfAudioUpdateListener=({audioEnabled:t})=>{jt.updateMediaSession(Ar.MIC,t)},this.onViewModeChanged=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onParticipantJoined=t=>{this.meeting!=null&&(this.participants.some(i=>i.id===t.id)||(this.participants=this.filterParticipants([t,...this.participants])),t.isPinned&&!this.pinnedParticipants.some(i=>i.id===t.id)&&(this.pinnedParticipants=this.pinnedParticipants.concat([t])),this.updateWebinarStage())},this.onParticipantLeft=t=>{this.participants=this.participants.filter(i=>i.id!==t.id),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter(i=>!this.participants.find(r=>r.id===i.id))),this.participants=this.filterParticipants(this.participants),this.pinnedParticipants=this.pinnedParticipants.filter(i=>i.id!==t.id),t.screenShareEnabled&&this.removeScreenShare(t),this.updateWebinarStage()},this.selfStageJoinListener=()=>{this.updateActiveParticipants()},this.selfStageLeaveListener=()=>{this.removeScreenShare(this.meeting.self),this.updateActiveParticipants()},this.onPresentationStart=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onPresentationEnd=t=>{this.meeting!=null&&(this.removePinned(t),this.removeScreenShare(t),this.updateActiveParticipants())},this.onScreenShareUpdate=t=>{t.screenShareEnabled?this.addScreenShare(t):this.removeScreenShare(t)},this.onSelfScreenShareUpdate=({screenShareEnabled:t})=>{t?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(t,{active:i})=>{i?this.plugins.some(r=>r.id===t.id)||(this.plugins=[...this.plugins,t]):this.plugins=this.plugins.filter(r=>r.id!==t.id)},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.showWebinarStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.connected=!0,this.pipSupported=!1,this.pipEnabled=!1,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.gridSize=nS,this.overrides={}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectMeeting(e){var t,i;if(e==null)return;this.participants=[],this.plugins=[];const{self:r,participants:n,plugins:s,meta:a}=e;n.active.removeListener("participantJoined",this.onParticipantJoined),n.active.removeListener("participantLeft",this.onParticipantLeft),n.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),n.joined.removeListener("peerStartedPresenting",this.onPresentationStart),n.joined.removeListener("peerStoppedPresenting",this.onPresentationEnd),r.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),s==null||s.all.removeListener("stateUpdate",this.onPluginStateUpdate),n.pinned.removeListener("participantJoined",this.onParticipantPinned),n.pinned.removeListener("participantLeft",this.onParticipantUnpinned),r.removeListener("pinned",this.onParticipantPinned),r.removeListener("unpinned",this.onParticipantUnpinned),n.removeListener("viewModeChanged",this.onViewModeChanged),r.removeListener("stageJoined",this.selfStageJoinListener),r.removeListener("stageLeft",this.selfStageLeaveListener),r.removeListener("removedFromStage",this.selfStageLeaveListener),r.removeListener("videoUpdate",this.onSelfVideoUpdateListener),r.removeListener("audioUpdate",this.onSelfAudioUpdateListener),a.removeListener("disconnected",this.meetingDisconnectedListener),a.removeListener("connected",this.meetingConnectedListener),(t=e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.handlePipMediaControls),e.self.removeListener("stageJoined",this.enablePipMediaControls),e.self.removeListener("stageLeft",this.disablePipMediaControls),(i=e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateLiveStreamStage)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}screenShareParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeScreenShare:t}),K.activeScreenShare=t}pluginsChanged(e){const t=e.length>0;this.stateUpdate.emit({activePlugin:t}),K.activePlugin=t}pinnedParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeSpotlight:t}),K.activeSpotlight=t}updateActiveParticipants(){var e,t;const{self:i,participants:r}=this.meeting,n=((e=i.config)===null||e===void 0?void 0:e.viewType)==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE",s=(t=i.permissions)===null||t===void 0?void 0:t.isRecorder;this.hideSelf=n||s||i.permissions.hiddenParticipant,this.participants=this.filterParticipants([...r.active.toArray().filter(a=>a.id!==i.id),...r.viewMode==="ACTIVE_GRID"&&!i.isPinned&&!this.hideSelf?[i]:[]]),this.pinnedParticipants=[...r.pinned.toArray().filter(a=>a.id!==i.id),...i.isPinned&&!this.hideSelf?[i]:[]],this.screenShareParticipants=r.joined.toArray().filter(a=>a.screenShareEnabled),i.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([i])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&this.meeting.meta.viewType==="WEBINAR"?this.showWebinarStage=this.participants.length===0&&this.pinnedParticipants.length===0:this.showWebinarStage=!1}updateLiveStreamStage(){this.showLiveStreamPlayer=Ev(this.meeting)}meetingChanged(e,t){var i,r,n;if(t!==null&&this.disconnectMeeting(t),e!=null){const{self:s,participants:a,plugins:o,meta:c,stage:d}=e,{config:l,permissions:u}=s,f=(l==null?void 0:l.viewType)==="WEBINAR"&&this.meeting.self.webinarStageStatus!=="ON_STAGE",y=u==null?void 0:u.isRecorder;if(this.hideSelf=f||y||u.hiddenParticipant,this.participants=this.filterParticipants([...a.active.toArray(),...!s.isPinned&&!this.hideSelf?[s]:[]]),this.pinnedParticipants=[...a.pinned.toArray(),...s.isPinned&&!this.hideSelf?[s]:[]],this.screenShareParticipants=a.joined.toArray().filter(P=>P.screenShareEnabled),this.plugins=(o==null?void 0:o.active.toArray())||[],(l==null?void 0:l.viewType)==="WEBINAR"&&(this.canCurrentPeerHost=u.acceptPresentRequests||u.canPresent,this.updateWebinarStage()),this.pipSupported=jt.isSupported()&&((i=e.self.config)===null||i===void 0?void 0:i.pipMode),this.pipSupported){const P=()=>{},w=()=>{this.stateUpdate.emit({activePipMode:!1})};jt.create(P,w,this.eventCallback),this.enablePipMediaControls(e),(r=e.stage)===null||r===void 0||r.on("stageStatusUpdate",this.handlePipMediaControls),e.self.on("stageJoined",this.enablePipMediaControls),e.self.on("stageLeft",this.disablePipMediaControls)}const b=document.pictureInPictureElement!==null,k=this.states||K;jt.isSupported()&&k.activePipMode!==b&&this.stateUpdate.emit({activePipMode:b}),a.active.addListener("participantJoined",this.onParticipantJoined),a.active.addListener("participantLeft",this.onParticipantLeft),a.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),a.joined.addListener("peerStartedPresenting",this.onPresentationStart),a.joined.addListener("peerStoppedPresenting",this.onPresentationEnd),s.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),o==null||o.all.addListener("stateUpdate",this.onPluginStateUpdate),a.pinned.addListener("participantJoined",this.onParticipantPinned),a.pinned.addListener("participantLeft",this.onParticipantUnpinned),s.addListener("pinned",this.onParticipantPinned),s.addListener("videoUpdate",this.onSelfVideoUpdateListener),s.addListener("audioUpdate",this.onSelfAudioUpdateListener),s.addListener("unpinned",this.onParticipantUnpinned),s.addListener("stageJoined",this.selfStageJoinListener),s.addListener("stageLeft",this.selfStageLeaveListener),s.addListener("removedFromStage",this.selfStageLeaveListener),c.addListener("disconnected",this.meetingDisconnectedListener),c.addListener("connected",this.meetingConnectedListener),d==null||d.addListener("stageStatusUpdate",this.updateLiveStreamStage.bind(this)),a.addListener("viewModeChanged",this.onViewModeChanged),!((n=e.stage)===null||n===void 0)&&n.status&&this.updateLiveStreamStage()}}addScreenShare(e){this.screenShareParticipants.some(t=>t.id===e.id)||(this.screenShareParticipants=[...this.screenShareParticipants,e])}removeScreenShare(e){this.screenShareParticipants=this.screenShareParticipants.filter(t=>t.id!==e.id)}removePinned(e){this.pinnedParticipants=this.pinnedParticipants.filter(t=>t.id!==e.id)}render(){const e={meeting:this.meeting,size:this.size,states:this.states||K,config:this.config,iconPack:this.iconPack,t:this.t};return!this.connected&&this.hideSelf?h("div",{class:"webinar-stage"},h("div",{class:"center"},h("h2",null,this.t("stage.reconnecting")))):this.showWebinarStage?h(z,null,h("div",{class:"webinar-stage"},h("div",{class:"center"},this.canCurrentPeerHost&&h("div",null,h("h2",null,this.t("stage.empty_host")),h("p",null,this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&h("h2",null,this.t("stage.empty_viewer"))))):this.showLiveStreamPlayer?h(z,null,h("dyte-livestream-player",{meeting:this.meeting,size:this.size})):h(z,null,h(rt,{element:"dyte-grid",defaults:e,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}))}get host(){return ma(this)}static get watchers(){return{screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};XA.style=P$;var C$=Object.freeze({__proto__:null,dyte_grid:XA});const R$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}",eI=class{constructor(e){X(this,e),this.onPageChanged=({currentPage:t,pageCount:i})=>{this.pageCount=i,this.page=t},this.toggleGridPagination=()=>{var t;const{self:i,participants:r}=this.meeting,{mobile:n,desktop:s}=(t=i.config)===null||t===void 0?void 0:t.maxVideoStreams,a=this.size==="sm"?n:s;r.joined.size<a?this.showPagination=!1:this.showPagination=!0},this.onParticipantJoin=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.onParticipantLeave=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.prevPage=()=>{if(this.meeting==null)return;const{participants:t}=this.meeting;this.page>1?t.setPage(this.page-=1):t.viewMode==="PAGINATED"&&t.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(this.meeting==null)return;const{participants:t}=this.meeting;this.page>0&&this.page<this.pageCount?t.setPage(this.page+=1):t.count>0&&this.pageCount===0&&t.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=Z,this.t=ee(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(this.meeting==null)return;const{participants:e}=this.meeting;e.removeListener("pageChanged",this.onPageChanged),e.removeListener("viewModeChanged",this.onPageChanged),e.joined.removeListener("participantJoined",this.onParticipantJoin),e.joined.removeListener("participantLeft",this.onParticipantLeave)}meetingChanged(e){if(e!=null){const{participants:t}=e;this.page=t.currentPage,this.pageCount=t.pageCount,t.addListener("viewModeChanged",this.onPageChanged),t.addListener("pageChanged",this.onPageChanged),t.joined.addListener("participantJoined",this.onParticipantJoin),t.joined.addListener("participantLeft",this.onParticipantLeave),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){if(!(this.meeting.meta.viewType==="WEBINAR"||!this.showPagination))return h(z,null,h("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:this.pageCount===0,onClick:this.prevPage,"aria-label":this.t("Previous Page"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),this.variant!=="grid"&&h("div",{class:"center"},h("span",{class:"page"},this.pageCount===0?h("dyte-tooltip",{label:this.t("Auto Layout"),iconPack:this.iconPack,t:this.t},h("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),this.pageCount!==0&&[h("span",{class:"slash"},"/"),h("span",{class:"pages"},this.pageCount)]),this.variant==="grid"&&this.pageCount>0&&h("div",{class:"dots"},[...Array(this.pageCount)].map((t,i)=>h("div",{key:`dot-${i}`,class:{dot:!0,active:i+1===this.page}}))),h("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:this.page!==0&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("Next Page"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};eI.style=R$;var x$=Object.freeze({__proto__:null,dyte_grid_pagination:eI});const A$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}",tI=class{constructor(e){X(this,e),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=ct,this.states=void 0,this.iconPack=Z,this.t=ee(),this.size=void 0}render(){const e={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return h(z,null,!this.disableRender&&h(rt,{element:"dyte-header",defaults:e,onlyChildren:!0}),h("slot",null))}};tI.style=A$;var I$=Object.freeze({__proto__:null,dyte_header:tI});const O$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-10, 40px);height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",iI=class{constructor(e){X(this,e),this.meeting=void 0,this.config=ct,this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("slot",null,h("div",{class:"ctr",part:"container"},h("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),h("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};iI.style=O$;var M$=Object.freeze({__proto__:null,dyte_idle_screen:iI});const D$=e=>e.split(/[#?]/)[0].split(".").pop().trim(),L$=e=>{if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/1024**t).toFixed(2)} ${["B","kB","MB","GB","TB"][t]}`},N$=(e,t="file")=>{try{const r=new URL(e).pathname.split("/").pop();return r!=="/"?r:t}catch{return t}},sS=async(e,t)=>{e=rS(e);let i=t==null?void 0:t.name;const r=await fetch(e);if(!r.ok){window.open(e,"_blank");return}const n=URL.createObjectURL(await r.blob()),s=document.createElement("a");s.href=n,s.download=i!=null?i:N$(e,t==null?void 0:t.fallbackName),s.click()},U$=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}`,rI=class{constructor(e){X(this,e),this.close=le(this,"close",7),this.keypressListener=t=>{t.key==="Escape"&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=ee(),this.iconPack=Z}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return h(z,{class:"scrollbar",onClick:e=>e.stopPropagation()},h("div",{class:"header"},h("div",{class:"shared-by-user"},this.t("Shared by")," ",h("span",{class:"displayName"},yn(Or(this.image.displayName)))),h("div",{class:"actions"},h("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.full_screen_minimize,iconPack:this.iconPack,t:this.t})),h("dyte-button",{onClick:()=>sS(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"))),h("div",{class:"image-ctr"},h("img",{src:this.image.link})))}};rI.style=U$;var j$=Object.freeze({__proto__:null,dyte_image_viewer:rI});const $$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",nI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),K.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=Z,this.t=ee()}render(){const e=this.t("leave");return h(z,{label:e},h("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave",onClick:this.leave,icon:this.iconPack.call_end,label:e,variant:this.variant}))}};nI.style=$$;var F$=Object.freeze({__proto__:null,dyte_leave_button:nI});const B$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",sI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),K.activeLeaveConfirmation=!1},this.handleLeave=()=>{var t;(t=this.meeting)===null||t===void 0||t.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.roomName,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var t;(t=this.meeting)===null||t===void 0||t.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=Z,this.t=ee(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}meetingChanged(e){e!=null&&(this.canEndMeeting=e.self.permissions.kickParticipant,this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some(t=>t.id===e.meta.roomName),this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting)}render(){return h(z,null,h("div",{class:"leave-modal"},h("div",{class:"header"},h("h2",{class:"title"},this.t("leave"))),h("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),h("div",{class:"content"},h("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&h("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),h("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&h("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end_meeting_for_all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};sI.style=B$;var V$=Object.freeze({__proto__:null,dyte_leave_meeting:sI});const z$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;min-width:var(--dyte-space-14, 56px) !important;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",aI=class{constructor(e){X(this,e),this.setIsLivestreaming=t=>{this.isLivestreaming=t==="LIVESTREAMING"},this.meeting=void 0,this.size=void 0,this.t=ee(),this.isLivestreaming=void 0,this.iconPack=Z}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.livestream)===null||t===void 0||t.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(e){var t,i;e!=null&&(this.setIsLivestreaming((t=this.meeting.livestream)===null||t===void 0?void 0:t.state),(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(!(!ya(this.meeting)||!this.isLivestreaming))return h(z,null,h("div",{class:"indicator","aria-label":this.t("This meeting is being livestreamed"),part:"indicator"},h("dyte-icon",{icon:this.iconPack.start_livestream}),"LIVE"))}static get watchers(){return{meeting:["meetingChanged"]}}};aI.style=z$;var H$=Object.freeze({__proto__:null,dyte_livestream_indicator:aI});const G$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",oI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.dyteAPIError=le(this,"dyteAPIError",7),this.livestreamStateListener=t=>{this.livestreamState=t,(t==="LIVESTREAMING"||t==="IDLE")&&(this.stateUpdate.emit({activeMoreMenu:!1}),K.activeMoreMenu=!1)},this.isLoading=()=>this.meeting==null||this.livestreamState==="STARTING"||this.livestreamState==="STOPPING",this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(e){var t,i;e!=null&&(this.livestreamState=(t=this.meeting.livestream)===null||t===void 0?void 0:t.state,(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var e,t;if(this.livestreamState==="LIVESTREAMING")try{await((e=this.meeting.livestream)===null||e===void 0?void 0:e.stop())}catch{this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("Error while stopping livestream.")})}else try{await((t=this.meeting.livestream)===null||t===void 0?void 0:t.start())}catch{this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("Error while starting livestream.")})}}clearListeners(){var e;(e=this.meeting.livestream)===null||e===void 0||e.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("Go Live");case"LIVESTREAMING":return this.t("End Live");case"STARTING":return this.t("Starting");case"STOPPING":return this.t("Stopping");default:return this.t("Error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":return this.iconPack.start_livestream;case"LIVESTREAMING":return this.iconPack.stop_livestream;case"STARTING":case"STOPPING":default:return this.iconPack.stop_livestream}}render(){if(!!fj(this.meeting))return h(z,null,h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":this.livestreamState==="LIVESTREAMING"},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};oI.style=G$;var W$=Object.freeze({__proto__:null,dyte_livestream_toggle:oI});const q$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}",cI=class{constructor(e){X(this,e),this.meeting=void 0,this.iconPack=Z,this.t=ee()}render(){var e;const t=(e=this.meeting)===null||e===void 0?void 0:e.meta.meetingTitle;return t==null?null:h(z,{tabIndex:0,role:"banner","aria-label":t},h("dyte-tooltip",{label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},h("div",{class:"title",part:"title"},t)))}};cI.style=q$;var J$=Object.freeze({__proto__:null,dyte_meeting_title:cI});const K$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",dI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{t==="audio"&&(this.micPermission=i)},this.toggleMic=()=>{var t,i,r,n,s,a,o,c,d,l,u,f;if((t=this.meeting)===null||t===void 0||t.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:Boolean((r=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||r===void 0?void 0:r.audioEnabled),permission:this.micPermission,canProduce:(a=(s=(n=this.meeting)===null||n===void 0?void 0:n.self)===null||s===void 0?void 0:s.permissions)===null||a===void 0?void 0:a.canProduceAudio}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.self)===null||c===void 0?void 0:c.webinarStageStatus},livestream:{stageStatus:(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((u=this.meeting)===null||u===void 0?void 0:u.self)}}),this.hasPermissionError()){const b={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:b}),K.activePermissionsMessage=b,!1}const y=(f=this.meeting)===null||f===void 0?void 0:f.self;y==null||!this.canProduceAudio||(y.audioEnabled?y.disableAudio():y.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c;(e=this.meeting)===null||e===void 0||e.self.removeListener("audioUpdate",this.audioUpdateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("stageJoined",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("removedFromStage",this.selfJoinStateListener),(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0||c.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.canProduceAudio=t.permissions.produceAudio==="ALLOWED",this.updateCanProduce(e),this.micPermission=e.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=t.audioEnabled,t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStageLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceAudio==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,n&&!a?this.canProduceAudio=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceAudio=!0),t.permissions.canProduceAudio==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0))}hasPermissionError(){return this.micPermission==="DENIED"||this.micPermission==="SYSTEM_DENIED"}getState(){let e="",t="",i="",r={},n=this.hasPermissionError(),s=this.micPermission==="COULD_NOT_START";return this.audioEnabled&&!n?(t=this.t("mic_on"),i=this.iconPack.mic_on):(t=this.t("mic_off"),i=this.iconPack.mic_off,r["red-icon"]=!0),s?e=this.t("Unable to capture audio"):this.micPermission==="SYSTEM_DENIED"?e=this.t("perm_sys_denied"):this.micPermission==="DENIED"?e=this.t("perm_browser_denied"):e=this.audioEnabled?this.t("Disable Mic"):this.t("Enable Mic"),{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n||s,disable:n}}render(){if(!this.canProduceAudio)return null;const{tooltipLabel:e,label:t,icon:i,classList:r,showWarning:n,disable:s}=this.getState();return h(z,{title:t},h("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},h("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:r,onClick:this.toggleMic,showWarning:n,disabled:s})))}static get watchers(){return{meeting:["meetingChanged"]}}};dI.style=K$;var Y$=Object.freeze({__proto__:null,dyte_mic_toggle:dI});const Q$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}",lI=class{constructor(e){X(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.gridSize=nS,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting.spotlight)===null||e===void 0||e.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)}meetingChanged(e){var t,i,r,n;e!=null&&(((t=e.spotlight)===null||t===void 0?void 0:t.selfActiveTab)!=null&&this.onSpotlightTabUpdate((i=e.spotlight.selfActiveTab)===null||i===void 0?void 0:i.type,(r=e.spotlight.selfActiveTab)===null||r===void 0?void 0:r.id),this.spotlightTabUpdateListener=s=>{this.onSpotlightTabUpdate(s==null?void 0:s.type,s==null?void 0:s.id)},(n=e.spotlight)===null||n===void 0||n.addListener("activeTabUpdate",this.spotlightTabUpdateListener))}screenShareParticipantsChanged(e=[]){!this.initialised&&this.activeTab!=null||(this.activeTab==null&&e.length>0?this.setActiveTab({type:"screenshare",participant:e[0]}):this.revalidateActiveTab())}pluginsChanged(e){if(!(!this.initialised&&this.activeTab!=null))if(e.length>0){const t=e.length-1;this.setActiveTab({type:"plugin",plugin:e[t]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(this.activeTab!=null)if(this.activeTab.type==="screenshare"){const{participant:e}=this.activeTab;this.screenShareParticipants.some(t=>t.id===e.id)||this.reassignActiveTab()}else{const{plugin:e}=this.activeTab;this.plugins.some(t=>t.id===e.id)||this.reassignActiveTab()}}setActiveTab(e,t=!0){var i;this.activeTab=e;const r=e.type==="screenshare"?e.participant.id:e.plugin.id;t&&((i=this.meeting.spotlight)===null||i===void 0||i.setSelfActiveTab({type:e.type,id:r},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const e=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[e]})}}onSpotlightTabUpdate(e,t){if(e!=null&&t!=null)switch(e){case"plugin":const i=this.plugins.find(n=>n.id===t);i!=null&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":const r=this.screenShareParticipants.find(n=>n.id===t);r!=null&&this.setActiveTab({type:"screenshare",participant:r},!1)}}getTabs(){const e=this.screenShareParticipants.map(i=>({type:"screenshare",participant:i})),t=this.plugins.map(i=>({type:"plugin",plugin:i}));return e.concat(t)}render(){var e;const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return h(z,null,h("main",{id:"main-view",part:"main-view"},((e=this.getTabs())===null||e===void 0?void 0:e.length)>1&&h("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:i=>this.setActiveTab(i.detail)},t)),h("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map(i=>{var r,n;return h(rt,{element:"dyte-screenshare-view",defaults:t,props:{participant:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="screenshare"&&((n=this.activeTab)===null||n===void 0?void 0:n.participant.id)===i.id?"flex":"none"}},childProps:{participant:i,isScreenShare:!0},deepProps:!0})}),this.plugins.map(i=>{var r,n;return h(rt,{element:"dyte-plugin-main",defaults:t,props:{plugin:i,key:i.id,style:{display:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===i.id?"flex":"none"}}})}))),h(rt,{element:"dyte-mixed-grid",defaults:t,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"sm",layout:"row"},onlyChildren:!0}))}get host(){return ma(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};lI.style=Q$;var Z$=Object.freeze({__proto__:null,dyte_mixed_grid:lI});const X$=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",uI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!K.activeMoreMenu}),K.activeMoreMenu=!K.activeMoreMenu},this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}render(){const e=this.t("More"),t=this.states||K,i=(t==null?void 0:t.activeMoreMenu)===!0?this.iconPack.chevron_down:this.iconPack.chevron_up;return h(z,{title:e},h("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleMoreMenu(),icon:i,label:e,part:"controlbar-button"}))}};uI.style=X$;var eF=Object.freeze({__proto__:null,dyte_more_toggle:uI});const tF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",pI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0})},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}render(){var e;if(!(!((e=this.meeting)===null||e===void 0)&&e.self.permissions.canAllowParticipantAudio))return null;const t=this.t("mute_all");return h(z,{title:t},h("dyte-tooltip",{kind:"block",label:t,part:"tooltip"},h("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:t,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}};pI.style=tF;var iF=Object.freeze({__proto__:null,dyte_mute_all_button:pI});const rF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.body{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}",hI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),K.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var t;(t=this.meeting)===null||t===void 0||t.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=Z,this.t=ee(),this.allowUnmute=!0}render(){return h(z,null,h("div",{class:"leave-modal"},h("div",{class:"header"},h("h2",{class:"title"},this.t("mute_all.header"))),h("p",{class:"message"},this.t("mute_all.description")),h("div",{class:"content"},h("div",{class:"leave-meeting"},h("dyte-button",{variant:"secondary",title:this.t("Close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),h("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};hI.style=rF;var nF=Object.freeze({__proto__:null,dyte_mute_all_confirmation:hI});const sF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}",gI=class{constructor(e){X(this,e),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.maxLength=20,this.isScreenShare=!1,this.iconPack=Z,this.t=ee(),this.length=13}sizeChanged(e){this.length=e==="sm"?8:13}formatNameTag(e,t){return this.isScreenShare?t?`${this.t("Screen")} - ${Or(e,this.length-3)} (${this.t("you")})`:`${this.t("Screen")} - ${Or(e,this.length)}`:t?`${Or(e,this.length-3)} (${this.t("you")})`:Or(e,this.length)}render(){var e,t,i;const r=yn(((e=this.participant)===null||e===void 0?void 0:e.name)||""),n=((t=this.participant)===null||t===void 0?void 0:t.id)===((i=this.meeting)===null||i===void 0?void 0:i.self.id);return h(z,{title:r},h("slot",{name:"start"}),h("span",{class:"name"},this.formatNameTag(r,n)),h("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};gI.style=sF;var aF=Object.freeze({__proto__:null,dyte_name_tag:gI});const oF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}",fI=class{constructor(e){X(this,e),this.onMediaScoreUpdate=({kind:t,isScreenshare:i,score:r})=>{(t==="video"||this.isScreenShare&&i)&&(this.score=r)},this.participant=void 0,this.meeting=void 0,this.iconPack=Z,this.t=ee(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(e){!e||e.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var e;(e=this.participant)===null||e===void 0||e.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){if(this.meeting&&this.meeting.self.userId===this.participant.userId)return null;let e=Math.round(this.score/2),t="good";if(e>3)return null;switch(e<1&&(e=1),e){case 3:case 2:t="poor";break;case 1:t="poorest"}return h(z,null,h("dyte-icon",{icon:this.iconPack[`signal_${e}`],class:t}),h("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};fI.style=oF;var cF=Object.freeze({__proto__:null,dyte_network_indicator:fI}),Qr;(function(e){e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"})(Qr||(Qr={}));const ih=console,dF={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class lF{constructor(){this.audio=document.createElement("audio"),this.audio.volume=.3}play(t,i=3e3){var r;this.playing||(this.playing=!0,this.audio.src=dF[t],this.audio.volume=.3,(r=this.audio.play())===null||r===void 0||r.catch(n=>{ih.error(`[dyte-notifications] play() failed
`,{sound:t,duration:i},n)}),setTimeout(()=>{this.playing=!1},i))}async setDevice(t){var i,r,n;await((n=(r=(i=this.audio)===null||i===void 0?void 0:i.setSinkId)===null||r===void 0?void 0:r.call(i,t))===null||n===void 0?void 0:n.catch(s=>{ih.error(`[dyte-notifications] setSinkId() error
`,s)}))}}const dn=2e3,Ub=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:dn,polls:dn,webinar:dn,tab_sync:dn},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10}),uF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";function pF(e){const t=Object.assign({},Ub);return e==null||(Object.assign(t.notification_sounds,e.notification_sounds),Object.assign(t.notifications,e.notifications),Object.assign(t.notification_duration,e.notification_duration),t.participant_chat_message_sound_notification_limit=e.participant_chat_message_sound_notification_limit,t.participant_joined_sound_notification_limit=e.participant_joined_sound_notification_limit),t}function Wk(e){return Object.keys(e).filter(t=>e[t])}const mI=class{constructor(e){X(this,e),this.permissions=Ub,this.enabledSounds=Wk(Ub.notification_sounds),this.addStagePeersListeners=t=>{t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.meta.addListener("disconnected",this.networkDisconnectedListener),t.meta.addListener("connected",this.networkConnectedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=t=>{t.participants.joined.removeListener("participantJoined",this.participantJoinedListener),t.meta.removeListener("disconnected",this.networkDisconnectedListener),t.meta.removeListener("connected",this.networkConnectedListener),t.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:t,type:i})=>{if(i===Qr.INCOMING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(t.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${r.name}`,duration:dn})}if(i===Qr.OUTGOING_REQUEST_ACCEPTED){let r=this.meeting.participants.joined.get(t.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has granted remote control.`,duration:dn})}if(i===Qr.REQUEST_RECEIVED){let r=this.meeting.participants.joined.get(t.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${r.name} has requested for remote control.`,duration:dn})}if((i===Qr.INCOMING_REQUEST_ENDED||i===Qr.OUTGOING_REQUEST_ENDED)&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:dn}),i===Qr.REQUEST_SENT){let r=this.meeting.participants.joined.get(t.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${r.name}`,duration:dn})}},this.onDyteNotification=t=>{this.add(t.detail);const i=t.detail.playSound;i!=null&&this.audio.play(i)},this.onRecordingUpdate=t=>{t==="RECORDING"?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:dn}):t==="STOPPING"&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:dn})},this.meeting=void 0,this.states=void 0,this.config=ct,this.t=ee(),this.size=void 0,this.iconPack=Z,this.notifications=[]}connectedCallback(){typeof document<"u"&&(document==null||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(e){var t,i,r,n,s,a,o,c,d;const l=e.meta.viewType==="LIVESTREAM";(l&&((t=e.stage)===null||t===void 0?void 0:t.status)==="ON_STAGE"||!l)&&this.removeStagePeersListeners(e),this.chatUpdateListener&&((i=e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&((r=e.polls)===null||r===void 0||r.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&e.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&e.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&e.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&e.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&e.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&((n=e.stage)===null||n===void 0||n.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&((s=e.stage)===null||s===void 0||s.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&((a=e.stage)===null||a===void 0||a.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&((o=e.stage)===null||o===void 0||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),(c=e.remote)===null||c===void 0||c.removeListener("remoteUpdate",this.onRemoteUpdate),(d=e.recording)===null||d===void 0||d.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var e;typeof document<"u"&&(document==null||document.removeEventListener("dyteNotification",this.onDyteNotification)),this.meeting!=null&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.spotlightTabUpdateListener&&((e=this.meeting.spotlight)===null||e===void 0||e.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener))}meetingChanged(e,t){var i,r,n,s,a,o,c,d,l;if(clearTimeout(this.disconnectTimeout),t!==void 0&&this.clearListeners(t),e==null)return;const u=e.meta.viewType==="LIVESTREAM";this.audio=new lF;const{notifications:f,notification_duration:y,notification_sounds:b}=this.permissions;this.participantJoinedListener=P=>{f.participant_joined&&this.add({id:`${P.id}-joined`,message:`${yn(P.name)} just joined`,image:P.picture,duration:y.participant_joined}),b.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=P=>{f.participant_left&&this.add({id:`${P.id}-left`,message:`${yn(P.name)} left`,image:P.picture,duration:y.participant_left}),b.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=P=>{const w=`${P.id}-joined-waitlist`;this.add({id:w,message:`${yn(P.name)} is requesting to join the meeting`,image:P.picture,duration:y.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(P.id),this.remove(w)}}}),b.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:P})=>{const w=$A(P);if(w!=null){if(w.userId===e.self.userId)return;w.type==="text"&&(f.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${w.displayName}: ${Or(w.message,20)}`,duration:y.chat}),b.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:P,newPoll:w})=>{w!==!1&&(f.polls&&this.meeting.self.userId!==P[P.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${P[P.length-1].createdBy}`,duration:y.polls}),b.polls&&this.meeting.self.userId!==P[P.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:P,preview:w})=>{w||(P.kind==="audiooutput"?(this.audio.setDevice(P.deviceId),this.add({id:`speaker-switched-${P.deviceId}`,message:`Connected to ${P.label}`,icon:this.iconPack.speaker,duration:5e3})):P.kind==="videoinput"?this.add({id:`camera-switched-${P.deviceId}`,message:`Connected to ${P.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${P.deviceId}`,message:`Connected to ${P.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{this.remove("network");let P;P=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("Connection lost. Trying to reconnect..."),duration:P}),this.disconnectTimeout=setTimeout(()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("Taking too long to reconnect..."),button:{text:this.t("End Meeting"),variant:"danger",onClick:()=>{var w;return(w=this.meeting)===null||w===void 0?void 0:w.leaveRoom()}}})},P)},this.networkConnectedListener=()=>{this.remove("network");let P;this.remove("network-lost"),P=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("Connection restored"),duration:P}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:P,attempt:w})=>{this.remove("socket"),P==="reconnected"?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("Connection restored"),duration:3e3})):P==="disconnected"?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("Connection lost"),duration:3e3}):P==="reconnecting"?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("Connection lost. Please check your network connection.")}):P==="reconnectFailure"?w>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("Taking too long to reconnect. Please check your network connection."),button:{text:this.t("End Meeting"),variant:"danger",onClick:()=>{var E;return(E=this.meeting)===null||E===void 0?void 0:E.leaveRoom()}}})):P==="failed"&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("Could not reconnect. Please leave the meeting and try refreshing the window.")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("Automatically leaving the meeting in 10 seconds.")}),setTimeout(()=>{var E;(E=this.meeting)===null||E===void 0||E.leaveRoom("disconnected")},1e4))},this.spotlightTabUpdateListener=P=>{if(!!f.tab_sync)switch(P.type){case"plugin":const w=e.plugins.active.toArray().find(R=>R.id==P.id);w!=null&&this.add({id:"spotlight",message:`Plugin switched to ${w.name}`,duration:y.participant_joined});break;case"screenshare":const E=e.participants.joined.toArray().filter(R=>R.screenShareEnabled).find(R=>R.id==P.id);E!=null&&this.add({id:"spotlight",message:`Now watching ${E.name}'s screen`,duration:y.webinar});break}},this.peerRequestToJoinStateListener=({id:P})=>{if(!f.webinar)return;const w=this.meeting.participants.joined.get(P);w!==void 0&&(this.add({id:`webinar-request-${P}`,message:`${w.name} is requesting to be on stage`,duration:y.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.participants.acceptAllRequestToJoinStageRequests([{id:P,requestToJoinType:"REQUEST_TO_PRESENT"}]),this.remove(`webinar-request-${P}`)}}}),b.webinar&&this.audio.play("joined"))},this.peerAcceptedToJoinStageListener=P=>{if(!f.webinar)return;const w=this.meeting.participants.joined.get(P.id);w!==void 0&&(this.add({id:`webinar-accepted-${P.id}`,message:`Approved ${w.name}'s request to join stage.`,duration:y.webinar}),b.webinar&&this.audio.play("joined"))},this.peerRejectedToJoinStageListener=P=>{if(!f.webinar)return;const w=this.meeting.participants.joined.get(P.id);w!==void 0&&this.add({id:`webinar-rejected-${P.id}`,message:`Rejected ${w.name}'s request to join stage.`,duration:y.webinar})},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:P})=>{this.add({id:"new-stage-request",message:`You have ${P} pending request${P===1?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=P=>{P==="ON_STAGE"?this.addStagePeersListeners(e):this.removeStagePeersListeners(e)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:P})=>this.socketUpdateListener({event:"reconnectFailure",attempt:P});const k=e.self.getCurrentDevices();k.speaker!=null&&this.audio.setDevice(k.speaker.deviceId),u?(i=e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(e),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.canAcceptWaitingRequests()&&e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),!Em(e)&&((r=e.chat)===null||r===void 0||r.addListener("chatUpdate",this.chatUpdateListener)),(n=e.polls)===null||n===void 0||n.addListener("pollsUpdate",this.pollUpdateListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener),e.meta.addListener("socketReconnected",this.socketReconnectedListener),e.meta.addListener("socketDisconnected",this.socketDisconnectedListener),e.meta.addListener("socketReconnecting",this.socketReconnectingListener),e.meta.addListener("socketFailure",this.socketFailureListener),e.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),(s=e.remote)===null||s===void 0||s.addListener("remoteUpdate",this.onRemoteUpdate),(a=e.spotlight)===null||a===void 0||a.addListener("activeTabUpdate",this.spotlightTabUpdateListener),(o=e.recording)===null||o===void 0||o.addListener("recordingUpdate",this.onRecordingUpdate),(c=e.stage)===null||c===void 0||c.addListener("stageRequestApproved",this.stageRequestAccepted),(d=e.stage)===null||d===void 0||d.addListener("stageRequestRejected",this.stageRequestRejected),e.self.permissions.acceptPresentRequests&&((l=e.stage)===null||l===void 0||l.addListener("newStageRequest",this.newStageRequests))}configChanged(e){e!=null&&(e==null?void 0:e.config)!=null&&(this.permissions=pF(e.config),this.enabledSounds=Wk(this.permissions.notification_sounds))}statesChanged(e){var t;if(e!=null){const i=!(!((t=e==null?void 0:e.prefs)===null||t===void 0)&&t.muteNotificationSounds);for(const r of this.enabledSounds)r in this.permissions.notification_sounds&&(this.permissions.notification_sounds[r]=i)}}apiErrorListener({detail:e}){const{trace:t,message:i}=e;this.add({id:t,message:i,duration:dn,icon:this.iconPack.warning})}add(e){document.visibilityState==="visible"&&this.notifications.length<5&&(this.notifications=[...this.notifications,e])}remove(e){this.notifications=this.notifications.filter(t=>t.id!==e)}handleDismiss(e){e.stopPropagation();const t=e.detail,i=this.host.shadowRoot.querySelector(`[data-id="${t}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{es(()=>{this.remove(t)})},400)}canPlayParticipantJoinedSound(){return this.permissions.participant_joined_sound_notification_limit==null||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return this.permissions.participant_chat_message_sound_notification_limit==null||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return h(z,null,this.notifications.map(e=>h("dyte-notification",{size:this.size,key:e.id,"data-id":e.id,notification:e,onDyteNotificationDismiss:t=>this.handleDismiss(t),iconPack:this.iconPack,t:this.t})))}get host(){return ma(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};mI.style=uF;var hF=Object.freeze({__proto__:null,dyte_notifications:mI});const gF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",vI=class{constructor(e){X(this,e),this.disconnectMeeting=t=>{t!=null&&this.countListener!=null&&(t.participants.joined.removeListener("participantJoined",this.countListener),t.participants.joined.removeListener("participantLeft",this.countListener))},this.meeting=void 0,this.iconPack=Z,this.t=ee(),this.participantCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){this.disconnectMeeting(t),e!=null&&(this.countListener=()=>{this.participantCount=e.participants.joined.size+(e.self.roomJoined?1:0)},this.countListener(),e.participants.joined.addListener("participantJoined",this.countListener),e.participants.joined.addListener("participantLeft",this.countListener))}render(){return Ev(this.meeting)?null:h(z,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},h("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};vI.style=gF;var fF=Object.freeze({__proto__:null,dyte_participant_count:vI});const mF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}",yI=class{constructor(e){X(this,e),this.onVideoUpdate=t=>{this.videoState=t},this.onPinned=({isPinned:t})=>{this.isPinned=t},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=ct,this.variant="solid",this.size=void 0,this.iconPack=Z,this.t=ee()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned))}async participantsChanged(e){e!=null&&(this.videoState={videoEnabled:e.videoEnabled,videoTrack:e.videoTrack},this.isPinned=e.isPinned,e.addListener("videoUpdate",this.onVideoUpdate),e.addListener("pinned",this.onPinned),e.addListener("unpinned",this.onPinned))}videoStateChanged(e){if(e!=null&&this.videoEl!=null)if(e.videoEnabled){const t=new MediaStream;t.addTrack(e.videoTrack),this.videoEl.srcObject=t}else this.videoEl.srcObject=void 0}isMirrored(){var e;if(this.participant!=null&&("preview"in this.participant||this.isPreview)){const i=this.states||K,r=(e=i==null?void 0:i.prefs)===null||e===void 0?void 0:e.mirrorVideo;if(typeof r=="boolean")return r}return!1}render(){var e,t,i,r;return h(z,null,h("video",{ref:n=>this.videoEl=n,class:{visible:(e=this.videoState)===null||e===void 0?void 0:e.videoEnabled,mirror:this.isMirrored(),[(r=(i=(t=this.config)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&h("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("Pinned"),iconPack:this.iconPack,t:this.t}),h("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};yI.style=mF;var vF=Object.freeze({__proto__:null,dyte_participant_setup:yI});const yF=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}`,bI=class{constructor(t){X(this,t),this.onSearchInput=i=>{this.search=i.target.value},this.meeting=void 0,this.states=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.t=ee(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting!=null}meetingChanged(t){t!=null}render(){const t={meeting:this.meeting,states:this.states||K,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return h(z,null,h("div",{class:"search",part:"search"},h("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),h("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),h("div",{class:"ctr scrollbar",part:"container"},h(rt,{element:"dyte-participants-waiting-list",defaults:t}),h(rt,{element:"dyte-participants-stage-queue",defaults:t}),h(rt,{element:"dyte-participants-stage-list",defaults:t,props:{search:this.search}}),h(rt,{element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search}})))}static get watchers(){return{meeting:["meetingChanged"]}}};bI.style=yF;var bF=Object.freeze({__proto__:null,dyte_participants:bI});class _F{constructor(){this.audio=document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(t,i){this.audioTracks.some(r=>r.id===t)||(this.audioTracks.push({id:t,track:i}),this.audioStream.addTrack(i),this.play())}removeTrack(t){const i=this.audioTracks.find(r=>r.id===t);i!=null&&(this.audioStream.removeTrack(i.track),this.audioTracks=this.audioTracks.filter(r=>r.id!==t))}async play(){var t;this.audio.srcObject=this.audioStream,await((t=this.audio.play())===null||t===void 0?void 0:t.catch(i=>{i.name==="NotAllowedError"?this._onError!=null&&this._onError():i.name!=="AbortError"&&ih.error(`[dyte-audio] play() error
`,i)}))}async setDevice(t){var i,r,n;await((n=(r=(i=this.audio).setSinkId)===null||r===void 0?void 0:r.call(i,t))===null||n===void 0?void 0:n.catch(s=>{ih.error(`[dyte-audio] setSinkId() error
`,s)}))}onError(t){this._onError=t}}const wF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}",_I=class{constructor(e){X(this,e),this.dialogClose=le(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=Z,this.t=ee(),this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.meeting!=null&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&((e=this.meeting.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}handleAudioError(){this.audio=new _F,this.audio.onError(()=>{this.showPlayDialog=!0}),this.audio.play()}async meetingChanged(e){var t;if(e!=null){e.meta.viewType==="LIVESTREAM"&&e.stage.status!=="ON_STAGE"?(this.stageStatusUpdateListener=r=>{r==="ON_STAGE"&&this.handleAudioError()},(t=e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.stageStatusUpdateListener)):this.handleAudioError();const i=e.self.getCurrentDevices();i.speaker!=null&&await this.audio.setDevice(i.speaker.deviceId),this.audioUpdateListener=({id:r,audioEnabled:n,audioTrack:s})=>{const a=`audio-${r}`;n&&s!=null?this.audio.addTrack(a,s):this.audio.removeTrack(a)};{const r=e.participants.joined.toArray();for(const n of r)this.audioUpdateListener(n)}this.participantLeftListener=({id:r})=>{this.audio.removeTrack(`audio-${r}`),this.audio.removeTrack(`screenshare-${r}`)},this.screenShareUpdateListener=({id:r,screenShareEnabled:n,screenShareTracks:s})=>{const a=`screenshare-${r}`;n&&s.audio!=null?this.audio.addTrack(a,s.audio):this.audio.removeTrack(a)},this.deviceUpdateListener=({device:r,preview:n})=>{n||r.kind==="audiooutput"&&this.audio.setDevice(r.deviceId)},e.participants.joined.addListener("audioUpdate",this.audioUpdateListener),e.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.self.addListener("deviceUpdate",this.deviceUpdateListener)}}render(){return h(z,null,this.showPlayDialog&&h("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},h("div",{class:"modal"},h("h3",null,this.t("audio_playback.title")),h("p",null,this.t("audio_playback.description")),h("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};_I.style=wF;var SF=Object.freeze({__proto__:null,dyte_participants_audio:_I});const EF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}",wI=class{constructor(e){X(this,e),this.updateParticipants=()=>{this.getParticipants(this.search)},this.shouldShowStageList=()=>{var t,i,r;((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="LIVESTREAM"?this.showStageList=((r=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE":this.showStageList=!0},this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.view="sidebar",this.t=ee(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){var e,t;const{participants:i,self:r}=this.meeting;this.meeting!=null&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),i.joined.removeListener("peerStartedPresenting",this.updateParticipants),i.joined.removeListener("peerStoppedPresenting",this.updateParticipants),r.removeListener("stageJoined",this.updateParticipants),r.removeListener("stageLeft",this.updateParticipants),r.removeListener("removedFromStage",this.updateParticipants),(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.shouldShowStageList))}meetingChanged(e){var t;e!=null&&(this.participantJoinedListener=i=>{if(this.meeting.meta.viewType==="WEBINAR"&&i.webinarStageStatus!=="ON_STAGE")return;const r=this.search.toLowerCase();!i.name.toLowerCase().includes(r)||!i.id.toLowerCase().includes(r)||(this.participants=[...this.participants.filter(n=>n.id!==i.id),i])},this.participantLeftListener=i=>{this.participants=this.participants.filter(r=>r.id!==i.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateParticipants),e.participants.joined.addListener("peerStoppedPresenting",this.updateParticipants),e.self.addListener("stageJoined",this.updateParticipants),e.self.addListener("stageLeft",this.updateParticipants),e.self.addListener("removedFromStage",this.updateParticipants),this.shouldShowStageList(),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.shouldShowStageList))}searchChanged(e){this.getParticipants(e)}getParticipants(e){let t=[this.meeting.self,...this.meeting.participants.joined.toArray()];this.meeting.meta.viewType==="WEBINAR"&&(t=t.filter(i=>i.webinarStageStatus==="ON_STAGE")),e===""?this.participants=t:this.participants=t.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!!this.showStageList)return h(z,null,h("div",{class:"participants-container"},h("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),h("ul",{class:"participants",part:"participants"},this.participants.map(e=>h("dyte-participant",{role:"listitem",key:e.id,meeting:this.meeting,participant:e,view:this.view,t:this.t,iconPack:this.iconPack})),this.participants.length===0&&h("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("Couldn't find a participant with the specified name or ID."):this.t("It looks like nobody is here.")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};wI.style=EF;var TF=Object.freeze({__proto__:null,dyte_participants_stage_list:wI});const kF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",SI=class{constructor(e){X(this,e),this.peerPresentingUpdateListener=()=>{this.stageRequestedParticipants=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(t=>t.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(t=>t.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE")},this.acceptStageRequest=async t=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=t,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.acceptJoinStageRequest(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=t;await this.meeting.stage.grantAccess([i])}},this.rejectStageRequest=async t=>{if(this.meeting.meta.viewType==="WEBINAR"){const{id:i}=t,r=this.meeting.participants.joined.get(i);r!==void 0&&await r.rejectRequestToJoinStage(),this.updateStageRequestedParticipants()}else if(this.meeting.meta.viewType==="LIVESTREAM"){const{userId:i}=t;await this.meeting.stage.denyAccess([i])}},this.acceptAllStageRequest=async()=>{if(this.meeting.meta.viewType==="WEBINAR"){const t=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE").map(i=>({id:i.id,requestToJoinType:"REQUEST_TO_PRESENT"}));await this.meeting.participants.acceptAllRequestToJoinStageRequests(t),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map(t=>t.userId))},this.denyAllStageRequest=async()=>{var t;if(this.meeting.meta.viewType==="WEBINAR"){const i=this.meeting.participants.joined.toArray().filter(r=>r.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE");await Promise.all(i.map(async r=>await r.rejectRequestToJoinStage())),this.updateStageRequestedParticipants()}else this.meeting.meta.viewType==="LIVESTREAM"&&await((t=this.meeting.stage)===null||t===void 0?void 0:t.denyAccess(this.stageRequestedParticipants.map(i=>i.userId)))},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async t=>{var i,r,n,s;this.meeting.meta.viewType==="WEBINAR"?this.stageRequestedParticipants=(i=[this.meeting.self,...this.meeting.participants.joined.toArray()])===null||i===void 0?void 0:i.filter(a=>a.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"):this.meeting.meta.viewType==="LIVESTREAM"&&(t||(t=(s=(n=await((r=this.meeting.stage)===null||r===void 0?void 0:r.getAccessRequests()))===null||n===void 0?void 0:n.stageRequests)!==null&&s!==void 0?s:[]),this.stageRequestedParticipants=t.map(a=>Object.assign(Object.assign({},a),{name:a.displayName})))},this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.view="sidebar",this.t=ee(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:e,self:t}=this.meeting;this.participantLeftListener&&e.joined.removeListener("participantLeft",this.participantLeftListener),this.peerRequestToJoinStageListener&&e.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),this.peerAcceptedToJoinStageListener&&e.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&e.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.joined.removeListener("peerStartedPresenting",this.peerPresentingUpdateListener),e.joined.removeListener("peerStoppedPresenting",this.peerPresentingUpdateListener),t.removeListener("stageJoined",this.peerPresentingUpdateListener),t.removeListener("stageLeft",this.peerPresentingUpdateListener),t.removeListener("removedFromStage",this.peerPresentingUpdateListener)}meetingChanged(e){var t;e!=null&&(this.participantLeftListener=i=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!==i.id)},this.peerRequestToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(n=>n.id!=i);const r=e.participants.joined.get(i);r!==void 0&&(this.stageRequestedParticipants=[...this.stageRequestedParticipants,r])},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.updateRequestList(),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStageListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.participants.joined.addListener("peerStartedPresenting",this.peerPresentingUpdateListener),e.participants.joined.addListener("peerStoppedPresenting",this.peerPresentingUpdateListener),(t=e.stage)===null||t===void 0||t.on("stageAccessRequestUpdate",this.updateRequestList),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.self.addListener("stageJoined",this.peerPresentingUpdateListener),e.self.addListener("stageLeft",this.peerPresentingUpdateListener),e.self.addListener("removedFromStage",this.peerPresentingUpdateListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowStageRequests()))return h("div",{class:"stage-requested-participants"},h("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),h("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map(e=>h("li",{class:"waiting-participant",key:e.id},h("div",{class:"participant-details"},h("dyte-avatar",{participant:e,size:"sm",iconPack:this.iconPack,t:this.t}),h("p",{class:"name",title:e.name},e.name)),h("div",{class:"waitlist-controls"},h("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},h("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(e),iconPack:this.iconPack,t:this.t},h("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),h("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},h("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(e)},h("dyte-icon",{class:"accept",icon:this.iconPack.checkmark}))))))),h("div",{class:"bulk-actions"},h("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),h("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};SI.style=kF;var PF=Object.freeze({__proto__:null,dyte_participants_stage_queue:SI});const CF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}",EI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.updateStageRequests=async t=>{var i,r,n;t||(t=(n=(r=await((i=this.meeting.stage)===null||i===void 0?void 0:i.getAccessRequests()))===null||r===void 0?void 0:r.stageRequests)!==null&&n!==void 0?n:[]),this.stageRequestedParticipants=t},this.updateCanView=()=>{this.canViewParticipants=Lb(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),$l("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i;this.meeting!=null&&((t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),this.peerRequestToJoinStateListener&&this.meeting.participants.joined.removeListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),this.peerAcceptedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.removeListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),this.peerRejectedToJoinStageListener&&this.meeting.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener),(i=this.meeting.stage)===null||i===void 0||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests))}meetingChanged(e){var t;e!=null&&(this.canViewParticipants=Lb(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView),e.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=e.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=i=>{this.waitlistedParticipants.some(r=>r.id===i.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,i])},this.waitlistedParticipantLeftListener=i=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(r=>r.id!==i.id)},e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),e.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.acceptPresentRequests&&(this.meeting.meta.viewType==="WEBINAR"&&(this.peerRequestToJoinStateListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(n=>n.id!=i);const r=e.participants.joined.get(i);r!==void 0&&this.stageRequestedParticipants.push(r)},this.peerAcceptedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.peerRejectedToJoinStageListener=({id:i})=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(r=>r.id!=i)},this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(i=>i.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"),e.participants.joined.addListener("peerRequestToJoinStage",this.peerRequestToJoinStateListener),e.participants.joined.addListener("peerAcceptedToJoinStage",this.peerAcceptedToJoinStageListener),e.participants.joined.addListener("peerRejectedToJoinStage",this.peerRejectedToJoinStageListener),e.participants.joined.addListener("peerStoppedPresenting",this.peerRejectedToJoinStageListener)),this.meeting.meta.viewType==="LIVESTREAM"&&(this.updateStageRequests(),e==null||e.stage.on("stageAccessRequestUpdate",this.updateStageRequests))))}statesChanged(e){const t=e||K;t!=null&&(this.participantsActive=t.activeSidebar===!0&&t.sidebar==="participants")}toggleParticipantsTab(){const e=this.states||K;this.participantsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="participants"),K.activeSidebar=this.participantsActive,K.sidebar=this.participantsActive?"participants":"none",this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":"none",activeMoreMenu:!1,activeAI:!1}),K.activeMoreMenu=!1}render(){if(!this.canViewParticipants)return;const e=this.t("participants"),t=this.waitlistedParticipants.length+this.stageRequestedParticipants.length;return h(z,{title:e},t!==0&&!this.participantsActive&&h("div",{class:"waiting-participants-count",part:"waiting-participants-count"},h("span",null,t<=100?t:"99+")),h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};EI.style=CF;var RF=Object.freeze({__proto__:null,dyte_participants_toggle:EI});const xF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",TI=class{constructor(e){X(this,e),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>this.meeting.meta.viewType==="WEBINAR",this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.view="sidebar",this.search="",this.t=ee(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(e){e!=null&&(this.participantJoinedListener=t=>{if(t.webinarStageStatus==="ON_STAGE")return;const i=this.search.toLowerCase();!t.name.toLowerCase().includes(i)||!t.id.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter(r=>r.id!==t.id),t])},this.participantLeftListener=t=>{this.stageViewers=this.stageViewers.filter(i=>i.id!==t.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),e.participants.joined.addListener("peerStartedPresenting",this.updateStageViewers),e.participants.joined.addListener("peerStoppedPresenting",this.updateStageViewers),e.self.addListener("stageJoined",this.updateStageViewers),e.self.addListener("stageLeft",this.updateStageViewers),e.self.addListener("removedFromStage",this.updateStageViewers))}searchChanged(e){this.getViewers(e)}disconnectedCallback(){const{participants:e,self:t}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),e.joined.removeListener("peerStartedPresenting",this.updateStageViewers),e.joined.removeListener("peerStoppedPresenting",this.updateStageViewers),t.removeListener("stageJoined",this.updateStageViewers),t.removeListener("stageLeft",this.updateStageViewers),t.removeListener("removedFromStage",this.updateStageViewers)}getViewers(e){let t=[this.meeting.self,...this.meeting.participants.joined.toArray()].filter(i=>i.webinarStageStatus!=="ON_STAGE");e===""?this.stageViewers=t:this.stageViewers=t.filter(i=>{var r;return((r=i.name)!==null&&r!==void 0?r:i.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!(this.view!=="sidebar"||!this.shouldShowViewers()))return h("div",{class:"list"},h("div",{class:"heading-count",part:"heading-count"},this.t("Viewers")," (",this.stageViewers.length,")"),h("ul",{class:"participants",part:"participants"},this.stageViewers.map(e=>{if(e.webinarStageStatus!=="ON_STAGE")return h("dyte-participant",{role:"listitem",key:e.id,meeting:this.meeting,participant:e,view:this.view,iconPack:this.iconPack,t:this.t})}),this.stageViewers.length===0&&h("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("Couldn't find a viewer with the specified name or ID."):this.t("It looks like nobody is here."))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};TI.style=xF;var AF=Object.freeze({__proto__:null,dyte_participants_viewer_list:TI});const IF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",kI=class{constructor(e){X(this,e),this.acceptWaitingRoomRequest=async t=>{await this.meeting.participants.acceptWaitingRoomRequest(t)},this.acceptAllWaitingRoomRequests=async()=>{const t=this.waitlistedParticipants.map(i=>this.meeting.participants.acceptWaitingRoomRequest(i.id));await Promise.all(t)},this.rejectWaitingRoomRequest=async t=>{await this.meeting.participants.rejectWaitingRoomRequest(t)},this.shouldShowWaitlist=()=>this.meeting.meta.viewType==="LIVESTREAM"?!1:this.meeting.self.permissions.acceptWaitingRequests&&this.waitlistedParticipants.length!==0,this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.view="sidebar",this.t=ee(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:e}=this.meeting;this.waitlistedParticipantJoinedListener&&e.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&e.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){e!=null&&(this.waitlistedParticipants=e.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=t=>{this.waitlistedParticipants.some(i=>i.id===t.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,t])},this.waitlistedParticipantLeftListener=t=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(i=>i.id!==t.id)},e.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),e.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowWaitlist()))return h("div",{class:"waiting-participants"},h("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),h("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map(e=>h("li",{class:"waiting-participant",key:e.id},h("div",{class:"participant-details"},h("dyte-avatar",{participant:e,size:"sm",iconPack:this.iconPack,t:this.t}),h("p",{class:"name",title:e.name},e.name)),h("div",{class:"waitlist-controls"},h("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},h("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(e.id)},h("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),h("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},h("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(e.id)},h("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}))))))),h("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};kI.style=IF;var OF=Object.freeze({__proto__:null,dyte_participants_waiting_list:kI});const MF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;width:560px;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}",PI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),K.activePermissionsMessage={enabled:!1}},this.reload=()=>{typeof window<"u"&&window.location.reload()},this.meeting=void 0,this.t=ee(),this.iconPack=Z,this.states=void 0,this.device=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){e!=null&&(this.device=e.self.device)}getLink(e){let t;switch(e){case"audio":t="microphone";break;case"video":t="camera";break;default:t="screenshare";break}const i="https://www.google.com/search?q=";let r=`Allow+${t}+access`;if(this.device!=null){const{browserName:n,isMobile:s}=this.device;r+="+"+n,s&&(r+="+mobile")}return i+r}isDeniedBySystem(){var e;const t=(e=this.meeting)===null||e===void 0?void 0:e.self.mediaPermissions;return t==null?!1:!!Object.values(t).includes("SYSTEM_DENIED")}render(){var e,t,i,r,n,s,a,o,c,d,l,u;const f=this.isDeniedBySystem();return h(z,null,h("h2",null,h("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),f?this.t(`perm_sys_denied.${(i=(t=(e=this.states)===null||e===void 0?void 0:e.activePermissionsMessage)===null||t===void 0?void 0:t.kind)!==null&&i!==void 0?i:"audio"}`):this.t(`perm_denied_title.${(s=(n=(r=this.states)===null||r===void 0?void 0:r.activePermissionsMessage)===null||n===void 0?void 0:n.kind)!==null&&s!==void 0?s:"audio"}`)),h("p",null,this.t(`perm_denied_text.${(c=(o=(a=this.states)===null||a===void 0?void 0:a.activePermissionsMessage)===null||o===void 0?void 0:o.kind)!==null&&c!==void 0?c:"audio"}`)),f&&h("p",null,this.t("perm.sys_denied.message")),!f&&h("a",{class:"need-help-link",href:this.getLink((u=(l=(d=this.states)===null||d===void 0?void 0:d.activePermissionsMessage)===null||l===void 0?void 0:l.kind)!==null&&u!==void 0?u:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},h("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("Need help on how to do this?")),h("div",{class:"actions"},h("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("Continue as it is")),h("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("Reload"))),h("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};PI.style=MF;var DF=Object.freeze({__proto__:null,dyte_permissions_message:PI});const LF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",CI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=ct,this.iconPack=Z,this.size=void 0,this.t=ee(),this.pipEnabled=!1,this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){}statesChanged(e){const t=e||K;(t==null?void 0:t.activePipMode)!=null&&(this.pipEnabled=t.activePipMode)}meetingChanged(e){var t;if(e===null)return;this.pipSupported=jt.isSupported()&&((t=e.self.config)===null||t===void 0?void 0:t.pipMode);const i=this.states||K;this.pipEnabled=i.activePipMode}togglePip(){const e=this.states||K,{activePipMode:t}=e;t!==!0?(jt.updateMediaSession(Ar.CAMERA,this.meeting.self.videoEnabled),jt.updateMediaSession(Ar.MIC,this.meeting.self.audioEnabled),jt.enable(),this.stateUpdate.emit({activePipMode:!0})):(jt.disable(),this.stateUpdate.emit({activePipMode:!1})),this.stateUpdate.emit({activeMoreMenu:!1}),K.activeMoreMenu=!1}render(){if(!!this.pipSupported)return h(z,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:this.pipEnabled?this.iconPack.pip_on:this.iconPack.pip_off,label:this.pipEnabled?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{states:["statesChanged"],meeting:["meetingChanged"]}}};CI.style=LF;var NF=Object.freeze({__proto__:null,dyte_pip_toggle:CI});const UF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}",RI=class{constructor(e){X(this,e),this.meeting=void 0,this.plugin=void 0,this.iconPack=Z,this.t=ee(),this.canClosePlugin=!1,this.canControl=!0,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(e){var t;if(e!=null){const i=e.self.permissions,r=i.isV2?i.plugins.canEditConfig:i.plugins.canEditAcl;if(i.plugins.config!==void 0){Object.keys(i.plugins.config||{}).forEach(a=>{i.plugins.config[a.toLowerCase()]=i.plugins.config[a]});const n=this.plugin.id.replace(new RegExp("-","g"),""),s=(((t=i.plugins.config[n])===null||t===void 0?void 0:t.defaultAccess)||"blacklist")==="whitelist";this.plugin.enabledBy===e.self.userId||r?this.canControl=!0:s&&(this.canControl=!1),this.viewModeEnabled=!this.canControl}es(()=>{this.canClosePlugin=e.self.permissions.plugins.canClose})}}pluginChanged(e){this.toggleViewModeListener=t=>{this.viewModeEnabled=t},e!=null&&(e.addPluginView(this.iframeEl),e.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var e;(e=this.plugin)===null||e===void 0||e.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return this.plugin==null?null:h(z,null,h("header",{part:"header"},h("div",null,this.plugin.name),this.canClosePlugin&&h("div",null,h("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),h("div",{class:"iframe-container"},!this.canControl&&(this.viewModeEnabled?h("div",{class:"block-inputs"}):null),h("iframe",{ref:e=>this.iframeEl=e,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};RI.style=UF;var jF=Object.freeze({__proto__:null,dyte_plugin_main:RI});const $F=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}`,xI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:"none"}),K.activeSidebar=!1,K.sidebar="none"},this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.t=ee(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugin=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting)===null||e===void 0||e.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(e){e!=null&&(this.canStartPlugins=e.self.permissions.plugins.canStart,this.canClosePlugin=e.self.permissions.plugins.canClose,this.plugins=e.plugins.all.toArray().filter(t=>{var i;return!(!((i=e.self.config.disabledPlugins)===null||i===void 0)&&i.includes(t.id))}),this.updateActivePlugins=()=>{this.activatedPluginsId=e.plugins.active.toArray().map(t=>t.id)},this.updateActivePlugins(),e.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return h(z,null,h("ul",{class:"scrollbar"},this.plugins.map(e=>h("li",{key:e.name,class:"plugin"},h("div",{class:"metadata"},h("img",{src:e.picture}),h("div",{class:"name"},e.name)),!this.activatedPluginsId.includes(e.id)&&this.canStartPlugins&&h("div",{class:"buttons"},h("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{e.activate(),this.close()},"aria-label":`${this.t("Activate")} ${e.name}`},h("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(e.id)&&this.canClosePlugin&&h("div",{class:"buttons"},h("dyte-button",{kind:"icon",size:"lg",onClick:()=>{e.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("Close")} ${e.name}`},h("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};xI.style=$F;var FF=Object.freeze({__proto__:null,dyte_plugins:xI});const BF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",AI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=Nb(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),$l("sidebar",()=>this.statesChanged())}meetingChanged(e){var t;e!=null&&(this.canViewPlugins=Nb(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||K;t!=null&&(this.pluginsActive=t.activeSidebar===!0&&t.sidebar==="plugins")}togglePlugins(){const e=this.states||K;this.pluginsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="plugins"),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":"none",activeMoreMenu:!1,activeAI:!1}),K.activeSidebar=this.pluginsActive,K.sidebar=this.pluginsActive?"plugins":"none",K.activeMoreMenu=!1}render(){if(!this.canViewPlugins)return;const e=this.t("plugins");return h(z,{title:e},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};AI.style=BF;var VF=Object.freeze({__proto__:null,dyte_plugins_toggle:AI});const zF=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}`,II=class{constructor(t){X(this,t),this.onPollsUpdate=i=>{this.polls=[...i.polls]},this.meeting=void 0,this.config=ct,this.size=void 0,this.iconPack=Z,this.t=ee(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.meeting!=null&&((t=this.meeting.polls)===null||t===void 0||t.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(t){t!=null&&(t&&!t.polls||(this.polls=[...t.polls.items],t.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async i=>{this.create=!1,await t.polls.create(i.question,i.options,i.anonymous,i.hideVotes)},this.onVote=async(i,r)=>{await t.polls.vote(i,r)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){fo(this.pollEl)}render(){return h(z,null,h("div",{class:"ctr",part:"container"},h("div",{class:"polls-view scrollbar",ref:t=>this.pollEl=t,part:"polls"},this.polls.map(t=>{var i;return h("dyte-poll",{key:t.id,poll:t,onDyteVotePoll:r=>{this.onVote(r.detail.id,r.detail.index)},self:(i=this.meeting)===null||i===void 0?void 0:i.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})}),this.create&&h("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:t=>{this.onCreate(t.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&h("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("Cancel Poll Creation"):this.t("Create New Poll"))))}static get watchers(){return{meeting:["meetingChanged"]}}};II.style=zF;var HF=Object.freeze({__proto__:null,dyte_polls:II});const GF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",OI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:t})=>{t===!0&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=Db(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),$l("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t,i;(e=this.meeting.polls)===null||e===void 0||e.removeListener("pollsUpdate",this.onPollsUpdate),(i=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(e){var t;e&&e.polls&&(this.unreadPollsCount=e.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),this.canViewPolls=Db(e),(t=e==null?void 0:e.stage)===null||t===void 0||t.on("stageStatusUpdate",this.updateCanView))}statesChanged(e){const t=e||K;t!=null&&(this.pollsActive=t.activeSidebar===!0&&t.sidebar==="polls")}togglePollsTab(){const e=this.states||K;this.unreadPollsCount=0,this.pollsActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="polls"),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":"none",activeMoreMenu:!1,activeAI:!1}),K.activeSidebar=this.pollsActive,K.sidebar=this.pollsActive?"polls":"none",K.activeMoreMenu=!1}render(){if(!this.canViewPolls)return;const e=this.t("polls");return h(z,{title:e},this.unreadPollsCount!==0&&!this.pollsActive&&h("div",{class:"unread-count",part:"unread-count"},h("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:e,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};OI.style=GF;var WF=Object.freeze({__proto__:null,dyte_polls_toggle:OI});const qF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);-webkit-animation:blink 4s linear infinite;animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@-webkit-keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",MI=class{constructor(e){X(this,e),this.setIsRecording=t=>{this.isRecording=t==="RECORDING"},this.meeting=void 0,this.size=void 0,this.t=ee(),this.iconPack=Z,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;(e=this.meeting)===null||e===void 0||e.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(e){e!=null&&(this.setIsRecording(e.recording.recordingState),this.updateRecordingStatus=t=>{this.setIsRecording(t)},e.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return h(z,null,this.isRecording&&h("div",{class:"indicator","aria-label":this.t("This meeting is being recorded"),part:"indicator"},h("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),h("span",null,this.t("REC"))))}static get watchers(){return{meeting:["meetingChanged"]}}};MI.style=qF;var JF=Object.freeze({__proto__:null,dyte_recording_indicator:MI});const KF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",DI=class{constructor(e){X(this,e),this.dyteAPIError=le(this,"dyteAPIError",7),this.toggleRecording=async()=>{var t,i;if(!(this.isLoading()||this.disabled))switch(this.recordingState){case"IDLE":try{await((t=this.meeting)===null||t===void 0?void 0:t.recording.start());return}catch{this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("Error while starting recording.")})}return;case"RECORDING":try{await((i=this.meeting)===null||i===void 0?void 0:i.recording.stop());return}catch{this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("Error while stopping recording.")})}return;case"STARTING":case"STOPPING":default:return}},this.isLoading=()=>this.meeting==null||this.recordingState==="STARTING"||this.recordingState==="STOPPING",this.variant="button",this.meeting=void 0,this.t=ee(),this.iconPack=Z,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.recordingStateUpdateListener&&((e=this.meeting)===null||e===void 0||e.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener))}meetingChanged(e){e!=null&&(this.recordingState=e.recording.recordingState,this.canRecord=e.self.permissions.canRecord===!0,this.recordingStateUpdateListener=t=>{this.recordingState=t},e.recording.addListener("recordingUpdate",this.recordingStateUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return this.t("Record");case"RECORDING":return this.t("Stop Recording");case"STARTING":return this.t("Starting");case"STOPPING":return this.t("Stopping");default:return this.t("Loading")}}getIcon(){switch(this.recordingState){case"IDLE":return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording;case"STARTING":case"STOPPING":default:return this.iconPack.recording}}render(){if(!!this.canRecord)return h(z,{title:this.t("Record")},h("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};DI.style=KF;var YF=Object.freeze({__proto__:null,dyte_recording_toggle:DI});const QF=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3,p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}h3{margin-bottom:var(--dyte-space-4, 16px);font-size:20px;line-height:1.5}p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}p.empty-message{text-align:center;font-size:16px}label>input{margin-right:var(--dyte-space-2, 8px)}input{background-color:transparent;accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}#allow-requests-label{display:flex;align-items:center;font-size:12px}#actions{margin-top:var(--dyte-space-4, 16px);display:flex;align-items:center}dyte-button{flex:1 1 0%;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px}#participants-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-56, 224px);overflow-y:auto}.participant{box-sizing:border-box;display:flex;height:var(--dyte-space-14, 56px);align-items:center;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.participant:last-child{border-bottom-width:var(--dyte-border-width-none, 0)}.participant{cursor:pointer;font-size:14px}.participant input{margin-right:var(--dyte-space-3, 12px)}dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,LI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.acceptedRequestId=void 0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}disconnectedCallback(){}meetingChanged(e){var t,i,r,n,s;e!=null&&!Boolean(this.acceptedRequestId)&&Boolean((r=(i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0?void 0:i.active)===null||r===void 0?void 0:r.id)&&(this.acceptedRequestId=(s=(n=this.meeting.remote)===null||n===void 0?void 0:n.active)===null||s===void 0?void 0:s.id)}render(){var e,t,i,r;return Boolean((t=(e=this===null||this===void 0?void 0:this.meeting)===null||e===void 0?void 0:e.remote)===null||t===void 0?void 0:t.incomingRequests.toArray().length)?h(z,null,h("h3",null,this.t("The following people have requested remote control to your screen share")),h("p",null,this.t("Please select whom you want to give access to")),h("div",{class:"scrollbar"},(r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.incomingRequests.toArray().map(n=>{const s=this.meeting.participants.joined.get(n.remotePeerId);return h("label",{onClick:()=>{this.acceptedRequestId=n.id},class:"participant",htmlFor:s.id},h("input",{type:"radio",checked:this.acceptedRequestId===n.id,name:"remote-access-participant",value:n.id}),h("dyte-avatar",{participant:s,size:"sm"}),s.name)})),h("div",{id:"actions"},h("dyte-button",{disabled:!Boolean(this.acceptedRequestId),iconPack:this.iconPack,t:this.t,onClick:()=>{var n,s;(s=(n=this.meeting)===null||n===void 0?void 0:n.remote)===null||s===void 0||s.acceptControl(this.acceptedRequestId),this.stateUpdate.emit({activeRemoteAccessManager:!1})}},this.t("Grant access")))):h(z,null,h("p",{class:"empty-message"},this.t("There are no remote requests, yet.")))}static get watchers(){return{meeting:["meetingChanged"]}}};LI.style=QF;var ZF=Object.freeze({__proto__:null,dyte_remote_access_manager:LI});const XF=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",qk=()=>typeof navigator<"u"&&typeof navigator.mediaDevices<"u"&&"getDisplayMedia"in navigator.mediaDevices,NI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.dyteAPIError=le(this,"dyteAPIError",7),this.selfScreenShareListener=({screenShareEnabled:t})=>{this.screenShareEnabled=t;const i=this.screenShareCount+(t?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.screenShareListener=({screenShareEnabled:t})=>{const i=this.screenShareCount+(t?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:t})=>{t&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.selfJoinStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canScreenShare=!1},this.selfJoinStateRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:t,message:i})=>{if(t==="screenshare"&&(this.shareScreenPermission=i,this.getState(),i==="COULD_NOT_START"&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("An error occured while starting screenshare.")}),this.hasPermissionError())){const r={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:r}),K.activePermissionsMessage=r}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var t;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const r={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:r}),K.activePermissionsMessage=r,!1}const i=(t=this.meeting)===null||t===void 0?void 0:t.self;if(this.screenShareEnabled){i.disableScreenShare();return}i==null||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await i.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),K.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("share_screen_start"),label:this.t("share_screen_start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1}}connectedCallback(){if(!qk()){ih.error("[dyte-screenshare-toggle] Device does not support screensharing.");return}this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a,o,c,d,l;(e=this.meeting)===null||e===void 0||e.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),(t=this.meeting)===null||t===void 0||t.participants.joined.removeListener("participantLeft",this.participantLeftListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("screenShareUpdate",this.selfScreenShareListener),(r=this.meeting)===null||r===void 0||r.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(n=this.meeting)===null||n===void 0||n.self.removeListener("joinStageRequestAccepted",this.selfJoinStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("stageJoined",this.selfJoinStateListener),(o=this.meeting)===null||o===void 0||o.self.removeListener("stageLeft",this.selfStageLeftListener),(c=this.meeting)===null||c===void 0||c.self.removeListener("removedFromStage",this.selfJoinStateListener),(l=(d=this.meeting)===null||d===void 0?void 0:d.stage)===null||l===void 0||l.removeListener("stageStatusUpdate",this.selfJoinStateListener)}meetingChanged(e){if(e!=null){const{self:t,stage:i}=e;this.updateCanProduce(e),this.maxScreenShareCount=t.config.maxScreenShareCount,this.screenShareEnabled=t.screenShareEnabled;let r=0;for(const n of e.participants.joined.toArray())n.screenShareEnabled&&r++;this.screenShareCount=r,this.getState(),e.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),e.participants.joined.addListener("screenShareUpdate",this.screenShareListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),t.addListener("screenShareUpdate",this.selfScreenShareListener),t.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.addListener("joinStageRequestAccepted",this.selfJoinStateListener),t.addListener("joinStageRequestRejected",this.selfJoinStateRejectedListener),t.addListener("stageJoined",this.selfJoinStateListener),t.addListener("stageLeft",this.selfStageLeftListener),t.addListener("removedFromStage",this.selfJoinStateListener),i==null||i.addListener("stageStatusUpdate",this.selfJoinStateListener)}}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceScreenshare==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canScreenShare=!1,n&&!a?this.canScreenShare=!0:(s||a)&&(n&&r.status!=="OFF_STAGE"&&r.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canScreenShare=!0),t.permissions.canProduceScreenshare==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canScreenShare=!0))}hasPermissionError(){return this.shareScreenPermission==="SYSTEM_DENIED"||this.shareScreenPermission==="DENIED"}getState(){let e="",t="",i="",r={};const n=this.hasPermissionError()&&!this.screenShareEnabled,s=this.reachedMaxScreenShares()&&!this.screenShareEnabled,a=this.shareScreenPermission==="COULD_NOT_START";this.screenShareEnabled&&!n?(t=this.t("share_screen_stop"),i=this.iconPack.share_screen_stop,r["red-icon"]=!0):(t=this.t("share_screen_start"),i=this.iconPack.share_screen_start),this.shareScreenPermission==="SYSTEM_DENIED"?(e=this.t("perm_sys_denied"),r["red-icon"]=!0):e=t,s&&(e=this.t("Maximum screen share limit reached")),a&&(e=this.t("An error occurred while screen sharing, please try again.")),this.screenShareState={tooltipLabel:e,label:t,icon:i,classList:r,disable:n||s,showWarning:n||s||a}}render(){return!qk()||!this.canScreenShare?null:h(z,{title:this.screenShareState.label},h("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning})))}static get watchers(){return{meeting:["meetingChanged"]}}};NI.style=XF;var eB=Object.freeze({__proto__:null,dyte_screen_share_toggle:NI});const tB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px);opacity:0.8}#video-container{position:absolute;display:block;height:100%;width:100%}#video-container .fit-in-container{-o-object-fit:fill;object-fit:fill}video{height:100%;width:100%;-o-object-fit:contain;object-fit:contain}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}video.visible{-webkit-animation:video-fadein 0.4s ease;animation:video-fadein 0.4s ease}#controls{display:none;position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}:host(:hover) #controls,:host(:active) #controls,:host(:focus-visible) #controls{display:flex}#full-screen-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:20px;font-weight:500}:host([size='sm']) h3{font-size:16px}#self-message{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.isSelf) #self-view{flex:1 1 0%}:host(.isSelf) #video-container{position:static;aspect-ratio:auto;height:auto;width:50%;max-width:var(--dyte-space-96, 384px);border-radius:var(--dyte-border-radius-md, 8px);transition:0.6s ease}:host(.isSelf) #video-container.expand{width:60%;max-width:100%}.actions{display:flex;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px)}:host([size='sm'].isSelf) #video-container,:host([size='md'].isSelf) #video-container,:host([size='sm'].isSelf) #expand-btn,:host([size='md'].isSelf) #expand-btn{display:none}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.remote-control{z-index:10;height:100%;max-height:100%;flex:0 1 auto}#remote-control-self{position:absolute;top:var(--dyte-space-0, 0px);left:50%;z-index:10;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;box-sizing:border-box;display:flex;height:var(--dyte-space-8, 32px);align-items:center;overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transform:translateX(-50%)}#remote-control-self p{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}#remote-control-self dyte-button{height:100%;border-radius:var(--dyte-border-radius-none, 0);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));font-size:12px}:host([size='sm']) #remote-control-self{height:auto;flex-direction:column}:host([size='sm']) #remote-control-self dyte-button{width:100%;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}@-webkit-keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}@keyframes video-fadein{0%{opacity:0;transform:scale(1.4) translateY(20px)}100%{opacity:1;transform:scale(1) translateY(0)}}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}",UI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.fullScreenListener=()=>{this.isFullScreen=YA()},this.onRemoteUpdate=({payload:t,type:i})=>{var r,n;let s="";i===Qr.INCOMING_REQUEST_ACCEPTED&&(s=`${this.meeting.participants.joined.get(t.request.remotePeerId).name} is controlling your screen.`),i===Qr.OUTGOING_REQUEST_ACCEPTED&&(s=`You are controlling ${this.meeting.participants.joined.get(t.request.hostPeerId).name}'s screen.`),(i===Qr.INCOMING_REQUEST_ENDED||i===Qr.OUTGOING_REQUEST_ENDED)&&(s=""),i===Qr.REQUEST_RECEIVED&&!Boolean((n=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||n===void 0?void 0:n.active)&&this.stateUpdate.emit({activeRemoteAccessManager:!0}),this.remoteControlInfo=s},this.onMouseEvent=t=>{var i,r;this.shouldSkipEventTrigger()||(t.stopPropagation(),t.preventDefault(),(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.mouseEvent(t,this.videoEl))},this.onKeyDown=t=>{var i,r;this.shouldSkipEventTrigger()||(r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0||r.keyboardEvent(t)},this.toggleFullScreen=()=>{this.isFullScreen?(KA(),this.isFullScreen=!1):(JA(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=Z,this.t=ee(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}connectedCallback(){window==null||window.addEventListener("fullscreenchange",this.fullScreenListener),window==null||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){var e,t,i;this.screenShareListener&&((e=this.participant)===null||e===void 0||e.removeListener("screenShareUpdate",this.screenShareListener)),(i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0||i.removeListener("remoteUpdate",this.onRemoteUpdate),window==null||window.removeEventListener("fullscreenchange",this.fullScreenListener),window==null||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(e){var t,i,r,n,s;e!=null&&(this.screenShareListener=({screenShareEnabled:a,screenShareTracks:o})=>{const c=a&&o.video!=null;if(es(()=>{this.screenShareEnabled=c}),c){const d=new MediaStream;d.addTrack(o.video),this.videoEl!=null&&(this.videoEl.srcObject=d,this.videoEl.play())}else this.videoEl!=null&&(this.videoEl.srcObject=void 0)},this.screenShareListener(e),Boolean((i=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||i===void 0?void 0:i.active)&&[this.meeting.remote.active.hostPeerId,this.meeting.remote.active.remotePeerId].includes(e==null?void 0:e.id)&&this.onRemoteUpdate({payload:{request:this.meeting.remote.active},type:((r=this.meeting.remote.active)===null||r===void 0?void 0:r.hostPeerId)===this.meeting.self.id?"INCOMING_REQUEST_ACCEPTED":"OUTGOING_REQUEST_ACCEPTED"}),e.addListener("screenShareUpdate",this.screenShareListener),(s=(n=this.meeting)===null||n===void 0?void 0:n.remote)===null||s===void 0||s.addListener("remoteUpdate",this.onRemoteUpdate))}shouldSkipEventTrigger(){var e,t,i;return this.meeting==null||this.participant==null?!0:!Boolean((e=this.meeting.remote)===null||e===void 0?void 0:e.active)||!Boolean(this.meeting.participants.joined.get((t=this.meeting.remote)===null||t===void 0?void 0:t.active.hostPeerId))||((i=this.meeting.remote)===null||i===void 0?void 0:i.active.hostPeerId)!=this.participant.id}render(){var e,t,i,r,n,s,a,o;const c=((e=this.participant)===null||e===void 0?void 0:e.id)===((t=this.meeting)===null||t===void 0?void 0:t.self.id),d=this.isFullScreen?this.t("Exit Fullscreen"):this.t("Fullscreen Screen Share"),l=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return h(z,{class:{isSelf:c}},Boolean(((r=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||r===void 0?void 0:r.active)&&this.remoteControlInfo)&&h("div",{id:"remote-control-self",key:"remote-control-self"},h("p",{class:"remote-control-message"},this.remoteControlInfo),h("dyte-button",{onClick:()=>{var u;return(u=this.meeting.remote)===null||u===void 0?void 0:u.endControl()},iconPack:this.iconPack,t:this.t},((s=(n=this.meeting.remote)===null||n===void 0?void 0:n.active)===null||s===void 0?void 0:s.hostPeerId)===this.meeting.self.id?"Revoke access":"Stop")),h("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded},contentEditable:Boolean((a=this.meeting.remote)===null||a===void 0?void 0:a.active),onKeyDown:this.onKeyDown},h("video",{ref:u=>this.videoEl=u,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`,onMouseMove:this.onMouseEvent,onClick:this.onMouseEvent,onContextMenu:this.onMouseEvent})),h("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!c&&QA()&&h("dyte-tooltip",{label:d,iconPack:this.iconPack,t:this.t},h("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:d,iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:l,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t}))),((o=this.participant)===null||o===void 0?void 0:o.supportsRemoteControl)===!0&&h("dyte-menu",{id:"menu",key:"menu",iconPack:this.iconPack,t:this.t},h("dyte-button",{variant:"secondary",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.more_vertical,iconPack:this.iconPack,t:this.t})),h("dyte-menu-list",{iconPack:this.iconPack,t:this.t},!c&&h("dyte-menu-item",{style:{cursor:this.participant.supportsRemoteControl?"pointer":"not-allowed"},iconPack:this.iconPack,t:this.t,onClick:()=>{var u,f;!((u=this.participant)===null||u===void 0)&&u.supportsRemoteControl&&((f=this.meeting.remote)===null||f===void 0||f.requestControl(this.participant.id))}},"Request remote control"),c&&h("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>this.stateUpdate.emit({activeRemoteAccessManager:!0})},"Manage remote control requests")))),c&&h("div",{id:"self-message",key:"self-message"},h("h3",null,this.t("Your screen is being shared")),h("div",{class:"actions"},this.meeting!=null&&h("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("share_screen_stop")),h("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},h("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("Minimize Preview"):this.t("Expand Preview")))),h("slot",null))}get host(){return ma(this)}static get watchers(){return{participant:["participantChanged"]}}};UI.style=tB;var iB=Object.freeze({__proto__:null,dyte_screenshare_view:UI});const rB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}",jI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.keyPressListener=t=>{t.key==="Escape"&&this.close()},this.selfJoinStageListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceVideo=!1},this.selfJoinStageRejectedListener=()=>{this.updateCanProduce(this.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&((e=this.meeting)===null||e===void 0||e.meta.removeListener("poorConnection",this.poorConnectionListener)),this.selfJoinStageListener&&((t=this.meeting)===null||t===void 0||t.self.removeListener("joinStageRequestAccepted",this.selfJoinStageListener)),this.selfJoinStageRejectedListener&&((i=this.meeting)===null||i===void 0||i.self.removeListener("joinStageRequestRejected",this.selfJoinStageRejectedListener)),this.selfJoinStageListener&&((r=this.meeting)===null||r===void 0||r.self.removeListener("stageJoined",this.selfJoinStageListener)),this.selfStageLeftListener&&((n=this.meeting)===null||n===void 0||n.self.removeListener("stageLeft",this.selfStageLeftListener)),this.selfJoinStageListener&&((s=this.meeting)===null||s===void 0||s.self.removeListener("removedFromStage",this.selfJoinStageListener))}meetingChanged(e){e!=null&&(this.updateCanProduce(e),this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:t})=>{t<7?this.networkStatus="poor":t<4&&(this.networkStatus="poorest"),setTimeout(()=>{this.networkStatus="good"},5e3)},e.meta.addListener("poorConnection",this.poorConnectionListener),e.self.addListener("joinStageRequestAccepted",this.selfJoinStageListener),e.self.addListener("joinStageRequestRejected",this.selfJoinStageRejectedListener),e.self.addListener("stageJoined",this.selfJoinStageListener),e.self.addListener("stageLeft",this.selfStageLeftListener),e.self.addListener("removedFromStage",this.selfJoinStageListener))}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceVideo==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";if(!s&&!a)this.canProduceVideo=n;else{const o=t.permissions.canProduceVideo==="CAN_REQUEST";(n||o&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE")))&&(this.canProduceVideo=!0)}}changeTab(e){this.activeTab=e,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),K.activeSettings=!1}render(){if(this.meeting==null)return null;const e={meeting:this.meeting,states:this.states||K,iconPack:this.iconPack,t:this.t};return h(z,null,h("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},h("header",null,h("h2",null,this.t("settings"))),h("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),h("div",{class:"right"},h("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&h("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&h("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),h("div",{class:"right"},h("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&h("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),h("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),h("div",{class:"right"},h("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),h("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&h("header",null,h("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),h("h2",null,this.t(this.activeTab==="audio"?"audio":"video"))),this.activeTab==="audio"&&h("dyte-settings-audio",Object.assign({},e)),this.activeTab==="video"&&h("dyte-settings-video",Object.assign({},e))))}static get watchers(){return{meeting:["meetingChanged"]}}};jI.style=rB;var nB=Object.freeze({__proto__:null,dyte_settings:jI});const sB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",$I=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}toggleSettings(){var e;this.stateUpdate.emit({activeSettings:!(!((e=this.states)===null||e===void 0)&&e.activeSettings),activeMoreMenu:!1}),K.activeSettings=!K.activeSettings,K.activeMoreMenu=!1}render(){const e=this.t("settings");return h(z,{title:e},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:e,variant:this.variant}))}};$I.style=sB;var aB=Object.freeze({__proto__:null,dyte_settings_toggle:$I});const oB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}dyte-camera-toggle{margin-left:var(--dyte-space-1\\.5, 6px)}dyte-participant-tile{height:auto;width:100%;max-width:var(--dyte-space-96, 384px)}",FI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.join=async()=>{var t,i;this.displayName.trim()!==""&&!this.isJoining&&(this.isJoining=!0,(t=this.meeting)===null||t===void 0||t.self.setName(this.displayName),go.setItem("dyte-display-name",this.displayName),await((i=this.meeting)===null||i===void 0?void 0:i.joinRoom()))},this.meeting=void 0,this.size=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){var t,i;e!=null&&(this.canEditName=(t=e.self.permissions.canEditDisplayName)!==null&&t!==void 0?t:!0,this.displayName=((i=e.self.name)===null||i===void 0?void 0:i.trim())||"")}render(){var e,t,i;const r=((e=this.displayName)===null||e===void 0?void 0:e.trim())==="",n={meeting:this.meeting,config:this.config,states:K,size:this.size,iconPack:this.iconPack,t:this.t};return h(z,null,h("div",{class:"container"},h(rt,{element:"dyte-participant-tile",defaults:n,props:{participant:(t=this.meeting)===null||t===void 0?void 0:t.self,size:"md"},childProps:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},deepProps:!0}),h("div",{class:"metadata"},this.displayName.trim()===""?h("div",{class:"name"},this.t("setup_screen.join_in_as")):h("div",{class:"label"},h("p",null,this.t("setup_screen.joining_as")),h("div",{class:"name"},Or(this.displayName,20))),this.canEditName&&h("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,autoFocus:!0,onInput:s=>{this.displayName=s.target.value},onKeyDown:s=>{s.key==="Enter"&&this.join()}}),h("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:r,iconPack:this.iconPack,t:this.t},this.isJoining?h("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")))))}static get watchers(){return{meeting:["meetingChanged"]}}};FI.style=oB;var cB=Object.freeze({__proto__:null,dyte_setup_screen:FI});const dB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}dyte-chat,dyte-participants,dyte-plugins{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",BI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),K.sidebar=this.tab},this.enabledSections=["none"],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.size=void 0,this.view="default",this.tab=this.defaultSection}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),$l("sidebar",()=>this.statesChanged())}disconnectedCallback(){var e,t;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.updateEnabledSections)}meetingChanged(e){var t,i;this.updateEnabledSections(e),(i=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||i===void 0||i.on("stageStatusUpdate",this.updateEnabledSections)}statesChanged(e){const t=e||K;(t==null?void 0:t.sidebar)!=null&&(this.tab=t.sidebar)}viewChanged(e){e==="full-screen"&&(this.keydownListener=t=>{t.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}filterSections(e){if(!this.meeting.self.config)return e;const t=this.meeting.self.config;return e.filter(i=>t.controlBar.elements[i])}viewSection(e){this.tab=e,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.tab}),K.activeSidebar=!0,K.sidebar=this.tab}updateEnabledSections(e=this.meeting){const t=["none"];Mb(e)&&t.push("chat"),Lb(e)&&t.push("participants"),Nb(e)&&t.push("plugins"),Db(e)&&t.push("polls"),this.enabledSections=t}render(){var e;const t={meeting:this.meeting,config:this.config,states:this.states||K,size:this.size,t:this.t,iconPack:this.iconPack};return((e=this.states)===null||e===void 0?void 0:e.activeSidebar)===!1||this.tab==="none"?null:h(z,null,this.view==="full-screen"&&[h("h3",{class:"title"},this.t("About Call")),h("div",{id:"mobile-header"},this.filterSections(this.enabledSections).map(i=>h("dyte-button",{key:i,variant:"ghost",class:{active:this.tab===i},onClick:()=>this.viewSection(i),iconPack:this.iconPack,t:this.t},this.t(i))))],h("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("Close"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.view!=="full-screen"&&h("h3",{class:"title"},this.t(this.tab)),this.tab==="chat"&&h(rt,{element:"dyte-chat",defaults:t}),this.tab==="polls"&&h(rt,{element:"dyte-polls",defaults:t}),this.tab==="participants"&&h(rt,{element:"dyte-participants",defaults:t}),this.tab==="plugins"&&h(rt,{element:"dyte-plugins",defaults:t}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};BI.style=dB;var lB=Object.freeze({__proto__:null,dyte_sidebar:BI});const uB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}",VI=class{constructor(e){X(this,e),this.setHostDimensions=()=>{const{clientWidth:t,clientHeight:i}=this.host;this.dimensions={width:t,height:i}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new _A(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}render(){const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:t,height:i,getPosition:r}=S$({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return h(z,null,this.participants.map((n,s)=>{const{top:a,left:o}=r(s);return h(rt,{element:"dyte-participant-tile",defaults:e,props:{participant:n,style:{position:"absolute",top:`${a}px`,left:`${o}px`,width:`${t}px`,height:`${i}px`},key:n.id,"data-participant":n.id},childProps:{participant:n},deepProps:!0})}),h("slot",null))}get host(){return ma(this)}};VI.style=uB;var pB=Object.freeze({__proto__:null,dyte_simple_grid:VI});const hB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}",zI=class{constructor(e){X(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ct,this.iconPack=Z,this.t=ee(),this.gridSize=nS}render(){const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},t=this.participants.filter(i=>this.pinnedParticipants.some(r=>r.id!=i.id));return h(z,null,h("main",{part:"main"},h(rt,{element:"dyte-simple-grid",defaults:e,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.size}})),t.length>0&&h("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},h(rt,{element:"dyte-simple-grid",defaults:e,props:{part:"aside-grid",participants:t,aspectRatio:this.aspectRatio,gap:this.gap,size:this.size}})))}get host(){return ma(this)}};zI.style=hB;var gB=Object.freeze({__proto__:null,dyte_spotlight_grid:zI});const fB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}",HI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("slot",null))}};HI.style=fB;var mB=Object.freeze({__proto__:null,dyte_stage:HI});const vB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",GI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var t,i,r,n,s,a,o;const c=(t=this.meeting.stage)===null||t===void 0?void 0:t.status;c==="ON_STAGE"&&await((r=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.stage)===null||r===void 0?void 0:r.leave()),c==="OFF_STAGE"&&((s=(n=this===null||this===void 0?void 0:this.meeting)===null||n===void 0?void 0:n.stage)===null||s===void 0||s.requestAccess(),yj(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),c==="REQUESTED_TO_JOIN_STAGE"&&((o=(a=this===null||this===void 0?void 0:this.meeting)===null||a===void 0?void 0:a.stage)===null||o===void 0||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=ee()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(e,t){this.stageStatus=t,t==="ACCEPTED_TO_JOIN_STAGE"&&(e.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var e,t;(t=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",i=>this.stageStatusHandler(this.meeting,i))}meetingChanged(e){var t,i,r,n;e!=null&&(this.stageStatus=(t=e.stage)===null||t===void 0?void 0:t.status,this.stageStatusHandler(e,(i=e.stage)===null||i===void 0?void 0:i.status),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.on("stageStatusUpdate",s=>this.stageStatusHandler(e,s)))}getState(){let e="",t="",i=!1;switch(this.stageStatus){case"ON_STAGE":{t=this.iconPack.leave_stage,e="Leave Livestream",i=!1;break}case"ACCEPTED_TO_JOIN_STAGE":{t=this.iconPack.join_stage,e="Join Livestream",i=!0;break}case"REQUESTED_TO_JOIN_STAGE":{t=this.iconPack.join_stage,e="Requested",i=!1;break}default:{t=this.iconPack.join_stage,e="Join Livestream",i=!1;break}}return{label:e,disabled:i,icon:t}}render(){if(!!bj(this.meeting))return h(z,{title:this.state.label},h("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};GI.style=vB;var yB=Object.freeze({__proto__:null,dyte_stage_toggle:GI});const bB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}",WI=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=Z,this.t=ee()}connectedCallback(){this.stateUpdate.emit({abc:!1}),K.abc=!1}get value(){return this.input.value}render(){return h(z,null,h("input",{ref:e=>this.input=e,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};WI.style=bB;var _B=Object.freeze({__proto__:null,dyte_text_field:WI});const wB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",qI=class{constructor(e){X(this,e),this.disconnectMeeting=t=>{var i;t!=null&&this.countListener!=null&&((i=t.livestream)===null||i===void 0||i.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.iconPack=Z,this.t=ee(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;this.disconnectMeeting(t),e!=null&&(this.countListener=()=>{var r;this.viewerCount=(r=e.livestream)===null||r===void 0?void 0:r.viewerCount},this.countListener(),(i=e.livestream)===null||i===void 0||i.addListener("viewerCountUpdate",this.countListener))}render(){return ya(this.meeting)?h(z,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},h("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};qI.style=wB;var SB=Object.freeze({__proto__:null,dyte_viewer_count:qI});const EB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}",JI=class{constructor(e){X(this,e),this.meeting=void 0,this.config=ct,this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("slot",null,h("div",{class:"centered",part:"content"},h("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),h("p",null,this.t("waitlist.body_text")))))}};JI.style=EB;var TB=Object.freeze({__proto__:null,dyte_waiting_screen:JI});const kB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",KI=class{constructor(e){X(this,e),this.requestToJoinAcceptedListener=()=>{this.stageStatus="ACCEPTED"},this.requestToJoinRejectedListener=()=>{this.stageStatus="DENIED"},this.stageJoinedListener=()=>{this.stageStatus="ACCEPTED"},this.removeFromStageListener=()=>{this.stageStatus="NOT_REQUESTED"},this.selfStageLeftListener=()=>{this.stageStatus="NOT_REQUESTED"},this.requestStageListener=()=>{this.stageStatus="PENDING"},this.stageCallback=async()=>{var t;const i=(t=this.meeting)===null||t===void 0?void 0:t.self;if(!(i==null||!this.requestProduce&&!this.canPresent)){if(this.stageStatus==="PENDING"){await i.withdrawRequestToJoinStage();return}if(this.stageStatus==="ACCEPTED"){await i.leaveStage(),this.stageStatus="NOT_REQUESTED";return}this.canPresent?(await i.joinStage(),this.stageStatus="ACCEPTED"):(await i.requestToJoinStage(),this.stageStatus="PENDING")}},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.stageStatus="NOT_REQUESTED",this.canPresent=!1,this.requestProduce=!1}connectedCallback(){this.meetingChanged(this.meeting),this.meeting.self.addListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.addListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.addListener("stageJoined",this.stageJoinedListener),this.meeting.self.addListener("removedFromStage",this.removeFromStageListener),this.meeting.self.addListener("stageLeft",this.selfStageLeftListener),this.meeting.self.addListener("peerRequestToJoinStage",this.requestStageListener)}disconnectedCallback(){this.meeting.self.removeListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.removeListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.removeListener("removedFromStage",this.removeFromStageListener),this.meeting.self.removeListener("stageJoined",this.stageJoinedListener),this.meeting.self.removeListener("stageLeft",this.selfStageLeftListener),this.meeting.self.removeListener("peerRequestToJoinStage",this.requestStageListener)}meetingChanged(e){e!=null&&(this.requestProduce=e.self.permissions.requestProduce,this.canPresent=e.self.permissions.canPresent,(this.canPresent||e.self.webinarStageStatus==="ON_STAGE")&&(this.stageStatus="ACCEPTED"))}getState(){let e="",t="",i="",r={},n=!1;return this.stageStatus==="PENDING"?(t=this.t("stage_request.cancel_request"),e=this.t("stage_request.pending_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1):this.stageStatus==="ACCEPTED"?(t=this.t("stage_request.leave_stage"),e=this.t("stage_request.leave_tip"),i=this.iconPack.leave_stage,r["red-icon"]=!1,n=!1):this.stageStatus==="DENIED"?(t=this.t("stage_request.denied"),e=this.t("stage_request.denied_tip"),i=this.iconPack.join_stage,r["red-icon"]=!1,n=!0):(t=this.t("stage_request.request"),this.canPresent?e=this.t("stage_request.request"):e=this.t("stage_request.request_tip"),i=this.iconPack.join_stage,n=!1),{tooltipLabel:e,label:t,icon:i,classList:r,disabled:n}}render(){if(!this.requestProduce&&!this.canPresent||this.meeting.self.config.viewType!=="WEBINAR")return null;const{tooltipLabel:e,label:t,icon:i,classList:r,disabled:n}=this.getState();return h(z,{title:t},h("dyte-tooltip",{placement:"top",kind:"block",label:e,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},h("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:t,icon:i,class:r,onClick:this.stageCallback,disabled:n,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};KI.style=kB;var PB=Object.freeze({__proto__:null,dyte_webinar_stage_toggle:KI});const CB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{visibility:hidden;position:fixed;left:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px)}.caption-container{visibility:visible;position:absolute;bottom:var(--dyte-space-20, 80px);left:50%;--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:var(--dyte-border-radius-md, 8px);background-color:rgb(0 0 0 / var(--tw-bg-opacity));--tw-bg-opacity:0.5;padding:var(--dyte-space-2, 8px)}",YI=class{constructor(e){X(this,e)}render(){return h(z,null,h("div",{class:"caption-container"},"asd"))}};YI.style=CB;var RB=Object.freeze({__proto__:null,dyte_ai_caption:YI});const xB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@-webkit-keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{-webkit-animation:bg-glow 0.8s;animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}",Jk=3,QI=class{constructor(e){X(this,e),this.onParticipantsAdd=le(this,"participantsAdd",7),this.onParticipantDelete=le(this,"participantDelete",7),this.onRoomJoin=le(this,"roomJoin",7),this.deleteRoom=le(this,"delete",7),this.updateRoom=le(this,"update",7),this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<Jk)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,es(()=>{this.inputTextEl.focus(),this.inputTextEl.select()})},this.onDrop=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=t=>{t.currentTarget instanceof HTMLParagraphElement&&(t.currentTarget.classList.add("drop-zone-active"),t.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=Z,this.t=ee(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var e;this.allParticipants=IA(this.meeting),this.permissions=this.meeting.self.permissions.connectedMeetings,this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):(e=this.room)===null||e===void 0?void 0:e.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive}onDragLeave(e){e.currentTarget instanceof HTMLParagraphElement&&e.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){if(this.assigningParticipants&&this.isDragMode)return this.t("breakout_rooms.drag_drop_participants");if(this.assigningParticipants)return this.t("breakout_rooms.click_drop_participants");if(this.room.participants.length===0)return this.t("breakout_rooms.none_assigned")}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout(()=>{this.glowingCard=!1},2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(e){e.key==="Enter"&&(this.newTitle=e.target.value,this.onEditClick())}renderPeer(e){const{displayPictureUrl:t}=this.allParticipants.find(r=>pi(r)===pi(e)),i=yn(e.displayName||"");return h("div",{class:"peer-ui-container"},h("dyte-avatar",{participant:{name:i,picture:t},size:"sm"}),h("p",{class:"name",title:i},Or(i,16),this.meeting.self.userId===e.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&!!this.getAssignmentHint()&&!!this.permissions.canAlterConnectedMeetings)return h("div",{class:"message-container"},h("p",{class:{"compact-height":this.room.participants.length!==0},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&this.room.participants.length!==0)return h("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map(e=>h("div",{class:"participant-item",role:"listitem",key:e.id},this.renderPeer(e),this.permissions.canAlterConnectedMeetings&&h("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(e)}}))))}render(){var e,t,i;return h(z,null,h("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},h("div",{class:"header"},h("input",{ref:r=>this.inputTextEl=r,placeholder:this.t("breakout_rooms.room_name"),disabled:this.editingTitleRoomId!==this.room.id,value:this.roomTitle,minlength:Jk,onChange:r=>{this.newTitle=r.target.value},onKeyPress:r=>this.onTitleChanged(r),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&h("span",{class:"participant-count"},"(",h("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),(i=(t=(e=this.room)===null||e===void 0?void 0:e.participants)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:"0",")"),this.canEditMeetingTitle&&h("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),h("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&h("dyte-tooltip",{label:this.t("Delete Room"),class:"danger",iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&h("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),this.mode==="edit"&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&h("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.roomName,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.roomName?this.t("joined"):this.t("join")),!this.room.isParent&&h("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};QI.style=xB;const AB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';-webkit-clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%);clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}`,ZI=class{constructor(e){X(this,e),this.onSelectedParticipantsUpdate=le(this,"selectedParticipantsUpdate",7),this.onAllToggled=le(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=le(this,"participantsDragging",7),this.onSearchInput=t=>{this.search=t.target.value},this.onDragStart=t=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(t,!0)},this.onDragEnd=t=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(t,!1)},this.onClick=t=>{const i=this.selectedParticipantIds.includes(pi(t));this.updateSelectedParticipants(t,!i)},this.onToggleAll=t=>{const i=t?this.participantsToShow.map(pi):[];this.onAllToggled.emit(i)},this.meeting=void 0,this.participantIds=[],this.iconPack=Z,this.t=ee(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting!=null}updateSelectedParticipants(e,t){const i=pi(e);let r=[];t&&!this.selectedParticipantIds.includes(i)?r=[...this.selectedParticipantIds,i]:r=[...this.selectedParticipantIds.filter(n=>n!==i)],this.onSelectedParticipantsUpdate.emit(r)}meetingChanged(e){e!=null&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(e){this.getParticipants(e)}getParticipants(e){const t=IA(this.meeting);this.participantsToShow=t.filter(i=>{var r;return this.participantIds.includes(pi(i))&&((r=i.displayName)!==null&&r!==void 0?r:"").toLowerCase().includes(e.toLowerCase())})}renderPeer(e){const t=yn(e.displayName||"");return h("div",{class:"peer-ui-container"},h("dyte-avatar",{participant:{name:e.displayName,picture:e.displayPictureUrl},size:"sm"}),h("p",{class:"name",title:t},Or(t,16),this.meeting.self.userId===e.id&&` (${this.t("you")})`))}render(){return h(z,null,h("div",{class:"search-wrapper"},h("div",{class:"search",part:"search"},h("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),h("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),h("slot",{name:"shuffle-button"})),h("div",{class:"header"},h("div",{class:"title-wrapper"},h("span",null,this.t("breakout_rooms.main_room")),h("span",{class:"participant-count"},"(",h("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),this.selectedParticipantIds.length!==0&&h("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},h("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:e=>this.onToggleAll(!!e.target.checked)}))),h("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&h("ul",{class:"participants",part:"participants"},this.participantsToShow.map(e=>h("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(e),onDragStart:()=>this.onDragStart(e),onDragEnd:()=>this.onDragEnd(e),draggable:this.selectedParticipantIds.length===0,role:"listitem",key:e.id},this.renderPeer(e),!this.isDragging&&h("input",{type:"checkbox",class:{"hide-checkbox":this.selectedParticipantIds.length===0},checked:this.selectedParticipantIds.includes(pi(e))})))),this.participantsToShow.length===0&&this.search.length>0&&h("div",{class:"empty-message"},this.t("participants.empty_search_results")),this.participantsToShow.length===0&&this.search.length===0&&h("div",{class:"empty-room"},h("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),h("p",null,this.t("breakout_rooms.all_assigned")),h("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};ZI.style=AB;const IB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}",XI=class{constructor(e){X(this,e),this.onChange=le(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=Z,this.t=ee()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(e){this.onChange.emit(e)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return h(z,null,h("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),h("input",{type:"number",value:this.input,min:this.minValue,onInput:e=>{const t=parseInt(e.target.value,10);isNaN(t)||t<this.minValue?this.input=this.minValue.toString():this.input=t.toString()}}),h("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};XI.style=IB;var OB=Object.freeze({__proto__:null,dyte_breakout_room_manager:QI,dyte_breakout_room_participants:ZI,dyte_counter:XI});const MB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column}.chat-input{z-index:10;box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{box-sizing:border-box;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea{font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:80px;font-size:14px}.chat-buttons{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));-webkit-animation:0.3s slide-up ease;animation:0.3s slide-up ease}@-webkit-keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}",eO=class{constructor(e){X(this,e),this.onNewMessage=le(this,"dyteNewMessage",7),this.handleKeyDown=t=>{t.key==="Enter"&&t.shiftKey?this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px"):t.key==="Enter"?(t.preventDefault(),this.handleSendMessage()):t.key==="Backspace"&&(this.$textArea.value.endsWith(`
`)?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":this.$textArea.value===""&&(this.$textArea.style.height="auto"))},this.onPaste=t=>{const i=t.clipboardData||t.originalEvent.clipboardData;FA(i.items,this.sendFile)},this.sendFile=(t,i)=>{!this.canSendFiles||(t==="image"?this.onNewMessage.emit({type:"image",file:i}):this.onNewMessage.emit({type:"file",file:i}))},this.initializeTextField=t=>{this.$textArea=t;const i=go.getItem("dyte-text-message")||"";this.$textArea.value=i},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=Z,this.t=ee(),this.disableEmojiPicker=!1,this.emojiPickerActive=!1}handleSendMessage(){if(!this.canSendTextMessage)return;const e=this.$textArea.value.trim();e.length>0&&(this.onNewMessage.emit({type:"text",message:e}),this.$textArea.value="",this.$textArea.style.height="auto",go.setItem("dyte-text-message",""))}uploadFile(e){const t=document.createElement("input");t.type="file",e==="image"&&(t.accept="image/*"),t.onchange=i=>{const{validity:r,files:[n]}=i.target;r.valid&&this.sendFile(e,n)},t.click()}render(){const e={iconPack:this.iconPack,t:this.t,size:this.size};return h(z,null,this.canSendTextMessage&&this.emojiPickerActive&&h("dyte-emoji-picker",{part:"emoji-picker",onDyteEmojiClicked:t=>{this.$textArea.value+=t.detail,this.$textArea.focus()},t:this.t}),h("slot",{name:"chat-addon"}),h("div",{class:"chat-input",part:"chat-input"},this.canSendTextMessage&&h("textarea",{class:"scrollbar",part:"textarea",placeholder:"Message..",ref:this.initializeTextField,autoFocus:!0,onPaste:this.onPaste,onKeyDown:this.handleKeyDown,onInput:t=>{go.setItem("dyte-text-message",t.target.value)}}),h("div",{class:"chat-buttons",part:"chat-buttons"},h("div",{class:"left",part:"chat-buttons-left"},this.canSendFiles&&[h("dyte-tooltip",Object.assign({label:this.t("Send a file")},e),h("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("Send a file"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.attach}))),h("dyte-tooltip",Object.assign({label:this.t("Send an image")},e),h("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("Send an image"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.image})))],this.canSendTextMessage&&!this.disableEmojiPicker&&h("dyte-tooltip",Object.assign({label:this.t("Send Emoji")},e),h("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("Send Emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},h("dyte-icon",{icon:this.iconPack.emoji_multiple})))),this.canSendTextMessage&&h("div",{class:"right",part:"chat-buttons-right"},h("dyte-tooltip",Object.assign({variant:"primary",label:this.t("Send message"),delay:2e3},e),h("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("Send message"),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.send})))))))}};eO.style=MB;const DB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,tO=class{constructor(e){X(this,e),this.observingEl=[],this.onScroll=t=>{const i=t.target;es(()=>{const{scrollTop:r,clientHeight:n,scrollHeight:s}=i;r+n+10>=s?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1})},this.scrollToBottom=()=>{fo(this.$chat)},this.observeMessage=t=>{t&&this.observingEl.push(t);try{this.intersectionObserver.observe(t)}catch{}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var e;this.lastReadTimestamp=(e=bm.everyone)!==null&&e!==void 0?e:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver(i=>{!document.hasFocus()||es(()=>{for(const r of i)r.isIntersecting&&parseInt(r.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(bm[this.selectedGroup]=new Date)})});const t=()=>{this.now=new Date,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(t))},60*1e3)};this.request=requestAnimationFrame(t),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll)}componentDidRender(){this.autoScrollEnabled?fo(this.$chat):this.autoScrollEnabled==null&&fo(this.$chat,!1)}chatChanged(e){if(this.$chat!=null&&!(this.autoScrollEnabled||this.$chat.clientHeight===this.$chat.scrollHeight)){for(let t=e.length-1;t>=0;t--)if(e[t].message.time>this.lastReadTimestamp&&e[t].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach(e=>{this.intersectionObserver.unobserve(e)}),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var e;let t=null,i=!1;return h(z,null,h("div",{class:"chat-container scrollbar",ref:r=>this.$chat=r,part:"container"},h("div",{class:"spacer",part:"spacer"}),h("div",{class:"chat",part:"chat"},(e=this.messages)===null||e===void 0?void 0:e.map(r=>{if(r.type==="chat"){const{message:n}=r,a=!(n.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&n.time>this.lastReadTimestamp;a&&(i=a);const o=!a&&n.userId===(t==null?void 0:t.userId)&&TA(n.time,t==null?void 0:t.time)<2;switch(t=n,n.type){case"text":return h("div",{"is-continued":o,key:r.message.id},a&&h("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),h("dyte-text-message",{message:n,now:this.now,isContinued:o,"data-timestamp":n.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return h("div",{"is-continued":o,key:r.message.id},a&&h("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),h("dyte-image-message",{message:n,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":n.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return h("div",{"is-continued":o,key:r.message.id},a&&h("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),h("dyte-file-message",{message:n,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":n.time.getTime(),ref:this.observeMessage}))}}return null}))),h("div",{class:"show-new-messages-ctr"},h("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};tO.style=DB;const LB=":host{display:flex;flex:1 0 0px}",iO=class{constructor(e){X(this,e),this.pageSize=25,this.getChatMessages=async(t,i,r)=>{const{messages:n}=await this.meeting.chat.getMessages(t,i,r);return n},this.createChatNodes=t=>t.map(i=>{const r=i.userId===void 0;return this.createChatNode(i,r)}),this.disconnectMeeting=t=>{var i;(i=t==null?void 0:t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(t,i)=>h("dyte-chat-message",{messageItem:{type:"chat",message:t},isContinued:i,isUnread:!1,size:this.size,iconPack:this.iconPack,key:t.id}),this.chatUpdateListener=t=>{this.$paginatedListRef.onNewNode(this.createChatNode(t.message,!1))},this.meeting=void 0,this.size=void 0,this.iconPack=Z,this.t=ee()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i;t!=null&&this.disconnectMeeting(t),!(e&&!e.chat)&&e!=null&&((i=e.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener))}render(){return h(z,null,h("dyte-paginated-list",{ref:e=>this.$paginatedListRef=e,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes}))}static get watchers(){return{meeting:["meetingChanged"]}}};iO.style=LB;const NB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);-webkit-animation:0.3s slide-down ease;animation:0.3s slide-down ease}@-webkit-keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,rO=class{constructor(e){X(this,e),this.groupChanged=le(this,"dyteChatGroupChanged",7),this.onScopeClick=t=>{this.showParticipantsPanel=!1,this.groupChanged.emit(t)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=Z,this.t=ee(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))}getName(){if(!this.selectedGroupId||this.selectedGroupId==="everyone")return this.t("everyone");const e=this.groups.find(t=>t.userId===this.selectedGroupId);return e?e.name:this.t("everyone")}render(){const e=Object.keys(this.unreadCounts).reduce((t,i)=>t+this.unreadCounts[i],0);return h(z,null,h("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&h("div",{class:"participants-container"},h("div",{class:"search",part:"search"},h("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),h("input",{type:"search",autocomplete:"off",placeholder:"Search",value:this.query,onInput:t=>{this.query=t.target.value},part:"search-input"})),h("ul",{class:"scope-list scrollbar"},this.query===""&&h("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},h("div",{class:"everyone-icon"},h("dyte-icon",{icon:this.iconPack.participants})),"Everyone",this.unreadCounts.everyone>0&&h("div",{class:"unread-count",part:"unread-count"},h("span",null,this.unreadCounts.everyone))),this.getGroups().map(t=>{const i=this.unreadCounts[lf([this.selfUserId,t.userId])];return h("li",{class:"scope",onClick:()=>this.onScopeClick(t),key:t.userId},t.name,i>0&&h("div",{class:"unread-count",part:"unread-count"},h("span",null,i)))}))),h("button",{onClick:()=>this.toggleParticipants()},h("span",null,`${this.t("To")} ${this.getName()}`,"  ",e>0&&h("div",{class:"unread-count selector"},h("span",null,e))),h("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};rO.style=NB;var UB=Object.freeze({__proto__:null,dyte_chat_composer_ui:eO,dyte_chat_messages_ui:tO,dyte_chat_messages_ui_paginated:iO,dyte_chat_selector_ui:rO});const jB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.webinar){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.webinar) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.webinar) .container dyte-button{margin:var(--dyte-space-3, 12px);flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.webinar) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.webinar) .summary{padding:var(--dyte-space-4, 16px)}:host(.livestream){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.livestream) dyte-participant-setup{display:flex;width:100%;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.livestream) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.livestream) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.livestream) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.livestream) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.livestream) .summary{margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-6, 24px);text-align:left;font-size:14px}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}`,nO=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.joinStage=le(this,"dyteJoinStage",7),this.leaveStage=le(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=ct,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")}}render(){var e,t,i,r;const n={meeting:this.meeting,size:this.size,states:this.states||K,config:this.config,iconPack:this.iconPack,t:this.t};return h(z,{class:{livestream:((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="LIVESTREAM",webinar:((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="WEBINAR"}},h("header",null,h("h2",null,this.dataConfig.title)),h(rt,{element:"dyte-participant-setup",defaults:n,props:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},childProps:{participant:(r=this.meeting)===null||r===void 0?void 0:r.self,size:"md"},deepProps:!0}),h("div",{class:"summary"},this.dataConfig.description),h("div",{class:"container"},h("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),h("dyte-button",{onClick:()=>this.joinStage.emit(),title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.dataConfig.label.accept)))}};nO.style=jB;const $B=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}",sO=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=Z,this.t=ee()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout(()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),K.activeOverlayModal={active:!1}},this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return h(z,null,h("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),h("h2",null,this.states.activeOverlayModal.title),h("p",null,this.states.activeOverlayModal.description))}};sO.style=$B;var FB=Object.freeze({__proto__:null,dyte_join_stage:nO,dyte_overlay_modal:sO});const BB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px)}video{z-index:0;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.latency-controls{position:absolute;bottom:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);z-index:20;display:flex;flex-direction:row;align-items:center}.sync-live-stream{cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}",aO=class{constructor(e){X(this,e),this.dyteAPIError=le(this,"dyteAPIError",7),this.showLatencyIndicator=!1,this.LoadPlayer=(t=this.ivsPlayer)=>{this.player&&t&&(t.attachHTMLVideoElement(this.player),t.setAutoplay(!0),t.setVolume(1))},this.livestreamUpdateListener=t=>{var i,r;this.livestreamState=t,t==="LIVESTREAMING"?(this.LoadPlayer(),this.getPlaybackUrl(),!((r=(i=this.meeting.__internals__)===null||i===void 0?void 0:i.browserSpecs)===null||r===void 0)&&r.isIOSMobile()||(this.fetchLatency(),this.updateLatency=setInterval(this.fetchLatency,2e3)),jt.enableSource("livestream-player")):(this.showLatencyIndicator=!1,this.updateLatency&&clearInterval(this.updateLatency),jt.disableSource("livestream-player"))},this.getLoadingState=()=>{let t="",i=!1,r=!1;switch(this.livestreamState){case"IDLE":t=this.t("Waiting to go live."),i=!0,r=!1;break;case"STARTING":t=this.t("Livestream is starting..."),i=!0,r=!0;break;case"STOPPING":t=this.t("Livestream is stopping..."),i=!0,r=!0;break;case"LIVESTREAMING":this.playerState!==_s.PLAYING&&(t=this.t("Livestream is starting..."),r=!0,i=!0);break;default:i=!1,t=this.t(""),r=!0;break}return{isLoading:i,loadingMessage:t,showIcon:r}},this.getErrorState=()=>{var t,i;let r=!1,n="";return this.livestreamState!=="LIVESTREAMING"?(r=!1,n=this.t(""),{isError:r,errorMessage:n}):(this.isSupported||(r=!0,n=this.t("Player not supported.")),this.playbackUrl||(r=!0,n=this.t("Playback URL not found.")),this.playerError&&(r=!0,n=this.t((i=(t=this.playerError)===null||t===void 0?void 0:t.message)!==null&&i!==void 0?i:"An unknown error occured.")),{isError:r,errorMessage:n})},this.fetchLatency=()=>{this.ivsPlayer&&(this.latency=this.ivsPlayer.getLiveLatency())},this.stopRebuffer=t=>{this.ivsPlayer.setRebufferToLive(!1),this.latency=t,clearInterval(this.updateLatency),this.updateLatency=setInterval(this.fetchLatency,2e3)},this.resetSyncLivestream=()=>{const t=this.ivsPlayer.getLiveLatency();this.stopRebuffer(t),this.dyteAPIError.emit({trace:this.t("livestreamPlayer.rebuffer.error"),message:this.t("Could not sync livestream please try again later.")})},this.syncLiveStream=()=>{clearInterval(this.updateLatency),this.latency=-1,this.ivsPlayer.setRebufferToLive(!0);const t=setTimeout(this.resetSyncLivestream,15e3);this.updateLatency=setInterval(()=>{const i=this.ivsPlayer.getLiveLatency();i<10&&(this.stopRebuffer(i),clearTimeout(t))},1e3)},this.meeting=void 0,this.size=void 0,this.t=ee(),this.iconPack=Z,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=_s.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.latency=0,this.audioPlaybackError=!1}AddPlayerListeners(e=this.ivsPlayer){Object.values(Object.assign(Object.assign({},di),_s)).forEach(t=>{mj.includes(t)||e==null||e.addEventListener(t,i=>{var r,n,s;(t===_s.IDLE||t===_s.PLAYING||t===di.ERROR||t===_s.READY)&&(this.playerState=t),t===di.ERROR&&(this.playerError=i),t===_s.IDLE&&e.isPaused()&&e.play(),t===di.AUDIO_BLOCKED&&(this.audioPlaybackError=!0),this.playerState===_s.PLAYING&&!(!((n=(r=this.meeting.__internals__)===null||r===void 0?void 0:r.browserSpecs)===null||n===void 0)&&n.isIOSMobile())?this.showLatencyIndicator=!0:this.showLatencyIndicator=!1,this.meeting.__internals__.logger.info(`IVS.Player.${t}`,i),vj.includes(t)&&((s=this.meeting.__internals__.callStats)===null||s===void 0||s.ivsPlayerEvent(t,i))})})}getPlaybackUrl(e=this.ivsPlayer){this.playbackUrl=this.meeting.livestream.playbackUrl,this.playbackUrl&&e&&(e.load(this.playbackUrl),e.play())}onPlayerRef(e){this.player=e,jt.addSource("livestream-player",this.player,!!this.playbackUrl),this.playbackUrl&&jt.enableSource("livestream-player")}connectedCallback(){this.meetingChanged(this.meeting),window.onDyteLivestreamPlayer=e=>{e?(this.isSupported=!0,this.ivsPlayer=e,this.AddPlayerListeners(e),this.LoadPlayer(e),this.getPlaybackUrl(e)):this.isSupported=!1},this.sendLatencyToCallStats=setInterval(()=>{var e;this.fetchLatency(),(e=this.meeting.__internals__.callStats)===null||e===void 0||e.livestreamLatency(this.latency)},1e4)}disconnectedCallback(){window.onDyteLivestreamPlayer=void 0,this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),clearInterval(this.sendLatencyToCallStats),this.ivsPlayer.load(""),this.ivsPlayer=void 0,this.player=void 0}async componentDidLoad(){const e=`
    import IVSPlayer from 'https://cdn.jsdelivr.net/npm/amazon-ivs-player@1.16.0/+esm'
    let player = undefined;
    if (IVSPlayer.isPlayerSupported) {
      player = IVSPlayer.create({
        wasmBinary:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.wasm',
        wasmWorker:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.js',
      });
    }
    window.onDyteLivestreamPlayer && window.onDyteLivestreamPlayer(player);
    `,t=document.createElement("script");t.type="module",t.innerHTML=e,document.body.appendChild(t)}meetingChanged(e){e!=null&&(this.livestreamState=this.meeting.livestream.state,this.livestreamState==="LIVESTREAMING"&&(this.LoadPlayer(),this.getPlaybackUrl(),jt.enableSource("livestream-player")),this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){if(!ya(this.meeting))return;const{isError:e,errorMessage:t}=this.getErrorState(),{isLoading:i,loadingMessage:r,showIcon:n}=this.getLoadingState();return h(z,null,h("div",{class:"player-container"},h("video",{ref:s=>this.onPlayerRef(s),playsInline:!0}),this.audioPlaybackError&&h("div",{class:"unmute-popup"},h("h3",null,this.t("audio_playback.title")),h("p",null,this.t("audio_playback.description")),h("dyte-button",{kind:"wide",onClick:()=>{this.player.muted=!1,this.audioPlaybackError=!1},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),this.showLatencyIndicator&&h("div",{class:"latency-controls"},(this.latency>10||this.latency<0)&&h("div",{class:"sync-live-stream",onClick:this.syncLiveStream},this.latency===-1?h("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"sm"}):"Skip to Live")),e&&h("div",{class:"loader"},h("dyte-icon",{icon:this.iconPack.warning,t:this.t}),h("p",null,t)),!e&&i&&h("div",{class:"loader"},n&&h("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),h("p",null,r))))}static get watchers(){return{meeting:["meetingChanged"]}}};aO.style=BB;var VB=Object.freeze({__proto__:null,dyte_livestream_player:aO});const zB=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));-webkit-animation:show 0.4s ease;animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px)}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){-webkit-animation:exit 0.4s ease;animation:exit 0.4s ease}@-webkit-keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@-webkit-keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}",oO=class{constructor(e){X(this,e),this.dismiss=le(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(e){e!=null&&typeof e.duration=="number"&&setTimeout(()=>{this.dismiss.emit(e.id)},e.duration)}render(){return h(z,null,h("div",{class:"ctr"},this.notification.icon!=null&&h("dyte-icon",{class:"icon",icon:this.notification.icon,iconPack:this.iconPack,t:this.t}),this.notification.image!=null&&this.notification.icon==null&&this.imageState!=="errored"&&h("img",{src:this.notification.image,class:{loaded:this.imageState==="loaded"},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),h("p",{class:"message"},this.notification.message),h("div",{class:"right"},this.notification.button!=null&&h("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),h("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};oO.style=zB;var HB=Object.freeze({__proto__:null,dyte_notification:oO});const GB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:83.333333%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px)}.poll p{margin:var(--dyte-space-0, 0px)}.poll-question{font-size:12px;font-weight:700;overflow-wrap:break-word}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option label{display:flex;flex-direction:row}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,cO=class{constructor(e){X(this,e),this.onVote=le(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=Z,this.t=ee()}vote(e,t){this.poll.voted.includes(this.self)?e.preventDefault():this.onVote.emit({id:this.poll.id,index:t})}render(){return h(z,null,h("div",{class:"ctr"},h("p",{class:"poll-title"},this.t("Poll by")," ",Or(yn(this.poll.createdBy),20)),h("div",{class:"poll"},h("p",{class:"poll-question"},this.poll.question),this.poll.options.map((e,t)=>h("div",{class:{active:e.votes.some(i=>i.id===this.self),"poll-option":!0}},h("div",{class:"poll-option-header"},h("label",null,h("input",{disabled:!this.permissions.polls.canVote,type:"checkbox",checked:e.votes.some(i=>i.id===this.self),onClick:i=>this.vote(i,t)}),h("p",null,e.text," (",e.count,")"))),h("div",{class:"votes"},e.votes.map(i=>{if(!(this.poll.anonymous&&this.self!==this.poll.createdByUserId))return h("dyte-tooltip",{label:i.name,iconPack:this.iconPack,t:this.t},h("div",{class:"vote"},kA(i.name)))})))))))}};cO.style=GB;const WB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}`,dO=class{constructor(e){X(this,e),this.onCreate=le(this,"dyteCreatePoll",7),this.iconPack=Z,this.t=ee(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(e){var t;this.options=this.options.filter((i,r)=>r!==e),((t=this.error)===null||t===void 0?void 0:t.code)===1&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(e,t){var i;this.options[t]=e.target.value,((i=this.error)===null||i===void 0?void 0:i.code)===1&&(this.error=void 0)}handleSubmit(){const e={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:this.anonymous?!0:this.hideVotes};if(!e.question){this.error={code:0,message:this.t("Question is required.")};return}if(this.options.filter(t=>t.trim()==="").length>0){this.error={code:1,message:this.t("Empty options not allowed.")};return}this.onCreate.emit(e)}render(){return h(z,null,h("div",{class:"create-poll"},h("p",null,this.t("Poll Question")),h("textarea",{onInput:()=>{this.error&&this.error.code===0&&(this.error=void 0)},ref:e=>this.question=e,placeholder:this.t("What is your poll for?")}),this.options.map((e,t)=>h("div",{class:"option"},h("input",{placeholder:this.t("Enter an option"),value:e,onInput:i=>this.updateOption(i,t)}),t>1&&h("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(t),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})))),h("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("Add an option")),h("label",null,h("input",{id:"anonymous",type:"checkbox",onChange:e=>this.anonymous=e.target.checked}),this.t("Anonymous")),h("label",null,h("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:this.anonymous?!0:this.hideVotes,onChange:e=>this.hideVotes=e.target.checked}),this.t("Hide results before voting")),h("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("Create Poll")),this.error&&h("span",{class:"error-text"},this.error.message)))}};dO.style=WB;var qB=Object.freeze({__proto__:null,dyte_poll:cO,dyte_poll_form:dO});const JB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.dyte-select{width:100%;max-width:100%}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}`,lO=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.stageStateListener=()=>{this.updateCanProduce(this.meeting)},this.selfStageLeftListener=()=>{this.canProduceAudio=!1},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.audioDevices=[],this.speakerDevices=[],this.canProduceAudio=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e,t,i,r,n,s,a;(e=this.meeting)===null||e===void 0||e.self.removeListener("joinStageRequestAccepted",this.stageStateListener),(t=this.meeting)===null||t===void 0||t.self.removeListener("stageJoined",this.stageStateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("removedFromStage",this.stageStateListener),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.removeListener("stageStatusUpdate",this.stageStateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("stageLeft",this.selfStageLeftListener),(a=this.meeting)===null||a===void 0||a.self.removeListener("joinStageRequestRejected",this.stageStateListener)}updateCanProduce(e){const{self:t,meta:i,stage:r}=e,n=t.permissions.canProduceAudio==="ALLOWED",s=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,n?this.canProduceAudio=!0:(s||a)&&t.permissions.canProduceAudio==="CAN_REQUEST"&&(s&&(t.webinarStageStatus==="ON_STAGE"||t.webinarStageStatus==="ACCEPTED_TO_JOIN_STAGE")||a&&(r.status==="ON_STAGE"||r.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceAudio=!0)}meetingChanged(e){e!=null&&es(async()=>{var t,i,r,n;const{self:s,stage:a}=e,o=await e.self.getAudioDevices(),c=await e.self.getSpeakerDevices(),d=(t=e.self.getCurrentDevices())===null||t===void 0?void 0:t.audio,l=(i=e.self.getCurrentDevices())===null||i===void 0?void 0:i.speaker;this.updateCanProduce(e),s.addListener("joinStageRequestAccepted",this.stageStateListener),s.addListener("stageJoined",this.stageStateListener),s.addListener("removedFromStage",this.stageStateListener),a==null||a.addListener("stageStatusUpdate",this.stageStateListener),s.addListener("stageLeft",this.selfStageLeftListener),s.addListener("joinStageRequestRejected",this.stageStateListener),d!=null?this.audioDevices=[(r=o.find(u=>u.deviceId===d.deviceId))!==null&&r!==void 0?r:d,...o.filter(u=>u.deviceId!==d.deviceId)]:this.audioDevices=o,l!=null?this.speakerDevices=[(n=c.find(u=>u.deviceId===l.deviceId))!==null&&n!==void 0?n:l,...c.filter(u=>u.deviceId!==l.deviceId)]:this.speakerDevices=c})}testAudio(){var e;(e=this.testAudioEl)===null||e===void 0||e.play()}setDevice(e,t){var i,r;const n=e==="audio"?this.audioDevices.find(s=>s.deviceId===t):this.speakerDevices.find(s=>s.deviceId===t);n!=null&&((i=this.meeting)===null||i===void 0||i.self.setDevice(n),n.kind==="audiooutput"&&((r=this.testAudioEl)===null||r===void 0||r.setSinkId(n.deviceId)))}render(){var e,t,i;if(this.meeting==null)return null;let r=0,n=0;const s=(e=this.meeting)===null||e===void 0?void 0:e.self.getCurrentDevices(),a=this.states||K,o=((t=a==null?void 0:a.prefs)===null||t===void 0?void 0:t.muteNotificationSounds)===!0||gA("mute-notification-sounds")==="true";return h(z,null,h("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:c=>this.testAudioEl=c}),this.canProduceAudio&&h("div",{class:"group",part:"microphone-selection"},h("label",null,"Microphone (input)"),h("div",{class:"row"},h("select",{class:"dyte-select",onChange:c=>this.setDevice("audio",c.target.value)},this.audioDevices.map(({deviceId:c,label:d})=>{var l;return h("option",{value:c,selected:((l=s.audio)===null||l===void 0?void 0:l.deviceId)===c},d||`Microphone ${++r}`)})),h("dyte-audio-visualizer",{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,iconPack:this.iconPack,t:this.t}))),h("div",{class:"group",part:"speaker-selection"},this.speakerDevices.length>0&&h("div",null,h("label",null,"Speaker (output)"),h("div",{class:"row"},h("select",{class:"dyte-select",onChange:c=>this.setDevice("speaker",c.target.value)},this.speakerDevices.map(({deviceId:c,label:d})=>{var l;return h("option",{value:c,selected:((l=s.speaker)===null||l===void 0?void 0:l.deviceId)===c},d||`Speaker ${++n}`)})))),h("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),"Test")),h("div",{class:"group",part:"notification-toggle"},h("div",{class:"row"},h("label",{htmlFor:"notification-toggle"},"Notification sound"),h("dyte-switch",{id:"notification-toggle",checked:!o,onDyteChange:c=>{var d;const{checked:l}=c.target,u=!l;this.stateUpdate.emit({prefs:{muteNotificationSounds:u}}),K.prefs=Object.assign(Object.assign({},(d=K.prefs)!==null&&d!==void 0?d:{}),{muteNotificationSounds:u}),hA("mute-notification-sounds",u)},iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{meeting:["meetingChanged"]}}};lO.style=JB;const KB=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}`,uO=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.onVideoUpdate=t=>{this.videoEnabled=t.videoEnabled},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.videoDevices=[],this.currentDevice=void 0,this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(e){var t;e!=null&&(this.videoEnabled=e.self.videoEnabled,(t=e.self)===null||t===void 0||t.addListener("videoUpdate",this.onVideoUpdate),es(async()=>{var i,r;const n=await e.self.getVideoDevices(),s=(i=e.self.getCurrentDevices())===null||i===void 0?void 0:i.video;s!=null?this.videoDevices=[(r=n.find(a=>a.deviceId===s.deviceId))!==null&&r!==void 0?r:s,...n.filter(a=>a.deviceId!==s.deviceId)]:this.videoDevices=n}))}disconnectedCallback(){var e;(e=this.meeting.self)===null||e===void 0||e.removeListener("videoUpdate",this.onVideoUpdate)}async setDevice(e){var t;const i=this.videoDevices.find(r=>r.deviceId===e);this.currentDevice=i,i!=null&&await((t=this.meeting)===null||t===void 0?void 0:t.self.setDevice(i))}render(){var e,t;if(this.meeting==null)return null;let i=0;const r=this.states||K,n=((e=r==null?void 0:r.prefs)===null||e===void 0?void 0:e.mirrorVideo)===!0||gA("mirror-video")==="true";return h(z,null,h("div",{class:"group",part:"tile-preview"},this.videoEnabled===!0?h("dyte-participant-tile",{participant:(t=this.meeting)===null||t===void 0?void 0:t.self,iconPack:this.iconPack,t:this.t,states:r,isPreview:!0}):h("div",{class:"camera-off-helper"},h("dyte-participant-tile",{participant:void 0},h("div",null,h("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),h("div",null,"Camera is off"))))),h("div",{class:"group",part:"camera-selection"},h("label",null,"Camera"),h("div",{class:"row"},h("select",{class:"dyte-select",onChange:s=>this.setDevice(s.target.value)},this.videoDevices.map(({deviceId:s,label:a})=>h("option",{value:s},a||`Camera ${++i}`))))),h("div",{class:"group",part:"mirror-toggle"},h("div",{class:"row"},h("label",{htmlFor:"mirror-toggle"},"Mirror my Video"),h("dyte-switch",{checked:n,iconPack:this.iconPack,t:this.t,onDyteChange:s=>{var a;const{checked:o}=s.target;this.stateUpdate.emit({prefs:{mirrorVideo:o}}),K.prefs=Object.assign(Object.assign({},(a=K.prefs)!==null&&a!==void 0?a:{}),{mirrorVideo:o}),hA("mirror-video",o)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};uO.style=KB;var YB=Object.freeze({__proto__:null,dyte_settings_audio:lO,dyte_settings_video:uO});const QB=":host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}",pO=class{constructor(e){X(this,e),this.tabChange=le(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=ct,this.layout="row",this.iconPack=Z,this.t=ee(),this.activeTab=void 0,this.tabs=[]}render(){return h(z,null,h("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map(e=>{var t,i,r,n,s;if(e.type==="screenshare"){const a=e.participant,o=yn(a.name);return h("dyte-button",{title:`${o}'s Screen Share`,key:e.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((t=this.activeTab)===null||t===void 0?void 0:t.type)==="screenshare"&&((i=this.activeTab)===null||i===void 0?void 0:i.participant.id)===e.participant.id},onClick:()=>this.tabChange.emit(e)},h("div",{class:"center col"},h("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),h("span",{class:"name"},a.id===((r=this.meeting)===null||r===void 0?void 0:r.self.id)?this.t("You"):Or(o,6))))}else if(e.type==="plugin"){const a=e.plugin;return h("dyte-button",{title:a.name,key:a.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((n=this.activeTab)===null||n===void 0?void 0:n.type)==="plugin"&&((s=this.activeTab)===null||s===void 0?void 0:s.plugin.id)===a.id},onClick:()=>this.tabChange.emit(e)},h("div",{class:"center col"},h("img",{src:a.picture}),h("span",{class:"name"},Or(a.name,6))))}}))}};pO.style=QB;var ZB=Object.freeze({__proto__:null,dyte_tab_bar:pO}),XB=Tm;function Tm(){}Tm.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(i,r,n){this.callbacks=this.callbacks||{};var s=arguments.length===3,a=s?arguments[1]:void 0,o=s?arguments[2]:arguments[1];return o._groupName=a,(this.callbacks[i]=this.callbacks[i]||[]).push(o),this},t.once=function(i,r,n){var s=this,a=arguments.length===3,o=a?arguments[1]:void 0,c=a?arguments[2]:arguments[1];function d(){s.off(i,d),c.apply(this,arguments)}return this.on(i,o,d),this},t.releaseGroup=function(i){this.callbacks=this.callbacks||{};var r,n,s,a;for(r in this.callbacks)for(a=this.callbacks[r],n=0,s=a.length;n<s;n++)a[n]._groupName===i&&(a.splice(n,1),n--,s--);return this},t.off=function(i,r){this.callbacks=this.callbacks||{};var n=this.callbacks[i],s;return n?arguments.length===1?(delete this.callbacks[i],this):(s=n.indexOf(r),s!==-1&&(n.splice(s,1),n.length===0&&delete this.callbacks[i]),this):this},t.emit=function(i){this.callbacks=this.callbacks||{};var r=[].slice.call(arguments,1),n=this.callbacks[i],s=this.getWildcardCallbacks(i),a,o,c;if(n)for(c=n.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,r);if(s)for(o=s.length,c=s.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,[i].concat(r));return this},t.getWildcardCallbacks=function(i){this.callbacks=this.callbacks||{};var r,n,s=[];for(r in this.callbacks)n=r.split("*"),(r==="*"||n.length===2&&i.slice(0,n[0].length)===n[0])&&(s=s.concat(this.callbacks[r]));return s}};Tm.mixin(Tm);function eV(e,t){var i=-1/0;e.getFloatFrequencyData(t);for(var r=4,n=t.length;r<n;r++)t[r]>i&&t[r]<0&&(i=t[r]);return i}var jb;typeof window<"u"&&(jb=window.AudioContext||window.webkitAudioContext);var An=null,tV=function(e,r){var i=new XB;if(!jb)return i;var r=r||{},n=r.smoothing||.1,s=r.interval||50,a=r.threshold,o=r.play,c=r.history||10,d=!0;An=r.audioContext||An||new jb;var l,u,f;f=An.createAnalyser(),f.fftSize=512,f.smoothingTimeConstant=n,u=new Float32Array(f.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(l=An.createMediaElementSource(e),typeof o>"u"&&(o=!0),a=a||-50):(l=An.createMediaStreamSource(e),a=a||-50),l.connect(f),o&&f.connect(An.destination),i.speaking=!1,i.suspend=function(){return An.suspend()},i.resume=function(){return An.resume()},Object.defineProperty(i,"state",{get:function(){return An.state}}),An.onstatechange=function(){i.emit("state_change",An.state)},i.setThreshold=function(k){a=k},i.setInterval=function(k){s=k},i.stop=function(){d=!1,i.emit("volume_change",-100,a),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),f.disconnect(),l.disconnect()},i.speakingHistory=[];for(var y=0;y<c;y++)i.speakingHistory.push(0);var b=function(){setTimeout(function(){if(!!d){var k=eV(f,u);i.emit("volume_change",k,a);var P=0;if(k>a&&!i.speaking){for(var w=i.speakingHistory.length-3;w<i.speakingHistory.length;w++)P+=i.speakingHistory[w];P>=2&&(i.speaking=!0,i.emit("speaking"))}else if(k<a&&i.speaking){for(var w=0;w<i.speakingHistory.length;w++)P+=i.speakingHistory[w];P==0&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(k>a)),b()}},s)};return b(),i};const p0=(e,t)=>{if(e==null)return;const i=3,r=Math.round(i/2),n=[...Array(i)].map((y,b)=>{let k=b;return k>r-1&&(k=i-k-1),Math.round((k+1)/(r+1)*t)}),{width:s,height:a}=e,o=e.getContext("2d");let c=2;const d=4,l=s*1/n.length,u=l-d;o.clearRect(0,0,s,a),o.fillStyle="rgb(0,0,0,0.0)",o.fillRect(0,0,s,a);const f=getComputedStyle(e).getPropertyValue("color");o.fillStyle=f,o.strokeStyle=f,o.lineCap="round",o.lineWidth=4,o.beginPath();for(const y of n){const b=Math.min(-Math.abs(y*1.2/10*a)+a/2,a/2-2.5),k=Math.max((a/2-b)*2,5);o.moveTo(c+u/2,b),o.lineTo(c+u/2,b+k),c+=l}o.stroke()},iV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-6, 24px);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",hO=class{constructor(e){X(this,e),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){p0(this.visualizer,0)}disconnectedCallback(){var e,t,i;(e=this.hark)===null||e===void 0||e.stop(),this.audioUpdateListener&&((t=this.participant)===null||t===void 0||t.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&((i=this.participant)===null||i===void 0||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(e){e!=null&&(this.audioUpdateListener=({audioEnabled:t,audioTrack:i})=>{var r;if((r=this.hark)===null||r===void 0||r.stop(),t&&i!=null){this.audioEnabled=!0;const n=new MediaStream;n.addTrack(i),this.calcVolume(n),p0(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:t,screenShareTracks:i})=>{this.audioUpdateListener({audioEnabled:t&&i.audio!=null,audioTrack:i.audio})},this.screenShareUpdateListener(e),e.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(e),e.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(e){this.hark=tV(e,{play:!1,interval:1e3/10}),this.hark.on("volume_change",t=>{const i=this.volume;let r=Math.round(10**(t/115)*10);r<3&&(r=0);let n=Math.round((i*2+r)/3);i!==n&&(this.volume=n,p0(this.visualizer,this.volume))})}render(){return h(z,null,h("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:e=>this.visualizer=e,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&h("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t}))}static get watchers(){return{participant:["participantChanged"]}}};hO.style=iV;const rV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}",gO=class{constructor(e){X(this,e),this.dyteChange=le(this,"dyteChange",4),this.onClick=()=>{!this.readonly&&!this.disabled&&(this.checked=!this.checked)},this.onKeyPress=t=>{if(!this.readonly)switch(t.key){case"Enter":case" ":this.checked=!this.checked;break}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=Z,this.t=ee()}checkedChange(e){this.dyteChange.emit(e)}render(){return h(z,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},h("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};gO.style=rV;var nV=Object.freeze({__proto__:null,dyte_audio_visualizer:hO,dyte_switch:gO});const sV=":host{display:block}.file-picker{display:none}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}",fO=class{constructor(e){X(this,e),this.renderMessage=()=>{if(this.messageItem.type!=="chat")return;const t=this.messageItem.message;switch(t.type){case"text":return h("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&h("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),h("dyte-text-message",{message:t,now:this.now,isContinued:this.isContinued,"data-timestamp":t.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return h("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&h("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),h("dyte-image-message",{message:t,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":t.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return h("div",{"is-continued":this.isContinued,key:t.id},this.isUnread&&h("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),h("dyte-file-message",{message:t,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":t.time.getTime(),ref:this.observeMessage}))}},this.messageItem=void 0,this.isContinued=void 0,this.isUnread=void 0,this.observeMessage=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.now=new Date}render(){return h(z,null,h("slot",null),h("div",{class:"message"},this.renderMessage()))}};fO.style=sV;var aV="[object Symbol]";function oV(e){return typeof e=="symbol"||Nl(e)&&Th(e)==aV}var cV=/\s/;function dV(e){for(var t=e.length;t--&&cV.test(e.charAt(t)););return t}var lV=/^\s+/;function uV(e){return e&&e.slice(0,dV(e)+1).replace(lV,"")}var Kk=0/0,pV=/^[-+]0x[0-9a-f]+$/i,hV=/^0b[01]+$/i,gV=/^0o[0-7]+$/i,fV=parseInt;function Yk(e){if(typeof e=="number")return e;if(oV(e))return Kk;if(As(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=As(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=uV(e);var i=hV.test(e);return i||gV.test(e)?fV(e.slice(2),i?2:8):pV.test(e)?Kk:+e}var h0=function(){return Wc.Date.now()},mV="Expected a function",vV=Math.max,yV=Math.min;function bV(e,t,i){var r,n,s,a,o,c,d=0,l=!1,u=!1,f=!0;if(typeof e!="function")throw new TypeError(mV);t=Yk(t)||0,As(i)&&(l=!!i.leading,u="maxWait"in i,s=u?vV(Yk(i.maxWait)||0,t):s,f="trailing"in i?!!i.trailing:f);function y(B){var W=r,q=n;return r=n=void 0,d=B,a=e.apply(q,W),a}function b(B){return d=B,o=setTimeout(w,t),l?y(B):a}function k(B){var W=B-c,q=B-d,fe=t-W;return u?yV(fe,s-q):fe}function P(B){var W=B-c,q=B-d;return c===void 0||W>=t||W<0||u&&q>=s}function w(){var B=h0();if(P(B))return E(B);o=setTimeout(w,k(B))}function E(B){return o=void 0,f&&r?y(B):(r=n=void 0,a)}function R(){o!==void 0&&clearTimeout(o),d=0,r=c=n=o=void 0}function D(){return o===void 0?a:E(h0())}function V(){var B=h0(),W=P(B);if(r=arguments,n=this,c=B,W){if(o===void 0)return b(c);if(u)return clearTimeout(o),o=setTimeout(w,t),y(c)}return o===void 0&&(o=setTimeout(w,t)),a}return V.cancel=R,V.flush=D,V}const _V=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,mO=class{constructor(e){X(this,e),this.currentTime=()=>new Date().getTime(),this.observe=t=>{!t||this.intersectionObserver.observe(t)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.iconPack=Z,this.t=ee(),this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.pagesToRender=[[]]}async onNewNode(e){if(!this.shouldRenderNewNodes){this.hasNewNodesToRender=!0;return}this.addNodeToRender(e,!1),this.rerender()}connectedCallback(){this.rerender=bV(this.rerender.bind(this),50,{maxWait:200}),this.loadPage(this.currentTime(),this.pageSize,!0,()=>fo(this.$paginatedList,!1)),this.intersectionObserver=new IntersectionObserver(e=>{es(()=>{for(const t of e)t.target.id==="bottom-scroll"&&(t.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),t.target.id==="top-scroll"&&t.isIntersecting&&this.loadTop()})})}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&fo(this.$paginatedList)}loadTop(){var e,t,i;if(this.pagesToRender.length===0||this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize)return;const r=this.pagesToRender[0][0],n=(i=(t=(e=r.$attrs$)===null||e===void 0?void 0:e.messageItem)===null||t===void 0?void 0:t.message)===null||i===void 0?void 0:i.timeMs,s=()=>{var a;return(a=r.$elm$)===null||a===void 0?void 0:a.scrollIntoView()};this.loadPage(n-1,this.pageSize,!0,s)}loadBottom(){var e,t,i;if(this.pagesToRender.length===0){this.shouldRenderNewNodes=!0;return}if(this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize){this.shouldRenderNewNodes=!0;return}const r=this.pagesToRender.at(-1).at(-1),n=(i=(t=(e=r.$attrs$)===null||e===void 0?void 0:e.messageItem)===null||t===void 0?void 0:t.message)===null||i===void 0?void 0:i.timeMs,s=()=>{var a;return(a=r.$elm$)===null||a===void 0?void 0:a.scrollIntoView()};this.loadPage(n+1,this.pageSize,!1,s)}addNodeToRender(e,t){if(t){const i=this.pagesToRender[0];if(i&&(i==null?void 0:i.length)<this.pageSize)i.unshift(e);else{const r=[e];this.pagesToRender.unshift(r),this.removeLastPageIfNeeded(!1)}}else{const[i]=this.pagesToRender.slice(-1);if(i&&(i==null?void 0:i.length)<this.pageSize)i.push(e);else{const r=[e];this.pagesToRender.push(r),this.removeLastPageIfNeeded(!0)}}}async loadPage(e,t,i,r){const n=await this.fetchData(e,t,i);if(!(n!=null&&n.length)){i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0);return}const s=this.createNodes(n),a=s[s.length-1];let o=new Proxy(a,{set(c,d,l){return d==="$elm$"&&l&&!c.$elm$&&r(),c[d]=l,!0}});s[s.length-1]=o,s.forEach(c=>this.addNodeToRender(c,i)),this.rerender()}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(e){this.pagesToRender.length>this.pagesAllowed&&(e?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){return h(z,null,h("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},h("slot",null),h("div",{class:"show-new-messages-ctr"},h("dyte-button",{class:{"show-new-messages":!0,active:!this.shouldRenderNewNodes},kind:"icon",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),h("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e}),this.pagesToRender.map(e=>e.map(t=>t)),h("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e})))}};mO.style=_V;var wV=Object.freeze({__proto__:null,dyte_chat_message:fO,dyte_paginated_list:mO});const SV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}",vO=class{constructor(e){X(this,e),this.onClose=le(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=t=>{t.key==="Escape"&&this.open&&this.close()},this.hideCloseButton=!1,this.meeting=void 0,this.config=ct,this.states=void 0,this.size=void 0,this.iconPack=Z,this.t=ee(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?h(z,null,h("div",{id:"dialog",part:"container"},h("slot",null),!this.hideCloseButton&&h("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};vO.style=SV;var EV=Object.freeze({__proto__:null,dyte_dialog:vO});const TV="https://cdn.dyte.in/assets/emojis-data.json",kV=async()=>(await fetch(TV)).json(),PV=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);flex-direction:column;padding:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-0, 0px);width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:grid;grid-template-columns:repeat(7, minmax(0, 1fr));padding-bottom:var(--dyte-space-12, 48px);overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(-webkit-min-content, -webkit-max-content);grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,yO=class{constructor(e){X(this,e),this.emojiClicked=le(this,"dyteEmojiClicked",7),this.iconPack=Z,this.t=ee(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){kV().then(e=>{this.emojiList=e,this.handleInputChange({value:""})})}handleInputChange(e){this.filterVal=e.value;const t=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(t)).map(i=>({name:i[1],emoji:this.emojiList.emojis[i[2]]}))}handleEmojiClick(e){this.emojiClicked.emit(e)}mapEmojiList(){var e;return((e=this.emojiList)===null||e===void 0?void 0:e.length)>0?h("div",{id:"loader"},h("dyte-spinner",{iconPack:this.iconPack,t:this.t})):h("div",{id:"emoji-grid",class:"scrollbar"},this.filteredEmojis.map(t=>h("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${t.name}`,class:"emoji",variant:"ghost",kind:"icon",title:t.name,onClick:()=>this.handleEmojiClick(t.emoji)},t.emoji)))}render(){return h(z,null,h("input",{value:this.filterVal,onInput:e=>this.handleInputChange(e.target),placeholder:this.t("Search")}),this.mapEmojiList())}};yO.style=PV;var CV=Object.freeze({__proto__:null,dyte_emoji_picker:yO});const RV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}",bO=class{constructor(e){X(this,e),this.pinnedListener=({isPinned:t})=>{this.isPinned=t},this.stageListener=({webinarStageStatus:t})=>{this.isOnStage=t==="ON_STAGE"},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=Z,this.t=ee(),this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){this.participant==null||this.participant.removeListener==null||(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("peerStartedPresenting",this.stageListener),this.participant.removeListener("peerStoppedPresenting",this.stageListener))}meetingChanged(e){if(e!=null){const{self:t}=e;this.canDisableParticipantAudio=t.permissions.canAllowParticipantAudio||t.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=t.permissions.canAllowParticipantVideo||t.permissions.canDisableParticipantVideo,this.canKickParticipant=t.permissions.kickParticipant,this.canPinParticipant=t.permissions.pinParticipant,this.canAllowParticipantOnStage=t.permissions.acceptPresentRequests}}participantChanged(e){if(e!=null){if(this.audioEnabled=e.audioEnabled,this.videoEnabled=e.videoEnabled,this.isPinned=e.isPinned,this.isOnStage=e.webinarStageStatus==="ON_STAGE",this.audioUpdateListener=({audioEnabled:t})=>{this.audioEnabled=t},this.videoUpdateListener=({videoEnabled:t})=>{this.videoEnabled=t},e.addListener==null)return;e.addListener("audioUpdate",this.audioUpdateListener),e.addListener("videoUpdate",this.videoUpdateListener),e.addListener("pinned",this.pinnedListener),e.addListener("unpinned",this.pinnedListener),e.addListener("peerStartedPresenting",this.stageListener),e.addListener("peerStoppedPresenting",this.stageListener)}}render(){var e,t,i,r,n,s,a,o;const c=this.canDisableParticipantAudio||this.canDisableParticipantVideo||this.canKickParticipant||this.canPinParticipant,d=yn(((e=this.participant)===null||e===void 0?void 0:e.name)||""),l=this.isOnStage||((i=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||i===void 0?void 0:i.viewType)==="GROUP_CALL";return h(z,null,h("div",{class:"left"},h("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),h("p",{class:"name",title:d},Or(d,16)," ",((r=this.meeting)===null||r===void 0?void 0:r.self.id)===((n=this.participant)===null||n===void 0?void 0:n.id)&&this.t("(you)"))),this.view==="sidebar"&&h("div",{class:"right"},l&&h("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),l&&h("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),c&&h("dyte-menu",{iconPack:this.iconPack,t:this.t},h("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},h("dyte-icon",{class:"more",icon:this.iconPack.more_vertical})),h("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&l&&h("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("Unpin"):this.t("Pin")),this.canDisableParticipantAudio&&l&&this.audioEnabled&&h("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},h("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&l&&this.videoEnabled&&h("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},h("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participant.turn_off_video")),((s=this.meeting)===null||s===void 0?void 0:s.meta.viewType)==="WEBINAR"&&this.canAllowParticipantOnStage&&((a=this.participant)===null||a===void 0?void 0:a.id)!==((o=this.meeting)===null||o===void 0?void 0:o.self.id)&&h("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:async()=>{const u=this.participant;this.isOnStage?(u.isPinned&&u.unpin(),await u.removeFromStage()):await u.acceptJoinStageRequest(),this.isOnStage=!this.isOnStage}},h("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),this.canKickParticipant&&h("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var u,f;(u=this.meeting)===null||u===void 0||u.participants.kick((f=this.participant)===null||f===void 0?void 0:f.id)}},h("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick"))))))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};bO.style=RV;var xV=Object.freeze({__proto__:null,dyte_participant:bO});const AV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}::slotted(dyte-name-tag){position:absolute;left:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}::slotted(dyte-network-indicator){position:absolute;right:var(--dyte-space-3, 12px);bottom:var(--dyte-space-3, 12px)}:host([size='sm']) ::slotted(dyte-network-indicator){right:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}.pinned-icon{position:absolute;left:var(--dyte-space-3, 12px);top:var(--dyte-space-3, 12px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) .pinned-icon{top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag){left:auto;right:var(--dyte-space-3, 12px)}:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag){left:auto;right:auto}:host([name-tag-position='top-left']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);bottom:auto}:host([name-tag-position='top-right']) ::slotted(dyte-name-tag){top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);left:auto;bottom:auto}:host([name-tag-position='top-center']) ::slotted(dyte-name-tag){left:auto;right:auto;bottom:auto;top:var(--dyte-space-3, 12px)}",_O=class{constructor(e){X(this,e),this.onVideoUpdate=t=>{this.videoState=t,this.participant!=null&&(t.videoEnabled?jt.enableSource(this.participant.id):jt.disableSource(this.participant.id))},this.onPinned=({isPinned:t})=>{this.isPinned=t},this.isSelf=()=>{var t;return this.isPreview||this.participant.id===((t=this.meeting)===null||t===void 0?void 0:t.self.id)},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=ct,this.variant="solid",this.size=void 0,this.iconPack=Z,this.t=ee()}onVideoRef(e){this.videoEl=e,!(this.isPreview||this.participant==null)&&(jt.addSource(this.participant.id,this.videoEl,this.participant.videoEnabled),this.participant.videoEnabled&&jt.enableSource(this.participant.id))}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.playTimeout&&clearTimeout(this.playTimeout),this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned),jt.removeSource(this.participant.id))}participantsChanged(e){e!=null&&(this.videoState={videoEnabled:e.videoEnabled,videoTrack:e.videoTrack},this.isPinned=e.isPinned,e.addListener("videoUpdate",this.onVideoUpdate),e.addListener("pinned",this.onPinned),e.addListener("unpinned",this.onPinned))}videoStateChanged(e){var t;if(e!=null&&this.videoEl!=null)if(e.videoEnabled){!((t=this.meeting)===null||t===void 0)&&t.__internals__.features.hasFeature(Ob.LOG_PLAYING_FAILURES)&&(this.playTimeout&&clearTimeout(this.playTimeout),this.playTimeout=setTimeout(()=>{var r;(r=this.meeting)===null||r===void 0||r.__internals__.logger.log("dyte-participant-tile::playing_timeout")},6e3));const i=new MediaStream;if(e.videoTrack==null)return;i.addTrack(e.videoTrack),this.videoEl.srcObject=i}else this.playTimeout&&clearTimeout(this.playTimeout),this.videoEl.srcObject=void 0}isMirrored(){var e;if(this.participant!=null&&this.isSelf()){const t=this.states||K,i=(e=t==null?void 0:t.prefs)===null||e===void 0?void 0:e.mirrorVideo;if(typeof i=="boolean")return i}return!1}render(){var e,t,i,r;return h(z,null,h("video",{ref:n=>this.onVideoRef(n),class:{visible:(e=this.videoState)===null||e===void 0?void 0:e.videoEnabled,mirror:this.isMirrored(),[(r=(i=(t=this.config)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.videoFit)!==null&&r!==void 0?r:"cover"]:!0},onPlaying:()=>{this.playTimeout&&clearTimeout(this.playTimeout)},onPause:n=>{var s,a;this.isSelf()&&((s=this.meeting)===null||s===void 0?void 0:s.__internals__.features.hasFeature(Ob.PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),(a=n==null?void 0:n.target)===null||a===void 0||a.play())},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&h("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("Pinned"),iconPack:this.iconPack,t:this.t}),h("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};_O.style=AV;var IV=Object.freeze({__proto__:null,dyte_participant_tile:_O});const OV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;height:var(--dyte-space-16, 64px);width:100%;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='md']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='lg']) #sync-button{flex-direction:row;display:flex;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}",wO=class{constructor(e){X(this,e),this.meeting=void 0,this.iconPack=Z,this.t=ee(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(e){var t,i;e!=null&&(this.canSpotlight=e.self.permissions.canSpotlight,this.isSpotlighted=(i=(t=e.spotlight)===null||t===void 0?void 0:t.spotlighted)!==null&&i!==void 0?i:!1)}updateSpotlightState(e){var t;try{(t=this.meeting.spotlight)===null||t===void 0||t.setSpotlighted(e),this.isSpotlighted=e}catch(i){console.error(i)}}render(){if(!!this.canSpotlight)return h(z,null,h("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("Any plugin or screenshare you switch to will sync the change across the meeting")},h("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},h("span",{class:"name"},"Sync"),h("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};wO.style=OV;var MV=Object.freeze({__proto__:null,dyte_spotlight_indicator:wO});const DV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",SO=class{constructor(e){X(this,e),this.logoUrl=void 0,this.config=ct,this.meeting=void 0,this.t=ee()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(e){var t;if(e!=null){const i=(t=e==null?void 0:e.designTokens)===null||t===void 0?void 0:t.logo;i!=null&&this.logoUrl==null&&(this.logoUrl=i)}}meetingChanged(e){var t,i,r,n;if(e!=null){const s=(n=(r=(i=(t=e.self)===null||t===void 0?void 0:t.config)===null||i===void 0?void 0:i.header)===null||r===void 0?void 0:r.elements)===null||n===void 0?void 0:n.logo;s!=null&&this.logoUrl==null&&(this.logoUrl=s)}}render(){if(!this.logoUrl||this.logoUrl==="")return null;const e=this.logoUrl,t=this.t("Logo");return h(z,null,h("img",{src:e,alt:t}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};SO.style=DV;var LV=Object.freeze({__proto__:null,dyte_logo:SO});const NV=class{constructor(e){X(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=Z,this.t=ee()}render(){const e=rS(this.message.link);return h(z,null,!this.isContinued&&h(kh,{name:this.message.displayName,time:this.message.time,now:this.now}),h("div",{class:"body",part:"body"},h("div",{class:"file"},h("div",{class:"file-data"},h("div",{class:"name"},this.message.name),h("div",{class:"file-data-split"},h("div",{class:"ext"},D$(this.message.name)),h("span",{class:"divider"}),h("div",{class:"size"},L$(this.message.size)))),h("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>sS(e,{name:this.message.name,fallbackName:"file"}),part:"button"},h("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},UV=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}",EO=class{constructor(e){X(this,e),this.stateUpdate=le(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=Z,this.t=ee(),this.status="loading"}render(){return h(z,null,!this.isContinued&&h(kh,{name:this.message.displayName,time:this.message.time,now:this.now}),h("div",{class:"body",part:"body"},h("div",{class:{image:!0,loaded:this.status==="loaded"}},h("img",{src:rS(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&(this.stateUpdate.emit({image:this.message}),K.image=this.message)}}),this.status==="loading"&&h("div",{class:"image-spinner",title:this.t("Loading image"),"aria-label":this.t("Loading image")},h("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&h("div",{class:"image-errored",title:this.t("Image not found"),"aria-label":this.t("Image not found")},h("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&h("div",{class:"actions"},h("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),K.image=this.message},iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.full_screen_maximize})),h("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>sS(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},h("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};EO.style=UV;const jV=/(https?:\/\/[^\s]+)/,$V=e=>{const t=e.split(" "),i=t.length-1;return t.map((r,n)=>jV.test(r)?h("span",null,h("a",{href:r,target:"_blank",rel:"noopener noreferrer"},r),n!==i?" ":""):`${r}${n!==i?" ":""}`)},FV=({message:e})=>e.split(`
`).map(i=>h("p",null,$V(i))),BV=class{constructor(e){X(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=Z,this.t=ee()}render(){return h(z,null,!this.isContinued&&h(kh,{name:this.message.displayName,time:this.message.time,now:this.now}),h("div",{class:"body",part:"body"},h("div",{class:{text:!0,emoji:Dj(this.message.message)}},h(FV,{message:this.message.message}))))}};var VV=Object.freeze({__proto__:null,dyte_file_message:NV,dyte_image_message:EO,dyte_text_message:BV});function Ph(e){return e.split("-")[0]}function Tv(e){return e.split("-")[1]}function Ch(e){return["top","bottom"].includes(Ph(e))?"x":"y"}function aS(e){return e==="y"?"height":"width"}function Qk(e,t,i){let{reference:r,floating:n}=e;const s=r.x+r.width/2-n.width/2,a=r.y+r.height/2-n.height/2,o=Ch(t),c=aS(o),d=r[c]/2-n[c]/2,l=Ph(t),u=o==="x";let f;switch(l){case"top":f={x:s,y:r.y-n.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:a};break;case"left":f={x:r.x-n.width,y:a};break;default:f={x:r.x,y:r.y}}switch(Tv(t)){case"start":f[o]-=d*(i&&u?-1:1);break;case"end":f[o]+=d*(i&&u?-1:1);break}return f}const zV=async(e,t,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:a}=i,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:n}),{x:l,y:u}=Qk(d,r,c),f=r,y={},b=0;for(let k=0;k<o.length;k++){const{name:P,fn:w}=o[k],{x:E,y:R,data:D,reset:V}=await w({x:l,y:u,initialPlacement:r,placement:f,strategy:n,middlewareData:y,rects:d,platform:a,elements:{reference:e,floating:t}});if(l=E!=null?E:l,u=R!=null?R:u,y={...y,[P]:{...y[P],...D}},V&&b<=50){b++,typeof V=="object"&&(V.placement&&(f=V.placement),V.rects&&(d=V.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:n}):V.rects),{x:l,y:u}=Qk(d,f,c)),k=-1;continue}}return{x:l,y:u,placement:f,strategy:n,middlewareData:y}};function HV(e){return{top:0,right:0,bottom:0,left:0,...e}}function TO(e){return typeof e!="number"?HV(e):{top:e,right:e,bottom:e,left:e}}function km(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function kO(e,t){var i;t===void 0&&(t={});const{x:r,y:n,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:l="viewport",elementContext:u="floating",altBoundary:f=!1,padding:y=0}=t,b=TO(y),P=o[f?u==="floating"?"reference":"floating":u],w=km(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(P)))==null||i?P:P.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:d,rootBoundary:l,strategy:c})),E=u==="floating"?{...a.floating,x:r,y:n}:a.reference,R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),D=await(s.isElement==null?void 0:s.isElement(R))?await(s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},V=km(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:R,strategy:c}):E);return{top:(w.top-V.top+b.top)/D.y,bottom:(V.bottom-w.bottom+b.bottom)/D.y,left:(w.left-V.left+b.left)/D.x,right:(V.right-w.right+b.right)/D.x}}const GV=Math.min,WV=Math.max;function $b(e,t,i){return WV(e,GV(t,i))}const qV=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:r=0}=e!=null?e:{},{x:n,y:s,placement:a,rects:o,platform:c}=t;if(i==null)return{};const d=TO(r),l={x:n,y:s},u=Ch(a),f=aS(u),y=await c.getDimensions(i),b=u==="y"?"top":"left",k=u==="y"?"bottom":"right",P=o.reference[f]+o.reference[u]-l[u]-o.floating[f],w=l[u]-o.reference[u],E=await(c.getOffsetParent==null?void 0:c.getOffsetParent(i));let R=E?u==="y"?E.clientHeight||0:E.clientWidth||0:0;R===0&&(R=o.floating[f]);const D=P/2-w/2,V=d[b],B=R-y[f]-d[k],W=R/2-y[f]/2+D,q=$b(V,W,B),ae=Tv(a)!=null&&W!=q&&o.reference[f]/2-(W<V?d[b]:d[k])-y[f]/2<0?W<V?V-W:B-W:0;return{[u]:l[u]-ae,data:{[u]:q,centerOffset:W-q}}}}),JV={left:"right",right:"left",bottom:"top",top:"bottom"};function Pm(e){return e.replace(/left|right|bottom|top/g,t=>JV[t])}function KV(e,t,i){i===void 0&&(i=!1);const r=Tv(e),n=Ch(e),s=aS(n);let a=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Pm(a)),{main:a,cross:Pm(a)}}const YV={start:"end",end:"start"};function Zk(e){return e.replace(/start|end/g,t=>YV[t])}function QV(e){const t=Pm(e);return[Zk(e),t,Zk(t)]}const PO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:r,middlewareData:n,rects:s,initialPlacement:a,platform:o,elements:c}=t,{mainAxis:d=!0,crossAxis:l=!0,fallbackPlacements:u,fallbackStrategy:f="bestFit",flipAlignment:y=!0,...b}=e,k=Ph(r),w=u||(k===a||!y?[Pm(a)]:QV(a)),E=[a,...w],R=await kO(t,b),D=[];let V=((i=n.flip)==null?void 0:i.overflows)||[];if(d&&D.push(R[k]),l){const{main:fe,cross:ae}=KV(r,s,await(o.isRTL==null?void 0:o.isRTL(c.floating)));D.push(R[fe],R[ae])}if(V=[...V,{placement:r,overflows:D}],!D.every(fe=>fe<=0)){var B,W;const fe=((B=(W=n.flip)==null?void 0:W.index)!=null?B:0)+1,ae=E[fe];if(ae)return{data:{index:fe,overflows:V},reset:{placement:ae}};let he="bottom";switch(f){case"bestFit":{var q;const tt=(q=V.map(ht=>[ht,ht.overflows.filter(ii=>ii>0).reduce((ii,Sr)=>ii+Sr,0)]).sort((ht,ii)=>ht[1]-ii[1])[0])==null?void 0:q[0].placement;tt&&(he=tt);break}case"initialPlacement":he=a;break}if(r!==he)return{reset:{placement:he}}}return{}}}};async function ZV(e,t){const{placement:i,platform:r,elements:n}=e,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),a=Ph(i),o=Tv(i),c=Ch(i)==="x",d=["left","top"].includes(a)?-1:1,l=s&&c?-1:1,u=typeof t=="function"?t(e):t;let{mainAxis:f,crossAxis:y,alignmentAxis:b}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return o&&typeof b=="number"&&(y=o==="end"?b*-1:b),c?{x:y*l,y:f*d}:{x:f*d,y:y*l}}const CO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:r}=t,n=await ZV(t,e);return{x:i+n.x,y:r+n.y,data:n}}}};function XV(e){return e==="x"?"y":"x"}const RO=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:n}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:P=>{let{x:w,y:E}=P;return{x:w,y:E}}},...c}=e,d={x:i,y:r},l=await kO(t,c),u=Ch(Ph(n)),f=XV(u);let y=d[u],b=d[f];if(s){const P=u==="y"?"top":"left",w=u==="y"?"bottom":"right",E=y+l[P],R=y-l[w];y=$b(E,y,R)}if(a){const P=f==="y"?"top":"left",w=f==="y"?"bottom":"right",E=b+l[P],R=b-l[w];b=$b(E,b,R)}const k=o.fn({...t,[u]:y,[f]:b});return{...k,data:{x:k.x-i,y:k.y-r}}}}};function mn(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Is(e){return mn(e).getComputedStyle(e)}function _o(e){return AO(e)?(e.nodeName||"").toLowerCase():""}let Sg;function xO(){if(Sg)return Sg;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Sg=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Sg):navigator.userAgent}function pa(e){return e instanceof mn(e).HTMLElement}function wo(e){return e instanceof mn(e).Element}function AO(e){return e instanceof mn(e).Node}function Xk(e){if(typeof ShadowRoot>"u")return!1;const t=mn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function kv(e){const{overflow:t,overflowX:i,overflowY:r,display:n}=Is(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(n)}function ez(e){return["table","td","th"].includes(_o(e))}function oS(e){const t=/firefox/i.test(xO()),i=Is(e),r=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(r?r!=="none":!1)||t&&i.willChange==="filter"||t&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(n=>i.willChange.includes(n))||["paint","layout","strict","content"].some(n=>{const s=i.contain;return s!=null?s.includes(n):!1})}function IO(){return!/^((?!chrome|android).)*safari/i.test(xO())}function cS(e){return["html","body","#document"].includes(_o(e))}const eP=Math.min,xp=Math.max,Cm=Math.round;function OO(e){const t=Is(e);let i=parseFloat(t.width),r=parseFloat(t.height);const n=e.offsetWidth,s=e.offsetHeight,a=Cm(i)!==n||Cm(r)!==s;return a&&(i=n,r=s),{width:i,height:r,fallback:a}}function MO(e){return wo(e)?e:e.contextElement}const DO={x:1,y:1};function ol(e){const t=MO(e);if(!pa(t))return DO;const i=t.getBoundingClientRect(),{width:r,height:n,fallback:s}=OO(t);let a=(s?Cm(i.width):i.width)/r,o=(s?Cm(i.height):i.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}function rh(e,t,i,r){var n,s;t===void 0&&(t=!1),i===void 0&&(i=!1);const a=e.getBoundingClientRect(),o=MO(e);let c=DO;t&&(r?wo(r)&&(c=ol(r)):c=ol(e));const d=o?mn(o):window,l=!IO()&&i;let u=(a.left+(l&&((n=d.visualViewport)==null?void 0:n.offsetLeft)||0))/c.x,f=(a.top+(l&&((s=d.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,y=a.width/c.x,b=a.height/c.y;if(o){const k=mn(o),P=r&&wo(r)?mn(r):r;let w=k.frameElement;for(;w&&r&&P!==k;){const E=ol(w),R=w.getBoundingClientRect(),D=getComputedStyle(w);R.x+=(w.clientLeft+parseFloat(D.paddingLeft))*E.x,R.y+=(w.clientTop+parseFloat(D.paddingTop))*E.y,u*=E.x,f*=E.y,y*=E.x,b*=E.y,u+=R.x,f+=R.y,w=mn(w).frameElement}}return{width:y,height:b,top:f,right:u+y,bottom:f+b,left:u,x:u,y:f}}function Ro(e){return((AO(e)?e.ownerDocument:e.document)||window.document).documentElement}function Pv(e){return wo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function LO(e){return rh(Ro(e)).left+Pv(e).scrollLeft}function tz(e,t,i){const r=pa(t),n=Ro(t),s=rh(e,!0,i==="fixed",t);let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&i!=="fixed")if((_o(t)!=="body"||kv(n))&&(a=Pv(t)),pa(t)){const c=rh(t,!0);o.x=c.x+t.clientLeft,o.y=c.y+t.clientTop}else n&&(o.x=LO(n));return{x:s.left+a.scrollLeft-o.x,y:s.top+a.scrollTop-o.y,width:s.width,height:s.height}}function nh(e){if(_o(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(Xk(e)?e.host:null)||Ro(e);return Xk(t)?t.host:t}function tP(e){return!pa(e)||Is(e).position==="fixed"?null:e.offsetParent}function iz(e){let t=nh(e);for(;pa(t)&&!cS(t);){if(oS(t))return t;t=nh(t)}return null}function iP(e){const t=mn(e);let i=tP(e);for(;i&&ez(i)&&Is(i).position==="static";)i=tP(i);return i&&(_o(i)==="html"||_o(i)==="body"&&Is(i).position==="static"&&!oS(i))?t:i||iz(e)||t}function rz(e){return OO(e)}function nz(e){let{rect:t,offsetParent:i,strategy:r}=e;const n=pa(i),s=Ro(i);if(i===s)return t;let a={scrollLeft:0,scrollTop:0},o={x:1,y:1};const c={x:0,y:0};if((n||!n&&r!=="fixed")&&((_o(i)!=="body"||kv(s))&&(a=Pv(i)),pa(i))){const d=rh(i);o=ol(i),c.x=d.x+i.clientLeft,c.y=d.y+i.clientTop}return{width:t.width*o.x,height:t.height*o.y,x:t.x*o.x-a.scrollLeft*o.x+c.x,y:t.y*o.y-a.scrollTop*o.y+c.y}}function sz(e,t){const i=mn(e),r=Ro(e),n=i.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(n){s=n.width,a=n.height;const d=IO();(d||!d&&t==="fixed")&&(o=n.offsetLeft,c=n.offsetTop)}return{width:s,height:a,x:o,y:c}}function az(e){var t;const i=Ro(e),r=Pv(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=xp(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=xp(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0);let o=-r.scrollLeft+LO(e);const c=-r.scrollTop;return Is(n||i).direction==="rtl"&&(o+=xp(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:a,x:o,y:c}}function NO(e){const t=nh(e);return cS(t)?e.ownerDocument.body:pa(t)&&kv(t)?t:NO(t)}function UO(e,t){var i;t===void 0&&(t=[]);const r=NO(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),s=mn(r);return n?t.concat(s,s.visualViewport||[],kv(r)?r:[]):t.concat(r,UO(r))}function oz(e,t){const i=rh(e,!0,t==="fixed"),r=i.top+e.clientTop,n=i.left+e.clientLeft,s=pa(e)?ol(e):{x:1,y:1},a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=n*s.x,d=r*s.y;return{top:d,left:c,right:c+a,bottom:d+o,x:c,y:d,width:a,height:o}}function rP(e,t,i){return t==="viewport"?km(sz(e,i)):wo(t)?oz(t,i):km(az(Ro(e)))}function cz(e,t){const i=t.get(e);if(i)return i;let r=UO(e).filter(o=>wo(o)&&_o(o)!=="body"),n=null;const s=Is(e).position==="fixed";let a=s?nh(e):e;for(;wo(a)&&!cS(a);){const o=Is(a),c=oS(a);(s?!c&&!n:!c&&o.position==="static"&&!!n&&["absolute","fixed"].includes(n.position))?r=r.filter(l=>l!==a):n=o,a=nh(a)}return t.set(e,r),r}function dz(e){let{element:t,boundary:i,rootBoundary:r,strategy:n}=e;const a=[...i==="clippingAncestors"?cz(t,this._c):[].concat(i),r],o=a[0],c=a.reduce((d,l)=>{const u=rP(t,l,n);return d.top=xp(u.top,d.top),d.right=eP(u.right,d.right),d.bottom=eP(u.bottom,d.bottom),d.left=xp(u.left,d.left),d},rP(t,o,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const lz={getClippingRect:dz,convertOffsetParentRelativeRectToViewportRelativeRect:nz,isElement:wo,getDimensions:rz,getOffsetParent:iP,getDocumentElement:Ro,getScale:ol,async getElementRects(e){let{reference:t,floating:i,strategy:r}=e;const n=this.getOffsetParent||iP,s=this.getDimensions;return{reference:tz(t,await n(i),r),floating:{x:0,y:0,...await s(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Is(e).direction==="rtl"},jO=(e,t,i)=>{const r=new Map,n={platform:lz,...i},s={...n.platform,_c:r};return zV(e,t,{...n,platform:s})},uz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}",$O=class{constructor(t){X(this,t),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.iconPack=Z,this.t=ee()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){jO(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[CO(10),PO(),RO({padding:5})]}).then(({x:t,y:i})=>{Object.assign(this.menuListEl.style,{left:`${t}px`,top:`${i}px`})})}render(){return h(z,null,h("span",{id:"trigger",ref:t=>this.triggerEl=t,onClick:()=>{this.clickedThis=!0,this.menuListEl.style.display!=="block"?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},h("slot",{name:"trigger"})),h("span",{part:"menu-list",id:"menu-list",ref:t=>this.menuListEl=t},h("slot",null)))}};$O.style=uz;const pz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",FO=class{constructor(e){X(this,e),this.size=void 0,this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("slot",{name:"start"}),h("slot",null),h("slot",{name:"end"}))}};FO.style=pz;const hz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-webkit-max-content;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}",BO=class{constructor(e){X(this,e),this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("slot",null))}};BO.style=hz;var gz=Object.freeze({__proto__:null,dyte_menu:$O,dyte_menu_item:FO,dyte_menu_list:BO});const fz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));overflow:hidden;border-radius:9999px}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([size='sm']){height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);font-size:20px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}",VO=class{constructor(e){X(this,e),this.getAvatar=()=>{var t;const i=yn(((t=this.participant)===null||t===void 0?void 0:t.name)||"");let r;if(this.participant!=null&&"picture"in this.participant&&(r=this.participant.picture),r&&r.length>0&&this.imageState!=="errored")return h("div",{class:"image-ctr"},this.imageState==="loading"&&h("dyte-spinner",{iconPack:this.iconPack,t:this.t}),h("img",{src:r,class:{loaded:this.imageState==="loaded"},loading:"lazy",title:i,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const n=kA(i);return h("div",{class:"initials",title:i,part:"initials"},n)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=Z,this.t=ee(),this.imageState="loading"}render(){return h(z,null,this.getAvatar())}};VO.style=fz;var mz=Object.freeze({__proto__:null,dyte_avatar:VO});const vz=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(
    --dyte-controlbar-button-background-color,
    rgb(var(--dyte-colors-background-1000, 8 8 8))
  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px)}:host([variant='horizontal']) .label{display:block;font-size:14px}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}`,zO=class{constructor(e){X(this,e),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=Z,this.t=ee(),this.brandIcon=!1}render(){return h(z,null,h("button",{"aria-label":this.label,part:"button"},this.isLoading?h("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):h("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),h("span",{class:"label",part:"label"},this.label),this.showWarning&&h("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};zO.style=vz;var yz=Object.freeze({__proto__:null,dyte_controlbar_button:zO});const bz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip,#arrow{position:absolute;background-color:var(--background-color)}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}:host([kind='block']){display:block}",HO=class{constructor(e){X(this,e),this.dyteOpenChange=le(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout(()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),this.size==="sm"&&setTimeout(()=>{this.isInFocus&&this.hideMenu()},1e3))},this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=Z,this.t=ee(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),es(()=>{this.openChanged(this.open)})}openChanged(e){e?this.showMenu():this.hideMenu()}update(){jO(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[CO(8),PO(),RO({padding:5}),qV({element:this.arrowEl})]}).then(({x:e,y:t,placement:i,middlewareData:r})=>{Object.assign(this.tooltipEl.style,{left:`${e}px`,top:`${t}px`});const{x:n,y:s}=r.arrow,a={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:n!=null?`${n}px`:"",top:s!=null?`${s}px`:"",right:"",bottom:"",[a]:"-4px"})})}render(){return h(z,null,h("span",{part:"trigger",id:"trigger",ref:e=>this.triggerEl=e},h("slot",null)),h("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:e=>this.tooltipEl=e},h("div",{id:"arrow",ref:e=>this.arrowEl=e,part:"arrow"}),this.label,h("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};HO.style=bz;var _z=Object.freeze({__proto__:null,dyte_tooltip:HO});const wz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@-webkit-keyframes spin{to{transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}.spinner{-webkit-animation:spin 1s linear infinite;animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;-webkit-animation-duration:0.7s;animation-duration:0.7s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",GO=class{constructor(e){X(this,e),this.iconPack=Z,this.size="md",this.t=ee()}render(){return h(z,null,h("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};GO.style=wz;var Sz=Object.freeze({__proto__:null,dyte_spinner:GO});const Ez=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}",WO=class{constructor(e){X(this,e),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("button",{part:"button"},h("span",{class:"start"},h("slot",{name:"start"})),h("span",{class:"content",part:"content"},h("slot",null)),h("span",{class:"end"},h("slot",{name:"end"}))))}};WO.style=Ez;var Tz=Object.freeze({__proto__:null,dyte_button:WO});const kz=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}",Pz=e=>{try{return JSON.parse(e)}catch{return e}},qO=class{constructor(e){X(this,e),this.icon=void 0,this.iconPack=Z,this.t=ee()}render(){return h(z,null,h("div",{class:"icon-wrapper",innerHTML:Pz(this.icon),part:"wrapper"}))}};qO.style=kz;var Cz=Object.freeze({__proto__:null,dyte_icon:qO});(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();Z7();const Rz=f7("dyte-meeting");var JO=typeof global=="object"&&global&&global.Object===Object&&global,xz=typeof self=="object"&&self&&self.Object===Object&&self,Fl=JO||xz||Function("return this")(),Rm=Fl.Symbol,KO=Object.prototype,Az=KO.hasOwnProperty,Iz=KO.toString,Pu=Rm?Rm.toStringTag:void 0;function Oz(e){var t=Az.call(e,Pu),i=e[Pu];try{e[Pu]=void 0;var r=!0}catch{}var n=Iz.call(e);return r&&(t?e[Pu]=i:delete e[Pu]),n}var Mz=Object.prototype,Dz=Mz.toString;function Lz(e){return Dz.call(e)}var Nz="[object Null]",Uz="[object Undefined]",nP=Rm?Rm.toStringTag:void 0;function Cv(e){return e==null?e===void 0?Uz:Nz:nP&&nP in Object(e)?Oz(e):Lz(e)}function qc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Rh(e){return e!=null&&typeof e=="object"}function jz(){this.__data__=[],this.size=0}function Rv(e,t){return e===t||e!==e&&t!==t}function xv(e,t){for(var i=e.length;i--;)if(Rv(e[i][0],t))return i;return-1}var $z=Array.prototype,Fz=$z.splice;function Bz(e){var t=this.__data__,i=xv(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():Fz.call(t,i,1),--this.size,!0}function Vz(e){var t=this.__data__,i=xv(t,e);return i<0?void 0:t[i][1]}function zz(e){return xv(this.__data__,e)>-1}function Hz(e,t){var i=this.__data__,r=xv(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function ba(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}ba.prototype.clear=jz;ba.prototype.delete=Bz;ba.prototype.get=Vz;ba.prototype.has=zz;ba.prototype.set=Hz;function Gz(){this.__data__=new ba,this.size=0}function Wz(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function qz(e){return this.__data__.get(e)}function Jz(e){return this.__data__.has(e)}var Kz="[object AsyncFunction]",Yz="[object Function]",Qz="[object GeneratorFunction]",Zz="[object Proxy]";function dS(e){if(!qc(e))return!1;var t=Cv(e);return t==Yz||t==Qz||t==Kz||t==Zz}var g0=Fl["__core-js_shared__"],sP=function(){var e=/[^.]+$/.exec(g0&&g0.keys&&g0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Xz(e){return!!sP&&sP in e}var eH=Function.prototype,tH=eH.toString;function iH(e){if(e!=null){try{return tH.call(e)}catch{}try{return e+""}catch{}}return""}var rH=/[\\^$.*+?()[\]{}|]/g,nH=/^\[object .+?Constructor\]$/,sH=Function.prototype,aH=Object.prototype,oH=sH.toString,cH=aH.hasOwnProperty,dH=RegExp("^"+oH.call(cH).replace(rH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lH(e){if(!qc(e)||Xz(e))return!1;var t=dS(e)?dH:nH;return t.test(iH(e))}function uH(e,t){return e==null?void 0:e[t]}function lS(e,t){var i=uH(e,t);return lH(i)?i:void 0}var YO=lS(Fl,"Map"),sh=lS(Object,"create");function pH(){this.__data__=sh?sh(null):{},this.size=0}function hH(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gH="__lodash_hash_undefined__",fH=Object.prototype,mH=fH.hasOwnProperty;function vH(e){var t=this.__data__;if(sh){var i=t[e];return i===gH?void 0:i}return mH.call(t,e)?t[e]:void 0}var yH=Object.prototype,bH=yH.hasOwnProperty;function _H(e){var t=this.__data__;return sh?t[e]!==void 0:bH.call(t,e)}var wH="__lodash_hash_undefined__";function SH(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=sh&&t===void 0?wH:t,this}function jc(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}jc.prototype.clear=pH;jc.prototype.delete=hH;jc.prototype.get=vH;jc.prototype.has=_H;jc.prototype.set=SH;function EH(){this.size=0,this.__data__={hash:new jc,map:new(YO||ba),string:new jc}}function TH(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Av(e,t){var i=e.__data__;return TH(t)?i[typeof t=="string"?"string":"hash"]:i.map}function kH(e){var t=Av(this,e).delete(e);return this.size-=t?1:0,t}function PH(e){return Av(this,e).get(e)}function CH(e){return Av(this,e).has(e)}function RH(e,t){var i=Av(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function Bl(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Bl.prototype.clear=EH;Bl.prototype.delete=kH;Bl.prototype.get=PH;Bl.prototype.has=CH;Bl.prototype.set=RH;var xH=200;function AH(e,t){var i=this.__data__;if(i instanceof ba){var r=i.__data__;if(!YO||r.length<xH-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Bl(r)}return i.set(e,t),this.size=i.size,this}function Vl(e){var t=this.__data__=new ba(e);this.size=t.size}Vl.prototype.clear=Gz;Vl.prototype.delete=Wz;Vl.prototype.get=qz;Vl.prototype.has=Jz;Vl.prototype.set=AH;var xm=function(){try{var e=lS(Object,"defineProperty");return e({},"",{}),e}catch{}}();function uS(e,t,i){t=="__proto__"&&xm?xm(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Fb(e,t,i){(i!==void 0&&!Rv(e[t],i)||i===void 0&&!(t in e))&&uS(e,t,i)}function IH(e){return function(t,i,r){for(var n=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[e?o:++n];if(i(s[c],c,s)===!1)break}return t}}var OH=IH(),QO=typeof qe=="object"&&qe&&!qe.nodeType&&qe,aP=QO&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,MH=aP&&aP.exports===QO,oP=MH?Fl.Buffer:void 0,cP=oP?oP.allocUnsafe:void 0;function DH(e,t){if(t)return e.slice();var i=e.length,r=cP?cP(i):new e.constructor(i);return e.copy(r),r}var dP=Fl.Uint8Array;function LH(e){var t=new e.constructor(e.byteLength);return new dP(t).set(new dP(e)),t}function NH(e,t){var i=t?LH(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function UH(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var lP=Object.create,jH=function(){function e(){}return function(t){if(!qc(t))return{};if(lP)return lP(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function $H(e,t){return function(i){return e(t(i))}}var ZO=$H(Object.getPrototypeOf,Object),FH=Object.prototype;function XO(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||FH;return e===i}function BH(e){return typeof e.constructor=="function"&&!XO(e)?jH(ZO(e)):{}}var VH="[object Arguments]";function uP(e){return Rh(e)&&Cv(e)==VH}var eM=Object.prototype,zH=eM.hasOwnProperty,HH=eM.propertyIsEnumerable,Bb=uP(function(){return arguments}())?uP:function(e){return Rh(e)&&zH.call(e,"callee")&&!HH.call(e,"callee")},Vb=Array.isArray,GH=9007199254740991;function tM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=GH}function pS(e){return e!=null&&tM(e.length)&&!dS(e)}function WH(e){return Rh(e)&&pS(e)}function qH(){return!1}var iM=typeof qe=="object"&&qe&&!qe.nodeType&&qe,pP=iM&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,JH=pP&&pP.exports===iM,hP=JH?Fl.Buffer:void 0,KH=hP?hP.isBuffer:void 0,rM=KH||qH,YH="[object Object]",QH=Function.prototype,ZH=Object.prototype,nM=QH.toString,XH=ZH.hasOwnProperty,eG=nM.call(Object);function tG(e){if(!Rh(e)||Cv(e)!=YH)return!1;var t=ZO(e);if(t===null)return!0;var i=XH.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&nM.call(i)==eG}var iG="[object Arguments]",rG="[object Array]",nG="[object Boolean]",sG="[object Date]",aG="[object Error]",oG="[object Function]",cG="[object Map]",dG="[object Number]",lG="[object Object]",uG="[object RegExp]",pG="[object Set]",hG="[object String]",gG="[object WeakMap]",fG="[object ArrayBuffer]",mG="[object DataView]",vG="[object Float32Array]",yG="[object Float64Array]",bG="[object Int8Array]",_G="[object Int16Array]",wG="[object Int32Array]",SG="[object Uint8Array]",EG="[object Uint8ClampedArray]",TG="[object Uint16Array]",kG="[object Uint32Array]",Nt={};Nt[vG]=Nt[yG]=Nt[bG]=Nt[_G]=Nt[wG]=Nt[SG]=Nt[EG]=Nt[TG]=Nt[kG]=!0;Nt[iG]=Nt[rG]=Nt[fG]=Nt[nG]=Nt[mG]=Nt[sG]=Nt[aG]=Nt[oG]=Nt[cG]=Nt[dG]=Nt[lG]=Nt[uG]=Nt[pG]=Nt[hG]=Nt[gG]=!1;function PG(e){return Rh(e)&&tM(e.length)&&!!Nt[Cv(e)]}function CG(e){return function(t){return e(t)}}var sM=typeof qe=="object"&&qe&&!qe.nodeType&&qe,Ap=sM&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,RG=Ap&&Ap.exports===sM,f0=RG&&JO.process,gP=function(){try{var e=Ap&&Ap.require&&Ap.require("util").types;return e||f0&&f0.binding&&f0.binding("util")}catch{}}(),fP=gP&&gP.isTypedArray,aM=fP?CG(fP):PG;function zb(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var xG=Object.prototype,AG=xG.hasOwnProperty;function IG(e,t,i){var r=e[t];(!(AG.call(e,t)&&Rv(r,i))||i===void 0&&!(t in e))&&uS(e,t,i)}function OG(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?uS(i,o,c):IG(i,o,c)}return i}function MG(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var DG=9007199254740991,LG=/^(?:0|[1-9]\d*)$/;function oM(e,t){var i=typeof e;return t=t==null?DG:t,!!t&&(i=="number"||i!="symbol"&&LG.test(e))&&e>-1&&e%1==0&&e<t}var NG=Object.prototype,UG=NG.hasOwnProperty;function jG(e,t){var i=Vb(e),r=!i&&Bb(e),n=!i&&!r&&rM(e),s=!i&&!r&&!n&&aM(e),a=i||r||n||s,o=a?MG(e.length,String):[],c=o.length;for(var d in e)(t||UG.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||oM(d,c)))&&o.push(d);return o}function $G(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var FG=Object.prototype,BG=FG.hasOwnProperty;function VG(e){if(!qc(e))return $G(e);var t=XO(e),i=[];for(var r in e)r=="constructor"&&(t||!BG.call(e,r))||i.push(r);return i}function cM(e){return pS(e)?jG(e,!0):VG(e)}function zG(e){return OG(e,cM(e))}function HG(e,t,i,r,n,s,a){var o=zb(e,i),c=zb(t,i),d=a.get(c);if(d){Fb(e,i,d);return}var l=s?s(o,c,i+"",e,t,a):void 0,u=l===void 0;if(u){var f=Vb(c),y=!f&&rM(c),b=!f&&!y&&aM(c);l=c,f||y||b?Vb(o)?l=o:WH(o)?l=UH(o):y?(u=!1,l=DH(c,!0)):b?(u=!1,l=NH(c,!0)):l=[]:tG(c)||Bb(c)?(l=o,Bb(o)?l=zG(o):(!qc(o)||dS(o))&&(l=BH(c))):u=!1}u&&(a.set(c,l),n(l,c,r,s,a),a.delete(c)),Fb(e,i,l)}function dM(e,t,i,r,n){e!==t&&OH(t,function(s,a){if(n||(n=new Vl),qc(s))HG(e,t,a,i,dM,r,n);else{var o=r?r(zb(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),Fb(e,a,o)}},cM)}function lM(e){return e}function GG(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var mP=Math.max;function WG(e,t,i){return t=mP(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,s=mP(r.length-t,0),a=Array(s);++n<s;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(a),GG(e,this,o)}}function qG(e){return function(){return e}}var JG=xm?function(e,t){return xm(e,"toString",{configurable:!0,enumerable:!1,value:qG(t),writable:!0})}:lM,KG=800,YG=16,QG=Date.now;function ZG(e){var t=0,i=0;return function(){var r=QG(),n=YG-(r-i);if(i=r,n>0){if(++t>=KG)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var XG=ZG(JG);function eW(e,t){return XG(WG(e,t,lM),e+"")}function tW(e,t,i){if(!qc(i))return!1;var r=typeof t;return(r=="number"?pS(i)&&oM(t,i.length):r=="string"&&t in i)?Rv(i[t],e):!1}function iW(e){return eW(function(t,i){var r=-1,n=i.length,s=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&tW(i[0],i[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,s)}return t})}iW(function(e,t,i){dM(e,t,i)});const vP={get:(e,t,i)=>(...r)=>{try{return Reflect.get(e,t,i).apply(e,r)}catch{return null}}};let yP;try{yP=new Proxy(localStorage,vP)}catch{yP=new Proxy({},vP)}var Eg,rW=new Uint8Array(16);function nW(){if(!Eg&&(Eg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Eg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Eg(rW)}const sW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hS(e){return typeof e=="string"&&sW.test(e)}var zi=[];for(var m0=0;m0<256;++m0)zi.push((m0+256).toString(16).substr(1));function aW(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(zi[e[t+0]]+zi[e[t+1]]+zi[e[t+2]]+zi[e[t+3]]+"-"+zi[e[t+4]]+zi[e[t+5]]+"-"+zi[e[t+6]]+zi[e[t+7]]+"-"+zi[e[t+8]]+zi[e[t+9]]+"-"+zi[e[t+10]]+zi[e[t+11]]+zi[e[t+12]]+zi[e[t+13]]+zi[e[t+14]]+zi[e[t+15]]).toLowerCase();if(!hS(i))throw TypeError("Stringified UUID is invalid");return i}function Iv(e,t,i){e=e||{};var r=e.random||(e.rng||nW)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return aW(r)}var uM={exports:{}},gS={exports:{}},pM=function(t,i){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return t.apply(i,n)}},oW=pM,xo=Object.prototype.toString;function fS(e){return Array.isArray(e)}function Hb(e){return typeof e>"u"}function cW(e){return e!==null&&!Hb(e)&&e.constructor!==null&&!Hb(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function hM(e){return xo.call(e)==="[object ArrayBuffer]"}function dW(e){return xo.call(e)==="[object FormData]"}function lW(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&hM(e.buffer),t}function uW(e){return typeof e=="string"}function pW(e){return typeof e=="number"}function gM(e){return e!==null&&typeof e=="object"}function uf(e){if(xo.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function hW(e){return xo.call(e)==="[object Date]"}function gW(e){return xo.call(e)==="[object File]"}function fW(e){return xo.call(e)==="[object Blob]"}function fM(e){return xo.call(e)==="[object Function]"}function mW(e){return gM(e)&&fM(e.pipe)}function vW(e){return xo.call(e)==="[object URLSearchParams]"}function yW(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function bW(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function mS(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),fS(e))for(var i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function Gb(){var e={};function t(n,s){uf(e[s])&&uf(n)?e[s]=Gb(e[s],n):uf(n)?e[s]=Gb({},n):fS(n)?e[s]=n.slice():e[s]=n}for(var i=0,r=arguments.length;i<r;i++)mS(arguments[i],t);return e}function _W(e,t,i){return mS(t,function(n,s){i&&typeof n=="function"?e[s]=oW(n,i):e[s]=n}),e}function wW(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Ur={isArray:fS,isArrayBuffer:hM,isBuffer:cW,isFormData:dW,isArrayBufferView:lW,isString:uW,isNumber:pW,isObject:gM,isPlainObject:uf,isUndefined:Hb,isDate:hW,isFile:gW,isBlob:fW,isFunction:fM,isStream:mW,isURLSearchParams:vW,isStandardBrowserEnv:bW,forEach:mS,merge:Gb,extend:_W,trim:yW,stripBOM:wW},od=Ur;function bP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mM=function(t,i,r){if(!i)return t;var n;if(r)n=r(i);else if(od.isURLSearchParams(i))n=i.toString();else{var s=[];od.forEach(i,function(c,d){c===null||typeof c>"u"||(od.isArray(c)?d=d+"[]":c=[c],od.forEach(c,function(u){od.isDate(u)?u=u.toISOString():od.isObject(u)&&(u=JSON.stringify(u)),s.push(bP(d)+"="+bP(u))}))}),n=s.join("&")}if(n){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},SW=Ur;function Ov(){this.handlers=[]}Ov.prototype.use=function(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Ov.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Ov.prototype.forEach=function(t){SW.forEach(this.handlers,function(r){r!==null&&t(r)})};var EW=Ov,TW=Ur,kW=function(t,i){TW.forEach(t,function(n,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(t[i]=n,delete t[s])})},vM=function(t,i,r,n,s){return t.config=i,r&&(t.code=r),t.request=n,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},v0,_P;function yM(){if(_P)return v0;_P=1;var e=vM;return v0=function(i,r,n,s,a){var o=new Error(i);return e(o,r,n,s,a)},v0}var y0,wP;function PW(){if(wP)return y0;wP=1;var e=yM();return y0=function(i,r,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?i(n):r(e("Request failed with status code "+n.status,n.config,null,n.request,n))},y0}var b0,SP;function CW(){if(SP)return b0;SP=1;var e=Ur;return b0=e.isStandardBrowserEnv()?function(){return{write:function(r,n,s,a,o,c){var d=[];d.push(r+"="+encodeURIComponent(n)),e.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),e.isString(a)&&d.push("path="+a),e.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),b0}var _0,EP;function RW(){return EP||(EP=1,_0=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),_0}var w0,TP;function xW(){return TP||(TP=1,w0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),w0}var S0,kP;function AW(){if(kP)return S0;kP=1;var e=RW(),t=xW();return S0=function(r,n){return r&&!e(n)?t(r,n):n},S0}var E0,PP;function IW(){if(PP)return E0;PP=1;var e=Ur,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return E0=function(r){var n={},s,a,o;return r&&e.forEach(r.split(`
`),function(d){if(o=d.indexOf(":"),s=e.trim(d.substr(0,o)).toLowerCase(),a=e.trim(d.substr(o+1)),s){if(n[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?n[s]=(n[s]?n[s]:[]).concat([a]):n[s]=n[s]?n[s]+", "+a:a}}),n},E0}var T0,CP;function OW(){if(CP)return T0;CP=1;var e=Ur;return T0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function s(a){var o=a;return i&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(o){var c=e.isString(o)?s(o):o;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}(),T0}var k0,RP;function Mv(){if(RP)return k0;RP=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,k0=e,k0}var P0,xP;function AP(){if(xP)return P0;xP=1;var e=Ur,t=PW(),i=CW(),r=mM,n=AW(),s=IW(),a=OW(),o=yM(),c=Dv(),d=Mv();return P0=function(u){return new Promise(function(y,b){var k=u.data,P=u.headers,w=u.responseType,E;function R(){u.cancelToken&&u.cancelToken.unsubscribe(E),u.signal&&u.signal.removeEventListener("abort",E)}e.isFormData(k)&&delete P["Content-Type"];var D=new XMLHttpRequest;if(u.auth){var V=u.auth.username||"",B=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";P.Authorization="Basic "+btoa(V+":"+B)}var W=n(u.baseURL,u.url);D.open(u.method.toUpperCase(),r(W,u.params,u.paramsSerializer),!0),D.timeout=u.timeout;function q(){if(!!D){var ae="getAllResponseHeaders"in D?s(D.getAllResponseHeaders()):null,he=!w||w==="text"||w==="json"?D.responseText:D.response,tt={data:he,status:D.status,statusText:D.statusText,headers:ae,config:u,request:D};t(function(ii){y(ii),R()},function(ii){b(ii),R()},tt),D=null}}if("onloadend"in D?D.onloadend=q:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(q)},D.onabort=function(){!D||(b(o("Request aborted",u,"ECONNABORTED",D)),D=null)},D.onerror=function(){b(o("Network Error",u,null,D)),D=null},D.ontimeout=function(){var he=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",tt=u.transitional||c.transitional;u.timeoutErrorMessage&&(he=u.timeoutErrorMessage),b(o(he,u,tt.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",D)),D=null},e.isStandardBrowserEnv()){var fe=(u.withCredentials||a(W))&&u.xsrfCookieName?i.read(u.xsrfCookieName):void 0;fe&&(P[u.xsrfHeaderName]=fe)}"setRequestHeader"in D&&e.forEach(P,function(he,tt){typeof k>"u"&&tt.toLowerCase()==="content-type"?delete P[tt]:D.setRequestHeader(tt,he)}),e.isUndefined(u.withCredentials)||(D.withCredentials=!!u.withCredentials),w&&w!=="json"&&(D.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&D.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&D.upload&&D.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(E=function(ae){!D||(b(!ae||ae&&ae.type?new d("canceled"):ae),D.abort(),D=null)},u.cancelToken&&u.cancelToken.subscribe(E),u.signal&&(u.signal.aborted?E():u.signal.addEventListener("abort",E))),k||(k=null),D.send(k)})},P0}var C0,IP;function Dv(){if(IP)return C0;IP=1;var e=Ur,t=kW,i=vM,r={"Content-Type":"application/x-www-form-urlencoded"};function n(c,d){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=d)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=AP()),c}function a(c,d,l){if(e.isString(c))try{return(d||JSON.parse)(c),e.trim(c)}catch(u){if(u.name!=="SyntaxError")throw u}return(l||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(d,l){return t(l,"Accept"),t(l,"Content-Type"),e.isFormData(d)||e.isArrayBuffer(d)||e.isBuffer(d)||e.isStream(d)||e.isFile(d)||e.isBlob(d)?d:e.isArrayBufferView(d)?d.buffer:e.isURLSearchParams(d)?(n(l,"application/x-www-form-urlencoded;charset=utf-8"),d.toString()):e.isObject(d)||l&&l["Content-Type"]==="application/json"?(n(l,"application/json"),a(d)):d}],transformResponse:[function(d){var l=this.transitional||o.transitional,u=l&&l.silentJSONParsing,f=l&&l.forcedJSONParsing,y=!u&&this.responseType==="json";if(y||f&&e.isString(d)&&d.length)try{return JSON.parse(d)}catch(b){if(y)throw b.name==="SyntaxError"?i(b,this,"E_JSON_PARSE"):b}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(d){o.headers[d]={}}),e.forEach(["post","put","patch"],function(d){o.headers[d]=e.merge(r)}),C0=o,C0}var MW=Ur,DW=Dv(),LW=function(t,i,r){var n=this||DW;return MW.forEach(r,function(a){t=a.call(n,t,i)}),t},R0,OP;function bM(){return OP||(OP=1,R0=function(t){return!!(t&&t.__CANCEL__)}),R0}var MP=Ur,x0=LW,NW=bM(),UW=Dv(),jW=Mv();function A0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new jW("canceled")}var $W=function(t){A0(t),t.headers=t.headers||{},t.data=x0.call(t,t.data,t.headers,t.transformRequest),t.headers=MP.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),MP.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var i=t.adapter||UW.adapter;return i(t).then(function(n){return A0(t),n.data=x0.call(t,n.data,n.headers,t.transformResponse),n},function(n){return NW(n)||(A0(t),n&&n.response&&(n.response.data=x0.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},Vr=Ur,_M=function(t,i){i=i||{};var r={};function n(l,u){return Vr.isPlainObject(l)&&Vr.isPlainObject(u)?Vr.merge(l,u):Vr.isPlainObject(u)?Vr.merge({},u):Vr.isArray(u)?u.slice():u}function s(l){if(Vr.isUndefined(i[l])){if(!Vr.isUndefined(t[l]))return n(void 0,t[l])}else return n(t[l],i[l])}function a(l){if(!Vr.isUndefined(i[l]))return n(void 0,i[l])}function o(l){if(Vr.isUndefined(i[l])){if(!Vr.isUndefined(t[l]))return n(void 0,t[l])}else return n(void 0,i[l])}function c(l){if(l in i)return n(t[l],i[l]);if(l in t)return n(void 0,t[l])}var d={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return Vr.forEach(Object.keys(t).concat(Object.keys(i)),function(u){var f=d[u]||s,y=f(u);Vr.isUndefined(y)&&f!==c||(r[u]=y)}),r},I0,DP;function wM(){return DP||(DP=1,I0={version:"0.25.0"}),I0}var FW=wM().version,vS={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){vS[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var LP={};vS.transitional=function(t,i,r){function n(s,a){return"[Axios v"+FW+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return function(s,a,o){if(t===!1)throw new Error(n(a," has been removed"+(i?" in "+i:"")));return i&&!LP[a]&&(LP[a]=!0,console.warn(n(a," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(s,a,o):!0}};function BW(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),n=r.length;n-- >0;){var s=r[n],a=t[s];if(a){var o=e[s],c=o===void 0||a(o,s,e);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(i!==!0)throw Error("Unknown option "+s)}}var VW={assertOptions:BW,validators:vS},SM=Ur,zW=mM,NP=EW,UP=$W,Lv=_M,EM=VW,cd=EM.validators;function xh(e){this.defaults=e,this.interceptors={request:new NP,response:new NP}}xh.prototype.request=function(t,i){if(typeof t=="string"?(i=i||{},i.url=t):i=t||{},!i.url)throw new Error("Provided config url is not valid");i=Lv(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&EM.assertOptions(r,{silentJSONParsing:cd.transitional(cd.boolean),forcedJSONParsing:cd.transitional(cd.boolean),clarifyTimeoutError:cd.transitional(cd.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(i)===!1||(s=s&&y.synchronous,n.unshift(y.fulfilled,y.rejected))});var a=[];this.interceptors.response.forEach(function(y){a.push(y.fulfilled,y.rejected)});var o;if(!s){var c=[UP,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(a),o=Promise.resolve(i);c.length;)o=o.then(c.shift(),c.shift());return o}for(var d=i;n.length;){var l=n.shift(),u=n.shift();try{d=l(d)}catch(f){u(f);break}}try{o=UP(d)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};xh.prototype.getUri=function(t){if(!t.url)throw new Error("Provided config url is not valid");return t=Lv(this.defaults,t),zW(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};SM.forEach(["delete","get","head","options"],function(t){xh.prototype[t]=function(i,r){return this.request(Lv(r||{},{method:t,url:i,data:(r||{}).data}))}});SM.forEach(["post","put","patch"],function(t){xh.prototype[t]=function(i,r,n){return this.request(Lv(n||{},{method:t,url:i,data:r}))}});var HW=xh,O0,jP;function GW(){if(jP)return O0;jP=1;var e=Mv();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var n=this;this.promise.then(function(s){if(!!n._listeners){var a,o=n._listeners.length;for(a=0;a<o;a++)n._listeners[a](s);n._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(c){n.subscribe(c),a=c}).then(s);return o.cancel=function(){n.unsubscribe(a)},o},i(function(a){n.reason||(n.reason=new e(a),r(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}},t.source=function(){var r,n=new t(function(a){r=a});return{token:n,cancel:r}},O0=t,O0}var M0,$P;function WW(){return $P||($P=1,M0=function(t){return function(r){return t.apply(null,r)}}),M0}var D0,FP;function qW(){if(FP)return D0;FP=1;var e=Ur;return D0=function(i){return e.isObject(i)&&i.isAxiosError===!0},D0}var BP=Ur,JW=pM,pf=HW,KW=_M,YW=Dv();function TM(e){var t=new pf(e),i=JW(pf.prototype.request,t);return BP.extend(i,pf.prototype,t),BP.extend(i,t),i.create=function(n){return TM(KW(e,n))},i}var Ls=TM(YW);Ls.Axios=pf;Ls.Cancel=Mv();Ls.CancelToken=GW();Ls.isCancel=bM();Ls.VERSION=wM().version;Ls.all=function(t){return Promise.all(t)};Ls.spread=WW();Ls.isAxiosError=qW();gS.exports=Ls;gS.exports.default=Ls;(function(e){e.exports=gS.exports})(uM);const Am=yR(uM.exports),QW={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},kM={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},si={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},hr={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ma={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Y{static getFirstMatch(t,i){const r=i.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,i){const r=i.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,i,r){if(t.test(i))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,i,r=!1){const n=Y.getVersionPrecision(t),s=Y.getVersionPrecision(i);let a=Math.max(n,s),o=0;const c=Y.map([t,i],d=>{const l=a-Y.getVersionPrecision(d),u=d+new Array(l+1).join(".0");return Y.map(u.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(o=a-Math.min(n,s)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(t,i){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(t,i);for(n=0;n<t.length;n+=1)r.push(i(t[n]));return r}static find(t,i){let r,n;if(Array.prototype.find)return Array.prototype.find.call(t,i);for(r=0,n=t.length;r<n;r+=1){const s=t[r];if(i(s,r))return s}}static assign(t,...i){const r=t;let n,s;if(Object.assign)return Object.assign(t,...i);for(n=0,s=i.length;n<s;n+=1){const a=i[n];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return t}static getBrowserAlias(t){return QW[t]}static getBrowserTypeByAlias(t){return kM[t]||""}}const St=/version\/(\d+(\.?_?\d+)+)/i,ZW=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},i=Y.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},i=Y.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},i=Y.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},i=Y.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},i=Y.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},i=Y.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},i=Y.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},i=Y.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=Y.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},i=Y.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},i=Y.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},i=Y.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},i=Y.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},i=Y.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},i=Y.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},i=Y.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},i=Y.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},i=Y.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},i=Y.getFirstMatch(St,e)||Y.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},i=Y.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},i=Y.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},i=Y.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},i=Y.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},i=Y.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},i=Y.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},i=Y.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},i=Y.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},i=Y.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t={name:"Android Browser"},i=Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},i=Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},i=Y.getFirstMatch(St,e);return i&&(t.version=i),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,n=e.search("\\(")!==-1?i:t;return{name:Y.getFirstMatch(n,e),version:Y.getSecondMatch(n,e)}}}],XW=[{test:[/Roku\/DVP/],describe(e){const t=Y.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:hr.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Y.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:hr.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Y.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=Y.getWindowsVersionName(t);return{name:hr.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:hr.iOS},i=Y.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return i&&(t.version=i),t}},{test:[/macintosh/i],describe(e){const t=Y.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=Y.getMacOSVersionName(t),r={name:hr.MacOS,version:t};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Y.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:hr.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t=Y.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=Y.getAndroidVersionName(t),r={name:hr.Android,version:t};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Y.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:hr.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Y.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Y.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Y.getFirstMatch(/\bbb(\d+)/i,e);return{name:hr.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Y.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:hr.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Y.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:hr.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:hr.Linux}}},{test:[/CrOS/],describe(){return{name:hr.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=Y.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:hr.PlayStation4,version:t}}}],eq=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=Y.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:si.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:si.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:si.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:si.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:si.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:si.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:si.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe(e){const t=Y.getFirstMatch(/(ipod|iphone)/i,e);return{type:si.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:si.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:si.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:si.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:si.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:si.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:si.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:si.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:si.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:si.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:si.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:si.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:si.tv}}}],tq=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Ma.Blink};const i=Y.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ma.EdgeHTML,version:i}}},{test:[/trident/i],describe(e){const t={name:Ma.Trident},i=Y.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Ma.Presto},i=Y.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe(e){const t={name:Ma.Gecko},i=Y.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ma.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Ma.WebKit},i=Y.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];class VP{constructor(t,i=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=Y.find(ZW,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=Y.find(XW,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:i}=this.getOS();return t?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:i}=this.getPlatform();return t?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const t=Y.find(eq,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=Y.find(tq,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Y.assign({},this.parsedResult)}satisfies(t){const i={};let r=0;const n={};let s=0;if(Object.keys(t).forEach(o=>{const c=t[o];typeof c=="string"?(n[o]=c,s+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=Y.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const d=Y.find(o,l=>this.isPlatform(l));if(d){const l=this.satisfies(i[d]);if(l!==void 0)return l}}if(s>0){const o=Object.keys(n),c=Y.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(n[c])}}isBrowser(t,i=!1){const r=this.getBrowserName().toLowerCase();let n=t.toLowerCase();const s=Y.getBrowserTypeByAlias(n);return i&&s&&(n=s.toLowerCase()),n===r}compareVersion(t){let i=[0],r=t,n=!1;const s=this.getBrowserVersion();if(typeof s=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(n=!0,r=t.substr(2)):i=[],t[0]===">"?i.push(1):i.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(n=!0,r=t.substr(1)),i.indexOf(Y.compareVersions(s,r,n))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,i=!1){return this.isBrowser(t,i)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class yS{static getParser(t,i=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new VP(t,i)}static parse(t){return new VP(t).getResult()}static get BROWSER_MAP(){return kM}static get ENGINE_MAP(){return Ma}static get OS_MAP(){return hr}static get PLATFORMS_MAP(){return si}}var PM={},bS={exports:{}},zP=bS.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(zP).forEach(function(e){var t=zP[e];t.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});(function(e){var t=function(o){return String(Number(o))===o?Number(o):o},i=function(o,c,d,l){if(l&&!d)c[l]=t(o[1]);else for(var u=0;u<d.length;u+=1)o[u+1]!=null&&(c[d[u]]=t(o[u+1]))},r=function(o,c,d){var l=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:l&&!c[o.name]&&(c[o.name]={});var u=o.push?{}:l?c[o.name]:c;i(d.match(o.reg),u,o.names,o.name),o.push&&c[o.push].push(u)},n=bS.exports,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var c={},d=[],l=c;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(u){var f=u[0],y=u.slice(2);f==="m"&&(d.push({rtp:[],fmtp:[]}),l=d[d.length-1]);for(var b=0;b<(n[f]||[]).length;b+=1){var k=n[f][b];if(k.reg.test(y))return r(k,l,y)}}),c.media=d,c};var a=function(o,c){var d=c.split(/=(.+)/,2);return d.length===2?o[d[0]]=t(d[1]):d.length===1&&c.length>1&&(o[d[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var c=[],d=o.split(" ").map(t),l=0;l<d.length;l+=3)c.push({component:d[l],ip:d[l+1],port:d[l+2]});return c},e.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(d){var l,u=!1;return d[0]!=="~"?l=t(d):(l=t(d.substring(1,d.length)),u=!0),{scid:l,paused:u}})})}})(PM);var L0=bS.exports,iq=/%[sdv%]/g,rq=function(e){var t=1,i=arguments,r=i.length;return e.replace(iq,function(n){if(t>=r)return n;var s=i[t];switch(t+=1,n){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},Cu=function(e,t,i){var r=t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format,n=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var a=t.names[s];t.name?n.push(i[t.name][a]):n.push(i[t.names[s]])}else n.push(i[t.name]);return rq.apply(null,n)},nq=["v","o","s","i","u","e","p","c","b","t","r","z","a"],sq=["i","c","b","a"],aq=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var i=t.outerOrder||nq,r=t.innerOrder||sq,n=[];return i.forEach(function(s){L0[s].forEach(function(a){a.name in e&&e[a.name]!=null?n.push(Cu(s,a,e)):a.push in e&&e[a.push]!=null&&e[a.push].forEach(function(o){n.push(Cu(s,a,o))})})}),e.media.forEach(function(s){n.push(Cu("m",L0.m[0],s)),r.forEach(function(a){L0[a].forEach(function(o){o.name in s&&s[o.name]!=null?n.push(Cu(a,o,s)):o.push in s&&s[o.push]!=null&&s[o.push].forEach(function(c){n.push(Cu(a,o,c))})})})}),n.join(`\r
`)+`\r
`},Jc=PM,oq=aq,Qn=oq,Ne=Jc.parse,CM=Jc.parseParams;Jc.parseFmtpConfig;Jc.parsePayloads;Jc.parseRemoteCandidates;Jc.parseImageAttributes;var RM=Jc.parseSimulcastStreamList,cq=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Sc="1.4.1",HP=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function dq(e){var t=new Set([e]),i=new Set,r=e.match(HP);if(!r)return function(){return!1};var n={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(n.prerelease!=null)return function(c){return c===e};function s(o){return i.add(o),!1}function a(o){return t.add(o),!0}return function(c){if(t.has(c))return!0;if(i.has(c))return!1;var d=c.match(HP);if(!d)return s(c);var l={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return l.prerelease!=null||n.major!==l.major?s(c):n.major===0?n.minor===l.minor&&n.patch<=l.patch?a(c):s(c):n.minor<=l.minor?a(c):s(c)}}var lq=dq(Sc),uq=Sc.split(".")[0],ah=Symbol.for("opentelemetry.js.api."+uq),oh=cq;function Ah(e,t,i,r){var n;r===void 0&&(r=!1);var s=oh[ah]=(n=oh[ah])!==null&&n!==void 0?n:{version:Sc};if(!r&&s[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return i.error(a.stack||a.message),!1}if(s.version!==Sc){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+Sc);return i.error(a.stack||a.message),!1}return s[e]=t,i.debug("@opentelemetry/api: Registered a global for "+e+" v"+Sc+"."),!0}function $c(e){var t,i,r=(t=oh[ah])===null||t===void 0?void 0:t.version;if(!(!r||!lq(r)))return(i=oh[ah])===null||i===void 0?void 0:i[e]}function Ih(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Sc+".");var i=oh[ah];i&&delete i[e]}var pq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},hq=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},gq=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Ru("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Ru("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Ru("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Ru("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return Ru("verbose",this._namespace,t)},e}();function Ru(e,t,i){var r=$c("diag");if(!!r)return i.unshift(t),r[e].apply(r,hq([],pq(i),!1))}var gt;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(gt||(gt={}));function fq(e,t){e<gt.NONE?e=gt.NONE:e>gt.ALL&&(e=gt.ALL),t=t||{};function i(r,n){var s=t[r];return typeof s=="function"&&e>=n?s.bind(t):function(){}}return{error:i("error",gt.ERROR),warn:i("warn",gt.WARN),info:i("info",gt.INFO),debug:i("debug",gt.DEBUG),verbose:i("verbose",gt.VERBOSE)}}var mq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},vq=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},yq="diag",Os=function(){function e(){function t(n){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var o=$c("diag");if(!!o)return o[n].apply(o,vq([],mq(s),!1))}}var i=this,r=function(n,s){var a,o,c;if(s===void 0&&(s={logLevel:gt.INFO}),n===i){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error((a=d.stack)!==null&&a!==void 0?a:d.message),!1}typeof s=="number"&&(s={logLevel:s});var l=$c("diag"),u=fq((o=s.logLevel)!==null&&o!==void 0?o:gt.INFO,n);if(l&&!s.suppressOverrideMessage){var f=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+f),u.warn("Current logger will overwrite one already registered from "+f)}return Ah("diag",u,i,!0)};i.setLogger=r,i.disable=function(){Ih(yq,i)},i.createComponentLogger=function(n){return new gq(n)},i.verbose=t("verbose"),i.debug=t("debug"),i.info=t("info"),i.warn=t("warn"),i.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),bq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},_q=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wq=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var i=this._entries.get(t);if(!!i)return Object.assign({},i)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var i=bq(t,2),r=i[0],n=i[1];return[r,n]})},e.prototype.setEntry=function(t,i){var r=new e(this._entries);return r._entries.set(t,i),r},e.prototype.removeEntry=function(t){var i=new e(this._entries);return i._entries.delete(t),i},e.prototype.removeEntries=function(){for(var t,i,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=new e(this._entries);try{for(var a=_q(r),o=a.next();!o.done;o=a.next()){var c=o.value;s._entries.delete(c)}}catch(d){t={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),Sq=Symbol("BaggageEntryMetadata"),Eq=Os.instance();function Tq(e){return e===void 0&&(e={}),new wq(new Map(Object.entries(e)))}function xM(e){return typeof e!="string"&&(Eq.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:Sq,toString:function(){return e}}}function _S(e){return Symbol.for(e)}var kq=function(){function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(r){return i._currentContext.get(r)},i.setValue=function(r,n){var s=new e(i._currentContext);return s._currentContext.set(r,n),s},i.deleteValue=function(r){var n=new e(i._currentContext);return n._currentContext.delete(r),n}}return e}(),hn=new kq,zl=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pq=function(){function e(){}return e.prototype.createHistogram=function(t,i){return Lq},e.prototype.createCounter=function(t,i){return Dq},e.prototype.createUpDownCounter=function(t,i){return Nq},e.prototype.createObservableGauge=function(t,i){return jq},e.prototype.createObservableCounter=function(t,i){return Uq},e.prototype.createObservableUpDownCounter=function(t,i){return $q},e.prototype.addBatchObservableCallback=function(t,i){},e.prototype.removeBatchObservableCallback=function(t){},e}(),wS=function(){function e(){}return e}(),Cq=function(e){zl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(i,r){},t}(wS),Rq=function(e){zl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(i,r){},t}(wS),xq=function(e){zl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(i,r){},t}(wS),SS=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),Aq=function(e){zl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(SS),Iq=function(e){zl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(SS),Oq=function(e){zl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(SS),Mq=new Pq,Dq=new Cq,Lq=new xq,Nq=new Rq,Uq=new Aq,jq=new Iq,$q=new Oq,Fq={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},Bq={set:function(e,t,i){e!=null&&(e[t]=i)}},Vq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},zq=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},Hq=function(){function e(){}return e.prototype.active=function(){return hn},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];return i.call.apply(i,zq([r],Vq(n),!1))},e.prototype.bind=function(t,i){return i},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Gq=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},Wq=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},N0="context",qq=new Hq,Nv=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Ah(N0,t,Os.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,i,r){for(var n,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(n=this._getContextManager()).with.apply(n,Wq([t,i,r],Gq(s),!1))},e.prototype.bind=function(t,i){return this._getContextManager().bind(t,i)},e.prototype._getContextManager=function(){return $c(N0)||qq},e.prototype.disable=function(){this._getContextManager().disable(),Ih(N0,Os.instance())},e}(),ha;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ha||(ha={}));var AM="0000000000000000",IM="00000000000000000000000000000000",OM={traceId:IM,spanId:AM,traceFlags:ha.NONE},Ip=function(){function e(t){t===void 0&&(t=OM),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,i){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,i){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,i){},e}(),ES=_S("OpenTelemetry Context Key SPAN");function TS(e){return e.getValue(ES)||void 0}function Jq(){return TS(Nv.getInstance().active())}function kS(e,t){return e.setValue(ES,t)}function Kq(e){return e.deleteValue(ES)}function Yq(e,t){return kS(e,new Ip(t))}function MM(e){var t;return(t=TS(e))===null||t===void 0?void 0:t.spanContext()}var Qq=/^([0-9a-f]{32})$/i,Zq=/^[0-9a-f]{16}$/i;function DM(e){return Qq.test(e)&&e!==IM}function Xq(e){return Zq.test(e)&&e!==AM}function Uv(e){return DM(e.traceId)&&Xq(e.spanId)}function eJ(e){return new Ip(e)}var U0=Nv.getInstance(),LM=function(){function e(){}return e.prototype.startSpan=function(t,i,r){r===void 0&&(r=U0.active());var n=Boolean(i==null?void 0:i.root);if(n)return new Ip;var s=r&&MM(r);return tJ(s)&&Uv(s)?new Ip(s):new Ip},e.prototype.startActiveSpan=function(t,i,r,n){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(s=i,o=r):(s=i,a=r,o=n);var c=a!=null?a:U0.active(),d=this.startSpan(t,s,c),l=kS(c,d);return U0.with(l,o,void 0,d)}},e}();function tJ(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var iJ=new LM,rJ=function(){function e(t,i,r,n){this._provider=t,this.name=i,this.version=r,this.options=n}return e.prototype.startSpan=function(t,i,r){return this._getTracer().startSpan(t,i,r)},e.prototype.startActiveSpan=function(t,i,r,n){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):iJ},e}(),nJ=function(){function e(){}return e.prototype.getTracer=function(t,i,r){return new LM},e}(),sJ=new nJ,GP=function(){function e(){}return e.prototype.getTracer=function(t,i,r){var n;return(n=this.getDelegateTracer(t,i,r))!==null&&n!==void 0?n:new rJ(this,t,i,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:sJ},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,i,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,i,r)},e}(),Im;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Im||(Im={}));var Wb;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Wb||(Wb={}));var qb;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(qb||(qb={}));var Rc=Nv.getInstance(),Ve=Os.instance(),aJ=function(){function e(){}return e.prototype.getMeter=function(t,i,r){return Mq},e}(),oJ=new aJ,j0="metrics",cJ=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return Ah(j0,t,Os.instance())},e.prototype.getMeterProvider=function(){return $c(j0)||oJ},e.prototype.getMeter=function(t,i,r){return this.getMeterProvider().getMeter(t,i,r)},e.prototype.disable=function(){Ih(j0,Os.instance())},e}(),dJ=cJ.getInstance(),lJ=function(){function e(){}return e.prototype.inject=function(t,i){},e.prototype.extract=function(t,i){return t},e.prototype.fields=function(){return[]},e}(),PS=_S("OpenTelemetry Baggage Key");function NM(e){return e.getValue(PS)||void 0}function uJ(){return NM(Nv.getInstance().active())}function pJ(e,t){return e.setValue(PS,t)}function hJ(e){return e.deleteValue(PS)}var $0="propagation",gJ=new lJ,fJ=function(){function e(){this.createBaggage=Tq,this.getBaggage=NM,this.getActiveBaggage=uJ,this.setBaggage=pJ,this.deleteBaggage=hJ}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return Ah($0,t,Os.instance())},e.prototype.inject=function(t,i,r){return r===void 0&&(r=Bq),this._getGlobalPropagator().inject(t,i,r)},e.prototype.extract=function(t,i,r){return r===void 0&&(r=Fq),this._getGlobalPropagator().extract(t,i,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Ih($0,Os.instance())},e.prototype._getGlobalPropagator=function(){return $c($0)||gJ},e}(),cl=fJ.getInstance(),F0="trace",mJ=function(){function e(){this._proxyTracerProvider=new GP,this.wrapSpanContext=eJ,this.isSpanContextValid=Uv,this.deleteSpan=Kq,this.getSpan=TS,this.getActiveSpan=Jq,this.getSpanContext=MM,this.setSpan=kS,this.setSpanContext=Yq}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var i=Ah(F0,this._proxyTracerProvider,Os.instance());return i&&this._proxyTracerProvider.setDelegate(t),i},e.prototype.getTracerProvider=function(){return $c(F0)||this._proxyTracerProvider},e.prototype.getTracer=function(t,i){return this.getTracerProvider().getTracer(t,i)},e.prototype.disable=function(){Ih(F0,Os.instance()),this._proxyTracerProvider=new GP},e}(),Gn=mJ.getInstance();const Tg={context:Rc,diag:Ve,metrics:dJ,propagation:cl,trace:Gn};var UM=_S("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function vJ(e){return e.setValue(UM,!0)}function CS(e){return e.getValue(UM)===!0}var yJ="=",Jb=";",Kb=",",B0="baggage",bJ=180,_J=4096,wJ=8192,SJ=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function EJ(e){return e.reduce(function(t,i){var r=""+t+(t!==""?Kb:"")+i;return r.length>wJ?t:r},"")}function TJ(e){return e.getAllEntries().map(function(t){var i=SJ(t,2),r=i[0],n=i[1],s=encodeURIComponent(r)+"="+encodeURIComponent(n.value);return n.metadata!==void 0&&(s+=Jb+n.metadata.toString()),s})}function kJ(e){var t=e.split(Jb);if(!(t.length<=0)){var i=t.shift();if(!!i){var r=i.split(yJ);if(r.length===2){var n=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim()),a;return t.length>0&&(a=xM(t.join(Jb))),{key:n,value:s,metadata:a}}}}}var PJ=function(){function e(){}return e.prototype.inject=function(t,i,r){var n=cl.getBaggage(t);if(!(!n||CS(t))){var s=TJ(n).filter(function(o){return o.length<=_J}).slice(0,bJ),a=EJ(s);a.length>0&&r.set(i,B0,a)}},e.prototype.extract=function(t,i,r){var n=r.get(i,B0),s=Array.isArray(n)?n.join(Kb):n;if(!s)return t;var a={};if(s.length===0)return t;var o=s.split(Kb);return o.forEach(function(c){var d=kJ(c);if(d){var l={value:d.value};d.metadata&&(l.metadata=d.metadata),a[d.key]=l}}),Object.entries(a).length===0?t:cl.setBaggage(t,cl.createBaggage(a))},e.prototype.fields=function(){return[B0]},e}(),jM=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CJ=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function hf(e){var t,i,r={};if(typeof e!="object"||e==null)return r;try{for(var n=jM(Object.entries(e)),s=n.next();!s.done;s=n.next()){var a=CJ(s.value,2),o=a[0],c=a[1];if(!RJ(o)){Ve.warn("Invalid attribute key: "+o);continue}if(!$M(c)){Ve.warn("Invalid attribute value set for key: "+o);continue}Array.isArray(c)?r[o]=c.slice():r[o]=c}}catch(d){t={error:d}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function RJ(e){return typeof e=="string"&&e.length>0}function $M(e){return e==null?!0:Array.isArray(e)?xJ(e):FM(e)}function xJ(e){var t,i,r;try{for(var n=jM(e),s=n.next();!s.done;s=n.next()){var a=s.value;if(a!=null){if(!r){if(FM(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!0}function FM(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function AJ(){return function(e){Ve.error(IJ(e))}}function IJ(e){return typeof e=="string"?e:JSON.stringify(OJ(e))}function OJ(e){for(var t={},i=e;i!==null;)Object.getOwnPropertyNames(i).forEach(function(r){if(!t[r]){var n=i[r];n&&(t[r]=String(n))}}),i=Object.getPrototypeOf(i);return t}var MJ=AJ();function Om(e){try{MJ(e)}catch{}}var ws;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(ws||(ws={}));var BM=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},DJ=",",LJ=["OTEL_SDK_DISABLED"];function NJ(e){return LJ.indexOf(e)>-1}var UJ=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function jJ(e){return UJ.indexOf(e)>-1}var $J=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function FJ(e){return $J.indexOf(e)>-1}var Yb=1/0,Qb=128,BJ=128,VJ=128,VM={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:gt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Yb,OTEL_ATTRIBUTE_COUNT_LIMIT:Qb,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Yb,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Qb,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:BJ,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:VJ,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:ws.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function zJ(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]=r.toLowerCase()==="true"}}function HJ(e,t,i,r,n){if(r===void 0&&(r=-1/0),n===void 0&&(n=1/0),typeof i[e]<"u"){var s=Number(i[e]);isNaN(s)||(s<r?t[e]=r:s>n?t[e]=n:t[e]=s)}}function GJ(e,t,i,r){r===void 0&&(r=DJ);var n=i[e];typeof n=="string"&&(t[e]=n.split(r).map(function(s){return s.trim()}))}var WJ={ALL:gt.ALL,VERBOSE:gt.VERBOSE,DEBUG:gt.DEBUG,INFO:gt.INFO,WARN:gt.WARN,ERROR:gt.ERROR,NONE:gt.NONE};function qJ(e,t,i){var r=i[e];if(typeof r=="string"){var n=WJ[r.toUpperCase()];n!=null&&(t[e]=n)}}function Zb(e){var t={};for(var i in VM){var r=i;switch(r){case"OTEL_LOG_LEVEL":qJ(r,t,e);break;default:if(NJ(r))zJ(r,t,e);else if(jJ(r))HJ(r,t,e);else if(FJ(r))GJ(r,t,e);else{var n=e[r];typeof n<"u"&&n!==null&&(t[r]=String(n))}}}return t}function JJ(){return typeof process<"u"&&process&&process.env?Zb(process.env):Zb(BM)}function Yr(){var e=Zb(BM);return Object.assign({},VM,e)}var dl=performance,KJ="1.10.0",$o={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},jn={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},YJ={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},dd,V0=(dd={},dd[jn.TELEMETRY_SDK_NAME]="opentelemetry",dd[jn.PROCESS_RUNTIME_NAME]="browser",dd[jn.TELEMETRY_SDK_LANGUAGE]=YJ.WEBJS,dd[jn.TELEMETRY_SDK_VERSION]=KJ,dd),QJ=9,ZJ=6,XJ=Math.pow(10,ZJ),Xb=Math.pow(10,QJ);function Zd(e){var t=e/1e3,i=Math.trunc(t),r=Math.round(e%1e3*XJ);return[i,r]}function zM(){var e=dl.timeOrigin;if(typeof e!="number"){var t=dl;e=t.timing&&t.timing.fetchStart}return e}function eK(e){var t=Zd(zM()),i=Zd(typeof e=="number"?e:dl.now());return GM(t,i)}function tK(e,t){var i=t[0]-e[0],r=t[1]-e[1];return r<0&&(i-=1,r+=Xb),[i,r]}function HM(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function WP(e){return HM(e)||typeof e=="number"||e instanceof Date}function GM(e,t){var i=[e[0]+t[0],e[1]+t[1]];return i[1]>=Xb&&(i[1]-=Xb,i[0]+=1),i}var e_;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(e_||(e_={}));var iK=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rK=function(){function e(t){t===void 0&&(t={});var i;this._propagators=(i=t.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,n){return r.concat(n)},[])))}return e.prototype.inject=function(t,i,r){var n,s;try{for(var a=iK(this._propagators),o=a.next();!o.done;o=a.next()){var c=o.value;try{c.inject(t,i,r)}catch(d){Ve.warn("Failed to inject with "+c.constructor.name+". Err: "+d.message)}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}},e.prototype.extract=function(t,i,r){return this._propagators.reduce(function(n,s){try{return s.extract(n,i,r)}catch(a){Ve.warn("Failed to inject with "+s.constructor.name+". Err: "+a.message)}return n},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),t_="[_0-9a-z-*/]",nK="[a-z]"+t_+"{0,255}",sK="[a-z0-9]"+t_+"{0,240}@[a-z]"+t_+"{0,13}",aK=new RegExp("^(?:"+nK+"|"+sK+")$"),oK=/^[ -~]{0,255}[!-~]$/,cK=/,|=/;function dK(e){return aK.test(e)}function lK(e){return oK.test(e)&&!cK.test(e)}var qP=32,uK=512,JP=",",KP="=",pK=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,i){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,i),r},e.prototype.unset=function(t){var i=this._clone();return i._internalState.delete(t),i},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(i,r){return i.push(r+KP+t.get(r)),i},[]).join(JP)},e.prototype._parse=function(t){t.length>uK||(this._internalState=t.split(JP).reverse().reduce(function(i,r){var n=r.trim(),s=n.indexOf(KP);if(s!==-1){var a=n.slice(0,s),o=n.slice(s+1,r.length);dK(a)&&lK(o)&&i.set(a,o)}return i},new Map),this._internalState.size>qP&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,qP))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),z0="traceparent",H0="tracestate",hK="00",gK="(?!ff)[\\da-f]{2}",fK="(?![0]{32})[\\da-f]{32}",mK="(?![0]{16})[\\da-f]{16}",vK="[\\da-f]{2}",yK=new RegExp("^\\s?("+gK+")-("+fK+")-("+mK+")-("+vK+")(-.*)?\\s?$");function bK(e){var t=yK.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var _K=function(){function e(){}return e.prototype.inject=function(t,i,r){var n=Gn.getSpanContext(t);if(!(!n||CS(t)||!Uv(n))){var s=hK+"-"+n.traceId+"-"+n.spanId+"-0"+Number(n.traceFlags||ha.NONE).toString(16);r.set(i,z0,s),n.traceState&&r.set(i,H0,n.traceState.serialize())}},e.prototype.extract=function(t,i,r){var n=r.get(i,z0);if(!n)return t;var s=Array.isArray(n)?n[0]:n;if(typeof s!="string")return t;var a=bK(s);if(!a)return t;a.isRemote=!0;var o=r.get(i,H0);if(o){var c=Array.isArray(o)?o.join(","):o;a.traceState=new pK(typeof c=="string"?c:void 0)}return Gn.setSpanContext(t,a)},e.prototype.fields=function(){return[z0,H0]},e}(),wK="[object Object]",SK="[object Null]",EK="[object Undefined]",TK=Function.prototype,WM=TK.toString,kK=WM.call(Object),PK=CK(Object.getPrototypeOf,Object),qM=Object.prototype,JM=qM.hasOwnProperty,mc=Symbol?Symbol.toStringTag:void 0,KM=qM.toString;function CK(e,t){return function(i){return e(t(i))}}function YP(e){if(!RK(e)||xK(e)!==wK)return!1;var t=PK(e);if(t===null)return!0;var i=JM.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&WM.call(i)===kK}function RK(e){return e!=null&&typeof e=="object"}function xK(e){return e==null?e===void 0?EK:SK:mc&&mc in Object(e)?AK(e):IK(e)}function AK(e){var t=JM.call(e,mc),i=e[mc],r=!1;try{e[mc]=void 0,r=!0}catch{}var n=KM.call(e);return r&&(t?e[mc]=i:delete e[mc]),n}function IK(e){return KM.call(e)}var OK=20;function MK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=e.shift(),r=new WeakMap;e.length>0;)i=YM(i,e.shift(),0,r);return i}function G0(e){return Mm(e)?e.slice():e}function YM(e,t,i,r){i===void 0&&(i=0);var n;if(!(i>OK)){if(i++,gf(e)||gf(t)||QM(t))n=G0(t);else if(Mm(e)){if(n=e.slice(),Mm(t))for(var s=0,a=t.length;s<a;s++)n.push(G0(t[s]));else if(xu(t))for(var o=Object.keys(t),s=0,a=o.length;s<a;s++){var c=o[s];n[c]=G0(t[c])}}else if(xu(e))if(xu(t)){if(!DK(e,t))return t;n=Object.assign({},e);for(var o=Object.keys(t),s=0,a=o.length;s<a;s++){var c=o[s],d=t[c];if(gf(d))typeof d>"u"?delete n[c]:n[c]=d;else{var l=n[c],u=d;if(QP(e,c,r)||QP(t,c,r))delete n[c];else{if(xu(l)&&xu(u)){var f=r.get(l)||[],y=r.get(u)||[];f.push({obj:e,key:c}),y.push({obj:t,key:c}),r.set(l,f),r.set(u,y)}n[c]=YM(n[c],d,i,r)}}}}else n=t;return n}}function QP(e,t,i){for(var r=i.get(e[t])||[],n=0,s=r.length;n<s;n++){var a=r[n];if(a.key===t&&a.obj===e)return!0}return!1}function Mm(e){return Array.isArray(e)}function QM(e){return typeof e=="function"}function xu(e){return!gf(e)&&!Mm(e)&&!QM(e)&&typeof e=="object"}function gf(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function DK(e,t){return!(!YP(e)||!YP(t))}var LK=function(){function e(){var t=this;this._promise=new Promise(function(i,r){t._resolve=i,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),NK=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},UK=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},jK=function(){function e(t,i){this._callback=t,this._that=i,this._isCalled=!1,this._deferred=new LK}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,UK([this._that],NK(r),!1))).then(function(s){return i._deferred.resolve(s)},function(s){return i._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},e}(),$K="exception",FK=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BK=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},VK=function(){function e(t,i,r,n,s,a,o,c,d){o===void 0&&(o=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:qb.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=n,this.parentSpanId=a,this.kind=s,this.links=o;var l=Date.now();this._performanceStartTime=dl.now(),this._performanceOffset=l-(this._performanceStartTime+zM()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c!=null?c:l),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,i),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,i){return i==null||this._isSpanEnded()?this:t.length===0?(Ve.warn("Invalid attribute key: "+t),this):$M(i)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(i),this):(Ve.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var i,r;try{for(var n=FK(Object.entries(t)),s=n.next();!s.done;s=n.next()){var a=BK(s.value,2),o=a[0],c=a[1];this.setAttribute(o,c)}}catch(d){i={error:d}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return this},e.prototype.addEvent=function(t,i,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return Ve.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(Ve.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),WP(i)&&(WP(r)||(r=i),i=void 0);var n=hf(i);return this.events.push({name:t,attributes:n,time:this._getTime(r),droppedAttributesCount:0}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){Ve.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=tK(this.startTime,this.endTime),this._duration[0]<0&&(Ve.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(t){if(typeof t=="number"&&t<dl.now())return eK(t+this._performanceOffset);if(typeof t=="number")return Zd(t);if(t instanceof Date)return Zd(t.getTime());if(HM(t))return t;if(this._startTimeProvided)return Zd(Date.now());var i=dl.now()-this._performanceStartTime;return GM(this.startTime,Zd(i))},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,i){var r={};typeof t=="string"?r[$o.EXCEPTION_MESSAGE]=t:t&&(t.code?r[$o.EXCEPTION_TYPE]=t.code.toString():t.name&&(r[$o.EXCEPTION_TYPE]=t.name),t.message&&(r[$o.EXCEPTION_MESSAGE]=t.message),t.stack&&(r[$o.EXCEPTION_STACKTRACE]=t.stack)),r[$o.EXCEPTION_TYPE]||r[$o.EXCEPTION_MESSAGE]?this.addEvent($K,r,i):Ve.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&Ve.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,i){return t.length<=i?t:t.substr(0,i)},e.prototype._truncateToSize=function(t){var i=this,r=this._attributeValueLengthLimit;return r<=0?(Ve.warn("Attribute value limit must be positive, got "+r),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(function(n){return typeof n=="string"?i._truncateToLimitUtil(n,r):n}):t},e}(),Rl;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Rl||(Rl={}));var Dm=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Rl.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),ll=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Rl.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),W0=function(){function e(t){var i,r,n,s;this._root=t.root,this._root||(Om(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ll),this._remoteParentSampled=(i=t.remoteParentSampled)!==null&&i!==void 0?i:new ll,this._remoteParentNotSampled=(r=t.remoteParentNotSampled)!==null&&r!==void 0?r:new Dm,this._localParentSampled=(n=t.localParentSampled)!==null&&n!==void 0?n:new ll,this._localParentNotSampled=(s=t.localParentNotSampled)!==null&&s!==void 0?s:new Dm}return e.prototype.shouldSample=function(t,i,r,n,s,a){var o=Gn.getSpanContext(t);return!o||!Uv(o)?this._root.shouldSample(t,i,r,n,s,a):o.isRemote?o.traceFlags&ha.SAMPLED?this._remoteParentSampled.shouldSample(t,i,r,n,s,a):this._remoteParentNotSampled.shouldSample(t,i,r,n,s,a):o.traceFlags&ha.SAMPLED?this._localParentSampled.shouldSample(t,i,r,n,s,a):this._localParentNotSampled.shouldSample(t,i,r,n,s,a)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),ZP=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,i){return{decision:DM(i)&&this._accumulate(i)<this._upperBound?Rl.RECORD_AND_SAMPLED:Rl.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var i=0,r=0;r<t.length/8;r++){var n=r*8,s=parseInt(t.slice(n,n+8),16);i=(i^s)>>>0}return i},e}(),zK=Yr(),HK=ws.AlwaysOn,ld=1;function ZM(){return{sampler:XM(zK),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Yr().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Yr().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Yr().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Yr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Yr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Yr().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:Yr().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:Yr().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function XM(e){switch(e===void 0&&(e=Yr()),e.OTEL_TRACES_SAMPLER){case ws.AlwaysOn:return new ll;case ws.AlwaysOff:return new Dm;case ws.ParentBasedAlwaysOn:return new W0({root:new ll});case ws.ParentBasedAlwaysOff:return new W0({root:new Dm});case ws.TraceIdRatio:return new ZP(XP(e));case ws.ParentBasedTraceIdRatio:return new W0({root:new ZP(XP(e))});default:return Ve.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+HK+'".'),new ll}}function XP(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Ve.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+ld+"."),ld;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Ve.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+ld+"."),ld):t<0||t>1?(Ve.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+ld+"."),ld):t}function GK(e){var t={sampler:XM()},i=ZM(),r=Object.assign({},i,t,e);return r.generalLimits=Object.assign({},i.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},i.spanLimits,e.spanLimits||{}),r}function WK(e){var t,i,r,n,s,a,o,c,d,l,u,f,y=Object.assign({},e.spanLimits),b=JJ();return y.attributeCountLimit=(a=(s=(n=(i=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&i!==void 0?i:(r=e.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&n!==void 0?n:b.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:b.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:Qb,y.attributeValueLengthLimit=(f=(u=(l=(c=(o=e.spanLimits)===null||o===void 0?void 0:o.attributeValueLengthLimit)!==null&&c!==void 0?c:(d=e.generalLimits)===null||d===void 0?void 0:d.attributeValueLengthLimit)!==null&&l!==void 0?l:b.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&u!==void 0?u:b.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:Yb,Object.assign({},e,{spanLimits:y})}var qK=function(){function e(t,i){this._exporter=t,this._finishedSpans=[],this._droppedSpansCount=0;var r=Yr();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new jK(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Ve.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,i){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&ha.SAMPLED)!==0&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Ve.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Ve.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},e.prototype._flushAll=function(){var t=this;return new Promise(function(i,r){for(var n=[],s=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),a=0,o=s;a<o;a++)n.push(t._flushOneBatch());Promise.all(n).then(function(){i()}).catch(r)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(i,r){var n=setTimeout(function(){r(new Error("Timeout"))},t._exportTimeoutMillis);Rc.with(vJ(Rc.active()),function(){var s=t._finishedSpans.splice(0,t._maxExportBatchSize),a=function(){return t._exporter.export(s,function(c){var d;clearTimeout(n),c.code===e_.SUCCESS?i():r((d=c.error)!==null&&d!==void 0?d:new Error("BatchSpanProcessor: span export failed"))})},o=s.map(function(c){return c.resource}).filter(function(c){return c.asyncAttributesPending});o.length===0?a():Promise.all(o.map(function(c){var d;return(d=c.waitForAsyncAttributes)===null||d===void 0?void 0:d.call(c)})).then(a,function(c){Om(c),r(c)})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(i){Om(i)})},this._scheduledDelayMillis),this._timer,void 0)},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),JK=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),e3=function(e){JK(t,e);function t(i,r){var n=e.call(this,i,r)||this;return n.onInit(r),n}return t.prototype.onInit=function(i){var r=this;(i==null?void 0:i.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&r.forceFlush()},this._pageHideListener=function(){r.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(qK),KK=8,YK=16,QK=function(){function e(){this.generateTraceId=e2(YK),this.generateSpanId=e2(KK)}return e}(),kg=Array(32);function e2(e){return function(){for(var i=0;i<e*2;i++)kg[i]=Math.floor(Math.random()*16)+48,kg[i]>=58&&(kg[i]+=39);return String.fromCharCode.apply(null,kg.slice(0,e*2))}}var ZK=function(){function e(t,i,r){this._tracerProvider=r;var n=GK(i);this._sampler=n.sampler,this._generalLimits=n.generalLimits,this._spanLimits=n.spanLimits,this._idGenerator=i.idGenerator||new QK,this.resource=r.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,i,r){var n,s,a;i===void 0&&(i={}),r===void 0&&(r=Rc.active()),i.root&&(r=Gn.deleteSpan(r));var o=Gn.getSpan(r);if(CS(r)){Ve.debug("Instrumentation suppressed, returning Noop Span");var c=Gn.wrapSpanContext(OM);return c}var d=o==null?void 0:o.spanContext(),l=this._idGenerator.generateSpanId(),u,f,y;!d||!Gn.isSpanContextValid(d)?u=this._idGenerator.generateTraceId():(u=d.traceId,f=d.traceState,y=d.spanId);var b=(n=i.kind)!==null&&n!==void 0?n:Wb.INTERNAL,k=((s=i.links)!==null&&s!==void 0?s:[]).map(function(B){return{context:B.context,attributes:hf(B.attributes)}}),P=hf(i.attributes),w=this._sampler.shouldSample(r,u,t,b,P,k);f=(a=w.traceState)!==null&&a!==void 0?a:f;var E=w.decision===Im.RECORD_AND_SAMPLED?ha.SAMPLED:ha.NONE,R={traceId:u,spanId:l,traceFlags:E,traceState:f};if(w.decision===Im.NOT_RECORD){Ve.debug("Recording is off, propagating context in a non-recording span");var c=Gn.wrapSpanContext(R);return c}var D=new VK(this,r,t,R,b,y,k,i.startTime),V=hf(Object.assign(P,w.attributes));return D.setAttributes(V),D},e.prototype.startActiveSpan=function(t,i,r,n){var s,a,o;if(!(arguments.length<2)){arguments.length===2?o=i:arguments.length===3?(s=i,o=r):(s=i,a=r,o=n);var c=a!=null?a:Rc.active(),d=this.startSpan(t,s,c),l=Gn.setSpan(c,d);return Rc.with(l,o,void 0,d)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();function XK(){return"unknown_service"}var Ga=globalThis&&globalThis.__assign||function(){return Ga=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ga.apply(this,arguments)},eY=globalThis&&globalThis.__awaiter||function(e,t,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{d(r.next(l))}catch(u){a(u)}}function c(l){try{d(r.throw(l))}catch(u){a(u)}}function d(l){l.done?s(l.value):n(l.value).then(o,c)}d((r=r.apply(e,t||[])).next())})},tY=globalThis&&globalThis.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],n=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},iY=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},t2=function(){function e(t,i){var r=this;this._attributes=t,this.asyncAttributesPending=i!=null,this._syncAttributes=t,this._asyncAttributesPromise=i==null?void 0:i.then(function(n){return r._attributes=Object.assign({},r._attributes,n),r.asyncAttributesPending=!1,n},function(n){return Ve.debug("a resource's async attributes promise rejected: %s",n),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[jn.SERVICE_NAME]=XK(),t[jn.TELEMETRY_SDK_LANGUAGE]=V0[jn.TELEMETRY_SDK_LANGUAGE],t[jn.TELEMETRY_SDK_NAME]=V0[jn.TELEMETRY_SDK_NAME],t[jn.TELEMETRY_SDK_VERSION]=V0[jn.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){return this.asyncAttributesPending&&Ve.error("Accessing resource attributes before async attributes settled"),this._attributes},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return eY(this,void 0,void 0,function(){return tY(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var i=this,r;if(!t)return this;var n=Ga(Ga({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(a){var o,c=iY(a,2),d=c[0],l=c[1];return Ga(Ga(Ga(Ga({},i._syncAttributes),d),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes),l)});return new e(n,s)},e.EMPTY=new e({}),e}(),Pg=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rY=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,i,r=[];try{for(var n=Pg(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;r.push(a.forceFlush())}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return new Promise(function(o){Promise.all(r).then(function(){o()}).catch(function(c){Om(c||new Error("MultiSpanProcessor: forceFlush failed")),o()})})},e.prototype.onStart=function(t,i){var r,n;try{for(var s=Pg(this._spanProcessors),a=s.next();!a.done;a=s.next()){var o=a.value;o.onStart(t,i)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.onEnd=function(t){var i,r;try{for(var n=Pg(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;a.onEnd(t)}}catch(o){i={error:o}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}},e.prototype.shutdown=function(){var t,i,r=[];try{for(var n=Pg(this._spanProcessors),s=n.next();!s.done;s=n.next()){var a=s.value;r.push(a.shutdown())}}catch(o){t={error:o}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return new Promise(function(o,c){Promise.all(r).then(function(){o()},c)})},e}(),nY=function(){function e(){}return e.prototype.onStart=function(t,i){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),vc;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(vc||(vc={}));var sY=function(){function e(t){t===void 0&&(t={});var i;this._registeredSpanProcessors=[],this._tracers=new Map;var r=MK({},ZM(),WK(t));this.resource=(i=r.resource)!==null&&i!==void 0?i:t2.empty(),this.resource=t2.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var n=this._buildExporterFromEnv();if(n!==void 0){var s=new e3(n);this.activeSpanProcessor=s}else this.activeSpanProcessor=new nY}return e.prototype.getTracer=function(t,i,r){var n=t+"@"+(i||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(n)||this._tracers.set(n,new ZK({name:t,version:i,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(i){return Ve.error("Error while trying to shutdown current span processor",i)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new rY(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),Gn.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Rc.setGlobalContextManager(t.contextManager),t.propagator&&cl.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,i=this._registeredSpanProcessors.map(function(r){return new Promise(function(n){var s,a=setTimeout(function(){n(new Error("Span processor did not completed within timeout period of "+t+" ms")),s=vc.timeout},t);r.forceFlush().then(function(){clearTimeout(a),s!==vc.timeout&&(s=vc.resolved,n(s))}).catch(function(o){clearTimeout(a),s=vc.error,n(o)})})});return new Promise(function(r,n){Promise.all(i).then(function(s){var a=s.filter(function(o){return o!==vc.resolved});a.length>0?n(a):r()}).catch(function(s){return n([s])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var i;return(i=this.constructor._registeredPropagators.get(t))===null||i===void 0?void 0:i()},e.prototype._getSpanExporter=function(t){var i;return(i=this.constructor._registeredExporters.get(t))===null||i===void 0?void 0:i()},e.prototype._buildPropagatorFromEnv=function(){var t=this,i=Array.from(new Set(Yr().OTEL_PROPAGATORS)),r=i.map(function(s){var a=t._getPropagator(s);return a||Ve.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),a}),n=r.reduce(function(s,a){return a&&s.push(a),s},[]);if(n.length!==0)return i.length===1?n[0]:new rK({propagators:n})},e.prototype._buildExporterFromEnv=function(){var t=Yr().OTEL_TRACES_EXPORTER;if(!(t==="none"||t==="")){var i=this._getSpanExporter(t);return i||Ve.error('Exporter "'+t+'" requested through environment variable is unavailable.'),i}},e._registeredPropagators=new Map([["tracecontext",function(){return new _K}],["baggage",function(){return new PJ}]]),e._registeredExporters=new Map,e}(),aY=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},oY=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},t3=function(){function e(){this._enabled=!1,this._currentContext=hn}return e.prototype._bindFunction=function(t,i){t===void 0&&(t=hn);var r=this,n=function(){for(var s=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(t,function(){return i.apply(s,a)})};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),n},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(t,i){return t===void 0&&(t=this.active()),typeof i=="function"?this._bindFunction(t,i):i},e.prototype.disable=function(){return this._currentContext=hn,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=hn,this)},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._currentContext;this._currentContext=t||hn;try{return i.call.apply(i,oY([r],aY(n),!1))}finally{this._currentContext=a}},e}(),cY=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),dY=function(e){cY(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;if(i.contextManager)throw"contextManager should be defined in register method not in constructor";if(i.propagator)throw"propagator should be defined in register method not in constructor";return r}return t.prototype.register=function(i){i===void 0&&(i={}),i.contextManager===void 0&&(i.contextManager=new t3),i.contextManager&&i.contextManager.enable(),e.prototype.register.call(this,i)},t}(sY),lY="=",i2=";",uY=",";globalThis&&globalThis.__read;function pY(e){var t=e.split(i2);if(!(t.length<=0)){var i=t.shift();if(!!i){var r=i.split(lY);if(r.length===2){var n=decodeURIComponent(r[0].trim()),s=decodeURIComponent(r[1].trim()),a;return t.length>0&&(a=xM(t.join(i2))),{key:n,value:s,metadata:a}}}}}function i3(e){return typeof e!="string"||e.length===0?{}:e.split(uY).map(function(t){return pY(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,i){return t[i.key]=i.value,t},{})}var i_;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(i_||(i_={}));var hY=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},gY=",",fY=["OTEL_SDK_DISABLED"];function mY(e){return fY.indexOf(e)>-1}var vY=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function yY(e){return vY.indexOf(e)>-1}var bY=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function _Y(e){return bY.indexOf(e)>-1}var r2=1/0,n2=128,wY=128,SY=128,r3={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:gt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:r2,OTEL_ATTRIBUTE_COUNT_LIMIT:n2,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:r2,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:n2,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:wY,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:SY,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:i_.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function EY(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]=r.toLowerCase()==="true"}}function TY(e,t,i,r,n){if(r===void 0&&(r=-1/0),n===void 0&&(n=1/0),typeof i[e]<"u"){var s=Number(i[e]);isNaN(s)||(s<r?t[e]=r:s>n?t[e]=n:t[e]=s)}}function kY(e,t,i,r){r===void 0&&(r=gY);var n=i[e];typeof n=="string"&&(t[e]=n.split(r).map(function(s){return s.trim()}))}var PY={ALL:gt.ALL,VERBOSE:gt.VERBOSE,DEBUG:gt.DEBUG,INFO:gt.INFO,WARN:gt.WARN,ERROR:gt.ERROR,NONE:gt.NONE};function CY(e,t,i){var r=i[e];if(typeof r=="string"){var n=PY[r.toUpperCase()];n!=null&&(t[e]=n)}}function RY(e){var t={};for(var i in r3){var r=i;switch(r){case"OTEL_LOG_LEVEL":CY(r,t,e);break;default:if(mY(r))EY(r,t,e);else if(yY(r))TY(r,t,e);else if(_Y(r))kY(r,t,e);else{var n=e[r];typeof n<"u"&&n!==null&&(t[r]=String(n))}}}return t}function Ya(){var e=RY(hY);return Object.assign({},r3,e)}function Op(e){for(var t=e.length,i="",r=0;r<t;r+=2){var n=e.substring(r,r+2),s=parseInt(n,16);i+=String.fromCharCode(s)}return btoa(i)}var xY=9,AY=Math.pow(10,xY);function r_(e){return e[0]*AY+e[1]}var Xd;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(Xd||(Xd={}));var IY=function(){function e(){var t=this;this._promise=new Promise(function(i,r){t._resolve=i,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),OY=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},MY=globalThis&&globalThis.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,n=t.length,s;r<n;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},DY=function(){function e(t,i){this._callback=t,this._that=i,this._isCalled=!1,this._deferred=new IY}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,i=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,MY([this._that],OY(r),!1))).then(function(s){return i._deferred.resolve(s)},function(s){return i._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},e}(),LY=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},n3=1e4,NY=5,UY=1e3,jY=5e3,$Y=1.5;function FY(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(i){var r=LY(i,2),n=r[0],s=r[1];typeof s<"u"?t[n]=String(s):Ve.warn('Header "'+n+'" has wrong value and will be ignored')}),t}function BY(e,t){return e.endsWith("/")||(e=e+"/"),e+t}function VY(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return Ve.warn("Could not parse export URL: '"+e+"'"),e}}function zY(e){return typeof e=="number"?e<=0?s3(e,n3):e:HY()}function HY(){var e,t=Number((e=Ya().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:Ya().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?s3(t,n3):t}function s3(e,t){return Ve.warn("Timeout must be greater than 0",e),t}function GY(e){var t=[429,502,503,504];return t.includes(e)}function WY(e){if(e==null)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;var i=new Date(e).getTime()-Date.now();return i>=0?i:0}var qY=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new DY(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=zY(t.timeoutMillis),this.onInit(t)}return e.prototype.export=function(t,i){if(this._shutdownOnce.isCalled){i({code:Xd.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){i({code:Xd.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){i({code:Xd.SUCCESS})}).catch(function(r){i({code:Xd.FAILED,error:r})})},e.prototype._export=function(t){var i=this;return new Promise(function(r,n){try{Ve.debug("items to be sent",t),i.send(t,r,n)}catch(s){n(s)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return Ve.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},e}(),JY=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ep=function(e){JY(t,e);function t(i,r,n){var s=e.call(this,i)||this;return s.name="OTLPExporterError",s.data=n,s.code=r,s}return t}(Error),Lm=globalThis&&globalThis.__assign||function(){return Lm=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Lm.apply(this,arguments)},KY=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function YY(e,t,i,r,n){if(navigator.sendBeacon(t,new Blob([e],i)))Ve.debug("sendBeacon - can send",e),r();else{var s=new ep("sendBeacon - cannot send "+e);n(s)}}function QY(e,t,i,r,n,s){var a,o,c=!1,d=setTimeout(function(){if(clearTimeout(a),c=!0,o.readyState===XMLHttpRequest.DONE){var u=new ep("Request Timeout");s(u)}else o.abort()},r),l=function(u,f){u===void 0&&(u=NY),f===void 0&&(f=UY),o=new XMLHttpRequest,o.open("POST",t);var y={Accept:"application/json","Content-Type":"application/json"};Object.entries(Lm(Lm({},y),i)).forEach(function(b){var k=KY(b,2),P=k[0],w=k[1];o.setRequestHeader(P,w)}),o.send(e),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE&&c===!1)if(o.status>=200&&o.status<=299)Ve.debug("xhr success",e),n(),clearTimeout(d),clearTimeout(a);else if(o.status&&GY(o.status)&&u>0){var b=void 0;f=$Y*f,o.getResponseHeader("Retry-After")?b=WY(o.getResponseHeader("Retry-After")):b=Math.round(Math.random()*(jY-f)+f),a=setTimeout(function(){l(u-1,f)},b)}else{var k=new ep("Failed to export with XHR (status: "+o.status+")",o.status);s(k),clearTimeout(d),clearTimeout(a)}},o.onabort=function(){if(c){var b=new ep("Request Timeout");s(b)}clearTimeout(d),clearTimeout(a)},o.onerror=function(){if(c){var b=new ep("Request Timeout");s(b)}clearTimeout(d),clearTimeout(a)}};l()}var ZY=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),XY=function(e){ZY(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;return r._useXHR=!1,r._useXHR=!!i.headers||typeof navigator.sendBeacon!="function",r._useXHR?r._headers=Object.assign({},FY(i.headers),i3(Ya().OTEL_EXPORTER_OTLP_HEADERS)):r._headers={},r}return t.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},t.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},t.prototype.send=function(i,r,n){var s=this;if(this._shutdownOnce.isCalled){Ve.debug("Shutdown already started. Cannot send objects");return}var a=this.convert(i),o=JSON.stringify(a),c=new Promise(function(l,u){s._useXHR?QY(o,s.url,s._headers,s.timeoutMillis,l,u):YY(o,s.url,{type:"application/json"},l,u)}).then(r,n);this._sendingPromises.push(c);var d=function(){var l=s._sendingPromises.indexOf(c);s._sendingPromises.splice(l,1)};c.then(d,d)},t}(qY),eQ=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function jv(e){return Object.keys(e).map(function(t){return a3(t,e[t])})}function a3(e,t){return{key:e,value:o3(t)}}function o3(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(o3)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(i){var r=eQ(i,2),n=r[0],s=r[1];return a3(n,s)})}}:{}}function tQ(e,t){var i,r=e.spanContext(),n=e.status,s=t?e.parentSpanId:e.parentSpanId!=null?Op(e.parentSpanId):void 0;return{traceId:t?r.traceId:Op(r.traceId),spanId:t?r.spanId:Op(r.spanId),parentSpanId:s,traceState:(i=r.traceState)===null||i===void 0?void 0:i.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:r_(e.startTime),endTimeUnixNano:r_(e.endTime),attributes:jv(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(rQ),droppedEventsCount:e.droppedEventsCount,status:{code:n.code,message:n.message},links:e.links.map(function(a){return iQ(a,t)}),droppedLinksCount:e.droppedLinksCount}}function iQ(e,t){var i;return{attributes:e.attributes?jv(e.attributes):[],spanId:t?e.context.spanId:Op(e.context.spanId),traceId:t?e.context.traceId:Op(e.context.traceId),traceState:(i=e.context.traceState)===null||i===void 0?void 0:i.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}function rQ(e){return{attributes:e.attributes?jv(e.attributes):[],name:e.name,timeUnixNano:r_(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var nQ=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sQ=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s};function aQ(e,t){return{resourceSpans:cQ(e,t)}}function oQ(e){var t,i,r=new Map;try{for(var n=nQ(e),s=n.next();!s.done;s=n.next()){var a=s.value,o=r.get(a.resource);o||(o=new Map,r.set(a.resource,o));var c=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),d=o.get(c);d||(d=[],o.set(c,d)),d.push(a)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function cQ(e,t){for(var i=oQ(e),r=[],n=i.entries(),s=n.next();!s.done;){for(var a=sQ(s.value,2),o=a[0],c=a[1],d=[],l=c.values(),u=l.next();!u.done;){var f=u.value;if(f.length>0){var y=f[0].instrumentationLibrary,b=y.name,k=y.version,P=y.schemaUrl,w=f.map(function(R){return tQ(R,t)});d.push({scope:{name:b,version:k},spans:w,schemaUrl:P})}u=l.next()}var E={resource:{attributes:jv(o.attributes),droppedAttributesCount:0},scopeSpans:d,schemaUrl:void 0};r.push(E),s=n.next()}return r}var dQ=globalThis&&globalThis.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),c3="v1/traces",lQ="http://localhost:4318/"+c3,uQ=function(e){dQ(t,e);function t(i){i===void 0&&(i={});var r=e.call(this,i)||this;return r._headers=Object.assign(r._headers,i3(Ya().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),r}return t.prototype.convert=function(i){return aQ(i,!0)},t.prototype.getDefaultUrl=function(i){return typeof i.url=="string"?i.url:Ya().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?VY(Ya().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):Ya().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?BY(Ya().OTEL_EXPORTER_OTLP_ENDPOINT,c3):lQ},t}(XY);function pQ(e){return e===void 0&&(e={}),typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"}var s2="OT_ZONE_CONTEXT",hQ=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(t){return t&&t.get(s2)||hn},e.prototype._bindFunction=function(t,i){var r=this,n=function(){for(var s=this,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return r.with(t,function(){return i.apply(s,a)})};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:i.length}),n},e.prototype._bindListener=function(t,i){var r=i;return r.__ot_listeners!==void 0||(r.__ot_listeners={},typeof r.addEventListener=="function"&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,t)),typeof r.removeEventListener=="function"&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),i},e.prototype._createZoneName=function(){this._zoneCounter++;var t=Math.random();return this._zoneCounter+"-"+t},e.prototype._createZone=function(t,i){var r;return Zone.current.fork({name:t,properties:(r={},r[s2]=i,r)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(t,i,r){var n=this;return function(s,a,o){t.__ot_listeners===void 0&&(t.__ot_listeners={});var c=t.__ot_listeners[s];c===void 0&&(c=new WeakMap,t.__ot_listeners[s]=c);var d=n.bind(r,a);return c.set(a,d),i.call(this,s,d,o)}},e.prototype._patchRemoveEventListener=function(t,i){return function(r,n){if(t.__ot_listeners===void 0||t.__ot_listeners[r]===void 0)return i.call(this,r,n);var s=t.__ot_listeners[r],a=s.get(n);return s.delete(n),i.call(this,r,a||n)}},e.prototype.active=function(){if(!this._enabled)return hn;var t=this._getActiveZone(),i=this._activeContextFromZone(t);return i||hn},e.prototype.bind=function(t,i){return t===void 0&&(t=this.active()),typeof i=="function"?this._bindFunction(t,i):(pQ(i)&&this._bindListener(t,i),i)},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(t,i,r){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var a=this._createZoneName(),o=this._createZone(a,t);return o.run(i,r,n)},e}(),$n={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},gQ={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},fQ="1.13.0",ud,q0=(ud={},ud[$n.TELEMETRY_SDK_NAME]="opentelemetry",ud[$n.PROCESS_RUNTIME_NAME]="browser",ud[$n.TELEMETRY_SDK_LANGUAGE]=gQ.WEBJS,ud[$n.TELEMETRY_SDK_VERSION]=fQ,ud);function mQ(){return"unknown_service"}var Wa=globalThis&&globalThis.__assign||function(){return Wa=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Wa.apply(this,arguments)},vQ=globalThis&&globalThis.__awaiter||function(e,t,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(l){try{d(r.next(l))}catch(u){a(u)}}function c(l){try{d(r.throw(l))}catch(u){a(u)}}function d(l){l.done?s(l.value):n(l.value).then(o,c)}d((r=r.apply(e,t||[])).next())})},yQ=globalThis&&globalThis.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){i.label=d[1];break}if(d[0]===6&&i.label<s[1]){i.label=s[1],s=d;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(d);break}s[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(l){d=[6,l],n=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},bQ=globalThis&&globalThis.__read||function(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s},_Q=function(){function e(t,i){var r=this,n;this._attributes=t,this.asyncAttributesPending=i!=null,this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{},this._asyncAttributesPromise=i==null?void 0:i.then(function(s){return r._attributes=Object.assign({},r._attributes,s),r.asyncAttributesPending=!1,s},function(s){return Ve.debug("a resource's async attributes promise rejected: %s",s),r.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[$n.SERVICE_NAME]=mQ(),t[$n.TELEMETRY_SDK_LANGUAGE]=q0[$n.TELEMETRY_SDK_LANGUAGE],t[$n.TELEMETRY_SDK_NAME]=q0[$n.TELEMETRY_SDK_NAME],t[$n.TELEMETRY_SDK_VERSION]=q0[$n.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&Ve.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return vQ(this,void 0,void 0,function(){return yQ(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var i=this,r;if(!t)return this;var n=Wa(Wa({},this._syncAttributes),(r=t._syncAttributes)!==null&&r!==void 0?r:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var s=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(a){var o,c=bQ(a,2),d=c[0],l=c[1];return Wa(Wa(Wa(Wa({},i._syncAttributes),d),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes),l)});return new e(n,s)},e.EMPTY=new e({}),e}();function RS(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function wQ(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}let Zs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),$v=[];for(let e=0;e<Zs.length;e++)$v[Zs[e].charCodeAt(0)]=e;$v["-".charCodeAt(0)]=Zs.indexOf("+");$v["_".charCodeAt(0)]=Zs.indexOf("/");function SQ(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let i=new Uint8Array(t),r=0,n=0,s,a=0;for(let o=0;o<e.length;o++){if(s=$v[e.charCodeAt(o)],s===void 0)switch(e[o]){case"=":n=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(n){case 0:a=s,n=1;break;case 1:i[r++]=a<<2|(s&48)>>4,a=s,n=2;break;case 2:i[r++]=(a&15)<<4|(s&60)>>2,a=s,n=3;break;case 3:i[r++]=(a&3)<<6|s,n=0;break}}if(n==1)throw Error("invalid base64 string.");return i.subarray(0,r)}function EQ(e){let t="",i=0,r,n=0;for(let s=0;s<e.length;s++)switch(r=e[s],i){case 0:t+=Zs[r>>2],n=(r&3)<<4,i=1;break;case 1:t+=Zs[n|r>>4],n=(r&15)<<2,i=2;break;case 2:t+=Zs[n|r>>6],t+=Zs[r&63],i=0;break}return i&&(t+=Zs[n],t+="=",i==1&&(t+="=")),t}var Nm;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(i,r,n,s,a)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:n,wireType:s,data:a})},e.onWrite=(i,r,n)=>{for(let{no:s,wireType:a,data:o}of e.list(r))n.tag(s,a).raw(o)},e.list=(i,r)=>{if(t(i)){let n=i[e.symbol];return r?n.filter(s=>s.no==r):n}return[]},e.last=(i,r)=>e.list(i,r).slice(-1)[0];const t=i=>i&&Array.isArray(i[e.symbol])})(Nm||(Nm={}));var ci;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(ci||(ci={}));function TQ(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(n&127)<<r,(n&128)==0)return this.assertBounds(),[e,t]}let i=this.buf[this.pos++];if(e|=(i&15)<<28,t=(i&112)>>4,(i&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(n&127)<<r,(n&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function J0(e,t,i){for(let s=0;s<28;s=s+7){const a=e>>>s,o=!(a>>>7==0&&t==0),c=(o?a|128:a)&255;if(i.push(c),!o)return}const r=e>>>28&15|(t&7)<<4,n=t>>3!=0;if(i.push((n?r|128:r)&255),!!n){for(let s=3;s<31;s=s+7){const a=t>>>s,o=a>>>7!=0,c=(o?a|128:a)&255;if(i.push(c),!o)return}i.push(t>>>31&1)}}const ff=(1<<16)*(1<<16);function d3(e){let t=e[0]=="-";t&&(e=e.slice(1));const i=1e6;let r=0,n=0;function s(a,o){const c=Number(e.slice(a,o));n*=i,r=r*i+c,r>=ff&&(n=n+(r/ff|0),r=r%ff)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,n]}function n_(e,t){if(t<=2097151)return""+(ff*t+(e>>>0));let i=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,n=t>>16&65535,s=i+r*6777216+n*6710656,a=r+n*8147497,o=n*2,c=1e7;s>=c&&(a+=Math.floor(s/c),s%=c),a>=c&&(o+=Math.floor(a/c),a%=c);function d(l,u){let f=l?String(l):"";return u?"0000000".slice(f.length)+f:f}return d(o,0)+d(a,o)+d(s,1)}function a2(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let i=0;i<9;i++)t.push(e&127|128),e=e>>7;t.push(1)}}function kQ(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let i=5;(e&128)!==0&&i<10;i++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function PQ(){const e=new DataView(new ArrayBuffer(8));return globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}const Rt=PQ();function l3(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const u3=/^-?[0-9]+$/,Um=(1<<16)*(1<<16);class p3{constructor(t,i){this.lo=t|0,this.hi=i|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let t=this.hi*Um+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}}class or extends p3{static from(t){if(Rt)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=Rt.C(t);case"number":if(t===0)return this.ZERO;t=Rt.C(t);case"bigint":if(!t)return this.ZERO;if(t<Rt.UMIN)throw new Error("signed value for ulong");if(t>Rt.UMAX)throw new Error("ulong too large");return Rt.V.setBigUint64(0,t,!0),new or(Rt.V.getInt32(0,!0),Rt.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!u3.test(t))throw new Error("string is no integer");let[i,r,n]=d3(t);if(i)throw new Error("signed value");return new or(r,n);case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new or(t,t/Um)}throw new Error("unknown value "+typeof t)}toString(){return Rt?this.toBigInt().toString():n_(this.lo,this.hi)}toBigInt(){return l3(Rt),Rt.V.setInt32(0,this.lo,!0),Rt.V.setInt32(4,this.hi,!0),Rt.V.getBigUint64(0,!0)}}or.ZERO=new or(0,0);class At extends p3{static from(t){if(Rt)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=Rt.C(t);case"number":if(t===0)return this.ZERO;t=Rt.C(t);case"bigint":if(!t)return this.ZERO;if(t<Rt.MIN)throw new Error("ulong too small");if(t>Rt.MAX)throw new Error("ulong too large");return Rt.V.setBigInt64(0,t,!0),new At(Rt.V.getInt32(0,!0),Rt.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!u3.test(t))throw new Error("string is no integer");let[i,r,n]=d3(t),s=new At(r,n);return i?s.negate():s;case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new At(t,t/Um):new At(-t,-t/Um).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return(this.hi&2147483648)!==0}negate(){let t=~this.hi,i=this.lo;return i?i=~i+1:t+=1,new At(i,t)}toString(){if(Rt)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+n_(t.lo,t.hi)}return n_(this.lo,this.hi)}toBigInt(){return l3(Rt),Rt.V.setInt32(0,this.lo,!0),Rt.V.setInt32(4,this.hi,!0),Rt.V.getBigInt64(0,!0)}}At.ZERO=new At(0,0);const o2={readUnknownField:!0,readerFactory:e=>new RQ(e)};function CQ(e){return e?Object.assign(Object.assign({},o2),e):o2}class RQ{constructor(t,i){this.varint64=TQ,this.uint32=kQ,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=i!=null?i:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let t=this.uint32(),i=t>>>3,r=t&7;if(i<=0||r<0||r>5)throw new Error("illegal tag: field no "+i+" wire type "+r);return[i,r]}skip(t){let i=this.pos;switch(t){case ci.Varint:for(;this.buf[this.pos++]&128;);break;case ci.Bit64:this.pos+=4;case ci.Bit32:this.pos+=4;break;case ci.LengthDelimited:let r=this.uint32();this.pos+=r;break;case ci.StartGroup:let n;for(;(n=this.tag()[1])!==ci.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return new At(...this.varint64())}uint64(){return new or(...this.varint64())}sint64(){let[t,i]=this.varint64(),r=-(t&1);return t=(t>>>1|(i&1)<<31)^r,i=i>>>1^r,new At(t,i)}bool(){let[t,i]=this.varint64();return t!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new or(this.sfixed32(),this.sfixed32())}sfixed64(){return new At(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),i=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(i,i+t)}string(){return this.textDecoder.decode(this.bytes())}}function lt(e,t){if(!e)throw new Error(t)}const xQ=34028234663852886e22,AQ=-34028234663852886e22,IQ=4294967295,OQ=2147483647,MQ=-2147483648;function Mp(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>OQ||e<MQ)throw new Error("invalid int 32: "+e)}function jm(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>IQ||e<0)throw new Error("invalid uint 32: "+e)}function xS(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(!!Number.isFinite(e)&&(e>xQ||e<AQ))throw new Error("invalid float 32: "+e)}const c2={writeUnknownFields:!0,writerFactory:()=>new LQ};function DQ(e){return e?Object.assign(Object.assign({},c2),e):c2}class LQ{constructor(t){this.stack=[],this.textEncoder=t!=null?t:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let n=0;n<this.chunks.length;n++)t+=this.chunks[n].length;let i=new Uint8Array(t),r=0;for(let n=0;n<this.chunks.length;n++)i.set(this.chunks[n],r),r+=this.chunks[n].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,i){return this.uint32((t<<3|i)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(jm(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Mp(t),a2(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let i=this.textEncoder.encode(t);return this.uint32(i.byteLength),this.raw(i)}float(t){xS(t);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,t,!0),this.raw(i)}double(t){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,t,!0),this.raw(i)}fixed32(t){jm(t);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,t,!0),this.raw(i)}sfixed32(t){Mp(t);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,t,!0),this.raw(i)}sint32(t){return Mp(t),t=(t<<1^t>>31)>>>0,a2(t,this.buf),this}sfixed64(t){let i=new Uint8Array(8),r=new DataView(i.buffer),n=At.from(t);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(i)}fixed64(t){let i=new Uint8Array(8),r=new DataView(i.buffer),n=or.from(t);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(i)}int64(t){let i=At.from(t);return J0(i.lo,i.hi,this.buf),this}sint64(t){let i=At.from(t),r=i.hi>>31,n=i.lo<<1^r,s=(i.hi<<1|i.lo>>>31)^r;return J0(n,s,this.buf),this}uint64(t){let i=or.from(t);return J0(i.lo,i.hi,this.buf),this}}const d2={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},l2={ignoreUnknownFields:!1};function NQ(e){return e?Object.assign(Object.assign({},l2),e):l2}function UQ(e){return e?Object.assign(Object.assign({},d2),e):d2}const jQ=Symbol.for("protobuf-ts/message-type");function u2(e){let t=!1;const i=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);n=="_"?t=!0:/\d/.test(n)?(i.push(n),t=!0):t?(i.push(n.toUpperCase()),t=!1):r==0?i.push(n.toLowerCase()):i.push(n)}return i.join("")}var G;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(G||(G={}));var Rs;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"})(Rs||(Rs={}));var $m;(function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"})($m||($m={}));function $Q(e){var t,i,r,n;return e.localName=(t=e.localName)!==null&&t!==void 0?t:u2(e.name),e.jsonName=(i=e.jsonName)!==null&&i!==void 0?i:u2(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:$m.NO,e.opt=(n=e.opt)!==null&&n!==void 0?n:e.repeat||e.oneof?!1:e.kind=="message",e}function FQ(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}class BQ{constructor(t){var i;this.fields=(i=t.fields)!==null&&i!==void 0?i:[]}prepare(){if(this.data)return;const t=[],i=[],r=[];for(let n of this.fields)if(n.oneof)r.includes(n.oneof)||(r.push(n.oneof),t.push(n.oneof),i.push(n.oneof));else switch(i.push(n.localName),n.kind){case"scalar":case"enum":(!n.opt||n.repeat)&&t.push(n.localName);break;case"message":n.repeat&&t.push(n.localName);break;case"map":t.push(n.localName);break}this.data={req:t,known:i,oneofs:Object.values(r)}}is(t,i,r=!1){if(i<0)return!0;if(t==null||typeof t!="object")return!1;this.prepare();let n=Object.keys(t),s=this.data;if(n.length<s.req.length||s.req.some(a=>!n.includes(a))||!r&&n.some(a=>!s.known.includes(a)))return!1;if(i<1)return!0;for(const a of s.oneofs){const o=t[a];if(!FQ(o))return!1;if(o.oneofKind===void 0)continue;const c=this.fields.find(d=>d.localName===o.oneofKind);if(!c||!this.field(o[o.oneofKind],c,r,i))return!1}for(const a of this.fields)if(a.oneof===void 0&&!this.field(t[a.localName],a,r,i))return!1;return!0}field(t,i,r,n){let s=i.repeat;switch(i.kind){case"scalar":return t===void 0?i.opt:s?this.scalars(t,i.T,n,i.L):this.scalar(t,i.T,i.L);case"enum":return t===void 0?i.opt:s?this.scalars(t,G.INT32,n):this.scalar(t,G.INT32);case"message":return t===void 0?!0:s?this.messages(t,i.T(),r,n):this.message(t,i.T(),r,n);case"map":if(typeof t!="object"||t===null)return!1;if(n<2)return!0;if(!this.mapKeys(t,i.K,n))return!1;switch(i.V.kind){case"scalar":return this.scalars(Object.values(t),i.V.T,n,i.V.L);case"enum":return this.scalars(Object.values(t),G.INT32,n);case"message":return this.messages(Object.values(t),i.V.T(),r,n)}break}return!0}message(t,i,r,n){return r?i.isAssignable(t,n):i.is(t,n)}messages(t,i,r,n){if(!Array.isArray(t))return!1;if(n<2)return!0;if(r){for(let s=0;s<t.length&&s<n;s++)if(!i.isAssignable(t[s],n-1))return!1}else for(let s=0;s<t.length&&s<n;s++)if(!i.is(t[s],n-1))return!1;return!0}scalar(t,i,r){let n=typeof t;switch(i){case G.UINT64:case G.FIXED64:case G.INT64:case G.SFIXED64:case G.SINT64:switch(r){case Rs.BIGINT:return n=="bigint";case Rs.NUMBER:return n=="number"&&!isNaN(t);default:return n=="string"}case G.BOOL:return n=="boolean";case G.STRING:return n=="string";case G.BYTES:return t instanceof Uint8Array;case G.DOUBLE:case G.FLOAT:return n=="number"&&!isNaN(t);default:return n=="number"&&Number.isInteger(t)}}scalars(t,i,r,n){if(!Array.isArray(t))return!1;if(r<2)return!0;if(Array.isArray(t)){for(let s=0;s<t.length&&s<r;s++)if(!this.scalar(t[s],i,n))return!1}return!0}mapKeys(t,i,r){let n=Object.keys(t);switch(i){case G.INT32:case G.FIXED32:case G.SFIXED32:case G.SINT32:case G.UINT32:return this.scalars(n.slice(0,r).map(s=>parseInt(s)),i,r);case G.BOOL:return this.scalars(n.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),i,r);default:return this.scalars(n,i,r,Rs.STRING)}}}function Jn(e,t){switch(t){case Rs.BIGINT:return e.toBigInt();case Rs.NUMBER:return e.toNumber();default:return e.toString()}}class VQ{constructor(t){this.info=t}prepare(){var t;if(this.fMap===void 0){this.fMap={};const i=(t=this.info.fields)!==null&&t!==void 0?t:[];for(const r of i)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(t,i,r){if(!t){let n=RS(r);throw(n=="number"||n=="boolean")&&(n=r.toString()),new Error(`Cannot parse JSON ${n} for ${this.info.typeName}#${i}`)}}read(t,i,r){this.prepare();const n=[];for(const[s,a]of Object.entries(t)){const o=this.fMap[s];if(!o){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const c=o.localName;let d;if(o.oneof){if(n.includes(o.oneof))throw new Error(`Multiple members of the oneof group "${o.oneof}" of ${this.info.typeName} are present in JSON.`);n.push(o.oneof),d=i[o.oneof]={oneofKind:c}}else d=i;if(o.kind=="map"){if(a===null)continue;this.assert(wQ(a),o.name,a);const l=d[c];for(const[u,f]of Object.entries(a)){this.assert(f!==null,o.name+" map value",null);let y;switch(o.V.kind){case"message":y=o.V.T().internalJsonRead(f,r);break;case"enum":if(y=this.enum(o.V.T(),f,o.name,r.ignoreUnknownFields),y===!1)continue;break;case"scalar":y=this.scalar(f,o.V.T,o.V.L,o.name);break}this.assert(y!==void 0,o.name+" map value",f);let b=u;o.K==G.BOOL&&(b=b=="true"?!0:b=="false"?!1:b),b=this.scalar(b,o.K,Rs.STRING,o.name).toString(),l[b]=y}}else if(o.repeat){if(a===null)continue;this.assert(Array.isArray(a),o.name,a);const l=d[c];for(const u of a){this.assert(u!==null,o.name,null);let f;switch(o.kind){case"message":f=o.T().internalJsonRead(u,r);break;case"enum":if(f=this.enum(o.T(),u,o.name,r.ignoreUnknownFields),f===!1)continue;break;case"scalar":f=this.scalar(u,o.T,o.L,o.name);break}this.assert(f!==void 0,o.name,a),l.push(f)}}else switch(o.kind){case"message":if(a===null&&o.T().typeName!="google.protobuf.Value"){this.assert(o.oneof===void 0,o.name+" (oneof member)",null);continue}d[c]=o.T().internalJsonRead(a,r,d[c]);break;case"enum":let l=this.enum(o.T(),a,o.name,r.ignoreUnknownFields);if(l===!1)continue;d[c]=l;break;case"scalar":d[c]=this.scalar(a,o.T,o.L,o.name);break}}}enum(t,i,r,n){if(t[0]=="google.protobuf.NullValue"&&lt(i===null,`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} only accepts null.`),i===null)return 0;switch(typeof i){case"number":return lt(Number.isInteger(i),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${i}.`),i;case"string":let s=i;t[2]&&i.substring(0,t[2].length)===t[2]&&(s=i.substring(t[2].length));let a=t[1][s];return typeof a>"u"&&n?!1:(lt(typeof a=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} has no value for "${i}".`),a)}lt(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof i}".`)}scalar(t,i,r,n){let s;try{switch(i){case G.DOUBLE:case G.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""){s="empty string";break}if(typeof t=="string"&&t.trim().length!==t.length){s="extra whitespace";break}if(typeof t!="string"&&typeof t!="number")break;let a=Number(t);if(Number.isNaN(a)){s="not a number";break}if(!Number.isFinite(a)){s="too large or small";break}return i==G.FLOAT&&xS(a),a;case G.INT32:case G.FIXED32:case G.SFIXED32:case G.SINT32:case G.UINT32:if(t===null)return 0;let o;if(typeof t=="number"?o=t:t===""?s="empty string":typeof t=="string"&&(t.trim().length!==t.length?s="extra whitespace":o=Number(t)),o===void 0)break;return i==G.UINT32?jm(o):Mp(o),o;case G.INT64:case G.SFIXED64:case G.SINT64:if(t===null)return Jn(At.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return Jn(At.from(t),r);case G.FIXED64:case G.UINT64:if(t===null)return Jn(or.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return Jn(or.from(t),r);case G.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case G.STRING:if(t===null)return"";if(typeof t!="string"){s="extra whitespace";break}try{encodeURIComponent(t)}catch(c){c="invalid UTF8";break}return t;case G.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return SQ(t)}}catch(a){s=a.message}this.assert(!1,n+(s?" - "+s:""),t)}}class zQ{constructor(t){var i;this.fields=(i=t.fields)!==null&&i!==void 0?i:[]}write(t,i){const r={},n=t;for(const s of this.fields){if(!s.oneof){let d=this.field(s,n[s.localName],i);d!==void 0&&(r[i.useProtoFieldName?s.name:s.jsonName]=d);continue}const a=n[s.oneof];if(a.oneofKind!==s.localName)continue;const o=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},i),{emitDefaultValues:!0}):i;let c=this.field(s,a[s.localName],o);lt(c!==void 0),r[i.useProtoFieldName?s.name:s.jsonName]=c}return r}field(t,i,r){let n;if(t.kind=="map"){lt(typeof i=="object"&&i!==null);const s={};switch(t.V.kind){case"scalar":for(const[c,d]of Object.entries(i)){const l=this.scalar(t.V.T,d,t.name,!1,!0);lt(l!==void 0),s[c.toString()]=l}break;case"message":const a=t.V.T();for(const[c,d]of Object.entries(i)){const l=this.message(a,d,t.name,r);lt(l!==void 0),s[c.toString()]=l}break;case"enum":const o=t.V.T();for(const[c,d]of Object.entries(i)){lt(d===void 0||typeof d=="number");const l=this.enum(o,d,t.name,!1,!0,r.enumAsInteger);lt(l!==void 0),s[c.toString()]=l}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(n=s)}else if(t.repeat){lt(Array.isArray(i));const s=[];switch(t.kind){case"scalar":for(let c=0;c<i.length;c++){const d=this.scalar(t.T,i[c],t.name,t.opt,!0);lt(d!==void 0),s.push(d)}break;case"enum":const a=t.T();for(let c=0;c<i.length;c++){lt(i[c]===void 0||typeof i[c]=="number");const d=this.enum(a,i[c],t.name,t.opt,!0,r.enumAsInteger);lt(d!==void 0),s.push(d)}break;case"message":const o=t.T();for(let c=0;c<i.length;c++){const d=this.message(o,i[c],t.name,r);lt(d!==void 0),s.push(d)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(n=s)}else switch(t.kind){case"scalar":n=this.scalar(t.T,i,t.name,t.opt,r.emitDefaultValues);break;case"enum":n=this.enum(t.T(),i,t.name,t.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":n=this.message(t.T(),i,t.name,r);break}return n}enum(t,i,r,n,s,a){if(t[0]=="google.protobuf.NullValue")return null;if(i===void 0){lt(n);return}if(!(i===0&&!s&&!n))return lt(typeof i=="number"),lt(Number.isInteger(i)),a||!t[1].hasOwnProperty(i)?i:t[2]?t[2]+t[1][i]:t[1][i]}message(t,i,r,n){return i===void 0?n.emitDefaultValues?null:void 0:t.internalJsonWrite(i,n)}scalar(t,i,r,n,s){if(i===void 0){lt(n);return}const a=s||n;switch(t){case G.INT32:case G.SFIXED32:case G.SINT32:return i===0?a?0:void 0:(Mp(i),i);case G.FIXED32:case G.UINT32:return i===0?a?0:void 0:(jm(i),i);case G.FLOAT:xS(i);case G.DOUBLE:return i===0?a?0:void 0:(lt(typeof i=="number"),Number.isNaN(i)?"NaN":i===Number.POSITIVE_INFINITY?"Infinity":i===Number.NEGATIVE_INFINITY?"-Infinity":i);case G.STRING:return i===""?a?"":void 0:(lt(typeof i=="string"),i);case G.BOOL:return i===!1?a?!1:void 0:(lt(typeof i=="boolean"),i);case G.UINT64:case G.FIXED64:lt(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let o=or.from(i);return o.isZero()&&!a?void 0:o.toString();case G.INT64:case G.SFIXED64:case G.SINT64:lt(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let c=At.from(i);return c.isZero()&&!a?void 0:c.toString();case G.BYTES:return lt(i instanceof Uint8Array),i.byteLength?EQ(i):a?"":void 0}}}function s_(e,t=Rs.STRING){switch(e){case G.BOOL:return!1;case G.UINT64:case G.FIXED64:return Jn(or.ZERO,t);case G.INT64:case G.SFIXED64:case G.SINT64:return Jn(At.ZERO,t);case G.DOUBLE:case G.FLOAT:return 0;case G.BYTES:return new Uint8Array(0);case G.STRING:return"";default:return 0}}class HQ{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){const i=(t=this.info.fields)!==null&&t!==void 0?t:[];this.fieldNoToField=new Map(i.map(r=>[r.no,r]))}}read(t,i,r,n){this.prepare();const s=n===void 0?t.len:t.pos+n;for(;t.pos<s;){const[a,o]=t.tag(),c=this.fieldNoToField.get(a);if(!c){let f=r.readUnknownField;if(f=="throw")throw new Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let y=t.skip(o);f!==!1&&(f===!0?Nm.onRead:f)(this.info.typeName,i,a,o,y);continue}let d=i,l=c.repeat,u=c.localName;switch(c.oneof&&(d=d[c.oneof],d.oneofKind!==u&&(d=i[c.oneof]={oneofKind:u})),c.kind){case"scalar":case"enum":let f=c.kind=="enum"?G.INT32:c.T,y=c.kind=="scalar"?c.L:void 0;if(l){let P=d[u];if(o==ci.LengthDelimited&&f!=G.STRING&&f!=G.BYTES){let w=t.uint32()+t.pos;for(;t.pos<w;)P.push(this.scalar(t,f,y))}else P.push(this.scalar(t,f,y))}else d[u]=this.scalar(t,f,y);break;case"message":if(l){let P=d[u],w=c.T().internalBinaryRead(t,t.uint32(),r);P.push(w)}else d[u]=c.T().internalBinaryRead(t,t.uint32(),r,d[u]);break;case"map":let[b,k]=this.mapEntry(c,t,r);d[u][b]=k;break}}}mapEntry(t,i,r){let n=i.uint32(),s=i.pos+n,a,o;for(;i.pos<s;){let[c,d]=i.tag();switch(c){case 1:t.K==G.BOOL?a=i.bool().toString():a=this.scalar(i,t.K,Rs.STRING);break;case 2:switch(t.V.kind){case"scalar":o=this.scalar(i,t.V.T,t.V.L);break;case"enum":o=i.int32();break;case"message":o=t.V.T().internalBinaryRead(i,i.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${d}) in map entry for ${this.info.typeName}#${t.name}`)}}if(a===void 0){let c=s_(t.K);a=t.K==G.BOOL?c.toString():c}if(o===void 0)switch(t.V.kind){case"scalar":o=s_(t.V.T,t.V.L);break;case"enum":o=0;break;case"message":o=t.V.T().create();break}return[a,o]}scalar(t,i,r){switch(i){case G.INT32:return t.int32();case G.STRING:return t.string();case G.BOOL:return t.bool();case G.DOUBLE:return t.double();case G.FLOAT:return t.float();case G.INT64:return Jn(t.int64(),r);case G.UINT64:return Jn(t.uint64(),r);case G.FIXED64:return Jn(t.fixed64(),r);case G.FIXED32:return t.fixed32();case G.BYTES:return t.bytes();case G.UINT32:return t.uint32();case G.SFIXED32:return t.sfixed32();case G.SFIXED64:return Jn(t.sfixed64(),r);case G.SINT32:return t.sint32();case G.SINT64:return Jn(t.sint64(),r)}}}class GQ{constructor(t){this.info=t}prepare(){if(!this.fields){const t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort((i,r)=>i.no-r.no)}}write(t,i,r){this.prepare();for(const s of this.fields){let a,o,c=s.repeat,d=s.localName;if(s.oneof){const l=t[s.oneof];if(l.oneofKind!==d)continue;a=l[d],o=!0}else a=t[d],o=!1;switch(s.kind){case"scalar":case"enum":let l=s.kind=="enum"?G.INT32:s.T;if(c)if(lt(Array.isArray(a)),c==$m.PACKED)this.packed(i,l,s.no,a);else for(const u of a)this.scalar(i,l,s.no,u,!0);else a===void 0?lt(s.opt):this.scalar(i,l,s.no,a,o||s.opt);break;case"message":if(c){lt(Array.isArray(a));for(const u of a)this.message(i,r,s.T(),s.no,u)}else this.message(i,r,s.T(),s.no,a);break;case"map":lt(typeof a=="object"&&a!==null);for(const[u,f]of Object.entries(a))this.mapEntry(i,r,s,u,f);break}}let n=r.writeUnknownFields;n!==!1&&(n===!0?Nm.onWrite:n)(this.info.typeName,t,i)}mapEntry(t,i,r,n,s){t.tag(r.no,ci.LengthDelimited),t.fork();let a=n;switch(r.K){case G.INT32:case G.FIXED32:case G.UINT32:case G.SFIXED32:case G.SINT32:a=Number.parseInt(n);break;case G.BOOL:lt(n=="true"||n=="false"),a=n=="true";break}switch(this.scalar(t,r.K,1,a,!0),r.V.kind){case"scalar":this.scalar(t,r.V.T,2,s,!0);break;case"enum":this.scalar(t,G.INT32,2,s,!0);break;case"message":this.message(t,i,r.V.T(),2,s);break}t.join()}message(t,i,r,n,s){s!==void 0&&(r.internalBinaryWrite(s,t.tag(n,ci.LengthDelimited).fork(),i),t.join())}scalar(t,i,r,n,s){let[a,o,c]=this.scalarInfo(i,n);(!c||s)&&(t.tag(r,a),t[o](n))}packed(t,i,r,n){if(!n.length)return;lt(i!==G.BYTES&&i!==G.STRING),t.tag(r,ci.LengthDelimited),t.fork();let[,s]=this.scalarInfo(i);for(let a=0;a<n.length;a++)t[s](n[a]);t.join()}scalarInfo(t,i){let r=ci.Varint,n,s=i===void 0,a=i===0;switch(t){case G.INT32:n="int32";break;case G.STRING:a=s||!i.length,r=ci.LengthDelimited,n="string";break;case G.BOOL:a=i===!1,n="bool";break;case G.UINT32:n="uint32";break;case G.DOUBLE:r=ci.Bit64,n="double";break;case G.FLOAT:r=ci.Bit32,n="float";break;case G.INT64:a=s||At.from(i).isZero(),n="int64";break;case G.UINT64:a=s||or.from(i).isZero(),n="uint64";break;case G.FIXED64:a=s||or.from(i).isZero(),r=ci.Bit64,n="fixed64";break;case G.BYTES:a=s||!i.byteLength,r=ci.LengthDelimited,n="bytes";break;case G.FIXED32:r=ci.Bit32,n="fixed32";break;case G.SFIXED32:r=ci.Bit32,n="sfixed32";break;case G.SFIXED64:a=s||At.from(i).isZero(),r=ci.Bit64,n="sfixed64";break;case G.SINT32:n="sint32";break;case G.SINT64:a=s||At.from(i).isZero(),n="sint64";break}return[r,n,s||a]}}function WQ(e){const t={};Object.defineProperty(t,jQ,{enumerable:!1,value:e});for(let i of e.fields){let r=i.localName;if(!i.opt)if(i.oneof)t[i.oneof]={oneofKind:void 0};else if(i.repeat)t[r]=[];else switch(i.kind){case"scalar":t[r]=s_(i.T,i.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function K0(e,t,i){let r,n=i,s;for(let a of e.fields){let o=a.localName;if(a.oneof){const c=n[a.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(r=c[o],s=t[a.oneof],s.oneofKind=c.oneofKind,r==null){delete s[o];continue}}else if(r=n[o],s=t,r==null)continue;switch(a.repeat&&(s[o].length=r.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let d=0;d<r.length;d++)s[o][d]=r[d];else s[o]=r;break;case"message":let c=a.T();if(a.repeat)for(let d=0;d<r.length;d++)s[o][d]=c.create(r[d]);else s[o]===void 0?s[o]=c.create(r):c.mergePartial(s[o],r);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(s[o],r);break;case"message":let d=a.V.T();for(let l of Object.keys(r))s[o][l]=d.create(r[l]);break}break}}}function qQ(e,t,i){if(t===i)return!0;if(!t||!i)return!1;for(let r of e.fields){let n=r.localName,s=r.oneof?t[r.oneof][n]:t[n],a=r.oneof?i[r.oneof][n]:i[n];switch(r.kind){case"enum":case"scalar":let o=r.kind=="enum"?G.INT32:r.T;if(!(r.repeat?p2(o,s,a):h3(o,s,a)))return!1;break;case"map":if(!(r.V.kind=="message"?h2(r.V.T(),Cg(s),Cg(a)):p2(r.V.kind=="enum"?G.INT32:r.V.T,Cg(s),Cg(a))))return!1;break;case"message":let c=r.T();if(!(r.repeat?h2(c,s,a):c.equals(s,a)))return!1;break}}return!0}const Cg=Object.values;function h3(e,t,i){if(t===i)return!0;if(e!==G.BYTES)return!1;let r=t,n=i;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=n[s])return!1;return!0}function p2(e,t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!h3(e,t[r],i[r]))return!1;return!0}function h2(e,t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],i[r]))return!1;return!0}class U{constructor(t,i,r){this.defaultCheckDepth=16,this.typeName=t,this.fields=i.map($Q),this.options=r!=null?r:{},this.refTypeCheck=new BQ(this),this.refJsonReader=new VQ(this),this.refJsonWriter=new zQ(this),this.refBinReader=new HQ(this),this.refBinWriter=new GQ(this)}create(t){let i=WQ(this);return t!==void 0&&K0(this,i,t),i}clone(t){let i=this.create();return K0(this,i,t),i}equals(t,i){return qQ(this,t,i)}is(t,i=this.defaultCheckDepth){return this.refTypeCheck.is(t,i,!1)}isAssignable(t,i=this.defaultCheckDepth){return this.refTypeCheck.is(t,i,!0)}mergePartial(t,i){K0(this,t,i)}fromBinary(t,i){let r=CQ(i);return this.internalBinaryRead(r.readerFactory(t),t.byteLength,r)}fromJson(t,i){return this.internalJsonRead(t,NQ(i))}fromJsonString(t,i){let r=JSON.parse(t);return this.fromJson(r,i)}toJson(t,i){return this.internalJsonWrite(t,UQ(i))}toJsonString(t,i){var r;let n=this.toJson(t,i);return JSON.stringify(n,null,(r=i==null?void 0:i.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(t,i){let r=DQ(i);return this.internalBinaryWrite(t,r.writerFactory(),r).finish()}internalJsonRead(t,i,r){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){let n=r!=null?r:this.create();return this.refJsonReader.read(t,n,i),n}throw new Error(`Unable to parse message ${this.typeName} from JSON ${RS(t)}.`)}internalJsonWrite(t,i){return this.refJsonWriter.write(t,i)}internalBinaryWrite(t,i,r){return this.refBinWriter.write(t,i,r),i}internalBinaryRead(t,i,r,n){let s=n!=null?n:this.create();return this.refBinReader.read(t,s,r,i),s}}var xc={},Fv={},a_={exports:{}},Y0,g2;function JQ(){if(g2)return Y0;g2=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,s=r*365.25;Y0=function(l,u){u=u||{};var f=typeof l;if(f==="string"&&l.length>0)return a(l);if(f==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(!!u){var f=parseFloat(u[1]),y=(u[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=i?Math.round(l/i)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=i?d(l,u,i,"hour"):u>=t?d(l,u,t,"minute"):u>=e?d(l,u,e,"second"):l+" ms"}function d(l,u,f,y){var b=u>=f*1.5;return Math.round(l/f)+" "+y+(b?"s":"")}return Y0}function KQ(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=n,i.enabled=a,i.humanize=JQ(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let u=0;for(let f=0;f<l.length;f++)u=(u<<5)-u+l.charCodeAt(f),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(l){let u,f=null,y,b;function k(...P){if(!k.enabled)return;const w=k,E=Number(new Date),R=E-(u||E);w.diff=R,w.prev=u,w.curr=E,u=E,P[0]=i.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let D=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(B,W)=>{if(B==="%%")return"%";D++;const q=i.formatters[W];if(typeof q=="function"){const fe=P[D];B=q.call(w,fe),P.splice(D,1),D--}return B}),i.formatArgs.call(w,P),(w.log||i.log).apply(w,P)}return k.namespace=l,k.useColors=i.useColors(),k.color=i.selectColor(l),k.extend=r,k.destroy=i.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(y!==i.namespaces&&(y=i.namespaces,b=i.enabled(l)),b),set:P=>{f=P}}),typeof i.init=="function"&&i.init(k),k}function r(l,u){const f=i(this.namespace+(typeof u>"u"?":":u)+l);return f.log=this.log,f}function n(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let u;const f=(typeof l=="string"?l:"").split(/[\s,]+/),y=f.length;for(u=0;u<y;u++)!f[u]||(l=f[u].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...i.names.map(o),...i.skips.map(o).map(u=>"-"+u)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let u,f;for(u=0,f=i.skips.length;u<f;u++)if(i.skips[u].test(l))return!1;for(u=0,f=i.names.length;u<f;u++)if(i.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var YQ=KQ;(function(e,t){t.formatArgs=r,t.save=n,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(u=l))}),c.splice(u,0,d)}t.log=console.debug||console.log||(()=>{});function n(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=YQ(t);const{formatters:o}=e.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(a_,a_.exports);var QQ=rT&&rT.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fv,"__esModule",{value:!0});Fv.Logger=void 0;const pd=QQ(a_.exports),hd="awaitqueue";class ZQ{constructor(t){t?(this._debug=(0,pd.default)(`${hd}:${t}`),this._warn=(0,pd.default)(`${hd}:WARN:${t}`),this._error=(0,pd.default)(`${hd}:ERROR:${t}`)):(this._debug=(0,pd.default)(hd),this._warn=(0,pd.default)(`${hd}:WARN`),this._error=(0,pd.default)(`${hd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}Fv.Logger=ZQ;Object.defineProperty(xc,"__esModule",{value:!0});var g3=xc.AwaitQueue=xc.AwaitQueueRemovedTaskError=xc.AwaitQueueStoppedError=void 0;const XQ=Fv,ka=new XQ.Logger;class Bv extends Error{constructor(t){super(t!=null?t:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Bv)}}xc.AwaitQueueStoppedError=Bv;class Vv extends Error{constructor(t){super(t!=null?t:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Vv)}}xc.AwaitQueueRemovedTaskError=Vv;class eZ{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(t,i){if(i=i!=null?i:t.name,ka.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((r,n)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),ka.debug(`resolving task [name:${s.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),ka.debug(`rejecting task [name:${s.name}]: %s`,String(a)),n(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){ka.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())ka.debug(`stop() | stopping task [name:${t.name}]`),t.reject(new Bv);this.stopping=!1}remove(t){ka.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){ka.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new Vv)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:t-r.enqueuedAt,executionTime:r.executedAt?t-r.executedAt:0}))}async execute(t){if(ka.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}g3=xc.AwaitQueue=eZ;const Ms=Object.create(null);Ms.open="0";Ms.close="1";Ms.ping="2";Ms.pong="3";Ms.message="4";Ms.upgrade="5";Ms.noop="6";const mf=Object.create(null);Object.keys(Ms).forEach(e=>{mf[Ms[e]]=e});const tZ={type:"error",data:"parser error"},iZ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",rZ=typeof ArrayBuffer=="function",nZ=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,f3=({type:e,data:t},i,r)=>iZ&&t instanceof Blob?i?r(t):f2(t,r):rZ&&(t instanceof ArrayBuffer||nZ(t))?i?r(t):f2(new Blob([t]),r):r(Ms[e]+(t||"")),f2=(e,t)=>{const i=new FileReader;return i.onload=function(){const r=i.result.split(",")[1];t("b"+(r||""))},i.readAsDataURL(e)},m2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<m2.length;e++)tp[m2.charCodeAt(e)]=e;const sZ=e=>{let t=e.length*.75,i=e.length,r,n=0,s,a,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),l=new Uint8Array(d);for(r=0;r<i;r+=4)s=tp[e.charCodeAt(r)],a=tp[e.charCodeAt(r+1)],o=tp[e.charCodeAt(r+2)],c=tp[e.charCodeAt(r+3)],l[n++]=s<<2|a>>4,l[n++]=(a&15)<<4|o>>2,l[n++]=(o&3)<<6|c&63;return d},aZ=typeof ArrayBuffer=="function",m3=(e,t)=>{if(typeof e!="string")return{type:"message",data:v3(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:oZ(e.substring(1),t)}:mf[i]?e.length>1?{type:mf[i],data:e.substring(1)}:{type:mf[i]}:tZ},oZ=(e,t)=>{if(aZ){const i=sZ(e);return v3(i,t)}else return{base64:!0,data:e}},v3=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},y3=String.fromCharCode(30),cZ=(e,t)=>{const i=e.length,r=new Array(i);let n=0;e.forEach((s,a)=>{f3(s,!1,o=>{r[a]=o,++n===i&&t(r.join(y3))})})},dZ=(e,t)=>{const i=e.split(y3),r=[];for(let n=0;n<i.length;n++){const s=m3(i[n],t);if(r.push(s),s.type==="error")break}return r},b3=4;function Ti(e){if(e)return lZ(e)}function lZ(e){for(var t in Ti.prototype)e[t]=Ti.prototype[t];return e}Ti.prototype.on=Ti.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ti.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Ti.prototype.off=Ti.prototype.removeListener=Ti.prototype.removeAllListeners=Ti.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Ti.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,t)}return this};Ti.prototype.emitReserved=Ti.prototype.emit;Ti.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ti.prototype.hasListeners=function(e){return!!this.listeners(e).length};const pn=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function _3(e,...t){return t.reduce((i,r)=>(e.hasOwnProperty(r)&&(i[r]=e[r]),i),{})}const uZ=pn.setTimeout,pZ=pn.clearTimeout;function zv(e,t){t.useNativeTimers?(e.setTimeoutFn=uZ.bind(pn),e.clearTimeoutFn=pZ.bind(pn)):(e.setTimeoutFn=pn.setTimeout.bind(pn),e.clearTimeoutFn=pn.clearTimeout.bind(pn))}const hZ=1.33;function gZ(e){return typeof e=="string"?fZ(e):Math.ceil((e.byteLength||e.size)*hZ)}function fZ(e){let t=0,i=0;for(let r=0,n=e.length;r<n;r++)t=e.charCodeAt(r),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(r++,i+=4);return i}class mZ extends Error{constructor(t,i,r){super(t),this.description=i,this.context=r,this.type="TransportError"}}class w3 extends Ti{constructor(t){super(),this.writable=!1,zv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,i,r){return super.emitReserved("error",new mZ(t,i,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=m3(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}}const S3="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o_=64,vZ={};let v2=0,Rg=0,y2;function b2(e){let t="";do t=S3[e%o_]+t,e=Math.floor(e/o_);while(e>0);return t}function E3(){const e=b2(+new Date);return e!==y2?(v2=0,y2=e):e+"."+b2(v2++)}for(;Rg<o_;Rg++)vZ[S3[Rg]]=Rg;function T3(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function yZ(e){let t={},i=e.split("&");for(let r=0,n=i.length;r<n;r++){let s=i[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}let k3=!1;try{k3=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bZ=k3;function P3(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bZ))return new XMLHttpRequest}catch{}if(!t)try{return new pn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function _Z(){}const wZ=function(){return new P3({xdomain:!1}).responseType!=null}();class SZ extends w3{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==r}const i=t&&t.forceBase64;this.supportsBinary=wZ&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||i()})),this.writable||(r++,this.once("drain",function(){--r||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};dZ(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,cZ(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const i=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=E3()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const n=T3(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new xs(this.uri(),t)}doWrite(t,i){const r=this.request({method:"POST",data:t});r.on("success",i),r.on("error",(n,s)=>{this.onError("xhr post error",n,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,r)=>{this.onError("xhr poll error",i,r)}),this.pollXhr=t}}class xs extends Ti{constructor(t,i){super(),zv(this,i),this.opts=i,this.method=i.method||"GET",this.uri=t,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const t=_3(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const i=this.xhr=new P3(t);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=xs.requestsCount++,xs.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=_Z,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete xs.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}xs.requestsCount=0;xs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_2);else if(typeof addEventListener=="function"){const e="onpagehide"in pn?"pagehide":"unload";addEventListener(e,_2,!1)}}function _2(){for(let e in xs.requests)xs.requests.hasOwnProperty(e)&&xs.requests[e].abort()}const C3=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0))(),xg=pn.WebSocket||pn.MozWebSocket,w2=!0,EZ="arraybuffer",S2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class TZ extends w3{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),i=this.opts.protocols,r=S2?{}:_3(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=w2&&!S2?i?new xg(t,i):new xg(t):new xg(t,i,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||EZ,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const r=t[i],n=i===t.length-1;f3(r,this.supportsBinary,s=>{const a={};try{w2&&this.ws.send(s)}catch{}n&&C3(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const i=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=E3()),this.supportsBinary||(t.b64=1);const n=T3(t),s=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!xg}}const kZ={websocket:TZ,polling:SZ},PZ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,CZ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function c_(e){const t=e,i=e.indexOf("["),r=e.indexOf("]");i!=-1&&r!=-1&&(e=e.substring(0,i)+e.substring(i,r).replace(/:/g,";")+e.substring(r,e.length));let n=PZ.exec(e||""),s={},a=14;for(;a--;)s[CZ[a]]=n[a]||"";return i!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=RZ(s,s.path),s.queryKey=xZ(s,s.query),s}function RZ(e,t){const i=/\/{2,9}/g,r=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function xZ(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,s){n&&(i[n]=s)}),i}class Qa extends Ti{constructor(t,i={}){super(),this.writeBuffer=[],t&&typeof t=="object"&&(i=t,t=null),t?(t=c_(t),i.hostname=t.host,i.secure=t.protocol==="https"||t.protocol==="wss",i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=c_(i.host).host),zv(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=yZ(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=b3,i.transport=t,this.id&&(i.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new kZ[t](r)}open(){let t;if(this.opts.rememberUpgrade&&Qa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(t){let i=this.createTransport(t),r=!1;Qa.priorWebsocketSuccess=!1;const n=()=>{r||(i.send([{type:"ping",data:"probe"}]),i.once("packet",u=>{if(!r)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;Qa.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=i.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,l(),i.close(),i=null)}const a=u=>{const f=new Error("probe error: "+u);f.transport=i.name,s(),this.emitReserved("upgradeError",f)};function o(){a("transport closed")}function c(){a("socket closed")}function d(u){i&&u.name!==i.name&&s()}const l=()=>{i.removeListener("open",n),i.removeListener("error",a),i.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};i.once("open",n),i.once("error",a),i.once("close",o),this.once("close",c),this.once("upgrading",d),i.open()}onOpen(){if(this.readyState="open",Qa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const i=this.upgrades.length;for(;t<i;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(i+=gZ(n)),r>0&&i>this.maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}write(t,i,r){return this.sendPacket("message",t,i,r),this}send(t,i,r){return this.sendPacket("message",t,i,r),this}sendPacket(t,i,r,n){if(typeof i=="function"&&(n=i,i=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:i,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){Qa.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const i=[];let r=0;const n=t.length;for(;r<n;r++)~this.transports.indexOf(t[r])&&i.push(t[r]);return i}}Qa.protocol=b3;function AZ(e,t="",i){let r=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),r=c_(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(i&&i.port===r.port?"":":"+r.port),r}const IZ=typeof ArrayBuffer=="function",OZ=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,R3=Object.prototype.toString,MZ=typeof Blob=="function"||typeof Blob<"u"&&R3.call(Blob)==="[object BlobConstructor]",DZ=typeof File=="function"||typeof File<"u"&&R3.call(File)==="[object FileConstructor]";function AS(e){return IZ&&(e instanceof ArrayBuffer||OZ(e))||MZ&&e instanceof Blob||DZ&&e instanceof File}function vf(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,r=e.length;i<r;i++)if(vf(e[i]))return!0;return!1}if(AS(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return vf(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&vf(e[i]))return!0;return!1}function LZ(e){const t=[],i=e.data,r=e;return r.data=d_(i,t),r.attachments=t.length,{packet:r,buffers:t}}function d_(e,t){if(!e)return e;if(AS(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let r=0;r<e.length;r++)i[r]=d_(e[r],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=d_(e[r],t));return i}return e}function NZ(e,t){return e.data=l_(e.data,t),delete e.attachments,e}function l_(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=l_(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=l_(e[i],t));return e}const UZ=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jZ=5;var Ze;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Ze||(Ze={}));class $Z{constructor(t){this.replacer=t}encode(t){return(t.type===Ze.EVENT||t.type===Ze.ACK)&&vf(t)?this.encodeAsBinary({type:t.type===Ze.EVENT?Ze.BINARY_EVENT:Ze.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===Ze.BINARY_EVENT||t.type===Ze.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=LZ(t),r=this.encodeAsString(i.packet),n=i.buffers;return n.unshift(r),n}}function E2(e){return Object.prototype.toString.call(e)==="[object Object]"}class IS extends Ti{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const r=i.type===Ze.BINARY_EVENT;r||i.type===Ze.BINARY_ACK?(i.type=r?Ze.EVENT:Ze.ACK,this.reconstructor=new FZ(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(AS(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const r={type:Number(t.charAt(0))};if(Ze[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ze.BINARY_EVENT||r.type===Ze.BINARY_ACK){const s=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const a=t.substring(s,i);if(a!=Number(a)||t.charAt(i)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(t.charAt(i+1)==="/"){const s=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););r.nsp=t.substring(s,i)}else r.nsp="/";const n=t.charAt(i+1);if(n!==""&&Number(n)==n){const s=i+1;for(;++i;){const a=t.charAt(i);if(a==null||Number(a)!=a){--i;break}if(i===t.length)break}r.id=Number(t.substring(s,i+1))}if(t.charAt(++i)){const s=this.tryParse(t.substr(i));if(IS.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case Ze.CONNECT:return E2(i);case Ze.DISCONNECT:return i===void 0;case Ze.CONNECT_ERROR:return typeof i=="string"||E2(i);case Ze.EVENT:case Ze.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&UZ.indexOf(i[0])===-1);case Ze.ACK:case Ze.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class FZ{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=NZ(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const BZ=Object.freeze(Object.defineProperty({__proto__:null,protocol:jZ,get PacketType(){return Ze},Encoder:$Z,Decoder:IS},Symbol.toStringTag,{value:"Module"}));function Fn(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const VZ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class x3 extends Ti{constructor(t,i,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Fn(t,"open",this.onopen.bind(this)),Fn(t,"packet",this.onpacket.bind(this)),Fn(t,"error",this.onerror.bind(this)),Fn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(VZ.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:Ze.EVENT,data:i};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const a=this.ids++,o=i.pop();this._registerAckCallback(a,o),r.id=a}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,i){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[t]=i;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...a)=>{this.io.clearTimeoutFn(s),i.apply(this,[null,...a])}}emitWithAck(t,...i){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,s)=>{i.push((a,o)=>r?a?s(a):n(o):n(a)),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...s)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(n)):(this._queue.shift(),i&&i(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ze.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ze.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ze.EVENT:case Ze.BINARY_EVENT:this.onevent(t);break;case Ze.ACK:case Ze.BINARY_ACK:this.onack(t);break;case Ze.DISCONNECT:this.ondisconnect();break;case Ze.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const r of i)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let r=!1;return function(...n){r||(r=!0,i.packet({type:Ze.ACK,id:t,data:n}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(i.apply(this,t.data),delete this.acks[t.id])}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ze.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const r of i)r.apply(this,t.data)}}}function Hl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Hl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-i:e+i}return Math.min(e,this.max)|0};Hl.prototype.reset=function(){this.attempts=0};Hl.prototype.setMin=function(e){this.ms=e};Hl.prototype.setMax=function(e){this.max=e};Hl.prototype.setJitter=function(e){this.jitter=e};class u_ extends Ti{constructor(t,i){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,zv(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((r=i.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Hl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const n=i.parser||BZ;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Qa(this.uri,this.opts);const i=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=Fn(i,"open",function(){r.onopen(),t&&t()}),s=Fn(i,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),t?t(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&n();const o=this.setTimeoutFn(()=>{n(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(n),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Fn(t,"ping",this.onping.bind(this)),Fn(t,"data",this.ondata.bind(this)),Fn(t,"error",this.onerror.bind(this)),Fn(t,"close",this.onclose.bind(this)),Fn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){C3(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new x3(this,t,i),this.nsps[t]=r),r}_destroy(t){const i=Object.keys(this.nsps);for(const r of i)if(this.nsps[r].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let r=0;r<i.length;r++)this.engine.write(i[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},i);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Au={};function yf(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=AZ(e,t.path||"/socket.io"),r=i.source,n=i.id,s=i.path,a=Au[n]&&s in Au[n].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return o?c=new u_(r,t):(Au[n]||(Au[n]=new u_(r,t)),c=Au[n]),i.query&&!t.query&&(t.query=i.queryKey),c.socket(i.path,t)}Object.assign(yf,{Manager:u_,Socket:x3,io:yf,connect:yf});const zZ=e=>(t,i)=>(e.set(t,i),i),T2=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,A3=536870912,k2=A3*2,HZ=(e,t)=>i=>{const r=t.get(i);let n=r===void 0?i.size:r<k2?r+1:0;if(!i.has(n))return e(i,n);if(i.size<A3){for(;i.has(n);)n=Math.floor(Math.random()*k2);return e(i,n)}if(i.size>T2)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(n);)n=Math.floor(Math.random()*T2);return e(i,n)},I3=new WeakMap,GZ=zZ(I3),Ag=HZ(GZ,I3),WZ=e=>e.method!==void 0&&e.method==="call",qZ=e=>e.error===null&&typeof e.id=="number",JZ=e=>{const t=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),r=new Map,n=new Worker(e);return n.addEventListener("message",({data:d})=>{if(WZ(d)){const{params:{timerId:l,timerType:u}}=d;if(u==="interval"){const f=t.get(l);if(typeof f=="number"){const y=r.get(f);if(y===void 0||y.timerId!==l||y.timerType!==u)throw new Error("The timer is in an undefined state.")}else if(typeof f<"u")f();else throw new Error("The timer is in an undefined state.")}else if(u==="timeout"){const f=i.get(l);if(typeof f=="number"){const y=r.get(f);if(y===void 0||y.timerId!==l||y.timerType!==u)throw new Error("The timer is in an undefined state.")}else if(typeof f<"u")f(),i.delete(l);else throw new Error("The timer is in an undefined state.")}}else if(qZ(d)){const{id:l}=d,u=r.get(l);if(u===void 0)throw new Error("The timer is in an undefined state.");const{timerId:f,timerType:y}=u;r.delete(l),y==="interval"?t.delete(f):i.delete(f)}else{const{error:{message:l}}=d;throw new Error(l)}}),{clearInterval:d=>{const l=Ag(r);r.set(l,{timerId:d,timerType:"interval"}),t.set(d,l),n.postMessage({id:l,method:"clear",params:{timerId:d,timerType:"interval"}})},clearTimeout:d=>{const l=Ag(r);r.set(l,{timerId:d,timerType:"timeout"}),i.set(d,l),n.postMessage({id:l,method:"clear",params:{timerId:d,timerType:"timeout"}})},setInterval:(d,l)=>{const u=Ag(t);return t.set(u,()=>{d(),typeof t.get(u)=="function"&&n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"interval"}})}),n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"interval"}}),u},setTimeout:(d,l)=>{const u=Ag(i);return i.set(u,d),n.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u,timerType:"timeout"}}),u}}},KZ=(e,t)=>{let i=null;return()=>{if(i!==null)return i;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(r);return i=e(n),setTimeout(()=>URL.revokeObjectURL(n)),i}},YZ=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,O3=KZ(JZ,YZ),M3=e=>O3().clearInterval(e),D3=(e,t)=>O3().setInterval(e,t);var QZ=Object.defineProperty,ZZ=(e,t,i)=>t in e?QZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_=(e,t,i)=>(ZZ(e,typeof t!="symbol"?t+"":t,i),i),OS=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},g=(e,t,i)=>(OS(e,t,"read from private field"),i?i.call(e):t.get(e)),j=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},$=(e,t,i,r)=>(OS(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),li=(e,t,i)=>(OS(e,t,"access private method"),i),Ee;(function(e){e[e.MAJOR_EVENT=0]="MAJOR_EVENT",e[e.MINOR_EVENT=1]="MINOR_EVENT"})(Ee||(Ee={}));var ne;(function(e){e.PRECALL_TEST_BEGIN="precall_begin",e.PRECALL_TEST_COMPLETE="precall_end",e.CALL_JOIN_BEGIN="call_join",e.NET_QUALITY_TEST_BEGIN="net_quality_test_begin",e.NET_QUALITY_TEST_END="net_quality_test_end",e.WEBSOCKET_CONNECTED="websocket_connected",e.TRANSPORT_CONNECTED="transport_connected",e.AUDIO_ON="audio_on",e.AUDIO_OFF="audio_off",e.VIDEO_ON="video_on",e.VIDEO_OFF="video_off",e.PARTICIPANT_ROLE="participant_role",e.PING_STAT="ping_stat",e.DISCONNECT="disconnect",e.RECONNECT_ATTEMPT="reconnect_attempt",e.SCREENSHARE_START_REQUESTED="screenshare_start_requested",e.SCREENSHARE_STARTED="screenshare_started",e.SCREENSHARE_STOPPED="screenshare_stopped",e.TAB_CHANGE="tab_change",e.BROWSER_BACKGROUNDED="browser_backgrounded",e.BROWSER_FOREGROUNDED="browser_foregrounded",e.DOMINANT_SPEAKER="dominant_speaker",e.AUDIO_DEVICES_UPDATES="audio_devices_updates",e.VIDEO_DEVICES_UPDATES="video_devices_updates",e.SPEAKER_DEVICES_UPDATES="speaker_devices_updates",e.SELECTED_MICROHPONE_UPDATE="selected_microphone_update",e.SELECTED_CAMERA_UPDATE="selected_camera_update",e.SELECTED_SPEAKER_UPDATE="selected_speaker_update",e.MEDIA_PERMISSION="camera_permission",e.LEGACY_SWITCH="legacy_switch",e.AUDIO_PLAY_FAILED="audio_play_failed",e.VIDEO_PLAY_FAILED="video_play_failed",e.AUDIO_TRACK_MUTED="audio_track_muted",e.VIDEO_TRACK_MUTED="video_track_muted",e.IVS_PLAYER_REBUFFERING="ivs_player_rebuffering",e.IVS_PLAYER_AUDIO_BLOCKED="ivs_player_audio_blocked",e.IVS_PLAYER_PLAYBACK_BLOCKED="ivs_player_playback_blocked",e.IVS_PLAYER_ERROR="ivs_player_error",e.IVS_PLAYER_RECOVERABLE_ERROR="ivs_player_recoverable_error",e.IVS_PLAYER_WORKER_ERROR="ivs_player_worker_error",e.IVS_PLAYER_NETWORK_UNAVAILABLE="ivs_player_network_unavailable",e.LIVESTREAM_LATENCY="livestream_latency",e.IVS_PLAYER_ANALYTICS_EVENT="ivs_player_analytics_event",e.IVS_PLAYER_PLAYBACK_RATE_CHANGED="ivs_player_playback_rate_changed",e.IVS_PLAYER_QUALITY_CHANGED="ivs_player_quality_changed",e.IVS_PLAYER_INITIALIZED="ivs_player_initialized"})(ne||(ne={}));const XZ=new Map([[ne.PRECALL_TEST_BEGIN,Ee.MINOR_EVENT],[ne.PRECALL_TEST_COMPLETE,Ee.MINOR_EVENT],[ne.CALL_JOIN_BEGIN,Ee.MAJOR_EVENT],[ne.NET_QUALITY_TEST_BEGIN,Ee.MINOR_EVENT],[ne.NET_QUALITY_TEST_END,Ee.MINOR_EVENT],[ne.WEBSOCKET_CONNECTED,Ee.MINOR_EVENT],[ne.TRANSPORT_CONNECTED,Ee.MAJOR_EVENT],[ne.AUDIO_ON,Ee.MINOR_EVENT],[ne.AUDIO_OFF,Ee.MINOR_EVENT],[ne.VIDEO_ON,Ee.MINOR_EVENT],[ne.VIDEO_OFF,Ee.MINOR_EVENT],[ne.PARTICIPANT_ROLE,Ee.MINOR_EVENT],[ne.PING_STAT,Ee.MAJOR_EVENT],[ne.DISCONNECT,Ee.MAJOR_EVENT],[ne.RECONNECT_ATTEMPT,Ee.MAJOR_EVENT],[ne.SCREENSHARE_START_REQUESTED,Ee.MINOR_EVENT],[ne.SCREENSHARE_STARTED,Ee.MINOR_EVENT],[ne.SCREENSHARE_STOPPED,Ee.MINOR_EVENT],[ne.TAB_CHANGE,Ee.MINOR_EVENT],[ne.BROWSER_BACKGROUNDED,Ee.MINOR_EVENT],[ne.BROWSER_FOREGROUNDED,Ee.MINOR_EVENT],[ne.DOMINANT_SPEAKER,Ee.MINOR_EVENT],[ne.AUDIO_DEVICES_UPDATES,Ee.MINOR_EVENT],[ne.VIDEO_DEVICES_UPDATES,Ee.MINOR_EVENT],[ne.SPEAKER_DEVICES_UPDATES,Ee.MINOR_EVENT],[ne.SELECTED_MICROHPONE_UPDATE,Ee.MINOR_EVENT],[ne.SELECTED_CAMERA_UPDATE,Ee.MINOR_EVENT],[ne.SELECTED_SPEAKER_UPDATE,Ee.MINOR_EVENT],[ne.MEDIA_PERMISSION,Ee.MINOR_EVENT],[ne.LEGACY_SWITCH,Ee.MINOR_EVENT],[ne.AUDIO_PLAY_FAILED,Ee.MINOR_EVENT],[ne.VIDEO_PLAY_FAILED,Ee.MINOR_EVENT],[ne.AUDIO_TRACK_MUTED,Ee.MINOR_EVENT],[ne.VIDEO_TRACK_MUTED,Ee.MINOR_EVENT],[ne.IVS_PLAYER_REBUFFERING,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_AUDIO_BLOCKED,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_PLAYBACK_BLOCKED,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_ERROR,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_RECOVERABLE_ERROR,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_WORKER_ERROR,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_NETWORK_UNAVAILABLE,Ee.MAJOR_EVENT],[ne.LIVESTREAM_LATENCY,Ee.MAJOR_EVENT],[ne.IVS_PLAYER_ANALYTICS_EVENT,Ee.MINOR_EVENT],[ne.IVS_PLAYER_PLAYBACK_RATE_CHANGED,Ee.MINOR_EVENT],[ne.IVS_PLAYER_QUALITY_CHANGED,Ee.MINOR_EVENT],[ne.IVS_PLAYER_INITIALIZED,Ee.MINOR_EVENT]]);var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yr={},eX={get exports(){return yr},set exports(e){yr=e}},ul=typeof Reflect=="object"?Reflect:null,P2=ul&&typeof ul.apply=="function"?ul.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},bf;ul&&typeof ul.ownKeys=="function"?bf=ul.ownKeys:Object.getOwnPropertySymbols?bf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:bf=function(e){return Object.getOwnPropertyNames(e)};function tX(e){console&&console.warn&&console.warn(e)}var L3=Number.isNaN||function(e){return e!==e};function bt(){bt.init.call(this)}eX.exports=bt;yr.once=sX;bt.EventEmitter=bt;bt.prototype._events=void 0;bt.prototype._eventsCount=0;bt.prototype._maxListeners=void 0;var C2=10;function Hv(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(bt,"defaultMaxListeners",{enumerable:!0,get:function(){return C2},set:function(e){if(typeof e!="number"||e<0||L3(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");C2=e}});bt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};bt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||L3(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function N3(e){return e._maxListeners===void 0?bt.defaultMaxListeners:e._maxListeners}bt.prototype.getMaxListeners=function(){return N3(this)};bt.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=n[e];if(o===void 0)return!1;if(typeof o=="function")P2(o,this,t);else for(var c=o.length,d=B3(o,c),i=0;i<c;++i)P2(d[i],this,t);return!0};function U3(e,t,i,r){var n,s,a;if(Hv(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),a===void 0)a=s[t]=i,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),n=N3(e),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,tX(o)}return e}bt.prototype.addListener=function(e,t){return U3(this,e,t,!1)};bt.prototype.on=bt.prototype.addListener;bt.prototype.prependListener=function(e,t){return U3(this,e,t,!0)};function iX(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j3(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=iX.bind(r);return n.listener=i,r.wrapFn=n,n}bt.prototype.once=function(e,t){return Hv(t),this.on(e,j3(this,e,t)),this};bt.prototype.prependOnceListener=function(e,t){return Hv(t),this.prependListener(e,j3(this,e,t)),this};bt.prototype.removeListener=function(e,t){var i,r,n,s,a;if(Hv(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():rX(i,n),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};bt.prototype.off=bt.prototype.removeListener;bt.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),s;for(r=0;r<n.length;++r)s=n[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function $3(e,t,i){var r=e._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?nX(n):B3(n,n.length)}bt.prototype.listeners=function(e){return $3(this,e,!0)};bt.prototype.rawListeners=function(e){return $3(this,e,!1)};bt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):F3.call(e,t)};bt.prototype.listenerCount=F3;function F3(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}bt.prototype.eventNames=function(){return this._eventsCount>0?bf(this._events):[]};function B3(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function rX(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function nX(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function sX(e,t){return new Promise(function(i,r){function n(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),i([].slice.call(arguments))}V3(e,t,s,{once:!0}),t!=="error"&&aX(e,n,{once:!0})})}function aX(e,t,i){typeof e.on=="function"&&V3(e,"error",t,i)}function V3(e,t,i,r){if(typeof e.on=="function")r.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){r.once&&e.removeEventListener(t,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var R2;(function(e){e.CHROMIUM="chromum",e.FIREFOX="firefox",e.SAFARI="safari"})(R2||(R2={}));var ch;(function(e){e.DEV="dev",e.STAGING="staging",e.PRODUCTION="production"})(ch||(ch={}));var cn;(function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SPEAKER="SPEAKER"})(cn||(cn={}));var io;(function(e){e[e.INIT=0]="INIT",e[e.ACCEPTED=1]="ACCEPTED",e[e.DENIED=2]="DENIED",e[e.SYS_DENIED=3]="SYS_DENIED",e[e.FAILED=4]="FAILED",e[e.NOTFOUND=5]="NOTFOUND",e[e.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(io||(io={}));class oX{constructor(){_(this,"currentChunk"),_(this,"flushedChunks"),this.currentChunk={entries:[]},this.flushedChunks=[]}add(t){this.currentChunk.entries.push(t)}flush(){const t=this.currentChunk;return this.currentChunk={entries:[]},this.flushedChunks.push(t),t}}class cX extends yr{constructor({logger:t,peerId:i,env:r}){super(),_(this,"logger"),_(this,"peerId"),_(this,"eventStore"),_(this,"apiEndpoint"),this.logger=t,this.peerId=i,r===ch.PRODUCTION?this.apiEndpoint="https://collector.prod.da.dyte.io/api/v1/message":this.apiEndpoint="https://collector.non-prod.da.dyte.io/api/v1/message",this.eventStore=new oX}async sendEventsChunkToServer(t){const i={payload:t,peerId:this.peerId};try{return await fetch(this.apiEndpoint,{method:"POST",body:JSON.stringify(i)}),!0}catch(r){return this.logger.error("callStats::sendEventsChunkToServer::catch",{error:r}),!1}}callEvent(t){t.timestamp=new Date,this.eventStore.add(t),this.emit(t.event,t.metaData),XZ.get(t.event)===Ee.MAJOR_EVENT&&this.flush()}async flush(){var t;const i=this.eventStore.flush();return(t=i==null?void 0:i.entries)!=null&&t.length?(await this.sendEventsChunkToServer(i),!0):!1}}class ga{constructor(t){_(this,"pc1"),_(this,"pc2"),_(this,"constrainVideoBitrateKbps"),_(this,"constrainOfferToRemoveVideoFec",!1),_(this,"iceCandidateFilter");const i=new RTCPeerConnection(t),r=new RTCPeerConnection(t);this.pc1=i,this.pc2=r,this.iceCandidateFilter=ga.noFilter,this.pc1.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc1))}static parseCandidate(t){const i="candidate:",r=t.indexOf(i)+i.length,n=t.substr(r).split(" ");return{type:n[7],protocol:n[2],address:n[4]}}static isNotHostCandidate(t){return t.type!=="host"}static isHost(t){return t.type==="host"}static isRelay(t){return t.type==="relay"}static isReflexive(t){return t.type==="srflx"}static noFilter(t){return!0}onIceCandidate(t,i){if(i.candidate){const r=ga.parseCandidate(i.candidate.candidate);this.iceCandidateFilter(r)&&t.addIceCandidate(i.candidate)}}setIceCandidateFilter(t){this.iceCandidateFilter=t}constrainVideoBitrate(t){this.constrainVideoBitrateKbps=t}disableVideoFec(){this.constrainOfferToRemoveVideoFec=!0}gotOffer(t){this.constrainOfferToRemoveVideoFec&&(t.sdp=t.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),t.sdp=t.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),t.sdp=t.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(t),this.pc2.setRemoteDescription(t),this.pc2.createAnswer().then(this.gotAnswer.bind(this),this.reportFatal.bind(this))}gotAnswer(t){this.constrainVideoBitrateKbps&&(t.sdp=t.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${this.constrainVideoBitrateKbps}\r
`)),this.pc2.setLocalDescription(t),this.pc1.setRemoteDescription(t)}establishConnection(){this.pc1.createOffer().then(this.gotOffer.bind(this),this.reportFatal.bind(this))}reportFatal(t){console.error("Error:",t)}async getRoundTripTime(){const[t,i]=await Promise.all([this.pc1.getStats(),this.pc2.getStats()]);let r,n;if(t.forEach(s=>{s.type==="candidate-pair"&&s.nominated===!0&&s.bytesSent>0&&(r=s)}),i.forEach(s=>{s.type==="candidate-pair"&&s.nominated===!0&&s.bytesReceived>0&&(n=s)}),r&&n)try{if(r.currentRoundTripTime&&n.currentRoundTripTime)return{rtt:r.currentRoundTripTime,backendRTT:n.currentRoundTripTime};const s=(n.lastPacketReceivedTimestamp-r.lastPacketSentTimestamp)/1e3;return{rtt:s,backendRTT:s}}catch{return}}close(){this.pc1.close(),this.pc2.close()}}class z3 extends yr{constructor(t){super(),_(this,"call"),_(this,"timeOut"),this.call=new ga(t)}start(t=1e4){this.call.establishConnection(),this.timeOut=setTimeout(this.testFailed.bind(this),t)}testComplete(t){clearTimeout(this.timeOut),this.call.close(),this.emit("done",t)}testFailed(t){console.warn("Test failed, ",t),this.call.close(),this.emit("failed",t)}}const dX=8,lX=1/1e3;class uX extends z3{constructor(t){super(t),_(this,"senderChannel"),_(this,"recieveChannel"),_(this,"startTime"),_(this,"lastBitrateMeasureTime"),_(this,"sentPayloadBytes",0),_(this,"recievedPayloadBytes",0),_(this,"lastReceivedPayloadBytes",0),_(this,"stopSending",!1),_(this,"testProgress",0),_(this,"samplePacket",""),_(this,"finalBitrateSum",0),_(this,"bitRateSampels",0),_(this,"maxNumberOfPacketsToSend",0),_(this,"bytesToKeepBuffered",0),_(this,"testDurationSeconds",5),this.call.setIceCandidateFilter(ga.isNotHostCandidate),this.senderChannel=this.call.pc1.createDataChannel(null);for(let i=0;i<1024*256;i+=1)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.testDurationSeconds=4,this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onRecieverChannel.bind(this))}sendingStep(){const t=new Date;this.startTime||(this.startTime=t,this.lastBitrateMeasureTime=t);for(let r=0;r!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);r+=1){this.sentPayloadBytes+=this.samplePacket.length;try{this.senderChannel.send(this.samplePacket)}catch{}}const i=t.getTime()-this.startTime.getTime();i>=1e3*this.testDurationSeconds?(this.stopSending=!0,this.testProgress=100):(this.testProgress=i/(10*this.testDurationSeconds),setTimeout(this.sendingStep.bind(this),1))}onMessageRecieved(t){this.recievedPayloadBytes+=t.data.length;const i=new Date,r=i.getTime()-this.lastBitrateMeasureTime.getTime();if(r>=1e3){const n=(this.recievedPayloadBytes-this.lastReceivedPayloadBytes)*dX/(r/1e3);this.finalBitrateSum+=n,this.bitRateSampels+=1,this.lastReceivedPayloadBytes=this.recievedPayloadBytes,this.lastBitrateMeasureTime=i}if(this.stopSending&&this.sentPayloadBytes===this.recievedPayloadBytes){const n=this.finalBitrateSum/this.bitRateSampels;this.testComplete({throughput:Math.round(n*lX)})}}testComplete(t){this.call.getRoundTripTime().then(({rtt:i,backendRTT:r})=>super.testComplete({RTT:i,backendRTT:r,throughput:t.throughput}))}onRecieverChannel(t){this.recieveChannel=t.channel,this.recieveChannel.addEventListener("message",this.onMessageRecieved.bind(this))}}class MS extends z3{constructor(t,i=ga.noFilter){super(t),_(this,"ch1"),_(this,"ch2"),this.call.setIceCandidateFilter(i);const r=this.call.pc1.createDataChannel(null);this.ch1=r,r.addEventListener("open",()=>{r.send("hello")}),r.addEventListener("message",this.onCh1Recieve.bind(this)),this.call.pc2.addEventListener("datachannel",this.dataChannelHandler.bind(this))}onCh1Recieve(t){t.data!=="world"?this.hangup("Invalid data transmitted."):this.testComplete({connectivity:!0})}onCh2Recieve(t){if(t.data!=="hello")this.hangup("Invalid data transmitted.");else try{this.ch2.send("world")}catch{}}dataChannelHandler(t){const i=t.channel;this.ch2=i,i.addEventListener("message",this.onCh2Recieve.bind(this))}hangup(t){this.testFailed(t)}}class pX extends MS{constructor(t){super(t,ga.isHost)}}class hX extends MS{constructor(t){super(t,ga.isRelay)}}class gX extends MS{constructor(t){super(t,ga.isReflexive)}}class fX{constructor(){_(this,"ipInformation",null)}async getIPDetails({peerId:t}){var i;if(!this.ipInformation){try{const n=await(await fetch("https://media-location.dyte.io")).json();if(((i=n.loc)==null?void 0:i.length)>5)return this.ipInformation=n,n;throw Error("Insufficient data")}catch{}const r=await fetch(`https://location-service.dyte.io/?token=3c493932b0624c&peerId=${t}`,{method:"POST"});this.ipInformation=await r.json()}return this.ipInformation}}const DS=new fX,x2=[{urls:"turn:turn.dyte.in:443?transport=tcp",username:"dyte",credential:"dytein",credentialType:"password"},{urls:"turn:turn.dyte.in:3478?transport=udp",username:"dyte",credential:"dytein",credentialType:"password"}];function mX(e){const[t,i]=e.split(",");return{coords:{latitude:Number(t),longitude:Number(i)}}}class H3{constructor(){_(this,"transport"),_(this,"candidatePair"),_(this,"outboundVideoRtp",new Map),_(this,"inboundVideoRtp",new Map),_(this,"outboundAudioRtp",new Map),_(this,"inboundAudioRtp",new Map),_(this,"remoteInboundRtp",new Map),_(this,"producerStreamMap",new Map),_(this,"consumerStreamMap",new Map),_(this,"staleProducerStreamMap",!1),_(this,"staleConsumerStreamMap",!1)}}class G3{constructor(){_(this,"outboundProducerMap",new Map),_(this,"inboundConsumerMap",new Map),_(this,"consumerPeerIdMap",new Map),_(this,"overallProducingTransportsStatsMap",{}),_(this,"overallConsumingTransportsStatsMap",{}),_(this,"overallConsumersStatsMap",{}),_(this,"overallProducersStatsMap",{}),_(this,"consumerIdsWithFreezedVideo",new Set),_(this,"consumerIdsWithFreezedAudio",new Set),_(this,"producerIdsWithFreezedVideo",new Set),_(this,"producerIdsWithFreezedAudio",new Set),_(this,"freezedProducingTransportIds",new Set),_(this,"freezedConsumingTransportIds",new Set),_(this,"ipDetails"),_(this,"callStatsInstance")}async registerProducer(t){await this.generateProducerStreamMap(t),t.observer.on("close",this.deregisterProducer.bind(this,t))}processInboundConsumerVideoStats(t,i,r){var n,s;const a=((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.get(t))||{};i.totalVideoPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedVideo.add(t),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoFreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_video_status","pause",t))):(i.totalVideoPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedVideo.has(t)&&(this.consumerIdsWithFreezedVideo.delete(t),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoDefreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_video_status","resume",t))))}processInboundConsumerAudioStats(t,i,r){var n,s;const a=((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.get(t))||{};i.totalAudioPacketsReceived===r.packetsReceived?(this.consumerIdsWithFreezedAudio.add(t),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioFreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","pause",t))):(i.totalAudioPacketsReceived=r.packetsReceived,this.consumerIdsWithFreezedAudio.has(t)&&(this.consumerIdsWithFreezedAudio.delete(t),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioDefreezed",{consumerId:t}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","resume",t))))}processOutboundProducerVideoStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{};i.totalVideoPacketsSent===r.packetsSent?(this.producerIdsWithFreezedVideo.add(t),this.callStatsInstance&&s.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoFreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_video_status","pause",t))):(i.totalVideoPacketsSent=r.packetsSent,this.producerIdsWithFreezedVideo.has(t)&&(this.producerIdsWithFreezedVideo.delete(t),this.callStatsInstance&&s.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoDefreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_video_status","resume",t))))}processOutboundProducerAudioStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{};i.totalAudioPacketsSent===r.packetsSent?(this.producerIdsWithFreezedAudio.add(t),this.callStatsInstance&&s.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioFreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_audio_status","pause",t))):(i.totalAudioPacketsSent=r.packetsSent,this.producerIdsWithFreezedAudio.has(t)&&(this.producerIdsWithFreezedAudio.delete(t),this.callStatsInstance&&s.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioDefreezed",{producerId:t}),this.callStatsInstance.eventHandler.emit("producer_audio_status","resume",t))))}processProducingTransportStats(t,i,r){var n;const s=((n=this==null?void 0:this.callStatsInstance)==null?void 0:n.currentUserMediaStates)||{},{audio:a,video:o,screen:c}=s,d=a||o||c;i.totalPacketsSent===r.packetsSent?(this.freezedProducingTransportIds.add(t),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportFreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("producing_transport_status","pause",t))):(i.totalPacketsSent=r.packetsSent,this.freezedProducingTransportIds.has(t)&&(this.freezedProducingTransportIds.delete(t),this.callStatsInstance&&d&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportDefreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("producing_transport_status","resume",t))))}processConsumingTransportStats(t,i,r){var n,s;const a=!!Array.from(((s=(n=this==null?void 0:this.callStatsInstance)==null?void 0:n.consumerSharedMediaStatesMap)==null?void 0:s.values())||[]).reduce((o,c)=>o||c.audio||c.video||c.screen,!1);i.totalPacketsReceived===r.packetsSent?(this.freezedConsumingTransportIds.add(t),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportFreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","pause",t))):(i.totalPacketsReceived=r.packetsSent,this.freezedConsumingTransportIds.has(t)&&(this.freezedConsumingTransportIds.delete(t),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportDefreezed",{transportId:t}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","resume",t))))}async registerConsumer(t){await this.generateConsumerStreamMap(t),this.consumerPeerIdMap.set(t.id,{producerId:t.producerId,peerId:t.appData.peerId}),t.observer.on("close",this.deregisterConsumer.bind(this,t))}async generateProducerStreamMap(t,i=!1){const r=await t.getStats(),n=i?this.getProducerStatsFromReport(this.parseRTCReport(r,["outbound-rtp","remote-inbound-rtp"],!1,t.id))[0]:void 0;for(const s of r.values())switch(s.type){case"outbound-rtp":{this.outboundProducerMap.set(s.id,t.id);break}}return n}async generateConsumerStreamMap(t,i=!1){const r=await t.getStats(),n=i?this.getConsumerStatsFromReport(this.parseRTCReport(r,["inbound-rtp"],!1,t.id))[0]:void 0;for(const s of r.values())switch(s.type){case"inbound-rtp":{this.inboundConsumerMap.set(s.id,t.id);break}}return n}deregisterProducer(t){this.outboundProducerMap.forEach((i,r)=>{i===t.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(t){this.inboundConsumerMap.forEach((i,r)=>{i===t.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(t.id)}parseRTCReport(t,i=[],r=!1,n=void 0,s=void 0){const a=t,o=new H3,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const l=d,u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=u;break}break}case"transport":{const l=d;s&&(s.producing&&(this.overallProducingTransportsStatsMap[s.id]||(this.overallProducingTransportsStatsMap[s.id]={totalPacketsSent:0})),s.consuming&&(this.overallConsumingTransportsStatsMap[s.id]||(this.overallConsumingTransportsStatsMap[s.id]={totalPacketsReceived:0})));const u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=u,s){if(s.producing){const f=this.overallProducingTransportsStatsMap[s.id];this.processProducingTransportStats(s.id,f,u)}if(s.consuming){const f=this.overallConsumingTransportsStatsMap[s.id];this.processConsumingTransportStats(s.id,f,u)}}break}case"remote-inbound-rtp":{const l=d,u={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,u);break}case"outbound-rtp":{const l=d,u=n||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[u]||(this.overallProducersStatsMap[u]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const f=this.overallProducersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(u)||o.producerStreamMap.set(u,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const y={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,k={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesEncoded:b.framesEncoded,framesDropped:b.framesDropped,framesPerSecond:b.framesPerSecond,framesSent:b.framesSent,keyFramesEncoded:b.keyFramesEncoded,firCount:b.firCount,encoderImplementation:b.encoderImplementation,hugeFramesSent:b.hugeFramesSent,pliCount:b.pliCount,qpSum:b.qpSum,qualityLimitationDurations:b.qualityLimitationDurations,qualityLimitationReason:b.qualityLimitationReason,qualityLimitationResolutionChanges:b.qualityLimitationResolutionChanges,totalEncodeTime:b.targetBitrate,totalPacketSendDelay:b.totalPacketSendDelay,retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundVideoRtp.set(d.id,k),o.producerStreamMap.get(u).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(u,f,k)}else if(l.mediaType==="audio"){const b=l,k={retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundAudioRtp.set(d.id,k),o.producerStreamMap.get(u).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(u,f,k)}}break}case"inbound-rtp":{const l=d,u=n||this.inboundConsumerMap.get(d.id);if(l.ssrc===1234)break;this.overallConsumersStatsMap[u]||(this.overallConsumersStatsMap[u]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const f=this.overallConsumersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(u)||o.consumerStreamMap.set(u,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const y={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,k={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesDecoded:b.framesDecoded,framesDropped:b.framesDropped,framesPerSecond:b.framesPerSecond,framesReceived:b.framesReceived,keyFramesDecoded:b.keyFramesDecoded,firCount:b.firCount,decoderImplementation:b.decoderImplementation,...y};o.inboundVideoRtp.set(d.id,k),o.consumerStreamMap.get(u).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(u,f,k)}else if(l.mediaType==="audio"){const b=l,k={audioLevel:b.audioLevel,concealedSampels:b.concealedSampels,concealmentEvents:b.concealmentEvents,jitterBufferDelay:b.jitterBufferDelay,jitterBufferEmittedCount:b.jitterBufferEmittedCount,totalAudioEnergy:b.totalAudioEnergy,totalSamplesDuration:b.totalSamplesDuration,totalSamplesReceived:b.totalSamplesReceived,...y};o.inboundAudioRtp.set(d.id,k),o.consumerStreamMap.get(u).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(u,f,k)}}break}}}if(o.outboundVideoRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,l=0;o.remoteInboundRtp.forEach((u,f)=>{u.roundTripTime&&u.roundTripTime>d&&(d=u.roundTripTime,l=u.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=l}return o}async getProducersReport(t){const i=t.map(r=>this.generateProducerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getConsumersReport(t){const i=t.map(r=>this.generateConsumerStreamMap(r,!0));return i.length>0?Promise.all(i):void 0}async getTransportReport(t){return t.getStats()}async getProcessedStats(t,i,r){const n=await this.getTransportReport(t),s={producing:r,consuming:i,id:t.id},a=n,o=this.parseRTCReport(a,["transport","candidate-pair","inbound-rtp","outbound-rtp","remote-inbound-rtp"],!1,void 0,s);if(!o)return;const c={stats:o.transport,transportId:t.id,consuming:i,producing:r},d=o.staleProducerStreamMap?void 0:this.getProducerStatsFromReport(o),l=o.staleConsumerStreamMap?void 0:this.getConsumerStatsFromReport(o);return{transportReport:c,producerReport:d,consumerReport:l}}getProducerStatsFromReport(t){const i=[];try{t.producerStreamMap.forEach((r,n)=>{var s,a;i.push({producerId:n,videoStats:r.outboundVideoRtpId.map(o=>t.outboundVideoRtp.get(o)),audioStats:r.outboundAudioRtpId.map(o=>t.outboundAudioRtp.get(o)),appData:((a=(s=this.callStatsInstance.producers)==null?void 0:s.get(n))==null?void 0:a.appData)||null})})}catch(r){this.callStatsInstance.logger.error("callStats::measurements::getProducerStatsFromReport",{error:{reason:r.reason,message:r.message}})}return i}getConsumerStatsFromReport(t){const i=[];try{t.consumerStreamMap.forEach((r,n)=>{const{peerId:s,producerId:a}=this.consumerPeerIdMap.get(n);i.push({consumerId:n,peerId:s,producerId:a,videoStats:r.inboundVideoRtpId.map(o=>t.inboundVideoRtp.get(o)),audioStats:r.inboundAudioRtpId.map(o=>t.inboundAudioRtp.get(o))})})}catch(r){console.error("getConsumersReport: ",r,t)}return i}async getUserLocation(){return new Promise((t,i)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{t(r)}):i()}catch(r){i(r)}})}async getConnectivity(t){try{const i={iceServers:t||x2},r=new Promise((d,l)=>{try{const u=new pX(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),n=new Promise((d,l)=>{try{const u=new hX(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),s=new Promise((d,l)=>{try{const u=new gX(i);u.addListener("done",d),u.addListener("failed",()=>{d({connectivity:!1})}),u.start(2e3)}catch(u){l(u)}}),[a,o,c]=await Promise.all([r,n,s]);return{host:a==null?void 0:a.connectivity,relay:o==null?void 0:o.connectivity,reflexive:c==null?void 0:c.connectivity}}catch{return{host:!1,relay:!1,reflexive:!1}}}async getThroughput(t){try{const i=await new Promise((r,n)=>{try{const s={iceServers:t||x2},a=new uX(s);a.addListener("done",r),a.addListener("failed",n),a.start(1e4)}catch(s){n(s)}});return{throughput:i.throughput,fractionalLoss:0,RTT:i.RTT,jitter:0,backendRTT:i.backendRTT}}catch{return}}async getIPDetails(){var t;try{return this.ipDetails||(this.ipDetails=await DS.getIPDetails({peerId:(t=this.callStatsInstance)==null?void 0:t.peerId})),this.ipDetails}catch{return}}async getNetworkQuality(t){const[i,r]=await Promise.all([this.getConnectivity(t),this.getThroughput(t)]);return{connectivity:i,throughput:r==null?void 0:r.throughput,fractionalLoss:r==null?void 0:r.fractionalLoss,RTT:r==null?void 0:r.RTT,jitter:r==null?void 0:r.jitter,backendRTT:r==null?void 0:r.backendRTT}}async getNetworkInfo(t){var i;const[r,n,s]=await Promise.all([this.getConnectivity(t),this.getThroughput(t),this.getIPDetails()]);return{ipDetails:s,effectiveNetworkType:(i=navigator.connection)==null?void 0:i.effectiveType,location:s.loc?mX(s.loc):void 0,turnConnectivity:r?r.host||r.relay||r.reflexive:!1,connectivity:r,throughput:n==null?void 0:n.throughput,fractionalLoss:n==null?void 0:n.fractionalLoss,RTT:n==null?void 0:n.RTT,jitter:n==null?void 0:n.jitter,backendRTT:n==null?void 0:n.backendRTT}}}class vX extends G3{}class W3 extends G3{constructor(){super(...arguments),_(this,"producerMap",new Map),_(this,"consumerMap",new Map)}async registerProducer(t){this.producerMap.set(t.id,t),await this.generateProducerStreamMap(t),t.observer.on("close",this.deregisterProducer.bind(this,t))}async registerConsumer(t){this.consumerMap.set(t.id,t),await this.generateConsumerStreamMap(t),this.consumerPeerIdMap.set(t.id,{producerId:t.producerId,peerId:t.appData.peerId}),t.observer.on("close",this.deregisterConsumer.bind(this,t))}async generateConsumerStreamMap(t,i=!1){const r=await t.getStats(),n=this.parseRTCReport(r,["inbound-rtp"],!1,t.id),s=[...n.consumerStreamMap.values()][0],a=i?this.getConsumerStatsFromParsedConsumerStats(n,s,t.id):void 0;for(const o of r.values())switch(o.type){case"inbound-rtp":{this.inboundConsumerMap.set(o.id,t.id);break}}return a}deregisterProducer(t){this.producerMap.delete(t.id),this.outboundProducerMap.forEach((i,r)=>{i===t.id&&this.outboundProducerMap.delete(r)})}deregisterConsumer(t){this.consumerMap.delete(t.id),this.inboundConsumerMap.forEach((i,r)=>{i===t.id&&this.inboundConsumerMap.delete(r)}),this.consumerPeerIdMap.delete(t.id)}parseRTCReport(t,i=[],r=!1,n=void 0,s=void 0){const a=t,o=new H3,c=i.length?new Set(i):void 0;for(const d of a.values()){if(c){if(c.size===0)break;if(c.has(d.type))r&&c.delete(d.type);else continue}switch(d.type){case"candidate-pair":{if(d.nominated===!0||d.selected===!0){const l=d,u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=u;break}break}case"transport":{const l=d;s&&(s.producing&&(this.overallProducingTransportsStatsMap[s.id]||(this.overallProducingTransportsStatsMap[s.id]={totalPacketsSent:0})),s.consuming&&(this.overallConsumingTransportsStatsMap[s.id]||(this.overallConsumingTransportsStatsMap[s.id]={totalPacketsReceived:0})));const u={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=u,s){if(s.producing){const f=this.overallProducingTransportsStatsMap[s.id];this.processProducingTransportStats(s.id,f,u)}if(s.consuming){const f=this.overallConsumingTransportsStatsMap[s.id];this.processConsumingTransportStats(s.id,f,u)}}break}case"remote-inbound-rtp":{const l=d,u={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,u);break}case"outbound-rtp":{const l=d,u=n||this.outboundProducerMap.get(d.id);this.overallProducersStatsMap[u]||(this.overallProducersStatsMap[u]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const f=this.overallProducersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(d.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(u)||o.producerStreamMap.set(u,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const y={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,k={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesEncoded:b.framesEncoded,framesDropped:b.framesDropped?b.framesDropped:b.droppedFrames,framesPerSecond:b.framesPerSecond?b.framesPerSecond:b.framerateMean,framesSent:b.framesSent,keyFramesEncoded:b.keyFramesEncoded,firCount:b.firCount,encoderImplementation:b.encoderImplementation,hugeFramesSent:b.hugeFramesSent,pliCount:b.pliCount,qpSum:b.qpSum,qualityLimitationReason:b.qualityLimitationReason,qualityLimitationDurations:b.qualityLimitationDurations,qualityLimitationResolutionChanges:b.qualityLimitationResolutionChanges,totalEncodeTime:b.totalEncodeTime,totalPacketSendDelay:b.totalEncodeTime,retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundVideoRtp.set(d.id,k),o.producerStreamMap.get(u).outboundVideoRtpId.push(d.id),this.processOutboundProducerVideoStats(u,f,k)}else if(l.mediaType==="audio"){const b=l,k={retransmittedBytesSent:b.retransmittedBytesSent,retransmittedPacketsSent:b.retransmittedPacketsSent,...y};o.outboundAudioRtp.set(d.id,k),o.producerStreamMap.get(u).outboundAudioRtpId.push(d.id),this.processOutboundProducerAudioStats(u,f,k)}}break}case"inbound-rtp":{const l=d,u=n||this.inboundConsumerMap.get(d.id);this.overallConsumersStatsMap[u]||(this.overallConsumersStatsMap[u]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const f=this.overallConsumersStatsMap[u];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(d.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(u)||o.consumerStreamMap.set(u,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const y={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const b=l,k={frameHeight:b.frameHeight,frameWidth:b.frameWidth,framesDecoded:b.framesDecoded,framesDropped:b.framesDropped?b.framesDropped:b.droppedFrames,framesPerSecond:b.framesPerSecond?b.framesPerSecond:b.framerateMean,framesReceived:b.framesReceived,keyFramesDecoded:b.keyFramesDecoded,firCount:b.firCount,decoderImplementation:b.decoderImplementation,...y};o.inboundVideoRtp.set(d.id,k),o.consumerStreamMap.get(u).inboundVideoRtpId.push(d.id),this.processInboundConsumerVideoStats(u,f,k)}else if(l.mediaType==="audio"){const b=l,k={audioLevel:b.audioLevel,concealedSampels:b.concealedSampels,concealmentEvents:b.concealmentEvents,jitterBufferDelay:b.jitterBufferDelay,jitterBufferEmittedCount:b.jitterBufferEmittedCount,totalAudioEnergy:b.totalAudioEnergy,totalSamplesDuration:b.totalSamplesDuration,totalSamplesReceived:b.totalSamplesReceived,...y};o.inboundAudioRtp.set(d.id,k),o.consumerStreamMap.get(u).inboundAudioRtpId.push(d.id),this.processInboundConsumerAudioStats(u,f,k)}}break}}}if(o.outboundVideoRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((d,l)=>{d.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.bytesReceived=o.candidatePair.bytesReceived,o.transport.bytesSent=o.candidatePair.bytesSent,o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let d=0,l=0;o.remoteInboundRtp.forEach((u,f)=>{u.roundTripTime&&u.roundTripTime>d&&(d=u.roundTripTime,l=u.totalRoundTripTime)}),o.transport.roundTripTime=d,o.transport.totalRoundTripTime=l}return o}getProducerStatsFromReport(t){const i=[];try{t.producerStreamMap.forEach((r,n)=>{const s=this.producerMap.get(n).track.getSettings(),a=r.outboundVideoRtpId.map(c=>{const d=t.outboundVideoRtp.get(c);return d.frameHeight||(d.frameHeight=s.height,d.frameWidth=s.width,d.framesPerSecond=s.frameRate),d}),o={producerId:n,videoStats:a,audioStats:r.outboundAudioRtpId.map(c=>t.outboundAudioRtp.get(c))};i.push(o)})}catch(r){console.error("getProducersReport: ",r,t)}return i}getConsumerStatsFromParsedConsumerStats(t,i,r){let n;try{const{peerId:s,producerId:a}=this.consumerPeerIdMap.get(r),o=i==null?void 0:i.inboundVideoRtpId.map(c=>{const d=this.consumerMap.get(r).track.getSettings(),l=t.inboundVideoRtp.get(c);return l.frameHeight||(l.frameHeight=d.height,l.frameWidth=d.width,l.framesPerSecond=d.frameRate),l});n={consumerId:r,peerId:s,producerId:a,videoStats:o,audioStats:i==null?void 0:i.inboundAudioRtpId.map(c=>t.inboundAudioRtp.get(c))}}catch(s){console.error("getConsumerStatsFromParsedConsumerStats: ",s,t)}return n}getConsumerStatsFromReport(t){const i=[];try{t.consumerStreamMap.forEach((r,n)=>{i.push(this.getConsumerStatsFromParsedConsumerStats(t,r,n))})}catch(r){console.error("getConsumerStatsFromReport: ",r,t)}return i}}class yX extends W3{}function Fm(e,t,i,r){if(typeof i=="function"&&r instanceof t)i.call(null,r,e);else throw r}function A2(e,t,i){const r=e.value;return e.value=function(...n){try{const s=r.apply(this,n);return s&&s instanceof Promise?s.catch(a=>{Fm(this,t,i,a)}):s}catch(s){Fm(this,t,i,s)}return null},e}const Oe=(e,t)=>(i,r,n)=>{const s=n.value;return n.value=function(...a){try{const o=s.apply(this,a);return o&&o instanceof Promise?o.catch(c=>{Fm(this,e,t,c)}):o}catch(o){Fm(this,e,t,o)}return null},n},bX=(e,t)=>(i,r,n)=>{if(n)return A2(n,e,t);for(const s of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,s);a.value instanceof Function&&Object.defineProperty(i.prototype,s,A2(a,e,t))}};var xe=globalThis&&globalThis.__decorate||function(e,t,i,r){var n=arguments.length,s=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(n<3?a(s):n>3?a(t,i,s):a(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s};const Ae=console;let ke=class{constructor(e="https://api.testingv3.dyte.in",t="Blink",i=ch.PRODUCTION,r,n,s){switch(_(this,"eventHandler"),_(this,"measurements"),_(this,"producingTransport"),_(this,"consumingTransport"),_(this,"producers",new Map),_(this,"consumers",new Map),_(this,"iceServers"),_(this,"connectionInfoPromise"),_(this,"pingStatsTimeout"),_(this,"logger"),_(this,"env"),_(this,"peerId"),_(this,"consumerSharedMediaStatesMap",new Map),_(this,"currentUserMediaStates",{}),this.env=i,this.logger=n,this.peerId=s,this.eventHandler=new cX({logger:n,peerId:s,env:i}),this.logger.debug("callStats::engineName: ",{engineName:t}),t){case"Blink":this.measurements=new vX;break;case"Gecko":this.measurements=new W3;break;case"WebKit":this.measurements=new yX;break;default:throw Error(`Unknown engineName! ${t}`)}this.measurements.callStatsInstance=this,this.registerProducer=this.registerProducer.bind(this),this.registerConsumer=this.registerConsumer.bind(this)}registerIceServers(e){this.iceServers=e}registerConsumer(e){var t;this.consumerSharedMediaStatesMap.has(e.id)||this.consumerSharedMediaStatesMap.set(e.id,{}),this.consumers.set(e.id,e),this.measurements.registerConsumer(e),this.logger.debug("callStats::registerConsumer",{consumerId:e.id,consumerkind:e.kind,isScreenShare:!!((t=e.appData)!=null&&t.screenShare)}),e.observer.on("close",this.deRegisterConsumer.bind(this,e))}registerProducer(e){var t;this.producers.set(e.id,e),this.measurements.registerProducer(e),this.logger.debug("callStats::registerProducer",{producerId:e.id,producerKind:e.kind,isScreenShare:!!((t=e.appData)!=null&&t.screenShare)}),e.observer.on("close",this.deRegisterProducer.bind(this,e))}sendConsumerSharedMediaStateEvent(e,t){this.consumerSharedMediaStatesMap.has(e)||this.consumerSharedMediaStatesMap.set(e,{});const i=this.consumerSharedMediaStatesMap.get(e);this.consumerSharedMediaStatesMap.set(e,Object.assign(i,t))}registerProducingTransport(e){var t;this.producingTransport=e,e.observer.on("close",this.disconnectProducingTransport.bind(this,e)),e.observer.on("disconnect",this.disconnectProducingTransport.bind(this,e)),Array.from(((t=e._producers)==null?void 0:t.values())||[]).forEach(i=>{this.registerProducer(i)}),e.observer.on("newproducer",this.registerProducer)}registerConsumingTransport(e){var t;this.consumingTransport=e,e.observer.on("close",this.disconnectConsumingTransport.bind(this,e)),e.observer.on("disconnect",this.disconnectConsumingTransport.bind(this,e)),Array.from(((t=e._consumers)==null?void 0:t.values())||[]).forEach(i=>{this.registerConsumer(i)}),e.observer.on("newconsumer",this.registerConsumer)}deRegisterConsumer(e){this.consumers.delete(e.id)}deRegisterProducer(e){this.producers.delete(e.id)}disconnectConsumingTransport(){this.consumingTransport=void 0}disconnectProducingTransport(){this.producingTransport=void 0}callEvent(e){this.eventHandler.callEvent(e)}sendPreCallTestBeginEvent(){this.connectionInfoPromise=this.measurements.getNetworkInfo(this.iceServers),this.eventHandler.callEvent({event:ne.PRECALL_TEST_BEGIN,timestamp:new Date}),this.connectionInfoPromise&&this.connectionInfoPromise.then(e=>{this.eventHandler.callEvent({event:ne.PRECALL_TEST_COMPLETE,metaData:{connectionInfo:e},timestamp:new Date})})}sendScreenShareToggleEvent(e,t){this.currentUserMediaStates.screen=e,this.eventHandler.callEvent({event:e?ne.SCREENSHARE_STARTED:ne.SCREENSHARE_STOPPED,metaData:{ssrc:t},timestamp:new Date})}sendScreenShareRequestedEvent(){this.eventHandler.callEvent({event:ne.SCREENSHARE_START_REQUESTED,timestamp:new Date})}sendActiveSpeakerEvent(e){this.eventHandler.callEvent({event:ne.DOMINANT_SPEAKER,metaData:{peerId:e},timestamp:new Date})}devices(e,t){this.eventHandler.callEvent({event:e===cn.AUDIO&&ne.AUDIO_DEVICES_UPDATES||e===cn.VIDEO&&ne.VIDEO_DEVICES_UPDATES||e===cn.SPEAKER&&ne.SPEAKER_DEVICES_UPDATES,metaData:{deviceList:t},timestamp:new Date})}selectedDevice(e,t){this.eventHandler.callEvent({event:e===cn.AUDIO&&ne.SELECTED_MICROHPONE_UPDATE||e===cn.VIDEO&&ne.SELECTED_CAMERA_UPDATE||e===cn.SPEAKER&&ne.SELECTED_SPEAKER_UPDATE,metaData:{device:t},timestamp:new Date})}mediaPermission(e,t){this.eventHandler.callEvent({event:ne.MEDIA_PERMISSION,metaData:{deviceType:e,permission:t},timestamp:new Date})}mediaPlaybackFailed(e){this.eventHandler.callEvent({event:e===cn.AUDIO&&ne.AUDIO_PLAY_FAILED||e===cn.VIDEO&&ne.VIDEO_PLAY_FAILED,metaData:{deviceType:e},timestamp:new Date})}mediaTrackMuted(e){this.eventHandler.callEvent({event:e===cn.AUDIO&&ne.AUDIO_TRACK_MUTED||e===cn.VIDEO&&ne.VIDEO_TRACK_MUTED,metaData:{deviceType:e},timestamp:new Date})}tabChanged(e){this.eventHandler.callEvent({event:ne.TAB_CHANGE,metaData:{isMeetingsTabActive:e},timestamp:new Date})}browserBackgrounded(){this.eventHandler.callEvent({event:ne.BROWSER_BACKGROUNDED,timestamp:new Date})}browserForegrounded(){this.eventHandler.callEvent({event:ne.BROWSER_FOREGROUNDED,timestamp:new Date})}legacySwitch(e){this.eventHandler.callEvent({event:ne.LEGACY_SWITCH,metadata:{on:e},timestamp:new Date})}async getPreCallTestResults(){return this.connectionInfoPromise}sendCallJoinBeginEvent(e){e={...e,meetingEnv:this.env},e.deviceInfo={...e.deviceInfo,userAgent:navigator.userAgent,cpus:navigator.hardwareConcurrency,memory:navigator.deviceMemory},this.eventHandler.callEvent({event:ne.CALL_JOIN_BEGIN,metaData:{peerMetaData:e},timestamp:new Date})}sendNetworkQualityTestBeginEvent(e){this.eventHandler.callEvent({event:ne.NET_QUALITY_TEST_BEGIN,timestamp:new Date}),new Promise(async(t,i)=>{const r=[];try{for(const n of e)try{if(n.iceServers&&n.iceServers.length>0){const s=await this.measurements.getNetworkQuality(n.iceServers);r.push({...n,networkResults:s})}}catch(s){console.warn("Error handling ",s)}t({regionData:r})}catch(n){console.warn("Error in callstats, ",n),i(n)}}).then(t=>{this.eventHandler.callEvent({event:ne.NET_QUALITY_TEST_END,timestamp:new Date,metaData:t})})}sendWebSocketConnectedEvent(){this.eventHandler.callEvent({event:ne.WEBSOCKET_CONNECTED,timestamp:new Date})}sendTransportConnectedEvent(){this.eventHandler.callEvent({event:ne.TRANSPORT_CONNECTED,timestamp:new Date})}sendAudioToggleEvent(e){this.currentUserMediaStates.audio=e;let t;e?t=ne.AUDIO_ON:t=ne.AUDIO_OFF,this.eventHandler.callEvent({event:t,timestamp:new Date})}sendVideoToggleEvent(e){this.currentUserMediaStates.video=e;let t;e?t=ne.VIDEO_ON:t=ne.VIDEO_OFF,this.eventHandler.callEvent({event:t,timestamp:new Date})}sendParticipantRoleToggleEvent(e){this.eventHandler.callEvent({event:ne.PARTICIPANT_ROLE,timestamp:new Date,metaData:e})}startPingStats(e=7e3){this.sendPingStatsEvent(!1),this.pingStatsTimeout=setInterval(this.sendPingStatsEvent.bind(this),e)}stopPingStats(){clearInterval(this.pingStatsTimeout)}async sendPingStatsEvent(e=!0){let t,i;if(this.producingTransport&&(t=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),!t||!(t!=null&&t.producerReport))){this.logger.debug("callStats::sendPingStatsEvent::staleProducingTransport",{disclaimer:"Stale producer? Regenerating Stream Maps!"});const n=await this.measurements.getProducersReport([...this.producers.values()]);t&&n?t.producerReport=n:(t=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),(!t||!(t!=null&&t.producerReport))&&this.logger.debug("callStats::sendPingStatsEvent::noProducingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}if(this.consumingTransport&&(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),!i||!i.consumerReport)){this.logger.debug("callStats::sendPingStatsEvent::staleConsumingTransport",{disclaimer:"Stale consumer? Regenerating Stream Maps!"});const n=await this.measurements.getConsumersReport([...this.consumers.values()]);i&&n?i.consumerReport=n:(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),(!i||!i.consumerReport)&&this.logger.debug("callStats::sendPingStatsEvent::noConsumingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}const r={producingTransportStats:t?t==null?void 0:t.transportReport:void 0,consumingTransportStats:i?i==null?void 0:i.transportReport:void 0,producerStats:[].concat((t==null?void 0:t.producerReport)||[]).concat((i==null?void 0:i.producerReport)||[]),consumerStats:[].concat((i==null?void 0:i.consumerReport)||[]).concat((t==null?void 0:t.consumerReport)||[])};if(e&&r.producerStats.length===0&&r.consumerStats.length===0){await this.eventHandler.flush();return}this.eventHandler.callEvent({event:ne.PING_STAT,metaData:r,timestamp:new Date})}sendIVSPlayerRebufferEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_REBUFFERING,timestamp:new Date})}sendIVSPlayerAudioBlockEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_AUDIO_BLOCKED,timestamp:new Date})}sendIVSPlayerPlaybackBlockedEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_PLAYBACK_BLOCKED,timestamp:new Date})}sendIVSPlayerNetworkUnavailableEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_NETWORK_UNAVAILABLE,timestamp:new Date})}sendIVSPlayerInitializedEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_INITIALIZED,timestamp:new Date})}sendIVSPlayerWorkerErrorEvent(){this.eventHandler.callEvent({event:ne.IVS_PLAYER_WORKER_ERROR,timestamp:new Date})}sendIVSPlayerErrorEvent(e){this.eventHandler.callEvent({event:ne.IVS_PLAYER_ERROR,timestamp:new Date,metaData:e})}sendIVSPlayerRecoverableErrorEvent(e){this.eventHandler.callEvent({event:ne.IVS_PLAYER_RECOVERABLE_ERROR,timestamp:new Date,metaData:e})}sendIVSPlayerAnalyticsEvent(e){this.eventHandler.callEvent({event:ne.IVS_PLAYER_ANALYTICS_EVENT,timestamp:new Date,metaData:e})}sendIVSPlayerPlaybackRateChangedEvent(e){this.eventHandler.callEvent({event:ne.IVS_PLAYER_PLAYBACK_RATE_CHANGED,timestamp:new Date,metaData:{updatedPlaybackRate:e}})}sendIVSPlayerQualityChanged(e){this.eventHandler.callEvent({event:ne.IVS_PLAYER_QUALITY_CHANGED,timestamp:new Date,metaData:e})}sendPlayerLiveLatency(e){this.eventHandler.callEvent({event:ne.LIVESTREAM_LATENCY,timestamp:new Date,metaData:{latency:e}})}sendDisconnectEvent(){this.eventHandler.callEvent({event:ne.DISCONNECT,timestamp:new Date})}sendReconnectEvent(){this.eventHandler.callEvent({event:ne.RECONNECT_ATTEMPT,timestamp:new Date})}};xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"registerIceServers",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"registerConsumer",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"registerProducer",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendConsumerSharedMediaStateEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"registerProducingTransport",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"registerConsumingTransport",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"deRegisterConsumer",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"deRegisterProducer",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"disconnectConsumingTransport",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"disconnectProducingTransport",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendPreCallTestBeginEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendScreenShareToggleEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendScreenShareRequestedEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendActiveSpeakerEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"devices",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"selectedDevice",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"mediaPermission",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"mediaPlaybackFailed",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"mediaTrackMuted",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"tabChanged",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"browserBackgrounded",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"browserForegrounded",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"legacySwitch",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"getPreCallTestResults",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendCallJoinBeginEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendNetworkQualityTestBeginEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendWebSocketConnectedEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendTransportConnectedEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendAudioToggleEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendVideoToggleEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendParticipantRoleToggleEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"startPingStats",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"stopPingStats",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendPingStatsEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerRebufferEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerAudioBlockEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerPlaybackBlockedEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerNetworkUnavailableEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerInitializedEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerWorkerErrorEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerErrorEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerRecoverableErrorEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerAnalyticsEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerPlaybackRateChangedEvent",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendIVSPlayerQualityChanged",null);xe([Oe(TypeError,(e,t)=>Ae.error(t,e))],ke.prototype,"sendPlayerLiveLatency",null);ke=xe([bX(TypeError,(e,t)=>Ae.error(t,e))],ke);const _X=ke;class wX extends yr{constructor(){super(...arguments),_(this,"stats"),_(this,"roomURL"),_(this,"peerId"),_(this,"backend"),_(this,"iceServers"),_(this,"initialized",!1),_(this,"stalled",!1),_(this,"ipInformation"),_(this,"logger")}async initialize({peerId:t,engineName:i,env:r=ch.PRODUCTION,iceServers:n,apiBase:s="https://api.cluster.dyte.in",flags:a,logger:o=console}){var c,d,l;try{this.peerId=t,this.logger=o,this.ipInformation=await DS.getIPDetails({peerId:t}),this.backend=new _X(s,i,r,a,o,t),this.iceServers=n,(c=this.backend)==null||c.registerIceServers(this.iceServers),this.initialized=!0,(l=(d=this.backend)==null?void 0:d.eventHandler)==null||l.emit("initialized",this.ipInformation),this.emit("initialized",this.ipInformation),this.startPreCallTest()}catch(u){this.logger.error("callStats::CallStatsIntegration: ",{error:{reason:u.reason}}),this.stallCallStats()}}setRoomName(t){this.roomURL=t}configureSendTransport(t){var i;(i=this.backend)==null||i.registerProducingTransport(t)}configureRecvTransport(t){var i;(i=this.backend)==null||i.registerConsumingTransport(t)}async candidateRegionalNetworkQualityTest(t){var i;try{(i=this.backend)==null||i.sendNetworkQualityTestBeginEvent(t)}catch(r){this.logger.error("callStats::sendNetworkQualityTestBeginEvent",{error:{reason:r.reason}})}}async roomJoined(t){var i,r;(i=this.backend)==null||i.sendCallJoinBeginEvent(t),this.backend,(r=this.backend)==null||r.startPingStats()}audioOff(){var t;(t=this.backend)==null||t.sendAudioToggleEvent(!1)}audioOn(){var t;(t=this.backend)==null||t.sendAudioToggleEvent(!0)}videoOff(){var t;(t=this.backend)==null||t.sendVideoToggleEvent(!1)}videoOn(){var t;(t=this.backend)==null||t.sendVideoToggleEvent(!0)}callEnded(){var t,i;(t=this.backend)==null||t.stopPingStats(),(i=this.backend)==null||i.sendDisconnectEvent()}screenShareStart(t){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!0,t)}consumerSharedMediaState(t,i){var r;(r=this.backend)==null||r.sendConsumerSharedMediaStateEvent(t,i)}screenShareStop(t){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!1,t)}screenShareRequested(){var t;(t=this.backend)==null||t.sendScreenShareRequestedEvent()}activeSpeaker(t){var i;t===this.peerId&&((i=this.backend)==null||i.sendActiveSpeakerEvent(t))}devices(t,i){var r;(r=this.backend)==null||r.devices(t,i)}selectedDevice(t,i){var r;(r=this.backend)==null||r.selectedDevice(t,i)}mediaPermission(t,i){var r;(r=this.backend)==null||r.mediaPermission(t,i)}mediaPlaybackFailed(t){var i;(i=this.backend)==null||i.mediaPlaybackFailed(t)}mediaTrackMuted(t){var i;(i=this.backend)==null||i.mediaTrackMuted(t)}tabChanged(t=!1){var i;(i=this.backend)==null||i.tabChanged(t)}browserBackgrounded(){var t;(t=this.backend)==null||t.browserBackgrounded()}browserForegrounded(){var t;(t=this.backend)==null||t.browserForegrounded()}legacySwitch(t){var i;(i=this.backend)==null||i.legacySwitch(t)}async startPreCallTest(){var t;(t=this.backend)==null||t.sendPreCallTestBeginEvent()}onPreCallTestResults(t){var i;return(i=this.backend)==null||i.eventHandler.once("precall_end",t),t}onReceivingConsumerAudioStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consumer_audio_status",t)}onReceivingConsumerVideoStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consumer_video_status",t)}onReceivingProducerAudioStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producer_audio_status",t)}onReceivingProducerVideoStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producer_video_status",t)}onReceivingProducingTransportStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("producing_transport_status",t)}onReceivingConsumingTransportStatus(t){var i;(i=this.backend)==null||i.eventHandler.on("consuming_transport_status",t)}onSafeInitialization(t){if(this.initialized)t(this.ipInformation,!1);else if(!this.stalled){const i=r=>{t(r,!0)};return this.once("initialized",i),i}return()=>{}}removeInitializationListener(t){this.removeListener("initialized",t)}stallCallStats(){this.stalled=!0,this.removeAllListeners("initialized")}ivsPlayerEvent(t,i){var r,n,s,a,o,c,d,l,u,f,y;switch(t){case"PlayerRebuffering":(r=this.backend)==null||r.sendIVSPlayerRebufferEvent();break;case"PlayerAudioBlocked":(n=this.backend)==null||n.sendIVSPlayerAudioBlockEvent();break;case"PlayerPlaybackBlocked":(s=this.backend)==null||s.sendIVSPlayerPlaybackBlockedEvent();break;case"PlayerNetworkUnavailable":(a=this.backend)==null||a.sendIVSPlayerNetworkUnavailableEvent();break;case"PlayerInitialized":(o=this.backend)==null||o.sendIVSPlayerInitializedEvent();break;case"PlayerWorkerError":(c=this.backend)==null||c.sendIVSPlayerWorkerErrorEvent();break;case"PlayerError":(d=this.backend)==null||d.sendIVSPlayerErrorEvent(i);break;case"PlayerRecoverableError":(l=this.backend)==null||l.sendIVSPlayerRecoverableErrorEvent(i);break;case"PlayerAnalyticsEvent":(u=this.backend)==null||u.sendIVSPlayerAnalyticsEvent(i);break;case"PlayerPlaybackRateChanged":(f=this.backend)==null||f.sendIVSPlayerPlaybackRateChangedEvent(i);break;case"PlayerQualityChanged":(y=this.backend)==null||y.sendIVSPlayerQualityChanged(i);break}}livestreamLatency(t){var i;(i=this.backend)==null||i.sendPlayerLiveLatency(t)}}const de=new wX;de.setMaxListeners(30);function SX(e){const{length:t}=this,i=e>=0?e:t+e;return i<0||i>=t?void 0:this[i]}Array.prototype.at||Object.assign(Array.prototype,{at:SX});function EX(e){const{length:t}=this,i=e>=0?e:t+e;return i<0||i>=t?void 0:this[i]}String.prototype.at||Object.assign(String.prototype,{at:EX});var dh;(function(e){e.skip="SKIP",e.onAccept="ON_ACCEPT",e.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",e.skipOnAccept="SKIP_ON_ACCEPT"})(dh||(dh={}));var Fc;(function(e){e.none="NONE",e.recorder="RECORDER",e.livestreamer="LIVESTREAMER"})(Fc||(Fc={}));var Bm;(function(e){e.groupCall="GROUP_CALL",e.webinar="WEBINAR",e.audioRoom="AUDIO_ROOM",e.livestream="LIVESTREAM"})(Bm||(Bm={}));var I2;(function(e){e.SKIP="skip",e.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",e.ON_ACCEPT="skipOnAccept",e.SKIP_ON_ACCEPT="skipOnAccept"})(I2||(I2={}));Bm.groupCall,dh.skipOnAccept,Fc.none;Bm.groupCall,Fc.none,dh.skipOnAccept;let q3="hXgU8Wc8pwuGNq9ms5q9Hh";var O2;typeof process<"u"&&(O2=process==null?void 0:process.env)!=null&&O2.FLAGSMITH_ENVIRONMENT_KEY&&(q3={}.FLAGSMITH_ENVIRONMENT_KEY);function TX(e=[]){const t={};return e.forEach(i=>{t[i.feature.name]={enabled:i.enabled,value:i.feature_state_value}}),t}class kX{constructor(t=q3){_(this,"flags",{}),_(this,"environmentKey",null),this.environmentKey=t,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(t,i={},r=!1,n=5e3){const s=JSON.parse(JSON.stringify(i)),a=Object.entries(s).map(o=>({trait_key:o[0],trait_value:o[1]}));try{const o="_"+(Math.random()+1).toString(36).substring(2),c=await Am.post("https://edge.api.flagsmith.com/api/v1/identities/",{identifier:t+(r?o:""),traits:a},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:n});this.flags=TX(c.data.flags||[])}catch{}return this.flags}getValue(t){return this.flags&&this.flags[t]&&this.flags[t].value}hasFeature(t){return this.flags&&this.flags[t]&&this.flags[t].enabled}getAllFlags(){return this.flags}}const ge=new kX,J3=[-2,-1,0,1,2],PX=[0,1,2,3,4];function CX(e){let t="0",i="0",r="0";if(e.length==4)t="0x"+e[1]+e[1],i="0x"+e[2]+e[2],r="0x"+e[3]+e[3];else if(e.length==7)t="0x"+e[1]+e[2],i="0x"+e[3]+e[4],r="0x"+e[5]+e[6];else throw new Error("[dyte] Invalid hex color code provided");return[+t,+i,+r]}const RX=(e,t,i)=>{let r,n,s;if(t==0)r=n=s=i;else{const a=(d,l,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?d+(l-d)*6*u:u<.5?l:u<.6666666666666666?d+(l-d)*(.6666666666666666-u)*6:d),o=i<.5?i*(1+t):i+t-i*t,c=2*i-o;r=a(c,o,e+1/3),n=a(c,o,e),s=a(c,o,e-1/3)}return[Math.round(r*255),Math.round(n*255),Math.round(s*255)]},xX=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),n=Math.min(e,t,i);let s,a;const o=(r+n)/2;if(r==n)s=a=0;else{const c=r-n;switch(a=o>.5?c/(2-r-n):c/(r+n),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4;break}s/=6}return[s,a,o]},AX=(e,t,i)=>{const r=n=>n.toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(i)}`},K3=(e,t=J3,i=.4)=>{const r=[],[n,s,a]=CX(e),[o,c,d]=xX(n,s,a),l=Math.round(d*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const u=t.findIndex(P=>P===0);if(u===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const f=5-u,y=u+1,b=(100-l)/f,k=l/y;for(const P of t){let w;P<0?w=l+P*k*i:P>0?w=l+P*b*i:w=l;const[E,R,D]=RX(o,c,w/100);r.push(AX(E,R,D))}return r},IX=e=>{const[t,i,r,n,s]=K3(e,J3);return{300:t,400:i,500:r,600:n,700:s}},OX=e=>{const[t,i,r,n,s]=K3(e,PX);return{1e3:t,900:i,800:r,700:n,600:s}};function MX(){this.__data__=[],this.size=0}function Y3(e,t){return e===t||e!==e&&t!==t}function Gv(e,t){for(var i=e.length;i--;)if(Y3(e[i][0],t))return i;return-1}var DX=Array.prototype,LX=DX.splice;function NX(e){var t=this.__data__,i=Gv(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():LX.call(t,i,1),--this.size,!0}function UX(e){var t=this.__data__,i=Gv(t,e);return i<0?void 0:t[i][1]}function jX(e){return Gv(this.__data__,e)>-1}function $X(e,t){var i=this.__data__,r=Gv(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function _a(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}_a.prototype.clear=MX;_a.prototype.delete=NX;_a.prototype.get=UX;_a.prototype.has=jX;_a.prototype.set=$X;function FX(){this.__data__=new _a,this.size=0}function BX(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function VX(e){return this.__data__.get(e)}function zX(e){return this.__data__.has(e)}var HX=typeof global=="object"&&global&&global.Object===Object&&global;const Q3=HX;var GX=typeof self=="object"&&self&&self.Object===Object&&self,WX=Q3||GX||Function("return this")();const is=WX;var qX=is.Symbol;const xl=qX;var Z3=Object.prototype,JX=Z3.hasOwnProperty,KX=Z3.toString,Iu=xl?xl.toStringTag:void 0;function YX(e){var t=JX.call(e,Iu),i=e[Iu];try{e[Iu]=void 0;var r=!0}catch{}var n=KX.call(e);return r&&(t?e[Iu]=i:delete e[Iu]),n}var QX=Object.prototype,ZX=QX.toString;function XX(e){return ZX.call(e)}var eee="[object Null]",tee="[object Undefined]",M2=xl?xl.toStringTag:void 0;function Gl(e){return e==null?e===void 0?tee:eee:M2&&M2 in Object(e)?YX(e):XX(e)}function So(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var iee="[object AsyncFunction]",ree="[object Function]",nee="[object GeneratorFunction]",see="[object Proxy]";function X3(e){if(!So(e))return!1;var t=Gl(e);return t==ree||t==nee||t==iee||t==see}var aee=is["__core-js_shared__"];const Q0=aee;var D2=function(){var e=/[^.]+$/.exec(Q0&&Q0.keys&&Q0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function oee(e){return!!D2&&D2 in e}var cee=Function.prototype,dee=cee.toString;function Kc(e){if(e!=null){try{return dee.call(e)}catch{}try{return e+""}catch{}}return""}var lee=/[\\^$.*+?()[\]{}|]/g,uee=/^\[object .+?Constructor\]$/,pee=Function.prototype,hee=Object.prototype,gee=pee.toString,fee=hee.hasOwnProperty,mee=RegExp("^"+gee.call(fee).replace(lee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vee(e){if(!So(e)||oee(e))return!1;var t=X3(e)?mee:uee;return t.test(Kc(e))}function yee(e,t){return e==null?void 0:e[t]}function Yc(e,t){var i=yee(e,t);return vee(i)?i:void 0}var bee=Yc(is,"Map");const lh=bee;var _ee=Yc(Object,"create");const uh=_ee;function wee(){this.__data__=uh?uh(null):{},this.size=0}function See(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Eee="__lodash_hash_undefined__",Tee=Object.prototype,kee=Tee.hasOwnProperty;function Pee(e){var t=this.__data__;if(uh){var i=t[e];return i===Eee?void 0:i}return kee.call(t,e)?t[e]:void 0}var Cee=Object.prototype,Ree=Cee.hasOwnProperty;function xee(e){var t=this.__data__;return uh?t[e]!==void 0:Ree.call(t,e)}var Aee="__lodash_hash_undefined__";function Iee(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=uh&&t===void 0?Aee:t,this}function Bc(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Bc.prototype.clear=wee;Bc.prototype.delete=See;Bc.prototype.get=Pee;Bc.prototype.has=xee;Bc.prototype.set=Iee;function Oee(){this.size=0,this.__data__={hash:new Bc,map:new(lh||_a),string:new Bc}}function Mee(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Wv(e,t){var i=e.__data__;return Mee(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Dee(e){var t=Wv(this,e).delete(e);return this.size-=t?1:0,t}function Lee(e){return Wv(this,e).get(e)}function Nee(e){return Wv(this,e).has(e)}function Uee(e,t){var i=Wv(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function Ao(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Ao.prototype.clear=Oee;Ao.prototype.delete=Dee;Ao.prototype.get=Lee;Ao.prototype.has=Nee;Ao.prototype.set=Uee;var jee=200;function $ee(e,t){var i=this.__data__;if(i instanceof _a){var r=i.__data__;if(!lh||r.length<jee-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ao(r)}return i.set(e,t),this.size=i.size,this}function Wl(e){var t=this.__data__=new _a(e);this.size=t.size}Wl.prototype.clear=FX;Wl.prototype.delete=BX;Wl.prototype.get=VX;Wl.prototype.has=zX;Wl.prototype.set=$ee;function Fee(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var Bee=function(){try{var e=Yc(Object,"defineProperty");return e({},"",{}),e}catch{}}();const L2=Bee;function eD(e,t,i){t=="__proto__"&&L2?L2(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var Vee=Object.prototype,zee=Vee.hasOwnProperty;function tD(e,t,i){var r=e[t];(!(zee.call(e,t)&&Y3(r,i))||i===void 0&&!(t in e))&&eD(e,t,i)}function qv(e,t,i,r){var n=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=r?r(i[o],e[o],o,i,e):void 0;c===void 0&&(c=e[o]),n?eD(i,o,c):tD(i,o,c)}return i}function Hee(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}function ql(e){return e!=null&&typeof e=="object"}var Gee="[object Arguments]";function N2(e){return ql(e)&&Gl(e)==Gee}var iD=Object.prototype,Wee=iD.hasOwnProperty,qee=iD.propertyIsEnumerable,Jee=N2(function(){return arguments}())?N2:function(e){return ql(e)&&Wee.call(e,"callee")&&!qee.call(e,"callee")};const rD=Jee;var Kee=Array.isArray;const Jv=Kee;function Yee(){return!1}var nD=typeof qe=="object"&&qe&&!qe.nodeType&&qe,U2=nD&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,Qee=U2&&U2.exports===nD,j2=Qee?is.Buffer:void 0,Zee=j2?j2.isBuffer:void 0,Xee=Zee||Yee;const LS=Xee;var ete=9007199254740991,tte=/^(?:0|[1-9]\d*)$/;function ite(e,t){var i=typeof e;return t=t==null?ete:t,!!t&&(i=="number"||i!="symbol"&&tte.test(e))&&e>-1&&e%1==0&&e<t}var rte=9007199254740991;function sD(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=rte}var nte="[object Arguments]",ste="[object Array]",ate="[object Boolean]",ote="[object Date]",cte="[object Error]",dte="[object Function]",lte="[object Map]",ute="[object Number]",pte="[object Object]",hte="[object RegExp]",gte="[object Set]",fte="[object String]",mte="[object WeakMap]",vte="[object ArrayBuffer]",yte="[object DataView]",bte="[object Float32Array]",_te="[object Float64Array]",wte="[object Int8Array]",Ste="[object Int16Array]",Ete="[object Int32Array]",Tte="[object Uint8Array]",kte="[object Uint8ClampedArray]",Pte="[object Uint16Array]",Cte="[object Uint32Array]",Ut={};Ut[bte]=Ut[_te]=Ut[wte]=Ut[Ste]=Ut[Ete]=Ut[Tte]=Ut[kte]=Ut[Pte]=Ut[Cte]=!0;Ut[nte]=Ut[ste]=Ut[vte]=Ut[ate]=Ut[yte]=Ut[ote]=Ut[cte]=Ut[dte]=Ut[lte]=Ut[ute]=Ut[pte]=Ut[hte]=Ut[gte]=Ut[fte]=Ut[mte]=!1;function Rte(e){return ql(e)&&sD(e.length)&&!!Ut[Gl(e)]}function NS(e){return function(t){return e(t)}}var aD=typeof qe=="object"&&qe&&!qe.nodeType&&qe,Dp=aD&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,xte=Dp&&Dp.exports===aD,Z0=xte&&Q3.process,Ate=function(){try{var e=Dp&&Dp.require&&Dp.require("util").types;return e||Z0&&Z0.binding&&Z0.binding("util")}catch{}}();const Al=Ate;var $2=Al&&Al.isTypedArray,Ite=$2?NS($2):Rte;const oD=Ite;var Ote=Object.prototype,Mte=Ote.hasOwnProperty;function cD(e,t){var i=Jv(e),r=!i&&rD(e),n=!i&&!r&&LS(e),s=!i&&!r&&!n&&oD(e),a=i||r||n||s,o=a?Hee(e.length,String):[],c=o.length;for(var d in e)(t||Mte.call(e,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||ite(d,c)))&&o.push(d);return o}var Dte=Object.prototype;function Kv(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Dte;return e===i}function dD(e,t){return function(i){return e(t(i))}}var Lte=dD(Object.keys,Object);const Nte=Lte;var Ute=Object.prototype,jte=Ute.hasOwnProperty;function lD(e){if(!Kv(e))return Nte(e);var t=[];for(var i in Object(e))jte.call(e,i)&&i!="constructor"&&t.push(i);return t}function US(e){return e!=null&&sD(e.length)&&!X3(e)}function jS(e){return US(e)?cD(e):lD(e)}function $te(e,t){return e&&qv(t,jS(t),e)}function Fte(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var Bte=Object.prototype,Vte=Bte.hasOwnProperty;function zte(e){if(!So(e))return Fte(e);var t=Kv(e),i=[];for(var r in e)r=="constructor"&&(t||!Vte.call(e,r))||i.push(r);return i}function $S(e){return US(e)?cD(e,!0):zte(e)}function Hte(e,t){return e&&qv(t,$S(t),e)}var uD=typeof qe=="object"&&qe&&!qe.nodeType&&qe,F2=uD&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,Gte=F2&&F2.exports===uD,B2=Gte?is.Buffer:void 0,V2=B2?B2.allocUnsafe:void 0;function Wte(e,t){if(t)return e.slice();var i=e.length,r=V2?V2(i):new e.constructor(i);return e.copy(r),r}function qte(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}function Jte(e,t){for(var i=-1,r=e==null?0:e.length,n=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[n++]=a)}return s}function pD(){return[]}var Kte=Object.prototype,Yte=Kte.propertyIsEnumerable,z2=Object.getOwnPropertySymbols,Qte=z2?function(e){return e==null?[]:(e=Object(e),Jte(z2(e),function(t){return Yte.call(e,t)}))}:pD;const FS=Qte;function Zte(e,t){return qv(e,FS(e),t)}function hD(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var Xte=dD(Object.getPrototypeOf,Object);const gD=Xte;var eie=Object.getOwnPropertySymbols,tie=eie?function(e){for(var t=[];e;)hD(t,FS(e)),e=gD(e);return t}:pD;const fD=tie;function iie(e,t){return qv(e,fD(e),t)}function mD(e,t,i){var r=t(e);return Jv(e)?r:hD(r,i(e))}function rie(e){return mD(e,jS,FS)}function nie(e){return mD(e,$S,fD)}var sie=Yc(is,"DataView");const h_=sie;var aie=Yc(is,"Promise");const g_=aie;var oie=Yc(is,"Set");const f_=oie;var cie=Yc(is,"WeakMap");const m_=cie;var H2="[object Map]",die="[object Object]",G2="[object Promise]",W2="[object Set]",q2="[object WeakMap]",J2="[object DataView]",lie=Kc(h_),uie=Kc(lh),pie=Kc(g_),hie=Kc(f_),gie=Kc(m_),Zo=Gl;(h_&&Zo(new h_(new ArrayBuffer(1)))!=J2||lh&&Zo(new lh)!=H2||g_&&Zo(g_.resolve())!=G2||f_&&Zo(new f_)!=W2||m_&&Zo(new m_)!=q2)&&(Zo=function(e){var t=Gl(e),i=t==die?e.constructor:void 0,r=i?Kc(i):"";if(r)switch(r){case lie:return J2;case uie:return H2;case pie:return G2;case hie:return W2;case gie:return q2}return t});const Yv=Zo;var fie=Object.prototype,mie=fie.hasOwnProperty;function vie(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&mie.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var yie=is.Uint8Array;const K2=yie;function BS(e){var t=new e.constructor(e.byteLength);return new K2(t).set(new K2(e)),t}function bie(e,t){var i=t?BS(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var _ie=/\w*$/;function wie(e){var t=new e.constructor(e.source,_ie.exec(e));return t.lastIndex=e.lastIndex,t}var Y2=xl?xl.prototype:void 0,Q2=Y2?Y2.valueOf:void 0;function Sie(e){return Q2?Object(Q2.call(e)):{}}function Eie(e,t){var i=t?BS(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var Tie="[object Boolean]",kie="[object Date]",Pie="[object Map]",Cie="[object Number]",Rie="[object RegExp]",xie="[object Set]",Aie="[object String]",Iie="[object Symbol]",Oie="[object ArrayBuffer]",Mie="[object DataView]",Die="[object Float32Array]",Lie="[object Float64Array]",Nie="[object Int8Array]",Uie="[object Int16Array]",jie="[object Int32Array]",$ie="[object Uint8Array]",Fie="[object Uint8ClampedArray]",Bie="[object Uint16Array]",Vie="[object Uint32Array]";function zie(e,t,i){var r=e.constructor;switch(t){case Oie:return BS(e);case Tie:case kie:return new r(+e);case Mie:return bie(e,i);case Die:case Lie:case Nie:case Uie:case jie:case $ie:case Fie:case Bie:case Vie:return Eie(e,i);case Pie:return new r;case Cie:case Aie:return new r(e);case Rie:return wie(e);case xie:return new r;case Iie:return Sie(e)}}var Z2=Object.create,Hie=function(){function e(){}return function(t){if(!So(t))return{};if(Z2)return Z2(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();const Gie=Hie;function Wie(e){return typeof e.constructor=="function"&&!Kv(e)?Gie(gD(e)):{}}var qie="[object Map]";function Jie(e){return ql(e)&&Yv(e)==qie}var X2=Al&&Al.isMap,Kie=X2?NS(X2):Jie;const Yie=Kie;var Qie="[object Set]";function Zie(e){return ql(e)&&Yv(e)==Qie}var eC=Al&&Al.isSet,Xie=eC?NS(eC):Zie;const ere=Xie;var tre=1,ire=2,rre=4,vD="[object Arguments]",nre="[object Array]",sre="[object Boolean]",are="[object Date]",ore="[object Error]",yD="[object Function]",cre="[object GeneratorFunction]",dre="[object Map]",lre="[object Number]",bD="[object Object]",ure="[object RegExp]",pre="[object Set]",hre="[object String]",gre="[object Symbol]",fre="[object WeakMap]",mre="[object ArrayBuffer]",vre="[object DataView]",yre="[object Float32Array]",bre="[object Float64Array]",_re="[object Int8Array]",wre="[object Int16Array]",Sre="[object Int32Array]",Ere="[object Uint8Array]",Tre="[object Uint8ClampedArray]",kre="[object Uint16Array]",Pre="[object Uint32Array]",Ct={};Ct[vD]=Ct[nre]=Ct[mre]=Ct[vre]=Ct[sre]=Ct[are]=Ct[yre]=Ct[bre]=Ct[_re]=Ct[wre]=Ct[Sre]=Ct[dre]=Ct[lre]=Ct[bD]=Ct[ure]=Ct[pre]=Ct[hre]=Ct[gre]=Ct[Ere]=Ct[Tre]=Ct[kre]=Ct[Pre]=!0;Ct[ore]=Ct[yD]=Ct[fre]=!1;function _f(e,t,i,r,n,s){var a,o=t&tre,c=t&ire,d=t&rre;if(i&&(a=n?i(e,r,n,s):i(e)),a!==void 0)return a;if(!So(e))return e;var l=Jv(e);if(l){if(a=vie(e),!o)return qte(e,a)}else{var u=Yv(e),f=u==yD||u==cre;if(LS(e))return Wte(e,o);if(u==bD||u==vD||f&&!n){if(a=c||f?{}:Wie(e),!o)return c?iie(e,Hte(a,e)):Zte(e,$te(a,e))}else{if(!Ct[u])return n?e:{};a=zie(e,u,o)}}s||(s=new Wl);var y=s.get(e);if(y)return y;s.set(e,a),ere(e)?e.forEach(function(P){a.add(_f(P,t,i,P,e,s))}):Yie(e)&&e.forEach(function(P,w){a.set(w,_f(P,t,i,w,e,s))});var b=d?c?nie:rie:c?$S:jS,k=l?void 0:b(e);return Fee(k||e,function(P,w){k&&(w=P,P=e[w]),tD(a,w,_f(P,t,i,w,e,s))}),a}var Cre=1,Rre=4;function VS(e){return _f(e,Cre|Rre)}var xre="[object Symbol]";function Are(e){return typeof e=="symbol"||ql(e)&&Gl(e)==xre}var Ire="Expected a function";function Vm(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ire);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=e.apply(this,r);return i.cache=s.set(n,a)||s,a};return i.cache=new(Vm.Cache||Ao),i}Vm.Cache=Ao;var Zn;(function(e){e.GroupCall="GROUP_CALL",e.Webinar="WEBINAR",e.AudioRoom="AUDIO_ROOM",e.Livestream="LIVESTREAM"})(Zn||(Zn={}));var zm;(function(e){e.Skip="SKIP",e.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",e.SkipOnAccept="SKIP_ON_ACCEPT"})(zm||(zm={}));var Li;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED",e.CanRequest="CAN_REQUEST"})(Li||(Li={}));var Hm;(function(e){e.Allowed="ALLOWED",e.NotAllowed="NOT_ALLOWED"})(Hm||(Hm={}));var tC;(function(e){e.FULL_ACCESS="FULL_ACCESS",e.VIEW_ONLY="VIEW_ONLY"})(tC||(tC={}));const Ore={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:IX("#2160FD"),background:OX("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function _D(){return VS(Ore)}const Mre={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:zm.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:Li.Allowed,can_consume:Hm.Allowed},audio:{can_produce:Li.Allowed},screenshare:{can_produce:Li.Allowed,can_consume:Hm.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Fc.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{oldTheme:{setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",textPrimary:"#EEEEEE",videoBackground:"#1A1A1A"},dimensions:{mode:"fillParent"},grid:{multi:{maxVideoCount:6,videoFit:"cover"},single:{maxVideoCount:6,videoFit:"cover"},defaultView:"MULTI"},controls:{pip_toggle:!1},plugins:[]},design_tokens:_D(),config_diff:{}},config:{view_type:Zn.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"hybrid"};function Dre(){return VS(Mre)}Fc.none,dh.skip;const Lre={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:zm.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:Li.Allowed},audio:{can_produce:Li.Allowed},screenshare:{can_produce:Li.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Fc.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{design_tokens:_D(),config_diff:{}},config:{view_type:Zn.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"2.0.0"};function zS(){return VS(Lre)}var Wn={},Nre={get exports(){return Wn},set exports(e){Wn=e}},X0,iC;function Ure(){if(iC)return X0;iC=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,s=r*365.25;X0=function(l,u){u=u||{};var f=typeof l;if(f==="string"&&l.length>0)return a(l);if(f==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var f=parseFloat(u[1]),y=(u[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=i?Math.round(l/i)+"h":u>=t?Math.round(l/t)+"m":u>=e?Math.round(l/e)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=i?d(l,u,i,"hour"):u>=t?d(l,u,t,"minute"):u>=e?d(l,u,e,"second"):l+" ms"}function d(l,u,f,y){var b=u>=f*1.5;return Math.round(l/f)+" "+y+(b?"s":"")}return X0}function jre(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=n,i.enabled=a,i.humanize=Ure(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let u=0;for(let f=0;f<l.length;f++)u=(u<<5)-u+l.charCodeAt(f),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(l){let u,f=null,y,b;function k(...P){if(!k.enabled)return;const w=k,E=Number(new Date),R=E-(u||E);w.diff=R,w.prev=u,w.curr=E,u=E,P[0]=i.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let D=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(V,B)=>{if(V==="%%")return"%";D++;const W=i.formatters[B];if(typeof W=="function"){const q=P[D];V=W.call(w,q),P.splice(D,1),D--}return V}),i.formatArgs.call(w,P),(w.log||i.log).apply(w,P)}return k.namespace=l,k.useColors=i.useColors(),k.color=i.selectColor(l),k.extend=r,k.destroy=i.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(y!==i.namespaces&&(y=i.namespaces,b=i.enabled(l)),b),set:P=>{f=P}}),typeof i.init=="function"&&i.init(k),k}function r(l,u){const f=i(this.namespace+(typeof u>"u"?":":u)+l);return f.log=this.log,f}function n(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let u;const f=(typeof l=="string"?l:"").split(/[\s,]+/),y=f.length;for(u=0;u<y;u++)f[u]&&(l=f[u].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...i.names.map(o),...i.skips.map(o).map(u=>"-"+u)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let u,f;for(u=0,f=i.skips.length;u<f;u++)if(i.skips[u].test(l))return!1;for(u=0,f=i.names.length;u<f;u++)if(i.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var $re=jre;(function(e,t){t.formatArgs=r,t.save=n,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let l=0,u=0;c[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(l++,f==="%c"&&(u=l))}),c.splice(u,0,d)}t.log=console.debug||console.log||(()=>{});function n(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=$re(t);const{formatters:o}=e.exports;o.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(Nre,Wn);const gd="mediasoup-client";let jr=class{constructor(e){e?(this._debug=Wn(`${gd}:${e}`),this._warn=Wn(`${gd}:WARN:${e}`),this._error=Wn(`${gd}:ERROR:${e}`)):(this._debug=Wn(gd),this._warn=Wn(`${gd}:WARN`),this._error=Wn(`${gd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const Fre=new jr("EnhancedEventEmitter");let En=class extends yr.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...t){return super.emit(e,...t)}safeEmit(e,...t){const i=super.listenerCount(e);try{return super.emit(e,...t)}catch(r){return Fre.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,r),Boolean(i)}}on(e,t){return super.on(e,t),this}off(e,t){return super.off(e,t),this}addListener(e,t){return super.on(e,t),this}prependListener(e,t){return super.prependListener(e,t),this}once(e,t){return super.once(e,t),this}prependOnceListener(e,t){return super.prependOnceListener(e,t),this}removeListener(e,t){return super.off(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}},Cr=class wD extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,wD):this.stack=new Error(t).stack}},Ft=class SD extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,SD):this.stack=new Error(t).stack}};function ki(e,t){return typeof e>"u"?t:JSON.parse(JSON.stringify(e))}function e1(){return Math.round(Math.random()*1e7)}var v_={};(function(e){const t=Wn("h264-profile-level-id");t.log=console.info.bind(console);const i=1,r=2,n=3,s=4,a=5;e.ProfileConstrainedBaseline=i,e.ProfileBaseline=r,e.ProfileMain=n,e.ProfileConstrainedHigh=s,e.ProfileHigh=a;const o=0,c=10,d=11,l=12,u=13,f=20,y=21,b=22,k=30,P=31,w=32,E=40,R=41,D=42,V=50,B=51,W=52;e.Level1_b=o,e.Level1=c,e.Level1_1=d,e.Level1_2=l,e.Level1_3=u,e.Level2=f,e.Level2_1=y,e.Level2_2=b,e.Level3=k,e.Level3_1=P,e.Level3_2=w,e.Level4=E,e.Level4_1=R,e.Level4_2=D,e.Level5=V,e.Level5_1=B,e.Level5_2=W;class q{constructor(re,pe){this.profile=re,this.level=pe}}e.ProfileLevelId=q;const fe=new q(i,P),ae=16;class he{constructor(re){this._mask=~ii("x",re),this._maskedValue=ii("1",re)}isMatch(re){return this._maskedValue===(re&this._mask)}}class tt{constructor(re,pe,He){this.profile_idc=re,this.profile_iop=pe,this.profile=He}}const ht=[new tt(66,new he("x1xx0000"),i),new tt(77,new he("1xxx0000"),i),new tt(88,new he("11xx0000"),i),new tt(66,new he("x0xx0000"),r),new tt(88,new he("10xx0000"),r),new tt(77,new he("0x0x0000"),n),new tt(100,new he("00000000"),a),new tt(100,new he("00001100"),s)];e.parseProfileLevelId=function(H){if(typeof H!="string"||H.length!==6)return null;const re=parseInt(H,16);if(re===0)return null;const pe=re&255,He=re>>8&255,wt=re>>16&255;let Vt;switch(pe){case d:{Vt=He&ae?o:d;break}case c:case l:case u:case f:case y:case b:case k:case P:case w:case E:case R:case D:case V:case B:case W:{Vt=pe;break}default:return t("parseProfileLevelId() | unrecognized level_idc:%s",pe),null}for(const kt of ht)if(wt===kt.profile_idc&&kt.profile_iop.isMatch(He))return new q(kt.profile,Vt);return t("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},e.profileLevelIdToString=function(H){if(H.level==o)switch(H.profile){case i:return"42f00b";case r:return"42100b";case n:return"4d100b";default:return t("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",H.profile),null}let re;switch(H.profile){case i:{re="42e0";break}case r:{re="4200";break}case n:{re="4d00";break}case s:{re="640c";break}case a:{re="6400";break}default:return t("profileLevelIdToString() | unrecognized profile:%s",H.profile),null}let pe=H.level.toString(16);return pe.length===1&&(pe=`0${pe}`),`${re}${pe}`},e.parseSdpProfileLevelId=function(H={}){const re=H["profile-level-id"];return re?e.parseProfileLevelId(re):fe},e.isSameProfile=function(H={},re={}){const pe=e.parseSdpProfileLevelId(H),He=e.parseSdpProfileLevelId(re);return Boolean(pe&&He&&pe.profile===He.profile)},e.generateProfileLevelIdForAnswer=function(H={},re={}){if(!H["profile-level-id"]&&!re["profile-level-id"])return t("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const pe=e.parseSdpProfileLevelId(H),He=e.parseSdpProfileLevelId(re);if(!pe)throw new TypeError("invalid local_profile_level_id");if(!He)throw new TypeError("invalid remote_profile_level_id");if(pe.profile!==He.profile)throw new TypeError("H264 Profile mismatch");const wt=sn(H)&&sn(re),Vt=pe.level,kt=He.level,Er=dr(Vt,kt),ri=wt?Vt:Er;return t("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",pe.profile,ri),e.profileLevelIdToString(new q(pe.profile,ri))};function ii(H,re){return(re[0]===H)<<7|(re[1]===H)<<6|(re[2]===H)<<5|(re[3]===H)<<4|(re[4]===H)<<3|(re[5]===H)<<2|(re[6]===H)<<1|(re[7]===H)<<0}function Sr(H,re){return H===o?re!==c&&re!==o:re===o?H!==c:H<re}function dr(H,re){return Sr(H,re)?H:re}function sn(H={}){const re=H["level-asymmetry-allowed"];return re===1||re==="1"}})(v_);const Bre="probator",Vre=1234,zre=127;function t1(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)Hre(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)Gre(t)}function Hre(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(e.kind=i[1].toLowerCase(),e.preferredPayloadType&&typeof e.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");e.kind==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const r of Object.keys(e.parameters)){let n=e.parameters[r];if(n===void 0&&(e.parameters[r]="",n=""),typeof n!="string"&&typeof n!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${n}]`);if(r==="apt"&&typeof n!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const r of e.rtcpFeedback)ED(r)}function ED(e){if(typeof e!="object")throw new TypeError("fb is not an object");if(!e.type||typeof e.type!="string")throw new TypeError("missing fb.type");(!e.parameter||typeof e.parameter!="string")&&(e.parameter="")}function Gre(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(e.kind!=="audio"&&e.kind!=="video")throw new TypeError("invalid ext.kind");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.preferredId!="number")throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&typeof e.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&typeof e.direction!="string")throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function HS(e){if(typeof e!="object")throw new TypeError("params is not an object");if(e.mid&&typeof e.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)Wre(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)qre(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)Jre(t);if(e.rtcp&&typeof e.rtcp!="object")throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),Kre(e.rtcp)}function Wre(e){const t=new RegExp("^(audio|video)/(.+)","i");if(typeof e!="object")throw new TypeError("codec is not an object");if(!e.mimeType||typeof e.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=t.exec(e.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof e.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof e.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof e.channels!="number"&&(e.channels=1):delete e.channels,(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const r of Object.keys(e.parameters)){let n=e.parameters[r];if(n===void 0&&(e.parameters[r]="",n=""),typeof n!="string"&&typeof n!="number")throw new TypeError(`invalid codec parameter [key:${r}s, value:${n}]`);if(r==="apt"&&typeof n!="number")throw new TypeError("invalid codec apt parameter")}(!e.rtcpFeedback||!Array.isArray(e.rtcpFeedback))&&(e.rtcpFeedback=[]);for(const r of e.rtcpFeedback)ED(r)}function qre(e){if(typeof e!="object")throw new TypeError("ext is not an object");if(!e.uri||typeof e.uri!="string")throw new TypeError("missing ext.uri");if(typeof e.id!="number")throw new TypeError("missing ext.id");if(e.encrypt&&typeof e.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),(!e.parameters||typeof e.parameters!="object")&&(e.parameters={});for(const t of Object.keys(e.parameters)){let i=e.parameters[t];if(i===void 0&&(e.parameters[t]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function Jre(e){if(typeof e!="object")throw new TypeError("encoding is not an object");if(e.ssrc&&typeof e.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(e.rid&&typeof e.rid!="string")throw new TypeError("invalid encoding.rid");if(e.rtx&&typeof e.rtx!="object")throw new TypeError("invalid encoding.rtx");if(e.rtx&&typeof e.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!e.dtx||typeof e.dtx!="boolean")&&(e.dtx=!1),e.scalabilityMode&&typeof e.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function Kre(e){if(typeof e!="object")throw new TypeError("rtcp is not an object");if(e.cname&&typeof e.cname!="string")throw new TypeError("invalid rtcp.cname");(!e.reducedSize||typeof e.reducedSize!="boolean")&&(e.reducedSize=!0)}function Yre(e){if(typeof e!="object")throw new TypeError("caps is not an object");if(!e.numStreams||typeof e.numStreams!="object")throw new TypeError("missing caps.numStreams");Qre(e.numStreams)}function Qre(e){if(typeof e!="object")throw new TypeError("numStreams is not an object");if(typeof e.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof e.MIS!="number")throw new TypeError("missing numStreams.MIS")}function rC(e){if(typeof e!="object")throw new TypeError("params is not an object");if(typeof e.streamId!="number")throw new TypeError("missing params.streamId");let t=!1;if(typeof e.ordered=="boolean"?t=!0:e.ordered=!0,e.maxPacketLifeTime&&typeof e.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&typeof e.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!t&&(e.maxPacketLifeTime||e.maxRetransmits)&&(e.ordered=!1),e.label&&typeof e.label!="string")throw new TypeError("invalid params.label");if(e.protocol&&typeof e.protocol!="string")throw new TypeError("invalid params.protocol")}function Zre(e,t){const i={codecs:[],headerExtensions:[]};for(const r of t.codecs||[]){if(Lp(r))continue;const n=(e.codecs||[]).find(a=>TD(a,r,{strict:!0,modify:!0}));if(!n)continue;const s={mimeType:n.mimeType,kind:n.kind,clockRate:n.clockRate,channels:n.channels,localPayloadType:n.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:r.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:n.parameters,remoteParameters:r.parameters,rtcpFeedback:rne(n,r)};i.codecs.push(s)}for(const r of i.codecs){const n=e.codecs.find(a=>Lp(a)&&a.parameters.apt===r.localPayloadType),s=t.codecs.find(a=>Lp(a)&&a.parameters.apt===r.remotePayloadType);n&&s&&(r.localRtxPayloadType=n.preferredPayloadType,r.remoteRtxPayloadType=s.preferredPayloadType)}for(const r of t.headerExtensions){const n=e.headerExtensions.find(a=>ine(a,r));if(!n)continue;const s={kind:r.kind,uri:r.uri,sendId:n.preferredId,recvId:r.preferredId,encrypt:n.preferredEncrypt,direction:"sendrecv"};switch(r.direction){case"sendrecv":s.direction="sendrecv";break;case"recvonly":s.direction="sendonly";break;case"sendonly":s.direction="recvonly";break;case"inactive":s.direction="inactive";break}i.headerExtensions.push(s)}return i}function Xre(e){const t={codecs:[],headerExtensions:[]};for(const i of e.codecs){const r={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(t.codecs.push(r),!i.remoteRtxPayloadType)continue;const n={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};t.codecs.push(n)}for(const i of e.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const r={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};t.headerExtensions.push(r)}return t}function Tn(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of t.codecs){if(r.kind!==e)continue;const n={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(n),r.localRtxPayloadType){const s={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const r of t.headerExtensions){if(r.kind&&r.kind!==e||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const n={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(n)}return i}function Ds(e,t){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const r of t.codecs){if(r.kind!==e)continue;const n={mimeType:r.mimeType,payloadType:r.localPayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.remoteParameters,rtcpFeedback:r.rtcpFeedback};if(i.codecs.push(n),r.localRtxPayloadType){const s={mimeType:`${r.kind}/rtx`,payloadType:r.localRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.localPayloadType},rtcpFeedback:[]};i.codecs.push(s)}}for(const r of t.headerExtensions){if(r.kind&&r.kind!==e||r.direction!=="sendrecv"&&r.direction!=="sendonly")continue;const n={uri:r.uri,id:r.sendId,encrypt:r.encrypt,parameters:{}};i.headerExtensions.push(n)}if(i.headerExtensions.some(r=>r.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="goog-remb");else if(i.headerExtensions.some(r=>r.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="transport-cc");else for(const r of i.codecs)r.rtcpFeedback=(r.rtcpFeedback||[]).filter(n=>n.type!=="transport-cc"&&n.type!=="goog-remb");return i}function ts(e,t){const i=[];if(!t)i.push(e[0]),Lp(e[1])&&i.push(e[1]);else{for(let r=0;r<e.length;++r)if(TD(e[r],t)){i.push(e[r]),Lp(e[r+1])&&i.push(e[r+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function ene(e){e=ki(e,{}),HS(e);const t={mid:Bre,codecs:[],headerExtensions:[],encodings:[{ssrc:Vre}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=zre,t.headerExtensions=e.headerExtensions,t}function nC(e,t){return t.codecs.some(i=>i.kind===e)}function tne(e,t){if(HS(e),e.codecs.length===0)return!1;const i=e.codecs[0];return t.codecs.some(r=>r.remotePayloadType===i.payloadType)}function Lp(e){return e?/.+\/rtx$/i.test(e.mimeType):!1}function TD(e,t,{strict:i=!1,modify:r=!1}={}){const n=e.mimeType.toLowerCase(),s=t.mimeType.toLowerCase();if(n!==s||e.clockRate!==t.clockRate||e.channels!==t.channels)return!1;switch(n){case"video/h264":{if(i){const a=e.parameters["packetization-mode"]||0,o=t.parameters["packetization-mode"]||0;if(a!==o||!v_.isSameProfile(e.parameters,t.parameters))return!1;let c;try{c=v_.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch{return!1}r&&(c?(e.parameters["profile-level-id"]=c,t.parameters["profile-level-id"]=c):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const a=e.parameters["profile-id"]||0,o=t.parameters["profile-id"]||0;if(a!==o)return!1}break}}return!0}function ine(e,t){return!(e.kind&&t.kind&&e.kind!==t.kind||e.uri!==t.uri)}function rne(e,t){const i=[];for(const r of e.rtcpFeedback||[]){const n=(t.rtcpFeedback||[]).find(s=>s.type===r.type&&(s.parameter===r.parameter||!s.parameter&&!r.parameter));n&&i.push(n)}return i}var Ac={},Qv={},nne=p_&&p_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qv,"__esModule",{value:!0});Qv.Logger=void 0;const fd=nne(Wn),md="awaitqueue";let sne=class{constructor(e){e?(this._debug=(0,fd.default)(`${md}:${e}`),this._warn=(0,fd.default)(`${md}:WARN:${e}`),this._error=(0,fd.default)(`${md}:ERROR:${e}`)):(this._debug=(0,fd.default)(md),this._warn=(0,fd.default)(`${md}:WARN`),this._error=(0,fd.default)(`${md}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};Qv.Logger=sne;Object.defineProperty(Ac,"__esModule",{value:!0});var kD=Ac.AwaitQueue=Ac.AwaitQueueRemovedTaskError=Ac.AwaitQueueStoppedError=void 0;const ane=Qv,Pa=new ane.Logger;class GS extends Error{constructor(t){super(t!=null?t:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,GS)}}Ac.AwaitQueueStoppedError=GS;class Zv extends Error{constructor(t){super(t!=null?t:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Zv)}}Ac.AwaitQueueRemovedTaskError=Zv;class one{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(t,i){if(i=i!=null?i:t.name,Pa.debug(`push() [name:${i}]`),typeof t!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(t,"name",{value:i})}catch{}return new Promise((r,n)=>{const s={id:this.nextTaskId++,task:t,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),Pa.debug(`resolving task [name:${s.name}]`),r(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),Pa.debug(`rejecting task [name:${s.name}]: %s`,String(a)),n(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){Pa.debug("stop()"),this.stopping=!0;for(const t of this.pendingTasks.values())Pa.debug(`stop() | stopping task [name:${t.name}]`);this.stopping=!1}remove(t){Pa.debug(`remove() [taskIdx:${t}]`);const i=Array.from(this.pendingTasks.values())[t];if(!i){Pa.debug(`stop() | no task with given idx [taskIdx:${t}]`);return}i.reject(new Zv)}dump(){const t=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:i++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:t-r.enqueuedAt,executionTime:r.executedAt?t-r.executedAt:0}))}async execute(t){if(Pa.debug(`execute() [name:${t.name}]`),t.executedAt)throw new Error("task already being executed");t.executedAt=Date.now();try{const i=await t.task();t.resolve(i)}catch(i){t.reject(i)}}}kD=Ac.AwaitQueue=one;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let sC;var i1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:p_):e=>(sC||(sC=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const us=new jr("Producer");let cne=class extends En{constructor({id:e,localId:t,rtpSender:i,track:r,rtpParameters:n,stopTracks:s,disableTrackOnPause:a,zeroRtpOnPause:o,appData:c}){super(),this._closed=!1,this._observer=new En,us.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=i,this._track=r,this._kind=r.kind,this._rtpParameters=n,this._paused=a?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=s,this._disableTrackOnPause=a,this._zeroRtpOnPause=o,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(us.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(us.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new Ft("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(us.debug("pause()"),this._closed){us.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@pause",e,t)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(us.debug("resume()"),this._closed){us.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@resume",e,t)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(us.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch{}throw new Ft("closed")}else if(e&&e.readyState==="ended")throw new Ft("track ended");if(e===this._track){us.debug("replaceTrack() | same track, ignored");return}await new Promise((t,i)=>{this.safeEmit("@replacetrack",e,t,i)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new Ft("closed");if(this._kind!=="video")throw new Cr("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((t,i)=>{this.safeEmit("@setmaxspatiallayer",e,t,i)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new Ft("closed");if(typeof e!="object")throw new TypeError("invalid params");await new Promise((t,i)=>{this.safeEmit("@setrtpencodingparameters",e,t,i)})}onTrackEnded(){us.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};const ps=new jr("Consumer");let dne=class extends En{constructor({id:e,localId:t,producerId:i,rtpReceiver:r,track:n,rtpParameters:s,appData:a}){super(),this._closed=!1,this._observer=new En,ps.debug("constructor()"),this._id=e,this._localId=t,this._producerId=i,this._rtpReceiver=r,this._track=n,this._rtpParameters=s,this._paused=!n.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(ps.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(ps.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new Ft("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(ps.debug("pause()"),this._closed){ps.error("pause() | Consumer closed");return}if(this._paused){ps.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(ps.debug("resume()"),this._closed){ps.error("resume() | Consumer closed");return}if(!this._paused){ps.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){ps.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};const $s=new jr("DataProducer");class lne extends En{constructor({id:t,dataChannel:i,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new En,$s.debug("constructor()"),this._id=t,this._dataChannel=i,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(t){this._dataChannel.bufferedAmountLowThreshold=t}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||($s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||($s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(t){if($s.debug("send()"),this._closed)throw new Ft("closed");this._dataChannel.send(t)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||($s.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",t=>{if(this._closed)return;let{error:i}=t;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?$s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):$s.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||($s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||$s.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}const Fo=new jr("DataConsumer");class une extends En{constructor({id:t,dataProducerId:i,dataChannel:r,sctpStreamParameters:n,appData:s}){super(),this._closed=!1,this._observer=new En,Fo.debug("constructor()"),this._id=t,this._dataProducerId=i,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(t){this._dataChannel.binaryType=t}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Fo.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Fo.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Fo.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",t=>{if(this._closed)return;let{error:i}=t;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Fo.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Fo.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Fo.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",t=>{this._closed||this.safeEmit("message",t.data)})}}const Pi=new jr("Transport");class pne{constructor(t){this.consumerOptions=t,this.promise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}}let hne=class extends En{constructor({direction:e,id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l,handlerFactory:u,extendedRtpCapabilities:f,canProduceByKind:y}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new kD,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new En,Pi.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=f,this._canProduceByKind=y,this._maxSctpMessageSize=s?s.maxMessageSize:null,c=ki(c,{}),delete c.iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=u(),this._handler.run({direction:e,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:f}),this._appData=l||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}get producers(){return this._producers}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){Pi.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new Ft("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(Pi.debug("restartIce()"),this._closed)throw new Ft("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(Pi.debug("updateIceServers()"),this._closed)throw new Ft("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:i,codec:r,stopTracks:n=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(Pi.debug("produce() [track:%o]",e),this._closed)throw new Ft("closed");if(e){if(this._direction!=="send")throw new Cr("not a sending Transport");if(this._canProduceByKind[e.kind]){if(e.readyState==="ended")throw new Ft("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new Cr(`cannot produce ${e.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let c;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&t.length===0?c=void 0:t&&(c=t.map(f=>{const y={active:!0};return f.active===!1&&(y.active=!1),typeof f.dtx=="boolean"&&(y.dtx=f.dtx),typeof f.scalabilityMode=="string"&&(y.scalabilityMode=f.scalabilityMode),typeof f.scaleResolutionDownBy=="number"&&(y.scaleResolutionDownBy=f.scaleResolutionDownBy),typeof f.maxBitrate=="number"&&(y.maxBitrate=f.maxBitrate),typeof f.maxFramerate=="number"&&(y.maxFramerate=f.maxFramerate),typeof f.adaptivePtime=="boolean"&&(y.adaptivePtime=f.adaptivePtime),typeof f.priority=="string"&&(y.priority=f.priority),typeof f.networkPriority=="string"&&(y.networkPriority=f.networkPriority),y}));const{localId:d,rtpParameters:l,rtpSender:u}=await this._handler.send({track:e,encodings:c,codecOptions:i,codec:r});try{HS(l);const{id:f}=await new Promise((b,k)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:l,appData:o},b,k)}),y=new cne({id:f,localId:d,rtpSender:u,track:e,rtpParameters:l,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o});return this._producers.set(y.id,y),this.handleProducer(y),this._observer.safeEmit("newproducer",y),y}catch(f){throw this._handler.stopSending(d).catch(()=>{}),f}},"transport.produce()").catch(c=>{if(n)try{e.stop()}catch{}throw c})}async consume({id:e,producerId:t,kind:i,rtpParameters:r,streamId:n,appData:s={}}){if(Pi.debug("consume()"),r=ki(r,void 0),this._closed)throw new Ft("closed");if(this._direction!=="recv")throw new Cr("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing id");if(typeof t!="string")throw new TypeError("missing producerId");if(i!=="audio"&&i!=="video")throw new TypeError(`invalid kind '${i}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object");if(!tne(r,this._extendedRtpCapabilities))throw new Cr("cannot consume this Producer");const a=new pne({id:e,producerId:t,kind:i,rtpParameters:r,streamId:n,appData:s});return this._pendingConsumerTasks.push(a),i1(()=>{if(this._closed)throw new Ft("closed");this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),a.promise}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:i,label:r="",protocol:n="",appData:s={}}={}){if(Pi.debug("produceData()"),this._closed)throw new Ft("closed");if(this._direction!=="send")throw new Cr("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new Cr("SCTP not enabled by remote Transport");return(t||i)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:i,label:r,protocol:n});rC(o);const{id:c}=await new Promise((l,u)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:r,protocol:n,appData:s},l,u)}),d=new lne({id:c,dataChannel:a,sctpStreamParameters:o,appData:s});return this._dataProducers.set(d.id,d),this.handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d},"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:i,label:r="",protocol:n="",appData:s={}}){if(Pi.debug("consumeData()"),i=ki(i,void 0),this._closed)throw new Ft("closed");if(this._direction!=="recv")throw new Cr("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof e!="string")throw new TypeError("missing id");if(typeof t!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object")}else throw new Cr("SCTP not enabled by remote Transport");return rC(i),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:i,label:r,protocol:n}),o=new une({id:e,dataProducerId:t,dataChannel:a,sctpStreamParameters:i,appData:s});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){Pi.debug("createPendingConsumers() | there is no Consumer to be created");return}const e=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let t;const i=[];for(const r of e){const{id:n,kind:s,rtpParameters:a,streamId:o}=r.consumerOptions;i.push({trackId:n,kind:s,rtpParameters:a,streamId:o})}try{const r=await this._handler.receive(i);for(let n=0;n<r.length;n++){const s=e[n],a=r[n],{id:o,producerId:c,kind:d,rtpParameters:l,appData:u}=s.consumerOptions,{localId:f,rtpReceiver:y,track:b}=a,k=new dne({id:o,localId:f,producerId:c,rtpReceiver:y,track:b,rtpParameters:l,appData:u});this._consumers.set(k.id,k),this.handleConsumer(k),!this._probatorConsumerCreated&&!t&&d==="video"&&(t=k),this._observer.safeEmit("newconsumer",k),s.resolve(k)}}catch(r){for(const n of e)n.reject(r)}if(t)try{const r=ene(t.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:r}]),Pi.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(r){Pi.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",r)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){Pi.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const t=e.map(i=>i.localId);await this._handler.pauseReceiving(t)}catch(t){Pi.error("pausePendingConsumers() | failed to pause Consumers:",t)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){Pi.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const t=e.map(i=>i.localId);await this._handler.resumeReceiving(t)}catch(t){Pi.error("resumePendingConsumers() | failed to resume Consumers:",t)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){Pi.debug("closePendingConsumers() | there is no Consumer to be closed");return}const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(t=>t.localId))}catch(t){Pi.error("closePendingConsumers() | failed to close Consumers:",t)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:t},i,r)=>{if(this._closed){r(new Ft("closed"));return}this.safeEmit("connect",{dtlsParameters:t},i,r)}),e.on("@connectionstatechange",t=>{t!==this._connectionState&&(Pi.debug("connection state changed to %s",t),this._connectionState=t,this._closed||this.safeEmit("connectionstatechange",t))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(e.localId),"producer @close event").catch(t=>Pi.warn("producer.close() failed:%o",t))}),e.on("@pause",(t,i)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(e.localId),"producer @pause event").then(t).catch(i)}),e.on("@resume",(t,i)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(e.localId),"producer @resume event").then(t).catch(i)}),e.on("@replacetrack",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(e.localId,t),"producer @replacetrack event").then(i).catch(r)}),e.on("@setmaxspatiallayer",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(e.localId,t),"producer @setmaxspatiallayer event").then(i).catch(r)}),e.on("@setrtpencodingparameters",(t,i,r)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(e.localId,t),"producer @setrtpencodingparameters event").then(i).catch(r)}),e.on("@getstats",(t,i)=>{if(this._closed)return i(new Ft("closed"));this._handler.getSenderStats(e.localId).then(t).catch(i)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),!this._closed&&(this._pendingCloseConsumers.set(e.id,e),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),i1(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),i1(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),e.on("@getstats",(t,i)=>{if(this._closed)return i(new Ft("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(i)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}};const qi=new jr("Device");function gne(){var e,t,i,r;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){qi.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(qi.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(qi.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){let n=navigator.userAgent;n=n==null?void 0:n.replace("motorola edge","motorola x");const s=yS.getParser(n),a=s.getEngine();if(s.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(s.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(s.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(s.satisfies({firefox:">=60"}))return"Firefox60";if(s.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||s.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||((t=(e=s.parsedResult)===null||e===void 0?void 0:e.os)===null||t===void 0?void 0:t.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(s.satisfies({"microsoft edge":">=11"})&&s.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(a.name&&a.name.toLowerCase()==="blink"){const o=n.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(o){const c=Number(o[1]);return c>=111?"Chrome111":c>=74?"Chrome74":"Chrome70"}else return"Chrome111"}else{if(((r=(i=s.parsedResult)===null||i===void 0?void 0:i.os)===null||r===void 0?void 0:r.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||a.name&&a.name.toLowerCase()==="webkit"&&a.version&&parseFloat(a.version)>605)return"Safari12";qi.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",s.getBrowserName(),s.getBrowserVersion());return}}else{qi.warn("this._detectDevice() | unknown device");return}}class fne{constructor({handlerName:t,handlerFactory:i,Handler:r}={}){if(this._loaded=!1,this._observer=new En,qi.debug("constructor()"),r)if(qi.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof r=="string")t=r;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)qi.debug("constructor() | handler given: %s",t);else if(t=gne(),t)qi.debug("constructor() | detected handler: %s",t);else throw new Cr("device not supported");this.switchDevice(t)}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new Ft("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new Ft("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:t}){qi.debug("load() [routerRtpCapabilities:%o]",t),t=ki(t,void 0);let i;try{if(this._loaded)throw new Ft("already loaded");t1(t),i=this._handlerFactory();const r=await i.getNativeRtpCapabilities();qi.debug("load() | got native RTP capabilities:%o",r),t1(r),this._extendedRtpCapabilities=Zre(r,t),qi.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=nC("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=nC("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=Xre(this._extendedRtpCapabilities),t1(this._recvRtpCapabilities),qi.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await i.getNativeSctpCapabilities(),qi.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),Yre(this._sctpCapabilities),qi.debug("load() succeeded"),this._loaded=!0,i.close()}catch(r){throw i&&i.close(),r}}canProduce(t){if(this._loaded){if(t!=="audio"&&t!=="video")throw new TypeError(`invalid kind "${t}"`)}else throw new Ft("not loaded");return this._canProduceByKind[t]}createSendTransport({id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l}){return qi.debug("createSendTransport()"),this.createTransport({direction:"send",id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l})}createRecvTransport({id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l}){return qi.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,appData:l})}createTransport({direction:t,id:i,iceParameters:r,iceCandidates:n,dtlsParameters:s,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:l,appData:u}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof r!="object")throw new TypeError("missing iceParameters");if(Array.isArray(n)){if(typeof s!="object")throw new TypeError("missing dtlsParameters");if(a&&typeof a!="object")throw new TypeError("wrong sctpParameters");if(u&&typeof u!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new Ft("not loaded");const f=new hne({direction:t,id:i,iceParameters:r,iceCandidates:n,dtlsParameters:s,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:l,appData:u,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",f),f}}function Oh({sdpObject:e}){const t=new Map,i=[];let r=!1,n=!1;for(const s of e.media){const a=s.type;switch(a){case"audio":{if(r)continue;r=!0;break}case"video":{if(n)continue;n=!0;break}default:continue}for(const o of s.rtp){const c={kind:a,mimeType:`${a}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};t.set(c.preferredPayloadType,c)}for(const o of s.fmtp||[]){const c=CM(o.config),d=t.get(o.payload);d&&(c&&c.hasOwnProperty("profile-level-id")&&(c["profile-level-id"]=String(c["profile-level-id"])),d.parameters=c)}for(const o of s.rtcpFb||[]){const c={type:o.type,parameter:o.subtype};if(c.parameter||delete c.parameter,o.payload!=="*"){const d=t.get(o.payload);if(!d)continue;d.rtcpFeedback.push(c)}else for(const d of t.values())d.kind===a&&!/.+\/rtx$/i.test(d.mimeType)&&d.rtcpFeedback.push(c)}for(const o of s.ext||[]){if(o["encrypt-uri"])continue;const c={kind:a,uri:o.uri,preferredId:o.value};i.push(c)}}return{codecs:Array.from(t.values()),headerExtensions:i}}function Mh({sdpObject:e}){const t=(e.media||[]).find(n=>n.iceUfrag&&n.port!==0);if(!t)throw new Error("no active media section found");const i=t.fingerprint||e.fingerprint;let r;switch(t.setup){case"active":r="client";break;case"passive":r="server";break;case"actpass":r="auto";break}return{role:r,fingerprints:[{algorithm:i.type,value:i.hash}]}}function Dh({offerMediaObject:e}){const t=(e.ssrcs||[]).find(i=>i.attribute==="cname");return t?t.value:""}function Lh({offerRtpParameters:e,answerMediaObject:t}){for(const i of e.codecs){const r=i.mimeType.toLowerCase();if(r!=="audio/opus"||!(t.rtp||[]).find(a=>a.payload===i.payloadType))continue;t.fmtp=t.fmtp||[];let n=t.fmtp.find(a=>a.payload===i.payloadType);n||(n={payload:i.payloadType,config:""},t.fmtp.push(n));const s=CM(n.config);switch(r){case"audio/opus":{const a=i.parameters["sprop-stereo"];a!==void 0&&(s.stereo=a?1:0);break}}n.config="";for(const a of Object.keys(s))n.config&&(n.config+=";"),n.config+=`${a}=${s[a]}`}}function Eo({offerMediaObject:e}){const t=new Set;for(const n of e.ssrcs||[]){const s=n.id;t.add(s)}if(t.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const n of e.ssrcGroups||[]){if(n.semantics!=="FID")continue;let[s,a]=n.ssrcs.split(/\s+/);s=Number(s),a=Number(a),t.has(s)&&(t.delete(s),t.delete(a),i.set(s,a))}for(const n of t)i.set(n,null);const r=[];for(const[n,s]of i){const a={ssrc:n};s&&(a.rtx={ssrc:s}),r.push(a)}return r}function Gm({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const i=(e.ssrcs||[]).find(u=>u.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[r,n]=i.value.split(" "),s=i.id;let a;(e.ssrcGroups||[]).some(u=>{if(u.semantics!=="FID")return!1;const f=u.ssrcs.split(/\s+/);return Number(f[0])===s?(a=Number(f[1]),!0):!1});const o=e.ssrcs.find(u=>u.attribute==="cname");if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,d=[],l=[];for(let u=0;u<t;++u)d.push(s+u),a&&l.push(a+u);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let u=0;u<d.length;++u){const f=d[u];e.ssrcs.push({id:f,attribute:"cname",value:c}),e.ssrcs.push({id:f,attribute:"msid",value:`${r} ${n}`})}for(let u=0;u<l.length;++u){const f=d[u],y=l[u];e.ssrcs.push({id:y,attribute:"cname",value:c}),e.ssrcs.push({id:y,attribute:"msid",value:`${r} ${n}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${y}`})}}let Jl=class extends En{constructor(){super()}};class PD{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,t&&this.setIceParameters(t),i){this._mediaObject.candidates=[];for(const s of i){const a={};a.component=1,a.foundation=s.foundation,a.ip=s.ip,a.port=s.port,a.priority=s.priority,a.transport=s.protocol,a.type=s.type,s.tcpType&&(a.tcptype=s.tcpType),this._mediaObject.candidates.push(a)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(t){this._mediaObject.iceUfrag=t.usernameFragment,this._mediaObject.icePwd=t.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}muxSimulcastStreams(t){if(this._mediaObject.simulcast&&this._mediaObject.simulcast.list1){const i={};t.forEach(s=>{s.rid&&(i[s.rid]=s)});const r=this._mediaObject.simulcast.list1,n=RM(r);n.forEach(s=>{s.forEach(a=>{var o;a.paused=!(!((o=i[a.scid])===null||o===void 0)&&o.active)})}),this._mediaObject.simulcast.list1=n.map(s=>s.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}}class aC extends PD{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:d,codecOptions:l,extmapAllowMixed:u=!1,forceGoogConference:f=!1}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const y of d.codecs){const b={payload:y.payloadType,codec:y_(y),rate:y.clockRate};y.channels>1&&(b.encoding=y.channels),this._mediaObject.rtp.push(b);const k=ki(y.parameters,{});if(l){const{opusStereo:w,opusFec:E,opusDtx:R,opusMaxPlaybackRate:D,opusMaxAverageBitrate:V,opusPtime:B,videoGoogleStartBitrate:W,videoGoogleMaxBitrate:q,videoGoogleMinBitrate:fe}=l,ae=c.codecs.find(he=>he.payloadType===y.payloadType);switch(y.mimeType.toLowerCase()){case"audio/opus":{w!==void 0&&(ae.parameters["sprop-stereo"]=w?1:0,k.stereo=w?1:0),E!==void 0&&(ae.parameters.useinbandfec=E?1:0,k.useinbandfec=E?1:0),R!==void 0&&(ae.parameters.usedtx=R?1:0,k.usedtx=R?1:0),D!==void 0&&(k.maxplaybackrate=D),V!==void 0&&(k.maxaveragebitrate=V),B!==void 0&&(ae.parameters.ptime=B,k.ptime=B);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{W!==void 0&&(k["x-google-start-bitrate"]=W),q!==void 0&&(k["x-google-max-bitrate"]=q),fe!==void 0&&(k["x-google-min-bitrate"]=fe);break}}}const P={payload:y.payloadType,config:""};for(const w of Object.keys(k))P.config&&(P.config+=";"),P.config+=`${w}=${k[w]}`;P.config&&this._mediaObject.fmtp.push(P);for(const w of y.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:y.payloadType,type:w.type,subtype:w.parameter})}this._mediaObject.payloads=d.codecs.map(y=>y.payloadType).join(" "),this._mediaObject.ext=[];for(const y of d.headerExtensions)(o.ext||[]).some(b=>b.uri===y.uri)&&this._mediaObject.ext.push({uri:y.uri,value:y.id});if(u&&o.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const y of o.rids||[])y.direction==="send"&&this._mediaObject.rids.push({id:y.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const y of o.rids||[])y.direction==="send"&&this._mediaObject.rids.push({id:y.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",(this._planB||f)&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof o.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize});break}}}setDtlsRole(t){switch(t){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(t){var i;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const r={};for(const a of t)a.rid&&(r[a.rid]=a);const n=this._mediaObject.simulcast.list1,s=RM(n);for(const a of s)for(const o of a)o.paused=!(!((i=r[o.scid])===null||i===void 0)&&i.active);this._mediaObject.simulcast.list1=s.map(a=>a.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}class oC extends PD{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1,mid:o,kind:c,offerRtpParameters:d,streamId:l,trackId:u,oldDataChannelSpec:f=!1}){switch(super({iceParameters:t,iceCandidates:i,dtlsParameters:r,planB:a}),this._mediaObject.mid=String(o),this._mediaObject.type=c,s?(this._mediaObject.connection={ip:s.ip,version:s.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=s.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},n?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${l||"-"} ${u}`);for(const P of d.codecs){const w={payload:P.payloadType,codec:y_(P),rate:P.clockRate};P.channels>1&&(w.encoding=P.channels),this._mediaObject.rtp.push(w);const E={payload:P.payloadType,config:""};for(const R of Object.keys(P.parameters))E.config&&(E.config+=";"),E.config+=`${R}=${P.parameters[R]}`;E.config&&this._mediaObject.fmtp.push(E);for(const R of P.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:P.payloadType,type:R.type,subtype:R.parameter})}this._mediaObject.payloads=d.codecs.map(P=>P.payloadType).join(" "),this._mediaObject.ext=[];for(const P of d.headerExtensions)this._mediaObject.ext.push({uri:P.uri,value:P.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const y=d.encodings[0],b=y.ssrc,k=y.rtx&&y.rtx.ssrc?y.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],d.rtcp.cname&&this._mediaObject.ssrcs.push({id:b,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:b,attribute:"msid",value:`${l||"-"} ${u}`}),k&&(d.rtcp.cname&&this._mediaObject.ssrcs.push({id:k,attribute:"cname",value:d.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:k,attribute:"msid",value:`${l||"-"} ${u}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${b} ${k}`}));break}case"application":{f?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize);break}}}setDtlsRole(t){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:t,streamId:i,trackId:r}){const n=t.encodings[0],s=n.ssrc,a=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const c of t.codecs){if(o.includes(String(c.payloadType)))continue;const d={payload:c.payloadType,codec:y_(c),rate:c.clockRate};c.channels>1&&(d.encoding=c.channels),this._mediaObject.rtp.push(d);const l={payload:c.payloadType,config:""};for(const u of Object.keys(c.parameters))l.config&&(l.config+=";"),l.config+=`${u}=${c.parameters[u]}`;l.config&&this._mediaObject.fmtp.push(l);for(const u of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:u.type,subtype:u.parameter})}this._mediaObject.payloads+=` ${t.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),t.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${i||"-"} ${r}`}),a&&(t.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${i||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${s} ${a}`}))}planBStopReceiving({offerRtpParameters:t}){const i=t.encodings[0],r=i.ssrc,n=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(s=>s.id!==r&&s.id!==n),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(s=>s.ssrcs!==`${r} ${n}`))}}function y_(e){const t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}const r1=new jr("RemoteSdp");class Nh{constructor({iceParameters:t,iceCandidates:i,dtlsParameters:r,sctpParameters:n,plainRtpParameters:s,planB:a=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=t,this._iceCandidates=i,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=s,this._planB=a,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},t&&t.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const o=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[o-1].algorithm,hash:r.fingerprints[o-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}updateIceParameters(t){r1.debug("updateIceParameters() [iceParameters:%o]",t),this._iceParameters=t,this._sdpObject.icelite=t.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(t)}updateDtlsRole(t){r1.debug("updateDtlsRole() [role:%s]",t),this._dtlsParameters.role=t;for(const i of this._mediaSections)i.setDtlsRole(t)}getNextMediaSectionIdx(){for(let t=0;t<this._mediaSections.length;++t){const i=this._mediaSections[t];if(i.closed)return{idx:t,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:t,reuseMid:i,offerRtpParameters:r,answerRtpParameters:n,codecOptions:s,extmapAllowMixed:a=!1,forceGoogConference:o=!1}){const c=new aC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:s,extmapAllowMixed:a,forceGoogConference:o});i?this._replaceMediaSection(c,i):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}receive({mid:t,kind:i,offerRtpParameters:r,streamId:n,trackId:s}){const a=this._midToIndex.get(t);let o;if(a!==void 0&&(o=this._mediaSections[a]),o)o.planBReceive({offerRtpParameters:r,streamId:n,trackId:s}),this._replaceMediaSection(o);else{o=new oC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:t,kind:i,offerRtpParameters:r,streamId:n,trackId:s});const c=this._mediaSections.find(d=>d.closed);c?this._replaceMediaSection(o,c.mid):this._addMediaSection(o)}}pauseMediaSection(t){this._findMediaSection(t).pause()}resumeSendingMediaSection(t){this._findMediaSection(t).resume()}resumeReceivingMediaSection(t){this._findMediaSection(t).resume()}disableMediaSection(t){this._findMediaSection(t).disable()}closeMediaSection(t){const i=this._findMediaSection(t);return t===this._firstMid?(r1.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",t),this.disableMediaSection(t),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(t,i){const r=this._midToIndex.get(t);if(r===void 0)throw new Error(`no media section found with mid '${t}'`);const n=this._mediaSections[r];if(n===void 0)throw new Error(`no media section found with idx '${r}'`);n.muxSimulcastStreams(i),this._replaceMediaSection(n)}planBStopReceiving({mid:t,offerRtpParameters:i}){const r=this._findMediaSection(t);r.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:t}){const i=new aC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:t});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:t=!1}={}){const i=new oC({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:t});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,Qn(this._sdpObject)}_addMediaSection(t){this._firstMid||(this._firstMid=t.mid),this._mediaSections.push(t),this._midToIndex.set(t.mid,this._mediaSections.length-1),this._sdpObject.media.push(t.getObject()),this._regenerateBundleMids()}_replaceMediaSection(t,i){if(typeof i=="string"){const r=this._midToIndex.get(i);if(r===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const n=this._mediaSections[r];this._mediaSections[r]=t,this._midToIndex.delete(n.mid),this._midToIndex.set(t.mid,r),this._sdpObject.media[r]=t.getObject(),this._regenerateBundleMids()}else{const r=this._midToIndex.get(t.mid);if(r===void 0)throw new Error(`no media section found with mid '${t.mid}'`);this._mediaSections[r]=t,this._sdpObject.media[r]=t.getObject()}}_findMediaSection(t){const i=this._midToIndex.get(t);if(i===void 0)throw new Error(`no media section found with mid '${t}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(t=>!t.closed).map(t=>t.mid).join(" "))}}const mne=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function Uh(e){const t=mne.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}const Ue=new jr("Chrome70"),cC={OS:1024,MIS:1024};class WS extends Jl{static createFactory(){return()=>new WS}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(Ue.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ue.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=Ne(i.sdp);return Oh({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return Ue.debug("getNativeSctpCapabilities()"),{numStreams:cC}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){Ue.debug("run()"),this._direction=t,this._remoteSdp=new Nh({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Tn("audio",l),video:Tn("video",l)},this._sendingRemoteRtpParametersByKind={audio:Ds("audio",l),video:Ds("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ue.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){Ue.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(Ue.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Ue.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Ue.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ue.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Ue.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;this.assertSendDirection(),Ue.debug("send() [kind:%s, track.id:%s]",t.kind,t.id);const a=ki(this._sendingRtpParametersByKind[t.kind],{});a.codecs=ts(a.codecs,n);const o=ki(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=ts(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=Ne(l.sdp),f;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u}),i&&i.length>1&&(Ue.debug("send() | enabling legacy simulcast"),u=Ne(l.sdp),f=u.media[c.idx],Gm({offerMediaObject:f,numStreams:i.length}),l={type:"offer",sdp:Qn(u)});let y=!1;const b=Uh((i||[{}])[0].scalabilityMode);if(i&&i.length===1&&b.spatialLayers>1&&a.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Ue.debug("send() | enabling legacy simulcast for VP9 SVC"),y=!0,u=Ne(l.sdp),f=u.media[c.idx],Gm({offerMediaObject:f,numStreams:b.spatialLayers}),l={type:"offer",sdp:Qn(u)}),Ue.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),i){Ue.debug("send() | applying given encodings");const w=d.sender.getParameters();for(let E=0;E<(w.encodings||[]).length;++E){const R=w.encodings[E],D=i[E];if(!D)break;w.encodings[E]=Object.assign(R,D)}await d.sender.setParameters(w)}const k=d.mid;if(a.mid=k,u=Ne(this._pc.localDescription.sdp),f=u.media[c.idx],a.rtcp.cname=Dh({offerMediaObject:f}),a.encodings=Eo({offerMediaObject:f}),i)for(let w=0;w<a.encodings.length;++w)i[w]&&Object.assign(a.encodings[w],i[w]);if(y&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const w of a.encodings)w.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const P={type:"answer",sdp:this._remoteSdp.getSdp()};return Ue.debug("send() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.set(k,d),{localId:k,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),Ue.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();Ue.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Ue.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){}async resumeSending(t){}async replaceTrack(t,i){this.assertSendDirection(),i?Ue.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Ue.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),Ue.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();Ue.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Ue.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),Ue.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();Ue.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Ue.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:r,protocol:s};Ue.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%cC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Ne(l.sdp),f=u.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),Ue.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const y={type:"answer",sdp:this._remoteSdp.getSdp()};Ue.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:f}=c;Ue.debug("receive() [trackId:%s, kind:%s]",d,l);const y=u.mid||String(this._mapMidTransceiver.size);n.set(d,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:u,streamId:f||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};Ue.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=Ne(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),f=o.media.find(y=>String(y.mid)===u);Lh({offerRtpParameters:l,answerMediaObject:f})}a={type:"answer",sdp:Qn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),Ue.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(f=>f.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){Ue.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ue.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Ue.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){}async resumeReceiving(t){}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:c,protocol:r};Ue.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};Ue.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const f=await this._pc.createAnswer();if(!this._transportReady){const y=Ne(f.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:y})}Ue.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=Ne(this._pc.localDescription.sdp));const r=Mh({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}const _e=new jr("Chrome74"),dC={OS:1024,MIS:1024};let vne=class CD extends Jl{static createFactory(){return()=>new CD}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(_e.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){_e.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=Ne(i.sdp);return Oh({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return _e.debug("getNativeSctpCapabilities()"),{numStreams:dC}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){_e.debug("run()"),this._direction=t,this._remoteSdp=new Nh({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Tn("audio",l),video:Tn("video",l)},this._sendingRemoteRtpParametersByKind={audio:Ds("audio",l),video:Ds("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(_e.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(t){_e.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(_e.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});_e.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s,a;this.assertSendDirection(),_e.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&i.length>1&&i.forEach((E,R)=>{E.rid=`r${R}`});const o=ki(this._sendingRtpParametersByKind[t.kind],{});o.codecs=ts(o.codecs,n);const c=ki(this._sendingRemoteRtpParametersByKind[t.kind],{});c.codecs=ts(c.codecs,n);const d=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i});let u=await this._pc.createOffer(),f=Ne(u.sdp),y;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:f});let b=!1;const k=Uh((i||[{}])[0].scalabilityMode);i&&i.length===1&&k.spatialLayers>1&&o.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(_e.debug("send() | enabling legacy simulcast for VP9 SVC"),b=!0,f=Ne(u.sdp),y=f.media[d.idx],Gm({offerMediaObject:y,numStreams:k.spatialLayers}),u={type:"offer",sdp:Qn(f)}),_e.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const P=l.mid;if(o.mid=P,f=Ne(this._pc.localDescription.sdp),y=f.media[d.idx],o.rtcp.cname=Dh({offerMediaObject:y}),!i)o.encodings=Eo({offerMediaObject:y});else if(i.length===1){let E=Eo({offerMediaObject:y});Object.assign(E[0],i[0]),b&&(E=[E[0]]),o.encodings=E}else o.encodings=i;if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const E of o.encodings)E.scalabilityMode?E.scalabilityMode=`L1T${k.temporalLayers}`:E.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:y,reuseMid:d.reuseMid,offerRtpParameters:o,answerRtpParameters:c,codecOptions:r,extmapAllowMixed:!0,forceGoogConference:(a=r==null?void 0:r.forceGoogConference)!==null&&a!==void 0?a:!1});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return _e.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(P,l),{localId:P,rtpParameters:o,rtpSender:l.sender}}async stopSending(t){this.assertSendDirection(),_e.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();_e.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),_e.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();_e.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),_e.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(this._remoteSdp.resumeSendingMediaSection(t),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();_e.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?_e.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):_e.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),_e.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();_e.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),_e.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();_e.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};_e.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%dC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Ne(l.sdp),f=u.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),_e.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const y={type:"answer",sdp:this._remoteSdp.getSdp()};_e.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:f}=c;_e.debug("receive() [trackId:%s, kind:%s]",d,l);const y=u.mid||String(this._mapMidTransceiver.size);n.set(d,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:u,streamId:f||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=Ne(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),f=o.media.find(y=>String(y.mid)===u);Lh({offerRtpParameters:l,answerMediaObject:f})}a={type:"answer",sdp:Qn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),_e.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(f=>f.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){_e.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){_e.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){_e.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();_e.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};_e.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};_e.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const f=await this._pc.createAnswer();if(!this._transportReady){const y=Ne(f.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:y})}_e.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=Ne(this._pc.localDescription.sdp));const r=Mh({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const Se=new jr("Chrome111"),lC={OS:1024,MIS:1024};class qS extends Jl{static createFactory(){return()=>new qS}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(Se.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Se.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=Ne(i.sdp);return Oh({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return Se.debug("getNativeSctpCapabilities()"),{numStreams:lC}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){Se.debug("run()"),this._direction=t,this._remoteSdp=new Nh({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Tn("audio",l),video:Tn("video",l)},this._sendingRemoteRtpParametersByKind={audio:Ds("audio",l),video:Ds("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(Se.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(t){Se.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(Se.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Se.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;if(this.assertSendDirection(),Se.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&i.length>1){i.forEach((w,E)=>{w.rid=`r${E}`});let k=1,P=1;for(const w of i){const E=w.scalabilityMode?Uh(w.scalabilityMode).temporalLayers:3;E>P&&(P=E)}for(const w of i)w.rid=`r${k++}`,w.scalabilityMode=`L1T${P}`}const a=ki(this._sendingRtpParametersByKind[t.kind],{});a.codecs=ts(a.codecs,n);const o=ki(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=ts(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),l=await this._pc.createOffer();let u=Ne(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u}),Se.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f=d.mid;a.mid=f,u=Ne(this._pc.localDescription.sdp);const y=u.media[c.idx];if(a.rtcp.cname=Dh({offerMediaObject:y}),!i)a.encodings=Eo({offerMediaObject:y});else if(i.length===1){const k=Eo({offerMediaObject:y});Object.assign(k[0],i[0]),a.encodings=k}else a.encodings=i;this._remoteSdp.send({offerMediaObject:y,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});const b={type:"answer",sdp:this._remoteSdp.getSdp()};return Se.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b),this._mapMidTransceiver.set(f,d),{localId:f,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),Se.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();Se.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),Se.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();Se.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),Se.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(this._remoteSdp.resumeSendingMediaSection(t),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const r=await this._pc.createOffer();Se.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?Se.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Se.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),Se.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();Se.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),Se.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();Se.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};Se.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%lC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Ne(l.sdp),f=u.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),Se.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const y={type:"answer",sdp:this._remoteSdp.getSdp()};Se.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:f}=c;Se.debug("receive() [trackId:%s, kind:%s]",d,l);const y=u.mid||String(this._mapMidTransceiver.size);n.set(d,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:u,streamId:f||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=Ne(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),f=o.media.find(y=>String(y.mid)===u);Lh({offerRtpParameters:l,answerMediaObject:f})}a={type:"answer",sdp:Qn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),Se.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(f=>f.mid===l);if(u)this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver});else throw new Error("new RTCRtpTransceiver not found")}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){Se.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){Se.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){Se.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Se.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};Se.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};Se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const f=await this._pc.createAnswer();if(!this._transportReady){const y=Ne(f.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:y})}Se.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=Ne(this._pc.localDescription.sdp));const r=Mh({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}function yne(){const e=RTCRtpReceiver.getCapabilities(),t=ki(e,{});for(const i of t.codecs){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType||`${i.kind}/${i.name}`,i.parameters){const r=i.parameters;r.apt&&(r.apt=Number(r.apt)),r["packetization-mode"]&&(r["packetization-mode"]=Number(r["packetization-mode"]))}for(const r of i.rtcpFeedback||[])r.parameter||(r.parameter="")}return t}function uC(e){const t=ki(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);for(const i of t.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return t}const ut=new jr("Edge11");class JS extends Jl{static createFactory(){return()=>new JS}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){ut.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const t of this._rtpSenders.values())try{t.stop()}catch{}for(const t of this._rtpReceivers.values())try{t.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return ut.debug("getNativeRtpCapabilities()"),yne()}async getNativeSctpCapabilities(){return ut.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){ut.debug("run()"),this._sendingRtpParametersByKind={audio:Tn("audio",l),video:Tn("video",l)},this._remoteIceParameters=i,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname=`CNAME-${e1()}`,this.setIceGatherer({iceServers:a,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(t){throw new Cr("not supported")}async restartIce(t){if(ut.debug("restartIce()"),this._remoteIceParameters=t,!!this._transportReady){ut.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,t,"controlling");for(const i of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(i);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){ut.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),ut.debug("send() | calling new RTCRtpSender()");const s=new RTCRtpSender(t,this._dtlsTransport),a=ki(this._sendingRtpParametersByKind[t.kind],{});a.codecs=ts(a.codecs,n);const o=a.codecs.some(l=>/.+\/rtx$/i.test(l.mimeType));i||(i=[{}]);for(const l of i)l.ssrc=e1(),o&&(l.rtx={ssrc:e1()});a.encodings=i,a.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=uC(a);ut.debug("send() | calling rtpSender.send() [params:%o]",c),await s.send(c);const d=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(d,s),{localId:d,rtpParameters:a,rtpSender:s}}async stopSending(t){ut.debug("stopSending() [localId:%s]",t);const i=this._rtpSenders.get(t);if(!i)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(t);try{ut.debug("stopSending() | calling rtpSender.stop()"),i.stop()}catch(r){throw ut.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(t){}async resumeSending(t){}async replaceTrack(t,i){i?ut.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):ut.debug("replaceTrack() [localId:%s, no track]",t);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(i)}async setMaxSpatialLayer(t,i){ut.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.setParameters(n)}async setRtpEncodingParameters(t,i){ut.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._rtpSenders.get(t);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.setParameters(n)}async getSenderStats(t){const i=this._rtpSenders.get(t);if(!i)throw new Error("RTCRtpSender not found");return i.getStats()}async sendDataChannel(t){throw new Cr("not implemented")}async receive(t){const i=[];for(const r of t){const{trackId:n,kind:s}=r;ut.debug("receive() [trackId:%s, kind:%s]",n,s)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of t){const{trackId:n,kind:s,rtpParameters:a}=r;ut.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,s);o.addEventListener("error",l=>{ut.error('rtpReceiver "error" event [event:%o]',l)});const c=uC(a);ut.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await o.receive(c);const d=n;this._rtpReceivers.set(d,o),i.push({localId:d,track:o.track,rtpReceiver:o})}return i}async stopReceiving(t){for(const i of t){ut.debug("stopReceiving() [localId:%s]",i);const r=this._rtpReceivers.get(i);if(!r)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(i);try{ut.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(n){ut.warn("stopReceiving() | rtpReceiver.stop() failed:%o",n)}}}async pauseReceiving(t){}async resumeReceiving(t){}async getReceiverStats(t){const i=this._rtpReceivers.get(t);if(!i)throw new Error("RTCRtpReceiver not found");return i.getStats()}async receiveDataChannel(t){throw new Cr("not implemented")}setIceGatherer({iceServers:t,iceTransportPolicy:i}){const r=new RTCIceGatherer({iceServers:t||[],gatherPolicy:i||"all"});r.addEventListener("error",n=>{ut.error('iceGatherer "error" event [event:%o]',n)});try{r.gather()}catch(n){ut.debug("setIceGatherer() | iceGatherer.gather() failed: %s",n.toString())}this._iceGatherer=r}setIceTransport(){const t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",()=>{switch(t.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),t.addEventListener("icestatechange",()=>{switch(t.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),t.addEventListener("candidatepairchange",i=>{ut.debug('iceTransport "candidatepairchange" event [pair:%o]',i.pair)}),this._iceTransport=t}setDtlsTransport(){const t=new RTCDtlsTransport(this._iceTransport);t.addEventListener("statechange",()=>{ut.debug('dtlsTransport "statechange" event [state:%s]',t.state)}),t.addEventListener("dtlsstatechange",()=>{ut.debug('dtlsTransport "dtlsstatechange" event [state:%s]',t.state),t.state==="closed"&&this.emit("@connectionstatechange","closed")}),t.addEventListener("error",i=>{ut.error('dtlsTransport "error" event [event:%o]',i)}),this._dtlsTransport=t}async setupTransport({localDtlsRole:t}){ut.debug("setupTransport()");const i=this._dtlsTransport.getLocalParameters();i.role=t,await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:i},r,n)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(r=>r.algorithm==="sha-256"||r.algorithm==="sha-384"||r.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}const Re=new jr("Firefox60"),pC={OS:16,MIS:2048};let bne=class RD extends Jl{static createFactory(){return()=>new RD}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(Re.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Re.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const r=i.captureStream().getVideoTracks()[0];try{t.addTransceiver("audio",{direction:"sendrecv"});const n=t.addTransceiver(r,{direction:"sendrecv"}),s=n.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];s.encodings=a,await n.sender.setParameters(s);const o=await t.createOffer();try{i.remove()}catch{}try{r.stop()}catch{}try{t.close()}catch{}const c=Ne(o.sdp);return Oh({sdpObject:c})}catch(n){try{i.remove()}catch{}try{r.stop()}catch{}try{t.close()}catch{}throw n}}async getNativeSctpCapabilities(){return Re.debug("getNativeSctpCapabilities()"),{numStreams:pC}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){Re.debug("run()"),this._direction=t,this._remoteSdp=new Nh({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Tn("audio",l),video:Tn("video",l)},this._sendingRemoteRtpParametersByKind={audio:Ds("audio",l),video:Ds("video",l)},this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Re.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){throw new Cr("not supported")}async restartIce(t){if(Re.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Re.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Re.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Re.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){this.assertSendDirection(),Re.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),i&&(i=ki(i,[]),i.length>1&&(i.forEach((b,k)=>{b.rid=`r${k}`}),i.reverse()));const s=ki(this._sendingRtpParametersByKind[t.kind],{});s.codecs=ts(s.codecs,n);const a=ki(this._sendingRemoteRtpParametersByKind[t.kind],{});a.codecs=ts(a.codecs,n);const o=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});if(i){const b=o.sender.getParameters();b.encodings=i,await o.sender.setParameters(b)}const c=await this._pc.createOffer();let d=Ne(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:d});const l=Uh((i||[{}])[0].scalabilityMode);Re.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u=o.mid;s.mid=u,d=Ne(this._pc.localDescription.sdp);const f=d.media[d.media.length-1];if(s.rtcp.cname=Dh({offerMediaObject:f}),!i)s.encodings=Eo({offerMediaObject:f});else if(i.length===1){const b=Eo({offerMediaObject:f});Object.assign(b[0],i[0]),s.encodings=b}else s.encodings=i.reverse();if(s.encodings.length>1&&(s.codecs[0].mimeType.toLowerCase()==="video/vp8"||s.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const b of s.encodings)b.scalabilityMode?b.scalabilityMode=`L1T${l.temporalLayers}`:b.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:f,offerRtpParameters:s,answerRtpParameters:a,codecOptions:r,extmapAllowMixed:!0});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return Re.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(u,o),{localId:u,rtpParameters:s,rtpSender:o.sender}}async stopSending(t){Re.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const r=await this._pc.createOffer();Re.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),Re.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();Re.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),Re.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(t);const r=await this._pc.createOffer();Re.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?Re.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Re.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),Re.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated transceiver not found");const n=r.sender.getParameters();i=n.encodings.length-1-i,n.encodings.forEach((o,c)=>{c>=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();Re.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),Re.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();Re.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};Re.debug("sendDataChannel() [options:%o]",a);const o=this._pc.createDataChannel(n,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%pC.MIS,!this._hasDataChannelMediaSection){const d=await this._pc.createOffer(),l=Ne(d.sdp),u=l.media.find(y=>y.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l}),Re.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});const f={type:"answer",sdp:this._remoteSdp.getSdp()};Re.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._hasDataChannelMediaSection=!0}const c={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:o,sctpStreamParameters:c}}async receive(t){this.assertRecvDirection();const i=[],r=new Map;for(const o of t){const{trackId:c,kind:d,rtpParameters:l,streamId:u}=o;Re.debug("receive() [trackId:%s, kind:%s]",c,d);const f=l.mid||String(this._mapMidTransceiver.size);r.set(c,f),this._remoteSdp.receive({mid:f,kind:d,offerRtpParameters:l,streamId:u||l.rtcp.cname,trackId:c})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Re.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let s=await this._pc.createAnswer();const a=Ne(s.sdp);for(const o of t){const{trackId:c,rtpParameters:d}=o,l=r.get(c),u=a.media.find(f=>String(f.mid)===l);Lh({offerRtpParameters:d,answerMediaObject:u}),s={type:"answer",sdp:Qn(a)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:a}),Re.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const o of t){const{trackId:c}=o,d=r.get(c),l=this._pc.getTransceivers().find(u=>u.mid===d);if(!l)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(d,l),i.push({localId:d,track:l.receiver.track,rtpReceiver:l.receiver})}return i}async stopReceiving(t){this.assertRecvDirection();for(const n of t){Re.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Re.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Re.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){Re.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Re.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Re.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){Re.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Re.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();Re.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:s,maxPacketLifeTime:a,maxRetransmits:o}=t,c={negotiated:!0,id:n,ordered:s,maxPacketLifeTime:a,maxRetransmits:o,protocol:r};Re.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(i,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const l={type:"offer",sdp:this._remoteSdp.getSdp()};Re.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const u=await this._pc.createAnswer();if(!this._transportReady){const f=Ne(u.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:f})}Re.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setLocalDescription(u),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=Ne(this._pc.localDescription.sdp));const r=Mh({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const we=new jr("Safari12"),hC={OS:1024,MIS:1024};let _ne=class xD extends Jl{static createFactory(){return()=>new xD}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(we.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){we.debug("getNativeRtpCapabilities()");const t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{t.addTransceiver("audio"),t.addTransceiver("video");const i=await t.createOffer();try{t.close()}catch{}const r=Ne(i.sdp);return Oh({sdpObject:r})}catch(i){try{t.close()}catch{}throw i}}async getNativeSctpCapabilities(){return we.debug("getNativeSctpCapabilities()"),{numStreams:hC}}run({direction:t,iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:l}){we.debug("run()"),this._direction=t,this._remoteSdp=new Nh({iceParameters:i,iceCandidates:r,dtlsParameters:n,sctpParameters:s}),this._sendingRtpParametersByKind={audio:Tn("audio",l),video:Tn("video",l)},this._sendingRemoteRtpParametersByKind={audio:Ds("audio",l),video:Ds("video",l)},n.role&&n.role!=="auto"&&(this._forcedLocalDtlsRole=n.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},d),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(we.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(t){we.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(t){if(we.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});we.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const r={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOptions:r,codec:n}){var s;this.assertSendDirection(),we.debug("send() [kind:%s, track.id:%s]",t.kind,t.id);const a=ki(this._sendingRtpParametersByKind[t.kind],{});a.codecs=ts(a.codecs,n);const o=ki(this._sendingRemoteRtpParametersByKind[t.kind],{});o.codecs=ts(o.codecs,n);const c=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(t,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),u=Ne(l.sdp),f;this._transportReady||await this.setupTransport({localDtlsRole:(s=this._forcedLocalDtlsRole)!==null&&s!==void 0?s:"client",localSdpObject:u});const y=Uh((i||[{}])[0].scalabilityMode);i&&i.length>1&&(we.debug("send() | enabling legacy simulcast"),u=Ne(l.sdp),f=u.media[c.idx],Gm({offerMediaObject:f,numStreams:i.length}),l={type:"offer",sdp:Qn(u)}),we.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const b=d.mid;if(a.mid=b,u=Ne(this._pc.localDescription.sdp),f=u.media[c.idx],a.rtcp.cname=Dh({offerMediaObject:f}),a.encodings=Eo({offerMediaObject:f}),i)for(let P=0;P<a.encodings.length;++P)i[P]&&Object.assign(a.encodings[P],i[P]);if(a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const P of a.encodings)P.scalabilityMode?P.scalabilityMode=`L1T${y.temporalLayers}`:P.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:r});const k={type:"answer",sdp:this._remoteSdp.getSdp()};return we.debug("send() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.set(b,d),{localId:b,rtpParameters:a,rtpSender:d.sender}}async stopSending(t){this.assertSendDirection(),we.debug("stopSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const r=await this._pc.createOffer();we.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(t)}async pauseSending(t){this.assertSendDirection(),we.debug("pauseSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(t);const r=await this._pc.createOffer();we.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(t){this.assertSendDirection(),we.debug("resumeSending() [localId:%s]",t);const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(t);const r=await this._pc.createOffer();we.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(t,i){this.assertSendDirection(),i?we.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):we.debug("replaceTrack() [localId:%s, no track]",t);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this.assertSendDirection(),we.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();we.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(t,i){this.assertSendDirection(),we.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this._mapMidTransceiver.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((o,c)=>{n.encodings[c]={...o,...i}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(t,n.encodings);const s=await this._pc.createOffer();we.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const a={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(t){this.assertSendDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:t,maxPacketLifeTime:i,maxRetransmits:r,label:n,protocol:s}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:t,maxPacketLifeTime:i,maxRetransmits:r,protocol:s};we.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(n,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%hC.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),u=Ne(l.sdp),f=u.media.find(b=>b.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:u}),we.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:f});const y={type:"answer",sdp:this._remoteSdp.getSdp()};we.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._hasDataChannelMediaSection=!0}const d={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:d}}async receive(t){var i;this.assertRecvDirection();const r=[],n=new Map;for(const c of t){const{trackId:d,kind:l,rtpParameters:u,streamId:f}=c;we.debug("receive() [trackId:%s, kind:%s]",d,l);const y=u.mid||String(this._mapMidTransceiver.size);n.set(d,y),this._remoteSdp.receive({mid:y,kind:l,offerRtpParameters:u,streamId:f||u.rtcp.cname,trackId:d})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const o=Ne(a.sdp);for(const c of t){const{trackId:d,rtpParameters:l}=c,u=n.get(d),f=o.media.find(y=>String(y.mid)===u);Lh({offerRtpParameters:l,answerMediaObject:f})}a={type:"answer",sdp:Qn(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),we.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of t){const{trackId:d}=c,l=n.get(d),u=this._pc.getTransceivers().find(f=>f.mid===l);if(!u)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,u),r.push({localId:l,track:u.receiver.track,rtpReceiver:u.receiver})}return r}async stopReceiving(t){this.assertRecvDirection();for(const n of t){we.debug("stopReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(s.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of t)this._mapMidTransceiver.delete(n)}async pauseReceiving(t){this.assertRecvDirection();for(const n of t){we.debug("pauseReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(t){this.assertRecvDirection();for(const n of t){we.debug("resumeReceiving() [localId:%s]",n);const s=this._mapMidTransceiver.get(n);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const r=await this._pc.createAnswer();we.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(t){this.assertRecvDirection();const i=this._mapMidTransceiver.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:t,label:i,protocol:r}){var n;this.assertRecvDirection();const{streamId:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=t,d={negotiated:!0,id:s,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:r};we.debug("receiveDataChannel() [options:%o]",d);const l=this._pc.createDataChannel(i,d);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const u={type:"offer",sdp:this._remoteSdp.getSdp()};we.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const f=await this._pc.createAnswer();if(!this._transportReady){const y=Ne(f.sdp);await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:y})}we.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setLocalDescription(f),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:t,localSdpObject:i}){i||(i=Ne(this._pc.localDescription.sdp));const r=Mh({sdpObject:i});r.role=t,this._remoteSdp.updateDtlsRole(t==="client"?"server":"client"),await new Promise((n,s)=>{this.safeEmit("@connect",{dtlsParameters:r},n,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}},AD=class extends fne{constructor({handlerName:e,handlerFactory:t,Handler:i}={}){super({handlerName:e,handlerFactory:t,Handler:i})}switchDevice(e){switch(e){case"Chrome111":this._handlerFactory=qS.createFactory();break;case"Chrome74":this._handlerFactory=vne.createFactory();break;case"Chrome70":this._handlerFactory=WS.createFactory();break;case"Firefox60":this._handlerFactory=bne.createFactory();break;case"Safari12":this._handlerFactory=_ne.createFactory();break;case"Edge11":this._handlerFactory=JS.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}};const ph="chrome",ID="opera",OD="firefox",MD="iexplorer",DD="safari",LD="nwjs",ND="electron",UD="react-native",KS="unknown",Wm={Chrome:ph,Chromium:ph,Opera:ID,Firefox:OD,"Internet Explorer":MD,Safari:DD};function wne(){const{userAgent:e}=navigator,t={name:KS,version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){const i=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(i,10)>72&&(t.name=ph,t.version=i)}else t.name=ph,t.version=e.match(/Chrome\/([\d.]+)/)[1];return t}function Sne(){const{userAgent:e}=navigator;if(e.match(/Electron/)){const t=e.match(/Electron\/([\d.]+)/)[1];return{name:ND,version:t}}return null}function Ene(){const{userAgent:e}=navigator;if(e.match(/JitsiMeetNW/)){const t=e.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:LD,version:t}}}function Tne(){const e=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let t;if(e||navigator.product==="ReactNative")return e&&e.length>2&&(e[1],t=e[2]),t||(t="unknown"),{name:UD,version:t}}function kne(e){let t;const i=[Tne,Sne,Ene];for(let n=0;n<i.length;n+=1)if(t=i[n](),t)return t;const r=e.getBrowserName();return r in Wm?{name:Wm[r],version:e.getBrowserVersion()}:(t=wne(),t||{name:KS,version:void 0})}class Pne{constructor(){_(this,"_bowser"),_(this,"_name"),_(this,"_version"),_(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(t){let i,r;if(this._bowser=yS.getParser(navigator.userAgent),typeof t>"u"){const n=kne(this._bowser);i=n.name,r=n.version}else t.name in Wm?(i=Wm[t.name],r=t.version):(i=KS,r=void 0);this._name=i,this._version=r}getName(){return this._name}isChrome(){return this._name===ph}isOpera(){return this._name===ID}isFirefox(){return this._name===OD}isIExplorer(){return this._name===MD}isSafari(){return this._name===DD}isNWJS(){return this._name===LD}isElectron(){return this._name===ND}isReactNative(){return this._name===UD||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(t){if(this._version)return this._bowser.satisfies(t)}isVersionGreaterThan(t){return this._checkCondition({[this._name]:`>${t}`})}isVersionLessThan(t){return this._checkCondition({[this._name]:`<${t}`})}isVersionEqualTo(t){return this._checkCondition({[this._name]:`~${t}`})}}const Cne=72;class Rne extends Pne{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=Cne||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange<"u"&&typeof navigator.mediaDevices.addEventListener<"u"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver<"u"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia<"u"||typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getDisplayMedia<"u"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender<"u"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const t=new ReadableStream;try{return window.postMessage(t,"*",[t]),!0}catch{return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(t=>t.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const t=navigator.userAgent;if(t.match(/Chrome/))return Number.parseInt(t.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Ye=new Rne,jD={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}},hd_cropped:{width:{ideal:900},height:{ideal:720}}},gC={},xne=[{rid:"r0",scalabilityMode:"L1T2"},{rid:"r1",scalabilityMode:"L1T2"}],Ane=[{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:25e5}],Ine=[{active:!1,priority:"low"},{active:!1,priority:"low"},{active:!0,priority:"low"}],fC={320:[{rid:"q",maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"}],640:[{rid:"q",scaleResolutionDownBy:2,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"}],1280:[{rid:"q",scaleResolutionDownBy:4,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",scaleResolutionDownBy:2,maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"f",maxBitrate:15e5,maxFramerate:30,scalabilityMode:"L1T3"}]},One=[{scalabilityMode:"L3T3_KEY"}];var be=(e=>(e.WEBCAM="webcam",e.MIC="mic",e.SCREENSHARE_VIDEO="screenshare_video",e.SCREENSHARE_AUDIO="screenshare_audio",e))(be||{});function Mne(e){return e.replace(/([-_]\w)/g,t=>t[1].toUpperCase())}function bn(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>bn(i));const t={};return Object.keys(e).forEach(i=>{const r=hS(i)?i:Mne(i);t[r]=bn(e[i])}),t}function Dne(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}function $D(e){if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>$D(i));const t={};return Object.keys(e).forEach(i=>{const r=hS(i)?i:Dne(i);t[r]=e[i]}),t}function b_(e,t={}){return e==null?{}:(Object.getOwnPropertyNames(e).forEach(i=>{if(typeof e[i]!="function"){if(typeof e[i]=="object"){b_(e[i],t[i]={});return}t[i]=e[i]}}),t)}var __=(e=>(e.PARTICIPANT="PARTICIPANT",e.PEER="PEER",e.CLIENT="CLIENT",e))(__||{});const ye={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",FEAT_SPOTLIGHT:"feat_spotlight",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints"},yt={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{}};function Lne(e){var t;yt.roomName!=null||(yt.roomName=e==null?void 0:e.roomName),yt.authToken!=null||(yt.authToken=e==null?void 0:e.authToken),yt.peerId!=null||(yt.peerId=e==null?void 0:e.peerId),yt.apiBase!=null||(yt.apiBase=e==null?void 0:e.apiBase),yt.modules!=null||(yt.modules=e==null?void 0:e.modules),yt.organizationId!=null||(yt.organizationId=e==null?void 0:e.organizationId),yt.defaults={...yt.defaults,...(t=e==null?void 0:e.defaults)!=null?t:{}}}const Il="1.13.0",qm="web-core",Nne=Dre(),Mr=bn(Nne.config.media);var wf;class FD{constructor(t){j(this,wf,void 0),_(this,"getScreenShareConstraints",()=>{var i,r;const{displaySurface:n}=(i=yt.defaults.screenShare)!=null?i:{};let s={width:{max:1920},height:{max:1080},frameRate:{ideal:parseInt((r=ge.getValue(ye.VAL_MIN_FRAMERATE))!=null?r:"5",10),max:5}};if(ge.hasFeature(ye.SCREENSHARE_CONSTRAINTS)){const a=ge.getValue(ye.SCREENSHARE_CONSTRAINTS);s=JSON.parse(a)}return n!==void 0&&["monitor","browser","window"].includes(n)&&(s={...s,displaySurface:n}),{audio:!0,video:s}}),_(this,"getAudioConstraints",i=>{const r={};return Ye.isFirefox()||Ye.isWebKitBased()?(r.audio={deviceId:i,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},r):(r.audio={},r.audio.optional=[i?{sourceId:i}:{sourceId:"default"},{echoCancellation:!0},{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0}],r)}),_(this,"getVideoConstraints",i=>{const r={},{quality:n}=g(this,wf).video;let s=jD[n];if(s.frameRate={ideal:24},Ye.isChromiumBased()&&(s.frameRate.max=30),ge.hasFeature(ye.VIDEO_CONSTRAINTS)){const a=ge.getValue(ye.VIDEO_CONSTRAINTS);s=JSON.parse(a)}return r.video=s,i?r.video.deviceId={exact:i}:r.video.facingMode="user",r}),$(this,wf,t!=null?t:Mr)}}wf=new WeakMap;var Une=/\s/;function jne(e){for(var t=e.length;t--&&Une.test(e.charAt(t)););return t}var $ne=/^\s+/;function Fne(e){return e&&e.slice(0,jne(e)+1).replace($ne,"")}var mC=0/0,Bne=/^[-+]0x[0-9a-f]+$/i,Vne=/^0b[01]+$/i,zne=/^0o[0-7]+$/i,Hne=parseInt;function vC(e){if(typeof e=="number")return e;if(Are(e))return mC;if(So(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=So(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Fne(e);var i=Vne.test(e);return i||zne.test(e)?Hne(e.slice(2),i?2:8):Bne.test(e)?mC:+e}var Gne=function(){return is.Date.now()};const n1=Gne;var Wne="Expected a function",qne=Math.max,Jne=Math.min;function Kne(e,t,i){var r,n,s,a,o,c,d=0,l=!1,u=!1,f=!0;if(typeof e!="function")throw new TypeError(Wne);t=vC(t)||0,So(i)&&(l=!!i.leading,u="maxWait"in i,s=u?qne(vC(i.maxWait)||0,t):s,f="trailing"in i?!!i.trailing:f);function y(B){var W=r,q=n;return r=n=void 0,d=B,a=e.apply(q,W),a}function b(B){return d=B,o=setTimeout(w,t),l?y(B):a}function k(B){var W=B-c,q=B-d,fe=t-W;return u?Jne(fe,s-q):fe}function P(B){var W=B-c,q=B-d;return c===void 0||W>=t||W<0||u&&q>=s}function w(){var B=n1();if(P(B))return E(B);o=setTimeout(w,k(B))}function E(B){return o=void 0,f&&r?y(B):(r=n=void 0,a)}function R(){o!==void 0&&clearTimeout(o),d=0,r=c=n=o=void 0}function D(){return o===void 0?a:E(n1())}function V(){var B=n1(),W=P(B);if(r=arguments,n=this,c=B,W){if(o===void 0)return b(c);if(u)return clearTimeout(o),o=setTimeout(w,t),y(c)}return o===void 0&&(o=setTimeout(w,t)),a}return V.cancel=R,V.flush=D,V}var Yne="[object Map]",Qne="[object Set]",Zne=Object.prototype,Xne=Zne.hasOwnProperty;function ese(e){if(e==null)return!0;if(US(e)&&(Jv(e)||typeof e=="string"||typeof e.splice=="function"||LS(e)||oD(e)||rD(e)))return!e.length;var t=Yv(e);if(t==Yne||t==Qne)return!e.size;if(Kv(e))return!lD(e).length;for(var i in e)if(Xne.call(e,i))return!1;return!0}function Sf(e){const t={};return typeof(e==null?void 0:e.code)=="number"&&(t.code=e.code),typeof(e==null?void 0:e.code)=="string"&&(t.code=e.code.substring(0,100)),typeof(e==null?void 0:e.name)=="string"&&(t.name=e.name.substring(0,500)),typeof(e==null?void 0:e.message)=="string"&&(t.message=e.message.substring(0,500)),typeof(e==null?void 0:e.reason)=="string"&&(t.reason=e.reason.substring(0,500)),typeof(e==null?void 0:e.stack)=="string"&&(t.stack=e.stack.substring(0,500)),t}function Ef(){var e,t,i,r;const n=typeof navigator<"u"&&!navigator.isReactNative&&((e=window.location.host)==null?void 0:e.includes("staging"))&&((t=window.location.host)==null?void 0:t.includes("dyte.io")),s=!!((r=(i=yt.modules)==null?void 0:i.devTools)!=null&&r.logs);return n||s}function tse(e){if(ge.hasFeature(ye.LOG_LEVEL)){let t=ge.getValue(ye.LOG_LEVEL)||"all";if(t=t.toLowerCase().trim(),t==="off")return!1;if(t!=="all"){const i=["debug","log","info","warn","error"],r=i.indexOf(e),n=i.indexOf(t);if(r<n)return!1}}return!0}function BD(e,t,i={}){return Object.getOwnPropertyNames(e).forEach(r=>{var n;if([null,void 0,NaN].includes(e[r])||t&&(((n=t.match(/\./g))==null?void 0:n.length)||0)>=10)return;const s=t?`${t}.${r}`:r;typeof e[r]=="object"?BD(e[r],s,i):["number","string","boolean"].includes(typeof e[r])&&(i[s]=e[r])}),i}function s1(e,t={},i){const r={};try{const n=JSON.stringify(t),s=JSON.parse(n),a=BD(s,i),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${e}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw Ef()&&console.error(c,{log:t,flattened:o}),new Error(c)}return JSON.parse(o)}catch(n){const s=Sf(n);r[`${i}.error.message`]=s.message||"",r[`${i}.error.stack`]=s.stack||"",r[`${i}.error.reason`]=s.reason||"",r[`${i}.error.source`]="safelyFlattenObjForOpenTelemetry"}return r}const Be=class{static get logsEndpoint(){return Ef()?"https://api-silos-staging.dyte.io/otel/logs":"https://api-silos.dyte.io/otel/logs"}static init(e,t){if(navigator.isReactNative)return;const i=new uQ({url:"https://otel.dyte.io/v1/traces",headers:{"api-key":""}});let r=Ef()?"staging":"production";const n=new dY({resource:new _Q({"service.name":qm,sdk_version:Il,env:r,...s1("OTELResource",Ye.getDeviceInfo(),"device")}),idGenerator:{generateTraceId:()=>`${e}`.replace(/-/g,""),generateSpanId:()=>Iv().replace(/-/g,"").substring(0,16)}});Be.tracingEnabled=t,Be.tracer=n.getTracer(e),Be.meetingMetadata.peerId=e,Be.meetingMetadata.sdkVersion=Il,Be.meetingMetadata.deviceInfo=Ye.getDeviceInfo(),Be.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window<"u"&&window.location.href,n.addSpanProcessor(new e3(i)),"zone"in window?n.register({contextManager:new hQ}):n.register({contextManager:new t3}),Be.contextPropagator=cl,document.addEventListener("visibilitychange",Be.processCachedLogs),Be.logsProcessorTimer=setInterval(Be.processCachedLogs,Be.logsProcessingInterval),t&&(Be.rootSpan=Be.tracer.startSpan(`peer_${e}`,{},hn),Be.rootSpan.end(),Be.initialized=!0)}static trace(e){return(t,i,r)=>{const n=r.value;return r.value=function(...s){if(!Be.initialized||navigator.isReactNative||!Be.tracingEnabled||ge.hasFeature(ye.SKIP_OTEL_TRACES))return n.apply(this,s);const a=Be.getCurrentSpan(),o=Tg.trace.setSpan(hn,a);return ge.hasFeature(ye.NR_OTEL_WEB)||Be.addLogInCurrentSpan("info",e),Be.tracer.startActiveSpan(e,{},o,c=>{const d=n.apply(this,s);return Promise.resolve(d).then(()=>{c.end()}).catch(()=>{c.end()}),d})},r}}static getCurrentSpan(){if(navigator.isReactNative)return null;let e=Tg.trace.getSpan(Tg.context.active());return e!=null||(e=Be.rootSpan),e}static getCurrentContext(){return Tg.trace.setSpan(hn,Be.getCurrentSpan())}static getCurrentSpanName(){var e;return(e=this.getCurrentSpan())==null?void 0:e.name}static injectContext(e){Be.getCurrentSpan()&&Be.contextPropagator.inject(Be.getCurrentContext(),e)}static addLogInCurrentSpan(e="info",t,i={},r){var n,s;if(i!=null&&i.error&&Object.assign(i,{error:Sf(i.error)}),Ef()&&(ese(i)?console[e]("DyteInternalLogs:: ",e,t):console[e]("DyteInternalLogs:: ",e,t,i)),!!tse(e))try{const a=s1(t,i,"metadata"),o=Be.getCurrentSpan(),c=new Date,d={message:t,level:e,...a,"trace.id":(n=o==null?void 0:o.spanContext())==null?void 0:n.traceId,"span.id":(s=o==null?void 0:o.spanContext())==null?void 0:s.spanId,loggedAt:c.toISOString(),loggedAtTzOffset:c.getTimezoneOffset()};r?Be.sendOtelLogsToNewRelic([d]):Be.logsCache.push(d)}catch(a){Be.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:Sf(a)})}}static sendOtelLogsToNewRelic(e){Am.post(Be.logsEndpoint,{meetingMetadata:s1("sendOtelLogsToNewRelic",Be.meetingMetadata,"meetingMetadata"),serviceName:qm,logs:e}).catch(t=>{Be.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:Sf(t)}),Be.logsCache.push(...e)})}static processCachedLogs(){const e=Be.logsCache.splice(0,25);e!=null&&e.length&&Be.sendOtelLogsToNewRelic(e)}static destruct(){clearInterval(Be.logsProcessorTimer),Be.processCachedLogs(),!navigator.isReactNative&&document.removeEventListener("visibilitychange",Be.processCachedLogs)}};let C=Be;_(C,"tracer"),_(C,"contextPropagator"),_(C,"rootSpan"),_(C,"logsCache",[]),_(C,"logsProcessorTimer"),_(C,"tracingEnabled",!0),_(C,"initialized",!1),_(C,"logsProcessingInterval",7e3),_(C,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),_(C,"meetingMetadata",{});class T{static info(t,i,r){C.addLogInCurrentSpan("info",t,i,r)}static error(t,i,r){C.addLogInCurrentSpan("error",t,i,r)}static debug(t,i,r){C.addLogInCurrentSpan("debug",t,i,r)}static log(t,i,r){C.addLogInCurrentSpan("log",t,i,r)}static warn(t,i,r){C.addLogInCurrentSpan("warn",t,i,r)}}const ise={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler"},Tf={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1700:"Internal exception"};Object.keys(Tf).forEach(e=>{Tf[e]=`{${ise[e.slice(0,2)]}} ${Tf[e]}`});class N extends Error{constructor(t,i,r=!1){super(t),_(this,"code"),this.code=i,this.name="DyteError",this.message=`[ERR${this.code}]: ${Tf[this.code]}
${this.message}`;try{let n=r;i&&i.endsWith("00")&&(n=!0),n&&T.error("DyteError",{error:{message:this.message,name:this.name,code:i}})}catch{}}}function Ig(e,t,i,r){if(typeof i=="function"&&r instanceof t)i.call(null,r,e);else throw r}function yC(e,t,i){if(!e.value){const n=e.get,s=e.set;return n&&(e.get=function(){try{return n.apply(this)}catch(a){Ig(this,t,i,a)}}),s&&(e.set=function(a){try{return s.apply(this,[a])}catch(o){Ig(this,t,i,o)}}),e}const r=e.value;return e.value=function(...n){try{const s=r.apply(this,n);return s&&s instanceof Promise?s.catch(a=>{Ig(this,t,i,a)}):s}catch(s){Ig(this,t,i,s)}},e}function rse(e,t){return(i,r,n)=>{if(n)return yC(n,e,t);for(const s of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,s);(a.value instanceof Function||a.get instanceof Function||a.set instanceof Function)&&Object.defineProperty(i.prototype,s,yC(a,e,t))}}}const Yi=e=>rse(Error,e);var Xo=(e=>(e.allowed="ALLOWED",e.notAllowed="NOT_ALLOWED",e.canRequest="CAN_REQUEST",e))(Xo||{});const nse={view_type:Zn.GroupCall,accept_waiting_requests:!1,request_produce:!1,can_allow_participant_audio:!0,can_allow_participant_screensharing:!1,can_allow_participant_video:!0,request_kick_participant:!1,kick_participant:!0,pin_participant:!0,can_record:!1,waiting_room_type:"SKIP",plugins:{can_close:!0,can_start:!0,can_edit_acl:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},produce:{video:{allow:!0,quality:Mr.video.quality,frame_rate:Mr.video.frameRate},audio:!0,screenshare:{allow:!0,quality:Mr.screenshare.quality,frame_rate:Mr.screenshare.frameRate}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},reactions:!1,hidden_participant:!1,show_participant_list:!0,can_change_participant_role:!0,can_change_theme:!1,can_present:!1,accept_present_requests:!1,can_edit_display_name:!1,max_screenshare_count:1,is_recorder:!1,can_spotlight:!1},sse=bn(nse);var je;const w_=class{constructor(e){if(j(this,je,void 0),!e)throw T.error("DytePermissionsPresetV1::load_preset_permissions_failed"),new N("Could not load preset permissions.");$(this,je,e)}static fromResponse(e){return new w_(e)}static default(){return new w_(sse)}get viewType(){return g(this,je).viewType}get acceptWaitingRequests(){return g(this,je).acceptWaitingRequests}get requestProduce(){return g(this,je).requestProduce}get requestProduceAudio(){return this.requestProduce}get requestProduceScreenshare(){return this.requestProduce}get canAllowParticipantAudio(){return g(this,je).canAllowParticipantAudio}get canAllowParticipantScreensharing(){return g(this,je).canAllowParticipantScreensharing}get canAllowParticipantVideo(){return g(this,je).canAllowParticipantVideo}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){return g(this,je).kickParticipant}get pinParticipant(){return g(this,je).pinParticipant}get canRecord(){return g(this,je).canRecord}get waitingRoomType(){return g(this,je).waitingRoomType}get waitingRoomBehaviour(){return g(this,je).waitingRoomType==="SKIP"?"SKIP":g(this,je).waitingRoomType==="SKIP_ON_PRIVILEGED_USER_ENTRY"?"ON_PRIVILEGED_USER_ENTRY":g(this,je).waitingRoomType==="ON_ACCEPT"?"SKIP_ON_ACCEPT":"SKIP"}get plugins(){return g(this,je).plugins}get polls(){return{...g(this,je).polls,canViewResults:g(this,je).polls.canView}}get produceVideo(){return{...g(this,je).produce.video,allow:g(this,je).produce.video.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceVideo(){const e=g(this,je).produce.video.allow;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get produceScreenshare(){return{...g(this,je).produce.screenshare,allow:g(this,je).produce.screenshare.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceScreenshare(){const e=g(this,je).produce.screenshare.allow;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get produceAudio(){return g(this,je).produce.audio?"ALLOWED":"NOT_ALLOWED"}get canProduceAudio(){const e=g(this,je).produce.audio;return this.requestProduce?"CAN_REQUEST":e?"ALLOWED":"NOT_ALLOWED"}get chatPublic(){return g(this,je).chat.public}get chatPrivate(){return g(this,je).chat.private}get connectedMeetings(){return{canAlterConnectedMeetings:!1,canSwitchConnectedMeetings:!1,canSwitchToParentMeeting:!1}}get reactions(){return g(this,je).reactions}get hiddenParticipant(){return g(this,je).hiddenParticipant}get showParticipantList(){return g(this,je).showParticipantList}get canChangeParticipantRole(){return g(this,je).canChangeParticipantRole}get canChangeTheme(){return g(this,je).canChangeTheme}get canPresent(){return g(this,je).canPresent}get acceptPresentRequests(){return g(this,je).acceptPresentRequests}get canEditDisplayName(){return g(this,je).canEditDisplayName}get maxScreenShareCount(){return g(this,je).maxScreenshareCount}get isRecorder(){return g(this,je).isRecorder}get canLivestream(){return!1}get canSpotlight(){return g(this,je).canSpotlight}get isV2(){return!1}};let bC=w_;je=new WeakMap;const $e={isV2AuthToken:!1,meetingId:null,overrides:{},roomNodeOptions:void 0},Ou={baseURL:"http://localhost:5000",createdAt:"2021-08-05T10:49:56.602Z",description:"Develop plugins locally",id:"09259e3b-7be8-46f6-9801-106bf1866e1c",name:"Localhost Dev",organizationId:"4ad15a19-80e2-4105-bf43-48039fd2963e",picture:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png",private:!1,published:!0,staggered:!1,tags:["#localhost","#dev"],type:"self_hosted",updatedAt:"2021-08-05T10:50:07.681Z"};function ase(e,t){if(t){$e.isV2AuthToken=!1;return}try{const{meetingId:i}=JSON.parse(atob(e.split(".")[1]));if(!i)throw Error(`Received V1 auth token ${e}`);$e.isV2AuthToken=!0,$e.meetingId=i}catch(i){throw T.error("constants::setIsV2AuthToken",{error:i,debuggingHint:`Unable to decode auth token: ${e}`},!0),new N("Invalid auth token")}}function VD(e,t){if($e.isV2AuthToken&&ge.hasFeature(ye.CONNECTED_MEETINGS))return!0;const i=ge.getValue(ye.CHAT_SOCKET_SERVER)||"socket-service",r=ge.getValue(ye.PLUGIN_SOCKET_SERVER)||"socket-service",n=ge.getValue(ye.POLL_SOCKET_SERVER)||"socket-service";return $e.isV2AuthToken&&e===Zn.Livestream||[i,r,n].includes("socket-service")||t.includes("HIVE")}function ose(e){$e.overrides=e}function hh(e){return $e.overrides&&$e.overrides[e]?$e.overrides[e]:!1}function cse(e){$e.roomNodeOptions=e}var YS=(e=>(e.REQUESTED_BY_PARTICIPANT="REQUESTED_BY_PARTICIPANT",e.REQUESTED_BY_MODERATOR="REQUESTED_BY_MODERATOR",e))(YS||{}),QS=(e=>(e.PRESENT="REQUEST_TO_PRESENT",e))(QS||{}),Da,La;class dse extends yr.EventEmitter{constructor(){super(),j(this,Da,void 0),j(this,La,void 0),_(this,"asyncPromiseTimeout"),$(this,Da,new Map),$(this,La,new Map),this.asyncPromiseTimeout=8e3}async emitAsync(t,...i){g(this,Da).set(t,[]);const r=g(this,La).get(t).map(()=>new Promise(n=>{g(this,Da).get(t).push(n)}));super.emit(t,...i),await Promise.race([Promise.all(r),new Promise((n,s)=>setTimeout(()=>s(new Error("emitAsync failed to resolve.")),this.asyncPromiseTimeout))]),g(this,Da).delete(t)}onAsync(t,i){const r=g(this,Da),n=async(...s)=>{var a;try{await i(...s)}catch(c){T.error("[onAsync]",{error:c})}const o=(a=r.get(t))==null?void 0:a.shift();o==null||o()};return g(this,La).get(t)||g(this,La).set(t,[]),g(this,La).get(t).push(n),super.on(t,n)}reset(){$(this,Da,new Map),$(this,La,new Map),super.removeAllListeners()}}Da=new WeakMap,La=new WeakMap;const M=new dse;var I=(e=>(e.NEW_PRODUCER="NEW_PRODUCER",e.ROOM_NODE_CONNECTED="ROOM_NODE_CONNECTED",e.ROOM_NODE_DISCONNECTED="ROOM_NODE_DISCONNECTED",e.ROOM_NODE_CONNECTION_ERROR="ROOM_NODE_CONNECTION_ERROR",e.SOCKET_SERVICE_CONNECTED="SOCKET_SERVICE_CONNECTED",e.SOCKET_SERVICE_DISCONNECTED="SOCKET_SERVICE_DISCONNECTED",e.SOCKET_SERVICE_RECONNECTING="SOCKET_SERVICE_RECONNECTING",e.SOCKET_SERVICE_RECONNECTION_ATTEMPT="SOCKET_SERVICE_RECONNECTION_ATTEMPT",e.SOCKET_SERVICE_RECONNECT_FAILURE="SOCKET_SERVICE_RECONNECT_FAILURE",e.SOCKET_SERVICE_RECONNECTED="SOCKET_SERVICE_RECONNECTED",e.SOCKET_SERVICE_FAILED="SOCKET_SERVICE_FAILED",e.ROOM_JOINED="ROOM_JOINED",e.SOCKET_SERVICE_ROOM_JOINED="SOCKET_SERVICE_ROOM_JOINED",e.SELF_ROOM_JOINED="SELF_ROOM_JOINED",e.PRODUCER_SCORE_UPDATE="PRODUCER_SCORE_UPDATE",e.CONSUMER_SCORE_UPDATE="CONSUMER_SCORE_UPDATE",e.PRODUCER_STATUS_UPDATE="PRODUCER_STATUS_UPDATE",e.CONSUMER_STATUS_UPDATE="CONSUMER_STATUS_UPDATE",e.LOW_PRODUCER_SCORE="LOW_PRODUCER_SCORE",e.LOW_CONSUMER_SCORE="LOW_CONSUMER_SCORE",e.MEDIA_PERMISSION_ERROR="MEDIA_PERMISSION_ERROR",e.MEDIA_PERMISSION_UPDATE="MEDIA_PERMISSION_UPDATE",e.WAITLISTED="WAIT_LISTED",e.WAITLIST_ACCEPTED="websocket/waitlist-accepted",e.WAITLIST_REJECTED="websocket/waitlist-rejected",e.WAITLIST_PEER_ADDED="websocket/waitlist-peer-added",e.WAITLIST_PEER_REMOVED="websocket/waitlist-peer-closed",e.MESSAGE="websocket/message",e.ROOM_MESSAGE="websocket/room-message",e.DISABLE_AUDIO="websocket/disable-audio",e.DISABLE_VIDEO="websocket/disable-video",e.PEER_JOINED="websocket/peer-joined",e.PEER_CLOSED="websocket/peer-closed",e.PEER_MUTED="websocket/peer-muted",e.PEER_UNMUTED="websocket/peer-unmuted",e.PEER_PINNED="websocket/pin-peer",e.PEER_UNPINNED="websocker/unpin-peer",e.MUTE_ALL="websocket/mute-all",e.MUTE_ALL_VIDEO="websocket/mute-all-video",e.CONSUMER_CLOSED="websocket/consumer-closed",e.CONSUMER_PAUSED="websocket/consumer-paused",e.CONSUMER_RESUMED="websocket/consumer-resumed",e.PRODUCER_CLOSED="websocket/producer-closed",e.NEW_CONSUMER="websocket/new-consumer",e.CONNECTED_MEETING_STATE="websocket/connectedMeetingState",e.MOVE_TO_CONNECTED_MEETING="websocket/transferMeeting",e.GET_CHAT_MESSAGES="websocket/get-chat-messages",e.NEW_CHAT_MESSAGE="websocket/new-chat-message",e.PIN_CHAT_MESSAGE="websocket/pin-chat-message",e.UNPIN_CHAT_MESSAGE="websocket/unpin-chat-message",e.GET_POLLS="websocket/get-polls",e.UPDATE_POLL="websocket/update-poll",e.SELECTED_PEERS="websocket/selected-peers",e.GET_PAGE="websocket/get-page",e.ACTIVE_SPEAKER="websocket/active-speaker",e.NO_ACTIVE_SPEAKER="websocket/no-active-speaker",e.PRODUCER_SCORE="websocket/producer-score",e.CONSUMER_SCORE="websocket/consumer-score",e.ENABLE_PLUGIN="websocket/enable-plugin",e.DISABLE_PLUGIN="websocket/disable-plugin",e.PLUGIN_EVENT="websocket/plugin-event",e.PLUGIN_DATA="websocket/plugin-data",e.PLUGIN_INTERNAL_DATA="websocket/plugin-internal-data",e.KICKED="websocket/kicked",e.RECORDING_STARTED="websocket/recording-started",e.RECORDING_STOPPED="websocket/recording-stopped",e.ICE_CONNECTED="ICE_CONNECTED",e.ICE_DISCONNECTED="ICE_DISCONNECTED",e.ICE_FAILED="ICE_FAILED",e.ICE_RECONNECTING="ICE_RECONNECTING",e.AUDIO_TRACK_ANALYSIS="AUDIO_TRACK_ANALYSIS",e.AUDIO_TRACK_CLOSED="AUDIO_TRACK_CLOSED",e.AUDIO_TRACK_CREATED="AUDIO_TRACK_CREATED",e.SCREENSHARE_AUDIO_TRACK_ANALYSIS="SCREENSHARE_AUDIO_TRACK_ANALYSIS",e.SCREENSHARE_AUDIO_TRACK_CLOSED="SCREENSHARE_AUDIO_TRACK_CLOSED",e.SCREENSHARE_AUDIO_TRACK_CREATED="SCREENSHARE_AUDIO_TRACK_CREATED",e.VIDEO_TRACK_ANALYSIS="VIDEO_TRACK_ANALYSIS",e.VIDEO_TRACK_ANALYSIS_ERROR="VIDEO_TRACK_ANALYSIS_ERROR",e.VIDEO_TRACK_CLOSED="VIDEO_TRACK_CLOSED",e.VIDEO_TRACK_CREATED="VIDEO_TRACK_CREATED",e.SCREENSHARE_VIDEO_TRACK_ANALYSIS="SCREENSHARE_VIDEO_TRACK_ANALYSIS",e.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR="SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR",e.SCREENSHARE_VIDEO_TRACK_CLOSED="SCREENSHARE_VIDEO_TRACK_CLOSED",e.SCREENSHARE_VIDEO_TRACK_CREATED="SCREENSHARE_VIDEO_TRACK_CREATED",e.CANDIDATE_PEER_UPDATE="CANDIDATE_PEER_UPDATE",e.INBOUND_RTP_UPDATE="INBOUND_RTP_UPDATE",e.OUTBOUND_RTP_UPDATE="OUTBOUND_RTP_UPDATE",e.SEND_TRANSPORT_CLOSED="SEND_TRANSPORT_CLOSED",e.RECV_TRANSPORT_CLOSED="RECV_TRANSPORT_CLOSED",e.SEND_TRANSPORT_CREATED="SEND_TRANSPORT_CREATED",e.RECV_TRANSPORT_CREATED="RECV_TRANSPORT_CREATED",e.PRODUCER_TOGGLE="hive/producer-toggle",e.CONSUMER_TOGGLE="hive/consumer-toggle",e.SELECTED_PEERS_DIFF="hive/selected-peers-diff",e.REFRESH_GRID="hive/refresh-grid",e.RESET_PRODUCER_STATE="hive/reset-producer-state",e.HIVE_RECORDING_STARTED="hive/recording-started",e.HIVE_RECORDING_STOPPED="hive/recording-stopped",e.HIVE_TRANSPORT_STATE_CHANGED="hive/transport-state-changed",e.ROOM_STATE="sockethub/room-state",e.PEER_DISPLAY_NAME_CHANGED="hive/display-name-changed",e.ASSERT_SPOTLIGHTER="websocket/assert-spotlighter",e.PEER_REQUESTED_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-added",e.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-withdrawn",e.PEER_REJECTED_TO_JOIN_STAGE="websocket/peer-rejected-to-join-stage",e.PEER_ADDED_TO_STAGE="websocket/peer-added-to-stage",e.PEER_REMOVED_FROM_STAGE="websocket/peer-removed-from-stage",e.PEER_STARTED_PRESENTING="websocket/peer-started-presenting",e.PEER_STOPPED_PRESENTING="websocket/peer-stopped-presenting",e.REQUEST_TO_JOIN_STAGE_ACCEPTED="websocket/request-to-join-stage-accepted",e.REQUEST_TO_JOIN_STAGE_REJECTED="websocket/request-to-join-stage-rejected",e.STARTED_PRESENTING="websocket/started-presenting",e.STOPPED_PRESENTING="websocket/stopped-presenting",e.REMOVED_FROM_STAGE="websocket/removed-from-stage",e.JOIN_MEDIA_ROOM="JOIN_MEDIA_ROOM",e.LEAVE_MEDIA_ROOM="LEAVE_MEDIA_ROOM",e))(I||{}),Za;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER"})(Za||(Za={}));var qn;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO"})(qn||(qn={}));class lse extends U{constructor(){super("media.Pair",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new lse;class use extends U{constructor(){super("media.Codec",[])}}new use;class pse extends U{constructor(){super("media.Fingerprint",[{no:1,name:"algorithm",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new pse;class hse extends U{constructor(){super("media.SessionDescription",[{no:1,name:"target",kind:"enum",T:()=>["media.Target",Za]},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"sdp",kind:"scalar",T:9}])}}const wa=new hse;class gse extends U{constructor(){super("media.CreateTransportRequest",[{no:1,name:"consuming",kind:"scalar",T:8},{no:2,name:"force_tcp",kind:"scalar",opt:!0,T:8},{no:3,name:"description",kind:"message",T:()=>wa}])}}const fse=new gse;class mse extends U{constructor(){super("media.CreateTransportResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>wa}])}}const Xv=new mse;class vse extends U{constructor(){super("media.RenegotiateRequest",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>wa}])}}const yse=new vse;class bse extends U{constructor(){super("media.RenegotiateResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>wa}])}}new bse;class _se extends U{constructor(){super("media.NestedScore",[{no:1,name:"encoding_idx",kind:"scalar",T:5},{no:2,name:"rid",kind:"scalar",T:9},{no:3,name:"score",kind:"scalar",T:5},{no:4,name:"ssrc",kind:"scalar",T:3,L:0}])}}const wse=new _se;class Sse extends U{constructor(){super("media.ProducerTrack",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"stream_id",kind:"scalar",T:9}])}}const Ese=new Sse;class Tse extends U{constructor(){super("media.ProducerEntry",[{no:1,name:"producing_transport_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9}])}}new Tse;class kse extends U{constructor(){super("media.ConsumerEntry",[{no:1,name:"consuming_transport_id",kind:"scalar",T:9},{no:2,name:"consumer_id",kind:"scalar",T:9}])}}new kse;class Pse extends U{constructor(){super("media.ProducerState",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"kind",kind:"enum",T:()=>["media.ProducerKind",qn]},{no:3,name:"pause",kind:"scalar",T:8},{no:4,name:"screen_share",kind:"scalar",T:8}])}}const jh=new Pse;class Cse extends U{constructor(){super("media.ConsumerState",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>jh},{no:3,name:"producer_track",kind:"message",T:()=>Ese}])}}const Rse=new Cse;class xse extends U{constructor(){super("media.ProducerIdToConsumerMap",[{no:1,name:"map",kind:"map",K:9,V:{kind:"message",T:()=>Rse}}])}}const zD=new xse;class Ase extends U{constructor(){super("media.edge.PeerJoinRequest",[{no:1,name:"display_name",kind:"scalar",opt:!0,T:9},{no:2,name:"prejoined",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:5,name:"preset",kind:"scalar",opt:!0,T:12},{no:6,name:"user_id",kind:"scalar",opt:!0,T:9},{no:7,name:"organization_id",kind:"scalar",opt:!0,T:9}])}}const Ise=new Ase;class Ose extends U{constructor(){super("media.edge.PeerJoinCompleteRequest",[])}}const Mse=new Ose;class Dse extends U{constructor(){super("media.edge.PeerLeaveRequest",[{no:1,name:"close_room",kind:"scalar",T:8}])}}const Lse=new Dse;class Nse extends U{constructor(){super("media.edge.ConsumeMultipleProducerRequest",[{no:1,name:"producer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8}])}}new Nse;class Use extends U{constructor(){super("media.edge.ConsumePeerRequest",[{no:1,name:"producing_peer_id",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8},{no:3,name:"producer_id",kind:"scalar",opt:!0,T:9}])}}const jse=new Use;class $se extends U{constructor(){super("media.edge.ProducerCreateRequest",[{no:1,name:"kind",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"description",kind:"message",T:()=>wa},{no:5,name:"msid",kind:"scalar",T:9}])}}const Fse=new $se;class Bse extends U{constructor(){super("media.edge.SelectedPeersRequest",[])}}new Bse;class Vse extends U{constructor(){super("media.edge.GlobalPeerPinningRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const zse=new Vse;class Hse extends U{constructor(){super("media.edge.ProducerToggleRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const Og=new Hse;class Gse extends U{constructor(){super("media.edge.ConsumerToggleRequest",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const _C=new Gse;class Wse extends U{constructor(){super("media.edge.ProducerCloseRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>wa}])}}const qse=new Wse;class Jse extends U{constructor(){super("media.edge.ConsumerCloseRequest",[{no:1,name:"consumer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"description",kind:"message",T:()=>wa}])}}const Kse=new Jse;class Yse extends U{constructor(){super("media.edge.KickPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const Qse=new Yse;class Zse extends U{constructor(){super("media.edge.KickAllPeersRequest",[])}}const Xse=new Zse;class eae extends U{constructor(){super("media.edge.PeerDisplayNameEditRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const tae=new eae;class iae extends U{constructor(){super("media.edge.HostMediaControlForPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"video",kind:"scalar",T:8},{no:4,name:"scree_share",kind:"scalar",T:8}])}}const rae=new iae;class nae extends U{constructor(){super("media.edge.HostMediaControlForAllPeerRequest",[{no:1,name:"audio",kind:"scalar",T:8},{no:2,name:"video",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8}])}}const sae=new nae;class aae extends U{constructor(){super("media.edge.GetRoomStateResponse",[{no:1,name:"display_title",kind:"scalar",T:9},{no:2,name:"locked_mode",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"room_name",kind:"scalar",T:9},{no:5,name:"current_peer_id",kind:"scalar",T:9},{no:6,name:"is_recording",kind:"scalar",opt:!0,T:8},{no:7,name:"recorder_participant_id",kind:"scalar",opt:!0,T:9}])}}const oae=new aae;class cae extends U{constructor(){super("media.edge.ErrorResponse",[{no:1,name:"error_message",kind:"scalar",T:9},{no:2,name:"event_id",kind:"scalar",T:5}])}}new cae;class dae extends U{constructor(){super("media.edge.EmptyResponse",[])}}new dae;class lae extends U{constructor(){super("media.edge.RoomParticipants",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"producer_states",kind:"message",repeat:1,T:()=>jh},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",opt:!0,T:9}])}}const HD=new lae;class uae extends U{constructor(){super("media.edge.SelectedPeersResponse",[{no:1,name:"audio_peers",kind:"scalar",repeat:2,T:9},{no:2,name:"compulsory_peers",kind:"scalar",repeat:2,T:9}])}}const GD=new uae;class pae extends U{constructor(){super("media.edge.SelectedPeersDiffEntry",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"priority",kind:"scalar",T:5}])}}const hae=new pae;class gae extends U{constructor(){super("media.edge.SelectedPeersDiffResponse",[{no:1,name:"entries",kind:"message",repeat:1,T:()=>hae}])}}const fae=new gae;class mae extends U{constructor(){super("media.edge.PeerJoinResponse",[])}}new mae;class vae extends U{constructor(){super("media.edge.PeerJoinCompleteResponse",[{no:1,name:"room_state",kind:"message",T:()=>oae},{no:2,name:"participants",kind:"message",repeat:1,T:()=>HD},{no:3,name:"selected_peers",kind:"message",T:()=>GD},{no:4,name:"max_preferred_streams",kind:"scalar",T:5}])}}const yae=new vae;class bae extends U{constructor(){super("media.edge.PeerLeaveResponse",[{no:1,name:"closed",kind:"scalar",T:8}])}}const _ae=new bae;class wae extends U{constructor(){super("media.edge.ConsumeMultipleProducerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>zD},{no:3,name:"transport_details",kind:"message",T:()=>Xv}])}}new wae;class Sae extends U{constructor(){super("media.edge.ConsumePeerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>zD},{no:3,name:"transport_details",kind:"message",T:()=>Xv}])}}const Eae=new Sae;class Tae extends U{constructor(){super("media.edge.ProducerCreateResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"transport_details",kind:"message",T:()=>Xv},{no:4,name:"description",kind:"message",T:()=>wa}])}}const kae=new Tae;class Pae extends U{constructor(){super("media.edge.ProducerScoreResponse",[{no:1,name:"responseid",kind:"scalar",T:9},{no:2,name:"score",kind:"message",T:()=>wse}])}}new Pae;class Cae extends U{constructor(){super("media.edge.ActiveSpeakerResponse",[{no:1,name:"responsepeer_id",kind:"scalar",T:9},{no:2,name:"volume",kind:"scalar",T:5}])}}new Cae;class Rae extends U{constructor(){super("media.edge.NoActiveSpeakerResponse",[])}}new Rae;class xae extends U{constructor(){super("media.edge.ProducerToggleResponse",[])}}new xae;class Aae extends U{constructor(){super("media.edge.ConsumerToggleResponse",[])}}new Aae;class Iae extends U{constructor(){super("media.edge.ProducerClosingResponse",[{no:1,name:"description",kind:"message",T:()=>wa}])}}const Oae=new Iae;class Mae extends U{constructor(){super("media.edge.ConsumerClosingResponse",[])}}new Mae;class Dae extends U{constructor(){super("media.edge.GlobalPeerPinningResponse",[])}}new Dae;class Lae extends U{constructor(){super("media.edge.KickPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Nae=new Lae;class Uae extends U{constructor(){super("media.edge.KickAllPeersResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const jae=new Uae;class $ae extends U{constructor(){super("media.edge.HostMediaControlForPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Fae=new $ae;class Bae extends U{constructor(){super("media.edge.HostMediaControlForAllPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Vae=new Bae;class zae extends U{constructor(){super("media.edge.PeerDisplayNameEditResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const Hae=new zae;class Gae extends U{constructor(){super("media.edge.PeerJoinBroadcastResponse",[{no:1,name:"participant",kind:"message",T:()=>HD}])}}const Wae=new Gae;class qae extends U{constructor(){super("media.edge.PeerProducerCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>jh}])}}const Jae=new qae;class Kae extends U{constructor(){super("media.edge.PeerProducerToggleBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>jh}])}}const Yae=new Kae;class Qae extends U{constructor(){super("media.edge.PeerProducerCloseBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>jh}])}}const Zae=new Qae;class Xae extends U{constructor(){super("media.edge.PeerLeaveBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const eoe=new Xae;class toe extends U{constructor(){super("media.edge.GlobalPeerPinningBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const ioe=new toe;class roe extends U{constructor(){super("media.edge.RecordingStartedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const noe=new roe;class soe extends U{constructor(){super("media.edge.RecordingStoppedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const aoe=new soe;class ooe extends U{constructor(){super("media.edge.PeerDisplayNameEditBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const coe=new ooe;class doe extends U{constructor(){super("socket.api.BaseSocketHubMessage",[{no:1,name:"event",kind:"scalar",T:5},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9},{no:4,name:"room_id",kind:"scalar",T:9},{no:5,name:"user_id",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}])}}new doe;class loe extends U{constructor(){super("socket.api.ErrorMessage",[{no:1,name:"code",kind:"scalar",opt:!0,T:5},{no:2,name:"message",kind:"scalar",T:9}])}}new loe;class uoe extends U{constructor(){super("socket.PeerPreset",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"message",T:()=>Moe}])}}new uoe;class poe extends U{constructor(){super("socket.PeerPreset.Plugins",[{no:1,name:"can_close",kind:"scalar",T:8},{no:2,name:"can_start",kind:"scalar",T:8}])}}const hoe=new poe;class goe extends U{constructor(){super("socket.PeerPreset.Polls",[{no:1,name:"can_create",kind:"scalar",T:8},{no:2,name:"can_vote",kind:"scalar",T:8},{no:3,name:"can_view",kind:"scalar",T:8}])}}const foe=new goe;class moe extends U{constructor(){super("socket.PeerPreset.Video",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const voe=new moe;class yoe extends U{constructor(){super("socket.PeerPreset.Screenshare",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const boe=new yoe;class _oe extends U{constructor(){super("socket.PeerPreset.Produce",[{no:1,name:"video",kind:"message",T:()=>voe},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"screenshare",kind:"message",T:()=>boe}])}}const woe=new _oe;class Soe extends U{constructor(){super("socket.PeerPreset.Public",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:8},{no:3,name:"files",kind:"scalar",T:8}])}}const Eoe=new Soe;class Toe extends U{constructor(){super("socket.PeerPreset.Private",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"can_receive",kind:"scalar",T:8},{no:3,name:"text",kind:"scalar",T:8},{no:4,name:"files",kind:"scalar",T:8}])}}const koe=new Toe;class Poe extends U{constructor(){super("socket.PeerPreset.Chat",[{no:1,name:"public",kind:"message",T:()=>Eoe},{no:2,name:"private",kind:"message",T:()=>koe}])}}const Coe=new Poe;class Roe extends U{constructor(){super("socket.PeerPreset.Permissions",[{no:1,name:"view_type",kind:"scalar",T:9},{no:2,name:"accept_waiting_requests",kind:"scalar",T:8},{no:3,name:"request_produce",kind:"scalar",T:8},{no:4,name:"can_allow_participant_audio",kind:"scalar",T:8},{no:5,name:"can_allow_participant_screensharing",kind:"scalar",T:8},{no:6,name:"can_allow_participant_video",kind:"scalar",T:8},{no:7,name:"request_kick_participant",kind:"scalar",T:8},{no:8,name:"kick_participant",kind:"scalar",T:8},{no:9,name:"pin_participant",kind:"scalar",T:8},{no:10,name:"can_record",kind:"scalar",T:8},{no:11,name:"waiting_room_type",kind:"scalar",T:9},{no:12,name:"plugins",kind:"message",T:()=>hoe},{no:13,name:"polls",kind:"message",T:()=>foe},{no:14,name:"produce",kind:"message",T:()=>woe},{no:15,name:"chat",kind:"message",T:()=>Coe},{no:16,name:"reactions",kind:"scalar",T:8},{no:17,name:"hidden_participant",kind:"scalar",T:8},{no:18,name:"show_participant_list",kind:"scalar",T:8},{no:19,name:"can_change_participant_role",kind:"scalar",T:8},{no:20,name:"can_change_theme",kind:"scalar",T:8},{no:21,name:"can_present",kind:"scalar",T:8},{no:22,name:"is_recorder",kind:"scalar",opt:!0,T:8}])}}const xoe=new Roe;class Aoe extends U{constructor(){super("socket.PeerPreset.Preset",[{no:1,name:"permissions",kind:"message",T:()=>xoe},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"preset_name",kind:"scalar",T:9}])}}const Ioe=new Aoe;class Ooe extends U{constructor(){super("socket.PeerPreset.Data",[{no:1,name:"preset",kind:"message",T:()=>Ioe}])}}const Moe=new Ooe;class Doe extends U{constructor(){super("socket.chat.ChatMessage",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"pinned",kind:"scalar",T:8},{no:6,name:"is_edited",kind:"scalar",T:8},{no:7,name:"payload_type",kind:"scalar",T:5},{no:8,name:"payload",kind:"scalar",T:9},{no:10,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:11,name:"created_at",kind:"scalar",T:4,L:2},{no:12,name:"created_at_ms",kind:"scalar",opt:!0,T:4,L:2}])}}const $h=new Doe;class Loe extends U{constructor(){super("socket.chat.GetPaginatedChatMessageRoomRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8}])}}const Noe=new Loe;class Uoe extends U{constructor(){super("socket.chat.GetPaginatedChatMessageRoomResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>$h},{no:2,name:"next",kind:"scalar",T:8}])}}const joe=new Uoe;class $oe extends U{constructor(){super("socket.chat.GetChatMessagesResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>$h}])}}const Foe=new $oe;class Boe extends U{constructor(){super("socket.chat.SendChatMessageToRoomRequest",[{no:1,name:"payload_type",kind:"scalar",T:5},{no:2,name:"payload",kind:"scalar",T:9}])}}const Voe=new Boe;class zoe extends U{constructor(){super("socket.chat.SendChatMessageToRoomResponse",[{no:1,name:"message",kind:"message",T:()=>$h}])}}const a1=new zoe;class Hoe extends U{constructor(){super("socket.chat.SendChatMessageToPeersRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const Goe=new Hoe;class Woe extends U{constructor(){super("socket.chat.SendChatMessageToPeersResponse",[{no:1,name:"message",kind:"message",T:()=>$h}])}}const o1=new Woe;class qoe extends U{constructor(){super("socket.chat.EditChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",opt:!0,T:5},{no:3,name:"payload",kind:"scalar",opt:!0,T:9},{no:4,name:"pinned",kind:"scalar",opt:!0,T:8}])}}const Joe=new qoe;class Koe extends U{constructor(){super("socket.chat.EditChatMessageResponse",[{no:1,name:"message",kind:"message",T:()=>$h}])}}const c1=new Koe;class Yoe extends U{constructor(){super("socket.chat.DeleteChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9}])}}const Qoe=new Yoe;class Zoe extends U{constructor(){super("socket.chat.DeleteChatMessageResponse",[{no:1,name:"chat_id",kind:"scalar",T:9}])}}const d1=new Zoe;var Ec;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ON_STAGE=1]="ON_STAGE",e[e.APPROVED_STAGE=2]="APPROVED_STAGE",e[e.REQUESTED_STAGE=3]="REQUESTED_STAGE",e[e.OFF_STAGE=4]="OFF_STAGE"})(Ec||(Ec={}));var Jm;(function(e){e[e.HIVE=0]="HIVE",e[e.CHAT=1]="CHAT",e[e.PING=2]="PING"})(Jm||(Jm={}));class Xoe extends U{constructor(){super("socket.room.Peer",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",Ec,"STAGE_TYPE_"]},{no:5,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:6,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:7,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const ey=new Xoe;class ece extends U{constructor(){super("socket.room.PeerInfoResponse",[{no:1,name:"peer",kind:"message",T:()=>ey}])}}const tce=new ece;class ice extends U{constructor(){super("socket.room.RoomPeersInfoResponse",[{no:1,name:"peers",kind:"message",repeat:1,T:()=>ey}])}}new ice;class rce extends U{constructor(){super("socket.room.RoomPeerCountResponse",[{no:1,name:"count",kind:"scalar",T:4,L:2}])}}const wC=new rce;class nce extends U{constructor(){super("socket.room.Room",[{no:1,name:"room_id",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",T:9},{no:4,name:"created_at",kind:"scalar",T:4,L:2}])}}const WD=new nce;class sce extends U{constructor(){super("socket.room.RoomInfoResponse",[{no:1,name:"room",kind:"message",T:()=>WD}])}}const SC=new sce;class ace extends U{constructor(){super("socket.room.GetPeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9}])}}new ace;class oce extends U{constructor(){super("socket.room.UpdatePeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9}])}}new oce;class cce extends U{constructor(){super("socket.room.JoinRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>ey},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"organization_id",kind:"scalar",opt:!0,T:9},{no:5,name:"use_hive",kind:"scalar",opt:!0,T:8},{no:6,name:"preset",kind:"scalar",opt:!0,T:12},{no:7,name:"capabilities",kind:"enum",repeat:1,T:()=>["socket.room.Capabilities",Jm,"CAPABILITIES_"]}])}}const dce=new cce;class lce extends U{constructor(){super("socket.room.LeaveRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>ey}])}}const uce=new lce;class pce extends U{constructor(){super("socket.room.UpdateRoomInfoRequest",[{no:1,name:"room",kind:"message",T:()=>WD}])}}new pce;class hce extends U{constructor(){super("socket.room.GetConnectedRoomsDumpRequest",[])}}new hce;class gce extends U{constructor(){super("socket.room.ServiceError",[{no:1,name:"message",kind:"scalar",opt:!0,T:9},{no:2,name:"code",kind:"scalar",opt:!0,T:9}])}}const ZS=new gce;class fce extends U{constructor(){super("socket.room.ConnectedMeetingPeer",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:4,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:5,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const mce=new fce;class vce extends U{constructor(){super("socket.room.ConnectedMeetingDump",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>mce}])}}const EC=new vce;class yce extends U{constructor(){super("socket.room.GetConnectedRoomsDumpResponse",[{no:1,name:"parent_meeting",kind:"message",T:()=>EC},{no:2,name:"meetings",kind:"message",repeat:1,T:()=>EC}])}}const bce=new yce;class _ce extends U{constructor(){super("socket.room.CreateRoomRequestPayload",[{no:1,name:"title",kind:"scalar",opt:!0,T:9}])}}const wce=new _ce;class Sce extends U{constructor(){super("socket.room.CreateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>wce}])}}const Ece=new Sce;class Tce extends U{constructor(){super("socket.room.CreateRoomResponsePayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>ZS}])}}const kce=new Tce;class Pce extends U{constructor(){super("socket.room.CreateConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>kce}])}}const TC=new Pce;class Cce extends U{constructor(){super("socket.room.UpdateRoomRequestPayload",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}}const Rce=new Cce;class xce extends U{constructor(){super("socket.room.UpdateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Rce}])}}new xce;class Ace extends U{constructor(){super("socket.room.DisableRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const Ice=new Ace;class Oce extends U{constructor(){super("socket.room.DisableConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Ice}])}}const Mce=new Oce;class Dce extends U{constructor(){super("socket.room.DisableConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Uce}])}}const Lce=new Dce;class Nce extends U{constructor(){super("socket.room.DisableConnectedRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"status",kind:"scalar",opt:!0,T:9},{no:3,name:"title",kind:"scalar",opt:!0,T:9},{no:4,name:"error",kind:"message",T:()=>ZS}])}}const Uce=new Nce;class jce extends U{constructor(){super("socket.room.MovePeerPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const $ce=new jce;class Fce extends U{constructor(){super("socket.room.MovePeersBetweenRoomsRequest",[{no:1,name:"source_meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"destination_meeting_id",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>$ce}])}}const Bce=new Fce;class Vce extends U{constructor(){super("socket.room.MovedPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>ZS}])}}const qD=new Vce;class zce extends U{constructor(){super("socket.room.MovePeersBetweenRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>qD}])}}new zce;class Hce extends U{constructor(){super("socket.room.TransferPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"auth_token",kind:"scalar",opt:!0,T:9}])}}const Gce=new Hce;class Wce extends U{constructor(){super("socket.plugin.AddPluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const qce=new Wce;class Jce extends U{constructor(){super("socket.plugin.RemovePluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const Kce=new Jce;class Yce extends U{constructor(){super("socket.plugin.EnablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Qce=new Yce;class Zce extends U{constructor(){super("socket.plugin.DisablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const Xce=new Zce;class ede extends U{constructor(){super("socket.plugin.EnablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const tde=new ede;class ide extends U{constructor(){super("socket.plugin.DisablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const rde=new ide;class nde extends U{constructor(){super("socket.plugin.PluginEventToRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const sde=new nde;class ade extends U{constructor(){super("socket.plugin.PluginEventToPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"plugin_data",kind:"scalar",T:12}])}}const ode=new ade;class cde extends U{constructor(){super("socket.plugin.StoreKeys",[{no:1,name:"store_key",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",opt:!0,T:12}])}}const XS=new cde;class dde extends U{constructor(){super("socket.plugin.PluginStoreInsertKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"insert_keys",kind:"message",repeat:1,T:()=>XS}])}}const kC=new dde;class lde extends U{constructor(){super("socket.plugin.PluginStoreGetKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"get_keys",kind:"message",repeat:1,T:()=>XS}])}}const ude=new lde;class pde extends U{constructor(){super("socket.plugin.PluginStoreDeleteKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"delete_keys",kind:"message",repeat:1,T:()=>XS}])}}const hde=new pde;class gde extends U{constructor(){super("socket.plugin.PluginStoreDeleteRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9}])}}const fde=new gde;class mde extends U{constructor(){super("socket.plugin.EnablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"enabled_by",kind:"scalar",T:9}])}}const S_=new mde;class vde extends U{constructor(){super("socket.plugin.EnablePluginsResponse",[{no:1,name:"plugins",kind:"message",repeat:1,T:()=>S_}])}}const yde=new vde;class bde extends U{constructor(){super("socket.plugin.DisablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"disabled_by",kind:"scalar",T:9}])}}const PC=new bde;class _de extends U{constructor(){super("socket.plugin.PluginStoreItem",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"store_key",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}])}}const wde=new _de;class Sde extends U{constructor(){super("socket.plugin.PluginStoreResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"store_items",kind:"message",repeat:1,T:()=>wde}])}}const CC=new Sde;class Ede extends U{constructor(){super("socket.plugin.PluginEventResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const RC=new Ede;class Tde extends U{constructor(){super("socket.livestreaming.LiveStreamingEvent",[{no:1,name:"livestream_id",kind:"scalar",T:9},{no:2,name:"err_message",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",T:9},{no:5,name:"playback_url",kind:"scalar",T:9},{no:6,name:"org_id",kind:"scalar",T:9},{no:7,name:"room_name",kind:"scalar",T:9},{no:8,name:"room_uuid",kind:"scalar",T:9},{no:9,name:"status",kind:"scalar",T:9}])}}const xC=new Tde;class kde extends U{constructor(){super("socket.livestreaming.GetStagePeersResponse",[{no:1,name:"stage_peers",kind:"scalar",repeat:2,T:9}])}}const AC=new kde;class Pde extends U{constructor(){super("socket.livestreaming.StageRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9}])}}const Cde=new Pde;class Rde extends U{constructor(){super("socket.livestreaming.GetStageRequestsResponse",[{no:1,name:"stage_requests",kind:"message",repeat:1,T:()=>Cde}])}}const l1=new Rde;class xde extends U{constructor(){super("socket.livestreaming.GrantStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const Ade=new xde;class Ide extends U{constructor(){super("socket.livestreaming.DenyStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const Ode=new Ide;class Mde extends U{constructor(){super("socket.livestreaming.LeaveStageRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const IC=new Mde;class Dde extends U{constructor(){super("socket.polls.Poll",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"created_by",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"question",kind:"scalar",T:9},{no:5,name:"options",kind:"message",repeat:1,T:()=>Nde},{no:6,name:"hide_votes",kind:"scalar",T:8},{no:7,name:"anonymous",kind:"scalar",T:8},{no:8,name:"votes",kind:"scalar",repeat:2,T:9}])}}const JD=new Dde;class Lde extends U{constructor(){super("socket.polls.PollOption",[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",opt:!0,T:4,L:2},{no:3,name:"votes",kind:"message",repeat:1,T:()=>jde}])}}const Nde=new Lde;class Ude extends U{constructor(){super("socket.polls.PollVote",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}}const jde=new Ude;class $de extends U{constructor(){super("socket.polls.NewPollRequest",[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"options",kind:"scalar",repeat:2,T:9},{no:3,name:"anonymous",kind:"scalar",T:8},{no:4,name:"hide_votes",kind:"scalar",T:8},{no:5,name:"created_by",kind:"scalar",opt:!0,T:9},{no:6,name:"created_by_user_id",kind:"scalar",opt:!0,T:9}])}}const Fde=new $de;class Bde extends U{constructor(){super("socket.polls.VotePollRequest",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"index",kind:"scalar",T:4,L:2}])}}const Vde=new Bde;class zde extends U{constructor(){super("socket.polls.UpdatePollResponse",[{no:1,name:"poll",kind:"message",T:()=>JD}])}}const u1=new zde;class Hde extends U{constructor(){super("socket.polls.GetPollsResponse",[{no:1,name:"polls",kind:"message",repeat:1,T:()=>JD}])}}const Gde=new Hde;var E_;(function(e){e[e.ACTION=0]="ACTION",e[e.RESPONSE=1]="RESPONSE",e[e.EVENT=2]="EVENT"})(E_||(E_={}));var T_;(function(e){e[e.SERVICE_NOT_FOUND=0]="SERVICE_NOT_FOUND",e[e.PARAMETER_VALIDATION_ERROR=1]="PARAMETER_VALIDATION_ERROR",e[e.TIMEOUT_ERROR=2]="TIMEOUT_ERROR",e[e.APPLICATION_ERROR=3]="APPLICATION_ERROR"})(T_||(T_={}));class Wde extends U{constructor(){super("bridge.BridgeMessage",[{no:1,name:"type",kind:"enum",T:()=>["bridge.BridgeMessageType",E_]},{no:2,name:"action",kind:"message",oneof:"data",T:()=>Jde},{no:3,name:"response",kind:"message",oneof:"data",T:()=>Yde},{no:4,name:"event",kind:"message",oneof:"data",T:()=>ele}])}}new Wde;class qde extends U{constructor(){super("bridge.BridgeAction",[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const Jde=new qde;class Kde extends U{constructor(){super("bridge.BridgeResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"response",kind:"scalar",T:9},{no:3,name:"error",kind:"message",T:()=>Zde}])}}const Yde=new Kde;class Qde extends U{constructor(){super("bridge.BridgeError",[{no:1,name:"type",kind:"enum",T:()=>["bridge.ErrorType",T_]},{no:2,name:"message",kind:"scalar",T:9}])}}const Zde=new Qde;class Xde extends U{constructor(){super("bridge.BridgeEvent",[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const ele=new Xde;class tle extends U{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3,L:0},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const t=this.create(),i=Date.now();return t.seconds=At.from(Math.floor(i/1e3)).toBigInt(),t.nanos=i%1e3*1e6,t}toDate(t){return new Date(At.from(t.seconds).toNumber()*1e3+Math.ceil(t.nanos/1e6))}fromDate(t){const i=this.create(),r=t.getTime();return i.seconds=At.from(Math.floor(r/1e3)).toBigInt(),i.nanos=r%1e3*1e6,i}internalJsonWrite(t,i){let r=At.from(t.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(t.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let n="Z";if(t.nanos>0){let s=(t.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?n="."+s.substring(0,3)+"Z":s.substring(6)==="000"?n="."+s.substring(0,6)+"Z":n="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",n)}internalJsonRead(t,i,r){if(typeof t!="string")throw new Error("Unable to parse Timestamp from JSON "+RS(t)+".");let n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=At.from(s/1e3).toBigInt(),r.nanos=0,n[7]&&(r.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),r}}new tle;const ile=3,rle=30,nle=8e3;class sle{constructor(t){_(this,"ipInfo"),_(this,"axios"),_(this,"requests"),_(this,"roomName"),_(this,"roomUUID"),_(this,"peerId"),_(this,"authToken"),_(this,"organizationId");const{timeout:i=nle,retry:r=ile,retryDelay:n=rle,baseURL:s="https://api.cluster.dyte.in",authToken:a}=t||{};this.requests=Am.create({baseURL:s,responseType:"json",timeout:i,retry:r,retryDelay:n}),this.axios=Am,this.setAuthToken(a,{bearer:!0}),this.requests.interceptors.request.use(o=>(C.injectContext(this.requests.defaults.headers.common),o),async o=>{T.error("xhr::axios",{debuggingHint:"otelRequestInterceptor failed.",error:o})}),this.requests.interceptors.response.use(o=>(o.config.url!==C.logsEndpoint&&T.debug("xhr::axios",{networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,method:o.config.method}}),o),async o=>{var c;if(!o)return Promise.reject(new Error("Unknown error occurred"));o&&o.config&&((c=o.config)==null?void 0:c.url)!==C.logsEndpoint&&T.error("xhr::axios",{error:o,networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,retries:o.config.retry,method:o.config.method,isOnline:navigator.onLine?"online":"offline"}});const{config:d,message:l}=o;return d&&l&&d.retry!==void 0&&d.retry>0&&(l.includes("timeout")||l.includes("Network Error"))?(d.retry-=1,d.baseURL==="https://api.cluster.dyte.in"?d.baseURL="https://network2.dyte.io":d.baseURL==="https://network2.dyte.io"&&(d.baseURL="https://api.cluster.dyte.in"),this.requests(d)):Promise.reject(o)})}setAuthToken(t,i){const{bearer:r}=i||{};this.authToken=t,this.requests.defaults.headers.common.Authorization=r?`Bearer ${t}`:t}setHeader(t,i){this.requests.defaults.headers.common[t]=i}setRoomName(t){this.roomName=t}setRoomUUID(t){this.roomUUID=t}setPeerId(t){this.peerId=t}setOrganizationId(t){this.organizationId=t}}var ale=Object.defineProperty,ole=Object.getOwnPropertyDescriptor,KD=(e,t,i,r)=>{for(var n=r>1?void 0:r?ole(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&ale(t,i,n),n};class ty extends sle{constructor(t){super(t),this.setHeader("x-dyte-web-core-version",Il)}async getIPDetails({peerId:t}){var i;try{const r=(await this.requests.get("https://media-location.dyte.io")).data;if(((i=r.loc)==null?void 0:i.length)>5)return r;throw Error("Insufficient data")}catch{T.error("getIPDetails::failed")}try{const r=await DS.getIPDetails({peerId:t});return T.info("gotIPDetails",{networkCall:{ip:r.ip,timezone:r.timezone}}),r}catch(r){T.warn("ApiClient.getRoomNodeLinkAndTitleV1 Failed to get ip details",{error:{name:r.name,message:r.message}});return}}async getICEServers(){const{success:t,iceServers:i}=(await this.requests.get("/iceservers")).data;if(t)return i}async getPlugins(t){var i,r,n,s,a,o,c;let{plugins:d}=(await this.requests.get("/v2/plugins/user")).data.data;const l=((r=(i=ge.getValue(ye.V1_PLUGINS))==null?void 0:i.toString())==null?void 0:r.split(","))||[],u=d.reduce((f,y)=>(f[l.includes(y.id)?"v1":"v2"].push(y),f),{v1:[],v2:[]});return t==="socket-service"?d=u.v2:d=u.v1,(a=(s=(n=yt.modules)==null?void 0:n.devTools)==null?void 0:s.plugins)!=null&&a.length&&((c=(o=yt.modules)==null?void 0:o.devTools)==null||c.plugins.forEach(f=>{var y,b,k;const P={...Ou,tags:[...Ou.tags]};P.baseURL=`http://localhost:${f.port}`,P.name=f.name,P.picture=(y=f.picture)!=null?y:Ou.picture,P.description=(b=f.description)!=null?b:Ou.description,P.staggered=(k=f.staggered)!=null?k:Ou.staggered,P.createdAt=new Date().toISOString(),P.updatedAt=new Date().toISOString(),P.id=f.id,P.organizationId=this.organizationId,d.push(P)})),d}async getPluginDetails(t){const{plugin:i}=(await this.requests.get(`/v2/plugins/view/${t}`)).data.data;return i}async getPluginConfig(t){return(await this.axios.get(`${t}/dyte-config.json`)).data}async authorizePlugin(t){const i={peerId:this.peerId};$e.isV2AuthToken||(i.roomName=this.roomName);const{token:r}=(await this.requests.post(`/v2/plugins/authorize/${t}`,i)).data.data;return r}async getPresignedUrls(t){const{getLocation:i,putLocation:r}=(await this.requests.post("/v1/meetings/genPreSignedUploadUrl",{roomUUID:this.roomUUID,filename:t})).data.data;return{getLocation:i,putLocation:r}}async uploadFile(t,i){if(navigator.isReactNative&&"uri"in t)try{await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:{uri:t.uri,name:t.name}})}catch(r){T.error(`sendFileMessage::${r}`)}else await this.axios.put(i,t,{headers:{"Content-Type":t.type}})}}KD([C.trace("APIClient.getIPDetails")],ty.prototype,"getIPDetails",1);KD([C.trace("APIClient.getICEServers")],ty.prototype,"getICEServers",1);var cle=Object.defineProperty,dle=Object.getOwnPropertyDescriptor,Kl=(e,t,i,r)=>{for(var n=r>1?void 0:r?dle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&cle(t,i,n),n};class Qc extends ty{async startLivestreaming(){var t,i;return(i=(t=(await this.requests.post(`/v2/meetings/${$e.meetingId}/livestreams`)).data)==null?void 0:t.data)==null?void 0:i.playback_url}async stopLivestreaming(){return this.requests.post(`/v2/meetings/${$e.meetingId}/active-livestream/stop`)}async getActiveLivestream(){const{playbackUrl:t,status:i}=bn((await this.requests.get(`/v2/meetings/${$e.meetingId}/active-livestream`)).data.data);return{status:i,playbackUrl:t}}async getUserDetails(){const t=(await this.requests.get("v2/internals/participant-details")).data.data;return bn(t)}getUserPreset(t){throw new Error("getUserPreset does not exist for v2")}async startRecording(t){return(await this.requests.post("/v2/recordings",{...$D(t),meeting_id:$e.meetingId})).data.id}stopRecording(t){return this.requests.put(`v2/recordings/${t}`,{action:"stop"})}async getActiveRecording(){const{status:t,id:i}=(await this.requests.get(`v2/recordings/active-recording/${$e.meetingId}`)).data.data;return{status:t,id:i}}async getRoomNodeData({peerId:t}){const i=await this.getIPDetails({peerId:t});this.ipInfo=i;const{roomNodeLink:r,title:n,useHiveMedia:s}=bn((await this.requests.post("v2/internals/rooms",{ip_information:i})).data.data);return{roomNodeUrl:r,meetingTitle:n,useHiveMedia:s!=null?s:!1}}}Kl([C.trace("APIClient.getUserDetails")],Qc.prototype,"getUserDetails",1);Kl([C.trace("APIClient.getUserPreset")],Qc.prototype,"getUserPreset",1);Kl([C.trace("APIClient.startRecording")],Qc.prototype,"startRecording",1);Kl([C.trace("APIClient.stopRecording")],Qc.prototype,"stopRecording",1);Kl([C.trace("APIClient.getActiveRecording")],Qc.prototype,"getActiveRecording",1);Kl([C.trace("APIClient.getRoomNodeData")],Qc.prototype,"getRoomNodeData",1);var lle=Object.defineProperty,ule=Object.getOwnPropertyDescriptor,Yl=(e,t,i,r)=>{for(var n=r>1?void 0:r?ule(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&lle(t,i,n),n};class Zc extends ty{startLivestreaming(){throw new Error("Method not implemented.")}stopLivestreaming(){throw new Error("Method not implemented.")}getActiveLivestream(){throw new Error("Method not implemented.")}async getUserDetails(){const{user:t}=(await this.requests.get("/auth/basicUserDetails")).data;return t}async getUserPreset(t){const{preset:i}=(await this.requests.post("/v1/userpreset",{roomName:t,authToken:this.authToken,clientType:"CLIENT_APP",version:"0.5.0"})).data.data;return bn(i)}async startRecording(t){const i=await this.requests.post(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recording`,t);if(i.status!==201)throw new Error("Recording failed to start");return i.data.data.recording.id}async stopRecording(t){if((await this.requests.put(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recordings/${t}`,{recordingAction:"stop"})).status!==201)throw new Error("Recording failed to stop")}async getActiveRecording(){return this.organizationId?(await this.requests.get(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/active-recording?limit=50`)).data.data.recording:{}}async getRoomNodeData({roomName:t,peerId:i}){const r=`
        query Session($roomName: String!, $password: String, $ipInformation: String) {
            session(roomName: $roomName, password: $password) {
              title,
              roomNodeLink(ipInformation: $ipInformation),
              useHiveMedia,
              roomName,
              password
            }
          }
        `,n=await this.getIPDetails({peerId:i});this.ipInfo=n;const{roomNodeLink:s,title:a,useHiveMedia:o}=(await this.requests.post("/graphql",{query:r,variables:{roomName:t,ipInformation:JSON.stringify(n)}})).data.data.session;return{roomNodeUrl:s,meetingTitle:a,useHiveMedia:o!=null?o:!1}}}Yl([C.trace("APIClientV1.getUserDetails")],Zc.prototype,"getUserDetails",1);Yl([C.trace("APIClientV1.getUserPreset")],Zc.prototype,"getUserPreset",1);Yl([C.trace("APIClientV1.startRecording")],Zc.prototype,"startRecording",1);Yl([C.trace("APIClientV1.stopRecording")],Zc.prototype,"stopRecording",1);Yl([C.trace("APIClientV1.getActiveRecording")],Zc.prototype,"getActiveRecording",1);Yl([C.trace("APIClientV1.getRoomNodeData")],Zc.prototype,"getRoomNodeData",1);let k_;function ple(e){return k_=$e.isV2AuthToken?new Qc(e):new Zc(e),k_}function Ui(){return k_}const hle=0,gle=1,fle=2,mle=3,vle={getPeerInfo:0,updatePeerInfo:1,getRoomPeersInfo:2,joinRoom:3,leaveRoom:4,getRoomInfo:5,updateRoomInfo:6,closeRoom:7,startedLivestream:8,stoppedLivestream:9,erroredLivestream:10,getStagePeers:11,getStageRequests:12,requestStageAccess:13,cancelStageRequest:14,grantStageAccess:15,denyStageAccess:16,roomPeerCount:17,joinStage:18,leaveStage:19,getConnectedRoomsDump:20,createConnectedRooms:21,deleteConnectedRooms:22,movePeers:23,transferPeer:24,movedPeer:25,connectedRoomsUpdated:26,connectedRoomsDeleted:27},yle={getMessages:0,sendMessageToRoom:1,sendMessageToPeers:2,editMessage:3,deleteMessage:4,getPaginatedMessages:5},ble={getPlugins:0,addPlugin:1,enablePluginForRoom:2,disablePluginForPeers:3,enablePluginForPeers:4,disablePluginForRoom:5,removePlugin:6,customPluginEventToRoom:7,customPluginEventToPeers:8,storeInsertKeys:9,storeGetKeys:10,storeDeleteKeys:11,storeDelete:12},_le={createPoll:0,getPolls:1,votePoll:2,updatePoll:3},wle={unknown:0,createWebRTCTransport:1,produce:2,consume:3,toggleProducer:4,toggleConsumer:5,closeProducer:6,closeConsumer:7,joinRoom:16,leaveRoom:17,selectedPeer:18,globalPinPeer:19,selfJoinComplete:20,peerJoinedBroadcast:25,peerLeaveBroadcast:26,peerProducerCreateBroadcast:27,peerProducerToggleBroadcast:28,peerProducerCloseBroadcast:29,globalPeerPinBroadcast:30,recordingStartedBroadcast:31,recordingStoppedBroadcast:32,peerDisplayNameEditBroadcast:33,selectedPeerDiff:40,renegotiateSessionDescription:50,kickPeer:90,kickAll:91,changeDisplayName:92,hostControlPeer:93,hostControlAllPeers:94};function iy(e,t){return Object.keys(t).reduce((i,r)=>(i[r]=(e<<16)+t[r],i),{})}function Sle(e){return Object.keys(e).reduce((t,i)=>(t[i]=16777216|e[i],t),{})}const Xe=iy(hle,vle),ir=iy(gle,yle),Te=iy(fle,ble),Gs=iy(mle,_le),at=Sle(wle);var P_;class YD{constructor(){_(this,"meetingTitle"),_(this,"roomName"),_(this,"roomUUID"),_(this,"isDisconnected"),_(this,"roomJoined"),j(this,P_,void 0),_(this,"peerId"),_(this,"authToken"),_(this,"maxPreferredStreams")}get sfuHandler(){return g(this,P_)}reconnect(){throw new N("Method not implemented.")}async joinRoom(t,i,r,n,s={}){throw new N("Method not implemented.")}async leaveRoom(){throw new N("Method not implemented.")}async handleSocketCallbacks(t){throw new N("Method not implemented.")}async handleSockets(t,i){throw new N("Method not implemented.")}async shareMic(t){throw new N("Method not implemented.")}async shareWebcam(t){throw new N("Method not implemented.")}async shareScreen(t){throw new N("Method not implemented.")}async unmuteSelf(){throw new N("Method not implemented.")}async muteSelf(){throw new N("Method not implemented.")}async pauseWebcam(){throw new N("Method not implemented.")}async disableScreenShare(){throw new N("Method not implemented.")}async acceptWaitingRequest(t){throw new N("Method not implemented.")}async rejectWaitingRequest(t){throw new N("Method not implemented.")}async muteAll(t){throw new N("Method not implemented.")}async muteAllVideo(){throw new N("Method not implemented.")}async disableAudio(t){throw new N("Method not implemented.")}async disableVideo(t){throw new N("Method not implemented.")}async kickAll(){throw new N("Method not implemented.")}async kick(t){throw new N("Method not implemented.")}async pinPeer(t){throw new N("Method not implemented.")}async getChatMessages(){throw new N("Method not implemented.")}async requestRemoteControl(t){throw new N("Method not implemented.")}async acceptRemoteControl(t){throw new N("Method not implemented.")}async terminateRemoteControl(t,i){throw new N("Method not implemented.")}async sendEventRemoteControl(t,i,r){throw new N("Method not implemented.")}async getPolls(){throw new N("Method not implemented.")}async newPoll(t){throw new N("Method not implemented.")}async votePoll(t){throw new N("Method not implemented.")}async getPage(t){throw new N("Method not implemented.")}getConsumers(){throw new N("Method not implemented.")}async sendMessage(t){throw new N("Method not implemented.")}async getRoomState(){throw new N("Method not implemented.")}async addRoomPlugin(t){throw new N("Method not implemented.")}async removeRoomPlugin(t){throw new N("Method not implemented.")}async unpinChatMessage(t){throw new N("Method not implemented.")}async pinChatMessage(t){throw new N("Method not implemented.")}async sendChatMessage(t){throw new N("Method not implemented.")}async broadcastMessage(t,i){throw new N("Method not implemented.")}async acceptAllRequestToJoinStage(t){throw new N("Method not implemented.")}async stopPresenting(){throw new N("Method not implemented.")}async startPresenting(){throw new N("Method not implemented.")}async requestToJoinStage(t){throw new N("Method not implemented.")}async rejectRequestToJoinStage(t){throw new N("Method not implemented.")}async withdrawRequestToJoinStage(){throw new N("Method not implemented.")}async removePeerFromStage(t,i){throw new N("Method not implemented.")}stopAllProducers(){throw new N("Method not implemented.")}}P_=new WeakMap;class Ele extends yr.EventEmitter{}class ar{constructor(t){_(this,"_name"),this._name=t}static getLogger(t){return new ar(t)}static format(t,...i){const r=t.split("%");let n=t;r.length&&([n]=r),i.reverse();for(let s=1;s<r.length&&i.length;s+=1){const a=i.pop();let o=r[s];switch(o.at(0)){case"s":o=o.replace("s",a);break;case"d":o=o.replace("d",a.toString());break;case"o":o=o.replace("o",JSON.stringify(a,null,2));break}n=`${n}${o}`}return i.length&&i.reverse().forEach(s=>{n=`${n} ${s instanceof Object?JSON.stringify(s,null,2):s}`}),n}info(t,...i){let r=ar.format(t,...i);this._name&&(r=`${this._name}::${r}`),T.info(r)}debug(t,...i){let r=ar.format(t,...i);this._name&&(r=`${this._name}::${r}`),T.info(r)}warn(t,...i){let r=ar.format(t,...i);this._name&&(r=`${this._name}::${r}`),T.info(r)}error(t,...i){let r=ar.format(t,...i);this._name&&(r=`${this._name}::${r}`),T.error(r)}}const OC=ar.getLogger("EnhancedEventEmitter");class Vc extends yr.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(t,...i){const r=this.listenerCount(t);try{return this.emit(t,...i)}catch(n){return OC.error("safeEmit() | event listener threw an error [event:%s]:%o",t,n),Boolean(r)}}async safeEmitAsPromise(t,...i){const r={}.EVENT_PROMISE_TIMEOUT?parseInt({}.EVENT_PROMISE_TIMEOUT,10):1e4;return this.safeEmitAsPromiseWithTimeout(t,r,...i)}async safeEmitAsPromiseWithTimeout(t,i,...r){return new Promise((n,s)=>{setTimeout(s,i,"event request timeout");try{this.emit(t,...r,n,s)}catch(a){OC.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",t,a),s(a)}})}}class eE extends Vc{constructor(){super(),_(this,"_mapMidTransceiver",new Map),this._mapMidTransceiver=new Map}get midTransceiverMap(){return this._mapMidTransceiver}}const Ge=ar.getLogger("Chrome74");class tE extends eE{constructor(){super(),_(this,"_direction"),_(this,"_pc"),_(this,"_sendWebStream",new MediaStream),_(this,"_sendScreenShareStream",new MediaStream),_(this,"_transportReady",!1)}static createFactory(){return()=>new tE}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(Ge.debug("close()"),this._pc)try{this._pc.close()}catch(t){Ge.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){Ge.debug("init()",n),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Ge.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Ge.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){Ge.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(){Ge.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return Ge.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{Ge.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOption:r,screenShare:n}){var s;this._assertSendDirection(),Ge.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),Ge.debug("creating new transceiver");const a=this._pc.addTransceiver(t,{direction:"sendonly",streams:[n?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(t.kind);Ge.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(u=>u.mimeType.includes(r.name));if(r.parameters){Ge.info("codecOption.parameters:",r.parameters);const u=((s=l.sdpFmtpLine)==null?void 0:s.split(";"))||[];u.push(...r.parameters);const f=[...new Set(u).values()];l.sdpFmtpLine=f.join(";")}c.push(l)}Ge.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),r&&r.name==="opus"&&(d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),d.sdp+=`a=rtcp-fb:111 nack\r
`),{offerSdp:d,callback:async l=>(Ge.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(t){this._assertSendDirection(),Ge.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Ge.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Ge.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?Ge.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Ge.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),Ge.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),Ge.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(t){throw this._assertRecvDirection(),Ge.debug("stopReceiving() [localId:%s]",t),Error("method not implemented")}async pauseReceiving(t){throw this._assertRecvDirection(),Ge.debug("pauseReceiving() [localId:%s]",t),Error("method not implemented")}async resumeReceiving(t){throw this._assertRecvDirection(),Ge.debug("resumeReceiving() [localId:%s]",t),Error("method not implemented")}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){Ge.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Ge.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Ge.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Ge.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Ge.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Ge.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{Ge.info("icecandidateerror",t)}),this._pc.addEventListener("datachannel",t=>{Ge.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{Ge.info("data channel open: ",t.channel.label)},i.onclose=()=>{Ge.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{Ge.error("data channel error: ",t.channel.label,r)},i.onmessage=r=>{Ge.info("data channel message: ",t.channel.label,r),this.safeEmit("datachannel",t.channel,String.fromCharCode.apply(null,new Uint8Array(r.data)))}})}}const Le=ar.getLogger("Firefox60");class iE extends eE{constructor(){super(),_(this,"_direction"),_(this,"_pc"),_(this,"_sendWebStream",new MediaStream),_(this,"_sendScreenShareStream",new MediaStream),_(this,"_transportReady",!1)}static createFactory(){return()=>new iE}get name(){return"Firefox60"}get pc(){return this._pc}close(){if(Le.debug("close()"),this._pc)try{this._pc.close()}catch(t){Le.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){Le.debug("init()"),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Le.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Le.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){throw Le.debug("updateIceServers()"),new Error("not supported")}async restartIce(){Le.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return Le.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{Le.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,screenShare:r}){this._assertSendDirection(),Le.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),Le.debug("creating new transceiver");const n=this._pc.addTransceiver(t,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream]});if(i){i.reverse();const a=n.sender.getParameters();a.encodings=i,await n.sender.setParameters(a)}const s=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(s),s.sdp=s.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:s,callback:async a=>(Le.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(n.mid,n),n.mid)}}async stopSending(t){this._assertSendDirection(),Le.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Le.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Le.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?Le.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Le.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),Le.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters(),s=n.encodings.length-1-i;n.encodings.forEach((a,o)=>{o>=s?a.active=!0:a.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),Le.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(t){this._assertRecvDirection(),Le.debug("stopReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",Le.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return Le.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Le.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async pauseReceiving(t){this._assertRecvDirection(),Le.debug("pauseReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return Le.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Le.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async resumeReceiving(t){this._assertRecvDirection(),Le.debug("resumeReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return Le.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async n=>{Le.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){Le.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("datachannel",t=>{Le.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{Le.info("data channel open: ",t.channel.label)},i.onclose=()=>{Le.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{Le.error("data channel error: ",t.channel.label,r)},i.onmessage=async r=>{Le.debug("data channel message: ",t.channel.label,r);const n=await r.data.arrayBuffer();this.safeEmit("datachannel",t.channel,String.fromCharCode.apply(null,new Uint8Array(n)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Le.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Le.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Le.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Le.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Le.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{Le.info("chrome74::icecandidateerror",t)})}}const Ie=ar.getLogger("Safari12");class rE extends eE{constructor(){super(),_(this,"_direction"),_(this,"_pc"),_(this,"_sendWebStream",new MediaStream),_(this,"_sendScreenShareStream",new MediaStream),_(this,"_transportReady",!1)}static createFactory(){return()=>new rE}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(Ie.debug("close()"),this._pc)try{this._pc.close()}catch(t){Ie.error("pc.close()",t)}}init({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,onTrackHandler:a}){Ie.debug("init()"),this._direction=t,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:r||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...n},s),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const t=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Ie.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async r=>{Ie.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),t.close()}}}async updateIceServers(t){Ie.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=t,this._pc.setConfiguration(i)}async restartIce(){Ie.debug("restartIce()");const t=await this.pc.createOffer({iceRestart:!0});return Ie.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),{offerSdp:t,callback:async i=>{Ie.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:t,encodings:i,codecOption:r,screenShare:n}){var s;this._assertSendDirection(),Ie.debug("send() [kind:%s, track.id:%s]",t.kind,t.id),Ie.debug("creating new transceiver");const a=this._pc.addTransceiver(t,{direction:"sendonly",streams:[n?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(t.kind);Ie.info("senders available params:",o);const c=[];if(r){const l=o.codecs.find(u=>u.mimeType.includes(r.name));if(r.parameters){Ie.info("codecOption.parameters:",r.parameters);const u=((s=l.sdpFmtpLine)==null?void 0:s.split(";"))||[];u.push(...r.parameters);const f=[...new Set(u).values()];l.sdpFmtpLine=f.join(";")}c.push(l)}Ie.info("selected codecs:",c),a.setCodecPreferences(c);const d=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(d),d.sdp=d.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:d,callback:async l=>(Ie.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(t){this._assertSendDirection(),Ie.debug("stopSending() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const r=await this._pc.createOffer();return Ie.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Ie.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async replaceTrack(t,i){this._assertSendDirection(),i?Ie.debug("replaceTrack() [localId:%s, track.id:%s]",t,i.id):Ie.debug("replaceTrack() [localId:%s, no track]",t);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(i)}async setMaxSpatialLayer(t,i){this._assertSendDirection(),Ie.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{a<=i?s.active=!0:s.active=!1}),await r.sender.setParameters(n)}async setRtpEncodingParameters(t,i){this._assertSendDirection(),Ie.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,i);const r=this.midTransceiverMap.get(t);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((s,a)=>{n.encodings[a]={...s,...i}}),await r.sender.setParameters(n)}getSenderStats(t){this._assertSendDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async receive(t){this._assertRecvDirection(),Ie.debug("recieve() | calling pc.setLocalDescription() [answer:%o]",t);const i=this._pc.getTransceivers().at(-1);return Ie.info("Transceiver is now receiving",i,this._pc.getTransceivers()),this.midTransceiverMap.set(i.mid,i),{track:i.receiver.track,localId:i.mid}}async stopReceiving(t){this._assertRecvDirection(),Ie.debug("stopReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",Ie.info("active transcievers: %o",this._pc.getTransceivers());const r=await this._pc.createOffer();return Ie.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Ie.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this.midTransceiverMap.delete(t)}}}async pauseReceiving(t){this._assertRecvDirection(),Ie.debug("pauseReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const r=await this._pc.createOffer();return Ie.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r),{offerSdp:r,callback:async n=>{Ie.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async resumeReceiving(t){this._assertRecvDirection(),Ie.debug("resumeReceiving() [localId:%s]",t);const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const r=await this._generateOffer();return Ie.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",r),{offerSdp:r,callback:async n=>{Ie.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}}}async getReceiverStats(t){this._assertRecvDirection();const i=this.midTransceiverMap.get(t);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const t=await this._pc.createOffer();return await this._pc.setLocalDescription(t),t}async _setAnswer(t){Ie.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Ie.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",t=>{t.candidate&&this.emit("@icecandidate",{candidate:t.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Ie.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Ie.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Ie.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Ie.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",t=>{Ie.info("chrome74::icecandidateerror",t)}),this._pc.ondatachannel=t=>{Ie.info("data channel created: ",t.channel.label);const{channel:i}=t;i.onopen=()=>{Ie.info("data channel open: ",t.channel.label)},i.onclose=()=>{Ie.warn("data channel closed: ",t.channel.label)},i.onerror=r=>{Ie.error("data channel error: ",t.channel.label,r)},i.onmessage=async r=>{Ie.debug("data channel message: ",t.channel.label,r);const n=String.fromCharCode.apply(null,new Uint8Array(r.data));this.safeEmit("datachannel",t.channel,n)}}}}function Tle(e,t){return typeof e>"u"?t:JSON.parse(JSON.stringify(e))}const C_="transport closed";class pl extends Error{constructor(t){super(t),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,pl):this.stack=new Error(t).stack}}class xr extends Error{constructor(t){super(t),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,xr):this.stack=new Error(t).stack}}const hs=ar.getLogger("Producer");class kle extends Vc{constructor({id:t,localId:i,track:r,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,handler:o,appData:c}){super(),_(this,"_id"),_(this,"_localId"),_(this,"_closed",!1),_(this,"_handler"),_(this,"_track"),_(this,"_kind"),_(this,"_paused"),_(this,"_maxSpatialLayer"),_(this,"_stopTracks"),_(this,"_disableTrackOnPause"),_(this,"_zeroRtpOnPause"),_(this,"_appData"),_(this,"observer"),this._id=t,this._localId=i,this._track=r,this._kind=r.kind,this._paused=s?!r.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=n,this._disableTrackOnPause=s,this._zeroRtpOnPause=a,this._appData=c||{},this._onTrackEnded=this._onTrackEnded.bind(this),this._handler=o,this.observer=new Vc,this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get track(){return this._track}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}close(t){if(!this._closed){if(hs.debug("close() with reason:",t),this._closed=!0,this._destroyTrack(),t===C_){this.observer.emit("close");return}this._handler.stopSending(this.localId).then(({offerSdp:i,callback:r})=>{this.safeEmit("close",i,r,t)}).finally(()=>{this.observer.emit("close")})}}async getStats(){if(this._closed)throw new xr("closed");return this._handler.getSenderStats(this.localId)}pause(){hs.debug(`producer(${this.id}):pause()`),this._closed&&hs.error("pause() | Producer closed"),this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,null),this.observer.emit("pause")}resume(){if(hs.debug(`producer(${this.id}):resume()`),this._closed){hs.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,this._track),this.observer.emit("resume")}async replaceTrack({track:t}){if(hs.debug("replaceTrack() [track:%o]",t),this._closed){if(t&&this._stopTracks)try{t.stop()}catch(i){hs.error(i)}throw new xr("closed")}else if(t&&t.readyState==="ended")throw new xr("track ended");if(t===this._track){hs.debug("replaceTrack() | same track, ignored");return}(!this._zeroRtpOnPause||!this._paused)&&await this._handler.replaceTrack(this.localId,t),this._destroyTrack(),this._track=t,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()}async setMaxSpatialLayer(t){if(this._closed)throw new xr("closed");if(this._kind!=="video")throw new pl("not a video Producer");if(typeof t!="number")throw new TypeError("invalid spatialLayer");await this._handler.setMaxSpatialLayer(this.localId,t),this._maxSpatialLayer=t}async setRtpEncodingParameters(t){if(this._closed)throw new xr("closed");if(typeof t!="object")throw new TypeError("invalid params");await this._handler.setRtpEncodingParameters(this.localId,t)}_onTrackEnded(){hs.debug('track "ended" event'),this.observer.emit("trackended"),this.safeEmit("trackended",this.track.id)}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(t){hs.error(t)}}}const Bo=ar.getLogger("Consumer");class Ple extends Vc{constructor({id:t,localId:i,producerId:r,producingPeerId:n,handler:s,track:a,appData:o,paused:c,reuseTrack:d}){super(),_(this,"_id"),_(this,"_localId"),_(this,"_producerId"),_(this,"_closed",!1),_(this,"_reuseTrack"),_(this,"_handler"),_(this,"_track"),_(this,"_paused"),_(this,"_peerId"),_(this,"_appData"),_(this,"observer"),this._id=t,this._localId=i,this._handler=s,this._appData=o,this._peerId=n,this._producerId=r,this._onTrackEnded=this._onTrackEnded.bind(this),this._track=a,this._paused=c!=null?c:!1,this._reuseTrack=d,this.observer=new Vc,this._handleTrack()}get id(){return this._id}get peerId(){return this._peerId}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get track(){return this._track}get paused(){return this._paused}get remotelyPaused(){return this.paused}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}close(t){this._closed||(Bo.debug("close() with reason:",t),this._closed=!0,this._reuseTrack||this._destroyTrack(),this.emit("close",t),this.observer.safeEmit("close",t))}async getStats(){if(this._closed)throw new xr("closed");return this._handler.getReceiverStats(this.localId)}pause(){if(Bo.debug(`consumer(${this.id}):pause()`),this._closed){Bo.error("pause() | Consumer closed");return}this._paused=!0,this._track.enabled=!1,this.observer.safeEmit("pause")}resume(){if(Bo.debug(`consumer(${this.id}):resume()`),this._closed){Bo.error("resume() | Consumer closed");return}this._paused=!1,this._track.enabled=!0,this.observer.safeEmit("resume")}_onTrackEnded(){Bo.debug('track "ended" event'),this.safeEmit("trackended"),this.observer.safeEmit("trackended")}_handleTrack(){this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){try{this._track.removeEventListener("ended",this._onTrackEnded),this._track.stop()}catch(t){Bo.error(t)}}}const Ci=ar.getLogger("Transport");class Cle extends Vc{constructor({id:t,direction:i,handlerFactory:r,iceServers:n,iceTransportPolicy:s,proprietaryConstraints:a,additionalSettings:o,appData:c}){super(),_(this,"_id"),_(this,"_serverId"),_(this,"_closed",!1),_(this,"_direction"),_(this,"_maxSctpMessageSize"),_(this,"_handler"),_(this,"_connectionState","new"),_(this,"_producers"),_(this,"_consumers"),_(this,"_datachannels"),_(this,"_connected",!1),_(this,"_transportConnectionPromise",null),_(this,"awaitQueue"),_(this,"observer"),_(this,"consumerTrackEvents"),_(this,"unknownTracksMap"),_(this,"consumerTrackPool"),_(this,"_appData"),_(this,"datachannelCache",new Map),Ci.debug("constructor() [id: %s, direction: %s]",t,i),this._id=t,this._direction=i;const d=Tle(o,{});delete d.iceServers,delete d.iceTransportPolicy,delete d.bundlePolicy,delete d.rtcpMuxPolicy,delete d.sdpSemantics,this._producers=new Map,this._consumers=new Map,this._datachannels=new Map,this.consumerTrackEvents=new Map,this.consumerTrackPool=new Map,this.unknownTracksMap=new Map,this.awaitQueue=new g3,this.observer=new Vc,this._handler=r(),this._handler.init({onTrackHandler:this._ontrack.bind(this),direction:i,iceServers:n,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:a}),this._appData=c||{},this._transportConnectionPromise=new Promise(l=>{this.observer.once("connected",()=>{l(!0)}),this.observer.once("disconnect",()=>{l(!1)}),this.observer.once("close",()=>{l(!1)})}),this._handler.on("@connectionstatechange",l=>{l!==this._connectionState&&(Ci.debug("connection state changed to %s",l),this._connectionState=l,l==="connected"&&(this._connected=!0,this.observer.emit("connected")),l==="disconnected"&&(this._connected=!1,this.observer.emit("disconnect")),(l==="failed"||l==="closed")&&(this._connected=!1,this.observer.emit("close")),this._closed||this.safeEmit("connectionstatechange",l))}),this._handler.on("@icecandidate",({candidate:l})=>{this._closed||this.safeEmit("icecandidate",l)}),this._handler.on("datachannel",(l,u)=>{var f,y;this._datachannels.has(l.label)||this._datachannels.set(l.label,l);const b=JSON.parse(u);if(this.datachannelCache.has(b.id)||this.datachannelCache.set(b.id,[]),(f=this.datachannelCache.get(b.id))==null||f.push(b),((y=this.datachannelCache.get(b.id))==null?void 0:y.length)===b.count){const k=this.datachannelCache.get(b.id),P=k==null?void 0:k.reduce((w,E)=>w+E.chunk,"");this.datachannelCache.delete(b.id);try{const w=JSON.parse(P);this.safeEmit(`datachannel:${l.label}`,l,w)}catch(w){Ci.error("error parsing message",w)}}})}get id(){return this._id}get serverId(){return this._serverId}get connected(){return this._connected}get isConnected(){return this._transportConnectionPromise}get datachannels(){return this._datachannels}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}setServerId(t){this._serverId=t}getDatachannel(t){return this._datachannels.get(t)}close(){this._closed||(Ci.debug("close()"),this._connected=!1,this._closed=!0,this._handler.close(),[...this._producers.values()].forEach(t=>t.close(C_)),this._producers.clear(),[...this._consumers.values()].forEach(t=>t.close(C_)),this._consumers.clear(),this.consumerTrackPool.clear(),this.consumerTrackEvents.clear(),this.emit("close"),this.observer.emit("close"))}async getStats(){if(this._closed)throw new xr("closed");return this._handler.getTransportStats()}async connect(){try{const{offerSdp:t,callback:i}=await this._handler.connect(),{answer:r}=await this.safeEmitAsPromise("connect",{offer:t});if(await i(r),!await this.isConnected)throw new Error("ice connection failed")}catch(t){throw Ci.error("transport failed to connect:",t),t}}async restartIce(){if(Ci.debug("restartIce()"),this._closed)throw new xr("closed");return this._handler.restartIce()}async updateIceServers({iceServers:t}={}){if(Ci.debug("updateIceServers()"),this._closed)throw new xr("closed");this._handler.updateIceServers(t)}async produce({track:t,encodings:i,codecOptions:r,stopTracks:n=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(Ci.debug(`produce() [track:${t.id}]`),t){if(this._direction!=="send")throw new pl("not a sending Transport");if(t.readyState==="ended")throw new xr("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing track");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const{producerId:c,localId:d}=await this.awaitQueue.push(async()=>{const{offerSdp:u,callback:f}=await this._handler.send({track:t,encodings:i,codecOption:r,screenShare:o==null?void 0:o.screenShare}),{answer:y,producerId:b}=await this.safeEmitAsPromise("produce",{offer:u,kind:t.kind,paused:s?!t.enabled:!1,appData:o}),k=await f(y);return{producerId:b,localId:k}}),l=new kle({id:c,localId:d,track:t,stopTracks:n,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o,handler:this.handler});return this._producers.set(c,l),l.observer.on("close",()=>{this._producers.delete(l.id)}),this.emit("newproducer",l),this.observer.emit("newproducer",l),l}async consumePeer(t,i={}){if(Ci.debug("consumePeer() producingPeerId:",t),this._closed)throw new xr("closed");if(this._direction!=="recv")throw new pl("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing producingPeerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(i&&typeof i!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const r=[],{consumersMap:n}=await this.safeEmitAsPromise("consumePeer",{producingPeerId:t});return n.forEach((s,a)=>{const{consumerId:o,trackId:c,screenShare:d,paused:l,streamId:u,kind:f}=s;r.push(this._consumerCreationTask({consumerId:o,trackId:c,streamId:u,kind:f,producerId:a,producingPeerId:t,paused:l,screenShare:d,appData:i}))}),Ci.info("promises",r),Promise.allSettled(r)}async consume({producerId:t,producingPeerId:i,appData:r={}}){if(Ci.debug("consume()"),this._closed)throw new xr("closed");if(this._direction!=="recv")throw new pl("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing producerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(r&&typeof r!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));try{const{consumerId:n,screenShare:s,trackId:a,paused:o,streamId:c,kind:d}=await this.safeEmitAsPromise("consume",{producerId:t,producingPeerId:i});return this._consumerCreationTask({consumerId:n,screenShare:s,trackId:a,streamId:c,kind:d,paused:o,producerId:t,producingPeerId:i,appData:r})}catch(n){throw Ci.error("consume failed:",n),n}}async _consumerCreationTask({consumerId:t,producerId:i,producingPeerId:r,streamId:n,trackId:s,paused:a,screenShare:o,appData:c,kind:d}){const l=`${n}:${d}`,u={consumerId:t,producerId:i,producingPeerId:r,streamId:n,trackId:s,appData:c,kind:d,paused:a,screenShare:o,name:"consumer creation task error",message:"consumer creation failed"};return new Promise((f,y)=>{const b=setTimeout(()=>{this.consumerTrackEvents.delete(l),u.isTimedout=!0,y(u)},5e3),k=async(E,R)=>{try{if(E.readyState==="ended")clearTimeout(b),y(u);else{this.handler.midTransceiverMap.set(R.mid,R);const D=new Ple({id:t,localId:R.mid,track:E,paused:a,producerId:i,producingPeerId:r,handler:this._handler,reuseTrack:!0,appData:{...c,screenShare:o}});this._consumers.set(t,D),D.once("close",()=>{this._consumers.delete(D.id),this.handler.midTransceiverMap.delete(R.mid)}),Ci.info("consumer created for ",{producerId:i,trackId:s,producingPeerId:r}),this.observer.emit("newconsumer",D),clearTimeout(b),f(D)}}catch(D){Ci.warn("error while creating consumer:",D),clearTimeout(b),y(u)}},P=this.consumerTrackPool.get(t);if((P==null?void 0:P.length)===2){k(P[0],P[1]);return}const w=this.unknownTracksMap.get(l);w?(this.unknownTracksMap.delete(l),k(w.track,w.transceiver)):this.consumerTrackEvents.set(l,k)})}_ontrack(t){const{track:i,transceiver:r,streams:n}=t;Ci.info("track event received",{trackId:i.id,tId:r.receiver.track.id}),i.addEventListener("ended",()=>{Ci.info("track ended",i.id),this.consumerTrackPool.delete(i.id)}),this.consumerTrackPool.set(i.id,[i,r]),i.onended=()=>{this.consumerTrackPool.delete(i.id)};const s=`${n[0].id}:${i.kind}`,a=this.consumerTrackEvents.get(s);a?(a(i,r),this.consumerTrackEvents.delete(s)):(Ci.warn(`track event handler not found ${s}`),this.unknownTracksMap.set(s,t))}async setRemoteDescription(t){await this._handler.pc.setRemoteDescription(t)}async setLocalDescription(t){Ci.debug(`${this.direction}() {transportId: ${this.serverId}} | calling pc.setLocalDescription() [offer:%o]`,t),await this._handler.pc.setLocalDescription(t)}async setRemoteOffer(t){await this.setRemoteDescription(t);const i=await this._handler.pc.createAnswer(),r=Ne(i.sdp);return r.media=r.media.map(n=>{if(n.type==="audio"){const s={...n};return s.rtcpFb||(s.rtcpFb=[]),s.rtcpFb.some(a=>a.type==="nack")||s.rtcpFb.push({payload:parseInt(s.payloads,10),type:"nack"}),s}return n}),i.sdp=Qn(r),await this.setLocalDescription(i),i}async retryFailedConsumerCreationTasks(t){return Promise.allSettled(t.map(i=>(Ci.warn("retrying failed consumer creation task",i),this._consumerCreationTask({...i}))))}}function Rle(e){return"name"in e&&e.name==="consumer creation task error"}const Ss=ar.getLogger("Device");function xle(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){Ss.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection");return}return Ss.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative"}if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const e=navigator.userAgent,t=yS.getParser(e),i=t.getEngine();if(t.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||t.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(i.name&&i.name.toLowerCase()==="blink"){const r=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(r){const n=Number(r[1]);return n>=74?"Chrome74":n>=70?"Chrome70":n>=67?"Chrome67":"Chrome55"}return"Chrome74"}Ss.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion());return}Ss.warn("this._detectDevice() | unknown device")}class Ale{constructor({handlerName:t,handlerFactory:i}={}){if(_(this,"_handlerFactory"),_(this,"_handlerName"),_(this,"_observer"),Ss.debug("constructor()"),t&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(t)Ss.debug("constructor() | handler given: %s",t);else if(t=xle(),t)Ss.debug("constructor() | detected handler: %s",t);else throw new Error("device not supported");switch(t){case"Chrome74":this._handlerFactory=tE.createFactory();break;case"Safari12":this._handlerFactory=rE.createFactory();break;case"Firefox60":this._handlerFactory=iE.createFactory();break;default:throw new TypeError(`unknown handlerName "${t}"`)}}const r=this._handlerFactory();this._handlerName=r.name,r.close(),this._observer=new yr}get handlerName(){return this._handlerName}createSendTransport({iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s}){return Ss.debug("createSendTransport()"),this._createTransport({direction:"send",iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s})}createRecvTransport({iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s}){return Ss.debug("createRecvTransport()"),this._createTransport({direction:"recv",iceServers:t,iceTransportPolicy:i,additionalSettings:r,proprietaryConstraints:n,appData:s})}_createTransport({direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,appData:a}){const o=Iv(),c=new Cle({id:o,direction:t,iceServers:i,iceTransportPolicy:r,additionalSettings:n,proprietaryConstraints:s,appData:a,handlerFactory:this._handlerFactory});return Ss.info("transport created",c),this._observer.emit("newtransport",c),c}}var gr;class Ile{constructor(t){j(this,gr,void 0),$(this,gr,t)}async joinRoom(t,i){const r={roomUuid:t,displayName:i,prejoined:!1};return(await g(this,gr).sendMessagePromise(at.joinRoom,Ise.toBinary(r))).payload}async connectTransport(t){const i=(await g(this,gr).sendMessagePromise(at.createWebRTCTransport,fse.toBinary(t))).payload,{transportId:r,description:n}=Xv.fromBinary(i),s={sdp:n==null?void 0:n.sdp,type:n.type};return{transportId:r,answer:s}}async produce(t){var i,r;const n=(await g(this,gr).sendMessagePromise(at.produce,Fse.toBinary(t))).payload,s=kae.fromBinary(n);return{answer:{sdp:(i=s==null?void 0:s.description)==null?void 0:i.sdp,type:(r=s==null?void 0:s.description)==null?void 0:r.type},producerId:s.producerId}}async consume(t){const i=(await g(this,gr).sendMessagePromise(at.consume,jse.toBinary(t))).payload,{consumerIdsMap:{map:r}}=Eae.fromBinary(i);return r}async closeProducer(t){const i=(await g(this,gr).sendMessagePromise(at.closeProducer,qse.toBinary(t))).payload,{description:r}=Oae.fromBinary(i);return r}async closeConsumer(t){return(await g(this,gr).sendMessagePromise(at.closeConsumer,Kse.toBinary(t))).payload}async hostControlForPeer(t,i){const r={audio:i==="audio",screeShare:!1,video:i==="video",participantId:t},n=(await g(this,gr).sendMessagePromise(at.hostControlPeer,rae.toBinary(r))).payload;if(!n)return!1;const{status:s}=Fae.fromBinary(n);return s==="success"}async hostControlForAll(t){const i={audio:t==="audio",screenShare:!1,video:t==="video"},r=(await g(this,gr).sendMessagePromise(at.hostControlAllPeers,sae.toBinary(i))).payload;if(!r)return!1;const{status:n}=Vae.fromBinary(r);return n==="success"}async kickAll(){const t={},i=(await g(this,gr).sendMessagePromise(at.kickAll,Xse.toBinary(t))).payload;if(!i)return!1;const{status:r}=jae.fromBinary(i);return r==="success"}async kickPeer(t){const i=(await g(this,gr).sendMessagePromise(at.kickPeer,Qse.toBinary(t))).payload;if(!i)return!1;const{status:r}=Nae.fromBinary(i);return r==="success"}async changeDisplayName(t){const i=(await g(this,gr).sendMessagePromise(at.changeDisplayName,tae.toBinary(t))).payload;if(!i)return!1;const{status:r}=Hae.fromBinary(i);return r==="success"}async notifySelfJoinComplete(){const t={},i=(await g(this,gr).sendMessagePromise(at.selfJoinComplete,Mse.toBinary(t))).payload;return yae.fromBinary(i)}}gr=new WeakMap;class Ole extends Ele{constructor(t){super(),_(this,"_device"),_(this,"_sendTransport"),_(this,"_recvTransport"),_(this,"_consumers"),_(this,"_producers"),_(this,"_producerIdToConsumerIdMap"),_(this,"_logger"),_(this,"_socket"),_(this,"_socketHandler"),_(this,"transportConnectionStatus"),this._producers=new Map,this._consumers=new Map,this._producerIdToConsumerIdMap=new Map,this.transportConnectionStatus=new Map,this._device=new Ale,this._logger=ar.getLogger("HiveSFUHandler"),this._socket=t,this._socketHandler=new Ile(t)}get socket(){return this._socket}get producers(){return this._producers}get consumers(){return this._consumers}get producerIdToConsumerIdMap(){return this._producerIdToConsumerIdMap}get hiveSocketHandler(){return this._socketHandler}async setupTransports(t){const i=await Ui().getICEServers(),r=t.map(n=>{const s=this.transportConnectionStatus.get(n);if(s)return s;switch(n){case"send":{const a=this.createSendTransport({iceServers:i});return this.transportConnectionStatus.set(n,a),a}case"recv":{const a=this.createRecvTransport({iceServers:i});return this.transportConnectionStatus.set(n,a),a}default:return this._logger.warn(`what are you thinking when passing this ${n}?`),Promise.reject(Error("TYPE_OF_TRANSPORT_UNKNOWN"))}});await Promise.all(r).finally(()=>{t.forEach(n=>{this.transportConnectionStatus.delete(n)})})}async stopAllTransports(){var t,i;this._logger.info("closing all the transports"),(t=this._sendTransport)==null||t.close(),(i=this._recvTransport)==null||i.close(),this._sendTransport=void 0,this._recvTransport=void 0}async createSendTransport(t){if(this._sendTransport&&this._sendTransport.connected)return;this._logger.info("sendTransport::initializing_transport");const i=this._device.createSendTransport(t);this._logger.info("sendTransport::initialized_transport"),this.handleTransport(i,!1),this._logger.info("sendTransport::connecting_transport");try{await i.connect()}catch(r){this._logger.error("fail to connect send transport:",i.id,"[Error]:",r,"retrying once."),await i.connect().catch(n=>{this._logger.error("failed to connect send transport after retry:",i.id,"[Error]:",n)})}this._logger.info("sendTransport::connected_transport"),this._sendTransport=i,de.onSafeInitialization(()=>{de.configureSendTransport(i)}),Object.assign(window,{sendTransport:i})}async createRecvTransport(t){if(this._recvTransport&&this._recvTransport.connected)return;this._logger.info("recvTransport::initializing_transport");const i=this._device.createRecvTransport({...t,additionalSettings:{rtcAudioJitterBufferMaxPackets:25,rtcAudioJitterBufferFastAccelerate:!0,rtcAudioJitterBufferMinDelayMs:20}});de.onSafeInitialization(()=>{de.configureRecvTransport(i)}),this._logger.info("recvTransport::initialized_transport"),this.handleTransport(i,!0),this._logger.info("recvTransport::connecting_transport");try{await i.connect()}catch(r){this._logger.error("fail to connect recv transport:",i.id,"[Error]:",r,"retrying once."),await i.connect().catch(n=>{this._logger.error("failed to connect recv transport after retry:",i.id,"[Error]:",n)})}this._logger.info("recvTransport::connected_transport"),this._recvTransport=i,this.producerIdToConsumerIdMap.clear()}handleTransport(t,i){if(t.on("connect",async({offer:r},n,s)=>{try{const a={consuming:i,description:{sdp:r.sdp,type:r.type,target:i?Za.SUBSCRIBER:Za.PUBLISHER}},{transportId:o,answer:c}=await this._socketHandler.connectTransport(a);t.setServerId(o),n({answer:c})}catch(a){this._logger.error(`${i?"consumer":"producer"} transport connection error:`,a),s(a)}}),t.on("connectionstatechange",async r=>{switch(this._logger.info(`${i?"consumer":"producer"} transport connectionState:`,r),r){case"failed":case"disconnected":if(t.closed)return;this._logger.info(`${i?"consumer":"producer"} transport disconnected or failed, reconnecting...`),ge.hasFeature(ye.ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED)?(M.emit(I.HIVE_TRANSPORT_STATE_CHANGED,{state:"reconnecting",transportDirection:i?"recv":"send"}),this.emit("reconnect_transport",t)):M.emit(I.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break;case"new":case"closed":break;default:M.emit(I.HIVE_TRANSPORT_STATE_CHANGED,{state:r,transportDirection:i?"recv":"send"});break}}),t.on("icecandidate",async r=>{this._logger.debug("sending icecandidate:",r.toJSON())}),t.on("datachannel:events",async(r,n)=>{this._logger.debug("got data channel message on event:",n);try{switch(n.type){case"offer":{const s={sdp:n.payload.sdp,type:"offer"};let a;try{const o=await t.setRemoteOffer(s);a={type:"answer",payload:{type:o.type,sdp:o.sdp}}}catch(o){this._logger.error("datachannel:events::Error:",o),a={type:"error",payload:{error:o.message}}}this._logger.debug("datachannel answer:",a),r.send(JSON.stringify(a));break}case"consumer_toggle":{const{mute:s,trackId:a}=n.payload;this._logger.info("consumer toggled for",a,"muted:",s);const o=this.consumers.get(a);if(!o){this._logger.warn("consumer with id",a," not found");return}o.paused!==s&&(this._logger.debug("consumer state is not same",{consumerPaused:o.paused,mute:s}),s?(o.pause(),M.emit(I.CONSUMER_PAUSED,{id:o.id})):(o.resume(),M.emit(I.CONSUMER_RESUMED,{id:o.id})));break}default:this._logger.warn("unknown event received from hive node, event:",n.type);break}}catch{this._logger.error("Unable to handle the incoming datachannel message on",r.label)}}),t.on("negotiate",async({description:r},n,s)=>{try{const a={sdp:r==null?void 0:r.sdp,type:r==null?void 0:r.type},o=await this.negotiate(t,a);n({answer:o})}catch(a){this._logger.error("negotiate error:",a),s(a)}}),t.on("close",()=>{if(this._logger.info(`${i?"consumer":"producer"} transport closed`,t.id),i){this._recvTransport=void 0;return}this._sendTransport=void 0}),!i){t.on("produce",async({offer:r,kind:n,paused:s,appData:a},o,c)=>{var d;const l=Ne(r.sdp).media.filter(f=>n==="video"?f.type==="video":f.type==="audio").at(-1).msid,u={description:{sdp:r.sdp,type:r.type,target:Za.PUBLISHER},paused:s,kind:n,msid:l,screenShare:(d=a.screenShare)!=null?d:!1};try{const{answer:f,producerId:y}=await this._socketHandler.produce(u);o({answer:f,producerId:y})}catch(f){this._logger.error("create producer error:",f),c(f)}});return}t.on("datachannel:negotiation",async(r,n)=>{try{this._logger.info("datachannel message recieved:",r.label,n);const s={sdp:n,type:"offer"},a=await t.setRemoteOffer(s);this._logger.info("datachannel answer:",a),r.send(a.sdp)}catch(s){this._logger.error("datachannel:negotiation::Error:",s)}}),t.on("consumePeer",async({producingPeerId:r},n,s)=>{this._logger.info("consumePeer:",r);const a={producingPeerId:r};try{const o=await this._socketHandler.consume(a);this._logger.debug(`consumePeer response for ${r}:`,{consumerStateMap:o});const c=new Map;Object.entries(o).forEach(([d,l])=>{var u,f,y;c.set(d,{consumerId:l.consumerId,trackId:(u=l.producerTrack)==null?void 0:u.trackId,streamId:l.producerTrack.streamId,kind:l.producerState.kind===qn.VIDEO?"video":"audio",screenShare:(f=l.producerState)==null?void 0:f.screenShare,paused:(y=l.producerState)==null?void 0:y.pause})}),n({consumersMap:c})}catch(o){this._logger.error("consumePeer error:",o),s(o)}}),t.on("consume",async({producerId:r,producingPeerId:n},s,a)=>{var o,c,d,l;const u={producingPeerId:n,producerId:r};try{const f=(await this._socketHandler.consume(u))[r];this._logger.info("consumer create response:",{consumerState:f,paused:(o=f.producerState)==null?void 0:o.pause}),s({consumerId:f.consumerId,screenShare:(c=f.producerState)==null?void 0:c.screenShare,trackId:(d=f.producerTrack)==null?void 0:d.trackId,streamId:f.producerTrack.streamId,kind:f.producerState.kind===qn.VIDEO?"video":"audio",paused:(l=f.producerState)==null?void 0:l.pause})}catch(f){this._logger.error("error during consuming on server:",f),a(f)}})}async createProducer(t,i,r){if(this._sendTransport===void 0||this._sendTransport.closed)return;const n=await this._sendTransport.produce(i);n.on("close",async(s,a,o)=>{this._logger.info("producer id:",n.id,"closed with reason:",o);const c={producerId:n.id,description:{sdp:s.sdp,type:s.type,target:Za.PUBLISHER}};try{const d=await this._socketHandler.closeProducer(c);this._logger.info("response",d);const l={sdp:d==null?void 0:d.sdp,type:d==null?void 0:d.type};a(l)}catch(d){this._logger.error("producer close error:",d)}this._producers.delete(t),r(),t===be.SCREENSHARE_VIDEO&&this._switchWebcamLayers(3)}),n.on("trackended",()=>{T.info("producer::trackended",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:n==null?void 0:n.appData}}),[be.MIC,be.WEBCAM].includes(t)||r()}),this._producers.set(t,n),this._producers.has(be.SCREENSHARE_VIDEO)&&this._switchWebcamLayers(0)}async _switchWebcamLayers(t){const i=this._producers.get(be.WEBCAM);if(i)try{this._logger.debug("switching layer of webcam producer to:",t),await i.setMaxSpatialLayer(t)}catch(r){this._logger.error("failed to switch spatial layer",r)}}_initConsumer(t){t&&(t.observer.on("close",async i=>{this._logger.debug("consumer closed",i),this._consumers.delete(t.id),M.emit(I.CONSUMER_CLOSED,{id:t.id})}),this._consumers.set(t.id,t),this.producerIdToConsumerIdMap.set(t.producerId,t.id),M.emit(I.NEW_CONSUMER,{id:t.id}))}async consumePeer(t){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)throw Error("Receiving transport not connected");try{const i=await this._recvTransport.consumePeer(t),r=[];i.forEach(n=>{n.status==="rejected"?r.push(n.reason):this._initConsumer(n.value)}),this._recvTransport.retryFailedConsumerCreationTasks(r).then(n=>{n.forEach(s=>{s.status==="rejected"?this._logger.error("consumer creation failed 2nd time, this should never happen second time.",s.reason):this._initConsumer(s.value)})})}catch(i){throw this._logger.error("got error in consumePeer",i),i}}async createConsumer(t){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)return;const{producerId:i,producingPeerId:r,appData:n}=t;if(this.getProducer(i)){this._logger.warn("why are you creating a consumer for local producer?");return}try{const s=await this._recvTransport.consume({producerId:i,producingPeerId:r,appData:n});this._initConsumer(s)}catch(s){Rle(s)&&this._recvTransport.retryFailedConsumerCreationTasks([s]).then(([a])=>{a.status==="fulfilled"?this._initConsumer(a.value):this._logger.error("failed to complete consumer creation task again.","this should not happen",a.reason)})}Object.assign(window,{consumers:this._consumers})}async pauseProducer(t){const i=this._producers.get(t);if(!i){this._logger.warn("producer type:",t,"not found");return}i.pause(),this._logger.info(t,"producer id:",i.id,"paused")}async resumeProducer(t){const i=this._producers.get(t);if(!i){this._logger.warn("producer type:",t,"not found");return}i.resume(),this._logger.info(t,"producer id:",i.id,"resumed")}async replaceTrack(t,i){const r=this._producers.get(t);if(!r){this._logger.warn("producer type:",t,"not found");return}await r.replaceTrack({track:i}),this._logger.info("track replaced with id:",i.id,"on producer:",t)}async removeProducer(t,i){const r=this._producers.get(t);if(!r){this._logger.warn("producer type:",t,"not found");return}i&&r.track.stop(),r.close()}async pauseConsumer(t){if(!this._consumers.get(t)){this._logger.warn("consumer id:",t,"not found");return}this.toggleConsumerOverDC(t,!0)}async pauseConsumerOverSocket(t){try{const i={consumerId:t.id,pause:!0};await this.socket.sendMessagePromise(at.toggleConsumer,_C.toBinary(i)),t.pause(),M.emit(I.CONSUMER_PAUSED,{id:t.id}),this._logger.info("consumer:",t.id,"paused")}catch(i){this._logger.error("error on pausing consumer",i)}}async toggleConsumerOverDC(t,i){const r={type:"consumer_toggle",payload:{consumerId:t,mute:i}},n=this._recvTransport.getDatachannel("events");if(!n){this._logger.warn("events datachannel not found");return}n.send(JSON.stringify(r))}async resumeConsumer(t){const i=this._consumers.get(t);if(!i){this._logger.warn("consumer id:",t,"not found");return}if(!i.paused){this._logger.warn("consumer is not paused so not resuming",t);return}try{const r={consumerId:t,pause:!1};await this.socket.sendMessagePromise(at.toggleConsumer,_C.toBinary(r)),i.resume(),M.emit(I.CONSUMER_RESUMED,{id:i.id}),this._logger.info("consumer:",t,"resumed")}catch(r){this._logger.error("error on resuming consumer",r)}}async closeConsumer(t,i){return this.closeConsumers([t],i)}async closeConsumers(t,i=!1){this._logger.info("Closing consumers:",t,"with force:",i);let r=!0;const n=t.filter(o=>this._consumers.get(o)?!0:(this._logger.warn("consumer id:",o,"not found"),!1)),s={consumerIds:n},a=async()=>{var o;return(o=this._recvTransport)==null?void 0:o.awaitQueue.push(async()=>{await this._socketHandler.closeConsumer(s)}).catch(c=>{this._logger.warn("error on closing consumer:",c),r=i})};i?a():await a(),r&&n.forEach(o=>{const c=this.consumers.get(o);this.producerIdToConsumerIdMap.delete(c.producerId),c.close(i?"manually closed":void 0)})}async cleanupConsumers(t){const i=[];this._consumers.forEach(r=>{t?r.peerId===t&&i.push(r.id):i.push(r.id)}),this.closeConsumers(i,!0)}async stopAllProducers(){this._logger.info("stopping all available producers"),this._producers.forEach((t,i)=>{this._logger.debug("closing producer type",i),t.close()})}getProducer(t){return[...this.producers.values()].filter(i=>i.id===t).at(0)}async negotiate(t,i){this._logger.info("setting remote offer :",i,"on transport",t.serverId);const r=await t.setRemoteOffer(i),n={transportId:t.serverId,description:{sdp:r.sdp,type:r.type,target:Za.SUBSCRIBER}};return this._logger.info("sending renegotiate request",n),await this.socket.sendMessagePromise(at.renegotiateSessionDescription,yse.toBinary(n)),this._logger.info("renegotiation done",t.serverId),r}}var Mle=Object.defineProperty,Dle=Object.getOwnPropertyDescriptor,et=(e,t,i,r)=>{for(var n=r>1?void 0:r?Dle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Mle(t,i,n),n},fi,dt,Mu,Vo,MC;const QD=(MC=class extends YD{constructor(e){super(),j(this,fi,void 0),j(this,dt,void 0),j(this,Mu,void 0),j(this,Vo,void 0),_(this,"legacyMode"),_(this,"roomNodeUrl"),_(this,"peerDisplayName"),_(this,"activatedProducingPeerIds"),_(this,"logger");const{roomName:t,peerId:i,authToken:r,legacyMode:n,socketClient:s,meetingTitle:a}=e;this.roomName=t,this.peerId=i,this.authToken=r,this.legacyMode=n,this.roomJoined=!1,this.meetingTitle=a,$(this,Vo,!1),$(this,fi,s),$(this,dt,new Ole(s)),this.maxPreferredStreams=6,this.activatedProducingPeerIds=new Set,this.logger=ar.getLogger("HiveNodeClient()"),de.legacySwitch(n),this.handleSocketEvents(),this.handleSFUEvents(),$(this,Mu,()=>{this.logger.info("noop reconnection handler")})}static async init(e){const{legacyMode:t=!0,roomName:i,peerId:r,authToken:n,meetingTitle:s,socket:a}=e,o=new QD({legacyMode:t,authToken:n,socketClient:a,peerId:r,roomName:i,meetingTitle:s});return a.onStateEvent("disconnected",c=>{var d;o.isDisconnected=!0,(d=g(o,dt))==null||d.cleanupConsumers(),M.emit(I.ROOM_NODE_DISCONNECTED,c),o.roomJoined=!1,o.activatedProducingPeerIds=new Set,T.info("HIVE_NODE_DISCONNECTED")}),a.onStateEvent("reconnected",async()=>{var c,d;T.info("HIVE_NODE_RECONNECTED"),await((c=g(o,dt))==null?void 0:c.cleanupConsumers()),g(d=o,Mu).call(d)}),a.onStateEvent("connected",async c=>{M.emit(I.ROOM_NODE_CONNECTED,c),T.info("HIVE_NODE_CONNECTED")}),o}get sfuHandler(){return g(this,dt)}set onSocketReconnection(e){$(this,Mu,e)}async reconnectTransport(e){if(this.logger.info("Room joining state",g(this,Vo)),!(!e||g(this,Vo))){if(e.close(),e.direction==="send"){await this.sfuHandler.setupTransports(["send"]),this.logger.info("send transport reconected!"),M.emit(I.RESET_PRODUCER_STATE);return}this.sfuHandler.cleanupConsumers(),await this.sfuHandler.setupTransports(["recv"]),this.logger.info("recv transport reconnected!"),this.activatedProducingPeerIds=new Set,M.emit(I.REFRESH_GRID,!0)}}async setupTransports(){await g(this,dt).setupTransports(["recv","send"])}async joinRoom(e,t,i,r,n={}){await this.sfuHandler.stopAllTransports(),this.peerDisplayName=e,$(this,Vo,!0);try{return await this.sfuHandler.hiveSocketHandler.joinRoom(i,e),await this.setupTransports(),ge.hasFeature(ye.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{var s;const a=await Ui().getUserDetails(),o=$e.isV2AuthToken?a.participant:a,c={userId:(s=o.id)!=null?s:o.participant.id,peerId:this.peerId,displayName:e,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Ye.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:qm,sdkVersion:Il,metaData:{},permissions:{}};de.roomJoined(c),n!=null&&n.audio?de.audioOn():de.audioOff(),n!=null&&n.video?de.videoOn():de.videoOff()}),{roomJoined:await this.completeJoinRoom()}}catch(s){return this.logger.error("error on sending join room request",s),{roomJoined:!1}}}async completeJoinRoom(){try{const{maxPreferredStreams:e,participants:t,roomState:i,selectedPeers:r}=await this.sfuHandler.hiveSocketHandler.notifySelfJoinComplete();this.logger.debug("peerJoinCompleteResponse",{participants:t,roomState:i,selectedPeers:r}),this.roomUUID=i.roomUuid,this.maxPreferredStreams=e;const n=t.map(c=>{const d=c.producerStates,l={id:c.peerId,isHost:!1,displayName:c.displayName,flags:{},userId:c.userId,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};return d.forEach(u=>{u.kind===qn.AUDIO?l.audioMuted=u.pause:l.videoEnabled=!u.pause,l.producers.push({producerId:u.producerId,kind:u.kind===qn.AUDIO?"audio":"video",pause:u.pause,screenShare:u.screenShare})}),l}),{audioPeers:s,compulsoryPeers:a}=r!=null?r:{},o=n.filter(c=>c.id!==this.peerId);return $(this,Vo,!1),this.roomJoined=!0,T.info("HiveNodeClient::joinRoom::pre_emitasync_room_joined"),await M.emitAsync(I.ROOM_JOINED,{peers:o}),i.isRecording&&M.emit(I.HIVE_RECORDING_STARTED,i.recorderParticipantId),T.info("HiveNodeClient::joinRoom::post_emitasync_room_joined"),M.emit(I.SELF_ROOM_JOINED),M.emit(I.SELECTED_PEERS,{peerIds:s!=null?s:[],compulsoryPeers:a}),M.emit(I.REFRESH_GRID),!0}catch(e){return this.logger.error("error on completing join room:",e),!1}}async leaveRoom(){await g(this,dt).stopAllTransports();const e={closeRoom:!1};g(this,fi).sendMessagePromise(at.leaveRoom,Lse.toBinary(e)).then(t=>{var i;(i=_ae.fromBinary(t.payload))!=null&&i.closed||this.logger.warn("weird state on peer closed and should not happen")}).catch(t=>{this.logger.error("error on sending leave room request",t)}),de.callEnded(),C.destruct()}getConsumers(){return g(this,dt).consumers}async activatePeers(e){const t=e.map(({peerId:i,producers:r,force:n})=>{if(r.length===0)return Promise.resolve();if(n)return this.consumePeer(i,n);const s=[];return r.every(a=>{const o=this.sfuHandler.producerIdToConsumerIdMap.get(a.producerId);if(!o)return!1;const c=this.sfuHandler.consumers.get(o);return c&&!a.pause&&c.paused&&s.push(o),!0})?s.length>0?this.resumeConsumers(s):Promise.resolve():this.consumePeer(i)});await Promise.all(t)}async deactivatePeers(e){if(this.logger.info("deactivating producers",e),e.producers.some(t=>t.screenShare&&t.kind==="video")){this.logger.debug("peer is screensharing can't deactivate");return}e.producers.forEach(({producerId:t,kind:i})=>{if(i==="audio"){this.logger.debug("we don't want to deactive audio consumers");return}const r=this.sfuHandler.producerIdToConsumerIdMap.get(t);if(!r){this.logger.warn("consumer not found in deactivate producers:",t);return}this.sfuHandler.closeConsumer(r)}),this.activatedProducingPeerIds.delete(e.peerId)}async createConsumer({producerId:e,producingPeerId:t,screenShare:i}){return this.sfuHandler.createConsumer({producerId:e,producingPeerId:t,appData:{screenShare:i}})}async pauseConsumers(e){e.forEach(t=>{this.sfuHandler.pauseConsumer(t)})}async resumeConsumers(e){e.forEach(t=>{this.sfuHandler.resumeConsumer(t)})}async closeConsumers(e){const t=[...this.getConsumers().values()].filter(i=>e.includes(i.peerId)).map(i=>i.id);return e.forEach(i=>{this.activatedProducingPeerIds.delete(i)}),this.sfuHandler.closeConsumers(t)}async consumePeer(e,t){if(this.logger.info("current activated Peer ids",[...this.activatedProducingPeerIds.values()],"forced?:",t),!this.activatedProducingPeerIds.has(e)||t)try{await g(this,dt).consumePeer(e),this.activatedProducingPeerIds.add(e)}catch(i){this.logger.error("consumePeer failed in HiveNodeClient.ts",i)}else this.logger.info("not creating consumer for this peerId",e)}async shareWebcam(e){if(e===void 0)return;if(g(this,dt).producers.has(be.WEBCAM)){const r=g(this,dt).producers.get(be.WEBCAM);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeWebcam();return}await g(this,dt).removeProducer(r.id)}const t={track:e,codecOptions:{name:"VP8"},appData:{screenShare:!1},stopTracks:!1};if(ge.hasFeature(ye.ENABLE_HIVE_SIMULCAST)){let r=e.getConstraints().width;r in fC||(r=320),t.encodings=fC[r]}const i=()=>{this.disableWebcam()};await g(this,dt).createProducer(be.WEBCAM,t,i)}async shareScreen(e){const{video:t,audio:i}=e;if(t===void 0)return;const r={track:t,codecOptions:{name:"VP8"},appData:{screenShare:!0,supportsRemoteControl:Ye.isElectron()},stopTracks:!1};let n=()=>{this.disableScreenShare()};if(de.screenShareRequested(),await g(this,dt).createProducer(be.SCREENSHARE_VIDEO,r,n),i){const s={track:i,codecOptions:{name:"opus"},appData:{screenShare:!0,supportsRemoteControl:Ye.isElectron()},stopTracks:!1};n=()=>{},await g(this,dt).createProducer(be.SCREENSHARE_AUDIO,s,n)}}async shareMic(e){if(e===void 0)return;if(g(this,dt).producers.has(be.MIC)){const r=g(this,dt).producers.get(be.MIC);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeMic();return}await g(this,dt).removeProducer(be.MIC,!1)}const t={track:e,encodings:[{priority:"high"}],codecOptions:{name:"opus"},stopTracks:!1},i=()=>{this.disableMic()};await g(this,dt).createProducer(be.MIC,t,i)}pauseMic(){const e=g(this,dt).producers.get(be.MIC);if(!e){T.error("pauseMic::could_not_find_mic_producer");return}if(e.paused){T.info("pauseMic::mic_producer_already_paused");return}e.pause();const t={producerId:e.id,pause:!0};g(this,fi).sendMessage(at.toggleProducer,Og.toBinary(t))}async pauseWebcam(){const e=g(this,dt).producers.get(be.WEBCAM);if(!e){T.error("pauseWebcam::could_not_find_webcam_producer");return}e.pause();const t={producerId:e.id,pause:!0};g(this,fi).sendMessage(at.toggleProducer,Og.toBinary(t))}async resumeMic(){const e=g(this,dt).producers.get(be.MIC);if(!e){T.error("resumeMic::could_not_find_mic_producer");return}if(!e.pause){T.info("resumeMic::mic_producer_already_resumed");return}e.resume();const t={producerId:e.id,pause:!1};g(this,fi).sendMessage(at.toggleProducer,Og.toBinary(t))}async resumeWebcam(){const e=g(this,dt).producers.get(be.WEBCAM);if(!e){T.error("resumeWebcam::could_not_find_webcam_producer");return}e.resume();const t={producerId:e.id,pause:!1};g(this,fi).sendMessage(at.toggleProducer,Og.toBinary(t))}async disableWebcam(){await g(this,dt).removeProducer(be.WEBCAM)}async disableMic(){await g(this,dt).removeProducer(be.MIC)}async disableScreenShare(){T.info("screen_sharing_stopped"),await g(this,dt).removeProducer(be.SCREENSHARE_VIDEO),await g(this,dt).removeProducer(be.SCREENSHARE_AUDIO)}async muteSelf(){this.pauseMic()}async unmuteSelf(){await this.resumeMic()}async resetVideoProducers(e,t){e&&(await g(this,dt).removeProducer(be.WEBCAM,!1),this.shareWebcam(e)),t&&(await g(this,dt).removeProducer(be.SCREENSHARE_VIDEO,!1),this.shareScreen({video:t}))}async getPolls(){return{payload:{polls:{}}}}async changeDisplayName(e,t){const i={displayName:e,participantId:t!=null?t:this.peerId};if(!await this.sfuHandler.hiveSocketHandler.changeDisplayName(i))throw new Error("failed to change display name!")}async kick(e){const t={participantId:e};if(!await this.sfuHandler.hiveSocketHandler.kickPeer(t))throw new Error("failed to kickout the participant!")}async kickAll(){if(!await this.sfuHandler.hiveSocketHandler.kickAll())throw new Error("failed to kickout all participant!")}async muteAll(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("audio"))throw new Error("failed to mute all participant")}async muteAllVideo(){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("video"))throw new Error("failed to mute all video participant")}async mutePeer(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(e,"audio"))throw new Error("failed to mute given participant")}async mutePeerVideo(e){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(e,"video"))throw new Error("failed to mute video of given participant")}async pinPeer(e){const t={participantId:e!=null?e:""};try{await g(this,fi).sendMessagePromise(at.globalPinPeer,zse.toBinary(t))}catch(i){this.logger.error(`Error in pinning peer: ${i}`)}}async handleSocketEvents(){g(this,fi).on(at.peerJoinedBroadcast,({id:e,payload:t})=>{if(this.roomJoined){this.logger.debug("got peer joined with id",e);try{const{participant:{peerId:i,displayName:r,producerStates:n,userId:s}}=Wae.fromBinary(t);if(i===this.peerId)return;this.logger.info("peer-joined",{peerId:i,displayName:r,producerStates:n});const a={id:i,isHost:!1,displayName:r,flags:{},userId:s,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};n.forEach(o=>{o.kind===qn.AUDIO?a.audioMuted=o.pause:a.videoEnabled=!o.pause,a.producers.push({producerId:o.producerId,kind:o.kind===qn.AUDIO?"audio":"video",pause:o.pause,screenShare:o.screenShare})}),M.emit(I.PEER_JOINED,a),M.emit(I.REFRESH_GRID)}catch(i){this.logger.error("error in peer-joined-broadcast",i)}}}),g(this,fi).on(at.peerProducerCreateBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:i}=Jae.fromBinary(e);if(t===this.peerId)return;this.logger.info("producer created broadcast:",t,"producer state",i),M.emit(I.NEW_PRODUCER,{peerId:t,producer:{producerId:i.producerId,kind:i.kind===qn.AUDIO?"audio":"video",pause:i.pause,screenShare:i.screenShare}})}catch(t){this.logger.error("error in peer-producer-create-broadcast",t)}}),g(this,fi).on(at.peerProducerToggleBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:{kind:i,pause:r,producerId:n}}=Yae.fromBinary(e),s=i===qn.AUDIO?"audio":"video";if(this.logger.info("producer toggle broadcast:",t,"producerId",n,"kind",s,"paused",r),t===this.peerId&&r){M.emit(s==="audio"?I.MUTE_ALL:I.MUTE_ALL_VIDEO);return}M.emit(I.PRODUCER_TOGGLE,{peerId:t,producerId:n,paused:r,kind:s}),[...this.getConsumers().values()].filter(a=>a.producerId===n).forEach(a=>{a.paused!==r&&(this.logger.debug("consumer state mismatched for",a.id,". updating consumer pause state",a.paused,"to",r),r?(a.pause(),M.emit(I.CONSUMER_PAUSED,{id:a.id})):(a.resume(),M.emit(I.CONSUMER_RESUMED,{id:a.id})))})}catch(t){this.logger.error("error in producer toggle broadcast handler",t)}}),g(this,fi).on(at.selectedPeer,({payload:e})=>{if(this.roomJoined)try{const{audioPeers:t,compulsoryPeers:i}=GD.fromBinary(e);this.logger.info("selected peers:",t,i),M.emit(I.SELECTED_PEERS,{peerIds:i.concat(t)})}catch(t){this.logger.error("error in selected-peer",t)}}),g(this,fi).on(at.selectedPeerDiff,({payload:e})=>{if(this.roomJoined)try{const{entries:t}=fae.fromBinary(e);this.logger.debug("selected peers diff:",t);const i=t.map(r=>({peerId:r.peerId,priority:r.priority}));M.emit(I.SELECTED_PEERS_DIFF,{entries:i})}catch(t){this.logger.error("error in selected-peer-diff",t)}}),g(this,fi).on(at.peerLeaveBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t}=eoe.fromBinary(e);if(t===this.peerId){this.logger.warn("peer got kicked out of the room"),M.emit(I.KICKED);return}this.logger.info("peer left broadcast:",t),this.sfuHandler.cleanupConsumers(t),M.emit(I.PEER_CLOSED,{id:t})}catch(t){this.logger.error("error in peer left broadcast",t)}}),g(this,fi).on(at.peerProducerCloseBroadcast,({payload:e})=>{if(this.roomJoined)try{const{participantId:t,producerState:{producerId:i}}=Zae.fromBinary(e);if(t===this.peerId)return;this.logger.info("producer closed broadcast:",t),M.emit(I.PRODUCER_CLOSED,{peerId:t,producerId:i});const r=this.sfuHandler.producerIdToConsumerIdMap.get(i);if(!r){this.logger.warn("no consumer found for producer",i);return}this.logger.info("closing consumer",r,"producer id ",i),this.sfuHandler.closeConsumer(r).then(()=>{this.logger.info("closed consumer",r),this.sfuHandler.producerIdToConsumerIdMap.delete(i),M.emit(I.CONSUMER_CLOSED,{id:r})}).catch(n=>{this.logger.error("error closing consumer",n)})}catch(t){this.logger.error("error on producer close broadcast",t)}}),g(this,fi).on(at.globalPeerPinBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=ioe.fromBinary(e);this.logger.info("pinning peerId: ",i),t=i.participantId}M.emit(I.PEER_PINNED,{peerId:t})}catch(t){this.logger.error("error on global peer pin broadcast",t)}}),g(this,fi).on(at.recordingStartedBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=noe.fromBinary(e);this.logger.info("recording started. peerId: ",i),t=i.participantId}M.emit(I.HIVE_RECORDING_STARTED,t)}catch(t){this.logger.error("error on recording started broadcast",t)}}),g(this,fi).on(at.recordingStoppedBroadcast,({payload:e})=>{if(this.roomJoined)try{let t;if(e){const i=aoe.fromBinary(e);this.logger.info("recording stopped. peerId: ",i),t=i.participantId}M.emit(I.HIVE_RECORDING_STOPPED,t)}catch(t){this.logger.error("error on recording started broadcast",t)}}),g(this,fi).on(at.peerDisplayNameEditBroadcast,({payload:e})=>{if(this.roomJoined)try{const t=coe.fromBinary(e);this.logger.debug("peer display name changed to:",t.displayName),M.emit(I.PEER_DISPLAY_NAME_CHANGED,t.participantId)}catch(t){this.logger.error("failed to handle peerDisplayNameEditBroadcast:",t)}})}handleSFUEvents(){g(this,dt).on("reconnect_transport",async e=>{try{await this.reconnectTransport(e),this.logger.info("transport reconnected [id:%s]",e.id)}catch(t){this.logger.error("error on reconnection transports",t)}})}},fi=new WeakMap,dt=new WeakMap,Mu=new WeakMap,Vo=new WeakMap,MC);let Me=QD;et([C.trace("HiveNodeClient.reconnect")],Me.prototype,"reconnectTransport",1);et([C.trace("HiveNodeClient.setupTransport")],Me.prototype,"setupTransports",1);et([C.trace("HiveNodeClient.joinRoom")],Me.prototype,"joinRoom",1);et([C.trace("HiveNodeClient.completeJoinRoom")],Me.prototype,"completeJoinRoom",1);et([C.trace("HiveNodeClient.leaveRoom")],Me.prototype,"leaveRoom",1);et([C.trace("HiveNodeClient.activatePeers")],Me.prototype,"activatePeers",1);et([C.trace("HiveNodeClient.deactivatePeers")],Me.prototype,"deactivatePeers",1);et([C.trace("HiveNodeClient.createConsumer")],Me.prototype,"createConsumer",1);et([C.trace("HiveNodeClient.pauseConsumers")],Me.prototype,"pauseConsumers",1);et([C.trace("HiveNodeClient.resumeConsumers")],Me.prototype,"resumeConsumers",1);et([C.trace("HiveNodeClient.closeConsumers")],Me.prototype,"closeConsumers",1);et([C.trace("HiveNodeClient.consumePeer")],Me.prototype,"consumePeer",1);et([C.trace("HiveNodeClient.shareWebcam")],Me.prototype,"shareWebcam",1);et([C.trace("HiveNodeClient.shareScreen")],Me.prototype,"shareScreen",1);et([C.trace("HiveNodeClient.shareMic")],Me.prototype,"shareMic",1);et([C.trace("HiveNodeClient.pauseMic")],Me.prototype,"pauseMic",1);et([C.trace("HiveNodeClient.pauseWebcam")],Me.prototype,"pauseWebcam",1);et([C.trace("HiveNodeClient.resumeMic")],Me.prototype,"resumeMic",1);et([C.trace("HiveNodeClient.resumeWebcam")],Me.prototype,"resumeWebcam",1);et([C.trace("HiveNodeClient.disableWebcam")],Me.prototype,"disableWebcam",1);et([C.trace("HiveClient.disableMic")],Me.prototype,"disableMic",1);et([C.trace("HiveClient.disableScreenShare")],Me.prototype,"disableScreenShare",1);et([C.trace("HiveNodeClient.muteSelf")],Me.prototype,"muteSelf",1);et([C.trace("HiveNodeClient.unmuteSelf")],Me.prototype,"unmuteSelf",1);et([C.trace("HiveNodeClient.resetVideoProducers")],Me.prototype,"resetVideoProducers",1);et([C.trace("HiveNodeClient.getPolls")],Me.prototype,"getPolls",1);et([C.trace("HiveNodeClient.changeDisplayName")],Me.prototype,"changeDisplayName",1);et([C.trace("HiveNodeClient.kickPeer")],Me.prototype,"kick",1);et([C.trace("HiveNodeClient.kickAllPeers")],Me.prototype,"kickAll",1);et([C.trace("HiveNodeClient.muteAll")],Me.prototype,"muteAll",1);et([C.trace("HiveNodeClient.muteAllVideo")],Me.prototype,"muteAllVideo",1);et([C.trace("HiveNodeClient.mute")],Me.prototype,"mutePeer",1);et([C.trace("HiveNodeClient.muteVideo")],Me.prototype,"mutePeerVideo",1);et([C.trace("HiveNodeClient.pinPeer")],Me.prototype,"pinPeer",1);et([C.trace("HiveNodeClient.init")],Me,"init",1);var ia=(e=>(e.SOCKET_CONNECTED="SOCKET_CONNECTED",e.SOCKET_DISCONNECTED="SOCKET_DISCONNECTED",e.SOCKET_CONNECTION_ERROR="SOCKET_CONNECTION_ERROR",e.SOCKET_MESSAGE="SOCKET_MESSAGE",e))(ia||{}),ip=(e=>(e[e.NOT_STARTED=0]="NOT_STARTED",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.ERRORED=3]="ERRORED",e))(ip||{}),Lle=Object.defineProperty,Nle=Object.getOwnPropertyDescriptor,ry=(e,t,i,r)=>{for(var n=r>1?void 0:r?Nle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Lle(t,i,n),n};const Ule="event://server-simple-message",jle="event://send-message";class Fh extends yr{constructor(t){super(),_(this,"socket"),_(this,"socketState"),_(this,"callbackHandler",null),this.socketState=ip.NOT_STARTED,t.callbackHandler&&(this.callbackHandler=t.callbackHandler)}connect(t){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=yf(t,{closeOnBeforeunload:!1}),this.setupSocket()}disconnect(){this.socket.disconnect()}reconnect(){this.socket.connect()}setupSocket(){this.socket.on("disconnect",t=>{this.socketState=ip.DISCONNECTED,T.warn("SocketClient::socket_disconnected",{error:{reason:t}}),this.emit(ia.SOCKET_DISCONNECTED,{reason:t})}),this.socket.on("connect_error",t=>{this.socketState=ip.ERRORED,ge.hasFeature(ye.SOCKET_POLLING)&&(this.socket.io.opts.transports=["polling","websocket"]),T.error("SocketClient::socket_connection_errored",{error:t}),this.emit(ia.SOCKET_CONNECTION_ERROR,{err:t})}),this.socket.on("connect",()=>{this.socketState=ip.CONNECTED,T.info("SocketClient::socket_connected"),this.emit(ia.SOCKET_CONNECTED)}),this.socket.on(Ule,async(t,i)=>{const r=JSON.parse(t);if((!C.logExclusionList.includes(r==null?void 0:r.type)||ge.hasFeature(ye.BYPASS_LOG_EXCLUSION_LIST))&&T.info(`SocketClient::SIMPLE_SERVER_MESSAGE_EVENT::${r==null?void 0:r.type}`),i){let n="OK";this.callbackHandler&&(n=await this.callbackHandler(r)),i(n)}else this.emit(ia.SOCKET_MESSAGE,r);Object.values(I).find(n=>n===r.type)&&M.emit(r.type,r.payload)})}async sendMessage(t){return(!C.logExclusionList.includes(t==null?void 0:t.type)||ge.hasFeature(ye.BYPASS_LOG_EXCLUSION_LIST))&&T.info(`SocketClient::sendMessage::${t==null?void 0:t.type}`),Object.assign(t,{metadata:t.metadata||{}}),C.injectContext(t.metadata),new Promise(i=>{this.socket.emit(jle,JSON.stringify(t),r=>{if(!r){i(void 0);return}const n=JSON.parse(r);i(n)})})}}ry([C.trace("SocketClient.connect")],Fh.prototype,"connect",1);ry([C.trace("SocketClient.disconnect")],Fh.prototype,"disconnect",1);ry([C.trace("SocketClient.reconnect")],Fh.prototype,"reconnect",1);ry([C.trace("SocketClient.setupSocket")],Fh.prototype,"setupSocket",1);var R_,ZD,x_,XD,Mg,p1;const A_=class{constructor(e=1e3){j(this,R_),j(this,x_),_(this,"sendTransport"),_(this,"recvTransport"),_(this,"collectStpStats"),_(this,"collectRtpStats"),_(this,"pingInterval"),this.pingInterval=e}initSendTransport(e){this.sendTransport=e,M.emit(I.SEND_TRANSPORT_CREATED)}initRecvTransport(e){this.recvTransport=e,M.emit(I.RECV_TRANSPORT_CREATED)}collectSendTransportStats(){return!this.sendTransport||this.collectStpStats?!1:(this.collectStpStats=setInterval(li(this,R_,ZD).bind(this),this.pingInterval),!0)}collectRecvTransportStats(){return!this.recvTransport||this.collectRtpStats?!1:(this.collectRtpStats=setInterval(li(this,x_,XD).bind(this),this.pingInterval),!0)}stopStatsCollection(e){return e==="send"?(clearInterval(this.collectStpStats),this.collectStpStats=void 0,!0):e==="receive"?(clearInterval(this.collectRtpStats),this.collectRtpStats=void 0,!0):!1}cleanup(e){this.stopStatsCollection(e),e==="send"?(this.sendTransport=void 0,this.collectStpStats=void 0,M.emit(I.SEND_TRANSPORT_CLOSED)):(this.recvTransport=void 0,this.collectRtpStats=void 0,M.emit(I.RECV_TRANSPORT_CLOSED))}};let eL=A_;R_=new WeakSet,ZD=function(){this.sendTransport||this.stopStatsCollection("send"),this.sendTransport.getStats().then(e=>{var t;return li(t=A_,Mg,p1).call(t,e,"send")})},x_=new WeakSet,XD=function(){this.recvTransport||this.stopStatsCollection("receive"),this.recvTransport.getStats().then(e=>{var t;return li(t=A_,Mg,p1).call(t,e,"receive")})},Mg=new WeakSet,p1=function(e,t){e.forEach(i=>{i.type==="candidate-pair"&&M.emit(I.CANDIDATE_PEER_UPDATE,{...i,transport:t}),i.type==="inbound-rtp"&&M.emit(I.INBOUND_RTP_UPDATE,{...i,transport:t}),i.type==="outbound-rtp"&&M.emit(I.OUTBOUND_RTP_UPDATE,{...i,transport:t})})},j(eL,Mg);const ro=new eL;var $le=Object.defineProperty,Fle=Object.getOwnPropertyDescriptor,$r=(e,t,i,r)=>{for(var n=r>1?void 0:r?Fle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&$le(t,i,n),n};class wr extends yr{constructor(t,i){super(),_(this,"device"),_(this,"sendTransport"),_(this,"recvTransport"),_(this,"sendTransportIceStateDisconnectTime"),_(this,"recvTransportIceStateDisconnectTime"),_(this,"producerCreationStatus"),_(this,"consumers"),_(this,"producers"),_(this,"socketClient"),_(this,"iceRestartInProgress"),this.producers=new Map,this.consumers=new Map,this.producerCreationStatus=new Map,this.iceRestartInProgress={sendTransport:!1,recvTransport:!1},i!==void 0?this.device=i:this.device=new AD,this.socketClient=t}async setupTransports(){const t=await Ui().getICEServers();await this.loadRouter(),await Promise.all([this.createRecvTransport(t),this.createSendTransport(t)])}async loadRouter(){(this.recvTransport||this.sendTransport)&&await this.stopAllTransports()}getRTPCapabilities(){return this.device.rtpCapabilities}async createRecvTransport(t){if(!this.socketClient)return;const i={forceTcp:!1,producing:!1,consuming:!0},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(T.info("recvTransport::initializing_transport"),this.recvTransport=this.device.createRecvTransport({...r,iceServers:t,proprietaryConstraints:gC}),ro.initRecvTransport(this.recvTransport),T.info("recvTransport::initialized_transport"),de.onSafeInitialization(()=>{de.configureRecvTransport(this.recvTransport)}),this.recvTransport.on("connect",async({dtlsParameters:n},s,a)=>{var o,c,d,l;const u=await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:this.recvTransport.id,dtlsParameters:n}});(o=u.payload)!=null&&o.error?(T.error("recvTransport::transport_status",{error:(d=u.payload)==null?void 0:d.error,transport:{id:(l=this==null?void 0:this.recvTransport)==null?void 0:l.id,status:"failed",type:"recv"}}),a(new Error("failed"))):(s(),T.info("recvTransport::transport_status",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"connected",type:"recv"}}))}),ge.hasFeature(ye.ENABLE_ICE_STATE_LOGGING)){T.info("enabling_ice_state_logging_for_recv_transport");let n;this.recvTransport.on("connectionstatechange",async s=>{var a,o,c,d,l,u,f,y;switch(T.info("recvTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.recvTransport)==null?void 0:a.id,status:s,type:"recv"}}),s){case"failed":if(M.emit(I.ICE_FAILED,{transport:"recv"}),T.warn("recvTransport::ice_state_failed"),ge.hasFeature(ye.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.recvTransport)}catch(b){T.error("recvTransport::ice_restart_failed",{error:b,transport:{id:(o=this==null?void 0:this.recvTransport)==null?void 0:o.id,status:"failed",type:"recv"}})}break;case"disconnected":M.emit(I.ICE_DISCONNECTED,{transport:"recv"}),T.warn("recvTransport::ice_state_disconnected"),this.recvTransportIceStateDisconnectTime&&T.warn("recvTransport::ice_state_disconnected_again",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"disconnected",type:"recv",lastDisconnectedTime:(d=this.recvTransportIceStateDisconnectTime)==null?void 0:d.toISOString(),lastDisconnectedTimeOffset:(l=this.recvTransportIceStateDisconnectTime)==null?void 0:l.getTimezoneOffset(),durationPassed:new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime()}}),this.recvTransportIceStateDisconnectTime=new Date;try{n=ge.getValue(ye.ICE_RESTART_ON_DISCONNECTED_STATE),typeof n!="number"&&(n=void 0)}catch{n=void 0}n&&setTimeout(async()=>{var b,k,P,w,E;if(this.recvTransportIceStateDisconnectTime!==void 0){M.emit(I.ICE_RECONNECTING,{transport:"recv"}),T.info("recvTransport::attempting_ice_restart",{transport:{id:(b=this==null?void 0:this.recvTransport)==null?void 0:b.id,type:"recv",status:"reconnecting",lastDisconnectedTime:(k=this.recvTransportIceStateDisconnectTime)==null?void 0:k.toISOString(),lastDisconnectedTimeOffset:(P=this.recvTransportIceStateDisconnectTime)==null?void 0:P.getTimezoneOffset()},iceRestart:{isSendTransport:(w=this==null?void 0:this.iceRestartInProgress)==null?void 0:w.sendTransport,isRecvTransport:(E=this==null?void 0:this.iceRestartInProgress)==null?void 0:E.recvTransport}});try{await this.restartIceTillSuccess(this.recvTransport)}catch(R){T.info("SFUHandler.disconnected.restartIceFailed",{error:R,iceRestart:{status:"failed",isRecvTransport:!0}})}}},n);break;case"connected":M.emit(I.ICE_CONNECTED,{transport:"recv"}),T.info("recvTransport::ice_state_connected",{transport:{id:(u=this==null?void 0:this.recvTransport)==null?void 0:u.id,type:"recv",status:"connected",lastDisconnectedTime:(f=this.recvTransportIceStateDisconnectTime)==null?void 0:f.toISOString(),lastDisconnectedTimeOffset:(y=this.recvTransportIceStateDisconnectTime)==null?void 0:y.getTimezoneOffset(),durationPassed:this.recvTransportIceStateDisconnectTime?new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime():null}}),this.recvTransportIceStateDisconnectTime=void 0;break}})}this.recvTransport.observer.on("close",()=>{this.recvTransport=void 0,ro.cleanup("receive"),T.warn("recvTransport_closed")})}async createSendTransport(t){const i={forceTcp:!1,producing:!0,consuming:!1},r=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(T.info("sendTransport::initializing_transport"),this.sendTransport=this.device.createSendTransport({...r,iceServers:t,proprietaryConstraints:gC}),ro.initSendTransport(this.sendTransport),T.info("sendTransport::initialized_transport"),de.onSafeInitialization(()=>{de.configureSendTransport(this.sendTransport)}),this.sendTransport.on("connect",async({dtlsParameters:n},s,a)=>{var o,c,d,l;(c=(await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:(o=this.sendTransport)==null?void 0:o.id,dtlsParameters:n}})).payload)!=null&&c.error?(T.error("sendTransport::transport_status",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"failed",type:"send"}}),a(new Error("failed"))):(T.info("sendTransport::transport_status",{transport:{id:(d=this==null?void 0:this.sendTransport)==null?void 0:d.id,status:"connected",type:"send"}}),s())}),this.sendTransport.on("produce",async({kind:n,rtpParameters:s,appData:a},o,c)=>{var d,l,u,f,y,b;const k=await this.socketClient.sendMessage({type:"produce",payload:{transportId:(d=this.sendTransport)==null?void 0:d.id,kind:n,rtpParameters:s,appData:a}});(l=k.payload)!=null&&l.error?(T.info("sendTransport::producer_status::failed",{producer:{kind:n,appData:a,status:"failed",id:(y=k==null?void 0:k.payload)==null?void 0:y.id}}),c((b=k.payload)==null?void 0:b.error)):(T.info("sendTransport::producer_status::producing",{producer:{kind:n,appData:a,status:"producing",id:(u=k==null?void 0:k.payload)==null?void 0:u.id}}),o({id:(f=k.payload)==null?void 0:f.id}))}),ge.hasFeature(ye.ENABLE_ICE_STATE_LOGGING)){T.info("Enabling ice state logging for send transport");let n;this.sendTransport.on("connectionstatechange",async s=>{var a,o,c,d;switch(T.info("sendTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.sendTransport)==null?void 0:a.id,status:s,type:"send"}}),s){case"failed":if(M.emit(I.ICE_FAILED,{transport:"send"}),T.warn("sendTransport::ice_state_failed"),ge.hasFeature(ye.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.sendTransport)}catch(l){T.error("sendTransport::ice_restart_failed",{error:l})}break;case"disconnected":M.emit(I.ICE_DISCONNECTED,{transport:"send"}),T.warn("sendTransport::ice_state_disconnected"),this.sendTransportIceStateDisconnectTime&&T.warn("sendTransport::ice_state_disconnected_again",{transport:{id:(o=this==null?void 0:this.sendTransport)==null?void 0:o.id,status:"disconnected",lastDisconnectedTime:this.sendTransportIceStateDisconnectTime.toLocaleTimeString(),durationPassed:new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime(),type:"send"}}),this.sendTransportIceStateDisconnectTime=new Date;try{n=ge.getValue(ye.ICE_RESTART_ON_DISCONNECTED_STATE),typeof n!="number"&&(n=void 0)}catch{n=void 0}n&&setTimeout(async()=>{var l,u,f,y;if(this.sendTransportIceStateDisconnectTime!==void 0){M.emit(I.ICE_RECONNECTING,{transport:"send"}),T.info("sendTransport::attempting_ice_restart",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"reconnecting",type:"send",lastDisconnectedTime:(u=this.sendTransportIceStateDisconnectTime)==null?void 0:u.toISOString(),lastDisconnectedTimeOffset:(f=this.sendTransportIceStateDisconnectTime)==null?void 0:f.getTimezoneOffset()},iceRestart:{status:"connecting"}});try{await this.restartIceTillSuccess(this.sendTransport)}catch(b){T.info("SFUHandler.disconnected.restartIceFailed",{error:b,transport:{id:(y=this==null?void 0:this.sendTransport)==null?void 0:y.id,type:"send",status:"failed"}})}}},n);break;case"connected":M.emit(I.ICE_CONNECTED,{transport:"send"}),T.info("sendTransport::ice_state_connected",{transport:{id:(c=this==null?void 0:this.sendTransport)==null?void 0:c.id,type:"send",status:"connected",lastDisconnectedTime:(d=this.sendTransportIceStateDisconnectTime)==null?void 0:d.toLocaleTimeString(),durationPassed:this.sendTransportIceStateDisconnectTime?new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime():null}}),this.sendTransportIceStateDisconnectTime=void 0;break}})}this.sendTransport.observer.on("close",()=>{this.sendTransport=void 0,ro.cleanup("send"),T.warn("sendTransport_closed")})}async restartIce(t){const{direction:i}=t;if(!(i==="recv"?this.iceRestartInProgress.recvTransport:this.iceRestartInProgress.sendTransport)){i==="recv"?this.iceRestartInProgress.recvTransport=!0:this.iceRestartInProgress.sendTransport=!0;try{const r=(await this.socketClient.sendMessage({type:"restartIce",payload:{transportId:t.id}})).payload;await t.restartIce(r)}catch(r){T.error("SFUHandler.restartIce.Failed",{error:r,iceRestart:{status:"failed"},transport:{id:t==null?void 0:t.id,status:"failed",type:i}})}i==="recv"?this.iceRestartInProgress.recvTransport=!1:this.iceRestartInProgress.sendTransport=!1}}async createConsumer(t){if(this.recvTransport===void 0||this.recvTransport.closed)return;const{peerId:i,producerId:r,id:n,kind:s,rtpParameters:a,appData:o,remotelyPaused:c}=t;T.info("createConsumer::initializing_consumer",{consumer:{id:n,peerId:i,kind:s,appData:o,remotelyPaused:c,producerId:r}});const d=await this.recvTransport.consume({id:n,producerId:r,kind:s,rtpParameters:a,appData:{...o,peerId:i}});T.info("createConsumer::initialized_consumer",{consumer:{id:d.id,peerId:i,kind:s,appData:o,remotelyPaused:c,producerId:r}});const l=d;l.peerId=i,l.remotelyPaused=c,l.score=10,this.consumers.set(d.id,l)}async closeConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&(T.info("SFUHandler::close_consumer",{consumer:r}),r.close(),this.consumers.delete(i))}async cleanupConsumers(){var t;(t=this.consumers)==null||t.forEach(i=>{M.emit(I.CONSUMER_CLOSED,{id:i.id}),this.closeConsumer({id:i.id})})}async pauseConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&r.pause()}async resumeConsumer(t){const{id:i}=t,r=this.consumers.get(i);r&&r.resume()}async createProducer(t,i,r){if(this.sendTransport===void 0||this.sendTransport.closed)return;if(T.info("createProducer::initializing_producer",{producer:{id:"TO_BE_CREATED",kind:t,status:"initializing",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.get(t)&&this.producerCreationStatus.get(t)==="INITIALIZING"){T.info("createProducer::producer getting initializing",{producer:{id:"GETTING_CREATED",status:"initializing",kind:t,appData:i==null?void 0:i.appData}});return}this.producerCreationStatus.set(t,"INITIALIZING");const n=await Promise.race([this.sendTransport.produce(i),new Promise(a=>setTimeout(()=>a(void 0),6e3))]);if(!n)throw T.error("createProducer::transport_initialization_timed_out",{producer:{id:"FAILED_TO_CREATE",kind:t,status:"failed",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),new N(`Producer Creation timed out! ${t}`);this.producerCreationStatus.set(t,"INITIALIZED"),T.info("createProducer::initialized_producer",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),n.on("transportclose",()=>{T.info("producer::transportclose",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),this.producers.delete(t)}),n.on("trackended",()=>{T.info("producer::trackended",{producer:{id:n==null?void 0:n.id,kind:t,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),[be.MIC,be.WEBCAM].includes(t)||r()});const s=n;s.score=10,this.producers.set(t,s),await this.reconfigureWebcamLayers(),await this.reconfigureSafariScreenshareLayers()}async removeProducer(t,i=!0){const r=this.producers.get(t);!r||r.closed||(T.info("SFUHandler::remove_producer",{producer:{id:r==null?void 0:r.id,kind:t,status:"UNKNOWN",appData:r==null?void 0:r.appData},debuggingHint:`stopTrack was ${i}`}),i&&r.track.stop(),r.close(),await this.socketClient.sendMessage({type:"closeProducer",payload:{producerId:r.id}}),this.producerCreationStatus.set(t,"NOT_INITIALIZED"),this.producers.delete(t),await this.reconfigureWebcamLayers())}stopAllProducers(){Array.from(this.producers.keys()).forEach(t=>{this.removeProducer(t)})}async stopAllTransports(){if(this.sendTransport){try{this.sendTransport.close()}catch(t){T.error("stopAllTransports",{error:t})}this.sendTransport=void 0}if(this.recvTransport){try{this.recvTransport.close()}catch(t){T.error("SFUHandler::stopAllTransports::error",t)}this.recvTransport=void 0}}async reconfigureWebcamLayers(){if(!ge.hasFeature(ye.DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE))return;const t=this.producers.get(be.WEBCAM);t&&await t.setMaxSpatialLayer(this.producers.get(be.SCREENSHARE_VIDEO)?0:1)}async reconfigureSafariScreenshareLayers(){if(!ge.hasFeature(ye.SCREENSHARE_SIMULCAST)||!Ye.isSafari())return;const t=this.producers.get(be.SCREENSHARE_VIDEO);if(!t)return;const i=t.rtpSender.getParameters();i.encodings=Ine,t.rtpSender.setParameters(i)}async restartIceTillSuccess(t,i=3){let r=!1,n=0;for(;!r&&n<i;)try{T.info("SFUHandler.restartIceTillSuccess.AttemptRestart",{iceRestart:{currentAttempt:n,isSendTransport:t.direction==="send",isRecvTransport:t.direction==="recv"}}),await this.restartIce(t),r=!0}catch{n+=1}if(!r)throw new N("Failed to restart Ice")}}$r([C.trace("SFUHandler.setupTransports")],wr.prototype,"setupTransports",1);$r([C.trace("SFUHandler.loadRouter")],wr.prototype,"loadRouter",1);$r([C.trace("SFUHandler.createRecvTransport")],wr.prototype,"createRecvTransport",1);$r([C.trace("SFUHandler.createSendTransport")],wr.prototype,"createSendTransport",1);$r([C.trace("SFUHandler.restartIce")],wr.prototype,"restartIce",1);$r([C.trace("SFUHandler.createConsumer")],wr.prototype,"createConsumer",1);$r([C.trace("SFUHandler.closeConsumer")],wr.prototype,"closeConsumer",1);$r([C.trace("SFUHandler.cleanupConsumers")],wr.prototype,"cleanupConsumers",1);$r([C.trace("SFUHandler.pauseConsumer")],wr.prototype,"pauseConsumer",1);$r([C.trace("SFUHandler.resumeConsumer")],wr.prototype,"resumeConsumer",1);$r([C.trace("SFUHandler.createProducer")],wr.prototype,"createProducer",1);$r([C.trace("SFUHandler.removeProducer")],wr.prototype,"removeProducer",1);$r([C.trace("SFUHandler.stopAllProducers")],wr.prototype,"stopAllProducers",1);$r([C.trace("SFUHandler.stopAllTransports")],wr.prototype,"stopAllTransports",1);class ti extends yr.EventEmitter{emit(t,...i){return super.emit("*",t,...i),super.emit(t,...i)}on(t,i){return super.on(t,i)}addListener(t,i){return super.addListener(t,i)}off(t,i){return super.off(t,i)}once(t,i){return super.once(t,i)}prependListener(t,i){return super.prependListener(t,i)}prependOnceListener(t,i){return super.prependOnceListener(t,i)}removeListener(t,i){return super.removeListener(t,i)}removeAllListeners(t){return super.removeAllListeners(t)}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}}var Ble=Object.defineProperty,Vle=Object.getOwnPropertyDescriptor,zle=(e,t,i,r)=>{for(var n=r>1?void 0:r?Vle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Ble(t,i,n),n},ra=(e=>(e.REQUEST="REQUEST",e.ACCEPT="ACCEPT",e.REJECT="REJECT",e.END="END",e.EVENT="EVENT",e))(ra||{}),hl=(e=>(e.PENDING="PENDING",e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.ENDED="ENDED",e))(hl||{}),gh=(e=>(e.KEYBOARD="KEYBOARD",e.MOUSE="MOUSE",e))(gh||{}),kf=(e=>(e.LEFT_CLICK="click",e.RIGHT_CLICK="contextmenu",e.MOVE="mousemove",e))(kf||{}),na=(e=>(e.REQUEST_RECEIVED="REQUEST_RECEIVED",e.REQUEST_SENT="REQUEST_SENT",e.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",e.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",e.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",e.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED",e))(na||{});let fh=class extends ti{constructor(e){super(),_(this,"id"),_(this,"remotePeerId"),_(this,"hostPeerId"),_(this,"state");const{remotePeerId:t,requestId:i,hostPeerId:r,state:n}=e;this.id=i,this.remotePeerId=t,this.hostPeerId=r,this.state=n}};fh=zle([Yi(e=>{throw new N(e.message,"1400")})],fh);var Hle=Object.defineProperty,Gle=Object.getOwnPropertyDescriptor,Fr=(e,t,i,r)=>{for(var n=r>1?void 0:r?Gle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Hle(t,i,n),n},ze,zo,DC;const I_=(DC=class extends YD{constructor(e){super(),j(this,ze,void 0),_(this,"isV2AuthToken"),j(this,zo,void 0),_(this,"legacyMode"),_(this,"roomNodeUrl"),_(this,"peerDisplayName");const{roomName:t,roomNodeUrl:i,peerId:r,authToken:n,legacyMode:s,socketClient:a,meetingTitle:o}=e;this.roomName=t,this.roomNodeUrl=i,this.peerId=r,this.authToken=n,this.legacyMode=s,$(this,ze,a),this.roomJoined=!1,this.meetingTitle=o,this.isV2AuthToken=$e.isV2AuthToken,$(this,zo,new wr(a,e.device)),de.legacySwitch(s)}static async init(e){const{legacyMode:t=!0,roomName:i,peerId:r,authToken:n,meetingTitle:s,device:a}=e;let o;const c=`${e.roomNodeUrl}?roomURL=${i}&peerId=${r}&authToken=${n}&version=0.5.0`,d=new Fh({callbackHandler:async l=>{await o.handleSocketCallbacks(l)}});return d.on(ia.SOCKET_MESSAGE,async(l,u)=>{await o.handleSockets(l,u)}),d.connect(c),o=new I_({legacyMode:t,authToken:n,peerId:r,roomName:i,roomNodeUrl:c,socketClient:d,meetingTitle:s,device:a}),d.on(ia.SOCKET_DISCONNECTED,l=>{var u,f;o.isDisconnected=!0,(u=o.sfuHandler)==null||u.cleanupConsumers(),(f=o.sfuHandler)==null||f.stopAllTransports(),M.emit(I.ROOM_NODE_DISCONNECTED,l),o.roomJoined=!1,T.info("ROOM_NODE_DISCONNECTED")}),d.on(ia.SOCKET_CONNECTED,async l=>{M.emit(I.ROOM_NODE_CONNECTED,l),o.isDisconnected,o.isDisconnected=!1,T.info("ROOM_NODE_CONNECTED")}),d.on(ia.SOCKET_CONNECTION_ERROR,async({err:l})=>{var u;o.isDisconnected=!0,(u=o.sfuHandler)==null||u.cleanupConsumers(),M.emit(I.ROOM_NODE_CONNECTION_ERROR,l),o.roomJoined=!1}),o}get sfuHandler(){return g(this,zo)}reconnect(){g(this,ze).reconnect()}async setupTransports(){await this.sfuHandler.setupTransports()}async handleSocketCallbacks(e){switch(e.type){case I.NEW_CONSUMER:return this.sfuHandler.createConsumer(e.payload);default:return null}}async handleSockets(e,t){if(e){switch((!C.logExclusionList.includes(e==null?void 0:e.type)||ge.hasFeature(ye.BYPASS_LOG_EXCLUSION_LIST))&&T.info(`RoomNodeClient::handleSockets::${e==null?void 0:e.type}`),e.type){case I.CONSUMER_CLOSED:this.sfuHandler.closeConsumer(e.payload);break;case I.CONSUMER_PAUSED:this.sfuHandler.pauseConsumer(e.payload);break;case I.CONSUMER_RESUMED:this.sfuHandler.resumeConsumer(e.payload);break;case I.CONSUMER_SCORE:this.handleConsumerScore(e.payload);break;case I.PRODUCER_SCORE:this.handleProducerScore(e.payload);break;case I.PRODUCER_CLOSED:this.handleProducerClosed(e.payload);break}typeof t=="function"&&t()}}async joinRoom(e,t,i,r,n={}){var s,a,o;this.peerDisplayName=e,this.roomUUID=i;const c=await g(this,ze).sendMessage({type:"joinRoom",payload:{device:Ye.getDeviceInfo(),displayName:e,rtpCapabilities:this.sfuHandler.getRTPCapabilities(),isLegacy:this.legacyMode,audioMuted:t}});if((s=c.payload)!=null&&s.waitlisted)return M.emit(I.WAITLISTED),{roomJoined:!1};this.roomJoined=!0,(o=(a=c.payload)==null?void 0:a.waitlistedPeers)==null||o.forEach(l=>{M.emit(I.WAITLIST_PEER_ADDED,l)}),this.legacyMode=c.payload.legacyMode||this.legacyMode,r&&r!==""&&await this.changeRoomDisplayTitle(r),this.maxPreferredStreams=c.payload.maxPreferredStreams;const d=Ui();T.info("RoomNodeClient::joinRoom::pre emitasync room_joined");try{await M.emitAsync(I.ROOM_JOINED,c.payload)}catch(l){T.error("RoomNodeClient::joinRoom::emitAsync",{error:l})}return T.info("RoomNodeClient::joinRoom::post emitasync room_joined"),M.emit(I.SELF_ROOM_JOINED),ge.hasFeature(ye.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{const l=await d.getUserDetails(),u={userId:$e.isV2AuthToken?l.participant.id:l.id,peerId:this.peerId,displayName:e,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Ye.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:qm,sdkVersion:Il,metaData:{},permissions:{}};de.roomJoined(u),n!=null&&n.audio?de.audioOn():de.audioOff(),n!=null&&n.video?de.videoOn():de.videoOff()}),{roomJoined:!0}}async leaveRoom(){this.sfuHandler.stopAllProducers(),await this.sfuHandler.stopAllTransports(),g(this,ze).disconnect(),de.callEnded(),C.destruct()}handleProducerClosed({id:e}){this.sfuHandler.producers.forEach((t,i)=>{t.id===e&&this.sfuHandler.removeProducer(i)})}getConsumers(){return this.sfuHandler.consumers}static getComputedScore(e){var t,i;let r=0;try{Array.isArray(e)?e.length===1?r=e[0].score:r=e.map(({score:n})=>n!=null?n:10).filter(n=>n>0).reduce((n,s)=>n+s,0)/e.length:r=(t=e==null?void 0:e.score)!=null?t:10}catch{r=(i=e==null?void 0:e.score)!=null?i:10}return r}handleConsumerScore({id:e,score:t}){var i;const r=g(this,zo).consumers.get(e);r&&(r.score=t&&t.producerScore!==void 0&&t.producerScore>=0?t.producerScore:(i=t==null?void 0:t.score)!=null?i:10,M.emit(I.CONSUMER_SCORE_UPDATE,{id:r.id,kind:r.kind,peerId:r.peerId,score:r.score}))}handleProducerScore({id:e,score:t}){const i=[...g(this,zo).producers.values()].find(n=>n.id===e);if(!i){T.error(`RoomNodeClient::producer_not_found. ProducerId: ${e}`);return}if(!i)return;const r=I_.getComputedScore(t);r!==void 0&&r!==i.score&&(i.score=r,M.emit(I.PRODUCER_SCORE_UPDATE,{id:i.id,kind:i.kind,appData:i.appData,score:i.score}))}async shareWebcam(e){if(e===void 0)return;if(this.sfuHandler.producers.has(be.WEBCAM)){const c=this.sfuHandler.producers.get(be.WEBCAM);if(!c.closed){await c.replaceTrack({track:e}),await this.resumeWebcam();return}await this.sfuHandler.removeProducer(be.WEBCAM,!1)}let t=xne;const i=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp9")||void 0,r=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp8")||void 0,n=ge.getValue(ye.OVERRIDE_WEBCAM_SIMULCAST);if(i&&!this.legacyMode)t=One;else if(n!==void 0)try{t=JSON.parse(n)}catch{T.error("Failed to parse flagsmith simulcast")}const s=()=>this.legacyMode?r:i,a={track:e,encodings:ge.hasFeature(ye.DISABLE_WEBCAM_SIMULCAST)?void 0:t,codecOptions:{videoGoogleStartBitrate:1e3},codec:s(),appData:{screenShare:!1},stopTracks:!1},o=()=>{this.disableWebcam()};await this.sfuHandler.createProducer(be.WEBCAM,a,o)}async shareScreen(e){var t,i;const{video:r,audio:n}=e;if(r===void 0)return;let s;ge.hasFeature(ye.SCREENSHARE_SIMULCAST)&&(s=Ane);const a={track:r,appData:{screenShare:!0,supportsRemoteControl:Ye.isElectron()},encodings:s,stopTracks:!1};let o=()=>{this.disableScreenShare()};de.screenShareRequested(),await this.sfuHandler.createProducer(be.SCREENSHARE_VIDEO,a,o);const c={opusDtx:!1,opusStereo:!1,opusFec:!0,forceGoogConference:!1};if(ge.hasFeature(ye.SCREENSHARE_FORCE_GOOG_CONFERENCE)&&(c.forceGoogConference=!0),n){const d={track:n,codecOptions:c,appData:{screenShare:!0,supportsRemoteControl:Ye.isElectron()},stopTracks:!1};o=()=>{},await this.sfuHandler.createProducer(be.SCREENSHARE_AUDIO,d,o)}de.screenShareStart((i=(t=this.sfuHandler.producers.get(be.SCREENSHARE_VIDEO))==null?void 0:t.rtpParameters.encodings[0])==null?void 0:i.ssrc)}async shareMic(e){if(e===void 0)return;if(this.sfuHandler.producers.has(be.MIC)){const r=this.sfuHandler.producers.get(be.MIC);if(!r.closed){await r.replaceTrack({track:e}),await this.resumeMic();return}await this.sfuHandler.removeProducer(be.MIC,!1)}const t={track:e,codecOptions:{opusDtx:!1,opusStereo:!1,opusFec:!0,opusMaxAverageBitrate:16e3},stopTracks:!1},i=()=>{this.disableMic()};await this.sfuHandler.createProducer(be.MIC,t,i)}pauseMic(){const e=this.sfuHandler.producers.get(be.MIC);if(!e){T.error("pauseMic::could_not_find_mic_producer");return}e.pause(),g(this,ze).sendMessage({type:"pauseProducer",payload:{producerId:e.id}})}async pauseWebcam(){const e=this.sfuHandler.producers.get(be.WEBCAM);if(!e){T.error("pauseWebcam::could_not_find_webcam_producer");return}e.pause(),await g(this,ze).sendMessage({type:"pauseProducer",payload:{producerId:e.id}})}async resumeMic(){const e=this.sfuHandler.producers.get(be.MIC);if(!e){T.error("resumeMic::could_not_find_mic_producer");return}e.resume(),await g(this,ze).sendMessage({type:"resumeProducer",payload:{producerId:e.id}})}async resumeWebcam(){const e=this.sfuHandler.producers.get(be.WEBCAM);if(!e){T.error("resumeWebcam::could_not_find_webcam_producer");return}e.resume(),await g(this,ze).sendMessage({type:"resumeProducer",payload:{producerId:e.id}})}async disableWebcam(){await this.sfuHandler.removeProducer(be.WEBCAM)}async disableMic(){await this.sfuHandler.removeProducer(be.MIC)}async disableScreenShare(){var e,t;T.info("screen_sharing_stopped"),de.screenShareStop((t=(e=this.sfuHandler.producers.get(be.SCREENSHARE_VIDEO))==null?void 0:e.rtpParameters.encodings[0])==null?void 0:t.ssrc),await this.sfuHandler.removeProducer(be.SCREENSHARE_VIDEO),await this.sfuHandler.removeProducer(be.SCREENSHARE_AUDIO)}async resetVideoProducers(e,t){e&&(await this.sfuHandler.removeProducer(be.WEBCAM,!1),this.shareWebcam(e)),t&&(await this.sfuHandler.removeProducer(be.SCREENSHARE_VIDEO,!1),this.shareScreen({video:t}))}async getRoomState(){return g(this,ze).sendMessage({type:"getRoomState"})}async changeRoomDisplayTitle(e){await g(this,ze).sendMessage({type:"changeDisplayTitle",payload:{displayTitle:e}})}async sendMessage(e){return g(this,ze).sendMessage(e)}async broadcastMessage(e,t){const i={payload:t,type:e};return g(this,ze).sendMessage({type:"roomMessage",payload:i})}async sendChatMessage(e){await g(this,ze).sendMessage({type:"chatMessage",payload:e})}async getChatMessages(){return g(this,ze).sendMessage({type:"getChatMessages"})}async pinChatMessage(e){return g(this,ze).sendMessage({type:"pinChatMessage",payload:e})}async unpinChatMessage(e){return g(this,ze).sendMessage({type:"unpinChatMessage",payload:e})}async getPolls(){return g(this,ze).sendMessage({type:"getPolls"})}async newPoll(e){await g(this,ze).sendMessage({type:"newPoll",payload:e})}async votePoll(e){await g(this,ze).sendMessage({type:"votePoll",payload:e})}async acceptWaitingRequest(e){await g(this,ze).sendMessage({type:"acceptWaitingRequest",payload:{id:e}})}async rejectWaitingRequest(e){await g(this,ze).sendMessage({type:"rejectWaitingRequest",payload:{id:e}})}async muteAll(e){await g(this,ze).sendMessage({type:"muteAllNew",payload:{allowUnMute:e}})}async muteAllVideo(){await g(this,ze).sendMessage({type:"muteAllVideo"})}async pinPeer(e){return g(this,ze).sendMessage({type:"pinPeer",payload:{id:e}})}async unpinPeer(e){return g(this,ze).sendMessage({type:"unpinPeer",payload:{id:e}})}async disableAudio(e){await g(this,ze).sendMessage({type:"disableAudioPeerNew",payload:{id:e}})}async disableVideo(e){await g(this,ze).sendMessage({type:"disableVideoPeer",payload:{id:e}})}async kickAll(){await g(this,ze).sendMessage({type:"kickAll"})}async kick(e){await g(this,ze).sendMessage({type:"kick",payload:{id:e}})}async getPage(e){return g(this,ze).sendMessage({type:"getPage",payload:{pageNum:e}})}async muteSelf(){this.pauseMic(),await g(this,ze).sendMessage({type:"muteSelf"})}async unmuteSelf(){await this.resumeMic(),await g(this,ze).sendMessage({type:"unmuteSelf"})}async addRoomPlugin(e){return g(this,ze).sendMessage({type:"addPlugin",payload:e})}async removeRoomPlugin(e){return g(this,ze).sendMessage({type:"removePlugin",payload:e})}async remoteControlMessage(e){return g(this,ze).sendMessage({type:"message",payload:e})}async requestRemoteControl(e){return this.remoteControlMessage({peerId:e.hostPeerId,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:ra.REQUEST})}async acceptRemoteControl(e){return this.remoteControlMessage({peerId:e.remotePeerId,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:ra.ACCEPT})}async terminateRemoteControl(e,t){return this.remoteControlMessage({peerId:e,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:ra.END})}async sendEventRemoteControl(e,t,i){return this.remoteControlMessage({peerId:e,remoteRequestId:t,remoteEvent:i,hostPeerId:this.peerId,remotePeerId:e,remoteRequestType:ra.EVENT})}async assertSpotlight(e,t){return g(this,ze).sendMessage({type:e,payload:{...t,roomMessageType:"spotlight"}})}async assertSpotlightToRoom(e){return this.assertSpotlight("roomMessage",e)}async assertSpotlightToPeer(e){return this.assertSpotlight("message",e)}async requestToJoinStage(e){await this.sendMessage({type:"requestToJoinStage",payload:e})}async withdrawRequestToJoinStage(){await this.sendMessage({type:"withdrawRequestToJoinStage"})}async acceptAllRequestToJoinStage(e){await this.sendMessage({type:"acceptAllRequestToJoinStage",payload:e.map(t=>({...t,type:YS.REQUESTED_BY_MODERATOR}))})}async removePeerFromStage(e,t){await this.sendMessage({type:"removePeerFromStage",payload:{id:e,type:t}})}stopAllProducers(){g(this,zo).stopAllProducers()}async startPresenting(){await this.sendMessage({type:"startPresenting"})}async stopPresenting(){this.stopAllProducers(),await this.sendMessage({type:"stopPresenting"})}async rejectRequestToJoinStage(e){await this.sendMessage({type:"rejectRequestToJoinStage",payload:{id:e}})}},ze=new WeakMap,zo=new WeakMap,DC);let ot=I_;Fr([C.trace("RoomNodeClient.reconnect")],ot.prototype,"reconnect",1);Fr([C.trace("RoomNodeClient.joinRoom")],ot.prototype,"joinRoom",1);Fr([C.trace("RoomNodeClient.leaveRoom")],ot.prototype,"leaveRoom",1);Fr([C.trace("RoomNodeClient.shareWebcam")],ot.prototype,"shareWebcam",1);Fr([C.trace("RoomNodeClient.shareScreen")],ot.prototype,"shareScreen",1);Fr([C.trace("RoomNodeClient.shareMic")],ot.prototype,"shareMic",1);Fr([C.trace("RoomNodeClient.pauseMic")],ot.prototype,"pauseMic",1);Fr([C.trace("RoomNodeClient.pauseWebcam")],ot.prototype,"pauseWebcam",1);Fr([C.trace("RoomNodeClient.resumeMic")],ot.prototype,"resumeMic",1);Fr([C.trace("RoomNodeClient.resumeWebcam")],ot.prototype,"resumeWebcam",1);Fr([C.trace("RoomNodeClient.disableWebcam")],ot.prototype,"disableWebcam",1);Fr([C.trace("RoomNodeClient.disableMic")],ot.prototype,"disableMic",1);Fr([C.trace("RoomNodeClient.disableScreenShare")],ot.prototype,"disableScreenShare",1);Fr([C.trace("RoomNodeClient.resetVideoProducers")],ot.prototype,"resetVideoProducers",1);let Xs;async function Wle(e){if(Xs)throw new Error("Room Node Client already setup");Xs=await Me.init(e)}async function tL(e){if(Xs!=null&&Xs.roomJoined)throw new Error("Room Node Client already setup");Xs&&(Xs=void 0),Xs=await ot.init(e)}async function qle(){Xs=void 0}function hi(){return Xs}function yc(e){var t,i,r,n,s,a,o,c,d,l,u,f,y;return e?{media:{audio:{enabled:e.audioEnabled,trackId:(t=e.audioTrack)==null?void 0:t.id,permission:"mediaPermissions"in e?(i=e.mediaPermissions)==null?void 0:i.audio:null},video:{enabled:e.videoEnabled,trackId:(r=e.videoTrack)==null?void 0:r.id,permission:"mediaPermissions"in e?(n=e.mediaPermissions)==null?void 0:n.video:null},screenshare:{enabled:e.screenShareEnabled,permission:"mediaPermissions"in e?(s=e.mediaPermissions)==null?void 0:s.screenshare:null,audio:{enabled:(o=(a=e.screenShareTracks)==null?void 0:a.audio)==null?void 0:o.enabled,trackId:(d=(c=e.screenShareTracks)==null?void 0:c.audio)==null?void 0:d.id},video:{enabled:(u=(l=e.screenShareTracks)==null?void 0:l.video)==null?void 0:u.enabled,trackId:(y=(f=e.screenShareTracks)==null?void 0:f.video)==null?void 0:y.id}}}}:{}}const Jle=async(e,t)=>{if(!(e!=null&&e.length))return t;const i=new AudioContext,r=await Promise.all(e==null?void 0:e.map(a=>a(i))),n=i.createMediaStreamSource(new MediaStream([t])),s=i.createMediaStreamDestination();try{let a=n;for(let o=0;o<r.length;o+=1)a.connect(r[o]),a=r[o];a.connect(s)}catch(a){return T.error("getTransformedAudioTrack::middleware_execution_failed",{error:a}),t}return s.stream.getAudioTracks()[0]};var Kle=Object.defineProperty,Yle=Object.getOwnPropertyDescriptor,Qle=(e,t,i,r)=>{for(var n=r>1?void 0:r?Yle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Kle(t,i,n),n};let O_=class extends ti{constructor(e,t){super(),_(this,"constructorName",this.constructor.name),_(this,"userSelectedDevice"),_(this,"mediaInterface"),_(this,"_mediaTrack"),_(this,"transformedMediaTrack"),_(this,"middlewares",[]),_(this,"currentDevice"),this.mediaInterface=e,t&&this.setMediaTrack(t),this.userSelectedDevice=void 0,this.onTrackEnded=this.onTrackEnded.bind(this),this.onTrackMuted=this.onTrackMuted.bind(this)}disableTrack(){var e,t;this.removeMediaTrackListeners(),(e=this._mediaTrack)==null||e.stop(),this._mediaTrack=void 0,(t=this.transformedMediaTrack)==null||t.stop(),this.transformedMediaTrack=void 0}get mediaTrack(){return this._mediaTrack}async setMediaTrack(e){const t=i=>{T.error(`${this.constructorName}.setMediaTrack.error`,{error:i})};try{this.disableTrack()}catch(i){t(i)}this._mediaTrack=e,await this.setTransformedTrack();try{this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(i){t(i)}}get trackEnabled(){return!!this.mediaTrack&&this.mediaTrack.readyState==="live"&&this.mediaTrack.enabled}muteTrack(){if(!this.mediaTrack){T.warn("BaseMediaHandler.muteTrack Tried muting with no track present");return}this.transformedMediaTrack&&(this.transformedMediaTrack.enabled=!1),this.mediaTrack.enabled=!1}async unmuteTrack(){try{this.mediaTrack?this.mediaTrack.enabled=!0:await this.enableTrack(!1)}catch(e){throw T.error(`${this.constructorName}.unmuteTrack.error`,{error:e}),this.disableTrack(),new N("Failed to unmute track")}}async setCurrentDevice(){var e;if(!this.mediaTrack){this.currentDevice=void 0;return}((e=this.currentDevice)==null?void 0:e.deviceId)!==this.mediaTrack.getSettings().deviceId&&(this.currentDevice=await this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId))}async addMiddleware(e){if(Ye.isSafari())return{success:!1,message:"Middlewares are not yet supported in Safari."};if(this.middlewares.includes(e))return{success:!1,message:"This middleware has been applied, already. Skipping."};try{return this.trackEnabled&&await this.setTransformedTrack(),this.middlewares.push(e),{success:!0,message:"Successfully added the middleware."}}catch(t){return T.error("While adding middleware",{error:t}),{success:!1,message:t==null?void 0:t.message}}}async removeMiddleware(e){const t=this.middlewares.indexOf(e,0);if(t>-1)try{return await this.setTransformedTrack(),this.middlewares.splice(t,1),{success:!0,message:"Successfully removed the middleware."}}catch(i){return T.error("While removing middleware",{error:i}),{success:!1,message:i==null?void 0:i.message}}return{success:!1,message:"No such middleware was found. Skipping."}}addMediaTrackListeners(){var e,t,i;this.mediaTrack&&(T.info(`${this.constructorName}.addMediaTrackListeners for deviceId ${(t=(e=this.mediaTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),this.mediaTrack.addEventListener("ended",this.onTrackEnded),this.mediaTrack.addEventListener("mute",this.onTrackMuted))}removeMediaTrackListeners(){var e,t,i;this.mediaTrack&&(T.info(`${this.constructorName}.removeMediaTrackListeners for deviceId ${(t=(e=this.mediaTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),T.info(`${this.constructorName}.removeMediaTrackListeners`),this.mediaTrack.removeEventListener("ended",this.onTrackEnded),this.mediaTrack.removeEventListener("mute",this.onTrackMuted))}};O_=Qle([Yi(e=>{throw new N(e.message,"1600")})],O_);const iL=O_;var Zle=Object.defineProperty,Xle=Object.getOwnPropertyDescriptor,rL=(e,t,i,r)=>{for(var n=r>1?void 0:r?Xle(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Zle(t,i,n),n};class nE extends iL{async setDevice(t){if(!t)throw T.warn("AudioMediaHandler.setDevice No device received"),new N("No device received!","1603");if(t.kind!=="audioinput")throw T.warn("AudioMediaHandler.setDevice Received non audio device"),new N("Non audio device received while setting device!","1603");try{const i=this.trackEnabled;this.userSelectedDevice=t.deviceId,await this.setMediaTrack(await this.mediaInterface.getAudioTrack(!i,t.deviceId))}catch(i){throw T.error("AudioMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new N(i.message,"1604")}}async enableTrack(t){if(this.trackEnabled){T.warn("AudioMediaHandler.enableTrack Track already enabled!");return}const i=await this.mediaInterface.getAudioTrack(t,this.userSelectedDevice);await this.setMediaTrack(i)}async setTransformedTrack(){var t;if(!((t=this.middlewares)!=null&&t.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await Jle(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){T.error("AudioMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async onTrackEnded(){T.info("AudioMediaHandler.TrackEnded"),this.emit("trackEnded");const t=this.mediaTrack.enabled;this.disableTrack(),await this.enableTrack(!t),await this.setTransformedTrack(),this.emit("trackChanged")}onTrackMuted(){T.info("AudioMediaHandler.TrackMuted"),this.emit("trackMuted")}}rL([C.trace("AudioMediaHandler.setTransformedTrack")],nE.prototype,"setTransformedTrack",1);rL([C.trace("AudioMediaHandler.onTrackEnded")],nE.prototype,"onTrackEnded",1);class Ic extends Error{constructor(t,i,r){super(i),_(this,"constraints"),_(this,"name"),this.name=t,this.constraints=r}}function ny(e,t){if(Ye.isChromiumBased()){if(e==="NotAllowedError")return t.indexOf("by system")>0?"SYSTEM_DENIED":"CANCELED";if(e==="NotReadableError")return"COULD_NOT_START"}else if(Ye.isSafari()){if(e==="NotAllowedError")return"DENIED"}else if(Ye.isFirefox()){if(e==="NotFoundError"||e==="NotReadableError")return"SYSTEM_DENIED";if(e==="NotAllowedError")return"DENIED";if(e==="AbortError")return"COULD_NOT_START"}return"COULD_NOT_START"}function h1(e){return e===2 .toString()?io.DENIED:e===4 .toString()?io.SYS_DENIED:e===1 .toString()?io.ACCEPTED:io.FAILED}class eue{constructor(){_(this,"permissions"),this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"}}async getAudioInputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="audioinput")}async getVideoInputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="videoinput")}async getAudioOutputDevices(){return(await this.getAvailableDevices()).filter(t=>t.kind==="audiooutput")}}var tue=Object.defineProperty,iue=Object.getOwnPropertyDescriptor,rue=(e,t,i,r)=>{for(var n=r>1?void 0:r?iue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&tue(t,i,n),n},Ca,LC;let M_=(LC=class extends eue{constructor(e){super(),j(this,Ca,void 0),$(this,Ca,new FD(e))}handlePermissionErrors(e,t){const i=ny(t.name,t.message);this.permissions[e]=i,M.emit(I.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:e})}async getAudioAndVideoTrack(){const e={audio:g(this,Ca).getAudioConstraints().audio,video:g(this,Ca).getVideoConstraints().video};try{const t=await navigator.mediaDevices.getUserMedia(e),i=t.getAudioTracks()[0],r=t.getVideoTracks()[0];return this.permissions.audio="ACCEPTED",this.permissions.video="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),{audioTrack:i,videoTrack:r}}catch(t){if(t.name==="NotAllowedError"){const i=await this.getAudioTrack(!1),r=await this.getVideoTrack();return{audioTrack:i,videoTrack:r}}throw T.error("WebMediaInterface.getAudioAndVideoTrack",{error:t}),new N("Couldnt fetch audio and video track")}}async getAudioTrack(e,t){const i=g(this,Ca).getAudioConstraints(t);try{const r=(await navigator.mediaDevices.getUserMedia(i)).getAudioTracks()[0];return r.enabled=!e,this.permissions.audio="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),r}catch(r){throw this.handlePermissionErrors("audio",new Ic(r.name,r.message,i)),new N(r.message,"1601")}}async getScreenShareTracks(){const e=g(this,Ca).getScreenShareConstraints();try{const t=await navigator.mediaDevices.getDisplayMedia(e);return this.permissions.screenshare="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"}),{audioTrack:t.getAudioTracks()[0],videoTrack:t.getVideoTracks()[0]}}catch(t){throw this.handlePermissionErrors("screenshare",new Ic(t.name,t.message,e)),T.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks",{error:t}),new N("Couldnt fetch screen share tracks")}}async getVideoTrack(e){const t=g(this,Ca).getVideoConstraints(e);try{const i=(await navigator.mediaDevices.getUserMedia(t)).getVideoTracks()[0];return this.permissions.video="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"audio"}),i}catch(i){throw this.handlePermissionErrors("video",new Ic(i.name,i.message,t)),T.error("WebMediaInterface.getVideoTrack Error while fetching video track",{error:i}),new N("Couldnt fetch video track")}}async getAvailableDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(e){throw T.error("enumerate_devices_failed",{error:e}),new N("Failed to get available devices")}}async getAvailableDevicesByKind(e){try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:t})=>e===t)}catch(t){throw T.error("enumerate_devices_failed",{error:t}),new N("Failed to get available devices by kind")}}async getDevice(e){try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.deviceId===e)[0]}catch(t){throw T.error("enumerate_devices_failed",{error:t}),new N("Failed to get device")}}},Ca=new WeakMap,LC);M_=rue([Yi(e=>{throw new N(e.message,"1600")})],M_);const nL=M_;var rp;class nue{constructor(t){j(this,rp,void 0),_(this,"currentDevice"),$(this,rp,t)}async setupSpeaker(t){var i;if(!(g(this,rp)instanceof nL))return;let r=t;if(t||([r]=await g(this,rp).getAvailableDevicesByKind("audiooutput")),!r)throw new N("No speaker found");((i=this.currentDevice)==null?void 0:i.deviceId)!==r.deviceId&&(this.currentDevice!=null||(this.currentDevice=r),document.querySelectorAll("audio").forEach(async n=>{if(typeof n.sinkId<"u"&&this.currentDevice.deviceId&&n.sinkId!==this.currentDevice.deviceId)try{await n.setSinkId(this.currentDevice.deviceId)}catch{}}))}}rp=new WeakMap;class sue extends ti{constructor(t){super(),_(this,"mediaInterface"),_(this,"audioMediaTrack"),_(this,"videoMediaTrack"),this.mediaInterface=t}get trackEnabled(){return!!this.videoMediaTrack}async enableScreenShare(){var t,i;const{audioTrack:r,videoTrack:n}=await this.mediaInterface.getScreenShareTracks();this.audioMediaTrack=r,this.videoMediaTrack=n,this.addMediaTrackListeners(),((i=(t=this.mediaInterface)==null?void 0:t.permissions)==null?void 0:i.screenshare)!=="ACCEPTED"&&this.mediaInterface.permissions&&(this.mediaInterface.permissions.screenshare="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.mediaInterface.permissions.screenshare,kind:"screenshare"}))}disableScreenShare(){var t,i;this.removeMediaTrackListeners(),(t=this.audioMediaTrack)==null||t.stop(),(i=this.videoMediaTrack)==null||i.stop(),this.videoMediaTrack=void 0,this.audioMediaTrack=void 0}addMediaTrackListeners(){var t;(t=this.videoMediaTrack)==null||t.addEventListener("ended",this.onTrackEnded.bind(this))}removeMediaTrackListeners(){var t;(t=this.videoMediaTrack)==null||t.removeEventListener("ended",this.onTrackEnded)}onTrackEnded(){this.emit("trackEnded")}}var Cd;class aue{constructor(){j(this,Cd,void 0)}terminateMiddlewareWebWorker(){if(g(this,Cd))try{M3(g(this,Cd)),$(this,Cd,void 0)}catch{T.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(t,i){if(!(t!=null&&t.length))return i;const r=await Promise.all(t==null?void 0:t.map(d=>d())),n=new MediaStream;n.addTrack(i);const s=document.createElement("canvas"),a=s.getContext("2d"),o=document.createElement("video");o.srcObject=n,o.autoplay=!0,this.terminateMiddlewareWebWorker();const c=async()=>{if(i.enabled===!1||i.readyState==="ended"){this.terminateMiddlewareWebWorker(),o.remove(),s.remove();return}try{a.drawImage(o,0,0);for(let d=0;d<r.length;d+=1)await r[d](s,a)}catch(d){T.error("getTransformedVideoTrack::middleware_execution_failed",{error:d})}};try{o.play()}catch{}return o.addEventListener("play",()=>{s.width=o.width||i.getSettings().width,s.height=o.width||i.getSettings().height,$(this,Cd,D3(c,50))},!1),s.captureStream().getVideoTracks()[0]}}Cd=new WeakMap;var oue=Object.defineProperty,cue=Object.getOwnPropertyDescriptor,sL=(e,t,i,r)=>{for(var n=r>1?void 0:r?cue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&oue(t,i,n),n},np;class sE extends iL{constructor(t,i){super(t,i),j(this,np,void 0),$(this,np,new aue)}async setDevice(t){if(!t)throw T.warn("VideoMediaHandler.setDevice No device received"),new N("No device received!");if(t.kind!=="videoinput")throw T.warn("VideoMediaHandler.setDevice Received non video device",{devices:[t]}),new N("Non video device received while setting video device!");if(this.userSelectedDevice=t.deviceId,!(this.mediaTrack&&this.mediaTrack.enabled)){T.warn("VideoMediaHandler.setDevice Tried switching device with video disabled",{devices:[t]}),this.currentDevice=t;return}try{await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}catch(i){throw T.error("VideoMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new N("Failed to change device")}}async enableTrack(){if(this.trackEnabled){T.warn("VideoMediaHandler.enableTrack Track already enabled!");return}await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}async setTransformedTrack(){var t;if(!((t=this.middlewares)!=null&&t.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await g(this,np).getTransformedVideoTrack(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){T.error("VideoMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}terminateMiddlewareWebWorker(){g(this,np).terminateMiddlewareWebWorker()}async onTrackEnded(){T.info("VideoMediaHandler.TrackEnded"),this.disableTrack(),this.emit("trackEnded")}onTrackMuted(){T.info("VideoMediaHandler.TrackMuted"),this.emit("trackMuted")}}np=new WeakMap;sL([C.trace("VideoMediaHandler.setTransformedTrack")],sE.prototype,"setTransformedTrack",1);sL([C.trace("VideoMediaHandler.onTrackEnded")],sE.prototype,"onTrackEnded",1);var due=Object.defineProperty,lue=Object.getOwnPropertyDescriptor,Ns=(e,t,i,r)=>{for(var n=r>1?void 0:r?lue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&due(t,i,n),n},Xi,er,Hi,ec,fs;class rs extends ti{constructor(t){super(),j(this,Xi,void 0),j(this,er,void 0),j(this,Hi,void 0),j(this,ec,void 0),j(this,fs,void 0),$(this,Xi,new nL(t)),$(this,er,new nE(g(this,Xi))),$(this,Hi,new sE(g(this,Xi))),$(this,fs,new sue(g(this,Xi))),$(this,ec,new nue(g(this,Xi))),g(this,er).on("trackMuted",this.onAudioTrackMuted.bind(this)),g(this,er).on("trackChanged",this.onAudioTrackChanged.bind(this)),g(this,Hi).on("trackChanged",this.onVideoTrackChanged.bind(this)),g(this,Hi).on("trackEnded",this.onVideoTrackEnded.bind(this)),g(this,fs).on("trackEnded",this.onScreenShareEnded.bind(this))}async repopulateAvailableDevices(){return!0}async setupStreams({audio:t,video:i}){let r,n;if(t&&i)try{const s=await g(this,Xi).getAudioAndVideoTrack();r=s.audioTrack,n=s.videoTrack}catch(s){T.error("LocalMediaHandler::init::Failed to get audio video tracks",{error:s})}if(!r&&t)try{r=await g(this,Xi).getAudioTrack(!1)}catch(s){T.error("LocalMediaHandler::init::Failed to get audio track",{error:s})}if(!n&&i)try{n=await g(this,Xi).getVideoTrack()}catch(s){T.error("LocalMediaHandler::init::Failed to get video track",{error:s})}await g(this,er).setMediaTrack(r),await g(this,Hi).setMediaTrack(n);try{await g(this,ec).setupSpeaker()}catch{}}getCurrentDevices(){return{audio:g(this,er).currentDevice,video:g(this,Hi).currentDevice,speaker:g(this,ec).currentDevice}}get permissions(){return g(this,Xi).permissions}getAllDevices(){return g(this,Xi).getAvailableDevices()}getDeviceById(t,i){return g(this,Xi).getDevice(t)}onAudioTrackMuted(){this.emit("AUDIO_TRACK_SILENT")}onAudioTrackChanged(){this.emit("AUDIO_TRACK_CHANGE")}get rawAudioTrack(){return g(this,er).mediaTrack}get audioTrack(){return g(this,er).transformedMediaTrack}get audioEnabled(){return g(this,er).trackEnabled}async enableAudio(){await g(this,er).unmuteTrack()}disableAudio(){g(this,er).muteTrack()}getAudioDevices(){return g(this,Xi).getAudioInputDevices()}async setAudioDevice(t){await g(this,er).setDevice(t),this.emit("AUDIO_TRACK_CHANGE")}setupSpeaker(){return g(this,ec).setupSpeaker()}setSpeakerDevice(t){return g(this,ec).setupSpeaker(t)}onVideoTrackChanged(){this.emit("VIDEO_TRACK_CHANGE")}onVideoTrackEnded(){this.emit("VIDEO_TRACK_CHANGE")}get rawVideoTrack(){return g(this,Hi).mediaTrack}get videoTrack(){return g(this,Hi).transformedMediaTrack}get videoEnabled(){return g(this,Hi).trackEnabled}async enableVideo(){await g(this,Hi).unmuteTrack()}disableVideo(){g(this,Hi).disableTrack()}getVideoDevices(){return g(this,Xi).getVideoInputDevices()}async setVideoDevice(t){await g(this,Hi).setDevice(t),this.emit("VIDEO_TRACK_CHANGE")}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}get screenShareTracks(){return{audio:g(this,fs).audioMediaTrack,video:g(this,fs).videoMediaTrack}}get screenShareEnabled(){return g(this,fs).trackEnabled}async enableScreenShare(){await g(this,fs).enableScreenShare()}async disableScreenShare(){g(this,fs).disableScreenShare()}getSpeakerDevices(){return g(this,Xi).getAudioOutputDevices()}addAudioMiddleware(t){return g(this,er).addMiddleware(t)}removeAudioMiddleware(t){return g(this,er).removeMiddleware(t)}addVideoMiddleware(t){return g(this,Hi).addMiddleware(t)}removeVideoMiddleware(t){return g(this,Hi).removeMiddleware(t)}destruct(){g(this,er).disableTrack(),g(this,Hi).disableTrack(),g(this,Hi).terminateMiddlewareWebWorker(),g(this,fs).disableScreenShare()}removeAllTracks(){this.destruct()}async removeDocumentEventListeners(){}}Xi=new WeakMap,er=new WeakMap,Hi=new WeakMap,ec=new WeakMap,fs=new WeakMap;Ns([C.trace("MediaHandler.setupStreams")],rs.prototype,"setupStreams",1);Ns([C.trace("MediaHandler.enableAudio")],rs.prototype,"enableAudio",1);Ns([C.trace("MediaHandler.disableAudio")],rs.prototype,"disableAudio",1);Ns([C.trace("MediaHandler.setAudioDevice")],rs.prototype,"setAudioDevice",1);Ns([C.trace("MediaHandler.enableVideo")],rs.prototype,"enableVideo",1);Ns([C.trace("MediaHandler.disableVideo")],rs.prototype,"disableVideo",1);Ns([C.trace("MediaHandler.setVideoDevice")],rs.prototype,"setVideoDevice",1);Ns([C.trace("MediaHandler.enableScreenShare")],rs.prototype,"enableScreenShare",1);Ns([C.trace("MediaHandler.disableScreenShare")],rs.prototype,"disableScreenShare",1);Ns([C.trace("MediaHandler.destruct")],rs.prototype,"destruct",1);class uue extends Error{constructor(t,i){super(t),_(this,"code"),this.code=i}}const pue={lowVolumeThreshold:-40,clipThreshold:1,silentThreshold:1/1987,delay:500,media:"audio"};var Km,el,D_,aL,Pf,g1;const oL=class{constructor(e){j(this,D_),j(this,Pf),_(this,"analyser"),_(this,"silentThreshold"),_(this,"lowVolumeThreshold"),_(this,"clipThreshold"),_(this,"delay"),_(this,"audioContext"),_(this,"audioSource"),_(this,"metadata",{}),_(this,"analysing"),_(this,"track"),j(this,Km,void 0),j(this,el,void 0);const{lowVolumeThreshold:t,silentThreshold:i,clipThreshold:r,delay:n,media:s}={...pue,...e};this.lowVolumeThreshold=t,this.silentThreshold=i,this.clipThreshold=r,this.delay=n,this.analysing=!1,$(this,el,s)}setTrack(e){if(!e)return;this.track=e.clone();const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.analyser=this.audioContext.createAnalyser(),g(this,el)==="screenshare"){M.emit(I.SCREENSHARE_AUDIO_TRACK_CREATED);return}M.emit(I.AUDIO_TRACK_CREATED)}getTrackMetadata(){if(!this.track)return null;switch(this.metadata.label=this.track.label,this.metadata.channelCountMode=this.analyser.channelCountMode,this.metadata.channelCount=this.analyser.channelCount,this.metadata.channelInterpretation=this.analyser.channelInterpretation,this.metadata.outputs=this.analyser.numberOfOutputs,this.analyser.numberOfOutputs){case 1:this.metadata.channelType="MONO";break;case 2:this.metadata.channelType="STEREO";break;case 4:this.metadata.channelType="QUAD";break}return this.metadata}async startTrackAnalysis(){if(!this.track||this.analysing)return!1;try{return await this.audioContext.resume(),await li(this,D_,aL).call(this),this.analysing=!0,!0}catch(e){return T.error(e),!1}}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(g(this,Km)))}cleanup(){var e,t,i,r,n;if(this.stopTrackAnalysis(),(e=this.analyser)==null||e.disconnect(),(t=this.audioSource)==null||t.disconnect(this.analyser),(i=this.audioSource)==null||i.disconnect(),(r=this.audioContext)==null||r.close(),this.audioContext=void 0,this.analyser=void 0,this.audioSource=void 0,(n=this.track)==null||n.stop(),this.track=void 0,g(this,el)==="screenshare"){M.emit(I.SCREENSHARE_AUDIO_TRACK_CLOSED);return}M.emit(I.AUDIO_TRACK_CLOSED)}static dbFS(e){const t=20*(Math.log(e)/Math.log(10));return Math.round(t*10)/10}};let cL=oL;Km=new WeakMap,el=new WeakMap,D_=new WeakSet,aL=async function(){try{const e=new MediaStream;e.addTrack(this.track),this.audioSource=this.audioContext.createMediaStreamSource(e),this.audioSource.connect(this.analyser),window.requestAnimationFrame(li(this,Pf,g1).bind(this))}catch(e){T.error(e)}},Pf=new WeakSet,g1=function(){const e=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData(e);let t=0;for(const s of e)t+=s*s;const i=Math.sqrt(t/e.length),r=oL.dbFS(i),n={volume:i,lowVolume:r<this.lowVolumeThreshold,silence:i<this.silentThreshold,clip:i>this.clipThreshold,timestamp:new Date().getTime()};g(this,el)==="screenshare"?M.emit(I.SCREENSHARE_AUDIO_TRACK_ANALYSIS,n):M.emit(I.AUDIO_TRACK_ANALYSIS,n),$(this,Km,setTimeout(()=>{window.requestAnimationFrame(li(this,Pf,g1).bind(this))},this.delay))};const Ws=new cL,Cf=new cL({media:"screenshare"}),hue={nonBlackPixelLumaThreshold:20,identicalFrameSsimThreshold:.985,media:"video"};var Ym,Tc,Rd,Qm,L_,N_,NC,U_,UC,f1,jC,Dg,m1,v1,$C;const sp=class{constructor(e){j(this,Qm),j(this,N_),j(this,U_),_(this,"metadata",{}),_(this,"video"),_(this,"canvas"),_(this,"nonBlackPixelLumaThreshold"),_(this,"identicalFrameSsimThreshold"),_(this,"previousFrame",new Uint8ClampedArray),j(this,Ym,void 0),_(this,"track"),_(this,"analysing"),j(this,Tc,void 0),j(this,Rd,void 0),_(this,"cloned",!1);const{nonBlackPixelLumaThreshold:t,identicalFrameSsimThreshold:i,media:r}={...hue,...e};this.nonBlackPixelLumaThreshold=t,this.identicalFrameSsimThreshold=i,this.analysing=!1,$(this,Tc,r)}setTrack(e,t){if(this.cloned=!1,this.track=e,this.metadata.resolution=t,g(this,Tc)==="screenshare"){M.emit(I.SCREENSHARE_VIDEO_TRACK_CREATED);return}M.emit(I.VIDEO_TRACK_CREATED)}getTrackMetadata(){return this.track?(this.metadata.label=this.track.label,this.metadata):null}async startTrackAnalysis(){var e;return!this.track||this.analysing?!1:(!this.video&&!((e=this.video)!=null&&e.src)&&($(this,Rd,new MediaStream),g(this,Rd).addTrack(this.track),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),[this.video.width,this.video.height]=this.metadata.resolution,this.video.srcObject=g(this,Rd)),window.requestAnimationFrame(li(this,Qm,L_).bind(this)),this.analysing=!0,!0)}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(g(this,Ym)))}setClonedTrack(e,t){var i;this.cloned=t,this.track=e;const{height:r,width:n}=(i=this.track)==null?void 0:i.getConstraints();this.metadata.resolution=[n,r]}resetClonedTrack(e){if(e){this.cloned=!1,this.track=e;const{height:t,width:i}=this.track.getConstraints();this.metadata.resolution=[i,t]}this.cleanup()}cleanup(){var e;if(this.stopTrackAnalysis(),this.cloned&&((e=this.track)==null||e.stop()),this.track=void 0,$(this,Rd,void 0),this.video&&(this.video.srcObject=void 0,this.video=void 0),this.canvas=void 0,this.previousFrame=new Uint8ClampedArray,g(this,Tc)==="screenshare"){M.emit(I.SCREENSHARE_VIDEO_TRACK_CLOSED);return}M.emit(I.VIDEO_TRACK_CLOSED)}};let Np=sp;Ym=new WeakMap,Tc=new WeakMap,Rd=new WeakMap,Qm=new WeakSet,L_=function(){var e;try{const t=li(this,N_,NC).call(this),i=li(this,U_,UC).call(this,t.data,t.data.length),r=li(e=sp,f1,jC).call(e,this.previousFrame,t.data);this.previousFrame=t.data;const n={isBlackFrame:i,videoScore:r,isFrozenFrame:r>this.identicalFrameSsimThreshold,timestamp:new Date().getTime()};g(this,Tc)==="screenshare"?M.emit(I.SCREENSHARE_VIDEO_TRACK_ANALYSIS,n):M.emit(I.VIDEO_TRACK_ANALYSIS,n),$(this,Ym,setTimeout(()=>{this.track&&window.requestAnimationFrame(li(this,Qm,L_).bind(this))},3e3))}catch{this.stopTrackAnalysis(),g(this,Tc)==="screenshare"?M.emit(I.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR):M.emit(I.VIDEO_TRACK_ANALYSIS_ERROR)}},N_=new WeakSet,NC=function(){var e,t;this.canvas.width=(e=this.video)==null?void 0:e.width,this.canvas.height=(t=this.video)==null?void 0:t.height;const i=this.canvas.getContext("2d");return i.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),i.getImageData(0,0,this.canvas.width,this.canvas.height)},U_=new WeakSet,UC=function(e,t){const i=this.nonBlackPixelLumaThreshold;let r=0;for(let n=4;n<t;n+=4)if(r+=.21*e[n]+.72*e[n+1]+.07*e[n+2],r>i*(n/4))return!1;return!0},f1=new WeakSet,jC=function(e,t){var i,r,n;if(e.length!==t.length)return 0;const s=.01,a=.03,o=255,c=s*o*(s*o),d=a*o*(a*o),l=d/2,u=li(i=sp,Dg,m1).call(i,e),f=u.mean,y=u.variance,b=Math.sqrt(y),k=li(r=sp,Dg,m1).call(r,t),P=k.mean,w=k.variance,E=Math.sqrt(w),R=li(n=sp,v1,$C).call(n,e,t,f,P),D=(2*f*P+c)/(f*f+P*P+c),V=(R+l)/(b*E+l),B=(2*b*E+d)/(y+w+d);return D*B*V},Dg=new WeakSet,m1=function(e){let t=0,i;for(i=0;i<e.length;i++)t+=e[i];const r=t/(e.length-1);let n=0;for(i=1;i<e.length;i++)n=e[i-1]-r,t+=e[i]+n*n;return{mean:r,variance:t/e.length}},v1=new WeakSet,$C=function(e,t,i,r){let n=0;for(let s=0;s<e.length;s+=1)n+=(e[s]-i)*(t[s]-r);return n/e.length},j(Np,f1),j(Np,Dg),j(Np,v1);const qs=new Np,Rf=new Np({media:"screenshare"});var gue=Object.defineProperty,fue=Object.getOwnPropertyDescriptor,Sa=(e,t,i,r)=>{for(var n=r>1?void 0:r?fue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&gue(t,i,n),n};const y1={port:void 0},mue=["virtual","emulator","krisp","solstice conference","teams","manycam","blackHole"];function tc(e){const t=e.label.toLowerCase();return Ye._bowser.getOSName()==="macOS"&&t.includes("iphone")?(T.log("isVirtualDevice::ignore_macos_continuity"),!0):mue.some(i=>t.includes(i))}var Ho,Du,FC;const Na=(FC=class{constructor(e){j(this,Ho,void 0),j(this,Du,void 0),$(this,Ho,e),$(this,Du,new AbortController)}static async init(){let e=[];return Na.isDeviceListAvailable()?(e=await Na.enumerateDevices(),T.info("initial_full_device_list",{devices:JSON.stringify(e)})):T.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices",{debuggingHint:"Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues."}),new Na(e)}async destruct(){var e;(e=g(this,Du))==null||e.abort()}static isDeviceListAvailable(){return!!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}static enumerateDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(e){return T.error("enumerate_devices_failed",{error:e}),Promise.resolve([])}}static getAudioConstraints(e){const t={},{disableAP:i=!1,disableAEC:r=!1,disableNS:n=!1,disableAGC:s=!1,disableHPF:a=!1}=e.audioOptions||{};if(Ye.isFirefox()||Ye.isWebKitBased())t.audio={deviceId:e.audioDeviceId,autoGainControl:!s&&!i,echoCancellation:!r&&!i,noiseSuppression:!n&&!i};else{if(typeof t.audio=="boolean")return t;t.audio={},t.audio.optional=[e.audioDeviceId?{sourceId:e.audioDeviceId}:{sourceId:"default"},{echoCancellation:!r&&!i},{googEchoCancellation:!r&&!i},{googAutoGainControl:!s&&!i},{googNoiseSuppression:!n&&!i},{googHighpassFilter:!a&&!i},{googNoiseSuppression2:!n&&!i},{googEchoCancellation2:!r&&!i},{googAutoGainControl2:!s&&!i}]}return t}static getVideoConstraints(e){const t={},{videoDeviceId:i,videoTrackConstraints:r,facingMode:n="user",frameRate:s={ideal:24,max:30}}=e;return t.video=r||jD.vga,typeof t.video=="boolean"||(i&&(t.video.deviceId={exact:i}),t.video.facingMode=n,t.video.frameRate=s),t}static async getUserMediaWithTimeout(e={},t=0){try{if(T.info("getUserMediaWithTimeout::requesting_user_media",{timeout:t,constraints:JSON.stringify(e)}),!t){const r=await navigator.mediaDevices.getUserMedia(e);return T.info("getUserMediaWithTimeout::received_user_media",{timeout:t,constraints:JSON.stringify(e)}),r}const i=await Promise.race([navigator.mediaDevices.getUserMedia(e),new Promise((r,n)=>{setTimeout(()=>n(new uue("Get user media timed out","ERR_GUM_TIMEOUT")),t)})]);return T.info("getUserMediaWithTimeout::received_user_media",{timeout:t,constraints:JSON.stringify(e)}),i}catch(i){throw T.error("getUserMediaWithTimeout::failed_to_access_local_media",{error:i,constraints:JSON.stringify(e)}),T.error("Failed to get access to local media.",{error:i,constraints:JSON.stringify(e)}),new Ic(i.name,i.message,e)}}static async getAudioTrack(e){const t=(await Na.getUserMediaWithTimeout(e)).getAudioTracks()[0];return Ws.setTrack(t),t}static async getVideoTrack(e){var t,i,r;const n=(await Na.getUserMediaWithTimeout(e)).getVideoTracks()[0],{width:s,height:a}=(t=e==null?void 0:e.video)!=null?t:{},o=[(i=s==null?void 0:s.ideal)!=null?i:640,(r=a==null?void 0:a.ideal)!=null?r:480];return qs.setTrack(n,o),n}static async getScreenShareTracks(e){var t,i,r,n;let s=ge.hasFeature(ye.EXTENSION_HACK),a=null;if(s)try{y1.port=window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome",{name:"chooseDesktopMedia"})}catch{C.addLogInCurrentSpan("error","Extension connect error"),s=!1}s&&(a=await new Promise(d=>{const l=setTimeout(()=>d(void 0),12e3);y1.port.onMessage.addListener(async u=>{if(u.value.streamId){const{streamId:f}=u.value;clearTimeout(l),d(f)}}),y1.port.postMessage({method:"chooseDesktopMedia",sources:["screen"]})}));let o;a?(C.addLogInCurrentSpan("error","Acquiring extension screenshare track"),o=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{maxWidth:1920,maxHeight:1080,chromeMediaSource:"desktop",chromeMediaSourceId:a},optional:[{maxFrameRate:parseInt((t=ge.getValue(ye.VAL_MAX_FRAMERATE_EXT))!=null?t:"12",10)},{minFrameRate:parseInt((i=ge.getValue(ye.VAL_MIN_FRAMERATE_EXT))!=null?i:"8",10)}]}}),C.addLogInCurrentSpan("error","Acquired extension screenshare track")):o=await navigator.mediaDevices.getDisplayMedia(e);const c={video:o.getVideoTracks()[0],audio:o.getAudioTracks()[0]};if(c.audio&&Cf.setTrack(c.audio),c.video){const{width:d,height:l}=e==null?void 0:e.video,u=[(r=d==null?void 0:d.ideal)!=null?r:1920,(n=l==null?void 0:l.ideal)!=null?n:1080];Rf.setTrack(c.video,u)}return c}static async getAudioAndVideoTrack(e){var t,i;const r=await Na.getUserMediaWithTimeout(e),n=r.getAudioTracks()[0],s=r.getVideoTracks()[0];Ws.setTrack(n);const{width:a,height:o}=e==null?void 0:e.video,c=[(t=a==null?void 0:a.ideal)!=null?t:640,(i=o==null?void 0:o.ideal)!=null?i:480];return qs.setTrack(s,c),{audioTrack:n,videoTrack:s}}onDeviceChange(e){Ye.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",Kne(async t=>{const i=this.availableDevices,r=new Set(i.map(o=>o.deviceId));await this.repopulateAvailableDevices();const n=this.availableDevices,s=new Set(n.map(o=>o.deviceId)),a={added:n.filter(o=>!r.has(o.deviceId)),removed:i.filter(o=>!s.has(o.deviceId))};this.repopulateAvailableDevices().then(()=>e(t,a))},100),{signal:g(this,Du).signal})}async repopulateAvailableDevices(){const e=await Na.enumerateDevices();$(this,Ho,e),de.devices("AUDIO",this.getAudioDevices()),de.devices("VIDEO",this.getVideoDevices()),de.devices("SPEAKER",this.getSpeakerDevices()),T.info("repopulated_full_device_list",{devices:JSON.stringify(e)})}get availableDevices(){return g(this,Ho)}getAvailableDevicesByKind(e){return g(this,Ho).filter(t=>t.kind===e)}getDeviceById(e,t){return g(this,Ho).find(i=>i.deviceId===e&&i.kind===t)}getAudioDevices(){return this.getAvailableDevicesByKind("audioinput").sort((e,t)=>{const i=tc(e)?0:1;return(tc(t)?0:1)-i})}getVideoDevices(){return this.getAvailableDevicesByKind("videoinput").sort((e,t)=>{const i=tc(e)?0:1;return(tc(t)?0:1)-i})}getSpeakerDevices(){return this.getAvailableDevicesByKind("audiooutput").sort((e,t)=>{const i=tc(e)?0:1;return(tc(t)?0:1)-i})}},Ho=new WeakMap,Du=new WeakMap,FC);let Gt=Na;Sa([C.trace("LocalMediaUtils.onDeviceChange")],Gt.prototype,"onDeviceChange",1);Sa([C.trace("LocalMediaUtils.repopulateAvailableDevices")],Gt.prototype,"repopulateAvailableDevices",1);Sa([C.trace("LocalMediaUtils.isDeviceListAvailable")],Gt,"isDeviceListAvailable",1);Sa([C.trace("LocalMediaUtils.enumerateDevices")],Gt,"enumerateDevices",1);Sa([C.trace("LocalMediaUtils.getUserMediaWithTimeout")],Gt,"getUserMediaWithTimeout",1);Sa([C.trace("LocalMediaUtils.getAudioTrack")],Gt,"getAudioTrack",1);Sa([C.trace("LocalMediaUtils.getVideoTrack")],Gt,"getVideoTrack",1);Sa([C.trace("LocalMediaUtils.getScreenShareTracks")],Gt,"getScreenShareTracks",1);Sa([C.trace("LocalMediaUtils.getAudioAndVideoTrack")],Gt,"getAudioAndVideoTrack",1);var vue=Object.defineProperty,yue=Object.getOwnPropertyDescriptor,Ql=(e,t,i,r)=>{for(var n=r>1?void 0:r?yue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&vue(t,i,n),n},vi,xd;class Xc{constructor(t){j(this,vi,void 0),_(this,"audioMiddlewares",[]),_(this,"videoMiddlewares",[]),j(this,xd,void 0),$(this,vi,t)}terminateMiddlewareWebWorker(){if(g(this,xd))try{M3(g(this,xd)),$(this,xd,void 0)}catch{T.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(t){var i,r;if(!((i=this.videoMiddlewares)!=null&&i.length))return t;const n=await Promise.all((r=this.videoMiddlewares)==null?void 0:r.map(l=>l())),s=new MediaStream;s.addTrack(t);const a=document.createElement("canvas"),o=a.getContext("2d"),c=document.createElement("video");c.srcObject=s,c.autoplay=!0,this.terminateMiddlewareWebWorker();const d=async()=>{if(!g(this,vi).videoEnabled||t.readyState==="ended"){this.terminateMiddlewareWebWorker(),c.remove(),a.remove();return}try{o.drawImage(c,0,0);for(let l=0;l<n.length;l+=1)await n[l](a,o)}catch(l){T.error("getTransformedVideoTrack::middleware_execution_failed",{error:l})}};try{c.play()}catch{}return c.addEventListener("play",()=>{a.width=c.width||t.getSettings().width,a.height=c.width||t.getSettings().height,$(this,xd,D3(d,50))},!1),a.captureStream().getVideoTracks()[0]}async addVideoMiddleware(t){return Ye.isSafari()?{success:!1,message:"Video middlewares are not yet supported in Safari."}:this.videoMiddlewares.includes(t)?{success:!0,message:"This video middleware has been applied, already. Skipping."}:(this.videoMiddlewares.push(t),g(this,vi).videoEnabled?(g(this,vi).setVideoTrack(await this.getTransformedVideoTrack(g(this,vi).rawVideoTrack)),g(this,vi).emit("VIDEO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the video middleware."}):{success:!0,message:"Successfully added the video middleware. It will be applied automatically once webcam is turned on."})}async removeVideoMiddleware(t){const i=this.videoMiddlewares.indexOf(t,0);return i>-1?(this.videoMiddlewares.splice(i,1),g(this,vi).videoEnabled&&(g(this,vi).setVideoTrack(await this.getTransformedVideoTrack(g(this,vi).rawVideoTrack)),g(this,vi).emit("VIDEO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the video middleware."}):{success:!0,message:"No such video middleware was found. Skipping."}}async getTransformedAudioTrack(t){var i,r;if(!((i=this.audioMiddlewares)!=null&&i.length))return t;const n=new AudioContext,s=await Promise.all((r=this.audioMiddlewares)==null?void 0:r.map(c=>c(n))),a=n.createMediaStreamSource(new MediaStream([t])),o=n.createMediaStreamDestination();try{let c=a;for(let d=0;d<s.length;d+=1)c.connect(s[d]),c=s[d];c.connect(o)}catch(c){return T.error("getTransformedAudioTrack::middleware_execution_failed",{error:c}),t}return o.stream.getAudioTracks()[0]}async addAudioMiddleware(t){return Ye.isSafari()?{success:!1,message:"Audio middlewares are not yet supported in Safari."}:this.audioMiddlewares.includes(t)?{success:!0,message:"This audio middleware has been applied, already. Skipping."}:(this.audioMiddlewares.push(t),g(this,vi).audioEnabled?(g(this,vi).setAudioTrack(await this.getTransformedAudioTrack(g(this,vi).rawAudioTrack)),g(this,vi).emit("AUDIO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the audio middleware."}):{success:!0,message:"Successfully added the audio middleware. It will be applied automatically once mic is turned on."})}async removeAudioMiddleware(t){const i=this.audioMiddlewares.indexOf(t,0);return i>-1?(this.audioMiddlewares.splice(i,1),g(this,vi).audioEnabled&&(g(this,vi).setAudioTrack(await this.getTransformedAudioTrack(g(this,vi).rawAudioTrack)),g(this,vi).emit("AUDIO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the audio middleware."}):{success:!0,message:"No such audio middleware was found. Skipping."}}}vi=new WeakMap,xd=new WeakMap;Ql([C.trace("MediaMiddlewareUtils.getTransformedVideoTrack")],Xc.prototype,"getTransformedVideoTrack",1);Ql([C.trace("MediaMiddlewareUtils.addVideoMiddleware")],Xc.prototype,"addVideoMiddleware",1);Ql([C.trace("MediaMiddlewareUtils.removeVideoMiddleware")],Xc.prototype,"removeVideoMiddleware",1);Ql([C.trace("MediaMiddlewareUtils.getTransformedAudioTrack")],Xc.prototype,"getTransformedAudioTrack",1);Ql([C.trace("MediaMiddlewareUtils.addAudioMiddleware")],Xc.prototype,"addAudioMiddleware",1);Ql([C.trace("MediaMiddlewareUtils.removeAudioMiddleware")],Xc.prototype,"removeAudioMiddleware",1);const bue=(e=0)=>new Promise(t=>setTimeout(t,e)),_ue=(e,t,i)=>{const r=typeof i=="number"?i:250,n=e.createMediaStreamSource(t),s=e.createAnalyser();s.fftSize=2048,n.connect(s);const a=new Uint8Array(s.fftSize);let o=!1;setTimeout(()=>{o=!0},r);function c(){return o?Promise.resolve(!0):(s.getByteTimeDomainData(a),a.some(d=>d!==128&&d!==0)?Promise.resolve(!1):bue().then(c))}return c().then(d=>(n.disconnect(),d),d=>{throw n.disconnect(),d})},wue=typeof AudioContext<"u"?AudioContext:null;class aE{constructor(t){_(this,"_AudioContext"),_(this,"audioContext"),_(this,"_audioContextRefContainers");const i={AudioContext:wue,...t};Object.defineProperties(this,{_AudioContext:{value:i.AudioContext},audioContext:{value:null,writable:!0},_audioContextRefContainers:{value:new Set},AudioContextProvider:{enumerable:!0,value:aE}})}getOrCreate(t){if(!this._audioContextRefContainers.has(t)&&(this._audioContextRefContainers.add(t),this._AudioContext&&!this.audioContext))try{this.audioContext=new this._AudioContext}catch{}return this.audioContext}release(t){this._audioContextRefContainers.has(t)&&(this._audioContextRefContainers.delete(t),!this._audioContextRefContainers.size&&this.audioContext&&(this.audioContext.close(),this.audioContext=null))}}const BC=new aE,Sue=3,Eue=250;function Tue(e){const t={},i=BC.getOrCreate(t);let r=Sue;function n(){return r-=1,_ue(i,e.srcObject,Eue).then(s=>s?r>0?n():!0:!1).catch(()=>!0)}return n().finally(()=>{BC.release(t)})}async function b1(e){const t=new Audio,i=new MediaStream;i.addTrack(e),t.srcObject=i;let r=!1;try{const n=t.play();n&&await n,r=await Tue(t),r&&T.info("checkIfAudioTrackIsSilent::silence_detected")}catch(n){T.error("checkIfAudioTrackIsSilent::failed_to_detect_silence",{error:n})}finally{t.pause(),t.remove()}return r}const ap=class{constructor(){_(this,"mediaPermissionEvent"),this.mediaPermissionEvent=!0}static getInstance(){return ap.instance||(ap.instance=new ap),ap.instance}get shouldEmitMediaPermissionEvent(){return this.mediaPermissionEvent}setEmitMediaPermissionEvent(e){this.mediaPermissionEvent=e}};let dL=ap;_(dL,"instance");const Lg=dL.getInstance(),vd={setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(i){T.error("LocalStorage::setItem::crashed",{error:i,localStorage:{key:e,value:t}})}},getItem:e=>{try{return localStorage.getItem(e)}catch(t){T.error("LocalStorage::getItem::crashed",{error:t,localStorage:{key:e}})}return null}};var kue=Object.defineProperty,Pue=Object.getOwnPropertyDescriptor,It=(e,t,i,r)=>{for(var n=r>1?void 0:r?Pue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&kue(t,i,n),n},pt,Go,VC;const lL=(VC=class extends yr.EventEmitter{constructor(e,t){super(),j(this,pt,void 0),j(this,Go,void 0),_(this,"mediaMiddlewareUtils"),_(this,"audioTrack"),_(this,"rawAudioTrack"),_(this,"videoTrack"),_(this,"rawVideoTrack"),_(this,"screenShareTracks"),_(this,"audioEnabled"),_(this,"videoEnabled"),_(this,"screenShareEnabled"),_(this,"currentDevices"),_(this,"permissions"),_(this,"audioUpdateInProgress"),_(this,"videoUpdateInProgress"),_(this,"screenShareUpdateInProgress"),$(this,pt,e),$(this,Go,new FD(t)),this.audioEnabled=!0,this.videoEnabled=!0,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.screenShareUpdateInProgress=!1,this.screenShareEnabled=!1,this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"},this.screenShareTracks={audio:void 0,video:void 0},this.currentDevices={audio:void 0,video:void 0,speaker:void 0},g(this,pt).onDeviceChange((i,r)=>this.onDeviceChange(r,!1)),this.conditionallyRestartAudio=this.conditionallyRestartAudio.bind(this),this.conditionallyRestartVideo=this.conditionallyRestartVideo.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange),this.on("AUDIO_TRACK_CHANGE",()=>{this.notifyIfTrackSilent()})}handlePermissionErrors(e,t){const i=ny(t.name,t.message);this.permissions[e]=i,M.emit(I.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:e})}async repopulateAvailableDevices(){return g(this,pt).repopulateAvailableDevices()}onVisibilityChange(e){document.visibilityState==="visible"&&(Ye.isMobile()&&this.conditionallyRestartAudio(),this.conditionallyRestartVideo()),de.tabChanged(document.visibilityState==="visible"),document.visibilityState!=="visible"?de.browserBackgrounded():de.browserForegrounded()}async conditionallyRestartAudio(e){var t,i;if(!((t=this.currentDevices)!=null&&t.audio)||!this.audioEnabled)return;await Promise.race([new Promise(n=>{var s;return(s=this.rawAudioTrack)==null?void 0:s.addEventListener("unmute",a=>{n(a)})}),new Promise(n=>setTimeout(n,50))]),T.info("performingCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}});const r=await this.shouldReacquireTrack("audio");T.info("performedCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{reacquireTrack:r}}}),r&&(T.info("reacquiring_audio_track"),this.removeMediaStreamTrackListeners(this.rawAudioTrack),Ye.isChromiumBased()&&await g(this,pt).repopulateAvailableDevices(),await this.setupAudioStream((i=this.currentDevices.audio)==null?void 0:i.deviceId),this.addMediaStreamTrackListeners(this.rawAudioTrack),this.emit("AUDIO_TRACK_CHANGE"))}async conditionallyRestartVideo(e){var t;if(!((t=this.currentDevices)!=null&&t.video)||!this.videoEnabled)return;T.info("performingCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}}),await Promise.race([new Promise(r=>{var n;return(n=this.rawVideoTrack)==null?void 0:n.addEventListener("unmute",r)}),new Promise(r=>setTimeout(r,50))]);const i=await this.shouldReacquireTrack("video");T.info("performedCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{reacquireTrack:i}}}),i&&(T.info("reacquiring_video_track"),this.removeMediaStreamTrackListeners(this.rawVideoTrack),await g(this,pt).repopulateAvailableDevices(),await this.setupVideoStream(this.currentDevices.video.deviceId),this.addMediaStreamTrackListeners(this.rawVideoTrack),this.emit("VIDEO_TRACK_CHANGE"))}async shouldReacquireTrack(e){let t,i=!1;if(e==="audio"?(t=this.rawAudioTrack,i=this.audioEnabled):e==="video"&&(t=this.rawVideoTrack,i=this.videoEnabled),!t)return!1;const r=t.readyState==="ended"&&i&&!0;let n=!1;return e==="audio"&&(n=await b1(this.rawAudioTrack)),document.visibilityState==="visible"&&(t.muted||r||n)}onAudioUnmute(e){T.info("audio_track_unmuted",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}})}onVideoUnmute(e){T.info("video_track_unmuted",{actions:{trackRobustness:{eventType:e==null?void 0:e.type}}})}removeMediaStreamTrackListeners(e){if(T.info(`Removing ${e.kind} listerners`),!e)return;const t=e.kind==="audio"?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return e.removeEventListener("ended",t),e.removeEventListener("mute",t),e.removeEventListener("unmute",e.kind==="audio"?this.onAudioUnmute:this.onVideoUnmute),e}addMediaStreamTrackListeners(e){if(!e)return null;T.info(`adding_${e.kind}_stream_listerners`);const t=e.kind==="audio",i=t?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return e.addEventListener("ended",async()=>{await i();const r=t?this.audioEnabled:this.videoEnabled,n=t?this.audioTrack:this.videoTrack,s=t?"FORCE_MUTE_AUDIO":"FORCE_MUTE_VIDEO";r&&!(n&&n.readyState==="live"&&n.enabled)&&(T.info(`LocalMediaHandler::trackEnded::Failed to restart ${e.kind} track`),this.emit(s))}),e.addEventListener("mute",i),e.addEventListener("unmute",t?this.onAudioUnmute:this.onVideoUnmute),e}async notifyIfTrackSilent(){var e,t,i,r,n,s;this.audioEnabled&&this.audioTrack&&this.audioTrack.readyState!=="ended"&&this.audioTrack.enabled&&await b1(this.audioTrack)===!0&&(T.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent",{media:{audio:{enabled:this.audioEnabled,deviceId:(t=(e=this.audioTrack)==null?void 0:e.getSettings())==null?void 0:t.deviceId,permission:(i=this.permissions)==null?void 0:i.audio,deviceName:(n=(r=this.currentDevices)==null?void 0:r.audio)==null?void 0:n.label,trackId:(s=this.audioTrack)==null?void 0:s.id}}}),this.emit("AUDIO_TRACK_SILENT"))}async setupAudioStream(e,t=!0){var i,r,n;if(!this.audioUpdateInProgress)try{this.audioUpdateInProgress=!0;const s=g(this,pt).getAudioDevices();if(!s.length)return;let a=e;(!a||!s.find(c=>c.deviceId===a))&&(a=await this.getPreferredDeviceId("AUDIO"),T.debug("setupAudioStream::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}}));const o=Gt.getAudioConstraints({audioDeviceId:a});t&&((i=this.rawAudioTrack)==null||i.stop(),(r=this.audioTrack)==null||r.stop()),this.rawAudioTrack=await Gt.getAudioTrack(o),a=this.rawAudioTrack.getSettings().deviceId,((n=this.currentDevices.audio)==null?void 0:n.deviceId)!==a&&(this.currentDevices.audio=g(this,pt).getDeviceById(a,"audioinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.audio})),this.rawAudioTrack.enabled=this.audioEnabled,this.setAudioTrack(await this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack)),this.addMediaStreamTrackListeners(this.rawAudioTrack),await g(this,pt).repopulateAvailableDevices(),this.permissions.audio="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),de.mediaPermission("AUDIO",io.ACCEPTED),de.selectedDevice("AUDIO",this.currentDevices.audio),a&&vd.setItem("lastUsedAudioDeviceId",a)}catch(s){this.handlePermissionErrors("audio",s)}finally{this.audioUpdateInProgress=!1}}async getPreferredDeviceId(e){var t,i;let r;if(e==="AUDIO"){const n=g(this,pt).getAudioDevices(),s=vd.getItem("lastUsedAudioDeviceId");T.debug("getPreferredDeviceId::lastUsedAudioDeviceId",{preferredDevice:{lastUsedPreferredDeviceId:s,kind:"audio"}});let a;s&&(a=n.find(o=>o.deviceId===s)),a?r=s:ge.hasFeature(ye.REMOVE_OPERATIONAL_MIC)||(r=(await this.getOperationalMicDeviceId()).deviceId),r||(r=(t=n[0])==null?void 0:t.deviceId)}if(e==="VIDEO"){const n=vd.getItem("lastUsedVideoDeviceId");T.debug("getPreferredDeviceId::lastUsedVideoDeviceId",{preferredDevice:{kind:"video",lastUsedPreferredDeviceId:n}});const s=g(this,pt).getVideoDevices();let a;n&&(a=s.find(o=>o.deviceId===n)),a?r=n:r=(await this.getOperationalWebcamDeviceId()).deviceId,r||(r=(i=s[0])==null?void 0:i.deviceId)}return r}async setupVideoStream(e,t=!0){var i,r;if(!this.videoUpdateInProgress)try{this.videoUpdateInProgress=!0;const n=g(this,pt).getVideoDevices();if(!n.length)return;let s=e;if((!s||!n.find(a=>a.deviceId===s))&&(s=await this.getPreferredDeviceId("VIDEO"),T.debug("setupVideoStream::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:s,kind:"video"}})),t&&((i=this.videoTrack)==null||i.stop()),this.videoEnabled){const a=g(this,Go).getVideoConstraints(s);this.rawVideoTrack=await Gt.getVideoTrack(a),s=this.rawVideoTrack.getSettings().deviceId,this.setVideoTrack(await this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack)),this.addMediaStreamTrackListeners(this.rawVideoTrack)}await g(this,pt).repopulateAvailableDevices(),((r=this.currentDevices.video)==null?void 0:r.deviceId)!==s&&(this.currentDevices.video=g(this,pt).getDeviceById(s,"videoinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.video})),this.permissions.video="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),de.mediaPermission("VIDEO",io.ACCEPTED),de.selectedDevice("VIDEO",this.currentDevices.video),s&&vd.setItem("lastUsedVideoDeviceId",s)}catch(n){this.handlePermissionErrors("video",n)}finally{this.videoUpdateInProgress=!1}}async setupScreenShareStreams(){if(this.screenShareUpdateInProgress)return;const e=g(this,Go).getScreenShareConstraints();ge.hasFeature(ye.SCREENSHARE_MAX_DIMENSIONS)&&(e.video.width.max=window.screen.width,e.video.height.max=window.screen.height);try{this.screenShareUpdateInProgress=!0;const t=await Gt.getScreenShareTracks(e);this.setScreenShareTracks(t)}catch(t){throw this.handlePermissionErrors("screenshare",new Ic(t.name,t.message,e)),new N(t.message)}finally{this.screenShareUpdateInProgress=!1}}async setupSpeaker(e){var t;const i=g(this,pt).getSpeakerDevices();if(!i.length)return;const r=e!=null?e:i[0].deviceId;((t=this.currentDevices.speaker)==null?void 0:t.deviceId)!==r&&(this.currentDevices.speaker=g(this,pt).getDeviceById(r,"audiooutput"),de.selectedDevice("SPEAKER",this.currentDevices.speaker),this.emit("DEVICE_CHANGE",{device:this.currentDevices.speaker})),document.querySelectorAll("audio").forEach(async n=>{if(typeof n.sinkId<"u"&&this.currentDevices.speaker.deviceId&&n.sinkId!==this.currentDevices.speaker.deviceId)try{await n.setSinkId(this.currentDevices.speaker.deviceId)}catch{}})}async getOperationalWebcamDeviceId(){const e=g(this,pt).getVideoDevices();if(!e.length)return{isOperational:!1,deviceId:null};Lg.setEmitMediaPermissionEvent(!1);const t=[],i=await e.reduce(async(r,n)=>{const s=await r;if(s!==null)return s;const a=g(this,Go).getVideoConstraints(n.deviceId);try{return(await Gt.getVideoTrack(a)).stop(),n.deviceId}catch(o){T.error("getOperationalWebcamDeviceId::could_not_acquire_video_device",{error:o,constraints:a}),t.push({exception:o,constraints:a})}return s},Promise.resolve(null));if(Lg.setEmitMediaPermissionEvent(!0),!i&&t.length>0&&t.length===e.length){const{exception:r,constraints:n}=t[0];throw new Ic(r.name,r.message,n)}return i?{isOperational:!0,deviceId:i}:{isOperational:!1,deviceId:e[0].deviceId}}async getOperationalMicDeviceId(){const e=g(this,pt).getAudioDevices();if(!e.length)return{isOperational:!1,deviceId:null};const t=[];Lg.setEmitMediaPermissionEvent(!1);const i=await e.reduce(async(r,n)=>{const s=await r;if(s!==null)return s;const a=Gt.getAudioConstraints({audioDeviceId:n.deviceId});try{const o=await Gt.getAudioTrack(a),c=await b1(o);if(o==null||o.stop(),!c)return n}catch(o){T.error("getOperationalMicDeviceId::could_not_acquire_audio_device",{error:o,constraints:a}),t.push({exception:o,constraints:a})}return s},Promise.resolve(null));if(Lg.setEmitMediaPermissionEvent(!0),!i&&t.length>0&&t.length===e.length){const{exception:r,constraints:n}=t[0];throw new Ic(r.name,r.message,n)}return i?{isOperational:!0,deviceId:i.deviceId}:{isOperational:!1,deviceId:e[0].deviceId}}async setupStreams({audio:e,video:t}){var i;const r={};this.currentDevices||(this.currentDevices={audio:void 0,video:void 0,speaker:void 0});try{if(e&&!this.audioUpdateInProgress&&g(this,pt).getAudioDevices().length!==0){const a=await this.getPreferredDeviceId("AUDIO");T.info("setupStreams::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}});const o=Gt.getAudioConstraints({audioDeviceId:a});r.audio=o.audio}if(t&&!this.videoUpdateInProgress&&g(this,pt).getVideoDevices().length!==0){const a=await this.getPreferredDeviceId("VIDEO");T.info("setupStreams::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"video"}});const o=g(this,Go).getVideoConstraints(a);r.video=o.video}if(((i=Object.keys(r))==null?void 0:i.length)===0){this.audioEnabled=e!=null?e:this.audioEnabled,this.videoEnabled=t!=null?t:this.videoEnabled,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1;return}const{audioTrack:n,videoTrack:s}=await Gt.getAudioAndVideoTrack(r);e&&n&&(this.audioTrack=n,this.rawAudioTrack=n,this.permissions.audio="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),this.currentDevices.audio=g(this,pt).getDeviceById(n.getSettings().deviceId,"audioinput"),vd.setItem("lastUsedAudioDeviceId",n.getSettings().deviceId)),t&&s&&(this.videoTrack=s,this.rawVideoTrack=s,this.permissions.video="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),this.currentDevices.video=g(this,pt).getDeviceById(s.getSettings().deviceId,"videoinput"),vd.setItem("lastUsedVideoDeviceId",s.getSettings().deviceId)),await g(this,pt).repopulateAvailableDevices()}catch(n){n.name==="NotAllowedError"&&(e&&await this.setupAudioStream(),t&&await this.setupVideoStream())}this.audioEnabled=!!this.audioTrack,this.videoEnabled=!!this.videoTrack,this.screenShareEnabled=!1,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,await this.setupSpeaker()}stopAudioTrack(){var e,t;this.audioUpdateInProgress||(this.audioUpdateInProgress=!0,(e=this.audioTrack)==null||e.stop(),(t=this.rawAudioTrack)==null||t.stop(),this.audioEnabled=!1,this.audioUpdateInProgress=!1)}stopVideoTrack(){var e,t;this.videoUpdateInProgress||(this.videoUpdateInProgress=!0,(e=this.videoTrack)==null||e.stop(),(t=this.rawVideoTrack)==null||t.stop(),this.videoEnabled=!1,this.videoUpdateInProgress=!1)}stopScreenShareTracks(e={}){var t,i,r,n;if(this.screenShareUpdateInProgress)return;this.screenShareUpdateInProgress=!0;const{audio:s=!0,video:a=!0}=e;s&&((i=(t=this.screenShareTracks)==null?void 0:t.audio)==null||i.stop()),a&&((n=(r=this.screenShareTracks)==null?void 0:r.video)==null||n.stop()),this.screenShareEnabled=!1,this.screenShareUpdateInProgress=!1}removeAudioTrack(){this.stopAudioTrack(),this.audioTrack=void 0,this.rawAudioTrack=void 0,Ws.cleanup()}removeVideoTrack(){this.stopVideoTrack(),this.videoTrack=void 0,this.rawVideoTrack=void 0,qs.cleanup()}removeScreenShareTracks(e){var t;(t=this.screenShareTracks.video)==null||t.removeEventListener("ended",this.onScreenShareEnded),this.stopScreenShareTracks(e),this.screenShareTracks={audio:void 0,video:void 0}}removeAllTracks(){this.removeAudioTrack(),this.removeVideoTrack(),this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video})}setAudioTrack(e){e!==this.audioTrack&&(e===void 0&&this.stopAudioTrack(),this.audioTrack=e,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled))}setVideoTrack(e){e!==this.videoTrack&&(e===void 0&&this.stopVideoTrack(),this.videoTrack=e)}setScreenShareTracks(e){var t;const{audio:i,video:r}=e;(!i||!r)&&this.stopScreenShareTracks({audio:!!i,video:!!r}),this.screenShareTracks=e,(t=this.screenShareTracks.video)==null||t.addEventListener("ended",this.onScreenShareEnded.bind(this))}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}disableAudio(){this.audioEnabled=!1,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async enableAudio(){var e;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((e=this.currentDevices.audio)==null?void 0:e.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1,T.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio",{debuggingHint:"Refer to SelfController::mediaPermissionError log."});return}this.audioEnabled=!0}catch(t){this.audioEnabled=!1,this.audioTrack=void 0,this.rawAudioTrack=void 0,T.error("LocalMediaHandler::enableAudio",{error:t},!0)}this.audioTrack&&(this.audioTrack.enabled=!0),this.rawAudioTrack&&(this.rawAudioTrack.enabled=!0),!(this.permissions.audio==="ACCEPTED"||!this.audioEnabled)&&(this.permissions.audio="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}))}async toggleAudio(){var e;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((e=this.currentDevices.audio)==null?void 0:e.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1;return}this.audioEnabled=!this.audioEnabled}catch(t){this.audioEnabled=!1,T.error("LocalMediaHandler::toggleAudio",{error:t},!0)}this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async toggleVideo(){var e;if(this.permissions.video==="DENIED"){this.videoEnabled=!1;return}if(this.videoEnabled){this.removeVideoTrack();return}this.videoEnabled=!0;try{await this.setupVideoStream((e=this.currentDevices.video)==null?void 0:e.deviceId)}catch{this.videoEnabled=!1}this.videoTrack&&(this.videoTrack.enabled=this.videoEnabled),this.rawVideoTrack&&(this.rawVideoTrack.enabled=this.videoEnabled),!(this.permissions.video==="ACCEPTED"||!this.videoEnabled)&&(this.permissions.video="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}))}async toggleScreenShare(){if(this.screenShareEnabled){this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video});return}try{if(await this.setupScreenShareStreams(),this.screenShareEnabled=!0,this.permissions.screenshare==="ACCEPTED")return;this.permissions.screenshare="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"})}catch{this.screenShareEnabled=!1}}getAllDevices(){return g(this,pt).availableDevices}getDeviceById(e,t){return g(this,pt).getDeviceById(e,t)}getAudioDevices(){return g(this,pt).getAudioDevices()}getVideoDevices(){return g(this,pt).getVideoDevices()}getSpeakerDevices(){return g(this,pt).getSpeakerDevices()}async onDeviceChange(e,t){var i,r;(i=e==null?void 0:e.added)==null||i.forEach(async n=>{n&&(t||!tc(n))&&(n.kind==="audioinput"?(await this.setupAudioStream(n.deviceId),this.emit("AUDIO_TRACK_CHANGE")):n.kind==="videoinput"?(await this.setupVideoStream(n.deviceId),this.emit("VIDEO_TRACK_CHANGE")):n.kind==="audiooutput"&&await this.setupSpeaker(n.deviceId))}),(r=e==null?void 0:e.removed)==null||r.forEach(async n=>{var s,a,o;n&&((ge.hasFeature(ye.DEVICE_REMOVE_EXP)||!Ye.isChromiumBased())&&(n.kind==="audioinput"&&n.deviceId===((s=this.currentDevices.audio)==null?void 0:s.deviceId)?(await this.setupAudioStream(),this.emit("AUDIO_TRACK_CHANGE")):n.kind==="videoinput"&&n.deviceId===((a=this.currentDevices.video)==null?void 0:a.deviceId)&&(await this.setupVideoStream(),this.emit("VIDEO_TRACK_CHANGE"))),n.kind==="audiooutput"&&n.deviceId===((o=this.currentDevices.speaker)==null?void 0:o.deviceId)&&await this.setupSpeaker())})}static async init(e){const t=await Gt.init(),i=new lL(t,e),r=new Xc(i);return i.mediaMiddlewareUtils=r,i}emit(e,...t){return super.emit(e,...t)}on(e,t){return super.on(e,t)}async removeDocumentEventListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}addAudioMiddleware(e){return this.mediaMiddlewareUtils.addAudioMiddleware(e)}removeAudioMiddleware(e){return this.mediaMiddlewareUtils.removeAudioMiddleware(e)}addVideoMiddleware(e){return this.mediaMiddlewareUtils.addVideoMiddleware(e)}removeVideoMiddleware(e){return this.mediaMiddlewareUtils.removeVideoMiddleware(e)}async enableVideo(){await this.toggleVideo()}async disableVideo(){await this.toggleVideo()}async enableScreenShare(){await this.toggleScreenShare()}async disableScreenShare(){await this.toggleScreenShare()}getCurrentDevices(){return this.currentDevices}destruct(){this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(),g(this,pt).destruct(),this.removeAllTracks(),this.removeAllListeners()}},pt=new WeakMap,Go=new WeakMap,VC);let Tt=lL;It([C.trace("OldMediaHandler.shouldReacquireTrack")],Tt.prototype,"shouldReacquireTrack",1);It([C.trace("OldMediaHandler.removeMediaStreamTrackListeners")],Tt.prototype,"removeMediaStreamTrackListeners",1);It([C.trace("OldMediaHandler.addMediaStreamTrackListeners")],Tt.prototype,"addMediaStreamTrackListeners",1);It([C.trace("OldMediaHandler.setupAudioStream")],Tt.prototype,"setupAudioStream",1);It([C.trace("OldMediaHandler.getPreferredDeviceId")],Tt.prototype,"getPreferredDeviceId",1);It([C.trace("OldMediaHandler.setupVideoStream")],Tt.prototype,"setupVideoStream",1);It([C.trace("OldMediaHandler.setupScreenShareStreams")],Tt.prototype,"setupScreenShareStreams",1);It([C.trace("OldMediaHandler.setupSpeaker")],Tt.prototype,"setupSpeaker",1);It([C.trace("OldMediaHandler.getOperationalWebcamDeviceId")],Tt.prototype,"getOperationalWebcamDeviceId",1);It([C.trace("OldMediaHandler.getOperationalMicDeviceId")],Tt.prototype,"getOperationalMicDeviceId",1);It([C.trace("OldMediaHandler.setupStreams")],Tt.prototype,"setupStreams",1);It([C.trace("OldMediaHandler.stopAudioTrack")],Tt.prototype,"stopAudioTrack",1);It([C.trace("OldMediaHandler.stopVideoTrack")],Tt.prototype,"stopVideoTrack",1);It([C.trace("OldMediaHandler.stopScreenShareTracks")],Tt.prototype,"stopScreenShareTracks",1);It([C.trace("OldMediaHandler.removeAudioTrack")],Tt.prototype,"removeAudioTrack",1);It([C.trace("OldMediaHandler.removeVideoTrack")],Tt.prototype,"removeVideoTrack",1);It([C.trace("OldMediaHandler.removeScreenShareTracks")],Tt.prototype,"removeScreenShareTracks",1);It([C.trace("OldMediaHandler.removeAllTracks")],Tt.prototype,"removeAllTracks",1);It([C.trace("OldMediaHandler.setAudioTrack")],Tt.prototype,"setAudioTrack",1);It([C.trace("OldMediaHandler.setVideoTrack")],Tt.prototype,"setVideoTrack",1);It([C.trace("OldMediaHandler.setScreenShareTracks")],Tt.prototype,"setScreenShareTracks",1);It([C.trace("OldMediaHandler::disableAudio")],Tt.prototype,"disableAudio",1);It([C.trace("OldMediaHandler::enableAudio")],Tt.prototype,"enableAudio",1);It([C.trace("OldMediaHandler.toggleAudio")],Tt.prototype,"toggleAudio",1);It([C.trace("OldMediaHandler.toggleVideo")],Tt.prototype,"toggleVideo",1);It([C.trace("OldMediaHandler.toggleScreenShare")],Tt.prototype,"toggleScreenShare",1);class Cue extends ti{constructor(){super(...arguments),_(this,"localMediaHandler")}async init(t={}){var i,r;if(Ye.init(),!this.localMediaHandler)try{let n=!0;const s=t.constraints||Mr;if(yt.defaults.mediaHandler)n=!1,this.localMediaHandler=yt.defaults.mediaHandler.localMediaHandler;else if(navigator.RNLocalMediaHandlerImpl){const{RNLocalMediaHandlerImpl:a}=navigator;this.localMediaHandler=await a.init()}else ge.hasFeature(ye.NEW_LOCAL_MEDIA_HANDLER)?this.localMediaHandler=new rs(s):this.localMediaHandler=await Tt.init(s);n&&await this.localMediaHandler.setupStreams({video:(i=t==null?void 0:t.video)!=null?i:!0,audio:(r=t==null?void 0:t.audio)!=null?r:!0})}catch(n){T.error("DyteSelf::init::Failed To Setup Streams",{error:{name:n.name,message:n.message}})}}get audioTrack(){return this.localMediaHandler.audioTrack}get rawAudioTrack(){return this.localMediaHandler.rawAudioTrack}async addAudioMiddleware(t){return this.localMediaHandler.addAudioMiddleware(t)}async removeAudioMiddleware(t){return this.localMediaHandler.removeAudioMiddleware(t)}get videoTrack(){return this.localMediaHandler.videoTrack}get rawVideoTrack(){return this.localMediaHandler.rawVideoTrack}async addVideoMiddleware(t){return this.localMediaHandler.addVideoMiddleware(t)}async removeVideoMiddleware(t){return this.localMediaHandler.removeVideoMiddleware(t)}get screenShareTracks(){return this.localMediaHandler.screenShareTracks}get audioEnabled(){return this.localMediaHandler.audioEnabled}get videoEnabled(){return this.localMediaHandler.videoEnabled}get screenShareEnabled(){return this.localMediaHandler.screenShareEnabled}async enableAudio(){await this.localMediaHandler.enableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async enableVideo(){await this.localMediaHandler.enableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableAudio(){await this.localMediaHandler.disableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async disableVideo(){await this.localMediaHandler.disableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}getCurrentDevices(){return this.localMediaHandler.getCurrentDevices()}async getAudioDevices(){return await this.localMediaHandler.getAudioDevices()}async getVideoDevices(){return await this.localMediaHandler.getVideoDevices()}async getSpeakerDevices(){return await this.localMediaHandler.getSpeakerDevices()}getDeviceById(t,i){let r;return i==="audio"?r="audioinput":i==="video"?r="videoinput":i==="speaker"&&(r="audiooutput"),this.localMediaHandler.getDeviceById(t,r)}async setDevice(t){const i={added:[t],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(i,!0);return}switch(t.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(t)}catch{}finally{this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(t);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(t)}catch{}finally{this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:t})}}var Rue=Object.defineProperty,xue=Object.getOwnPropertyDescriptor,$i=(e,t,i,r)=>{for(var n=r>1?void 0:r?xue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Rue(t,i,n),n},wi=(e=>(e.OFF_STAGE="OFF_STAGE",e.REQUESTED_TO_JOIN_STAGE="REQUESTED_TO_JOIN_STAGE",e.ACCEPTED_TO_JOIN_STAGE="ACCEPTED_TO_JOIN_STAGE",e.ON_STAGE="ON_STAGE",e))(wi||{}),yd,Ra,Fs,Lu,Ng,We,Ke,zC;let gi=(zC=class extends Cue{constructor(e,t,i,r,n){var s;super(),j(this,We),_(this,"id"),_(this,"name"),_(this,"picture"),_(this,"clientSpecificId"),_(this,"waitlistStatus"),j(this,yd,void 0),j(this,Ra,void 0),j(this,Fs,void 0),j(this,Lu,void 0),_(this,"role"),_(this,"userId"),_(this,"organizationId"),_(this,"supportsRemoteControl",!1),_(this,"device"),j(this,Ng,"OFF_STAGE"),_(this,"stageStatus"),_(this,"presetName"),_(this,"roomState","init"),this.id=e,this.userId=t.id,this.name=t.name,this.picture=t.picture,this.clientSpecificId=(s=t.customParticipantId)!=null?s:t.clientSpecificId,this.waitlistStatus="none",$(this,Fs,i),$(this,Ra,r),$(this,Lu,!1),this.organizationId=t.organizationId,this.supportsRemoteControl=Ye.isElectron(),this.device=Ye.getDeviceInfo(),this.presetName=n,$(this,yd,$e.isV2AuthToken?r.viewType:i.viewType),this.updatePermission()}static async __init__(e,t,i,r,n){var s,a,o,c;let d=(a=(s=yt.defaults)==null?void 0:s.audio)!=null?a:!0,l=(c=(o=yt.defaults)==null?void 0:o.video)!=null?c:!0;i.canProduceAudio!=="ALLOWED"&&(d=!1),i.canProduceVideo!=="ALLOWED"&&(l=!1);const u=new gi(e,t,i,r,n);return await u.init({audio:d,video:l}),u.setupEvents(),u}async updatePermission(){var e,t;if(Ye.getName()==="firefox")return;const i="microphone",r="camera",n=await((e=navigator==null?void 0:navigator.permissions)==null?void 0:e.query({name:i})),s=await((t=navigator==null?void 0:navigator.permissions)==null?void 0:t.query({name:r})),a=(c,d)=>{this.mediaPermissions[c]=d;const l={message:this.mediaPermissions[c],kind:c};d==="DENIED"?M.emit(I.MEDIA_PERMISSION_ERROR,l):M.emit(I.MEDIA_PERMISSION_UPDATE,l)},o=(c,d)=>{switch(d){case"granted":a(c,"ACCEPTED");break;case"denied":a(c,"DENIED");break}this.localMediaHandler.repopulateAvailableDevices()};n&&(n.onchange=()=>o("audio",n.state)),s&&(s.onchange=()=>o("video",s.state))}setupEvents(){M.on(I.ROOM_NODE_CONNECTED,async()=>{g(this,We,Ke).isDisconnected&&await this.resetSelf(),g(this,We,Ke).isDisconnected=!1,T.info("DyteSelf::ROOM_NODE_CONNECTED")}),M.on(I.RESET_PRODUCER_STATE,async()=>{this.roomJoined&&g(this,We,Ke)instanceof Me&&(this.localMediaHandler.videoEnabled&&await g(this,We,Ke).shareWebcam(this.localMediaHandler.videoTrack),this.localMediaHandler.audioEnabled&&await g(this,We,Ke).shareMic(this.localMediaHandler.audioTrack),this.localMediaHandler.screenShareEnabled&&await g(this,We,Ke).shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio}))}),this.localMediaHandler.on("AUDIO_TRACK_CHANGE",async()=>{if(T.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE",{...yc(this)}),this.roomJoined&&this.audioEnabled)try{await g(this,We,Ke).shareMic(this.audioTrack)}catch(e){T.error("DyteSelf::setupEvents::Error while sharing mic",{error:e}),this.localMediaHandler.disableAudio()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}),this.localMediaHandler.on("VIDEO_TRACK_CHANGE",async()=>{if(T.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE",{...yc(this)}),this.videoEnabled&&this.roomJoined)try{await g(this,We,Ke).shareWebcam(this.videoTrack)}catch(e){T.error("DyteSelf::setupEvents::failed shareWebcam",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}),this.localMediaHandler.on("DEVICE_CHANGE",async({device:e})=>{this.emit("deviceUpdate",{device:e})}),this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE",async()=>{if(!this.roomJoined){T.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode");return}if(this.screenShareEnabled)try{await g(this,We,Ke).shareScreen(this.screenShareTracks)}catch(e){T.error("DyteSelf::setupEvents::Error while sharing screen",{error:e}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}T.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE",{...yc(this)}),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}),this.localMediaHandler.on("SCREENSHARE_ENDED",async()=>{await this.disableScreenShare(),T.info("DyteSelf::setupEvents::SCREENSHARE_ENDED",{...yc(this)})}),this.localMediaHandler.on("AUDIO_TRACK_SILENT",()=>{this.emit("audioTrackSilent"),de.mediaTrackMuted("AUDIO")}),this.localMediaHandler.on("FORCE_MUTE_AUDIO",this.disableAudio),this.localMediaHandler.on("FORCE_MUTE_VIDEO",async()=>{this.roomJoined&&await g(this,We,Ke).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),de.videoOff()})}get mediaPermissions(){return this.localMediaHandler.permissions}get permissions(){return g(this,Fs)}get suggestedTheme(){return g(this,Ra)}get config(){return g(this,Ra)}get roomJoined(){var e;return((e=g(this,We,Ke))==null?void 0:e.roomJoined)===!0}setName(e){if(!e)throw new N("Name cannot be empty.");this.name=e}async setupTracks(e={}){var t,i;return e.forceReset&&(g(this,We,Ke).stopAllProducers(),this.localMediaHandler.removeAllTracks()),this.localMediaHandler.setupStreams({video:(t=e.video)!=null?t:!0,audio:(i=e.audio)!=null?i:!0})}async resetSelf(){var e,t,i,r,n,s,a,o,c,d;de.callEnded(),(i=(t=(e=g(this,We,Ke))==null?void 0:e.sfuHandler)==null?void 0:t.cleanupConsumers)==null||i.call(t),await((s=(n=(r=g(this,We,Ke))==null?void 0:r.sfuHandler)==null?void 0:n.setupTransports)==null?void 0:s.call(n)),await((a=g(this,We,Ke))==null?void 0:a.joinRoom(this.name,!this.localMediaHandler.audioEnabled,g(this,We,Ke).roomUUID,g(this,We,Ke).meetingTitle,{audio:this.localMediaHandler.audioEnabled,video:this.localMediaHandler.videoEnabled,screen:this.localMediaHandler.screenShareEnabled})),this.localMediaHandler.videoEnabled&&await((o=g(this,We,Ke))==null?void 0:o.shareWebcam(this.localMediaHandler.videoTrack)),this.localMediaHandler.audioEnabled&&await((c=g(this,We,Ke))==null?void 0:c.shareMic(this.localMediaHandler.audioTrack)),this.localMediaHandler.screenShareEnabled&&await((d=g(this,We,Ke))==null?void 0:d.shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio})),T.info("DyteSelf::resetSelf")}async destructMediaHandler(){return T.info("DyteSelf::destructMediaHandler"),this.localMediaHandler.destruct()}async removeDocumentEventListeners(){return T.info("DyteSelf::removeDocumentEventListeners"),this.localMediaHandler.removeDocumentEventListeners()}async enableAudio(){if(this.permissions.canProduceAudio!==Xo.notAllowed&&!(g(this,Ra).viewType==="WEBINAR"&&g(this,Fs).canProduceAudio===Xo.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.audioEnabled){if(await this.localMediaHandler.enableAudio(),this.roomJoined){if(this.audioTrack)try{await g(this,We,Ke).shareMic(this.audioTrack)}catch(e){T.error("DyteSelf::enableAudio::Error while sharing mic",{error:e}),this.localMediaHandler.disableAudio()}if(!this.audioEnabled)return;g(this,We,Ke).unmuteSelf()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),de.audioOn()}}async enableVideo(){if(g(this,Fs).canProduceVideo!==Xo.notAllowed&&!(g(this,Ra).viewType==="WEBINAR"&&g(this,Fs).canProduceVideo===Xo.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.videoEnabled){if(await this.localMediaHandler.enableVideo(),this.roomJoined)try{await g(this,We,Ke).shareWebcam(this.videoTrack)}catch(e){T.error("DyteSelf::enableVideo::Error while sharing video",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),T.info("DyteSelf.enableVideo",{...yc(this)}),de.videoOn()}}async enableScreenShare(){if(!this.roomJoined)throw new N("Can`t enable screenshare without joining room");if(g(this,Fs).canProduceScreenshare!==Xo.notAllowed&&!(g(this,Ra).viewType==="WEBINAR"&&g(this,Fs).canProduceScreenshare===Xo.canRequest&&(this.webinarStageStatus==="OFF_STAGE"||this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"))&&!this.screenShareEnabled){if(await this.localMediaHandler.enableScreenShare(),this.screenShareTracks.audio||this.screenShareTracks.video)try{await g(this,We,Ke).shareScreen(this.screenShareTracks)}catch(e){T.error("DyteSelf::enableScreenShare::Error while sharing screen",{error:e}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}}async disableAudio(){this.audioEnabled&&(this.localMediaHandler.disableAudio(),this.roomJoined&&g(this,We,Ke).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),de.audioOff())}async disableVideo(){this.videoEnabled&&(await this.localMediaHandler.disableVideo(),this.roomJoined&&await g(this,We,Ke).pauseWebcam(),this.mediaPermissions.video==="ACCEPTED"&&(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),de.videoOff()))}async disableScreenShare(){this.screenShareEnabled&&(await this.localMediaHandler.disableScreenShare(),this.roomJoined&&await g(this,We,Ke).disableScreenShare(),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks}))}getAllDevices(){return this.localMediaHandler.getAllDevices()}setIsPinned(e,t=!0){$(this,Lu,e);const i=e?"pinned":"unpinned";t&&this.emit(i,this)}get isPinned(){return g(this,Lu)}get webinarStageStatus(){return g(this,Ng)}async pin(){if(!this.roomJoined)throw new N("Can`t pin participants without joining room");return g(this,We,Ke).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new N("Can`t unpin participants without joining room");return g(this,We,Ke).pinPeer(null)}async setDevice(e){const t={added:[e],removed:[]};if("onDeviceChange"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(t,!0);return}switch(e.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(e)}catch{this.roomJoined&&await g(this,We,Ke).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(e);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(e)}catch{this.roomJoined&&await g(this,We,Ke).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:e})}cleanUpTracks(){var e,t,i,r;(e=this.audioTrack)==null||e.stop(),(t=this.rawAudioTrack)==null||t.stop(),(i=this.videoTrack)==null||i.stop(),(r=this.rawVideoTrack)==null||r.stop()}async requestToJoinStage(){if(!this.roomJoined)throw new N("Can`t request to join stage without joining room");if(g(this,yd)!==Zn.Webinar)throw new N("Not allowed to go on stage on non webinar meeting");if(!this.permissions.requestProduce)throw T.error("DyteSelf::requestGoToStage::permission_denied"),new N("User does not have permission to go on stage");await g(this,We,Ke).requestToJoinStage(QS.PRESENT),this.setWebinarStageStatus("REQUESTED_TO_JOIN_STAGE")}async withdrawRequestToJoinStage(){if(!this.roomJoined)throw new N("Can`t request to join stage without joining room");if(g(this,yd)!==Zn.Webinar)throw new N("Not allowed to go on stage on non webinar meeting");this.webinarStageStatus==="REQUESTED_TO_JOIN_STAGE"&&(await g(this,We,Ke).withdrawRequestToJoinStage(),this.setWebinarStageStatus("OFF_STAGE"))}async leaveStage(){if(!this.roomJoined)throw new N("Can`t leave stage without joining room");if(g(this,yd)!==Zn.Webinar)throw new N("Not allowed to leave stage on non webinar meeting");await this.disableScreenShare(),await this.disableVideo(),await this.disableAudio(),this.localMediaHandler.destruct(),await g(this,We,Ke).stopPresenting(),this.setWebinarStageStatus("OFF_STAGE")}async joinStage(){if(!this.roomJoined)throw new N("Can`t join stage without joining room");if(!this.permissions.canPresent&&this.webinarStageStatus!=="ACCEPTED_TO_JOIN_STAGE")throw T.error("DyteSelf::joinStage::permission_denied"),new N("User does not have permission to join stage");await g(this,We,Ke).startPresenting()}setWebinarStageStatus(e){switch($(this,Ng,e),e){case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}async disablePreview(){return this}},yd=new WeakMap,Ra=new WeakMap,Fs=new WeakMap,Lu=new WeakMap,Ng=new WeakMap,We=new WeakSet,Ke=function(){return hi()},zC);$i([C.trace("DyteSelf.setupEvents")],gi.prototype,"setupEvents",1);$i([C.trace("DyteSelf.setupTracks")],gi.prototype,"setupTracks",1);$i([C.trace("DyteSelf.resetSelf")],gi.prototype,"resetSelf",1);$i([C.trace("DyteSelf.destructMediaHandler")],gi.prototype,"destructMediaHandler",1);$i([C.trace("DyteSelf.removeDocumentEventListeners")],gi.prototype,"removeDocumentEventListeners",1);$i([C.trace("DyteSelf.enableAudio")],gi.prototype,"enableAudio",1);$i([C.trace("DyteSelf.enableVideo")],gi.prototype,"enableVideo",1);$i([C.trace("DyteSelf.enableScreenShare")],gi.prototype,"enableScreenShare",1);$i([C.trace("DyteSelf.disableAudio")],gi.prototype,"disableAudio",1);$i([C.trace("DyteSelf.disableVideo")],gi.prototype,"disableVideo",1);$i([C.trace("DyteSelf.disableScreenShare")],gi.prototype,"disableScreenShare",1);$i([C.trace("DyteSelf.setDevice")],gi.prototype,"setDevice",1);$i([C.trace("DyteSelf.requestToJoinStage")],gi.prototype,"requestToJoinStage",1);$i([C.trace("DyteSelf.withdrawRequestToJoinStage")],gi.prototype,"withdrawRequestToJoinStage",1);$i([C.trace("DyteSelf.leaveStage")],gi.prototype,"leaveStage",1);$i([C.trace("DyteSelf.joinStage")],gi.prototype,"joinStage",1);$i([C.trace("DyteSelf.deprecated.disablePreview")],gi.prototype,"disablePreview",1);gi=$i([Yi(e=>{throw new N(e.message,"1100")})],gi);class Aue{constructor(t){_(this,"socket"),this.socket=t}set onReconnect(t){this.socket.onStateEvent("reconnected",t)}async joinRoom(t,i,r,n){const s={capabilities:[],peer:{displayName:t,peerId:i,userId:r},roomUuid:n},a=tce.fromBinary((await this.socket.sendMessagePromise(Xe.joinRoom,dce.toBinary(s))).payload);await M.emitAsync(I.SOCKET_SERVICE_ROOM_JOINED,a);try{const{room:o}=await this.getRoomState();M.emit(I.ROOM_STATE,o)}catch(o){T.error("RoomSocketHandler.joinRoom.failedToGetRoomState",{error:o})}}async getRoomState(){let t=SC.create();try{const i=await this.socket.sendMessagePromise(Xe.getRoomInfo);t=SC.fromBinary(i.payload)}catch(i){T.error("getRoomState::binary_decode_error",{error:i})}return t}leaveRoom(){this.socket.sendMessage(Xe.leaveRoom,uce.toBinary({}))}}function Iue(e){if(!$e.isV2AuthToken)return!1;const t=e;return[t.canProduceAudio,t.canProduceScreenshare,t.canProduceVideo].includes(Li.Allowed)}function uL(e){return ge.hasFeature(ye.LIVESTREAM)?e.viewType!=="LIVESTREAM":!0}var Oue=Object.defineProperty,Mue=Object.getOwnPropertyDescriptor,Bh=(e,t,i,r)=>{for(var n=r>1?void 0:r?Mue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Oue(t,i,n),n},bd,mi,Ri,HC;const pL=(HC=class{constructor(e,t){j(this,mi),_(this,"self"),_(this,"authToken"),_(this,"peerId"),j(this,bd,void 0),_(this,"roomNodeSetupInProgress",!1);var i,r,n,s;$(this,bd,e),this.authToken=(r=(i=hi())==null?void 0:i.authToken)!=null?r:e.authToken,this.peerId=(s=(n=hi())==null?void 0:n.peerId)!=null?s:e.peerId,this.self=t,this.setupEvents()}get roomJoined(){var e;return((e=g(this,mi,Ri))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r,n){var s,a;const o=Ui(),{isV2AuthToken:c}=$e,d=await gi.__init__((a=(s=hi())==null?void 0:s.peerId)!=null?a:e.peerId,$e.isV2AuthToken?t.participant:t,i,r,n),l=c?t.participant.organizationId:t.organizationId;if(C.meetingMetadata.organizationId=l,ge.hasFeature(ye.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"){ge.getValue(ye.CALLSTATS_INGESTION_LAYER);let u="dev";yt.apiBase.indexOf("cluster.dyte")>-1?u="production":yt.apiBase.indexOf("staging.dyte")>-1&&(u="staging"),setTimeout(async()=>{var f,y;de.initialize({peerId:(y=(f=hi())==null?void 0:f.peerId)!=null?y:e.peerId,engineName:Ye.getDeviceInfo().engineName,env:u,iceServers:await o.getICEServers(),apiBase:yt.apiBase,flags:ge.getAllFlags(),logger:T})})}return new pL(e,d)}async shareMediaTracks(){await Promise.all([this.self.videoTrack&&g(this,mi,Ri).shareWebcam(this.self.videoTrack),this.self.audioTrack&&g(this,mi,Ri).shareMic(this.self.audioTrack)])}setupEvents(){M.on(I.DISABLE_AUDIO,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),de.audioOff())}),M.on(I.DISABLE_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),de.videoOff())}),M.on(I.MUTE_ALL,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),de.audioOff())}),M.on(I.MUTE_ALL_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),de.videoOff())}),M.on(I.WAITLISTED,()=>{this.self.waitlistStatus="waiting",this.self.roomState="waitlisted",this.self.emit("waitlisted")}),M.on(I.WAITLIST_ACCEPTED,async()=>{if(this.self.waitlistStatus==="accepted"){T.warn("SelfController.WAITLIST_ACCEPTED.UserAlreadyAccepted");return}this.self.waitlistStatus="accepted",this.joinRoom()}),M.on(I.WAITLIST_REJECTED,async()=>{if(this.self.waitlistStatus==="rejected"){T.warn("SelfController.WAITLIST_REJECTED.UserAlreadyRejected");return}this.self.waitlistStatus="rejected",this.leaveRoom("rejected")}),M.on(I.KICKED,async e=>{let t="kicked";(e==null?void 0:e.kickType)==="kickAll"&&(t="ended"),this.leaveRoom(t)}),M.on(I.SELF_ROOM_JOINED,()=>{this.self.config.viewType==="WEBINAR"&&this.self.permissions.canPresent&&this.self.joinStage(),this.self.roomState="joined",this.self.emit("roomJoined")}),M.on(I.SOCKET_SERVICE_ROOM_JOINED,()=>{this.self.emit("socketServiceRoomJoined")}),M.on(I.MEDIA_PERMISSION_UPDATE,async e=>{if(e.message==="ACCEPTED"){const t=this.self.getCurrentDevices(),i=await this.self.getAudioDevices(),r=await this.self.getVideoDevices(),n=await this.self.getSpeakerDevices();switch(e==null?void 0:e.kind){case"audio":!t.audio&&i.length>0&&this.self.setDevice(i[0]),!t.speaker&&n.length>0&&this.self.setDevice(n[0]);break;case"video":!t.video&&r.length>0&&this.self.setDevice(r[0]);break}}this.self.emit("mediaPermissionUpdate",e)}),M.on(I.MEDIA_PERMISSION_ERROR,async e=>{const{kind:t,message:i}=e;t==="audio"?(de.mediaPermission("AUDIO",h1(i)),this.self.disableAudio()):t==="video"?(de.mediaPermission("VIDEO",h1(i)),this.self.disableVideo()):t==="screenshare"&&(de.mediaPermission("VIDEO",h1(i)),this.self.disableScreenShare()),T.error("SelfController::mediaPermissionError",{error:{message:e.message},constraints:e.constraints,mediaPermissionsErrors:{kind:t,message:i}}),this.self.emit("mediaPermissionError",e),this.self.emit("mediaPermissionUpdate",{message:i,kind:t})}),M.on(I.REQUEST_TO_JOIN_STAGE_ACCEPTED,()=>{this.self.setWebinarStageStatus(wi.ACCEPTED_TO_JOIN_STAGE),this.self.emit("joinStageRequestAccepted")}),M.on(I.REQUEST_TO_JOIN_STAGE_REJECTED,()=>{this.self.setWebinarStageStatus(wi.OFF_STAGE),this.self.emit("joinStageRequestRejected")}),M.on(I.REMOVED_FROM_STAGE,async()=>{this.self.setWebinarStageStatus(wi.OFF_STAGE),await this.self.disableScreenShare(),await this.self.disableVideo(),await this.self.disableAudio(),this.self.destructMediaHandler(),this.self.emit("removedFromStage")}),M.on(I.STARTED_PRESENTING,()=>{this.self.setWebinarStageStatus(wi.ON_STAGE),this.self.emit("stageJoined")}),M.on(I.STOPPED_PRESENTING,()=>{this.self.setWebinarStageStatus(wi.OFF_STAGE),this.self.emit("stageLeft")}),M.on(I.PRODUCER_SCORE_UPDATE,({score:e,kind:t,appData:i})=>{var r;const n=t==="video"&&((r=i==null?void 0:i.screenShare)!=null?r:!1);this.self.emit("mediaScoreUpdate",{kind:t,isScreenshare:n,score:e})}),M.on(I.PRODUCER_STATUS_UPDATE,({status:e})=>{this.self.emit("mediaChannelUpdate",{status:e})}),M.onAsync(I.JOIN_MEDIA_ROOM,this.setupRoomNode.bind(this)),M.onAsync(I.LEAVE_MEDIA_ROOM,this.leaveMediaRoom.bind(this))}async setupRoomNode(){var e,t,i;if(this.roomNodeSetupInProgress){T.warn("SelfController.roomNodeSetupInProgress");return}if((e=g(this,mi,Ri))!=null&&e.roomJoined){T.warn("SelfController.roomNodeAlreadySetup");return}this.roomNodeSetupInProgress=!0;const r=$e.roomNodeOptions;await tL({...r,roomName:r.roomName,peerId:r.peerId});let n="";if(g(this,mi,Ri)instanceof ot){await g(this,mi,Ri).setupTransports();const s=await g(this,mi,Ri).getRoomState();({roomUUID:n}=(i=(t=s==null?void 0:s.payload)==null?void 0:t.roomState)!=null?i:{}),Ui().setRoomUUID(n)}await this.joinMediaRoom(n),this.roomNodeSetupInProgress=!1}async joinRoom(){var e,t;try{const i=Ui();let r="";if(g(this,mi,Ri)instanceof ot){const s=await g(this,mi,Ri).getRoomState();({roomUUID:r}=(t=(e=s==null?void 0:s.payload)==null?void 0:e.roomState)!=null?t:{}),i.setRoomUUID(r)}const n=new Aue(g(this,bd));(VD(this.self.config.viewType,g(this,bd).capabilities)||hh("chat_socket_server")==="socket-service")&&(await n.joinRoom(this.self.name,this.self.id,this.self.userId,r),n.socket.flush(),n.onReconnect=async()=>{await n.joinRoom(this.self.name,this.self.id,this.self.userId,r),n.socket.flush()}),uL(this.self.config)&&await this.joinMediaRoom(r)}catch(i){throw T.error("Error in joinRoom",{error:i}),i}}async leaveRoom(e="left"){var t;const{roomJoined:i}=this;await this.leaveMediaRoom();try{(t=g(this,bd))==null||t.disconnect()}catch{T.error("SelfController::leaveRoom::socketDisconnect")}this.self.roomState=e,qle(),!(this.self.config.viewType!=="LIVESTREAM"&&!i)&&this.self.emit("roomLeft",{state:e})}async joinMediaRoom(e){var t,i,r,n;if((t=g(this,mi,Ri))!=null&&t.isDisconnected&&g(this,mi,Ri)instanceof ot){(i=g(this,mi,Ri))==null||i.reconnect();return}const{roomJoined:s}=(n=await((r=g(this,mi,Ri))==null?void 0:r.joinRoom(this.self.name,!this.self.audioEnabled,e,void 0,{audio:this.self.audioEnabled,video:this.self.videoEnabled,screen:this.self.screenShareEnabled})))!=null?n:{};g(this,mi,Ri)instanceof Me&&(g(this,mi,Ri).onSocketReconnection=this.joinMediaRoom.bind(this,e)),s&&await this.shareMediaTracks()}async leaveMediaRoom(){await this.cleanupSelf(),g(this,mi,Ri)&&this.roomJoined&&(await g(this,mi,Ri).leaveRoom(),g(this,mi,Ri).roomJoined=!1)}async cleanupSelf(){await this.self.disableAudio(),await this.self.disableVideo(),await this.self.disableScreenShare(),this.self.cleanUpTracks(),this.self.destructMediaHandler(),this.self.removeDocumentEventListeners()}},bd=new WeakMap,mi=new WeakSet,Ri=function(){return hi()},HC);let Zl=pL;Bh([C.trace("SelfController.setupEvents")],Zl.prototype,"setupEvents",1);Bh([C.trace("SelfController.joinRoom")],Zl.prototype,"joinRoom",1);Bh([C.trace("SelfController.leaveRoom")],Zl.prototype,"leaveRoom",1);Bh([C.trace("SelfController.joinMediaRoom")],Zl.prototype,"joinMediaRoom",1);Bh([C.trace("SelfController.leaveMediaRoom")],Zl.prototype,"leaveMediaRoom",1);var Due=Object.defineProperty,Lue=Object.getOwnPropertyDescriptor,Io=(e,t,i,r)=>{for(var n=r>1?void 0:r?Lue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Due(t,i,n),n},Nu,In,gs,_d,GC;let _n=(GC=class extends ti{constructor(e,t){super(),j(this,In),_(this,"id"),_(this,"userId"),_(this,"name"),_(this,"picture"),_(this,"isHost"),_(this,"clientSpecificId"),_(this,"flags"),_(this,"device"),_(this,"videoTrack"),_(this,"audioTrack"),_(this,"screenShareTracks"),_(this,"videoEnabled"),_(this,"audioEnabled"),_(this,"screenShareEnabled"),_(this,"producers"),j(this,Nu,void 0),_(this,"supportsRemoteControl",!1),_(this,"webinarStageStatus",wi.OFF_STAGE),_(this,"presetName"),j(this,_d,void 0);const{id:i,userId:r,displayName:n,device:s,picture:a,isHost:o,flags:c,clientSpecificId:d,customParticipantId:l,audioMuted:u,audioTrack:f,videoEnabled:y=!1,videoTrack:b,producers:k,metadata:P}=e;this.id=i,this.userId=r,this.name=n,this.device=s,this.picture=a,this.isHost=o,this.flags=c,this.clientSpecificId=l!=null?l:d,this.audioEnabled=!u,this.audioTrack=f,this.videoEnabled=y,this.videoTrack=b,this.screenShareTracks={audio:void 0,video:void 0},this.producers=k!=null?k:[],this.presetName=P==null?void 0:P.preset_name,$(this,Nu,!1),$(this,_d,t)}get roomJoined(){var e;return((e=g(this,In,gs))==null?void 0:e.roomJoined)===!0}setVideoEnabled(e,t=!0){this.videoEnabled=e,t&&(T.info("DyteParticipant::setVideoEnabled::videoUpdate",{...yc(this)}),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}))}setAudioEnabled(e,t=!0){this.audioEnabled=e,t&&(T.info("DyteParticipant::setAudioEnabled::audioUpdate",{...yc(this)}),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}))}setScreenShareEnabled(e,t=!0){this.screenShareEnabled=e,t&&this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}async pin(){if(!this.roomJoined)throw new N("Can`t pin participant without joining room");return g(this,In,gs).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new N("Can`t unpin participant without joining room");return g(this,In,gs).pinPeer(null)}setIsPinned(e,t=!0){$(this,Nu,e);const i=e?"pinned":"unpinned";t&&this.emit(i,this)}async disableAudio(){const e=this.id;if(T.info("DyteParticipant::disable_audio",{dyteParticipant:{id:e}}),!this.roomJoined)throw new N("Can`t disable participant audio without joining room");if(g(this,_d).permissions.canDisableParticipantAudio)return g(this,In,gs).disableAudio(e);throw T.error("DyteParticipant::unauthorized_disable_audio",{dyteParticipant:{id:e}}),new N("Unauthorized: User does not have permission to disable participant audio.")}async kick(){const e=this.id;if(T.info("DyteParticipant::kick",{dyteParticipant:{id:e}}),!this.roomJoined)throw new N("Can`t kick participant without joining room");if(g(this,_d).permissions.kickParticipant)return g(this,In,gs).kick(e);throw T.error("DyteParticipant::unauthorized_kick",{dyteParticipant:{id:e}}),new N("Unauthorized: User does not have permission to kick participants.")}async disableVideo(){const e=this.id;if(T.info("DyteParticipant::disable_video",{dyteParticipant:{id:e}}),!this.roomJoined)throw new N("Can`t disable participant video without joining room");if(g(this,_d).permissions.canDisableParticipantVideo)return g(this,In,gs).disableVideo(e);throw T.error("DyteParticipant::unauthorized_disable_video",{dyteParticipant:{id:e}}),new N("Unauthorized: User does not have permission to disable participant video.")}async acceptJoinStageRequest(){if(!this.roomJoined)throw new N("Can`t acceptJoinStageRequest for participant without joining room");g(this,In,gs).acceptAllRequestToJoinStage([{id:this.id,requestToJoinType:QS.PRESENT}])}async rejectRequestToJoinStage(){if(!this.roomJoined)throw new N("Can`t rejectRequestToJoinStage for participant without joining room");g(this,In,gs).rejectRequestToJoinStage(this.id)}async removeFromStage(){if(!this.roomJoined)throw new N("Can`t removeFromStage participant without joining room");g(this,In,gs).removePeerFromStage(this.id,YS.REQUESTED_BY_MODERATOR)}setWebinarStageStatus(e){this.webinarStageStatus=e;let t;e===wi.OFF_STAGE&&(t="peerStoppedPresenting"),e===wi.ON_STAGE&&(t="peerStartedPresenting"),e===wi.ACCEPTED_TO_JOIN_STAGE&&(t="peerAcceptedToJoinStage"),e===wi.REQUESTED_TO_JOIN_STAGE&&(t="peerRequestToJoinStage"),t&&this.emit(t,this)}get isPinned(){return g(this,Nu)}},Nu=new WeakMap,In=new WeakSet,gs=function(){return hi()},_d=new WeakMap,GC);Io([C.trace("DyteParticipant.disableAudio")],_n.prototype,"disableAudio",1);Io([C.trace("DyteParticipant.kick")],_n.prototype,"kick",1);Io([C.trace("DyteParticipant.disableVideo")],_n.prototype,"disableVideo",1);Io([C.trace("DyteParticipant.acceptJoinStageRequest")],_n.prototype,"acceptJoinStageRequest",1);Io([C.trace("DyteParticipant.rejectRequestToJoinStage")],_n.prototype,"rejectRequestToJoinStage",1);Io([C.trace("DyteParticipant.removeFromStage")],_n.prototype,"removeFromStage",1);Io([C.trace("DyteParticipant.setWebinarStageStatus")],_n.prototype,"setWebinarStageStatus",1);_n=Io([Yi(e=>{throw new N(e.message,"1200")})],_n);var yi,Ad;class oE extends Map{constructor(t){const{onAddEvent:i="added",onDeleteEvent:r="deleted",onClearEvent:n="cleared"}=t!=null?t:{};super(),j(this,yi,void 0),j(this,Ad,void 0),_(this,"onAddEvent"),_(this,"onDeleteEvent"),_(this,"onClearEvent"),$(this,yi,new ti),this.onAddEvent=i,this.onDeleteEvent=r,this.onClearEvent=n,$(this,Ad,new Map)}emit(t,...i){return g(this,yi).emit(t,...i)}on(t,i){return g(this,yi).on(t,i)}addListener(t,i){return g(this,yi).addListener(t,i)}off(t,i){return g(this,yi).off(t,i)}once(t,i){return g(this,yi).once(t,i)}prependListener(t,i){return g(this,yi).prependListener(t,i)}prependOnceListener(t,i){return g(this,yi).prependOnceListener(t,i)}removeListener(t,i){return g(this,yi).removeListener(t,i)}removeAllListeners(t){return g(this,yi).removeAllListeners(t)}listeners(t){return g(this,yi).listeners(t)}listenerCount(t){return g(this,yi).listenerCount(t)}getMaxListeners(){return g(this,yi).getMaxListeners()}setMaxListeners(t){return g(this,yi).setMaxListeners(t)}eventNames(){return g(this,yi).eventNames()}add(t,i=!0){return this.set(t.id,t,i)}set(t,i,r=!0){const n=super.set(t,i),s=(a,...o)=>{this.emit(a,i,...o)};return g(this,Ad).set(t,s),i.on("*",s),r&&g(this,yi).emit(this.onAddEvent,i),n}delete(t,i=!0,r=!1){const n=this.get(t);if(!n)return!1;n.removeListener("*",g(this,Ad).get(t));const s=super.delete(t);return r&&n.removeAllListeners(),i&&g(this,yi).emit(this.onDeleteEvent,n),s}clear(t=!0,i=!1){this.forEach(n=>{n.removeListener("*",g(this,Ad).get(n.id)),i&&n.removeAllListeners()});const r=super.clear();return t&&g(this,yi).emit(this.onClearEvent),r}toArray(){return Array.from(this.values())}}yi=new WeakMap,Ad=new WeakMap;class Ug extends oE{constructor(t){const{onAddEvent:i="participantJoined",onDeleteEvent:r="participantLeft",onClearEvent:n="participantsCleared"}=t!=null?t:{};super({onAddEvent:i,onDeleteEvent:r,onClearEvent:n})}add(t,i=!0){return super.add(t,i)}clear(t=!0,i=!1){return super.clear(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}class Nue{constructor(){_(this,"_orderedArray"),_(this,"_map"),this._map=new Map,this._orderedArray=[]}add(t,i){if(!this._map.has(t))return this._map.set(t,{peerId:t,priority:i}),this._orderedArray.splice(Math.max(i-1,0),0,t),this.index(t);const r=this.index(t);this.delete(t);const n=this.add(t,i);return r!==n?(T.info("DyteSelectedPeer::add()::new_position_for_active_speaker",{selectedPeer:{oldIndex:r,newIndex:n}}),n):-1}delete(t){if(this._map.has(t)){const i=this.index(t);this._map.delete(t),this._orderedArray.splice(i,1)}}index(t){return this._map.has(t)?this._orderedArray.indexOf(t):-1}[Symbol.iterator](){return this._orderedArray[Symbol.iterator]()}}class Uue{constructor(){_(this,"_activeSpeakerPeers"),_(this,"_compulsoryPeers"),this._activeSpeakerPeers=new Nue,this._compulsoryPeers=new Set}add(t,i){return i<0?(this._compulsoryPeers.add(t),0):this.compulsoryPeers.includes(t)&&(i>0||i===246267631)&&(T.info("DyteSelectedPeer::removing_compulsory_peer",{selectedPeer:{peerId:t}}),this._removeFromCompulsoryPeer(t),i===246267631)?-1:this._activeSpeakerPeers.add(t,i)}delete(t){T.info("DyteSelectedPeer::deleting_peer_from_selectedPeer",{selectedPeer:{peerId:t}}),this._removeFromCompulsoryPeer(t),this._activeSpeakerPeers.delete(t)}index(t){return this._activeSpeakerPeers.index(t)}get peers(){return[...new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers))]}get compulsoryPeers(){return[...this._compulsoryPeers.values()]}get peerPriorities(){return[...this._activeSpeakerPeers].map((t,i)=>i)}get activeSpeakerPeers(){return[...this._activeSpeakerPeers]}_removeFromCompulsoryPeer(t){this._compulsoryPeers.delete(t)}}var jue=Object.defineProperty,$ue=Object.getOwnPropertyDescriptor,ns=(e,t,i,r)=>{for(var n=r>1?void 0:r?$ue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&jue(t,i,n),n},Oi,Vi,Wo,WC;let tn=(WC=class extends ti{constructor(e){super(),j(this,Oi),_(this,"waitlisted"),_(this,"joined"),_(this,"active"),_(this,"pinned"),j(this,Wo,void 0),_(this,"viewMode"),_(this,"currentPage"),_(this,"lastActiveSpeaker"),_(this,"selectedPeers"),$(this,Wo,e),this.waitlisted=new Ug,this.joined=new Ug,this.active=new Ug,this.pinned=new Ug,this.selectedPeers=new Uue,this.viewMode="ACTIVE_GRID",this.currentPage=0}get roomJoined(){var e;return((e=g(this,Oi,Vi))==null?void 0:e.roomJoined)===!0}get count(){return this.joined.size}get maxActiveParticipantsCount(){var e,t,i;if(g(this,Oi,Vi)instanceof ot)return g(this,Oi,Vi).maxPreferredStreams;const r=g(this,Wo).suggestedTheme;return(i=(t=(e=r==null?void 0:r.grid)==null?void 0:e.multi)==null?void 0:t.maxVideoCount)!=null?i:6}get pageCount(){return this.viewMode==="PAGINATED"?Math.ceil(this.joined.size/this.maxActiveParticipantsCount):0}async acceptWaitingRoomRequest(e){if(!this.roomJoined)throw new N("Can`t accept waiting room request without joining room");return g(this,Oi,Vi).acceptWaitingRequest(e)}async rejectWaitingRoomRequest(e){if(!this.roomJoined)throw new N("Can`t reject waiting room request without joining room");await g(this,Oi,Vi).rejectWaitingRequest(e),this.waitlisted.delete(e)}async setViewMode(e){if(T.info("DyteParticipants::set_view_mode",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),!["ACTIVE_GRID","PAGINATED"].includes(e))throw T.error("DyteParticipants::setViewMode::invalid_view_mode",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new N(`Invalid view mode: ${e}. Try ACTIVE_GRID or PAGINATED.`);if(this.viewMode===e){T.info("DyteParticipants::setViewMode::view_mode_same_as_previous",{pageNavigation:{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});return}if(this.viewMode=e,e==="PAGINATED"){this.currentPage=1;let t=[];g(this,Oi,Vi)instanceof ot?{peerIds:t}=(await g(this,Oi,Vi).getPage(this.currentPage)).payload:t=this.getPeerIdsForCurrentPage(),M.emit(I.GET_PAGE,{peerIds:t})}else e==="ACTIVE_GRID"&&(this.currentPage=0,g(this,Oi,Vi)instanceof ot?g(this,Oi,Vi).getPage(this.currentPage):M.emit(I.REFRESH_GRID));this.emit("viewModeChanged",{viewMode:e,currentPage:this.currentPage,pageCount:this.pageCount})}getPeerIdsForCurrentPage(){T.info("DyteParticipants::getPeerIdsForCurrentPage()",{pageNavigation:{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});const{compulsoryPeers:e}=this.selectedPeers,t=[...this.joined.keys()],i=Math.max((this.currentPage-1)*(this.maxActiveParticipantsCount-e.length)),r=this.currentPage*(this.maxActiveParticipantsCount-e.length);return e.concat(t.slice(i,r))}async setPage(e){if(T.info("DyteParticipants::set_page",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),this.viewMode!=="PAGINATED")return;if(!Number.isInteger(e))throw T.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new N(`Invalid page: ${e}. Page must be an integer.`);if(e<1||e>this.pageCount)throw T.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:e,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new N(`Invalid page: ${e}. Page must be greater than 0 and less than or equal to ${this.pageCount}.`);this.currentPage=e;let t=[];g(this,Oi,Vi)instanceof ot?{peerIds:t}=(await g(this,Oi,Vi).getPage(e)).payload:t=this.getPeerIdsForCurrentPage(),M.emit(I.GET_PAGE,{peerIds:t}),this.emit("pageChanged",{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount})}async disableAllAudio(e){if(T.info("DyteParticipants::disable_all_audio",{actions:{disableAllAudio:{allowUnmute:e}}}),!this.roomJoined)throw new N("Can`t disable all audio without joining room");if(g(this,Wo).permissions.canAllowParticipantAudio)return g(this,Oi,Vi).muteAll(e);throw T.error("DyteParticipants::unauthorized_disable_all_audio",{actions:{disableAllAudio:{allowUnmute:e}}}),new N("Unauthorized: User does not have permission to disable peer audio.")}async disableAllVideo(){if(T.info("DyteParticipants::disable_all_video"),!this.roomJoined)throw new N("Can`t disable all video without joining room");if(g(this,Wo).permissions.canAllowParticipantVideo)return g(this,Oi,Vi).muteAllVideo();throw T.error("DyteParticipants::unauthorized_disable_all_video"),new N("Unauthorized: User does not have permission to disable peer video.")}async disableAudio(e){this.joined.get(e).disableAudio()}async disableVideo(e){this.joined.get(e).disableVideo()}async kick(e){this.joined.get(e).kick()}async kickAll(){if(T.info("DyteParticipants::kick_all"),!this.roomJoined)throw new N("Can`t kick all without joining room");if(g(this,Wo).permissions.kickParticipant)return g(this,Oi,Vi).kickAll();throw T.error("DyteParticipants::unauthorized_kick_all"),new N("Unauthorized: User does not have permission to kick peers.")}async broadcastMessage(e,t){if(T.info("DyteParticipants::broadcastMessage"),!this.roomJoined)throw new N("Can`t broadcast message without joining room");if(!(e!=null&&e.trim()))throw new N("`type` must be a non-empty string.");g(this,Oi,Vi).broadcastMessage(e,t)}async acceptAllRequestToJoinStageRequests(e){if(!this.roomJoined)throw new N("Can`t acceptAllRequestToJoinStageRequests without joining room");g(this,Oi,Vi).acceptAllRequestToJoinStage(e)}},Oi=new WeakSet,Vi=function(){return hi()},Wo=new WeakMap,WC);ns([C.trace("DyteParticipants.setViewMode")],tn.prototype,"setViewMode",1);ns([C.trace("DyteParticipants.setPage")],tn.prototype,"setPage",1);ns([C.trace("DyteParticipants.disableAllAudio")],tn.prototype,"disableAllAudio",1);ns([C.trace("DyteParticipants.disableAllVideo")],tn.prototype,"disableAllVideo",1);ns([C.trace("DyteParticipants.disablePeerAudio")],tn.prototype,"disableAudio",1);ns([C.trace("DyteParticipants.disablePeerVideo")],tn.prototype,"disableVideo",1);ns([C.trace("DyteParticipants.kickPeer")],tn.prototype,"kick",1);ns([C.trace("DyteParticipants.kickAll")],tn.prototype,"kickAll",1);ns([C.trace("DyteParticipants.broadcastMessage")],tn.prototype,"broadcastMessage",1);ns([C.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")],tn.prototype,"acceptAllRequestToJoinStageRequests",1);tn=ns([Yi(e=>{throw new N(e.message,"1200")})],tn);var Fue=Object.defineProperty,Bue=Object.getOwnPropertyDescriptor,ed=(e,t,i,r)=>{for(var n=r>1?void 0:r?Bue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Fue(t,i,n),n},Gi,Id,Bs,zt,Yt;class Oo{constructor(t){j(this,zt),_(this,"participants"),j(this,Gi,void 0),j(this,Id,void 0),j(this,Bs,new Set),this.participants=new tn(t),$(this,Id,new Map),$(this,Gi,t),this.setupEvents()}get roomJoined(){var t;return((t=g(this,zt,Yt))==null?void 0:t.roomJoined)===!0}updatePageParticipants(t){const i=new Set(t),r=new Map(this.participants.active);if(this.participants.active.forEach((n,s)=>{this.participants.active.delete(s,!i.has(s))}),i.forEach(n=>{if(!this.participants.joined.get(n)){T.warn("updatePageParticipants::participant_not_in_joined_list",{dyteParticipant:{id:n}});return}this.participants.active.add(this.participants.joined.get(n),!r.get(n))}),g(this,zt,Yt)instanceof Me){$(this,Bs,new Set(this.participants.active.keys())),Array.from(r.keys()).forEach(s=>{if(i.has(s))return;const a=this.participants.joined.get(s);if(!a)return;const o={producers:a.producers,peerId:a.id};g(this,zt,Yt).deactivatePeers(o)});const n=[];this.participants.active.forEach(s=>{const a={peerId:s.id,producers:s.producers};n.push(a)}),g(this,zt,Yt).activatePeers(n)}}updatePinnedParticipants(){this.participants.pinned.forEach(t=>{t.setIsPinned(!1),this.participants.pinned.delete(t.id)})}refreshGridParticipants(t=!1){const i=[...this.participants.joined.keys()],r=this.participants.selectedPeers.peers;if(this.participants.viewMode!=="ACTIVE_GRID"){T.warn("ParticipantController::refreshGridParticipants::not_refreshing_grid_in_not_active_grid_mode");return}const n=this.participants.maxActiveParticipantsCount-1,s=new Set(r.filter(c=>c!==g(this,Gi).id));let a=[...s];const o=n-s.size;if(o>=0){const c=i.filter(d=>!s.has(d)&&d!==g(this,Gi).id).slice(0,o);a=[...s].concat(c)}else a=a.slice(0,n);this.updateActiveParticipantsHiveNode(a,t)}updateActiveParticipantsHiveNode(t,i=!1){if(!this.roomJoined){T.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const r=Array.from(this.participants.active.keys()),n=new Map(this.participants.active),s={};t.forEach(l=>{s[l]=!0});const a=[];r.forEach((l,u)=>{(!s[l]||!this.participants.joined.get(l))&&a.push(u)}),t.forEach(l=>{n.get(l)||(r.length<t.length?r.push(l):r[a.shift()]=l)}),r.forEach((l,u)=>{s[l]||r.splice(u,1)}),Array.from(this.participants.active.keys()).forEach(l=>{this.participants.active.delete(l,!s[l])}),r.forEach(l=>{if(!this.participants.joined.get(l)){T.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:l}});return}this.participants.active.add(this.participants.joined.get(l),!n.get(l))}),this.updateWebinarStatusForJoinedParticipants(t),this.participants.active.emit("participantsUpdate"),T.info("ParticipantController::updateActiveParticipants::updating_current_selected_peers",{debuggingHint:i?"Forcefully updating currentActiveGridParticipants set":null}),i&&$(this,Bs,new Set);const o=new Set(t),c=[],d=[];if(g(this,Bs).forEach(l=>{o.has(l)||c.push(l)}),o.forEach(l=>{g(this,Bs).has(l)||d.push(l)}),$(this,Bs,o),d.length===0&&c.length===0){T.info("ParticipantController::updateActiveParticipants::current_selected_peers_is_same");return}if(g(this,zt,Yt)instanceof Me){const l=[];c.forEach(u=>{const f=this.participants.joined.get(u);if(!f)return;const y={producers:f.producers,peerId:f.id};l.push(g(this,zt,Yt).deactivatePeers(y))}),Promise.all(l).then(()=>{const u=[];d.forEach(f=>{const y=this.participants.active.get(f);if(!y){T.warn("peer is not in active map which is going to activate, should not happen",{dyteParticipant:{id:f}});return}const b={peerId:y.id,producers:y.producers};u.push(b)}),g(this,zt,Yt).activatePeers(u)}).catch(u=>{T.info("Error on deactivating peers",u)})}}updateActiveParticipants(t){if(!this.roomJoined){T.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const i=Array.from(this.participants.active.keys()),r=new Map(this.participants.active),n={};t.forEach(a=>{n[a]=!0});const s=[];i.forEach((a,o)=>{(!n[a]||!this.participants.joined.get(a))&&s.push(o)}),t.forEach(a=>{r.get(a)||(i.length<t.length?i.push(a):i[s.shift()]=a)}),i.forEach((a,o)=>{n[a]||i.splice(o,1)}),Array.from(this.participants.active.keys()).forEach(a=>{this.participants.active.delete(a,!n[a])}),i.forEach(a=>{if(!this.participants.joined.get(a)){T.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:a}});return}this.participants.active.add(this.participants.joined.get(a),!r.get(a))}),this.updateWebinarStatusForJoinedParticipants(t),this.participants.active.emit("participantsUpdate")}updateActiveParticipantsWithPriorities(t,i=!1){if(!this.roomJoined){T.warn("Skipped::ParticipantController::updateActiveParticipantsWithPriorities",{roomJoined:this.roomJoined});return}t.forEach(r=>{this.participants.joined.get(r.peerId)&&this.participants.selectedPeers.add(r.peerId,r.priority)}),i&&this.refreshGridParticipants()}setupEvents(){M.on(I.PEER_JOINED,async t=>{var i,r,n;const s=new _n(t,g(this,Gi));g(this,Gi).id!==s.id&&!((i=t.flags)!=null&&i.recorder)&&!((r=s.flags)!=null&&r.hidden_participant)&&!((n=s.flags)!=null&&n.hiddenParticipant)&&(this.participants.joined.add(s),this.participants.waitlisted.delete(s.id),this.participants.currentPage===this.participants.pageCount&&g(this,zt,Yt)instanceof ot&&M.emit(I.GET_PAGE,(await g(this,zt,Yt).getPage(this.participants.currentPage)).payload))}),M.on(I.WAITLIST_PEER_ADDED,({id:t,name:i})=>{this.participants.waitlisted.add(new _n({id:t,displayName:i,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,userId:void 0,flags:{},isHost:!1},g(this,Gi)))}),M.on(I.WAITLIST_PEER_REMOVED,({id:t})=>{this.participants.waitlisted.delete(t)}),M.on(I.ROOM_JOINED,t=>{g(this,zt,Yt)instanceof Me&&this.participants.joined.clear(),t.peers.forEach(i=>{var r,n,s;if((r=i.flags)!=null&&r.recorder||(n=i.flags)!=null&&n.hidden_participant||(s=i.flags)!=null&&s.hiddenParticipant)return;const a=new _n(i,g(this,Gi));a.id===t.pinnedPeerId&&(a.setIsPinned(!0,!1),this.participants.pinned.add(a)),this.participants.joined.add(a)}),t.requestToJoinPeersList&&t.requestToJoinPeersList.forEach(({id:i})=>{var r;(r=this.participants.joined.get(i))==null||r.setWebinarStageStatus(wi.REQUESTED_TO_JOIN_STAGE)}),g(this,zt,Yt)instanceof ot&&g(this,zt,Yt).getPage(this.participants.currentPage)}),M.on(I.PEER_CLOSED,async({id:t})=>{if(this.participants.joined.delete(t,!0,!0),this.participants.pinned.delete(t,!0,!0),g(this,zt,Yt)instanceof Me&&(this.participants.selectedPeers.delete(t),this.participants.active.get(t)&&this.participants.currentPage===0)){this.refreshGridParticipants();return}const{currentPage:i}=this.participants,r=g(this,Gi).config.maxVideoStreams,n=(Ye.isMobile()?r.mobile:r.desktop)*(i-1),s=this.participants.active.get(t);if(n===0)this.participants.setViewMode("ACTIVE_GRID");else if(this.participants.joined.size<=n)i===2?this.participants.setViewMode("ACTIVE_GRID"):this.participants.setPage(i-1);else if(s){let a=[];g(this,zt,Yt)instanceof ot?{peerIds:a}=(await g(this,zt,Yt).getPage(i)).payload:a=this.participants.getPeerIdsForCurrentPage(),M.emit(I.GET_PAGE,{peerIds:a})}}),M.on(I.ROOM_NODE_DISCONNECTED,()=>{Array.from(this.participants.joined.keys()).forEach(t=>{this.participants.joined.delete(t)}),Array.from(this.participants.active.keys()).forEach(t=>{this.participants.active.delete(t)}),Array.from(this.participants.pinned.keys()).forEach(t=>{this.participants.pinned.delete(t)}),this.participants.currentPage=0,this.participants.viewMode="ACTIVE_GRID",this.participants.emit("viewModeChanged",{viewMode:"ACTIVE_GRID",currentPage:this.participants.currentPage,pageCount:this.participants.pageCount}),$(this,Bs,new Set)}),M.on(I.PEER_MUTED,({peerId:t})=>{const i=this.participants.joined.get(t);i&&i.setAudioEnabled(!1)}),M.on(I.PEER_UNMUTED,({peerId:t})=>{const i=this.participants.joined.get(t);i&&i.setAudioEnabled(!0)}),M.on(I.CONSUMER_PAUSED,({id:t})=>{this.processConsumerPaused(t)}),M.on(I.CONSUMER_RESUMED,({id:t})=>{this.processConsumerResumed(t)}),M.on(I.NEW_CONSUMER,({id:t})=>{this.processNewConsumer(t)}),M.on(I.CONSUMER_CLOSED,({id:t})=>{this.processConsumerClosed(t)}),M.on(I.GET_PAGE,({peerIds:t})=>{this.participants.viewMode==="PAGINATED"&&this.updatePageParticipants(t)}),M.on(I.SELECTED_PEERS,({peerIds:t,compulsoryPeers:i})=>{if(this.participants.viewMode!=="ACTIVE_GRID")return;if(g(this,zt,Yt)instanceof ot){this.updateActiveParticipants(t);return}const r=t.map((s,a)=>({peerId:s,priority:a+1})),n=i==null?void 0:i.map((s,a)=>({peerId:s,priority:-(a+1)}));r.push(...n!=null?n:[]),r.length>0&&this.updateActiveParticipantsWithPriorities(r)}),M.on(I.SELECTED_PEERS_DIFF,({entries:t})=>{this.participants.viewMode==="ACTIVE_GRID"&&this.updateActiveParticipantsWithPriorities(t,!0)}),M.on(I.REFRESH_GRID,(t=!1)=>{this.participants.viewMode==="ACTIVE_GRID"&&this.refreshGridParticipants(t)}),M.on(I.NEW_PRODUCER,({peerId:t,producer:i})=>{const r=this.participants.joined.get(t);if(!r){T.warn("ParticipantController::NEW_PRODUCER::participant not found",{producer:{id:i==null?void 0:i.producerId,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}},dyteParticipant:{id:t}});return}r.producers.push(i),T.info("ParticipantController::NEW_PRODUCER::producer_added_to_participant",{producer:{id:i==null?void 0:i.producerId,peerId:t,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}}),(i==null?void 0:i.kind)==="audio"||i!=null&&i.screenShare||g(this,Bs).has(t)?g(this,zt,Yt).createConsumer({producingPeerId:t,producerId:i.producerId,screenShare:i.screenShare}):T.info("ParticipantController::NEW_PRODUCER::not_consuming_producer",{producer:{id:i==null?void 0:i.producerId,peerId:t,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}})}),M.on(I.PRODUCER_CLOSED,({peerId:t,producerId:i})=>{const r=this.participants.joined.get(t);if(!r){T.warn("ParticipantController::NEW_PRODUCER::participant not found",{dyteParticipant:{id:t}});return}r.producers=r.producers.filter(n=>n.producerId!==i)}),M.on(I.PRODUCER_TOGGLE,({peerId:t,producerId:i,paused:r,kind:n})=>{const s=this.participants.joined.get(t);if(s&&n==="audio"){s.setAudioEnabled(!r);const a=s.producers.find(o=>o.producerId===i);a&&(a.pause=r)}}),M.on(I.ACTIVE_SPEAKER,({peerId:t,volume:i})=>{this.participants.lastActiveSpeaker=t,this.participants.emit("activeSpeaker",{peerId:t,volume:i})}),M.on(I.ROOM_MESSAGE,async({payload:t,type:i,timestamp:r})=>{this.participants.emit("broadcastedMessage",{type:i,payload:t,timestamp:r})}),M.on(I.LOW_CONSUMER_SCORE,({peerId:t,score:i,kind:r})=>{const n=this.participants.joined.get(t);n&&(n.emit("poorConnection",{score:i,kind:r}),this.participants.emit("poorConnection",{participantId:t,score:i,kind:r}))}),M.on(I.CONSUMER_SCORE_UPDATE,({score:t,kind:i,appData:r,peerId:n})=>{var s;const a=i==="video"&&((s=r==null?void 0:r.screenShare)!=null?s:!1),o=this.participants.joined.get(n);o&&(o.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:t,participantId:n}),this.participants.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:t,participantId:n}))}),M.on(I.PEER_PINNED,({peerId:t})=>{if(!t){g(this,Gi).isPinned&&g(this,Gi).setIsPinned(!1),this.participants.pinned.size!==0&&this.updatePinnedParticipants();return}if(t===g(this,Gi).id){this.participants.pinned.size!==0&&this.updatePinnedParticipants(),g(this,Gi).setIsPinned(!0);return}const i=this.participants.joined.get(t);g(this,Gi).isPinned&&g(this,Gi).setIsPinned(!1),this.updatePinnedParticipants(),i.setIsPinned(!0),this.participants.pinned.add(i),g(this,zt,Yt)instanceof Me&&g(this,zt,Yt).activatePeers([{peerId:i.id,producers:i.producers}]).catch(r=>{T.error("unable to create consumers",{error:r})})}),M.on(I.PEER_REQUESTED_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.REQUESTED_TO_JOIN_STAGE)}),M.on(I.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.OFF_STAGE)}),M.on(I.PEER_REJECTED_TO_JOIN_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.OFF_STAGE)}),M.on(I.PEER_ADDED_TO_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.ACCEPTED_TO_JOIN_STAGE)}),M.on(I.PEER_REMOVED_FROM_STAGE,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.OFF_STAGE),this.participants.pinned.delete(t)}),M.on(I.PEER_STARTED_PRESENTING,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.ON_STAGE)}),M.on(I.PEER_STOPPED_PRESENTING,({id:t})=>{const i=this.participants.joined.get(t);i==null||i.setWebinarStageStatus(wi.OFF_STAGE),this.participants.pinned.delete(t)})}processMedia(t){var i;const r=g(this,zt,Yt).getConsumers(),{peerId:n,kind:s,appData:a,remotelyPaused:o,track:c,producerId:d}=(i=r.get(t))!=null?i:{};if(!n)return T.warn("processMedia::Peer ID is undefined",{consumer:{id:t,kind:s,peerId:n,appData:{supportsRemoteControl:a==null?void 0:a.supportsRemoteControl,screenShare:a==null?void 0:a.screenShare},remotelyPaused:o,producerId:d}}),{};const l=a;return T.info("ParticipantController::processMedia",{consumer:{id:t,peerId:n,kind:s,appData:l,remotelyPaused:o,producerId:d}}),g(this,Id).set(t,{type:s,peerId:n,appData:l,remotelyPaused:o,producerId:d}),{peerId:n,kind:s,appData:l,remotelyPaused:o,track:c,producerId:d}}processConsumerClosed(t){const{peerId:i,type:r,appData:n,remotelyPaused:s,producerId:a}=g(this,Id).get(t)||{},o=this.participants.joined.get(i);if(T.info("ParticipantController::processConsumerClosed",{consumer:{id:t,peerId:i,appData:n,kind:r,remotelyPaused:s,producerId:a}}),g(this,Id).delete(t),!!o){if(n&&n.screenShare){o.setScreenShareEnabled(!1),de.consumerSharedMediaState(t,{screen:!1}),o.screenShareTracks={audio:void 0,video:void 0};return}r==="audio"?(o.setAudioEnabled(!1),de.consumerSharedMediaState(t,{audio:!1}),o.audioTrack=void 0):r==="video"&&(o.setVideoEnabled(!1),de.consumerSharedMediaState(t,{video:!1}),o.videoTrack=void 0)}}processConsumerResumed(t){const{peerId:i,kind:r,appData:n,track:s,remotelyPaused:a,producerId:o}=this.processMedia(t);if(!i)return;T.info("ParticipantController::processConsumerResumed",{consumer:{id:t,peerId:i,kind:r,appData:n,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(n.screenShare){if(r==="video"?c.screenShareTracks.video=s:r==="audio"&&(c.screenShareTracks.audio=s),c.screenShareEnabled)return;c.setScreenShareEnabled(!0),de.consumerSharedMediaState(t,{screen:!0});return}r==="video"?(c.videoTrack=s,c.setVideoEnabled(!0),de.consumerSharedMediaState(t,{video:!0})):r==="audio"&&(c.audioTrack=s,c.setAudioEnabled(c.audioEnabled),de.consumerSharedMediaState(t,{audio:c.audioEnabled}))}}processConsumerPaused(t){T.info(`ParticipantController::processConsumerPaused called for consumerId: ${t}`);const{peerId:i,kind:r,track:n,appData:s,remotelyPaused:a,producerId:o}=this.processMedia(t);if(!i)return;T.info("ParticipantController::processConsumerPaused",{consumer:{id:t,peerId:i,kind:r,appData:s,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);c&&(r==="video"?(c.videoTrack=n,c.setVideoEnabled(!1),de.consumerSharedMediaState(t,{video:!1})):r==="audio"&&(c.audioTrack=n,c.setAudioEnabled(c.audioEnabled),de.consumerSharedMediaState(t,{audio:c.audioEnabled})))}processNewConsumer(t){const{peerId:i,kind:r,remotelyPaused:n,track:s,appData:a,producerId:o}=this.processMedia(t);if(!i)return;T.info("ParticipantController::processNewConsumer",{consumer:{id:t,peerId:i,kind:r,remotelyPaused:n,appData:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(a.screenShare){r==="video"?c.screenShareTracks.video=s:r==="audio"&&(c.screenShareTracks.audio=s),(!n||g(this,Gi).permissions.isRecorder||ge.hasFeature(ye.SCREEENSHARE_ERR_HACK))&&c.setScreenShareEnabled(!0),a.supportsRemoteControl&&(c.supportsRemoteControl=!0);return}r==="video"?(c.videoTrack=s,n||c.setVideoEnabled(!0),de.consumerSharedMediaState(t,{video:!n})):r==="audio"&&g(this,zt,Yt)instanceof Me&&(c.audioTrack=s,n||c.setAudioEnabled(!0),de.consumerSharedMediaState(t,{audio:!n}))}}updateWebinarStatusForJoinedParticipants(t){t.forEach(i=>{const r=this.participants.joined.get(i);r&&(r.webinarStageStatus=wi.ON_STAGE)})}}Gi=new WeakMap,Id=new WeakMap,Bs=new WeakMap,zt=new WeakSet,Yt=function(){return hi()};ed([C.trace("ParticipantController.updatePageParticipants")],Oo.prototype,"updatePageParticipants",1);ed([C.trace("ParticipantController.setupEvents")],Oo.prototype,"setupEvents",1);ed([C.trace("ParticipantController.processMedia")],Oo.prototype,"processMedia",1);ed([C.trace("ParticipantController.processConsumerClosed")],Oo.prototype,"processConsumerClosed",1);ed([C.trace("ParticipantController.processConsumerResumed")],Oo.prototype,"processConsumerResumed",1);ed([C.trace("ParticipantController.processConsumerPaused")],Oo.prototype,"processConsumerPaused",1);ed([C.trace("ParticipantController.processNewConsumer")],Oo.prototype,"processNewConsumer",1);var Vue=Object.defineProperty,zue=Object.getOwnPropertyDescriptor,Hue=(e,t,i,r)=>{for(var n=r>1?void 0:r?zue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Vue(t,i,n),n},jg,_1,w1,$g,qC;let j_=(qC=class extends ti{constructor(e,t,i,r){super(),j(this,jg),j(this,w1,void 0),j(this,$g,void 0),_(this,"viewType"),_(this,"meetingStartedTimestamp"),_(this,"meetingTitle"),$(this,w1,e),this.viewType=t,$(this,$g,i),this.meetingTitle=r}get joined(){var e;return(e=g(this,jg,_1))==null?void 0:e.roomJoined}get roomName(){var e;return(e=g(this,jg,_1))==null?void 0:e.roomName}get socketConnected(){return g(this,$g).isConnected}},jg=new WeakSet,_1=function(){return hi()},w1=new WeakMap,$g=new WeakMap,qC);j_=Hue([Yi(e=>{throw new N(e.message,"0800")})],j_);var Gue=Object.defineProperty,Wue=Object.getOwnPropertyDescriptor,que=(e,t,i,r)=>{for(var n=r>1?void 0:r?Wue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Gue(t,i,n),n};class hL{constructor(t,i,r){_(this,"meta"),this.meta=new j_(t,$e.isV2AuthToken?t.config.viewType:t.permissions.viewType,i,r),this.setupEvents()}get roomName(){return this.meta.roomName}setupEvents(){M.on(I.ROOM_JOINED,t=>{t.startedAt&&(this.meta.meetingStartedTimestamp=new Date(t.startedAt),this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp}))}),M.on(I.ROOM_STATE,({createdAt:t})=>{const i=this.meta.meetingStartedTimestamp;if(t&&!i){const r=new Date(t*1e3);this.meta.meetingStartedTimestamp=r,this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp})}}),M.on(I.ROOM_NODE_CONNECTED,()=>{this.meta.emit("connected")}),M.on(I.ROOM_NODE_DISCONNECTED,()=>{this.meta.emit("disconnected")}),M.on(I.ICE_CONNECTED,({transport:t})=>{this.meta.emit("iceConnected",{transport:t})}),M.on(I.ICE_DISCONNECTED,({transport:t})=>{this.meta.emit("iceDisconnected",{transport:t})}),M.on(I.ICE_RECONNECTING,({transport:t})=>{this.meta.emit("iceReconnecting",{transport:t})}),M.on(I.ICE_FAILED,({transport:t})=>{this.meta.emit("iceFailed",{transport:t})}),M.on(I.PRODUCER_SCORE_UPDATE,({score:t})=>{t<5&&this.meta.emit("poorConnection",{score:t})}),M.on(I.SOCKET_SERVICE_CONNECTED,()=>{this.meta.emit("socketConnected")}),M.on(I.SOCKET_SERVICE_DISCONNECTED,()=>{this.meta.emit("socketDisconnected")}),M.on(I.SOCKET_SERVICE_RECONNECTING,()=>{this.meta.emit("socketReconnecting")}),M.on(I.SOCKET_SERVICE_RECONNECTION_ATTEMPT,({attempt:t})=>{this.meta.emit("socketReconnectAttempt",{attempt:t})}),M.on(I.SOCKET_SERVICE_RECONNECT_FAILURE,({attempt:t})=>{this.meta.emit("socketReconnectFailure",{attempt:t})}),M.on(I.SOCKET_SERVICE_RECONNECTED,()=>{this.meta.emit("socketReconnected")}),M.on(I.SOCKET_SERVICE_FAILED,()=>{this.meta.emit("socketFailure")}),M.on(I.ROOM_NODE_CONNECTION_ERROR,t=>{const{message:i}=t;i.match(/room '([a-z0-9-]+)' not found/i)&&this.meta.emit("connectionError",{reason:"ROOM_NOT_FOUND"})})}}que([C.trace("MetaController.setupEvents")],hL.prototype,"setupEvents",1);var Jue=Object.defineProperty,Kue=Object.getOwnPropertyDescriptor,Yue=(e,t,i,r)=>{for(var n=r>1?void 0:r?Kue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Jue(t,i,n),n};const bi={getPeer:14,getPeers:15,chatMessage:16,getRoomName:17,getDisplayTitle:18,getPluginInitiator:19,customPluginEventToParent:20,peerJoined:22,peerLeft:23,sendData:24};var lr,qo,zr,Uu,ju,$u,ur,Pr,JC;let $_=(JC=class extends ti{constructor({baseURL:e,createdAt:t,description:i,id:r,name:n,organizationId:s,picture:a,private:o,published:c,staggered:d,tags:l,type:u,updatedAt:f},y,b,k,P,w){super(),j(this,ur),j(this,lr,void 0),j(this,qo,void 0),_(this,"baseURL"),_(this,"createdAt"),_(this,"description"),_(this,"id"),_(this,"name"),j(this,zr,void 0),j(this,Uu,void 0),j(this,ju,void 0),_(this,"organizationId"),_(this,"picture"),_(this,"private"),_(this,"published"),_(this,"staggered"),_(this,"tags"),_(this,"type"),_(this,"updatedAt"),_(this,"config"),j(this,$u,void 0),_(this,"active"),_(this,"iframes"),_(this,"enabledBy"),this.baseURL=e,this.createdAt=new Date(t),this.description=i,this.id=r,this.name=n,$(this,zr,k),this.organizationId=s,this.picture=a,this.private=o,this.published=c,this.staggered=d,this.tags=l,this.type=u,this.updatedAt=new Date(f),this.active=!1,this.iframes=new Map,$(this,lr,y),$(this,qo,b),$(this,Uu,P),$(this,ju,w),this.enabledBy=""}get roomJoined(){var e;return((e=g(this,ur,Pr))==null?void 0:e.roomJoined)===!0}sendIframeEvent(e){this.iframes.size&&[...this.iframes.keys()].forEach(t=>{const{iframe:i}=this.iframes.get(t);i&&(i instanceof HTMLIFrameElement?i.contentWindow.postMessage(e,"*"):i.postMessage(JSON.stringify(e)))})}async handleIframeMessage(e){var t,i,r,n;let s;if(g(this,qo)==="socket-service"){const c=e,{payload:d,uuid:l,type:u}=c;switch(u){case Te.customPluginEventToRoom:{g(this,lr).customPluginEventToRoom(this.id,d,l);break}case Te.customPluginEventToPeers:{g(this,lr).customPluginEventToPeers(this.id,d,d.peerIds,l);break}case Te.enablePluginForRoom:{g(this,lr).enablePluginForRoom(this.id,l);break}case Te.enablePluginForPeers:{g(this,lr).enablePluginForPeers(this.id,d.peerIds,l);break}case Te.disablePluginForRoom:{g(this,lr).disablePluginForRoom(this.id,l);break}case Te.disablePluginForPeers:{g(this,lr).disablePluginForPeers(this.id,d.peerIds,l);break}case Te.storeInsertKeys:{g(this,lr).storeInsertKeys(this.id,d.store,d.insertKeys,l);break}case Te.storeGetKeys:{g(this,lr).storeGetKeys(this.id,d.store,d.getKeys,l);break}case Te.storeDeleteKeys:{g(this,lr).storeDeleteKeys(this.id,d.store,d.deleteKeys,l);break}case Te.storeDelete:{g(this,lr).storeDelete(this.id,d.store,l);break}case bi.chatMessage:{const{messagePayload:f,peerIds:y}=d;if(!g(this,ju)){this.sendIframeEvent({type:bi.chatMessage,uuid:c.uuid,payload:{error:"Chat is disabled for this room."}});return}try{await g(this,ju).sendMessage(f,y),this.sendIframeEvent({type:bi.chatMessage,uuid:c.uuid,payload:{success:!0}})}catch(b){this.sendIframeEvent({type:bi.chatMessage,uuid:c.uuid,payload:{error:b}})}break}case bi.getPeer:{let f;const{peerId:y}=d,b={...g(this,zr),isRecorder:(t=g(this,zr).permissions)==null?void 0:t.isRecorder};y?(f=g(this,Uu).joined.get(d.peerId),g(this,zr).id===y&&(f=b)):f=b,this.sendIframeEvent({type:bi.getPeer,payload:{peer:f&&b_(f)},uuid:c.uuid});break}case bi.getPeers:{const f=g(this,Uu).joined.toArray().map(y=>b_(y));this.sendIframeEvent({type:bi.getPeers,payload:{peers:f},uuid:c.uuid});break}case bi.getPluginInitiator:{this.sendIframeEvent({type:bi.getPluginInitiator,payload:{enabledBy:this.enabledBy},uuid:c.uuid});break}case bi.getDisplayTitle:{this.sendIframeEvent({type:bi.getDisplayTitle,payload:{displayTitle:g(this,ur,Pr).meetingTitle},uuid:c.uuid});break}case bi.getRoomName:{this.sendIframeEvent({type:bi.getRoomName,payload:{roomName:g(this,ur,Pr).roomName},uuid:c.uuid});break}case bi.customPluginEventToParent:{this.emit(c.payload.eventName,c.payload.data);break}}return}const a=(c,d)=>{if(g(this,zr).userId===c)return g(this,zr).id;let l;return d.forEach(u=>{u.userId===c&&(l=u.id)}),l},o=e;switch(o.type){case"pluginEvent":case"storePluginData":case"getPluginData":case"enablePluginForAll":case"enablePluginForUser":case"disablePluginForUser":case"chatMessage":{s=await g(this,ur,Pr).sendMessage(o),this.sendIframeEvent(s);break}case"getJoinedPeers":{s=await g(this,ur,Pr).getRoomState(),this.sendIframeEvent({type:"websocket/get-joined-peers",payload:{...o.payload,peers:s.payload.roomState.peers}});break}case"getPeerInfo":{s=await g(this,ur,Pr).sendMessage({type:o.type,payload:{...o.payload,peerId:(r=(i=o.payload)==null?void 0:i.peerId)!=null?r:g(this,zr).id}}),this.sendIframeEvent(s);break}case"getRoomState":{s=await g(this,ur,Pr).getRoomState();const{plugins:c,peers:d}=s.payload.roomState,{enabledBy:l}=c.find(f=>f.id===this.id),u=a(l,d);this.sendIframeEvent({type:"websocket/get-room-state",payload:{...o.payload,roomName:s.payload.roomState.roomName,pluginInitiatorPeerId:u,pluginInitiatorUserId:l,peers:s.payload.roomState.peers,displayTitle:s.payload.roomState.displayTitle,roomUUID:s.payload.roomState.roomUUID,currentPeer:g(this,zr).id,isRecorder:(n=g(this,zr).permissions)==null?void 0:n.isRecorder}});break}case"getPluginInitiatorId":{s=await g(this,ur,Pr).getRoomState();const{plugins:c,peers:d}=s.payload.roomState,{enabledBy:l}=c.find(f=>f.id===this.id),u=a(l,d);this.sendIframeEvent({type:"websocket/get-plugin-initiator-peer-id",payload:{...o.payload,pluginInitiatorPeerId:u}});break}case"getPluginInitiatorUserId":{s=await g(this,ur,Pr).getRoomState();const{plugins:c}=s.payload.roomState,{enabledBy:d}=c.find(l=>l.id===this.id);this.sendIframeEvent({type:"websocket/get-plugin-initiator-user-id",payload:{...o.payload,pluginInitiatorUserId:d}});break}case"pluginEventToParent":{this.emit(o.payload.eventName,o.payload.data);break}case"toggleViewMode":{this.emit("toggleViewMode",o.payload.data);break}}}sendData(e){if(g(this,qo)==="socket-service"){this.sendIframeEvent({type:bi.sendData,uuid:"",payload:e});return}this.sendIframeEvent({type:I.PLUGIN_INTERNAL_DATA,payload:{pluginId:this.id,data:e}})}removePluginView(e="default"){var t;const{iframe:i,listener:r}=(t=this.iframes.get(e))!=null?t:{};(i||r)&&(i instanceof HTMLIFrameElement?window.removeEventListener("message",r):i.props.onMessage=void 0,this.iframes.delete(e))}addPluginView(e,t="default"){var i;if(!g(this,$u))throw T.error("DytePlugin::addPluginView::no_auth_token_set_for_plugin"),new N("No auth token set for plugin.");if(!e)throw T.error("DytePlugin::addPluginView::iframe_was_not_provided"),new N("Iframe was not provided.");this.removePluginView(t);const r=e,n=new URL(this.baseURL),s={auth:g(this,$u),parent:!navigator.isReactNative&&window.location.origin,backend:yt.apiBase,pluginId:this.id,roomName:(i=g(this,ur,Pr).roomName)!=null?i:"",displayTitle:g(this,ur,Pr).meetingTitle};if(Object.keys(s).forEach(a=>{n.searchParams.set(a,s[a])}),r instanceof HTMLIFrameElement){r.src=n.href,r.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",r.title=t;const a=async o=>{o.source===e.contentWindow&&await this.handleIframeMessage(o.data)};window.addEventListener("message",a),this.iframes.set(t,{iframe:r,listener:a})}else r.props.onMessage=a=>{this.handleIframeMessage(JSON.parse(a.nativeEvent.data))},this.iframes.set(t,{iframe:r})}setActive(e){var t,i;if(this.active=e,e){this.emit("stateUpdate",{active:this.active,pluginId:this.id,bind:this.addPluginView.bind(this),views:(t=this.config)==null?void 0:t.views});return}this.active=!1,this.emit("stateUpdate",{active:this.active,pluginId:this.id,views:(i=this.config)==null?void 0:i.views})}async activateForSelf(){const e=Ui(),t=await e.authorizePlugin(this.id);$(this,$u,t);try{const i=await e.getPluginConfig(this.baseURL);this.config=i}catch(i){T.error("DytePlugin::activateForSelf",{error:i})}this.setActive(!0),this.emit("enabled")}deactivateForSelf(){[...this.iframes.keys()].forEach(e=>{this.removePluginView(e)}),this.iframes.clear(),this.setActive(!1),this.emit("closed")}async enable(){return this.activateForSelf()}disable(){return this.deactivateForSelf()}async activate(){var e,t;if((t=(e=g(this,zr).permissions)==null?void 0:e.plugins)!=null&&t.canStart){if(g(this,qo)==="socket-service"){g(this,lr).addPlugin(this.id,this.staggered);return}await g(this,ur,Pr).addRoomPlugin(this)}}async deactivate(){var e,t;if((t=(e=g(this,zr).permissions)==null?void 0:e.plugins)!=null&&t.canClose){if(g(this,qo)==="socket-service"){g(this,lr).removePlugin(this.id);return}await g(this,ur,Pr).removeRoomPlugin(this)}}},lr=new WeakMap,qo=new WeakMap,zr=new WeakMap,Uu=new WeakMap,ju=new WeakMap,$u=new WeakMap,ur=new WeakSet,Pr=function(){return hi()},JC);$_=Yue([Yi(e=>{throw new N(e.message,"0600")})],$_);class KC extends oE{constructor(){super({onAddEvent:"pluginAdded",onDeleteEvent:"pluginDeleted"})}add(t,i=!0){return super.add(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}var Que=Object.defineProperty,Zue=Object.getOwnPropertyDescriptor,Xue=(e,t,i,r)=>{for(var n=r>1?void 0:r?Zue(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Que(t,i,n),n};let F_=class{constructor(){_(this,"all"),_(this,"active"),this.all=new KC,this.active=new KC}};F_=Xue([Yi(e=>{throw new N(e.message,"0600")})],F_);var epe=Object.defineProperty,tpe=Object.getOwnPropertyDescriptor,td=(e,t,i,r)=>{for(var n=r>1?void 0:r?tpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&epe(t,i,n),n},Es=(e=>(e[e.TEXT=0]="TEXT",e[e.IMAGE=1]="IMAGE",e[e.FILE=2]="FILE",e))(Es||{}),ms;class Mo{constructor(t){j(this,ms,void 0),$(this,ms,t)}getChatMessages(){return g(this,ms).sendMessagePromise(ir.getMessages)}async getChatMessagesPaginated(t,i,r,n=0){const s={timeStamp:t,size:i,from:n,reversed:r},a=await g(this,ms).sendMessagePromise(ir.getPaginatedMessages,Noe.toBinary(s));return a.payload?joe.fromBinary(a.payload):{messages:[],next:!1}}sendMessageToRoom(t,i){const r={payloadType:i,payload:t};g(this,ms).sendMessage(ir.sendMessageToRoom,Voe.toBinary(r))}sendMessageToPeers(t,i,r){const n={payloadType:i,peerIds:r,payload:t};g(this,ms).sendMessage(ir.sendMessageToPeers,Goe.toBinary(n))}sendMessage(t,i,r){if(r&&r.length>0){this.sendMessageToPeers(t,i,r);return}this.sendMessageToRoom(t,i)}editMessage(t,i,r,n){const s={chatId:t,pinned:n,payloadType:r,payload:i};g(this,ms).sendMessage(ir.editMessage,Joe.toBinary(s))}deleteMessage(t){g(this,ms).sendMessage(ir.deleteMessage,Qoe.toBinary({chatId:t}))}on(t,i){let r,n;switch(t){case ir.sendMessageToRoom:{r=a1.fromBinary.bind(a1),n=a1.create();break}case ir.sendMessageToPeers:{r=o1.fromBinary.bind(o1),n=o1.create();break}case ir.editMessage:{r=c1.fromBinary.bind(c1),n=c1.create();break}case ir.deleteMessage:{r=d1.fromBinary.bind(d1),n=d1.create();break}}if(!r){T.warn(`ChatSocketHandler::Event ${t} is not recognized`);return}g(this,ms).on(t,({payload:s})=>{let a=n;try{a=r(s)}catch(o){T.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}ms=new WeakMap;td([C.trace("SocketService.getChatMessages")],Mo.prototype,"getChatMessages",1);td([C.trace("SocketService.getChatMessagesPaginated")],Mo.prototype,"getChatMessagesPaginated",1);td([C.trace("SocketService.sendMessageToRoom")],Mo.prototype,"sendMessageToRoom",1);td([C.trace("SocketService.sendMessageToPeers")],Mo.prototype,"sendMessageToPeers",1);td([C.trace("SocketService.sendMessage")],Mo.prototype,"sendMessage",1);td([C.trace("SocketService.editMessage")],Mo.prototype,"editMessage",1);td([C.trace("SocketService.deleteMessage")],Mo.prototype,"deleteMessage",1);var ipe=Object.defineProperty,rpe=Object.getOwnPropertyDescriptor,Us=(e,t,i,r)=>{for(var n=r>1?void 0:r?rpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&ipe(t,i,n),n};const gl=["text","image","file","poll"];var it,wd,On,Hr,xa,Jo,YC;let kn=(YC=class extends ti{constructor(e,t,i,r){super(),j(this,xa),_(this,"messages"),j(this,it,void 0),j(this,wd,void 0),j(this,On,void 0),j(this,Hr,void 0),$(this,On,e),$(this,Hr,t),$(this,it,i),$(this,wd,r),this.messages=[]}get roomJoined(){var e;return((e=g(this,xa,Jo))==null?void 0:e.roomJoined)===!0}async sendTextMessage(e,t){var i,r,n,s,a,o;if(!((r=(i=g(this,it).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=g(this,it).permissions)==null?void 0:n.chatPublic)!=null&&s.text))throw T.error("sendTextMessage::public_chat_permission_denied"),new N("Could not send message to public chat.","0501");if(t&&t.length>0&&(!((a=g(this,it).permissions)!=null&&a.chatPrivate.canSend)||!((o=g(this,it).permissions)!=null&&o.chatPrivate.text)))throw T.error("sendTextMessage::private_chat_permission_denied"),new N("Could not send message to private chat.","0501");if(!e)throw T.error("sendTextMessage::message_can_not_be_empty"),new N("Message can not be empty.","0502");if(g(this,Hr)==="socket-service"){let d=[];t&&t.length>0&&(t.push(g(this,it).id),d=g(this,wd).joined.toArray().filter(l=>t.includes(l.id)).map(l=>l.userId),d.push(g(this,it).userId)),g(this,On).sendMessage(e,Es.TEXT,t);return}if(t!==void 0&&t.length>0){T.error("sendTextMessage::private_chat_unsupported");return}const c={userId:g(this,it).userId,displayName:g(this,it).name,message:e,type:gl.indexOf("text"),time:+new Date};if(!this.roomJoined)throw T.error("DyteChat.sendTextMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new N("Can`t sendTextMessage without joining room");await g(this,xa,Jo).sendChatMessage(c)}async sendImageMessage(e,t){var i,r,n,s,a,o;if(t&&t.length>0){if(!((i=g(this,it).permissions)!=null&&i.chatPrivate.canSend)||!((r=g(this,it).permissions)!=null&&r.chatPrivate.files)){T.error("sendImageMessage::private_chat_permission_denied");return}}else if(!((s=(n=g(this,it).permissions)==null?void 0:n.chatPublic)!=null&&s.canSend)||!((o=(a=g(this,it).permissions)==null?void 0:a.chatPublic)!=null&&o.files)){T.error("sendImageMessage::permission_denied");return}if(!e){T.error("sendImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(e.type)){T.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:e.type}});return}try{const c=Ui(),{getLocation:d,putLocation:l}=await c.getPresignedUrls(e.name);if(await c.uploadFile(e,l),g(this,Hr)==="socket-service"){let f=[];t&&t.length>0&&(t.push(g(this,it).id),f=g(this,wd).joined.toArray().filter(y=>t.includes(y.id)).map(y=>y.userId),f.push(g(this,it).userId)),g(this,On).sendMessage(d,Es.IMAGE,t);return}if(t!==void 0&&t.length>0){T.error("sendImageMessage::private_chat_unsupported");return}const u={userId:g(this,it).userId,displayName:g(this,it).name,type:gl.indexOf("image"),link:d,time:+new Date};if(!this.roomJoined)throw T.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new N("Can`t sendImageMessage without joining room");await g(this,xa,Jo).sendChatMessage(u)}catch{throw new N("Error sending image message.")}}async sendFileMessage(e,t){var i,r,n,s,a,o;if(t&&t.length>0){if(!((i=g(this,it).permissions)!=null&&i.chatPrivate.canSend)||!((r=g(this,it).permissions)!=null&&r.chatPrivate.files)){T.error("sendFileMessage::private_chat_permission_denied");return}}else if(!((s=(n=g(this,it).permissions)==null?void 0:n.chatPublic)!=null&&s.canSend)||!((o=(a=g(this,it).permissions)==null?void 0:a.chatPublic)!=null&&o.files)){T.error("sendFileMessage::permission_denied");return}if(!e){T.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const c=Ui(),{getLocation:d,putLocation:l}=await c.getPresignedUrls(e.name);if(await c.uploadFile(e,l),g(this,Hr)==="socket-service"){let f=[];t&&t.length>0&&(t.push(g(this,it).id),f=g(this,wd).joined.toArray().filter(b=>t.includes(b.id)).map(b=>b.userId),f.push(g(this,it).userId));const y=JSON.stringify({link:d,name:e.name,size:"size"in e?e.size:0});g(this,On).sendMessage(y,Es.FILE,t);return}if(t!==void 0&&t.length>0){T.error("sendFileMessage::private_chat_unsupported");return}const u={userId:g(this,it).userId,displayName:g(this,it).name,type:gl.indexOf("file"),link:d,name:e.name,size:"size"in e?e.size:0,time:+new Date};if(!this.roomJoined)throw T.error("DyteChat.sendFileMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new N("Can`t sendFileMessage without joining room");await g(this,xa,Jo).sendChatMessage(u)}catch{throw new N("Error sending file message.")}}async sendMessage(e,t){switch(e.type){case"text":await this.sendTextMessage(e.message,t);break;case"image":await this.sendImageMessage(e.image,t);break;case"file":await this.sendFileMessage(e.file,t);break;default:T.error("sendMessage::message_type_not_supported",{dyteChat:{messageType:e.type}});break}}async editTextMessage(e,t){var i,r,n,s;if(g(this,Hr)!=="socket-service"){T.warn("editTextMessage::Coming soon!");return}if(!((r=(i=g(this,it).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=g(this,it).permissions)==null?void 0:n.chatPublic)!=null&&s.text)){T.error("editTextMessage::permission_denied");return}if(!t){T.error("editTextMessage::message_can_not_be_empty");return}g(this,On).editMessage(e,t,Es.TEXT)}async editImageMessage(e,t){var i,r,n,s;if(g(this,Hr)!=="socket-service"){T.warn("editImageMessage::Coming soon!");return}if(!((r=(i=g(this,it).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=g(this,it).permissions)==null?void 0:n.chatPublic)!=null&&s.files)){T.error("editImageMessage::permission_denied");return}if(!t){T.error("editImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(t.type)){T.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:t.type}});return}try{const a=Ui(),{getLocation:o,putLocation:c}=await a.getPresignedUrls(t.name);await a.uploadFile(t,c),g(this,On).editMessage(e,o,Es.IMAGE)}catch{throw new N("Error editing image message.")}}async editFileMessage(e,t){var i,r,n,s;if(g(this,Hr)!=="socket-service"){T.warn("editFileMessage::Coming soon!");return}if(!((r=(i=g(this,it).permissions)==null?void 0:i.chatPublic)!=null&&r.canSend)||!((s=(n=g(this,it).permissions)==null?void 0:n.chatPublic)!=null&&s.files)){T.error("sendFileMessage::permission_denied");return}if(!t){T.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const a=Ui(),{getLocation:o,putLocation:c}=await a.getPresignedUrls(t.name);await a.uploadFile(t,c),g(this,On).editMessage(e,JSON.stringify({link:o,name:t.name,size:"size"in t?t.size:0}),Es.FILE)}catch{throw new N("Error editing file message.")}}async editMessage(e,t){if(g(this,Hr)!=="socket-service"){T.warn("editMessage::Coming soon!");return}switch(t.type){case"text":{this.editTextMessage(e,t.message);break}case"image":{this.editImageMessage(e,t.image);break}case"file":{this.editFileMessage(e,t.file);break}default:{T.error("editMessage::message_type_not_supported",{dyteChat:{messageType:t.type}});break}}}async deleteMessage(e){if(g(this,Hr)!=="socket-service"){T.warn("editMessage::Coming soon!");return}g(this,On).deleteMessage(e)}getMessagesByUser(e){return this.messages.filter(t=>t.userId===e)}getMessagesByType(e){return this.messages.filter(t=>t.type===e)}async pin(e){if(g(this,Hr)!=="socket-service"){if(!this.roomJoined)throw new N("Can`t pin message without joining room");await g(this,xa,Jo).pinChatMessage({id:e})}}async unpin(e){if(g(this,Hr)!=="socket-service"){if(!this.roomJoined)throw new N("Can`t unpin message without joining room");await g(this,xa,Jo).unpinChatMessage({id:e})}}async getMessages(e,t,i,r=0){const n=await g(this,On).getChatMessagesPaginated(e,t,i,r);return{messages:n.messages.map(s=>kc.formatSocketServiceMessage(s)),next:n.next}}get pinned(){return this.messages.filter(e=>e.pinned)}},it=new WeakMap,wd=new WeakMap,On=new WeakMap,Hr=new WeakMap,xa=new WeakSet,Jo=function(){return hi()},YC);Us([C.trace("DyteChat.sendTextMessage")],kn.prototype,"sendTextMessage",1);Us([C.trace("DyteChat.sendImageMessage")],kn.prototype,"sendImageMessage",1);Us([C.trace("DyteChat.sendFileMessage")],kn.prototype,"sendFileMessage",1);Us([C.trace("DyteChat.sendMessage")],kn.prototype,"sendMessage",1);Us([C.trace("DyteChat.editTextMessage")],kn.prototype,"editTextMessage",1);Us([C.trace("DyteChat.editImageMessage")],kn.prototype,"editImageMessage",1);Us([C.trace("DyteChat.editFileMessage")],kn.prototype,"editFileMessage",1);Us([C.trace("DyteChat.editMessage")],kn.prototype,"editMessage",1);Us([C.trace("DyteChat.deleteMessage")],kn.prototype,"deleteMessage",1);kn=Us([Yi(e=>{throw new N(e.message,"0500")})],kn);var npe=Object.defineProperty,spe=Object.getOwnPropertyDescriptor,ape=(e,t,i,r)=>{for(var n=r>1?void 0:r?spe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&npe(t,i,n),n},Fg,S1,Fu,QC;const Dn=(QC=class{constructor(e,t,i,r){j(this,Fg),_(this,"chat"),_(this,"chatSocketHandler"),_(this,"self"),j(this,Fu,void 0),this.chatSocketHandler=e,$(this,Fu,t),this.chat=new kn(e,t,i,r),this.self=i,this.setupEvents()}get roomJoined(){var e;return((e=g(this,Fg,S1))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r){const n=ge.getValue(ye.CHAT_SOCKET_SERVER);T.debug(`Received flagsmith chat_socket_server: ${n}`);const s=hh("chat_socket_server")==="socket-service"||n==="socket-service"||r.includes("HIVE")?"socket-service":"room-node";return T.info(`Using socket server :: ${s} for chat`),new Dn(e,s,t,i)}static formatMessage(e){return{...e,time:new Date(e.time),type:gl[e.type]}}static formatSocketServiceMessage(e){const t=e.createdAt*1e3,i={displayName:e.displayName,id:e.chatId,time:t,timeMs:e.createdAtMs,type:e.payloadType,isEdited:e.isEdited,userId:e.userId,targetUserIds:e.targetUserIds,message:"",link:"",name:"",size:0};switch(i.type){case Es.TEXT:{i.message=e.payload;break}case Es.IMAGE:{i.link=e.payload;break}case Es.FILE:{const{link:r,name:n,size:s}=JSON.parse(e.payload);i.link=r,i.name=n,i.size=s;break}}return Dn.formatMessage(i)}async getChatMessages(){if(this.self.config.viewType==="LIVESTREAM"||ge.hasFeature(ye.FEAT_PAGINATED_CHAT))return;if(g(this,Fu)==="socket-service"){const t=await this.chatSocketHandler.getChatMessages();if(!(t!=null&&t.payload))return;const i=Foe.fromBinary(t.payload).messages;this.chat.messages=i.map(r=>Dn.formatSocketServiceMessage(r));return}if(!this.roomJoined){T.error("ChatController.getChatMessages.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{messages:e}=(await g(this,Fg,S1).getChatMessages()).payload;this.chat.messages=e.filter(t=>gl[t.type]!=="poll").map(Dn.formatMessage)}setupEvents(){g(this,Fu)==="socket-service"?M.on(I.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getChatMessages()}):M.onAsync(I.ROOM_JOINED,async()=>{await this.getChatMessages()}),this.chatSocketHandler.on(ir.sendMessageToRoom,e=>{const t=Dn.formatSocketServiceMessage(e.message);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),this.chatSocketHandler.on(ir.sendMessageToPeers,e=>{const t=Dn.formatSocketServiceMessage(e.message);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),this.chatSocketHandler.on(ir.editMessage,e=>{const t=Dn.formatSocketServiceMessage(e.message),i=this.chat.messages.findIndex(r=>r.id===t.id);i!==-1&&(this.chat.messages[i]=t,this.chat.emit("chatUpdate",{action:"edit",message:t,messages:this.chat.messages}))}),this.chatSocketHandler.on(ir.deleteMessage,e=>{const t=this.chat.messages.findIndex(r=>r.id===e.chatId);if(t===-1)return;const[i]=this.chat.messages.splice(t,1);this.chat.emit("chatUpdate",{action:"delete",message:i,messages:this.chat.messages})}),M.on(I.NEW_CHAT_MESSAGE,e=>{if(gl[e==null?void 0:e.type]==="poll")return;const t=Dn.formatMessage(e);this.chat.messages=[...this.chat.messages,t],this.chat.emit("chatUpdate",{action:"add",message:t,messages:this.chat.messages})}),M.on(I.PIN_CHAT_MESSAGE,async e=>{const t=Dn.formatMessage(e),i=this.chat.messages.findIndex(r=>r.id===t.id);this.chat.messages[i]=t,this.chat.emit("pinMessage",{message:t,messages:this.chat.messages})}),M.on(I.UNPIN_CHAT_MESSAGE,async e=>{const t=Dn.formatMessage(e),i=this.chat.messages.findIndex(r=>r.id===t.id);this.chat.messages[i]=t,this.chat.emit("unpinMessage",{message:t,messages:this.chat.messages})})}},Fg=new WeakSet,S1=function(){return hi()},Fu=new WeakMap,QC);let kc=Dn;ape([C.trace("ChatController.setupEvents")],kc.prototype,"setupEvents",1);var ope=Object.defineProperty,cpe=Object.getOwnPropertyDescriptor,dpe=(e,t,i,r)=>{for(var n=r>1?void 0:r?cpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&ope(t,i,n),n},Mn,Bu,Vu,Bg,E1,ZC;const gL=(ZC=class{constructor(e,t,i,r){j(this,Bg),_(this,"plugins"),j(this,Mn,void 0),j(this,Bu,void 0),j(this,Vu,void 0),$(this,Mn,e),$(this,Vu,t),$(this,Bu,i),this.plugins=r,this.setupEvents()}get roomJoined(){var e;return((e=g(this,Bg,E1))==null?void 0:e.roomJoined)===!0}static async init(e,t,i,r,n,s,a){const o=ge.getValue(ye.PLUGIN_SOCKET_SERVER);T.debug(`Received flagsmith plugin_socket_server:: ${o}`);const c=o==="socket-service"||a.includes("HIVE")?"socket-service":"room-node";T.info(`Using socket server ${c} for plugin`);const d=new F_;return e.forEach(l=>{const u=new $_(l,t,c,n,s,r);d.all.add(u)}),n.config.isV2===!1&&n.config.setDisabledPlugins(d.all.toArray().map(l=>l.id)),new gL(t,i,c,d)}async getRoomPlugins(){if(g(this,Bu)==="socket-service"){const{plugins:t}=await g(this,Mn).getActivePlugins();await Promise.all(t.map(i=>this.enablePlugin({id:i.pluginId,enabledBy:i.enabledBy})));return}if(!this.roomJoined){T.error("PluginController.getRoomPlugins.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{payload:e}=await g(this,Bg,E1).getRoomState();await Promise.all(e.roomState.plugins.map(t=>this.enablePlugin(t)))}async enablePlugin({id:e,enabledBy:t}){const i=this.plugins.all.get(e);i&&(await i.activateForSelf(),i.enabledBy=t)}async disablePlugin({id:e}){const t=this.plugins.all.get(e);t&&t.deactivateForSelf()}sendIframeEventOld(e,t){const{id:i}=t,r=this.plugins.all.get(i);r&&r.sendIframeEvent({type:e,payload:t})}sendIframeEvent(e,t,i,r){const n=this.plugins.all.get(t);t&&n.sendIframeEvent({type:e,uuid:i,payload:r})}broadcastIframeEventOld(e,t){this.plugins.active.forEach(i=>{this.sendIframeEventOld(e,{...t,id:i.id})})}broadcastIframeEvent(e,t){this.plugins.active.forEach(i=>{this.sendIframeEvent(e,i.id,"",t)})}setupEvents(){if(this.plugins.all.on("stateUpdate",({active:e,id:t})=>{if(e){this.plugins.active.add(this.plugins.all.get(t));return}this.plugins.active.delete(t)}),M.onAsync(I.ROOM_JOINED,async()=>{await this.getRoomPlugins(),T.debug("[ROOM_JOINED] resolved request to fetch plugins.")}),g(this,Bu)==="socket-service"){g(this,Mn).on(Te.addPlugin,async e=>{var t;const i=e.pluginId;(t=this.plugins.all.get(i))!=null&&t.active||await this.enablePlugin({id:i,enabledBy:e.enabledBy})}),g(this,Mn).on(Te.removePlugin,async e=>{var t;const i=e.pluginId;(t=this.plugins.all.get(i))!=null&&t.active&&await this.disablePlugin({id:i})}),[Te.enablePluginForPeers,Te.enablePluginForRoom].forEach(e=>{g(this,Mn).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{enabledBy:t.enabledBy})})}),[Te.disablePluginForPeers,Te.disablePluginForRoom].forEach(e=>{g(this,Mn).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{disabledBy:t.disabledBy})})}),[Te.customPluginEventToPeers,Te.customPluginEventToRoom].forEach(e=>{g(this,Mn).on(e,async(t,i)=>{this.sendIframeEvent(e,t.pluginId,i,{data:JSON.parse(new TextDecoder().decode(t.pluginData))})})}),[Te.storeInsertKeys,Te.storeGetKeys,Te.storeDeleteKeys].forEach(e=>{g(this,Mn).on(e,async(t,i)=>{var r;const n=(r=t.storeItems)==null?void 0:r.map(s=>({timestamp:s.timestamp,peerId:s.peerId,payload:JSON.parse(s.payload?new TextDecoder().decode(s.payload):"{}"),key:s.storeKey}));this.sendIframeEvent(e,t.pluginId,i,{storeName:t.storeName,storeItems:n})})}),g(this,Mn).on(Te.storeDelete,async(e,t)=>{this.sendIframeEvent(Te.storeDelete,e.pluginId,t,{storeName:e.storeName})}),g(this,Vu).on(ir.sendMessageToPeers,e=>{const t=kc==null?void 0:kc.formatSocketServiceMessage(e.message);this.broadcastIframeEvent(bi.chatMessage,{message:t})}),g(this,Vu).on(ir.sendMessageToRoom,e=>{const t=kc==null?void 0:kc.formatSocketServiceMessage(e.message);this.broadcastIframeEvent(bi.chatMessage,{message:t})}),M.on(I.PEER_JOINED,e=>{this.broadcastIframeEvent(bi.peerJoined,e)}),M.on(I.PEER_CLOSED,e=>{this.broadcastIframeEvent(bi.peerLeft,e)});return}M.on(I.ENABLE_PLUGIN,async({id:e,enabledBy:t})=>{await this.enablePlugin({id:e,enabledBy:t})}),M.on(I.DISABLE_PLUGIN,async({id:e})=>{await this.disablePlugin({id:e})}),[I.PLUGIN_DATA,I.PLUGIN_EVENT].forEach(e=>{M.on(e,t=>{this.sendIframeEventOld(e,t)})}),[I.PEER_JOINED,I.PEER_CLOSED,I.NEW_CHAT_MESSAGE].forEach(e=>{M.on(e,t=>{this.broadcastIframeEventOld(e,t)})})}},Mn=new WeakMap,Bu=new WeakMap,Vu=new WeakMap,Bg=new WeakSet,E1=function(){return hi()},ZC);let fL=gL;dpe([C.trace("PluginController.setupEvents")],fL.prototype,"setupEvents",1);function lpe(){Ye.isElectron()&&window.dyteElectronGetDisplayMediaSource&&(navigator.mediaDevices.getDisplayMedia=async e=>{const t=await window.dyteElectronGetDisplayMediaSource({types:["window","screen"]});let i=!1;if(e.video){const n=e.video;i={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t.id,maxWidth:n.width.max,maxHeight:n.height.max}}}const r={audio:!1,video:i};return await navigator.mediaDevices.getUserMedia(r)})}var upe=Object.defineProperty,ppe=Object.getOwnPropertyDescriptor,hpe=(e,t,i,r)=>{for(var n=r>1?void 0:r?ppe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&upe(t,i,n),n},zu,Vg,Aa,Hu,Gu,XC;let B_=(XC=class extends ti{constructor(e,t,i){super(),j(this,zu),_(this,"items"),j(this,Aa,void 0),j(this,Hu,void 0),j(this,Gu,void 0),$(this,Aa,e),$(this,Hu,t),$(this,Gu,i),this.items=[]}get roomJoined(){var e;return((e=g(this,zu,Vg))==null?void 0:e.roomJoined)===!0}async create(e,t,i=!1,r=!1){if(g(this,Aa).config.viewType!=="LIVESTREAM"&&!this.roomJoined)throw new N("Can't create polls without joining room");if(!g(this,Aa).permissions.polls.canCreate){T.error("DytePolls::create::permission_denied");return}if(!e||!t){T.error("DytePolls::question_and_options_can_not_be_empty",{dytePolls:{hasQuestion:!!e,optionsLength:t==null?void 0:t.length}});return}if(t.length<2){T.error("DytePolls::there_must_be_at_least_two_options",{dytePolls:{hasQuestion:!!e,optionsLength:t.length}});return}if(g(this,Gu)==="socket-service"){await g(this,Hu).createPoll(e,t,i,r);return}const n={question:e,options:t,anonymous:i,hideVotes:r,createdBy:g(this,Aa).name,createdByUserId:g(this,Aa).userId};await g(this,zu,Vg).newPoll(n)}async vote(e,t){if(!g(this,Aa).permissions.polls.canVote){T.error("DytePolls::vote::permission_denied");return}if(g(this,Gu)==="socket-service"){await g(this,Hu).votePoll(e,t);return}const i={pollId:e,index:t};await g(this,zu,Vg).votePoll(i)}},zu=new WeakSet,Vg=function(){return hi()},Aa=new WeakMap,Hu=new WeakMap,Gu=new WeakMap,XC);B_=hpe([Yi(e=>{throw new N(e.message,"0700")})],B_);var gpe=Object.defineProperty,fpe=Object.getOwnPropertyDescriptor,mpe=(e,t,i,r)=>{for(var n=r>1?void 0:r?fpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&gpe(t,i,n),n},zg,Ko,Wu,Hg,T1,eR;const Od=(eR=class{constructor(e,t,i){j(this,Hg),_(this,"polls"),j(this,zg,void 0),j(this,Ko,void 0),j(this,Wu,void 0),this.polls=new B_(e,t,i),$(this,zg,e),$(this,Ko,t),$(this,Wu,i),this.setupEvents()}static async init(e,t,i){const r=ge.getValue(ye.POLL_SOCKET_SERVER);T.debug(`Received flagsmith poll_socket_server: ${r}`);const n=hh("poll_socket_server")==="socket-service"||r==="socket-service"||i.includes("HIVE")?"socket-service":"room-node";return T.info(`Using socket server ${n} for polls`),new Od(e,t,n)}canViewPolls(){return g(this,zg).permissions.polls.canView}setupEvents(){if(g(this,Wu)==="socket-service"){if(!this.canViewPolls())return;M.on(I.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getPolls()}),g(this,Ko).on(Gs.createPoll,e=>{e.poll&&this.updatePoll(Od.formatSocketServicePoll(e.poll))}),g(this,Ko).on(Gs.updatePoll,e=>{e.poll&&this.updatePoll(Od.formatSocketServicePoll(e.poll))}),g(this,Ko).on(Gs.votePoll,e=>{e.poll&&this.updatePoll(Od.formatSocketServicePoll(e.poll))})}else M.onAsync(I.ROOM_JOINED,async()=>{this.canViewPolls()&&this.getPolls()});M.on(I.UPDATE_POLL,async({poll:e})=>{this.updatePoll(e)})}updatePoll(e){if(!this.canViewPolls())return;const t=this.polls.items.findIndex(i=>i.id===e.id);if(t>-1){const i=JSON.stringify(this.polls.items[t]);this.polls.items[t]=e,i!==JSON.stringify(e)&&this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!1});return}this.polls.items=[...this.polls.items,e],this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!0})}async getPolls(){if(g(this,Wu)==="socket-service"){const e=await g(this,Ko).getPolls();if(!(e!=null&&e.payload))return;const{polls:t}=Gde.fromBinary(e.payload);this.polls.items=t.map(i=>Od.formatSocketServicePoll(i));return}if(g(this,Hg,T1)instanceof ot){const{polls:e}=(await g(this,Hg,T1).getPolls()).payload;this.polls.items=Object.values(e)}}static formatSocketServicePoll(e){const t=e.options.map(i=>({count:i.count,text:i.text,votes:i.votes.map(r=>({id:r.userId,name:r.name}))}));return{anonymous:e.anonymous,createdBy:e.createdBy,createdByUserId:e.createdByUserId,hideVotes:e.hideVotes,id:e.pollId,options:t,question:e.question,voted:e.votes}}},zg=new WeakMap,Ko=new WeakMap,Wu=new WeakMap,Hg=new WeakSet,T1=function(){return hi()},eR);let mL=Od;mpe([C.trace("PollController.setupEvents")],mL.prototype,"setupEvents",1);class tR extends oE{constructor(){super({onAddEvent:"remoteRequestAdd",onDeleteEvent:"remoteRequestRemove"})}add(t,i=!0){return super.add(t,i)}delete(t,i=!0,r=!1){return super.delete(t,i,r)}}var ic,Md,Dd,xf;const V_=class extends ti{constructor(e,t){super(),j(this,ic),_(this,"incomingRequests"),_(this,"outgoingRequests"),_(this,"active"),j(this,Dd,void 0),j(this,xf,void 0),$(this,xf,t),$(this,Dd,e),this.incomingRequests=new tR,this.outgoingRequests=new tR,this.active=null,this.mouseEvent=this.mouseEvent.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this)}async requestControl(e){var t;if(!g(this,xf).joined.get(e))throw new N("Invalid peer.");const i=(t=this.outgoingRequests)==null?void 0:t.toArray().find(s=>s.hostPeerId===e);if(i)return i.id;const r=Iv(),n=new fh({requestId:r,hostPeerId:e,remotePeerId:g(this,Dd).id,state:hl.PENDING});return this.outgoingRequests.add(n),await g(this,ic,Md).requestRemoteControl(n),this.emit("remoteUpdate",{payload:{request:{id:n.id,hostPeerId:n.hostPeerId,remotePeerId:n.remotePeerId}},type:na.REQUEST_SENT}),r}async acceptControl(e){var t;if(((t=this.active)==null?void 0:t.id)===e)return;const i=this.incomingRequests.get(e);if(!i)throw new N("No request found.");i.state=hl.ACCEPTED,this.endControl(),this.active=i,g(this,ic,Md).acceptRemoteControl(i),this.emit("remoteUpdate",{payload:{request:{id:this.active.id,hostPeerId:this.active.hostPeerId,remotePeerId:this.active.remotePeerId}},type:na.INCOMING_REQUEST_ACCEPTED})}async endControl(){if(!this.active)return;const e={...this.active};g(this,ic,Md).terminateRemoteControl(this.active.hostPeerId===g(this,Dd).id?this.active.remotePeerId:this.active.hostPeerId,this.active),this.active=null,this.emit("remoteUpdate",{payload:{request:{id:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:e.hostPeerId===g(this,Dd).id?na.INCOMING_REQUEST_ENDED:na.OUTGOING_REQUEST_ENDED})}async keyboardEvent(e){if(!this.active)return;const t=V_.getFormattedKeyboardEvent(e);if(t){const i={eventType:gh.KEYBOARD,keyboardEvent:t};g(this,ic,Md).sendEventRemoteControl(this.active.hostPeerId,this.active.id,i)}}async mouseEvent(e,t){if(!this.active)return;const i=V_.getFormattedRemoteMouseEvent(e,t);if(i){const r={eventType:gh.MOUSE,mouseEvent:i};g(this,ic,Md).sendEventRemoteControl(this.active.hostPeerId,this.active.id,r)}}static getFormattedRemoteMouseEvent(e,t){const i=t.getBoundingClientRect();return{type:e.type,position:{x:Math.floor(e.x-i.left),y:Math.floor(e.y-i.top)},boundingRect:{width:i.width,height:i.height}}}static getFormattedKeyboardEvent(e){return e.type==="keydown"?{type:e.type,key:e.key}:null}};let vpe=V_;ic=new WeakSet,Md=function(){return hi()},Dd=new WeakMap,xf=new WeakMap;var Af,z_;const H_=class{constructor(e,t){_(this,"remote"),_(this,"hostPeetId"),_(this,"remotePeetId"),_(this,"remoteRequestTokens"),_(this,"activeRemoteToken"),j(this,Af,void 0),j(this,z_,void 0),$(this,Af,e),$(this,z_,t),this.hostPeetId=e.id,this.remote=new vpe(e,t),this.setupEvents()}setupEvents(){M.on(I.MESSAGE,e=>{var t;if(e.remoteRequestType===ra.REQUEST&&(this.remote.incomingRequests.add(new fh({requestId:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,state:hl.PENDING})),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:na.REQUEST_RECEIVED})),e.remoteRequestType===ra.ACCEPT){const i=this.remote.outgoingRequests.get(e.remoteRequestId);if(!i)throw new N("There is no pending remote control request to accept.");this.remote.endControl(),i.state=hl.ACCEPTED,this.remote.active=new fh({requestId:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,state:hl.ACCEPTED}),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:na.OUTGOING_REQUEST_ACCEPTED})}e.remoteRequestType===ra.END&&(((t=this.remote.active)==null?void 0:t.id)===e.remoteRequestId&&(this.remote.active=null),this.remote.emit("remoteUpdate",{payload:{request:{id:e.remoteRequestId,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId}},type:e.hostPeerId===g(this,Af).id?na.INCOMING_REQUEST_ENDED:na.OUTGOING_REQUEST_ENDED})),e.remoteRequestType===ra.EVENT&&this.remote.active&&this.remote.active.id===e.remoteRequestId&&window.DyteRobot&&(e.remoteEvent.eventType===gh.MOUSE?H_.executeMouseEvent(e.remoteEvent.mouseEvent):e.remoteEvent.eventType===gh.KEYBOARD&&H_.executeKeyboardEvent(e.remoteEvent.keyboardEvent))}),M.on(I.PEER_CLOSED,({id:e})=>{var t,i,r,n,s,a,o,c;[(i=(t=this.remote)==null?void 0:t.active)==null?void 0:i.hostPeerId,(n=(r=this.remote)==null?void 0:r.active)==null?void 0:n.remotePeerId].includes(e)&&this.remote.endControl(),(a=(s=this.remote)==null?void 0:s.incomingRequests)==null||a.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(e)&&this.remote.incomingRequests.delete(d.id)}),(c=(o=this.remote)==null?void 0:o.outgoingRequests)==null||c.toArray().forEach(d=>{[d.hostPeerId,d.remotePeerId].includes(e)&&this.remote.outgoingRequests.delete(d.id)})})}static executeMouseEvent(e){const t=window.screen.width*e.position.x/e.boundingRect.width,i=window.screen.height*e.position.y/e.boundingRect.height,r={width:window.screen.width,height:window.screen.height};switch(e.type){case kf.LEFT_CLICK:window.DyteRobot.mouse.leftClick(t,i,r);break;case kf.RIGHT_CLICK:window.DyteRobot.mouse.rightClick(t,i,r);break;case kf.MOVE:window.DyteRobot.mouse.moveTo(t,i,r);break}}static executeKeyboardEvent(e){switch(e.type){case"keydown":window.DyteRobot.keyboard.press(e.key);break}}};let ype=H_;Af=new WeakMap,z_=new WeakMap;var bpe=Object.defineProperty,_pe=(e,t,i)=>t in e?bpe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,wpe=(e,t,i)=>(_pe(e,typeof t!="symbol"?t+"":t,i),i),cE=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},J=(e,t,i)=>(cE(e,t,"read from private field"),i?i.call(e):t.get(e)),Qt=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},Ht=(e,t,i,r)=>(cE(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),oi=(e,t,i)=>(cE(e,t,"access private method"),i),Ua,rc,nc,Zt,Ld,Dt,Si,ja,_i,Js,gn,fl,Ks,G_,vL,op,If,W_,yL,dE,bL,ml,mh,Zm,lE,Xm,uE,vl,vh,Up,ev,pE={exports:{}},yl=typeof Reflect=="object"?Reflect:null,iR=yl&&typeof yl.apply=="function"?yl.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Of;yl&&typeof yl.ownKeys=="function"?Of=yl.ownKeys:Object.getOwnPropertySymbols?Of=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Of=function(e){return Object.getOwnPropertyNames(e)};function Spe(e){console&&console.warn&&console.warn(e)}var _L=Number.isNaN||function(e){return e!==e};function _t(){_t.init.call(this)}pE.exports=_t;pE.exports.once=Ppe;_t.EventEmitter=_t;_t.prototype._events=void 0;_t.prototype._eventsCount=0;_t.prototype._maxListeners=void 0;var rR=10;function sy(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return rR},set:function(e){if(typeof e!="number"||e<0||_L(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");rR=e}});_t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_L(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wL(e){return e._maxListeners===void 0?_t.defaultMaxListeners:e._maxListeners}_t.prototype.getMaxListeners=function(){return wL(this)};_t.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=n[e];if(o===void 0)return!1;if(typeof o=="function")iR(o,this,t);else for(var c=o.length,d=PL(o,c),i=0;i<c;++i)iR(d[i],this,t);return!0};function SL(e,t,i,r){var n,s,a;if(sy(i),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),a===void 0)a=s[t]=i,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),n=wL(e),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,Spe(o)}return e}_t.prototype.addListener=function(e,t){return SL(this,e,t,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(e,t){return SL(this,e,t,!0)};function Epe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function EL(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=Epe.bind(r);return n.listener=i,r.wrapFn=n,n}_t.prototype.once=function(e,t){return sy(t),this.on(e,EL(this,e,t)),this};_t.prototype.prependOnceListener=function(e,t){return sy(t),this.prependListener(e,EL(this,e,t)),this};_t.prototype.removeListener=function(e,t){var i,r,n,s,a;if(sy(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;n===0?i.shift():Tpe(i,n),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};_t.prototype.off=_t.prototype.removeListener;_t.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),s;for(r=0;r<n.length;++r)s=n[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function TL(e,t,i){var r=e._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?i?[n.listener||n]:[n]:i?kpe(n):PL(n,n.length)}_t.prototype.listeners=function(e){return TL(this,e,!0)};_t.prototype.rawListeners=function(e){return TL(this,e,!1)};_t.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):kL.call(e,t)};_t.prototype.listenerCount=kL;function kL(e){var t=this._events;if(t!==void 0){var i=t[e];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?Of(this._events):[]};function PL(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function Tpe(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function kpe(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function Ppe(e,t){return new Promise(function(i,r){function n(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",n),i([].slice.call(arguments))}CL(e,t,s,{once:!0}),t!=="error"&&Cpe(e,n,{once:!0})})}function Cpe(e,t,i){typeof e.on=="function"&&CL(e,"error",t,i)}function CL(e,t,i,r){if(typeof e.on=="function")r.once?e.once(t,i):e.on(t,i);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(s){r.once&&e.removeEventListener(t,n),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Rpe=pE.exports;class xpe extends U{constructor(){super("message.v1.SocketMessage",[{no:1,name:"event",kind:"scalar",T:13},{no:2,name:"id",kind:"scalar",opt:!0,T:9},{no:3,name:"payload",kind:"scalar",opt:!0,T:12},{no:4,name:"metadata",kind:"scalar",opt:!0,T:12}])}}const nR=new xpe;class RL{static encode(t){return nR.toBinary(t)}static decode(t){return nR.fromBinary(new Uint8Array(t))}}function Ape(e,t){return Math.floor(Math.random()*(t-e+1)+e)}class Ipe{constructor(t={}){wpe(this,"opts"),Qt(this,Ua,void 0),this.opts={initialTimeout:t.initialTimeout||1e3,maxTimeout:t.maxTimeout||1e4,factor:t.factor||2},Ht(this,Ua,0)}async wait(){Ht(this,Ua,J(this,Ua)+1);const t=Ape(0,Math.min(this.opts.maxTimeout,this.opts.initialTimeout*2**J(this,Ua)));await new Promise(i=>{setTimeout(i,t)})}getAttempts(){return J(this,Ua)}reset(){Ht(this,Ua,0)}}Ua=new WeakMap;const Ia={debug:0,info:1,warn:2,error:3};class Ope{constructor(t){Qt(this,rc,void 0),Qt(this,nc,void 0),Ht(this,rc,console),Ht(this,nc,t)}debug(...t){Ia[J(this,nc)]>Ia.debug||J(this,rc).debug("[Sockrates]:",...t)}info(...t){Ia[J(this,nc)]>Ia.info||J(this,rc).info("[Sockrates]:",...t)}warn(...t){Ia[J(this,nc)]>Ia.warn||J(this,rc).warn("[Sockrates]:",...t)}error(...t){Ia[J(this,nc)]>Ia.error||J(this,rc).error("[Sockrates]:",...t)}}rc=new WeakMap;nc=new WeakMap;var xL=(e=>(e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e))(xL||{});const Mpe="2",Dpe="3";class Lpe{constructor(t,i){Qt(this,G_),Qt(this,op),Qt(this,W_),Qt(this,dE),Qt(this,ml),Qt(this,Zm),Qt(this,Xm),Qt(this,vl),Qt(this,Up),Qt(this,Zt,void 0),Qt(this,Ld,void 0),Qt(this,Dt,void 0),Qt(this,Si,void 0),Qt(this,ja,void 0),Qt(this,_i,void 0),Qt(this,Js,void 0),Qt(this,gn,void 0),Qt(this,fl,void 0),Qt(this,Ks,void 0);var r,n,s,a,o,c,d,l,u,f;Ht(this,Ld,t),Ht(this,ja,[]),Ht(this,_i,new Rpe),Ht(this,Js,!0),Ht(this,gn,!1),Ht(this,Dt,i!=null?i:{}),(r=J(this,Dt)).autoReconnect!=null||(r.autoReconnect=!0),(n=J(this,Dt)).retryConnectionInterval!=null||(n.retryConnectionInterval=1e3),(s=J(this,Dt)).pingTimeout!=null||(s.pingTimeout=3e4),(a=J(this,Dt)).connectionTimeout!=null||(a.connectionTimeout=5e3),(o=J(this,Dt)).debug!=null||(o.debug=!0),(c=J(this,Dt)).maxReconnectionAttempts!=null||(c.maxReconnectionAttempts=10),(d=J(this,Dt)).disconnectOnPingTimeout!=null||(d.disconnectOnPingTimeout=!0),(l=J(this,Dt)).queueOnDisconnect!=null||(l.queueOnDisconnect=!1),(u=J(this,Dt)).flushOnReconnect!=null||(u.flushOnReconnect=!1),Ht(this,Si,(f=J(this,Dt).logger)!=null?f:new Ope(J(this,Dt).debug?"debug":"info")),Ht(this,Ks,new Ipe)}get readyState(){return J(this,Zt).readyState}get url(){return J(this,Ld)}get config(){return J(this,Dt)}get sendQueue(){return J(this,ja)}flush(){if(!J(this,Dt).queueOnDisconnect)return!1;const t=[];return J(this,ja).forEach(i=>{this.send(i.event,i.id,i.payload,i.metadata)||t.push(i)}),Ht(this,ja,t),J(this,ja)}async connect(){if(J(this,Js)!==!1)return new Promise((t,i)=>{oi(this,vl,vh).call(this),oi(this,Up,ev).call(this);try{Ht(this,Zt,new WebSocket(oi(this,G_,vL).call(this,J(this,Ld)))),J(this,Zt).binaryType="arraybuffer",J(this,Si).debug("Connecting to",J(this,Ld));const r=setTimeout(()=>{J(this,Si).debug("Connection timeout. Closing socket"),Ht(this,Js,!0),oi(this,Up,ev).call(this),J(this,Zt).close(3001,"Connection Timeout"),J(this,Dt).autoReconnect&&!J(this,gn)&&(J(this,_i).emit("reconnecting"),oi(this,ml,mh).call(this)),i(new Error("Connection timed out!"))},J(this,Dt).connectionTimeout);J(this,Zt).onopen=()=>{J(this,Si).debug(`Ready State: ${xL[J(this,Zt).readyState]}`),r&&clearTimeout(r),oi(this,Xm,uE).call(this),J(this,_i).emit("connected"),J(this,Dt).flushOnReconnect&&this.flush(),t()},J(this,Zt).onclose=n=>{try{r&&clearTimeout(r);const{code:s,reason:a}=n;if(i(a),J(this,Si).debug("Socket closed. Close event:",n),J(this,Si).debug("Connection closed code:",s),J(this,Si).debug("Connection closed reason:",a),J(this,Js)&&s!==1e3&&J(this,Dt).autoReconnect&&!J(this,gn)){J(this,_i).emit("reconnecting"),oi(this,ml,mh).call(this);return}J(this,gn)||J(this,_i).emit("disconnected",{code:s,reason:a})}catch(s){oi(this,op,If).call(this,s)}},J(this,Zt).onerror=n=>{oi(this,op,If).call(this,n)},J(this,Zt).onmessage=n=>oi(this,W_,yL).call(this,n)}catch(r){oi(this,op,If).call(this,r,i)}})}send(t,i,r,n){const s={event:t,id:i,payload:r,metadata:n};if(J(this,Dt).queueOnDisconnect&&(!J(this,Zt)||J(this,Zt).readyState!==1))return J(this,Si).debug("Queuing message since socket is not connected!",s),J(this,ja).push(s),!1;const a=RL.encode(s);return oi(this,Zm,lE).call(this,a)}emit(t,i,r,n){return this.send(t,i,r,n)}receive(t,i){return J(this,_i).on(t.toString(),i)}on(t,i){if(typeof t=="string"&&(t==="connected"||t==="disconnected"||t==="errored"||t==="reconnected"||t==="reconnecting"||t==="reconnectAttempt"||t==="reconnectFailure"||t==="failed")){J(this,_i).on(t,i);return}this.receive(t,i)}removeAllListeners(){J(this,_i).removeAllListeners()}removeReceiver(t,i){this.removeListener(t,i)}removeListener(t,i){J(this,_i).removeListener(t.toString(),i)}removeReceivers(t){this.removeListeners(t)}removeListeners(t){J(this,_i).listeners(t.toString()).map(i=>this.removeListener(t,i))}disconnect(){Ht(this,Js,!1),oi(this,vl,vh).call(this),this.removeAllListeners(),J(this,Zt).close(1e3,"Sockrates disconnect method called.")}}Zt=new WeakMap;Ld=new WeakMap;Dt=new WeakMap;Si=new WeakMap;ja=new WeakMap;_i=new WeakMap;Js=new WeakMap;gn=new WeakMap;fl=new WeakMap;Ks=new WeakMap;G_=new WeakSet;vL=function(e){if(e.startsWith("ws://")||e.startsWith("wss://"))return e;if(e.startsWith("https://"))return`wss://${e.substring(8)}`;if(e.startsWith("http://"))return`ws://${e.substring(7)}`;throw new Error("Invalid URL. URL must start with http(s):// or ws(s)://.")};op=new WeakSet;If=function(e,t){J(this,Si).error("Error:",e),J(this,_i).emit("errored",{error:e}),t==null||t(e)};W_=new WeakSet;yL=function(e){if(e.data===Mpe){J(this,Si).debug("Received ping from server"),oi(this,Xm,uE).call(this),oi(this,Zm,lE).call(this,Dpe);return}J(this,Si).debug("Received data:",e.data);const t=RL.decode(e.data),{id:i,payload:r}=t;J(this,_i).emit(t.event.toString(),{id:i,payload:r})};dE=new WeakSet;bL=function(){return J(this,Zt).readyState===1};ml=new WeakSet;mh=async function(e=!0){if(e&&J(this,gn)){J(this,Si).debug("Reconnect called when already in a reconnect loop. Ignoring.");return}if(J(this,gn)||J(this,Ks).reset(),J(this,Dt).maxReconnectionAttempts!==null&&J(this,Ks).getAttempts()>=J(this,Dt).maxReconnectionAttempts){J(this,_i).emit("failed"),Ht(this,gn,!1);return}Ht(this,gn,!0),oi(this,Up,ev).call(this),oi(this,vl,vh).call(this);try{if(await J(this,Ks).wait(),J(this,Js)===!1)return;if(J(this,Si).debug(`Reconnection attempt ${J(this,Ks).getAttempts()}`),J(this,_i).emit("reconnectAttempt",{attempt:J(this,Ks).getAttempts()}),await this.connect(),!oi(this,dE,bL).call(this))throw Error("Reconnect Failed");Ht(this,gn,!1),J(this,_i).emit("reconnected")}catch{J(this,Si).debug("Failed to reconnect."),J(this,_i).emit("reconnectFailure",{attempt:J(this,Ks).getAttempts()}),oi(this,ml,mh).call(this,!1)}};Zm=new WeakSet;lE=function(e){try{return J(this,Zt).send(e),!0}catch(t){return J(this,Si).error(t.message),!1}};Xm=new WeakSet;uE=function(){this.config.disconnectOnPingTimeout&&(J(this,Si).debug("Resetting ping timeout"),oi(this,vl,vh).call(this),Ht(this,fl,setTimeout(()=>{var e;J(this,Si).debug("Disconnecting the socket due to ping timeout"),Ht(this,Js,!0);const t=3002,i="Ping timeout";(e=J(this,Zt))==null||e.close(t,i),J(this,_i).emit("disconnected",{code:t,reason:i}),J(this,Dt).autoReconnect&&!J(this,gn)&&(J(this,Si).debug("Triggering reconnection due to ping timeout"),J(this,_i).emit("reconnecting"),oi(this,ml,mh).call(this))},J(this,Dt).pingTimeout)))};vl=new WeakSet;vh=function(){J(this,fl)&&(clearTimeout(J(this,fl)),Ht(this,fl,void 0))};Up=new WeakSet;ev=function(){J(this,Zt)&&(J(this,Zt).onopen=void 0,J(this,Zt).onerror=void 0,J(this,Zt).onmessage=void 0,J(this,Zt).onclose=void 0)};var Npe=Object.defineProperty,Upe=Object.getOwnPropertyDescriptor,ay=(e,t,i,r)=>{for(var n=r>1?void 0:r?Upe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Npe(t,i,n),n};const sR=65535;var qu,pr,Gg,Wg,k1,aR;const AL=(aR=class{constructor({peerId:e,roomName:t,authToken:i,url:r,capabilities:n}){j(this,Wg),j(this,qu,void 0),j(this,pr,void 0),j(this,Gg,void 0),_(this,"roomName"),_(this,"peerId"),_(this,"authToken"),_(this,"capabilities");var s;if(!e||!t||!i)throw new N("peerId, roomName, or authToken can not be empty");const{apiBase:a}=yt;let o=AL.getSocketEdgeDomain(a);typeof hh("socket_server_base")=="string"&&(o=hh("socket_server_base"));const c=`wss://${o}`;this.roomName=t,this.peerId=e,this.authToken=i,this.capabilities=n;const d=new URL(`${r!=null?r:c}/ws`),l={roomID:t,peerID:e,authToken:i,useMediaV2:n.includes("HIVE"),ping:n.includes("PING"),capabilities:n.map(u=>Jm[u]).join(" ")};Object.entries(l).forEach(([u,f])=>{d.searchParams.append(u,f.toString())}),$(this,qu,d.href),$(this,Gg,e),$(this,pr,new Lpe(g(this,qu),{autoReconnect:!0,disconnectOnPingTimeout:(s=n.includes("PING"))!=null?s:!1,queueOnDisconnect:!0,flushOnReconnect:!1,logger:T}))}static getSocketEdgeDomain(e){let t="";return e.includes("api.cluster.dyte")?t="edge":e.includes("api.staging.dyte")?t="staging":e.includes("api.preprod.dyte")&&(t="preprod"),`socket-${t}.dyte.io`}get url(){return g(this,qu)}async connect(){const e=()=>{T.info("SocketService::connect::Connected to socket-edge"),M.emit(I.SOCKET_SERVICE_CONNECTED)};this.onStateEvent("connected",e);const t=({reason:o,code:c})=>{T.info("SocketService::connect::Disconnected from socket-edge",{error:{code:c,reason:o}}),M.emit(I.SOCKET_SERVICE_DISCONNECTED),!(c<4e3||c>4002)&&(c===4e3?T.error("SocketService::connect::Bad Request",{error:{code:c,reason:o}}):c===4001?T.error("SocketService::connect::Unauthorized",{error:{code:c,reason:o}}):c===4002?T.error("SocketService::connect::Internal Error",{error:{code:c,reason:o}}):T.error("SocketService::connect::Unknown Error",{error:{code:c,reason:o}}))};this.onStateEvent("disconnected",t);const i=()=>{T.info("SocketService::connect::Reconnecting to socket-edge"),M.emit(I.SOCKET_SERVICE_RECONNECTING)};this.onStateEvent("reconnecting",i);const r=({attempt:o})=>{T.info("SocketService::connect::Attempting reconnect to socket-edge"),M.emit(I.SOCKET_SERVICE_RECONNECTION_ATTEMPT,{attempt:o})};this.onStateEvent("reconnectAttempt",r);const n=({attempt:o})=>{T.info("SocketService::connect::Reconnect attempt failed"),M.emit(I.SOCKET_SERVICE_RECONNECT_FAILURE,{attempt:o})};this.onStateEvent("reconnectFailure",n);const s=()=>{T.info("SocketService::connect::Reconnected to socket-edge"),M.emit(I.SOCKET_SERVICE_RECONNECTED)};this.onStateEvent("reconnected",s);const a=()=>{T.info("SocketService::connect::Socket-edge reconnects failed"),M.emit(I.SOCKET_SERVICE_FAILED)};this.onStateEvent("failed",a),await g(this,pr).connect()}disconnect(){return g(this,pr).disconnect()}get isConnected(){try{return g(this,pr).readyState===1}catch{return!1}}sendMessage(e,t,i){const r={};return C.injectContext(r),g(this,pr).send(e,i!=null?i:li(this,Wg,k1).call(this),t,new TextEncoder().encode(JSON.stringify(r)))}sendMessagePromise(e,t,i){const r=parseInt({}.SOCKET_SERVICE_MESSAGE_REQUEST_TIMEOUT,10)||2e4;return this.sendMessagePromiseWithTimeout({event:e,timeout:r,protobuf:t,messageId:i})}sendMessagePromiseWithTimeout({event:e,timeout:t,protobuf:i,messageId:r}){return new Promise((n,s)=>{const a=r!=null?r:li(this,Wg,k1).call(this),o={};C.injectContext(o),setTimeout(s,t,"request timeout for callback");const c=({id:d,payload:l})=>{a===d&&(n({id:d,payload:l}),g(this,pr).removeListener(e,c),g(this,pr).removeListener(sR,c))};g(this,pr).on(e,c),g(this,pr).on(sR,c),g(this,pr).send(e,a,i,new TextEncoder().encode(JSON.stringify(o)))})}on(e,t){g(this,pr).on(e,t)}onStateEvent(e,t){g(this,pr).on(e,t)}flush(){return g(this,pr).flush()}},qu=new WeakMap,pr=new WeakMap,Gg=new WeakMap,Wg=new WeakSet,k1=function(){return`${g(this,Gg)}-${(Math.random()+1).toString(36).substring(7)}`},aR);let Vh=AL;ay([C.trace("SocketService.connect")],Vh.prototype,"connect",1);ay([C.trace("SocketService.disconnect")],Vh.prototype,"disconnect",1);ay([C.trace("SocketService.sendMessage")],Vh.prototype,"sendMessage",1);ay([C.trace("SocketService.sendMessagePromise")],Vh.prototype,"sendMessagePromise",1);var Di;class jpe{constructor(t){j(this,Di,void 0),$(this,Di,t)}addPlugin(t,i){g(this,Di).sendMessage(Te.addPlugin,qce.toBinary({pluginId:t,staggered:i}))}removePlugin(t){g(this,Di).sendMessage(Te.removePlugin,Kce.toBinary({pluginId:t,staggered:!1}))}async getActivePlugins(){const{payload:t}=await g(this,Di).sendMessagePromise(Te.getPlugins);return t?yde.fromBinary(t):{plugins:[]}}customPluginEventToRoom(t,i,r){const n={pluginId:t,pluginData:new TextEncoder().encode(JSON.stringify(i))};g(this,Di).sendMessage(Te.customPluginEventToRoom,sde.toBinary(n),r)}customPluginEventToPeers(t,i,r,n){const s={pluginId:t,peerIds:i,pluginData:new TextEncoder().encode(JSON.stringify(r))};g(this,Di).sendMessage(Te.customPluginEventToPeers,ode.toBinary(s),n)}enablePluginForRoom(t,i){g(this,Di).sendMessage(Te.enablePluginForRoom,Qce.toBinary({pluginId:t}),i)}enablePluginForPeers(t,i,r){g(this,Di).sendMessage(Te.enablePluginForPeers,tde.toBinary({pluginId:t,peerIds:i}),r)}disablePluginForRoom(t,i){g(this,Di).sendMessage(Te.disablePluginForRoom,Xce.toBinary({pluginId:t}),i)}disablePluginForPeers(t,i,r){g(this,Di).sendMessage(Te.disablePluginForPeers,rde.toBinary({pluginId:t,peerIds:i}),r)}storeInsertKeys(t,i,r,n){const s={pluginId:t,storeName:i,insertKeys:r.map(a=>({storeKey:a.key,payload:new TextEncoder().encode(JSON.stringify(a.payload))}))};g(this,Di).sendMessage(Te.storeInsertKeys,kC.toBinary(s),n)}storeGetKeys(t,i,r,n){const s={pluginId:t,storeName:i,getKeys:r.map(a=>({storeKey:a.key}))};g(this,Di).sendMessage(Te.storeGetKeys,ude.toBinary(s),n)}storeDeleteKeys(t,i,r,n){const s={pluginId:t,storeName:i,deleteKeys:r.map(a=>({storeKey:a.key}))};g(this,Di).sendMessage(Te.storeDeleteKeys,hde.toBinary(s),n)}storeDelete(t,i,r){g(this,Di).sendMessage(Te.storeDelete,fde.toBinary({pluginId:t,storeName:i}),r)}getPluginDataOld(t,i){T.info("getPluginDataOld",{plugin:{id:t,storeName:i}})}storePluginDataOld(t,i,r){const n={pluginId:t,storeName:i,insertKeys:[{storeKey:r.key,payload:new TextEncoder().encode(JSON.stringify(r))}]};g(this,Di).sendMessage(Te.storeInsertKeys,kC.toBinary(n))}on(t,i){let r;switch(t){case Te.addPlugin:case Te.enablePluginForPeers:case Te.enablePluginForRoom:{r=S_.fromBinary.bind(S_);break}case Te.removePlugin:case Te.disablePluginForPeers:case Te.disablePluginForRoom:{r=PC.fromBinary.bind(PC);break}case Te.customPluginEventToPeers:case Te.customPluginEventToRoom:{r=RC.fromBinary.bind(RC);break}case Te.storeInsertKeys:case Te.storeGetKeys:case Te.storeDeleteKeys:case Te.storeDelete:{r=CC.fromBinary.bind(CC);break}}g(this,Di).on(t,({payload:n,id:s})=>{const a=r(n);return i(a,s)})}}Di=new WeakMap;var $pe=Object.defineProperty,Fpe=Object.getOwnPropertyDescriptor,oy=(e,t,i,r)=>{for(var n=r>1?void 0:r?Fpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&$pe(t,i,n),n},Sd,oR;let Ol=(oR=class extends ti{constructor(e){super(),j(this,Sd,void 0),_(this,"recordingState","IDLE"),_(this,"recordingId"),_(this,"recordingPeerId"),$(this,Sd,e)}setRecordingState(e){const t=this.recordingState;this.recordingState=e,t!==e&&this.emitCurrentRecordingState()}emitCurrentRecordingState(){this.emit("recordingUpdate",this.recordingState)}async start(){if(!g(this,Sd).permissions.canRecord)throw T.error("DyteRecording::start::permission_denied"),new N("User does not have permission to start recording");if(this.recordingState==="STARTING"||this.recordingState==="RECORDING"||this.recordingState==="STOPPING")throw T.error("DyteRecording::start::recording_in_progress",{recording:{state:this.recordingState}}),new N(`Cant start recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STARTING");try{const e=Ui(),{recording:t={}}=yt.defaults,i=await e.startRecording(t);this.recordingId=i}catch(e){throw T.error("DyteRecording::stop::recording_failed_to_start",{error:e}),this.setRecordingState("IDLE"),new N("Error while starting recording")}}async stop(){if(!g(this,Sd).permissions.canRecord)throw T.error("DyteRecording::stop::permission_denied"),new N("User does not have permission to stop recording");if((this.recordingState!=="RECORDING"||!this.recordingId)&&(T.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),await this.getRecordingId()),this.recordingState!=="RECORDING"||!this.recordingId)throw T.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),new N(`Cant stop recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STOPPING");try{await Ui().stopRecording(this.recordingId),this.setRecordingState("IDLE")}catch(e){throw T.error("DyteRecording::stop::recording_failed_to_stop",{error:e}),this.setRecordingState("RECORDING"),new N("Error while stopping recording")}}async getRecordingId(){if(!g(this,Sd).permissions.canRecord)throw T.error("DyteRecording::getRecordingId::permission_denied"),new N("User does not have permission to stop recording");try{const e=Ui(),{status:t,id:i}=await e.getActiveRecording();t==="RECORDING"&&(this.recordingState="RECORDING",this.recordingId=i)}catch(e){throw T.error("DyteRecording::getRecordingId::unable_to_get_recording_id",{error:e}),new N("Unable to get recording")}}},Sd=new WeakMap,oR);oy([C.trace("DyteRecording.start")],Ol.prototype,"start",1);oy([C.trace("DyteRecording.stop")],Ol.prototype,"stop",1);oy([C.trace("DyteRecording.getRecordingId")],Ol.prototype,"getRecordingId",1);Ol=oy([Yi(e=>{throw new N(e.message,"1000")})],Ol);var Bpe=Object.defineProperty,Vpe=Object.getOwnPropertyDescriptor,zpe=(e,t,i,r)=>{for(var n=r>1?void 0:r?Vpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Bpe(t,i,n),n};class IL{constructor(t){_(this,"recording"),this.recording=new Ol(t),this.setupEvents()}setupEvents(){M.on(I.HIVE_RECORDING_STARTED,t=>{this.recording.recordingPeerId=t,this.recording.setRecordingState("RECORDING")}),M.on(I.HIVE_RECORDING_STOPPED,()=>{this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE")}),M.on(I.PEER_JOINED,async t=>{var i;(i=t.flags)!=null&&i.recorder&&(this.recording.recordingPeerId=t.id,this.recording.setRecordingState("RECORDING"))}),M.on(I.PEER_CLOSED,t=>{t.id===this.recording.recordingPeerId&&(this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE"))}),M.onAsync(I.ROOM_JOINED,async t=>{var i,r;T.debug("[ROOM_JOINED] resolved request to fetch recordings.");const n=(i=t.peers)==null?void 0:i.filter(s=>{var a;return!!((a=s.flags)!=null&&a.recorder)});n.length?(this.recording.recordingPeerId=n&&((r=n[0])==null?void 0:r.id),this.recording.setRecordingState("RECORDING")):(this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE"))}),M.on(I.RECORDING_STARTED,()=>{this.recording.setRecordingState("RECORDING")}),M.on(I.RECORDING_STOPPED,()=>{this.recording.recordingId=void 0,this.recording.recordingPeerId=void 0,this.recording.setRecordingState("IDLE")})}}zpe([C.trace("RecordingController.setupEvents")],IL.prototype,"setupEvents",1);var Hpe=Object.defineProperty,Gpe=Object.getOwnPropertyDescriptor,Wpe=(e,t,i,r)=>{for(var n=r>1?void 0:r?Gpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Hpe(t,i,n),n},OL=(e=>(e[e.User=0]="User",e[e.Spotlight=1]="Spotlight",e))(OL||{}),Ju,qg,Ed,cR;let tv=(cR=class extends ti{constructor(e){super(),j(this,Ju),_(this,"selfActiveTab"),_(this,"spotlighted"),j(this,Ed,void 0),this.spotlighted=e.permissions.canSpotlight,$(this,Ed,e)}get roomJoined(){var e;return((e=g(this,Ju,qg))==null?void 0:e.roomJoined)===!0}static init(e){return new tv(e)}setSpotlighted(e){if(!g(this,Ed).permissions.canSpotlight)throw T.error("DyteSpotlight::setSpotlighted::permission_denied"),new N("User does not have permission to toggle spotlight");this.spotlighted=e,this.emit("spotlightUpdate",this.spotlighted),this.spotlighted&&this.assertSpotlightToRoom()}setSelfActiveTab(e,t){var i;T.info("DyteSpotlight::setActiveTab",{spotlight:{currentTab:{id:e.id,type:e.type}}}),this.selfActiveTab=e,t===0&&this.emit("selfTabUpdate",e),(i=g(this,Ed).permissions)!=null&&i.canSpotlight&&this.spotlighted&&t===0&&this.assertSpotlightToRoom()}assertSpotlightToRoom(){g(this,Ju,qg)instanceof ot&&this.selfActiveTab&&g(this,Ju,qg).assertSpotlightToRoom({spotlightedUserId:g(this,Ed).userId,currentTab:this.selfActiveTab,peerId:void 0})}},Ju=new WeakSet,qg=function(){return hi()},Ed=new WeakMap,cR);tv=Wpe([Yi(e=>{throw new N(e.message,"1300")})],tv);var qpe=Object.defineProperty,Jpe=Object.getOwnPropertyDescriptor,Kpe=(e,t,i,r)=>{for(var n=r>1?void 0:r?Jpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&qpe(t,i,n),n},sc,Nd,cp;class ML{constructor(t){j(this,Nd),_(this,"spotlight"),j(this,sc,void 0),this.spotlight=tv.init(t),$(this,sc,t),this.setupEvents()}conditionallySetActiveTab(t){var i;t!=null&&t.currentTab&&((i=this.spotlight.selfActiveTab)==null?void 0:i.id)!==t.currentTab.id&&(this.spotlight.setSelfActiveTab(t.currentTab,OL.Spotlight),this.spotlight.emit("activeTabUpdate",t.currentTab))}async setupEvents(){g(this,sc).permissions.canSpotlight&&(T.info("DyteSpotlightController::Asserting Spotlight"),g(this,Nd,cp)instanceof ot&&this.spotlight.selfActiveTab&&g(this,Nd,cp).assertSpotlightToRoom({spotlightedUserId:g(this,sc).userId,currentTab:this.spotlight.selfActiveTab,peerId:void 0})),M.on(I.PEER_JOINED,async t=>{g(this,sc).permissions.canSpotlight&&g(this,Nd,cp)instanceof ot&&this.spotlight.selfActiveTab&&g(this,Nd,cp).assertSpotlightToPeer({spotlightedUserId:g(this,sc).userId,currentTab:this.spotlight.selfActiveTab,peerId:t.id})}),M.on(I.ROOM_MESSAGE,t=>{var i,r;t.roomMessageType==="spotlight"&&(T.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:t.spotlightedUserId},currentTab:{id:(i=t.currentTab)==null?void 0:i.id,type:(r=t.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(t))}),M.on(I.MESSAGE,t=>{var i,r;t.roomMessageType==="spotlight"&&(T.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:t.spotlightedUserId},currentTab:{id:(i=t.currentTab)==null?void 0:i.id,type:(r=t.currentTab)==null?void 0:r.type}}}),this.conditionallySetActiveTab(t))})}}sc=new WeakMap,Nd=new WeakSet,cp=function(){return hi()};Kpe([C.trace("SpotlightController.setupEvents")],ML.prototype,"setupEvents",1);function Ype(e){let t=0,i,r;if(!e)return t;for(i=0;i<e.length;i+=1)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return Math.abs(t)%100+1}class Qpe{static hasFeature(t){var i;return(i=ge.hasFeature(t))!=null?i:!1}static getFeatureValue(t){return ge.getValue(t)}static getAllFeatures(){return ge.getAllFlags()}}class hE{constructor(t,i,r){_(this,"logger"),_(this,"features"),_(this,"browserSpecs"),_(this,"callStats"),this.logger=t,this.features=i,this.browserSpecs=Ye,this.callStats=r}static init(){return new hE(T,Qpe,de)}}class gE{constructor(t){_(this,"internals"),this.internals=t}static async init(){const t=hE.init();return new gE(t)}}var Zpe=Object.defineProperty,Xpe=Object.getOwnPropertyDescriptor,DL=(e,t,i,r)=>{for(var n=r>1?void 0:r?Xpe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Zpe(t,i,n),n},dp;class fE extends ti{constructor(t){super(),j(this,dp,void 0),_(this,"state","IDLE"),_(this,"playbackUrl"),_(this,"viewerCount"),$(this,dp,t),this.viewerCount=0}setLivestreamState(t){const i=this.state;this.state=t,i!==t&&this.emitCurrentLivestreamState()}emitCurrentLivestreamState(){this.emit("livestreamUpdate",this.state)}async start(){if(!g(this,dp).permissions.canLivestream)throw T.error("DyteLivestream::start::permission_denied"),new N("User does not have permission to start livestreaming");this.setLivestreamState("STARTING");try{const t=await Ui().startLivestreaming();this.playbackUrl=t}catch(t){throw T.error("DyteRecording::stop::livestream_failed_to_start",{error:t}),this.setLivestreamState("IDLE"),new N("Error while starting livestream")}}async stop(){if(!g(this,dp).permissions.canLivestream)throw T.error("DyteLivestream::stop::permission_denied"),new N("User does not have permission to stop livestreaming");if(this.state!=="LIVESTREAMING")throw T.error("DyteLivestream::stop::inconsistent_state"),new N("Livestream not started yet");try{this.setLivestreamState("STOPPING"),await Ui().stopLivestreaming()}catch(t){throw T.error("DyteLivestream::stop::livestream_failed_to_stop",{error:t}),this.setLivestreamState("STOPPING"),new N("Error while stopping livestream")}}}dp=new WeakMap;DL([C.trace("livestream.start")],fE.prototype,"start",1);DL([C.trace("livestream.stop")],fE.prototype,"stop",1);var ehe=Object.defineProperty,the=Object.getOwnPropertyDescriptor,ihe=(e,t,i,r)=>{for(var n=r>1?void 0:r?the(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&ehe(t,i,n),n},ac,oc;class LL{constructor(t,i){_(this,"livestream"),j(this,ac,void 0),j(this,oc,void 0),this.livestream=new fE(t),$(this,oc,i),this.setupEvents()}async fetchInitialLivestreamingState(){const t=Ui(),{status:i,playbackUrl:r}=await t.getActiveLivestream();i==="LIVE"&&(this.livestream.playbackUrl=r,this.livestream.setLivestreamState("LIVESTREAMING"))}setupEvents(){g(this,oc).on(Xe.startedLivestream,t=>{this.livestream.playbackUrl=t.playbackUrl,this.livestream.setLivestreamState("LIVESTREAMING")}),g(this,oc).on(Xe.stoppedLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),g(this,oc).on(Xe.erroredLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),g(this,oc).on(Xe.roomPeerCount,t=>{this.livestream.viewerCount=t.count,this.livestream.emit("viewerCountUpdate",t.count)}),M.on(I.PEER_JOINED,async t=>{var i;((i=t.flags)==null?void 0:i.hiddenParticipant)===!0&&t.recorderType==="LIVESTREAMER"&&($(this,ac,t.id),this.livestream.setLivestreamState("LIVESTREAMING"))}),M.on(I.PEER_CLOSED,t=>{t.id===g(this,ac)&&($(this,ac,void 0),this.livestream.setLivestreamState("IDLE"))}),M.onAsync(I.ROOM_JOINED,async t=>{var i,r;T.debug("[ROOM_JOINED] resolved request to fetch livestream.");const n=(i=t.peers)==null?void 0:i.filter(s=>{var a;return!!((a=s.flags)!=null&&a.hiddenParticipant)});n.length?($(this,ac,n&&((r=n[0])==null?void 0:r.id)),this.livestream.setLivestreamState("LIVESTREAMING")):($(this,ac,void 0),this.livestream.setLivestreamState("IDLE"))}),M.onAsync(I.LEAVE_MEDIA_ROOM,async()=>{if(!this.livestream.playbackUrl){T.info("Fetching livestreaming state on leave stage");try{await this.fetchInitialLivestreamingState()}catch{}}}),M.onAsync(I.SOCKET_SERVICE_ROOM_JOINED,async()=>{try{await this.fetchInitialLivestreamingState()}catch{}})}}ac=new WeakMap,oc=new WeakMap;ihe([C.trace("LivestreamController.setupEvents")],LL.prototype,"setupEvents",1);const vt=bn(zS().permissions);var De;const q_=class{constructor(e){if(j(this,De,void 0),!e)throw T.error("DytePermissionsPreset::load_preset_permissions_failed"),new N("Could not load preset permissions.");$(this,De,e)}static fromResponse(e){return new q_(e)}static default(){return new q_(vt)}get acceptWaitingRequests(){var e,t;return(t=(e=g(this,De))==null?void 0:e.acceptWaitingRequests)!=null?t:vt.acceptWaitingRequests}get requestProduceVideo(){var e,t,i;return((i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)===Li.CanRequest}get requestProduceAudio(){var e,t,i;return((i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.audio)==null?void 0:i.canProduce)===Li.CanRequest}get requestProduceScreenshare(){var e,t,i;return((i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)===Li.CanRequest}get canAllowParticipantAudio(){var e,t;return(t=(e=g(this,De))==null?void 0:e.canAcceptProductionRequests)!=null?t:vt.canAcceptProductionRequests}get canAllowParticipantScreensharing(){var e,t;return(t=(e=g(this,De))==null?void 0:e.canAcceptProductionRequests)!=null?t:vt.canAcceptProductionRequests}get canAllowParticipantVideo(){var e,t;return(t=(e=g(this,De))==null?void 0:e.canAcceptProductionRequests)!=null?t:vt.canAcceptProductionRequests}get canDisableParticipantAudio(){var e,t;return(t=(e=g(this,De))==null?void 0:e.disableParticipantAudio)!=null?t:vt.disableParticipantAudio}get canDisableParticipantVideo(){var e,t;return(t=(e=g(this,De))==null?void 0:e.disableParticipantVideo)!=null?t:vt.disableParticipantVideo}get kickParticipant(){var e,t;return(t=(e=g(this,De))==null?void 0:e.kickParticipant)!=null?t:vt.kickParticipant}get pinParticipant(){var e,t;return(t=(e=g(this,De))==null?void 0:e.pinParticipant)!=null?t:vt.pinParticipant}get canRecord(){var e,t;return(t=(e=g(this,De))==null?void 0:e.canRecord)!=null?t:vt.canRecord}get waitingRoomType(){var e,t;return(t=(e=g(this,De))==null?void 0:e.waitingRoomType)!=null?t:vt.waitingRoomType}get waitingRoomBehaviour(){var e,t;return(t=(e=g(this,De))==null?void 0:e.waitingRoomType)!=null?t:vt.waitingRoomType}get plugins(){var e,t;return(t=(e=g(this,De))==null?void 0:e.plugins)!=null?t:vt.plugins}get polls(){var e,t;return(t=(e=g(this,De))==null?void 0:e.polls)!=null?t:vt.polls}get produceVideo(){var e,t,i,r;return(r=(i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)!=null?r:vt.media.video.canProduce}get requestProduce(){return g(this,De).media.audio.canProduce===Li.CanRequest||g(this,De).media.video.canProduce===Li.CanRequest||g(this,De).media.screenshare.canProduce===Li.CanRequest}get canProduceVideo(){var e,t,i,r;return(r=(i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.canProduce)!=null?r:vt.media.video.canProduce}get produceScreenshare(){var e,t,i,r;return(r=(i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)!=null?r:vt.media.screenshare.canProduce}get canProduceScreenshare(){var e,t,i,r;return(r=(i=(t=(e=g(this,De))==null?void 0:e.media)==null?void 0:t.screenshare)==null?void 0:i.canProduce)!=null?r:vt.media.screenshare.canProduce}get produceAudio(){var e;return(e=g(this,De).media.audio.canProduce)!=null?e:vt.media.audio.canProduce}get canProduceAudio(){var e;return(e=g(this,De).media.audio.canProduce)!=null?e:vt.media.audio.canProduce}get chatPublic(){var e,t,i;return(i=(t=(e=g(this,De))==null?void 0:e.chat)==null?void 0:t.public)!=null?i:vt.chat.public}get chatPrivate(){var e,t,i;return(i=(t=(e=g(this,De))==null?void 0:e.chat)==null?void 0:t.private)!=null?i:vt.chat.private}get connectedMeetings(){var e,t;return(t=(e=g(this,De))==null?void 0:e.connectedMeetings)!=null?t:vt==null?void 0:vt.connectedMeetings}get hiddenParticipant(){var e,t;return(t=(e=g(this,De))==null?void 0:e.hiddenParticipant)!=null?t:vt.hiddenParticipant}get showParticipantList(){var e;return(e=g(this,De).showParticipantList)!=null?e:vt.showParticipantList}get canChangeParticipantRole(){var e,t;return(t=(e=g(this,De))==null?void 0:e.canChangeParticipantPermissions)!=null?t:vt.canChangeParticipantPermissions}get canChangeParticipantPermissions(){var e,t;return(t=(e=g(this,De))==null?void 0:e.canChangeParticipantPermissions)!=null?t:vt.canChangeParticipantPermissions}get canChangeTheme(){return!1}get canPresent(){return g(this,De).media.audio.canProduce===Li.Allowed||g(this,De).media.video.canProduce===Li.Allowed||g(this,De).media.screenshare.canProduce===Li.Allowed}get acceptPresentRequests(){return g(this,De).canAcceptProductionRequests}get canEditDisplayName(){var e;return(e=g(this,De).canEditDisplayName)!=null?e:!1}get maxScreenShareCount(){return 1}get isRecorder(){return g(this,De).isRecorder}get canSpotlight(){return g(this,De).canSpotlight}get canLivestream(){return g(this,De).canLivestream}get isV2(){return!0}};let dR=q_;De=new WeakMap;const rhe=bn(zS());var vs,Ud,lp;const J_=class{constructor(e){if(j(this,vs,void 0),j(this,Ud,void 0),j(this,lp,void 0),!e)throw new N("Could not load preset.");$(this,vs,e.config),$(this,Ud,e.ui||bn(zS().ui)),$(this,lp,e.permissions.plugins.config)}static fromResponse(e){return new J_(e)}static default(){return new J_(rhe)}get setupScreen(){return{isEnabled:!0}}get waitingRoom(){return{isEnabled:!0}}get controlBar(){return{isEnabled:!0,elements:{chat:!0,fullscreen:!0,invite:!1,layout:!1,participants:!0,plugins:!0,polls:!0,reactions:!1,screenshare:!0}}}get header(){return{isEnabled:!0,elements:{logo:g(this,Ud).designTokens.logo,timer:!0,title:!0,participantCount:!0,changeLayout:!1}}}get pipMode(){return!0}get viewType(){return g(this,vs).viewType}get maxVideoStreams(){return g(this,vs).maxVideoStreams}get maxScreenShareCount(){return g(this,vs).maxScreenshareCount}get plugins(){return[]}get disabledPlugins(){return Object.keys(g(this,lp)).filter(e=>g(this,lp)[e].disabled)}get designTokens(){return g(this,Ud).designTokens}get configDiff(){return g(this,Ud).configDiff}get mediaConstraints(){var e,t,i,r,n,s,a,o,c,d,l,u,f,y,b,k;return{video:{quality:(r=(i=(t=(e=g(this,vs))==null?void 0:e.media)==null?void 0:t.video)==null?void 0:i.quality)!=null?r:Mr.video.quality,frameRate:(o=(a=(s=(n=g(this,vs))==null?void 0:n.media)==null?void 0:s.video)==null?void 0:a.frameRate)!=null?o:Mr.video.frameRate},screenshare:{quality:(u=(l=(d=(c=g(this,vs))==null?void 0:c.media)==null?void 0:d.screenshare)==null?void 0:l.quality)!=null?u:Mr.screenshare.quality,frameRate:(k=(b=(y=(f=g(this,vs))==null?void 0:f.media)==null?void 0:y.screenshare)==null?void 0:b.frameRate)!=null?k:Mr.screenshare.frameRate}}}get isV2(){return!0}};let lR=J_;vs=new WeakMap,Ud=new WeakMap,lp=new WeakMap;const nhe={setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{logo:"",timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,grid:{multi:{max_video_count:9,video_fit:"cover"},single:{max_video_count:6,video_fit:"cover"},default_view:"MULTI"},colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",text_primary:"#EEEEEE",video_background:"#1A1A1A"},controls:{pip_toggle:!1},plugins:[]},she=bn(nhe);var tr,up,pp,Mf,Df;const K_=class{constructor(e){if(j(this,tr,void 0),j(this,up,void 0),j(this,pp,void 0),j(this,Mf,void 0),j(this,Df,[]),!e)throw new N("Could not load preset theme.");$(this,tr,e),$(this,up,1),$(this,pp,Zn.GroupCall)}static fromResponse(e){return new K_(e)}static default(){return new K_(she)}configFromPermissions(e){var t,i,r,n,s,a,o,c,d,l,u,f;$(this,up,e.maxScreenshareCount||1),$(this,pp,e.viewType),$(this,Mf,{video:{quality:(r=(i=(t=e==null?void 0:e.produce)==null?void 0:t.video)==null?void 0:i.quality)!=null?r:Mr.video.quality,frameRate:(a=(s=(n=e==null?void 0:e.produce)==null?void 0:n.video)==null?void 0:s.frameRate)!=null?a:Mr.video.frameRate},screenshare:{quality:(d=(c=(o=e==null?void 0:e.produce)==null?void 0:o.screenshare)==null?void 0:c.quality)!=null?d:Mr.screenshare.quality,frameRate:(f=(u=(l=e==null?void 0:e.produce)==null?void 0:l.screenshare)==null?void 0:u.frameRate)!=null?f:Mr.screenshare.frameRate}})}setDisabledPlugins(e){const t=g(this,tr).plugins;t&&t.length>0&&$(this,Df,e.filter(i=>!t.includes(i)))}get setupScreen(){return g(this,tr).setupScreen}get aloneHere(){return g(this,tr).aloneHere}get waitingRoom(){return g(this,tr).waitingRoom}get controlBar(){return g(this,tr).controlBar}get header(){return g(this,tr).header}get pipMode(){var e;return((e=g(this,tr).controls)==null?void 0:e.pipToggle)||g(this,tr).pipMode}get viewType(){return g(this,pp)}get autoTune(){return g(this,tr).autoTune}get grid(){return g(this,tr).grid}get maxVideoStreams(){return{mobile:this.grid.multi.maxVideoCount>6?6:this.grid.multi.maxVideoCount,desktop:this.grid.multi.maxVideoCount}}get maxScreenShareCount(){return g(this,up)}get colors(){return g(this,tr).colors}get controls(){return g(this,tr).controls}get plugins(){return g(this,tr).plugins}get disabledPlugins(){return g(this,Df)}get mediaConstraints(){return g(this,Mf)}get isV2(){return!1}};let uR=K_;tr=new WeakMap,up=new WeakMap,pp=new WeakMap,Mf=new WeakMap,Df=new WeakMap;var Lf;class ahe{constructor(t){j(this,Lf,void 0),$(this,Lf,t)}on(t,i){let r;t===Xe.roomPeerCount?r=wC.fromBinary.bind(wC):r=xC.fromBinary.bind(xC),g(this,Lf).on(t,({payload:n})=>{const s=r(n);return i(s)})}}Lf=new WeakMap;var on;class ohe{constructor(t){j(this,on,void 0),$(this,on,t)}async getStageRequests(){const{payload:t}=await g(this,on).sendMessagePromise(Xe.getStageRequests);return t?l1.fromBinary(t):{stageRequests:[]}}requestAccess(){g(this,on).sendMessage(Xe.requestStageAccess)}cancelRequestAccess(){g(this,on).sendMessage(Xe.cancelStageRequest)}async grantAccess(t){const i={userIds:t};await g(this,on).sendMessagePromise(Xe.grantStageAccess,Ade.toBinary(i))}async denyAccess(t){const i={userIds:t};await g(this,on).sendMessagePromise(Xe.denyStageAccess,Ode.toBinary(i))}joinStage(){return g(this,on).sendMessage(Xe.joinStage)}leaveStage(t){const i={userIds:[t]};return g(this,on).sendMessage(Xe.leaveStage,IC.toBinary(i))}kick(t){const i={userIds:t};return g(this,on).sendMessagePromise(Xe.leaveStage,IC.toBinary(i))}on(t,i){let r;switch(t){case Xe.grantStageAccess:case Xe.denyStageAccess:{r=void 0;break}case Xe.getStagePeers:{r=AC.fromBinary.bind(AC);break}case Xe.getStageRequests:case Xe.requestStageAccess:case Xe.cancelStageRequest:{r=l1.fromBinary.bind(l1);break}}g(this,on).on(t,({payload:n,id:s})=>{if(!n||!r)return i(void 0,s);const a=r(n);return i(a,s)})}}on=new WeakMap;var che=Object.defineProperty,dhe=Object.getOwnPropertyDescriptor,id=(e,t,i,r)=>{for(var n=r>1?void 0:r?dhe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&che(t,i,n),n},Ln,ys,Vs;class Do extends ti{constructor(t,i,r){super(),j(this,Ln,void 0),j(this,ys,void 0),j(this,Vs,void 0),_(this,"status"),$(this,Ln,r),$(this,Vs,i),$(this,ys,t)}async getAccessRequests(){if(!g(this,ys))throw new N("You do not have permissions for getStageRequests");const{stageRequests:t}=await g(this,Ln).getStageRequests();return{stageRequests:t}}requestAccess(){if(this.status!=="OFF_STAGE")throw new N(`Unable to request access you are currently ${this.status}`);if(g(this,ys)){this.setStatus("ACCEPTED_TO_JOIN_STAGE");return}g(this,Ln).requestAccess(),this.setStatus("REQUESTED_TO_JOIN_STAGE")}cancelRequestAccess(){g(this,Ln).cancelRequestAccess(),this.setStatus("OFF_STAGE")}grantAccess(t){if(!g(this,ys))throw new N("You do not have permissions for grantAccess");return g(this,Ln).grantAccess(t)}denyAccess(t){if(!g(this,ys))throw new N("You do not have permissions for denyAccess");return g(this,Ln).denyAccess(t)}async join(){if(!g(this,ys)&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw new N(`Unable to join stage you are currently ${this.status}`);if(g(this,ys)&&this.status==="ON_STAGE")throw new N("You are already on stage.");g(this,Ln).joinStage(),await M.emitAsync(I.JOIN_MEDIA_ROOM),this.setStatus("ON_STAGE")}async leave(){var t;if(!(this.status==="ON_STAGE"||this.status==="ACCEPTED_TO_JOIN_STAGE"))throw new N(`Unable to leave stage you are currently ${this.status}`);g(this,Vs).setIsPinned(!1),this.setStatus("OFF_STAGE"),(t=hi())!=null&&t.roomJoined&&await M.emitAsync(I.LEAVE_MEDIA_ROOM);try{await g(this,Vs).disableScreenShare(),await g(this,Vs).disableVideo(),await g(this,Vs).disableAudio(),g(this,Vs).destructMediaHandler()}catch(i){T.error("DyteStage.leaveStage.DisableMediaError",{error:i})}g(this,Ln).leaveStage(g(this,Vs).userId)}async kick(t){if(!g(this,ys))throw new N("You do not have permissions for kick");return g(this,Ln).kick(t)}setStatus(t){this.status!==t&&(this.status=t,this.emit("stageStatusUpdate",t))}}Ln=new WeakMap,ys=new WeakMap,Vs=new WeakMap;id([C.trace("DyteStage.getStageRequests")],Do.prototype,"getAccessRequests",1);id([C.trace("DyteStage.requestAccess")],Do.prototype,"requestAccess",1);id([C.trace("DyteStage.cancelRequestAccess")],Do.prototype,"cancelRequestAccess",1);id([C.trace("DyteStage.grantAccess")],Do.prototype,"grantAccess",1);id([C.trace("DyteStage.denyAccess")],Do.prototype,"denyAccess",1);id([C.trace("DyteStage.joinStage")],Do.prototype,"join",1);id([C.trace("DyteStage.leaveStage")],Do.prototype,"leave",1);var lhe=Object.defineProperty,uhe=Object.getOwnPropertyDescriptor,phe=(e,t,i,r)=>{for(var n=r>1?void 0:r?uhe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&lhe(t,i,n),n},jd,hp,cc,Nf;class NL{constructor(t,i,r){_(this,"stage"),j(this,jd,void 0),j(this,hp,void 0),j(this,cc,void 0),j(this,Nf,0),this.stage=new Do(i,r,t),$(this,cc,t),$(this,jd,i),$(this,hp,r),this.setupEvents()}setupEvents(){g(this,cc).on(Xe.grantStageAccess,()=>{g(this,jd)||(this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"))}),g(this,cc).on(Xe.denyStageAccess,()=>{g(this,jd)||(this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"))}),g(this,cc).on(Xe.getStagePeers,t=>{this.stage.status==="ON_STAGE"&&!t.stagePeers.includes(g(this,hp).userId)&&M.emitAsync(I.LEAVE_MEDIA_ROOM)}),g(this,cc).on(Xe.getStageRequests,t=>{var i;if(!g(this,jd))return;const r=(i=t==null?void 0:t.stageRequests)!=null?i:[];g(this,Nf)<r.length&&r.length>0&&this.stage.emit("newStageRequest",{count:r.length}),$(this,Nf,r.length),this.stage.emit("stageAccessRequestUpdate",r)}),M.onAsync(I.SOCKET_SERVICE_ROOM_JOINED,async t=>{var i;switch((i=t.peer)==null?void 0:i.stageType){case Ec.OFF_STAGE:{this.setStageStatus("OFF_STAGE");break}case Ec.ON_STAGE:{g(this,hp).config.viewType==="LIVESTREAM"&&await M.emitAsync(I.JOIN_MEDIA_ROOM),this.setStageStatus("ON_STAGE");break}case Ec.APPROVED_STAGE:{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE");break}case Ec.REQUESTED_STAGE:{this.setStageStatus("REQUESTED_TO_JOIN_STAGE");break}default:this.setStageStatus("OFF_STAGE")}})}setStageStatus(t){this.stage.status!==t&&(this.stage.status=t,this.stage.emit("stageStatusUpdate",t))}}jd=new WeakMap,hp=new WeakMap,cc=new WeakMap,Nf=new WeakMap;phe([C.trace("DyteStage.setupEvents")],NL.prototype,"setupEvents",1);var hhe=Object.defineProperty,ghe=Object.getOwnPropertyDescriptor,mE=(e,t,i,r)=>{for(var n=r>1?void 0:r?ghe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&hhe(t,i,n),n},dc;class cy{constructor(t){j(this,dc,void 0),$(this,dc,t)}getPolls(){return g(this,dc).sendMessagePromise(Gs.getPolls)}createPoll(t,i,r=!1,n=!1){const s={anonymous:r,hideVotes:n,question:t,options:i};return g(this,dc).sendMessage(Gs.createPoll,Fde.toBinary(s))}votePoll(t,i){const r={index:i,pollId:t};return g(this,dc).sendMessage(Gs.votePoll,Vde.toBinary(r))}on(t,i){let r,n;switch(t){case Gs.updatePoll:case Gs.createPoll:case Gs.votePoll:{r=u1.fromBinary.bind(u1),n=u1.create();break}}g(this,dc).on(t,({payload:s})=>{let a=n;try{a=r(s)}catch(o){T.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}dc=new WeakMap;mE([C.trace("PollSocketHandler.getPolls")],cy.prototype,"getPolls",1);mE([C.trace("PollSocketHandler.createPoll")],cy.prototype,"createPoll",1);mE([C.trace("PollSocketHandler.votePoll")],cy.prototype,"votePoll",1);class fhe{constructor(){_(this,"battery"),_(this,"init",async()=>{try{"getBattery"in navigator&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("chargingchange",this.updateChargeInfo),this.battery.addEventListener("levelchange",this.updateLevelInfo),this.updateLevelInfo(),this.updateChargeInfo())}catch(t){T.error("Error getting battery",t)}}),_(this,"updateChargeInfo",()=>{var t;T.log(`Battery charging? ${(t=this.battery)!=null&&t.charging?"Yes":"No"}`)}),_(this,"updateLevelInfo",()=>{var t;T.log(`Battery level: ${((t=this.battery)==null?void 0:t.level)*100}%`)}),_(this,"cleanup",()=>{var t,i;"getBattery"in navigator&&((t=this.battery)==null||t.removeEventListener("chargingchange",this.updateChargeInfo),(i=this.battery)==null||i.removeEventListener("levelchange",this.updateLevelInfo))})}}const pR=new fhe;var Xa,$a,Uf,Y_;class mhe extends ti{constructor(t){super(),j(this,Uf),j(this,Xa,void 0),j(this,$a,void 0),$(this,Xa,t),$(this,$a,!1)}get mediaPermission(){return g(this,Xa).mediaPermissions.audio}async getTrackMetadata(t=!1){if(!Ws.track){if(!t)return null;const i=await li(this,Uf,Y_).call(this);Ws.setTrack(i)}return Ws.getTrackMetadata()}async startTrackAnalysis(t=!1){if(g(this,$a))return!0;if(!await Ws.startTrackAnalysis()){if(t){const i=await li(this,Uf,Y_).call(this);return Ws.setTrack(i),this.startTrackAnalysis(t)}return $(this,$a,!1),!1}return $(this,$a,!0),!0}stopTrackAnalysis(){return g(this,$a)&&($(this,$a,!1),Ws.stopTrackAnalysis()),!0}}Xa=new WeakMap,$a=new WeakMap,Uf=new WeakSet,Y_=async function(){var e;try{const t=g(this,Xa).getCurrentDevices(),i=(e=t==null?void 0:t.audio)==null?void 0:e.deviceId;let r={audio:!0};i&&(r=Gt.getAudioConstraints({audioDeviceId:i}));const n=await Gt.getAudioTrack(r);return g(this,Xa).mediaPermissions.audio="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:g(this,Xa).mediaPermissions.audio,kind:"audio"}),n}catch(t){const i=ny(t.name,t.message);throw g(this,Xa).mediaPermissions.audio=i,M.emit(I.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:"audio"}),new N("Failed to fetch audio track","1700")}};var lc;class vhe extends ti{constructor(){super(),j(this,lc,void 0),$(this,lc,!1)}async getNetworkMetadata(){return new Promise(t=>{de.onSafeInitialization(()=>{de.onPreCallTestResults(i=>{t(i.connectionInfo)}),de.startPreCallTest()})})}startNetworkAnalysis(){return $(this,lc,ro.collectSendTransportStats()&&ro.collectRecvTransportStats()),g(this,lc)}stopNetworkAnalysis(){return $(this,lc,!(ro.stopStatsCollection("send")&&ro.stopStatsCollection("receive"))),g(this,lc)}}lc=new WeakMap;var $d,Gr;class yhe extends ti{constructor(t){super(),j(this,$d,void 0),j(this,Gr,void 0),$(this,$d,t),$(this,Gr,{audio:!1,video:!1})}get mediaPermission(){return g(this,$d).mediaPermissions.screenshare}getAudioTrackMetaData(){var t;return(t=g(this,$d).screenShareTracks)!=null&&t.audio?Cf.getTrackMetadata():null}getVideoTrackMetaData(){var t;return(t=g(this,$d).screenShareTracks)!=null&&t.video?Rf.getTrackMetadata():null}async startAudioTrackAnalysis(){if(g(this,Gr).audio)return!0;const t=await Cf.startTrackAnalysis();return g(this,Gr).audio=t,g(this,Gr).audio}async startVideoTrackAnalysis(){if(g(this,Gr).video)return!0;const t=await Rf.startTrackAnalysis();return g(this,Gr).video=t,g(this,Gr).video}stopAudioTrackAnalysis(){return g(this,Gr)&&(g(this,Gr).audio=!1,Cf.stopTrackAnalysis()),!0}stopVideoTrackAnalysis(){return g(this,Gr)&&(g(this,Gr).video=!1,Rf.stopTrackAnalysis()),!0}}$d=new WeakMap,Gr=new WeakMap;var ks,Fa,uc,gp,Q_,UL;class bhe extends ti{constructor(t){super(),j(this,Q_),j(this,ks,void 0),j(this,Fa,void 0),j(this,uc,void 0),j(this,gp,void 0),$(this,ks,t),$(this,Fa,!1),$(this,uc,!1)}get mediaPermission(){return g(this,ks).mediaPermissions.video}getTrackMetadata(){return g(this,ks).videoTrack?null:qs.getTrackMetadata()}async startTrackAnalysis({preview:t}={preview:!1}){return g(this,Fa)?!0:await qs.startTrackAnalysis()?(t&&$(this,uc,!0),$(this,Fa,!0),!0):!1}stopTrackAnalysis(){g(this,Fa)&&(qs.stopTrackAnalysis(),$(this,Fa,!1),g(this,uc)&&$(this,uc,!1))}async startPreview(){let t=!0,{track:i}=qs;return i?i=i.clone():(t=!1,i=await li(this,Q_,UL).call(this)),g(this,gp)||(qs.setClonedTrack(i,t),$(this,gp,!0)),i}stopPreview(){g(this,Fa)&&g(this,uc)&&this.stopTrackAnalysis(),$(this,gp,!1),qs.resetClonedTrack(g(this,ks).videoTrack)}}ks=new WeakMap,Fa=new WeakMap,uc=new WeakMap,gp=new WeakMap,Q_=new WeakSet,UL=async function(){var e;try{const t=g(this,ks).getCurrentDevices(),i=(e=t==null?void 0:t.video)==null?void 0:e.deviceId;let r={video:{width:{ideal:1280},height:{ideal:720}}};i&&(r=Gt.getVideoConstraints({videoDeviceId:i}));const n=await Gt.getVideoTrack(r);return g(this,ks).mediaPermissions.video="ACCEPTED",M.emit(I.MEDIA_PERMISSION_UPDATE,{message:g(this,ks).mediaPermissions.video,kind:"video"}),n}catch(t){const i=ny(t.name,t.message);throw g(this,ks).mediaPermissions.video=i,M.emit(I.MEDIA_PERMISSION_ERROR,{message:i,constraints:t.constraints,kind:"video"}),new N("Failed to fetch video track","1700")}};class _he{constructor(t){_(this,"audio"),_(this,"video"),_(this,"screenshare"),_(this,"network"),this.audio=new mhe(t),this.video=new bhe(t),this.screenshare=new yhe(t),this.network=new vhe}}const P1=e=>{const{type:t,id:i,transport:r,timestamp:n,currentRoundTripTime:s,bytesSent:a,bytesReceived:o,kind:c,jitter:d,packetsLost:l,totalPacketSendDelay:u}=e;switch(t){case"candidate-pair":return{type:t,id:i,transport:r,timestamp:n,rtt:s,bytesSent:a,bytesReceived:o};case"inbound-rtp":return{type:t,id:i,transport:r,timestamp:n,kind:c,jitter:d,packetsLost:l,bytesReceived:o};default:return{type:t,id:i,transport:r,timestamp:n,kind:c,packetSendDelay:u,bytesSent:a}}};class whe{constructor(t){_(this,"troubleshooter"),this.troubleshooter=new _he(t),this.setupEvents()}setupEvents(){M.on(I.AUDIO_TRACK_ANALYSIS,t=>{this.troubleshooter.audio.emit("audioTrackStats",t)}),M.on(I.AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"ended"})}),M.on(I.AUDIO_TRACK_CREATED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"live"})}),M.on(I.SCREENSHARE_AUDIO_TRACK_ANALYSIS,t=>{this.troubleshooter.screenshare.emit("audioTrackStats",t)}),M.on(I.SCREENSHARE_AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"ended"})}),M.on(I.SCREENSHARE_AUDIO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"live"})}),M.on(I.SCREENSHARE_VIDEO_TRACK_ANALYSIS,t=>{this.troubleshooter.screenshare.emit("videoTrackStats",t)}),M.on(I.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.screenshare.stopVideoTrackAnalysis()}),M.on(I.SCREENSHARE_VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"ended"})}),M.on(I.SCREENSHARE_VIDEO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"live"})}),M.on(I.VIDEO_TRACK_ANALYSIS,t=>{this.troubleshooter.video.emit("videoTrackStats",t)}),M.on(I.VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.video.stopTrackAnalysis()}),M.on(I.VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"ended"})}),M.on(I.VIDEO_TRACK_CREATED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"live"})}),M.on(I.CANDIDATE_PEER_UPDATE,t=>{this.troubleshooter.network.emit("connectionDelayStats",P1(t))}),M.on(I.INBOUND_RTP_UPDATE,t=>{this.troubleshooter.audio.emit("audioConsumptionStats",P1(t))}),M.on(I.OUTBOUND_RTP_UPDATE,t=>{this.troubleshooter.audio.emit("audioProductionStats",P1(t))}),M.on(I.SEND_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"ended"})}),M.on(I.RECV_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"ended"})}),M.on(I.SEND_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"live"})}),M.on(I.RECV_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"live"})})}}const pc=class{static handleConnectedRoomsDumpRaw({payload:e}){var t;const i=bce.fromBinary(e),r=i.meetings.map(n=>{var s;return{id:n.id,title:n.title,participants:(s=n.participants)!=null?s:[]}});return{parentMeeting:{id:i.parentMeeting.id,title:i.parentMeeting.title,participants:(t=i.parentMeeting.participants)!=null?t:[]},meetings:r}}static handleTransferPeerRaw({payload:e}){const t=Gce.fromBinary(e);return{authToken:t.authToken,meetingId:t.meetingId}}static handleMovedPeerRaw({payload:e}){const t=qD.fromBinary(e);return{meetingId:t.meetingId,customParticipantId:t.customParticipantId}}static handleConnectedRoomsUpdatedRaw({payload:e}){return TC.fromBinary(e).payloads.map(t=>({id:t.id,title:t.title}))}static handleConnectedRoomsDeletedRaw({payload:e}){return Lce.fromBinary(e).payloads}static async getConnectedRoomsDump(){const e=await pc.socketService.sendMessagePromise(Xe.getConnectedRoomsDump);return pc.handleConnectedRoomsDumpRaw(e)}static async createConnectedRooms(e){const{payload:t}=await pc.socketService.sendMessagePromise(Xe.createConnectedRooms,Ece.toBinary({payloads:e}));return TC.fromBinary(t).payloads.map(i=>({id:i.id,title:i.title}))}static async updateConnectedRooms(e){}static async disableConnectedRooms(e){const t=e.map(r=>({id:r})),i=await pc.socketService.sendMessagePromise(Xe.deleteConnectedRooms,Mce.toBinary({payloads:t}));return pc.handleConnectedRoomsDeletedRaw(i)}static async movePeersBetweenRooms(e){try{const t=await pc.socketService.sendMessagePromise(Xe.movePeers,Bce.toBinary({sourceMeetingId:e.sourceMeetingId,destinationMeetingId:e.destinationMeetingId,participants:e.participants}));return new TextDecoder().decode(t.payload).includes("error")?{success:!1,error:"failed to move participants"}:{success:!0}}catch(t){return{success:!1,error:t}}}};let Xt=pc;_(Xt,"socketService"),_(Xt,"currentMeetingId");const She={codecs:[{kind:"audio",mimeType:"audio/opus",clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc",parameter:""}],parameters:{},preferredPayloadType:100},{kind:"video",mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"x-google-start-bitrate":1e3},preferredPayloadType:101},{kind:"video",mimeType:"video/rtx",preferredPayloadType:102,clockRate:9e4,parameters:{apt:101},rtcpFeedback:[]},{kind:"video",mimeType:"video/VP9",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"profile-id":0,"x-google-start-bitrate":1e3},preferredPayloadType:103},{kind:"video",mimeType:"video/rtx",preferredPayloadType:104,clockRate:9e4,parameters:{apt:103},rtcpFeedback:[]},{kind:"video",mimeType:"video/H264",clockRate:9e4,parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f","x-google-start-bitrate":1e3},rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],preferredPayloadType:105},{kind:"video",mimeType:"video/rtx",preferredPayloadType:106,clockRate:9e4,parameters:{apt:105},rtcpFeedback:[]}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"}]};var Ehe=Object.defineProperty,The=Object.getOwnPropertyDescriptor,zh=(e,t,i,r)=>{for(var n=r>1?void 0:r?The(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Ehe(t,i,n),n};const jf=class{constructor(e,t,i,r,n,s,a,o,c,d,l,u,f,y){_(this,"apiBase"),_(this,"chatController"),_(this,"metaController"),_(this,"participantController"),_(this,"pluginController"),_(this,"pollController"),_(this,"remoteController"),_(this,"selfController"),_(this,"recordingController"),_(this,"spotlightController"),_(this,"livestreamController"),_(this,"internalsController"),_(this,"stageController"),_(this,"troubleshooterController"),this.apiBase=e,this.metaController=t,this.selfController=i,this.pluginController=r,this.participantController=n,this.chatController=s,this.pollController=a,this.remoteController=o,this.recordingController=c,this.spotlightController=d,this.livestreamController=u,this.internalsController=l,this.stageController=f,this.troubleshooterController=y}static async init(e,t){var i,r,n,s,a,o,c,d,l,u,f,y,b,k;const{apiBase:P="https://api.cluster.dyte.in",authToken:w}=e,E={chat:!0,participant:!0,plugin:!0,poll:!0,self:!0,meta:!0,permissions:!0,theme:!0,spotlight:!0,tracing:!0,devTools:{logs:!1},internals:!0,stage:!0,...e==null?void 0:e.modules};M.reset(),ose((i=e.overrides)!=null?i:{});const R=ple({authToken:w,baseURL:P});R.setHeader("dyte-tracing-id",t),R.setPeerId(t),R.setRoomName(e.roomName);const{roomName:D}=e,V=$e.isV2AuthToken?$e.meetingId:D,B=new AD,W=B.load({routerRtpCapabilities:She}),q=R.getRoomNodeData({roomName:V,peerId:t}),fe=$e.isV2AuthToken?void 0:R.getUserPreset(D),ae=await R.getUserDetails(),he=$e.isV2AuthToken?ae.participant.organizationId:ae.organizationId;C.meetingMetadata.userId=$e.isV2AuthToken?ae.participant.id:ae.id,Lne({...e,modules:E,apiBase:P,organizationId:he}),C.meetingMetadata.organizationId=he;const tt=Ype(V);await ge.identify(`${__.PEER}_${t}`,JSON.parse(JSON.stringify({entity:__.PEER,clientId:he,isAnonUser:!he,sdkVersion:Il,meetingHash:tt,roomName:V,...Ye.getDeviceInfo()}))),lpe();const ht=ge.getValue(ye.PLUGIN_SOCKET_SERVER),ii=R.getPlugins(ht);T.info("flagsmith::allFlags",{flags:JSON.stringify(ge.getAllFlags())},!0),pR.init();let Sr=$e.isV2AuthToken?dR.default():bC.default(),dr=$e.isV2AuthToken?lR.default():uR.default(),sn=$e.isV2AuthToken?ae.preset.name:void 0;if(E.permissions||E.theme){const Pn=await fe;Pn&&(sn=Pn.presetName),E.permissions&&(Sr=$e.isV2AuthToken?dR.fromResponse(ae.preset.permissions):bC.fromResponse(Pn.permissions)),E.theme&&(dr=$e.isV2AuthToken?lR.fromResponse(ae.preset):uR.fromResponse(Pn.theme),$e.isV2AuthToken||dr.configFromPermissions(Pn.permissions))}const{roomNodeUrl:H,meetingTitle:re,useHiveMedia:pe}=await q;await W;const He=uL(dr),wt=ge.hasFeature(ye.CUSTOM_PING_PONG),Vt=[];pe&&Vt.push("HIVE"),wt&&Vt.push("PING"),cse({...e,roomName:V,peerId:t,meetingTitle:re,roomNodeUrl:H,device:B});const kt=await jf.createSocketServiceAndRoomNodeClient({...e,roomName:V,peerId:t,meetingTitle:re,roomNodeUrl:H,capabilities:Vt,shouldInitializeRoomNode:He,viewType:dr.viewType,device:B}),Er=hi();let ri,Br,Kt,Ii,mt,Gh,eu,tu,iu,ru,nu,rd,su;const ss=new Mo(kt),Wh=new cy(kt),nd=new jpe(kt),au=new ahe(kt),uy=new ohe(kt);Xt.socketService=kt,(r=E.self)==null||r?([mt]=await Promise.all([Zl.init(kt,ae,Sr,dr,sn),Er instanceof ot?Er.setupTransports():null]),R.setOrganizationId(mt.self.organizationId)):Er instanceof ot&&await Er.setupTransports();const qh=ge.hasFeature(ye.TROUBLESHOOTING);if(mt&&qh&&(su=new whe(mt.self)),(n=E.participant)==null||n){if(!mt)throw new N("The participant module cannot be initialized without the `self` module");Br=new Oo(mt.self)}if((s=E.chat)==null||s){if(!mt)throw new N("The chat module cannot be initialized without the `self` module");ri=await kc.init(ss,mt.self,Br.participants,Vt)}if((a=E.plugin)==null||a){if(!mt)throw new N("The plugin module cannot be initialized without the `self` module");if(!Br)throw new N("The plugin module cannot be initialized without the `participant` module");const Pn=await ii;Kt=await fL.init(Pn,nd,ss,ri==null?void 0:ri.chat,mt.self,Br.participants,Vt)}if((o=E.poll)==null||o){if(!mt)throw new N("The poll cannot be initialized without the `self` module");Ii=await mL.init(mt.self,Wh,Vt)}if((c=E.meta)==null||c){if(!mt)throw new N("The meta module cannot be initialized without the `self` module");Gh=new hL(mt.self,kt,re)}if((d=E.remoteControl)==null||d){if(!mt)throw new N("The remote controller cannot be initialized without the `self` module");eu=new ype(mt.self,Br.participants)}if((l=E.recording)==null||l){if(!mt)throw new N("The recording controller cannot be initialized without the `self` module");tu=new IL(mt.self)}if((u=E.spotlight)==null||u){if(!mt)throw new N("The spotlight controller cannot be initialized without the `self` module");iu=new ML(mt.self)}if(((f=E.internals)==null||f)&&(nu=await gE.init()),dr.viewType===Zn.Livestream&&((y=E.livestream)==null||y)){if(!mt)throw new N("The livestream controller cannot be initialized without the `self` module");ge.hasFeature(ye.LIVESTREAM)&&(ru=new LL(mt.self,au))}if((b=E.stage)==null||b){if(!mt)throw new N("The stage client cannot be initialized without the `self` module");rd=new NL(uy,Iue(Sr),mt.self)}if(VD(dr.viewType,Vt)||((k=e.overrides)==null?void 0:k.chat_socket_server)==="socket-service")try{await kt.connect()}catch(Pn){T.error("[Socket Service] Failed to connect to socket server:",{error:Pn})}return new jf(P,Gh,mt,Kt,Br,ri,Ii,eu,tu,iu,nu,ru,rd,su)}static async createSocketServiceAndRoomNodeClient(e){const t=jf.createSocketService(e);return e.shouldInitializeRoomNode?e.capabilities.includes("HIVE")?(await Wle({...e,roomName:e.roomName,peerId:e.peerId,socket:t}),t):(await tL({...e,roomName:e.roomName,peerId:e.peerId}),t):t}static createSocketService(e){const{peerId:t,roomName:i,authToken:r,capabilities:n}=e;return new Vh({peerId:t,roomName:i,authToken:r,capabilities:n})}async joinRoom(){return this.selfController.joinRoom()}async leaveRoom(e="left"){return pR.cleanup(),this.selfController.leaveRoom(e)}};let Xl=jf;zh([C.trace("Controller.joinRoom")],Xl.prototype,"joinRoom",1);zh([C.trace("Controller.leaveRoom")],Xl.prototype,"leaveRoom",1);zh([C.trace("Controller.init")],Xl,"init",1);zh([C.trace("Controller.createSocketServiceAndRoomNodeClient")],Xl,"createSocketServiceAndRoomNodeClient",1);zh([C.trace("Controller.createSocketService")],Xl,"createSocketService",1);var $f;class khe extends ti{constructor(t){super(),j(this,$f,void 0),_(this,"meetings",[]),_(this,"parentMeeting",null),$(this,$f,t.self)}get supportsConnectedMeetings(){return g(this,$f).id!==""&&$e.isV2AuthToken&&ge.hasFeature(ye.CONNECTED_MEETINGS)}get isActive(){return this.meetings.length!==0}get currentMeetingId(){return Xt.currentMeetingId}validateConnectedMeetingsAction(){if(!this.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
            Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`)}async getConnectedMeetings(){return this.validateConnectedMeetingsAction(),await Xt.getConnectedRoomsDump()}async createMeetings(t){return this.validateConnectedMeetingsAction(),(await Xt.createConnectedRooms(t)).map(i=>({id:i.id,title:i.title}))}async updateMeetings(t){this.validateConnectedMeetingsAction(),await Xt.updateConnectedRooms(t.map(i=>({meetingId:i.id,title:i.title})))}async deleteMeetings(t){this.validateConnectedMeetingsAction();const i=this.meetings.map(r=>t.includes(r.id)&&r.participants.length!==0?this.moveParticipants(r.id,this.parentMeeting.id,r.participants.map(n=>n.id)):Promise.resolve());return await Promise.all(i),await Xt.disableConnectedRooms(t)}async moveParticipants(t,i,r){this.validateConnectedMeetingsAction();const n=new Map;[...this.parentMeeting.participants,...this.meetings.flatMap(a=>a.participants)].forEach(a=>n.set(a.id,a));const s=await Xt.movePeersBetweenRooms({sourceMeetingId:t,destinationMeetingId:i,participants:r.map(a=>({id:a}))});return s.success&&(i===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.concat(r.map(a=>n.get(a)))),t===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.filter(a=>!r.includes(a.id))),this.meetings=this.meetings.map(a=>{if(i===a.id){const o=a.participants.concat(r.map(c=>n.get(c)));return{...a,participants:o}}if(t===a.id){const o=a.participants.filter(c=>!r.includes(c.id));return{...a,participants:o}}return a})),s}}$f=new WeakMap;var Phe=Object.defineProperty,Che=Object.getOwnPropertyDescriptor,vE=(e,t,i,r)=>{for(var n=r>1?void 0:r?Che(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&Phe(t,i,n),n},Td,Ku,C1;const Ba=(C1=class{constructor(e,t){_(this,"connectedMeetings"),j(this,Td,void 0),j(this,Ku,void 0),$(this,Td,t),this.connectedMeetings=new khe(e),this.setCurrentMeeting(e)}static init(e,t){return Ba.instance||(Ba.instance=new Ba(e,t)),Ba.instance.connectedMeetings.supportsConnectedMeetings&&(Ba.instance.setupEvents(),e.self.once("roomJoined",()=>Ba.instance.getConnectedMeetings())),Ba.instance}setCurrentMeeting(e){$(this,Ku,e),Xt.currentMeetingId=e.meta.roomName}getConnectedMeetings(){this.connectedMeetings.getConnectedMeetings()}setupEvents(){Xt.socketService&&(Xt.socketService.on(Xe.getConnectedRoomsDump,this.handleConnectedRoomsDump.bind(this)),Xt.socketService.on(Xe.transferPeer,this.handleTransferPeer.bind(this)),Xt.socketService.on(Xe.movedPeer,this.handleMovedPeer.bind(this)),Xt.socketService.on(Xe.connectedRoomsUpdated,this.handleConnectedRoomsUpdated.bind(this)),Xt.socketService.on(Xe.connectedRoomsDeleted,this.handleConnectedRoomsDeleted.bind(this)))}handleTransferPeer(e){const t=Xt.handleTransferPeerRaw(e);return this.switchMeeting(t)}async switchMeeting({authToken:e,meetingId:t}){if(!this.connectedMeetings.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
                Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);this.connectedMeetings.emit("changingMeeting",t);const i=g(this,Ku).self.videoEnabled;await g(this,Ku).leaveRoom("connected-meeting"),Xt.socketService=void 0;const r=await jL.init({authToken:e,apiBase:g(this,Td).apiBase,defaults:{...g(this,Td).defaults,video:i,audio:!1},modules:g(this,Td).modules});return this.connectedMeetings.emit("meetingChanged",r),this.setCurrentMeeting(r),r}handleConnectedRoomsDump(e){const t=Xt.handleConnectedRoomsDumpRaw(e);this.connectedMeetings.meetings=t.meetings.map(i=>({id:i.id,title:i.title,participants:i.participants||[]})),this.connectedMeetings.parentMeeting={id:t.parentMeeting.id,title:t.parentMeeting.title,participants:t.parentMeeting.participants},this.emitStateUpdate()}handleMovedPeer(e){return Xt.handleMovedPeerRaw(e)}handleConnectedRoomsUpdated(e){const t=Xt.handleConnectedRoomsUpdatedRaw(e),i=new Map;this.connectedMeetings.meetings.forEach(r=>{i.set(r.id,r)}),t.forEach(r=>{i.has(r.id)?i.get(r.id).title=r.title:i.set(r.id,{...r,participants:[]})}),this.connectedMeetings.meetings=Array.from(i.values()),this.emitStateUpdate()}handleConnectedRoomsDeleted(e){const t=Xt.handleConnectedRoomsDeletedRaw(e).map(i=>i.id);this.connectedMeetings.meetings=this.connectedMeetings.meetings.filter(i=>!t.includes(i.id))}emitStateUpdate(){this.connectedMeetings.emit("stateUpdate",{meetings:this.connectedMeetings.meetings,parentMeeting:this.connectedMeetings.parentMeeting})}},Td=new WeakMap,Ku=new WeakMap,_(C1,"instance"),C1);let dy=Ba;vE([C.trace("ConnectedMeetingsController.getConnectedMeetings")],dy.prototype,"getConnectedMeetings",1);vE([C.trace("ConnectedMeetingsController.setupEvents")],dy.prototype,"setupEvents",1);vE([C.trace("ConnectedMeetingsController.switchMeeting")],dy.prototype,"switchMeeting",1);function Rhe(e){return(t,i,r)=>{const n=r.value,s=e?Vm(n,e):Vm(n);return r.value=(...a)=>{if(s.cache&&s.cache.has(e(...a))){console.warn(`[Dyte] method "${i}" is called twice. This may result in inconsistent behaviors`);try{T.warn("Memoize::double_invoke",{memoize:{doubleInvoked:{property:i}}})}catch{}}return s.apply(this,a)},r}}var xhe=Object.defineProperty,Ahe=Object.getOwnPropertyDescriptor,ly=(e,t,i,r)=>{for(var n=r>1?void 0:r?Ahe(t,i):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(n=(r?a(t,i,n):a(n))||n);return r&&n&&xhe(t,i,n),n};const Ihe=e=>{var t,i,r,n,s;return`${(t=e.roomName)!=null?t:""}-${e.authToken}-${(i=e.apiBase)!=null?i:""}-${JSON.stringify((r=e.defaults)!=null?r:{})}-${JSON.stringify((n=e.modules)!=null?n:{})}-${JSON.stringify((s=e.overrides)!=null?s:{})}`};var Mi,Jg,R1,hR,gR;let zc=(gR=class{constructor(e){j(this,R1),j(this,Mi,void 0),j(this,Jg,void 0),$(this,Mi,e)}static async init(e){var t,i,r,n,s,a,o;Ye.init();const c=Iv();try{(i=(t=e.modules)==null?void 0:t.tracing)==null||i||(window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION=!0,window.Zone===void 0&&require("zone.js"))}catch{}C.init(c,(n=(r=e.modules)==null?void 0:r.tracing)!=null?n:!0),T.info("DyteClient::init::options",{dyteClientInitOptions:{...e,authToken:`${(s=e.authToken)==null?void 0:s.slice(0,10)}...${(a=e.authToken)==null?void 0:a.slice(-10)}`}}),!navigator.isReactNative&&typeof window<"u"&&(window.addEventListener("error",u=>{var f;!((f=u.filename)!=null&&f.includes("localhost"))&&u.lineno!==0&&T.error("window::error",{error:u.error},!0)}),window.addEventListener("unhandledrejection",u=>{var f,y,b,k,P,w,E,R;T.error("window::unhandledrejection",{error:u==null?void 0:u.reason,networkCall:{url:(y=(f=u==null?void 0:u.reason)==null?void 0:f.config)==null?void 0:y.url,baseURL:(k=(b=u==null?void 0:u.reason)==null?void 0:b.config)==null?void 0:k.baseURL,method:(w=(P=u==null?void 0:u.reason)==null?void 0:P.config)==null?void 0:w.method,status:(E=u==null?void 0:u.reason)==null?void 0:E.status,statusText:(R=u==null?void 0:u.reason)==null?void 0:R.statusText}},!0)})),ase(e.authToken,e.roomName),C.meetingMetadata.roomName=$e.isV2AuthToken?$e.meetingId:e.roomName;const d=await Xl.init(e,c),l=new zc(d);return li(o=l,R1,hR).call(o,e),l}async joinRoom(){return g(this,Mi).joinRoom()}async leaveRoom(e){return g(this,Mi).leaveRoom(e)}get participants(){var e;return(e=g(this,Mi).participantController)==null?void 0:e.participants}get self(){var e;return(e=g(this,Mi).selfController)==null?void 0:e.self}get meta(){var e;return(e=g(this,Mi).metaController)==null?void 0:e.meta}get plugins(){var e;return(e=g(this,Mi).pluginController)==null?void 0:e.plugins}get chat(){var e;return(e=g(this,Mi).chatController)==null?void 0:e.chat}get polls(){var e;return(e=g(this,Mi).pollController)==null?void 0:e.polls}get remote(){var e;return(e=g(this,Mi).remoteController)==null?void 0:e.remote}get connectedMeetings(){var e;return(e=g(this,Jg))==null?void 0:e.connectedMeetings}get recording(){var e;return(e=g(this,Mi).recordingController)==null?void 0:e.recording}get spotlight(){var e;return(e=g(this,Mi).spotlightController)==null?void 0:e.spotlight}get livestream(){var e;return(e=g(this,Mi).livestreamController)==null?void 0:e.livestream}get stage(){var e;return(e=g(this,Mi).stageController)==null?void 0:e.stage}get troubleshoot(){var e;return(e=g(this,Mi).troubleshooterController)==null?void 0:e.troubleshooter}get __internals__(){var e;return(e=g(this,Mi).internalsController)==null?void 0:e.internals}},Mi=new WeakMap,Jg=new WeakMap,R1=new WeakSet,hR=function(e){$(this,Jg,dy.init(this,e))},gR);ly([Yi(e=>{throw new N(e.message,"0002")})],zc.prototype,"joinRoom",1);ly([Yi(e=>{throw new N(e.message,"0003")})],zc.prototype,"leaveRoom",1);ly([Yi(e=>{throw new N(e.message,"0001")}),Rhe(Ihe)],zc,"init",1);zc=ly([Yi(e=>{throw new N(e.message,"0000")})],zc);const jL=zc;var $L={exports:{}},Hh={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var fR=Object.getOwnPropertySymbols,Ohe=Object.prototype.hasOwnProperty,Mhe=Object.prototype.propertyIsEnumerable;function Dhe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Lhe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Lhe();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nhe=iw,FL=60103;Hh.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var mR=Symbol.for;FL=mR("react.element"),Hh.Fragment=mR("react.fragment")}var Uhe=Nhe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jhe=Object.prototype.hasOwnProperty,$he={key:!0,ref:!0,__self:!0,__source:!0};function BL(e,t,i){var r,n={},s=null,a=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)jhe.call(t,r)&&!$he.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:FL,type:e,key:s,ref:a,props:n,_owner:Uhe.current}}Hh.jsx=BL;Hh.jsxs=BL;$L.exports=Hh;$L.exports.jsx;aa.exports.createContext({meeting:void 0,updates:void 0});const Fhe=()=>{const e=aa.exports.useRef(!1),[t,i]=aa.exports.useState();return[t,async n=>{if(!e.current){e.current=!0;try{const s=await jL.init(n);return i(s),s.self.on("roomLeft",()=>i(void 0)),s}catch{}finally{e.current=!1}}}]};var VL=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},rr=(e,t,i)=>(VL(e,t,"read from private field"),i?i.call(e):t.get(e)),mo=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},vo=(e,t,i,r)=>(VL(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),fp,hc,Ff,mp,gc,Bf,Vf,zf;const Bhe={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},zL={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},ai={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},fr={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Va={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Q{static getFirstMatch(t,i){const r=i.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,i){const r=i.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,i,r){if(t.test(i))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const i=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,i,r=!1){const n=Q.getVersionPrecision(t),s=Q.getVersionPrecision(i);let a=Math.max(n,s),o=0;const c=Q.map([t,i],d=>{const l=a-Q.getVersionPrecision(d),u=d+new Array(l+1).join(".0");return Q.map(u.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(o=a-Math.min(n,s)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(t,i){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(t,i);for(n=0;n<t.length;n+=1)r.push(i(t[n]));return r}static find(t,i){let r,n;if(Array.prototype.find)return Array.prototype.find.call(t,i);for(r=0,n=t.length;r<n;r+=1){const s=t[r];if(i(s,r))return s}}static assign(t,...i){const r=t;let n,s;if(Object.assign)return Object.assign(t,...i);for(n=0,s=i.length;n<s;n+=1){const a=i[n];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return t}static getBrowserAlias(t){return Bhe[t]}static getBrowserTypeByAlias(t){return zL[t]||""}}const Et=/version\/(\d+(\.?_?\d+)+)/i,Vhe=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},i=Q.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},i=Q.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},i=Q.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},i=Q.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},i=Q.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},i=Q.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},i=Q.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},i=Q.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=Q.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},i=Q.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},i=Q.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},i=Q.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},i=Q.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},i=Q.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},i=Q.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},i=Q.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},i=Q.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},i=Q.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},i=Q.getFirstMatch(Et,e)||Q.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},i=Q.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},i=Q.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},i=Q.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},i=Q.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},i=Q.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},i=Q.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},i=Q.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},i=Q.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},i=Q.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t={name:"Android Browser"},i=Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},i=Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},i=Q.getFirstMatch(Et,e);return i&&(t.version=i),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,n=e.search("\\(")!==-1?i:t;return{name:Q.getFirstMatch(n,e),version:Q.getSecondMatch(n,e)}}}];var zhe=[{test:[/Roku\/DVP/],describe(e){const t=Q.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:fr.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Q.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:fr.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Q.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=Q.getWindowsVersionName(t);return{name:fr.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:fr.iOS},i=Q.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return i&&(t.version=i),t}},{test:[/macintosh/i],describe(e){const t=Q.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=Q.getMacOSVersionName(t),r={name:fr.MacOS,version:t};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Q.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:fr.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe(e){const t=Q.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=Q.getAndroidVersionName(t),r={name:fr.Android,version:t};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Q.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:fr.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Q.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Q.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Q.getFirstMatch(/\bbb(\d+)/i,e);return{name:fr.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Q.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:fr.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Q.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:fr.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:fr.Linux}}},{test:[/CrOS/],describe(){return{name:fr.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=Q.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:fr.PlayStation4,version:t}}}],Hhe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=Q.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:ai.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:ai.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:ai.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:ai.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:ai.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:ai.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:ai.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe(e){const t=Q.getFirstMatch(/(ipod|iphone)/i,e);return{type:ai.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:ai.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:ai.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:ai.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:ai.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:ai.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:ai.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:ai.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:ai.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:ai.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:ai.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:ai.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:ai.tv}}}],Ghe=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Va.Blink};const i=Q.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Va.EdgeHTML,version:i}}},{test:[/trident/i],describe(e){const t={name:Va.Trident},i=Q.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Va.Presto},i=Q.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test(e){const t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe(e){const t={name:Va.Gecko},i=Q.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Va.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Va.WebKit},i=Q.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];class vR{constructor(t,i=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=Q.find(Vhe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=Q.find(zhe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:i}=this.getOS();return t?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:i}=this.getPlatform();return t?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const t=Q.find(Hhe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=Q.find(Ghe,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Q.assign({},this.parsedResult)}satisfies(t){const i={};let r=0;const n={};let s=0;if(Object.keys(t).forEach(o=>{const c=t[o];typeof c=="string"?(n[o]=c,s+=1):typeof c=="object"&&(i[o]=c,r+=1)}),r>0){const o=Object.keys(i),c=Q.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const d=Q.find(o,l=>this.isPlatform(l));if(d){const l=this.satisfies(i[d]);if(l!==void 0)return l}}if(s>0){const o=Object.keys(n),c=Q.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(n[c])}}isBrowser(t,i=!1){const r=this.getBrowserName().toLowerCase();let n=t.toLowerCase();const s=Q.getBrowserTypeByAlias(n);return i&&s&&(n=s.toLowerCase()),n===r}compareVersion(t){let i=[0],r=t,n=!1;const s=this.getBrowserVersion();if(typeof s=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(n=!0,r=t.substr(2)):i=[],t[0]===">"?i.push(1):i.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(n=!0,r=t.substr(1)),i.indexOf(Q.compareVersions(s,r,n))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,i=!1){return this.isBrowser(t,i)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Whe{static getParser(t,i=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new vR(t,i)}static parse(t){return new vR(t).getResult()}static get BROWSER_MAP(){return zL}static get ENGINE_MAP(){return Va}static get OS_MAP(){return fr}static get PLATFORMS_MAP(){return ai}}class HL{constructor(){this.createCameraVideoElement=t=>{const i=t,{height:r,width:n}=i.getSettings();if(r===void 0||n===void 0)throw Error("Background removal can't commence as Height and Width of the video feed is undefined");const s=document.createElement("video");return s.width=n,s.height=r,s.srcObject=new MediaStream([i]),s}}}var x1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e;function t(p){var m=0;return function(){return m<p.length?{done:!1,value:p[m++]}:{done:!0}}}var i=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,m,v){return p==Array.prototype||p==Object.prototype||(p[m]=v.value),p};function r(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof x1=="object"&&x1];for(var m=0;m<p.length;++m){var v=p[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var n=r(this);function s(p,m){if(m)e:{var v=n;p=p.split(".");for(var S=0;S<p.length-1;S++){var A=p[S];if(!(A in v))break e;v=v[A]}p=p[p.length-1],S=v[p],m=m(S),m!=S&&m!=null&&i(v,p,{configurable:!0,writable:!0,value:m})}}s("Symbol",function(p){function m(O){if(this instanceof m)throw new TypeError("Symbol is not a constructor");return new v(S+(O||"")+"_"+A++,O)}function v(O,x){this.h=O,i(this,"description",{configurable:!0,writable:!0,value:x})}if(p)return p;v.prototype.toString=function(){return this.h};var S="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",A=0;return m}),s("Symbol.iterator",function(p){if(p)return p;p=Symbol("Symbol.iterator");for(var m="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<m.length;v++){var S=n[m[v]];typeof S=="function"&&typeof S.prototype[p]!="function"&&i(S.prototype,p,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return p});function a(p){return p={next:p},p[Symbol.iterator]=function(){return this},p}function o(p){var m=typeof Symbol<"u"&&Symbol.iterator&&p[Symbol.iterator];return m?m.call(p):{next:t(p)}}function c(p){if(!(p instanceof Array)){p=o(p);for(var m,v=[];!(m=p.next()).done;)v.push(m.value);p=v}return p}var d=typeof Object.assign=="function"?Object.assign:function(p,m){for(var v=1;v<arguments.length;v++){var S=arguments[v];if(S)for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(p[A]=S[A])}return p};s("Object.assign",function(p){return p||d});var l=typeof Object.create=="function"?Object.create:function(p){function m(){}return m.prototype=p,new m},u;if(typeof Object.setPrototypeOf=="function")u=Object.setPrototypeOf;else{var f;e:{var y={a:!0},b={};try{b.__proto__=y,f=b.a;break e}catch{}f=!1}u=f?function(p,m){if(p.__proto__=m,p.__proto__!==m)throw new TypeError(p+" is not extensible");return p}:null}var k=u;function P(p,m){if(p.prototype=l(m.prototype),p.prototype.constructor=p,k)k(p,m);else for(var v in m)if(v!="prototype")if(Object.defineProperties){var S=Object.getOwnPropertyDescriptor(m,v);S&&Object.defineProperty(p,v,S)}else p[v]=m[v];p.za=m.prototype}function w(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function E(p){if(p.m)throw new TypeError("Generator is already running");p.m=!0}w.prototype.u=function(p){this.i=p};function R(p,m){p.l={ma:m,na:!0},p.h=p.s||p.v}w.prototype.return=function(p){this.l={return:p},this.h=this.v};function D(p,m,v){return p.h=v,{value:m}}function V(p){this.h=new w,this.i=p}function B(p,m){E(p.h);var v=p.h.j;return v?W(p,"return"in v?v.return:function(S){return{value:S,done:!0}},m,p.h.return):(p.h.return(m),q(p))}function W(p,m,v,S){try{var A=m.call(p.h.j,v);if(!(A instanceof Object))throw new TypeError("Iterator result "+A+" is not an object");if(!A.done)return p.h.m=!1,A;var O=A.value}catch(x){return p.h.j=null,R(p.h,x),q(p)}return p.h.j=null,S.call(p.h,O),q(p)}function q(p){for(;p.h.h;)try{var m=p.i(p.h);if(m)return p.h.m=!1,{value:m.value,done:!1}}catch(v){p.h.i=void 0,R(p.h,v)}if(p.h.m=!1,p.h.l){if(m=p.h.l,p.h.l=null,m.na)throw m.ma;return{value:m.return,done:!0}}return{value:void 0,done:!0}}function fe(p){this.next=function(m){return E(p.h),p.h.j?m=W(p,p.h.j.next,m,p.h.u):(p.h.u(m),m=q(p)),m},this.throw=function(m){return E(p.h),p.h.j?m=W(p,p.h.j.throw,m,p.h.u):(R(p.h,m),m=q(p)),m},this.return=function(m){return B(p,m)},this[Symbol.iterator]=function(){return this}}function ae(p){function m(S){return p.next(S)}function v(S){return p.throw(S)}return new Promise(function(S,A){function O(x){x.done?S(x.value):Promise.resolve(x.value).then(m,v).then(O,A)}O(p.next())})}function he(p){return ae(new fe(new V(p)))}s("Promise",function(p){function m(x){this.i=0,this.j=void 0,this.h=[],this.u=!1;var L=this.l();try{x(L.resolve,L.reject)}catch(F){L.reject(F)}}function v(){this.h=null}function S(x){return x instanceof m?x:new m(function(L){L(x)})}if(p)return p;v.prototype.i=function(x){if(this.h==null){this.h=[];var L=this;this.j(function(){L.m()})}this.h.push(x)};var A=n.setTimeout;v.prototype.j=function(x){A(x,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var x=this.h;this.h=[];for(var L=0;L<x.length;++L){var F=x[L];x[L]=null;try{F()}catch(ie){this.l(ie)}}}this.h=null},v.prototype.l=function(x){this.j(function(){throw x})},m.prototype.l=function(){function x(ie){return function(oe){F||(F=!0,ie.call(L,oe))}}var L=this,F=!1;return{resolve:x(this.I),reject:x(this.m)}},m.prototype.I=function(x){if(x===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(x instanceof m)this.L(x);else{e:switch(typeof x){case"object":var L=x!=null;break e;case"function":L=!0;break e;default:L=!1}L?this.F(x):this.s(x)}},m.prototype.F=function(x){var L=void 0;try{L=x.then}catch(F){this.m(F);return}typeof L=="function"?this.M(L,x):this.s(x)},m.prototype.m=function(x){this.v(2,x)},m.prototype.s=function(x){this.v(1,x)},m.prototype.v=function(x,L){if(this.i!=0)throw Error("Cannot settle("+x+", "+L+"): Promise already settled in state"+this.i);this.i=x,this.j=L,this.i===2&&this.K(),this.H()},m.prototype.K=function(){var x=this;A(function(){if(x.D()){var L=n.console;typeof L<"u"&&L.error(x.j)}},1)},m.prototype.D=function(){if(this.u)return!1;var x=n.CustomEvent,L=n.Event,F=n.dispatchEvent;return typeof F>"u"?!0:(typeof x=="function"?x=new x("unhandledrejection",{cancelable:!0}):typeof L=="function"?x=new L("unhandledrejection",{cancelable:!0}):(x=n.document.createEvent("CustomEvent"),x.initCustomEvent("unhandledrejection",!1,!0,x)),x.promise=this,x.reason=this.j,F(x))},m.prototype.H=function(){if(this.h!=null){for(var x=0;x<this.h.length;++x)O.i(this.h[x]);this.h=null}};var O=new v;return m.prototype.L=function(x){var L=this.l();x.T(L.resolve,L.reject)},m.prototype.M=function(x,L){var F=this.l();try{x.call(L,F.resolve,F.reject)}catch(ie){F.reject(ie)}},m.prototype.then=function(x,L){function F(ve,ce){return typeof ve=="function"?function(Ce){try{ie(ve(Ce))}catch(Fe){oe(Fe)}}:ce}var ie,oe,Pe=new m(function(ve,ce){ie=ve,oe=ce});return this.T(F(x,ie),F(L,oe)),Pe},m.prototype.catch=function(x){return this.then(void 0,x)},m.prototype.T=function(x,L){function F(){switch(ie.i){case 1:x(ie.j);break;case 2:L(ie.j);break;default:throw Error("Unexpected state: "+ie.i)}}var ie=this;this.h==null?O.i(F):this.h.push(F),this.u=!0},m.resolve=S,m.reject=function(x){return new m(function(L,F){F(x)})},m.race=function(x){return new m(function(L,F){for(var ie=o(x),oe=ie.next();!oe.done;oe=ie.next())S(oe.value).T(L,F)})},m.all=function(x){var L=o(x),F=L.next();return F.done?S([]):new m(function(ie,oe){function Pe(Ce){return function(Fe){ve[Ce]=Fe,ce--,ce==0&&ie(ve)}}var ve=[],ce=0;do ve.push(void 0),ce++,S(F.value).T(Pe(ve.length-1),oe),F=L.next();while(!F.done)})},m}),s("Number.isNaN",function(p){return p||function(m){return typeof m=="number"&&isNaN(m)}});function tt(p,m){p instanceof String&&(p+="");var v=0,S=!1,A={next:function(){if(!S&&v<p.length){var O=v++;return{value:m(O,p[O]),done:!1}}return S=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}s("Array.prototype.keys",function(p){return p||function(){return tt(this,function(m){return m})}}),s("Array.prototype.fill",function(p){return p||function(m,v,S){var A=this.length||0;for(0>v&&(v=Math.max(0,A+v)),(S==null||S>A)&&(S=A),S=Number(S),0>S&&(S=Math.max(0,A+S)),v=Number(v||0);v<S;v++)this[v]=m;return this}});function ht(p){return p||Array.prototype.fill}s("Int8Array.prototype.fill",ht),s("Uint8Array.prototype.fill",ht),s("Uint8ClampedArray.prototype.fill",ht),s("Int16Array.prototype.fill",ht),s("Uint16Array.prototype.fill",ht),s("Int32Array.prototype.fill",ht),s("Uint32Array.prototype.fill",ht),s("Float32Array.prototype.fill",ht),s("Float64Array.prototype.fill",ht),s("Object.is",function(p){return p||function(m,v){return m===v?m!==0||1/m===1/v:m!==m&&v!==v}}),s("Array.prototype.includes",function(p){return p||function(m,v){var S=this;S instanceof String&&(S=String(S));var A=S.length;for(v=v||0,0>v&&(v=Math.max(v+A,0));v<A;v++){var O=S[v];if(O===m||Object.is(O,m))return!0}return!1}}),s("String.prototype.includes",function(p){return p||function(m,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(m instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(m,v||0)!==-1}});var ii=this||self;function Sr(p,m){p=p.split(".");var v=ii;p[0]in v||typeof v.execScript>"u"||v.execScript("var "+p[0]);for(var S;p.length&&(S=p.shift());)p.length||m===void 0?v[S]&&v[S]!==Object.prototype[S]?v=v[S]:v=v[S]={}:v[S]=m}var dr=Array.prototype.map?function(p,m){return Array.prototype.map.call(p,m,void 0)}:function(p,m){for(var v=p.length,S=Array(v),A=typeof p=="string"?p.split(""):p,O=0;O<v;O++)O in A&&(S[O]=m.call(void 0,A[O],O,p));return S},sn={},H=null;function re(p){var m;m===void 0&&(m=0),wt(),m=sn[m];for(var v=Array(Math.floor(p.length/3)),S=m[64]||"",A=0,O=0;A<p.length-2;A+=3){var x=p[A],L=p[A+1],F=p[A+2],ie=m[x>>2];x=m[(x&3)<<4|L>>4],L=m[(L&15)<<2|F>>6],F=m[F&63],v[O++]=ie+x+L+F}switch(ie=0,F=S,p.length-A){case 2:ie=p[A+1],F=m[(ie&15)<<2]||S;case 1:p=p[A],v[O]=m[p>>2]+m[(p&3)<<4|ie>>4]+F+S}return v.join("")}function pe(p){var m=p.length,v=3*m/4;v%3?v=Math.floor(v):"=.".indexOf(p[m-1])!=-1&&(v="=.".indexOf(p[m-2])!=-1?v-2:v-1);var S=new Uint8Array(v),A=0;return He(p,function(O){S[A++]=O}),A!==v?S.subarray(0,A):S}function He(p,m){function v(F){for(;S<p.length;){var ie=p.charAt(S++),oe=H[ie];if(oe!=null)return oe;if(!/^[\s\xa0]*$/.test(ie))throw Error("Unknown base64 encoding at char: "+ie)}return F}wt();for(var S=0;;){var A=v(-1),O=v(0),x=v(64),L=v(64);if(L===64&&A===-1)break;m(A<<2|O>>4),x!=64&&(m(O<<4&240|x>>2),L!=64&&m(x<<6&192|L))}}function wt(){if(!H){H={};for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),m=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var S=p.concat(m[v].split(""));sn[v]=S;for(var A=0;A<S.length;A++){var O=S[A];H[O]===void 0&&(H[O]=A)}}}}var Vt=typeof Uint8Array<"u",kt;function Er(){return kt||(kt=new Uint8Array(0))}var ri={},Br=typeof Uint8Array.prototype.slice=="function",Kt=0,Ii=0;function mt(p){var m=0>p;p=Math.abs(p);var v=p>>>0;p=Math.floor((p-v)/4294967296),m&&(v=o(eu(v,p)),m=v.next().value,p=v.next().value,v=m),Kt=v>>>0,Ii=p>>>0}var Gh=typeof BigInt=="function";function eu(p,m){return m=~m,p?p=~p+1:m+=1,[p,m]}function tu(p,m){this.i=p>>>0,this.h=m>>>0}function iu(p){if(!p)return ru||(ru=new tu(0,0));if(!/^-?\d+$/.test(p))return null;if(16>p.length)mt(Number(p));else if(Gh)p=BigInt(p),Kt=Number(p&BigInt(4294967295))>>>0,Ii=Number(p>>BigInt(32)&BigInt(4294967295));else{var m=+(p[0]==="-");Ii=Kt=0;for(var v=p.length,S=m,A=(v-m)%6+m;A<=v;S=A,A+=6)S=Number(p.slice(S,A)),Ii*=1e6,Kt=1e6*Kt+S,4294967296<=Kt&&(Ii+=Kt/4294967296|0,Kt%=4294967296);m&&(m=o(eu(Kt,Ii)),p=m.next().value,m=m.next().value,Kt=p,Ii=m)}return new tu(Kt,Ii)}var ru;function nu(p,m){return Error("Invalid wire type: "+p+" (at position "+m+")")}function rd(){return Error("Failed to read varint, encoding is invalid.")}function su(p,m){return Error("Tried to read past the end of the data "+m+" > "+p)}function ss(){throw Error("Invalid UTF8")}function Wh(p,m){return m=String.fromCharCode.apply(null,m),p==null?m:p+m}var nd=void 0,au,uy=typeof TextDecoder<"u",qh,Pn=typeof TextEncoder<"u",yE;function bE(p){if(p!==ri)throw Error("illegal external caller")}function ou(p,m){if(bE(m),this.V=p,p!=null&&p.length===0)throw Error("ByteString should be constructed with non-empty values")}function py(){return yE||(yE=new ou(null,ri))}function _E(p){bE(ri);var m=p.V;return m=m==null||Vt&&m!=null&&m instanceof Uint8Array?m:typeof m=="string"?pe(m):null,m==null?m:p.V=m}function KL(p){if(typeof p=="string")return{buffer:pe(p),C:!1};if(Array.isArray(p))return{buffer:new Uint8Array(p),C:!1};if(p.constructor===Uint8Array)return{buffer:p,C:!1};if(p.constructor===ArrayBuffer)return{buffer:new Uint8Array(p),C:!1};if(p.constructor===ou)return{buffer:_E(p)||Er(),C:!0};if(p instanceof Uint8Array)return{buffer:new Uint8Array(p.buffer,p.byteOffset,p.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function wE(p){this.i=null,this.m=!1,this.h=this.j=this.l=0,hy(this,p)}function hy(p,m){var v={};p.S=v.S===void 0?!1:v.S,m&&(m=KL(m),p.i=m.buffer,p.m=m.C,p.l=0,p.j=p.i.length,p.h=p.l)}wE.prototype.reset=function(){this.h=this.l};function Lo(p,m){if(p.h=m,m>p.j)throw su(p.j,m)}function cu(p){var m=p.i,v=p.h,S=m[v++],A=S&127;if(S&128&&(S=m[v++],A|=(S&127)<<7,S&128&&(S=m[v++],A|=(S&127)<<14,S&128&&(S=m[v++],A|=(S&127)<<21,S&128&&(S=m[v++],A|=S<<28,S&128&&m[v++]&128&&m[v++]&128&&m[v++]&128&&m[v++]&128&&m[v++]&128)))))throw rd();return Lo(p,v),A}function SE(p,m){if(0>m)throw Error("Tried to read a negative byte length: "+m);var v=p.h,S=v+m;if(S>p.j)throw su(m,p.j-v);return p.h=S,v}var EE=[];function gy(){this.h=[]}gy.prototype.length=function(){return this.h.length},gy.prototype.end=function(){var p=this.h;return this.h=[],p};function TE(p,m,v){for(;0<v||127<m;)p.h.push(m&127|128),m=(m>>>7|v<<25)>>>0,v>>>=7;p.h.push(m)}function No(p,m){for(;127<m;)p.h.push(m&127|128),m>>>=7;p.h.push(m)}function fy(p){if(EE.length){var m=EE.pop();hy(m,p),p=m}else p=new wE(p);this.h=p,this.j=this.h.h,this.i=this.l=-1,this.setOptions(void 0)}fy.prototype.setOptions=function(p){p=p===void 0?{}:p,this.ca=p.ca===void 0?!1:p.ca},fy.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function kE(p){var m=p.h;if(m.h==m.j)return!1;p.j=p.h.h;var v=cu(p.h)>>>0;if(m=v>>>3,v&=7,!(0<=v&&5>=v))throw nu(v,p.j);if(1>m)throw Error("Invalid field number: "+m+" (at position "+p.j+")");return p.l=m,p.i=v,!0}function Jh(p){switch(p.i){case 0:if(p.i!=0)Jh(p);else e:{p=p.h;for(var m=p.h,v=m+10,S=p.i;m<v;)if((S[m++]&128)===0){Lo(p,m);break e}throw rd()}break;case 1:p=p.h,Lo(p,p.h+8);break;case 2:p.i!=2?Jh(p):(m=cu(p.h)>>>0,p=p.h,Lo(p,p.h+m));break;case 5:p=p.h,Lo(p,p.h+4);break;case 3:m=p.l;do{if(!kE(p))throw Error("Unmatched start-group tag: stream EOF");if(p.i==4){if(p.l!=m)throw Error("Unmatched end-group tag");break}Jh(p)}while(1);break;default:throw nu(p.i,p.j)}}var Kh=[];function YL(){this.j=[],this.i=0,this.h=new gy}function sd(p,m){m.length!==0&&(p.j.push(m),p.i+=m.length)}function QL(p,m){if(m=m.R){sd(p,p.h.end());for(var v=0;v<m.length;v++)sd(p,_E(m[v])||Er())}}var js=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Uo(p,m){return js?p[js]|=m:p.A!==void 0?p.A|=m:(Object.defineProperties(p,{A:{value:m,configurable:!0,writable:!0,enumerable:!1}}),m)}function PE(p,m){js?p[js]&&(p[js]&=~m):p.A!==void 0&&(p.A&=~m)}function ni(p){var m;return js?m=p[js]:m=p.A,m==null?0:m}function as(p,m){js?p[js]=m:p.A!==void 0?p.A=m:Object.defineProperties(p,{A:{value:m,configurable:!0,writable:!0,enumerable:!1}})}function my(p){return Uo(p,1),p}function ZL(p,m){as(m,(p|0)&-51)}function vy(p,m){as(m,(p|18)&-41)}var yy={};function Yh(p){return p!==null&&typeof p=="object"&&!Array.isArray(p)&&p.constructor===Object}var du,CE=[];as(CE,23),du=Object.freeze(CE);function by(p){if(ni(p.o)&2)throw Error("Cannot mutate an immutable Message")}function _y(p){var m=p.length;(m=m?p[m-1]:void 0)&&Yh(m)?m.g=1:(m={},p.push((m.g=1,m)))}var Qh;function XL(p){switch(typeof p){case"number":return isFinite(p)?p:String(p);case"object":if(p)if(Array.isArray(p)){if((ni(p)&128)!==0)return p=Array.prototype.slice.call(p),_y(p),p}else{if(Vt&&p!=null&&p instanceof Uint8Array)return re(p);if(p instanceof ou){var m=p.V;return m==null?"":typeof m=="string"?m:p.V=re(m)}}}return p}function RE(p,m,v,S){if(p!=null){if(Array.isArray(p))p=wy(p,m,v,S!==void 0);else if(Yh(p)){var A={},O;for(O in p)A[O]=RE(p[O],m,v,S);p=A}else p=m(p,S);return p}}function wy(p,m,v,S){var A=ni(p);S=S?!!(A&16):void 0,p=Array.prototype.slice.call(p);for(var O=0;O<p.length;O++)p[O]=RE(p[O],m,v,S);return v(A,p),p}function e6(p){return p.ja===yy?p.toJSON():XL(p)}function t6(p,m){p&128&&_y(m)}function xE(p){var m=p.i+p.G;return p.B||(p.B=p.o[m]={})}function Cn(p,m){return m===-1?null:m>=p.i?p.B?p.B[m]:void 0:p.o[m+p.G]}function os(p,m,v,S){by(p),lu(p,m,v,S)}function lu(p,m,v,S){p.j&&(p.j=void 0),m>=p.i||S?xE(p)[m]=v:(p.o[m+p.G]=v,(p=p.B)&&m in p&&delete p[m])}function Sy(p,m,v,S){var A=Cn(p,m);Array.isArray(A)||(A=du);var O=ni(A);if(O&1||my(A),S)O&2||Uo(A,2),v&1||Object.freeze(A);else{S=!(v&2);var x=O&2;v&1||!x?S&&O&16&&!x&&PE(A,16):(A=my(Array.prototype.slice.call(A)),lu(p,m,A))}return A}function Ey(p,m){var v=Cn(p,m);if(v==null)return v;if(typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"){var S=Number(v);return S!==v&&lu(p,m,S),S}}function AE(p,m,v,S,A){p.h||(p.h={});var O=p.h[v],x=Sy(p,v,3,A);if(!O){var L=x;O=[];var F=!!(ni(p.o)&16);x=!!(ni(L)&2);var ie=L;!A&&x&&(L=Array.prototype.slice.call(L));for(var oe=x,Pe=0;Pe<L.length;Pe++){var ve=L[Pe],ce=m,Ce=!1;if(Ce=Ce===void 0?!1:Ce,ve=Array.isArray(ve)?new ce(ve):Ce?new ce:void 0,ve!==void 0){ce=ve.o;var Fe=Ce=ni(ce);x&&(Fe|=2),F&&(Fe|=16),Fe!=Ce&&as(ce,Fe),ce=Fe,oe=oe||!!(2&ce),O.push(ve)}}return p.h[v]=O,F=ni(L),m=F|33,m=oe?m&-9:m|8,F!=m&&(oe=L,Object.isFrozen(oe)&&(oe=Array.prototype.slice.call(oe)),as(oe,m),L=oe),ie!==L&&lu(p,v,L),(A||S&&x)&&Uo(O,2),S&&Object.freeze(O),O}return x=O,A||(Object.isFrozen(x)?S||(O=Array.prototype.slice.call(O),p.h[v]=O):S&&Object.freeze(x)),O}function Ty(p,m,v){var S=!!(ni(p.o)&2);if(m=AE(p,m,v,S,S),p=Sy(p,v,3,S),!(S||ni(p)&8)){for(S=0;S<m.length;S++){if(v=m[S],ni(v.o)&2){var A=LE(v,!1);A.j=v}else A=v;v!==A&&(m[S]=A,p[S]=A.o)}Uo(p,8)}return m}function cs(p,m,v){if(v!=null&&typeof v!="number")throw Error("Value of float field must be a number|null|undefined, found "+typeof v+": "+v);os(p,m,v)}function IE(p,m,v,S,A){by(p);var O=AE(p,v,m,!1,!1);return v=S!=null?S:new v,p=Sy(p,m,2,!1),A!=null?(O.splice(A,0,v),p.splice(A,0,v.o)):(O.push(v),p.push(v.o)),v.C()&&PE(p,8),v}function uu(p,m){return p==null?m:p}function ds(p,m,v){return v=v===void 0?0:v,uu(Ey(p,m),v)}function OE(p,m,v){if(v=v===void 0?vy:v,p!=null){if(Vt&&p instanceof Uint8Array)return p.length?new ou(new Uint8Array(p),ri):py();if(Array.isArray(p)){var S=ni(p);return S&2?p:m&&!(S&32)&&(S&16||S===0)?(as(p,S|2),p):(p=wy(p,OE,v,!0),m=ni(p),m&4&&m&2&&Object.freeze(p),p)}return p.ja===yy?DE(p):p}}function ME(p,m,v,S,A,O,x){if(p=p.h&&p.h[v]){if(S=ni(p),S&2?S=p:(O=dr(p,DE),vy(S,O),Object.freeze(O),S=O),by(m),x=S==null?du:my([]),S!=null){for(O=!1,p=0;p<S.length;p++){var L=S[p];O=O||!!(ni(L.o)&2),x[p]=L.o}O=(O?0:8)|1,p=ni(x),(p&O)!==O&&(Object.isFrozen(x)&&(x=Array.prototype.slice.call(x)),as(x,p|O)),m.h||(m.h={}),m.h[v]=S}else m.h&&(m.h[v]=void 0);lu(m,v,x,A)}else os(m,v,OE(S,O,x),A)}function DE(p){return ni(p.o)&2||(p=LE(p,!0),Uo(p.o,2)),p}function LE(p,m){var v=p.o,S=[];Uo(S,16);var A=p.constructor.h;if(A&&S.push(A),A=p.B,A){S.length=v.length,S.fill(void 0,S.length,v.length);var O={};S[S.length-1]=O}(ni(v)&128)!==0&&_y(S),m=m||p.C()?vy:ZL;var x=p.constructor;Qh=S,S=new x(S),Qh=void 0,p.R&&(S.R=p.R.slice()),x=!!(ni(v)&16);for(var L=A?v.length-1:v.length,F=0;F<L;F++)ME(p,S,F-p.G,v[F],!1,x,m);if(A)for(var ie in A)v=A[ie],L=+ie,Number.isNaN(L)?O[L]=v:ME(p,S,L,v,!0,x,m);return S}function Tr(p,m,v){p==null&&(p=Qh),Qh=void 0;var S=this.constructor.i||0,A=0<S,O=this.constructor.h,x=!1;if(p==null){p=O?[O]:[];var L=!0;as(p,48)}else{if(!Array.isArray(p)||O&&O!==p[0])throw Error();var F=Uo(p,0),ie=F;if((L=(16&ie)!==0)&&((x=(32&ie)!==0)||(ie|=32)),A){if(128&ie)S=0;else if(0<p.length){var oe=p[p.length-1];if(Yh(oe)&&"g"in oe){S=0,ie|=128,delete oe.g;var Pe=!0,ve;for(ve in oe){Pe=!1;break}Pe&&p.pop()}}}else if(128&ie)throw Error();F!==ie&&as(p,ie)}this.G=(O?0:-1)-S,this.h=void 0,this.o=p;e:{if(O=this.o.length,S=O-1,O&&(O=this.o[S],Yh(O))){this.B=O,this.i=S-this.G;break e}m!==void 0&&-1<m?(this.i=Math.max(m,S+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!A&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){m=L&&!x&&!0,A=this.i;var ce;for(L=0;L<v.length;L++)x=v[L],x<A?(x+=this.G,(S=p[x])?NE(S,m):p[x]=du):(ce||(ce=xE(this)),(S=ce[x])?NE(S,m):ce[x]=du)}}Tr.prototype.toJSON=function(){return wy(this.o,e6,t6)},Tr.prototype.C=function(){return!!(ni(this.o)&2)};function NE(p,m){if(Array.isArray(p)){var v=ni(p),S=1;!m||v&2||(S|=16),(v&S)!==S&&as(p,v|S)}}Tr.prototype.ja=yy,Tr.prototype.toString=function(){return this.o.toString()};function UE(p,m,v){if(v){var S={},A;for(A in v){var O=v[A],x=O.ra;x||(S.J=O.xa||O.oa.W,O.ia?(S.aa=VE(O.ia),x=function(L){return function(F,ie,oe){return L.J(F,ie,oe,L.aa)}}(S)):O.ka?(S.Z=zE(O.da.P,O.ka),x=function(L){return function(F,ie,oe){return L.J(F,ie,oe,L.Z)}}(S)):x=S.J,O.ra=x),x(m,p,O.da),S={J:S.J,aa:S.aa,Z:S.Z}}}QL(m,p)}var Zh=Symbol();function jE(p,m,v){return p[Zh]||(p[Zh]=function(S,A){return m(S,A,v)})}function $E(p){var m=p[Zh];if(!m){var v=Py(p);m=function(S,A){return HE(S,A,v)},p[Zh]=m}return m}function i6(p){var m=p.ia;if(m)return $E(m);if(m=p.wa)return jE(p.da.P,m,p.ka)}function r6(p){var m=i6(p),v=p.da,S=p.oa.U;return m?function(A,O){return S(A,O,v,m)}:function(A,O){return S(A,O,v)}}function FE(p,m){var v=p[m];return typeof v=="function"&&v.length===0&&(v=v(),p[m]=v),Array.isArray(v)&&(hu in v||pu in v||0<v.length&&typeof v[0]=="function")?v:void 0}function BE(p,m,v,S,A,O){m.P=p[0];var x=1;if(p.length>x&&typeof p[x]!="number"){var L=p[x++];v(m,L)}for(;x<p.length;){v=p[x++];for(var F=x+1;F<p.length&&typeof p[F]!="number";)F++;switch(L=p[x++],F-=x,F){case 0:S(m,v,L);break;case 1:(F=FE(p,x))?(x++,A(m,v,L,F)):S(m,v,L,p[x++]);break;case 2:F=x++,F=FE(p,F),A(m,v,L,F,p[x++]);break;case 3:O(m,v,L,p[x++],p[x++],p[x++]);break;case 4:O(m,v,L,p[x++],p[x++],p[x++],p[x++]);break;default:throw Error("unexpected number of binary field arguments: "+F)}}return m}var Xh=Symbol();function VE(p){var m=p[Xh];if(!m){var v=ky(p);m=function(S,A){return GE(S,A,v)},p[Xh]=m}return m}function zE(p,m){var v=p[Xh];return v||(v=function(S,A){return UE(S,A,m)},p[Xh]=v),v}var pu=Symbol();function n6(p,m){p.push(m)}function s6(p,m,v){p.push(m,v.W)}function a6(p,m,v,S){var A=VE(S),O=ky(S).P,x=v.W;p.push(m,function(L,F,ie){return x(L,F,ie,O,A)})}function o6(p,m,v,S,A,O){var x=zE(S,O),L=v.W;p.push(m,function(F,ie,oe){return L(F,ie,oe,S,x)})}function ky(p){var m=p[pu];return m||(m=BE(p,p[pu]=[],n6,s6,a6,o6),hu in p&&pu in p&&(p.length=0),m)}var hu=Symbol();function c6(p,m){p[0]=m}function d6(p,m,v,S){var A=v.U;p[m]=S?function(O,x,L){return A(O,x,L,S)}:A}function l6(p,m,v,S,A){var O=v.U,x=$E(S),L=Py(S).P;p[m]=function(F,ie,oe){return O(F,ie,oe,L,x,A)}}function u6(p,m,v,S,A,O,x){var L=v.U,F=jE(S,A,O);p[m]=function(ie,oe,Pe){return L(ie,oe,Pe,S,F,x)}}function Py(p){var m=p[hu];return m||(m=BE(p,p[hu]={},c6,d6,l6,u6),hu in p&&pu in p&&(p.length=0),m)}function HE(p,m,v){for(;kE(m)&&m.i!=4;){var S=m.l,A=v[S];if(!A){var O=v[0];O&&(O=O[S])&&(A=v[S]=r6(O))}if(!A||!A(m,p,S)){A=m,S=p,O=A.j,Jh(A);var x=A;if(!x.ca){if(A=x.h.h-O,x.h.h=O,x=x.h,A==0)A=py();else{if(O=SE(x,A),x.S&&x.m)A=x.i.subarray(O,O+A);else{x=x.i;var L=O;A=O+A,A=L===A?Er():Br?x.slice(L,A):new Uint8Array(x.subarray(L,A))}A=A.length==0?py():new ou(A,ri)}(O=S.R)?O.push(A):S.R=[A]}}}return p}function Cy(p,m){if(Kh.length){var v=Kh.pop();v.setOptions(void 0),hy(v.h,p),p=v}else p=new fy(p);try{var S=Py(m);return HE(new S.P,p,S)}finally{m=p.h,m.i=null,m.m=!1,m.l=0,m.j=0,m.h=0,m.S=!1,p.l=-1,p.i=-1,100>Kh.length&&Kh.push(p)}}function GE(p,m,v){for(var S=v.length,A=S%2==1,O=A?1:0;O<S;O+=2)(0,v[O+1])(m,p,v[O]);UE(p,m,A?v[0]:void 0)}function Ry(p,m){var v=new YL;GE(p,v,ky(m)),sd(v,v.h.end()),p=new Uint8Array(v.i),m=v.j;for(var S=m.length,A=0,O=0;O<S;O++){var x=m[O];p.set(x,A),A+=x.length}return v.j=[p],p}function gu(p,m){return{U:p,W:m}}var Rn=gu(function(p,m,v){if(p.i!==5)return!1;p=p.h;var S=p.i,A=p.h,O=S[A],x=S[A+1],L=S[A+2];return S=S[A+3],Lo(p,p.h+4),x=(O<<0|x<<8|L<<16|S<<24)>>>0,p=2*(x>>31)+1,O=x>>>23&255,x&=8388607,os(m,v,O==255?x?NaN:1/0*p:O==0?p*Math.pow(2,-149)*x:p*Math.pow(2,O-150)*(x+Math.pow(2,23))),!0},function(p,m,v){if(m=Ey(m,v),m!=null){No(p.h,8*v+5),p=p.h;var S=+m;S===0?0<1/S?Kt=Ii=0:(Ii=0,Kt=2147483648):isNaN(S)?(Ii=0,Kt=2147483647):(S=(v=0>S?-2147483648:0)?-S:S,34028234663852886e22<S?(Ii=0,Kt=(v|2139095040)>>>0):11754943508222875e-54>S?(S=Math.round(S/Math.pow(2,-149)),Ii=0,Kt=(v|S)>>>0):(m=Math.floor(Math.log(S)/Math.LN2),S*=Math.pow(2,-m),S=Math.round(8388608*S),16777216<=S&&++m,Ii=0,Kt=(v|m+127<<23|S&8388607)>>>0)),v=Kt,p.h.push(v>>>0&255),p.h.push(v>>>8&255),p.h.push(v>>>16&255),p.h.push(v>>>24&255)}}),p6=gu(function(p,m,v){if(p.i!==0)return!1;var S=p.h,A=0,O=p=0,x=S.i,L=S.h;do{var F=x[L++];A|=(F&127)<<O,O+=7}while(32>O&&F&128);for(32<O&&(p|=(F&127)>>4),O=3;32>O&&F&128;O+=7)F=x[L++],p|=(F&127)<<O;if(Lo(S,L),128>F)S=A>>>0,F=p>>>0,(p=F&2147483648)&&(S=~S+1>>>0,F=~F>>>0,S==0&&(F=F+1>>>0)),S=4294967296*F+(S>>>0);else throw rd();return os(m,v,p?-S:S),!0},function(p,m,v){m=Cn(m,v),m!=null&&(typeof m=="string"&&iu(m),m!=null&&(No(p.h,8*v),typeof m=="number"?(p=p.h,mt(m),TE(p,Kt,Ii)):(v=iu(m),TE(p.h,v.i,v.h))))}),h6=gu(function(p,m,v){return p.i!==0?!1:(os(m,v,cu(p.h)),!0)},function(p,m,v){if(m=Cn(m,v),m!=null&&m!=null)if(No(p.h,8*v),p=p.h,v=m,0<=v)No(p,v);else{for(m=0;9>m;m++)p.h.push(v&127|128),v>>=7;p.h.push(1)}}),WE=gu(function(p,m,v){if(p.i!==2)return!1;var S=cu(p.h)>>>0;p=p.h;var A=SE(p,S);if(p=p.i,uy){var O=p,x;(x=au)||(x=au=new TextDecoder("utf-8",{fatal:!0})),p=A+S,O=A===0&&p===O.length?O:O.subarray(A,p);try{var L=x.decode(O)}catch(Pe){if(nd===void 0){try{x.decode(new Uint8Array([128]))}catch{}try{x.decode(new Uint8Array([97])),nd=!0}catch{nd=!1}}throw!nd&&(au=void 0),Pe}}else{L=A,S=L+S,A=[];for(var F=null,ie,oe;L<S;)ie=p[L++],128>ie?A.push(ie):224>ie?L>=S?ss():(oe=p[L++],194>ie||(oe&192)!==128?(L--,ss()):A.push((ie&31)<<6|oe&63)):240>ie?L>=S-1?ss():(oe=p[L++],(oe&192)!==128||ie===224&&160>oe||ie===237&&160<=oe||((O=p[L++])&192)!==128?(L--,ss()):A.push((ie&15)<<12|(oe&63)<<6|O&63)):244>=ie?L>=S-2?ss():(oe=p[L++],(oe&192)!==128||(ie<<28)+(oe-144)>>30!==0||((O=p[L++])&192)!==128||((x=p[L++])&192)!==128?(L--,ss()):(ie=(ie&7)<<18|(oe&63)<<12|(O&63)<<6|x&63,ie-=65536,A.push((ie>>10&1023)+55296,(ie&1023)+56320))):ss(),8192<=A.length&&(F=Wh(F,A),A.length=0);L=Wh(F,A)}return os(m,v,L),!0},function(p,m,v){if(m=Cn(m,v),m!=null){var S=!1;if(S=S===void 0?!1:S,Pn){if(S&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(m))throw Error("Found an unpaired surrogate");m=(qh||(qh=new TextEncoder)).encode(m)}else{for(var A=0,O=new Uint8Array(3*m.length),x=0;x<m.length;x++){var L=m.charCodeAt(x);if(128>L)O[A++]=L;else{if(2048>L)O[A++]=L>>6|192;else{if(55296<=L&&57343>=L){if(56319>=L&&x<m.length){var F=m.charCodeAt(++x);if(56320<=F&&57343>=F){L=1024*(L-55296)+F-56320+65536,O[A++]=L>>18|240,O[A++]=L>>12&63|128,O[A++]=L>>6&63|128,O[A++]=L&63|128;continue}else x--}if(S)throw Error("Found an unpaired surrogate");L=65533}O[A++]=L>>12|224,O[A++]=L>>6&63|128}O[A++]=L&63|128}}m=A===O.length?O:O.subarray(0,A)}No(p.h,8*v+2),No(p.h,m.length),sd(p,p.h.end()),sd(p,m)}}),qE=gu(function(p,m,v,S,A){if(p.i!==2)return!1;m=IE(m,v,S),v=p.h.j,S=cu(p.h)>>>0;var O=p.h.h+S,x=O-v;if(0>=x&&(p.h.j=O,A(m,p,void 0,void 0,void 0),x=O-p.h.h),x)throw Error("Message parsing ended unexpectedly. Expected to read "+(S+" bytes, instead read "+(S-x)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return p.h.h=O,p.h.j=v,!0},function(p,m,v,S,A){if(m=Ty(m,S,v),m!=null)for(S=0;S<m.length;S++){var O=p;No(O.h,8*v+2);var x=O.h.end();sd(O,x),x.push(O.i),O=x,A(m[S],p),x=p;var L=O.pop();for(L=x.i+x.h.length()-L;127<L;)O.push(L&127|128),L>>>=7,x.i++;O.push(L),x.i++}});function fu(p){Tr.call(this,p)}P(fu,Tr);var JE=[fu,1,h6,2,Rn,3,WE,4,WE];function xy(p){Tr.call(this,p,-1,g6)}P(xy,Tr),xy.prototype.addClassification=function(p,m){return IE(this,1,fu,p,m),this};var g6=[1],f6=[xy,1,qE,JE];function eg(p){Tr.call(this,p)}P(eg,Tr);var KE=[eg,1,Rn,2,Rn,3,Rn,4,Rn,5,Rn];function YE(p){Tr.call(this,p,-1,m6)}P(YE,Tr);var m6=[1],v6=[YE,1,qE,KE];function Ay(p){Tr.call(this,p)}P(Ay,Tr);var QE=[Ay,1,Rn,2,Rn,3,Rn,4,Rn,5,Rn,6,p6];function ZE(p,m,v){if(v=p.createShader(v===0?p.VERTEX_SHADER:p.FRAGMENT_SHADER),p.shaderSource(v,m),p.compileShader(v),!p.getShaderParameter(v,p.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+p.getShaderInfoLog(v));return v}function y6(p){return Ty(p,fu,1).map(function(m){return{index:uu(Cn(m,1),0),qa:ds(m,2),label:Cn(m,3)!=null?uu(Cn(m,3),""):void 0,displayName:Cn(m,4)!=null?uu(Cn(m,4),""):void 0}})}function b6(p){return{x:ds(p,1),y:ds(p,2),z:ds(p,3),visibility:Ey(p,4)!=null?ds(p,4):void 0}}function Iy(p,m){this.i=p,this.h=m,this.m=0}function XE(p,m,v){return _6(p,m),typeof p.h.canvas.transferToImageBitmap=="function"?Promise.resolve(p.h.canvas.transferToImageBitmap()):v?Promise.resolve(p.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(p.h.canvas):(p.j===void 0&&(p.j=document.createElement("canvas")),new Promise(function(S){p.j.height=p.h.canvas.height,p.j.width=p.h.canvas.width,p.j.getContext("2d",{}).drawImage(p.h.canvas,0,0,p.h.canvas.width,p.h.canvas.height),S(p.j)}))}function _6(p,m){var v=p.h;if(p.s===void 0){var S=ZE(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),A=ZE(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),O=v.createProgram();if(v.attachShader(O,S),v.attachShader(O,A),v.linkProgram(O),!v.getProgramParameter(O,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(O));S=p.s=O,v.useProgram(S),A=v.getUniformLocation(S,"sampler0"),p.l={O:v.getAttribLocation(S,"aVertex"),N:v.getAttribLocation(S,"aTex"),ya:A},p.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,p.v),v.enableVertexAttribArray(p.l.O),v.vertexAttribPointer(p.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),p.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,p.u),v.enableVertexAttribArray(p.l.N),v.vertexAttribPointer(p.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(A,0)}S=p.l,v.useProgram(p.s),v.canvas.width=m.width,v.canvas.height=m.height,v.viewport(0,0,m.width,m.height),v.activeTexture(v.TEXTURE0),p.i.bindTexture2d(m.glName),v.enableVertexAttribArray(S.O),v.bindBuffer(v.ARRAY_BUFFER,p.v),v.vertexAttribPointer(S.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(S.N),v.bindBuffer(v.ARRAY_BUFFER,p.u),v.vertexAttribPointer(S.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(S.O),v.disableVertexAttribArray(S.N),v.bindBuffer(v.ARRAY_BUFFER,null),p.i.bindTexture2d(0)}function w6(p){this.h=p}var S6=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function E6(p,m){return m+p}function eT(p,m){window[p]=m}function T6(p){var m=document.createElement("script");return m.setAttribute("src",p),m.setAttribute("crossorigin","anonymous"),new Promise(function(v){m.addEventListener("load",function(){v()},!1),m.addEventListener("error",function(){v()},!1),document.body.appendChild(m)})}function k6(){return he(function(p){switch(p.h){case 1:return p.s=2,D(p,WebAssembly.instantiate(S6),4);case 4:p.h=3,p.s=0;break;case 2:return p.s=0,p.l=null,p.return(!1);case 3:return p.return(!0)}})}function Oy(p){if(this.h=p,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=p&&p.locateFile||E6,typeof window=="object")var m=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")m=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=m,p.options){m=o(Object.keys(p.options));for(var v=m.next();!v.done;v=m.next()){v=v.value;var S=p.options[v].default;S!==void 0&&(this.l[v]=typeof S=="function"?S():S)}}}e=Oy.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function P6(p){var m,v,S,A,O,x,L,F,ie,oe,Pe;return he(function(ve){switch(ve.h){case 1:return p.ga?(m=p.h.files===void 0?[]:typeof p.h.files=="function"?p.h.files(p.l):p.h.files,D(ve,k6(),2)):ve.return();case 2:if(v=ve.i,typeof window=="object")return eT("createMediapipeSolutionsWasm",{locateFile:p.locateFile}),eT("createMediapipeSolutionsPackedAssets",{locateFile:p.locateFile}),x=m.filter(function(ce){return ce.data!==void 0}),L=m.filter(function(ce){return ce.data===void 0}),F=Promise.all(x.map(function(ce){var Ce=tg(p,ce.url);if(ce.path!==void 0){var Fe=ce.path;Ce=Ce.then(function(Ot){return p.overrideFile(Fe,Ot),Promise.resolve(Ot)})}return Ce})),ie=Promise.all(L.map(function(ce){return ce.simd===void 0||ce.simd&&v||!ce.simd&&!v?T6(p.locateFile(ce.url,p.ha)):Promise.resolve()})).then(function(){var ce,Ce,Fe;return he(function(Ot){if(Ot.h==1)return ce=window.createMediapipeSolutionsWasm,Ce=window.createMediapipeSolutionsPackedAssets,Fe=p,D(Ot,ce(Ce),2);Fe.i=Ot.i,Ot.h=0})}),oe=function(){return he(function(ce){return p.h.graph&&p.h.graph.url?ce=D(ce,tg(p,p.h.graph.url),0):(ce.h=0,ce=void 0),ce})}(),D(ve,Promise.all([ie,F,oe]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return S=m.filter(function(ce){return ce.simd===void 0||ce.simd&&v||!ce.simd&&!v}).map(function(ce){return p.locateFile(ce.url,p.ha)}),importScripts.apply(null,c(S)),A=p,D(ve,createMediapipeSolutionsWasm(Module),6);case 6:A.i=ve.i,p.m=new OffscreenCanvas(1,1),p.i.canvas=p.m,O=p.i.GL.createContext(p.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),p.i.GL.makeContextCurrent(O),ve.h=4;break;case 7:if(p.m=document.createElement("canvas"),Pe=p.m.getContext("webgl2",{}),!Pe&&(Pe=p.m.getContext("webgl",{}),!Pe))return console.log("Failed to create WebGL canvas context when passing video frame."),ve.return();p.K=Pe,p.i.canvas=p.m,p.i.createContext(p.m,!0,!0,{});case 4:p.j=new p.i.SolutionWasm,p.ga=!1,ve.h=0}})}function C6(p){var m,v,S,A,O,x,L,F;return he(function(ie){if(ie.h==1){if(p.h.graph&&p.h.graph.url&&p.fa===p.h.graph.url)return ie.return();if(p.u=!0,!p.h.graph||!p.h.graph.url){ie.h=2;return}return p.fa=p.h.graph.url,D(ie,tg(p,p.h.graph.url),3)}for(ie.h!=2&&(m=ie.i,p.j.loadGraph(m)),v=o(Object.keys(p.D)),S=v.next();!S.done;S=v.next())A=S.value,p.j.overrideFile(A,p.D[A]);if(p.D={},p.h.listeners)for(O=o(p.h.listeners),x=O.next();!x.done;x=O.next())L=x.value,I6(p,L);F=p.l,p.l={},p.setOptions(F),ie.h=0})}e.reset=function(){var p=this;return he(function(m){p.j&&(p.j.reset(),p.s={},p.v={}),m.h=0})},e.setOptions=function(p,m){var v=this;if(m=m||this.h.options){for(var S=[],A=[],O={},x=o(Object.keys(p)),L=x.next();!L.done;O={X:O.X,Y:O.Y},L=x.next())if(L=L.value,!(L in this.l&&this.l[L]===p[L])){this.l[L]=p[L];var F=m[L];F!==void 0&&(F.onChange&&(O.X=F.onChange,O.Y=p[L],S.push(function(ie){return function(){var oe;return he(function(Pe){if(Pe.h==1)return D(Pe,ie.X(ie.Y),2);oe=Pe.i,oe===!0&&(v.u=!0),Pe.h=0})}}(O))),F.graphOptionXref&&(L=Object.assign({},{calculatorName:"",calculatorIndex:0},F.graphOptionXref,{valueNumber:F.type===1?p[L]:0,valueBoolean:F.type===0?p[L]:!1,valueString:F.type===2?p[L]:""}),A.push(L)))}(S.length!==0||A.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(A),this.F=(this.F===void 0?[]:this.F).concat(S))}};function R6(p){var m,v,S,A,O,x,L;return he(function(F){switch(F.h){case 1:if(!p.u)return F.return();if(!p.F){F.h=2;break}m=o(p.F),v=m.next();case 3:if(v.done){F.h=5;break}return S=v.value,D(F,S(),4);case 4:v=m.next(),F.h=3;break;case 5:p.F=void 0;case 2:if(p.H){for(A=new p.i.GraphOptionChangeRequestList,O=o(p.H),x=O.next();!x.done;x=O.next())L=x.value,A.push_back(L);p.j.changeOptions(A),A.delete(),p.H=void 0}p.u=!1,F.h=0}})}e.initialize=function(){var p=this;return he(function(m){return m.h==1?D(m,P6(p),2):m.h!=3?D(m,C6(p),3):D(m,R6(p),0)})};function tg(p,m){var v,S;return he(function(A){return m in p.L?A.return(p.L[m]):(v=p.locateFile(m,""),S=fetch(v).then(function(O){return O.arrayBuffer()}),p.L[m]=S,A.return(S))})}e.overrideFile=function(p,m){this.j?this.j.overrideFile(p,m):this.D[p]=m},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(p,m){var v=this,S,A,O,x,L,F,ie,oe,Pe;return he(function(ve){switch(ve.h){case 1:return v.h.inputs?(S=1e3*(m==null?performance.now():m),D(ve,v.I,2)):ve.return();case 2:return D(ve,v.initialize(),3);case 3:for(A=new v.i.PacketDataList,O=o(Object.keys(p)),x=O.next();!x.done;x=O.next())if(L=x.value,F=v.h.inputs[L]){e:{var ce=p[L];switch(F.type){case"video":var Ce=v.s[F.stream];if(Ce||(Ce=new Iy(v.i,v.K),v.s[F.stream]=Ce),Ce.m===0&&(Ce.m=Ce.i.createTexture()),typeof HTMLVideoElement<"u"&&ce instanceof HTMLVideoElement)var Fe=ce.videoWidth,Ot=ce.videoHeight;else typeof HTMLImageElement<"u"&&ce instanceof HTMLImageElement?(Fe=ce.naturalWidth,Ot=ce.naturalHeight):(Fe=ce.width,Ot=ce.height);Ot={glName:Ce.m,width:Fe,height:Ot},Fe=Ce.h,Fe.canvas.width=Ot.width,Fe.canvas.height=Ot.height,Fe.activeTexture(Fe.TEXTURE0),Ce.i.bindTexture2d(Ce.m),Fe.texImage2D(Fe.TEXTURE_2D,0,Fe.RGBA,Fe.RGBA,Fe.UNSIGNED_BYTE,ce),Ce.i.bindTexture2d(0),Ce=Ot;break e;case"detections":for(Ce=v.s[F.stream],Ce||(Ce=new w6(v.i),v.s[F.stream]=Ce),Ce.data||(Ce.data=new Ce.h.DetectionListData),Ce.data.reset(ce.length),Ot=0;Ot<ce.length;++Ot){Fe=ce[Ot];var Pt=Ce.data,Fi=Pt.setBoundingBox,an=Ot,kr=Fe.la,st=new Ay;if(cs(st,1,kr.sa),cs(st,2,kr.ta),cs(st,3,kr.height),cs(st,4,kr.width),cs(st,5,kr.rotation),os(st,6,kr.pa),kr=Ry(st,QE),Fi.call(Pt,an,kr),Fe.ea)for(Pt=0;Pt<Fe.ea.length;++Pt){st=Fe.ea[Pt],Fi=Ce.data,an=Fi.addNormalizedLandmark,kr=Ot,st=Object.assign({},st,{visibility:st.visibility?st.visibility:0});var Bi=new eg;cs(Bi,1,st.x),cs(Bi,2,st.y),cs(Bi,3,st.z),st.visibility&&cs(Bi,4,st.visibility),st=Ry(Bi,KE),an.call(Fi,kr,st)}if(Fe.ba)for(Pt=0;Pt<Fe.ba.length;++Pt)Fi=Ce.data,an=Fi.addClassification,kr=Ot,st=Fe.ba[Pt],Bi=new fu,cs(Bi,2,st.qa),st.index&&os(Bi,1,st.index),st.label&&os(Bi,3,st.label),st.displayName&&os(Bi,4,st.displayName),st=Ry(Bi,JE),an.call(Fi,kr,st)}Ce=Ce.data;break e;default:Ce={}}}switch(ie=Ce,oe=F.stream,F.type){case"video":A.pushTexture2d(Object.assign({},ie,{stream:oe,timestamp:S}));break;case"detections":Pe=ie,Pe.stream=oe,Pe.timestamp=S,A.pushDetectionList(Pe);break;default:throw Error("Unknown input config type: '"+F.type+"'")}}return v.j.send(A),D(ve,v.I,4);case 4:A.delete(),ve.h=0}})};function x6(p,m,v){var S,A,O,x,L,F,ie,oe,Pe,ve,ce,Ce,Fe,Ot;return he(function(Pt){switch(Pt.h){case 1:if(!v)return Pt.return(m);for(S={},A=0,O=o(Object.keys(v)),x=O.next();!x.done;x=O.next())L=x.value,F=v[L],typeof F!="string"&&F.type==="texture"&&m[F.stream]!==void 0&&++A;1<A&&(p.M=!1),ie=o(Object.keys(v)),x=ie.next();case 2:if(x.done){Pt.h=4;break}if(oe=x.value,Pe=v[oe],typeof Pe=="string")return Fe=S,Ot=oe,D(Pt,A6(p,oe,m[Pe]),14);if(ve=m[Pe.stream],Pe.type==="detection_list"){if(ve){for(var Fi=ve.getRectList(),an=ve.getLandmarksList(),kr=ve.getClassificationsList(),st=[],Bi=0;Bi<Fi.size();++Bi){var Ea=Cy(Fi.get(Bi),QE),O6=ds(Ea,1),M6=ds(Ea,2),D6=ds(Ea,3),L6=ds(Ea,4),N6=ds(Ea,5,0),ig=void 0;ig=ig===void 0?0:ig,Ea={la:{sa:O6,ta:M6,height:D6,width:L6,rotation:N6,pa:uu(Cn(Ea,6),ig)},ea:Ty(Cy(an.get(Bi),v6),eg,1).map(b6),ba:y6(Cy(kr.get(Bi),f6))},st.push(Ea)}Fi=st}else Fi=[];S[oe]=Fi,Pt.h=7;break}if(Pe.type==="proto_list"){if(ve){for(Fi=Array(ve.size()),an=0;an<ve.size();an++)Fi[an]=ve.get(an);ve.delete()}else Fi=[];S[oe]=Fi,Pt.h=7;break}if(ve===void 0){Pt.h=3;break}if(Pe.type==="float_list"){S[oe]=ve,Pt.h=7;break}if(Pe.type==="proto"){S[oe]=ve,Pt.h=7;break}if(Pe.type!=="texture")throw Error("Unknown output config type: '"+Pe.type+"'");return ce=p.v[oe],ce||(ce=new Iy(p.i,p.K),p.v[oe]=ce),D(Pt,XE(ce,ve,p.M),13);case 13:Ce=Pt.i,S[oe]=Ce;case 7:Pe.transform&&S[oe]&&(S[oe]=Pe.transform(S[oe])),Pt.h=3;break;case 14:Fe[Ot]=Pt.i;case 3:x=ie.next(),Pt.h=2;break;case 4:return Pt.return(S)}})}function A6(p,m,v){var S;return he(function(A){return typeof v=="number"||v instanceof Uint8Array||v instanceof p.i.Uint8BlobList?A.return(v):v instanceof p.i.Texture2dDataOut?(S=p.v[m],S||(S=new Iy(p.i,p.K),p.v[m]=S),A.return(XE(S,v,p.M))):A.return(void 0)})}function I6(p,m){for(var v=m.name||"$",S=[].concat(c(m.wants)),A=new p.i.StringList,O=o(m.wants),x=O.next();!x.done;x=O.next())A.push_back(x.value);O=p.i.PacketListener.implement({onResults:function(L){for(var F={},ie=0;ie<m.wants.length;++ie)F[S[ie]]=L.get(ie);var oe=p.listeners[v];oe&&(p.I=x6(p,F,m.outs).then(function(Pe){Pe=oe(Pe);for(var ve=0;ve<m.wants.length;++ve){var ce=F[S[ve]];typeof ce=="object"&&ce.hasOwnProperty&&ce.hasOwnProperty("delete")&&ce.delete()}Pe&&(p.I=Pe)}))}}),p.j.attachMultiListener(A,O),A.delete()}e.onResults=function(p,m){this.listeners[m||"$"]=p},Sr("Solution",Oy),Sr("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function tT(p){switch(p===void 0&&(p=0),p){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function iT(p){var m=this;p=p||{},this.h=new Oy({locateFile:p.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:tT(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var S,A,O;return he(function(x){return x.h==1?(S=tT(v),A="third_party/mediapipe/modules/selfie_segmentation/"+S,D(x,tg(m.h,S),2)):(O=x.i,m.h.overrideFile(A,O),x.return(!0))})}}}})}e=iT.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(p){this.h.onResults(p)},e.initialize=function(){var p=this;return he(function(m){return D(m,p.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(p){var m=this;return he(function(v){return D(v,m.h.send(p),0)})},e.setOptions=function(p){this.h.setOptions(p)},Sr("SelfieSegmentation",iT),Sr("VERSION","0.1.1671057942")}).call(x1);var qhe=SelfieSegmentation;const GL=(e={modelSelection:1})=>{const t=new qhe({locateFile:i=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${i}`});return t.setOptions(e),t},Jhe=e=>new Promise((t,i)=>{const r=new Image;r.onload=()=>t(r),r.onerror=i,r.src=e,r.crossOrigin="anonymous"}),WL=class extends HL{constructor(e){super(),mo(this,fp,void 0),mo(this,hc,void 0),mo(this,Ff,void 0),vo(this,fp,e),vo(this,hc,document.createElement("canvas")),vo(this,Ff,rr(this,hc).getContext("2d"))}static async init(){const e=GL();return await e.initialize(),new WL(e)}async createStaticBackgroundImageVideoMiddleware(e){const t=await Jhe(e);let i;return()=>(rr(this,fp).onResults(r=>{i=r}),async(r,n)=>{rr(this,hc).width=r.width,rr(this,hc).height=r.height,rr(this,Ff).drawImage(r,0,0),rr(this,fp).send({image:rr(this,hc)}),i&&(n.save(),n.clearRect(0,0,r.width,r.height),n.globalCompositeOperation="copy",n.filter="blur(2px)",n.drawImage(i.segmentationMask,0,0,r.width,r.height),n.globalCompositeOperation="source-in",n.filter="none",n.drawImage(i.image,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t,0,0,r.width,r.height),n.restore())})}};let Khe=WL;fp=new WeakMap;hc=new WeakMap;Ff=new WeakMap;const qL=class extends HL{constructor(e){super(),mo(this,mp,void 0),mo(this,gc,void 0),mo(this,Bf,void 0),vo(this,mp,e),vo(this,gc,document.createElement("canvas")),vo(this,Bf,rr(this,gc).getContext("2d"))}static async init(){const e=GL();return await e.initialize(),new qL(e)}createBackgroundBlurVideoMiddleware(e){let t;if(e<0)throw Error(`Blur Length must be 0 or more, received: ${e}`);return()=>(rr(this,mp).onResults(i=>{t=i}),async(i,r)=>{rr(this,gc).width=i.width,rr(this,gc).height=i.height,rr(this,Bf).drawImage(i,0,0),rr(this,mp).send({image:rr(this,gc)}),t&&(r.save(),r.drawImage(t.image,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.segmentationMask,0,0,i.width,i.height),r.filter=`blur(${e}px)`,r.globalCompositeOperation="destination-over",r.drawImage(t.image,0,0,i.width,i.height),r.restore())})}};let Yhe=qL;mp=new WeakMap;gc=new WeakMap;Bf=new WeakMap;const JL=class{constructor(e,t){mo(this,Vf,void 0),mo(this,zf,void 0),vo(this,Vf,e),vo(this,zf,t)}static async init(){return this.isSupported()||console.error("Initialising it in an unsupported environment, the middleware might not work"),window.addEventListener("error",e=>{var t;!((t=e.filename)!=null&&t.includes("localhost"))&&e.lineno!==0&&console.error("DyteVideoBackgroundTransformer::UnhandledError",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("DyteVideoBackgroundTransformer::UnhandledRejection",e.reason)}),new JL(await Khe.init(),await Yhe.init())}static isSupported(){let e=!1;try{const t=Whe.getParser(window.navigator.userAgent),i=document.createElement("canvas");if(!(i.getContext("webgl2",{})||i.getContext("webgl",{}))||t.getBrowserName()==="Safari")return!1;e=!0}catch{e=!1}return e}async createStaticBackgroundVideoMiddleware(e){return await rr(this,Vf).createStaticBackgroundImageVideoMiddleware(e)}async createBackgroundBlurVideoMiddleware(e=4){return rr(this,zf).createBackgroundBlurVideoMiddleware(e)}};let Qhe=JL;Vf=new WeakMap;zf=new WeakMap;function Zhe(){const[e,t]=Fhe();return aa.exports.useEffect(()=>{const i=new URL(window.location.href).searchParams,r=i.get("authToken"),n=i.get("roomName")||"";if(!r){alert("An authToken wasn't passed, please pass an authToken in the URL query to join a meeting.");return}t({authToken:r,roomName:n}).then(async s=>{window.meeting=s;const a=await Qhe.init();s.self.addVideoMiddleware(await a.createBackgroundBlurVideoMiddleware(10))})},[]),qw(Rz,{meeting:e})}A1.createRoot(document.getElementById("root")).render(qw(Zhe,{}))});export default Xhe();
