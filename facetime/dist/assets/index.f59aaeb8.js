(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var zk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fM(t){var e=t.default;if(typeof e=="function"){var i=function(){return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),i}var N0={},Nf={exports:{}},qs={},Dt={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=Symbol.for("react.element"),vM=Symbol.for("react.portal"),yM=Symbol.for("react.fragment"),bM=Symbol.for("react.strict_mode"),wM=Symbol.for("react.profiler"),_M=Symbol.for("react.provider"),kM=Symbol.for("react.context"),SM=Symbol.for("react.forward_ref"),xM=Symbol.for("react.suspense"),EM=Symbol.for("react.memo"),TM=Symbol.for("react.lazy"),Fk=Symbol.iterator;function CM(t){return t===null||typeof t!="object"?null:(t=Fk&&t[Fk]||t["@@iterator"],typeof t=="function"?t:null)}var lC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uC=Object.assign,pC={};function Tl(t,e,i){this.props=t,this.context=e,this.refs=pC,this.updater=i||lC}Tl.prototype.isReactComponent={};Tl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hC(){}hC.prototype=Tl.prototype;function Z1(t,e,i){this.props=t,this.context=e,this.refs=pC,this.updater=i||lC}var X1=Z1.prototype=new hC;X1.constructor=Z1;uC(X1,Tl.prototype);X1.isPureReactComponent=!0;var Vk=Array.isArray,gC=Object.prototype.hasOwnProperty,ew={current:null},mC={key:!0,ref:!0,__self:!0,__source:!0};function fC(t,e,i){var s,r={},n=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(n=""+e.key),e)gC.call(e,s)&&!mC.hasOwnProperty(s)&&(r[s]=e[s]);var o=arguments.length-2;if(o===1)r.children=i;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)r[s]===void 0&&(r[s]=o[s]);return{$$typeof:Qp,type:t,key:n,ref:a,props:r,_owner:ew.current}}function PM(t,e){return{$$typeof:Qp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qp}function RM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var Bk=/\/+/g;function Jv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RM(""+t.key):e.toString(36)}function _g(t,e,i,s,r){var n=typeof t;(n==="undefined"||n==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(n){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qp:case vM:a=!0}}if(a)return a=t,r=r(a),t=s===""?"."+Jv(a,0):s,Vk(r)?(i="",t!=null&&(i=t.replace(Bk,"$&/")+"/"),_g(r,e,i,"",function(u){return u})):r!=null&&(tw(r)&&(r=PM(r,i+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Bk,"$&/")+"/")+t)),e.push(r)),1;if(a=0,s=s===""?".":s+":",Vk(t))for(var o=0;o<t.length;o++){n=t[o];var c=s+Jv(n,o);a+=_g(n,e,i,c,r)}else if(c=CM(t),typeof c=="function")for(t=c.call(t),o=0;!(n=t.next()).done;)n=n.value,c=s+Jv(n,o++),a+=_g(n,e,i,c,r);else if(n==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ch(t,e,i){if(t==null)return t;var s=[],r=0;return _g(t,s,"","",function(n){return e.call(i,n,r++)}),s}function IM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ns={current:null},kg={transition:null},AM={ReactCurrentDispatcher:ns,ReactCurrentBatchConfig:kg,ReactCurrentOwner:ew};Oe.Children={map:Ch,forEach:function(t,e,i){Ch(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Ch(t,function(){e++}),e},toArray:function(t){return Ch(t,function(e){return e})||[]},only:function(t){if(!tw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=Tl;Oe.Fragment=yM;Oe.Profiler=wM;Oe.PureComponent=Z1;Oe.StrictMode=bM;Oe.Suspense=xM;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AM;Oe.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=uC({},t.props),r=t.key,n=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(n=e.ref,a=ew.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)gC.call(e,c)&&!mC.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=i;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:Qp,type:t.type,key:r,ref:n,props:s,_owner:a}};Oe.createContext=function(t){return t={$$typeof:kM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_M,_context:t},t.Consumer=t};Oe.createElement=fC;Oe.createFactory=function(t){var e=fC.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:SM,render:t}};Oe.isValidElement=tw;Oe.lazy=function(t){return{$$typeof:TM,_payload:{_status:-1,_result:t},_init:IM}};Oe.memo=function(t,e){return{$$typeof:EM,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=kg.transition;kg.transition={};try{t()}finally{kg.transition=e}};Oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Oe.useCallback=function(t,e){return ns.current.useCallback(t,e)};Oe.useContext=function(t){return ns.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return ns.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return ns.current.useEffect(t,e)};Oe.useId=function(){return ns.current.useId()};Oe.useImperativeHandle=function(t,e,i){return ns.current.useImperativeHandle(t,e,i)};Oe.useInsertionEffect=function(t,e){return ns.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return ns.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return ns.current.useMemo(t,e)};Oe.useReducer=function(t,e,i){return ns.current.useReducer(t,e,i)};Oe.useRef=function(t){return ns.current.useRef(t)};Oe.useState=function(t){return ns.current.useState(t)};Oe.useSyncExternalStore=function(t,e,i){return ns.current.useSyncExternalStore(t,e,i)};Oe.useTransition=function(){return ns.current.useTransition()};Oe.version="18.2.0";(function(t){t.exports=Oe})(Dt);const iw=dC(Dt.exports);var vC={exports:{}},yC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,W){var Y=z.length;z.push(W);e:for(;0<Y;){var Ne=Y-1>>>1,nt=z[Ne];if(0<r(nt,W))z[Ne]=W,z[Y]=nt,Y=Ne;else break e}}function i(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var W=z[0],Y=z.pop();if(Y!==W){z[0]=Y;e:for(var Ne=0,nt=z.length,wt=nt>>>1;Ne<wt;){var pi=2*(Ne+1)-1,Jr=z[pi],ki=pi+1,Po=z[ki];if(0>r(Jr,Y))ki<nt&&0>r(Po,Jr)?(z[Ne]=Po,z[ki]=Y,Ne=ki):(z[Ne]=Jr,z[pi]=Y,Ne=pi);else if(ki<nt&&0>r(Po,Y))z[Ne]=Po,z[ki]=Y,Ne=ki;else break e}}return W}function r(z,W){var Y=z.sortIndex-W.sortIndex;return Y!==0?Y:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;t.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],l=1,h=null,g=3,m=!1,f=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var W=i(u);W!==null;){if(W.callback===null)s(u);else if(W.startTime<=z)s(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=i(u)}}function C(z){if(_=!1,x(z),!f)if(i(c)!==null)f=!0,Ut(D);else{var W=i(u);W!==null&&cs(C,W.startTime-z)}}function D(z,W){f=!1,_&&(_=!1,y(V),V=-1),m=!0;var Y=g;try{for(x(W),h=i(c);h!==null&&(!(h.expirationTime>W)||z&&!te());){var Ne=h.callback;if(typeof Ne=="function"){h.callback=null,g=h.priorityLevel;var nt=Ne(h.expirationTime<=W);W=t.unstable_now(),typeof nt=="function"?h.callback=nt:h===i(c)&&s(c),x(W)}else s(c);h=i(c)}if(h!==null)var wt=!0;else{var pi=i(u);pi!==null&&cs(C,pi.startTime-W),wt=!1}return wt}finally{h=null,g=Y,m=!1}}var M=!1,L=null,V=-1,se=5,Q=-1;function te(){return!(t.unstable_now()-Q<se)}function Ae(){if(L!==null){var z=t.unstable_now();Q=z;var W=!0;try{W=L(!0,z)}finally{W?ze():(M=!1,L=null)}}else M=!1}var ze;if(typeof b=="function")ze=function(){b(Ae)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,xt=Xe.port2;Xe.port1.onmessage=Ae,ze=function(){xt.postMessage(null)}}else ze=function(){k(Ae,0)};function Ut(z){L=z,M||(M=!0,ze())}function cs(z,W){V=k(function(){z(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,Ut(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var Y=g;g=W;try{return z()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=g;g=z;try{return W()}finally{g=Y}},t.unstable_scheduleCallback=function(z,W,Y){var Ne=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Ne+Y:Ne):Y=Ne,z){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Y+nt,z={id:l++,callback:W,priorityLevel:z,startTime:Y,expirationTime:nt,sortIndex:-1},Y>Ne?(z.sortIndex=Y,e(u,z),i(c)===null&&z===i(u)&&(_?(y(V),V=-1):_=!0,cs(C,Y-Ne))):(z.sortIndex=nt,e(c,z),f||m||(f=!0,Ut(D))),z},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(z){var W=g;return function(){var Y=g;g=W;try{return z.apply(this,arguments)}finally{g=Y}}}})(yC);(function(t){t.exports=yC})(vC);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=Dt.exports,Hs=vC.exports;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wC=new Set,gp={};function Uc(t,e){ul(t,e),ul(t+"Capture",e)}function ul(t,e){for(gp[t]=e,t=0;t<e.length;t++)wC.add(e[t])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U0=Object.prototype.hasOwnProperty,DM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hk={},Wk={};function MM(t){return U0.call(Wk,t)?!0:U0.call(Hk,t)?!1:DM.test(t)?Wk[t]=!0:(Hk[t]=!0,!1)}function OM(t,e,i,s){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LM(t,e,i,s){if(e===null||typeof e>"u"||OM(t,e,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function as(t,e,i,s,r,n,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=a}var Ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ui[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ui[e]=new as(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ui[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ui[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ui[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ui[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ui[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ui[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ui[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var sw=/[\-:]([a-z])/g;function rw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sw,rw);Ui[e]=new as(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sw,rw);Ui[e]=new as(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sw,rw);Ui[e]=new as(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ui[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});Ui.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ui[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function nw(t,e,i,s){var r=Ui.hasOwnProperty(e)?Ui[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LM(e,i,r,s)&&(i=null),s||r===null?MM(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(e=r.attributeName,s=r.attributeNamespace,i===null?t.removeAttribute(e):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,s?t.setAttributeNS(s,e,i):t.setAttribute(e,i))))}var da=bC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ph=Symbol.for("react.element"),Ld=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),aw=Symbol.for("react.strict_mode"),$0=Symbol.for("react.profiler"),_C=Symbol.for("react.provider"),kC=Symbol.for("react.context"),ow=Symbol.for("react.forward_ref"),j0=Symbol.for("react.suspense"),z0=Symbol.for("react.suspense_list"),cw=Symbol.for("react.memo"),Va=Symbol.for("react.lazy"),SC=Symbol.for("react.offscreen"),qk=Symbol.iterator;function Wl(t){return t===null||typeof t!="object"?null:(t=qk&&t[qk]||t["@@iterator"],typeof t=="function"?t:null)}var Ot=Object.assign,Kv;function Cu(t){if(Kv===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Kv=e&&e[1]||""}return`
`+Kv+t}var Qv=!1;function Yv(t,e){if(!t||Qv)return"";Qv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),n=s.stack.split(`
`),a=r.length-1,o=n.length-1;1<=a&&0<=o&&r[a]!==n[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==n[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==n[o]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{Qv=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Cu(t):""}function NM(t){switch(t.tag){case 5:return Cu(t.type);case 16:return Cu("Lazy");case 13:return Cu("Suspense");case 19:return Cu("SuspenseList");case 0:case 2:case 15:return t=Yv(t.type,!1),t;case 11:return t=Yv(t.type.render,!1),t;case 1:return t=Yv(t.type,!0),t;default:return""}}function F0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nd:return"Fragment";case Ld:return"Portal";case $0:return"Profiler";case aw:return"StrictMode";case j0:return"Suspense";case z0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kC:return(t.displayName||"Context")+".Consumer";case _C:return(t._context.displayName||"Context")+".Provider";case ow:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cw:return e=t.displayName||null,e!==null?e:F0(t.type)||"Memo";case Va:e=t._payload,t=t._init;try{return F0(t(e))}catch{}}return null}function UM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F0(e);case 8:return e===aw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $M(t){var e=xC(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,n.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rh(t){t._valueTracker||(t._valueTracker=$M(t))}function EC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),s="";return t&&(s=xC(t)?t.checked?"true":"false":t.value),t=s,t!==i?(e.setValue(t),!0):!1}function wm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function V0(t,e){var i=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:t._wrapperState.initialChecked})}function Gk(t,e){var i=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;i=po(e.value!=null?e.value:i),t._wrapperState={initialChecked:s,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TC(t,e){e=e.checked,e!=null&&nw(t,"checked",e,!1)}function B0(t,e){TC(t,e);var i=po(e.value),s=e.type;if(i!=null)s==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?H0(t,e.type,i):e.hasOwnProperty("defaultValue")&&H0(t,e.type,po(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jk(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function H0(t,e,i){(e!=="number"||wm(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Pu=Array.isArray;function Kd(t,e,i,s){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&s&&(t[i].defaultSelected=!0)}else{for(i=""+po(i),e=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function W0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kk(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(J(92));if(Pu(i)){if(1<i.length)throw Error(J(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:po(i)}}function CC(t,e){var i=po(e.value),s=po(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),s!=null&&(t.defaultValue=""+s)}function Qk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ih,RC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,i,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ih=Ih||document.createElement("div"),Ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mp(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var qu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jM=["Webkit","ms","Moz","O"];Object.keys(qu).forEach(function(t){jM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qu[e]=qu[t]})});function IC(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||qu.hasOwnProperty(t)&&qu[t]?(""+e).trim():e+"px"}function AC(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var s=i.indexOf("--")===0,r=IC(i,e[i],s);i==="float"&&(i="cssFloat"),s?t.setProperty(i,r):t[i]=r}}var zM=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G0(t,e){if(e){if(zM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function J0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K0=null;function dw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Q0=null,Qd=null,Yd=null;function Yk(t){if(t=Xp(t)){if(typeof Q0!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Ff(e),Q0(t.stateNode,t.type,e))}}function DC(t){Qd?Yd?Yd.push(t):Yd=[t]:Qd=t}function MC(){if(Qd){var t=Qd,e=Yd;if(Yd=Qd=null,Yk(t),e)for(t=0;t<e.length;t++)Yk(e[t])}}function OC(t,e){return t(e)}function LC(){}var Zv=!1;function NC(t,e,i){if(Zv)return t(e,i);Zv=!0;try{return OC(t,e,i)}finally{Zv=!1,(Qd!==null||Yd!==null)&&(LC(),MC())}}function fp(t,e){var i=t.stateNode;if(i===null)return null;var s=Ff(i);if(s===null)return null;i=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(J(231,e,typeof i));return i}var Y0=!1;if(ea)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){Y0=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{Y0=!1}function FM(t,e,i,s,r,n,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(l){this.onError(l)}}var Gu=!1,_m=null,km=!1,Z0=null,VM={onError:function(t){Gu=!0,_m=t}};function BM(t,e,i,s,r,n,a,o,c){Gu=!1,_m=null,FM.apply(VM,arguments)}function HM(t,e,i,s,r,n,a,o,c){if(BM.apply(this,arguments),Gu){if(Gu){var u=_m;Gu=!1,_m=null}else throw Error(J(198));km||(km=!0,Z0=u)}}function $c(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function UC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zk(t){if($c(t)!==t)throw Error(J(188))}function WM(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error(J(188));return e!==t?null:t}for(var i=t,s=e;;){var r=i.return;if(r===null)break;var n=r.alternate;if(n===null){if(s=r.return,s!==null){i=s;continue}break}if(r.child===n.child){for(n=r.child;n;){if(n===i)return Zk(r),t;if(n===s)return Zk(r),e;n=n.sibling}throw Error(J(188))}if(i.return!==s.return)i=r,s=n;else{for(var a=!1,o=r.child;o;){if(o===i){a=!0,i=r,s=n;break}if(o===s){a=!0,s=r,i=n;break}o=o.sibling}if(!a){for(o=n.child;o;){if(o===i){a=!0,i=n,s=r;break}if(o===s){a=!0,s=n,i=r;break}o=o.sibling}if(!a)throw Error(J(189))}}if(i.alternate!==s)throw Error(J(190))}if(i.tag!==3)throw Error(J(188));return i.stateNode.current===i?t:e}function $C(t){return t=WM(t),t!==null?jC(t):null}function jC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jC(t);if(e!==null)return e;t=t.sibling}return null}var zC=Hs.unstable_scheduleCallback,Xk=Hs.unstable_cancelCallback,qM=Hs.unstable_shouldYield,GM=Hs.unstable_requestPaint,Kt=Hs.unstable_now,JM=Hs.unstable_getCurrentPriorityLevel,lw=Hs.unstable_ImmediatePriority,FC=Hs.unstable_UserBlockingPriority,Sm=Hs.unstable_NormalPriority,KM=Hs.unstable_LowPriority,VC=Hs.unstable_IdlePriority,Uf=null,hn=null;function QM(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Uf,t,void 0,(t.current.flags&128)===128)}catch{}}var $r=Math.clz32?Math.clz32:XM,YM=Math.log,ZM=Math.LN2;function XM(t){return t>>>=0,t===0?32:31-(YM(t)/ZM|0)|0}var Ah=64,Dh=4194304;function Ru(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xm(t,e){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,n=t.pingedLanes,a=i&268435455;if(a!==0){var o=a&~r;o!==0?s=Ru(o):(n&=a,n!==0&&(s=Ru(n)))}else a=i&~r,a!==0?s=Ru(a):n!==0&&(s=Ru(n));if(s===0)return 0;if(e!==0&&e!==s&&(e&r)===0&&(r=s&-s,n=e&-e,r>=n||r===16&&(n&4194240)!==0))return e;if((s&4)!==0&&(s|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)i=31-$r(e),r=1<<i,s|=t[i],e&=~r;return s}function eO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tO(t,e){for(var i=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,n=t.pendingLanes;0<n;){var a=31-$r(n),o=1<<a,c=r[a];c===-1?((o&i)===0||(o&s)!==0)&&(r[a]=eO(o,e)):c<=e&&(t.expiredLanes|=o),n&=~o}}function X0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BC(){var t=Ah;return Ah<<=1,(Ah&4194240)===0&&(Ah=64),t}function Xv(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function Yp(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$r(e),t[e]=i}function iO(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-$r(i),n=1<<r;e[r]=0,s[r]=-1,t[r]=-1,i&=~n}}function uw(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var s=31-$r(i),r=1<<s;r&e|t[s]&e&&(t[s]|=e),i&=~r}}var et=0;function HC(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var WC,pw,qC,GC,JC,eb=!1,Mh=[],to=null,io=null,so=null,vp=new Map,yp=new Map,Ha=[],sO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eS(t,e){switch(t){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":vp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(e.pointerId)}}function Gl(t,e,i,s,r,n){return t===null||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:s,nativeEvent:n,targetContainers:[r]},e!==null&&(e=Xp(e),e!==null&&pw(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rO(t,e,i,s,r){switch(e){case"focusin":return to=Gl(to,t,e,i,s,r),!0;case"dragenter":return io=Gl(io,t,e,i,s,r),!0;case"mouseover":return so=Gl(so,t,e,i,s,r),!0;case"pointerover":var n=r.pointerId;return vp.set(n,Gl(vp.get(n)||null,t,e,i,s,r)),!0;case"gotpointercapture":return n=r.pointerId,yp.set(n,Gl(yp.get(n)||null,t,e,i,s,r)),!0}return!1}function KC(t){var e=hc(t.target);if(e!==null){var i=$c(e);if(i!==null){if(e=i.tag,e===13){if(e=UC(i),e!==null){t.blockedOn=e,JC(t.priority,function(){qC(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=tb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var s=new i.constructor(i.type,i);K0=s,i.target.dispatchEvent(s),K0=null}else return e=Xp(i),e!==null&&pw(e),t.blockedOn=i,!1;e.shift()}return!0}function tS(t,e,i){Sg(t)&&i.delete(e)}function nO(){eb=!1,to!==null&&Sg(to)&&(to=null),io!==null&&Sg(io)&&(io=null),so!==null&&Sg(so)&&(so=null),vp.forEach(tS),yp.forEach(tS)}function Jl(t,e){t.blockedOn===e&&(t.blockedOn=null,eb||(eb=!0,Hs.unstable_scheduleCallback(Hs.unstable_NormalPriority,nO)))}function bp(t){function e(r){return Jl(r,t)}if(0<Mh.length){Jl(Mh[0],t);for(var i=1;i<Mh.length;i++){var s=Mh[i];s.blockedOn===t&&(s.blockedOn=null)}}for(to!==null&&Jl(to,t),io!==null&&Jl(io,t),so!==null&&Jl(so,t),vp.forEach(e),yp.forEach(e),i=0;i<Ha.length;i++)s=Ha[i],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ha.length&&(i=Ha[0],i.blockedOn===null);)KC(i),i.blockedOn===null&&Ha.shift()}var Zd=da.ReactCurrentBatchConfig,Em=!0;function aO(t,e,i,s){var r=et,n=Zd.transition;Zd.transition=null;try{et=1,hw(t,e,i,s)}finally{et=r,Zd.transition=n}}function oO(t,e,i,s){var r=et,n=Zd.transition;Zd.transition=null;try{et=4,hw(t,e,i,s)}finally{et=r,Zd.transition=n}}function hw(t,e,i,s){if(Em){var r=tb(t,e,i,s);if(r===null)dy(t,e,s,Tm,i),eS(t,s);else if(rO(r,t,e,i,s))s.stopPropagation();else if(eS(t,s),e&4&&-1<sO.indexOf(t)){for(;r!==null;){var n=Xp(r);if(n!==null&&WC(n),n=tb(t,e,i,s),n===null&&dy(t,e,s,Tm,i),n===r)break;r=n}r!==null&&s.stopPropagation()}else dy(t,e,s,null,i)}}var Tm=null;function tb(t,e,i,s){if(Tm=null,t=dw(s),t=hc(t),t!==null)if(e=$c(t),e===null)t=null;else if(i=e.tag,i===13){if(t=UC(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tm=t,null}function QC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JM()){case lw:return 1;case FC:return 4;case Sm:case KM:return 16;case VC:return 536870912;default:return 16}default:return 16}}var Ya=null,gw=null,xg=null;function YC(){if(xg)return xg;var t,e=gw,i=e.length,s,r="value"in Ya?Ya.value:Ya.textContent,n=r.length;for(t=0;t<i&&e[t]===r[t];t++);var a=i-t;for(s=1;s<=a&&e[i-s]===r[n-s];s++);return xg=r.slice(t,1<s?1-s:void 0)}function Eg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oh(){return!0}function iS(){return!1}function Gs(t){function e(i,s,r,n,a){this._reactName=i,this._targetInst=r,this.type=s,this.nativeEvent=n,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],this[o]=i?i(n):n[o]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?Oh:iS,this.isPropagationStopped=iS,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Oh)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Oh)},persist:function(){},isPersistent:Oh}),e}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mw=Gs(Cl),Zp=Ot({},Cl,{view:0,detail:0}),cO=Gs(Zp),ey,ty,Kl,$f=Ot({},Zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kl&&(Kl&&t.type==="mousemove"?(ey=t.screenX-Kl.screenX,ty=t.screenY-Kl.screenY):ty=ey=0,Kl=t),ey)},movementY:function(t){return"movementY"in t?t.movementY:ty}}),sS=Gs($f),dO=Ot({},$f,{dataTransfer:0}),lO=Gs(dO),uO=Ot({},Zp,{relatedTarget:0}),iy=Gs(uO),pO=Ot({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),hO=Gs(pO),gO=Ot({},Cl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mO=Gs(gO),fO=Ot({},Cl,{data:0}),rS=Gs(fO),vO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bO[t])?!!e[t]:!1}function fw(){return wO}var _O=Ot({},Zp,{key:function(t){if(t.key){var e=vO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fw,charCode:function(t){return t.type==="keypress"?Eg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kO=Gs(_O),SO=Ot({},$f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nS=Gs(SO),xO=Ot({},Zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fw}),EO=Gs(xO),TO=Ot({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),CO=Gs(TO),PO=Ot({},$f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RO=Gs(PO),IO=[9,13,27,32],vw=ea&&"CompositionEvent"in window,Ju=null;ea&&"documentMode"in document&&(Ju=document.documentMode);var AO=ea&&"TextEvent"in window&&!Ju,ZC=ea&&(!vw||Ju&&8<Ju&&11>=Ju),aS=String.fromCharCode(32),oS=!1;function XC(t,e){switch(t){case"keyup":return IO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ud=!1;function DO(t,e){switch(t){case"compositionend":return eP(e);case"keypress":return e.which!==32?null:(oS=!0,aS);case"textInput":return t=e.data,t===aS&&oS?null:t;default:return null}}function MO(t,e){if(Ud)return t==="compositionend"||!vw&&XC(t,e)?(t=YC(),xg=gw=Ya=null,Ud=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZC&&e.locale!=="ko"?null:e.data;default:return null}}var OO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OO[t.type]:e==="textarea"}function tP(t,e,i,s){DC(s),e=Cm(e,"onChange"),0<e.length&&(i=new mw("onChange","change",null,i,s),t.push({event:i,listeners:e}))}var Ku=null,wp=null;function LO(t){pP(t,0)}function jf(t){var e=zd(t);if(EC(e))return t}function NO(t,e){if(t==="change")return e}var iP=!1;if(ea){var sy;if(ea){var ry="oninput"in document;if(!ry){var dS=document.createElement("div");dS.setAttribute("oninput","return;"),ry=typeof dS.oninput=="function"}sy=ry}else sy=!1;iP=sy&&(!document.documentMode||9<document.documentMode)}function lS(){Ku&&(Ku.detachEvent("onpropertychange",sP),wp=Ku=null)}function sP(t){if(t.propertyName==="value"&&jf(wp)){var e=[];tP(e,wp,t,dw(t)),NC(LO,e)}}function UO(t,e,i){t==="focusin"?(lS(),Ku=e,wp=i,Ku.attachEvent("onpropertychange",sP)):t==="focusout"&&lS()}function $O(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jf(wp)}function jO(t,e){if(t==="click")return jf(e)}function zO(t,e){if(t==="input"||t==="change")return jf(e)}function FO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vr=typeof Object.is=="function"?Object.is:FO;function _p(t,e){if(Vr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var r=i[s];if(!U0.call(e,r)||!Vr(t[r],e[r]))return!1}return!0}function uS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pS(t,e){var i=uS(t);t=0;for(var s;i;){if(i.nodeType===3){if(s=t+i.textContent.length,t<=e&&s>=e)return{node:i,offset:e-t};t=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=uS(i)}}function rP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nP(){for(var t=window,e=wm();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=wm(t.document)}return e}function yw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VO(t){var e=nP(),i=t.focusedElem,s=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&rP(i.ownerDocument.documentElement,i)){if(s!==null&&yw(i)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,n=Math.min(s.start,r);s=s.end===void 0?n:Math.min(s.end,r),!t.extend&&n>s&&(r=s,s=n,n=r),r=pS(i,n);var a=pS(i,s);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),n>s?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BO=ea&&"documentMode"in document&&11>=document.documentMode,$d=null,ib=null,Qu=null,sb=!1;function hS(t,e,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;sb||$d==null||$d!==wm(s)||(s=$d,"selectionStart"in s&&yw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qu&&_p(Qu,s)||(Qu=s,s=Cm(ib,"onSelect"),0<s.length&&(e=new mw("onSelect","select",null,e,i),t.push({event:e,listeners:s}),e.target=$d)))}function Lh(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var jd={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},ny={},aP={};ea&&(aP=document.createElement("div").style,"AnimationEvent"in window||(delete jd.animationend.animation,delete jd.animationiteration.animation,delete jd.animationstart.animation),"TransitionEvent"in window||delete jd.transitionend.transition);function zf(t){if(ny[t])return ny[t];if(!jd[t])return t;var e=jd[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in aP)return ny[t]=e[i];return t}var oP=zf("animationend"),cP=zf("animationiteration"),dP=zf("animationstart"),lP=zf("transitionend"),uP=new Map,gS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yo(t,e){uP.set(t,e),Uc(e,[t])}for(var ay=0;ay<gS.length;ay++){var oy=gS[ay],HO=oy.toLowerCase(),WO=oy[0].toUpperCase()+oy.slice(1);yo(HO,"on"+WO)}yo(oP,"onAnimationEnd");yo(cP,"onAnimationIteration");yo(dP,"onAnimationStart");yo("dblclick","onDoubleClick");yo("focusin","onFocus");yo("focusout","onBlur");yo(lP,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);Uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Iu));function mS(t,e,i){var s=t.type||"unknown-event";t.currentTarget=i,HM(s,e,void 0,t),t.currentTarget=null}function pP(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var s=t[i],r=s.event;s=s.listeners;e:{var n=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==n&&r.isPropagationStopped())break e;mS(r,o,u),n=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==n&&r.isPropagationStopped())break e;mS(r,o,u),n=c}}}if(km)throw t=Z0,km=!1,Z0=null,t}function ht(t,e){var i=e[cb];i===void 0&&(i=e[cb]=new Set);var s=t+"__bubble";i.has(s)||(hP(e,t,2,!1),i.add(s))}function cy(t,e,i){var s=0;e&&(s|=4),hP(i,t,s,e)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function kp(t){if(!t[Nh]){t[Nh]=!0,wC.forEach(function(i){i!=="selectionchange"&&(qO.has(i)||cy(i,!1,t),cy(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nh]||(e[Nh]=!0,cy("selectionchange",!1,e))}}function hP(t,e,i,s){switch(QC(e)){case 1:var r=aO;break;case 4:r=oO;break;default:r=hw}i=r.bind(null,e,i,t),r=void 0,!Y0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):r!==void 0?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function dy(t,e,i,s,r){var n=s;if((e&1)===0&&(e&2)===0&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;o!==null;){if(a=hc(o),a===null)return;if(c=a.tag,c===5||c===6){s=n=a;continue e}o=o.parentNode}}s=s.return}NC(function(){var u=n,l=dw(i),h=[];e:{var g=uP.get(t);if(g!==void 0){var m=mw,f=t;switch(t){case"keypress":if(Eg(i)===0)break e;case"keydown":case"keyup":m=kO;break;case"focusin":f="focus",m=iy;break;case"focusout":f="blur",m=iy;break;case"beforeblur":case"afterblur":m=iy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=sS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=EO;break;case oP:case cP:case dP:m=hO;break;case lP:m=CO;break;case"scroll":m=cO;break;case"wheel":m=RO;break;case"copy":case"cut":case"paste":m=mO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=nS}var _=(e&4)!==0,k=!_&&t==="scroll",y=_?g!==null?g+"Capture":null:g;_=[];for(var b=u,x;b!==null;){x=b;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,y!==null&&(C=fp(b,y),C!=null&&_.push(Sp(b,C,x)))),k)break;b=b.return}0<_.length&&(g=new m(g,f,null,i,l),h.push({event:g,listeners:_}))}}if((e&7)===0){e:{if(g=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",g&&i!==K0&&(f=i.relatedTarget||i.fromElement)&&(hc(f)||f[ta]))break e;if((m||g)&&(g=l.window===l?l:(g=l.ownerDocument)?g.defaultView||g.parentWindow:window,m?(f=i.relatedTarget||i.toElement,m=u,f=f?hc(f):null,f!==null&&(k=$c(f),f!==k||f.tag!==5&&f.tag!==6)&&(f=null)):(m=null,f=u),m!==f)){if(_=sS,C="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(_=nS,C="onPointerLeave",y="onPointerEnter",b="pointer"),k=m==null?g:zd(m),x=f==null?g:zd(f),g=new _(C,b+"leave",m,i,l),g.target=k,g.relatedTarget=x,C=null,hc(l)===u&&(_=new _(y,b+"enter",f,i,l),_.target=x,_.relatedTarget=k,C=_),k=C,m&&f)t:{for(_=m,y=f,b=0,x=_;x;x=Qc(x))b++;for(x=0,C=y;C;C=Qc(C))x++;for(;0<b-x;)_=Qc(_),b--;for(;0<x-b;)y=Qc(y),x--;for(;b--;){if(_===y||y!==null&&_===y.alternate)break t;_=Qc(_),y=Qc(y)}_=null}else _=null;m!==null&&fS(h,g,m,_,!1),f!==null&&k!==null&&fS(h,k,f,_,!0)}}e:{if(g=u?zd(u):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var D=NO;else if(cS(g))if(iP)D=zO;else{D=$O;var M=UO}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=jO);if(D&&(D=D(t,u))){tP(h,D,i,l);break e}M&&M(t,g,u),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&H0(g,"number",g.value)}switch(M=u?zd(u):window,t){case"focusin":(cS(M)||M.contentEditable==="true")&&($d=M,ib=u,Qu=null);break;case"focusout":Qu=ib=$d=null;break;case"mousedown":sb=!0;break;case"contextmenu":case"mouseup":case"dragend":sb=!1,hS(h,i,l);break;case"selectionchange":if(BO)break;case"keydown":case"keyup":hS(h,i,l)}var L;if(vw)e:{switch(t){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else Ud?XC(t,i)&&(V="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(V="onCompositionStart");V&&(ZC&&i.locale!=="ko"&&(Ud||V!=="onCompositionStart"?V==="onCompositionEnd"&&Ud&&(L=YC()):(Ya=l,gw="value"in Ya?Ya.value:Ya.textContent,Ud=!0)),M=Cm(u,V),0<M.length&&(V=new rS(V,t,null,i,l),h.push({event:V,listeners:M}),L?V.data=L:(L=eP(i),L!==null&&(V.data=L)))),(L=AO?DO(t,i):MO(t,i))&&(u=Cm(u,"onBeforeInput"),0<u.length&&(l=new rS("onBeforeInput","beforeinput",null,i,l),h.push({event:l,listeners:u}),l.data=L))}pP(h,e)})}function Sp(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Cm(t,e){for(var i=e+"Capture",s=[];t!==null;){var r=t,n=r.stateNode;r.tag===5&&n!==null&&(r=n,n=fp(t,i),n!=null&&s.unshift(Sp(t,n,r)),n=fp(t,e),n!=null&&s.push(Sp(t,n,r))),t=t.return}return s}function Qc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fS(t,e,i,s,r){for(var n=e._reactName,a=[];i!==null&&i!==s;){var o=i,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,r?(c=fp(i,n),c!=null&&a.unshift(Sp(i,c,o))):r||(c=fp(i,n),c!=null&&a.push(Sp(i,c,o)))),i=i.return}a.length!==0&&t.push({event:e,listeners:a})}var GO=/\r\n?/g,JO=/\u0000|\uFFFD/g;function vS(t){return(typeof t=="string"?t:""+t).replace(GO,`
`).replace(JO,"")}function Uh(t,e,i){if(e=vS(e),vS(t)!==e&&i)throw Error(J(425))}function Pm(){}var rb=null,nb=null;function ab(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ob=typeof setTimeout=="function"?setTimeout:void 0,KO=typeof clearTimeout=="function"?clearTimeout:void 0,yS=typeof Promise=="function"?Promise:void 0,QO=typeof queueMicrotask=="function"?queueMicrotask:typeof yS<"u"?function(t){return yS.resolve(null).then(t).catch(YO)}:ob;function YO(t){setTimeout(function(){throw t})}function ly(t,e){var i=e,s=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(s===0){t.removeChild(r),bp(e);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=r}while(i);bp(e)}function ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),dn="__reactFiber$"+Pl,xp="__reactProps$"+Pl,ta="__reactContainer$"+Pl,cb="__reactEvents$"+Pl,ZO="__reactListeners$"+Pl,XO="__reactHandles$"+Pl;function hc(t){var e=t[dn];if(e)return e;for(var i=t.parentNode;i;){if(e=i[ta]||i[dn]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=bS(t);t!==null;){if(i=t[dn])return i;t=bS(t)}return e}t=i,i=t.parentNode}return null}function Xp(t){return t=t[dn]||t[ta],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Ff(t){return t[xp]||null}var db=[],Fd=-1;function bo(t){return{current:t}}function bt(t){0>Fd||(t.current=db[Fd],db[Fd]=null,Fd--)}function lt(t,e){Fd++,db[Fd]=t.current,t.current=e}var ho={},Gi=bo(ho),vs=bo(!1),Ec=ho;function pl(t,e){var i=t.type.contextTypes;if(!i)return ho;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},n;for(n in i)r[n]=e[n];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ys(t){return t=t.childContextTypes,t!=null}function Rm(){bt(vs),bt(Gi)}function wS(t,e,i){if(Gi.current!==ho)throw Error(J(168));lt(Gi,e),lt(vs,i)}function gP(t,e,i){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(J(108,UM(t)||"Unknown",r));return Ot({},i,s)}function Im(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ho,Ec=Gi.current,lt(Gi,t),lt(vs,vs.current),!0}function _S(t,e,i){var s=t.stateNode;if(!s)throw Error(J(169));i?(t=gP(t,e,Ec),s.__reactInternalMemoizedMergedChildContext=t,bt(vs),bt(Gi),lt(Gi,t)):bt(vs),lt(vs,i)}var Un=null,Vf=!1,uy=!1;function mP(t){Un===null?Un=[t]:Un.push(t)}function eL(t){Vf=!0,mP(t)}function wo(){if(!uy&&Un!==null){uy=!0;var t=0,e=et;try{var i=Un;for(et=1;t<i.length;t++){var s=i[t];do s=s(!0);while(s!==null)}Un=null,Vf=!1}catch(r){throw Un!==null&&(Un=Un.slice(t+1)),zC(lw,wo),r}finally{et=e,uy=!1}}return null}var Vd=[],Bd=0,Am=null,Dm=0,er=[],tr=0,Tc=null,qn=1,Gn="";function Fo(t,e){Vd[Bd++]=Dm,Vd[Bd++]=Am,Am=t,Dm=e}function fP(t,e,i){er[tr++]=qn,er[tr++]=Gn,er[tr++]=Tc,Tc=t;var s=qn;t=Gn;var r=32-$r(s)-1;s&=~(1<<r),i+=1;var n=32-$r(e)+r;if(30<n){var a=r-r%5;n=(s&(1<<a)-1).toString(32),s>>=a,r-=a,qn=1<<32-$r(e)+r|i<<r|s,Gn=n+t}else qn=1<<n|i<<r|s,Gn=t}function bw(t){t.return!==null&&(Fo(t,1),fP(t,1,0))}function ww(t){for(;t===Am;)Am=Vd[--Bd],Vd[Bd]=null,Dm=Vd[--Bd],Vd[Bd]=null;for(;t===Tc;)Tc=er[--tr],er[tr]=null,Gn=er[--tr],er[tr]=null,qn=er[--tr],er[tr]=null}var Vs=null,js=null,St=!1,Rr=null;function vP(t,e){var i=rr(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function kS(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vs=t,js=ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vs=t,js=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=Tc!==null?{id:qn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=rr(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,Vs=t,js=null,!0):!1;default:return!1}}function lb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ub(t){if(St){var e=js;if(e){var i=e;if(!kS(t,e)){if(lb(t))throw Error(J(418));e=ro(i.nextSibling);var s=Vs;e&&kS(t,e)?vP(s,i):(t.flags=t.flags&-4097|2,St=!1,Vs=t)}}else{if(lb(t))throw Error(J(418));t.flags=t.flags&-4097|2,St=!1,Vs=t}}}function SS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vs=t}function $h(t){if(t!==Vs)return!1;if(!St)return SS(t),St=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ab(t.type,t.memoizedProps)),e&&(e=js)){if(lb(t))throw yP(),Error(J(418));for(;e;)vP(t,e),e=ro(e.nextSibling)}if(SS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){js=ro(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}js=null}}else js=Vs?ro(t.stateNode.nextSibling):null;return!0}function yP(){for(var t=js;t;)t=ro(t.nextSibling)}function hl(){js=Vs=null,St=!1}function _w(t){Rr===null?Rr=[t]:Rr.push(t)}var tL=da.ReactCurrentBatchConfig;function Tr(t,e){if(t&&t.defaultProps){e=Ot({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var Mm=bo(null),Om=null,Hd=null,kw=null;function Sw(){kw=Hd=Om=null}function xw(t){var e=Mm.current;bt(Mm),t._currentValue=e}function pb(t,e,i){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===i)break;t=t.return}}function Xd(t,e){Om=t,kw=Hd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(ms=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(kw!==t)if(t={context:t,memoizedValue:e,next:null},Hd===null){if(Om===null)throw Error(J(308));Hd=t,Om.dependencies={lanes:0,firstContext:t}}else Hd=Hd.next=t;return e}var gc=null;function Ew(t){gc===null?gc=[t]:gc.push(t)}function bP(t,e,i,s){var r=e.interleaved;return r===null?(i.next=i,Ew(e)):(i.next=r.next,r.next=i),e.interleaved=i,ia(t,s)}function ia(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Ba=!1;function Tw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function no(t,e,i){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(He&2)!==0){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,ia(t,i)}return r=s.interleaved,r===null?(e.next=e,Ew(s)):(e.next=r.next,r.next=e),s.interleaved=e,ia(t,i)}function Tg(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,uw(t,i)}}function xS(t,e){var i=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var r=null,n=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};n===null?r=n=a:n=n.next=a,i=i.next}while(i!==null);n===null?r=n=e:n=n.next=e}else r=n=e;i={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:s.shared,effects:s.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Lm(t,e,i,s){var r=t.updateQueue;Ba=!1;var n=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?n=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(n!==null){var h=r.baseState;a=0,l=u=c=null,o=n;do{var g=o.lane,m=o.eventTime;if((s&g)===g){l!==null&&(l=l.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=t,_=o;switch(g=e,m=i,_.tag){case 1:if(f=_.payload,typeof f=="function"){h=f.call(m,h,g);break e}h=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=_.payload,g=typeof f=="function"?f.call(m,h,g):f,g==null)break e;h=Ot({},h,g);break e;case 2:Ba=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[o]:g.push(o))}else m={eventTime:m,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=m,c=h):l=l.next=m,a|=g;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(1);if(l===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=l,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else n===null&&(r.shared.lanes=0);Pc|=a,t.lanes=a,t.memoizedState=h}}function ES(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=i,typeof r!="function")throw Error(J(191,r));r.call(s)}}}var _P=new bC.Component().refs;function hb(t,e,i,s){e=t.memoizedState,i=i(s,e),i=i==null?e:Ot({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Bf={isMounted:function(t){return(t=t._reactInternals)?$c(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var s=ss(),r=oo(t),n=Zn(s,r);n.payload=e,i!=null&&(n.callback=i),e=no(t,n,r),e!==null&&(jr(e,t,r,s),Tg(e,t,r))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var s=ss(),r=oo(t),n=Zn(s,r);n.tag=1,n.payload=e,i!=null&&(n.callback=i),e=no(t,n,r),e!==null&&(jr(e,t,r,s),Tg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=ss(),s=oo(t),r=Zn(i,s);r.tag=2,e!=null&&(r.callback=e),e=no(t,r,s),e!==null&&(jr(e,t,s,i),Tg(e,t,s))}};function TS(t,e,i,s,r,n,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,n,a):e.prototype&&e.prototype.isPureReactComponent?!_p(i,s)||!_p(r,n):!0}function kP(t,e,i){var s=!1,r=ho,n=e.contextType;return typeof n=="object"&&n!==null?n=dr(n):(r=ys(e)?Ec:Gi.current,s=e.contextTypes,n=(s=s!=null)?pl(t,r):ho),e=new e(i,n),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bf,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),e}function CS(t,e,i,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,s),e.state!==t&&Bf.enqueueReplaceState(e,e.state,null)}function gb(t,e,i,s){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs=_P,Tw(t);var n=e.contextType;typeof n=="object"&&n!==null?r.context=dr(n):(n=ys(e)?Ec:Gi.current,r.context=pl(t,n)),r.state=t.memoizedState,n=e.getDerivedStateFromProps,typeof n=="function"&&(hb(t,e,n,i),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Bf.enqueueReplaceState(r,r.state,null),Lm(t,i,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ql(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(J(309));var s=i.stateNode}if(!s)throw Error(J(147,t));var r=s,n=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===n?e.ref:(e=function(a){var o=r.refs;o===_P&&(o=r.refs={}),a===null?delete o[n]:o[n]=a},e._stringRef=n,e)}if(typeof t!="string")throw Error(J(284));if(!i._owner)throw Error(J(290,t))}return t}function jh(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PS(t){var e=t._init;return e(t._payload)}function SP(t){function e(y,b){if(t){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function i(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function s(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(y,b){return y=co(y,b),y.index=0,y.sibling=null,y}function n(y,b,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,b,x,C){return b===null||b.tag!==6?(b=yy(x,y.mode,C),b.return=y,b):(b=r(b,x),b.return=y,b)}function c(y,b,x,C){var D=x.type;return D===Nd?l(y,b,x.props.children,C,x.key):b!==null&&(b.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Va&&PS(D)===b.type)?(C=r(b,x.props),C.ref=Ql(y,b,x),C.return=y,C):(C=Dg(x.type,x.key,x.props,null,y.mode,C),C.ref=Ql(y,b,x),C.return=y,C)}function u(y,b,x,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=by(x,y.mode,C),b.return=y,b):(b=r(b,x.children||[]),b.return=y,b)}function l(y,b,x,C,D){return b===null||b.tag!==7?(b=_c(x,y.mode,C,D),b.return=y,b):(b=r(b,x),b.return=y,b)}function h(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yy(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ph:return x=Dg(b.type,b.key,b.props,null,y.mode,x),x.ref=Ql(y,null,b),x.return=y,x;case Ld:return b=by(b,y.mode,x),b.return=y,b;case Va:var C=b._init;return h(y,C(b._payload),x)}if(Pu(b)||Wl(b))return b=_c(b,y.mode,x,null),b.return=y,b;jh(y,b)}return null}function g(y,b,x,C){var D=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return D!==null?null:o(y,b,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:return x.key===D?c(y,b,x,C):null;case Ld:return x.key===D?u(y,b,x,C):null;case Va:return D=x._init,g(y,b,D(x._payload),C)}if(Pu(x)||Wl(x))return D!==null?null:l(y,b,x,C,null);jh(y,x)}return null}function m(y,b,x,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(x)||null,o(b,y,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ph:return y=y.get(C.key===null?x:C.key)||null,c(b,y,C,D);case Ld:return y=y.get(C.key===null?x:C.key)||null,u(b,y,C,D);case Va:var M=C._init;return m(y,b,x,M(C._payload),D)}if(Pu(C)||Wl(C))return y=y.get(x)||null,l(b,y,C,D,null);jh(b,C)}return null}function f(y,b,x,C){for(var D=null,M=null,L=b,V=b=0,se=null;L!==null&&V<x.length;V++){L.index>V?(se=L,L=null):se=L.sibling;var Q=g(y,L,x[V],C);if(Q===null){L===null&&(L=se);break}t&&L&&Q.alternate===null&&e(y,L),b=n(Q,b,V),M===null?D=Q:M.sibling=Q,M=Q,L=se}if(V===x.length)return i(y,L),St&&Fo(y,V),D;if(L===null){for(;V<x.length;V++)L=h(y,x[V],C),L!==null&&(b=n(L,b,V),M===null?D=L:M.sibling=L,M=L);return St&&Fo(y,V),D}for(L=s(y,L);V<x.length;V++)se=m(L,y,V,x[V],C),se!==null&&(t&&se.alternate!==null&&L.delete(se.key===null?V:se.key),b=n(se,b,V),M===null?D=se:M.sibling=se,M=se);return t&&L.forEach(function(te){return e(y,te)}),St&&Fo(y,V),D}function _(y,b,x,C){var D=Wl(x);if(typeof D!="function")throw Error(J(150));if(x=D.call(x),x==null)throw Error(J(151));for(var M=D=null,L=b,V=b=0,se=null,Q=x.next();L!==null&&!Q.done;V++,Q=x.next()){L.index>V?(se=L,L=null):se=L.sibling;var te=g(y,L,Q.value,C);if(te===null){L===null&&(L=se);break}t&&L&&te.alternate===null&&e(y,L),b=n(te,b,V),M===null?D=te:M.sibling=te,M=te,L=se}if(Q.done)return i(y,L),St&&Fo(y,V),D;if(L===null){for(;!Q.done;V++,Q=x.next())Q=h(y,Q.value,C),Q!==null&&(b=n(Q,b,V),M===null?D=Q:M.sibling=Q,M=Q);return St&&Fo(y,V),D}for(L=s(y,L);!Q.done;V++,Q=x.next())Q=m(L,y,V,Q.value,C),Q!==null&&(t&&Q.alternate!==null&&L.delete(Q.key===null?V:Q.key),b=n(Q,b,V),M===null?D=Q:M.sibling=Q,M=Q);return t&&L.forEach(function(Ae){return e(y,Ae)}),St&&Fo(y,V),D}function k(y,b,x,C){if(typeof x=="object"&&x!==null&&x.type===Nd&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:e:{for(var D=x.key,M=b;M!==null;){if(M.key===D){if(D=x.type,D===Nd){if(M.tag===7){i(y,M.sibling),b=r(M,x.props.children),b.return=y,y=b;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Va&&PS(D)===M.type){i(y,M.sibling),b=r(M,x.props),b.ref=Ql(y,M,x),b.return=y,y=b;break e}i(y,M);break}else e(y,M);M=M.sibling}x.type===Nd?(b=_c(x.props.children,y.mode,C,x.key),b.return=y,y=b):(C=Dg(x.type,x.key,x.props,null,y.mode,C),C.ref=Ql(y,b,x),C.return=y,y=C)}return a(y);case Ld:e:{for(M=x.key;b!==null;){if(b.key===M)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){i(y,b.sibling),b=r(b,x.children||[]),b.return=y,y=b;break e}else{i(y,b);break}else e(y,b);b=b.sibling}b=by(x,y.mode,C),b.return=y,y=b}return a(y);case Va:return M=x._init,k(y,b,M(x._payload),C)}if(Pu(x))return f(y,b,x,C);if(Wl(x))return _(y,b,x,C);jh(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(i(y,b.sibling),b=r(b,x),b.return=y,y=b):(i(y,b),b=yy(x,y.mode,C),b.return=y,y=b),a(y)):i(y,b)}return k}var gl=SP(!0),xP=SP(!1),eh={},gn=bo(eh),Ep=bo(eh),Tp=bo(eh);function mc(t){if(t===eh)throw Error(J(174));return t}function Cw(t,e){switch(lt(Tp,e),lt(Ep,t),lt(gn,eh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:q0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=q0(e,t)}bt(gn),lt(gn,e)}function ml(){bt(gn),bt(Ep),bt(Tp)}function EP(t){mc(Tp.current);var e=mc(gn.current),i=q0(e,t.type);e!==i&&(lt(Ep,t),lt(gn,i))}function Pw(t){Ep.current===t&&(bt(gn),bt(Ep))}var At=bo(0);function Nm(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var py=[];function Rw(){for(var t=0;t<py.length;t++)py[t]._workInProgressVersionPrimary=null;py.length=0}var Cg=da.ReactCurrentDispatcher,hy=da.ReactCurrentBatchConfig,Cc=0,Mt=null,yi=null,Ti=null,Um=!1,Yu=!1,Cp=0,iL=0;function $i(){throw Error(J(321))}function Iw(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Vr(t[i],e[i]))return!1;return!0}function Aw(t,e,i,s,r,n){if(Cc=n,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cg.current=t===null||t.memoizedState===null?aL:oL,t=i(s,r),Yu){n=0;do{if(Yu=!1,Cp=0,25<=n)throw Error(J(301));n+=1,Ti=yi=null,e.updateQueue=null,Cg.current=cL,t=i(s,r)}while(Yu)}if(Cg.current=$m,e=yi!==null&&yi.next!==null,Cc=0,Ti=yi=Mt=null,Um=!1,e)throw Error(J(300));return t}function Dw(){var t=Cp!==0;return Cp=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?Mt.memoizedState=Ti=t:Ti=Ti.next=t,Ti}function lr(){if(yi===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=yi.next;var e=Ti===null?Mt.memoizedState:Ti.next;if(e!==null)Ti=e,yi=t;else{if(t===null)throw Error(J(310));yi=t,t={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},Ti===null?Mt.memoizedState=Ti=t:Ti=Ti.next=t}return Ti}function Pp(t,e){return typeof e=="function"?e(t):e}function gy(t){var e=lr(),i=e.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=t;var s=yi,r=s.baseQueue,n=i.pending;if(n!==null){if(r!==null){var a=r.next;r.next=n.next,n.next=a}s.baseQueue=r=n,i.pending=null}if(r!==null){n=r.next,s=s.baseState;var o=a=null,c=null,u=n;do{var l=u.lane;if((Cc&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var h={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=s):c=c.next=h,Mt.lanes|=l,Pc|=l}u=u.next}while(u!==null&&u!==n);c===null?a=s:c.next=o,Vr(s,e.memoizedState)||(ms=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,i.lastRenderedState=s}if(t=i.interleaved,t!==null){r=t;do n=r.lane,Mt.lanes|=n,Pc|=n,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function my(t){var e=lr(),i=e.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=t;var s=i.dispatch,r=i.pending,n=e.memoizedState;if(r!==null){i.pending=null;var a=r=r.next;do n=t(n,a.action),a=a.next;while(a!==r);Vr(n,e.memoizedState)||(ms=!0),e.memoizedState=n,e.baseQueue===null&&(e.baseState=n),i.lastRenderedState=n}return[n,s]}function TP(){}function CP(t,e){var i=Mt,s=lr(),r=e(),n=!Vr(s.memoizedState,r);if(n&&(s.memoizedState=r,ms=!0),s=s.queue,Mw(IP.bind(null,i,s,t),[t]),s.getSnapshot!==e||n||Ti!==null&&Ti.memoizedState.tag&1){if(i.flags|=2048,Rp(9,RP.bind(null,i,s,r,e),void 0,null),Pi===null)throw Error(J(349));(Cc&30)!==0||PP(i,e,r)}return r}function PP(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function RP(t,e,i,s){e.value=i,e.getSnapshot=s,AP(e)&&DP(t)}function IP(t,e,i){return i(function(){AP(e)&&DP(t)})}function AP(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Vr(t,i)}catch{return!0}}function DP(t){var e=ia(t,1);e!==null&&jr(e,t,1,-1)}function RS(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:t},e.queue=t,t=t.dispatch=nL.bind(null,Mt,t),[e.memoizedState,t]}function Rp(t,e,i,s){return t={tag:t,create:e,destroy:i,deps:s,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,e.lastEffect=t)),t}function MP(){return lr().memoizedState}function Pg(t,e,i,s){var r=nn();Mt.flags|=t,r.memoizedState=Rp(1|e,i,void 0,s===void 0?null:s)}function Hf(t,e,i,s){var r=lr();s=s===void 0?null:s;var n=void 0;if(yi!==null){var a=yi.memoizedState;if(n=a.destroy,s!==null&&Iw(s,a.deps)){r.memoizedState=Rp(e,i,n,s);return}}Mt.flags|=t,r.memoizedState=Rp(1|e,i,n,s)}function IS(t,e){return Pg(8390656,8,t,e)}function Mw(t,e){return Hf(2048,8,t,e)}function OP(t,e){return Hf(4,2,t,e)}function LP(t,e){return Hf(4,4,t,e)}function NP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UP(t,e,i){return i=i!=null?i.concat([t]):null,Hf(4,4,NP.bind(null,e,t),i)}function Ow(){}function $P(t,e){var i=lr();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&Iw(e,s[1])?s[0]:(i.memoizedState=[t,e],t)}function jP(t,e){var i=lr();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&Iw(e,s[1])?s[0]:(t=t(),i.memoizedState=[t,e],t)}function zP(t,e,i){return(Cc&21)===0?(t.baseState&&(t.baseState=!1,ms=!0),t.memoizedState=i):(Vr(i,e)||(i=BC(),Mt.lanes|=i,Pc|=i,t.baseState=!0),e)}function sL(t,e){var i=et;et=i!==0&&4>i?i:4,t(!0);var s=hy.transition;hy.transition={};try{t(!1),e()}finally{et=i,hy.transition=s}}function FP(){return lr().memoizedState}function rL(t,e,i){var s=oo(t);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},VP(t))BP(e,i);else if(i=bP(t,e,i,s),i!==null){var r=ss();jr(i,t,s,r),HP(i,e,s)}}function nL(t,e,i){var s=oo(t),r={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(VP(t))BP(e,r);else{var n=t.alternate;if(t.lanes===0&&(n===null||n.lanes===0)&&(n=e.lastRenderedReducer,n!==null))try{var a=e.lastRenderedState,o=n(a,i);if(r.hasEagerState=!0,r.eagerState=o,Vr(o,a)){var c=e.interleaved;c===null?(r.next=r,Ew(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}i=bP(t,e,r,s),i!==null&&(r=ss(),jr(i,t,s,r),HP(i,e,s))}}function VP(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function BP(t,e){Yu=Um=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function HP(t,e,i){if((i&4194240)!==0){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,uw(t,i)}}var $m={readContext:dr,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},aL={readContext:dr,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:IS,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Pg(4194308,4,NP.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Pg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pg(4,2,t,e)},useMemo:function(t,e){var i=nn();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var s=nn();return e=i!==void 0?i(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=rL.bind(null,Mt,t),[s.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:RS,useDebugValue:Ow,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=RS(!1),e=t[0];return t=sL.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var s=Mt,r=nn();if(St){if(i===void 0)throw Error(J(407));i=i()}else{if(i=e(),Pi===null)throw Error(J(349));(Cc&30)!==0||PP(s,e,i)}r.memoizedState=i;var n={value:i,getSnapshot:e};return r.queue=n,IS(IP.bind(null,s,n,t),[t]),s.flags|=2048,Rp(9,RP.bind(null,s,n,i,e),void 0,null),i},useId:function(){var t=nn(),e=Pi.identifierPrefix;if(St){var i=Gn,s=qn;i=(s&~(1<<32-$r(s)-1)).toString(32)+i,e=":"+e+"R"+i,i=Cp++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=iL++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oL={readContext:dr,useCallback:$P,useContext:dr,useEffect:Mw,useImperativeHandle:UP,useInsertionEffect:OP,useLayoutEffect:LP,useMemo:jP,useReducer:gy,useRef:MP,useState:function(){return gy(Pp)},useDebugValue:Ow,useDeferredValue:function(t){var e=lr();return zP(e,yi.memoizedState,t)},useTransition:function(){var t=gy(Pp)[0],e=lr().memoizedState;return[t,e]},useMutableSource:TP,useSyncExternalStore:CP,useId:FP,unstable_isNewReconciler:!1},cL={readContext:dr,useCallback:$P,useContext:dr,useEffect:Mw,useImperativeHandle:UP,useInsertionEffect:OP,useLayoutEffect:LP,useMemo:jP,useReducer:my,useRef:MP,useState:function(){return my(Pp)},useDebugValue:Ow,useDeferredValue:function(t){var e=lr();return yi===null?e.memoizedState=t:zP(e,yi.memoizedState,t)},useTransition:function(){var t=my(Pp)[0],e=lr().memoizedState;return[t,e]},useMutableSource:TP,useSyncExternalStore:CP,useId:FP,unstable_isNewReconciler:!1};function fl(t,e){try{var i="",s=e;do i+=NM(s),s=s.return;while(s);var r=i}catch(n){r=`
Error generating stack: `+n.message+`
`+n.stack}return{value:t,source:e,stack:r,digest:null}}function fy(t,e,i){return{value:t,source:null,stack:i!=null?i:null,digest:e!=null?e:null}}function mb(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var dL=typeof WeakMap=="function"?WeakMap:Map;function WP(t,e,i){i=Zn(-1,i),i.tag=3,i.payload={element:null};var s=e.value;return i.callback=function(){zm||(zm=!0,Eb=s),mb(t,e)},i}function qP(t,e,i){i=Zn(-1,i),i.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;i.payload=function(){return s(r)},i.callback=function(){mb(t,e)}}var n=t.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(i.callback=function(){mb(t,e),typeof s!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),i}function AS(t,e,i){var s=t.pingCache;if(s===null){s=t.pingCache=new dL;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(i)||(r.add(i),t=SL.bind(null,t,e,i),e.then(t,t))}function DS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MS(t,e,i,s,r){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Zn(-1,1),e.tag=2,no(i,e,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var lL=da.ReactCurrentOwner,ms=!1;function es(t,e,i,s){e.child=t===null?xP(e,null,i,s):gl(e,t.child,i,s)}function OS(t,e,i,s,r){i=i.render;var n=e.ref;return Xd(e,r),s=Aw(t,e,i,s,n,r),i=Dw(),t!==null&&!ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sa(t,e,r)):(St&&i&&bw(e),e.flags|=1,es(t,e,s,r),e.child)}function LS(t,e,i,s,r){if(t===null){var n=i.type;return typeof n=="function"&&!Vw(n)&&n.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=n,GP(t,e,n,s,r)):(t=Dg(i.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(n=t.child,(t.lanes&r)===0){var a=n.memoizedProps;if(i=i.compare,i=i!==null?i:_p,i(a,s)&&t.ref===e.ref)return sa(t,e,r)}return e.flags|=1,t=co(n,s),t.ref=e.ref,t.return=e,e.child=t}function GP(t,e,i,s,r){if(t!==null){var n=t.memoizedProps;if(_p(n,s)&&t.ref===e.ref)if(ms=!1,e.pendingProps=s=n,(t.lanes&r)!==0)(t.flags&131072)!==0&&(ms=!0);else return e.lanes=t.lanes,sa(t,e,r)}return fb(t,e,i,s,r)}function JP(t,e,i){var s=e.pendingProps,r=s.children,n=t!==null?t.memoizedState:null;if(s.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(qd,Ls),Ls|=i;else{if((i&1073741824)===0)return t=n!==null?n.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(qd,Ls),Ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=n!==null?n.baseLanes:i,lt(qd,Ls),Ls|=s}else n!==null?(s=n.baseLanes|i,e.memoizedState=null):s=i,lt(qd,Ls),Ls|=s;return es(t,e,r,i),e.child}function KP(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function fb(t,e,i,s,r){var n=ys(i)?Ec:Gi.current;return n=pl(e,n),Xd(e,r),i=Aw(t,e,i,s,n,r),s=Dw(),t!==null&&!ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,sa(t,e,r)):(St&&s&&bw(e),e.flags|=1,es(t,e,i,r),e.child)}function NS(t,e,i,s,r){if(ys(i)){var n=!0;Im(e)}else n=!1;if(Xd(e,r),e.stateNode===null)Rg(t,e),kP(e,i,s),gb(e,i,s,r),s=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=i.contextType;typeof u=="object"&&u!==null?u=dr(u):(u=ys(i)?Ec:Gi.current,u=pl(e,u));var l=i.getDerivedStateFromProps,h=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||c!==u)&&CS(e,a,s,u),Ba=!1;var g=e.memoizedState;a.state=g,Lm(e,s,a,r),c=e.memoizedState,o!==s||g!==c||vs.current||Ba?(typeof l=="function"&&(hb(e,i,l,s),c=e.memoizedState),(o=Ba||TS(e,i,o,s,g,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=u,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,wP(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Tr(e.type,o),a.props=u,h=e.pendingProps,g=a.context,c=i.contextType,typeof c=="object"&&c!==null?c=dr(c):(c=ys(i)?Ec:Gi.current,c=pl(e,c));var m=i.getDerivedStateFromProps;(l=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||g!==c)&&CS(e,a,s,c),Ba=!1,g=e.memoizedState,a.state=g,Lm(e,s,a,r);var f=e.memoizedState;o!==h||g!==f||vs.current||Ba?(typeof m=="function"&&(hb(e,i,m,s),f=e.memoizedState),(u=Ba||TS(e,i,u,s,g,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,f,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=f),a.props=s,a.state=f,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return vb(t,e,i,s,n,r)}function vb(t,e,i,s,r,n){KP(t,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&_S(e,i,!1),sa(t,e,n);s=e.stateNode,lL.current=e;var o=a&&typeof i.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&a?(e.child=gl(e,t.child,null,n),e.child=gl(e,null,o,n)):es(t,e,o,n),e.memoizedState=s.state,r&&_S(e,i,!0),e.child}function QP(t){var e=t.stateNode;e.pendingContext?wS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wS(t,e.context,!1),Cw(t,e.containerInfo)}function US(t,e,i,s,r){return hl(),_w(r),e.flags|=256,es(t,e,i,s),e.child}var yb={dehydrated:null,treeContext:null,retryLane:0};function bb(t){return{baseLanes:t,cachePool:null,transitions:null}}function YP(t,e,i){var s=e.pendingProps,r=At.current,n=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(n=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),lt(At,r&1),t===null)return ub(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(a=s.children,t=s.fallback,n?(s=e.mode,n=e.child,a={mode:"hidden",children:a},(s&1)===0&&n!==null?(n.childLanes=0,n.pendingProps=a):n=Gf(a,s,0,null),t=_c(t,s,i,null),n.return=e,t.return=e,n.sibling=t,e.child=n,e.child.memoizedState=bb(i),e.memoizedState=yb,t):Lw(e,a));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return uL(t,e,a,s,o,r,i);if(n){n=s.fallback,a=e.mode,r=t.child,o=r.sibling;var c={mode:"hidden",children:s.children};return(a&1)===0&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=co(r,c),s.subtreeFlags=r.subtreeFlags&14680064),o!==null?n=co(o,n):(n=_c(n,a,i,null),n.flags|=2),n.return=e,s.return=e,s.sibling=n,e.child=s,s=n,n=e.child,a=t.child.memoizedState,a=a===null?bb(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},n.memoizedState=a,n.childLanes=t.childLanes&~i,e.memoizedState=yb,s}return n=t.child,t=n.sibling,s=co(n,{mode:"visible",children:s.children}),(e.mode&1)===0&&(s.lanes=i),s.return=e,s.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=s,e.memoizedState=null,s}function Lw(t,e){return e=Gf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zh(t,e,i,s){return s!==null&&_w(s),gl(e,t.child,null,i),t=Lw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uL(t,e,i,s,r,n,a){if(i)return e.flags&256?(e.flags&=-257,s=fy(Error(J(422))),zh(t,e,a,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(n=s.fallback,r=e.mode,s=Gf({mode:"visible",children:s.children},r,0,null),n=_c(n,r,a,null),n.flags|=2,s.return=e,n.return=e,s.sibling=n,e.child=s,(e.mode&1)!==0&&gl(e,t.child,null,a),e.child.memoizedState=bb(a),e.memoizedState=yb,n);if((e.mode&1)===0)return zh(t,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var o=s.dgst;return s=o,n=Error(J(419)),s=fy(n,s,void 0),zh(t,e,a,s)}if(o=(a&t.childLanes)!==0,ms||o){if(s=Pi,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(s.suspendedLanes|a))!==0?0:r,r!==0&&r!==n.retryLane&&(n.retryLane=r,ia(t,r),jr(s,t,r,-1))}return Fw(),s=fy(Error(J(421))),zh(t,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=xL.bind(null,t),r._reactRetry=e,null):(t=n.treeContext,js=ro(r.nextSibling),Vs=e,St=!0,Rr=null,t!==null&&(er[tr++]=qn,er[tr++]=Gn,er[tr++]=Tc,qn=t.id,Gn=t.overflow,Tc=e),e=Lw(e,s.children),e.flags|=4096,e)}function $S(t,e,i){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),pb(t.return,e,i)}function vy(t,e,i,s,r){var n=t.memoizedState;n===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:r}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=i,n.tailMode=r)}function ZP(t,e,i){var s=e.pendingProps,r=s.revealOrder,n=s.tail;if(es(t,e,s.children,i),s=At.current,(s&2)!==0)s=s&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$S(t,i,e);else if(t.tag===19)$S(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(lt(At,s),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;i!==null;)t=i.alternate,t!==null&&Nm(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),vy(e,!1,r,i,n);break;case"backwards":for(i=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Nm(t)===null){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}vy(e,!0,i,null,n);break;case"together":vy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rg(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sa(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),Pc|=e.lanes,(i&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,i=co(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=co(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function pL(t,e,i){switch(e.tag){case 3:QP(e),hl();break;case 5:EP(e);break;case 1:ys(e.type)&&Im(e);break;case 4:Cw(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;lt(Mm,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(lt(At,At.current&1),e.flags|=128,null):(i&e.child.childLanes)!==0?YP(t,e,i):(lt(At,At.current&1),t=sa(t,e,i),t!==null?t.sibling:null);lt(At,At.current&1);break;case 19:if(s=(i&e.childLanes)!==0,(t.flags&128)!==0){if(s)return ZP(t,e,i);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(At,At.current),s)break;return null;case 22:case 23:return e.lanes=0,JP(t,e,i)}return sa(t,e,i)}var XP,wb,e5,t5;XP=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};wb=function(){};e5=function(t,e,i,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,mc(gn.current);var n=null;switch(i){case"input":r=V0(t,r),s=V0(t,s),n=[];break;case"select":r=Ot({},r,{value:void 0}),s=Ot({},s,{value:void 0}),n=[];break;case"textarea":r=W0(t,r),s=W0(t,s),n=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Pm)}G0(i,s);var a;i=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gp.hasOwnProperty(u)?n||(n=[]):(n=n||[]).push(u,null));for(u in s){var c=s[u];if(o=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(i||(i={}),i[a]=c[a])}else i||(n||(n=[]),n.push(u,i)),i=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(n=n||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(n=n||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ht("scroll",t),n||o===c||(n=[])):(n=n||[]).push(u,c))}i&&(n=n||[]).push("style",i);var u=n;(e.updateQueue=u)&&(e.flags|=4)}};t5=function(t,e,i,s){i!==s&&(e.flags|=4)};function Yl(t,e){if(!St)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ji(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,s=0;if(e)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=i,e}function hL(t,e,i){var s=e.pendingProps;switch(ww(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(e),null;case 1:return ys(e.type)&&Rm(),ji(e),null;case 3:return s=e.stateNode,ml(),bt(vs),bt(Gi),Rw(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&($h(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Rr!==null&&(Pb(Rr),Rr=null))),wb(t,e),ji(e),null;case 5:Pw(e);var r=mc(Tp.current);if(i=e.type,t!==null&&e.stateNode!=null)e5(t,e,i,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(J(166));return ji(e),null}if(t=mc(gn.current),$h(e)){s=e.stateNode,i=e.type;var n=e.memoizedProps;switch(s[dn]=e,s[xp]=n,t=(e.mode&1)!==0,i){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(r=0;r<Iu.length;r++)ht(Iu[r],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":Gk(s,n),ht("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!n.multiple},ht("invalid",s);break;case"textarea":Kk(s,n),ht("invalid",s)}G0(i,n),r=null;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];a==="children"?typeof o=="string"?s.textContent!==o&&(n.suppressHydrationWarning!==!0&&Uh(s.textContent,o,t),r=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(n.suppressHydrationWarning!==!0&&Uh(s.textContent,o,t),r=["children",""+o]):gp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ht("scroll",s)}switch(i){case"input":Rh(s),Jk(s,n,!0);break;case"textarea":Rh(s),Qk(s);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(s.onclick=Pm)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PC(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=a.createElement(i,{is:s.is}):(t=a.createElement(i),i==="select"&&(a=t,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):t=a.createElementNS(t,i),t[dn]=e,t[xp]=s,XP(t,e,!1,!1),e.stateNode=t;e:{switch(a=J0(i,s),i){case"dialog":ht("cancel",t),ht("close",t),r=s;break;case"iframe":case"object":case"embed":ht("load",t),r=s;break;case"video":case"audio":for(r=0;r<Iu.length;r++)ht(Iu[r],t);r=s;break;case"source":ht("error",t),r=s;break;case"img":case"image":case"link":ht("error",t),ht("load",t),r=s;break;case"details":ht("toggle",t),r=s;break;case"input":Gk(t,s),r=V0(t,s),ht("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ot({},s,{value:void 0}),ht("invalid",t);break;case"textarea":Kk(t,s),r=W0(t,s),ht("invalid",t);break;default:r=s}G0(i,r),o=r;for(n in o)if(o.hasOwnProperty(n)){var c=o[n];n==="style"?AC(t,c):n==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&RC(t,c)):n==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&mp(t,c):typeof c=="number"&&mp(t,""+c):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(gp.hasOwnProperty(n)?c!=null&&n==="onScroll"&&ht("scroll",t):c!=null&&nw(t,n,c,a))}switch(i){case"input":Rh(t),Jk(t,s,!1);break;case"textarea":Rh(t),Qk(t);break;case"option":s.value!=null&&t.setAttribute("value",""+po(s.value));break;case"select":t.multiple=!!s.multiple,n=s.value,n!=null?Kd(t,!!s.multiple,n,!1):s.defaultValue!=null&&Kd(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Pm)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ji(e),null;case 6:if(t&&e.stateNode!=null)t5(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(J(166));if(i=mc(Tp.current),mc(gn.current),$h(e)){if(s=e.stateNode,i=e.memoizedProps,s[dn]=e,(n=s.nodeValue!==i)&&(t=Vs,t!==null))switch(t.tag){case 3:Uh(s.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uh(s.nodeValue,i,(t.mode&1)!==0)}n&&(e.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[dn]=e,e.stateNode=s}return ji(e),null;case 13:if(bt(At),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(St&&js!==null&&(e.mode&1)!==0&&(e.flags&128)===0)yP(),hl(),e.flags|=98560,n=!1;else if(n=$h(e),s!==null&&s.dehydrated!==null){if(t===null){if(!n)throw Error(J(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(J(317));n[dn]=e}else hl(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ji(e),n=!1}else Rr!==null&&(Pb(Rr),Rr=null),n=!0;if(!n)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=i,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(At.current&1)!==0?wi===0&&(wi=3):Fw())),e.updateQueue!==null&&(e.flags|=4),ji(e),null);case 4:return ml(),wb(t,e),t===null&&kp(e.stateNode.containerInfo),ji(e),null;case 10:return xw(e.type._context),ji(e),null;case 17:return ys(e.type)&&Rm(),ji(e),null;case 19:if(bt(At),n=e.memoizedState,n===null)return ji(e),null;if(s=(e.flags&128)!==0,a=n.rendering,a===null)if(s)Yl(n,!1);else{if(wi!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=Nm(t),a!==null){for(e.flags|=128,Yl(n,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=i,i=e.child;i!==null;)n=i,t=s,n.flags&=14680066,a=n.alternate,a===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,t=a.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return lt(At,At.current&1|2),e.child}t=t.sibling}n.tail!==null&&Kt()>vl&&(e.flags|=128,s=!0,Yl(n,!1),e.lanes=4194304)}else{if(!s)if(t=Nm(a),t!==null){if(e.flags|=128,s=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Yl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!St)return ji(e),null}else 2*Kt()-n.renderingStartTime>vl&&i!==1073741824&&(e.flags|=128,s=!0,Yl(n,!1),e.lanes=4194304);n.isBackwards?(a.sibling=e.child,e.child=a):(i=n.last,i!==null?i.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Kt(),e.sibling=null,i=At.current,lt(At,s?i&1|2:i&1),e):(ji(e),null);case 22:case 23:return zw(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&(e.mode&1)!==0?(Ls&1073741824)!==0&&(ji(e),e.subtreeFlags&6&&(e.flags|=8192)):ji(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function gL(t,e){switch(ww(e),e.tag){case 1:return ys(e.type)&&Rm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ml(),bt(vs),bt(Gi),Rw(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Pw(e),null;case 13:if(bt(At),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));hl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(At),null;case 4:return ml(),null;case 10:return xw(e.type._context),null;case 22:case 23:return zw(),null;case 24:return null;default:return null}}var Fh=!1,Wi=!1,mL=typeof WeakSet=="function"?WeakSet:Set,X=null;function Wd(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){Vt(t,e,s)}else i.current=null}function _b(t,e,i){try{i()}catch(s){Vt(t,e,s)}}var jS=!1;function fL(t,e){if(rb=Em,t=nP(),yw(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var r=s.anchorOffset,n=s.focusNode;s=s.focusOffset;try{i.nodeType,n.nodeType}catch{i=null;break e}var a=0,o=-1,c=-1,u=0,l=0,h=t,g=null;t:for(;;){for(var m;h!==i||r!==0&&h.nodeType!==3||(o=a+r),h!==n||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)g=h,h=m;for(;;){if(h===t)break t;if(g===i&&++u===r&&(o=a),g===n&&++l===s&&(c=a),(m=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=m}i=o===-1||c===-1?null:{start:o,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(nb={focusedElem:t,selectionRange:i},Em=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var f=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var _=f.memoizedProps,k=f.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:Tr(e.type,_),k);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(C){Vt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return f=jS,jS=!1,f}function Zu(t,e,i){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.destroy;r.destroy=void 0,n!==void 0&&_b(e,i,n)}r=r.next}while(r!==s)}}function Wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var s=i.create;i.destroy=s()}i=i.next}while(i!==e)}}function kb(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function i5(t){var e=t.alternate;e!==null&&(t.alternate=null,i5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[xp],delete e[cb],delete e[ZO],delete e[XO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s5(t){return t.tag===5||t.tag===3||t.tag===4}function zS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sb(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Pm));else if(s!==4&&(t=t.child,t!==null))for(Sb(t,e,i),t=t.sibling;t!==null;)Sb(t,e,i),t=t.sibling}function xb(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(xb(t,e,i),t=t.sibling;t!==null;)xb(t,e,i),t=t.sibling}var Mi=null,Cr=!1;function fa(t,e,i){for(i=i.child;i!==null;)r5(t,e,i),i=i.sibling}function r5(t,e,i){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Uf,i)}catch{}switch(i.tag){case 5:Wi||Wd(i,e);case 6:var s=Mi,r=Cr;Mi=null,fa(t,e,i),Mi=s,Cr=r,Mi!==null&&(Cr?(t=Mi,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Mi.removeChild(i.stateNode));break;case 18:Mi!==null&&(Cr?(t=Mi,i=i.stateNode,t.nodeType===8?ly(t.parentNode,i):t.nodeType===1&&ly(t,i),bp(t)):ly(Mi,i.stateNode));break;case 4:s=Mi,r=Cr,Mi=i.stateNode.containerInfo,Cr=!0,fa(t,e,i),Mi=s,Cr=r;break;case 0:case 11:case 14:case 15:if(!Wi&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var n=r,a=n.destroy;n=n.tag,a!==void 0&&((n&2)!==0||(n&4)!==0)&&_b(i,e,a),r=r.next}while(r!==s)}fa(t,e,i);break;case 1:if(!Wi&&(Wd(i,e),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(o){Vt(i,e,o)}fa(t,e,i);break;case 21:fa(t,e,i);break;case 22:i.mode&1?(Wi=(s=Wi)||i.memoizedState!==null,fa(t,e,i),Wi=s):fa(t,e,i);break;default:fa(t,e,i)}}function FS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new mL),e.forEach(function(s){var r=EL.bind(null,t,s);i.has(s)||(i.add(s),s.then(r,r))})}}function mr(t,e){var i=e.deletions;if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];try{var n=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Mi=o.stateNode,Cr=!1;break e;case 3:Mi=o.stateNode.containerInfo,Cr=!0;break e;case 4:Mi=o.stateNode.containerInfo,Cr=!0;break e}o=o.return}if(Mi===null)throw Error(J(160));r5(n,a,r),Mi=null,Cr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Vt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)n5(e,t),e=e.sibling}function n5(t,e){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mr(e,t),Kr(t),s&4){try{Zu(3,t,t.return),Wf(3,t)}catch(_){Vt(t,t.return,_)}try{Zu(5,t,t.return)}catch(_){Vt(t,t.return,_)}}break;case 1:mr(e,t),Kr(t),s&512&&i!==null&&Wd(i,i.return);break;case 5:if(mr(e,t),Kr(t),s&512&&i!==null&&Wd(i,i.return),t.flags&32){var r=t.stateNode;try{mp(r,"")}catch(_){Vt(t,t.return,_)}}if(s&4&&(r=t.stateNode,r!=null)){var n=t.memoizedProps,a=i!==null?i.memoizedProps:n,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&n.type==="radio"&&n.name!=null&&TC(r,n),J0(o,a);var u=J0(o,n);for(a=0;a<c.length;a+=2){var l=c[a],h=c[a+1];l==="style"?AC(r,h):l==="dangerouslySetInnerHTML"?RC(r,h):l==="children"?mp(r,h):nw(r,l,h,u)}switch(o){case"input":B0(r,n);break;case"textarea":CC(r,n);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!n.multiple;var m=n.value;m!=null?Kd(r,!!n.multiple,m,!1):g!==!!n.multiple&&(n.defaultValue!=null?Kd(r,!!n.multiple,n.defaultValue,!0):Kd(r,!!n.multiple,n.multiple?[]:"",!1))}r[xp]=n}catch(_){Vt(t,t.return,_)}}break;case 6:if(mr(e,t),Kr(t),s&4){if(t.stateNode===null)throw Error(J(162));r=t.stateNode,n=t.memoizedProps;try{r.nodeValue=n}catch(_){Vt(t,t.return,_)}}break;case 3:if(mr(e,t),Kr(t),s&4&&i!==null&&i.memoizedState.isDehydrated)try{bp(e.containerInfo)}catch(_){Vt(t,t.return,_)}break;case 4:mr(e,t),Kr(t);break;case 13:mr(e,t),Kr(t),r=t.child,r.flags&8192&&(n=r.memoizedState!==null,r.stateNode.isHidden=n,!n||r.alternate!==null&&r.alternate.memoizedState!==null||($w=Kt())),s&4&&FS(t);break;case 22:if(l=i!==null&&i.memoizedState!==null,t.mode&1?(Wi=(u=Wi)||l,mr(e,t),Wi=u):mr(e,t),Kr(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&(t.mode&1)!==0)for(X=t,l=t.child;l!==null;){for(h=X=l;X!==null;){switch(g=X,m=g.child,g.tag){case 0:case 11:case 14:case 15:Zu(4,g,g.return);break;case 1:Wd(g,g.return);var f=g.stateNode;if(typeof f.componentWillUnmount=="function"){s=g,i=g.return;try{e=s,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(_){Vt(s,i,_)}}break;case 5:Wd(g,g.return);break;case 22:if(g.memoizedState!==null){BS(h);continue}}m!==null?(m.return=g,X=m):BS(h)}l=l.sibling}e:for(l=null,h=t;;){if(h.tag===5){if(l===null){l=h;try{r=h.stateNode,u?(n=r.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=IC("display",a))}catch(_){Vt(t,t.return,_)}}}else if(h.tag===6){if(l===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){Vt(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;l===h&&(l=null),h=h.return}l===h&&(l=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mr(e,t),Kr(t),s&4&&FS(t);break;case 21:break;default:mr(e,t),Kr(t)}}function Kr(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(s5(i)){var s=i;break e}i=i.return}throw Error(J(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(mp(r,""),s.flags&=-33);var n=zS(t);xb(t,n,r);break;case 3:case 4:var a=s.stateNode.containerInfo,o=zS(t);Sb(t,o,a);break;default:throw Error(J(161))}}catch(c){Vt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vL(t,e,i){X=t,a5(t)}function a5(t,e,i){for(var s=(t.mode&1)!==0;X!==null;){var r=X,n=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||Fh;if(!a){var o=r.alternate,c=o!==null&&o.memoizedState!==null||Wi;o=Fh;var u=Wi;if(Fh=a,(Wi=c)&&!u)for(X=r;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?HS(r):c!==null?(c.return=a,X=c):HS(r);for(;n!==null;)X=n,a5(n),n=n.sibling;X=r,Fh=o,Wi=u}VS(t)}else(r.subtreeFlags&8772)!==0&&n!==null?(n.return=r,X=n):VS(t)}}function VS(t){for(;X!==null;){var e=X;if((e.flags&8772)!==0){var i=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Wi||Wf(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Wi)if(i===null)s.componentDidMount();else{var r=e.elementType===e.type?i.memoizedProps:Tr(e.type,i.memoizedProps);s.componentDidUpdate(r,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var n=e.updateQueue;n!==null&&ES(e,n,s);break;case 3:var a=e.updateQueue;if(a!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}ES(e,a,i)}break;case 5:var o=e.stateNode;if(i===null&&e.flags&4){i=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var h=l.dehydrated;h!==null&&bp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Wi||e.flags&512&&kb(e)}catch(g){Vt(e,e.return,g)}}if(e===t){X=null;break}if(i=e.sibling,i!==null){i.return=e.return,X=i;break}X=e.return}}function BS(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var i=e.sibling;if(i!==null){i.return=e.return,X=i;break}X=e.return}}function HS(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{Wf(4,e)}catch(c){Vt(e,i,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Vt(e,r,c)}}var n=e.return;try{kb(e)}catch(c){Vt(e,n,c)}break;case 5:var a=e.return;try{kb(e)}catch(c){Vt(e,a,c)}}}catch(c){Vt(e,e.return,c)}if(e===t){X=null;break}var o=e.sibling;if(o!==null){o.return=e.return,X=o;break}X=e.return}}var yL=Math.ceil,jm=da.ReactCurrentDispatcher,Nw=da.ReactCurrentOwner,ar=da.ReactCurrentBatchConfig,He=0,Pi=null,ai=null,Ni=0,Ls=0,qd=bo(0),wi=0,Ip=null,Pc=0,qf=0,Uw=0,Xu=null,gs=null,$w=0,vl=1/0,Nn=null,zm=!1,Eb=null,ao=null,Vh=!1,Za=null,Fm=0,ep=0,Tb=null,Ig=-1,Ag=0;function ss(){return(He&6)!==0?Kt():Ig!==-1?Ig:Ig=Kt()}function oo(t){return(t.mode&1)===0?1:(He&2)!==0&&Ni!==0?Ni&-Ni:tL.transition!==null?(Ag===0&&(Ag=BC()),Ag):(t=et,t!==0||(t=window.event,t=t===void 0?16:QC(t.type)),t)}function jr(t,e,i,s){if(50<ep)throw ep=0,Tb=null,Error(J(185));Yp(t,i,s),((He&2)===0||t!==Pi)&&(t===Pi&&((He&2)===0&&(qf|=i),wi===4&&Wa(t,Ni)),bs(t,s),i===1&&He===0&&(e.mode&1)===0&&(vl=Kt()+500,Vf&&wo()))}function bs(t,e){var i=t.callbackNode;tO(t,e);var s=xm(t,t===Pi?Ni:0);if(s===0)i!==null&&Xk(i),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(i!=null&&Xk(i),e===1)t.tag===0?eL(WS.bind(null,t)):mP(WS.bind(null,t)),QO(function(){(He&6)===0&&wo()}),i=null;else{switch(HC(s)){case 1:i=lw;break;case 4:i=FC;break;case 16:i=Sm;break;case 536870912:i=VC;break;default:i=Sm}i=g5(i,o5.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function o5(t,e){if(Ig=-1,Ag=0,(He&6)!==0)throw Error(J(327));var i=t.callbackNode;if(el()&&t.callbackNode!==i)return null;var s=xm(t,t===Pi?Ni:0);if(s===0)return null;if((s&30)!==0||(s&t.expiredLanes)!==0||e)e=Vm(t,s);else{e=s;var r=He;He|=2;var n=d5();(Pi!==t||Ni!==e)&&(Nn=null,vl=Kt()+500,wc(t,e));do try{_L();break}catch(o){c5(t,o)}while(1);Sw(),jm.current=n,He=r,ai!==null?e=0:(Pi=null,Ni=0,e=wi)}if(e!==0){if(e===2&&(r=X0(t),r!==0&&(s=r,e=Cb(t,r))),e===1)throw i=Ip,wc(t,0),Wa(t,s),bs(t,Kt()),i;if(e===6)Wa(t,s);else{if(r=t.current.alternate,(s&30)===0&&!bL(r)&&(e=Vm(t,s),e===2&&(n=X0(t),n!==0&&(s=n,e=Cb(t,n))),e===1))throw i=Ip,wc(t,0),Wa(t,s),bs(t,Kt()),i;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(J(345));case 2:Vo(t,gs,Nn);break;case 3:if(Wa(t,s),(s&130023424)===s&&(e=$w+500-Kt(),10<e)){if(xm(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){ss(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ob(Vo.bind(null,t,gs,Nn),e);break}Vo(t,gs,Nn);break;case 4:if(Wa(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var a=31-$r(s);n=1<<a,a=e[a],a>r&&(r=a),s&=~n}if(s=r,s=Kt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*yL(s/1960))-s,10<s){t.timeoutHandle=ob(Vo.bind(null,t,gs,Nn),s);break}Vo(t,gs,Nn);break;case 5:Vo(t,gs,Nn);break;default:throw Error(J(329))}}}return bs(t,Kt()),t.callbackNode===i?o5.bind(null,t):null}function Cb(t,e){var i=Xu;return t.current.memoizedState.isDehydrated&&(wc(t,e).flags|=256),t=Vm(t,e),t!==2&&(e=gs,gs=i,e!==null&&Pb(e)),t}function Pb(t){gs===null?gs=t:gs.push.apply(gs,t)}function bL(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var r=i[s],n=r.getSnapshot;r=r.value;try{if(!Vr(n(),r))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wa(t,e){for(e&=~Uw,e&=~qf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-$r(e),s=1<<i;t[i]=-1,e&=~s}}function WS(t){if((He&6)!==0)throw Error(J(327));el();var e=xm(t,0);if((e&1)===0)return bs(t,Kt()),null;var i=Vm(t,e);if(t.tag!==0&&i===2){var s=X0(t);s!==0&&(e=s,i=Cb(t,s))}if(i===1)throw i=Ip,wc(t,0),Wa(t,e),bs(t,Kt()),i;if(i===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vo(t,gs,Nn),bs(t,Kt()),null}function jw(t,e){var i=He;He|=1;try{return t(e)}finally{He=i,He===0&&(vl=Kt()+500,Vf&&wo())}}function Rc(t){Za!==null&&Za.tag===0&&(He&6)===0&&el();var e=He;He|=1;var i=ar.transition,s=et;try{if(ar.transition=null,et=1,t)return t()}finally{et=s,ar.transition=i,He=e,(He&6)===0&&wo()}}function zw(){Ls=qd.current,bt(qd)}function wc(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,KO(i)),ai!==null)for(i=ai.return;i!==null;){var s=i;switch(ww(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Rm();break;case 3:ml(),bt(vs),bt(Gi),Rw();break;case 5:Pw(s);break;case 4:ml();break;case 13:bt(At);break;case 19:bt(At);break;case 10:xw(s.type._context);break;case 22:case 23:zw()}i=i.return}if(Pi=t,ai=t=co(t.current,null),Ni=Ls=e,wi=0,Ip=null,Uw=qf=Pc=0,gs=Xu=null,gc!==null){for(e=0;e<gc.length;e++)if(i=gc[e],s=i.interleaved,s!==null){i.interleaved=null;var r=s.next,n=i.pending;if(n!==null){var a=n.next;n.next=r,s.next=a}i.pending=s}gc=null}return t}function c5(t,e){do{var i=ai;try{if(Sw(),Cg.current=$m,Um){for(var s=Mt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Um=!1}if(Cc=0,Ti=yi=Mt=null,Yu=!1,Cp=0,Nw.current=null,i===null||i.return===null){wi=1,Ip=e,ai=null;break}e:{var n=t,a=i.return,o=i,c=e;if(e=Ni,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,h=l.tag;if((l.mode&1)===0&&(h===0||h===11||h===15)){var g=l.alternate;g?(l.updateQueue=g.updateQueue,l.memoizedState=g.memoizedState,l.lanes=g.lanes):(l.updateQueue=null,l.memoizedState=null)}var m=DS(a);if(m!==null){m.flags&=-257,MS(m,a,o,n,e),m.mode&1&&AS(n,u,e),e=m,c=u;var f=e.updateQueue;if(f===null){var _=new Set;_.add(c),e.updateQueue=_}else f.add(c);break e}else{if((e&1)===0){AS(n,u,e),Fw();break e}c=Error(J(426))}}else if(St&&o.mode&1){var k=DS(a);if(k!==null){(k.flags&65536)===0&&(k.flags|=256),MS(k,a,o,n,e),_w(fl(c,o));break e}}n=c=fl(c,o),wi!==4&&(wi=2),Xu===null?Xu=[n]:Xu.push(n),n=a;do{switch(n.tag){case 3:n.flags|=65536,e&=-e,n.lanes|=e;var y=WP(n,c,e);xS(n,y);break e;case 1:o=c;var b=n.type,x=n.stateNode;if((n.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ao===null||!ao.has(x)))){n.flags|=65536,e&=-e,n.lanes|=e;var C=qP(n,o,e);xS(n,C);break e}}n=n.return}while(n!==null)}u5(i)}catch(D){e=D,ai===i&&i!==null&&(ai=i=i.return);continue}break}while(1)}function d5(){var t=jm.current;return jm.current=$m,t===null?$m:t}function Fw(){(wi===0||wi===3||wi===2)&&(wi=4),Pi===null||(Pc&268435455)===0&&(qf&268435455)===0||Wa(Pi,Ni)}function Vm(t,e){var i=He;He|=2;var s=d5();(Pi!==t||Ni!==e)&&(Nn=null,wc(t,e));do try{wL();break}catch(r){c5(t,r)}while(1);if(Sw(),He=i,jm.current=s,ai!==null)throw Error(J(261));return Pi=null,Ni=0,wi}function wL(){for(;ai!==null;)l5(ai)}function _L(){for(;ai!==null&&!qM();)l5(ai)}function l5(t){var e=h5(t.alternate,t,Ls);t.memoizedProps=t.pendingProps,e===null?u5(t):ai=e,Nw.current=null}function u5(t){var e=t;do{var i=e.alternate;if(t=e.return,(e.flags&32768)===0){if(i=hL(i,e,Ls),i!==null){ai=i;return}}else{if(i=gL(i,e),i!==null){i.flags&=32767,ai=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wi=6,ai=null;return}}if(e=e.sibling,e!==null){ai=e;return}ai=e=t}while(e!==null);wi===0&&(wi=5)}function Vo(t,e,i){var s=et,r=ar.transition;try{ar.transition=null,et=1,kL(t,e,i,s)}finally{ar.transition=r,et=s}return null}function kL(t,e,i,s){do el();while(Za!==null);if((He&6)!==0)throw Error(J(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var n=i.lanes|i.childLanes;if(iO(t,n),t===Pi&&(ai=Pi=null,Ni=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Vh||(Vh=!0,g5(Sm,function(){return el(),null})),n=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||n){n=ar.transition,ar.transition=null;var a=et;et=1;var o=He;He|=4,Nw.current=null,fL(t,i),n5(i,t),VO(nb),Em=!!rb,nb=rb=null,t.current=i,vL(i),GM(),He=o,et=a,ar.transition=n}else t.current=i;if(Vh&&(Vh=!1,Za=t,Fm=r),n=t.pendingLanes,n===0&&(ao=null),QM(i.stateNode),bs(t,Kt()),e!==null)for(s=t.onRecoverableError,i=0;i<e.length;i++)r=e[i],s(r.value,{componentStack:r.stack,digest:r.digest});if(zm)throw zm=!1,t=Eb,Eb=null,t;return(Fm&1)!==0&&t.tag!==0&&el(),n=t.pendingLanes,(n&1)!==0?t===Tb?ep++:(ep=0,Tb=t):ep=0,wo(),null}function el(){if(Za!==null){var t=HC(Fm),e=ar.transition,i=et;try{if(ar.transition=null,et=16>t?16:t,Za===null)var s=!1;else{if(t=Za,Za=null,Fm=0,(He&6)!==0)throw Error(J(331));var r=He;for(He|=4,X=t.current;X!==null;){var n=X,a=n.child;if((X.flags&16)!==0){var o=n.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(X=u;X!==null;){var l=X;switch(l.tag){case 0:case 11:case 15:Zu(8,l,n)}var h=l.child;if(h!==null)h.return=l,X=h;else for(;X!==null;){l=X;var g=l.sibling,m=l.return;if(i5(l),l===u){X=null;break}if(g!==null){g.return=m,X=g;break}X=m}}}var f=n.alternate;if(f!==null){var _=f.child;if(_!==null){f.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}X=n}}if((n.subtreeFlags&2064)!==0&&a!==null)a.return=n,X=a;else e:for(;X!==null;){if(n=X,(n.flags&2048)!==0)switch(n.tag){case 0:case 11:case 15:Zu(9,n,n.return)}var y=n.sibling;if(y!==null){y.return=n.return,X=y;break e}X=n.return}}var b=t.current;for(X=b;X!==null;){a=X;var x=a.child;if((a.subtreeFlags&2064)!==0&&x!==null)x.return=a,X=x;else e:for(a=b;X!==null;){if(o=X,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:Wf(9,o)}}catch(D){Vt(o,o.return,D)}if(o===a){X=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,X=C;break e}X=o.return}}if(He=r,wo(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Uf,t)}catch{}s=!0}return s}finally{et=i,ar.transition=e}}return!1}function qS(t,e,i){e=fl(i,e),e=WP(t,e,1),t=no(t,e,1),e=ss(),t!==null&&(Yp(t,1,e),bs(t,e))}function Vt(t,e,i){if(t.tag===3)qS(t,t,i);else for(;e!==null;){if(e.tag===3){qS(e,t,i);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ao===null||!ao.has(s))){t=fl(i,t),t=qP(e,t,1),e=no(e,t,1),t=ss(),e!==null&&(Yp(e,1,t),bs(e,t));break}}e=e.return}}function SL(t,e,i){var s=t.pingCache;s!==null&&s.delete(e),e=ss(),t.pingedLanes|=t.suspendedLanes&i,Pi===t&&(Ni&i)===i&&(wi===4||wi===3&&(Ni&130023424)===Ni&&500>Kt()-$w?wc(t,0):Uw|=i),bs(t,e)}function p5(t,e){e===0&&((t.mode&1)===0?e=1:(e=Dh,Dh<<=1,(Dh&130023424)===0&&(Dh=4194304)));var i=ss();t=ia(t,e),t!==null&&(Yp(t,e,i),bs(t,i))}function xL(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),p5(t,i)}function EL(t,e){var i=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(J(314))}s!==null&&s.delete(e),p5(t,i)}var h5;h5=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||vs.current)ms=!0;else{if((t.lanes&i)===0&&(e.flags&128)===0)return ms=!1,pL(t,e,i);ms=(t.flags&131072)!==0}else ms=!1,St&&(e.flags&1048576)!==0&&fP(e,Dm,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Rg(t,e),t=e.pendingProps;var r=pl(e,Gi.current);Xd(e,i),r=Aw(null,e,s,t,r,i);var n=Dw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ys(s)?(n=!0,Im(e)):n=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Tw(e),r.updater=Bf,e.stateNode=r,r._reactInternals=e,gb(e,s,t,i),e=vb(null,e,s,!0,n,i)):(e.tag=0,St&&n&&bw(e),es(null,e,r,i),e=e.child),e;case 16:s=e.elementType;e:{switch(Rg(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=CL(s),t=Tr(s,t),r){case 0:e=fb(null,e,s,t,i);break e;case 1:e=NS(null,e,s,t,i);break e;case 11:e=OS(null,e,s,t,i);break e;case 14:e=LS(null,e,s,Tr(s.type,t),i);break e}throw Error(J(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Tr(s,r),fb(t,e,s,r,i);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Tr(s,r),NS(t,e,s,r,i);case 3:e:{if(QP(e),t===null)throw Error(J(387));s=e.pendingProps,n=e.memoizedState,r=n.element,wP(t,e),Lm(e,s,null,i);var a=e.memoizedState;if(s=a.element,n.isDehydrated)if(n={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=n,e.memoizedState=n,e.flags&256){r=fl(Error(J(423)),e),e=US(t,e,s,i,r);break e}else if(s!==r){r=fl(Error(J(424)),e),e=US(t,e,s,i,r);break e}else for(js=ro(e.stateNode.containerInfo.firstChild),Vs=e,St=!0,Rr=null,i=xP(e,null,s,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(hl(),s===r){e=sa(t,e,i);break e}es(t,e,s,i)}e=e.child}return e;case 5:return EP(e),t===null&&ub(e),s=e.type,r=e.pendingProps,n=t!==null?t.memoizedProps:null,a=r.children,ab(s,r)?a=null:n!==null&&ab(s,n)&&(e.flags|=32),KP(t,e),es(t,e,a,i),e.child;case 6:return t===null&&ub(e),null;case 13:return YP(t,e,i);case 4:return Cw(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=gl(e,null,s,i):es(t,e,s,i),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Tr(s,r),OS(t,e,s,r,i);case 7:return es(t,e,e.pendingProps,i),e.child;case 8:return es(t,e,e.pendingProps.children,i),e.child;case 12:return es(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,n=e.memoizedProps,a=r.value,lt(Mm,s._currentValue),s._currentValue=a,n!==null)if(Vr(n.value,a)){if(n.children===r.children&&!vs.current){e=sa(t,e,i);break e}}else for(n=e.child,n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){a=n.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(n.tag===1){c=Zn(-1,i&-i),c.tag=2;var u=n.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}n.lanes|=i,c=n.alternate,c!==null&&(c.lanes|=i),pb(n.return,i,e),o.lanes|=i;break}c=c.next}}else if(n.tag===10)a=n.type===e.type?null:n.child;else if(n.tag===18){if(a=n.return,a===null)throw Error(J(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),pb(a,i,e),a=n.sibling}else a=n.child;if(a!==null)a.return=n;else for(a=n;a!==null;){if(a===e){a=null;break}if(n=a.sibling,n!==null){n.return=a.return,a=n;break}a=a.return}n=a}es(t,e,r.children,i),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Xd(e,i),r=dr(r),s=s(r),e.flags|=1,es(t,e,s,i),e.child;case 14:return s=e.type,r=Tr(s,e.pendingProps),r=Tr(s.type,r),LS(t,e,s,r,i);case 15:return GP(t,e,e.type,e.pendingProps,i);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Tr(s,r),Rg(t,e),e.tag=1,ys(s)?(t=!0,Im(e)):t=!1,Xd(e,i),kP(e,s,r),gb(e,s,r,i),vb(null,e,s,!0,t,i);case 19:return ZP(t,e,i);case 22:return JP(t,e,i)}throw Error(J(156,e.tag))};function g5(t,e){return zC(t,e)}function TL(t,e,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,i,s){return new TL(t,e,i,s)}function Vw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CL(t){if(typeof t=="function")return Vw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ow)return 11;if(t===cw)return 14}return 2}function co(t,e){var i=t.alternate;return i===null?(i=rr(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Dg(t,e,i,s,r,n){var a=2;if(s=t,typeof t=="function")Vw(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Nd:return _c(i.children,r,n,e);case aw:a=8,r|=8;break;case $0:return t=rr(12,i,e,r|2),t.elementType=$0,t.lanes=n,t;case j0:return t=rr(13,i,e,r),t.elementType=j0,t.lanes=n,t;case z0:return t=rr(19,i,e,r),t.elementType=z0,t.lanes=n,t;case SC:return Gf(i,r,n,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _C:a=10;break e;case kC:a=9;break e;case ow:a=11;break e;case cw:a=14;break e;case Va:a=16,s=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=rr(a,i,e,r),e.elementType=t,e.type=s,e.lanes=n,e}function _c(t,e,i,s){return t=rr(7,t,s,e),t.lanes=i,t}function Gf(t,e,i,s){return t=rr(22,t,s,e),t.elementType=SC,t.lanes=i,t.stateNode={isHidden:!1},t}function yy(t,e,i){return t=rr(6,t,null,e),t.lanes=i,t}function by(t,e,i){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PL(t,e,i,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xv(0),this.expirationTimes=Xv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xv(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bw(t,e,i,s,r,n,a,o,c){return t=new PL(t,e,i,o,c),e===1?(e=1,n===!0&&(e|=8)):e=0,n=rr(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tw(n),t}function RL(t,e,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ld,key:s==null?null:""+s,children:t,containerInfo:e,implementation:i}}function m5(t){if(!t)return ho;t=t._reactInternals;e:{if($c(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var i=t.type;if(ys(i))return gP(t,i,e)}return e}function f5(t,e,i,s,r,n,a,o,c){return t=Bw(i,s,!0,t,r,n,a,o,c),t.context=m5(null),i=t.current,s=ss(),r=oo(i),n=Zn(s,r),n.callback=e!=null?e:null,no(i,n,r),t.current.lanes=r,Yp(t,r,s),bs(t,s),t}function Jf(t,e,i,s){var r=e.current,n=ss(),a=oo(r);return i=m5(i),e.context===null?e.context=i:e.pendingContext=i,e=Zn(n,a),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=no(r,e,a),t!==null&&(jr(t,r,a,n),Tg(t,r,a)),a}function Bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function GS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function Hw(t,e){GS(t,e),(t=t.alternate)&&GS(t,e)}function IL(){return null}var v5=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ww(t){this._internalRoot=t}Kf.prototype.render=Ww.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Jf(t,e,null,null)};Kf.prototype.unmount=Ww.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rc(function(){Jf(null,t,null,null)}),e[ta]=null}};function Kf(t){this._internalRoot=t}Kf.prototype.unstable_scheduleHydration=function(t){if(t){var e=GC();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Ha.length&&e!==0&&e<Ha[i].priority;i++);Ha.splice(i,0,t),i===0&&KC(t)}};function qw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JS(){}function AL(t,e,i,s,r){if(r){if(typeof s=="function"){var n=s;s=function(){var u=Bm(a);n.call(u)}}var a=f5(e,s,t,0,null,!1,!1,"",JS);return t._reactRootContainer=a,t[ta]=a.current,kp(t.nodeType===8?t.parentNode:t),Rc(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var o=s;s=function(){var u=Bm(c);o.call(u)}}var c=Bw(t,0,!1,null,null,!1,!1,"",JS);return t._reactRootContainer=c,t[ta]=c.current,kp(t.nodeType===8?t.parentNode:t),Rc(function(){Jf(e,c,i,s)}),c}function Yf(t,e,i,s,r){var n=i._reactRootContainer;if(n){var a=n;if(typeof r=="function"){var o=r;r=function(){var c=Bm(a);o.call(c)}}Jf(e,a,t,r)}else a=AL(i,e,t,r,s);return Bm(a)}WC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Ru(e.pendingLanes);i!==0&&(uw(e,i|1),bs(e,Kt()),(He&6)===0&&(vl=Kt()+500,wo()))}break;case 13:Rc(function(){var s=ia(t,1);if(s!==null){var r=ss();jr(s,t,1,r)}}),Hw(t,1)}};pw=function(t){if(t.tag===13){var e=ia(t,134217728);if(e!==null){var i=ss();jr(e,t,134217728,i)}Hw(t,134217728)}};qC=function(t){if(t.tag===13){var e=oo(t),i=ia(t,e);if(i!==null){var s=ss();jr(i,t,e,s)}Hw(t,e)}};GC=function(){return et};JC=function(t,e){var i=et;try{return et=t,e()}finally{et=i}};Q0=function(t,e,i){switch(e){case"input":if(B0(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var s=i[e];if(s!==t&&s.form===t.form){var r=Ff(s);if(!r)throw Error(J(90));EC(s),B0(s,r)}}}break;case"textarea":CC(t,i);break;case"select":e=i.value,e!=null&&Kd(t,!!i.multiple,e,!1)}};OC=jw;LC=Rc;var DL={usingClientEntryPoint:!1,Events:[Xp,zd,Ff,DC,MC,jw]},Zl={findFiberByHostInstance:hc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ML={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$C(t),t===null?null:t.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||IL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{Uf=Bh.inject(ML),hn=Bh}catch{}}qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DL;qs.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qw(e))throw Error(J(200));return RL(t,e,null,i)};qs.createRoot=function(t,e){if(!qw(t))throw Error(J(299));var i=!1,s="",r=v5;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Bw(t,1,!1,null,null,i,!1,s,r),t[ta]=e.current,kp(t.nodeType===8?t.parentNode:t),new Ww(e)};qs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=$C(e),t=t===null?null:t.stateNode,t};qs.flushSync=function(t){return Rc(t)};qs.hydrate=function(t,e,i){if(!Qf(e))throw Error(J(200));return Yf(null,t,e,!0,i)};qs.hydrateRoot=function(t,e,i){if(!qw(t))throw Error(J(405));var s=i!=null&&i.hydratedSources||null,r=!1,n="",a=v5;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),e=f5(e,null,t,1,i!=null?i:null,r,!1,n,a),t[ta]=e.current,kp(t),s)for(t=0;t<s.length;t++)i=s[t],r=i._getVersion,r=r(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,r]:e.mutableSourceEagerHydrationData.push(i,r);return new Kf(e)};qs.render=function(t,e,i){if(!Qf(e))throw Error(J(200));return Yf(null,t,e,!1,i)};qs.unmountComponentAtNode=function(t){if(!Qf(t))throw Error(J(40));return t._reactRootContainer?(Rc(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[ta]=null})}),!0):!1};qs.unstable_batchedUpdates=jw;qs.unstable_renderSubtreeIntoContainer=function(t,e,i,s){if(!Qf(i))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Yf(t,e,i,!1,s)};qs.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}e(),t.exports=qs})(Nf);var KS=Nf.exports;N0.createRoot=KS.createRoot,N0.hydrateRoot=KS.hydrateRoot;var Hh,OL=new Uint8Array(16);function LL(){if(!Hh&&(Hh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Hh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hh(OL)}const NL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gw(t){return typeof t=="string"&&NL.test(t)}var Di=[];for(var wy=0;wy<256;++wy)Di.push((wy+256).toString(16).substr(1));function UL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Di[t[e+0]]+Di[t[e+1]]+Di[t[e+2]]+Di[t[e+3]]+"-"+Di[t[e+4]]+Di[t[e+5]]+"-"+Di[t[e+6]]+Di[t[e+7]]+"-"+Di[t[e+8]]+Di[t[e+9]]+"-"+Di[t[e+10]]+Di[t[e+11]]+Di[t[e+12]]+Di[t[e+13]]+Di[t[e+14]]+Di[t[e+15]]).toLowerCase();if(!Gw(i))throw TypeError("Stringified UUID is invalid");return i}function th(t,e,i){t=t||{};var s=t.random||(t.rng||LL)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){i=i||0;for(var r=0;r<16;++r)e[i+r]=s[r];return e}return UL(s)}var y5={exports:{}},Jw={exports:{}},b5=function(e,i){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(i,r)}},$L=b5,_o=Object.prototype.toString;function Kw(t){return Array.isArray(t)}function Rb(t){return typeof t>"u"}function jL(t){return t!==null&&!Rb(t)&&t.constructor!==null&&!Rb(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function w5(t){return _o.call(t)==="[object ArrayBuffer]"}function zL(t){return _o.call(t)==="[object FormData]"}function FL(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&w5(t.buffer),e}function VL(t){return typeof t=="string"}function BL(t){return typeof t=="number"}function _5(t){return t!==null&&typeof t=="object"}function Mg(t){if(_o.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function HL(t){return _o.call(t)==="[object Date]"}function WL(t){return _o.call(t)==="[object File]"}function qL(t){return _o.call(t)==="[object Blob]"}function k5(t){return _o.call(t)==="[object Function]"}function GL(t){return _5(t)&&k5(t.pipe)}function JL(t){return _o.call(t)==="[object URLSearchParams]"}function KL(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function QL(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Qw(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Kw(t))for(var i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Ib(){var t={};function e(r,n){Mg(t[n])&&Mg(r)?t[n]=Ib(t[n],r):Mg(r)?t[n]=Ib({},r):Kw(r)?t[n]=r.slice():t[n]=r}for(var i=0,s=arguments.length;i<s;i++)Qw(arguments[i],e);return t}function YL(t,e,i){return Qw(e,function(r,n){i&&typeof r=="function"?t[n]=$L(r,i):t[n]=r}),t}function ZL(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var _s={isArray:Kw,isArrayBuffer:w5,isBuffer:jL,isFormData:zL,isArrayBufferView:FL,isString:VL,isNumber:BL,isObject:_5,isPlainObject:Mg,isUndefined:Rb,isDate:HL,isFile:WL,isBlob:qL,isFunction:k5,isStream:GL,isURLSearchParams:JL,isStandardBrowserEnv:QL,forEach:Qw,merge:Ib,extend:YL,trim:KL,stripBOM:ZL},Yc=_s;function QS(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var S5=function(e,i,s){if(!i)return e;var r;if(s)r=s(i);else if(Yc.isURLSearchParams(i))r=i.toString();else{var n=[];Yc.forEach(i,function(c,u){c===null||typeof c>"u"||(Yc.isArray(c)?u=u+"[]":c=[c],Yc.forEach(c,function(h){Yc.isDate(h)?h=h.toISOString():Yc.isObject(h)&&(h=JSON.stringify(h)),n.push(QS(u)+"="+QS(h))}))}),r=n.join("&")}if(r){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},XL=_s;function Zf(){this.handlers=[]}Zf.prototype.use=function(e,i,s){return this.handlers.push({fulfilled:e,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};Zf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Zf.prototype.forEach=function(e){XL.forEach(this.handlers,function(s){s!==null&&e(s)})};var e7=Zf,t7=_s,i7=function(e,i){t7.forEach(e,function(r,n){n!==i&&n.toUpperCase()===i.toUpperCase()&&(e[i]=r,delete e[n])})},x5=function(e,i,s,r,n){return e.config=i,s&&(e.code=s),e.request=r,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},_y,YS;function E5(){if(YS)return _y;YS=1;var t=x5;return _y=function(i,s,r,n,a){var o=new Error(i);return t(o,s,r,n,a)},_y}var ky,ZS;function s7(){if(ZS)return ky;ZS=1;var t=E5();return ky=function(i,s,r){var n=r.config.validateStatus;!r.status||!n||n(r.status)?i(r):s(t("Request failed with status code "+r.status,r.config,null,r.request,r))},ky}var Sy,XS;function r7(){if(XS)return Sy;XS=1;var t=_s;return Sy=t.isStandardBrowserEnv()?function(){return{write:function(s,r,n,a,o,c){var u=[];u.push(s+"="+encodeURIComponent(r)),t.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),t.isString(a)&&u.push("path="+a),t.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(s){var r=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Sy}var xy,e2;function n7(){return e2||(e2=1,xy=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),xy}var Ey,t2;function a7(){return t2||(t2=1,Ey=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}),Ey}var Ty,i2;function o7(){if(i2)return Ty;i2=1;var t=n7(),e=a7();return Ty=function(s,r){return s&&!t(r)?e(s,r):r},Ty}var Cy,s2;function c7(){if(s2)return Cy;s2=1;var t=_s,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Cy=function(s){var r={},n,a,o;return s&&t.forEach(s.split(`
`),function(u){if(o=u.indexOf(":"),n=t.trim(u.substr(0,o)).toLowerCase(),a=t.trim(u.substr(o+1)),n){if(r[n]&&e.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([a]):r[n]=r[n]?r[n]+", "+a:a}}),r},Cy}var Py,r2;function d7(){if(r2)return Py;r2=1;var t=_s;return Py=t.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),r;function n(a){var o=a;return i&&(s.setAttribute("href",o),o=s.href),s.setAttribute("href",o),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return r=n(window.location.href),function(o){var c=t.isString(o)?n(o):o;return c.protocol===r.protocol&&c.host===r.host}}():function(){return function(){return!0}}(),Py}var Ry,n2;function Xf(){if(n2)return Ry;n2=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Ry=t,Ry}var Iy,a2;function o2(){if(a2)return Iy;a2=1;var t=_s,e=s7(),i=r7(),s=S5,r=o7(),n=c7(),a=d7(),o=E5(),c=ev(),u=Xf();return Iy=function(h){return new Promise(function(m,f){var _=h.data,k=h.headers,y=h.responseType,b;function x(){h.cancelToken&&h.cancelToken.unsubscribe(b),h.signal&&h.signal.removeEventListener("abort",b)}t.isFormData(_)&&delete k["Content-Type"];var C=new XMLHttpRequest;if(h.auth){var D=h.auth.username||"",M=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";k.Authorization="Basic "+btoa(D+":"+M)}var L=r(h.baseURL,h.url);C.open(h.method.toUpperCase(),s(L,h.params,h.paramsSerializer),!0),C.timeout=h.timeout;function V(){if(!!C){var Q="getAllResponseHeaders"in C?n(C.getAllResponseHeaders()):null,te=!y||y==="text"||y==="json"?C.responseText:C.response,Ae={data:te,status:C.status,statusText:C.statusText,headers:Q,config:h,request:C};e(function(Xe){m(Xe),x()},function(Xe){f(Xe),x()},Ae),C=null}}if("onloadend"in C?C.onloadend=V:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(V)},C.onabort=function(){!C||(f(o("Request aborted",h,"ECONNABORTED",C)),C=null)},C.onerror=function(){f(o("Network Error",h,null,C)),C=null},C.ontimeout=function(){var te=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",Ae=h.transitional||c.transitional;h.timeoutErrorMessage&&(te=h.timeoutErrorMessage),f(o(te,h,Ae.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var se=(h.withCredentials||a(L))&&h.xsrfCookieName?i.read(h.xsrfCookieName):void 0;se&&(k[h.xsrfHeaderName]=se)}"setRequestHeader"in C&&t.forEach(k,function(te,Ae){typeof _>"u"&&Ae.toLowerCase()==="content-type"?delete k[Ae]:C.setRequestHeader(Ae,te)}),t.isUndefined(h.withCredentials)||(C.withCredentials=!!h.withCredentials),y&&y!=="json"&&(C.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&C.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(b=function(Q){!C||(f(!Q||Q&&Q.type?new u("canceled"):Q),C.abort(),C=null)},h.cancelToken&&h.cancelToken.subscribe(b),h.signal&&(h.signal.aborted?b():h.signal.addEventListener("abort",b))),_||(_=null),C.send(_)})},Iy}var Ay,c2;function ev(){if(c2)return Ay;c2=1;var t=_s,e=i7,i=x5,s={"Content-Type":"application/x-www-form-urlencoded"};function r(c,u){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=u)}function n(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=o2()),c}function a(c,u,l){if(t.isString(c))try{return(u||JSON.parse)(c),t.trim(c)}catch(h){if(h.name!=="SyntaxError")throw h}return(l||JSON.stringify)(c)}var o={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:n(),transformRequest:[function(u,l){return e(l,"Accept"),e(l,"Content-Type"),t.isFormData(u)||t.isArrayBuffer(u)||t.isBuffer(u)||t.isStream(u)||t.isFile(u)||t.isBlob(u)?u:t.isArrayBufferView(u)?u.buffer:t.isURLSearchParams(u)?(r(l,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):t.isObject(u)||l&&l["Content-Type"]==="application/json"?(r(l,"application/json"),a(u)):u}],transformResponse:[function(u){var l=this.transitional||o.transitional,h=l&&l.silentJSONParsing,g=l&&l.forcedJSONParsing,m=!h&&this.responseType==="json";if(m||g&&t.isString(u)&&u.length)try{return JSON.parse(u)}catch(f){if(m)throw f.name==="SyntaxError"?i(f,this,"E_JSON_PARSE"):f}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(u){o.headers[u]={}}),t.forEach(["post","put","patch"],function(u){o.headers[u]=t.merge(s)}),Ay=o,Ay}var l7=_s,u7=ev(),p7=function(e,i,s){var r=this||u7;return l7.forEach(s,function(a){e=a.call(r,e,i)}),e},Dy,d2;function T5(){return d2||(d2=1,Dy=function(e){return!!(e&&e.__CANCEL__)}),Dy}var l2=_s,My=p7,h7=T5(),g7=ev(),m7=Xf();function Oy(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new m7("canceled")}var f7=function(e){Oy(e),e.headers=e.headers||{},e.data=My.call(e,e.data,e.headers,e.transformRequest),e.headers=l2.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),l2.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var i=e.adapter||g7.adapter;return i(e).then(function(r){return Oy(e),r.data=My.call(e,r.data,r.headers,e.transformResponse),r},function(r){return h7(r)||(Oy(e),r&&r.response&&(r.response.data=My.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},Cs=_s,C5=function(e,i){i=i||{};var s={};function r(l,h){return Cs.isPlainObject(l)&&Cs.isPlainObject(h)?Cs.merge(l,h):Cs.isPlainObject(h)?Cs.merge({},h):Cs.isArray(h)?h.slice():h}function n(l){if(Cs.isUndefined(i[l])){if(!Cs.isUndefined(e[l]))return r(void 0,e[l])}else return r(e[l],i[l])}function a(l){if(!Cs.isUndefined(i[l]))return r(void 0,i[l])}function o(l){if(Cs.isUndefined(i[l])){if(!Cs.isUndefined(e[l]))return r(void 0,e[l])}else return r(void 0,i[l])}function c(l){if(l in i)return r(e[l],i[l]);if(l in e)return r(void 0,e[l])}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return Cs.forEach(Object.keys(e).concat(Object.keys(i)),function(h){var g=u[h]||n,m=g(h);Cs.isUndefined(m)&&g!==c||(s[h]=m)}),s},Ly,u2;function P5(){return u2||(u2=1,Ly={version:"0.25.0"}),Ly}var v7=P5().version,Yw={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Yw[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});var p2={};Yw.transitional=function(e,i,s){function r(n,a){return"[Axios v"+v7+"] Transitional option '"+n+"'"+a+(s?". "+s:"")}return function(n,a,o){if(e===!1)throw new Error(r(a," has been removed"+(i?" in "+i:"")));return i&&!p2[a]&&(p2[a]=!0,console.warn(r(a," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(n,a,o):!0}};function y7(t,e,i){if(typeof t!="object")throw new TypeError("options must be an object");for(var s=Object.keys(t),r=s.length;r-- >0;){var n=s[r],a=e[n];if(a){var o=t[n],c=o===void 0||a(o,n,t);if(c!==!0)throw new TypeError("option "+n+" must be "+c);continue}if(i!==!0)throw Error("Unknown option "+n)}}var b7={assertOptions:y7,validators:Yw},R5=_s,w7=S5,h2=e7,g2=f7,tv=C5,I5=b7,Zc=I5.validators;function ih(t){this.defaults=t,this.interceptors={request:new h2,response:new h2}}ih.prototype.request=function(e,i){if(typeof e=="string"?(i=i||{},i.url=e):i=e||{},!i.url)throw new Error("Provided config url is not valid");i=tv(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var s=i.transitional;s!==void 0&&I5.assertOptions(s,{silentJSONParsing:Zc.transitional(Zc.boolean),forcedJSONParsing:Zc.transitional(Zc.boolean),clarifyTimeoutError:Zc.transitional(Zc.boolean)},!1);var r=[],n=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(n=n&&m.synchronous,r.unshift(m.fulfilled,m.rejected))});var a=[];this.interceptors.response.forEach(function(m){a.push(m.fulfilled,m.rejected)});var o;if(!n){var c=[g2,void 0];for(Array.prototype.unshift.apply(c,r),c=c.concat(a),o=Promise.resolve(i);c.length;)o=o.then(c.shift(),c.shift());return o}for(var u=i;r.length;){var l=r.shift(),h=r.shift();try{u=l(u)}catch(g){h(g);break}}try{o=g2(u)}catch(g){return Promise.reject(g)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};ih.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=tv(this.defaults,e),w7(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};R5.forEach(["delete","get","head","options"],function(e){ih.prototype[e]=function(i,s){return this.request(tv(s||{},{method:e,url:i,data:(s||{}).data}))}});R5.forEach(["post","put","patch"],function(e){ih.prototype[e]=function(i,s,r){return this.request(tv(r||{},{method:e,url:i,data:s}))}});var _7=ih,Ny,m2;function k7(){if(m2)return Ny;m2=1;var t=Xf();function e(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(a){s=a});var r=this;this.promise.then(function(n){if(!!r._listeners){var a,o=r._listeners.length;for(a=0;a<o;a++)r._listeners[a](n);r._listeners=null}}),this.promise.then=function(n){var a,o=new Promise(function(c){r.subscribe(c),a=c}).then(n);return o.cancel=function(){r.unsubscribe(a)},o},i(function(a){r.reason||(r.reason=new t(a),s(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]},e.prototype.unsubscribe=function(s){if(!!this._listeners){var r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var s,r=new e(function(a){s=a});return{token:r,cancel:s}},Ny=e,Ny}var Uy,f2;function S7(){return f2||(f2=1,Uy=function(e){return function(s){return e.apply(null,s)}}),Uy}var $y,v2;function x7(){if(v2)return $y;v2=1;var t=_s;return $y=function(i){return t.isObject(i)&&i.isAxiosError===!0},$y}var y2=_s,E7=b5,Og=_7,T7=C5,C7=ev();function A5(t){var e=new Og(t),i=E7(Og.prototype.request,e);return y2.extend(i,Og.prototype,e),y2.extend(i,e),i.create=function(r){return A5(T7(t,r))},i}var kn=A5(C7);kn.Axios=Og;kn.Cancel=Xf();kn.CancelToken=k7();kn.isCancel=T5();kn.VERSION=P5().version;kn.all=function(e){return Promise.all(e)};kn.spread=S7();kn.isAxiosError=x7();Jw.exports=kn;Jw.exports.default=kn;(function(t){t.exports=Jw.exports})(y5);const Hm=dC(y5.exports),P7={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},D5={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Wt={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Yi={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Pa={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class H{static getFirstMatch(e,i){const s=i.match(e);return s&&s.length>0&&s[1]||""}static getSecondMatch(e,i){const s=i.match(e);return s&&s.length>1&&s[2]||""}static matchAndReturnConst(e,i,s){if(e.test(i))return s}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const i=e.split(".").splice(0,2).map(s=>parseInt(s,10)||0);if(i.push(0),i[0]===10)switch(i[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const i=e.split(".").splice(0,2).map(s=>parseInt(s,10)||0);if(i.push(0),!(i[0]===1&&i[1]<5)){if(i[0]===1&&i[1]<6)return"Cupcake";if(i[0]===1&&i[1]>=6)return"Donut";if(i[0]===2&&i[1]<2)return"Eclair";if(i[0]===2&&i[1]===2)return"Froyo";if(i[0]===2&&i[1]>2)return"Gingerbread";if(i[0]===3)return"Honeycomb";if(i[0]===4&&i[1]<1)return"Ice Cream Sandwich";if(i[0]===4&&i[1]<4)return"Jelly Bean";if(i[0]===4&&i[1]>=4)return"KitKat";if(i[0]===5)return"Lollipop";if(i[0]===6)return"Marshmallow";if(i[0]===7)return"Nougat";if(i[0]===8)return"Oreo";if(i[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,i,s=!1){const r=H.getVersionPrecision(e),n=H.getVersionPrecision(i);let a=Math.max(r,n),o=0;const c=H.map([e,i],u=>{const l=a-H.getVersionPrecision(u),h=u+new Array(l+1).join(".0");return H.map(h.split("."),g=>new Array(20-g.length).join("0")+g).reverse()});for(s&&(o=a-Math.min(r,n)),a-=1;a>=o;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===o)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}}static map(e,i){const s=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,i);for(r=0;r<e.length;r+=1)s.push(i(e[r]));return s}static find(e,i){let s,r;if(Array.prototype.find)return Array.prototype.find.call(e,i);for(s=0,r=e.length;s<r;s+=1){const n=e[s];if(i(n,s))return n}}static assign(e,...i){const s=e;let r,n;if(Object.assign)return Object.assign(e,...i);for(r=0,n=i.length;r<n;r+=1){const a=i[r];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{s[c]=a[c]})}return e}static getBrowserAlias(e){return P7[e]}static getBrowserTypeByAlias(e){return D5[e]||""}}const at=/version\/(\d+(\.?_?\d+)+)/i,R7=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},i=H.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},i=H.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},i=H.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},i=H.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},i=H.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},i=H.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},i=H.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},i=H.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=H.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},i=H.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},i=H.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},i=H.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},i=H.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},i=H.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},i=H.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},i=H.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},i=H.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},i=H.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},i=H.getFirstMatch(at,t)||H.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},i=H.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},i=H.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},i=H.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},i=H.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},i=H.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},i=H.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},i=H.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},i=H.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},i=H.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e={name:"Android Browser"},i=H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},i=H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},i=H.getFirstMatch(at,t);return i&&(e.version=i),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,i=/^(.*)\/(.*)[ \t]\((.*)/,r=t.search("\\(")!==-1?i:e;return{name:H.getFirstMatch(r,t),version:H.getSecondMatch(r,t)}}}],I7=[{test:[/Roku\/DVP/],describe(t){const e=H.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Yi.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=H.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Yi.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=H.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=H.getWindowsVersionName(e);return{name:Yi.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Yi.iOS},i=H.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe(t){const e=H.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=H.getMacOSVersionName(e),s={name:Yi.MacOS,version:e};return i&&(s.versionName=i),s}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=H.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Yi.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe(t){const e=H.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=H.getAndroidVersionName(e),s={name:Yi.Android,version:e};return i&&(s.versionName=i),s}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=H.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:Yi.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=H.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||H.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||H.getFirstMatch(/\bbb(\d+)/i,t);return{name:Yi.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=H.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Yi.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=H.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Yi.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Yi.Linux}}},{test:[/CrOS/],describe(){return{name:Yi.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=H.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Yi.PlayStation4,version:e}}}],A7=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=H.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:Wt.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Wt.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Wt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Wt.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Wt.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Wt.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Wt.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe(t){const e=H.getFirstMatch(/(ipod|iphone)/i,t);return{type:Wt.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Wt.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Wt.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:Wt.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:Wt.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:Wt.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:Wt.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:Wt.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:Wt.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:Wt.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:Wt.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:Wt.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:Wt.tv}}}],D7=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Pa.Blink};const i=H.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Pa.EdgeHTML,version:i}}},{test:[/trident/i],describe(t){const e={name:Pa.Trident},i=H.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Pa.Presto},i=H.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test(t){const e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe(t){const e={name:Pa.Gecko},i=H.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Pa.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Pa.WebKit},i=H.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];class b2{constructor(e,i=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},i!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=H.find(R7,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=H.find(I7,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:i}=this.getOS();return e?String(i).toLowerCase()||"":i||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:i}=this.getPlatform();return e?String(i).toLowerCase()||"":i||""}parsePlatform(){this.parsedResult.platform={};const e=H.find(A7,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=H.find(D7,i=>{if(typeof i.test=="function")return i.test(this);if(i.test instanceof Array)return i.test.some(s=>this.test(s));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return H.assign({},this.parsedResult)}satisfies(e){const i={};let s=0;const r={};let n=0;if(Object.keys(e).forEach(o=>{const c=e[o];typeof c=="string"?(r[o]=c,n+=1):typeof c=="object"&&(i[o]=c,s+=1)}),s>0){const o=Object.keys(i),c=H.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(i[c]);if(l!==void 0)return l}const u=H.find(o,l=>this.isPlatform(l));if(u){const l=this.satisfies(i[u]);if(l!==void 0)return l}}if(n>0){const o=Object.keys(r),c=H.find(o,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(r[c])}}isBrowser(e,i=!1){const s=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const n=H.getBrowserTypeByAlias(r);return i&&n&&(r=n.toLowerCase()),r===s}compareVersion(e){let i=[0],s=e,r=!1;const n=this.getBrowserVersion();if(typeof n=="string")return e[0]===">"||e[0]==="<"?(s=e.substr(1),e[1]==="="?(r=!0,s=e.substr(2)):i=[],e[0]===">"?i.push(1):i.push(-1)):e[0]==="="?s=e.substr(1):e[0]==="~"&&(r=!0,s=e.substr(1)),i.indexOf(H.compareVersions(n,s,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,i=!1){return this.isBrowser(e,i)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(i=>this.is(i))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Zw{static getParser(e,i=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new b2(e,i)}static parse(e){return new b2(e).getResult()}static get BROWSER_MAP(){return D5}static get ENGINE_MAP(){return Pa}static get OS_MAP(){return Yi}static get PLATFORMS_MAP(){return Wt}}var M5={},Xw={exports:{}},w2=Xw.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(w2).forEach(function(t){var e=w2[t];e.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})});(function(t){var e=function(o){return String(Number(o))===o?Number(o):o},i=function(o,c,u,l){if(l&&!u)c[l]=e(o[1]);else for(var h=0;h<u.length;h+=1)o[h+1]!=null&&(c[u[h]]=e(o[h+1]))},s=function(o,c,u){var l=o.name&&o.names;o.push&&!c[o.push]?c[o.push]=[]:l&&!c[o.name]&&(c[o.name]={});var h=o.push?{}:l?c[o.name]:c;i(u.match(o.reg),h,o.names,o.name),o.push&&c[o.push].push(h)},r=Xw.exports,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(o){var c={},u=[],l=c;return o.split(/(\r\n|\r|\n)/).filter(n).forEach(function(h){var g=h[0],m=h.slice(2);g==="m"&&(u.push({rtp:[],fmtp:[]}),l=u[u.length-1]);for(var f=0;f<(r[g]||[]).length;f+=1){var _=r[g][f];if(_.reg.test(m))return s(_,l,m)}}),c.media=u,c};var a=function(o,c){var u=c.split(/=(.+)/,2);return u.length===2?o[u[0]]=e(u[1]):u.length===1&&c.length>1&&(o[u[0]]=void 0),o};t.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(o){return o.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(o){for(var c=[],u=o.split(" ").map(e),l=0;l<u.length;l+=3)c.push({component:u[l],ip:u[l+1],port:u[l+2]});return c},t.parseImageAttributes=function(o){return o.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(o){return o.split(";").map(function(c){return c.split(",").map(function(u){var l,h=!1;return u[0]!=="~"?l=e(u):(l=e(u.substring(1,u.length)),h=!0),{scid:l,paused:h}})})}})(M5);var jy=Xw.exports,M7=/%[sdv%]/g,O7=function(t){var e=1,i=arguments,s=i.length;return t.replace(M7,function(r){if(e>=s)return r;var n=i[e];switch(e+=1,r){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}})},Xl=function(t,e,i){var s=e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format,r=[t+"="+s];if(e.names)for(var n=0;n<e.names.length;n+=1){var a=e.names[n];e.name?r.push(i[e.name][a]):r.push(i[e.names[n]])}else r.push(i[e.name]);return O7.apply(null,r)},L7=["v","o","s","i","u","e","p","c","b","t","r","z","a"],N7=["i","c","b","a"],U7=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(n){n.payloads==null&&(n.payloads="")});var i=e.outerOrder||L7,s=e.innerOrder||N7,r=[];return i.forEach(function(n){jy[n].forEach(function(a){a.name in t&&t[a.name]!=null?r.push(Xl(n,a,t)):a.push in t&&t[a.push]!=null&&t[a.push].forEach(function(o){r.push(Xl(n,a,o))})})}),t.media.forEach(function(n){r.push(Xl("m",jy.m[0],n)),s.forEach(function(a){jy[a].forEach(function(o){o.name in n&&n[o.name]!=null?r.push(Xl(a,o,n)):o.push in n&&n[o.push]!=null&&n[o.push].forEach(function(c){r.push(Xl(a,o,c))})})})}),r.join(`\r
`)+`\r
`},jc=M5,$7=U7,zr=$7,xe=jc.parse,O5=jc.parseParams;jc.parseFmtpConfig;jc.parsePayloads;jc.parseRemoteCandidates;jc.parseImageAttributes;var L5=jc.parseSimulcastStreamList;function e_(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function j7(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}let Bn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),iv=[];for(let t=0;t<Bn.length;t++)iv[Bn[t].charCodeAt(0)]=t;iv["-".charCodeAt(0)]=Bn.indexOf("+");iv["_".charCodeAt(0)]=Bn.indexOf("/");function z7(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let i=new Uint8Array(e),s=0,r=0,n,a=0;for(let o=0;o<t.length;o++){if(n=iv[t.charCodeAt(o)],n===void 0)switch(t[o]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:a=n,r=1;break;case 1:i[s++]=a<<2|(n&48)>>4,a=n,r=2;break;case 2:i[s++]=(a&15)<<4|(n&60)>>2,a=n,r=3;break;case 3:i[s++]=(a&3)<<6|n,r=0;break}}if(r==1)throw Error("invalid base64 string.");return i.subarray(0,s)}function F7(t){let e="",i=0,s,r=0;for(let n=0;n<t.length;n++)switch(s=t[n],i){case 0:e+=Bn[s>>2],r=(s&3)<<4,i=1;break;case 1:e+=Bn[r|s>>4],r=(s&15)<<2,i=2;break;case 2:e+=Bn[r|s>>6],e+=Bn[s&63],i=0;break}return i&&(e+=Bn[r],e+="=",i==1&&(e+="=")),e}var Wm;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(i,s,r,n,a)=>{(e(s)?s[t.symbol]:s[t.symbol]=[]).push({no:r,wireType:n,data:a})},t.onWrite=(i,s,r)=>{for(let{no:n,wireType:a,data:o}of t.list(s))r.tag(n,a).raw(o)},t.list=(i,s)=>{if(e(i)){let r=i[t.symbol];return s?r.filter(n=>n.no==s):r}return[]},t.last=(i,s)=>t.list(i,s).slice(-1)[0];const e=i=>i&&Array.isArray(i[t.symbol])})(Wm||(Wm={}));var qt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(qt||(qt={}));function V7(){let t=0,e=0;for(let s=0;s<28;s+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<s,(r&128)==0)return this.assertBounds(),[t,e]}let i=this.buf[this.pos++];if(t|=(i&15)<<28,e=(i&112)>>4,(i&128)==0)return this.assertBounds(),[t,e];for(let s=3;s<=31;s+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<s,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function zy(t,e,i){for(let n=0;n<28;n=n+7){const a=t>>>n,o=!(a>>>7==0&&e==0),c=(o?a|128:a)&255;if(i.push(c),!o)return}const s=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(i.push((r?s|128:s)&255),!!r){for(let n=3;n<31;n=n+7){const a=e>>>n,o=a>>>7!=0,c=(o?a|128:a)&255;if(i.push(c),!o)return}i.push(e>>>31&1)}}const Lg=(1<<16)*(1<<16);function N5(t){let e=t[0]=="-";e&&(t=t.slice(1));const i=1e6;let s=0,r=0;function n(a,o){const c=Number(t.slice(a,o));r*=i,s=s*i+c,s>=Lg&&(r=r+(s/Lg|0),s=s%Lg)}return n(-24,-18),n(-18,-12),n(-12,-6),n(-6),[e,s,r]}function Ab(t,e){if(e>>>0<=2097151)return""+(Lg*e+(t>>>0));let i=t&16777215,s=(t>>>24|e<<8)>>>0&16777215,r=e>>16&65535,n=i+s*6777216+r*6710656,a=s+r*8147497,o=r*2,c=1e7;n>=c&&(a+=Math.floor(n/c),n%=c),a>=c&&(o+=Math.floor(a/c),a%=c);function u(l,h){let g=l?String(l):"";return h?"0000000".slice(g.length)+g:g}return u(o,0)+u(a,o)+u(n,1)}function _2(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let i=0;i<9;i++)e.push(t&127|128),t=t>>7;e.push(1)}}function B7(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let i=5;(t&128)!==0&&i<10;i++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}let ot;function H7(){const t=new DataView(new ArrayBuffer(8));ot=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}H7();function U5(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const $5=/^-?[0-9]+$/,qm=4294967296,Wh=2147483648;class j5{constructor(e,i){this.lo=e|0,this.hi=i|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*qm+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class qi extends j5{static from(e){if(ot)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ot.C(e);case"number":if(e===0)return this.ZERO;e=ot.C(e);case"bigint":if(!e)return this.ZERO;if(e<ot.UMIN)throw new Error("signed value for ulong");if(e>ot.UMAX)throw new Error("ulong too large");return ot.V.setBigUint64(0,e,!0),new qi(ot.V.getInt32(0,!0),ot.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!$5.test(e))throw new Error("string is no integer");let[i,s,r]=N5(e);if(i)throw new Error("signed value for ulong");return new qi(s,r);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new qi(e,e/qm)}throw new Error("unknown value "+typeof e)}toString(){return ot?this.toBigInt().toString():Ab(this.lo,this.hi)}toBigInt(){return U5(ot),ot.V.setInt32(0,this.lo,!0),ot.V.setInt32(4,this.hi,!0),ot.V.getBigUint64(0,!0)}}qi.ZERO=new qi(0,0);class ut extends j5{static from(e){if(ot)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ot.C(e);case"number":if(e===0)return this.ZERO;e=ot.C(e);case"bigint":if(!e)return this.ZERO;if(e<ot.MIN)throw new Error("signed long too small");if(e>ot.MAX)throw new Error("signed long too large");return ot.V.setBigInt64(0,e,!0),new ut(ot.V.getInt32(0,!0),ot.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!$5.test(e))throw new Error("string is no integer");let[i,s,r]=N5(e);if(i){if(r>Wh||r==Wh&&s!=0)throw new Error("signed long too small")}else if(r>=Wh)throw new Error("signed long too large");let n=new ut(s,r);return i?n.negate():n;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new ut(e,e/qm):new ut(-e,-e/qm).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&Wh)!==0}negate(){let e=~this.hi,i=this.lo;return i?i=~i+1:e+=1,new ut(i,e)}toString(){if(ot)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Ab(e.lo,e.hi)}return Ab(this.lo,this.hi)}toBigInt(){return U5(ot),ot.V.setInt32(0,this.lo,!0),ot.V.setInt32(4,this.hi,!0),ot.V.getBigInt64(0,!0)}}ut.ZERO=new ut(0,0);const k2={readUnknownField:!0,readerFactory:t=>new q7(t)};function W7(t){return t?Object.assign(Object.assign({},k2),t):k2}class q7{constructor(e,i){this.varint64=V7,this.uint32=B7,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=i!=null?i:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),i=e>>>3,s=e&7;if(i<=0||s<0||s>5)throw new Error("illegal tag: field no "+i+" wire type "+s);return[i,s]}skip(e){let i=this.pos;switch(e){case qt.Varint:for(;this.buf[this.pos++]&128;);break;case qt.Bit64:this.pos+=4;case qt.Bit32:this.pos+=4;break;case qt.LengthDelimited:let s=this.uint32();this.pos+=s;break;case qt.StartGroup:let r;for(;(r=this.tag()[1])!==qt.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new ut(...this.varint64())}uint64(){return new qi(...this.varint64())}sint64(){let[e,i]=this.varint64(),s=-(e&1);return e=(e>>>1|(i&1)<<31)^s,i=i>>>1^s,new ut(e,i)}bool(){let[e,i]=this.varint64();return e!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new qi(this.sfixed32(),this.sfixed32())}sfixed64(){return new ut(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),i=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(i,i+e)}string(){return this.textDecoder.decode(this.bytes())}}function Je(t,e){if(!t)throw new Error(e)}const G7=34028234663852886e22,J7=-34028234663852886e22,K7=4294967295,Q7=2147483647,Y7=-2147483648;function tp(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>Q7||t<Y7)throw new Error("invalid int 32: "+t)}function Gm(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>K7||t<0)throw new Error("invalid uint 32: "+t)}function t_(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(!!Number.isFinite(t)&&(t>G7||t<J7))throw new Error("invalid float 32: "+t)}const S2={writeUnknownFields:!0,writerFactory:()=>new X7};function Z7(t){return t?Object.assign(Object.assign({},S2),t):S2}class X7{constructor(e){this.stack=[],this.textEncoder=e!=null?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let i=new Uint8Array(e),s=0;for(let r=0;r<this.chunks.length;r++)i.set(this.chunks[r],s),s+=this.chunks[r].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,i){return this.uint32((e<<3|i)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Gm(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return tp(e),_2(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let i=this.textEncoder.encode(e);return this.uint32(i.byteLength),this.raw(i)}float(e){t_(e);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,e,!0),this.raw(i)}double(e){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),this.raw(i)}fixed32(e){Gm(e);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,e,!0),this.raw(i)}sfixed32(e){tp(e);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,e,!0),this.raw(i)}sint32(e){return tp(e),e=(e<<1^e>>31)>>>0,_2(e,this.buf),this}sfixed64(e){let i=new Uint8Array(8),s=new DataView(i.buffer),r=ut.from(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(i)}fixed64(e){let i=new Uint8Array(8),s=new DataView(i.buffer),r=qi.from(e);return s.setInt32(0,r.lo,!0),s.setInt32(4,r.hi,!0),this.raw(i)}int64(e){let i=ut.from(e);return zy(i.lo,i.hi,this.buf),this}sint64(e){let i=ut.from(e),s=i.hi>>31,r=i.lo<<1^s,n=(i.hi<<1|i.lo>>>31)^s;return zy(r,n,this.buf),this}uint64(e){let i=qi.from(e);return zy(i.lo,i.hi,this.buf),this}}const x2={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},E2={ignoreUnknownFields:!1};function e8(t){return t?Object.assign(Object.assign({},E2),t):E2}function t8(t){return t?Object.assign(Object.assign({},x2),t):x2}const i8=Symbol.for("protobuf-ts/message-type");function T2(t){let e=!1;const i=[];for(let s=0;s<t.length;s++){let r=t.charAt(s);r=="_"?e=!0:/\d/.test(r)?(i.push(r),e=!0):e?(i.push(r.toUpperCase()),e=!1):s==0?i.push(r.toLowerCase()):i.push(r)}return i.join("")}var F;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(F||(F={}));var mn;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(mn||(mn={}));var Jm;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(Jm||(Jm={}));function s8(t){var e,i,s,r;return t.localName=(e=t.localName)!==null&&e!==void 0?e:T2(t.name),t.jsonName=(i=t.jsonName)!==null&&i!==void 0?i:T2(t.name),t.repeat=(s=t.repeat)!==null&&s!==void 0?s:Jm.NO,t.opt=(r=t.opt)!==null&&r!==void 0?r:t.repeat||t.oneof?!1:t.kind=="message",t}function r8(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}class n8{constructor(e){var i;this.fields=(i=e.fields)!==null&&i!==void 0?i:[]}prepare(){if(this.data)return;const e=[],i=[],s=[];for(let r of this.fields)if(r.oneof)s.includes(r.oneof)||(s.push(r.oneof),e.push(r.oneof),i.push(r.oneof));else switch(i.push(r.localName),r.kind){case"scalar":case"enum":(!r.opt||r.repeat)&&e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName);break}this.data={req:e,known:i,oneofs:Object.values(s)}}is(e,i,s=!1){if(i<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let r=Object.keys(e),n=this.data;if(r.length<n.req.length||n.req.some(a=>!r.includes(a))||!s&&r.some(a=>!n.known.includes(a)))return!1;if(i<1)return!0;for(const a of n.oneofs){const o=e[a];if(!r8(o))return!1;if(o.oneofKind===void 0)continue;const c=this.fields.find(u=>u.localName===o.oneofKind);if(!c||!this.field(o[o.oneofKind],c,s,i))return!1}for(const a of this.fields)if(a.oneof===void 0&&!this.field(e[a.localName],a,s,i))return!1;return!0}field(e,i,s,r){let n=i.repeat;switch(i.kind){case"scalar":return e===void 0?i.opt:n?this.scalars(e,i.T,r,i.L):this.scalar(e,i.T,i.L);case"enum":return e===void 0?i.opt:n?this.scalars(e,F.INT32,r):this.scalar(e,F.INT32);case"message":return e===void 0?!0:n?this.messages(e,i.T(),s,r):this.message(e,i.T(),s,r);case"map":if(typeof e!="object"||e===null)return!1;if(r<2)return!0;if(!this.mapKeys(e,i.K,r))return!1;switch(i.V.kind){case"scalar":return this.scalars(Object.values(e),i.V.T,r,i.V.L);case"enum":return this.scalars(Object.values(e),F.INT32,r);case"message":return this.messages(Object.values(e),i.V.T(),s,r)}break}return!0}message(e,i,s,r){return s?i.isAssignable(e,r):i.is(e,r)}messages(e,i,s,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(s){for(let n=0;n<e.length&&n<r;n++)if(!i.isAssignable(e[n],r-1))return!1}else for(let n=0;n<e.length&&n<r;n++)if(!i.is(e[n],r-1))return!1;return!0}scalar(e,i,s){let r=typeof e;switch(i){case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:switch(s){case mn.BIGINT:return r=="bigint";case mn.NUMBER:return r=="number"&&!isNaN(e);default:return r=="string"}case F.BOOL:return r=="boolean";case F.STRING:return r=="string";case F.BYTES:return e instanceof Uint8Array;case F.DOUBLE:case F.FLOAT:return r=="number"&&!isNaN(e);default:return r=="number"&&Number.isInteger(e)}}scalars(e,i,s,r){if(!Array.isArray(e))return!1;if(s<2)return!0;if(Array.isArray(e)){for(let n=0;n<e.length&&n<s;n++)if(!this.scalar(e[n],i,r))return!1}return!0}mapKeys(e,i,s){let r=Object.keys(e);switch(i){case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:return this.scalars(r.slice(0,s).map(n=>parseInt(n)),i,s);case F.BOOL:return this.scalars(r.slice(0,s).map(n=>n=="true"?!0:n=="false"?!1:n),i,s);default:return this.scalars(r,i,s,mn.STRING)}}}function Nr(t,e){switch(e){case mn.BIGINT:return t.toBigInt();case mn.NUMBER:return t.toNumber();default:return t.toString()}}class a8{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};const i=(e=this.info.fields)!==null&&e!==void 0?e:[];for(const s of i)this.fMap[s.name]=s,this.fMap[s.jsonName]=s,this.fMap[s.localName]=s}}assert(e,i,s){if(!e){let r=e_(s);throw(r=="number"||r=="boolean")&&(r=s.toString()),new Error(`Cannot parse JSON ${r} for ${this.info.typeName}#${i}`)}}read(e,i,s){this.prepare();const r=[];for(const[n,a]of Object.entries(e)){const o=this.fMap[n];if(!o){if(!s.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${n}`);continue}const c=o.localName;let u;if(o.oneof){if(a===null&&(o.kind!=="enum"||o.T()[0]!=="google.protobuf.NullValue"))continue;if(r.includes(o.oneof))throw new Error(`Multiple members of the oneof group "${o.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(o.oneof),u=i[o.oneof]={oneofKind:c}}else u=i;if(o.kind=="map"){if(a===null)continue;this.assert(j7(a),o.name,a);const l=u[c];for(const[h,g]of Object.entries(a)){this.assert(g!==null,o.name+" map value",null);let m;switch(o.V.kind){case"message":m=o.V.T().internalJsonRead(g,s);break;case"enum":if(m=this.enum(o.V.T(),g,o.name,s.ignoreUnknownFields),m===!1)continue;break;case"scalar":m=this.scalar(g,o.V.T,o.V.L,o.name);break}this.assert(m!==void 0,o.name+" map value",g);let f=h;o.K==F.BOOL&&(f=f=="true"?!0:f=="false"?!1:f),f=this.scalar(f,o.K,mn.STRING,o.name).toString(),l[f]=m}}else if(o.repeat){if(a===null)continue;this.assert(Array.isArray(a),o.name,a);const l=u[c];for(const h of a){this.assert(h!==null,o.name,null);let g;switch(o.kind){case"message":g=o.T().internalJsonRead(h,s);break;case"enum":if(g=this.enum(o.T(),h,o.name,s.ignoreUnknownFields),g===!1)continue;break;case"scalar":g=this.scalar(h,o.T,o.L,o.name);break}this.assert(g!==void 0,o.name,a),l.push(g)}}else switch(o.kind){case"message":if(a===null&&o.T().typeName!="google.protobuf.Value"){this.assert(o.oneof===void 0,o.name+" (oneof member)",null);continue}u[c]=o.T().internalJsonRead(a,s,u[c]);break;case"enum":let l=this.enum(o.T(),a,o.name,s.ignoreUnknownFields);if(l===!1)continue;u[c]=l;break;case"scalar":u[c]=this.scalar(a,o.T,o.L,o.name);break}}}enum(e,i,s,r){if(e[0]=="google.protobuf.NullValue"&&Je(i===null||i==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${s}, enum ${e[0]} only accepts null.`),i===null)return 0;switch(typeof i){case"number":return Je(Number.isInteger(i),`Unable to parse field ${this.info.typeName}#${s}, enum can only be integral number, got ${i}.`),i;case"string":let n=i;e[2]&&i.substring(0,e[2].length)===e[2]&&(n=i.substring(e[2].length));let a=e[1][n];return typeof a>"u"&&r?!1:(Je(typeof a=="number",`Unable to parse field ${this.info.typeName}#${s}, enum ${e[0]} has no value for "${i}".`),a)}Je(!1,`Unable to parse field ${this.info.typeName}#${s}, cannot parse enum value from ${typeof i}".`)}scalar(e,i,s,r){let n;try{switch(i){case F.DOUBLE:case F.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){n="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){n="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let a=Number(e);if(Number.isNaN(a)){n="not a number";break}if(!Number.isFinite(a)){n="too large or small";break}return i==F.FLOAT&&t_(a),a;case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:if(e===null)return 0;let o;if(typeof e=="number"?o=e:e===""?n="empty string":typeof e=="string"&&(e.trim().length!==e.length?n="extra whitespace":o=Number(e)),o===void 0)break;return i==F.UINT32?Gm(o):tp(o),o;case F.INT64:case F.SFIXED64:case F.SINT64:if(e===null)return Nr(ut.ZERO,s);if(typeof e!="number"&&typeof e!="string")break;return Nr(ut.from(e),s);case F.FIXED64:case F.UINT64:if(e===null)return Nr(qi.ZERO,s);if(typeof e!="number"&&typeof e!="string")break;return Nr(qi.from(e),s);case F.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case F.STRING:if(e===null)return"";if(typeof e!="string"){n="extra whitespace";break}try{encodeURIComponent(e)}catch(c){c="invalid UTF8";break}return e;case F.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return z7(e)}}catch(a){n=a.message}this.assert(!1,r+(n?" - "+n:""),e)}}class o8{constructor(e){var i;this.fields=(i=e.fields)!==null&&i!==void 0?i:[]}write(e,i){const s={},r=e;for(const n of this.fields){if(!n.oneof){let u=this.field(n,r[n.localName],i);u!==void 0&&(s[i.useProtoFieldName?n.name:n.jsonName]=u);continue}const a=r[n.oneof];if(a.oneofKind!==n.localName)continue;const o=n.kind=="scalar"||n.kind=="enum"?Object.assign(Object.assign({},i),{emitDefaultValues:!0}):i;let c=this.field(n,a[n.localName],o);Je(c!==void 0),s[i.useProtoFieldName?n.name:n.jsonName]=c}return s}field(e,i,s){let r;if(e.kind=="map"){Je(typeof i=="object"&&i!==null);const n={};switch(e.V.kind){case"scalar":for(const[c,u]of Object.entries(i)){const l=this.scalar(e.V.T,u,e.name,!1,!0);Je(l!==void 0),n[c.toString()]=l}break;case"message":const a=e.V.T();for(const[c,u]of Object.entries(i)){const l=this.message(a,u,e.name,s);Je(l!==void 0),n[c.toString()]=l}break;case"enum":const o=e.V.T();for(const[c,u]of Object.entries(i)){Je(u===void 0||typeof u=="number");const l=this.enum(o,u,e.name,!1,!0,s.enumAsInteger);Je(l!==void 0),n[c.toString()]=l}break}(s.emitDefaultValues||Object.keys(n).length>0)&&(r=n)}else if(e.repeat){Je(Array.isArray(i));const n=[];switch(e.kind){case"scalar":for(let c=0;c<i.length;c++){const u=this.scalar(e.T,i[c],e.name,e.opt,!0);Je(u!==void 0),n.push(u)}break;case"enum":const a=e.T();for(let c=0;c<i.length;c++){Je(i[c]===void 0||typeof i[c]=="number");const u=this.enum(a,i[c],e.name,e.opt,!0,s.enumAsInteger);Je(u!==void 0),n.push(u)}break;case"message":const o=e.T();for(let c=0;c<i.length;c++){const u=this.message(o,i[c],e.name,s);Je(u!==void 0),n.push(u)}break}(s.emitDefaultValues||n.length>0||s.emitDefaultValues)&&(r=n)}else switch(e.kind){case"scalar":r=this.scalar(e.T,i,e.name,e.opt,s.emitDefaultValues);break;case"enum":r=this.enum(e.T(),i,e.name,e.opt,s.emitDefaultValues,s.enumAsInteger);break;case"message":r=this.message(e.T(),i,e.name,s);break}return r}enum(e,i,s,r,n,a){if(e[0]=="google.protobuf.NullValue")return!n&&!r?void 0:null;if(i===void 0){Je(r);return}if(!(i===0&&!n&&!r))return Je(typeof i=="number"),Je(Number.isInteger(i)),a||!e[1].hasOwnProperty(i)?i:e[2]?e[2]+e[1][i]:e[1][i]}message(e,i,s,r){return i===void 0?r.emitDefaultValues?null:void 0:e.internalJsonWrite(i,r)}scalar(e,i,s,r,n){if(i===void 0){Je(r);return}const a=n||r;switch(e){case F.INT32:case F.SFIXED32:case F.SINT32:return i===0?a?0:void 0:(tp(i),i);case F.FIXED32:case F.UINT32:return i===0?a?0:void 0:(Gm(i),i);case F.FLOAT:t_(i);case F.DOUBLE:return i===0?a?0:void 0:(Je(typeof i=="number"),Number.isNaN(i)?"NaN":i===Number.POSITIVE_INFINITY?"Infinity":i===Number.NEGATIVE_INFINITY?"-Infinity":i);case F.STRING:return i===""?a?"":void 0:(Je(typeof i=="string"),i);case F.BOOL:return i===!1?a?!1:void 0:(Je(typeof i=="boolean"),i);case F.UINT64:case F.FIXED64:Je(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let o=qi.from(i);return o.isZero()&&!a?void 0:o.toString();case F.INT64:case F.SFIXED64:case F.SINT64:Je(typeof i=="number"||typeof i=="string"||typeof i=="bigint");let c=ut.from(i);return c.isZero()&&!a?void 0:c.toString();case F.BYTES:return Je(i instanceof Uint8Array),i.byteLength?F7(i):a?"":void 0}}}function Db(t,e=mn.STRING){switch(t){case F.BOOL:return!1;case F.UINT64:case F.FIXED64:return Nr(qi.ZERO,e);case F.INT64:case F.SFIXED64:case F.SINT64:return Nr(ut.ZERO,e);case F.DOUBLE:case F.FLOAT:return 0;case F.BYTES:return new Uint8Array(0);case F.STRING:return"";default:return 0}}class c8{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const i=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(i.map(s=>[s.no,s]))}}read(e,i,s,r){this.prepare();const n=r===void 0?e.len:e.pos+r;for(;e.pos<n;){const[a,o]=e.tag(),c=this.fieldNoToField.get(a);if(!c){let g=s.readUnknownField;if(g=="throw")throw new Error(`Unknown field ${a} (wire type ${o}) for ${this.info.typeName}`);let m=e.skip(o);g!==!1&&(g===!0?Wm.onRead:g)(this.info.typeName,i,a,o,m);continue}let u=i,l=c.repeat,h=c.localName;switch(c.oneof&&(u=u[c.oneof],u.oneofKind!==h&&(u=i[c.oneof]={oneofKind:h})),c.kind){case"scalar":case"enum":let g=c.kind=="enum"?F.INT32:c.T,m=c.kind=="scalar"?c.L:void 0;if(l){let k=u[h];if(o==qt.LengthDelimited&&g!=F.STRING&&g!=F.BYTES){let y=e.uint32()+e.pos;for(;e.pos<y;)k.push(this.scalar(e,g,m))}else k.push(this.scalar(e,g,m))}else u[h]=this.scalar(e,g,m);break;case"message":if(l){let k=u[h],y=c.T().internalBinaryRead(e,e.uint32(),s);k.push(y)}else u[h]=c.T().internalBinaryRead(e,e.uint32(),s,u[h]);break;case"map":let[f,_]=this.mapEntry(c,e,s);u[h][f]=_;break}}}mapEntry(e,i,s){let r=i.uint32(),n=i.pos+r,a,o;for(;i.pos<n;){let[c,u]=i.tag();switch(c){case 1:e.K==F.BOOL?a=i.bool().toString():a=this.scalar(i,e.K,mn.STRING);break;case 2:switch(e.V.kind){case"scalar":o=this.scalar(i,e.V.T,e.V.L);break;case"enum":o=i.int32();break;case"message":o=e.V.T().internalBinaryRead(i,i.uint32(),s);break}break;default:throw new Error(`Unknown field ${c} (wire type ${u}) in map entry for ${this.info.typeName}#${e.name}`)}}if(a===void 0){let c=Db(e.K);a=e.K==F.BOOL?c.toString():c}if(o===void 0)switch(e.V.kind){case"scalar":o=Db(e.V.T,e.V.L);break;case"enum":o=0;break;case"message":o=e.V.T().create();break}return[a,o]}scalar(e,i,s){switch(i){case F.INT32:return e.int32();case F.STRING:return e.string();case F.BOOL:return e.bool();case F.DOUBLE:return e.double();case F.FLOAT:return e.float();case F.INT64:return Nr(e.int64(),s);case F.UINT64:return Nr(e.uint64(),s);case F.FIXED64:return Nr(e.fixed64(),s);case F.FIXED32:return e.fixed32();case F.BYTES:return e.bytes();case F.UINT32:return e.uint32();case F.SFIXED32:return e.sfixed32();case F.SFIXED64:return Nr(e.sfixed64(),s);case F.SINT32:return e.sint32();case F.SINT64:return Nr(e.sint64(),s)}}}class d8{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((i,s)=>i.no-s.no)}}write(e,i,s){this.prepare();for(const n of this.fields){let a,o,c=n.repeat,u=n.localName;if(n.oneof){const l=e[n.oneof];if(l.oneofKind!==u)continue;a=l[u],o=!0}else a=e[u],o=!1;switch(n.kind){case"scalar":case"enum":let l=n.kind=="enum"?F.INT32:n.T;if(c)if(Je(Array.isArray(a)),c==Jm.PACKED)this.packed(i,l,n.no,a);else for(const h of a)this.scalar(i,l,n.no,h,!0);else a===void 0?Je(n.opt):this.scalar(i,l,n.no,a,o||n.opt);break;case"message":if(c){Je(Array.isArray(a));for(const h of a)this.message(i,s,n.T(),n.no,h)}else this.message(i,s,n.T(),n.no,a);break;case"map":Je(typeof a=="object"&&a!==null);for(const[h,g]of Object.entries(a))this.mapEntry(i,s,n,h,g);break}}let r=s.writeUnknownFields;r!==!1&&(r===!0?Wm.onWrite:r)(this.info.typeName,e,i)}mapEntry(e,i,s,r,n){e.tag(s.no,qt.LengthDelimited),e.fork();let a=r;switch(s.K){case F.INT32:case F.FIXED32:case F.UINT32:case F.SFIXED32:case F.SINT32:a=Number.parseInt(r);break;case F.BOOL:Je(r=="true"||r=="false"),a=r=="true";break}switch(this.scalar(e,s.K,1,a,!0),s.V.kind){case"scalar":this.scalar(e,s.V.T,2,n,!0);break;case"enum":this.scalar(e,F.INT32,2,n,!0);break;case"message":this.message(e,i,s.V.T(),2,n);break}e.join()}message(e,i,s,r,n){n!==void 0&&(s.internalBinaryWrite(n,e.tag(r,qt.LengthDelimited).fork(),i),e.join())}scalar(e,i,s,r,n){let[a,o,c]=this.scalarInfo(i,r);(!c||n)&&(e.tag(s,a),e[o](r))}packed(e,i,s,r){if(!r.length)return;Je(i!==F.BYTES&&i!==F.STRING),e.tag(s,qt.LengthDelimited),e.fork();let[,n]=this.scalarInfo(i);for(let a=0;a<r.length;a++)e[n](r[a]);e.join()}scalarInfo(e,i){let s=qt.Varint,r,n=i===void 0,a=i===0;switch(e){case F.INT32:r="int32";break;case F.STRING:a=n||!i.length,s=qt.LengthDelimited,r="string";break;case F.BOOL:a=i===!1,r="bool";break;case F.UINT32:r="uint32";break;case F.DOUBLE:s=qt.Bit64,r="double";break;case F.FLOAT:s=qt.Bit32,r="float";break;case F.INT64:a=n||ut.from(i).isZero(),r="int64";break;case F.UINT64:a=n||qi.from(i).isZero(),r="uint64";break;case F.FIXED64:a=n||qi.from(i).isZero(),s=qt.Bit64,r="fixed64";break;case F.BYTES:a=n||!i.byteLength,s=qt.LengthDelimited,r="bytes";break;case F.FIXED32:s=qt.Bit32,r="fixed32";break;case F.SFIXED32:s=qt.Bit32,r="sfixed32";break;case F.SFIXED64:a=n||ut.from(i).isZero(),s=qt.Bit64,r="sfixed64";break;case F.SINT32:r="sint32";break;case F.SINT64:a=n||ut.from(i).isZero(),r="sint64";break}return[s,r,n||a]}}function l8(t){const e={};Object.defineProperty(e,i8,{enumerable:!1,value:t});for(let i of t.fields){let s=i.localName;if(!i.opt)if(i.oneof)e[i.oneof]={oneofKind:void 0};else if(i.repeat)e[s]=[];else switch(i.kind){case"scalar":e[s]=Db(i.T,i.L);break;case"enum":e[s]=0;break;case"map":e[s]={};break}}return e}function Fy(t,e,i){let s,r=i,n;for(let a of t.fields){let o=a.localName;if(a.oneof){const c=r[a.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(s=c[o],n=e[a.oneof],n.oneofKind=c.oneofKind,s==null){delete n[o];continue}}else if(s=r[o],n=e,s==null)continue;switch(a.repeat&&(n[o].length=s.length),a.kind){case"scalar":case"enum":if(a.repeat)for(let u=0;u<s.length;u++)n[o][u]=s[u];else n[o]=s;break;case"message":let c=a.T();if(a.repeat)for(let u=0;u<s.length;u++)n[o][u]=c.create(s[u]);else n[o]===void 0?n[o]=c.create(s):c.mergePartial(n[o],s);break;case"map":switch(a.V.kind){case"scalar":case"enum":Object.assign(n[o],s);break;case"message":let u=a.V.T();for(let l of Object.keys(s))n[o][l]=u.create(s[l]);break}break}}}function u8(t,e,i){if(e===i)return!0;if(!e||!i)return!1;for(let s of t.fields){let r=s.localName,n=s.oneof?e[s.oneof][r]:e[r],a=s.oneof?i[s.oneof][r]:i[r];switch(s.kind){case"enum":case"scalar":let o=s.kind=="enum"?F.INT32:s.T;if(!(s.repeat?C2(o,n,a):z5(o,n,a)))return!1;break;case"map":if(!(s.V.kind=="message"?P2(s.V.T(),qh(n),qh(a)):C2(s.V.kind=="enum"?F.INT32:s.V.T,qh(n),qh(a))))return!1;break;case"message":let c=s.T();if(!(s.repeat?P2(c,n,a):c.equals(n,a)))return!1;break}}return!0}const qh=Object.values;function z5(t,e,i){if(e===i)return!0;if(t!==F.BYTES)return!1;let s=e,r=i;if(s.length!==r.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!=r[n])return!1;return!0}function C2(t,e,i){if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(!z5(t,e[s],i[s]))return!1;return!0}function P2(t,e,i){if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(!t.equals(e[s],i[s]))return!1;return!0}class A{constructor(e,i,s){this.defaultCheckDepth=16,this.typeName=e,this.fields=i.map(s8),this.options=s!=null?s:{},this.refTypeCheck=new n8(this),this.refJsonReader=new a8(this),this.refJsonWriter=new o8(this),this.refBinReader=new c8(this),this.refBinWriter=new d8(this)}create(e){let i=l8(this);return e!==void 0&&Fy(this,i,e),i}clone(e){let i=this.create();return Fy(this,i,e),i}equals(e,i){return u8(this,e,i)}is(e,i=this.defaultCheckDepth){return this.refTypeCheck.is(e,i,!1)}isAssignable(e,i=this.defaultCheckDepth){return this.refTypeCheck.is(e,i,!0)}mergePartial(e,i){Fy(this,e,i)}fromBinary(e,i){let s=W7(i);return this.internalBinaryRead(s.readerFactory(e),e.byteLength,s)}fromJson(e,i){return this.internalJsonRead(e,e8(i))}fromJsonString(e,i){let s=JSON.parse(e);return this.fromJson(s,i)}toJson(e,i){return this.internalJsonWrite(e,t8(i))}toJsonString(e,i){var s;let r=this.toJson(e,i);return JSON.stringify(r,null,(s=i==null?void 0:i.prettySpaces)!==null&&s!==void 0?s:0)}toBinary(e,i){let s=Z7(i);return this.internalBinaryWrite(e,s.writerFactory(),s).finish()}internalJsonRead(e,i,s){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let r=s!=null?s:this.create();return this.refJsonReader.read(e,r,i),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${e_(e)}.`)}internalJsonWrite(e,i){return this.refJsonWriter.write(e,i)}internalBinaryWrite(e,i,s){return this.refBinWriter.write(e,i,s),i}internalBinaryRead(e,i,s,r){let n=r!=null?r:this.create();return this.refBinReader.read(e,n,s,i),n}}var kc={},sv={},Mb={exports:{}},Vy,R2;function p8(){if(R2)return Vy;R2=1;var t=1e3,e=t*60,i=e*60,s=i*24,r=s*7,n=s*365.25;Vy=function(l,h){h=h||{};var g=typeof l;if(g==="string"&&l.length>0)return a(l);if(g==="number"&&isFinite(l))return h.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(!!h){var g=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*n;case"weeks":case"week":case"w":return g*r;case"days":case"day":case"d":return g*s;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(l){var h=Math.abs(l);return h>=s?Math.round(l/s)+"d":h>=i?Math.round(l/i)+"h":h>=e?Math.round(l/e)+"m":h>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var h=Math.abs(l);return h>=s?u(l,h,s,"day"):h>=i?u(l,h,i,"hour"):h>=e?u(l,h,e,"minute"):h>=t?u(l,h,t,"second"):l+" ms"}function u(l,h,g,m){var f=h>=g*1.5;return Math.round(l/g)+" "+m+(f?"s":"")}return Vy}function h8(t){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=r,i.enabled=a,i.humanize=p8(),i.destroy=u,Object.keys(t).forEach(l=>{i[l]=t[l]}),i.names=[],i.skips=[],i.formatters={};function e(l){let h=0;for(let g=0;g<l.length;g++)h=(h<<5)-h+l.charCodeAt(g),h|=0;return i.colors[Math.abs(h)%i.colors.length]}i.selectColor=e;function i(l){let h,g=null,m,f;function _(...k){if(!_.enabled)return;const y=_,b=Number(new Date),x=b-(h||b);y.diff=x,y.prev=h,y.curr=b,h=b,k[0]=i.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let C=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(M,L)=>{if(M==="%%")return"%";C++;const V=i.formatters[L];if(typeof V=="function"){const se=k[C];M=V.call(y,se),k.splice(C,1),C--}return M}),i.formatArgs.call(y,k),(y.log||i.log).apply(y,k)}return _.namespace=l,_.useColors=i.useColors(),_.color=i.selectColor(l),_.extend=s,_.destroy=i.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(l)),f),set:k=>{g=k}}),typeof i.init=="function"&&i.init(_),_}function s(l,h){const g=i(this.namespace+(typeof h>"u"?":":h)+l);return g.log=this.log,g}function r(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let h;const g=(typeof l=="string"?l:"").split(/[\s,]+/),m=g.length;for(h=0;h<m;h++)!g[h]||(l=g[h].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function n(){const l=[...i.names.map(o),...i.skips.map(o).map(h=>"-"+h)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let h,g;for(h=0,g=i.skips.length;h<g;h++)if(i.skips[h].test(l))return!1;for(h=0,g=i.names.length;h<g;h++)if(i.names[h].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var g8=h8;(function(t,e){e.formatArgs=s,e.save=r,e.load=n,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let l=0,h=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(h=l))}),c.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function r(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function n(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=g8(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Mb,Mb.exports);var m8=zk&&zk.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sv,"__esModule",{value:!0});sv.Logger=void 0;const Xc=m8(Mb.exports),ed="awaitqueue";class f8{constructor(e){e?(this._debug=(0,Xc.default)(`${ed}:${e}`),this._warn=(0,Xc.default)(`${ed}:WARN:${e}`),this._error=(0,Xc.default)(`${ed}:ERROR:${e}`)):(this._debug=(0,Xc.default)(ed),this._warn=(0,Xc.default)(`${ed}:WARN`),this._error=(0,Xc.default)(`${ed}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}sv.Logger=f8;Object.defineProperty(kc,"__esModule",{value:!0});var Km=kc.AwaitQueue=kc.AwaitQueueRemovedTaskError=kc.AwaitQueueStoppedError=void 0;const v8=sv,va=new v8.Logger;class rv extends Error{constructor(e){super(e!=null?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,rv)}}kc.AwaitQueueStoppedError=rv;class nv extends Error{constructor(e){super(e!=null?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,nv)}}kc.AwaitQueueRemovedTaskError=nv;class y8{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,i){if(i=i!=null?i:e.name,va.debug(`push() [name:${i}]`),typeof e!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(e,"name",{value:i})}catch{}return new Promise((s,r)=>{const n={id:this.nextTaskId++,task:e,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),va.debug(`resolving task [name:${n.name}]`),s(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),va.debug(`rejecting task [name:${n.name}]: %s`,String(a)),r(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){va.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())va.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new rv);this.stopping=!1}remove(e){va.debug(`remove() [taskIdx:${e}]`);const i=Array.from(this.pendingTasks.values())[e];if(!i){va.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}i.reject(new nv)}dump(){const e=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(s=>({idx:i++,task:s.task,name:s.name,enqueuedTime:s.executedAt?s.executedAt-s.enqueuedAt:e-s.enqueuedAt,executionTime:s.executedAt?e-s.executedAt:0}))}async execute(e){if(va.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const i=await e.task();e.resolve(i)}catch(i){e.reject(i)}}}Km=kc.AwaitQueue=y8;const vn=Object.create(null);vn.open="0";vn.close="1";vn.ping="2";vn.pong="3";vn.message="4";vn.upgrade="5";vn.noop="6";const Ng=Object.create(null);Object.keys(vn).forEach(t=>{Ng[vn[t]]=t});const b8={type:"error",data:"parser error"},w8=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_8=typeof ArrayBuffer=="function",k8=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,F5=({type:t,data:e},i,s)=>w8&&e instanceof Blob?i?s(e):I2(e,s):_8&&(e instanceof ArrayBuffer||k8(e))?i?s(e):I2(new Blob([e]),s):s(vn[t]+(e||"")),I2=(t,e)=>{const i=new FileReader;return i.onload=function(){const s=i.result.split(",")[1];e("b"+(s||""))},i.readAsDataURL(t)},A2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Au=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<A2.length;t++)Au[A2.charCodeAt(t)]=t;const S8=t=>{let e=t.length*.75,i=t.length,s,r=0,n,a,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),l=new Uint8Array(u);for(s=0;s<i;s+=4)n=Au[t.charCodeAt(s)],a=Au[t.charCodeAt(s+1)],o=Au[t.charCodeAt(s+2)],c=Au[t.charCodeAt(s+3)],l[r++]=n<<2|a>>4,l[r++]=(a&15)<<4|o>>2,l[r++]=(o&3)<<6|c&63;return u},x8=typeof ArrayBuffer=="function",V5=(t,e)=>{if(typeof t!="string")return{type:"message",data:B5(t,e)};const i=t.charAt(0);return i==="b"?{type:"message",data:E8(t.substring(1),e)}:Ng[i]?t.length>1?{type:Ng[i],data:t.substring(1)}:{type:Ng[i]}:b8},E8=(t,e)=>{if(x8){const i=S8(t);return B5(i,e)}else return{base64:!0,data:t}},B5=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},H5=String.fromCharCode(30),T8=(t,e)=>{const i=t.length,s=new Array(i);let r=0;t.forEach((n,a)=>{F5(n,!1,o=>{s[a]=o,++r===i&&e(s.join(H5))})})},C8=(t,e)=>{const i=t.split(H5),s=[];for(let r=0;r<i.length;r++){const n=V5(i[r],e);if(s.push(n),n.type==="error")break}return s},W5=4;function di(t){if(t)return P8(t)}function P8(t){for(var e in di.prototype)t[e]=di.prototype[e];return t}di.prototype.on=di.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};di.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this};di.prototype.off=di.prototype.removeListener=di.prototype.removeAllListeners=di.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,r=0;r<i.length;r++)if(s=i[r],s===e||s.fn===e){i.splice(r,1);break}return i.length===0&&delete this._callbacks["$"+t],this};di.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(i){i=i.slice(0);for(var s=0,r=i.length;s<r;++s)i[s].apply(this,e)}return this};di.prototype.emitReserved=di.prototype.emit;di.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};di.prototype.hasListeners=function(t){return!!this.listeners(t).length};const ir=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function q5(t,...e){return e.reduce((i,s)=>(t.hasOwnProperty(s)&&(i[s]=t[s]),i),{})}const R8=ir.setTimeout,I8=ir.clearTimeout;function av(t,e){e.useNativeTimers?(t.setTimeoutFn=R8.bind(ir),t.clearTimeoutFn=I8.bind(ir)):(t.setTimeoutFn=ir.setTimeout.bind(ir),t.clearTimeoutFn=ir.clearTimeout.bind(ir))}const A8=1.33;function D8(t){return typeof t=="string"?M8(t):Math.ceil((t.byteLength||t.size)*A8)}function M8(t){let e=0,i=0;for(let s=0,r=t.length;s<r;s++)e=t.charCodeAt(s),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(s++,i+=4);return i}class O8 extends Error{constructor(e,i,s){super(e),this.description=i,this.context=s,this.type="TransportError"}}class G5 extends di{constructor(e){super(),this.writable=!1,av(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,i,s){return super.emitReserved("error",new O8(e,i,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const i=V5(e,this.socket.binaryType);this.onPacket(i)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const J5="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ob=64,L8={};let D2=0,Gh=0,M2;function O2(t){let e="";do e=J5[t%Ob]+e,t=Math.floor(t/Ob);while(t>0);return e}function K5(){const t=O2(+new Date);return t!==M2?(D2=0,M2=t):t+"."+O2(D2++)}for(;Gh<Ob;Gh++)L8[J5[Gh]]=Gh;function Q5(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}function N8(t){let e={},i=t.split("&");for(let s=0,r=i.length;s<r;s++){let n=i[s].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}let Y5=!1;try{Y5=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const U8=Y5;function Z5(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||U8))return new XMLHttpRequest}catch{}if(!e)try{return new ir[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function $8(){}const j8=function(){return new Z5({xdomain:!1}).responseType!=null}();class z8 extends G5{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const s=location.protocol==="https:";let r=location.port;r||(r=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==s}const i=e&&e.forceBase64;this.supportsBinary=j8&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const i=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||i()})),this.writable||(s++,this.once("drain",function(){--s||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const i=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};C8(e,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,T8(e,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const i=this.opts.secure?"https":"http";let s="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=K5()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);const r=Q5(e),n=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new fn(this.uri(),e)}doWrite(e,i){const s=this.request({method:"POST",data:e});s.on("success",i),s.on("error",(r,n)=>{this.onError("xhr post error",r,n)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(i,s)=>{this.onError("xhr poll error",i,s)}),this.pollXhr=e}}class fn extends di{constructor(e,i){super(),av(this,i),this.opts=i,this.method=i.method||"GET",this.uri=e,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const e=q5(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const i=this.xhr=new Z5(e);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=fn.requestsCount++,fn.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=$8,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete fn.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}fn.requestsCount=0;fn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",L2);else if(typeof addEventListener=="function"){const t="onpagehide"in ir?"pagehide":"unload";addEventListener(t,L2,!1)}}function L2(){for(let t in fn.requests)fn.requests.hasOwnProperty(t)&&fn.requests[t].abort()}const X5=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,i)=>i(e,0))(),Jh=ir.WebSocket||ir.MozWebSocket,N2=!0,F8="arraybuffer",U2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class V8 extends G5{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),i=this.opts.protocols,s=U2?{}:q5(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=N2&&!U2?i?new Jh(e,i):new Jh(e):new Jh(e,i,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType||F8,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const s=e[i],r=i===e.length-1;F5(s,this.supportsBinary,n=>{const a={};try{N2&&this.ws.send(n)}catch{}r&&X5(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const i=this.opts.secure?"wss":"ws";let s="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=K5()),this.supportsBinary||(e.b64=1);const r=Q5(e),n=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}check(){return!!Jh}}const B8={websocket:V8,polling:z8},H8=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,W8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lb(t){const e=t,i=t.indexOf("["),s=t.indexOf("]");i!=-1&&s!=-1&&(t=t.substring(0,i)+t.substring(i,s).replace(/:/g,";")+t.substring(s,t.length));let r=H8.exec(t||""),n={},a=14;for(;a--;)n[W8[a]]=r[a]||"";return i!=-1&&s!=-1&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=q8(n,n.path),n.queryKey=G8(n,n.query),n}function q8(t,e){const i=/\/{2,9}/g,s=e.replace(i,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function G8(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,n){r&&(i[r]=n)}),i}class qa extends di{constructor(e,i={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(i=e,e=null),e?(e=Lb(e),i.hostname=e.host,i.secure=e.protocol==="https"||e.protocol==="wss",i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=Lb(i.host).host),av(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=N8(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const i=Object.assign({},this.opts.query);i.EIO=W5,i.transport=e,this.id&&(i.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new B8[e](s)}open(){let e;if(this.opts.rememberUpgrade&&qa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(e){let i=this.createTransport(e),s=!1;qa.priorWebsocketSuccess=!1;const r=()=>{s||(i.send([{type:"ping",data:"probe"}]),i.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;qa.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(l(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=i.name,this.emitReserved("upgradeError",g)}}))};function n(){s||(s=!0,l(),i.close(),i=null)}const a=h=>{const g=new Error("probe error: "+h);g.transport=i.name,n(),this.emitReserved("upgradeError",g)};function o(){a("transport closed")}function c(){a("socket closed")}function u(h){i&&h.name!==i.name&&n()}const l=()=>{i.removeListener("open",r),i.removeListener("error",a),i.removeListener("close",o),this.off("close",c),this.off("upgrading",u)};i.once("open",r),i.once("error",a),i.once("close",o),this.once("close",c),this.once("upgrading",u),i.open()}onOpen(){if(this.readyState="open",qa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const i=this.upgrades.length;for(;e<i;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=e.data,this.onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(i+=D8(r)),s>0&&i>this.maxPayload)return this.writeBuffer.slice(0,s);i+=2}return this.writeBuffer}write(e,i,s){return this.sendPacket("message",e,i,s),this}send(e,i,s){return this.sendPacket("message",e,i,s),this}sendPacket(e,i,s,r){if(typeof i=="function"&&(r=i,i=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const n={type:e,data:i,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},s=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){qa.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const i=[];let s=0;const r=e.length;for(;s<r;s++)~this.transports.indexOf(e[s])&&i.push(e[s]);return i}}qa.protocol=W5;function J8(t,e="",i){let s=t;i=i||typeof location<"u"&&location,t==null&&(t=i.protocol+"//"+i.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=i.protocol+t:t=i.host+t),/^(https?|wss?):\/\//.test(t)||(typeof i<"u"?t=i.protocol+"//"+t:t="https://"+t),s=Lb(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const n=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+n+":"+s.port+e,s.href=s.protocol+"://"+n+(i&&i.port===s.port?"":":"+s.port),s}const K8=typeof ArrayBuffer=="function",Q8=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,eR=Object.prototype.toString,Y8=typeof Blob=="function"||typeof Blob<"u"&&eR.call(Blob)==="[object BlobConstructor]",Z8=typeof File=="function"||typeof File<"u"&&eR.call(File)==="[object FileConstructor]";function i_(t){return K8&&(t instanceof ArrayBuffer||Q8(t))||Y8&&t instanceof Blob||Z8&&t instanceof File}function Ug(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let i=0,s=t.length;i<s;i++)if(Ug(t[i]))return!0;return!1}if(i_(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ug(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Ug(t[i]))return!0;return!1}function X8(t){const e=[],i=t.data,s=t;return s.data=Nb(i,e),s.attachments=e.length,{packet:s,buffers:e}}function Nb(t,e){if(!t)return t;if(i_(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}else if(Array.isArray(t)){const i=new Array(t.length);for(let s=0;s<t.length;s++)i[s]=Nb(t[s],e);return i}else if(typeof t=="object"&&!(t instanceof Date)){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=Nb(t[s],e));return i}return t}function eN(t,e){return t.data=Ub(t.data,e),delete t.attachments,t}function Ub(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=Ub(t[i],e);else if(typeof t=="object")for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=Ub(t[i],e));return t}const tN=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],iN=5;var Ue;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ue||(Ue={}));class sN{constructor(e){this.replacer=e}encode(e){return(e.type===Ue.EVENT||e.type===Ue.ACK)&&Ug(e)?this.encodeAsBinary({type:e.type===Ue.EVENT?Ue.BINARY_EVENT:Ue.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let i=""+e.type;return(e.type===Ue.BINARY_EVENT||e.type===Ue.BINARY_ACK)&&(i+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(i+=e.nsp+","),e.id!=null&&(i+=e.id),e.data!=null&&(i+=JSON.stringify(e.data,this.replacer)),i}encodeAsBinary(e){const i=X8(e),s=this.encodeAsString(i.packet),r=i.buffers;return r.unshift(s),r}}function $2(t){return Object.prototype.toString.call(t)==="[object Object]"}class s_ extends di{constructor(e){super(),this.reviver=e}add(e){let i;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(e);const s=i.type===Ue.BINARY_EVENT;s||i.type===Ue.BINARY_ACK?(i.type=s?Ue.EVENT:Ue.ACK,this.reconstructor=new rN(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(i_(e)||e.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(e),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let i=0;const s={type:Number(e.charAt(0))};if(Ue[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Ue.BINARY_EVENT||s.type===Ue.BINARY_ACK){const n=i+1;for(;e.charAt(++i)!=="-"&&i!=e.length;);const a=e.substring(n,i);if(a!=Number(a)||e.charAt(i)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(i+1)==="/"){const n=i+1;for(;++i&&!(e.charAt(i)===","||i===e.length););s.nsp=e.substring(n,i)}else s.nsp="/";const r=e.charAt(i+1);if(r!==""&&Number(r)==r){const n=i+1;for(;++i;){const a=e.charAt(i);if(a==null||Number(a)!=a){--i;break}if(i===e.length)break}s.id=Number(e.substring(n,i+1))}if(e.charAt(++i)){const n=this.tryParse(e.substr(i));if(s_.isPayloadValid(s.type,n))s.data=n;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,i){switch(e){case Ue.CONNECT:return $2(i);case Ue.DISCONNECT:return i===void 0;case Ue.CONNECT_ERROR:return typeof i=="string"||$2(i);case Ue.EVENT:case Ue.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&tN.indexOf(i[0])===-1);case Ue.ACK:case Ue.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class rN{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const i=eN(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const nN=Object.freeze(Object.defineProperty({__proto__:null,protocol:iN,get PacketType(){return Ue},Encoder:sN,Decoder:s_},Symbol.toStringTag,{value:"Module"}));function Pr(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const aN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tR extends di{constructor(e,i,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=i,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Pr(e,"open",this.onopen.bind(this)),Pr(e,"packet",this.onpacket.bind(this)),Pr(e,"error",this.onerror.bind(this)),Pr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...i){if(aN.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const s={type:Ue.EVENT,data:i};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const a=this.ids++,o=i.pop();this._registerAckCallback(a,o),s.id=a}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,i){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=i;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);i.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(n),i.apply(this,[null,...a])}}emitWithAck(e,...i){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((r,n)=>{i.push((a,o)=>s?a?n(a):r(o):r(a)),this.emit(e,...i)})}_addToQueue(e){let i;typeof e[e.length-1]=="function"&&(i=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...n)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(r)):(this._queue.shift(),i&&i(null,...n)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!e||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,i)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ue.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ue.EVENT:case Ue.BINARY_EVENT:this.onevent(e);break;case Ue.ACK:case Ue.BINARY_ACK:this.onack(e);break;case Ue.DISCONNECT:this.ondisconnect();break;case Ue.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const i=e.data||[];e.id!=null&&i.push(this.ack(e.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const s of i)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const i=this;let s=!1;return function(...r){s||(s=!0,i.packet({type:Ue.ACK,id:e,data:r}))}}onack(e){const i=this.acks[e.id];typeof i=="function"&&(i.apply(this,e.data),delete this.acks[e.id])}onconnect(e,i){this.id=e,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const i=this._anyListeners;for(let s=0;s<i.length;s++)if(e===i[s])return i.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const i=this._anyOutgoingListeners;for(let s=0;s<i.length;s++)if(e===i[s])return i.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const s of i)s.apply(this,e.data)}}}function Rl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Rl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-i:t+i}return Math.min(t,this.max)|0};Rl.prototype.reset=function(){this.attempts=0};Rl.prototype.setMin=function(t){this.ms=t};Rl.prototype.setMax=function(t){this.max=t};Rl.prototype.setJitter=function(t){this.jitter=t};class $b extends di{constructor(e,i){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,av(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((s=i.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Rl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=e;const r=i.parser||nN;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var i;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(i=this.backoff)===null||i===void 0||i.setMin(e),this)}randomizationFactor(e){var i;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(i=this.backoff)===null||i===void 0||i.setJitter(e),this)}reconnectionDelayMax(e){var i;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(i=this.backoff)===null||i===void 0||i.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new qa(this.uri,this.opts);const i=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Pr(i,"open",function(){s.onopen(),e&&e()}),n=Pr(i,"error",a=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",a),e?e(a):s.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&r();const o=this.setTimeoutFn(()=>{r(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(r),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Pr(e,"ping",this.onping.bind(this)),Pr(e,"data",this.ondata.bind(this)),Pr(e,"error",this.onerror.bind(this)),Pr(e,"close",this.onclose.bind(this)),Pr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(i){this.onclose("parse error",i)}}ondecoded(e){X5(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,i){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new tR(this,e,i),this.nsps[e]=s),s}_destroy(e){const i=Object.keys(this.nsps);for(const s of i)if(this.nsps[s].active)return;this._close()}_packet(e){const i=this.encoder.encode(e);for(let s=0;s<i.length;s++)this.engine.write(i[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},i);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const eu={};function $g(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const i=J8(t,e.path||"/socket.io"),s=i.source,r=i.id,n=i.path,a=eu[r]&&n in eu[r].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new $b(s,e):(eu[r]||(eu[r]=new $b(s,e)),c=eu[r]),i.query&&!e.query&&(e.query=i.queryKey),c.socket(i.path,e)}Object.assign($g,{Manager:$b,Socket:tR,io:$g,connect:$g});const oN=t=>(e,i)=>(t.set(e,i),i),j2=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,iR=536870912,z2=iR*2,cN=(t,e)=>i=>{const s=e.get(i);let r=s===void 0?i.size:s<z2?s+1:0;if(!i.has(r))return t(i,r);if(i.size<iR){for(;i.has(r);)r=Math.floor(Math.random()*z2);return t(i,r)}if(i.size>j2)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(r);)r=Math.floor(Math.random()*j2);return t(i,r)},sR=new WeakMap,dN=oN(sR),Kh=cN(dN,sR),lN=t=>t.method!==void 0&&t.method==="call",uN=t=>t.error===null&&typeof t.id=="number",pN=t=>{const e=new Map([[0,()=>{}]]),i=new Map([[0,()=>{}]]),s=new Map,r=new Worker(t);return r.addEventListener("message",({data:u})=>{if(lN(u)){const{params:{timerId:l,timerType:h}}=u;if(h==="interval"){const g=e.get(l);if(typeof g=="number"){const m=s.get(g);if(m===void 0||m.timerId!==l||m.timerType!==h)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g();else throw new Error("The timer is in an undefined state.")}else if(h==="timeout"){const g=i.get(l);if(typeof g=="number"){const m=s.get(g);if(m===void 0||m.timerId!==l||m.timerType!==h)throw new Error("The timer is in an undefined state.")}else if(typeof g<"u")g(),i.delete(l);else throw new Error("The timer is in an undefined state.")}}else if(uN(u)){const{id:l}=u,h=s.get(l);if(h===void 0)throw new Error("The timer is in an undefined state.");const{timerId:g,timerType:m}=h;s.delete(l),m==="interval"?e.delete(g):i.delete(g)}else{const{error:{message:l}}=u;throw new Error(l)}}),{clearInterval:u=>{const l=Kh(s);s.set(l,{timerId:u,timerType:"interval"}),e.set(u,l),r.postMessage({id:l,method:"clear",params:{timerId:u,timerType:"interval"}})},clearTimeout:u=>{const l=Kh(s);s.set(l,{timerId:u,timerType:"timeout"}),i.set(u,l),r.postMessage({id:l,method:"clear",params:{timerId:u,timerType:"timeout"}})},setInterval:(u,l)=>{const h=Kh(e);return e.set(h,()=>{u(),typeof e.get(h)=="function"&&r.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:h,timerType:"interval"}})}),r.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:h,timerType:"interval"}}),h},setTimeout:(u,l)=>{const h=Kh(i);return i.set(h,u),r.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:h,timerType:"timeout"}}),h}}},hN=(t,e)=>{let i=null;return()=>{if(i!==null)return i;const s=new Blob([e],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(s);return i=t(r),setTimeout(()=>URL.revokeObjectURL(r)),i}},gN=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,rR=hN(pN,gN),nR=t=>rR().clearInterval(t),aR=(t,e)=>rR().setInterval(t,e);var mN=Object.defineProperty,fN=(t,e,i)=>e in t?mN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,v=(t,e,i)=>(fN(t,typeof e!="symbol"?e+"":e,i),i),r_=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},p=(t,e,i)=>(r_(t,e,"read from private field"),i?i.call(t):e.get(t)),R=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},P=(t,e,i,s)=>(r_(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),Pe=(t,e,i)=>(r_(t,e,"access private method"),i),ue;(function(t){t[t.MAJOR_EVENT=0]="MAJOR_EVENT",t[t.MINOR_EVENT=1]="MINOR_EVENT"})(ue||(ue={}));var G;(function(t){t.PRECALL_TEST_BEGIN="precall_begin",t.PRECALL_TEST_COMPLETE="precall_end",t.CALL_JOIN_BEGIN="call_join",t.NET_QUALITY_TEST_BEGIN="net_quality_test_begin",t.NET_QUALITY_TEST_END="net_quality_test_end",t.WEBSOCKET_CONNECTED="websocket_connected",t.TRANSPORT_CONNECTED="transport_connected",t.AUDIO_ON="audio_on",t.AUDIO_OFF="audio_off",t.VIDEO_ON="video_on",t.VIDEO_OFF="video_off",t.PARTICIPANT_ROLE="participant_role",t.PING_STAT="ping_stat",t.DISCONNECT="disconnect",t.RECONNECT_ATTEMPT="reconnect_attempt",t.SCREENSHARE_START_REQUESTED="screenshare_start_requested",t.SCREENSHARE_STARTED="screenshare_started",t.SCREENSHARE_STOPPED="screenshare_stopped",t.TAB_CHANGE="tab_change",t.BROWSER_BACKGROUNDED="browser_backgrounded",t.BROWSER_FOREGROUNDED="browser_foregrounded",t.DOMINANT_SPEAKER="dominant_speaker",t.AUDIO_DEVICES_UPDATES="audio_devices_updates",t.VIDEO_DEVICES_UPDATES="video_devices_updates",t.SPEAKER_DEVICES_UPDATES="speaker_devices_updates",t.SELECTED_MICROHPONE_UPDATE="selected_microphone_update",t.SELECTED_CAMERA_UPDATE="selected_camera_update",t.SELECTED_SPEAKER_UPDATE="selected_speaker_update",t.MEDIA_PERMISSION="camera_permission",t.LEGACY_SWITCH="legacy_switch",t.AUDIO_PLAY_FAILED="audio_play_failed",t.VIDEO_PLAY_FAILED="video_play_failed",t.AUDIO_TRACK_MUTED="audio_track_muted",t.VIDEO_TRACK_MUTED="video_track_muted",t.IVS_PLAYER_REBUFFERING="ivs_player_rebuffering",t.IVS_PLAYER_AUDIO_BLOCKED="ivs_player_audio_blocked",t.IVS_PLAYER_PLAYBACK_BLOCKED="ivs_player_playback_blocked",t.IVS_PLAYER_ERROR="ivs_player_error",t.IVS_PLAYER_RECOVERABLE_ERROR="ivs_player_recoverable_error",t.IVS_PLAYER_WORKER_ERROR="ivs_player_worker_error",t.IVS_PLAYER_NETWORK_UNAVAILABLE="ivs_player_network_unavailable",t.LIVESTREAM_LATENCY="livestream_latency",t.IVS_PLAYER_ANALYTICS_EVENT="ivs_player_analytics_event",t.IVS_PLAYER_PLAYBACK_RATE_CHANGED="ivs_player_playback_rate_changed",t.IVS_PLAYER_QUALITY_CHANGED="ivs_player_quality_changed",t.IVS_PLAYER_INITIALIZED="ivs_player_initialized"})(G||(G={}));const vN=new Map([[G.PRECALL_TEST_BEGIN,ue.MINOR_EVENT],[G.PRECALL_TEST_COMPLETE,ue.MINOR_EVENT],[G.CALL_JOIN_BEGIN,ue.MAJOR_EVENT],[G.NET_QUALITY_TEST_BEGIN,ue.MINOR_EVENT],[G.NET_QUALITY_TEST_END,ue.MINOR_EVENT],[G.WEBSOCKET_CONNECTED,ue.MINOR_EVENT],[G.TRANSPORT_CONNECTED,ue.MAJOR_EVENT],[G.AUDIO_ON,ue.MINOR_EVENT],[G.AUDIO_OFF,ue.MINOR_EVENT],[G.VIDEO_ON,ue.MINOR_EVENT],[G.VIDEO_OFF,ue.MINOR_EVENT],[G.PARTICIPANT_ROLE,ue.MINOR_EVENT],[G.PING_STAT,ue.MAJOR_EVENT],[G.DISCONNECT,ue.MAJOR_EVENT],[G.RECONNECT_ATTEMPT,ue.MAJOR_EVENT],[G.SCREENSHARE_START_REQUESTED,ue.MINOR_EVENT],[G.SCREENSHARE_STARTED,ue.MINOR_EVENT],[G.SCREENSHARE_STOPPED,ue.MINOR_EVENT],[G.TAB_CHANGE,ue.MINOR_EVENT],[G.BROWSER_BACKGROUNDED,ue.MINOR_EVENT],[G.BROWSER_FOREGROUNDED,ue.MINOR_EVENT],[G.DOMINANT_SPEAKER,ue.MINOR_EVENT],[G.AUDIO_DEVICES_UPDATES,ue.MINOR_EVENT],[G.VIDEO_DEVICES_UPDATES,ue.MINOR_EVENT],[G.SPEAKER_DEVICES_UPDATES,ue.MINOR_EVENT],[G.SELECTED_MICROHPONE_UPDATE,ue.MINOR_EVENT],[G.SELECTED_CAMERA_UPDATE,ue.MINOR_EVENT],[G.SELECTED_SPEAKER_UPDATE,ue.MINOR_EVENT],[G.MEDIA_PERMISSION,ue.MINOR_EVENT],[G.LEGACY_SWITCH,ue.MINOR_EVENT],[G.AUDIO_PLAY_FAILED,ue.MINOR_EVENT],[G.VIDEO_PLAY_FAILED,ue.MINOR_EVENT],[G.AUDIO_TRACK_MUTED,ue.MINOR_EVENT],[G.VIDEO_TRACK_MUTED,ue.MINOR_EVENT],[G.IVS_PLAYER_REBUFFERING,ue.MAJOR_EVENT],[G.IVS_PLAYER_AUDIO_BLOCKED,ue.MAJOR_EVENT],[G.IVS_PLAYER_PLAYBACK_BLOCKED,ue.MAJOR_EVENT],[G.IVS_PLAYER_ERROR,ue.MAJOR_EVENT],[G.IVS_PLAYER_RECOVERABLE_ERROR,ue.MAJOR_EVENT],[G.IVS_PLAYER_WORKER_ERROR,ue.MAJOR_EVENT],[G.IVS_PLAYER_NETWORK_UNAVAILABLE,ue.MAJOR_EVENT],[G.LIVESTREAM_LATENCY,ue.MAJOR_EVENT],[G.IVS_PLAYER_ANALYTICS_EVENT,ue.MINOR_EVENT],[G.IVS_PLAYER_PLAYBACK_RATE_CHANGED,ue.MINOR_EVENT],[G.IVS_PLAYER_QUALITY_CHANGED,ue.MINOR_EVENT],[G.IVS_PLAYER_INITIALIZED,ue.MINOR_EVENT]]);var jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rs={},yN={get exports(){return rs},set exports(t){rs=t}},tl=typeof Reflect=="object"?Reflect:null,F2=tl&&typeof tl.apply=="function"?tl.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},jg;tl&&typeof tl.ownKeys=="function"?jg=tl.ownKeys:Object.getOwnPropertySymbols?jg=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:jg=function(t){return Object.getOwnPropertyNames(t)};function bN(t){console&&console.warn&&console.warn(t)}var oR=Number.isNaN||function(t){return t!==t};function st(){st.init.call(this)}yN.exports=st;rs.once=SN;st.EventEmitter=st;st.prototype._events=void 0;st.prototype._eventsCount=0;st.prototype._maxListeners=void 0;var V2=10;function ov(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return V2},set:function(t){if(typeof t!="number"||t<0||oR(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");V2=t}});st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};st.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||oR(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function cR(t){return t._maxListeners===void 0?st.defaultMaxListeners:t._maxListeners}st.prototype.getMaxListeners=function(){return cR(this)};st.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s=t==="error",r=this._events;if(r!==void 0)s=s&&r.error===void 0;else if(!s)return!1;if(s){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=r[t];if(o===void 0)return!1;if(typeof o=="function")F2(o,this,e);else for(var c=o.length,u=hR(o,c),i=0;i<c;++i)F2(u[i],this,e);return!0};function dR(t,e,i,s){var r,n,a;if(ov(i),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),a=n[e]),a===void 0)a=n[e]=i,++t._eventsCount;else if(typeof a=="function"?a=n[e]=s?[i,a]:[a,i]:s?a.unshift(i):a.push(i),r=cR(t),r>0&&a.length>r&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,bN(o)}return t}st.prototype.addListener=function(t,e){return dR(this,t,e,!1)};st.prototype.on=st.prototype.addListener;st.prototype.prependListener=function(t,e){return dR(this,t,e,!0)};function wN(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lR(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=wN.bind(s);return r.listener=i,s.wrapFn=r,r}st.prototype.once=function(t,e){return ov(e),this.on(t,lR(this,t,e)),this};st.prototype.prependOnceListener=function(t,e){return ov(e),this.prependListener(t,lR(this,t,e)),this};st.prototype.removeListener=function(t,e){var i,s,r,n,a;if(ov(e),s=this._events,s===void 0)return this;if(i=s[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(r=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){a=i[n].listener,r=n;break}if(r<0)return this;r===0?i.shift():_N(i,r),i.length===1&&(s[t]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};st.prototype.off=st.prototype.removeListener;st.prototype.removeAllListeners=function(t){var e,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var r=Object.keys(i),n;for(s=0;s<r.length;++s)n=r[s],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this};function uR(t,e,i){var s=t._events;if(s===void 0)return[];var r=s[e];return r===void 0?[]:typeof r=="function"?i?[r.listener||r]:[r]:i?kN(r):hR(r,r.length)}st.prototype.listeners=function(t){return uR(this,t,!0)};st.prototype.rawListeners=function(t){return uR(this,t,!1)};st.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):pR.call(t,e)};st.prototype.listenerCount=pR;function pR(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?jg(this._events):[]};function hR(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function _N(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function kN(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function SN(t,e){return new Promise(function(i,s){function r(a){t.removeListener(e,n),s(a)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",r),i([].slice.call(arguments))}gR(t,e,n,{once:!0}),e!=="error"&&xN(t,r,{once:!0})})}function xN(t,e,i){typeof t.on=="function"&&gR(t,"error",e,i)}function gR(t,e,i,s){if(typeof t.on=="function")s.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(n){s.once&&t.removeEventListener(e,r),i(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var B2;(function(t){t.CHROMIUM="chromum",t.FIREFOX="firefox",t.SAFARI="safari"})(B2||(B2={}));var Ap;(function(t){t.DEV="dev",t.STAGING="staging",t.PRODUCTION="production"})(Ap||(Ap={}));var Xs;(function(t){t.AUDIO="AUDIO",t.VIDEO="VIDEO",t.SPEAKER="SPEAKER"})(Xs||(Xs={}));var Xa;(function(t){t[t.INIT=0]="INIT",t[t.ACCEPTED=1]="ACCEPTED",t[t.DENIED=2]="DENIED",t[t.SYS_DENIED=3]="SYS_DENIED",t[t.FAILED=4]="FAILED",t[t.NOTFOUND=5]="NOTFOUND",t[t.NOT_APPLICABLE=6]="NOT_APPLICABLE"})(Xa||(Xa={}));class EN{constructor(){v(this,"events"),this.events=[]}add(e){this.events.push(e)}flush(){return{entries:this.events.splice(0,25)}}}class TN extends rs{constructor({logger:e,peerId:i,env:s}){super(),v(this,"logger"),v(this,"peerId"),v(this,"eventStore"),v(this,"apiEndpoint"),this.logger=e,this.peerId=i,s===Ap.PRODUCTION?this.apiEndpoint="https://collector.prod.da.dyte.io/api/v1/message":this.apiEndpoint="https://collector.non-prod.da.dyte.io/api/v1/message",this.eventStore=new EN}async sendEventsChunkToServer(e){var i;const s={payload:e,peerId:this.peerId};try{return await fetch(this.apiEndpoint,{method:"POST",body:JSON.stringify(s)}),!0}catch(r){return this.logger.error("callStats::sendEventsChunkToServer::catch",{error:r}),(i=e.entries)==null||i.forEach(n=>{this.eventStore.add(n)}),!1}}callEvent(e){e.timestamp=new Date,this.eventStore.add(e),this.emit(e.event,e.metaData),vN.get(e.event)===ue.MAJOR_EVENT&&this.flush()}async flush(){var e;const i=this.eventStore.flush();return(e=i==null?void 0:i.entries)!=null&&e.length?(await this.sendEventsChunkToServer(i),!0):!1}}class ra{constructor(e){v(this,"pc1"),v(this,"pc2"),v(this,"constrainVideoBitrateKbps"),v(this,"constrainOfferToRemoveVideoFec",!1),v(this,"iceCandidateFilter");const i=new RTCPeerConnection(e),s=new RTCPeerConnection(e);this.pc1=i,this.pc2=s,this.iceCandidateFilter=ra.noFilter,this.pc1.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate.bind(this,this.pc1))}static parseCandidate(e){const i="candidate:",s=e.indexOf(i)+i.length,r=e.substr(s).split(" ");return{type:r[7],protocol:r[2],address:r[4]}}static isNotHostCandidate(e){return e.type!=="host"}static isHost(e){return e.type==="host"}static isRelay(e){return e.type==="relay"}static isReflexive(e){return e.type==="srflx"}static noFilter(e){return!0}onIceCandidate(e,i){if(i.candidate){const s=ra.parseCandidate(i.candidate.candidate);this.iceCandidateFilter(s)&&e.addIceCandidate(i.candidate)}}setIceCandidateFilter(e){this.iceCandidateFilter=e}constrainVideoBitrate(e){this.constrainVideoBitrateKbps=e}disableVideoFec(){this.constrainOfferToRemoveVideoFec=!0}gotOffer(e){this.constrainOfferToRemoveVideoFec&&(e.sdp=e.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),e.sdp=e.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(e),this.pc2.setRemoteDescription(e),this.pc2.createAnswer().then(this.gotAnswer.bind(this),this.reportFatal.bind(this))}gotAnswer(e){this.constrainVideoBitrateKbps&&(e.sdp=e.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${this.constrainVideoBitrateKbps}\r
`)),this.pc2.setLocalDescription(e),this.pc1.setRemoteDescription(e)}establishConnection(){this.pc1.createOffer().then(this.gotOffer.bind(this),this.reportFatal.bind(this))}reportFatal(e){console.error("Error:",e)}async getRoundTripTime(){const[e,i]=await Promise.all([this.pc1.getStats(),this.pc2.getStats()]);let s,r;if(e.forEach(n=>{n.type==="candidate-pair"&&n.nominated===!0&&n.bytesSent>0&&(s=n)}),i.forEach(n=>{n.type==="candidate-pair"&&n.nominated===!0&&n.bytesReceived>0&&(r=n)}),s&&r)try{if(s.currentRoundTripTime&&r.currentRoundTripTime)return{rtt:s.currentRoundTripTime,backendRTT:r.currentRoundTripTime};const n=(r.lastPacketReceivedTimestamp-s.lastPacketSentTimestamp)/1e3;return{rtt:n,backendRTT:n}}catch{return}}close(){this.pc1.close(),this.pc2.close()}}class mR extends rs{constructor(e){super(),v(this,"call"),v(this,"timeOut"),this.call=new ra(e)}start(e=1e4){this.call.establishConnection(),this.timeOut=setTimeout(this.testFailed.bind(this),e)}testComplete(e){clearTimeout(this.timeOut),this.call.close(),this.emit("done",e)}testFailed(e){console.warn("Test failed, ",e),this.call.close(),this.emit("failed",e)}}const CN=8,PN=1/1e3;class RN extends mR{constructor(e){super(e),v(this,"senderChannel"),v(this,"recieveChannel"),v(this,"startTime"),v(this,"lastBitrateMeasureTime"),v(this,"sentPayloadBytes",0),v(this,"recievedPayloadBytes",0),v(this,"lastReceivedPayloadBytes",0),v(this,"stopSending",!1),v(this,"testProgress",0),v(this,"samplePacket",""),v(this,"finalBitrateSum",0),v(this,"bitRateSampels",0),v(this,"maxNumberOfPacketsToSend",0),v(this,"bytesToKeepBuffered",0),v(this,"testDurationSeconds",5),this.call.setIceCandidateFilter(ra.isNotHostCandidate),this.senderChannel=this.call.pc1.createDataChannel(null);for(let i=0;i<1024*256;i+=1)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.testDurationSeconds=4,this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onRecieverChannel.bind(this))}sendingStep(){const e=new Date;this.startTime||(this.startTime=e,this.lastBitrateMeasureTime=e);for(let s=0;s!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);s+=1){this.sentPayloadBytes+=this.samplePacket.length;try{this.senderChannel.send(this.samplePacket)}catch{}}const i=e.getTime()-this.startTime.getTime();i>=1e3*this.testDurationSeconds?(this.stopSending=!0,this.testProgress=100):(this.testProgress=i/(10*this.testDurationSeconds),setTimeout(this.sendingStep.bind(this),1))}onMessageRecieved(e){this.recievedPayloadBytes+=e.data.length;const i=new Date,s=i.getTime()-this.lastBitrateMeasureTime.getTime();if(s>=1e3){const r=(this.recievedPayloadBytes-this.lastReceivedPayloadBytes)*CN/(s/1e3);this.finalBitrateSum+=r,this.bitRateSampels+=1,this.lastReceivedPayloadBytes=this.recievedPayloadBytes,this.lastBitrateMeasureTime=i}if(this.stopSending&&this.sentPayloadBytes===this.recievedPayloadBytes){const r=this.finalBitrateSum/this.bitRateSampels;this.testComplete({throughput:Math.round(r*PN)})}}testComplete(e){this.call.getRoundTripTime().then(({rtt:i,backendRTT:s})=>super.testComplete({RTT:i,backendRTT:s,throughput:e.throughput}))}onRecieverChannel(e){this.recieveChannel=e.channel,this.recieveChannel.addEventListener("message",this.onMessageRecieved.bind(this))}}class n_ extends mR{constructor(e,i=ra.noFilter){super(e),v(this,"ch1"),v(this,"ch2"),this.call.setIceCandidateFilter(i);const s=this.call.pc1.createDataChannel(null);this.ch1=s,s.addEventListener("open",()=>{s.send("hello")}),s.addEventListener("message",this.onCh1Recieve.bind(this)),this.call.pc2.addEventListener("datachannel",this.dataChannelHandler.bind(this))}onCh1Recieve(e){e.data!=="world"?this.hangup("Invalid data transmitted."):this.testComplete({connectivity:!0})}onCh2Recieve(e){if(e.data!=="hello")this.hangup("Invalid data transmitted.");else try{this.ch2.send("world")}catch{}}dataChannelHandler(e){const i=e.channel;this.ch2=i,i.addEventListener("message",this.onCh2Recieve.bind(this))}hangup(e){this.testFailed(e)}}class IN extends n_{constructor(e){super(e,ra.isHost)}}class AN extends n_{constructor(e){super(e,ra.isRelay)}}class DN extends n_{constructor(e){super(e,ra.isReflexive)}}class MN{constructor(){v(this,"ipInformation",null)}async getIPDetails({peerId:e}){var i;if(!this.ipInformation){try{const r=await(await fetch("https://media-location.dyte.io")).json();if(((i=r.loc)==null?void 0:i.length)>5)return this.ipInformation=r,r;throw Error("Insufficient data")}catch{}const s=await fetch(`https://location-service.dyte.io/?token=3c493932b0624c&peerId=${e}`,{method:"POST"});this.ipInformation=await s.json()}return this.ipInformation}}const a_=new MN,H2=[{urls:"turn:turn.dyte.in:443?transport=tcp",username:"dyte",credential:"dytein",credentialType:"password"},{urls:"turn:turn.dyte.in:3478?transport=udp",username:"dyte",credential:"dytein",credentialType:"password"}];function ON(t){const[e,i]=t.split(",");return{coords:{latitude:Number(e),longitude:Number(i)}}}class fR{constructor(){v(this,"transport"),v(this,"candidatePair"),v(this,"outboundVideoRtp",new Map),v(this,"inboundVideoRtp",new Map),v(this,"outboundAudioRtp",new Map),v(this,"inboundAudioRtp",new Map),v(this,"remoteInboundRtp",new Map),v(this,"producerStreamMap",new Map),v(this,"consumerStreamMap",new Map),v(this,"staleProducerStreamMap",!1),v(this,"staleConsumerStreamMap",!1)}}class vR{constructor(){v(this,"outboundProducerMap",new Map),v(this,"inboundConsumerMap",new Map),v(this,"consumerPeerIdMap",new Map),v(this,"overallProducingTransportsStatsMap",{}),v(this,"overallConsumingTransportsStatsMap",{}),v(this,"overallConsumersStatsMap",{}),v(this,"overallProducersStatsMap",{}),v(this,"consumerIdsWithFreezedVideo",new Set),v(this,"consumerIdsWithFreezedAudio",new Set),v(this,"producerIdsWithFreezedVideo",new Set),v(this,"producerIdsWithFreezedAudio",new Set),v(this,"freezedProducingTransportIds",new Set),v(this,"freezedConsumingTransportIds",new Set),v(this,"ipDetails"),v(this,"callStatsInstance")}async registerProducer(e){await this.generateProducerStreamMap(e),e.observer.on("close",this.deregisterProducer.bind(this,e))}processInboundConsumerVideoStats(e,i,s){var r,n;const a=((n=(r=this==null?void 0:this.callStatsInstance)==null?void 0:r.consumerSharedMediaStatesMap)==null?void 0:n.get(e))||{};i.totalVideoPacketsReceived===s.packetsReceived?(this.consumerIdsWithFreezedVideo.add(e),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoFreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_video_status","pause",e))):(i.totalVideoPacketsReceived=s.packetsReceived,this.consumerIdsWithFreezedVideo.has(e)&&(this.consumerIdsWithFreezedVideo.delete(e),this.callStatsInstance&&a.video&&(this.callStatsInstance.logger.debug("callstats::measurements::consumerVideoDefreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_video_status","resume",e))))}processInboundConsumerAudioStats(e,i,s){var r,n;const a=((n=(r=this==null?void 0:this.callStatsInstance)==null?void 0:r.consumerSharedMediaStatesMap)==null?void 0:n.get(e))||{};i.totalAudioPacketsReceived===s.packetsReceived?(this.consumerIdsWithFreezedAudio.add(e),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioFreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","pause",e))):(i.totalAudioPacketsReceived=s.packetsReceived,this.consumerIdsWithFreezedAudio.has(e)&&(this.consumerIdsWithFreezedAudio.delete(e),this.callStatsInstance&&a.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::consumerAudioDefreezed",{consumerId:e}),this.callStatsInstance.eventHandler.emit("consumer_audio_status","resume",e))))}processOutboundProducerVideoStats(e,i,s){var r;const n=((r=this==null?void 0:this.callStatsInstance)==null?void 0:r.currentUserMediaStates)||{};i.totalVideoPacketsSent===s.packetsSent?(this.producerIdsWithFreezedVideo.add(e),this.callStatsInstance&&n.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoFreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_video_status","pause",e))):(i.totalVideoPacketsSent=s.packetsSent,this.producerIdsWithFreezedVideo.has(e)&&(this.producerIdsWithFreezedVideo.delete(e),this.callStatsInstance&&n.video&&(this.callStatsInstance.logger.debug("callStats::measurements::producerVideoDefreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_video_status","resume",e))))}processOutboundProducerAudioStats(e,i,s){var r;const n=((r=this==null?void 0:this.callStatsInstance)==null?void 0:r.currentUserMediaStates)||{};i.totalAudioPacketsSent===s.packetsSent?(this.producerIdsWithFreezedAudio.add(e),this.callStatsInstance&&n.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioFreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_audio_status","pause",e))):(i.totalAudioPacketsSent=s.packetsSent,this.producerIdsWithFreezedAudio.has(e)&&(this.producerIdsWithFreezedAudio.delete(e),this.callStatsInstance&&n.audio&&(this.callStatsInstance.logger.debug("callStats::measurements::producerAudioDefreezed",{producerId:e}),this.callStatsInstance.eventHandler.emit("producer_audio_status","resume",e))))}processProducingTransportStats(e,i,s){var r;const n=((r=this==null?void 0:this.callStatsInstance)==null?void 0:r.currentUserMediaStates)||{},{audio:a,video:o,screen:c}=n,u=a||o||c;i.totalPacketsSent===s.packetsSent?(this.freezedProducingTransportIds.add(e),this.callStatsInstance&&u&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportFreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("producing_transport_status","pause",e))):(i.totalPacketsSent=s.packetsSent,this.freezedProducingTransportIds.has(e)&&(this.freezedProducingTransportIds.delete(e),this.callStatsInstance&&u&&(this.callStatsInstance.logger.debug("callStats::measurements::producingTransportDefreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("producing_transport_status","resume",e))))}processConsumingTransportStats(e,i,s){var r,n;const a=!!Array.from(((n=(r=this==null?void 0:this.callStatsInstance)==null?void 0:r.consumerSharedMediaStatesMap)==null?void 0:n.values())||[]).reduce((o,c)=>o||c.audio||c.video||c.screen,!1);i.totalPacketsReceived===s.packetsSent?(this.freezedConsumingTransportIds.add(e),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportFreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","pause",e))):(i.totalPacketsReceived=s.packetsSent,this.freezedConsumingTransportIds.has(e)&&(this.freezedConsumingTransportIds.delete(e),this.callStatsInstance&&a&&(this.callStatsInstance.logger.debug("callStats::measurements::consumingTransportDefreezed",{transportId:e}),this.callStatsInstance.eventHandler.emit("consuming_transport_status","resume",e))))}async registerConsumer(e){await this.generateConsumerStreamMap(e),this.consumerPeerIdMap.set(e.id,{producerId:e.producerId,peerId:e.appData.peerId,appData:e.appData}),e.observer.on("close",this.deregisterConsumer.bind(this,e))}async generateProducerStreamMap(e,i=!1){const s=await e.getStats(),r=i?this.getProducerStatsFromReport(this.parseRTCReport(s,["outbound-rtp","remote-inbound-rtp"],!1,e.id))[0]:void 0;for(const n of s.values())switch(n.type){case"outbound-rtp":{this.outboundProducerMap.set(n.id,e.id);break}}return r}async generateConsumerStreamMap(e,i=!1){const s=await e.getStats(),r=i?this.getConsumerStatsFromReport(this.parseRTCReport(s,["inbound-rtp"],!1,e.id))[0]:void 0;for(const n of s.values())switch(n.type){case"inbound-rtp":{this.inboundConsumerMap.set(n.id,e.id);break}}return r}deregisterProducer(e){this.outboundProducerMap.forEach((i,s)=>{i===e.id&&this.outboundProducerMap.delete(s)})}deregisterConsumer(e){this.inboundConsumerMap.forEach((i,s)=>{i===e.id&&this.inboundConsumerMap.delete(s)}),this.consumerPeerIdMap.delete(e.id)}parseRTCReport(e,i=[],s=!1,r=void 0,n=void 0){const a=e,o=new fR,c=i.length?new Set(i):void 0;for(const u of a.values()){if(c){if(c.size===0)break;if(c.has(u.type))s&&c.delete(u.type);else continue}switch(u.type){case"candidate-pair":{if(u.nominated===!0||u.selected===!0){const l=u,h={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=h;break}break}case"transport":{const l=u;n&&(n.producing&&(this.overallProducingTransportsStatsMap[n.id]||(this.overallProducingTransportsStatsMap[n.id]={totalPacketsSent:0})),n.consuming&&(this.overallConsumingTransportsStatsMap[n.id]||(this.overallConsumingTransportsStatsMap[n.id]={totalPacketsReceived:0})));const h={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=h,n){if(n.producing){const g=this.overallProducingTransportsStatsMap[n.id];this.processProducingTransportStats(n.id,g,h)}if(n.consuming){const g=this.overallConsumingTransportsStatsMap[n.id];this.processConsumingTransportStats(n.id,g,h)}}break}case"remote-inbound-rtp":{const l=u,h={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,h);break}case"outbound-rtp":{const l=u,h=r||this.outboundProducerMap.get(u.id);this.overallProducersStatsMap[h]||(this.overallProducersStatsMap[h]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[h];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(u.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(h)||o.producerStreamMap.set(h,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,_={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.targetBitrate,totalPacketSendDelay:f.totalPacketSendDelay,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(u.id,_),o.producerStreamMap.get(h).outboundVideoRtpId.push(u.id),this.processOutboundProducerVideoStats(h,g,_)}else if(l.mediaType==="audio"){const f=l,_={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(u.id,_),o.producerStreamMap.get(h).outboundAudioRtpId.push(u.id),this.processOutboundProducerAudioStats(h,g,_)}}break}case"inbound-rtp":{const l=u,h=r||this.inboundConsumerMap.get(u.id);if(l.ssrc===1234)break;this.overallConsumersStatsMap[h]||(this.overallConsumersStatsMap[h]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[h];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(u.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(h)||o.consumerStreamMap.set(h,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,_={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped,framesPerSecond:f.framesPerSecond,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(u.id,_),o.consumerStreamMap.get(h).inboundVideoRtpId.push(u.id),this.processInboundConsumerVideoStats(h,g,_)}else if(l.mediaType==="audio"){const f=l,_={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(u.id,_),o.consumerStreamMap.get(h).inboundAudioRtpId.push(u.id),this.processInboundConsumerAudioStats(h,g,_)}}break}}}if(o.outboundVideoRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let u=0,l=0;o.remoteInboundRtp.forEach((h,g)=>{h.roundTripTime&&h.roundTripTime>u&&(u=h.roundTripTime,l=h.totalRoundTripTime)}),o.transport.roundTripTime=u,o.transport.totalRoundTripTime=l}return o}async getProducersReport(e){const i=e.map(s=>this.generateProducerStreamMap(s,!0));return i.length>0?Promise.all(i):void 0}async getConsumersReport(e){const i=e.map(s=>this.generateConsumerStreamMap(s,!0));return i.length>0?Promise.all(i):void 0}async getTransportReport(e){return e.getStats()}async getProcessedStats(e,i,s){const r=await this.getTransportReport(e),n={producing:s,consuming:i,id:e.id},a=r,o=this.parseRTCReport(a,["transport","candidate-pair","inbound-rtp","outbound-rtp","remote-inbound-rtp"],!1,void 0,n);if(!o)return;const c={stats:o.transport,transportId:e.id,consuming:i,producing:s},u=o.staleProducerStreamMap?void 0:this.getProducerStatsFromReport(o),l=o.staleConsumerStreamMap?void 0:this.getConsumerStatsFromReport(o);return{transportReport:c,producerReport:u,consumerReport:l}}getProducerStatsFromReport(e){const i=[];try{e.producerStreamMap.forEach((s,r)=>{var n,a;i.push({producerId:r,videoStats:s.outboundVideoRtpId.map(o=>e.outboundVideoRtp.get(o)),audioStats:s.outboundAudioRtpId.map(o=>e.outboundAudioRtp.get(o)),appData:((a=(n=this.callStatsInstance.producers)==null?void 0:n.get(r))==null?void 0:a.appData)||null})})}catch(s){this.callStatsInstance.logger.error("callStats::measurements::getProducerStatsFromReport",{error:{reason:s.reason,message:s.message}})}return i}getConsumerStatsFromReport(e){const i=[];try{e.consumerStreamMap.forEach((s,r)=>{const{peerId:n,producerId:a,appData:o}=this.consumerPeerIdMap.get(r);i.push({consumerId:r,peerId:n,producerId:a,appData:o,videoStats:s.inboundVideoRtpId.map(c=>e.inboundVideoRtp.get(c)),audioStats:s.inboundAudioRtpId.map(c=>e.inboundAudioRtp.get(c))})})}catch(s){console.error("getConsumersReport: ",s,e)}return i}async getUserLocation(){return new Promise((e,i)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{e(s)}):i()}catch(s){i(s)}})}async getConnectivity(e){try{const i={iceServers:e||H2},s=new Promise((u,l)=>{try{const h=new IN(i);h.addListener("done",u),h.addListener("failed",()=>{u({connectivity:!1})}),h.start(2e3)}catch(h){l(h)}}),r=new Promise((u,l)=>{try{const h=new AN(i);h.addListener("done",u),h.addListener("failed",()=>{u({connectivity:!1})}),h.start(2e3)}catch(h){l(h)}}),n=new Promise((u,l)=>{try{const h=new DN(i);h.addListener("done",u),h.addListener("failed",()=>{u({connectivity:!1})}),h.start(2e3)}catch(h){l(h)}}),[a,o,c]=await Promise.all([s,r,n]);return{host:a==null?void 0:a.connectivity,relay:o==null?void 0:o.connectivity,reflexive:c==null?void 0:c.connectivity}}catch{return{host:!1,relay:!1,reflexive:!1}}}async getThroughput(e){try{const i=await new Promise((s,r)=>{try{const n={iceServers:e||H2},a=new RN(n);a.addListener("done",s),a.addListener("failed",r),a.start(1e4)}catch(n){r(n)}});return{throughput:i.throughput,fractionalLoss:0,RTT:i.RTT,jitter:0,backendRTT:i.backendRTT}}catch{return}}async getIPDetails(){var e;try{return this.ipDetails||(this.ipDetails=await a_.getIPDetails({peerId:(e=this.callStatsInstance)==null?void 0:e.peerId})),this.ipDetails}catch{return}}async getNetworkQuality(e){const[i,s]=await Promise.all([this.getConnectivity(e),this.getThroughput(e)]);return{connectivity:i,throughput:s==null?void 0:s.throughput,fractionalLoss:s==null?void 0:s.fractionalLoss,RTT:s==null?void 0:s.RTT,jitter:s==null?void 0:s.jitter,backendRTT:s==null?void 0:s.backendRTT}}async getNetworkInfo(e){var i;const[s,r,n]=await Promise.all([this.getConnectivity(e),this.getThroughput(e),this.getIPDetails()]);return{ipDetails:n,effectiveNetworkType:(i=navigator.connection)==null?void 0:i.effectiveType,location:n.loc?ON(n.loc):void 0,turnConnectivity:s?s.host||s.relay||s.reflexive:!1,connectivity:s,throughput:r==null?void 0:r.throughput,fractionalLoss:r==null?void 0:r.fractionalLoss,RTT:r==null?void 0:r.RTT,jitter:r==null?void 0:r.jitter,backendRTT:r==null?void 0:r.backendRTT}}}class LN extends vR{}class yR extends vR{constructor(){super(...arguments),v(this,"producerMap",new Map),v(this,"consumerMap",new Map)}async registerProducer(e){this.producerMap.set(e.id,e),await this.generateProducerStreamMap(e),e.observer.on("close",this.deregisterProducer.bind(this,e))}async registerConsumer(e){this.consumerMap.set(e.id,e),await this.generateConsumerStreamMap(e),this.consumerPeerIdMap.set(e.id,{producerId:e.producerId,peerId:e.appData.peerId,appData:e.appData}),e.observer.on("close",this.deregisterConsumer.bind(this,e))}async generateConsumerStreamMap(e,i=!1){const s=await e.getStats(),r=this.parseRTCReport(s,["inbound-rtp"],!1,e.id),n=[...r.consumerStreamMap.values()][0],a=i?this.getConsumerStatsFromParsedConsumerStats(r,n,e.id):void 0;for(const o of s.values())switch(o.type){case"inbound-rtp":{this.inboundConsumerMap.set(o.id,e.id);break}}return a}deregisterProducer(e){this.producerMap.delete(e.id),this.outboundProducerMap.forEach((i,s)=>{i===e.id&&this.outboundProducerMap.delete(s)})}deregisterConsumer(e){this.consumerMap.delete(e.id),this.inboundConsumerMap.forEach((i,s)=>{i===e.id&&this.inboundConsumerMap.delete(s)}),this.consumerPeerIdMap.delete(e.id)}parseRTCReport(e,i=[],s=!1,r=void 0,n=void 0){const a=e,o=new fR,c=i.length?new Set(i):void 0;for(const u of a.values()){if(c){if(c.size===0)break;if(c.has(u.type))s&&c.delete(u.type);else continue}switch(u.type){case"candidate-pair":{if(u.nominated===!0||u.selected===!0){const l=u,h={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,currentRoundTripTime:l.currentRoundTripTime,totalRoundTripTime:l.totalRoundTripTime,availableOutgoingBitrate:l.availableOutgoingBitrate};o.candidatePair=h;break}break}case"transport":{const l=u;n&&(n.producing&&(this.overallProducingTransportsStatsMap[n.id]||(this.overallProducingTransportsStatsMap[n.id]={totalPacketsSent:0})),n.consuming&&(this.overallConsumingTransportsStatsMap[n.id]||(this.overallConsumingTransportsStatsMap[n.id]={totalPacketsReceived:0})));const h={bytesReceived:l.bytesReceived,bytesSent:l.bytesSent,packetsSent:l.packetsSent,packetsReceived:l.packetsReceived,dtlsCipher:l.dtlsCipher,dtlsState:l.dtlsState,iceRole:l.iceRole};if(o.transport=h,n){if(n.producing){const g=this.overallProducingTransportsStatsMap[n.id];this.processProducingTransportStats(n.id,g,h)}if(n.consuming){const g=this.overallConsumingTransportsStatsMap[n.id];this.processConsumingTransportStats(n.id,g,h)}}break}case"remote-inbound-rtp":{const l=u,h={jitter:l.jitter,fractionLost:l.fractionLost,roundTripTime:l.roundTripTime,roundTripTimeMeasurements:l.roundTripTimeMeasurements,totalRoundTripTime:l.totalRoundTripTime,packetsLost:l.packetsLost};o.remoteInboundRtp.set(l.localId,h);break}case"outbound-rtp":{const l=u,h=r||this.outboundProducerMap.get(u.id);this.overallProducersStatsMap[h]||(this.overallProducersStatsMap[h]={totalVideoPacketsSent:0,totalAudioPacketsSent:0});const g=this.overallProducersStatsMap[h];if(["video","audio"].includes(l.mediaType)){if(!this.outboundProducerMap.has(u.id)){o.staleProducerStreamMap=!0,c&&c.delete("outbound-rtp");break}o.producerStreamMap.has(h)||o.producerStreamMap.set(h,{outboundVideoRtpId:[],outboundAudioRtpId:[]});const m={bytesSent:l.bytesSent,packetsSent:l.packetsSent,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,_={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesEncoded:f.framesEncoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesSent:f.framesSent,keyFramesEncoded:f.keyFramesEncoded,firCount:f.firCount,encoderImplementation:f.encoderImplementation,hugeFramesSent:f.hugeFramesSent,pliCount:f.pliCount,qpSum:f.qpSum,qualityLimitationReason:f.qualityLimitationReason,qualityLimitationDurations:f.qualityLimitationDurations,qualityLimitationResolutionChanges:f.qualityLimitationResolutionChanges,totalEncodeTime:f.totalEncodeTime,totalPacketSendDelay:f.totalEncodeTime,retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundVideoRtp.set(u.id,_),o.producerStreamMap.get(h).outboundVideoRtpId.push(u.id),this.processOutboundProducerVideoStats(h,g,_)}else if(l.mediaType==="audio"){const f=l,_={retransmittedBytesSent:f.retransmittedBytesSent,retransmittedPacketsSent:f.retransmittedPacketsSent,...m};o.outboundAudioRtp.set(u.id,_),o.producerStreamMap.get(h).outboundAudioRtpId.push(u.id),this.processOutboundProducerAudioStats(h,g,_)}}break}case"inbound-rtp":{const l=u,h=r||this.inboundConsumerMap.get(u.id);this.overallConsumersStatsMap[h]||(this.overallConsumersStatsMap[h]={totalVideoPacketsReceived:0,totalAudioPacketsReceived:0});const g=this.overallConsumersStatsMap[h];if(["video","audio"].includes(l.mediaType)){if(!this.inboundConsumerMap.has(u.id)){o.staleConsumerStreamMap=!0,c&&c.delete("inbound-rtp");break}o.consumerStreamMap.has(h)||o.consumerStreamMap.set(h,{inboundVideoRtpId:[],inboundAudioRtpId:[]});const m={bytesReceived:l.bytesReceived,packetsReceived:l.packetsReceived,packetsLost:l.packetsLost,jitter:l.jitter,nackCount:l.nackCount};if(l.mediaType==="video"){if(l.decoderImplementation==="unknown")break;const f=l,_={frameHeight:f.frameHeight,frameWidth:f.frameWidth,framesDecoded:f.framesDecoded,framesDropped:f.framesDropped?f.framesDropped:f.droppedFrames,framesPerSecond:f.framesPerSecond?f.framesPerSecond:f.framerateMean,framesReceived:f.framesReceived,keyFramesDecoded:f.keyFramesDecoded,firCount:f.firCount,decoderImplementation:f.decoderImplementation,...m};o.inboundVideoRtp.set(u.id,_),o.consumerStreamMap.get(h).inboundVideoRtpId.push(u.id),this.processInboundConsumerVideoStats(h,g,_)}else if(l.mediaType==="audio"){const f=l,_={audioLevel:f.audioLevel,concealedSampels:f.concealedSampels,concealmentEvents:f.concealmentEvents,jitterBufferDelay:f.jitterBufferDelay,jitterBufferEmittedCount:f.jitterBufferEmittedCount,totalAudioEnergy:f.totalAudioEnergy,totalSamplesDuration:f.totalSamplesDuration,totalSamplesReceived:f.totalSamplesReceived,...m};o.inboundAudioRtp.set(u.id,_),o.consumerStreamMap.get(h).inboundAudioRtpId.push(u.id),this.processInboundConsumerAudioStats(h,g,_)}}break}}}if(o.outboundVideoRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.outboundAudioRtp.forEach((u,l)=>{u.remoteData=o.remoteInboundRtp.get(l)}),o.candidatePair&&(o.transport?(o.transport.bytesReceived=o.candidatePair.bytesReceived,o.transport.bytesSent=o.candidatePair.bytesSent,o.transport.totalRoundTripTime=o.candidatePair.totalRoundTripTime,o.transport.availableOutgoingBitrate=o.candidatePair.availableOutgoingBitrate,o.transport.roundTripTime=o.candidatePair.currentRoundTripTime):o.transport={bytesReceived:o.candidatePair.bytesReceived,bytesSent:o.candidatePair.bytesSent,totalRoundTripTime:o.candidatePair.totalRoundTripTime,availableOutgoingBitrate:o.candidatePair.availableOutgoingBitrate,roundTripTime:o.candidatePair.currentRoundTripTime}),o.transport&&!o.transport.roundTripTime){let u=0,l=0;o.remoteInboundRtp.forEach((h,g)=>{h.roundTripTime&&h.roundTripTime>u&&(u=h.roundTripTime,l=h.totalRoundTripTime)}),o.transport.roundTripTime=u,o.transport.totalRoundTripTime=l}return o}getProducerStatsFromReport(e){const i=[];try{e.producerStreamMap.forEach((s,r)=>{const n=this.producerMap.get(r),a=n.track.getSettings(),o=s.outboundVideoRtpId.map(u=>{const l=e.outboundVideoRtp.get(u);return l.frameHeight||(l.frameHeight=a.height,l.frameWidth=a.width,l.framesPerSecond=a.frameRate),l}),c={producerId:r,appData:n.appData,videoStats:o,audioStats:s.outboundAudioRtpId.map(u=>e.outboundAudioRtp.get(u))};i.push(c)})}catch(s){console.error("getProducersReport: ",s,e)}return i}getConsumerStatsFromParsedConsumerStats(e,i,s){let r;try{const{peerId:n,producerId:a,appData:o}=this.consumerPeerIdMap.get(s),c=i==null?void 0:i.inboundVideoRtpId.map(u=>{const l=this.consumerMap.get(s).track.getSettings(),h=e.inboundVideoRtp.get(u);return h.frameHeight||(h.frameHeight=l.height,h.frameWidth=l.width,h.framesPerSecond=l.frameRate),h});r={consumerId:s,peerId:n,producerId:a,appData:o,videoStats:c,audioStats:i==null?void 0:i.inboundAudioRtpId.map(u=>e.inboundAudioRtp.get(u))}}catch(n){console.error("getConsumerStatsFromParsedConsumerStats: ",n,e)}return r}getConsumerStatsFromReport(e){const i=[];try{e.consumerStreamMap.forEach((s,r)=>{i.push(this.getConsumerStatsFromParsedConsumerStats(e,s,r))})}catch(s){console.error("getConsumerStatsFromReport: ",s,e)}return i}}class NN extends yR{}function Qm(t,e,i,s){if(typeof i=="function"&&s instanceof e)i.call(null,s,t);else throw s}function W2(t,e,i){const s=t.value;return t.value=function(...r){try{const n=s.apply(this,r);return n&&n instanceof Promise?n.catch(a=>{Qm(this,e,i,a)}):n}catch(n){Qm(this,e,i,n)}return null},t}const be=(t,e)=>(i,s,r)=>{const n=r.value;return r.value=function(...a){try{const o=n.apply(this,a);return o&&o instanceof Promise?o.catch(c=>{Qm(this,t,e,c)}):o}catch(o){Qm(this,t,e,o)}return null},r},UN=(t,e)=>(i,s,r)=>{if(r)return W2(r,t,e);for(const n of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,n);a.value instanceof Function&&Object.defineProperty(i.prototype,n,W2(a,t,e))}};var me=globalThis&&globalThis.__decorate||function(t,e,i,s){var r=arguments.length,n=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(n=(r<3?a(n):r>3?a(e,i,n):a(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n};const fe=console;let he=class{constructor(t="https://api.testingv3.dyte.in",e="Blink",i=Ap.PRODUCTION,s,r,n){switch(v(this,"eventHandler"),v(this,"measurements"),v(this,"producingTransport"),v(this,"consumingTransport"),v(this,"producers",new Map),v(this,"consumers",new Map),v(this,"iceServers"),v(this,"connectionInfoPromise"),v(this,"pingStatsTimeout"),v(this,"logger"),v(this,"env"),v(this,"peerId"),v(this,"consumerSharedMediaStatesMap",new Map),v(this,"currentUserMediaStates",{}),this.env=i,this.logger=r,this.peerId=n,this.eventHandler=new TN({logger:r,peerId:n,env:i}),this.logger.debug("callStats::engineName: ",{engineName:e}),e){case"Blink":this.measurements=new LN;break;case"Gecko":this.measurements=new yR;break;case"WebKit":this.measurements=new NN;break;default:throw Error(`Unknown engineName! ${e}`)}this.measurements.callStatsInstance=this,this.registerProducer=this.registerProducer.bind(this),this.registerConsumer=this.registerConsumer.bind(this)}registerIceServers(t){this.iceServers=t}registerConsumer(t){var e;this.consumerSharedMediaStatesMap.has(t.id)||this.consumerSharedMediaStatesMap.set(t.id,{}),this.consumers.set(t.id,t),this.measurements.registerConsumer(t),this.logger.debug("callStats::registerConsumer",{consumerId:t.id,consumerkind:t.kind,isScreenShare:!!((e=t.appData)!=null&&e.screenShare)}),t.observer.on("close",this.deRegisterConsumer.bind(this,t))}registerProducer(t){var e;this.producers.set(t.id,t),this.measurements.registerProducer(t),this.logger.debug("callStats::registerProducer",{producerId:t.id,producerKind:t.kind,isScreenShare:!!((e=t.appData)!=null&&e.screenShare)}),t.observer.on("close",this.deRegisterProducer.bind(this,t))}sendConsumerSharedMediaStateEvent(t,e){this.consumerSharedMediaStatesMap.has(t)||this.consumerSharedMediaStatesMap.set(t,{});const i=this.consumerSharedMediaStatesMap.get(t);this.consumerSharedMediaStatesMap.set(t,Object.assign(i,e))}registerProducingTransport(t){var e;this.producingTransport=t,t.observer.on("close",this.disconnectProducingTransport.bind(this,t)),t.observer.on("disconnect",this.disconnectProducingTransport.bind(this,t)),Array.from(((e=t._producers)==null?void 0:e.values())||[]).forEach(i=>{this.registerProducer(i)}),t.observer.on("newproducer",this.registerProducer)}registerConsumingTransport(t){var e;this.consumingTransport=t,t.observer.on("close",this.disconnectConsumingTransport.bind(this,t)),t.observer.on("disconnect",this.disconnectConsumingTransport.bind(this,t)),Array.from(((e=t._consumers)==null?void 0:e.values())||[]).forEach(i=>{this.registerConsumer(i)}),t.observer.on("newconsumer",this.registerConsumer)}deRegisterConsumer(t){this.consumers.delete(t.id)}deRegisterProducer(t){this.producers.delete(t.id)}disconnectConsumingTransport(){this.consumingTransport=void 0}disconnectProducingTransport(){this.producingTransport=void 0}callEvent(t){this.eventHandler.callEvent(t)}sendPreCallTestBeginEvent(){this.connectionInfoPromise=this.measurements.getNetworkInfo(this.iceServers),this.eventHandler.callEvent({event:G.PRECALL_TEST_BEGIN,timestamp:new Date}),this.connectionInfoPromise&&this.connectionInfoPromise.then(t=>{this.eventHandler.callEvent({event:G.PRECALL_TEST_COMPLETE,metaData:{connectionInfo:t},timestamp:new Date})})}sendScreenShareToggleEvent(t,e){this.currentUserMediaStates.screen=t,this.eventHandler.callEvent({event:t?G.SCREENSHARE_STARTED:G.SCREENSHARE_STOPPED,metaData:{ssrc:e},timestamp:new Date})}sendScreenShareRequestedEvent(){this.eventHandler.callEvent({event:G.SCREENSHARE_START_REQUESTED,timestamp:new Date})}sendActiveSpeakerEvent(t){this.eventHandler.callEvent({event:G.DOMINANT_SPEAKER,metaData:{peerId:t},timestamp:new Date})}devices(t,e){this.eventHandler.callEvent({event:t===Xs.AUDIO&&G.AUDIO_DEVICES_UPDATES||t===Xs.VIDEO&&G.VIDEO_DEVICES_UPDATES||t===Xs.SPEAKER&&G.SPEAKER_DEVICES_UPDATES,metaData:{deviceList:e},timestamp:new Date})}selectedDevice(t,e){this.eventHandler.callEvent({event:t===Xs.AUDIO&&G.SELECTED_MICROHPONE_UPDATE||t===Xs.VIDEO&&G.SELECTED_CAMERA_UPDATE||t===Xs.SPEAKER&&G.SELECTED_SPEAKER_UPDATE,metaData:{device:e},timestamp:new Date})}mediaPermission(t,e){this.eventHandler.callEvent({event:G.MEDIA_PERMISSION,metaData:{deviceType:t,permission:e},timestamp:new Date})}mediaPlaybackFailed(t){this.eventHandler.callEvent({event:t===Xs.AUDIO&&G.AUDIO_PLAY_FAILED||t===Xs.VIDEO&&G.VIDEO_PLAY_FAILED,metaData:{deviceType:t},timestamp:new Date})}mediaTrackMuted(t){this.eventHandler.callEvent({event:t===Xs.AUDIO&&G.AUDIO_TRACK_MUTED||t===Xs.VIDEO&&G.VIDEO_TRACK_MUTED,metaData:{deviceType:t},timestamp:new Date})}tabChanged(t){this.eventHandler.callEvent({event:G.TAB_CHANGE,metaData:{isMeetingsTabActive:t},timestamp:new Date})}browserBackgrounded(){this.eventHandler.callEvent({event:G.BROWSER_BACKGROUNDED,timestamp:new Date})}browserForegrounded(){this.eventHandler.callEvent({event:G.BROWSER_FOREGROUNDED,timestamp:new Date})}legacySwitch(t){this.eventHandler.callEvent({event:G.LEGACY_SWITCH,metadata:{on:t},timestamp:new Date})}async getPreCallTestResults(){return this.connectionInfoPromise}sendCallJoinBeginEvent(t){t={...t,meetingEnv:this.env},t.deviceInfo={...t.deviceInfo,userAgent:navigator.userAgent,cpus:navigator.hardwareConcurrency,memory:navigator.deviceMemory},this.eventHandler.callEvent({event:G.CALL_JOIN_BEGIN,metaData:{peerMetaData:t},timestamp:new Date})}sendNetworkQualityTestBeginEvent(t){this.eventHandler.callEvent({event:G.NET_QUALITY_TEST_BEGIN,timestamp:new Date}),new Promise(async(e,i)=>{const s=[];try{for(const r of t)try{if(r.iceServers&&r.iceServers.length>0){const n=await this.measurements.getNetworkQuality(r.iceServers);s.push({...r,networkResults:n})}}catch(n){console.warn("Error handling ",n)}e({regionData:s})}catch(r){console.warn("Error in callstats, ",r),i(r)}}).then(e=>{this.eventHandler.callEvent({event:G.NET_QUALITY_TEST_END,timestamp:new Date,metaData:e})})}sendWebSocketConnectedEvent(){this.eventHandler.callEvent({event:G.WEBSOCKET_CONNECTED,timestamp:new Date})}sendTransportConnectedEvent(){this.eventHandler.callEvent({event:G.TRANSPORT_CONNECTED,timestamp:new Date})}sendAudioToggleEvent(t){this.currentUserMediaStates.audio=t;let e;t?e=G.AUDIO_ON:e=G.AUDIO_OFF,this.eventHandler.callEvent({event:e,timestamp:new Date})}sendVideoToggleEvent(t){this.currentUserMediaStates.video=t;let e;t?e=G.VIDEO_ON:e=G.VIDEO_OFF,this.eventHandler.callEvent({event:e,timestamp:new Date})}sendParticipantRoleToggleEvent(t){this.eventHandler.callEvent({event:G.PARTICIPANT_ROLE,timestamp:new Date,metaData:t})}startPingStats(t=7e3){this.sendPingStatsEvent(!1),this.pingStatsTimeout=setInterval(this.sendPingStatsEvent.bind(this),t)}stopPingStats(){clearInterval(this.pingStatsTimeout)}async sendPingStatsEvent(t=!0){let e,i;if(this.producingTransport&&(e=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),!e||!(e!=null&&e.producerReport))){this.logger.debug("callStats::sendPingStatsEvent::staleProducingTransport",{disclaimer:"Stale producer? Regenerating Stream Maps!"});const r=await this.measurements.getProducersReport([...this.producers.values()]);e&&r?e.producerReport=r:(e=await this.measurements.getProcessedStats(this.producingTransport,!1,!0),(!e||!(e!=null&&e.producerReport))&&this.logger.debug("callStats::sendPingStatsEvent::noProducingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}if(this.consumingTransport&&(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),!i||!i.consumerReport)){this.logger.debug("callStats::sendPingStatsEvent::staleConsumingTransport",{disclaimer:"Stale consumer? Regenerating Stream Maps!"});const r=await this.measurements.getConsumersReport([...this.consumers.values()]);i&&r?i.consumerReport=r:(i=await this.measurements.getProcessedStats(this.consumingTransport,!0,!1),(!i||!i.consumerReport)&&this.logger.debug("callStats::sendPingStatsEvent::noConsumingTransportReport",{disclaimer:"Stream maps invalid despite regenerating!"}))}const s={producingTransportStats:e?e==null?void 0:e.transportReport:void 0,consumingTransportStats:i?i==null?void 0:i.transportReport:void 0,producerStats:[].concat((e==null?void 0:e.producerReport)||[]).concat((i==null?void 0:i.producerReport)||[]),consumerStats:[].concat((i==null?void 0:i.consumerReport)||[]).concat((e==null?void 0:e.consumerReport)||[])};if(t&&s.producerStats.length===0&&s.consumerStats.length===0){await this.eventHandler.flush();return}this.eventHandler.callEvent({event:G.PING_STAT,metaData:s,timestamp:new Date})}sendIVSPlayerRebufferEvent(){this.eventHandler.callEvent({event:G.IVS_PLAYER_REBUFFERING,timestamp:new Date})}sendIVSPlayerAudioBlockEvent(){this.eventHandler.callEvent({event:G.IVS_PLAYER_AUDIO_BLOCKED,timestamp:new Date})}sendIVSPlayerPlaybackBlockedEvent(){this.eventHandler.callEvent({event:G.IVS_PLAYER_PLAYBACK_BLOCKED,timestamp:new Date})}sendIVSPlayerNetworkUnavailableEvent(){this.eventHandler.callEvent({event:G.IVS_PLAYER_NETWORK_UNAVAILABLE,timestamp:new Date})}sendIVSPlayerInitializedEvent(){this.eventHandler.callEvent({event:G.IVS_PLAYER_INITIALIZED,timestamp:new Date})}sendIVSPlayerWorkerErrorEvent(){this.eventHandler.callEvent({event:G.IVS_PLAYER_WORKER_ERROR,timestamp:new Date})}sendIVSPlayerErrorEvent(t){this.eventHandler.callEvent({event:G.IVS_PLAYER_ERROR,timestamp:new Date,metaData:t})}sendIVSPlayerRecoverableErrorEvent(t){this.eventHandler.callEvent({event:G.IVS_PLAYER_RECOVERABLE_ERROR,timestamp:new Date,metaData:t})}sendIVSPlayerAnalyticsEvent(t){this.eventHandler.callEvent({event:G.IVS_PLAYER_ANALYTICS_EVENT,timestamp:new Date,metaData:t})}sendIVSPlayerPlaybackRateChangedEvent(t){this.eventHandler.callEvent({event:G.IVS_PLAYER_PLAYBACK_RATE_CHANGED,timestamp:new Date,metaData:{updatedPlaybackRate:t}})}sendIVSPlayerQualityChanged(t){this.eventHandler.callEvent({event:G.IVS_PLAYER_QUALITY_CHANGED,timestamp:new Date,metaData:t})}sendPlayerLiveLatency(t){this.eventHandler.callEvent({event:G.LIVESTREAM_LATENCY,timestamp:new Date,metaData:{latency:t}})}sendDisconnectEvent(){this.eventHandler.callEvent({event:G.DISCONNECT,timestamp:new Date})}sendReconnectEvent(){this.eventHandler.callEvent({event:G.RECONNECT_ATTEMPT,timestamp:new Date})}};me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"registerIceServers",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"registerConsumer",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"registerProducer",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendConsumerSharedMediaStateEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"registerProducingTransport",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"registerConsumingTransport",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"deRegisterConsumer",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"deRegisterProducer",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"disconnectConsumingTransport",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"disconnectProducingTransport",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendPreCallTestBeginEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendScreenShareToggleEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendScreenShareRequestedEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendActiveSpeakerEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"devices",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"selectedDevice",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"mediaPermission",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"mediaPlaybackFailed",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"mediaTrackMuted",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"tabChanged",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"browserBackgrounded",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"browserForegrounded",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"legacySwitch",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"getPreCallTestResults",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendCallJoinBeginEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendNetworkQualityTestBeginEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendWebSocketConnectedEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendTransportConnectedEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendAudioToggleEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendVideoToggleEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendParticipantRoleToggleEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"startPingStats",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"stopPingStats",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendPingStatsEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerRebufferEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerAudioBlockEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerPlaybackBlockedEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerNetworkUnavailableEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerInitializedEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerWorkerErrorEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerErrorEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerRecoverableErrorEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerAnalyticsEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerPlaybackRateChangedEvent",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendIVSPlayerQualityChanged",null);me([be(TypeError,(t,e)=>fe.error(e,t))],he.prototype,"sendPlayerLiveLatency",null);he=me([UN(TypeError,(t,e)=>fe.error(e,t))],he);const $N=he;class jN extends rs{constructor(){super(...arguments),v(this,"stats"),v(this,"roomURL"),v(this,"peerId"),v(this,"backend"),v(this,"iceServers"),v(this,"initialized",!1),v(this,"stalled",!1),v(this,"ipInformation"),v(this,"logger")}async initialize({peerId:e,engineName:i,env:s=Ap.PRODUCTION,iceServers:r,apiBase:n="https://api.cluster.dyte.in",flags:a,logger:o=console}){var c,u,l;try{this.peerId=e,this.logger=o,this.ipInformation=await a_.getIPDetails({peerId:e}),this.backend=new $N(n,i,s,a,o,e),this.iceServers=r,(c=this.backend)==null||c.registerIceServers(this.iceServers),this.initialized=!0,(l=(u=this.backend)==null?void 0:u.eventHandler)==null||l.emit("initialized",this.ipInformation),this.emit("initialized",this.ipInformation),this.startPreCallTest()}catch(h){this.logger.error("callStats::CallStatsIntegration: ",{error:{reason:h.reason}}),this.stallCallStats()}}setRoomName(e){this.roomURL=e}configureSendTransport(e){var i;(i=this.backend)==null||i.registerProducingTransport(e)}configureRecvTransport(e){var i;(i=this.backend)==null||i.registerConsumingTransport(e)}async candidateRegionalNetworkQualityTest(e){var i;try{(i=this.backend)==null||i.sendNetworkQualityTestBeginEvent(e)}catch(s){this.logger.error("callStats::sendNetworkQualityTestBeginEvent",{error:{reason:s.reason}})}}async roomJoined(e){var i,s;(i=this.backend)==null||i.sendCallJoinBeginEvent(e),this.backend,(s=this.backend)==null||s.startPingStats()}audioOff(){var e;(e=this.backend)==null||e.sendAudioToggleEvent(!1)}audioOn(){var e;(e=this.backend)==null||e.sendAudioToggleEvent(!0)}videoOff(){var e;(e=this.backend)==null||e.sendVideoToggleEvent(!1)}videoOn(){var e;(e=this.backend)==null||e.sendVideoToggleEvent(!0)}callEnded(){var e,i;(e=this.backend)==null||e.stopPingStats(),(i=this.backend)==null||i.sendDisconnectEvent()}screenShareStart(e){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!0,e)}consumerSharedMediaState(e,i){var s;(s=this.backend)==null||s.sendConsumerSharedMediaStateEvent(e,i)}screenShareStop(e){var i;(i=this.backend)==null||i.sendScreenShareToggleEvent(!1,e)}screenShareRequested(){var e;(e=this.backend)==null||e.sendScreenShareRequestedEvent()}activeSpeaker(e){var i;e===this.peerId&&((i=this.backend)==null||i.sendActiveSpeakerEvent(e))}devices(e,i){var s;(s=this.backend)==null||s.devices(e,i)}selectedDevice(e,i){var s;(s=this.backend)==null||s.selectedDevice(e,i)}mediaPermission(e,i){var s;(s=this.backend)==null||s.mediaPermission(e,i)}mediaPlaybackFailed(e){var i;(i=this.backend)==null||i.mediaPlaybackFailed(e)}mediaTrackMuted(e){var i;(i=this.backend)==null||i.mediaTrackMuted(e)}tabChanged(e=!1){var i;(i=this.backend)==null||i.tabChanged(e)}browserBackgrounded(){var e;(e=this.backend)==null||e.browserBackgrounded()}browserForegrounded(){var e;(e=this.backend)==null||e.browserForegrounded()}legacySwitch(e){var i;(i=this.backend)==null||i.legacySwitch(e)}async startPreCallTest(){var e;(e=this.backend)==null||e.sendPreCallTestBeginEvent()}onPreCallTestResults(e){var i;return(i=this.backend)==null||i.eventHandler.once("precall_end",e),e}onReceivingConsumerAudioStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consumer_audio_status",e)}onReceivingConsumerVideoStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consumer_video_status",e)}onReceivingProducerAudioStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producer_audio_status",e)}onReceivingProducerVideoStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producer_video_status",e)}onReceivingProducingTransportStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("producing_transport_status",e)}onReceivingConsumingTransportStatus(e){var i;(i=this.backend)==null||i.eventHandler.on("consuming_transport_status",e)}onSafeInitialization(e){if(this.initialized)e(this.ipInformation,!1);else if(!this.stalled){const i=s=>{e(s,!0)};return this.once("initialized",i),i}return()=>{}}removeInitializationListener(e){this.removeListener("initialized",e)}stallCallStats(){this.stalled=!0,this.removeAllListeners("initialized")}ivsPlayerEvent(e,i){var s,r,n,a,o,c,u,l,h,g,m;switch(e){case"PlayerRebuffering":(s=this.backend)==null||s.sendIVSPlayerRebufferEvent();break;case"PlayerAudioBlocked":(r=this.backend)==null||r.sendIVSPlayerAudioBlockEvent();break;case"PlayerPlaybackBlocked":(n=this.backend)==null||n.sendIVSPlayerPlaybackBlockedEvent();break;case"PlayerNetworkUnavailable":(a=this.backend)==null||a.sendIVSPlayerNetworkUnavailableEvent();break;case"PlayerInitialized":(o=this.backend)==null||o.sendIVSPlayerInitializedEvent();break;case"PlayerWorkerError":(c=this.backend)==null||c.sendIVSPlayerWorkerErrorEvent();break;case"PlayerError":(u=this.backend)==null||u.sendIVSPlayerErrorEvent(i);break;case"PlayerRecoverableError":(l=this.backend)==null||l.sendIVSPlayerRecoverableErrorEvent(i);break;case"PlayerAnalyticsEvent":(h=this.backend)==null||h.sendIVSPlayerAnalyticsEvent(i);break;case"PlayerPlaybackRateChanged":(g=this.backend)==null||g.sendIVSPlayerPlaybackRateChangedEvent(i);break;case"PlayerQualityChanged":(m=this.backend)==null||m.sendIVSPlayerQualityChanged(i);break}}livestreamLatency(e){var i;(i=this.backend)==null||i.sendPlayerLiveLatency(e)}}const Z=new jN;Z.setMaxListeners(30);function zN(t){const{length:e}=this,i=t>=0?t:e+t;return i<0||i>=e?void 0:this[i]}Array.prototype.at||Object.assign(Array.prototype,{at:zN});function FN(t){const{length:e}=this,i=t>=0?t:e+t;return i<0||i>=e?void 0:this[i]}String.prototype.at||Object.assign(String.prototype,{at:FN});var Dp;(function(t){t.skip="SKIP",t.onAccept="ON_ACCEPT",t.skipOnPrivilegedUserEntry="SKIP_ON_PRIVILEGED_USER_ENTRY",t.skipOnAccept="SKIP_ON_ACCEPT"})(Dp||(Dp={}));var Ic;(function(t){t.none="NONE",t.recorder="RECORDER",t.livestreamer="LIVESTREAMER"})(Ic||(Ic={}));var Ym;(function(t){t.groupCall="GROUP_CALL",t.webinar="WEBINAR",t.audioRoom="AUDIO_ROOM",t.livestream="LIVESTREAM",t.chat="CHAT"})(Ym||(Ym={}));var q2;(function(t){t.SKIP="skip",t.SKIP_ON_PRIVILEGED_USER_ENTRY="skipOnPrivilegedUserEntry",t.ON_ACCEPT="skipOnAccept",t.SKIP_ON_ACCEPT="skipOnAccept"})(q2||(q2={}));Ym.groupCall,Dp.skipOnAccept,Ic.none;Ym.groupCall,Ic.none,Dp.skipOnAccept;let bR="hXgU8Wc8pwuGNq9ms5q9Hh";var G2;typeof process<"u"&&(G2=process==null?void 0:process.env)!=null&&G2.FLAGSMITH_ENVIRONMENT_KEY&&(bR={}.FLAGSMITH_ENVIRONMENT_KEY);function VN(t=[]){const e={};return t.forEach(i=>{e[i.feature.name]={enabled:i.enabled,value:i.feature_state_value}}),e}class BN{constructor(e=bR){v(this,"flags",{}),v(this,"environmentKey",null),this.environmentKey=e,this.identify=this.identify.bind(this),this.getValue=this.getValue.bind(this),this.hasFeature=this.hasFeature.bind(this),this.getAllFlags=this.getAllFlags.bind(this)}async identify(e,i={},s=!1,r=5e3){const n=JSON.parse(JSON.stringify(i)),a=Object.entries(n).map(o=>({trait_key:o[0],trait_value:o[1]}));try{const o="_"+(Math.random()+1).toString(36).substring(2),c=await Hm.post("https://edge.api.flagsmith.com/api/v1/identities/",{identifier:e+(s?o:""),traits:a},{headers:{"Content-Type":"application/json","X-Environment-Key":this.environmentKey},timeout:r});this.flags=VN(c.data.flags||[])}catch{}return this.flags}getValue(e){return this.flags&&this.flags[e]&&this.flags[e].value}hasFeature(e){return this.flags&&this.flags[e]&&this.flags[e].enabled}getAllFlags(){return this.flags}}const ee=new BN,wR=[-2,-1,0,1,2],HN=[0,1,2,3,4];function WN(t){t=t.trim();let e="0",i="0",s="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],s="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],s="0x"+t[5]+t[6]),[+e,+i,+s]}const qN=(t,e,i)=>{let s,r,n;if(e==0)s=r=n=i;else{const a=(u,l,h)=>(h<0&&(h+=1),h>1&&(h-=1),h<.16666666666666666?u+(l-u)*6*h:h<.5?l:h<.6666666666666666?u+(l-u)*(.6666666666666666-h)*6:u),o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;s=a(c,o,t+1/3),r=a(c,o,t),n=a(c,o,t-1/3)}return[Math.round(s*255),Math.round(r*255),Math.round(n*255)]},GN=(t,e,i)=>{t/=255,e/=255,i/=255;const s=Math.max(t,e,i),r=Math.min(t,e,i);let n,a;const o=(s+r)/2;if(s==r)n=a=0;else{const c=s-r;switch(a=o>.5?c/(2-s-r):c/(s+r),s){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4;break}n/=6}return[n,a,o]},JN=(t,e,i)=>{const s=r=>r.toString(16).padStart(2,"0");return`#${s(t)}${s(e)}${s(i)}`},_R=(t,e=wR,i=.4)=>{const s=[],[r,n,a]=WN(t),[o,c,u]=GN(r,n,a),l=Math.round(u*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const h=e.findIndex(k=>k===0);if(h===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-h,m=h+1,f=(100-l)/g,_=l/m;for(const k of e){let y;k<0?y=l+k*_*i:k>0?y=l+k*f*i:y=l;const[b,x,C]=qN(o,c,y/100);s.push(JN(b,x,C))}return s},J2={dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},KN=t=>{const[e,i,s,r,n]=_R(t,wR);return{300:e,400:i,500:s,600:r,700:n}},QN=t=>{if(t==="#FFFFFF")return J2.light.background;if(t==="#000000")return J2.dark.background;const[e,i,s,r,n]=_R(t,HN);return{1e3:e,900:i,800:s,700:r,600:n}};function YN(){this.__data__=[],this.size=0}function o_(t,e){return t===e||t!==t&&e!==e}function cv(t,e){for(var i=t.length;i--;)if(o_(t[i][0],e))return i;return-1}var ZN=Array.prototype,XN=ZN.splice;function e9(t){var e=this.__data__,i=cv(e,t);if(i<0)return!1;var s=e.length-1;return i==s?e.pop():XN.call(e,i,1),--this.size,!0}function t9(t){var e=this.__data__,i=cv(e,t);return i<0?void 0:e[i][1]}function i9(t){return cv(this.__data__,t)>-1}function s9(t,e){var i=this.__data__,s=cv(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this}function la(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}la.prototype.clear=YN;la.prototype.delete=e9;la.prototype.get=t9;la.prototype.has=i9;la.prototype.set=s9;function r9(){this.__data__=new la,this.size=0}function n9(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function a9(t){return this.__data__.get(t)}function o9(t){return this.__data__.has(t)}var c9=typeof global=="object"&&global&&global.Object===Object&&global;const kR=c9;var d9=typeof self=="object"&&self&&self.Object===Object&&self,l9=kR||d9||Function("return this")();const Hr=l9;var u9=Hr.Symbol;const yn=u9;var SR=Object.prototype,p9=SR.hasOwnProperty,h9=SR.toString,tu=yn?yn.toStringTag:void 0;function g9(t){var e=p9.call(t,tu),i=t[tu];try{t[tu]=void 0;var s=!0}catch{}var r=h9.call(t);return s&&(e?t[tu]=i:delete t[tu]),r}var m9=Object.prototype,f9=m9.toString;function v9(t){return f9.call(t)}var y9="[object Null]",b9="[object Undefined]",K2=yn?yn.toStringTag:void 0;function Il(t){return t==null?t===void 0?b9:y9:K2&&K2 in Object(t)?g9(t):v9(t)}function go(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var w9="[object AsyncFunction]",_9="[object Function]",k9="[object GeneratorFunction]",S9="[object Proxy]";function xR(t){if(!go(t))return!1;var e=Il(t);return e==_9||e==k9||e==w9||e==S9}var x9=Hr["__core-js_shared__"];const By=x9;var Q2=function(){var t=/[^.]+$/.exec(By&&By.keys&&By.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function E9(t){return!!Q2&&Q2 in t}var T9=Function.prototype,C9=T9.toString;function zc(t){if(t!=null){try{return C9.call(t)}catch{}try{return t+""}catch{}}return""}var P9=/[\\^$.*+?()[\]{}|]/g,R9=/^\[object .+?Constructor\]$/,I9=Function.prototype,A9=Object.prototype,D9=I9.toString,M9=A9.hasOwnProperty,O9=RegExp("^"+D9.call(M9).replace(P9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L9(t){if(!go(t)||E9(t))return!1;var e=xR(t)?O9:R9;return e.test(zc(t))}function N9(t,e){return t==null?void 0:t[e]}function Fc(t,e){var i=N9(t,e);return L9(i)?i:void 0}var U9=Fc(Hr,"Map");const Mp=U9;var $9=Fc(Object,"create");const Op=$9;function j9(){this.__data__=Op?Op(null):{},this.size=0}function z9(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var F9="__lodash_hash_undefined__",V9=Object.prototype,B9=V9.hasOwnProperty;function H9(t){var e=this.__data__;if(Op){var i=e[t];return i===F9?void 0:i}return B9.call(e,t)?e[t]:void 0}var W9=Object.prototype,q9=W9.hasOwnProperty;function G9(t){var e=this.__data__;return Op?e[t]!==void 0:q9.call(e,t)}var J9="__lodash_hash_undefined__";function K9(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Op&&e===void 0?J9:e,this}function Ac(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Ac.prototype.clear=j9;Ac.prototype.delete=z9;Ac.prototype.get=H9;Ac.prototype.has=G9;Ac.prototype.set=K9;function Q9(){this.size=0,this.__data__={hash:new Ac,map:new(Mp||la),string:new Ac}}function Y9(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function dv(t,e){var i=t.__data__;return Y9(e)?i[typeof e=="string"?"string":"hash"]:i.map}function Z9(t){var e=dv(this,t).delete(t);return this.size-=e?1:0,e}function X9(t){return dv(this,t).get(t)}function eU(t){return dv(this,t).has(t)}function tU(t,e){var i=dv(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this}function Vc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Vc.prototype.clear=Q9;Vc.prototype.delete=Z9;Vc.prototype.get=X9;Vc.prototype.has=eU;Vc.prototype.set=tU;var iU=200;function sU(t,e){var i=this.__data__;if(i instanceof la){var s=i.__data__;if(!Mp||s.length<iU-1)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new Vc(s)}return i.set(t,e),this.size=i.size,this}function Xn(t){var e=this.__data__=new la(t);this.size=e.size}Xn.prototype.clear=r9;Xn.prototype.delete=n9;Xn.prototype.get=a9;Xn.prototype.has=o9;Xn.prototype.set=sU;function rU(t,e){for(var i=-1,s=t==null?0:t.length;++i<s&&e(t[i],i,t)!==!1;);return t}var nU=function(){try{var t=Fc(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Zm=nU;function ER(t,e,i){e=="__proto__"&&Zm?Zm(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var aU=Object.prototype,oU=aU.hasOwnProperty;function TR(t,e,i){var s=t[e];(!(oU.call(t,e)&&o_(s,i))||i===void 0&&!(e in t))&&ER(t,e,i)}function lv(t,e,i,s){var r=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=s?s(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),r?ER(i,o,c):TR(i,o,c)}return i}function cU(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}function na(t){return t!=null&&typeof t=="object"}var dU="[object Arguments]";function Y2(t){return na(t)&&Il(t)==dU}var CR=Object.prototype,lU=CR.hasOwnProperty,uU=CR.propertyIsEnumerable,pU=Y2(function(){return arguments}())?Y2:function(t){return na(t)&&lU.call(t,"callee")&&!uU.call(t,"callee")};const c_=pU;var hU=Array.isArray;const Dc=hU;function gU(){return!1}var PR=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z2=PR&&typeof module=="object"&&module&&!module.nodeType&&module,mU=Z2&&Z2.exports===PR,X2=mU?Hr.Buffer:void 0,fU=X2?X2.isBuffer:void 0,vU=fU||gU;const Lp=vU;var yU=9007199254740991,bU=/^(?:0|[1-9]\d*)$/;function wU(t,e){var i=typeof t;return e=e==null?yU:e,!!e&&(i=="number"||i!="symbol"&&bU.test(t))&&t>-1&&t%1==0&&t<e}var _U=9007199254740991;function RR(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_U}var kU="[object Arguments]",SU="[object Array]",xU="[object Boolean]",EU="[object Date]",TU="[object Error]",CU="[object Function]",PU="[object Map]",RU="[object Number]",IU="[object Object]",AU="[object RegExp]",DU="[object Set]",MU="[object String]",OU="[object WeakMap]",LU="[object ArrayBuffer]",NU="[object DataView]",UU="[object Float32Array]",$U="[object Float64Array]",jU="[object Int8Array]",zU="[object Int16Array]",FU="[object Int32Array]",VU="[object Uint8Array]",BU="[object Uint8ClampedArray]",HU="[object Uint16Array]",WU="[object Uint32Array]",ft={};ft[UU]=ft[$U]=ft[jU]=ft[zU]=ft[FU]=ft[VU]=ft[BU]=ft[HU]=ft[WU]=!0;ft[kU]=ft[SU]=ft[LU]=ft[xU]=ft[NU]=ft[EU]=ft[TU]=ft[CU]=ft[PU]=ft[RU]=ft[IU]=ft[AU]=ft[DU]=ft[MU]=ft[OU]=!1;function qU(t){return na(t)&&RR(t.length)&&!!ft[Il(t)]}function uv(t){return function(e){return t(e)}}var IR=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ip=IR&&typeof module=="object"&&module&&!module.nodeType&&module,GU=ip&&ip.exports===IR,Hy=GU&&kR.process,JU=function(){try{var t=ip&&ip.require&&ip.require("util").types;return t||Hy&&Hy.binding&&Hy.binding("util")}catch{}}();const yl=JU;var ex=yl&&yl.isTypedArray,KU=ex?uv(ex):qU;const d_=KU;var QU=Object.prototype,YU=QU.hasOwnProperty;function AR(t,e){var i=Dc(t),s=!i&&c_(t),r=!i&&!s&&Lp(t),n=!i&&!s&&!r&&d_(t),a=i||s||r||n,o=a?cU(t.length,String):[],c=o.length;for(var u in t)(e||YU.call(t,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wU(u,c)))&&o.push(u);return o}var ZU=Object.prototype;function pv(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||ZU;return t===i}function DR(t,e){return function(i){return t(e(i))}}var XU=DR(Object.keys,Object);const e$=XU;var t$=Object.prototype,i$=t$.hasOwnProperty;function MR(t){if(!pv(t))return e$(t);var e=[];for(var i in Object(t))i$.call(t,i)&&i!="constructor"&&e.push(i);return e}function hv(t){return t!=null&&RR(t.length)&&!xR(t)}function l_(t){return hv(t)?AR(t):MR(t)}function s$(t,e){return t&&lv(e,l_(e),t)}function r$(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var n$=Object.prototype,a$=n$.hasOwnProperty;function o$(t){if(!go(t))return r$(t);var e=pv(t),i=[];for(var s in t)s=="constructor"&&(e||!a$.call(t,s))||i.push(s);return i}function u_(t){return hv(t)?AR(t,!0):o$(t)}function c$(t,e){return t&&lv(e,u_(e),t)}var OR=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tx=OR&&typeof module=="object"&&module&&!module.nodeType&&module,d$=tx&&tx.exports===OR,ix=d$?Hr.Buffer:void 0,sx=ix?ix.allocUnsafe:void 0;function l$(t,e){if(e)return t.slice();var i=t.length,s=sx?sx(i):new t.constructor(i);return t.copy(s),s}function u$(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}function LR(t,e){for(var i=-1,s=t==null?0:t.length,r=0,n=[];++i<s;){var a=t[i];e(a,i,t)&&(n[r++]=a)}return n}function NR(){return[]}var p$=Object.prototype,h$=p$.propertyIsEnumerable,rx=Object.getOwnPropertySymbols,g$=rx?function(t){return t==null?[]:(t=Object(t),LR(rx(t),function(e){return h$.call(t,e)}))}:NR;const p_=g$;function m$(t,e){return lv(t,p_(t),e)}function h_(t,e){for(var i=-1,s=e.length,r=t.length;++i<s;)t[r+i]=e[i];return t}var f$=DR(Object.getPrototypeOf,Object);const UR=f$;var v$=Object.getOwnPropertySymbols,y$=v$?function(t){for(var e=[];t;)h_(e,p_(t)),t=UR(t);return e}:NR;const $R=y$;function b$(t,e){return lv(t,$R(t),e)}function jR(t,e,i){var s=e(t);return Dc(t)?s:h_(s,i(t))}function zb(t){return jR(t,l_,p_)}function w$(t){return jR(t,u_,$R)}var _$=Fc(Hr,"DataView");const Fb=_$;var k$=Fc(Hr,"Promise");const Vb=k$;var S$=Fc(Hr,"Set");const il=S$;var x$=Fc(Hr,"WeakMap");const Bb=x$;var nx="[object Map]",E$="[object Object]",ax="[object Promise]",ox="[object Set]",cx="[object WeakMap]",dx="[object DataView]",T$=zc(Fb),C$=zc(Mp),P$=zc(Vb),R$=zc(il),I$=zc(Bb),Bo=Il;(Fb&&Bo(new Fb(new ArrayBuffer(1)))!=dx||Mp&&Bo(new Mp)!=nx||Vb&&Bo(Vb.resolve())!=ax||il&&Bo(new il)!=ox||Bb&&Bo(new Bb)!=cx)&&(Bo=function(t){var e=Il(t),i=e==E$?t.constructor:void 0,s=i?zc(i):"";if(s)switch(s){case T$:return dx;case C$:return nx;case P$:return ax;case R$:return ox;case I$:return cx}return e});const bl=Bo;var A$=Object.prototype,D$=A$.hasOwnProperty;function M$(t){var e=t.length,i=new t.constructor(e);return e&&typeof t[0]=="string"&&D$.call(t,"index")&&(i.index=t.index,i.input=t.input),i}var O$=Hr.Uint8Array;const Xm=O$;function g_(t){var e=new t.constructor(t.byteLength);return new Xm(e).set(new Xm(t)),e}function L$(t,e){var i=e?g_(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var N$=/\w*$/;function U$(t){var e=new t.constructor(t.source,N$.exec(t));return e.lastIndex=t.lastIndex,e}var lx=yn?yn.prototype:void 0,ux=lx?lx.valueOf:void 0;function $$(t){return ux?Object(ux.call(t)):{}}function j$(t,e){var i=e?g_(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var z$="[object Boolean]",F$="[object Date]",V$="[object Map]",B$="[object Number]",H$="[object RegExp]",W$="[object Set]",q$="[object String]",G$="[object Symbol]",J$="[object ArrayBuffer]",K$="[object DataView]",Q$="[object Float32Array]",Y$="[object Float64Array]",Z$="[object Int8Array]",X$="[object Int16Array]",ej="[object Int32Array]",tj="[object Uint8Array]",ij="[object Uint8ClampedArray]",sj="[object Uint16Array]",rj="[object Uint32Array]";function nj(t,e,i){var s=t.constructor;switch(e){case J$:return g_(t);case z$:case F$:return new s(+t);case K$:return L$(t,i);case Q$:case Y$:case Z$:case X$:case ej:case tj:case ij:case sj:case rj:return j$(t,i);case V$:return new s;case B$:case q$:return new s(t);case H$:return U$(t);case W$:return new s;case G$:return $$(t)}}var px=Object.create,aj=function(){function t(){}return function(e){if(!go(e))return{};if(px)return px(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();const oj=aj;function cj(t){return typeof t.constructor=="function"&&!pv(t)?oj(UR(t)):{}}var dj="[object Map]";function lj(t){return na(t)&&bl(t)==dj}var hx=yl&&yl.isMap,uj=hx?uv(hx):lj;const pj=uj;var hj="[object Set]";function gj(t){return na(t)&&bl(t)==hj}var gx=yl&&yl.isSet,mj=gx?uv(gx):gj;const fj=mj;var vj=1,yj=2,bj=4,zR="[object Arguments]",wj="[object Array]",_j="[object Boolean]",kj="[object Date]",Sj="[object Error]",FR="[object Function]",xj="[object GeneratorFunction]",Ej="[object Map]",Tj="[object Number]",VR="[object Object]",Cj="[object RegExp]",Pj="[object Set]",Rj="[object String]",Ij="[object Symbol]",Aj="[object WeakMap]",Dj="[object ArrayBuffer]",Mj="[object DataView]",Oj="[object Float32Array]",Lj="[object Float64Array]",Nj="[object Int8Array]",Uj="[object Int16Array]",$j="[object Int32Array]",jj="[object Uint8Array]",zj="[object Uint8ClampedArray]",Fj="[object Uint16Array]",Vj="[object Uint32Array]",dt={};dt[zR]=dt[wj]=dt[Dj]=dt[Mj]=dt[_j]=dt[kj]=dt[Oj]=dt[Lj]=dt[Nj]=dt[Uj]=dt[$j]=dt[Ej]=dt[Tj]=dt[VR]=dt[Cj]=dt[Pj]=dt[Rj]=dt[Ij]=dt[jj]=dt[zj]=dt[Fj]=dt[Vj]=!0;dt[Sj]=dt[FR]=dt[Aj]=!1;function zg(t,e,i,s,r,n){var a,o=e&vj,c=e&yj,u=e&bj;if(i&&(a=r?i(t,s,r,n):i(t)),a!==void 0)return a;if(!go(t))return t;var l=Dc(t);if(l){if(a=M$(t),!o)return u$(t,a)}else{var h=bl(t),g=h==FR||h==xj;if(Lp(t))return l$(t,o);if(h==VR||h==zR||g&&!r){if(a=c||g?{}:cj(t),!o)return c?b$(t,c$(a,t)):m$(t,s$(a,t))}else{if(!dt[h])return r?t:{};a=nj(t,h,o)}}n||(n=new Xn);var m=n.get(t);if(m)return m;n.set(t,a),fj(t)?t.forEach(function(k){a.add(zg(k,e,i,k,t,n))}):pj(t)&&t.forEach(function(k,y){a.set(y,zg(k,e,i,y,t,n))});var f=u?c?w$:zb:c?u_:l_,_=l?void 0:f(t);return rU(_||t,function(k,y){_&&(y=k,k=t[y]),TR(a,y,zg(k,e,i,y,t,n))}),a}var Bj=1,Hj=4;function m_(t){return zg(t,Bj|Hj)}var Wj="[object Symbol]";function qj(t){return typeof t=="symbol"||na(t)&&Il(t)==Wj}function Gj(t,e){for(var i=-1,s=t==null?0:t.length,r=Array(s);++i<s;)r[i]=e(t[i],i,t);return r}var it;(function(t){t.GroupCall="GROUP_CALL",t.Webinar="WEBINAR",t.AudioRoom="AUDIO_ROOM",t.Livestream="LIVESTREAM",t.Chat="CHAT"})(it||(it={}));var ef;(function(t){t.Skip="SKIP",t.OnPrivilegedUserEntry="ON_PRIVILEGED_USER_ENTRY",t.SkipOnAccept="SKIP_ON_ACCEPT"})(ef||(ef={}));var qe;(function(t){t.Allowed="ALLOWED",t.NotAllowed="NOT_ALLOWED",t.CanRequest="CAN_REQUEST"})(qe||(qe={}));var tf;(function(t){t.Allowed="ALLOWED",t.NotAllowed="NOT_ALLOWED"})(tf||(tf={}));var mx;(function(t){t.FULL_ACCESS="FULL_ACCESS",t.VIEW_ONLY="VIEW_ONLY"})(mx||(mx={}));const Jj={border_radius:"rounded",border_width:"thin",spacing_base:4,theme:"dark",colors:{brand:KN("#2160FD"),background:QN("#141414"),danger:"#FF2D2D",text:"#EEEEEE",text_on_brand:"#EEEEEE",success:"#62A504",video_bg:"#191919",warning:"#FFCD07"}};function BR(){return m_(Jj)}const Kj={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:ef.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:qe.Allowed,can_consume:tf.Allowed},audio:{can_produce:qe.Allowed},screenshare:{can_produce:qe.Allowed,can_consume:tf.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1},channel:{can_create:"ALL",can_delete:"ALL",can_update:"ALL",can_read_all:!1},message:{can_delete:"ALL",can_edit:"ALL",delete_cutoff_time_seconds:0,edit_cutoff_time_seconds:0}},hidden_participant:!1,is_recorder:!1,recorder_type:Ic.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{oldTheme:{setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",textPrimary:"#EEEEEE",videoBackground:"#1A1A1A"},dimensions:{mode:"fillParent"},grid:{multi:{maxVideoCount:6,videoFit:"cover"},single:{maxVideoCount:6,videoFit:"cover"},defaultView:"MULTI"},controls:{pip_toggle:!1},plugins:[]},design_tokens:BR(),config_diff:{}},config:{view_type:it.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"hybrid"};function Qj(){return m_(Kj)}Ic.none,Dp.skip;const Yj={permissions:{can_accept_production_requests:!1,can_edit_display_name:!0,accept_waiting_requests:!1,disable_participant_audio:!1,disable_participant_screensharing:!1,disable_participant_video:!1,can_spotlight:!1,kick_participant:!1,pin_participant:!1,can_record:!1,can_livestream:!1,waiting_room_type:ef.Skip,plugins:{can_close:!0,can_start:!0,can_edit_config:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},media:{video:{can_produce:qe.Allowed},audio:{can_produce:qe.Allowed},screenshare:{can_produce:qe.Allowed}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},hidden_participant:!1,is_recorder:!1,recorder_type:Ic.none,show_participant_list:!0,can_change_participant_permissions:!1,connected_meetings:{can_alter_connected_meetings:!1,can_switch_connected_meetings:!1,can_switch_to_parent_meeting:!1}},ui:{design_tokens:BR(),config_diff:{}},config:{view_type:it.GroupCall,media:{video:{quality:"vga",frame_rate:24},screenshare:{quality:"hd",frame_rate:5}},max_video_streams:{mobile:6,desktop:6},max_screenshare_count:1},version:"2.0.0"};function f_(){return m_(Yj)}var Ir={},Zj={get exports(){return Ir},set exports(t){Ir=t}},Wy,fx;function Xj(){if(fx)return Wy;fx=1;var t=1e3,e=t*60,i=e*60,s=i*24,r=s*7,n=s*365.25;Wy=function(l,h){h=h||{};var g=typeof l;if(g==="string"&&l.length>0)return a(l);if(g==="number"&&isFinite(l))return h.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function a(l){if(l=String(l),!(l.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(h){var g=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*n;case"weeks":case"week":case"w":return g*r;case"days":case"day":case"d":return g*s;case"hours":case"hour":case"hrs":case"hr":case"h":return g*i;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function o(l){var h=Math.abs(l);return h>=s?Math.round(l/s)+"d":h>=i?Math.round(l/i)+"h":h>=e?Math.round(l/e)+"m":h>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var h=Math.abs(l);return h>=s?u(l,h,s,"day"):h>=i?u(l,h,i,"hour"):h>=e?u(l,h,e,"minute"):h>=t?u(l,h,t,"second"):l+" ms"}function u(l,h,g,m){var f=h>=g*1.5;return Math.round(l/g)+" "+m+(f?"s":"")}return Wy}function ez(t){i.debug=i,i.default=i,i.coerce=c,i.disable=n,i.enable=r,i.enabled=a,i.humanize=Xj(),i.destroy=u,Object.keys(t).forEach(l=>{i[l]=t[l]}),i.names=[],i.skips=[],i.formatters={};function e(l){let h=0;for(let g=0;g<l.length;g++)h=(h<<5)-h+l.charCodeAt(g),h|=0;return i.colors[Math.abs(h)%i.colors.length]}i.selectColor=e;function i(l){let h,g=null,m,f;function _(...k){if(!_.enabled)return;const y=_,b=Number(new Date),x=b-(h||b);y.diff=x,y.prev=h,y.curr=b,h=b,k[0]=i.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let C=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(D,M)=>{if(D==="%%")return"%";C++;const L=i.formatters[M];if(typeof L=="function"){const V=k[C];D=L.call(y,V),k.splice(C,1),C--}return D}),i.formatArgs.call(y,k),(y.log||i.log).apply(y,k)}return _.namespace=l,_.useColors=i.useColors(),_.color=i.selectColor(l),_.extend=s,_.destroy=i.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(m!==i.namespaces&&(m=i.namespaces,f=i.enabled(l)),f),set:k=>{g=k}}),typeof i.init=="function"&&i.init(_),_}function s(l,h){const g=i(this.namespace+(typeof h>"u"?":":h)+l);return g.log=this.log,g}function r(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let h;const g=(typeof l=="string"?l:"").split(/[\s,]+/),m=g.length;for(h=0;h<m;h++)g[h]&&(l=g[h].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function n(){const l=[...i.names.map(o),...i.skips.map(o).map(h=>"-"+h)].join(",");return i.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let h,g;for(h=0,g=i.skips.length;h<g;h++)if(i.skips[h].test(l))return!1;for(h=0,g=i.names.length;h<g;h++)if(i.names[h].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var tz=ez;(function(t,e){e.formatArgs=s,e.save=r,e.load=n,e.useColors=i,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let l=0,h=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(l++,g==="%c"&&(h=l))}),c.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function r(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function n(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=tz(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Zj,Ir);const td="mediasoup-client";let ks=class{constructor(t){t?(this._debug=Ir(`${td}:${t}`),this._warn=Ir(`${td}:WARN:${t}`),this._error=Ir(`${td}:ERROR:${t}`)):(this._debug=Ir(td),this._warn=Ir(`${td}:WARN`),this._error=Ir(`${td}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};const iz=new ks("EnhancedEventEmitter");let ur=class extends rs.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(t,...e){return super.emit(t,...e)}safeEmit(t,...e){const i=super.listenerCount(t);try{return super.emit(t,...e)}catch(s){return iz.error("safeEmit() | event listener threw an error [eventName:%s]:%o",t,s),Boolean(i)}}on(t,e){return super.on(t,e),this}off(t,e){return super.off(t,e),this}addListener(t,e){return super.on(t,e),this}prependListener(t,e){return super.prependListener(t,e),this}once(t,e){return super.once(t,e),this}prependOnceListener(t,e){return super.prependOnceListener(t,e),this}removeListener(t,e){return super.off(t,e),this}removeAllListeners(t){return super.removeAllListeners(t),this}listenerCount(t){return super.listenerCount(t)}listeners(t){return super.listeners(t)}rawListeners(t){return super.rawListeners(t)}},hs=class HR extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,HR):this.stack=new Error(e).stack}},kt=class WR extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,WR):this.stack=new Error(e).stack}};function li(t,e){return typeof t>"u"?e:JSON.parse(JSON.stringify(t))}function qy(){return Math.round(Math.random()*1e7)}var Hb={};(function(t){const e=Ir("h264-profile-level-id");e.log=console.info.bind(console);const i=1,s=2,r=3,n=4,a=5;t.ProfileConstrainedBaseline=i,t.ProfileBaseline=s,t.ProfileMain=r,t.ProfileConstrainedHigh=n,t.ProfileHigh=a;const o=0,c=10,u=11,l=12,h=13,g=20,m=21,f=22,_=30,k=31,y=32,b=40,x=41,C=42,D=50,M=51,L=52;t.Level1_b=o,t.Level1=c,t.Level1_1=u,t.Level1_2=l,t.Level1_3=h,t.Level2=g,t.Level2_1=m,t.Level2_2=f,t.Level3=_,t.Level3_1=k,t.Level3_2=y,t.Level4=b,t.Level4_1=x,t.Level4_2=C,t.Level5=D,t.Level5_1=M,t.Level5_2=L;class V{constructor(W,Y){this.profile=W,this.level=Y}}t.ProfileLevelId=V;const se=new V(i,k),Q=16;class te{constructor(W){this._mask=~Xe("x",W),this._maskedValue=Xe("1",W)}isMatch(W){return this._maskedValue===(W&this._mask)}}class Ae{constructor(W,Y,Ne){this.profile_idc=W,this.profile_iop=Y,this.profile=Ne}}const ze=[new Ae(66,new te("x1xx0000"),i),new Ae(77,new te("1xxx0000"),i),new Ae(88,new te("11xx0000"),i),new Ae(66,new te("x0xx0000"),s),new Ae(88,new te("10xx0000"),s),new Ae(77,new te("0x0x0000"),r),new Ae(100,new te("00000000"),a),new Ae(100,new te("00001100"),n)];t.parseProfileLevelId=function(z){if(typeof z!="string"||z.length!==6)return null;const W=parseInt(z,16);if(W===0)return null;const Y=W&255,Ne=W>>8&255,nt=W>>16&255;let wt;switch(Y){case u:{wt=Ne&Q?o:u;break}case c:case l:case h:case g:case m:case f:case _:case k:case y:case b:case x:case C:case D:case M:case L:{wt=Y;break}default:return e("parseProfileLevelId() | unrecognized level_idc:%s",Y),null}for(const pi of ze)if(nt===pi.profile_idc&&pi.profile_iop.isMatch(Ne))return new V(pi.profile,wt);return e("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(z){if(z.level==o)switch(z.profile){case i:return"42f00b";case s:return"42100b";case r:return"4d100b";default:return e("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",z.profile),null}let W;switch(z.profile){case i:{W="42e0";break}case s:{W="4200";break}case r:{W="4d00";break}case n:{W="640c";break}case a:{W="6400";break}default:return e("profileLevelIdToString() | unrecognized profile:%s",z.profile),null}let Y=z.level.toString(16);return Y.length===1&&(Y=`0${Y}`),`${W}${Y}`},t.parseSdpProfileLevelId=function(z={}){const W=z["profile-level-id"];return W?t.parseProfileLevelId(W):se},t.isSameProfile=function(z={},W={}){const Y=t.parseSdpProfileLevelId(z),Ne=t.parseSdpProfileLevelId(W);return Boolean(Y&&Ne&&Y.profile===Ne.profile)},t.generateProfileLevelIdForAnswer=function(z={},W={}){if(!z["profile-level-id"]&&!W["profile-level-id"])return e("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const Y=t.parseSdpProfileLevelId(z),Ne=t.parseSdpProfileLevelId(W);if(!Y)throw new TypeError("invalid local_profile_level_id");if(!Ne)throw new TypeError("invalid remote_profile_level_id");if(Y.profile!==Ne.profile)throw new TypeError("H264 Profile mismatch");const nt=cs(z)&&cs(W),wt=Y.level,pi=Ne.level,Jr=Ut(wt,pi),ki=nt?wt:Jr;return e("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",Y.profile,ki),t.profileLevelIdToString(new V(Y.profile,ki))};function Xe(z,W){return(W[0]===z)<<7|(W[1]===z)<<6|(W[2]===z)<<5|(W[3]===z)<<4|(W[4]===z)<<3|(W[5]===z)<<2|(W[6]===z)<<1|(W[7]===z)<<0}function xt(z,W){return z===o?W!==c&&W!==o:W===o?z!==c:z<W}function Ut(z,W){return xt(z,W)?z:W}function cs(z={}){const W=z["level-asymmetry-allowed"];return W===1||W==="1"}})(Hb);const sz="probator",rz=1234,nz=127;function Gy(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(t.codecs&&!Array.isArray(t.codecs))throw new TypeError("caps.codecs is not an array");t.codecs||(t.codecs=[]);for(const e of t.codecs)az(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)oz(e)}function az(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=e.exec(t.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(t.kind=i[1].toLowerCase(),t.preferredPayloadType&&typeof t.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");t.kind==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const s of Object.keys(t.parameters)){let r=t.parameters[s];if(r===void 0&&(t.parameters[s]="",r=""),typeof r!="string"&&typeof r!="number")throw new TypeError(`invalid codec parameter [key:${s}s, value:${r}]`);if(s==="apt"&&typeof r!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const s of t.rtcpFeedback)qR(s)}function qR(t){if(typeof t!="object")throw new TypeError("fb is not an object");if(!t.type||typeof t.type!="string")throw new TypeError("missing fb.type");(!t.parameter||typeof t.parameter!="string")&&(t.parameter="")}function oz(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(t.kind!=="audio"&&t.kind!=="video")throw new TypeError("invalid ext.kind");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.preferredId!="number")throw new TypeError("missing ext.preferredId");if(t.preferredEncrypt&&typeof t.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(t.preferredEncrypt||(t.preferredEncrypt=!1),t.direction&&typeof t.direction!="string")throw new TypeError("invalid ext.direction");t.direction||(t.direction="sendrecv")}function v_(t){if(typeof t!="object")throw new TypeError("params is not an object");if(t.mid&&typeof t.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(t.codecs))throw new TypeError("missing params.codecs");for(const e of t.codecs)cz(e);if(t.headerExtensions&&!Array.isArray(t.headerExtensions))throw new TypeError("params.headerExtensions is not an array");t.headerExtensions||(t.headerExtensions=[]);for(const e of t.headerExtensions)dz(e);if(t.encodings&&!Array.isArray(t.encodings))throw new TypeError("params.encodings is not an array");t.encodings||(t.encodings=[]);for(const e of t.encodings)lz(e);if(t.rtcp&&typeof t.rtcp!="object")throw new TypeError("params.rtcp is not an object");t.rtcp||(t.rtcp={}),uz(t.rtcp)}function cz(t){const e=new RegExp("^(audio|video)/(.+)","i");if(typeof t!="object")throw new TypeError("codec is not an object");if(!t.mimeType||typeof t.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=e.exec(t.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof t.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof t.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof t.channels!="number"&&(t.channels=1):delete t.channels,(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const s of Object.keys(t.parameters)){let r=t.parameters[s];if(r===void 0&&(t.parameters[s]="",r=""),typeof r!="string"&&typeof r!="number")throw new TypeError(`invalid codec parameter [key:${s}s, value:${r}]`);if(s==="apt"&&typeof r!="number")throw new TypeError("invalid codec apt parameter")}(!t.rtcpFeedback||!Array.isArray(t.rtcpFeedback))&&(t.rtcpFeedback=[]);for(const s of t.rtcpFeedback)qR(s)}function dz(t){if(typeof t!="object")throw new TypeError("ext is not an object");if(!t.uri||typeof t.uri!="string")throw new TypeError("missing ext.uri");if(typeof t.id!="number")throw new TypeError("missing ext.id");if(t.encrypt&&typeof t.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");t.encrypt||(t.encrypt=!1),(!t.parameters||typeof t.parameters!="object")&&(t.parameters={});for(const e of Object.keys(t.parameters)){let i=t.parameters[e];if(i===void 0&&(t.parameters[e]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function lz(t){if(typeof t!="object")throw new TypeError("encoding is not an object");if(t.ssrc&&typeof t.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(t.rid&&typeof t.rid!="string")throw new TypeError("invalid encoding.rid");if(t.rtx&&typeof t.rtx!="object")throw new TypeError("invalid encoding.rtx");if(t.rtx&&typeof t.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!t.dtx||typeof t.dtx!="boolean")&&(t.dtx=!1),t.scalabilityMode&&typeof t.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function uz(t){if(typeof t!="object")throw new TypeError("rtcp is not an object");if(t.cname&&typeof t.cname!="string")throw new TypeError("invalid rtcp.cname");(!t.reducedSize||typeof t.reducedSize!="boolean")&&(t.reducedSize=!0)}function pz(t){if(typeof t!="object")throw new TypeError("caps is not an object");if(!t.numStreams||typeof t.numStreams!="object")throw new TypeError("missing caps.numStreams");hz(t.numStreams)}function hz(t){if(typeof t!="object")throw new TypeError("numStreams is not an object");if(typeof t.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof t.MIS!="number")throw new TypeError("missing numStreams.MIS")}function vx(t){if(typeof t!="object")throw new TypeError("params is not an object");if(typeof t.streamId!="number")throw new TypeError("missing params.streamId");let e=!1;if(typeof t.ordered=="boolean"?e=!0:t.ordered=!0,t.maxPacketLifeTime&&typeof t.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(t.maxRetransmits&&typeof t.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(t.maxPacketLifeTime&&t.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(e&&t.ordered&&(t.maxPacketLifeTime||t.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!e&&(t.maxPacketLifeTime||t.maxRetransmits)&&(t.ordered=!1),t.label&&typeof t.label!="string")throw new TypeError("invalid params.label");if(t.protocol&&typeof t.protocol!="string")throw new TypeError("invalid params.protocol")}function gz(t,e){const i={codecs:[],headerExtensions:[]};for(const s of e.codecs||[]){if(sp(s))continue;const r=(t.codecs||[]).find(a=>GR(a,s,{strict:!0,modify:!0}));if(!r)continue;const n={mimeType:r.mimeType,kind:r.kind,clockRate:r.clockRate,channels:r.channels,localPayloadType:r.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:s.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:r.parameters,remoteParameters:s.parameters,rtcpFeedback:bz(r,s)};i.codecs.push(n)}for(const s of i.codecs){const r=t.codecs.find(a=>sp(a)&&a.parameters.apt===s.localPayloadType),n=e.codecs.find(a=>sp(a)&&a.parameters.apt===s.remotePayloadType);r&&n&&(s.localRtxPayloadType=r.preferredPayloadType,s.remoteRtxPayloadType=n.preferredPayloadType)}for(const s of e.headerExtensions){const r=t.headerExtensions.find(a=>yz(a,s));if(!r)continue;const n={kind:s.kind,uri:s.uri,sendId:r.preferredId,recvId:s.preferredId,encrypt:r.preferredEncrypt,direction:"sendrecv"};switch(s.direction){case"sendrecv":n.direction="sendrecv";break;case"recvonly":n.direction="sendonly";break;case"sendonly":n.direction="recvonly";break;case"inactive":n.direction="inactive";break}i.headerExtensions.push(n)}return i}function mz(t){const e={codecs:[],headerExtensions:[]};for(const i of t.codecs){const s={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(e.codecs.push(s),!i.remoteRtxPayloadType)continue;const r={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};e.codecs.push(r)}for(const i of t.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const s={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};e.headerExtensions.push(s)}return e}function pr(t,e){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const s of e.codecs){if(s.kind!==t)continue;const r={mimeType:s.mimeType,payloadType:s.localPayloadType,clockRate:s.clockRate,channels:s.channels,parameters:s.localParameters,rtcpFeedback:s.rtcpFeedback};if(i.codecs.push(r),s.localRtxPayloadType){const n={mimeType:`${s.kind}/rtx`,payloadType:s.localRtxPayloadType,clockRate:s.clockRate,parameters:{apt:s.localPayloadType},rtcpFeedback:[]};i.codecs.push(n)}}for(const s of e.headerExtensions){if(s.kind&&s.kind!==t||s.direction!=="sendrecv"&&s.direction!=="sendonly")continue;const r={uri:s.uri,id:s.sendId,encrypt:s.encrypt,parameters:{}};i.headerExtensions.push(r)}return i}function bn(t,e){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const s of e.codecs){if(s.kind!==t)continue;const r={mimeType:s.mimeType,payloadType:s.localPayloadType,clockRate:s.clockRate,channels:s.channels,parameters:s.remoteParameters,rtcpFeedback:s.rtcpFeedback};if(i.codecs.push(r),s.localRtxPayloadType){const n={mimeType:`${s.kind}/rtx`,payloadType:s.localRtxPayloadType,clockRate:s.clockRate,parameters:{apt:s.localPayloadType},rtcpFeedback:[]};i.codecs.push(n)}}for(const s of e.headerExtensions){if(s.kind&&s.kind!==t||s.direction!=="sendrecv"&&s.direction!=="sendonly")continue;const r={uri:s.uri,id:s.sendId,encrypt:s.encrypt,parameters:{}};i.headerExtensions.push(r)}if(i.headerExtensions.some(s=>s.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const s of i.codecs)s.rtcpFeedback=(s.rtcpFeedback||[]).filter(r=>r.type!=="goog-remb");else if(i.headerExtensions.some(s=>s.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const s of i.codecs)s.rtcpFeedback=(s.rtcpFeedback||[]).filter(r=>r.type!=="transport-cc");else for(const s of i.codecs)s.rtcpFeedback=(s.rtcpFeedback||[]).filter(r=>r.type!=="transport-cc"&&r.type!=="goog-remb");return i}function Br(t,e){const i=[];if(!e)i.push(t[0]),sp(t[1])&&i.push(t[1]);else{for(let s=0;s<t.length;++s)if(GR(t[s],e)){i.push(t[s]),sp(t[s+1])&&i.push(t[s+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}return i}function fz(t){t=li(t,{}),v_(t);const e={mid:sz,codecs:[],headerExtensions:[],encodings:[{ssrc:rz}],rtcp:{cname:"probator"}};return e.codecs.push(t.codecs[0]),e.codecs[0].payloadType=nz,e.headerExtensions=t.headerExtensions,e}function yx(t,e){return e.codecs.some(i=>i.kind===t)}function vz(t,e){if(v_(t),t.codecs.length===0)return!1;const i=t.codecs[0];return e.codecs.some(s=>s.remotePayloadType===i.payloadType)}function sp(t){return t?/.+\/rtx$/i.test(t.mimeType):!1}function GR(t,e,{strict:i=!1,modify:s=!1}={}){const r=t.mimeType.toLowerCase(),n=e.mimeType.toLowerCase();if(r!==n||t.clockRate!==e.clockRate||t.channels!==e.channels)return!1;switch(r){case"video/h264":{if(i){const a=t.parameters["packetization-mode"]||0,o=e.parameters["packetization-mode"]||0;if(a!==o||!Hb.isSameProfile(t.parameters,e.parameters))return!1;let c;try{c=Hb.generateProfileLevelIdForAnswer(t.parameters,e.parameters)}catch{return!1}s&&(c?(t.parameters["profile-level-id"]=c,e.parameters["profile-level-id"]=c):(delete t.parameters["profile-level-id"],delete e.parameters["profile-level-id"]))}break}case"video/vp9":{if(i){const a=t.parameters["profile-id"]||0,o=e.parameters["profile-id"]||0;if(a!==o)return!1}break}}return!0}function yz(t,e){return!(t.kind&&e.kind&&t.kind!==e.kind||t.uri!==e.uri)}function bz(t,e){const i=[];for(const s of t.rtcpFeedback||[]){const r=(e.rtcpFeedback||[]).find(n=>n.type===s.type&&(n.parameter===s.parameter||!n.parameter&&!s.parameter));r&&i.push(r)}return i}var Sc={},gv={},wz=jb&&jb.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gv,"__esModule",{value:!0});gv.Logger=void 0;const id=wz(Ir),sd="awaitqueue";let _z=class{constructor(t){t?(this._debug=(0,id.default)(`${sd}:${t}`),this._warn=(0,id.default)(`${sd}:WARN:${t}`),this._error=(0,id.default)(`${sd}:ERROR:${t}`)):(this._debug=(0,id.default)(sd),this._warn=(0,id.default)(`${sd}:WARN`),this._error=(0,id.default)(`${sd}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};gv.Logger=_z;Object.defineProperty(Sc,"__esModule",{value:!0});var JR=Sc.AwaitQueue=Sc.AwaitQueueRemovedTaskError=Sc.AwaitQueueStoppedError=void 0;const kz=gv,ya=new kz.Logger;class y_ extends Error{constructor(e){super(e!=null?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,y_)}}Sc.AwaitQueueStoppedError=y_;class mv extends Error{constructor(e){super(e!=null?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,mv)}}Sc.AwaitQueueRemovedTaskError=mv;class Sz{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,i){if(i=i!=null?i:e.name,ya.debug(`push() [name:${i}]`),typeof e!="function")throw new TypeError("given task is not a function");if(i)try{Object.defineProperty(e,"name",{value:i})}catch{}return new Promise((s,r)=>{const n={id:this.nextTaskId++,task:e,name:i,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:a=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),ya.debug(`resolving task [name:${n.name}]`),s(a);const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)},reject:a=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),ya.debug(`rejecting task [name:${n.name}]: %s`,String(a)),r(a),!this.stopping)){const[o]=this.pendingTasks.values();o&&!o.executedAt&&this.execute(o)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){ya.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())ya.debug(`stop() | stopping task [name:${e.name}]`);this.stopping=!1}remove(e){ya.debug(`remove() [taskIdx:${e}]`);const i=Array.from(this.pendingTasks.values())[e];if(!i){ya.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}i.reject(new mv)}dump(){const e=Date.now();let i=0;return Array.from(this.pendingTasks.values()).map(s=>({idx:i++,task:s.task,name:s.name,enqueuedTime:s.executedAt?s.executedAt-s.enqueuedAt:e-s.enqueuedAt,executionTime:s.executedAt?e-s.executedAt:0}))}async execute(e){if(ya.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const i=await e.task();e.resolve(i)}catch(i){e.reject(i)}}}JR=Sc.AwaitQueue=Sz;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let bx;var Jy=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:jb):t=>(bx||(bx=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));const Qr=new ks("Producer");let xz=class extends ur{constructor({id:t,localId:e,rtpSender:i,track:s,rtpParameters:r,stopTracks:n,disableTrackOnPause:a,zeroRtpOnPause:o,appData:c}){super(),this._closed=!1,this._observer=new ur,Qr.debug("constructor()"),this._id=t,this._localId=e,this._rtpSender=i,this._track=s,this._kind=s.kind,this._rtpParameters=r,this._paused=a?!s.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=n,this._disableTrackOnPause=a,this._zeroRtpOnPause=o,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Qr.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Qr.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new kt("closed");return new Promise((t,e)=>{this.safeEmit("@getstats",t,e)})}pause(){if(Qr.debug("pause()"),this._closed){Qr.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((t,e)=>{this.safeEmit("@pause",t,e)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(Qr.debug("resume()"),this._closed){Qr.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((t,e)=>{this.safeEmit("@resume",t,e)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:t}){if(Qr.debug("replaceTrack() [track:%o]",t),this._closed){if(t&&this._stopTracks)try{t.stop()}catch{}throw new kt("closed")}else if(t&&t.readyState==="ended")throw new kt("track ended");if(t===this._track){Qr.debug("replaceTrack() | same track, ignored");return}await new Promise((e,i)=>{this.safeEmit("@replacetrack",t,e,i)}),this.destroyTrack(),this._track=t,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(t){if(this._closed)throw new kt("closed");if(this._kind!=="video")throw new hs("not a video Producer");if(typeof t!="number")throw new TypeError("invalid spatialLayer");t!==this._maxSpatialLayer&&(await new Promise((e,i)=>{this.safeEmit("@setmaxspatiallayer",t,e,i)}).catch(()=>{}),this._maxSpatialLayer=t)}async setRtpEncodingParameters(t){if(this._closed)throw new kt("closed");if(typeof t!="object")throw new TypeError("invalid params");await new Promise((e,i)=>{this.safeEmit("@setrtpencodingparameters",t,e,i)})}onTrackEnded(){Qr.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};const Yr=new ks("Consumer");let Ez=class extends ur{constructor({id:t,localId:e,producerId:i,rtpReceiver:s,track:r,rtpParameters:n,appData:a}){super(),this._closed=!1,this._observer=new ur,Yr.debug("constructor()"),this._id=t,this._localId=e,this._producerId=i,this._rtpReceiver=s,this._track=r,this._rtpParameters=n,this._paused=!r.enabled,this._appData=a||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Yr.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Yr.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new kt("closed");return new Promise((t,e)=>{this.safeEmit("@getstats",t,e)})}pause(){if(Yr.debug("pause()"),this._closed){Yr.error("pause() | Consumer closed");return}if(this._paused){Yr.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(Yr.debug("resume()"),this._closed){Yr.error("resume() | Consumer closed");return}if(!this._paused){Yr.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){Yr.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};const Pn=new ks("DataProducer");class Tz extends ur{constructor({id:e,dataChannel:i,sctpStreamParameters:s,appData:r}){super(),this._closed=!1,this._observer=new ur,Pn.debug("constructor()"),this._id=e,this._dataChannel=i,this._sctpStreamParameters=s,this._appData=r||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Pn.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Pn.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(Pn.debug("send()"),this._closed)throw new kt("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Pn.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:i}=e;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Pn.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Pn.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Pn.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||Pn.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}const Ro=new ks("DataConsumer");class Cz extends ur{constructor({id:e,dataProducerId:i,dataChannel:s,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new ur,Ro.debug("constructor()"),this._id=e,this._dataProducerId=i,this._dataChannel=s,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(Ro.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(Ro.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(Ro.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:i}=e;i||(i=new Error("unknown DataChannel error")),i.errorDetail==="sctp-failure"?Ro.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",i.sctpCauseCode,i.message):Ro.error('DataChannel "error" event: %o',i),this.safeEmit("error",i)}),this._dataChannel.addEventListener("close",()=>{this._closed||(Ro.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}const hi=new ks("Transport");class Pz{constructor(e){this.consumerOptions=e,this.promise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}}let Rz=class extends ur{constructor({direction:t,id:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l,handlerFactory:h,extendedRtpCapabilities:g,canProduceByKind:m}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new JR,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new ur,hi.debug("constructor() [id:%s, direction:%s]",e,t),this._id=e,this._direction=t,this._extendedRtpCapabilities=g,this._canProduceByKind=m,this._maxSctpMessageSize=n?n.maxMessageSize:null,c=li(c,{}),delete c.iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=h(),this._handler.run({direction:t,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:g}),this._appData=l||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}get producers(){return this._producers}set appData(t){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){hi.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close();for(const t of this._producers.values())t.transportClosed();this._producers.clear();for(const t of this._consumers.values())t.transportClosed();this._consumers.clear();for(const t of this._dataProducers.values())t.transportClosed();this._dataProducers.clear();for(const t of this._dataConsumers.values())t.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new kt("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:t}){if(hi.debug("restartIce()"),this._closed)throw new kt("closed");if(!t)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(t),"transport.restartIce()")}async updateIceServers({iceServers:t}={}){if(hi.debug("updateIceServers()"),this._closed)throw new kt("closed");if(!Array.isArray(t))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(t),"transport.updateIceServers()")}async produce({track:t,encodings:e,codecOptions:i,codec:s,stopTracks:r=!0,disableTrackOnPause:n=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(hi.debug("produce() [track:%o]",t),this._closed)throw new kt("closed");if(t){if(this._direction!=="send")throw new hs("not a sending Transport");if(this._canProduceByKind[t.kind]){if(t.readyState==="ended")throw new kt("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new hs(`cannot produce ${t.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let c;if(e&&!Array.isArray(e))throw TypeError("encodings must be an array");e&&e.length===0?c=void 0:e&&(c=e.map(g=>{const m={active:!0};return g.active===!1&&(m.active=!1),typeof g.dtx=="boolean"&&(m.dtx=g.dtx),typeof g.scalabilityMode=="string"&&(m.scalabilityMode=g.scalabilityMode),typeof g.scaleResolutionDownBy=="number"&&(m.scaleResolutionDownBy=g.scaleResolutionDownBy),typeof g.maxBitrate=="number"&&(m.maxBitrate=g.maxBitrate),typeof g.maxFramerate=="number"&&(m.maxFramerate=g.maxFramerate),typeof g.adaptivePtime=="boolean"&&(m.adaptivePtime=g.adaptivePtime),typeof g.priority=="string"&&(m.priority=g.priority),typeof g.networkPriority=="string"&&(m.networkPriority=g.networkPriority),m}));const{localId:u,rtpParameters:l,rtpSender:h}=await this._handler.send({track:t,encodings:c,codecOptions:i,codec:s});try{v_(l);const{id:g}=await new Promise((f,_)=>{this.safeEmit("produce",{kind:t.kind,rtpParameters:l,appData:o},f,_)}),m=new xz({id:g,localId:u,rtpSender:h,track:t,rtpParameters:l,stopTracks:r,disableTrackOnPause:n,zeroRtpOnPause:a,appData:o});return this._producers.set(m.id,m),this.handleProducer(m),this._observer.safeEmit("newproducer",m),m}catch(g){throw this._handler.stopSending(u).catch(()=>{}),g}},"transport.produce()").catch(c=>{if(r)try{t.stop()}catch{}throw c})}async consume({id:t,producerId:e,kind:i,rtpParameters:s,streamId:r,appData:n={}}){if(hi.debug("consume()"),s=li(s,void 0),this._closed)throw new kt("closed");if(this._direction!=="recv")throw new hs("not a receiving Transport");if(typeof t!="string")throw new TypeError("missing id");if(typeof e!="string")throw new TypeError("missing producerId");if(i!=="audio"&&i!=="video")throw new TypeError(`invalid kind '${i}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object");if(!vz(s,this._extendedRtpCapabilities))throw new hs("cannot consume this Producer");const a=new Pz({id:t,producerId:e,kind:i,rtpParameters:s,streamId:r,appData:n});return this._pendingConsumerTasks.push(a),Jy(()=>{if(this._closed)throw new kt("closed");this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),a.promise}async produceData({ordered:t=!0,maxPacketLifeTime:e,maxRetransmits:i,label:s="",protocol:r="",appData:n={}}={}){if(hi.debug("produceData()"),this._closed)throw new kt("closed");if(this._direction!=="send")throw new hs("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object")}else throw new hs("SCTP not enabled by remote Transport");return(e||i)&&(t=!1),this._awaitQueue.push(async()=>{const{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:t,maxPacketLifeTime:e,maxRetransmits:i,label:s,protocol:r});vx(o);const{id:c}=await new Promise((l,h)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:s,protocol:r,appData:n},l,h)}),u=new Tz({id:c,dataChannel:a,sctpStreamParameters:o,appData:n});return this._dataProducers.set(u.id,u),this.handleDataProducer(u),this._observer.safeEmit("newdataproducer",u),u},"transport.produceData()")}async consumeData({id:t,dataProducerId:e,sctpStreamParameters:i,label:s="",protocol:r="",appData:n={}}){if(hi.debug("consumeData()"),i=li(i,void 0),this._closed)throw new kt("closed");if(this._direction!=="recv")throw new hs("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof t!="string")throw new TypeError("missing id");if(typeof e!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(n&&typeof n!="object")throw new TypeError("if given, appData must be an object")}else throw new hs("SCTP not enabled by remote Transport");return vx(i),this._awaitQueue.push(async()=>{const{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:i,label:s,protocol:r}),o=new Cz({id:t,dataProducerId:e,dataChannel:a,sctpStreamParameters:i,appData:n});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){hi.debug("createPendingConsumers() | there is no Consumer to be created");return}const t=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let e;const i=[];for(const s of t){const{id:r,kind:n,rtpParameters:a,streamId:o}=s.consumerOptions;i.push({trackId:r,kind:n,rtpParameters:a,streamId:o})}try{const s=await this._handler.receive(i);for(let r=0;r<s.length;r++){const n=t[r],a=s[r],{id:o,producerId:c,kind:u,rtpParameters:l,appData:h}=n.consumerOptions,{localId:g,rtpReceiver:m,track:f}=a,_=new Ez({id:o,localId:g,producerId:c,rtpReceiver:m,track:f,rtpParameters:l,appData:h});this._consumers.set(_.id,_),this.handleConsumer(_),!this._probatorConsumerCreated&&!e&&u==="video"&&(e=_),this._observer.safeEmit("newconsumer",_),n.resolve(_)}}catch(s){for(const r of t)r.reject(s)}if(e)try{const s=fz(e.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:s}]),hi.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(s){hi.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",s)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){hi.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const t=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const e=t.map(i=>i.localId);await this._handler.pauseReceiving(e)}catch(e){hi.error("pausePendingConsumers() | failed to pause Consumers:",e)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){hi.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const t=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const e=t.map(i=>i.localId);await this._handler.resumeReceiving(e)}catch(e){hi.error("resumePendingConsumers() | failed to resume Consumers:",e)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){hi.debug("closePendingConsumers() | there is no Consumer to be closed");return}const t=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(t.map(e=>e.localId))}catch(e){hi.error("closePendingConsumers() | failed to close Consumers:",e)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const t=this._handler;t.on("@connect",({dtlsParameters:e},i,s)=>{if(this._closed){s(new kt("closed"));return}this.safeEmit("connect",{dtlsParameters:e},i,s)}),t.on("@connectionstatechange",e=>{e!==this._connectionState&&(hi.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))})}handleProducer(t){t.on("@close",()=>{this._producers.delete(t.id),!this._closed&&this._awaitQueue.push(async()=>this._handler.stopSending(t.localId),"producer @close event").catch(e=>hi.warn("producer.close() failed:%o",e))}),t.on("@pause",(e,i)=>{this._awaitQueue.push(async()=>this._handler.pauseSending(t.localId),"producer @pause event").then(e).catch(i)}),t.on("@resume",(e,i)=>{this._awaitQueue.push(async()=>this._handler.resumeSending(t.localId),"producer @resume event").then(e).catch(i)}),t.on("@replacetrack",(e,i,s)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(t.localId,e),"producer @replacetrack event").then(i).catch(s)}),t.on("@setmaxspatiallayer",(e,i,s)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(t.localId,e),"producer @setmaxspatiallayer event").then(i).catch(s)}),t.on("@setrtpencodingparameters",(e,i,s)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(t.localId,e),"producer @setrtpencodingparameters event").then(i).catch(s)}),t.on("@getstats",(e,i)=>{if(this._closed)return i(new kt("closed"));this._handler.getSenderStats(t.localId).then(e).catch(i)})}handleConsumer(t){t.on("@close",()=>{this._consumers.delete(t.id),this._pendingPauseConsumers.delete(t.id),this._pendingResumeConsumers.delete(t.id),!this._closed&&(this._pendingCloseConsumers.set(t.id,t),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),t.on("@pause",()=>{this._pendingResumeConsumers.has(t.id)&&this._pendingResumeConsumers.delete(t.id),this._pendingPauseConsumers.set(t.id,t),Jy(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),t.on("@resume",()=>{this._pendingPauseConsumers.has(t.id)&&this._pendingPauseConsumers.delete(t.id),this._pendingResumeConsumers.set(t.id,t),Jy(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),t.on("@getstats",(e,i)=>{if(this._closed)return i(new kt("closed"));this._handler.getReceiverStats(t.localId).then(e).catch(i)})}handleDataProducer(t){t.on("@close",()=>{this._dataProducers.delete(t.id)})}handleDataConsumer(t){t.on("@close",()=>{this._dataConsumers.delete(t.id)})}};const Oi=new ks("Device");function Iz(){var t,e,i,s;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){Oi.warn("this._detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(Oi.debug("this._detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(Oi.debug("this._detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){let r=navigator.userAgent;r=r==null?void 0:r.replace("motorola edge","motorola x");const n=Zw.getParser(r),a=n.getEngine();if(n.satisfies({chrome:">=111",chromium:">=111","microsoft edge":">=111"}))return"Chrome111";if(n.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(n.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(n.satisfies({firefox:">=60"}))return"Firefox60";if(n.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||n.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||((e=(t=n.parsedResult)===null||t===void 0?void 0:t.os)===null||e===void 0?void 0:e.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(n.satisfies({"microsoft edge":">=11"})&&n.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(a.name&&a.name.toLowerCase()==="blink"){const o=r.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(o){const c=Number(o[1]);return c>=111?"Chrome111":c>=74?"Chrome74":"Chrome70"}else return"Chrome111"}else{if(((s=(i=n.parsedResult)===null||i===void 0?void 0:i.os)===null||s===void 0?void 0:s.name)==="iOS"&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")||a.name&&a.name.toLowerCase()==="webkit"&&a.version&&parseFloat(a.version)>605)return"Safari12";Oi.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",n.getBrowserName(),n.getBrowserVersion());return}}else{Oi.warn("this._detectDevice() | unknown device");return}}class Az{constructor({handlerName:e,handlerFactory:i,Handler:s}={}){if(this._loaded=!1,this._observer=new ur,Oi.debug("constructor()"),s)if(Oi.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof s=="string")e=s;else throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");if(e&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(e)Oi.debug("constructor() | handler given: %s",e);else if(e=Iz(),e)Oi.debug("constructor() | detected handler: %s",e);else throw new hs("device not supported");this.switchDevice(e)}const r=this._handlerFactory();this._handlerName=r.name,r.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new kt("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new kt("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){Oi.debug("load() [routerRtpCapabilities:%o]",e),e=li(e,void 0);let i;try{if(this._loaded)throw new kt("already loaded");Gy(e),i=this._handlerFactory();const s=await i.getNativeRtpCapabilities();Oi.debug("load() | got native RTP capabilities:%o",s),Gy(s),this._extendedRtpCapabilities=gz(s,e),Oi.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=yx("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=yx("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=mz(this._extendedRtpCapabilities),Gy(this._recvRtpCapabilities),Oi.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await i.getNativeSctpCapabilities(),Oi.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),pz(this._sctpCapabilities),Oi.debug("load() succeeded"),this._loaded=!0,i.close()}catch(s){throw i&&i.close(),s}}canProduce(e){if(this._loaded){if(e!=="audio"&&e!=="video")throw new TypeError(`invalid kind "${e}"`)}else throw new kt("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l}){return Oi.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l})}createRecvTransport({id:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l}){return Oi.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,appData:l})}createTransport({direction:e,id:i,iceParameters:s,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,appData:h}){if(this._loaded){if(typeof i!="string")throw new TypeError("missing id");if(typeof s!="object")throw new TypeError("missing iceParameters");if(Array.isArray(r)){if(typeof n!="object")throw new TypeError("missing dtlsParameters");if(a&&typeof a!="object")throw new TypeError("wrong sctpParameters");if(h&&typeof h!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new kt("not loaded");const g=new Rz({direction:e,id:i,iceParameters:s,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:o,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,appData:h,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",g),g}}function sh({sdpObject:t}){const e=new Map,i=[];let s=!1,r=!1;for(const n of t.media){const a=n.type;switch(a){case"audio":{if(s)continue;s=!0;break}case"video":{if(r)continue;r=!0;break}default:continue}for(const o of n.rtp){const c={kind:a,mimeType:`${a}/${o.codec}`,preferredPayloadType:o.payload,clockRate:o.rate,channels:o.encoding,parameters:{},rtcpFeedback:[]};e.set(c.preferredPayloadType,c)}for(const o of n.fmtp||[]){const c=O5(o.config),u=e.get(o.payload);u&&(c&&c.hasOwnProperty("profile-level-id")&&(c["profile-level-id"]=String(c["profile-level-id"])),u.parameters=c)}for(const o of n.rtcpFb||[]){const c={type:o.type,parameter:o.subtype};if(c.parameter||delete c.parameter,o.payload!=="*"){const u=e.get(o.payload);if(!u)continue;u.rtcpFeedback.push(c)}else for(const u of e.values())u.kind===a&&!/.+\/rtx$/i.test(u.mimeType)&&u.rtcpFeedback.push(c)}for(const o of n.ext||[]){if(o["encrypt-uri"])continue;const c={kind:a,uri:o.uri,preferredId:o.value};i.push(c)}}return{codecs:Array.from(e.values()),headerExtensions:i}}function rh({sdpObject:t}){const e=(t.media||[]).find(r=>r.iceUfrag&&r.port!==0);if(!e)throw new Error("no active media section found");const i=e.fingerprint||t.fingerprint;let s;switch(e.setup){case"active":s="client";break;case"passive":s="server";break;case"actpass":s="auto";break}return{role:s,fingerprints:[{algorithm:i.type,value:i.hash}]}}function nh({offerMediaObject:t}){const e=(t.ssrcs||[]).find(i=>i.attribute==="cname");return e?e.value:""}function ah({offerRtpParameters:t,answerMediaObject:e}){for(const i of t.codecs){const s=i.mimeType.toLowerCase();if(s!=="audio/opus"||!(e.rtp||[]).find(a=>a.payload===i.payloadType))continue;e.fmtp=e.fmtp||[];let r=e.fmtp.find(a=>a.payload===i.payloadType);r||(r={payload:i.payloadType,config:""},e.fmtp.push(r));const n=O5(r.config);switch(s){case"audio/opus":{const a=i.parameters["sprop-stereo"];a!==void 0&&(n.stereo=a?1:0);break}}r.config="";for(const a of Object.keys(n))r.config&&(r.config+=";"),r.config+=`${a}=${n[a]}`}}function mo({offerMediaObject:t}){const e=new Set;for(const r of t.ssrcs||[]){const n=r.id;e.add(n)}if(e.size===0)throw new Error("no a=ssrc lines found");const i=new Map;for(const r of t.ssrcGroups||[]){if(r.semantics!=="FID")continue;let[n,a]=r.ssrcs.split(/\s+/);n=Number(n),a=Number(a),e.has(n)&&(e.delete(n),e.delete(a),i.set(n,a))}for(const r of e)i.set(r,null);const s=[];for(const[r,n]of i){const a={ssrc:r};n&&(a.rtx={ssrc:n}),s.push(a)}return s}function sf({offerMediaObject:t,numStreams:e}){if(e<=1)throw new TypeError("numStreams must be greater than 1");const i=(t.ssrcs||[]).find(h=>h.attribute==="msid");if(!i)throw new Error("a=ssrc line with msid information not found");const[s,r]=i.value.split(" "),n=i.id;let a;(t.ssrcGroups||[]).some(h=>{if(h.semantics!=="FID")return!1;const g=h.ssrcs.split(/\s+/);return Number(g[0])===n?(a=Number(g[1]),!0):!1});const o=t.ssrcs.find(h=>h.attribute==="cname");if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,u=[],l=[];for(let h=0;h<e;++h)u.push(n+h),a&&l.push(a+h);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:u.join(" ")});for(let h=0;h<u.length;++h){const g=u[h];t.ssrcs.push({id:g,attribute:"cname",value:c}),t.ssrcs.push({id:g,attribute:"msid",value:`${s} ${r}`})}for(let h=0;h<l.length;++h){const g=u[h],m=l[h];t.ssrcs.push({id:m,attribute:"cname",value:c}),t.ssrcs.push({id:m,attribute:"msid",value:`${s} ${r}`}),t.ssrcGroups.push({semantics:"FID",ssrcs:`${g} ${m}`})}}let Al=class extends ur{constructor(){super()}};class KR{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:s,planB:r=!1}){if(this._mediaObject={},this._planB=r,e&&this.setIceParameters(e),i){this._mediaObject.candidates=[];for(const n of i){const a={};a.component=1,a.foundation=n.foundation,a.ip=n.ip,a.port=n.port,a.priority=n.priority,a.transport=n.protocol,a.type=n.type,n.tcpType&&(a.tcptype=n.tcpType),this._mediaObject.candidates.push(a)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}s&&this.setDtlsRole(s.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}muxSimulcastStreams(e){if(this._mediaObject.simulcast&&this._mediaObject.simulcast.list1){const i={};e.forEach(n=>{n.rid&&(i[n.rid]=n)});const s=this._mediaObject.simulcast.list1,r=L5(s);r.forEach(n=>{n.forEach(a=>{var o;a.paused=!(!((o=i[a.scid])===null||o===void 0)&&o.active)})}),this._mediaObject.simulcast.list1=r.map(n=>n.map(a=>`${a.paused?"~":""}${a.scid}`).join(",")).join(";")}}}class wx extends KR{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:s,sctpParameters:r,plainRtpParameters:n,planB:a=!1,offerMediaObject:o,offerRtpParameters:c,answerRtpParameters:u,codecOptions:l,extmapAllowMixed:h=!1,forceGoogConference:g=!1}){switch(super({iceParameters:e,iceCandidates:i,dtlsParameters:s,planB:a}),this._mediaObject.mid=String(o.mid),this._mediaObject.type=o.type,this._mediaObject.protocol=o.protocol,n?(this._mediaObject.connection={ip:n.ip,version:n.ipVersion},this._mediaObject.port=n.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),o.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const m of u.codecs){const f={payload:m.payloadType,codec:Wb(m),rate:m.clockRate};m.channels>1&&(f.encoding=m.channels),this._mediaObject.rtp.push(f);const _=li(m.parameters,{});if(l){const{opusStereo:y,opusFec:b,opusDtx:x,opusMaxPlaybackRate:C,opusMaxAverageBitrate:D,opusPtime:M,videoGoogleStartBitrate:L,videoGoogleMaxBitrate:V,videoGoogleMinBitrate:se}=l,Q=c.codecs.find(te=>te.payloadType===m.payloadType);switch(m.mimeType.toLowerCase()){case"audio/opus":{y!==void 0&&(Q.parameters["sprop-stereo"]=y?1:0,_.stereo=y?1:0),b!==void 0&&(Q.parameters.useinbandfec=b?1:0,_.useinbandfec=b?1:0),x!==void 0&&(Q.parameters.usedtx=x?1:0,_.usedtx=x?1:0),C!==void 0&&(_.maxplaybackrate=C),D!==void 0&&(_.maxaveragebitrate=D),M!==void 0&&(Q.parameters.ptime=M,_.ptime=M);break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{L!==void 0&&(_["x-google-start-bitrate"]=L),V!==void 0&&(_["x-google-max-bitrate"]=V),se!==void 0&&(_["x-google-min-bitrate"]=se);break}}}const k={payload:m.payloadType,config:""};for(const y of Object.keys(_))k.config&&(k.config+=";"),k.config+=`${y}=${_[y]}`;k.config&&this._mediaObject.fmtp.push(k);for(const y of m.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:m.payloadType,type:y.type,subtype:y.parameter})}this._mediaObject.payloads=u.codecs.map(m=>m.payloadType).join(" "),this._mediaObject.ext=[];for(const m of u.headerExtensions)(o.ext||[]).some(f=>f.uri===m.uri)&&this._mediaObject.ext.push({uri:m.uri,value:m.id});if(h&&o.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),o.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:o.simulcast.list1},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}else if(o.simulcast_03){this._mediaObject.simulcast_03={value:o.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const m of o.rids||[])m.direction==="send"&&this._mediaObject.rids.push({id:m.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",(this._planB||g)&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof o.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=r.port,this._mediaObject.maxMessageSize=r.maxMessageSize):o.sctpmap&&(this._mediaObject.payloads=r.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:r.port,maxMessageSize:r.maxMessageSize});break}}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){var i;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const s={};for(const a of e)a.rid&&(s[a.rid]=a);const r=this._mediaObject.simulcast.list1,n=L5(r);for(const a of n)for(const o of a)o.paused=!(!((i=s[o.scid])===null||i===void 0)&&i.active);this._mediaObject.simulcast.list1=n.map(a=>a.map(o=>`${o.paused?"~":""}${o.scid}`).join(",")).join(";")}}class _x extends KR{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:s,sctpParameters:r,plainRtpParameters:n,planB:a=!1,mid:o,kind:c,offerRtpParameters:u,streamId:l,trackId:h,oldDataChannelSpec:g=!1}){switch(super({iceParameters:e,iceCandidates:i,dtlsParameters:s,planB:a}),this._mediaObject.mid=String(o),this._mediaObject.type=c,n?(this._mediaObject.connection={ip:n.ip,version:n.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=n.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},r?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),c){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${l||"-"} ${h}`);for(const k of u.codecs){const y={payload:k.payloadType,codec:Wb(k),rate:k.clockRate};k.channels>1&&(y.encoding=k.channels),this._mediaObject.rtp.push(y);const b={payload:k.payloadType,config:""};for(const x of Object.keys(k.parameters))b.config&&(b.config+=";"),b.config+=`${x}=${k.parameters[x]}`;b.config&&this._mediaObject.fmtp.push(b);for(const x of k.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:k.payloadType,type:x.type,subtype:x.parameter})}this._mediaObject.payloads=u.codecs.map(k=>k.payloadType).join(" "),this._mediaObject.ext=[];for(const k of u.headerExtensions)this._mediaObject.ext.push({uri:k.uri,value:k.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const m=u.encodings[0],f=m.ssrc,_=m.rtx&&m.rtx.ssrc?m.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],u.rtcp.cname&&this._mediaObject.ssrcs.push({id:f,attribute:"cname",value:u.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:f,attribute:"msid",value:`${l||"-"} ${h}`}),_&&(u.rtcp.cname&&this._mediaObject.ssrcs.push({id:_,attribute:"cname",value:u.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:_,attribute:"msid",value:`${l||"-"} ${h}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${f} ${_}`}));break}case"application":{g?(this._mediaObject.payloads=r.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:r.port,maxMessageSize:r.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=r.port,this._mediaObject.maxMessageSize=r.maxMessageSize);break}}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:i,trackId:s}){const r=e.encodings[0],n=r.ssrc,a=r.rtx&&r.rtx.ssrc?r.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const c of e.codecs){if(o.includes(String(c.payloadType)))continue;const u={payload:c.payloadType,codec:Wb(c),rate:c.clockRate};c.channels>1&&(u.encoding=c.channels),this._mediaObject.rtp.push(u);const l={payload:c.payloadType,config:""};for(const h of Object.keys(c.parameters))l.config&&(l.config+=";"),l.config+=`${h}=${c.parameters[h]}`;l.config&&this._mediaObject.fmtp.push(l);for(const h of c.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:h.type,subtype:h.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(c=>!this._mediaObject.payloads.includes(c.payloadType)).map(c=>c.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:n,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:n,attribute:"msid",value:`${i||"-"} ${s}`}),a&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${i||"-"} ${s}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${n} ${a}`}))}planBStopReceiving({offerRtpParameters:e}){const i=e.encodings[0],s=i.ssrc,r=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(n=>n.id!==s&&n.id!==r),r&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(n=>n.ssrcs!==`${s} ${r}`))}}function Wb(t){const e=new RegExp("^(audio|video)/(.+)","i").exec(t.mimeType);if(!e)throw new TypeError("invalid codec.mimeType");return e[2]}const Ky=new ks("RemoteSdp");class oh{constructor({iceParameters:e,iceCandidates:i,dtlsParameters:s,sctpParameters:r,plainRtpParameters:n,planB:a=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=i,this._dtlsParameters=s,this._sctpParameters=r,this._plainRtpParameters=n,this._planB=a,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),s){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const o=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:s.fingerprints[o-1].algorithm,hash:s.fingerprints[o-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}n&&(this._sdpObject.origin.address=n.ip,this._sdpObject.origin.ipVer=n.ipVersion)}updateIceParameters(e){Ky.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const i of this._mediaSections)i.setIceParameters(e)}updateDtlsRole(e){Ky.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const i of this._mediaSections)i.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const i=this._mediaSections[e];if(i.closed)return{idx:e,reuseMid:i.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:i,offerRtpParameters:s,answerRtpParameters:r,codecOptions:n,extmapAllowMixed:a=!1,forceGoogConference:o=!1}){const c=new wx({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:s,answerRtpParameters:r,codecOptions:n,extmapAllowMixed:a,forceGoogConference:o});i?this._replaceMediaSection(c,i):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}receive({mid:e,kind:i,offerRtpParameters:s,streamId:r,trackId:n}){const a=this._midToIndex.get(e);let o;if(a!==void 0&&(o=this._mediaSections[a]),o)o.planBReceive({offerRtpParameters:s,streamId:r,trackId:n}),this._replaceMediaSection(o);else{o=new _x({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:i,offerRtpParameters:s,streamId:r,trackId:n});const c=this._mediaSections.find(u=>u.closed);c?this._replaceMediaSection(o,c.mid):this._addMediaSection(o)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const i=this._findMediaSection(e);return e===this._firstMid?(Ky.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(i.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,i){const s=this._midToIndex.get(e);if(s===void 0)throw new Error(`no media section found with mid '${e}'`);const r=this._mediaSections[s];if(r===void 0)throw new Error(`no media section found with idx '${s}'`);r.muxSimulcastStreams(i),this._replaceMediaSection(r)}planBStopReceiving({mid:e,offerRtpParameters:i}){const s=this._findMediaSection(e);s.planBStopReceiving({offerRtpParameters:i}),this._replaceMediaSection(s)}sendSctpAssociation({offerMediaObject:e}){const i=new wx({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(i)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const i=new _x({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(i)}getSdp(){return this._sdpObject.origin.sessionVersion++,zr(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,i){if(typeof i=="string"){const s=this._midToIndex.get(i);if(s===void 0)throw new Error(`no media section found for reuseMid '${i}'`);const r=this._mediaSections[s];this._mediaSections[s]=e,this._midToIndex.delete(r.mid),this._midToIndex.set(e.mid,s),this._sdpObject.media[s]=e.getObject(),this._regenerateBundleMids()}else{const s=this._midToIndex.get(e.mid);if(s===void 0)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[s]=e,this._sdpObject.media[s]=e.getObject()}}_findMediaSection(e){const i=this._midToIndex.get(e);if(i===void 0)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[i]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}const Dz=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function ch(t){const e=Dz.exec(t||"");return e?{spatialLayers:Number(e[1]),temporalLayers:Number(e[2])}:{spatialLayers:1,temporalLayers:1}}const Ee=new ks("Chrome70"),kx={OS:1024,MIS:1024};class b_ extends Al{static createFactory(){return()=>new b_}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(Ee.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){Ee.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const s=xe(i.sdp);return sh({sdpObject:s})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return Ee.debug("getNativeSctpCapabilities()"),{numStreams:kx}}run({direction:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){Ee.debug("run()"),this._direction=e,this._remoteSdp=new oh({iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n}),this._sendingRtpParametersByKind={audio:pr("audio",l),video:pr("video",l)},this._sendingRemoteRtpParametersByKind={audio:bn("audio",l),video:bn("video",l)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(Ee.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){Ee.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(Ee.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});Ee.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};Ee.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ee.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();Ee.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:s,codec:r}){var n;this.assertSendDirection(),Ee.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=li(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Br(a.codecs,r);const o=li(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Br(o.codecs,r);const c=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),h=xe(l.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:h}),i&&i.length>1&&(Ee.debug("send() | enabling legacy simulcast"),h=xe(l.sdp),g=h.media[c.idx],sf({offerMediaObject:g,numStreams:i.length}),l={type:"offer",sdp:zr(h)});let m=!1;const f=ch((i||[{}])[0].scalabilityMode);if(i&&i.length===1&&f.spatialLayers>1&&a.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(Ee.debug("send() | enabling legacy simulcast for VP9 SVC"),m=!0,h=xe(l.sdp),g=h.media[c.idx],sf({offerMediaObject:g,numStreams:f.spatialLayers}),l={type:"offer",sdp:zr(h)}),Ee.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),i){Ee.debug("send() | applying given encodings");const y=u.sender.getParameters();for(let b=0;b<(y.encodings||[]).length;++b){const x=y.encodings[b],C=i[b];if(!C)break;y.encodings[b]=Object.assign(x,C)}await u.sender.setParameters(y)}const _=u.mid;if(a.mid=_,h=xe(this._pc.localDescription.sdp),g=h.media[c.idx],a.rtcp.cname=nh({offerMediaObject:g}),a.encodings=mo({offerMediaObject:g}),i)for(let y=0;y<a.encodings.length;++y)i[y]&&Object.assign(a.encodings[y],i[y]);if(m&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const y of a.encodings)y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:s});const k={type:"answer",sdp:this._remoteSdp.getSdp()};return Ee.debug("send() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.set(_,u),{localId:_,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),Ee.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const s=await this._pc.createOffer();Ee.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};Ee.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,i){this.assertSendDirection(),i?Ee.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Ee.debug("replaceTrack() [localId:%s, no track]",e);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),Ee.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();Ee.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Ee.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),Ee.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{r.encodings[c]={...o,...i}}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();Ee.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};Ee.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:s,label:r,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:s,protocol:n};Ee.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(r,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%kx.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),h=xe(l.sdp),g=h.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:h}),Ee.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};Ee.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const s=[],r=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:h,streamId:g}=c;Ee.debug("receive() [trackId:%s, kind:%s]",u,l);const m=h.mid||String(this._mapMidTransceiver.size);r.set(u,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:h,streamId:g||h.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};Ee.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,h=r.get(u),g=o.media.find(m=>String(m.mid)===h);ah({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:zr(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),Ee.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=r.get(u),h=this._pc.getTransceivers().find(g=>g.mid===l);if(!h)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,h),s.push({localId:l,track:h.receiver.track,rtpReceiver:h.receiver})}return s}async stopReceiving(e){this.assertRecvDirection();for(const r of e){Ee.debug("stopReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};Ee.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();Ee.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const r of e)this._mapMidTransceiver.delete(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:s}){var r;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:c,protocol:s};Ee.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const h={type:"offer",sdp:this._remoteSdp.getSdp()};Ee.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:m})}Ee.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const s=rh({sdpObject:i});s.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:s},r,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}const ce=new ks("Chrome74"),Sx={OS:1024,MIS:1024};let Mz=class QR extends Al{static createFactory(){return()=>new QR}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(ce.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ce.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const s=xe(i.sdp);return sh({sdpObject:s})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return ce.debug("getNativeSctpCapabilities()"),{numStreams:Sx}}run({direction:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){ce.debug("run()"),this._direction=e,this._remoteSdp=new oh({iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n}),this._sendingRtpParametersByKind={audio:pr("audio",l),video:pr("video",l)},this._sendingRemoteRtpParametersByKind={audio:bn("audio",l),video:bn("video",l)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(ce.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){ce.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(ce.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ce.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ce.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:s,codec:r}){var n,a;this.assertSendDirection(),ce.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&i.length>1&&i.forEach((b,x)=>{b.rid=`r${x}`});const o=li(this._sendingRtpParametersByKind[e.kind],{});o.codecs=Br(o.codecs,r);const c=li(this._sendingRemoteRtpParametersByKind[e.kind],{});c.codecs=Br(c.codecs,r);const u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i});let h=await this._pc.createOffer(),g=xe(h.sdp),m;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:g});let f=!1;const _=ch((i||[{}])[0].scalabilityMode);i&&i.length===1&&_.spatialLayers>1&&o.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(ce.debug("send() | enabling legacy simulcast for VP9 SVC"),f=!0,g=xe(h.sdp),m=g.media[u.idx],sf({offerMediaObject:m,numStreams:_.spatialLayers}),h={type:"offer",sdp:zr(g)}),ce.debug("send() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const k=l.mid;if(o.mid=k,g=xe(this._pc.localDescription.sdp),m=g.media[u.idx],o.rtcp.cname=nh({offerMediaObject:m}),!i)o.encodings=mo({offerMediaObject:m});else if(i.length===1){let b=mo({offerMediaObject:m});Object.assign(b[0],i[0]),f&&(b=[b[0]]),o.encodings=b}else o.encodings=i;if(o.encodings.length>1&&(o.codecs[0].mimeType.toLowerCase()==="video/vp8"||o.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const b of o.encodings)b.scalabilityMode?b.scalabilityMode=`L1T${_.temporalLayers}`:b.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,reuseMid:u.reuseMid,offerRtpParameters:o,answerRtpParameters:c,codecOptions:s,extmapAllowMixed:!0,forceGoogConference:(a=s==null?void 0:s.forceGoogConference)!==null&&a!==void 0?a:!1});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return ce.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(k,l),{localId:k,rtpParameters:o,rtpSender:l.sender}}async stopSending(e){this.assertSendDirection(),ce.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const s=await this._pc.createOffer();ce.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),ce.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const s=await this._pc.createOffer();ce.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async resumeSending(e){this.assertSendDirection(),ce.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const s=await this._pc.createOffer();ce.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async replaceTrack(e,i){this.assertSendDirection(),i?ce.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ce.debug("replaceTrack() [localId:%s, no track]",e);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),ce.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();ce.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),ce.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{r.encodings[c]={...o,...i}}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();ce.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:s,label:r,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:s,protocol:n};ce.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(r,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Sx.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),h=xe(l.sdp),g=h.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:h}),ce.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};ce.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const s=[],r=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:h,streamId:g}=c;ce.debug("receive() [trackId:%s, kind:%s]",u,l);const m=h.mid||String(this._mapMidTransceiver.size);r.set(u,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:h,streamId:g||h.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,h=r.get(u),g=o.media.find(m=>String(m.mid)===h);ah({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:zr(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),ce.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=r.get(u),h=this._pc.getTransceivers().find(g=>g.mid===l);if(h)this._mapMidTransceiver.set(l,h),s.push({localId:l,track:h.receiver.track,rtpReceiver:h.receiver});else throw new Error("new RTCRtpTransceiver not found")}return s}async stopReceiving(e){this.assertRecvDirection();for(const r of e){ce.debug("stopReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ce.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const r of e)this._mapMidTransceiver.delete(r)}async pauseReceiving(e){this.assertRecvDirection();for(const r of e){ce.debug("pauseReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ce.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async resumeReceiving(e){this.assertRecvDirection();for(const r of e){ce.debug("resumeReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ce.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:s}){var r;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:s};ce.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const h={type:"offer",sdp:this._remoteSdp.getSdp()};ce.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:m})}ce.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const s=rh({sdpObject:i});s.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:s},r,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const le=new ks("Chrome111"),xx={OS:1024,MIS:1024};class w_ extends Al{static createFactory(){return()=>new w_}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(le.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){le.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const s=xe(i.sdp);return sh({sdpObject:s})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return le.debug("getNativeSctpCapabilities()"),{numStreams:xx}}run({direction:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){le.debug("run()"),this._direction=e,this._remoteSdp=new oh({iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n}),this._sendingRtpParametersByKind={audio:pr("audio",l),video:pr("video",l)},this._sendingRemoteRtpParametersByKind={audio:bn("audio",l),video:bn("video",l)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(le.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}))}async updateIceServers(e){le.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(le.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});le.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();le.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:s,codec:r}){var n;if(this.assertSendDirection(),le.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&i.length>1){i.forEach((y,b)=>{y.rid=`r${b}`});let _=1,k=1;for(const y of i){const b=y.scalabilityMode?ch(y.scalabilityMode).temporalLayers:3;b>k&&(k=b)}for(const y of i)y.rid=`r${_++}`,y.scalabilityMode=`L1T${k}`}const a=li(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Br(a.codecs,r);const o=li(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Br(o.codecs,r);const c=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),l=await this._pc.createOffer();let h=xe(l.sdp);this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:h}),le.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const g=u.mid;a.mid=g,h=xe(this._pc.localDescription.sdp);const m=h.media[c.idx];if(a.rtcp.cname=nh({offerMediaObject:m}),!i)a.encodings=mo({offerMediaObject:m});else if(i.length===1){const _=mo({offerMediaObject:m});Object.assign(_[0],i[0]),a.encodings=_}else a.encodings=i;this._remoteSdp.send({offerMediaObject:m,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:s,extmapAllowMixed:!0});const f={type:"answer",sdp:this._remoteSdp.getSdp()};return le.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.set(g,u),{localId:g,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),le.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const s=await this._pc.createOffer();le.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),le.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const s=await this._pc.createOffer();le.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async resumeSending(e){this.assertSendDirection(),le.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly";const s=await this._pc.createOffer();le.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async replaceTrack(e,i){this.assertSendDirection(),i?le.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):le.debug("replaceTrack() [localId:%s, no track]",e);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),le.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();le.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),le.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{r.encodings[c]={...o,...i}}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();le.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:s,label:r,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:s,protocol:n};le.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(r,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%xx.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),h=xe(l.sdp),g=h.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:h}),le.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};le.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const s=[],r=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:h,streamId:g}=c;le.debug("receive() [trackId:%s, kind:%s]",u,l);const m=h.mid||String(this._mapMidTransceiver.size);r.set(u,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:h,streamId:g||h.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,h=r.get(u),g=o.media.find(m=>String(m.mid)===h);ah({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:zr(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),le.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=r.get(u),h=this._pc.getTransceivers().find(g=>g.mid===l);if(h)this._mapMidTransceiver.set(l,h),s.push({localId:l,track:h.receiver.track,rtpReceiver:h.receiver});else throw new Error("new RTCRtpTransceiver not found")}return s}async stopReceiving(e){this.assertRecvDirection();for(const r of e){le.debug("stopReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();le.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const r of e)this._mapMidTransceiver.delete(r)}async pauseReceiving(e){this.assertRecvDirection();for(const r of e){le.debug("pauseReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();le.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async resumeReceiving(e){this.assertRecvDirection();for(const r of e){le.debug("resumeReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();le.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:s}){var r;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:s};le.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const h={type:"offer",sdp:this._remoteSdp.getSdp()};le.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:m})}le.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const s=rh({sdpObject:i});s.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:s},r,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}function Oz(){const t=RTCRtpReceiver.getCapabilities(),e=li(t,{});for(const i of e.codecs){if(i.channels=i.numChannels,delete i.numChannels,i.mimeType=i.mimeType||`${i.kind}/${i.name}`,i.parameters){const s=i.parameters;s.apt&&(s.apt=Number(s.apt)),s["packetization-mode"]&&(s["packetization-mode"]=Number(s["packetization-mode"]))}for(const s of i.rtcpFeedback||[])s.parameter||(s.parameter="")}return e}function Ex(t){const e=li(t,{});e.mid&&(e.muxId=e.mid,delete e.mid);for(const i of e.codecs)i.channels&&(i.numChannels=i.channels,delete i.channels),i.mimeType&&!i.name&&(i.name=i.mimeType.split("/")[1]),delete i.mimeType;return e}const Ke=new ks("Edge11");class __ extends Al{static createFactory(){return()=>new __}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){Ke.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const e of this._rtpSenders.values())try{e.stop()}catch{}for(const e of this._rtpReceivers.values())try{e.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return Ke.debug("getNativeRtpCapabilities()"),Oz()}async getNativeSctpCapabilities(){return Ke.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){Ke.debug("run()"),this._sendingRtpParametersByKind={audio:pr("audio",l),video:pr("video",l)},this._remoteIceParameters=i,this._remoteIceCandidates=s,this._remoteDtlsParameters=r,this._cname=`CNAME-${qy()}`,this.setIceGatherer({iceServers:a,iceTransportPolicy:o}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new hs("not supported")}async restartIce(e){if(Ke.debug("restartIce()"),this._remoteIceParameters=e,!!this._transportReady){Ke.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const i of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(i);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:i,codecOptions:s,codec:r}){Ke.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),Ke.debug("send() | calling new RTCRtpSender()");const n=new RTCRtpSender(e,this._dtlsTransport),a=li(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Br(a.codecs,r);const o=a.codecs.some(l=>/.+\/rtx$/i.test(l.mimeType));i||(i=[{}]);for(const l of i)l.ssrc=qy(),o&&(l.rtx={ssrc:qy()});a.encodings=i,a.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const c=Ex(a);Ke.debug("send() | calling rtpSender.send() [params:%o]",c),await n.send(c);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(u,n),{localId:u,rtpParameters:a,rtpSender:n}}async stopSending(e){Ke.debug("stopSending() [localId:%s]",e);const i=this._rtpSenders.get(e);if(!i)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{Ke.debug("stopSending() | calling rtpSender.stop()"),i.stop()}catch(s){throw Ke.warn("stopSending() | rtpSender.stop() failed:%o",s),s}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,i){i?Ke.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Ke.debug("replaceTrack() [localId:%s, no track]",e);const s=this._rtpSenders.get(e);if(!s)throw new Error("RTCRtpSender not found");s.setTrack(i)}async setMaxSpatialLayer(e,i){Ke.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this._rtpSenders.get(e);if(!s)throw new Error("RTCRtpSender not found");const r=s.getParameters();r.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await s.setParameters(r)}async setRtpEncodingParameters(e,i){Ke.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this._rtpSenders.get(e);if(!s)throw new Error("RTCRtpSender not found");const r=s.getParameters();r.encodings.forEach((n,a)=>{r.encodings[a]={...n,...i}}),await s.setParameters(r)}async getSenderStats(e){const i=this._rtpSenders.get(e);if(!i)throw new Error("RTCRtpSender not found");return i.getStats()}async sendDataChannel(e){throw new hs("not implemented")}async receive(e){const i=[];for(const s of e){const{trackId:r,kind:n}=s;Ke.debug("receive() [trackId:%s, kind:%s]",r,n)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const s of e){const{trackId:r,kind:n,rtpParameters:a}=s;Ke.debug("receive() | calling new RTCRtpReceiver()");const o=new RTCRtpReceiver(this._dtlsTransport,n);o.addEventListener("error",l=>{Ke.error('rtpReceiver "error" event [event:%o]',l)});const c=Ex(a);Ke.debug("receive() | calling rtpReceiver.receive() [params:%o]",c),await o.receive(c);const u=r;this._rtpReceivers.set(u,o),i.push({localId:u,track:o.track,rtpReceiver:o})}return i}async stopReceiving(e){for(const i of e){Ke.debug("stopReceiving() [localId:%s]",i);const s=this._rtpReceivers.get(i);if(!s)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(i);try{Ke.debug("stopReceiving() | calling rtpReceiver.stop()"),s.stop()}catch(r){Ke.warn("stopReceiving() | rtpReceiver.stop() failed:%o",r)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const i=this._rtpReceivers.get(e);if(!i)throw new Error("RTCRtpReceiver not found");return i.getStats()}async receiveDataChannel(e){throw new hs("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:i}){const s=new RTCIceGatherer({iceServers:e||[],gatherPolicy:i||"all"});s.addEventListener("error",r=>{Ke.error('iceGatherer "error" event [event:%o]',r)});try{s.gather()}catch(r){Ke.debug("setIceGatherer() | iceGatherer.gather() failed: %s",r.toString())}this._iceGatherer=s}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("candidatepairchange",i=>{Ke.debug('iceTransport "candidatepairchange" event [pair:%o]',i.pair)}),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{Ke.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{Ke.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),e.state==="closed"&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",i=>{Ke.error('dtlsTransport "error" event [event:%o]',i)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){Ke.debug("setupTransport()");const i=this._dtlsTransport.getLocalParameters();i.role=e,await new Promise((s,r)=>{this.safeEmit("@connect",{dtlsParameters:i},s,r)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const s of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(s);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(s=>s.algorithm==="sha-256"||s.algorithm==="sha-384"||s.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}const ge=new ks("Firefox60"),Tx={OS:16,MIS:2048};let Lz=class YR extends Al{static createFactory(){return()=>new YR}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(ge.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){ge.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const s=i.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const r=e.addTransceiver(s,{direction:"sendrecv"}),n=r.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];n.encodings=a,await r.sender.setParameters(n);const o=await e.createOffer();try{i.remove()}catch{}try{s.stop()}catch{}try{e.close()}catch{}const c=xe(o.sdp);return sh({sdpObject:c})}catch(r){try{i.remove()}catch{}try{s.stop()}catch{}try{e.close()}catch{}throw r}}async getNativeSctpCapabilities(){return ge.debug("getNativeSctpCapabilities()"),{numStreams:Tx}}run({direction:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){ge.debug("run()"),this._direction=e,this._remoteSdp=new oh({iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n}),this._sendingRtpParametersByKind={audio:pr("audio",l),video:pr("video",l)},this._sendingRemoteRtpParametersByKind={audio:bn("audio",l),video:bn("video",l)},this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(ge.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){throw new hs("not supported")}async restartIce(e){if(ge.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});ge.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ge.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:s,codec:r}){this.assertSendDirection(),ge.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),i&&(i=li(i,[]),i.length>1&&(i.forEach((f,_)=>{f.rid=`r${_}`}),i.reverse()));const n=li(this._sendingRtpParametersByKind[e.kind],{});n.codecs=Br(n.codecs,r);const a=li(this._sendingRemoteRtpParametersByKind[e.kind],{});a.codecs=Br(a.codecs,r);const o=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(i){const f=o.sender.getParameters();f.encodings=i,await o.sender.setParameters(f)}const c=await this._pc.createOffer();let u=xe(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:u});const l=ch((i||[{}])[0].scalabilityMode);ge.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const h=o.mid;n.mid=h,u=xe(this._pc.localDescription.sdp);const g=u.media[u.media.length-1];if(n.rtcp.cname=nh({offerMediaObject:g}),!i)n.encodings=mo({offerMediaObject:g});else if(i.length===1){const f=mo({offerMediaObject:g});Object.assign(f[0],i[0]),n.encodings=f}else n.encodings=i.reverse();if(n.encodings.length>1&&(n.codecs[0].mimeType.toLowerCase()==="video/vp8"||n.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const f of n.encodings)f.scalabilityMode?f.scalabilityMode=`L1T${l.temporalLayers}`:f.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,offerRtpParameters:n,answerRtpParameters:a,codecOptions:s,extmapAllowMixed:!0});const m={type:"answer",sdp:this._remoteSdp.getSdp()};return ge.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.set(h,o),{localId:h,rtpParameters:n,rtpSender:o.sender}}async stopSending(e){ge.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const s=await this._pc.createOffer();ge.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),ge.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const s=await this._pc.createOffer();ge.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async resumeSending(e){this.assertSendDirection(),ge.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const s=await this._pc.createOffer();ge.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async replaceTrack(e,i){this.assertSendDirection(),i?ge.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ge.debug("replaceTrack() [localId:%s, no track]",e);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),ge.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated transceiver not found");const r=s.sender.getParameters();i=r.encodings.length-1-i,r.encodings.forEach((o,c)=>{c>=i?o.active=!0:o.active=!1}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();ge.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),ge.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{r.encodings[c]={...o,...i}}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();ge.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:s,label:r,protocol:n}){this.assertSendDirection();const a={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:s,protocol:n};ge.debug("sendDataChannel() [options:%o]",a);const o=this._pc.createDataChannel(r,a);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Tx.MIS,!this._hasDataChannelMediaSection){const u=await this._pc.createOffer(),l=xe(u.sdp),h=l.media.find(m=>m.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:l}),ge.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),this._remoteSdp.sendSctpAssociation({offerMediaObject:h});const g={type:"answer",sdp:this._remoteSdp.getSdp()};ge.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._hasDataChannelMediaSection=!0}const c={streamId:a.id,ordered:a.ordered,maxPacketLifeTime:a.maxPacketLifeTime,maxRetransmits:a.maxRetransmits};return{dataChannel:o,sctpStreamParameters:c}}async receive(e){this.assertRecvDirection();const i=[],s=new Map;for(const o of e){const{trackId:c,kind:u,rtpParameters:l,streamId:h}=o;ge.debug("receive() [trackId:%s, kind:%s]",c,u);const g=l.mid||String(this._mapMidTransceiver.size);s.set(c,g),this._remoteSdp.receive({mid:g,kind:u,offerRtpParameters:l,streamId:h||l.rtcp.cname,trackId:c})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);let n=await this._pc.createAnswer();const a=xe(n.sdp);for(const o of e){const{trackId:c,rtpParameters:u}=o,l=s.get(c),h=a.media.find(g=>String(g.mid)===l);ah({offerRtpParameters:u,answerMediaObject:h}),n={type:"answer",sdp:zr(a)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:a}),ge.debug("receive() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const o of e){const{trackId:c}=o,u=s.get(c),l=this._pc.getTransceivers().find(h=>h.mid===u);if(!l)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(u,l),i.push({localId:u,track:l.receiver.track,rtpReceiver:l.receiver})}return i}async stopReceiving(e){this.assertRecvDirection();for(const r of e){ge.debug("stopReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ge.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const r of e)this._mapMidTransceiver.delete(r)}async pauseReceiving(e){this.assertRecvDirection();for(const r of e){ge.debug("pauseReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ge.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async resumeReceiving(e){this.assertRecvDirection();for(const r of e){ge.debug("resumeReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();ge.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:s}){this.assertRecvDirection();const{streamId:r,ordered:n,maxPacketLifeTime:a,maxRetransmits:o}=e,c={negotiated:!0,id:r,ordered:n,maxPacketLifeTime:a,maxRetransmits:o,protocol:s};ge.debug("receiveDataChannel() [options:%o]",c);const u=this._pc.createDataChannel(i,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const l={type:"offer",sdp:this._remoteSdp.getSdp()};ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const h=await this._pc.createAnswer();if(!this._transportReady){const g=xe(h.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:g})}ge.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setLocalDescription(h),this._hasDataChannelMediaSection=!0}return{dataChannel:u}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const s=rh({sdpObject:i});s.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:s},r,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};const de=new ks("Safari12"),Cx={OS:1024,MIS:1024};let Nz=class ZR extends Al{static createFactory(){return()=>new ZR}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(de.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){de.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const i=await e.createOffer();try{e.close()}catch{}const s=xe(i.sdp);return sh({sdpObject:s})}catch(i){try{e.close()}catch{}throw i}}async getNativeSctpCapabilities(){return de.debug("getNativeSctpCapabilities()"),{numStreams:Cx}}run({direction:e,iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n,iceServers:a,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:u,extendedRtpCapabilities:l}){de.debug("run()"),this._direction=e,this._remoteSdp=new oh({iceParameters:i,iceCandidates:s,dtlsParameters:r,sctpParameters:n}),this._sendingRtpParametersByKind={audio:pr("audio",l),video:pr("video",l)},this._sendingRemoteRtpParametersByKind={audio:bn("audio",l),video:bn("video",l)},r.role&&r.role!=="auto"&&(this._forcedLocalDtlsRole=r.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:a||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...c},u),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(de.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){de.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(e){if(de.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),!!this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});de.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();de.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOptions:s,codec:r}){var n;this.assertSendDirection(),de.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=li(this._sendingRtpParametersByKind[e.kind],{});a.codecs=Br(a.codecs,r);const o=li(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=Br(o.codecs,r);const c=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let l=await this._pc.createOffer(),h=xe(l.sdp),g;this._transportReady||await this.setupTransport({localDtlsRole:(n=this._forcedLocalDtlsRole)!==null&&n!==void 0?n:"client",localSdpObject:h});const m=ch((i||[{}])[0].scalabilityMode);i&&i.length>1&&(de.debug("send() | enabling legacy simulcast"),h=xe(l.sdp),g=h.media[c.idx],sf({offerMediaObject:g,numStreams:i.length}),l={type:"offer",sdp:zr(h)}),de.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f=u.mid;if(a.mid=f,h=xe(this._pc.localDescription.sdp),g=h.media[c.idx],a.rtcp.cname=nh({offerMediaObject:g}),a.encodings=mo({offerMediaObject:g}),i)for(let k=0;k<a.encodings.length;++k)i[k]&&Object.assign(a.encodings[k],i[k]);if(a.encodings.length>1&&(a.codecs[0].mimeType.toLowerCase()==="video/vp8"||a.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const k of a.encodings)k.scalabilityMode?k.scalabilityMode=`L1T${m.temporalLayers}`:k.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:g,reuseMid:c.reuseMid,offerRtpParameters:a,answerRtpParameters:o,codecOptions:s});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return de.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(f,u),{localId:f,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),de.debug("stopSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");if(i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.closeMediaSection(i.mid))try{i.stop()}catch{}const s=await this._pc.createOffer();de.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertSendDirection(),de.debug("pauseSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(e);const s=await this._pc.createOffer();de.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async resumeSending(e){this.assertSendDirection(),de.debug("resumeSending() [localId:%s]",e);const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const s=await this._pc.createOffer();de.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const r={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}async replaceTrack(e,i){this.assertSendDirection(),i?de.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):de.debug("replaceTrack() [localId:%s, no track]",e);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this.assertSendDirection(),de.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{c<=i?o.active=!0:o.active=!1}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();de.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async setRtpEncodingParameters(e,i){this.assertSendDirection(),de.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this._mapMidTransceiver.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((o,c)=>{r.encodings[c]={...o,...i}}),await s.sender.setParameters(r),this._remoteSdp.muxMediaSectionSimulcast(e,r.encodings);const n=await this._pc.createOffer();de.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",n),await this._pc.setLocalDescription(n);const a={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a)}async getSenderStats(e){this.assertSendDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:i,maxRetransmits:s,label:r,protocol:n}){var a;this.assertSendDirection();const o={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:i,maxRetransmits:s,protocol:n};de.debug("sendDataChannel() [options:%o]",o);const c=this._pc.createDataChannel(r,o);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%Cx.MIS,!this._hasDataChannelMediaSection){const l=await this._pc.createOffer(),h=xe(l.sdp),g=h.media.find(f=>f.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:(a=this._forcedLocalDtlsRole)!==null&&a!==void 0?a:"client",localSdpObject:h}),de.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:g});const m={type:"answer",sdp:this._remoteSdp.getSdp()};de.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._hasDataChannelMediaSection=!0}const u={streamId:o.id,ordered:o.ordered,maxPacketLifeTime:o.maxPacketLifeTime,maxRetransmits:o.maxRetransmits};return{dataChannel:c,sctpStreamParameters:u}}async receive(e){var i;this.assertRecvDirection();const s=[],r=new Map;for(const c of e){const{trackId:u,kind:l,rtpParameters:h,streamId:g}=c;de.debug("receive() [trackId:%s, kind:%s]",u,l);const m=h.mid||String(this._mapMidTransceiver.size);r.set(u,m),this._remoteSdp.receive({mid:m,kind:l,offerRtpParameters:h,streamId:g||h.rtcp.cname,trackId:u})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const o=xe(a.sdp);for(const c of e){const{trackId:u,rtpParameters:l}=c,h=r.get(u),g=o.media.find(m=>String(m.mid)===h);ah({offerRtpParameters:l,answerMediaObject:g})}a={type:"answer",sdp:zr(o)},this._transportReady||await this.setupTransport({localDtlsRole:(i=this._forcedLocalDtlsRole)!==null&&i!==void 0?i:"client",localSdpObject:o}),de.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const c of e){const{trackId:u}=c,l=r.get(u),h=this._pc.getTransceivers().find(g=>g.mid===l);if(!h)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(l,h),s.push({localId:l,track:h.receiver.track,rtpReceiver:h.receiver})}return s}async stopReceiving(e){this.assertRecvDirection();for(const r of e){de.debug("stopReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(n.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();de.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const r of e)this._mapMidTransceiver.delete(r)}async pauseReceiving(e){this.assertRecvDirection();for(const r of e){de.debug("pauseReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="inactive",this._remoteSdp.pauseMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();de.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async resumeReceiving(e){this.assertRecvDirection();for(const r of e){de.debug("resumeReceiving() [localId:%s]",r);const n=this._mapMidTransceiver.get(r);if(!n)throw new Error("associated RTCRtpTransceiver not found");n.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(r)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();de.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(e){this.assertRecvDirection();const i=this._mapMidTransceiver.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:i,protocol:s}){var r;this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c}=e,u={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:o,maxRetransmits:c,protocol:s};de.debug("receiveDataChannel() [options:%o]",u);const l=this._pc.createDataChannel(i,u);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const h={type:"offer",sdp:this._remoteSdp.getSdp()};de.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const g=await this._pc.createAnswer();if(!this._transportReady){const m=xe(g.sdp);await this.setupTransport({localDtlsRole:(r=this._forcedLocalDtlsRole)!==null&&r!==void 0?r:"client",localSdpObject:m})}de.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setLocalDescription(g),this._hasDataChannelMediaSection=!0}return{dataChannel:l}}async setupTransport({localDtlsRole:e,localSdpObject:i}){i||(i=xe(this._pc.localDescription.sdp));const s=rh({sdpObject:i});s.role=e,this._remoteSdp.updateDtlsRole(e==="client"?"server":"client"),await new Promise((r,n)=>{this.safeEmit("@connect",{dtlsParameters:s},r,n)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}},XR=class extends Az{constructor({handlerName:t,handlerFactory:e,Handler:i}={}){super({handlerName:t,handlerFactory:e,Handler:i})}switchDevice(t){switch(t){case"Chrome111":this._handlerFactory=w_.createFactory();break;case"Chrome74":this._handlerFactory=Mz.createFactory();break;case"Chrome70":this._handlerFactory=b_.createFactory();break;case"Firefox60":this._handlerFactory=Lz.createFactory();break;case"Safari12":this._handlerFactory=Nz.createFactory();break;case"Edge11":this._handlerFactory=__.createFactory();break;default:throw new TypeError(`unknown handlerName "${t}"`)}}};const Np="chrome",e3="opera",t3="firefox",i3="iexplorer",s3="safari",r3="nwjs",n3="electron",a3="react-native",k_="unknown",rf={Chrome:Np,Chromium:Np,Opera:e3,Firefox:t3,"Internet Explorer":i3,Safari:s3};function Uz(){const{userAgent:t}=navigator,e={name:k_,version:void 0};if(t.match(/Chrome/)&&!t.match(/Edge/))if(t.match(/Edg(A?)/)){const i=t.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(i,10)>72&&(e.name=Np,e.version=i)}else e.name=Np,e.version=t.match(/Chrome\/([\d.]+)/)[1];return e}function $z(){const{userAgent:t}=navigator;if(t.match(/Electron/)){const e=t.match(/Electron\/([\d.]+)/)[1];return{name:n3,version:e}}return null}function jz(){const{userAgent:t}=navigator;if(t.match(/JitsiMeetNW/)){const e=t.match(/JitsiMeetNW\/([\d.]+)/)[1];return{name:r3,version:e}}}function zz(){const t=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);let e;if(t||navigator.product==="ReactNative")return t&&t.length>2&&(t[1],e=t[2]),e||(e="unknown"),{name:a3,version:e}}function Fz(t){let e;const i=[zz,$z,jz];for(let r=0;r<i.length;r+=1)if(e=i[r](),e)return e;const s=t.getBrowserName();return s in rf?{name:rf[s],version:t.getBrowserVersion()}:(e=Uz(),e||{name:k_,version:void 0})}class Vz{constructor(){v(this,"_bowser"),v(this,"_name"),v(this,"_version"),v(this,"getDeviceInfo",()=>({isMobile:this.isMobile(),browserName:this._bowser.getBrowserName(),osName:this._bowser.getOSName(),browserVersion:this._bowser.getBrowserVersion(),osVersionName:this._bowser.getOSVersion(),engineName:this._bowser.getEngineName()}))}init(e){let i,s;if(this._bowser=Zw.getParser(navigator.userAgent),typeof e>"u"){const r=Fz(this._bowser);i=r.name,s=r.version}else e.name in rf?(i=rf[e.name],s=e.version):(i=k_,s=void 0);this._name=i,this._version=s}getName(){return this._name}isChrome(){return this._name===Np}isOpera(){return this._name===e3}isFirefox(){return this._name===t3}isIExplorer(){return this._name===i3}isSafari(){return this._name===s3}isNWJS(){return this._name===r3}isElectron(){return this._name===n3}isReactNative(){return this._name===a3||navigator.isReactNative===!0}getVersion(){return this._version}isMobile(){return this._bowser.getPlatformType()==="mobile"}_checkCondition(e){if(this._version)return this._bowser.satisfies(e)}isVersionGreaterThan(e){return this._checkCondition({[this._name]:`>${e}`})}isVersionLessThan(e){return this._checkCondition({[this._name]:`<${e}`})}isVersionEqualTo(e){return this._checkCondition({[this._name]:`~${e}`})}}const Bz=72;class Hz extends Vz{doesVideoMuteByStreamRemove(){return this.isChromiumBased()||this.isWebKitBased()}supportsP2P(){return!this.usesUnifiedPlan()}isChromiumBased(){return this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera()}isWebKitBased(){return this._bowser.isEngine("webkit")&&typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}isSupported(){return this.isChromiumBased()&&this._getChromiumBasedVersion()>=Bz||this.isFirefox()||this.isReactNative()||this.isWebKitBased()}isUserInteractionRequiredForUnmute(){return this.isFirefox()&&this.isVersionLessThan("68")}supportsVideoMuteOnConnInterrupted(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsBandwidthStatistics(){return!this.isFirefox()&&!this.isWebKitBased()}supportsCodecPreferences(){return this.usesUnifiedPlan()&&typeof window.RTCRtpTransceiver<"u"&&Object.keys(window.RTCRtpTransceiver.prototype).indexOf("setCodecPreferences")>-1&&Object.keys(RTCRtpSender.prototype).indexOf("getCapabilities")>-1&&!this.isWebKitBased()}supportsDeviceChangeEvent(){return navigator.mediaDevices&&typeof navigator.mediaDevices.ondevicechange<"u"&&typeof navigator.mediaDevices.addEventListener<"u"}supportsLocalCandidateRttStatistics(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}supportsPerformanceObserver(){return typeof window.PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}supportsReceiverStats(){return typeof window.RTCRtpReceiver<"u"&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1}supportsRTTStatistics(){return!this.isFirefox()}usesPlanB(){return!this.usesUnifiedPlan()}usesSdpMungingForSimulcast(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}usesUnifiedPlan(){return!!(this.isFirefox()||this.isWebKitBased())}usesNewGumFlow(){return!!(this.isChromiumBased()||this.isFirefox()||this.isWebKitBased())}usesAdapter(){return this.usesNewGumFlow()}usesRidsForSimulcast(){return!1}supportsGetDisplayMedia(){return typeof navigator.getDisplayMedia<"u"||typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getDisplayMedia<"u"}supportsInsertableStreams(){if(!(typeof window.RTCRtpSender<"u"&&(window.RTCRtpSender.prototype.createEncodedStreams||window.RTCRtpSender.prototype.createEncodedVideoStreams)))return!1;const e=new ReadableStream;try{return window.postMessage(e,"*",[e]),!0}catch{return!1}}supportsAudioRed(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some(e=>e.mimeType==="audio/red")&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some(e=>e.mimeType==="audio/red"))}supportsSdpSemantics(){return this.isChromiumBased()}_getChromiumBasedVersion(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(process.versions.chromium,10);const e=navigator.userAgent;if(e.match(/Chrome/))return Number.parseInt(e.match(/Chrome\/([\d.]+)/)[1],10)}return-1}isIOSMobile(){return this.isMobile&&this._bowser.getOSName()==="iOS"}}const Me=new Hz,o3={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}},hd_cropped:{width:{ideal:900},height:{ideal:720}},fhd:{width:{ideal:1920},height:{ideal:1080}}},Px={},Wz=[{rid:"r0",scalabilityMode:"L1T2"},{rid:"r1",scalabilityMode:"L1T2"}],qz=[{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!1,adaptivePtime:!1,networkPriority:"low",priority:"low"},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:25e5}],Gz=[{active:!1,priority:"low"},{active:!1,priority:"low"},{active:!0,priority:"low"}],Rx={320:[{rid:"q",maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"}],640:[{rid:"q",scaleResolutionDownBy:2,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"}],1280:[{rid:"q",scaleResolutionDownBy:4,maxBitrate:25e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"h",scaleResolutionDownBy:2,maxBitrate:75e4,maxFramerate:30,scalabilityMode:"L1T3"},{rid:"f",maxBitrate:15e5,maxFramerate:30,scalabilityMode:"L1T3"}]},Jz=[{scalabilityMode:"L3T3_KEY"}];var oe=(t=>(t.WEBCAM="webcam",t.MIC="mic",t.SCREENSHARE_VIDEO="screenshare_video",t.SCREENSHARE_AUDIO="screenshare_audio",t))(oe||{});function Kz(t){return t.replace(/([-_]\w)/g,e=>e[1].toUpperCase())}function or(t){if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>or(i));const e={};return Object.keys(t).forEach(i=>{const s=Gw(i)?i:Kz(i);e[s]=or(t[i])}),e}function Qz(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function c3(t){if(!t||typeof t!="object")return t;if(Array.isArray(t))return t.map(i=>c3(i));const e={};return Object.keys(t).forEach(i=>{const s=Gw(i)?i:Qz(i);e[s]=t[i]}),e}function qb(t,e={}){return t==null?{}:(Object.getOwnPropertyNames(t).forEach(i=>{if(typeof t[i]!="function"){if(typeof t[i]=="object"){qb(t[i],e[i]={});return}e[i]=t[i]}}),e)}function Yz(t,e){const i=t.indexOf(e);return i>-1&&t.splice(i,1),t}var Gb=(t=>(t.PARTICIPANT="PARTICIPANT",t.PEER="PEER",t.CLIENT="CLIENT",t))(Gb||{});const ie={INTERNAL_CALL_STATS:"internal_call_stats",SIMULCAST:"simulcast",CHAT_SOCKET_SERVER:"chat_socket_server",POLL_SOCKET_SERVER:"poll_socket_server",PLUGIN_SOCKET_SERVER:"plugin_socket_server",NR_OTEL_WEB:"nr_otel_web",CONNECTED_MEETINGS:"connected_meetings",ICE_RESTART_ON_FAILED_STATE:"ice_restart_on_failed_state",ICE_RESTART_ON_DISCONNECTED_STATE:"ice_restart_on_disconnected_state",ENABLE_ICE_STATE_LOGGING:"enable_ice_state_logging",REMOVE_OPERATIONAL_MIC:"web_core_remove_operational_mic",SUPPRESS_PEER_MUTE_UNMUTE_EMITS:"web_core_suppress_peer_mute_unmute_emits",SKIP_OTEL_TRACES:"skip_otel_traces",NEW_LOCAL_MEDIA_HANDLER:"new_local_media_handler",CALLSTATS_INGESTION_LAYER:"callstats_ingestion_layer",USE_USERIDS_IN_CHAT:"use_userids_in_chat",CUSTOM_PING_PONG:"custom_ping_pong",ENABLE_HIVE_SIMULCAST:"enable_hive_simulcast",ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED:"enable_hive_transport_reconnection_on_ice_failed",ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY:"enable_hive_fail_recovery",BYPASS_LOG_EXCLUSION_LIST:"bypass_log_exclusion_list",LOG_LEVEL:"log_level",V1_PLUGINS:"v1_plugins",SCREENSHARE_DTX:"screenshare_dtx",SCREENSHARE_PRIORITY:"screenshare_priority",SCREENSHARE_MIN_BITRATE:"screenshare_minbitrate",SCREENSHARE_MAX_DIMENSIONS:"screenshare_maxdimensions",SCREENSHARE_SIMULCAST:"screenshare_simulcast",DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE:"disable_webcam_layers_on_screenshare",SCREENSHARE_FORCE_GOOG_CONFERENCE:"screenshare_force_goog_conference",LIVESTREAM:"feat_livestream",FETCH_RETRY:"fetch_retry",DEVICE_REMOVE_EXP:"device_remove_exp",DISABLE_WEBCAM_SIMULCAST:"webcore_disable_webcam_simulcast",OVERRIDE_WEBCAM_SIMULCAST:"override_webcam_simulcast",SOCKET_POLLING:"socket_polling",NS_NETWORK_SCORE:"ns_network_score",FEAT_PAGINATED_CHAT:"feat_paginated_chat",VAL_MIN_FRAMERATE:"val_min_framerate",EXTENSION_HACK:"extension_hack",VAL_MAX_FRAMERATE_EXT:"val_max_framerate_ext",VAL_MIN_FRAMERATE_EXT:"val_min_framerate_ext",SCREEENSHARE_ERR_HACK:"screenshare_err_hack",TROUBLESHOOTING:"feat_troubleshooting",VIDEO_CONSTRAINTS:"video_constraints",SCREENSHARE_CONSTRAINTS:"screenshare_constraints",FEAT_CHAT_SDK:"feat_chat_sdk",FEAT_CHAT_SDK_SEARCH:"chat_search",OBS_QUALITY:"obs_quality"},Ve={roomName:void 0,authToken:void 0,peerId:void 0,apiBase:void 0,baseURI:void 0,defaults:{audio:!0,video:!0},modules:void 0,organizationId:void 0,overrides:{},viewType:void 0};function Zz(t){var e;Ve.roomName!=null||(Ve.roomName=t==null?void 0:t.roomName),Ve.authToken!=null||(Ve.authToken=t==null?void 0:t.authToken),Ve.peerId!=null||(Ve.peerId=t==null?void 0:t.peerId),Ve.apiBase!=null||(Ve.apiBase=t==null?void 0:t.apiBase),Ve.baseURI!=null||(Ve.baseURI=t==null?void 0:t.baseURI),Ve.modules!=null||(Ve.modules=t==null?void 0:t.modules),Ve.organizationId!=null||(Ve.organizationId=t==null?void 0:t.organizationId),Ve.defaults={...Ve.defaults,...(e=t==null?void 0:t.defaults)!=null?e:{}}}const dh="1.18.0",S_="web-core",Xz=Qj(),fs=or(Xz.config.media);var Fg;class d3{constructor(e){R(this,Fg,void 0),v(this,"getScreenShareConstraints",()=>{var i,s;const{displaySurface:r}=(i=Ve.defaults.screenShare)!=null?i:{};let n={width:{max:1920},height:{max:1080},frameRate:{ideal:parseInt((s=ee.getValue(ie.VAL_MIN_FRAMERATE))!=null?s:"5",10),max:5}};if(ee.hasFeature(ie.SCREENSHARE_CONSTRAINTS)){const a=ee.getValue(ie.SCREENSHARE_CONSTRAINTS);n=JSON.parse(a)}return r!==void 0&&["monitor","browser","window"].includes(r)&&(n={...n,displaySurface:r}),{audio:!0,video:n}}),v(this,"getAudioConstraints",i=>{const s={};return Me.isFirefox()||Me.isWebKitBased()?(s.audio={deviceId:i,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},s):(s.audio={},s.audio.optional=[i?{sourceId:i}:{sourceId:"default"},{echoCancellation:!0},{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0}],s)}),v(this,"getVideoConstraints",i=>{const s={},{quality:r}=p(this,Fg).video;let n=o3[r];if(n.frameRate={ideal:24},Me.isChromiumBased()&&(n.frameRate.max=30),ee.hasFeature(ie.VIDEO_CONSTRAINTS)){const a=ee.getValue(ie.VIDEO_CONSTRAINTS);n=JSON.parse(a)}return s.video=n,i?s.video.deviceId={exact:i}:s.video.facingMode="user",s}),P(this,Fg,e!=null?e:fs)}getUpdatedVideoConstraints(e){return e}}Fg=new WeakMap;var eF=/\s/;function tF(t){for(var e=t.length;e--&&eF.test(t.charAt(e)););return e}var iF=/^\s+/;function sF(t){return t&&t.slice(0,tF(t)+1).replace(iF,"")}var Ix=0/0,rF=/^[-+]0x[0-9a-f]+$/i,nF=/^0b[01]+$/i,aF=/^0o[0-7]+$/i,oF=parseInt;function Ax(t){if(typeof t=="number")return t;if(qj(t))return Ix;if(go(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=go(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=sF(t);var i=nF.test(t);return i||aF.test(t)?oF(t.slice(2),i?2:8):rF.test(t)?Ix:+t}function l3(t){return t}function cF(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function dF(){}var lF=800,uF=16,pF=Date.now;function hF(t){var e=0,i=0;return function(){var s=pF(),r=uF-(s-i);if(i=s,r>0){if(++e>=lF)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function gF(t){return function(){return t}}var mF=Zm?function(t,e){return Zm(t,"toString",{configurable:!0,enumerable:!1,value:gF(e),writable:!0})}:l3;const fF=mF;var vF=hF(fF);const yF=vF;function bF(t,e,i,s){for(var r=t.length,n=i+(s?1:-1);s?n--:++n<r;)if(e(t[n],n,t))return n;return-1}function wF(t){return t!==t}function _F(t,e,i){for(var s=i-1,r=t.length;++s<r;)if(t[s]===e)return s;return-1}function kF(t,e,i){return e===e?_F(t,e,i):bF(t,wF,i)}function u3(t,e){var i=t==null?0:t.length;return!!i&&kF(t,e,0)>-1}var Dx=Math.max;function SF(t,e,i){return e=Dx(e===void 0?t.length-1:e,0),function(){for(var s=arguments,r=-1,n=Dx(s.length-e,0),a=Array(n);++r<n;)a[r]=s[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=s[r];return o[e]=i(a),cF(t,this,o)}}function xF(t,e){return yF(SF(t,e,l3),t+"")}var Mx=yn?yn.isConcatSpreadable:void 0;function EF(t){return Dc(t)||c_(t)||!!(Mx&&t&&t[Mx])}function p3(t,e,i,s,r){var n=-1,a=t.length;for(i||(i=EF),r||(r=[]);++n<a;){var o=t[n];e>0&&i(o)?e>1?p3(o,e-1,i,s,r):h_(r,o):s||(r[r.length]=o)}return r}var TF="__lodash_hash_undefined__";function CF(t){return this.__data__.set(t,TF),this}function PF(t){return this.__data__.has(t)}function wl(t){var e=-1,i=t==null?0:t.length;for(this.__data__=new Vc;++e<i;)this.add(t[e])}wl.prototype.add=wl.prototype.push=CF;wl.prototype.has=PF;function RF(t,e){for(var i=-1,s=t==null?0:t.length;++i<s;)if(e(t[i],i,t))return!0;return!1}function x_(t,e){return t.has(e)}var IF=1,AF=2;function h3(t,e,i,s,r,n){var a=i&IF,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=n.get(t),l=n.get(e);if(u&&l)return u==e&&l==t;var h=-1,g=!0,m=i&AF?new wl:void 0;for(n.set(t,e),n.set(e,t);++h<o;){var f=t[h],_=e[h];if(s)var k=a?s(_,f,h,e,t,n):s(f,_,h,t,e,n);if(k!==void 0){if(k)continue;g=!1;break}if(m){if(!RF(e,function(y,b){if(!x_(m,b)&&(f===y||r(f,y,i,s,n)))return m.push(b)})){g=!1;break}}else if(!(f===_||r(f,_,i,s,n))){g=!1;break}}return n.delete(t),n.delete(e),g}function DF(t){var e=-1,i=Array(t.size);return t.forEach(function(s,r){i[++e]=[r,s]}),i}function E_(t){var e=-1,i=Array(t.size);return t.forEach(function(s){i[++e]=s}),i}var MF=1,OF=2,LF="[object Boolean]",NF="[object Date]",UF="[object Error]",$F="[object Map]",jF="[object Number]",zF="[object RegExp]",FF="[object Set]",VF="[object String]",BF="[object Symbol]",HF="[object ArrayBuffer]",WF="[object DataView]",Ox=yn?yn.prototype:void 0,Qy=Ox?Ox.valueOf:void 0;function qF(t,e,i,s,r,n,a){switch(i){case WF:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case HF:return!(t.byteLength!=e.byteLength||!n(new Xm(t),new Xm(e)));case LF:case NF:case jF:return o_(+t,+e);case UF:return t.name==e.name&&t.message==e.message;case zF:case VF:return t==e+"";case $F:var o=DF;case FF:var c=s&MF;if(o||(o=E_),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;s|=OF,a.set(t,e);var l=h3(o(t),o(e),s,r,n,a);return a.delete(t),l;case BF:if(Qy)return Qy.call(t)==Qy.call(e)}return!1}var GF=1,JF=Object.prototype,KF=JF.hasOwnProperty;function QF(t,e,i,s,r,n){var a=i&GF,o=zb(t),c=o.length,u=zb(e),l=u.length;if(c!=l&&!a)return!1;for(var h=c;h--;){var g=o[h];if(!(a?g in e:KF.call(e,g)))return!1}var m=n.get(t),f=n.get(e);if(m&&f)return m==e&&f==t;var _=!0;n.set(t,e),n.set(e,t);for(var k=a;++h<c;){g=o[h];var y=t[g],b=e[g];if(s)var x=a?s(b,y,g,e,t,n):s(y,b,g,t,e,n);if(!(x===void 0?y===b||r(y,b,i,s,n):x)){_=!1;break}k||(k=g=="constructor")}if(_&&!k){var C=t.constructor,D=e.constructor;C!=D&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof D=="function"&&D instanceof D)&&(_=!1)}return n.delete(t),n.delete(e),_}var YF=1,Lx="[object Arguments]",Nx="[object Array]",Qh="[object Object]",ZF=Object.prototype,Ux=ZF.hasOwnProperty;function XF(t,e,i,s,r,n){var a=Dc(t),o=Dc(e),c=a?Nx:bl(t),u=o?Nx:bl(e);c=c==Lx?Qh:c,u=u==Lx?Qh:u;var l=c==Qh,h=u==Qh,g=c==u;if(g&&Lp(t)){if(!Lp(e))return!1;a=!0,l=!1}if(g&&!l)return n||(n=new Xn),a||d_(t)?h3(t,e,i,s,r,n):qF(t,e,c,i,s,r,n);if(!(i&YF)){var m=l&&Ux.call(t,"__wrapped__"),f=h&&Ux.call(e,"__wrapped__");if(m||f){var _=m?t.value():t,k=f?e.value():e;return n||(n=new Xn),r(_,k,i,s,n)}}return g?(n||(n=new Xn),QF(t,e,i,s,r,n)):!1}function g3(t,e,i,s,r){return t===e?!0:t==null||e==null||!na(t)&&!na(e)?t!==t&&e!==e:XF(t,e,i,s,g3,r)}var eV=function(){return Hr.Date.now()};const Yy=eV;var tV="Expected a function",iV=Math.max,sV=Math.min;function m3(t,e,i){var s,r,n,a,o,c,u=0,l=!1,h=!1,g=!0;if(typeof t!="function")throw new TypeError(tV);e=Ax(e)||0,go(i)&&(l=!!i.leading,h="maxWait"in i,n=h?iV(Ax(i.maxWait)||0,e):n,g="trailing"in i?!!i.trailing:g);function m(M){var L=s,V=r;return s=r=void 0,u=M,a=t.apply(V,L),a}function f(M){return u=M,o=setTimeout(y,e),l?m(M):a}function _(M){var L=M-c,V=M-u,se=e-L;return h?sV(se,n-V):se}function k(M){var L=M-c,V=M-u;return c===void 0||L>=e||L<0||h&&V>=n}function y(){var M=Yy();if(k(M))return b(M);o=setTimeout(y,_(M))}function b(M){return o=void 0,g&&s?m(M):(s=r=void 0,a)}function x(){o!==void 0&&clearTimeout(o),u=0,s=c=r=o=void 0}function C(){return o===void 0?a:b(Yy())}function D(){var M=Yy(),L=k(M);if(s=arguments,r=this,c=M,L){if(o===void 0)return f(c);if(h)return clearTimeout(o),o=setTimeout(y,e),m(c)}return o===void 0&&(o=setTimeout(y,e)),a}return D.cancel=x,D.flush=C,D}function rV(t){return na(t)&&hv(t)}function f3(t,e,i){for(var s=-1,r=t==null?0:t.length;++s<r;)if(i(e,t[s]))return!0;return!1}var nV=200;function aV(t,e,i,s){var r=-1,n=u3,a=!0,o=t.length,c=[],u=e.length;if(!o)return c;i&&(e=Gj(e,uv(i))),s?(n=f3,a=!1):e.length>=nV&&(n=x_,a=!1,e=new wl(e));e:for(;++r<o;){var l=t[r],h=i==null?l:i(l);if(l=s||l!==0?l:0,a&&h===h){for(var g=u;g--;)if(e[g]===h)continue e;c.push(l)}else n(e,h,s)||c.push(l)}return c}function oV(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var cV="[object Map]",dV="[object Set]",lV=Object.prototype,uV=lV.hasOwnProperty;function v3(t){if(t==null)return!0;if(hv(t)&&(Dc(t)||typeof t=="string"||typeof t.splice=="function"||Lp(t)||d_(t)||c_(t)))return!t.length;var e=bl(t);if(e==cV||e==dV)return!t.size;if(pv(t))return!MR(t).length;for(var i in t)if(uV.call(t,i))return!1;return!0}function pV(t,e){return g3(t,e)}var hV=1/0,gV=il&&1/E_(new il([,-0]))[1]==hV?function(t){return new il(t)}:dF;const mV=gV;var fV=200;function $x(t,e,i){var s=-1,r=u3,n=t.length,a=!0,o=[],c=o;if(i)a=!1,r=f3;else if(n>=fV){var u=e?null:mV(t);if(u)return E_(u);a=!1,r=x_,c=new wl}else c=e?[]:o;e:for(;++s<n;){var l=t[s],h=e?e(l):l;if(l=i||l!==0?l:0,a&&h===h){for(var g=c.length;g--;)if(c[g]===h)continue e;e&&c.push(h),o.push(l)}else r(c,h,i)||(c!==o&&c.push(h),o.push(l))}return o}function vV(t,e,i){var s=t.length;if(s<2)return s?$x(t[0]):[];for(var r=-1,n=Array(s);++r<s;)for(var a=t[r],o=-1;++o<s;)o!=r&&(n[r]=aV(n[r]||a,t[o],e,i));return $x(p3(n,1),e,i)}var yV=xF(function(t){var e=oV(t);return e=typeof e=="function"?e:void 0,vV(LR(t,rV),void 0,e)});const bV=yV;function Vg(t){const e={};return typeof(t==null?void 0:t.code)=="number"&&(e.code=t.code),typeof(t==null?void 0:t.code)=="string"&&(e.code=t.code.substring(0,100)),typeof(t==null?void 0:t.name)=="string"&&(e.name=t.name.substring(0,500)),typeof(t==null?void 0:t.message)=="string"&&(e.message=t.message.substring(0,500)),typeof(t==null?void 0:t.reason)=="string"&&(e.reason=t.reason.substring(0,500)),typeof(t==null?void 0:t.stack)=="string"&&(e.stack=t.stack.substring(0,500)),e}function Jb(){var t,e,i,s;const r=typeof navigator<"u"&&!navigator.isReactNative&&((t=window.location.host)==null?void 0:t.includes("devel"))&&((e=window.location.host)==null?void 0:e.includes("dyte.io")),n=!!((s=(i=Ve.modules)==null?void 0:i.devTools)!=null&&s.logs);return r||n}function wV(t){if(ee.hasFeature(ie.LOG_LEVEL)){let e=ee.getValue(ie.LOG_LEVEL)||"all";if(e=e.toLowerCase().trim(),e==="off")return!1;if(e!=="all"){const i=["debug","log","info","warn","error"],s=i.indexOf(t),r=i.indexOf(e);if(s<r)return!1}}return!0}function y3(t,e,i={}){return Object.getOwnPropertyNames(t).forEach(s=>{var r;if([null,void 0,NaN].includes(t[s])||e&&(((r=e.match(/\./g))==null?void 0:r.length)||0)>=10)return;const n=e?`${e}.${s}`:s;typeof t[s]=="object"?y3(t[s],n,i):["number","string","boolean"].includes(typeof t[s])&&(i[n]=t[s])}),i}function jx(t,e={},i=""){const s={};try{const r=JSON.stringify(e),n=JSON.parse(r),a=y3(n,i),o=JSON.stringify(a);if(o.length>5e3){const c=`Log named: "${t}" is trying to log an flattened object of size ${o.length} chars that is beyond permitted limit of 5000 chars. Please optimize.`;throw Jb()&&console.error(c,{log:e,flattened:o}),new Error(c)}return JSON.parse(o)}catch(r){const n=Vg(r);s[`${i}.error.message`]=n.message||"",s[`${i}.error.stack`]=n.stack||"",s[`${i}.error.reason`]=n.reason||"",s[`${i}.error.source`]="safelyFlattenObjForOpenTelemetry"}return s}const we={isV2AuthToken:!1,meetingId:null,overrides:{},roomNodeOptions:void 0},iu={baseURL:"http://localhost:5000",createdAt:"2021-08-05T10:49:56.602Z",description:"Develop plugins locally",id:"09259e3b-7be8-46f6-9801-106bf1866e1c",name:"Localhost Dev",organizationId:"4ad15a19-80e2-4105-bf43-48039fd2963e",picture:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/dyte.png",private:!1,published:!0,staggered:!1,tags:["#localhost","#dev"],type:"self_hosted",updatedAt:"2021-08-05T10:50:07.681Z"};function _V(t,e){if(e){we.isV2AuthToken=!1;return}try{const{meetingId:i}=JSON.parse(atob(t.split(".")[1]));if(!i)throw Error(`Received V1 auth token ${t}`);we.isV2AuthToken=!0,we.meetingId=i}catch(i){throw w.error("constants::setIsV2AuthToken",{error:i,debuggingHint:`Unable to decode auth token: ${t}`},!0),new I("Invalid auth token")}}function kV(t){we.overrides=t}function nf(t){return we.overrides&&we.overrides[t]?we.overrides[t]:!1}function b3(t){we.roomNodeOptions=t}function w3(t,e){return!!(we.isV2AuthToken&&(ee.hasFeature(ie.CONNECTED_MEETINGS)||t===it.Livestream||t===it.Chat)||e.includes("HIVE"))}function T_(t,e){return w3(t,e)?!0:(ee.getValue(ie.CHAT_SOCKET_SERVER)||nf(ie.CHAT_SOCKET_SERVER)||"socket-service")==="socket-service"}function _3(t,e){return w3(t,e)?!0:(ee.getValue(ie.POLL_SOCKET_SERVER)||"socket-service")==="socket-service"}function C_(t,e){return e.includes("HIVE")?!0:(ee.getValue(ie.PLUGIN_SOCKET_SERVER)||"socket-service")==="socket-service"}function k3(t,e){return T_(t,e)||_3(t,e)||C_(t,e)}const Fe=class{static get logsEndpoint(){return Jb()?"https://api-silos-staging.dyte.io/otel/logs":"https://api-silos.dyte.io/otel/logs"}static init(t,e){navigator.isReactNative||(Fe.tracingEnabled=e,Fe.meetingMetadata.peerId=t,Fe.meetingMetadata.sdkVersion=dh,Fe.meetingMetadata.deviceInfo=Me.getDeviceInfo(),Fe.meetingMetadata.visitedUrl=!navigator.isReactNative&&typeof window<"u"&&window.location.href,document.addEventListener("visibilitychange",Fe.processCachedLogs),Fe.logsProcessorTimer=setInterval(Fe.processCachedLogs,Fe.logsProcessingInterval),Fe.initPerformanceObserver(),e&&(Fe.initialized=!0))}static initPerformanceObserver(){try{typeof PerformanceObserver<"u"&&!nf("disable_api_peformance_observer")&&(Fe.apiPerformanceObserver=new PerformanceObserver(t=>{var e;(e=t.getEntries())==null||e.forEach(i=>{var s;const r=i==null?void 0:i.toJSON();["xmlhttprequest","fetch"].includes(r.initiatorType)&&(s=r.name)!=null&&s.includes("dyte")&&w.debug(`api_performance_observer::${r.name}`,{performanceObserver:{api:r}})})}),Fe.apiPerformanceObserver.observe({type:"resource",buffered:!0}))}catch{}}static trace(t){return(e,i,s)=>{const r=s.value;return s.value=function(...n){if(!Fe.initialized||navigator.isReactNative||!Fe.tracingEnabled||ee.hasFeature(ie.SKIP_OTEL_TRACES))return r.apply(this,n);Fe.addLogInCurrentSpan("info",t);const a=performance.now(),o=r.apply(this,n);return Promise.resolve(o).then(()=>{const c=performance.now();Fe.addLogInCurrentSpan("info",`${t}_timing`,{execTime:c-a})}).catch(()=>{const c=performance.now();Fe.addLogInCurrentSpan("info",`${t}_timing`,{execTime:c-a})}),o},s}}static injectContext(t){var e;const i=th().replace(/-/g,"").substring(0,16),s=(e=Fe.meetingMetadata.peerId)==null?void 0:e.replace(/-/g,"");t.TRACEPARENT=`00-${s}-${i}-01`}static addLogInCurrentSpan(t,e,i={},s=!1){if(i!=null&&i.error&&Object.assign(i,{error:Vg(i.error)}),Jb()&&(v3(i)?console[t]("DyteInternalLogs:: ",t,e):console[t]("DyteInternalLogs:: ",t,e,i)),!!wV(t))try{const r=jx(e,i,"metadata"),n=new Date,a={message:e,level:t,...r,loggedAt:n.toISOString(),loggedAtTzOffset:n.getTimezoneOffset()};s?Fe.sendOtelLogsToNewRelic([a]):Fe.logsCache.push(a)}catch(r){Fe.addLogInCurrentSpan("error","opentelemetry::addLogInCurrentSpan_failed",{error:Vg(r)})}}static sendOtelLogsToNewRelic(t){Hm.post(Fe.logsEndpoint,{meetingMetadata:jx("sendOtelLogsToNewRelic",Fe.meetingMetadata,"meetingMetadata"),serviceName:S_,logs:t}).catch(e=>{Fe.addLogInCurrentSpan("error","opentelemetry::sendOtelLogToNewRelic_failed",{error:Vg(e)}),Fe.logsCache.push(...t)})}static processCachedLogs(){const t=Fe.logsCache.splice(0,25);t!=null&&t.length&&Fe.sendOtelLogsToNewRelic(t)}static destruct(){var t;clearInterval(Fe.logsProcessorTimer),Fe.processCachedLogs(),!navigator.isReactNative&&(document.removeEventListener("visibilitychange",Fe.processCachedLogs),(t=Fe.apiPerformanceObserver)==null||t.disconnect())}};let S=Fe;v(S,"apiPerformanceObserver"),v(S,"logsCache",[]),v(S,"logsProcessorTimer"),v(S,"tracingEnabled",!0),v(S,"initialized",!1),v(S,"logsProcessingInterval",7e3),v(S,"logExclusionList",["message","websocket/message","roomMessage","websocket/room-message","websocket/room-legacy-mode","chatMessage","websocket/new-chat-message","websocket/no-active-speaker","websocket/selected-peers","websocket/active-speaker","ping","websocket/new-consumer","websocket/producer-score","websocket/consumer-score","websocket/plugin-event","websocket/plugin-data","websocket/plugin-internal-data"]),v(S,"meetingMetadata",{});class w{static info(e,i,s){S.addLogInCurrentSpan("info",e,i,s)}static error(e,i,s){S.addLogInCurrentSpan("error",e,i,s)}static debug(e,i,s){S.addLogInCurrentSpan("debug",e,i,s)}static log(e,i,s){S.addLogInCurrentSpan("log",e,i,s)}static warn(e,i,s){S.addLogInCurrentSpan("warn",e,i,s)}}const SV={"00":"DyteClient","01":"Controller","02":"RoomNodeClient","03":"HiveNodeClient","04":"SocketService","05":"Chat","06":"Plugin","07":"Polls","08":"Meta","09":"Preset",10:"Recording",11:"Self",12:"Participant",13:"Spotlight",14:"Remote Request",15:"Webinar",16:"LocalMediaHandler"},Bg={"0000":"Internal exception.","0001":"Failed to initialize.","0002":"Failed to join room.","0003":"Failed to leave room.","0100":"Internal exception","0200":"Internal exception.","0300":"Internal exception","0400":"Internal exception","0500":"Internal exception","0501":"Permission denied.","0502":"Invalid message body.","0510":"Invalid channel name.","0600":"Internal exception","0700":"Internal exception","0800":"Internal exception","0900":"Internal exception",1e3:"Internal exception",1100:"Internal exception",1200:"Internal exception",1300:"Internal exception",1400:"Internal exception",1500:"Internal exception",1600:"Internal exception",1601:"Failed to get audio track",1602:"Failed to get video track",1603:"Incorrect device",1604:"Failed to change device",1700:"Internal exception"};Object.keys(Bg).forEach(t=>{Bg[t]=`{${SV[t.slice(0,2)]}} ${Bg[t]}`});class I extends Error{constructor(e,i,s=!1){super(e),v(this,"code"),this.code=i,this.name="DyteError",this.message=`[ERR${this.code}]: ${Bg[this.code]}
${this.message}`;try{let r=s;i&&i.endsWith("00")&&(r=!0),r&&w.error("DyteError",{error:{message:this.message,name:this.name,code:i}})}catch{}}}function Yh(t,e,i,s){if(typeof i=="function"&&s instanceof e)i.call(null,s,t);else throw s}function zx(t,e,i){if(!t.value){const r=t.get,n=t.set;return r&&(t.get=function(){try{return r.apply(this)}catch(a){Yh(this,e,i,a)}}),n&&(t.set=function(a){try{return n.apply(this,[a])}catch(o){Yh(this,e,i,o)}}),t}const s=t.value;return t.value=function(...r){try{const n=s.apply(this,r);return n&&n instanceof Promise?n.catch(a=>{Yh(this,e,i,a)}):n}catch(n){Yh(this,e,i,n)}},t}function xV(t,e){return(i,s,r)=>{if(r)return zx(r,t,e);for(const n of Reflect.ownKeys(i.prototype).filter(a=>a!=="constructor")){const a=Object.getOwnPropertyDescriptor(i.prototype,n);(a.value instanceof Function||a.get instanceof Function||a.set instanceof Function)&&Object.defineProperty(i.prototype,n,zx(a,t,e))}}}const Ii=t=>xV(Error,t);var Ho=(t=>(t.allowed="ALLOWED",t.notAllowed="NOT_ALLOWED",t.canRequest="CAN_REQUEST",t))(Ho||{});const EV={view_type:it.GroupCall,accept_waiting_requests:!1,request_produce:!1,can_allow_participant_audio:!0,can_allow_participant_screensharing:!1,can_allow_participant_video:!0,request_kick_participant:!1,kick_participant:!0,pin_participant:!0,can_record:!1,waiting_room_type:"SKIP",plugins:{can_close:!0,can_start:!0,can_edit_acl:!1,config:{}},polls:{can_create:!0,can_vote:!0,can_view:!0},produce:{video:{allow:!0,quality:fs.video.quality,frame_rate:fs.video.frameRate},audio:!0,screenshare:{allow:!0,quality:fs.screenshare.quality,frame_rate:fs.screenshare.frameRate}},chat:{public:{can_send:!0,text:!0,files:!0},private:{can_send:!1,can_receive:!1,text:!1,files:!1}},reactions:!1,hidden_participant:!1,show_participant_list:!0,can_change_participant_role:!0,can_change_theme:!1,can_present:!1,accept_present_requests:!1,can_edit_display_name:!1,max_screenshare_count:1,is_recorder:!1,can_spotlight:!1},TV=or(EV);var Te;const Kb=class{constructor(t){if(R(this,Te,void 0),!t)throw w.error("DytePermissionsPresetV1::load_preset_permissions_failed"),new I("Could not load preset permissions.");P(this,Te,t)}static fromResponse(t){return new Kb(t)}static default(){return new Kb(TV)}get viewType(){return p(this,Te).viewType}get stageEnabled(){return this.viewType===it.Webinar||this.viewType===it.Livestream}get stageAccess(){return this.canProduceVideo==="ALLOWED"||this.canProduceAudio==="ALLOWED"||this.canProduceScreenshare==="ALLOWED"?"ALLOWED":this.canProduceVideo==="CAN_REQUEST"||this.canProduceAudio==="CAN_REQUEST"||this.canProduceScreenshare==="CAN_REQUEST"?"CAN_REQUEST":"NOT_ALLOWED"}get acceptWaitingRequests(){return p(this,Te).acceptWaitingRequests}get requestProduce(){return p(this,Te).requestProduce}get requestProduceAudio(){return this.requestProduce}get requestProduceScreenshare(){return this.requestProduce}get canAllowParticipantAudio(){return p(this,Te).canAllowParticipantAudio}get canAllowParticipantScreensharing(){return p(this,Te).canAllowParticipantScreensharing}get canAllowParticipantVideo(){return p(this,Te).canAllowParticipantVideo}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){return p(this,Te).kickParticipant}get pinParticipant(){return p(this,Te).pinParticipant}get canRecord(){return p(this,Te).canRecord}get waitingRoomType(){return p(this,Te).waitingRoomType}get waitingRoomBehaviour(){return p(this,Te).waitingRoomType==="SKIP"?"SKIP":p(this,Te).waitingRoomType==="SKIP_ON_PRIVILEGED_USER_ENTRY"?"ON_PRIVILEGED_USER_ENTRY":p(this,Te).waitingRoomType==="ON_ACCEPT"?"SKIP_ON_ACCEPT":"SKIP"}get plugins(){return p(this,Te).plugins}get polls(){return{...p(this,Te).polls,canViewResults:p(this,Te).polls.canView}}get produceVideo(){return{...p(this,Te).produce.video,allow:p(this,Te).produce.video.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceVideo(){const t=p(this,Te).produce.video.allow;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get produceScreenshare(){return{...p(this,Te).produce.screenshare,allow:p(this,Te).produce.screenshare.allow?"ALLOWED":"NOT_ALLOWED"}}get canProduceScreenshare(){const t=p(this,Te).produce.screenshare.allow;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get produceAudio(){return p(this,Te).produce.audio?"ALLOWED":"NOT_ALLOWED"}get canProduceAudio(){const t=p(this,Te).produce.audio;return this.requestProduce?"CAN_REQUEST":t?"ALLOWED":"NOT_ALLOWED"}get chatPublic(){return p(this,Te).chat.public}get chatPrivate(){return p(this,Te).chat.private}get chatChannel(){return{canCreate:"NONE",canDelete:"NONE",canUpdate:"NONE",canReadAll:!1}}get chatMessage(){return{canDelete:"NONE",canEdit:"NONE",deleteCutoffTimeSeconds:0,editCutoffTimeSeconds:0}}get connectedMeetings(){return{canAlterConnectedMeetings:!1,canSwitchConnectedMeetings:!1,canSwitchToParentMeeting:!1}}get reactions(){return p(this,Te).reactions}get hiddenParticipant(){return p(this,Te).hiddenParticipant}get showParticipantList(){return p(this,Te).showParticipantList}get canChangeParticipantRole(){return p(this,Te).canChangeParticipantRole}get canChangeTheme(){return p(this,Te).canChangeTheme}get canPresent(){return p(this,Te).canPresent}get acceptPresentRequests(){return p(this,Te).acceptPresentRequests}get canEditDisplayName(){return p(this,Te).canEditDisplayName}get maxScreenShareCount(){return p(this,Te).maxScreenshareCount}get isRecorder(){return p(this,Te).isRecorder}get canLivestream(){return!1}get canSpotlight(){return p(this,Te).canSpotlight}get isV2(){return!1}};let Fx=Kb;Te=new WeakMap;var Ra,Ia;class CV extends rs.EventEmitter{constructor(){super(),R(this,Ra,void 0),R(this,Ia,void 0),v(this,"asyncPromiseTimeout"),P(this,Ra,new Map),P(this,Ia,new Map),this.asyncPromiseTimeout=8e3}async emitAsync(e,...i){p(this,Ra).set(e,[]);const s=p(this,Ia).get(e).map(()=>new Promise(r=>{p(this,Ra).get(e).push(r)}));super.emit(e,...i),await Promise.race([Promise.all(s),new Promise((r,n)=>setTimeout(()=>n(new Error("emitAsync failed to resolve.")),this.asyncPromiseTimeout))]),p(this,Ra).delete(e)}onAsync(e,i){const s=p(this,Ra),r=async(...n)=>{var a;try{await i(...n)}catch(c){w.error("[onAsync]",{error:c})}const o=(a=s.get(e))==null?void 0:a.shift();o==null||o()};return p(this,Ia).get(e)||p(this,Ia).set(e,[]),p(this,Ia).get(e).push(r),super.on(e,r)}reset(){P(this,Ra,new Map),P(this,Ia,new Map),super.removeAllListeners()}}Ra=new WeakMap,Ia=new WeakMap;const T=new CV;var E=(t=>(t.NEW_PRODUCER="NEW_PRODUCER",t.PRODUCER_TRACK_ENDED="PRODUCER_TRACK_ENDED",t.ROOM_NODE_CONNECTED="ROOM_NODE_CONNECTED",t.ROOM_NODE_DISCONNECTED="ROOM_NODE_DISCONNECTED",t.ROOM_NODE_CONNECTION_ERROR="ROOM_NODE_CONNECTION_ERROR",t.SOCKET_SERVICE_CONNECTED="SOCKET_SERVICE_CONNECTED",t.SOCKET_SERVICE_DISCONNECTED="SOCKET_SERVICE_DISCONNECTED",t.SOCKET_SERVICE_RECONNECTING="SOCKET_SERVICE_RECONNECTING",t.SOCKET_SERVICE_RECONNECTION_ATTEMPT="SOCKET_SERVICE_RECONNECTION_ATTEMPT",t.SOCKET_SERVICE_RECONNECT_FAILURE="SOCKET_SERVICE_RECONNECT_FAILURE",t.SOCKET_SERVICE_RECONNECTED="SOCKET_SERVICE_RECONNECTED",t.SOCKET_SERVICE_FAILED="SOCKET_SERVICE_FAILED",t.ROOM_JOINED="ROOM_JOINED",t.SOCKET_SERVICE_ROOM_JOINED="SOCKET_SERVICE_ROOM_JOINED",t.SELF_ROOM_JOINED="SELF_ROOM_JOINED",t.PRODUCER_SCORE_UPDATE="PRODUCER_SCORE_UPDATE",t.CONSUMER_SCORE_UPDATE="CONSUMER_SCORE_UPDATE",t.PRODUCER_STATUS_UPDATE="PRODUCER_STATUS_UPDATE",t.CONSUMER_STATUS_UPDATE="CONSUMER_STATUS_UPDATE",t.LOW_PRODUCER_SCORE="LOW_PRODUCER_SCORE",t.LOW_CONSUMER_SCORE="LOW_CONSUMER_SCORE",t.MEDIA_PERMISSION_ERROR="MEDIA_PERMISSION_ERROR",t.MEDIA_PERMISSION_UPDATE="MEDIA_PERMISSION_UPDATE",t.WAITLISTED="WAIT_LISTED",t.WAITLIST_ACCEPTED="websocket/waitlist-accepted",t.WAITLIST_REJECTED="websocket/waitlist-rejected",t.WAITLIST_PEER_ADDED="websocket/waitlist-peer-added",t.WAITLIST_PEER_REMOVED="websocket/waitlist-peer-closed",t.MESSAGE="websocket/message",t.ROOM_MESSAGE="websocket/room-message",t.DISABLE_AUDIO="websocket/disable-audio",t.DISABLE_VIDEO="websocket/disable-video",t.PEER_JOINED="websocket/peer-joined",t.PEER_CLOSED="websocket/peer-closed",t.PEER_MUTED="websocket/peer-muted",t.PEER_UNMUTED="websocket/peer-unmuted",t.PEER_PINNED="websocket/pin-peer",t.PEER_UNPINNED="websocker/unpin-peer",t.MUTE_ALL="websocket/mute-all",t.MUTE_ALL_VIDEO="websocket/mute-all-video",t.CONSUMER_CLOSED="websocket/consumer-closed",t.CONSUMER_PAUSED="websocket/consumer-paused",t.CONSUMER_RESUMED="websocket/consumer-resumed",t.PRODUCER_CLOSED="websocket/producer-closed",t.NEW_CONSUMER="websocket/new-consumer",t.CONNECTED_MEETING_STATE="websocket/connectedMeetingState",t.MOVE_TO_CONNECTED_MEETING="websocket/transferMeeting",t.GET_CHAT_MESSAGES="websocket/get-chat-messages",t.NEW_CHAT_MESSAGE="websocket/new-chat-message",t.PIN_CHAT_MESSAGE="websocket/pin-chat-message",t.UNPIN_CHAT_MESSAGE="websocket/unpin-chat-message",t.GET_POLLS="websocket/get-polls",t.UPDATE_POLL="websocket/update-poll",t.SELECTED_PEERS="websocket/selected-peers",t.GET_PAGE="websocket/get-page",t.ACTIVE_SPEAKER="websocket/active-speaker",t.NO_ACTIVE_SPEAKER="websocket/no-active-speaker",t.PRODUCER_SCORE="websocket/producer-score",t.CONSUMER_SCORE="websocket/consumer-score",t.ENABLE_PLUGIN="websocket/enable-plugin",t.DISABLE_PLUGIN="websocket/disable-plugin",t.PLUGIN_EVENT="websocket/plugin-event",t.PLUGIN_DATA="websocket/plugin-data",t.PLUGIN_INTERNAL_DATA="websocket/plugin-internal-data",t.KICKED="websocket/kicked",t.RECORDING_STARTED="websocket/recording-started",t.RECORDING_STOPPED="websocket/recording-stopped",t.ICE_CONNECTED="ICE_CONNECTED",t.ICE_DISCONNECTED="ICE_DISCONNECTED",t.ICE_FAILED="ICE_FAILED",t.ICE_RECONNECTING="ICE_RECONNECTING",t.AUDIO_TRACK_ANALYSIS="AUDIO_TRACK_ANALYSIS",t.AUDIO_TRACK_CLOSED="AUDIO_TRACK_CLOSED",t.AUDIO_TRACK_CHANGED="AUDIO_TRACK_CHANGED",t.AUDIO_TRACK_CREATED="AUDIO_TRACK_CREATED",t.VIDEO_TRACK_ANALYSIS="VIDEO_TRACK_ANALYSIS",t.VIDEO_TRACK_ANALYSIS_ERROR="VIDEO_TRACK_ANALYSIS_ERROR",t.VIDEO_TRACK_CLOSED="VIDEO_TRACK_CLOSED",t.VIDEO_TRACK_CHANGED="VIDEO_TRACK_CHANGED",t.VIDEO_TRACK_CREATED="VIDEO_TRACK_CREATED",t.SCREENSHARE_AUDIO_TRACK_ANALYSIS="SCREENSHARE_AUDIO_TRACK_ANALYSIS",t.SCREENSHARE_AUDIO_TRACK_CLOSED="SCREENSHARE_AUDIO_TRACK_CLOSED",t.SCREENSHARE_AUDIO_TRACK_CREATED="SCREENSHARE_AUDIO_TRACK_CREATED",t.SCREENSHARE_VIDEO_TRACK_ANALYSIS="SCREENSHARE_VIDEO_TRACK_ANALYSIS",t.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR="SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR",t.SCREENSHARE_VIDEO_TRACK_CLOSED="SCREENSHARE_VIDEO_TRACK_CLOSED",t.SCREENSHARE_VIDEO_TRACK_CREATED="SCREENSHARE_VIDEO_TRACK_CREATED",t.SCREENSHARE_TRACK_CHANGED="SCREENSHARE_TRACK_CHANGED",t.CANDIDATE_PEER_UPDATE="CANDIDATE_PEER_UPDATE",t.INBOUND_RTP_UPDATE="INBOUND_RTP_UPDATE",t.OUTBOUND_RTP_UPDATE="OUTBOUND_RTP_UPDATE",t.SEND_TRANSPORT_CLOSED="SEND_TRANSPORT_CLOSED",t.RECV_TRANSPORT_CLOSED="RECV_TRANSPORT_CLOSED",t.SEND_TRANSPORT_CREATED="SEND_TRANSPORT_CREATED",t.RECV_TRANSPORT_CREATED="RECV_TRANSPORT_CREATED",t.PRODUCER_TOGGLE="hive/producer-toggle",t.CONSUMER_TOGGLE="hive/consumer-toggle",t.SELECTED_PEERS_DIFF="hive/selected-peers-diff",t.REFRESH_GRID="hive/refresh-grid",t.RESET_PRODUCER_STATE="hive/reset-producer-state",t.HIVE_RECORDING_STARTED="hive/recording-started",t.HIVE_RECORDING_STOPPED="hive/recording-stopped",t.HIVE_TRANSPORT_STATE_CHANGED="hive/transport-state-changed",t.HIVE_ROOM_REJOINING="hive/room-rejoining",t.HIVE_TRANPSORT_RECONNECTING="hive/transport-reconnecting",t.ROOM_STATE="sockethub/room-state",t.PEER_DISPLAY_NAME_CHANGED="hive/display-name-changed",t.ASSERT_SPOTLIGHTER="websocket/assert-spotlighter",t.PEER_REQUESTED_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-added",t.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE="websocket/request-to-join-stage-peer-withdrawn",t.PEER_REJECTED_TO_JOIN_STAGE="websocket/peer-rejected-to-join-stage",t.PEER_ADDED_TO_STAGE="websocket/peer-added-to-stage",t.PEER_REMOVED_FROM_STAGE="websocket/peer-removed-from-stage",t.PEER_STARTED_PRESENTING="websocket/peer-started-presenting",t.PEER_STOPPED_PRESENTING="websocket/peer-stopped-presenting",t.STAGE_REQUESTS_UPDATED="STAGE_REQUESTS_UPDATED",t.REQUEST_TO_JOIN_STAGE_ACCEPTED="websocket/request-to-join-stage-accepted",t.REQUEST_TO_JOIN_STAGE_REJECTED="websocket/request-to-join-stage-rejected",t.STARTED_PRESENTING="websocket/started-presenting",t.STOPPED_PRESENTING="websocket/stopped-presenting",t.REMOVED_FROM_STAGE="websocket/removed-from-stage",t.JOIN_MEDIA_ROOM="JOIN_MEDIA_ROOM",t.LEAVE_MEDIA_ROOM="LEAVE_MEDIA_ROOM",t.UPDATE_PEER_STAGE_STATUS="UPDATE_PEER_STAGE_STATUS",t.GET_WEBINAR_STAGE_STATUS="GET_WEBINAR_STAGE_STATUS",t.REQUEST_TO_JOIN_STAGE="REQUEST_TO_JOIN_STAGE",t.WITHDRAW_REQUEST_TO_JOIN_STAGE="WITHDRAW_REQUEST_TO_JOIN_STAGE",t.LEAVE_STAGE="LEAVE_STAGE",t.JOIN_STAGE="JOIN_STAGE",t.SET_WEBINAR_STAGE_STATUS="SET_WEBINAR_STAGE_STATUS",t.SET_STAGE_STATUS="SET_STAGE_STATUS",t.ACCEPT_JOIN_STAGE_REQUEST="ACCEPT_JOIN_STAGE_REQUEST",t.REMOVE_FROM_STAGE="REMOVE_FROM_STAGE",t.REJECT_REQUEST_TO_JOIN_STAGE="REJECT_REQUEST_TO_JOIN_STAGE",t.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE="ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE",t.PIP_HANGUP="PIP_HANGUP",t))(E||{}),Ga;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(Ga||(Ga={}));var Ar;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO"})(Ar||(Ar={}));class PV extends A{constructor(){super("media.Pair",[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new PV;class RV extends A{constructor(){super("media.Codec",[])}}new RV;class IV extends A{constructor(){super("media.Fingerprint",[{no:1,name:"algorithm",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:9}])}}new IV;class AV extends A{constructor(){super("media.SessionDescription",[{no:1,name:"target",kind:"enum",T:()=>["media.Target",Ga]},{no:2,name:"type",kind:"scalar",T:9},{no:3,name:"sdp",kind:"scalar",T:9}])}}const ua=new AV;class DV extends A{constructor(){super("media.CreateTransportRequest",[{no:1,name:"consuming",kind:"scalar",T:8},{no:2,name:"force_tcp",kind:"scalar",opt:!0,T:8},{no:3,name:"description",kind:"message",T:()=>ua}])}}const MV=new DV;class OV extends A{constructor(){super("media.CreateTransportResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ua},{no:3,name:"transcription_enabled",kind:"scalar",opt:!0,T:8}])}}const S3=new OV;class LV extends A{constructor(){super("media.RenegotiateRequest",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ua}])}}const NV=new LV;class UV extends A{constructor(){super("media.RenegotiateResponse",[{no:1,name:"transport_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ua}])}}new UV;class $V extends A{constructor(){super("media.NestedScore",[{no:1,name:"encoding_idx",kind:"scalar",T:5},{no:2,name:"rid",kind:"scalar",T:9},{no:3,name:"score",kind:"scalar",T:5},{no:4,name:"ssrc",kind:"scalar",T:3,L:0}])}}const jV=new $V;class zV extends A{constructor(){super("media.ProducerTrack",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9},{no:3,name:"stream_id",kind:"scalar",T:9}])}}const FV=new zV;class VV extends A{constructor(){super("media.ProducerEntry",[{no:1,name:"producing_transport_id",kind:"scalar",T:9},{no:2,name:"producer_id",kind:"scalar",T:9}])}}new VV;class BV extends A{constructor(){super("media.ConsumerEntry",[{no:1,name:"consuming_transport_id",kind:"scalar",T:9},{no:2,name:"consumer_id",kind:"scalar",T:9}])}}new BV;class HV extends A{constructor(){super("media.ProducerState",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"kind",kind:"enum",T:()=>["media.ProducerKind",Ar]},{no:3,name:"pause",kind:"scalar",T:8},{no:4,name:"screen_share",kind:"scalar",T:8}])}}const lh=new HV;class WV extends A{constructor(){super("media.ConsumerState",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>lh},{no:3,name:"producer_track",kind:"message",T:()=>FV}])}}const qV=new WV;class GV extends A{constructor(){super("media.ProducerIdToConsumerMap",[{no:1,name:"map",kind:"map",K:9,V:{kind:"message",T:()=>qV}}])}}const x3=new GV;class JV extends A{constructor(){super("media.edge.PeerJoinRequest",[{no:1,name:"display_name",kind:"scalar",opt:!0,T:9},{no:2,name:"prejoined",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:5,name:"preset",kind:"scalar",opt:!0,T:12},{no:6,name:"user_id",kind:"scalar",opt:!0,T:9},{no:7,name:"organization_id",kind:"scalar",opt:!0,T:9}])}}const KV=new JV;class QV extends A{constructor(){super("media.edge.PeerJoinCompleteRequest",[])}}const YV=new QV;class ZV extends A{constructor(){super("media.edge.PeerLeaveRequest",[{no:1,name:"close_room",kind:"scalar",T:8}])}}const XV=new ZV;class eB extends A{constructor(){super("media.edge.ConsumeMultipleProducerRequest",[{no:1,name:"producer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8}])}}new eB;class tB extends A{constructor(){super("media.edge.ConsumePeerRequest",[{no:1,name:"producing_peer_id",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",opt:!0,T:8},{no:3,name:"producer_id",kind:"scalar",opt:!0,T:9}])}}const iB=new tB;class sB extends A{constructor(){super("media.edge.ProducerCreateRequest",[{no:1,name:"kind",kind:"scalar",T:9},{no:2,name:"paused",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"description",kind:"message",T:()=>ua},{no:5,name:"msid",kind:"scalar",T:9}])}}const rB=new sB;class nB extends A{constructor(){super("media.edge.SelectedPeersRequest",[])}}new nB;class aB extends A{constructor(){super("media.edge.GlobalPeerPinningRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const oB=new aB;class cB extends A{constructor(){super("media.edge.ProducerToggleRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const Zh=new cB;class dB extends A{constructor(){super("media.edge.ConsumerToggleRequest",[{no:1,name:"consumer_id",kind:"scalar",T:9},{no:2,name:"pause",kind:"scalar",T:8}])}}const Vx=new dB;class lB extends A{constructor(){super("media.edge.ProducerCloseRequest",[{no:1,name:"producer_id",kind:"scalar",T:9},{no:2,name:"description",kind:"message",T:()=>ua}])}}const uB=new lB;class pB extends A{constructor(){super("media.edge.ConsumerCloseRequest",[{no:1,name:"consumer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"description",kind:"message",T:()=>ua}])}}const hB=new pB;class gB extends A{constructor(){super("media.edge.KickPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const mB=new gB;class fB extends A{constructor(){super("media.edge.KickAllPeersRequest",[])}}const vB=new fB;class yB extends A{constructor(){super("media.edge.PeerDisplayNameEditRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const bB=new yB;class wB extends A{constructor(){super("media.edge.HostMediaControlForPeerRequest",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"video",kind:"scalar",T:8},{no:4,name:"scree_share",kind:"scalar",T:8}])}}const _B=new wB;class kB extends A{constructor(){super("media.edge.HostMediaControlForAllPeerRequest",[{no:1,name:"audio",kind:"scalar",T:8},{no:2,name:"video",kind:"scalar",T:8},{no:3,name:"screen_share",kind:"scalar",T:8}])}}const SB=new kB;class xB extends A{constructor(){super("media.edge.GetRoomStateResponse",[{no:1,name:"display_title",kind:"scalar",T:9},{no:2,name:"locked_mode",kind:"scalar",T:8},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"room_name",kind:"scalar",T:9},{no:5,name:"current_peer_id",kind:"scalar",T:9},{no:6,name:"is_recording",kind:"scalar",opt:!0,T:8},{no:7,name:"recorder_participant_id",kind:"scalar",opt:!0,T:9}])}}const EB=new xB;class TB extends A{constructor(){super("media.edge.ErrorResponse",[{no:1,name:"error_message",kind:"scalar",T:9},{no:2,name:"event_id",kind:"scalar",T:5}])}}const CB=new TB;class PB extends A{constructor(){super("media.edge.EmptyResponse",[])}}new PB;class RB extends A{constructor(){super("media.edge.RoomParticipants",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"producer_states",kind:"message",repeat:1,T:()=>lh},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",opt:!0,T:9}])}}const E3=new RB;class IB extends A{constructor(){super("media.edge.SelectedPeersResponse",[{no:1,name:"audio_peers",kind:"scalar",repeat:2,T:9},{no:2,name:"compulsory_peers",kind:"scalar",repeat:2,T:9}])}}const T3=new IB;class AB extends A{constructor(){super("media.edge.SelectedPeersDiffEntry",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"priority",kind:"scalar",T:5}])}}const DB=new AB;class MB extends A{constructor(){super("media.edge.SelectedPeersDiffResponse",[{no:1,name:"entries",kind:"message",repeat:1,T:()=>DB}])}}const OB=new MB;class LB extends A{constructor(){super("media.edge.PeerJoinResponse",[])}}new LB;class NB extends A{constructor(){super("media.edge.PeerJoinCompleteResponse",[{no:1,name:"room_state",kind:"message",T:()=>EB},{no:2,name:"participants",kind:"message",repeat:1,T:()=>E3},{no:3,name:"selected_peers",kind:"message",T:()=>T3},{no:4,name:"max_preferred_streams",kind:"scalar",T:5}])}}const UB=new NB;class $B extends A{constructor(){super("media.edge.PeerLeaveResponse",[{no:1,name:"closed",kind:"scalar",T:8}])}}const jB=new $B;class zB extends A{constructor(){super("media.edge.ConsumeMultipleProducerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>x3}])}}new zB;class FB extends A{constructor(){super("media.edge.ConsumePeerResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"consumer_ids_map",kind:"message",T:()=>x3}])}}const VB=new FB;class BB extends A{constructor(){super("media.edge.ProducerCreateResponse",[{no:1,name:"status",kind:"scalar",T:8},{no:2,name:"producer_id",kind:"scalar",T:9},{no:4,name:"description",kind:"message",T:()=>ua}])}}const HB=new BB;class WB extends A{constructor(){super("media.edge.ProducerScoreResponse",[{no:1,name:"responseid",kind:"scalar",T:9},{no:2,name:"score",kind:"message",T:()=>jV}])}}new WB;class qB extends A{constructor(){super("media.edge.ActiveSpeakerResponse",[{no:1,name:"responsepeer_id",kind:"scalar",T:9},{no:2,name:"volume",kind:"scalar",T:5}])}}new qB;class GB extends A{constructor(){super("media.edge.NoActiveSpeakerResponse",[])}}new GB;class JB extends A{constructor(){super("media.edge.ProducerToggleResponse",[])}}new JB;class KB extends A{constructor(){super("media.edge.ConsumerToggleResponse",[])}}new KB;class QB extends A{constructor(){super("media.edge.ProducerClosingResponse",[{no:1,name:"description",kind:"message",T:()=>ua}])}}const YB=new QB;class ZB extends A{constructor(){super("media.edge.ConsumerClosingResponse",[])}}new ZB;class XB extends A{constructor(){super("media.edge.GlobalPeerPinningResponse",[])}}new XB;class eH extends A{constructor(){super("media.edge.KickPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const tH=new eH;class iH extends A{constructor(){super("media.edge.KickAllPeersResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const sH=new iH;class rH extends A{constructor(){super("media.edge.HostMediaControlForPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const nH=new rH;class aH extends A{constructor(){super("media.edge.HostMediaControlForAllPeerResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const oH=new aH;class cH extends A{constructor(){super("media.edge.PeerDisplayNameEditResponse",[{no:1,name:"status",kind:"scalar",T:9}])}}const dH=new cH;class lH extends A{constructor(){super("media.edge.PeerJoinBroadcastResponse",[{no:1,name:"participant",kind:"message",T:()=>E3}])}}const uH=new lH;class pH extends A{constructor(){super("media.edge.PeerProducingTransportCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"transport_details",kind:"message",T:()=>S3}])}}new pH;class hH extends A{constructor(){super("media.edge.PeerProducerCreateBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>lh}])}}const gH=new hH;class mH extends A{constructor(){super("media.edge.PeerProducerToggleBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>lh}])}}const fH=new mH;class vH extends A{constructor(){super("media.edge.PeerProducerCloseBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"producer_state",kind:"message",T:()=>lh}])}}const yH=new vH;class bH extends A{constructor(){super("media.edge.PeerLeaveBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const wH=new bH;class _H extends A{constructor(){super("media.edge.GlobalPeerPinningBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const kH=new _H;class SH extends A{constructor(){super("media.edge.RecordingStartedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const xH=new SH;class EH extends A{constructor(){super("media.edge.RecordingStoppedBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9}])}}const TH=new EH;class CH extends A{constructor(){super("media.edge.PeerDisplayNameEditBroadcastResponse",[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9}])}}const PH=new CH;class RH extends A{constructor(){super("media.edge.PeerPingRequestBroadcastResponse",[{no:1,name:"password",kind:"scalar",T:9}])}}new RH;class IH extends A{constructor(){super("socket.ai.MeetingTranscript",[{no:1,name:"meeting_id",kind:"scalar",T:9},{no:2,name:"transcript",kind:"scalar",T:9}])}}const Zy=new IH;class AH extends A{constructor(){super("socket.api.BaseSocketHubMessage",[{no:1,name:"event",kind:"scalar",T:5},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9},{no:4,name:"room_id",kind:"scalar",T:9},{no:5,name:"user_id",kind:"scalar",T:9},{no:6,name:"payload",kind:"scalar",T:12}])}}new AH;class DH extends A{constructor(){super("socket.api.ErrorMessage",[{no:1,name:"code",kind:"scalar",opt:!0,T:5},{no:2,name:"message",kind:"scalar",T:9}])}}const MH=new DH;class OH extends A{constructor(){super("socket.PeerPreset",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"message",T:()=>iW}])}}new OH;class LH extends A{constructor(){super("socket.PeerPreset.Plugins",[{no:1,name:"can_close",kind:"scalar",T:8},{no:2,name:"can_start",kind:"scalar",T:8}])}}const NH=new LH;class UH extends A{constructor(){super("socket.PeerPreset.Polls",[{no:1,name:"can_create",kind:"scalar",T:8},{no:2,name:"can_vote",kind:"scalar",T:8},{no:3,name:"can_view",kind:"scalar",T:8}])}}const $H=new UH;class jH extends A{constructor(){super("socket.PeerPreset.Video",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const zH=new jH;class FH extends A{constructor(){super("socket.PeerPreset.Screenshare",[{no:1,name:"allow",kind:"scalar",T:8},{no:2,name:"quality",kind:"scalar",T:9},{no:3,name:"frame_rate",kind:"scalar",T:13}])}}const VH=new FH;class BH extends A{constructor(){super("socket.PeerPreset.Produce",[{no:1,name:"video",kind:"message",T:()=>zH},{no:2,name:"audio",kind:"scalar",T:8},{no:3,name:"screenshare",kind:"message",T:()=>VH}])}}const HH=new BH;class WH extends A{constructor(){super("socket.PeerPreset.Public",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"text",kind:"scalar",T:8},{no:3,name:"files",kind:"scalar",T:8}])}}const qH=new WH;class GH extends A{constructor(){super("socket.PeerPreset.Private",[{no:1,name:"can_send",kind:"scalar",T:8},{no:2,name:"can_receive",kind:"scalar",T:8},{no:3,name:"text",kind:"scalar",T:8},{no:4,name:"files",kind:"scalar",T:8}])}}const JH=new GH;class KH extends A{constructor(){super("socket.PeerPreset.Chat",[{no:1,name:"public",kind:"message",T:()=>qH},{no:2,name:"private",kind:"message",T:()=>JH}])}}const QH=new KH;class YH extends A{constructor(){super("socket.PeerPreset.Permissions",[{no:1,name:"view_type",kind:"scalar",T:9},{no:2,name:"accept_waiting_requests",kind:"scalar",T:8},{no:3,name:"request_produce",kind:"scalar",T:8},{no:4,name:"can_allow_participant_audio",kind:"scalar",T:8},{no:5,name:"can_allow_participant_screensharing",kind:"scalar",T:8},{no:6,name:"can_allow_participant_video",kind:"scalar",T:8},{no:7,name:"request_kick_participant",kind:"scalar",T:8},{no:8,name:"kick_participant",kind:"scalar",T:8},{no:9,name:"pin_participant",kind:"scalar",T:8},{no:10,name:"can_record",kind:"scalar",T:8},{no:11,name:"waiting_room_type",kind:"scalar",T:9},{no:12,name:"plugins",kind:"message",T:()=>NH},{no:13,name:"polls",kind:"message",T:()=>$H},{no:14,name:"produce",kind:"message",T:()=>HH},{no:15,name:"chat",kind:"message",T:()=>QH},{no:16,name:"reactions",kind:"scalar",T:8},{no:17,name:"hidden_participant",kind:"scalar",T:8},{no:18,name:"show_participant_list",kind:"scalar",T:8},{no:19,name:"can_change_participant_role",kind:"scalar",T:8},{no:20,name:"can_change_theme",kind:"scalar",T:8},{no:21,name:"can_present",kind:"scalar",T:8},{no:22,name:"is_recorder",kind:"scalar",opt:!0,T:8}])}}const ZH=new YH;class XH extends A{constructor(){super("socket.PeerPreset.Preset",[{no:1,name:"permissions",kind:"message",T:()=>ZH},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"preset_name",kind:"scalar",T:9}])}}const eW=new XH;class tW extends A{constructor(){super("socket.PeerPreset.Data",[{no:1,name:"preset",kind:"message",T:()=>eW}])}}const iW=new tW;class sW extends A{constructor(){super("socket.chat.ChatMessage",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"pinned",kind:"scalar",T:8},{no:6,name:"is_edited",kind:"scalar",T:8},{no:7,name:"payload_type",kind:"scalar",T:5},{no:8,name:"payload",kind:"scalar",T:9},{no:10,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:11,name:"created_at",kind:"scalar",T:4,L:2},{no:12,name:"created_at_ms",kind:"scalar",opt:!0,T:4,L:2},{no:13,name:"channel_id",kind:"scalar",opt:!0,T:9},{no:14,name:"channel_index",kind:"scalar",opt:!0,T:9}])}}const Bc=new sW;class rW extends A{constructor(){super("socket.chat.GetPaginatedChatMessageRoomRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const nW=new rW;class aW extends A{constructor(){super("socket.chat.GetPaginatedChatMessageRoomResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Bc},{no:2,name:"next",kind:"scalar",T:8}])}}const oW=new aW;class cW extends A{constructor(){super("socket.chat.GetChatMessagesResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Bc}])}}const C3=new cW;class dW extends A{constructor(){super("socket.chat.SendChatMessageToRoomRequest",[{no:1,name:"payload_type",kind:"scalar",T:5},{no:2,name:"payload",kind:"scalar",T:9}])}}const lW=new dW;class uW extends A{constructor(){super("socket.chat.SendChatMessageToRoomResponse",[{no:1,name:"message",kind:"message",T:()=>Bc}])}}const Xy=new uW;class pW extends A{constructor(){super("socket.chat.SendChatMessageToPeersRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const hW=new pW;class gW extends A{constructor(){super("socket.chat.SendChatMessageToPeersResponse",[{no:1,name:"message",kind:"message",T:()=>Bc}])}}const e0=new gW;class mW extends A{constructor(){super("socket.chat.SendChatMessageToChannelRequest",[{no:1,name:"channel_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",T:5},{no:3,name:"payload",kind:"scalar",T:9}])}}const fW=new mW;class vW extends A{constructor(){super("socket.chat.SendChatMessageToChannelResponse",[{no:1,name:"message",kind:"message",T:()=>Bc}])}}new vW;class yW extends A{constructor(){super("socket.chat.EditChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"payload_type",kind:"scalar",opt:!0,T:5},{no:3,name:"payload",kind:"scalar",opt:!0,T:9},{no:4,name:"pinned",kind:"scalar",opt:!0,T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const bW=new yW;class wW extends A{constructor(){super("socket.chat.EditChatMessageResponse",[{no:1,name:"message",kind:"message",T:()=>Bc}])}}const Xh=new wW;class _W extends A{constructor(){super("socket.chat.DeleteChatMessageRequest",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const kW=new _W;class SW extends A{constructor(){super("socket.chat.DeleteChatMessageResponse",[{no:1,name:"chat_id",kind:"scalar",T:9},{no:2,name:"channel_id",kind:"scalar",opt:!0,T:9}])}}const eg=new SW;class xW extends A{constructor(){super("socket.chat.SearchChatMessagesRequest",[{no:1,name:"time_stamp",kind:"scalar",T:4,L:2},{no:2,name:"size",kind:"scalar",T:5},{no:3,name:"from",kind:"scalar",T:5},{no:4,name:"reversed",kind:"scalar",T:8},{no:5,name:"channel_id",kind:"scalar",opt:!0,T:9},{no:6,name:"search_term",kind:"scalar",T:9}])}}const EW=new xW;class TW extends A{constructor(){super("socket.chat.MarkChannelIndexAsReadRequest",[{no:1,name:"channel_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"channel_index",kind:"scalar",T:9}])}}const CW=new TW;class PW extends A{constructor(){super("socket.chat.MarkChannelIndexAsReadResponse",[{no:1,name:"channel_index",kind:"scalar",T:9}])}}const RW=new PW;class IW extends A{constructor(){super("socket.chat.CreateChatChannelRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:4,name:"visibility",kind:"scalar",T:9},{no:5,name:"is_direct_message",kind:"scalar",T:8}])}}const AW=new IW;class DW extends A{constructor(){super("socket.chat.UpdateChatChannelRequest",[{no:1,name:"chat_channel_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"target_user_ids",kind:"scalar",repeat:2,T:9},{no:4,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:5,name:"visibility",kind:"scalar",opt:!0,T:9},{no:6,name:"is_direct_message",kind:"scalar",opt:!0,T:8}])}}const MW=new DW;class OW extends A{constructor(){super("socket.chat.CreateChatChannelResponse",[{no:1,name:"chat_channel_id",kind:"scalar",T:9}])}}new OW;class LW extends A{constructor(){super("socket.chat.GetChatChannelRequest",[{no:1,name:"chat_channel_id",kind:"scalar",T:9}])}}const NW=new LW;class UW extends A{constructor(){super("socket.chat.LatestMessageAndUnreadCount",[{no:1,name:"message",kind:"message",T:()=>Bc},{no:2,name:"unread_count",kind:"scalar",T:4,L:2}])}}const $W=new UW;class jW extends A{constructor(){super("socket.chat.ChatChannel",[{no:1,name:"chat_channel_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",T:9},{no:3,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:4,name:"visibility",kind:"scalar",T:9},{no:5,name:"is_direct_message",kind:"scalar",T:8},{no:6,name:"latest_message_and_unread_count",kind:"message",T:()=>$W},{no:7,name:"target_user_ids",kind:"scalar",repeat:2,T:9}])}}const zW=new jW;class FW extends A{constructor(){super("socket.chat.GetChatChannelResponse",[{no:1,name:"chat_channels",kind:"message",repeat:1,T:()=>zW}])}}const An=new FW;class VW extends A{constructor(){super("socket.chat.ChannelMember",[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",opt:!0,T:9},{no:3,name:"picture",kind:"scalar",opt:!0,T:9},{no:4,name:"custom_participant_id",kind:"scalar",T:9}])}}const BW=new VW;class HW extends A{constructor(){super("socket.chat.GetChatChannelMembersResponse",[{no:1,name:"channel_members",kind:"message",repeat:1,T:()=>BW}])}}const WW=new HW;var Qb;(function(t){t[t.BROWSER=0]="BROWSER",t[t.TRACK=1]="TRACK",t[t.COMPOSITE=2]="COMPOSITE"})(Qb||(Qb={}));var $s;(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ON_STAGE=1]="ON_STAGE",t[t.APPROVED_STAGE=2]="APPROVED_STAGE",t[t.REQUESTED_STAGE=3]="REQUESTED_STAGE",t[t.OFF_STAGE=4]="OFF_STAGE"})($s||($s={}));var af;(function(t){t[t.HIVE=0]="HIVE",t[t.CHAT=1]="CHAT",t[t.PING=2]="PING"})(af||(af={}));class qW extends A{constructor(){super("socket.room.Peer",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9},{no:4,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",$s,"STAGE_TYPE_"]},{no:5,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:6,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:7,name:"display_picture_url",kind:"scalar",opt:!0,T:9},{no:8,name:"waitlisted",kind:"scalar",T:8}])}}const fv=new qW;class GW extends A{constructor(){super("socket.room.PeerInfoResponse",[{no:1,name:"peer",kind:"message",T:()=>fv}])}}const tg=new GW;class JW extends A{constructor(){super("socket.room.PeerStatusUpdate",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"stage_type",kind:"enum",opt:!0,T:()=>["socket.room.StageType",$s,"STAGE_TYPE_"]}])}}new JW;class KW extends A{constructor(){super("socket.room.RoomPeersInfoRequest",[{no:1,name:"seach_query",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5},{no:3,name:"offset",kind:"scalar",T:5}])}}const QW=new KW;class YW extends A{constructor(){super("socket.room.RoomPeersInfoResponse",[{no:1,name:"peers",kind:"message",repeat:1,T:()=>fv}])}}const ZW=new YW;class XW extends A{constructor(){super("socket.room.RoomPeerCountResponse",[{no:1,name:"count",kind:"scalar",T:4,L:2}])}}const Bx=new XW;class eq extends A{constructor(){super("socket.room.Room",[{no:1,name:"room_id",kind:"scalar",T:9},{no:2,name:"title",kind:"scalar",T:9},{no:4,name:"created_at",kind:"scalar",T:4,L:2},{no:5,name:"active_recordings",kind:"message",repeat:1,T:()=>iq}])}}const P3=new eq;class tq extends A{constructor(){super("socket.room.ActiveRecording",[{no:1,name:"recording_id",kind:"scalar",T:9},{no:2,name:"recording_type",kind:"enum",T:()=>["common.RecordingType",Qb]}])}}const iq=new tq;class sq extends A{constructor(){super("socket.room.RoomInfoResponse",[{no:1,name:"room",kind:"message",T:()=>P3}])}}const Hx=new sq;class rq extends A{constructor(){super("socket.room.GetPeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9}])}}new rq;class nq extends A{constructor(){super("socket.room.UpdatePeerInfoRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9}])}}new nq;class aq extends A{constructor(){super("socket.room.JoinRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>fv},{no:3,name:"room_uuid",kind:"scalar",T:9},{no:4,name:"organization_id",kind:"scalar",opt:!0,T:9},{no:5,name:"use_hive",kind:"scalar",opt:!0,T:8},{no:6,name:"preset",kind:"scalar",opt:!0,T:12},{no:7,name:"capabilities",kind:"enum",repeat:1,T:()=>["socket.room.Capabilities",af,"CAPABILITIES_"]},{no:8,name:"timestamp",kind:"scalar",opt:!0,T:4,L:2}])}}const oq=new aq;class cq extends A{constructor(){super("socket.room.LeaveRoomRequest",[{no:1,name:"peer",kind:"message",T:()=>fv},{no:2,name:"timestamp",kind:"scalar",opt:!0,T:4,L:2}])}}const dq=new cq;class lq extends A{constructor(){super("socket.room.UpdateRoomInfoRequest",[{no:1,name:"room",kind:"message",T:()=>P3}])}}new lq;class uq extends A{constructor(){super("socket.room.GetConnectedRoomsDumpRequest",[])}}new uq;class pq extends A{constructor(){super("socket.room.ServiceError",[{no:1,name:"message",kind:"scalar",opt:!0,T:9},{no:2,name:"code",kind:"scalar",opt:!0,T:9}])}}const P_=new pq;class hq extends A{constructor(){super("socket.room.ConnectedMeetingPeer",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"display_name",kind:"scalar",opt:!0,T:9},{no:3,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:4,name:"preset_id",kind:"scalar",opt:!0,T:9},{no:5,name:"display_picture_url",kind:"scalar",opt:!0,T:9}])}}const gq=new hq;class mq extends A{constructor(){super("socket.room.ConnectedMeetingDump",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>gq}])}}const Wx=new mq;class fq extends A{constructor(){super("socket.room.GetConnectedRoomsDumpResponse",[{no:1,name:"parent_meeting",kind:"message",T:()=>Wx},{no:2,name:"meetings",kind:"message",repeat:1,T:()=>Wx}])}}const vq=new fq;class yq extends A{constructor(){super("socket.room.CreateRoomRequestPayload",[{no:1,name:"title",kind:"scalar",opt:!0,T:9}])}}const bq=new yq;class wq extends A{constructor(){super("socket.room.CreateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>bq}])}}const _q=new wq;class kq extends A{constructor(){super("socket.room.CreateRoomResponsePayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>P_}])}}const Sq=new kq;class xq extends A{constructor(){super("socket.room.CreateConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Sq}])}}const qx=new xq;class Eq extends A{constructor(){super("socket.room.UpdateRoomRequestPayload",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"title",kind:"scalar",opt:!0,T:9}])}}const Tq=new Eq;class Cq extends A{constructor(){super("socket.room.UpdateConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Tq}])}}new Cq;class Pq extends A{constructor(){super("socket.room.DisableRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const Rq=new Pq;class Iq extends A{constructor(){super("socket.room.DisableConnectedRoomsRequest",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Rq}])}}const Aq=new Iq;class Dq extends A{constructor(){super("socket.room.DisableConnectedRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>Lq}])}}const Mq=new Dq;class Oq extends A{constructor(){super("socket.room.DisableConnectedRoomPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9},{no:2,name:"status",kind:"scalar",opt:!0,T:9},{no:3,name:"title",kind:"scalar",opt:!0,T:9},{no:4,name:"error",kind:"message",T:()=>P_}])}}const Lq=new Oq;class Nq extends A{constructor(){super("socket.room.MovePeerPayload",[{no:1,name:"id",kind:"scalar",opt:!0,T:9}])}}const Uq=new Nq;class $q extends A{constructor(){super("socket.room.MovePeersBetweenRoomsRequest",[{no:1,name:"source_meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"destination_meeting_id",kind:"scalar",opt:!0,T:9},{no:3,name:"participants",kind:"message",repeat:1,T:()=>Uq}])}}const jq=new $q;class zq extends A{constructor(){super("socket.room.MovedPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"custom_participant_id",kind:"scalar",opt:!0,T:9},{no:3,name:"error",kind:"message",T:()=>P_}])}}const R3=new zq;class Fq extends A{constructor(){super("socket.room.MovePeersBetweenRoomsResponse",[{no:1,name:"payloads",kind:"message",repeat:1,T:()=>R3}])}}new Fq;class Vq extends A{constructor(){super("socket.room.TransferPeer",[{no:1,name:"meeting_id",kind:"scalar",opt:!0,T:9},{no:2,name:"auth_token",kind:"scalar",opt:!0,T:9}])}}const Bq=new Vq;class Hq extends A{constructor(){super("socket.room.GetAllAddedParticipantsResponse",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>Gq}])}}const Wq=new Hq;class qq extends A{constructor(){super("socket.room.AddedParticipant",[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",opt:!0,T:9},{no:3,name:"picture",kind:"scalar",opt:!0,T:9},{no:4,name:"custom_participant_id",kind:"scalar",T:9}])}}const Gq=new qq;class Jq extends A{constructor(){super("socket.room.RemoveParticipantsRequest",[{no:1,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Kq=new Jq;class Qq extends A{constructor(){super("socket.room.BroadcastMessage",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"timestamp",kind:"scalar",T:4,L:2},{no:4,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const Gx=new Qq;class Yq extends A{constructor(){super("socket.room.AcceptWaitingRoomRequests",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const Zq=new Yq;class Xq extends A{constructor(){super("socket.room.DenyWaitingRoomRequests",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const eG=new Xq;class tG extends A{constructor(){super("socket.room.WaitingRoomRequest",[{no:1,name:"peer_id",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"display_name",kind:"scalar",T:9}])}}const iG=new tG;class sG extends A{constructor(){super("socket.room.GetWaitingRoomRequests",[{no:1,name:"requests",kind:"message",repeat:1,T:()=>iG}])}}const Jx=new sG;class rG extends A{constructor(){super("socket.plugin.AddPluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const nG=new rG;class aG extends A{constructor(){super("socket.plugin.RemovePluginRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"staggered",kind:"scalar",T:8}])}}const oG=new aG;class cG extends A{constructor(){super("socket.plugin.EnablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const dG=new cG;class lG extends A{constructor(){super("socket.plugin.DisablePluginForRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9}])}}const uG=new lG;class pG extends A{constructor(){super("socket.plugin.EnablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const hG=new pG;class gG extends A{constructor(){super("socket.plugin.DisablePluginForPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9}])}}const mG=new gG;class fG extends A{constructor(){super("socket.plugin.PluginEventToRoomRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const vG=new fG;class yG extends A{constructor(){super("socket.plugin.PluginEventToPeersRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"peer_ids",kind:"scalar",repeat:2,T:9},{no:3,name:"plugin_data",kind:"scalar",T:12}])}}const bG=new yG;class wG extends A{constructor(){super("socket.plugin.StoreKeys",[{no:1,name:"store_key",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",opt:!0,T:12}])}}const R_=new wG;class _G extends A{constructor(){super("socket.plugin.PluginStoreInsertKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"insert_keys",kind:"message",repeat:1,T:()=>R_}])}}const Kx=new _G;class kG extends A{constructor(){super("socket.plugin.PluginStoreGetKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"get_keys",kind:"message",repeat:1,T:()=>R_}])}}const SG=new kG;class xG extends A{constructor(){super("socket.plugin.PluginStoreDeleteKeysRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"delete_keys",kind:"message",repeat:1,T:()=>R_}])}}const EG=new xG;class TG extends A{constructor(){super("socket.plugin.PluginStoreDeleteRequest",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9}])}}const CG=new TG;class PG extends A{constructor(){super("socket.plugin.EnablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"enabled_by",kind:"scalar",T:9}])}}const Yb=new PG;class RG extends A{constructor(){super("socket.plugin.EnablePluginsResponse",[{no:1,name:"plugins",kind:"message",repeat:1,T:()=>Yb}])}}const IG=new RG;class AG extends A{constructor(){super("socket.plugin.DisablePluginResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"disabled_by",kind:"scalar",T:9}])}}const Qx=new AG;class DG extends A{constructor(){super("socket.plugin.PluginStoreItem",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"peer_id",kind:"scalar",T:9},{no:3,name:"store_key",kind:"scalar",T:9},{no:4,name:"payload",kind:"scalar",T:12}])}}const MG=new DG;class OG extends A{constructor(){super("socket.plugin.PluginStoreResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"store_name",kind:"scalar",T:9},{no:3,name:"store_items",kind:"message",repeat:1,T:()=>MG}])}}const Yx=new OG;class LG extends A{constructor(){super("socket.plugin.PluginEventResponse",[{no:1,name:"plugin_id",kind:"scalar",T:9},{no:2,name:"plugin_data",kind:"scalar",T:12}])}}const Zx=new LG;class NG extends A{constructor(){super("socket.livestreaming.LiveStreamingEvent",[{no:1,name:"livestream_id",kind:"scalar",T:9},{no:2,name:"err_message",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"meeting_id",kind:"scalar",T:9},{no:5,name:"playback_url",kind:"scalar",T:9},{no:6,name:"org_id",kind:"scalar",T:9},{no:7,name:"room_name",kind:"scalar",T:9},{no:8,name:"room_uuid",kind:"scalar",T:9},{no:9,name:"status",kind:"scalar",T:9}])}}const Xx=new NG;class UG extends A{constructor(){super("socket.livestreaming.GetStagePeersResponse",[{no:1,name:"stage_peers",kind:"scalar",repeat:2,T:9}])}}const eE=new UG;class $G extends A{constructor(){super("socket.livestreaming.StageRequest",[{no:1,name:"display_name",kind:"scalar",T:9},{no:2,name:"user_id",kind:"scalar",T:9},{no:3,name:"peer_id",kind:"scalar",T:9}])}}const jG=new $G;class zG extends A{constructor(){super("socket.livestreaming.GetStageRequestsResponse",[{no:1,name:"stage_requests",kind:"message",repeat:1,T:()=>jG}])}}const t0=new zG;class FG extends A{constructor(){super("socket.livestreaming.GrantStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const VG=new FG;class BG extends A{constructor(){super("socket.livestreaming.DenyStageAccessRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const HG=new BG;class WG extends A{constructor(){super("socket.livestreaming.LeaveStageRequest",[{no:1,name:"user_ids",kind:"scalar",repeat:2,T:9}])}}const tE=new WG;class qG extends A{constructor(){super("socket.polls.Poll",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"created_by",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"question",kind:"scalar",T:9},{no:5,name:"options",kind:"message",repeat:1,T:()=>JG},{no:6,name:"hide_votes",kind:"scalar",T:8},{no:7,name:"anonymous",kind:"scalar",T:8},{no:8,name:"votes",kind:"scalar",repeat:2,T:9}])}}const I3=new qG;class GG extends A{constructor(){super("socket.polls.PollOption",[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"count",kind:"scalar",opt:!0,T:4,L:2},{no:3,name:"votes",kind:"message",repeat:1,T:()=>QG}])}}const JG=new GG;class KG extends A{constructor(){super("socket.polls.PollVote",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}}const QG=new KG;class YG extends A{constructor(){super("socket.polls.NewPollRequest",[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"options",kind:"scalar",repeat:2,T:9},{no:3,name:"anonymous",kind:"scalar",T:8},{no:4,name:"hide_votes",kind:"scalar",T:8},{no:5,name:"created_by",kind:"scalar",opt:!0,T:9},{no:6,name:"created_by_user_id",kind:"scalar",opt:!0,T:9}])}}const ZG=new YG;class XG extends A{constructor(){super("socket.polls.VotePollRequest",[{no:1,name:"poll_id",kind:"scalar",T:9},{no:2,name:"index",kind:"scalar",T:4,L:2}])}}const eJ=new XG;class tJ extends A{constructor(){super("socket.polls.UpdatePollResponse",[{no:1,name:"poll",kind:"message",T:()=>I3}])}}const i0=new tJ;class iJ extends A{constructor(){super("socket.polls.GetPollsResponse",[{no:1,name:"polls",kind:"message",repeat:1,T:()=>I3}])}}const sJ=new iJ;var Zb;(function(t){t[t.ACTION=0]="ACTION",t[t.RESPONSE=1]="RESPONSE",t[t.EVENT=2]="EVENT"})(Zb||(Zb={}));var Xb;(function(t){t[t.SERVICE_NOT_FOUND=0]="SERVICE_NOT_FOUND",t[t.PARAMETER_VALIDATION_ERROR=1]="PARAMETER_VALIDATION_ERROR",t[t.TIMEOUT_ERROR=2]="TIMEOUT_ERROR",t[t.APPLICATION_ERROR=3]="APPLICATION_ERROR"})(Xb||(Xb={}));class rJ extends A{constructor(){super("bridge.BridgeMessage",[{no:1,name:"type",kind:"enum",T:()=>["bridge.BridgeMessageType",Zb]},{no:2,name:"action",kind:"message",oneof:"data",T:()=>aJ},{no:3,name:"response",kind:"message",oneof:"data",T:()=>cJ},{no:4,name:"event",kind:"message",oneof:"data",T:()=>pJ}])}}new rJ;class nJ extends A{constructor(){super("bridge.BridgeAction",[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const aJ=new nJ;class oJ extends A{constructor(){super("bridge.BridgeResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"response",kind:"scalar",T:9},{no:3,name:"error",kind:"message",T:()=>lJ}])}}const cJ=new oJ;class dJ extends A{constructor(){super("bridge.BridgeError",[{no:1,name:"type",kind:"enum",T:()=>["bridge.ErrorType",Xb]},{no:2,name:"message",kind:"scalar",T:9}])}}const lJ=new dJ;class uJ extends A{constructor(){super("bridge.BridgeEvent",[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"params",kind:"scalar",T:9}])}}const pJ=new uJ;class hJ extends A{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3,L:0},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),i=Date.now();return e.seconds=ut.from(Math.floor(i/1e3)).toBigInt(),e.nanos=i%1e3*1e6,e}toDate(e){return new Date(ut.from(e.seconds).toNumber()*1e3+Math.ceil(e.nanos/1e6))}fromDate(e){const i=this.create(),s=e.getTime();return i.seconds=ut.from(Math.floor(s/1e3)).toBigInt(),i.nanos=s%1e3*1e6,i}internalJsonWrite(e,i){let s=ut.from(e.seconds).toNumber()*1e3;if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let r="Z";if(e.nanos>0){let n=(e.nanos+1e9).toString().substring(1);n.substring(3)==="000000"?r="."+n.substring(0,3)+"Z":n.substring(6)==="000"?r="."+n.substring(0,6)+"Z":r="."+n+"Z"}return new Date(s).toISOString().replace(".000Z",r)}internalJsonRead(e,i,s){if(typeof e!="string")throw new Error("Unable to parse Timestamp from JSON "+e_(e)+".");let r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let n=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(n))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return s||(s=this.create()),s.seconds=ut.from(n/1e3).toBigInt(),s.nanos=0,r[7]&&(s.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),s}}new hJ;const gJ=3,mJ=30,fJ=8e3;class vJ{constructor(e){v(this,"ipInfo"),v(this,"axios"),v(this,"requests"),v(this,"roomName"),v(this,"roomUUID"),v(this,"peerId"),v(this,"authToken"),v(this,"organizationId");const{timeout:i=fJ,retry:s=gJ,retryDelay:r=mJ,baseURL:n="https://api.cluster.dyte.in",authToken:a}=e||{};this.requests=Hm.create({baseURL:n,responseType:"json",timeout:i,retry:s,retryDelay:r}),this.axios=Hm,this.setAuthToken(a,{bearer:!0}),this.requests.interceptors.request.use(o=>(S.injectContext(this.requests.defaults.headers.common),o),async o=>{w.error("xhr::axios",{debuggingHint:"otelRequestInterceptor failed.",error:o})}),this.requests.interceptors.response.use(o=>{try{o.config.url!==S.logsEndpoint&&w.debug("xhr::axios",{networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,method:o.config.method}})}catch(c){console.error("xhr::dyte",{error:"responseInterceptorFailed",err:c,response:o})}return o},async o=>{var c;try{if(!o)return Promise.reject(new Error("Unknown error occurred"));o&&o.config&&((c=o.config)==null?void 0:c.url)!==S.logsEndpoint&&w.error("xhr::axios",{error:o,networkCall:{status:o.status,statusText:o.statusText,baseURL:o.config.baseURL,url:o.config.url,retries:o.config.retry,method:o.config.method,isOnline:navigator.onLine?"online":"offline"}});const{config:u,message:l}=o;return u&&l&&u.retry!==void 0&&u.retry>0&&(l.includes("timeout")||l.includes("Network Error"))?(u.retry-=1,u.baseURL==="https://api.cluster.dyte.in"?u.baseURL="https://network2.dyte.io":u.baseURL==="https://network2.dyte.io"&&(u.baseURL="https://api.cluster.dyte.in"),this.requests(u)):Promise.reject(o)}catch(u){return console.error("xhr::dyte",{error:"responseInterceptorFailed",err:u,responseError:o}),Promise.reject(u)}})}setAuthToken(e,i){const{bearer:s}=i||{};this.authToken=e,this.requests.defaults.headers.common.Authorization=s?`Bearer ${e}`:e}setHeader(e,i){this.requests.defaults.headers.common[e]=i}setRoomName(e){this.roomName=e}setRoomUUID(e){this.roomUUID=e}setPeerId(e){this.peerId=e}setOrganizationId(e){this.organizationId=e}}var yJ=Object.defineProperty,bJ=Object.getOwnPropertyDescriptor,A3=(t,e,i,s)=>{for(var r=s>1?void 0:s?bJ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&yJ(e,i,r),r};class vv extends vJ{constructor(e){super(e),this.setHeader("x-dyte-web-core-version",dh)}async getIPDetails({peerId:e}){var i;try{const s=(await this.requests.get("https://media-location.dyte.io")).data;if(((i=s.loc)==null?void 0:i.length)>5)return s;throw Error("Insufficient data")}catch{w.error("getIPDetails::failed")}try{const s=await a_.getIPDetails({peerId:e});return w.info("gotIPDetails",{networkCall:{ip:s.ip,timezone:s.timezone}}),s}catch(s){w.warn("ApiClient.getRoomNodeLinkAndTitleV1 Failed to get ip details",{error:{name:s.name,message:s.message}});return}}async getICEServers(){const{success:e,iceServers:i}=(await this.requests.get("/iceservers")).data;if(e)return i}async getPlugins(e){var i,s,r,n,a,o,c;let{plugins:u}=(await this.requests.get("/v2/plugins/user")).data.data;const l=((s=(i=ee.getValue(ie.V1_PLUGINS))==null?void 0:i.toString())==null?void 0:s.split(","))||[],h=u.reduce((g,m)=>(g[l.includes(m.id)?"v1":"v2"].push(m),g),{v1:[],v2:[]});return e?u=h.v2:u=h.v1,(a=(n=(r=Ve.modules)==null?void 0:r.devTools)==null?void 0:n.plugins)!=null&&a.length&&((c=(o=Ve.modules)==null?void 0:o.devTools)==null||c.plugins.forEach(g=>{var m,f,_;const k={...iu,tags:[...iu.tags]};k.baseURL=`http://localhost:${g.port}`,k.name=g.name,k.picture=(m=g.picture)!=null?m:iu.picture,k.description=(f=g.description)!=null?f:iu.description,k.staggered=(_=g.staggered)!=null?_:iu.staggered,k.createdAt=new Date().toISOString(),k.updatedAt=new Date().toISOString(),k.id=g.id,k.organizationId=this.organizationId,u.push(k)})),u}async getPluginDetails(e){const{plugin:i}=(await this.requests.get(`/v2/plugins/view/${e}`)).data.data;return i}async getPluginConfig(e){return(await this.axios.get(`${e}/dyte-config.json`)).data}async authorizePlugin(e){const i={peerId:this.peerId};we.isV2AuthToken||(i.roomName=this.roomName);const{token:s}=(await this.requests.post(`/v2/plugins/authorize/${e}`,i)).data.data;return s}async getPresignedUrls(e,i){const s={roomUUID:this.roomUUID,filename:e};ee.hasFeature(ie.FEAT_CHAT_SDK)&&(s.viewType=i);const{getLocation:r,putLocation:n}=(await this.requests.post("/v1/meetings/genPreSignedUploadUrl",s)).data.data;return{getLocation:r,putLocation:n}}async uploadFile(e,i){if(navigator.isReactNative&&"uri"in e)try{await fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:{uri:e.uri,name:e.name}})}catch(s){w.error(`sendFileMessage::${s}`)}else await this.axios.put(i,e,{headers:{"Content-Type":e.type}})}}A3([S.trace("APIClient.getIPDetails")],vv.prototype,"getIPDetails",1);A3([S.trace("APIClient.getICEServers")],vv.prototype,"getICEServers",1);var wJ=Object.defineProperty,_J=Object.getOwnPropertyDescriptor,pa=(t,e,i,s)=>{for(var r=s>1?void 0:s?_J(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&wJ(e,i,r),r};class Sn extends vv{async startLivestreaming(){var e,i;return(i=(e=(await this.requests.post(`/v2/meetings/${we.meetingId}/livestreams`)).data)==null?void 0:e.data)==null?void 0:i.playback_url}async stopLivestreaming(){return this.requests.post(`/v2/meetings/${we.meetingId}/active-livestream/stop`)}async getActiveLivestream(){const{playbackUrl:e,status:i}=or((await this.requests.get(`/v2/meetings/${we.meetingId}/active-livestream`)).data.data);return{status:i,playbackUrl:e}}async getUserDetails(){const e=(await this.requests.get("v2/internals/participant-details")).data.data;return or(e)}getUserPreset(){throw new Error("getUserPreset does not exist for v2")}async startRecording(e){return(await this.requests.post("/v2/recordings",{...c3(e),meeting_id:we.meetingId})).data.id}stopRecording(e){return this.requests.put(`v2/recordings/${e}`,{action:"stop"})}async getActiveRecording(){const{status:e,id:i}=(await this.requests.get(`v2/recordings/active-recording/${we.meetingId}`)).data.data;return{status:e,id:i}}async getRoomNodeData({peerId:e}){const i=await this.getIPDetails({peerId:e});this.ipInfo=i;const{roomNodeLink:s,title:r,useHiveMedia:n}=or((await this.requests.post("v2/internals/rooms",{ip_information:i})).data.data);return{roomNodeUrl:s,meetingTitle:r,useHiveMedia:n!=null?n:!1}}}pa([S.trace("APIClient.startLivestreaming")],Sn.prototype,"startLivestreaming",1);pa([S.trace("APIClient.stopLivestreaming")],Sn.prototype,"stopLivestreaming",1);pa([S.trace("APIClient.getActiveLivestream")],Sn.prototype,"getActiveLivestream",1);pa([S.trace("APIClient.getUserDetails")],Sn.prototype,"getUserDetails",1);pa([S.trace("APIClient.getUserPreset")],Sn.prototype,"getUserPreset",1);pa([S.trace("APIClient.startRecording")],Sn.prototype,"startRecording",1);pa([S.trace("APIClient.stopRecording")],Sn.prototype,"stopRecording",1);pa([S.trace("APIClient.getActiveRecording")],Sn.prototype,"getActiveRecording",1);pa([S.trace("APIClient.getRoomNodeData")],Sn.prototype,"getRoomNodeData",1);var kJ=Object.defineProperty,SJ=Object.getOwnPropertyDescriptor,Dl=(t,e,i,s)=>{for(var r=s>1?void 0:s?SJ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&kJ(e,i,r),r};class Hc extends vv{startLivestreaming(){throw new Error("Method not implemented.")}stopLivestreaming(){throw new Error("Method not implemented.")}getActiveLivestream(){throw new Error("Method not implemented.")}async getUserDetails(){const{user:e}=(await this.requests.get("/auth/basicUserDetails")).data;return e}async getUserPreset(e){const{preset:i}=(await this.requests.post("/v1/userpreset",{roomName:e,authToken:this.authToken,clientType:"CLIENT_APP",version:"0.5.0"})).data.data;return or(i)}async startRecording(e){const i=await this.requests.post(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recording`,e);if(i.status!==201)throw new Error("Recording failed to start");return i.data.data.recording.id}async stopRecording(e){if((await this.requests.put(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/recordings/${e}`,{recordingAction:"stop"})).status!==201)throw new Error("Recording failed to stop")}async getActiveRecording(){return this.organizationId?(await this.requests.get(`/v1/organizations/${this.organizationId}/rooms/${this.roomName}/active-recording?limit=50`)).data.data.recording:{}}async getRoomNodeData({roomName:e,peerId:i}){const s=`
				query Session($roomName: String!, $password: String, $ipInformation: String) {
						session(roomName: $roomName, password: $password) {
							title,
							roomNodeLink(ipInformation: $ipInformation),
							useHiveMedia,
							roomName,
							password
						}
					}
				`,r=await this.getIPDetails({peerId:i});this.ipInfo=r;const{roomNodeLink:n,title:a,useHiveMedia:o}=(await this.requests.post("/graphql",{query:s,variables:{roomName:e,ipInformation:JSON.stringify(r)}})).data.data.session;return{roomNodeUrl:n,meetingTitle:a,useHiveMedia:o!=null?o:!1}}}Dl([S.trace("APIClientV1.getUserDetails")],Hc.prototype,"getUserDetails",1);Dl([S.trace("APIClientV1.getUserPreset")],Hc.prototype,"getUserPreset",1);Dl([S.trace("APIClientV1.startRecording")],Hc.prototype,"startRecording",1);Dl([S.trace("APIClientV1.stopRecording")],Hc.prototype,"stopRecording",1);Dl([S.trace("APIClientV1.getActiveRecording")],Hc.prototype,"getActiveRecording",1);Dl([S.trace("APIClientV1.getRoomNodeData")],Hc.prototype,"getRoomNodeData",1);let e1;function xJ(t){return e1=we.isV2AuthToken?new Sn(t):new Hc(t),e1}function _i(){return e1}const EJ=0,TJ=1,CJ=2,PJ=3,RJ=4,IJ={getPeerInfo:0,updatePeerInfo:1,getRoomPeersInfo:2,joinRoom:3,leaveRoom:4,getRoomInfo:5,updateRoomInfo:6,closeRoom:7,startedLivestream:8,stoppedLivestream:9,erroredLivestream:10,getStagePeers:11,getStageRequests:12,requestStageAccess:13,cancelStageRequest:14,grantStageAccess:15,denyStageAccess:16,roomPeerCount:17,joinStage:18,leaveStage:19,getConnectedRoomsDump:20,createConnectedRooms:21,deleteConnectedRooms:22,movePeers:23,transferPeer:24,movedPeer:25,connectedRoomsUpdated:26,connectedRoomsDeleted:27,getAllAddedParticipants:28,broadcastMessage:29,kick:30,kickAll:31,transcript:32,getWaitingRoomRequests:33,acceptWaitingRoomRequests:34,waitingRoomRequestAccepted:35,denyWaitingRoomRequests:36,waitingRoomRequestDenied:37},AJ={getMessages:0,sendMessageToRoom:1,sendMessageToPeers:2,editMessage:3,deleteMessage:4,getPaginatedMessages:5,sendMessageToChannel:6,searchChannelMessages:7,getAllChatChannels:8,markChannelIndexAsRead:9},DJ={getPlugins:0,addPlugin:1,enablePluginForRoom:2,disablePluginForPeers:3,enablePluginForPeers:4,disablePluginForRoom:5,removePlugin:6,customPluginEventToRoom:7,customPluginEventToPeers:8,storeInsertKeys:9,storeGetKeys:10,storeDeleteKeys:11,storeDelete:12},MJ={createPoll:0,getPolls:1,votePoll:2,updatePoll:3},OJ={unknown:0,createWebRTCTransport:1,produce:2,consume:3,toggleProducer:4,toggleConsumer:5,closeProducer:6,closeConsumer:7,joinRoom:16,leaveRoom:17,selectedPeer:18,globalPinPeer:19,selfJoinComplete:20,peerJoinedBroadcast:25,peerLeaveBroadcast:26,peerProducerCreateBroadcast:27,peerProducerToggleBroadcast:28,peerProducerCloseBroadcast:29,globalPeerPinBroadcast:30,recordingStartedBroadcast:31,recordingStoppedBroadcast:32,peerDisplayNameEditBroadcast:33,selectedPeerDiff:40,renegotiateSessionDescription:50,errorResponse:60,kickPeer:90,kickAll:91,changeDisplayName:92,hostControlPeer:93,hostControlAllPeers:94},LJ={createChatChannel:0,getChatChannel:1,deprecatedGetAllChatChannels:2,getChannelMembers:3,updateChatChannel:4};function uh(t,e){return Object.keys(e).reduce((i,s)=>(i[s]=(t<<16)+e[s],i),{})}function NJ(t){return Object.keys(t).reduce((e,i)=>(e[i]=16777216|t[i],e),{})}const ne=uh(EJ,IJ),ri=uh(TJ,AJ),pe=uh(CJ,DJ),$n=uh(PJ,MJ),cc=uh(RJ,LJ),$e=NJ(OJ);var t1;class D3{constructor(){v(this,"meetingTitle"),v(this,"roomName"),v(this,"roomUUID"),v(this,"isDisconnected"),v(this,"roomJoined"),R(this,t1,void 0),v(this,"peerId"),v(this,"authToken"),v(this,"maxPreferredStreams"),v(this,"mediaConnected")}get sfuHandler(){return p(this,t1)}reconnect(){throw new I("Method not implemented.")}async joinRoom(e,i,s,r,n={}){throw new I("Method not implemented.")}async leaveRoom(){throw new I("Method not implemented.")}async handleSocketCallbacks(e){throw new I("Method not implemented.")}async handleSockets(e,i){throw new I("Method not implemented.")}async shareMic(e){throw new I("Method not implemented.")}async shareWebcam(e){throw new I("Method not implemented.")}async shareScreen(e){throw new I("Method not implemented.")}async unmuteSelf(){throw new I("Method not implemented.")}async muteSelf(){throw new I("Method not implemented.")}async pauseWebcam(){throw new I("Method not implemented.")}async disableScreenShare(){throw new I("Method not implemented.")}async acceptWaitingRequest(e){throw new I("Method not implemented.")}async rejectWaitingRequest(e){throw new I("Method not implemented.")}async muteAll(e){throw new I("Method not implemented.")}async muteAllVideo(){throw new I("Method not implemented.")}async disableAudio(e){throw new I("Method not implemented.")}async disableVideo(e){throw new I("Method not implemented.")}async kickAll(){throw new I("Method not implemented.")}async kick(e){throw new I("Method not implemented.")}async pinPeer(e){throw new I("Method not implemented.")}async getChatMessages(){throw new I("Method not implemented.")}async requestRemoteControl(e){throw new I("Method not implemented.")}async acceptRemoteControl(e){throw new I("Method not implemented.")}async terminateRemoteControl(e,i){throw new I("Method not implemented.")}async sendEventRemoteControl(e,i,s){throw new I("Method not implemented.")}async getPolls(){throw new I("Method not implemented.")}async newPoll(e){throw new I("Method not implemented.")}async votePoll(e){throw new I("Method not implemented.")}async getPage(e){throw new I("Method not implemented.")}getConsumers(){throw new I("Method not implemented.")}async sendMessage(e){throw new I("Method not implemented.")}async getRoomState(){throw new I("Method not implemented.")}async addRoomPlugin(e){throw new I("Method not implemented.")}async removeRoomPlugin(e){throw new I("Method not implemented.")}async unpinChatMessage(e){throw new I("Method not implemented.")}async pinChatMessage(e){throw new I("Method not implemented.")}async sendChatMessage(e){throw new I("Method not implemented.")}async broadcastMessage(e,i){throw new I("Method not implemented.")}async acceptAllRequestToJoinStage(e){throw new I("Method not implemented.")}async grantStageAccess(e){throw new I("Method not implemented.")}async stopPresenting(){}async startPresenting(){}async requestToJoinStage(e){throw new I("Method not implemented.")}async rejectRequestToJoinStage(e){throw new I("Method not implemented.")}async denyStageAccess(e){throw new I("Method not implemented.")}async withdrawRequestToJoinStage(){throw new I("Method not implemented.")}async removePeerFromStage(e,i){throw new I("Method not implemented.")}async kickPeerFromStage(e){throw new I("Method not implemented.")}stopAllProducers(){throw new I("Method not implemented.")}}t1=new WeakMap;class UJ extends rs.EventEmitter{}var yr;const md=class{constructor(t){R(this,yr,void 0),P(this,yr,t)}static getLogger(t){return new md(t)}static format(t,...e){const i=t.split("%");let s=t;i.length&&([s]=i),e.reverse();for(let r=1;r<i.length&&e.length;r+=1){const n=e.pop();let a=i[r];switch(a.at(0)){case"s":a=a.replace("s",n);break;case"d":a=a.replace("d",n.toString());break;case"o":a=a.replace("o",JSON.stringify(n));break}s=`${s}${a}`}return e.length&&e.reverse().forEach(r=>{s=`${s} ${JSON.stringify(r)}`}),s}info(t,...e){let i=md.format(t,...e);p(this,yr)&&(i=`${p(this,yr)}::${i}`),w.info(i)}debug(t,...e){let i=md.format(t,...e);p(this,yr)&&(i=`${p(this,yr)}::${i}`),w.info(i)}warn(t,...e){let i=md.format(t,...e);p(this,yr)&&(i=`${p(this,yr)}::${i}`),w.info(i)}error(t,...e){let i=md.format(t,...e);p(this,yr)&&(i=`${p(this,yr)}::${i}`),w.error(i)}};let Wr=md;yr=new WeakMap;const iE=Wr.getLogger("EnhancedEventEmitter");class Mc extends rs.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(e,...i){const s=this.listenerCount(e);try{return this.emit(e,...i)}catch(r){return iE.error("safeEmit() | event listener threw an error [event:%s]:%o",e,r),Boolean(s)}}async safeEmitAsPromise(e,...i){const s={}.EVENT_PROMISE_TIMEOUT?parseInt({}.EVENT_PROMISE_TIMEOUT,10):1e4;return this.safeEmitAsPromiseWithTimeout(e,s,...i)}async safeEmitAsPromiseWithTimeout(e,i,...s){return new Promise((r,n)=>{setTimeout(n,i,"event request timeout");try{this.emit(e,...s,r,n)}catch(a){iE.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",e,a),n(a)}})}}class yv extends Mc{constructor(){super(),v(this,"_mapMidTransceiver",new Map),this._mapMidTransceiver=new Map}get midTransceiverMap(){return this._mapMidTransceiver}}const De=Wr.getLogger("Chrome74");class I_ extends yv{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new I_}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(De.debug("close()"),this._pc)try{this._pc.close()}catch(e){De.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:s,additionalSettings:r,proprietaryConstraints:n,onTrackHandler:a}){this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...r},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return De.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async s=>{De.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),e.close()}}}async updateIceServers(e){De.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(){De.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return De.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{De.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOption:s,screenShare:r}){var n;this._assertSendDirection(),De.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),De.debug("creating new transceiver");const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(e.kind);De.info("senders available params:",o);const c=[];if(s){const l=o.codecs.find(h=>h.mimeType.includes(s.name));if(s.parameters){De.info("codecOption.parameters:",s.parameters);const h=((n=l.sdpFmtpLine)==null?void 0:n.split(";"))||[];h.push(...s.parameters);const g=[...new Set(h).values()];l.sdpFmtpLine=g.join(";")}c.push(l)}De.info("selected codecs:",c),a.setCodecPreferences(c);const u=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(u),s&&s.name==="opus"&&(u.sdp=u.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),u.sdp+=`a=rtcp-fb:111 nack\r
`),{offerSdp:u,callback:async l=>(De.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(e){this._assertSendDirection(),De.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const s=await this._pc.createOffer();return De.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{De.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?De.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):De.debug("replaceTrack() [localId:%s, no track]",e);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),De.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await s.sender.setParameters(r)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),De.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((n,a)=>{r.encodings[a]={...n,...i}}),await s.sender.setParameters(r)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){throw this._assertRecvDirection(),De.debug("stopReceiving() [localId:%s]",e),Error("method not implemented")}async pauseReceiving(e){throw this._assertRecvDirection(),De.debug("pauseReceiving() [localId:%s]",e),Error("method not implemented")}async resumeReceiving(e){throw this._assertRecvDirection(),De.debug("resumeReceiving() [localId:%s]",e),Error("method not implemented")}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){De.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:De.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),De.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":De.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":De.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:De.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{De.info("icecandidateerror",e)}),this._pc.addEventListener("datachannel",e=>{De.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{De.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{De.warn("data channel closed: ",e.channel.label)},i.onerror=s=>{De.error("data channel error: ",e.channel.label,s)},i.onmessage=s=>{De.info("data channel message: ",e.channel.label,s),this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(s.data)))}})}}const ke=Wr.getLogger("Firefox60");class A_ extends yv{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new A_}get name(){return"Firefox60"}get pc(){return this._pc}close(){if(ke.debug("close()"),this._pc)try{this._pc.close()}catch(e){ke.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:s,additionalSettings:r,proprietaryConstraints:n,onTrackHandler:a}){ke.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...r},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return ke.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async s=>{ke.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),e.close()}}}async updateIceServers(e){throw ke.debug("updateIceServers()"),new Error("not supported")}async restartIce(){ke.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return ke.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{ke.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,screenShare:s}){this._assertSendDirection(),ke.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),ke.debug("creating new transceiver");const r=this._pc.addTransceiver(e,{direction:"sendonly",streams:[s?this._sendScreenShareStream:this._sendWebStream]});if(i){i.reverse();const a=r.sender.getParameters();a.encodings=i,await r.sender.setParameters(a)}const n=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(n),n.sdp=n.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:n,callback:async a=>(ke.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(r.mid,r),r.mid)}}async stopSending(e){this._assertSendDirection(),ke.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const s=await this._pc.createOffer();return ke.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{ke.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?ke.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ke.debug("replaceTrack() [localId:%s, no track]",e);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),ke.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters(),n=r.encodings.length-1-i;r.encodings.forEach((a,o)=>{o>=n?a.active=!0:a.active=!1}),await s.sender.setParameters(r)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),ke.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((n,a)=>{r.encodings[a]={...n,...i}}),await s.sender.setParameters(r)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){this._assertRecvDirection(),ke.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",ke.info("active transcievers: %o",this._pc.getTransceivers());const s=await this._pc.createOffer();return ke.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{ke.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),ke.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const s=await this._pc.createOffer();return ke.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{ke.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}}}async resumeReceiving(e){this._assertRecvDirection(),ke.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const s=await this._generateOffer();return ke.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",s),{offerSdp:s,callback:async r=>{ke.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){ke.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("datachannel",e=>{ke.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{ke.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{ke.warn("data channel closed: ",e.channel.label)},i.onerror=s=>{ke.error("data channel error: ",e.channel.label,s)},i.onmessage=async s=>{ke.debug("data channel message: ",e.channel.label,s);const r=await s.data.arrayBuffer();this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(r)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:ke.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),ke.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":ke.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":ke.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:ke.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{ke.info("chrome74::icecandidateerror",e)})}}const ve=Wr.getLogger("Safari12");class D_ extends yv{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new D_}get name(){return"Chrome74"}get pc(){return this._pc}close(){if(ve.debug("close()"),this._pc)try{this._pc.close()}catch(e){ve.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:s,additionalSettings:r,proprietaryConstraints:n,onTrackHandler:a}){ve.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...r},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return ve.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async s=>{ve.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),e.close()}}}async updateIceServers(e){ve.debug("updateIceServers()");const i=this._pc.getConfiguration();i.iceServers=e,this._pc.setConfiguration(i)}async restartIce(){ve.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return ve.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{ve.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,codecOption:s,screenShare:r}){var n;this._assertSendDirection(),ve.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),ve.debug("creating new transceiver");const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[r?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),o=RTCRtpSender.getCapabilities(e.kind);ve.info("senders available params:",o);const c=[];if(s){const l=o.codecs.find(h=>h.mimeType.includes(s.name));if(s.parameters){ve.info("codecOption.parameters:",s.parameters);const h=((n=l.sdpFmtpLine)==null?void 0:n.split(";"))||[];h.push(...s.parameters);const g=[...new Set(h).values()];l.sdpFmtpLine=g.join(";")}c.push(l)}ve.info("selected codecs:",c),a.setCodecPreferences(c);const u=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(u),u.sdp=u.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1;maxaveragebitrate=16000"),{offerSdp:u,callback:async l=>(ve.debug("send() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this.midTransceiverMap.set(a.mid,a),a.mid)}}async stopSending(e){this._assertSendDirection(),ve.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const s=await this._pc.createOffer();return ve.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{ve.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?ve.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):ve.debug("replaceTrack() [localId:%s, no track]",e);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),ve.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((n,a)=>{a<=i?n.active=!0:n.active=!1}),await s.sender.setParameters(r)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),ve.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((n,a)=>{r.encodings[a]={...n,...i}}),await s.sender.setParameters(r)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async receive(e){this._assertRecvDirection(),ve.debug("recieve() | calling pc.setLocalDescription() [answer:%o]",e);const i=this._pc.getTransceivers().at(-1);return ve.info("Transceiver is now receiving",i,this._pc.getTransceivers()),this.midTransceiverMap.set(i.mid,i),{track:i.receiver.track,localId:i.mid}}async stopReceiving(e){this._assertRecvDirection(),ve.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",ve.info("active transcievers: %o",this._pc.getTransceivers());const s=await this._pc.createOffer();return ve.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{ve.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),ve.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const s=await this._pc.createOffer();return ve.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{ve.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}}}async resumeReceiving(e){this._assertRecvDirection(),ve.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const s=await this._generateOffer();return ve.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",s),{offerSdp:s,callback:async r=>{ve.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){ve.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:ve.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),ve.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":ve.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":ve.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:ve.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{ve.info("chrome74::icecandidateerror",e)}),this._pc.ondatachannel=e=>{ve.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{ve.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{ve.warn("data channel closed: ",e.channel.label)},i.onerror=s=>{ve.error("data channel error: ",e.channel.label,s)},i.onmessage=async s=>{ve.debug("data channel message: ",e.channel.label,s);const r=String.fromCharCode(...new Uint8Array(s.data));this.safeEmit("datachannel",e.channel,r)}}}}class sl extends I{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,sl):this.stack=new Error(e).stack}}class ts extends I{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,ts):this.stack=new Error(e).stack}}const Zr=Wr.getLogger("Producer");class $J extends Mc{constructor({id:e,localId:i,track:s,stopTracks:r,disableTrackOnPause:n,zeroRtpOnPause:a,handler:o,appData:c}){super(),v(this,"_id"),v(this,"_localId"),v(this,"_closed",!1),v(this,"_handler"),v(this,"_track"),v(this,"_kind"),v(this,"_paused"),v(this,"_maxSpatialLayer"),v(this,"_stopTracks"),v(this,"_disableTrackOnPause"),v(this,"_zeroRtpOnPause"),v(this,"_appData"),v(this,"observer"),this._id=e,this._localId=i,this._track=s,this._kind=s.kind,this._paused=n?!s.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=r,this._disableTrackOnPause=n,this._zeroRtpOnPause=a,this._appData=c||{},this._onTrackEnded=this._onTrackEnded.bind(this),this._handler=o,this.observer=new Mc,this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get track(){return this._track}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}close(e){if(!this._closed){if(Zr.debug("close() with reason:",e),this._closed=!0,this._destroyTrack(),e===r1){this.observer.emit("close");return}this._handler.stopSending(this.localId).then(({offerSdp:i,callback:s})=>{this.safeEmit("close",i,s,e)}).finally(()=>{this.observer.emit("close")})}}async getStats(){if(this._closed)throw new ts("closed");return this._handler.getSenderStats(this.localId)}pause(){Zr.debug(`producer(${this.id}):pause()`),this._closed&&Zr.error("pause() | Producer closed"),this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,null),this.observer.emit("pause")}resume(){if(Zr.debug(`producer(${this.id}):resume()`),this._closed){Zr.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this._handler.replaceTrack(this.localId,this._track),this.observer.emit("resume")}async replaceTrack({track:e}){if(Zr.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(i){Zr.error(i)}throw new ts("closed")}else if(e&&e.readyState==="ended")throw new ts("track ended");if(e===this._track){Zr.debug("replaceTrack() | same track, ignored");return}(!this._zeroRtpOnPause||!this._paused)&&await this._handler.replaceTrack(this.localId,e),this._destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new ts("closed");if(this._kind!=="video")throw new sl("not a video Producer");if(typeof e!="number")throw new TypeError("invalid spatialLayer");await this._handler.setMaxSpatialLayer(this.localId,e),this._maxSpatialLayer=e}async setRtpEncodingParameters(e){if(this._closed)throw new ts("closed");if(typeof e!="object")throw new TypeError("invalid params");await this._handler.setRtpEncodingParameters(this.localId,e)}_onTrackEnded(){Zr.debug('track "ended" event'),this.observer.emit("trackended"),this.safeEmit("trackended",this.track.id)}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){Zr.error(e)}}}const dc=Wr.getLogger("Consumer");var Hg,Wg,qg,Dn,Gg,Jg,cn,fd,Kg,Qg,Yg,s0,i1,M3,s1,O3;class jJ extends Mc{constructor({id:e,localId:i,producerId:s,producingPeerId:r,handler:n,track:a,appData:o,paused:c,reuseTrack:u}){super(),R(this,Yg),R(this,i1),R(this,s1),v(this,"observer"),R(this,Hg,void 0),R(this,Wg,void 0),R(this,qg,void 0),R(this,Dn,void 0),R(this,Gg,void 0),R(this,Jg,void 0),R(this,cn,void 0),R(this,fd,void 0),R(this,Kg,void 0),R(this,Qg,void 0),P(this,Hg,e),P(this,Wg,i),P(this,Jg,n),P(this,Qg,o),P(this,Kg,r),P(this,Dn,!1),P(this,qg,s),P(this,cn,a),P(this,fd,c!=null?c:!1),P(this,Gg,u),this.observer=new Mc,Pe(this,i1,M3).call(this)}get id(){return p(this,Hg)}get peerId(){return p(this,Kg)}get localId(){return p(this,Wg)}get producerId(){return p(this,qg)}get closed(){return p(this,Dn)}get kind(){return p(this,cn).kind}get track(){return p(this,cn)}get paused(){return p(this,fd)}get remotelyPaused(){return this.paused}get appData(){return p(this,Qg)}close(e){p(this,Dn)||(dc.debug("close() with reason:",e),P(this,Dn,!0),p(this,Gg)||Pe(this,s1,O3).call(this),this.emit("close",e),this.observer.safeEmit("close",e))}async getStats(){if(p(this,Dn))throw new ts("closed");return p(this,Jg).getReceiverStats(this.localId)}pause(){if(dc.debug(`consumer(${this.id}):pause()`),p(this,Dn)){dc.error("pause() | Consumer closed");return}P(this,fd,!0),p(this,cn).enabled=!1,this.observer.safeEmit("pause")}resume(){if(dc.debug(`consumer(${this.id}):resume()`),p(this,Dn)){dc.error("resume() | Consumer closed");return}P(this,fd,!1),p(this,cn).enabled=!0,this.observer.safeEmit("resume")}}Hg=new WeakMap,Wg=new WeakMap,qg=new WeakMap,Dn=new WeakMap,Gg=new WeakMap,Jg=new WeakMap,cn=new WeakMap,fd=new WeakMap,Kg=new WeakMap,Qg=new WeakMap,Yg=new WeakSet,s0=function(){dc.debug('track "ended" event'),this.safeEmit("trackended"),this.observer.safeEmit("trackended")},i1=new WeakSet,M3=function(){p(this,cn).addEventListener("ended",Pe(this,Yg,s0))},s1=new WeakSet,O3=function(){try{p(this,cn).removeEventListener("ended",Pe(this,Yg,s0)),p(this,cn).stop()}catch(t){dc.error(t.toString())}};const sE=t=>new Promise(e=>setTimeout(e,t));async function fc(t,e){return new Promise(async(i,s)=>{const{strategy:r,maxRetryCount:n,delayTime:a}={strategy:"linear",maxRetryCount:3,delayTime:10,...e};let o=0,c,u=!1;const l=h=>{u=!0,s(h)};for(;o<n;){try{const h=await t(o,l);return i(h)}catch(h){if(c=h,u)break;if(o<n)r==="linear"?await sE(a*(o+1)):r==="exponential"&&await sE(a*(o+Math.max(0,o-1)));else break}o+=1}return s(c)})}function zJ(t,e){return typeof t>"u"?e:typeof window<"u"&&Object.getOwnPropertyDescriptor(window,"structuredClone")?structuredClone(t):JSON.parse(JSON.stringify(t))}const r1="transport closed",ii=Wr.getLogger("Transport");var Zg,rp,Qs,Wo,L3,vi,Aa,qo,vc,Go,Jo,vd,Xg,Ja,yc,lc,em,Da,Du,tm,n1,N3,a1,U3;class FJ extends Mc{constructor({id:e,direction:i,handlerFactory:s,iceServers:r,iceTransportPolicy:n,proprietaryConstraints:a,additionalSettings:o,appData:c}){super(),R(this,Du),R(this,n1),R(this,a1),v(this,"awaitQueue"),v(this,"observer"),R(this,Zg,void 0),R(this,rp,void 0),R(this,Qs,!1),R(this,Wo,void 0),R(this,L3,void 0),R(this,vi,void 0),R(this,Aa,"new"),R(this,qo,void 0),R(this,vc,void 0),R(this,Go,void 0),R(this,Jo,!1),R(this,vd,null),R(this,Xg,void 0),R(this,Ja,void 0),R(this,yc,void 0),R(this,lc,void 0),R(this,em,void 0),R(this,Da,new Map),ii.debug("constructor() [id: %s, direction: %s]",e,i),P(this,Zg,e),P(this,Wo,i);const u=zJ(o,{});delete u.iceServers,delete u.iceTransportPolicy,delete u.bundlePolicy,delete u.rtcpMuxPolicy,delete u.sdpSemantics,P(this,qo,new Map),P(this,vc,new Map),P(this,Go,new Map),P(this,Ja,new Map),P(this,lc,new Map),P(this,yc,new Map),this.awaitQueue=new Km,this.observer=new Mc,P(this,vi,s()),p(this,vi).init({onTrackHandler:this._ontrack.bind(this),direction:i,iceServers:r,iceTransportPolicy:n,additionalSettings:o,proprietaryConstraints:a}),P(this,em,c||{}),P(this,Xg,new Promise(l=>{this.observer.once("connected",()=>{l(!0)}),this.observer.once("disconnect",()=>{l(!1)}),this.observer.once("close",()=>{l(!1)})})),p(this,vi).on("@connectionstatechange",l=>{l!==p(this,Aa)&&(ii.debug("connection state changed to %s",l),P(this,Aa,l),l==="connected"&&(P(this,Jo,!0),this.observer.emit("connected")),l==="disconnected"&&(P(this,Jo,!1),this.observer.emit("disconnect")),(l==="failed"||l==="closed")&&(P(this,Jo,!1),this.observer.emit("close")),p(this,Qs)||this.safeEmit("connectionstatechange",l))}),p(this,vi).on("@icecandidate",({candidate:l})=>{p(this,Qs)||this.safeEmit("icecandidate",l)}),p(this,vi).on("dc_open",l=>{P(this,vd,!1),setTimeout(()=>{l==="events"&&!p(this,vd)&&this.safeEmit("dc_error",l)},5e3)}),p(this,vi).on("datachannel",(l,h)=>{var g,m;l.label==="events"&&P(this,vd,!0),p(this,Go).has(l.label)||p(this,Go).set(l.label,l);const f=JSON.parse(h);if(p(this,Da).has(f.id)||p(this,Da).set(f.id,[]),(g=p(this,Da).get(f.id))==null||g.push(f),((m=p(this,Da).get(f.id))==null?void 0:m.length)===f.count){const _=p(this,Da).get(f.id),k=_==null?void 0:_.reduce((y,b)=>y+b.chunk,"");p(this,Da).delete(f.id);try{const y=JSON.parse(k);this.safeEmit(`datachannel:${l.label}`,l,y)}catch(y){ii.error("error parsing message",y)}}})}get id(){return p(this,Zg)}get serverId(){return p(this,rp)}get connected(){return p(this,Jo)}get isConnected(){return p(this,Xg)}get datachannels(){return p(this,Go)}get eventsDCReady(){return p(this,vd)}get closed(){return p(this,Qs)}get direction(){return p(this,Wo)}get handler(){return p(this,vi)}get connectionState(){return p(this,Aa)}get appData(){return p(this,em)}setServerId(e){P(this,rp,e)}getDatachannel(e){return p(this,Go).get(e)}close(){p(this,Qs)||(ii.debug("close()"),P(this,Jo,!1),P(this,Qs,!0),p(this,vi).close(),Array.from(p(this,qo).values()).forEach(e=>{e.close(r1)}),p(this,qo).clear(),Array.from(p(this,vc).values()).forEach(e=>{e.close(r1)}),p(this,vc).clear(),p(this,lc).clear(),p(this,Ja).clear(),this.emit("close"),this.observer.emit("close"))}async getStats(){if(p(this,Qs))throw new ts("closed");return p(this,vi).getTransportStats()}async connect(){try{const{offerSdp:e,callback:i}=await p(this,vi).connect(),{answer:s}=await this.safeEmitAsPromise("connect",{offer:e});if(await i(s),!await this.isConnected)throw new Error("ice connection failed")}catch(e){throw ii.error("transport failed to connect:",e),e}}async restartIce(){if(ii.debug("restartIce()"),p(this,Qs))throw new ts("closed");return p(this,vi).restartIce()}async updateIceServers({iceServers:e}={}){if(ii.debug("updateIceServers()"),p(this,Qs))throw new ts("closed");return p(this,vi).updateIceServers(e)}async produce({track:e,encodings:i,codecOptions:s,stopTracks:r=!0,disableTrackOnPause:n=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(ii.debug(`produce() [track:${e.id}]`),e){if(p(this,Wo)!=="send")throw new sl("not a sending Transport");if(e.readyState==="ended")throw new ts("track ended");if(this.listenerCount("connect")===0&&p(this,Aa)==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(o&&typeof o!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing track");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const{producerId:c,localId:u}=await this.awaitQueue.push(async()=>{const{offerSdp:h,callback:g}=await p(this,vi).send({track:e,encodings:i,codecOption:s,screenShare:o==null?void 0:o.screenShare}),{answer:m,producerId:f}=await this.safeEmitAsPromise("produce",{offer:h,kind:e.kind,paused:n?!e.enabled:!1,appData:o}),_=await g(m);return{producerId:f,localId:_}},"produce"),l=new $J({id:c,localId:u,track:e,stopTracks:r,disableTrackOnPause:n,zeroRtpOnPause:a,appData:o,handler:this.handler});return p(this,qo).set(c,l),l.observer.on("close",()=>{p(this,qo).delete(l.id)}),this.emit("newproducer",l),this.observer.emit("newproducer",l),l}async consumePeer(e,i={}){if(ii.debug("consumePeer() producingPeerId:",e),p(this,Qs))throw new ts("closed");if(p(this,Wo)!=="recv")throw new sl("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing producingPeerId");if(this.listenerCount("connect")===0&&p(this,Aa)==="new")throw new TypeError('no "connect" listener set into this transport');if(i&&typeof i!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));const s=[],{consumersMap:r}=await this.safeEmitAsPromise("consumePeer",{producingPeerId:e});return r.forEach((n,a)=>{const{consumerId:o,trackId:c,screenShare:u,paused:l,streamId:h,kind:g}=n;s.push(fc(async m=>(m>0&&ii.warn("retrying consumer creation task:",o),Pe(this,Du,tm).call(this,{consumerId:o,trackId:c,streamId:h,kind:g,producerId:a,producingPeerId:e,paused:l,screenShare:u,appData:i}))))}),Promise.allSettled(s)}async consume({producerId:e,producingPeerId:i,appData:s={}}){if(ii.debug("consume()"),p(this,Qs))throw new ts("closed");if(p(this,Wo)!=="recv")throw new sl("not a receiving Transport");if(typeof e!="string")throw new TypeError("missing producerId");if(this.listenerCount("connect")===0&&p(this,Aa)==="new")throw new TypeError('no "connect" listener set into this transport');if(s&&typeof s!="object")throw new TypeError("if given, appData must be an object");if(!await this.isConnected)return Promise.reject(new Error("Transport not connected"));try{const{consumerId:r,screenShare:n,trackId:a,paused:o,streamId:c,kind:u}=await this.safeEmitAsPromise("consume",{producerId:e,producingPeerId:i});return await fc(async l=>(l>0&&ii.warn("retrying consumer creation task:",r),Pe(this,Du,tm).call(this,{consumerId:r,screenShare:n,trackId:a,streamId:c,kind:u,paused:o,producerId:e,producingPeerId:i,appData:s})))}catch(r){throw ii.error("consume failed:",r),r}}async setRemoteOffer(e){await Pe(this,n1,N3).call(this,e);const i=await p(this,vi).pc.createAnswer(),s=xe(i.sdp);return s.media=s.media.map(r=>{if(r.type==="audio"){const n={...r};return n.rtcpFb||(n.rtcpFb=[]),n.rtcpFb.some(a=>a.type==="nack")||n.rtcpFb.push({payload:parseInt(n.payloads,10),type:"nack"}),n}return r}),i.sdp=zr(s),await Pe(this,a1,U3).call(this,i),i}async retryFailedConsumerCreationTasks(e){return Promise.allSettled(e.map(async i=>fc(async s=>(s>0&&ii.warn("retrying failed consumer creation task",i),Pe(this,Du,tm).call(this,{...i})))))}_ontrack(e){const{track:i,transceiver:s,streams:r}=e;ii.info("track event received",{trackId:i.id,tId:s.receiver.track.id});const n=`${r[0].id}:${i.kind}`;i.addEventListener("ended",()=>{ii.info("rtc consumer track ended",i.id),p(this,lc).delete(i.id),p(this,yc).delete(n)}),p(this,lc).set(i.id,[i,s]);const a=p(this,Ja).get(n);a?(a(i,s),p(this,Ja).delete(n)):(ii.warn(`track event handler not found ${n}`),p(this,yc).set(n,e))}}Zg=new WeakMap,rp=new WeakMap,Qs=new WeakMap,Wo=new WeakMap,L3=new WeakMap,vi=new WeakMap,Aa=new WeakMap,qo=new WeakMap,vc=new WeakMap,Go=new WeakMap,Jo=new WeakMap,vd=new WeakMap,Xg=new WeakMap,Ja=new WeakMap,yc=new WeakMap,lc=new WeakMap,em=new WeakMap,Da=new WeakMap,Du=new WeakSet,tm=async function({consumerId:t,producerId:e,producingPeerId:i,streamId:s,trackId:r,paused:n,screenShare:a,appData:o,kind:c}){const u=`${s}:${c}`,l={consumerId:t,producerId:e,producingPeerId:i,streamId:s,trackId:r,appData:o,kind:c,paused:n,screenShare:a,name:"consumer creation task error",message:"consumer creation failed"};return new Promise((h,g)=>{const m=setTimeout(()=>{p(this,Ja).delete(u),l.isTimedout=!0,g(l)},5e3),f=(y,b)=>{try{if(y.readyState==="ended")clearTimeout(m),g(l);else{const x=y;x.enabled=!0,this.handler.midTransceiverMap.set(b.mid,b);const C=new jJ({id:t,localId:b.mid,track:x,paused:n,producerId:e,producingPeerId:i,handler:p(this,vi),reuseTrack:!0,appData:{...o,screenShare:a}});p(this,vc).set(t,C),C.once("close",()=>{p(this,vc).delete(C.id),this.handler.midTransceiverMap.delete(b.mid)}),ii.info("consumer created for ",{producerId:e,trackId:r,producingPeerId:i}),this.observer.emit("newconsumer",C),clearTimeout(m),h(C)}}catch(x){ii.warn("error while creating consumer:",x),clearTimeout(m),g(l)}},_=p(this,lc).get(t);if((_==null?void 0:_.length)===2){f(_[0],_[1]);return}const k=p(this,yc).get(u);k?(p(this,yc).delete(u),f(k.track,k.transceiver)):p(this,Ja).set(u,f)})},n1=new WeakSet,N3=async function(t){await p(this,vi).pc.setRemoteDescription(t)},a1=new WeakSet,U3=async function(t){ii.debug(`${this.direction}() {transportId: ${p(this,rp)}} | calling pc.setLocalDescription() [offer:%o]`,t),await p(this,vi).pc.setLocalDescription(t)};const Se=Wr.getLogger("Firefox110");class M_ extends yv{constructor(){super(),v(this,"_direction"),v(this,"_pc"),v(this,"_sendWebStream",new MediaStream),v(this,"_sendScreenShareStream",new MediaStream),v(this,"_transportReady",!1)}static createFactory(){return()=>new M_}get name(){return"Firefox110"}get pc(){return this._pc}close(){if(Se.debug("close()"),this._pc)try{this._pc.close()}catch(e){Se.error("pc.close()",e)}}init({direction:e,iceServers:i,iceTransportPolicy:s,additionalSettings:r,proprietaryConstraints:n,onTrackHandler:a}){Se.debug("init()"),this._direction=e,this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...r},n),a&&this._pc.addEventListener("track",o=>{a(o)}),this._addEventListeners()}async connect(){const e=this._pc.createDataChannel("dyte"),i=await this._pc.createOffer();return Se.info("connect offer",i),await this._pc.setLocalDescription(i),{offerSdp:i,callback:async s=>{Se.debug("connect() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),e.close()}}}async updateIceServers(e){throw Se.debug("updateIceServers()"),new Error("not supported")}async restartIce(){Se.debug("restartIce()");const e=await this.pc.createOffer({iceRestart:!0});return Se.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),{offerSdp:e,callback:async i=>{Se.info("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:i,screenShare:s}){this._assertSendDirection(),Se.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),Se.debug("creating new transceiver");const r=this._pc.addTransceiver(e,{direction:"sendonly",streams:[s?this._sendScreenShareStream:this._sendWebStream],sendEncodings:i}),n=await this._pc.createOffer();if(!this._transportReady)throw new Error("webrtc transport not connected");return await this._pc.setLocalDescription(n),n.sdp=n.sdp.replace("minptime=10;useinbandfec=1","minptime=10;useinbandfec=1;usedtx=1"),{offerSdp:n,callback:async a=>(Se.debug("send() | calling pc.setRemoteDescription() [answer:%o]",a),await this._pc.setRemoteDescription(a),this.midTransceiverMap.set(r.mid,r),r.mid)}}async stopSending(e){this._assertSendDirection(),Se.debug("stopSending() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),i.direction="inactive";const s=await this._pc.createOffer();return Se.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{Se.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async replaceTrack(e,i){this._assertSendDirection(),i?Se.debug("replaceTrack() [localId:%s, track.id:%s]",e,i.id):Se.debug("replaceTrack() [localId:%s, no track]",e);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(e,i){this._assertSendDirection(),Se.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters(),n=r.encodings.length-1-i;r.encodings.forEach((a,o)=>{o>=n?a.active=!0:a.active=!1}),await s.sender.setParameters(r)}async setRtpEncodingParameters(e,i){this._assertSendDirection(),Se.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,i);const s=this.midTransceiverMap.get(e);if(!s)throw new Error("associated RTCRtpTransceiver not found");const r=s.sender.getParameters();r.encodings.forEach((n,a)=>{r.encodings[a]={...n,...i}}),await s.sender.setParameters(r)}getSenderStats(e){this._assertSendDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async stopReceiving(e){this._assertRecvDirection(),Se.debug("stopReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",Se.info("active transcievers: %o",this._pc.getTransceivers());const s=await this._pc.createOffer();return Se.debug("stopRecieving() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{Se.debug("stopRecieving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r),this.midTransceiverMap.delete(e)}}}async pauseReceiving(e){this._assertRecvDirection(),Se.debug("pauseReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive";const s=await this._pc.createOffer();return Se.debug("pauseReceiving() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),{offerSdp:s,callback:async r=>{Se.debug("pauseReceiving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}}}async resumeReceiving(e){this._assertRecvDirection(),Se.debug("resumeReceiving() [localId:%s]",e);const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="recvonly";const s=await this._generateOffer();return Se.debug("resumeReceiving() | calling pc.setLocalDescription() [offer:%o]",s),{offerSdp:s,callback:async r=>{Se.debug("resumeReceiving() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}}}async getReceiverStats(e){this._assertRecvDirection();const i=this.midTransceiverMap.get(e);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}_assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}async _generateOffer(){const e=await this._pc.createOffer();return await this._pc.setLocalDescription(e),e}async _setAnswer(e){Se.debug("_setAnswer() | calling pc.setRemoteDescription() [answer:%o]",e),await this._pc.setRemoteDescription(e)}_addEventListeners(){this._pc.addEventListener("datachannel",e=>{Se.info("data channel created: ",e.channel.label);const{channel:i}=e;i.onopen=()=>{Se.info("data channel open: ",e.channel.label),this.safeEmit("dc_open",e.channel.label)},i.onclose=()=>{Se.warn("data channel closed: ",e.channel.label)},i.onerror=s=>{Se.error("data channel error: ",e.channel.label,s)},i.onmessage=async s=>{Se.debug("data channel message: ",e.channel.label,s);const r=await s.data.arrayBuffer();this.safeEmit("datachannel",e.channel,String.fromCharCode(...new Uint8Array(r)))}}),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected"),this._transportReady=!0;break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break;default:Se.warn("unknown state");break}}),this._pc.addEventListener("icecandidate",e=>{e.candidate&&this.emit("@icecandidate",{candidate:e.candidate})}),this._pc.addEventListener("negotiationneeded",()=>{this.emit("@negotiationneeded",{}),Se.debug("negotiationneeded")}),this._pc.addEventListener("icegatheringstatechange",()=>{switch(this._pc.iceGatheringState){case"gathering":Se.debug("icegatheringstatechange | gathering"),this.emit("@icegatheringstatechange","gathering");break;case"complete":Se.debug("icegatheringstatechange | complete"),this.emit("@icegatheringstatechange","complete");break;default:Se.warn("unknown state");break}}),this._pc.addEventListener("icecandidateerror",e=>{Se.info("chrome74::icecandidateerror",e)})}}const ln=Wr.getLogger("Device");function VJ(){if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(typeof RTCPeerConnection>"u"){ln.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection");return}return ln.debug("this._detectDevice() | ReactNative handler chosen"),"Chrome74"}if(typeof navigator=="object"&&typeof navigator.userAgent=="string"){const t=navigator.userAgent,e=Zw.getParser(t),i=e.getEngine();if(ln.debug("current browser info",e.getBrowser()),e.satisfies({chrome:">=74",chromium:">=74","microsoft edge":">=88"}))return"Chrome74";if(e.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(e.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(e.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(e.satisfies({firefox:">=110"}))return"Firefox110";if(e.satisfies({firefox:">=60"}))return"Firefox60";if(e.satisfies({ios:{OS:">=14.3",firefox:">=30.0"}})||e.satisfies({safari:">=12.0"})&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(e.satisfies({safari:">=11"}))return"Safari11";if(e.satisfies({"microsoft edge":">=11"})&&e.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(i.name&&i.name.toLowerCase()==="blink"){const s=t.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(s){const r=Number(s[1]);return r>=74?"Chrome74":r>=70?"Chrome70":r>=67?"Chrome67":"Chrome55"}return"Chrome74"}ln.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",e.getBrowserName(),e.getBrowserVersion());return}ln.warn("this._detectDevice() | unknown device")}class BJ{constructor({handlerName:e,handlerFactory:i}={}){if(v(this,"_handlerFactory"),v(this,"_handlerName"),v(this,"_observer"),ln.debug("constructor()"),e&&i)throw new TypeError("just one of handlerName or handlerInterface can be given");if(i)this._handlerFactory=i;else{if(e)ln.debug("constructor() | handler given: %s",e);else if(e=VJ(),e)ln.debug("constructor() | detected handler: %s",e);else throw new Error("device not supported");switch(e){case"Chrome74":this._handlerFactory=I_.createFactory();break;case"Safari12":this._handlerFactory=D_.createFactory();break;case"Firefox60":this._handlerFactory=A_.createFactory();break;case"Firefox110":this._handlerFactory=M_.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const s=this._handlerFactory();this._handlerName=s.name,s.close(),this._observer=new rs}get handlerName(){return this._handlerName}createSendTransport({iceServers:e,iceTransportPolicy:i,additionalSettings:s,proprietaryConstraints:r,appData:n}){return ln.debug("createSendTransport()"),this._createTransport({direction:"send",iceServers:e,iceTransportPolicy:i,additionalSettings:s,proprietaryConstraints:r,appData:n})}createRecvTransport({iceServers:e,iceTransportPolicy:i,additionalSettings:s,proprietaryConstraints:r,appData:n}){return ln.debug("createRecvTransport()"),this._createTransport({direction:"recv",iceServers:e,iceTransportPolicy:i,additionalSettings:s,proprietaryConstraints:r,appData:n})}_createTransport({direction:e,iceServers:i,iceTransportPolicy:s,additionalSettings:r,proprietaryConstraints:n,appData:a}){const o=th(),c=new FJ({id:o,direction:e,iceServers:i,iceTransportPolicy:s,additionalSettings:r,proprietaryConstraints:n,appData:a,handlerFactory:this._handlerFactory});return this._observer.emit("newtransport",c),c}}var Zi;class HJ{constructor(e){R(this,Zi,void 0),P(this,Zi,e)}async joinRoom(e,i){const s={roomUuid:e,displayName:i,prejoined:!1};return(await p(this,Zi).sendMessagePromise($e.joinRoom,KV.toBinary(s))).payload}async connectTransport(e){const i=(await p(this,Zi).sendMessagePromise($e.createWebRTCTransport,MV.toBinary(e))).payload,{transportId:s,description:r}=S3.fromBinary(i),n={sdp:r==null?void 0:r.sdp,type:r.type};return{transportId:s,answer:n}}async produce(e){var i,s;const r=(await p(this,Zi).sendMessagePromise($e.produce,rB.toBinary(e))).payload,n=HB.fromBinary(r);return{answer:{sdp:(i=n==null?void 0:n.description)==null?void 0:i.sdp,type:(s=n==null?void 0:n.description)==null?void 0:s.type},producerId:n.producerId}}async consume(e){const i=(await p(this,Zi).sendMessagePromise($e.consume,iB.toBinary(e))).payload,{consumerIdsMap:{map:s}}=VB.fromBinary(i);return s}async closeProducer(e){const i=(await p(this,Zi).sendMessagePromise($e.closeProducer,uB.toBinary(e))).payload,{description:s}=YB.fromBinary(i);return s}async closeConsumer(e){return(await p(this,Zi).sendMessagePromise($e.closeConsumer,hB.toBinary(e))).payload}async hostControlForPeer(e,i){const s={audio:i==="audio",screeShare:!1,video:i==="video",participantId:e},r=(await p(this,Zi).sendMessagePromise($e.hostControlPeer,_B.toBinary(s))).payload;if(!r)return!1;const{status:n}=nH.fromBinary(r);return n==="success"}async hostControlForAll(e){const i={audio:e==="audio",screenShare:!1,video:e==="video"},s=(await p(this,Zi).sendMessagePromise($e.hostControlAllPeers,SB.toBinary(i))).payload;if(!s)return!1;const{status:r}=oH.fromBinary(s);return r==="success"}async kickAll(){const e={},i=(await p(this,Zi).sendMessagePromise($e.kickAll,vB.toBinary(e))).payload;if(!i)return!1;const{status:s}=sH.fromBinary(i);return s==="success"}async kickPeer(e){const i=(await p(this,Zi).sendMessagePromise($e.kickPeer,mB.toBinary(e))).payload;if(!i)return!1;const{status:s}=tH.fromBinary(i);return s==="success"}async changeDisplayName(e){const i=(await p(this,Zi).sendMessagePromise($e.changeDisplayName,bB.toBinary(e))).payload;if(!i)return!1;const{status:s}=dH.fromBinary(i);return s==="success"}async notifySelfJoinComplete(){const e={},i=(await p(this,Zi).sendMessagePromise($e.selfJoinComplete,YV.toBinary(e))).payload;return UB.fromBinary(i)}}Zi=new WeakMap;class WJ extends UJ{constructor(e){super(),v(this,"_device"),v(this,"_sendTransport"),v(this,"_recvTransport"),v(this,"_consumers"),v(this,"_producers"),v(this,"_producerIdToConsumerIdMap"),v(this,"_logger"),v(this,"_socket"),v(this,"_socketHandler"),v(this,"_totalTransportReconnectionCount"),v(this,"_transportReconnectFailureCount"),v(this,"_consumerCreationFailureCount"),v(this,"_producerNotReadyFailureCount"),v(this,"_consumerNotBoundFailureCount"),v(this,"transportConnectionStatus"),this._device=new BJ,this._logger=Wr.getLogger("HiveSFUHandler"),this._socket=e,this._socketHandler=new HJ(e),this.reset()}get socket(){return this._socket}get producers(){return this._producers}get consumers(){return this._consumers}get producerIdToConsumerIdMap(){return this._producerIdToConsumerIdMap}get hiveSocketHandler(){return this._socketHandler}get sendTransport(){return this._sendTransport}get recvTransport(){return this._recvTransport}reset(){this._producers=new Map,this._consumers=new Map,this._producerIdToConsumerIdMap=new Map,this.transportConnectionStatus=new Map,this._transportReconnectFailureCount=0,this._consumerCreationFailureCount=0,this._totalTransportReconnectionCount=0,this._producerNotReadyFailureCount=0,this._consumerNotBoundFailureCount=0}async setupTransports(e,i){const s=await _i().getICEServers(),r=e.map(n=>{const a=this.transportConnectionStatus.get(n);if(a&&!i)return a;switch(n){case"send":{const o=this.createSendTransport({iceServers:s});return this.transportConnectionStatus.set(n,o),o}case"recv":{const o=this.createRecvTransport({iceServers:s});return this.transportConnectionStatus.set(n,o),o}default:return this._logger.warn(`what are you thinking when passing this ${n}?`),Promise.reject(Error("TYPE_OF_TRANSPORT_UNKNOWN"))}});return Promise.all(r).finally(()=>{e.forEach(n=>{this.transportConnectionStatus.delete(n)})})}async stopAllTransports(){var e,i,s,r;this._logger.info("closing all the transports"),(e=this._sendTransport)==null||e.close(),(i=this._sendTransport)==null||i.removeAllListeners(),(s=this._recvTransport)==null||s.close(),(r=this._recvTransport)==null||r.removeAllListeners(),this._sendTransport=void 0,this._recvTransport=void 0}async createSendTransport(e){if(this._sendTransport&&this._sendTransport.connected)return;this._logger.info("sendTransport::initializing_transport");const i=this._device.createSendTransport(e);this._logger.info("sendTransport::initialized_transport"),this.handleTransport(i,!1),this._logger.info("sendTransport::connecting_transport");try{await fc(async s=>{s>0&&this._logger.debug("retrying transport connect, count:",s);try{await i.connect()}catch(r){throw this._logger.error("fail to connect send transport:",i.id,"[Error]:",r),r}},{delayTime:100}),this._logger.info("sendTransport::connected_transport"),this._transportReconnectFailureCount=Math.max(0,this._transportReconnectFailureCount-1),this._producerNotReadyFailureCount=0,this._sendTransport=i,Z.onSafeInitialization(()=>{Z.configureSendTransport(i)}),Object.assign(window,{sendTransport:i})}catch(s){this._logger.error("failed to connect send transport after retry:",i.id,"[Error]:",s),i.close(),i.removeAllListeners(),this._transportReconnectFailureCount+=1,this.handleFailure()}}async createRecvTransport(e){if(this._recvTransport&&this._recvTransport.connected)return;this._logger.info("recvTransport::initializing_transport");const i=this._device.createRecvTransport({...e,additionalSettings:{rtcAudioJitterBufferMaxPackets:25,rtcAudioJitterBufferFastAccelerate:!0,rtcAudioJitterBufferMinDelayMs:20}});Z.onSafeInitialization(()=>{Z.configureRecvTransport(i)}),this._logger.info("recvTransport::initialized_transport"),this.handleTransport(i,!0),this._logger.info("recvTransport::connecting_transport");try{await fc(async s=>{s>0&&this._logger.debug("retrying transport connect, count:",s);try{await i.connect()}catch(r){throw this._logger.error("fail to connect recv transport:",i.id,"[Error]:",r),r}},{delayTime:100}),this._logger.info("recvTransport::connected_transport"),this._transportReconnectFailureCount=Math.max(0,this._transportReconnectFailureCount-1),this._consumerCreationFailureCount=0,this._consumerNotBoundFailureCount=0,this._recvTransport=i,this.producerIdToConsumerIdMap.clear()}catch(s){this._logger.error("failed to connect recv transport after retry:",i.id,"[Error]:",s),i.close(),i.removeAllListeners(),this._transportReconnectFailureCount+=1,this.handleFailure()}}handleTransport(e,i){if(e.on("connect",async({offer:s},r,n)=>{try{const a={consuming:i,description:{sdp:s.sdp,type:s.type,target:i?Ga.SUBSCRIBER:Ga.PUBLISHER}},{transportId:o,answer:c}=await this._socketHandler.connectTransport(a);e.setServerId(o),r({answer:c})}catch(a){this._logger.error(`${i?"consumer":"producer"} transport connection error:`,a),n(a)}}),e.on("connectionstatechange",async s=>{switch(this._logger.info(`${i?"consumer":"producer"} transport connectionState:`,s),s){case"failed":case"disconnected":if(e.closed)return;this._logger.info(`${i?"consumer":"producer"} transport disconnected or failed, reconnecting...`,"transport id:",e.id,"serverid:",e.serverId),ee.hasFeature(ie.ENABLE_HIVE_TRANSPORT_RECONNECTION_ON_ICE_FAILED)?(T.emit(E.HIVE_TRANSPORT_STATE_CHANGED,{state:"reconnecting",transportDirection:i?"recv":"send"}),this.emit("reconnect_transport",e)):T.emit(E.HIVE_TRANSPORT_STATE_CHANGED,{state:s,transportDirection:i?"recv":"send"});break;case"new":case"closed":break;default:T.emit(E.HIVE_TRANSPORT_STATE_CHANGED,{state:s,transportDirection:i?"recv":"send"});break}}),e.on("icecandidate",async s=>{this._logger.debug("sending icecandidate:",s.toJSON())}),e.on("datachannel:events",async(s,r)=>{this._logger.debug("got data channel message on event:",r);try{switch(r.type){case"offer":{this.negotiateOverDC(r.payload,s,e);break}case"handshake":{s.send(JSON.stringify({type:"handshake",payload:{message:"pong"}}));break}case"consumer_toggle":{this.handleConsumerToggle(r.payload);break}case"error":{this.handleErrorOverDC(r.payload);break}default:this._logger.warn("unknown event received from hive node, event:",r.type);break}}catch{this._logger.error("Unable to handle the incoming datachannel message on",s.label)}}),e.on("dc_error",()=>{e.direction==="recv"&&(this._logger.warn("events datachannel did not open in 5s"),this.handleFailure())}),e.on("negotiate",async({description:s},r,n)=>{try{const a={sdp:s==null?void 0:s.sdp,type:s==null?void 0:s.type},o=await this.negotiate(e,a);r({answer:o})}catch(a){this._logger.error("negotiate error:",a),n(a)}}),!i){e.on("produce",async({offer:s,kind:r,paused:n,appData:a},o,c)=>{var u;const l=xe(s.sdp).media.filter(g=>r==="video"?g.type==="video":g.type==="audio").at(-1).msid,h={description:{sdp:s.sdp,type:s.type,target:Ga.PUBLISHER},paused:n,kind:r,msid:l,screenShare:(u=a.screenShare)!=null?u:!1};try{const{answer:g,producerId:m}=await this._socketHandler.produce(h);o({answer:g,producerId:m})}catch(g){this._logger.error("create producer error:",g),c(g)}});return}e.on("datachannel:negotiation",async(s,r)=>{try{this._logger.info("datachannel message recieved:",s.label,r);const n={sdp:r,type:"offer"},a=await e.setRemoteOffer(n);this._logger.info("datachannel answer:",a),s.send(a.sdp)}catch(n){this._logger.error("datachannel:negotiation::Error:",n)}}),e.on("consumePeer",async({producingPeerId:s},r,n)=>{this._logger.info("consumePeer:",s);const a={producingPeerId:s};try{const o=await this._socketHandler.consume(a);this._logger.debug(`consumePeer response for ${s}:`,{consumerStateMap:o});const c=new Map;Object.entries(o).forEach(([u,l])=>{var h,g,m;c.set(u,{consumerId:l.consumerId,trackId:(h=l.producerTrack)==null?void 0:h.trackId,streamId:l.producerTrack.streamId,kind:l.producerState.kind===Ar.VIDEO?"video":"audio",screenShare:(g=l.producerState)==null?void 0:g.screenShare,paused:(m=l.producerState)==null?void 0:m.pause})}),r({consumersMap:c})}catch(o){this._logger.error("consumePeer error:",o),n(o)}}),e.on("consume",async({producerId:s,producingPeerId:r},n,a)=>{var o,c,u,l;const h={producingPeerId:r,producerId:s};try{const g=(await this._socketHandler.consume(h))[s];this._logger.info("consumer create response:",{consumerState:g,paused:(o=g.producerState)==null?void 0:o.pause}),n({consumerId:g.consumerId,screenShare:(c=g.producerState)==null?void 0:c.screenShare,trackId:(u=g.producerTrack)==null?void 0:u.trackId,streamId:g.producerTrack.streamId,kind:g.producerState.kind===Ar.VIDEO?"video":"audio",paused:(l=g.producerState)==null?void 0:l.pause})}catch(g){this._logger.error("error during consuming on server:",g),a(g)}})}async createProducer(e,i,s){if(this._sendTransport===void 0||this._sendTransport.closed)return;const r=await this._sendTransport.produce(i);r.on("close",async(n,a,o)=>{this._logger.info("producer id:",r.id,"closed with reason:",o);const c={producerId:r.id,description:{sdp:n.sdp,type:n.type,target:Ga.PUBLISHER}};try{const u=await this._socketHandler.closeProducer(c);this._logger.info("response",u);const l={sdp:u==null?void 0:u.sdp,type:u==null?void 0:u.type};a(l)}catch(u){this._logger.error("producer close error:",u)}this._producers.delete(e),s(),e===oe.SCREENSHARE_VIDEO&&this._switchWebcamLayers(3)}),r.on("trackended",()=>{w.info("producer::trackended",{producer:{id:r==null?void 0:r.id,kind:e,status:"UNKNOWN",appData:r==null?void 0:r.appData}}),[oe.MIC,oe.WEBCAM].includes(e)||s()}),this._producers.set(e,r),this._producers.has(oe.SCREENSHARE_VIDEO)&&this._switchWebcamLayers(0)}async _switchWebcamLayers(e){const i=this._producers.get(oe.WEBCAM);if(i)try{this._logger.debug("switching layer of webcam producer to:",e),await i.setMaxSpatialLayer(e)}catch(s){this._logger.error("failed to switch spatial layer",s)}}_initConsumer(e){e&&(e.observer.on("close",async i=>{this._logger.debug("consumer closed",i),this._consumers.delete(e.id),T.emit(E.CONSUMER_CLOSED,{id:e.id})}),this._consumers.set(e.id,e),this.producerIdToConsumerIdMap.set(e.producerId,e.id),T.emit(E.NEW_CONSUMER,{id:e.id}))}async consumePeer(e){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)throw Error("Receiving transport not connected");await fc(async i=>{i>0&&this._logger.debug("retrying consumePeer call, retryCount:",i);try{const s=await this._recvTransport.consumePeer(e),r=[];s.forEach(n=>{n.status==="rejected"?r.push(n.reason):this._initConsumer(n.value)}),this._recvTransport.retryFailedConsumerCreationTasks(r).then(n=>{n.forEach(a=>{a.status==="rejected"?(this._logger.error("consumer creation task is failing",a.reason),this._consumerCreationFailureCount+=1,setTimeout(this.handleFailure.bind(this),0)):this._initConsumer(a.value)})})}catch(s){throw this._logger.error("got error in consumePeer",s),s}}).catch(i=>{this._logger.error("consumePeer failed after retries",i),this._consumerCreationFailureCount+=1,this.handleFailure()})}async createConsumer(e){if(this._recvTransport===void 0||this._recvTransport.closed||!this._recvTransport.connected)return;const{producerId:i,producingPeerId:s,appData:r}=e;if(this.getProducer(i)){this._logger.warn("why are you creating a consumer for local producer?");return}await fc(async n=>{n>0&&this._logger.debug("retrying createConsumer call, retryCount:",n);const a=await this._recvTransport.consume({producerId:i,producingPeerId:s,appData:r});this._initConsumer(a)}).catch(n=>{this._logger.error("createConsumer failed after retries",n),this._consumerCreationFailureCount+=1,this.handleFailure()}),Object.assign(window,{consumers:this._consumers})}async pauseProducer(e){const i=this._producers.get(e);if(!i){this._logger.warn("producer type:",e,"not found");return}i.pause(),this._logger.info(e,"producer id:",i.id,"paused")}async resumeProducer(e){const i=this._producers.get(e);if(!i){this._logger.warn("producer type:",e,"not found");return}i.resume(),this._logger.info(e,"producer id:",i.id,"resumed")}async replaceTrack(e,i){const s=this._producers.get(e);if(!s){this._logger.warn("producer type:",e,"not found");return}await s.replaceTrack({track:i}),this._logger.info("track replaced with id:",i.id,"on producer:",e)}async removeProducer(e,i){const s=this._producers.get(e);if(!s){this._logger.warn("producer type:",e,"not found");return}i&&s.track.stop(),s.close()}async pauseConsumer(e){if(!this._consumers.get(e)){this._logger.warn("consumer id:",e,"not found");return}this.toggleConsumerOverDC(e,!0)}async pauseConsumerOverSocket(e){try{const i={consumerId:e.id,pause:!0};await this.socket.sendMessagePromise($e.toggleConsumer,Vx.toBinary(i)),e.pause(),T.emit(E.CONSUMER_PAUSED,{id:e.id}),this._logger.info("consumer:",e.id,"paused")}catch(i){this._logger.error("error on pausing consumer",i)}}async toggleConsumerOverDC(e,i){const s={type:"consumer_toggle",payload:{consumerId:e,mute:i}},r=this._recvTransport.getDatachannel("events");if(!r){this._logger.warn("events datachannel not found");return}r.send(JSON.stringify(s))}async resumeConsumer(e){const i=this._consumers.get(e);if(!i){this._logger.warn("consumer id:",e,"not found");return}if(!i.paused){this._logger.warn("consumer is not paused so not resuming",e);return}try{const s={consumerId:e,pause:!1};await this.socket.sendMessagePromise($e.toggleConsumer,Vx.toBinary(s)),i.resume(),T.emit(E.CONSUMER_RESUMED,{id:i.id}),this._logger.info("consumer:",e,"resumed")}catch(s){this._logger.error("error on resuming consumer",s)}}async closeConsumer(e,i){return this.closeConsumers([e],i)}async closeConsumers(e,i=!1){this._logger.info("Closing consumers:",e,"with force:",i);let s=!0;const r=e.filter(o=>this._consumers.get(o)?!0:(this._logger.warn("consumer id:",o,"not found"),!1)),n={consumerIds:r},a=async()=>{var o;return(o=this._recvTransport)==null?void 0:o.awaitQueue.push(async()=>{await this._socketHandler.closeConsumer(n)},"close_consumer").catch(c=>{this._logger.warn("error on closing consumer:",c),s=i})};i?a():await a(),s&&r.forEach(o=>{const c=this.consumers.get(o);this.producerIdToConsumerIdMap.delete(c.producerId),c.close(i?"force closed":void 0)})}async cleanupConsumers(e){const i=[];this._consumers.forEach(s=>{e?s.peerId===e&&i.push(s.id):i.push(s.id)}),this.closeConsumers(i,!0)}async stopAllProducers(){this._logger.info("stopping all available producers"),this._producers.forEach((e,i)=>{this._logger.debug("closing producer type",i),e.close()})}getProducer(e){return Array.from(this.producers.values()).filter(i=>i.id===e).at(0)}async negotiate(e,i){this._logger.info("setting remote offer :",i,"on transport",e.serverId);const s=await e.setRemoteOffer(i),r={transportId:e.serverId,description:{sdp:s.sdp,type:s.type,target:Ga.SUBSCRIBER}};return this._logger.info("sending renegotiate request",r),await this.socket.sendMessagePromise($e.renegotiateSessionDescription,NV.toBinary(r)),this._logger.info("renegotiation done",e.serverId),s}async negotiateOverDC(e,i,s){const r={sdp:e.sdp,type:"offer"};let n;try{const a=await s.setRemoteOffer(r);n={type:"answer",payload:{type:a.type,sdp:a.sdp}}}catch(a){this._logger.error("datachannel:events::Error:",a),n={type:"error",payload:{error:a.message}}}this._logger.debug("datachannel answer:",n),i.send(JSON.stringify(n))}handleConsumerToggle(e){const{mute:i,trackId:s}=e;this._logger.info("consumer toggled for",s,"muted:",i);const r=this.consumers.get(s);if(!r){this._logger.warn("consumer with id",s," not found");return}r.paused!==i&&(this._logger.debug("consumer state is not same",{consumerPaused:r.paused,mute:i}),i?(r.pause(),T.emit(E.CONSUMER_PAUSED,{id:r.id})):(r.resume(),T.emit(E.CONSUMER_RESUMED,{id:r.id})))}async handleErrorOverDC(e){this._logger.error("got error over dc:",e);const{type:i,error:s,id:r}=e;if(i==="consumer"){if(s==="bind-fail"){if(this._consumerNotBoundFailureCount>=2){this.handleFailure();return}this._consumerNotBoundFailureCount+=1;const n=this.consumers.get(r);if(!n)return;try{await this.closeConsumer(n.id),await this.createConsumer({producerId:n.producerId,producingPeerId:n.peerId,appData:n.appData})}catch(a){this._logger.error("failed to recreate consumer on downtrack bound failure, consumerID:",n.id,"producerId:",n.producerId,"error:",a)}}}else if(i==="producer"&&s==="ready-fail"){if(this._producerNotReadyFailureCount>=2){this.handleFailure();return}this._producerNotReadyFailureCount+=1;const[n]=Array.from(this.producers.entries()).find(a=>a[1].id===r);if(!n)return;await this.removeProducer(n).catch(a=>{this._logger.error("failed to remove ready-fail producer:",r,"error:",a)})}}async handleFailure(){var e;if(this._transportReconnectFailureCount>0||((e=this._recvTransport)==null?void 0:e.eventsDCReady)===!1||this._totalTransportReconnectionCount>3){this._logger.warn("transport failure detected"),ee.hasFeature(ie.ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY)&&(this._logger.debug("rejoining room"),this.emit("rejoin"));return}(this._consumerCreationFailureCount>0||this._consumerNotBoundFailureCount>=2)&&(this._logger.warn("consumer creation failure detected or consumer not bound failure increased"),ee.hasFeature(ie.ENABLE_HIVE_EXPERIMENTAL_FAIL_RECOVERY)&&(this._logger.debug("reconnecting recv transport"),this._totalTransportReconnectionCount+=1,this.emit("reconnect_transport",this._recvTransport))),this._producerNotReadyFailureCount>=2&&(this._logger.warn("producer receiver not getting added needs to reconnect send transport"),this._totalTransportReconnectionCount+=1,this.emit("reconnect_transport",this._sendTransport))}}var qJ=Object.defineProperty,GJ=Object.getOwnPropertyDescriptor,Le=(t,e,i,s)=>{for(var r=s>1?void 0:s?GJ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&qJ(e,i,r),r},Yt,We,rd,ba,rE;const $3=(rE=class extends D3{constructor(t){super(),R(this,Yt,void 0),R(this,We,void 0),R(this,rd,void 0),R(this,ba,void 0),v(this,"legacyMode"),v(this,"roomNodeUrl"),v(this,"peerDisplayName"),v(this,"activatedProducingPeerIds"),v(this,"logger"),v(this,"_totalRejoinCount"),v(this,"_transportQueue");const{roomName:e,peerId:i,authToken:s,legacyMode:r,socketClient:n,meetingTitle:a}=t;this.roomName=e,this.peerId=i,this.authToken=s,this.legacyMode=r,this.roomJoined=!1,this.mediaConnected=!1,this.meetingTitle=a,P(this,ba,!1),P(this,Yt,n),P(this,We,new WJ(n)),this.maxPreferredStreams=6,this.activatedProducingPeerIds=new Set,this.logger=Wr.getLogger("HiveNodeClient()"),this._totalRejoinCount=0,this._transportQueue=new Km,Z.legacySwitch(r),this.handleSocketEvents(),this.handleSFUEvents(),P(this,rd,()=>{this.logger.info("noop reconnection handler")})}static async init(t){const{legacyMode:e=!0,roomName:i,peerId:s,authToken:r,meetingTitle:n,socket:a}=t,o=new $3({legacyMode:e,authToken:r,socketClient:a,peerId:s,roomName:i,meetingTitle:n});return a.onStateEvent("disconnected",c=>{var u;o.isDisconnected=!0,(u=p(o,We))==null||u.cleanupConsumers(),o.mediaConnected=!1,T.emit(E.ROOM_NODE_DISCONNECTED,c),o.roomJoined=!1,o.activatedProducingPeerIds=new Set,w.info("HiveNodeClient::HIVE_NODE_DISCONNECTED")}),a.onStateEvent("reconnected",async()=>{var c,u;o.mediaConnected=!0,w.info("HiveNodeClient::HIVE_NODE_RECONNECTED"),await((c=p(o,We))==null?void 0:c.cleanupConsumers()),p(u=o,rd).call(u)}),a.onStateEvent("connected",async c=>{o.mediaConnected=!0,T.emit(E.ROOM_NODE_CONNECTED,{...c,wasDisconnected:o.isDisconnected}),o.isDisconnected=!1,w.info("HiveNodeClient::HIVE_NODE_CONNECTED")}),o}get sfuHandler(){return p(this,We)}set onSocketReconnection(t){P(this,rd,t)}async reset(){this.activatedProducingPeerIds.clear(),this._transportQueue.stop(),await this.sfuHandler.stopAllTransports(),this.sfuHandler.reset(),this._transportQueue=new Km}async reconnectTransport(t){if(this.logger.info("Room joining state",p(this,ba)),!(!t||p(this,ba))){if(t.close(),t.removeAllListeners(),t.direction==="send"){await this.sfuHandler.setupTransports(["send"]),this.logger.info("send transport reconected!"),T.emit(E.RESET_PRODUCER_STATE);return}this.sfuHandler.cleanupConsumers(),await this.sfuHandler.setupTransports(["recv"]),this.logger.info("recv transport reconnected!"),this.activatedProducingPeerIds=new Set,T.emit(E.REFRESH_GRID,!0)}}async setupTransports(t=!1){await p(this,We).setupTransports(["recv","send"],t)}async joinRoom(t,e,i,s,r={}){return P(this,ba,!0),this.reset(),this._transportQueue.push(()=>this._joinRoom(t,i,r),"joinRoom")}async _joinRoom(t,e,i={}){this.peerDisplayName=t;try{return await this.sfuHandler.hiveSocketHandler.joinRoom(e,t),await this.setupTransports(!0),ee.hasFeature(ie.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{var s;const r=await _i().getUserDetails(),n=we.isV2AuthToken?r.participant:r,a={userId:(s=n.id)!=null?s:n.participant.id,peerId:this.peerId,displayName:t,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Me.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:S_,sdkVersion:dh,metaData:{},permissions:{}};Z.roomJoined(a),i!=null&&i.audio?Z.audioOn():Z.audioOff(),i!=null&&i.video?Z.videoOn():Z.videoOff()}),{roomJoined:await this.completeJoinRoom()}}catch(s){return this.logger.error("error on sending join room request",s),{roomJoined:!1}}}async completeJoinRoom(){try{const{maxPreferredStreams:t,participants:e,roomState:i,selectedPeers:s}=await this.sfuHandler.hiveSocketHandler.notifySelfJoinComplete();this.logger.debug("peerJoinCompleteResponse",{participants:e,roomState:i,selectedPeers:s}),this.roomUUID=i.roomUuid,this.maxPreferredStreams=t!=null?t:6;const r=e.map(c=>{const u=c.producerStates,l={id:c.peerId,isHost:!1,displayName:c.displayName,flags:{},userId:c.userId,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};return u.forEach(h=>{h.kind===Ar.AUDIO?l.audioMuted=h.pause:l.videoEnabled=!h.pause,l.producers.push({producerId:h.producerId,kind:h.kind===Ar.AUDIO?"audio":"video",pause:h.pause,screenShare:h.screenShare})}),l}),{audioPeers:n,compulsoryPeers:a}=s!=null?s:{},o=r.filter(c=>c.id!==this.peerId);return P(this,ba,!1),this.roomJoined=!0,this.mediaConnected=!0,w.info("HiveNodeClient::joinRoom::pre_emitasync_room_joined"),await T.emitAsync(E.ROOM_JOINED,{peers:o}),i.isRecording&&T.emit(E.HIVE_RECORDING_STARTED,i.recorderParticipantId),w.info("HiveNodeClient::joinRoom::post_emitasync_room_joined"),T.emit(E.SELF_ROOM_JOINED),T.emit(E.SELECTED_PEERS,{peerIds:n!=null?n:[],compulsoryPeers:a}),T.emit(E.REFRESH_GRID,!0),!0}catch(t){return this.logger.error("error on completing join room:",t),!1}}async leaveRoom(){await p(this,We).stopAllTransports();const t={closeRoom:!1};p(this,Yt).sendMessagePromise($e.leaveRoom,XV.toBinary(t)).then(e=>{var i;(i=jB.fromBinary(e.payload))!=null&&i.closed||this.logger.warn("weird state on peer closed and should not happen")}).catch(e=>{this.logger.error("error on sending leave room request",e)}),Z.callEnded(),S.destruct()}getConsumers(){return p(this,We).consumers}async activatePeers(t){const e=t.map(({peerId:i,producers:s,force:r})=>{if(s.length===0)return Promise.resolve();if(r)return this.consumePeer(i,r);const n=[];return s.every(a=>{const o=this.sfuHandler.producerIdToConsumerIdMap.get(a.producerId);if(!o)return!1;const c=this.sfuHandler.consumers.get(o);return c&&!a.pause&&c.paused&&n.push(o),!0})?n.length>0?this.resumeConsumers(n):Promise.resolve():this.consumePeer(i)});await Promise.all(e)}async deactivatePeers(t){if(this.logger.info("deactivating producers",t),t.producers.some(e=>e.screenShare&&e.kind==="video")){this.logger.debug("peer is screensharing can't deactivate");return}t.producers.forEach(({producerId:e,kind:i})=>{if(i==="audio"){this.logger.debug("we don't want to deactive audio consumers");return}const s=this.sfuHandler.producerIdToConsumerIdMap.get(e);if(!s){this.logger.warn("consumer not found in deactivate producers:",e);return}this.sfuHandler.closeConsumer(s)}),this.activatedProducingPeerIds.delete(t.peerId)}async createConsumer({producerId:t,producingPeerId:e,screenShare:i}){return this.sfuHandler.createConsumer({producerId:t,producingPeerId:e,appData:{screenShare:i}})}async pauseConsumers(t){t.forEach(e=>{this.sfuHandler.pauseConsumer(e)})}async resumeConsumers(t){t.forEach(e=>{this.sfuHandler.resumeConsumer(e)})}async closeConsumers(t){const e=Array.from(this.getConsumers().values()).filter(i=>t.includes(i.peerId)).map(i=>i.id);return t.forEach(i=>{this.activatedProducingPeerIds.delete(i)}),this.sfuHandler.closeConsumers(e)}async consumePeer(t,e){if(this.logger.info("current activated Peer ids",Array.from(this.activatedProducingPeerIds.values()),"forced?:",e),!this.activatedProducingPeerIds.has(t)||e)try{await p(this,We).consumePeer(t),this.activatedProducingPeerIds.add(t)}catch(i){this.logger.error("consumePeer failed in HiveNodeClient.ts",i)}else this.logger.info("not creating consumer for this peerId",t)}async shareWebcam(t){if(t===void 0)return;if(p(this,We).producers.has(oe.WEBCAM)){const s=p(this,We).producers.get(oe.WEBCAM);if(!s.closed&&!navigator.isReactNative){await s.replaceTrack({track:t}),await this.resumeWebcam();return}await p(this,We).removeProducer(s.id)}const e={track:t,codecOptions:{name:"VP8"},appData:{screenShare:!1},stopTracks:!1};if(ee.hasFeature(ie.ENABLE_HIVE_SIMULCAST)){let s=t.getConstraints().width;s in Rx||(s=320),e.encodings=Rx[s]}const i=()=>{this.disableWebcam()};await p(this,We).createProducer(oe.WEBCAM,e,i)}async shareScreen(t){const{video:e,audio:i}=t;if(e===void 0)return;const s={track:e,codecOptions:{name:"VP8"},appData:{screenShare:!0,supportsRemoteControl:Me.isElectron()},stopTracks:!1};let r=()=>{this.disableScreenShare()};if(Z.screenShareRequested(),await p(this,We).createProducer(oe.SCREENSHARE_VIDEO,s,r),i){const n={track:i,codecOptions:{name:"opus"},appData:{screenShare:!0,supportsRemoteControl:Me.isElectron()},stopTracks:!1};r=()=>{},await p(this,We).createProducer(oe.SCREENSHARE_AUDIO,n,r)}}async shareMic(t){try{if(t===void 0)throw new ts("track undefined");if(p(this,We).producers.has(oe.MIC)){const s=p(this,We).producers.get(oe.MIC);if(!s.closed&&!navigator.isReactNative){await s.replaceTrack({track:t}),await this.resumeMic();return}await p(this,We).removeProducer(oe.MIC,!1)}const e={track:t,encodings:[{priority:"high"}],codecOptions:{name:"opus"},stopTracks:!1},i=()=>{this.disableMic()};await p(this,We).createProducer(oe.MIC,e,i)}catch(e){throw new I(e)}}pauseMic(){const t=p(this,We).producers.get(oe.MIC);if(!t){w.error("pauseMic::could_not_find_mic_producer");return}if(t.paused){w.info("pauseMic::mic_producer_already_paused");return}t.pause();const e={producerId:t.id,pause:!0};p(this,Yt).sendMessage($e.toggleProducer,Zh.toBinary(e))}async pauseWebcam(){const t=p(this,We).producers.get(oe.WEBCAM);if(!t){w.error("pauseWebcam::could_not_find_webcam_producer");return}t.pause();const e={producerId:t.id,pause:!0};p(this,Yt).sendMessage($e.toggleProducer,Zh.toBinary(e))}async resumeMic(){const t=p(this,We).producers.get(oe.MIC);if(!t){w.error("resumeMic::could_not_find_mic_producer");return}if(!t.pause){w.info("resumeMic::mic_producer_already_resumed");return}t.resume();const e={producerId:t.id,pause:!1};p(this,Yt).sendMessage($e.toggleProducer,Zh.toBinary(e))}async resumeWebcam(){const t=p(this,We).producers.get(oe.WEBCAM);if(!t){w.error("resumeWebcam::could_not_find_webcam_producer");return}t.resume();const e={producerId:t.id,pause:!1};p(this,Yt).sendMessage($e.toggleProducer,Zh.toBinary(e))}async disableWebcam(){await p(this,We).removeProducer(oe.WEBCAM)}async disableMic(){await p(this,We).removeProducer(oe.MIC)}async disableScreenShare(){w.info("screen_sharing_stopped"),await p(this,We).removeProducer(oe.SCREENSHARE_VIDEO),await p(this,We).removeProducer(oe.SCREENSHARE_AUDIO)}async muteSelf(){this.pauseMic()}async unmuteSelf(){await this.resumeMic()}async resetVideoProducers(t,e){t&&(await p(this,We).removeProducer(oe.WEBCAM,!1),this.shareWebcam(t)),e&&(await p(this,We).removeProducer(oe.SCREENSHARE_VIDEO,!1),this.shareScreen({video:e}))}async getPolls(){return{payload:{polls:{}}}}async changeDisplayName(t,e){const i={displayName:t,participantId:e!=null?e:this.peerId};if(!await this.sfuHandler.hiveSocketHandler.changeDisplayName(i))throw new Error("failed to change display name!")}async kick(t){const e={participantId:t};if(!await this.sfuHandler.hiveSocketHandler.kickPeer(e))throw new Error("failed to kickout the participant!")}async kickAll(){if(!await this.sfuHandler.hiveSocketHandler.kickAll())throw new Error("failed to kickout all participant!")}async muteAll(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("audio"))throw new Error("failed to mute all participant")}async muteAllVideo(){if(!await this.sfuHandler.hiveSocketHandler.hostControlForAll("video"))throw new Error("failed to mute all video participant")}async mutePeer(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(t,"audio"))throw new Error("failed to mute given participant")}async mutePeerVideo(t){if(!await this.sfuHandler.hiveSocketHandler.hostControlForPeer(t,"video"))throw new Error("failed to mute video of given participant")}async pinPeer(t){const e={participantId:t!=null?t:""};try{await p(this,Yt).sendMessagePromise($e.globalPinPeer,oB.toBinary(e))}catch(i){this.logger.error(`Error in pinning peer: ${i}`)}}async handleSocketEvents(){p(this,Yt).on($e.peerJoinedBroadcast,({id:t,payload:e})=>{if(this.roomJoined){this.logger.debug("got peer joined with id",t);try{const{participant:{peerId:i,displayName:s,producerStates:r,userId:n}}=uH.fromBinary(e);if(i===this.peerId)return;this.logger.info("peer-joined",{peerId:i,displayName:s,producerStates:r});const a={id:i,isHost:!1,displayName:s,flags:{},userId:n,audioMuted:!0,videoEnabled:!1,audioTrack:null,videoTrack:null,producers:[]};r.forEach(o=>{o.kind===Ar.AUDIO?a.audioMuted=o.pause:a.videoEnabled=!o.pause,a.producers.push({producerId:o.producerId,kind:o.kind===Ar.AUDIO?"audio":"video",pause:o.pause,screenShare:o.screenShare})}),T.emit(E.PEER_JOINED,a),T.emit(E.REFRESH_GRID)}catch(i){this.logger.error("error in peer-joined-broadcast",i)}}}),p(this,Yt).on($e.peerProducerCreateBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:i}=gH.fromBinary(t);if(e===this.peerId)return;this.logger.info("producer created broadcast:",e,"producer state",i),T.emit(E.NEW_PRODUCER,{peerId:e,producer:{producerId:i.producerId,kind:i.kind===Ar.AUDIO?"audio":"video",pause:i.pause,screenShare:i.screenShare}})}catch(e){this.logger.error("error in peer-producer-create-broadcast",e)}}),p(this,Yt).on($e.peerProducerToggleBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:{kind:i,pause:s,producerId:r}}=fH.fromBinary(t),n=i===Ar.AUDIO?"audio":"video";if(this.logger.info("producer toggle broadcast:",e,"producerId",r,"kind",n,"paused",s),e===this.peerId&&s){T.emit(n==="audio"?E.MUTE_ALL:E.MUTE_ALL_VIDEO);return}T.emit(E.PRODUCER_TOGGLE,{peerId:e,producerId:r,paused:s,kind:n}),[...this.getConsumers().values()].filter(a=>a.producerId===r).forEach(a=>{a.paused!==s&&(this.logger.debug("consumer state mismatched for",a.id,". updating consumer pause state",a.paused,"to",s),s?(a.pause(),T.emit(E.CONSUMER_PAUSED,{id:a.id})):(a.resume(),T.emit(E.CONSUMER_RESUMED,{id:a.id})))})}catch(e){this.logger.error("error in producer toggle broadcast handler",e)}}),p(this,Yt).on($e.selectedPeer,({payload:t})=>{if(this.roomJoined)try{const{audioPeers:e,compulsoryPeers:i}=T3.fromBinary(t);this.logger.info("selected peers:",e,i),T.emit(E.SELECTED_PEERS,{peerIds:i.concat(e)})}catch(e){this.logger.error("error in selected-peer",e)}}),p(this,Yt).on($e.selectedPeerDiff,({payload:t})=>{if(this.roomJoined)try{const{entries:e}=OB.fromBinary(t);this.logger.debug("selected peers diff:",e);const i=e.map(s=>({peerId:s.peerId,priority:s.priority}));T.emit(E.SELECTED_PEERS_DIFF,{entries:i})}catch(e){this.logger.error("error in selected-peer-diff",e)}}),p(this,Yt).on($e.peerLeaveBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e}=wH.fromBinary(t);if(e===this.peerId){this.logger.warn("peer got kicked out of the room"),T.emit(E.KICKED);return}this.logger.info("peer left broadcast:",e),this.sfuHandler.cleanupConsumers(e),T.emit(E.PEER_CLOSED,{id:e})}catch(e){this.logger.error("error in peer left broadcast",e)}}),p(this,Yt).on($e.peerProducerCloseBroadcast,({payload:t})=>{if(this.roomJoined)try{const{participantId:e,producerState:{producerId:i}}=yH.fromBinary(t);if(e===this.peerId)return;this.logger.info("producer closed broadcast:",e),T.emit(E.PRODUCER_CLOSED,{peerId:e,producerId:i});const s=this.sfuHandler.producerIdToConsumerIdMap.get(i);if(!s){this.logger.warn("no consumer found for producer",i);return}this.logger.info("closing consumer",s,"producer id ",i),this.sfuHandler.closeConsumer(s).then(()=>{this.logger.info("closed consumer",s),this.sfuHandler.producerIdToConsumerIdMap.delete(i),T.emit(E.CONSUMER_CLOSED,{id:s})}).catch(r=>{this.logger.error("error closing consumer",r)})}catch(e){this.logger.error("error on producer close broadcast",e)}}),p(this,Yt).on($e.globalPeerPinBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=kH.fromBinary(t);this.logger.info("pinning peerId: ",i),e=i.participantId}T.emit(E.PEER_PINNED,{peerId:e})}catch(e){this.logger.error("error on global peer pin broadcast",e)}}),p(this,Yt).on($e.recordingStartedBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=xH.fromBinary(t);this.logger.info("recording started. peerId: ",i),e=i.participantId}T.emit(E.HIVE_RECORDING_STARTED,e)}catch(e){this.logger.error("error on recording started broadcast",e)}}),p(this,Yt).on($e.recordingStoppedBroadcast,({payload:t})=>{if(this.roomJoined)try{let e;if(t){const i=TH.fromBinary(t);this.logger.info("recording stopped. peerId: ",i),e=i.participantId}T.emit(E.HIVE_RECORDING_STOPPED,e)}catch(e){this.logger.error("error on recording started broadcast",e)}}),p(this,Yt).on($e.peerDisplayNameEditBroadcast,({payload:t})=>{if(this.roomJoined)try{const e=PH.fromBinary(t);this.logger.debug("peer display name changed to:",e.displayName),T.emit(E.PEER_DISPLAY_NAME_CHANGED,e.participantId)}catch(e){this.logger.error("failed to handle peerDisplayNameEditBroadcast:",e)}})}handleSFUEvents(){p(this,We).on("reconnect_transport",async t=>{try{T.emit(E.HIVE_TRANPSORT_RECONNECTING),await this._transportQueue.push(this.reconnectTransport.bind(this,t),"reconnect_transport"),this.logger.info("transport reconnected [id:%s]",t.id)}catch(e){this.logger.error("error on reconnection transports",e)}}),p(this,We).on("rejoin",()=>{if(this._totalRejoinCount>1){this.logger.warn("cannot rejoin more already rejoined 3 times");return}if(p(this,ba)){this.logger.warn("room joining in progress, cannot start rejoining");return}this._totalRejoinCount+=1,this.logger.warn("rejoining the room because transports are failing",{rejoinCount:this._totalRejoinCount}),T.emit(E.HIVE_ROOM_REJOINING),p(this,rd).call(this)})}},Yt=new WeakMap,We=new WeakMap,rd=new WeakMap,ba=new WeakMap,rE);let ye=$3;Le([S.trace("HiveNodeClient.reset")],ye.prototype,"reset",1);Le([S.trace("HiveNodeClient.reconnect")],ye.prototype,"reconnectTransport",1);Le([S.trace("HiveNodeClient.setupTransport")],ye.prototype,"setupTransports",1);Le([S.trace("HiveNodeClient.joinRoom")],ye.prototype,"joinRoom",1);Le([S.trace("HiveNodeClient.completeJoinRoom")],ye.prototype,"completeJoinRoom",1);Le([S.trace("HiveNodeClient.leaveRoom")],ye.prototype,"leaveRoom",1);Le([S.trace("HiveNodeClient.activatePeers")],ye.prototype,"activatePeers",1);Le([S.trace("HiveNodeClient.deactivatePeers")],ye.prototype,"deactivatePeers",1);Le([S.trace("HiveNodeClient.createConsumer")],ye.prototype,"createConsumer",1);Le([S.trace("HiveNodeClient.pauseConsumers")],ye.prototype,"pauseConsumers",1);Le([S.trace("HiveNodeClient.resumeConsumers")],ye.prototype,"resumeConsumers",1);Le([S.trace("HiveNodeClient.closeConsumers")],ye.prototype,"closeConsumers",1);Le([S.trace("HiveNodeClient.consumePeer")],ye.prototype,"consumePeer",1);Le([S.trace("HiveNodeClient.shareWebcam")],ye.prototype,"shareWebcam",1);Le([S.trace("HiveNodeClient.shareScreen")],ye.prototype,"shareScreen",1);Le([S.trace("HiveNodeClient.shareMic")],ye.prototype,"shareMic",1);Le([S.trace("HiveNodeClient.pauseMic")],ye.prototype,"pauseMic",1);Le([S.trace("HiveNodeClient.pauseWebcam")],ye.prototype,"pauseWebcam",1);Le([S.trace("HiveNodeClient.resumeMic")],ye.prototype,"resumeMic",1);Le([S.trace("HiveNodeClient.resumeWebcam")],ye.prototype,"resumeWebcam",1);Le([S.trace("HiveNodeClient.disableWebcam")],ye.prototype,"disableWebcam",1);Le([S.trace("HiveClient.disableMic")],ye.prototype,"disableMic",1);Le([S.trace("HiveClient.disableScreenShare")],ye.prototype,"disableScreenShare",1);Le([S.trace("HiveNodeClient.muteSelf")],ye.prototype,"muteSelf",1);Le([S.trace("HiveNodeClient.unmuteSelf")],ye.prototype,"unmuteSelf",1);Le([S.trace("HiveNodeClient.resetVideoProducers")],ye.prototype,"resetVideoProducers",1);Le([S.trace("HiveNodeClient.getPolls")],ye.prototype,"getPolls",1);Le([S.trace("HiveNodeClient.changeDisplayName")],ye.prototype,"changeDisplayName",1);Le([S.trace("HiveNodeClient.kickPeer")],ye.prototype,"kick",1);Le([S.trace("HiveNodeClient.kickAllPeers")],ye.prototype,"kickAll",1);Le([S.trace("HiveNodeClient.muteAll")],ye.prototype,"muteAll",1);Le([S.trace("HiveNodeClient.muteAllVideo")],ye.prototype,"muteAllVideo",1);Le([S.trace("HiveNodeClient.mute")],ye.prototype,"mutePeer",1);Le([S.trace("HiveNodeClient.muteVideo")],ye.prototype,"mutePeerVideo",1);Le([S.trace("HiveNodeClient.pinPeer")],ye.prototype,"pinPeer",1);Le([S.trace("HiveNodeClient.init")],ye,"init",1);var un=(t=>(t.SOCKET_CONNECTED="SOCKET_CONNECTED",t.SOCKET_DISCONNECTED="SOCKET_DISCONNECTED",t.SOCKET_CONNECTION_ERROR="SOCKET_CONNECTION_ERROR",t.SOCKET_MESSAGE="SOCKET_MESSAGE",t))(un||{}),Mu=(t=>(t[t.NOT_STARTED=0]="NOT_STARTED",t[t.CONNECTED=1]="CONNECTED",t[t.DISCONNECTED=2]="DISCONNECTED",t[t.ERRORED=3]="ERRORED",t))(Mu||{}),JJ=Object.defineProperty,KJ=Object.getOwnPropertyDescriptor,bv=(t,e,i,s)=>{for(var r=s>1?void 0:s?KJ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&JJ(e,i,r),r};const QJ="event://server-simple-message",YJ="event://send-message";class ph extends rs{constructor(e){super(),v(this,"socket"),v(this,"socketState"),v(this,"callbackHandler",null),this.socketState=Mu.NOT_STARTED,e.callbackHandler&&(this.callbackHandler=e.callbackHandler)}connect(e){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect()),this.socket=$g(e,{closeOnBeforeunload:!1}),this.setupSocket()}disconnect(){this.socket.disconnect()}reconnect(){this.socket.connect()}setupSocket(){this.socket.on("disconnect",e=>{this.socketState=Mu.DISCONNECTED,w.warn("SocketClient::socket_disconnected",{error:{reason:e}}),this.emit(un.SOCKET_DISCONNECTED,{reason:e})}),this.socket.on("connect_error",e=>{this.socketState=Mu.ERRORED,ee.hasFeature(ie.SOCKET_POLLING)&&(this.socket.io.opts.transports=["polling","websocket"]),w.error("SocketClient::socket_connection_errored",{error:e}),this.emit(un.SOCKET_CONNECTION_ERROR,{err:e})}),this.socket.on("connect",()=>{this.socketState=Mu.CONNECTED,w.info("SocketClient::socket_connected"),this.emit(un.SOCKET_CONNECTED)}),this.socket.on(QJ,async(e,i)=>{const s=JSON.parse(e);if((!S.logExclusionList.includes(s==null?void 0:s.type)||ee.hasFeature(ie.BYPASS_LOG_EXCLUSION_LIST))&&w.info(`SocketClient::SIMPLE_SERVER_MESSAGE_EVENT::${s==null?void 0:s.type}`),i){let r="OK";this.callbackHandler&&(r=await this.callbackHandler(s)),i(r)}else this.emit(un.SOCKET_MESSAGE,s);Object.values(E).find(r=>r===s.type)&&T.emit(s.type,s.payload)})}async sendMessage(e){return(!S.logExclusionList.includes(e==null?void 0:e.type)||ee.hasFeature(ie.BYPASS_LOG_EXCLUSION_LIST))&&w.info(`SocketClient::sendMessage::${e==null?void 0:e.type}`),Object.assign(e,{metadata:e.metadata||{}}),S.injectContext(e.metadata),new Promise(i=>{this.socket.emit(YJ,JSON.stringify(e),s=>{if(!s){i(void 0);return}const r=JSON.parse(s);i(r)})})}}bv([S.trace("SocketClient.connect")],ph.prototype,"connect",1);bv([S.trace("SocketClient.disconnect")],ph.prototype,"disconnect",1);bv([S.trace("SocketClient.reconnect")],ph.prototype,"reconnect",1);bv([S.trace("SocketClient.setupSocket")],ph.prototype,"setupSocket",1);var o1,j3,c1,z3,ig,r0;const d1=class{constructor(t=1e3){R(this,o1),R(this,c1),v(this,"sendTransport"),v(this,"recvTransport"),v(this,"collectStpStats"),v(this,"collectRtpStats"),v(this,"pingInterval"),this.pingInterval=t}initSendTransport(t){this.sendTransport=t,T.emit(E.SEND_TRANSPORT_CREATED)}initRecvTransport(t){this.recvTransport=t,T.emit(E.RECV_TRANSPORT_CREATED)}collectSendTransportStats(){return!this.sendTransport||this.collectStpStats?!1:(this.collectStpStats=setInterval(Pe(this,o1,j3).bind(this),this.pingInterval),!0)}collectRecvTransportStats(){return!this.recvTransport||this.collectRtpStats?!1:(this.collectRtpStats=setInterval(Pe(this,c1,z3).bind(this),this.pingInterval),!0)}stopStatsCollection(t){return t==="send"?(clearInterval(this.collectStpStats),this.collectStpStats=void 0,!0):t==="receive"?(clearInterval(this.collectRtpStats),this.collectRtpStats=void 0,!0):!1}cleanup(t){this.stopStatsCollection(t),t==="send"?(this.sendTransport=void 0,this.collectStpStats=void 0,T.emit(E.SEND_TRANSPORT_CLOSED)):(this.recvTransport=void 0,this.collectRtpStats=void 0,T.emit(E.RECV_TRANSPORT_CLOSED))}};let F3=d1;o1=new WeakSet,j3=function(){this.sendTransport||this.stopStatsCollection("send"),this.sendTransport.getStats().then(t=>{var e;return Pe(e=d1,ig,r0).call(e,t,"send")})},c1=new WeakSet,z3=function(){this.recvTransport||this.stopStatsCollection("receive"),this.recvTransport.getStats().then(t=>{var e;return Pe(e=d1,ig,r0).call(e,t,"receive")})},ig=new WeakSet,r0=function(t,e){t.forEach(i=>{i.type==="candidate-pair"&&T.emit(E.CANDIDATE_PEER_UPDATE,{...i,transport:e}),i.type==="inbound-rtp"&&T.emit(E.INBOUND_RTP_UPDATE,{...i,transport:e}),i.type==="outbound-rtp"&&T.emit(E.OUTBOUND_RTP_UPDATE,{...i,transport:e})})},R(F3,ig);const eo=new F3;var ZJ=Object.defineProperty,XJ=Object.getOwnPropertyDescriptor,Ss=(t,e,i,s)=>{for(var r=s>1?void 0:s?XJ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&ZJ(e,i,r),r};class os extends rs{constructor(e,i){super(),v(this,"device"),v(this,"sendTransport"),v(this,"recvTransport"),v(this,"sendTransportIceStateDisconnectTime"),v(this,"recvTransportIceStateDisconnectTime"),v(this,"producerCreationStatus"),v(this,"consumers"),v(this,"producers"),v(this,"socketClient"),v(this,"iceRestartInProgress"),this.producers=new Map,this.consumers=new Map,this.producerCreationStatus=new Map,this.iceRestartInProgress={sendTransport:!1,recvTransport:!1},i!==void 0?this.device=i:this.device=new XR,this.socketClient=e}async setupTransports(){const e=await _i().getICEServers();await this.loadRouter(),await Promise.all([this.createRecvTransport(e),this.createSendTransport(e)])}async loadRouter(){(this.recvTransport||this.sendTransport)&&await this.stopAllTransports()}getRTPCapabilities(){return this.device.rtpCapabilities}async createRecvTransport(e){if(!this.socketClient)return;const i={forceTcp:!1,producing:!1,consuming:!0},s=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(w.info("recvTransport::initializing_transport"),this.recvTransport=this.device.createRecvTransport({...s,iceServers:e,proprietaryConstraints:Px}),eo.initRecvTransport(this.recvTransport),w.info("recvTransport::initialized_transport"),Z.onSafeInitialization(()=>{Z.configureRecvTransport(this.recvTransport)}),this.recvTransport.on("connect",async({dtlsParameters:r},n,a)=>{var o,c,u,l;const h=await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:this.recvTransport.id,dtlsParameters:r}});(o=h.payload)!=null&&o.error?(w.error("recvTransport::transport_status",{error:(u=h.payload)==null?void 0:u.error,transport:{id:(l=this==null?void 0:this.recvTransport)==null?void 0:l.id,status:"failed",type:"recv"}}),a(new Error("failed"))):(n(),w.info("recvTransport::transport_status",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"connected",type:"recv"}}))}),ee.hasFeature(ie.ENABLE_ICE_STATE_LOGGING)){w.info("enabling_ice_state_logging_for_recv_transport");let r;this.recvTransport.on("connectionstatechange",async n=>{var a,o,c,u,l,h,g,m;switch(w.info("recvTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.recvTransport)==null?void 0:a.id,status:n,type:"recv"}}),n){case"failed":if(T.emit(E.ICE_FAILED,{transport:"recv"}),w.warn("recvTransport::ice_state_failed"),ee.hasFeature(ie.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.recvTransport)}catch(f){w.error("recvTransport::ice_restart_failed",{error:f,transport:{id:(o=this==null?void 0:this.recvTransport)==null?void 0:o.id,status:"failed",type:"recv"}})}break;case"disconnected":T.emit(E.ICE_DISCONNECTED,{transport:"recv"}),w.warn("recvTransport::ice_state_disconnected"),this.recvTransportIceStateDisconnectTime&&w.warn("recvTransport::ice_state_disconnected_again",{transport:{id:(c=this==null?void 0:this.recvTransport)==null?void 0:c.id,status:"disconnected",type:"recv",lastDisconnectedTime:(u=this.recvTransportIceStateDisconnectTime)==null?void 0:u.toISOString(),lastDisconnectedTimeOffset:(l=this.recvTransportIceStateDisconnectTime)==null?void 0:l.getTimezoneOffset(),durationPassed:new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime()}}),this.recvTransportIceStateDisconnectTime=new Date;try{r=ee.getValue(ie.ICE_RESTART_ON_DISCONNECTED_STATE),typeof r!="number"&&(r=void 0)}catch{r=void 0}r&&setTimeout(async()=>{var f,_,k,y,b;if(this.recvTransportIceStateDisconnectTime!==void 0){T.emit(E.ICE_RECONNECTING,{transport:"recv"}),w.info("recvTransport::attempting_ice_restart",{transport:{id:(f=this==null?void 0:this.recvTransport)==null?void 0:f.id,type:"recv",status:"reconnecting",lastDisconnectedTime:(_=this.recvTransportIceStateDisconnectTime)==null?void 0:_.toISOString(),lastDisconnectedTimeOffset:(k=this.recvTransportIceStateDisconnectTime)==null?void 0:k.getTimezoneOffset()},iceRestart:{isSendTransport:(y=this==null?void 0:this.iceRestartInProgress)==null?void 0:y.sendTransport,isRecvTransport:(b=this==null?void 0:this.iceRestartInProgress)==null?void 0:b.recvTransport}});try{await this.restartIceTillSuccess(this.recvTransport)}catch(x){w.info("SFUHandler.disconnected.restartIceFailed",{error:x,iceRestart:{status:"failed",isRecvTransport:!0}})}}},r);break;case"connected":T.emit(E.ICE_CONNECTED,{transport:"recv"}),w.info("recvTransport::ice_state_connected",{transport:{id:(h=this==null?void 0:this.recvTransport)==null?void 0:h.id,type:"recv",status:"connected",lastDisconnectedTime:(g=this.recvTransportIceStateDisconnectTime)==null?void 0:g.toISOString(),lastDisconnectedTimeOffset:(m=this.recvTransportIceStateDisconnectTime)==null?void 0:m.getTimezoneOffset(),durationPassed:this.recvTransportIceStateDisconnectTime?new Date().getTime()-this.recvTransportIceStateDisconnectTime.getTime():null}}),this.recvTransportIceStateDisconnectTime=void 0;break}})}this.recvTransport.observer.on("close",()=>{this.recvTransport=void 0,eo.cleanup("receive"),w.warn("recvTransport_closed")})}async createSendTransport(e){const i={forceTcp:!1,producing:!0,consuming:!1},s=(await this.socketClient.sendMessage({type:"createWebRtcTransport",payload:i})).payload;if(w.info("sendTransport::initializing_transport"),this.sendTransport=this.device.createSendTransport({...s,iceServers:e,proprietaryConstraints:Px}),eo.initSendTransport(this.sendTransport),w.info("sendTransport::initialized_transport"),Z.onSafeInitialization(()=>{Z.configureSendTransport(this.sendTransport)}),this.sendTransport.on("connect",async({dtlsParameters:r},n,a)=>{var o,c,u,l;(c=(await this.socketClient.sendMessage({type:"connectWebRtcTransport",payload:{transportId:(o=this.sendTransport)==null?void 0:o.id,dtlsParameters:r}})).payload)!=null&&c.error?(w.error("sendTransport::transport_status",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"failed",type:"send"}}),a(new Error("failed"))):(w.info("sendTransport::transport_status",{transport:{id:(u=this==null?void 0:this.sendTransport)==null?void 0:u.id,status:"connected",type:"send"}}),n())}),this.sendTransport.on("produce",async({kind:r,rtpParameters:n,appData:a},o,c)=>{var u,l,h,g,m,f;const _=await this.socketClient.sendMessage({type:"produce",payload:{transportId:(u=this.sendTransport)==null?void 0:u.id,kind:r,rtpParameters:n,appData:a}});(l=_.payload)!=null&&l.error?(w.info("sendTransport::producer_status::failed",{producer:{kind:r,appData:a,status:"failed",id:(m=_==null?void 0:_.payload)==null?void 0:m.id}}),c((f=_.payload)==null?void 0:f.error)):(w.info("sendTransport::producer_status::producing",{producer:{kind:r,appData:a,status:"producing",id:(h=_==null?void 0:_.payload)==null?void 0:h.id}}),o({id:(g=_.payload)==null?void 0:g.id}))}),ee.hasFeature(ie.ENABLE_ICE_STATE_LOGGING)){w.info("Enabling ice state logging for send transport");let r;this.sendTransport.on("connectionstatechange",async n=>{var a,o,c,u;switch(w.info("sendTransport::connection_state_change",{transport:{id:(a=this==null?void 0:this.sendTransport)==null?void 0:a.id,status:n,type:"send"}}),n){case"failed":if(T.emit(E.ICE_FAILED,{transport:"send"}),w.warn("sendTransport::ice_state_failed"),ee.hasFeature(ie.ICE_RESTART_ON_FAILED_STATE))try{await this.restartIceTillSuccess(this.sendTransport)}catch(l){w.error("sendTransport::ice_restart_failed",{error:l})}break;case"disconnected":T.emit(E.ICE_DISCONNECTED,{transport:"send"}),w.warn("sendTransport::ice_state_disconnected"),this.sendTransportIceStateDisconnectTime&&w.warn("sendTransport::ice_state_disconnected_again",{transport:{id:(o=this==null?void 0:this.sendTransport)==null?void 0:o.id,status:"disconnected",lastDisconnectedTime:this.sendTransportIceStateDisconnectTime.toLocaleTimeString(),durationPassed:new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime(),type:"send"}}),this.sendTransportIceStateDisconnectTime=new Date;try{r=ee.getValue(ie.ICE_RESTART_ON_DISCONNECTED_STATE),typeof r!="number"&&(r=void 0)}catch{r=void 0}r&&setTimeout(async()=>{var l,h,g,m;if(this.sendTransportIceStateDisconnectTime!==void 0){T.emit(E.ICE_RECONNECTING,{transport:"send"}),w.info("sendTransport::attempting_ice_restart",{transport:{id:(l=this==null?void 0:this.sendTransport)==null?void 0:l.id,status:"reconnecting",type:"send",lastDisconnectedTime:(h=this.sendTransportIceStateDisconnectTime)==null?void 0:h.toISOString(),lastDisconnectedTimeOffset:(g=this.sendTransportIceStateDisconnectTime)==null?void 0:g.getTimezoneOffset()},iceRestart:{status:"connecting"}});try{await this.restartIceTillSuccess(this.sendTransport)}catch(f){w.info("SFUHandler.disconnected.restartIceFailed",{error:f,transport:{id:(m=this==null?void 0:this.sendTransport)==null?void 0:m.id,type:"send",status:"failed"}})}}},r);break;case"connected":T.emit(E.ICE_CONNECTED,{transport:"send"}),w.info("sendTransport::ice_state_connected",{transport:{id:(c=this==null?void 0:this.sendTransport)==null?void 0:c.id,type:"send",status:"connected",lastDisconnectedTime:(u=this.sendTransportIceStateDisconnectTime)==null?void 0:u.toLocaleTimeString(),durationPassed:this.sendTransportIceStateDisconnectTime?new Date().getTime()-this.sendTransportIceStateDisconnectTime.getTime():null}}),this.sendTransportIceStateDisconnectTime=void 0;break}})}this.sendTransport.observer.on("close",()=>{this.sendTransport=void 0,eo.cleanup("send"),w.warn("sendTransport_closed")})}async restartIce(e){const{direction:i}=e;if(!(i==="recv"?this.iceRestartInProgress.recvTransport:this.iceRestartInProgress.sendTransport)){i==="recv"?this.iceRestartInProgress.recvTransport=!0:this.iceRestartInProgress.sendTransport=!0;try{const s=(await this.socketClient.sendMessage({type:"restartIce",payload:{transportId:e.id}})).payload;await e.restartIce(s)}catch(s){w.error("SFUHandler.restartIce.Failed",{error:s,iceRestart:{status:"failed"},transport:{id:e==null?void 0:e.id,status:"failed",type:i}})}i==="recv"?this.iceRestartInProgress.recvTransport=!1:this.iceRestartInProgress.sendTransport=!1}}async createConsumer(e){if(this.recvTransport===void 0||this.recvTransport.closed)return;const{peerId:i,producerId:s,id:r,kind:n,rtpParameters:a,appData:o,remotelyPaused:c}=e;w.info("createConsumer::initializing_consumer",{consumer:{id:r,peerId:i,kind:n,appData:o,remotelyPaused:c,producerId:s}});const u=await this.recvTransport.consume({id:r,producerId:s,kind:n,rtpParameters:a,appData:{...o,peerId:i}});w.info("createConsumer::initialized_consumer",{consumer:{id:u.id,peerId:i,kind:n,appData:o,remotelyPaused:c,producerId:s}});const l=u;l.peerId=i,l.remotelyPaused=c,l.score=10,this.consumers.set(u.id,l)}async closeConsumer(e){const{id:i}=e,s=this.consumers.get(i);s&&(w.info("SFUHandler::close_consumer",{consumer:s}),s.close(),this.consumers.delete(i))}async cleanupConsumers(){var e;(e=this.consumers)==null||e.forEach(i=>{T.emit(E.CONSUMER_CLOSED,{id:i.id}),this.closeConsumer({id:i.id})})}async pauseConsumer(e){const{id:i}=e,s=this.consumers.get(i);s&&s.pause()}async resumeConsumer(e){const{id:i}=e,s=this.consumers.get(i);s&&s.resume()}async createProducer(e,i,s){if(this.sendTransport===void 0||this.sendTransport.closed)return;if(w.info("createProducer::initializing_producer",{producer:{id:"TO_BE_CREATED",kind:e,status:"initializing",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.get(e)&&this.producerCreationStatus.get(e)==="INITIALIZING"){w.info("createProducer::producer getting initializing",{producer:{id:"GETTING_CREATED",status:"initializing",kind:e,appData:i==null?void 0:i.appData}});return}this.producerCreationStatus.set(e,"INITIALIZING");const r=await Promise.race([this.sendTransport.produce(i),new Promise(a=>setTimeout(()=>a(void 0),6e3))]);if(!r)throw w.error("createProducer::transport_initialization_timed_out",{producer:{id:"FAILED_TO_CREATE",kind:e,status:"failed",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),new I(`Producer Creation timed out! ${e}`);this.producerCreationStatus.set(e,"INITIALIZED"),w.info("createProducer::initialized_producer",{producer:{id:r==null?void 0:r.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),r.on("transportclose",()=>{w.info("producer::transportclose",{producer:{id:r==null?void 0:r.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),this.producers.delete(e)}),r.on("trackended",()=>{T.emit(E.PRODUCER_TRACK_ENDED,{kind:e}),w.info("producer::trackended",{producer:{id:r==null?void 0:r.id,kind:e,status:"UNKNOWN",appData:i==null?void 0:i.appData}}),[oe.MIC,oe.WEBCAM].includes(e)||s()});const n=r;n.score=10,this.producers.set(e,n),await this.reconfigureWebcamLayers(),await this.reconfigureSafariScreenshareLayers()}async removeProducer(e,i=!0){const s=this.producers.get(e);!s||s.closed||(w.info("SFUHandler::remove_producer",{producer:{id:s==null?void 0:s.id,kind:e,status:"UNKNOWN",appData:s==null?void 0:s.appData},debuggingHint:`stopTrack was ${i}`}),i&&s.track.stop(),s.close(),await this.socketClient.sendMessage({type:"closeProducer",payload:{producerId:s.id}}),this.producerCreationStatus.set(e,"NOT_INITIALIZED"),this.producers.delete(e),await this.reconfigureWebcamLayers())}stopAllProducers(){Array.from(this.producers.keys()).forEach(e=>{this.removeProducer(e)})}async stopAllTransports(){if(this.sendTransport){try{this.sendTransport.close()}catch(e){w.error("stopAllTransports",{error:e})}this.sendTransport=void 0}if(this.recvTransport){try{this.recvTransport.close()}catch(e){w.error("SFUHandler::stopAllTransports::error",e)}this.recvTransport=void 0}}async reconfigureWebcamLayers(){if(!ee.hasFeature(ie.DISABLE_WEBCAM_LAYERS_ON_SCREENSHARE))return;const e=this.producers.get(oe.WEBCAM);e&&await e.setMaxSpatialLayer(this.producers.get(oe.SCREENSHARE_VIDEO)?0:1)}async reconfigureSafariScreenshareLayers(){if(!ee.hasFeature(ie.SCREENSHARE_SIMULCAST)||!Me.isSafari())return;const e=this.producers.get(oe.SCREENSHARE_VIDEO);if(!e)return;const i=e.rtpSender.getParameters();i.encodings=Gz,e.rtpSender.setParameters(i)}async restartIceTillSuccess(e,i=3){let s=!1,r=0;for(;!s&&r<i;)try{w.info("SFUHandler.restartIceTillSuccess.AttemptRestart",{iceRestart:{currentAttempt:r,isSendTransport:e.direction==="send",isRecvTransport:e.direction==="recv"}}),await this.restartIce(e),s=!0}catch{r+=1}if(!s)throw new I("Failed to restart Ice")}}Ss([S.trace("SFUHandler.setupTransports")],os.prototype,"setupTransports",1);Ss([S.trace("SFUHandler.loadRouter")],os.prototype,"loadRouter",1);Ss([S.trace("SFUHandler.createRecvTransport")],os.prototype,"createRecvTransport",1);Ss([S.trace("SFUHandler.createSendTransport")],os.prototype,"createSendTransport",1);Ss([S.trace("SFUHandler.restartIce")],os.prototype,"restartIce",1);Ss([S.trace("SFUHandler.createConsumer")],os.prototype,"createConsumer",1);Ss([S.trace("SFUHandler.closeConsumer")],os.prototype,"closeConsumer",1);Ss([S.trace("SFUHandler.cleanupConsumers")],os.prototype,"cleanupConsumers",1);Ss([S.trace("SFUHandler.pauseConsumer")],os.prototype,"pauseConsumer",1);Ss([S.trace("SFUHandler.resumeConsumer")],os.prototype,"resumeConsumer",1);Ss([S.trace("SFUHandler.createProducer")],os.prototype,"createProducer",1);Ss([S.trace("SFUHandler.removeProducer")],os.prototype,"removeProducer",1);Ss([S.trace("SFUHandler.stopAllProducers")],os.prototype,"stopAllProducers",1);Ss([S.trace("SFUHandler.stopAllTransports")],os.prototype,"stopAllTransports",1);class Nt extends rs.EventEmitter{emit(e,...i){return super.emit("*",e,...i),super.emit(e,...i)}on(e,i){try{const s=this.listenerCount(e);s>25&&s%25===0&&w.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:e.toString(),listenerCount:this.listenerCount(e)}})}catch{}return super.on(e,i)}addListener(e,i){try{const s=this.listenerCount(e);s>25&&s%25===0&&w.warn("DyteEventEmitter::maxListenersExceeded",{eventListener:{eventName:e.toString(),listenerCount:this.listenerCount(e)}})}catch{}return super.addListener(e,i)}off(e,i){return super.off(e,i)}once(e,i){return super.once(e,i)}prependListener(e,i){return super.prependListener(e,i)}prependOnceListener(e,i){return super.prependOnceListener(e,i)}removeListener(e,i){return super.removeListener(e,i)}removeAllListeners(e){return super.removeAllListeners(e)}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}}var eK=Object.defineProperty,tK=Object.getOwnPropertyDescriptor,iK=(t,e,i,s)=>{for(var r=s>1?void 0:s?tK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&eK(e,i,r),r},Jn=(t=>(t.REQUEST="REQUEST",t.ACCEPT="ACCEPT",t.REJECT="REJECT",t.END="END",t.EVENT="EVENT",t))(Jn||{}),rl=(t=>(t.PENDING="PENDING",t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED",t.ENDED="ENDED",t))(rl||{}),Up=(t=>(t.KEYBOARD="KEYBOARD",t.MOUSE="MOUSE",t))(Up||{}),im=(t=>(t.LEFT_CLICK="click",t.RIGHT_CLICK="contextmenu",t.MOVE="mousemove",t))(im||{}),Kn=(t=>(t.REQUEST_RECEIVED="REQUEST_RECEIVED",t.REQUEST_SENT="REQUEST_SENT",t.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",t.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",t.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",t.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED",t))(Kn||{});let $p=class extends Nt{constructor(t){super(),v(this,"id"),v(this,"remotePeerId"),v(this,"hostPeerId"),v(this,"state");const{remotePeerId:e,requestId:i,hostPeerId:s,state:r}=t;this.id=i,this.remotePeerId=e,this.hostPeerId=s,this.state=r}};$p=iK([Ii(t=>{throw new I(t.message,"1400")})],$p);var V3=(t=>(t.REQUESTED_BY_PARTICIPANT="REQUESTED_BY_PARTICIPANT",t.REQUESTED_BY_MODERATOR="REQUESTED_BY_MODERATOR",t))(V3||{}),B3=(t=>(t.PRESENT="REQUEST_TO_PRESENT",t))(B3||{}),sK=Object.defineProperty,rK=Object.getOwnPropertyDescriptor,xs=(t,e,i,s)=>{for(var r=s>1?void 0:s?rK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&sK(e,i,r),r},Ce,Io,nE;const l1=(nE=class extends D3{constructor(t){super(),R(this,Ce,void 0),v(this,"isV2AuthToken"),R(this,Io,void 0),v(this,"legacyMode"),v(this,"roomNodeUrl"),v(this,"peerDisplayName");const{roomName:e,roomNodeUrl:i,peerId:s,authToken:r,legacyMode:n,socketClient:a,meetingTitle:o,viewType:c}=t;this.roomName=e,this.roomNodeUrl=i,this.peerId=s,this.authToken=r,this.legacyMode=n,P(this,Ce,a),this.roomJoined=!1,this.mediaConnected=!1,this.meetingTitle=o,this.isV2AuthToken=we.isV2AuthToken,P(this,Io,new os(a,t.device)),Z.legacySwitch(n);let u=0;const l=async({err:h})=>{var g;this.isDisconnected=!0,(g=this.sfuHandler)==null||g.cleanupConsumers(),this.mediaConnected=!1,T.emit(E.ROOM_NODE_CONNECTION_ERROR,h),this.roomJoined=!1,w.error("RoomNodeClient::ROOM_NODE_CONNECTION_ERROR",h);const m=we.isV2AuthToken?we.meetingId:e,f=_i(),{roomNodeUrl:_}=await f.getRoomNodeData({roomName:m,peerId:s}),k=`${_}?roomURL=${e}&peerId=${s}&authToken=${r}&version=0.5.0`;u+=1,!(u>3)&&(w.log("RoomNodeClient::SocketReconnection",{socket:{retryAttempt:u}}),p(this,Ce).connect(k),b3({...we.roomNodeOptions,roomNodeUrl:_}),this.roomNodeUrl=_)};c===it.Livestream&&(a.removeListener(un.SOCKET_CONNECTION_ERROR,l.bind(this)),a.on(un.SOCKET_CONNECTION_ERROR,l.bind(this)))}static async init(t){const{legacyMode:e=!0,roomName:i,peerId:s,authToken:r,meetingTitle:n,device:a,viewType:o}=t;let c;const u=`${t.roomNodeUrl}?roomURL=${i}&peerId=${s}&authToken=${r}&version=0.5.0`,l=new ph({callbackHandler:async h=>{await c.handleSocketCallbacks(h)}});return l.on(un.SOCKET_MESSAGE,async(h,g)=>{await c.handleSockets(h,g)}),l.connect(u),c=new l1({legacyMode:e,authToken:r,peerId:s,roomName:i,roomNodeUrl:u,socketClient:l,meetingTitle:n,device:a,viewType:o}),l.on(un.SOCKET_DISCONNECTED,h=>{var g,m;c.isDisconnected=!0,(g=c.sfuHandler)==null||g.cleanupConsumers(),(m=c.sfuHandler)==null||m.stopAllTransports(),c.mediaConnected=!1,T.emit(E.ROOM_NODE_DISCONNECTED,h),c.roomJoined=!1,w.info("RoomNodeClient::ROOM_NODE_DISCONNECTED")}),l.on(un.SOCKET_CONNECTED,async h=>{c.mediaConnected=!0,T.emit(E.ROOM_NODE_CONNECTED,{...h,wasDisconnected:c.isDisconnected}),c.isDisconnected=!1,w.info("RoomNodeClient::ROOM_NODE_CONNECTED")}),c}get sfuHandler(){return p(this,Io)}reconnect(){p(this,Ce).reconnect()}async setupTransports(){await this.sfuHandler.setupTransports()}async handleSocketCallbacks(t){switch(t.type){case E.NEW_CONSUMER:return this.sfuHandler.createConsumer(t.payload);default:return null}}async handleSockets(t,e){if(t){switch((!S.logExclusionList.includes(t==null?void 0:t.type)||ee.hasFeature(ie.BYPASS_LOG_EXCLUSION_LIST))&&w.info(`RoomNodeClient::handleSockets::${t==null?void 0:t.type}`),t.type){case E.CONSUMER_CLOSED:this.sfuHandler.closeConsumer(t.payload);break;case E.CONSUMER_PAUSED:this.sfuHandler.pauseConsumer(t.payload);break;case E.CONSUMER_RESUMED:this.sfuHandler.resumeConsumer(t.payload);break;case E.CONSUMER_SCORE:this.handleConsumerScore(t.payload);break;case E.PRODUCER_SCORE:this.handleProducerScore(t.payload);break;case E.PRODUCER_CLOSED:this.handleProducerClosed(t.payload);break}typeof e=="function"&&e()}}async joinRoom(t,e,i,s,r={}){var n,a,o;this.peerDisplayName=t,this.roomUUID=i;const c=await p(this,Ce).sendMessage({type:"joinRoom",payload:{device:Me.getDeviceInfo(),displayName:t,rtpCapabilities:this.sfuHandler.getRTPCapabilities(),isLegacy:this.legacyMode,audioMuted:e}});if((n=c.payload)!=null&&n.waitlisted)return T.emit(E.WAITLISTED),{roomJoined:!1};this.roomJoined=!0,this.mediaConnected=!0,(o=(a=c.payload)==null?void 0:a.waitlistedPeers)==null||o.forEach(l=>{T.emit(E.WAITLIST_PEER_ADDED,l)}),this.legacyMode=c.payload.legacyMode||this.legacyMode,s&&s!==""&&await this.changeRoomDisplayTitle(s),this.maxPreferredStreams=c.payload.maxPreferredStreams;const u=_i();w.info("RoomNodeClient::joinRoom::pre emitasync room_joined");try{await T.emitAsync(E.ROOM_JOINED,c.payload)}catch(l){w.error("RoomNodeClient::joinRoom::emitAsync",{error:l})}return w.info("RoomNodeClient::joinRoom::post emitasync room_joined"),T.emit(E.SELF_ROOM_JOINED),ee.hasFeature(ie.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"&&setTimeout(async()=>{const l=await u.getUserDetails(),h={userId:we.isV2AuthToken?l.participant.id:l.id,peerId:this.peerId,displayName:t,roomUUID:this.roomUUID,roomViewType:"groupCall",roomName:this.roomName,deviceInfo:{...Me.getDeviceInfo(),userAgent:navigator.userAgent,memory:navigator.deviceMemory,cpus:navigator.hardwareConcurrency},sdkName:S_,sdkVersion:dh,metaData:{},permissions:{}};Z.roomJoined(h),r!=null&&r.audio?Z.audioOn():Z.audioOff(),r!=null&&r.video?Z.videoOn():Z.videoOff()}),{roomJoined:!0}}async leaveRoom(){this.sfuHandler.stopAllProducers(),await this.sfuHandler.stopAllTransports(),p(this,Ce).disconnect(),Z.callEnded(),S.destruct()}handleProducerClosed({id:t}){this.sfuHandler.producers.forEach((e,i)=>{e.id===t&&this.sfuHandler.removeProducer(i)})}getConsumers(){return this.sfuHandler.consumers}static getComputedScore(t){var e,i;let s=0;try{Array.isArray(t)?t.length===1?s=t[0].score:s=t.map(({score:r})=>r!=null?r:10).filter(r=>r>0).reduce((r,n)=>r+n,0)/t.length:s=(e=t==null?void 0:t.score)!=null?e:10}catch{s=(i=t==null?void 0:t.score)!=null?i:10}return s}handleConsumerScore({id:t,score:e}){var i;const s=p(this,Io).consumers.get(t);s&&(s.score=e&&e.producerScore!==void 0&&e.producerScore>=0?e.producerScore:(i=e==null?void 0:e.score)!=null?i:10,T.emit(E.CONSUMER_SCORE_UPDATE,{id:s.id,kind:s.kind,peerId:s.peerId,score:s.score}))}handleProducerScore({id:t,score:e}){const i=[...p(this,Io).producers.values()].find(r=>r.id===t);if(!i){w.error(`RoomNodeClient::producer_not_found. ProducerId: ${t}`);return}if(!i)return;const s=l1.getComputedScore(e);s!==void 0&&s!==i.score&&(i.score=s,T.emit(E.PRODUCER_SCORE_UPDATE,{id:i.id,kind:i.kind,appData:i.appData,score:i.score}))}async shareWebcam(t){if(t===void 0)return;if(this.sfuHandler.producers.has(oe.WEBCAM)){const c=this.sfuHandler.producers.get(oe.WEBCAM);if(!c.closed&&!navigator.isReactNative){await c.replaceTrack({track:t}),await this.resumeWebcam();return}await this.sfuHandler.removeProducer(oe.WEBCAM,!1)}let e=Wz;const i=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp9")||void 0,s=this.sfuHandler.getRTPCapabilities().codecs.find(c=>c.mimeType.toLowerCase()==="video/vp8")||void 0,r=ee.getValue(ie.OVERRIDE_WEBCAM_SIMULCAST);if(i&&!this.legacyMode)e=Jz;else if(r!==void 0)try{e=JSON.parse(r)}catch{w.error("Failed to parse flagsmith simulcast")}const n=()=>this.legacyMode?s:i,a={track:t,encodings:ee.hasFeature(ie.DISABLE_WEBCAM_SIMULCAST)?void 0:e,codecOptions:{videoGoogleStartBitrate:1e3},codec:n(),appData:{screenShare:!1},stopTracks:!1},o=()=>{this.disableWebcam()};await this.sfuHandler.createProducer(oe.WEBCAM,a,o)}async shareScreen(t){var e,i;const{video:s,audio:r}=t;if(s===void 0)return;let n;ee.hasFeature(ie.SCREENSHARE_SIMULCAST)&&(n=qz);const a={track:s,appData:{screenShare:!0,supportsRemoteControl:Me.isElectron()},encodings:n,stopTracks:!1};let o=()=>{this.disableScreenShare()};Z.screenShareRequested(),await this.sfuHandler.createProducer(oe.SCREENSHARE_VIDEO,a,o);const c={opusDtx:!1,opusStereo:!1,opusFec:!0,forceGoogConference:!1};if(ee.hasFeature(ie.SCREENSHARE_FORCE_GOOG_CONFERENCE)&&(c.forceGoogConference=!0),r){const u={track:r,codecOptions:c,appData:{screenShare:!0,supportsRemoteControl:Me.isElectron()},stopTracks:!1};o=()=>{},await this.sfuHandler.createProducer(oe.SCREENSHARE_AUDIO,u,o)}Z.screenShareStart((i=(e=this.sfuHandler.producers.get(oe.SCREENSHARE_VIDEO))==null?void 0:e.rtpParameters.encodings[0])==null?void 0:i.ssrc)}async shareMic(t){try{if(t===void 0)throw new I("track undefined");if(this.sfuHandler.producers.has(oe.MIC)){const s=this.sfuHandler.producers.get(oe.MIC);if(!s.closed&&!navigator.isReactNative){await s.replaceTrack({track:t}),await this.resumeMic();return}await this.sfuHandler.removeProducer(oe.MIC,!1)}const e={track:t,codecOptions:{opusDtx:!1,opusStereo:!1,opusFec:!0,opusMaxAverageBitrate:16e3},stopTracks:!1},i=()=>{this.disableMic()};await this.sfuHandler.createProducer(oe.MIC,e,i)}catch(e){throw new I(e)}}pauseMic(){const t=this.sfuHandler.producers.get(oe.MIC);if(!t){w.error("pauseMic::could_not_find_mic_producer");return}t.pause(),p(this,Ce).sendMessage({type:"pauseProducer",payload:{producerId:t.id}})}async pauseWebcam(){const t=this.sfuHandler.producers.get(oe.WEBCAM);if(!t){w.error("pauseWebcam::could_not_find_webcam_producer");return}t.pause(),await p(this,Ce).sendMessage({type:"pauseProducer",payload:{producerId:t.id}})}async resumeMic(){const t=this.sfuHandler.producers.get(oe.MIC);if(!t){w.error("resumeMic::could_not_find_mic_producer");return}t.resume(),await p(this,Ce).sendMessage({type:"resumeProducer",payload:{producerId:t.id}})}async resumeWebcam(){const t=this.sfuHandler.producers.get(oe.WEBCAM);if(!t){w.error("resumeWebcam::could_not_find_webcam_producer");return}t.resume(),await p(this,Ce).sendMessage({type:"resumeProducer",payload:{producerId:t.id}})}async disableWebcam(){await this.sfuHandler.removeProducer(oe.WEBCAM)}async disableMic(){await this.sfuHandler.removeProducer(oe.MIC)}async disableScreenShare(){var t,e;w.info("screen_sharing_stopped"),Z.screenShareStop((e=(t=this.sfuHandler.producers.get(oe.SCREENSHARE_VIDEO))==null?void 0:t.rtpParameters.encodings[0])==null?void 0:e.ssrc),await this.sfuHandler.removeProducer(oe.SCREENSHARE_VIDEO),await this.sfuHandler.removeProducer(oe.SCREENSHARE_AUDIO)}async resetVideoProducers(t,e){t&&(await this.sfuHandler.removeProducer(oe.WEBCAM,!1),this.shareWebcam(t)),e&&(await this.sfuHandler.removeProducer(oe.SCREENSHARE_VIDEO,!1),this.shareScreen({video:e}))}async getRoomState(){return p(this,Ce).sendMessage({type:"getRoomState"})}async changeRoomDisplayTitle(t){await p(this,Ce).sendMessage({type:"changeDisplayTitle",payload:{displayTitle:t}})}async sendMessage(t){return p(this,Ce).sendMessage(t)}async broadcastMessage(t,e){const i={payload:e,type:t};return p(this,Ce).sendMessage({type:"roomMessage",payload:i})}async sendChatMessage(t){await p(this,Ce).sendMessage({type:"chatMessage",payload:t})}async getChatMessages(){return p(this,Ce).sendMessage({type:"getChatMessages"})}async pinChatMessage(t){return p(this,Ce).sendMessage({type:"pinChatMessage",payload:t})}async unpinChatMessage(t){return p(this,Ce).sendMessage({type:"unpinChatMessage",payload:t})}async getPolls(){return p(this,Ce).sendMessage({type:"getPolls"})}async newPoll(t){await p(this,Ce).sendMessage({type:"newPoll",payload:t})}async votePoll(t){await p(this,Ce).sendMessage({type:"votePoll",payload:t})}async acceptWaitingRequest(t){await p(this,Ce).sendMessage({type:"acceptWaitingRequest",payload:{id:t}})}async rejectWaitingRequest(t){await p(this,Ce).sendMessage({type:"rejectWaitingRequest",payload:{id:t}})}async muteAll(t){await p(this,Ce).sendMessage({type:"muteAllNew",payload:{allowUnMute:t}})}async muteAllVideo(){await p(this,Ce).sendMessage({type:"muteAllVideo"})}async pinPeer(t){return p(this,Ce).sendMessage({type:"pinPeer",payload:{id:t}})}async unpinPeer(t){return p(this,Ce).sendMessage({type:"unpinPeer",payload:{id:t}})}async disableAudio(t){await p(this,Ce).sendMessage({type:"disableAudioPeerNew",payload:{id:t}})}async disableVideo(t){await p(this,Ce).sendMessage({type:"disableVideoPeer",payload:{id:t}})}async kickAll(){await p(this,Ce).sendMessage({type:"kickAll"})}async kick(t){await p(this,Ce).sendMessage({type:"kick",payload:{id:t}})}async getPage(t){return p(this,Ce).sendMessage({type:"getPage",payload:{pageNum:t}})}async muteSelf(){this.pauseMic(),await p(this,Ce).sendMessage({type:"muteSelf"})}async unmuteSelf(){await this.resumeMic(),await p(this,Ce).sendMessage({type:"unmuteSelf"})}async addRoomPlugin(t){return p(this,Ce).sendMessage({type:"addPlugin",payload:t})}async removeRoomPlugin(t){return p(this,Ce).sendMessage({type:"removePlugin",payload:t})}async remoteControlMessage(t){return p(this,Ce).sendMessage({type:"message",payload:t})}async requestRemoteControl(t){return this.remoteControlMessage({peerId:t.hostPeerId,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:Jn.REQUEST})}async acceptRemoteControl(t){return this.remoteControlMessage({peerId:t.remotePeerId,remoteRequestId:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,remoteRequestType:Jn.ACCEPT})}async terminateRemoteControl(t,e){return this.remoteControlMessage({peerId:t,remoteRequestId:e.id,hostPeerId:e.hostPeerId,remotePeerId:e.remotePeerId,remoteRequestType:Jn.END})}async sendEventRemoteControl(t,e,i){return this.remoteControlMessage({peerId:t,remoteRequestId:e,remoteEvent:i,hostPeerId:this.peerId,remotePeerId:t,remoteRequestType:Jn.EVENT})}async assertSpotlight(t,e){return p(this,Ce).sendMessage({type:t,payload:{...e,roomMessageType:"spotlight"}})}async assertSpotlightToRoom(t){return this.assertSpotlight("roomMessage",t)}async assertSpotlightToPeer(t){return this.assertSpotlight("message",t)}async requestToJoinStage(t){await this.sendMessage({type:"requestToJoinStage",payload:t})}async withdrawRequestToJoinStage(){await this.sendMessage({type:"withdrawRequestToJoinStage"})}async acceptAllRequestToJoinStage(t){await this.sendMessage({type:"acceptAllRequestToJoinStage",payload:t.map(e=>({...e,type:V3.REQUESTED_BY_MODERATOR}))})}async grantStageAccess(t){await this.sendMessage({type:"grantStageAccess",payload:{userIDs:t}})}async removePeerFromStage(t,e){await this.sendMessage({type:"removePeerFromStage",payload:{id:t,type:e}})}async kickPeerFromStage(t){await this.sendMessage({type:"kickPeerFromStage",payload:{userIDs:t}})}stopAllProducers(){p(this,Io).stopAllProducers()}async startPresenting(){await this.sendMessage({type:"startPresenting"})}async stopPresenting(){this.stopAllProducers(),await this.sendMessage({type:"stopPresenting"})}async rejectRequestToJoinStage(t){await this.sendMessage({type:"rejectRequestToJoinStage",payload:{id:t}})}async denyStageAccess(t){await this.sendMessage({type:"denyStageAccess",payload:{userIDs:t}})}},Ce=new WeakMap,Io=new WeakMap,nE);let Ie=l1;xs([S.trace("RoomNodeClient.reconnect")],Ie.prototype,"reconnect",1);xs([S.trace("RoomNodeClient.joinRoom")],Ie.prototype,"joinRoom",1);xs([S.trace("RoomNodeClient.leaveRoom")],Ie.prototype,"leaveRoom",1);xs([S.trace("RoomNodeClient.shareWebcam")],Ie.prototype,"shareWebcam",1);xs([S.trace("RoomNodeClient.shareScreen")],Ie.prototype,"shareScreen",1);xs([S.trace("RoomNodeClient.shareMic")],Ie.prototype,"shareMic",1);xs([S.trace("RoomNodeClient.pauseMic")],Ie.prototype,"pauseMic",1);xs([S.trace("RoomNodeClient.pauseWebcam")],Ie.prototype,"pauseWebcam",1);xs([S.trace("RoomNodeClient.resumeMic")],Ie.prototype,"resumeMic",1);xs([S.trace("RoomNodeClient.resumeWebcam")],Ie.prototype,"resumeWebcam",1);xs([S.trace("RoomNodeClient.disableWebcam")],Ie.prototype,"disableWebcam",1);xs([S.trace("RoomNodeClient.disableMic")],Ie.prototype,"disableMic",1);xs([S.trace("RoomNodeClient.disableScreenShare")],Ie.prototype,"disableScreenShare",1);xs([S.trace("RoomNodeClient.resetVideoProducers")],Ie.prototype,"resetVideoProducers",1);let Ur;async function nK(t){if(Ur)throw new Error("Room Node Client already setup");Ur=await ye.init(t)}async function H3(t){if(Ur!=null&&Ur.roomJoined)throw new Error("Room Node Client already setup");Ur&&(Ur=void 0),Ur=await Ie.init(t)}function W3(){try{Ur==null||Ur.leaveRoom()}catch{w.error("roomNodeClient::cleanupRoomNodeClient")}Ur=void 0}function oi(){return Ur}function uc(t){var e,i,s,r,n,a,o,c,u,l,h,g,m;return t?{media:{audio:{enabled:t.audioEnabled,trackId:(e=t.audioTrack)==null?void 0:e.id,permission:"mediaPermissions"in t?(i=t.mediaPermissions)==null?void 0:i.audio:null},video:{enabled:t.videoEnabled,trackId:(s=t.videoTrack)==null?void 0:s.id,permission:"mediaPermissions"in t?(r=t.mediaPermissions)==null?void 0:r.video:null},screenshare:{enabled:t.screenShareEnabled,permission:"mediaPermissions"in t?(n=t.mediaPermissions)==null?void 0:n.screenshare:null,audio:{enabled:(o=(a=t.screenShareTracks)==null?void 0:a.audio)==null?void 0:o.enabled,trackId:(u=(c=t.screenShareTracks)==null?void 0:c.audio)==null?void 0:u.id},video:{enabled:(h=(l=t.screenShareTracks)==null?void 0:l.video)==null?void 0:h.enabled,trackId:(m=(g=t.screenShareTracks)==null?void 0:g.video)==null?void 0:m.id}}}}:{}}class aK extends Error{constructor(e,i){super(e),v(this,"code"),this.code=i}}class Hn extends Error{constructor(e,i,s){super(i),v(this,"constraints"),v(this,"name"),this.name=e,this.constraints=s}}var oK=Object.defineProperty,cK=Object.getOwnPropertyDescriptor,ha=(t,e,i,s)=>{for(var r=s>1?void 0:s?cK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&oK(e,i,r),r};const n0={port:void 0},dK=["virtual","emulator","krisp","solstice conference","teams","manycam","blackHole"];function jn(t){const e=t.label.toLowerCase();return Me._bowser.getOSName()==="macOS"&&e.includes("iphone")?(w.log("isVirtualDevice::ignore_macos_continuity"),!0):dK.some(i=>e.includes(i))}var wa,su,aE;const Ma=(aE=class{constructor(t){R(this,wa,void 0),R(this,su,void 0),P(this,wa,t),P(this,su,new AbortController)}static async init(){let t=[];return Ma.isDeviceListAvailable()?(t=await Ma.enumerateDevices(),w.info("initial_full_device_list",{devices:JSON.stringify(t)})):w.error("UnsupportedMediaAPI::navigator.mediaDevices.enumerateDevices",{debuggingHint:"Try checking meetingMetadata.visitedUrl. It should be running on localhost/127.0.0.1 or HTTPS, if not, there would be issues."}),new Ma(t)}async destruct(){var t;(t=p(this,su))==null||t.abort()}static isDeviceListAvailable(){return!!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}static enumerateDevices(){try{return navigator.mediaDevices.enumerateDevices()}catch(t){return w.error("enumerate_devices_failed",{error:t}),Promise.resolve([])}}static getAudioConstraints(t){const e={},{disableAP:i=!1,disableAEC:s=!1,disableNS:r=!1,disableAGC:n=!1,disableHPF:a=!1}=t.audioOptions||{};if(Me.isFirefox()||Me.isWebKitBased())e.audio={deviceId:t.audioDeviceId,autoGainControl:!n&&!i,echoCancellation:!s&&!i,noiseSuppression:!r&&!i};else{if(typeof e.audio=="boolean")return e;e.audio={},e.audio.optional=[t.audioDeviceId?{sourceId:t.audioDeviceId}:{sourceId:"default"},{echoCancellation:!s&&!i},{googEchoCancellation:!s&&!i},{googAutoGainControl:!n&&!i},{googNoiseSuppression:!r&&!i},{googHighpassFilter:!a&&!i},{googNoiseSuppression2:!r&&!i},{googEchoCancellation2:!s&&!i},{googAutoGainControl2:!n&&!i}]}return e}static getVideoConstraints(t){const e={},{videoDeviceId:i,videoTrackConstraints:s,facingMode:r="user",frameRate:n={ideal:24,max:30}}=t;return e.video=s||o3.vga,typeof e.video=="boolean"||(i&&(e.video.deviceId={exact:i}),e.video.facingMode=r,e.video.frameRate=n),e}static async getUserMediaWithTimeout(t={},e=0){try{if(w.info("getUserMediaWithTimeout::requesting_user_media",{timeout:e,constraints:JSON.stringify(t)}),!e){const s=await navigator.mediaDevices.getUserMedia(t);return w.info("getUserMediaWithTimeout::received_user_media",{timeout:e,constraints:JSON.stringify(t)}),s}const i=await Promise.race([navigator.mediaDevices.getUserMedia(t),new Promise((s,r)=>{setTimeout(()=>r(new aK("Get user media timed out","ERR_GUM_TIMEOUT")),e)})]);return w.info("getUserMediaWithTimeout::received_user_media",{timeout:e,constraints:JSON.stringify(t)}),i}catch(i){throw w.error("getUserMediaWithTimeout::failed_to_access_local_media",{error:i,constraints:JSON.stringify(t)}),w.error("Failed to get access to local media.",{error:i,constraints:JSON.stringify(t)}),new Hn(i.name,i.message,t)}}static async getAudioTrack(t){return(await Ma.getUserMediaWithTimeout(t)).getAudioTracks()[0]}static async getVideoTrack(t){return(await Ma.getUserMediaWithTimeout(t)).getVideoTracks()[0]}static async getScreenShareTracks(t){var e,i;let s=ee.hasFeature(ie.EXTENSION_HACK),r=null;if(s)try{n0.port=window.chrome.runtime.connect("nkeimhogjdpnpccoofpliimaahmaaome",{name:"chooseDesktopMedia"})}catch{S.addLogInCurrentSpan("error","Extension connect error"),s=!1}s&&(r=await new Promise(a=>{const o=setTimeout(()=>a(void 0),12e3);n0.port.onMessage.addListener(async c=>{if(c.value.streamId){const{streamId:u}=c.value;clearTimeout(o),a(u)}}),n0.port.postMessage({method:"chooseDesktopMedia",sources:["screen"]})}));let n;return r?(S.addLogInCurrentSpan("error","Acquiring extension screenshare track"),n=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{maxWidth:1920,maxHeight:1080,chromeMediaSource:"desktop",chromeMediaSourceId:r},optional:[{maxFrameRate:parseInt((e=ee.getValue(ie.VAL_MAX_FRAMERATE_EXT))!=null?e:"12",10)},{minFrameRate:parseInt((i=ee.getValue(ie.VAL_MIN_FRAMERATE_EXT))!=null?i:"8",10)}]}}),S.addLogInCurrentSpan("error","Acquired extension screenshare track")):n=await navigator.mediaDevices.getDisplayMedia(t),{video:n.getVideoTracks()[0],audio:n.getAudioTracks()[0]}}static async getAudioAndVideoTrack(t){const e=await Ma.getUserMediaWithTimeout(t),i=e.getAudioTracks()[0],s=e.getVideoTracks()[0];return{audioTrack:i,videoTrack:s}}onDeviceChange(t){Me.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",m3(async e=>{const i=this.availableDevices,s=new Set(i.map(o=>o.deviceId));await this.repopulateAvailableDevices();const r=this.availableDevices,n=new Set(r.map(o=>o.deviceId)),a={added:r.filter(o=>!s.has(o.deviceId)),removed:i.filter(o=>!n.has(o.deviceId))};this.repopulateAvailableDevices().then(()=>t(e,a))},100),{signal:p(this,su).signal})}async repopulateAvailableDevices(){const t=await Ma.enumerateDevices();!v3(bV(t,p(this,wa),pV))&&(P(this,wa,t),Z.devices("AUDIO",this.getAudioDevices()),Z.devices("VIDEO",this.getVideoDevices()),Z.devices("SPEAKER",this.getSpeakerDevices()),w.info("repopulated_full_device_list",{devices:JSON.stringify(t)}))}get availableDevices(){return p(this,wa)}getAvailableDevicesByKind(t){return p(this,wa).filter(e=>e.kind===t)}getDeviceById(t,e){return p(this,wa).find(i=>i.deviceId===t&&i.kind===e)}getAudioDevices(){return this.getAvailableDevicesByKind("audioinput").sort((t,e)=>{const i=jn(t)?0:1;return(jn(e)?0:1)-i})}getVideoDevices(){return this.getAvailableDevicesByKind("videoinput").sort((t,e)=>{const i=jn(t)?0:1;return(jn(e)?0:1)-i})}getSpeakerDevices(){return this.getAvailableDevicesByKind("audiooutput").sort((t,e)=>{const i=jn(t)?0:1;return(jn(e)?0:1)-i})}},wa=new WeakMap,su=new WeakMap,aE);let It=Ma;ha([S.trace("LocalMediaUtils.onDeviceChange")],It.prototype,"onDeviceChange",1);ha([S.trace("LocalMediaUtils.repopulateAvailableDevices")],It.prototype,"repopulateAvailableDevices",1);ha([S.trace("LocalMediaUtils.isDeviceListAvailable")],It,"isDeviceListAvailable",1);ha([S.trace("LocalMediaUtils.enumerateDevices")],It,"enumerateDevices",1);ha([S.trace("LocalMediaUtils.getUserMediaWithTimeout")],It,"getUserMediaWithTimeout",1);ha([S.trace("LocalMediaUtils.getAudioTrack")],It,"getAudioTrack",1);ha([S.trace("LocalMediaUtils.getVideoTrack")],It,"getVideoTrack",1);ha([S.trace("LocalMediaUtils.getScreenShareTracks")],It,"getScreenShareTracks",1);ha([S.trace("LocalMediaUtils.getAudioAndVideoTrack")],It,"getAudioAndVideoTrack",1);const zn={setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(i){w.error("LocalStorage::setItem::crashed",{error:i,localStorage:{key:t,value:e}})}},getItem:t=>{try{return localStorage.getItem(t)}catch(e){w.error("LocalStorage::getItem::crashed",{error:e,localStorage:{key:t}})}return null}},lK=(t=0)=>new Promise(e=>setTimeout(e,t)),uK=(t,e,i)=>{const s=typeof i=="number"?i:250,r=t.createMediaStreamSource(e),n=t.createAnalyser();n.fftSize=2048,r.connect(n);const a=new Uint8Array(n.fftSize);let o=!1;setTimeout(()=>{o=!0},s);function c(){return o?Promise.resolve(!0):(n.getByteTimeDomainData(a),a.some(u=>u!==128&&u!==0)?Promise.resolve(!1):lK().then(c))}return c().then(u=>(r.disconnect(),u),u=>{throw r.disconnect(),u})},pK=typeof AudioContext<"u"?AudioContext:null;class O_{constructor(e){v(this,"_AudioContext"),v(this,"audioContext"),v(this,"_audioContextRefContainers");const i={AudioContext:pK,...e};Object.defineProperties(this,{_AudioContext:{value:i.AudioContext},audioContext:{value:null,writable:!0},_audioContextRefContainers:{value:new Set},AudioContextProvider:{enumerable:!0,value:O_}})}getOrCreate(e){if(!this._audioContextRefContainers.has(e)&&(this._audioContextRefContainers.add(e),this._AudioContext&&!this.audioContext))try{this.audioContext=new this._AudioContext}catch{}return this.audioContext}release(e){this._audioContextRefContainers.has(e)&&(this._audioContextRefContainers.delete(e),!this._audioContextRefContainers.size&&this.audioContext&&(this.audioContext.close(),this.audioContext=null))}}const oE=new O_,hK=3,gK=250;function mK(t){const e={},i=oE.getOrCreate(e);let s=hK;function r(){return s-=1,uK(i,t.srcObject,gK).then(n=>n?s>0?r():!0:!1).catch(()=>!0)}return r().finally(()=>{oE.release(e)})}async function np(t){const e=new Audio,i=new MediaStream;i.addTrack(t),e.srcObject=i;let s=!1;try{const r=e.play();r&&await r,s=await mK(e),s&&w.info("checkIfAudioTrackIsSilent::silence_detected")}catch(r){w.error("checkIfAudioTrackIsSilent::failed_to_detect_silence",{error:r})}finally{e.pause(),e.remove()}return s}async function fK(t,e){if(!(t!=null&&t.length))return e;const i=new AudioContext,s=await Promise.all(t==null?void 0:t.map(a=>a(i))),r=i.createMediaStreamSource(new MediaStream([e])),n=i.createMediaStreamDestination();try{let a=r;for(let o=0;o<s.length;o+=1)a.connect(s[o]),a=s[o];a.connect(n)}catch(a){return w.error("getTransformedAudioTrack::middleware_execution_failed",{error:a}),e}return n.stream.getAudioTracks()[0]}var vK=Object.defineProperty,yK=Object.getOwnPropertyDescriptor,bK=(t,e,i,s)=>{for(var r=s>1?void 0:s?yK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&vK(e,i,r),r};let u1=class extends Nt{constructor(t,e,i){super(),v(this,"constructorName",this.constructor.name),v(this,"userSelectedDevice"),v(this,"mediaInterface"),v(this,"isNonPreferredDevice"),v(this,"_mediaTrack"),v(this,"transformedMediaTrack"),v(this,"middlewares",[]),v(this,"currentDevice"),this.mediaInterface=t,e&&this.setMediaTrack(e),this.userSelectedDevice=void 0,this.isNonPreferredDevice=i,this.onTrackEnded=this.onTrackEnded.bind(this),this.onTrackMuted=this.onTrackMuted.bind(this)}disableTrack(){var t,e;this.removeMediaTrackListeners(),(t=this._mediaTrack)==null||t.stop(),this._mediaTrack=void 0,(e=this.transformedMediaTrack)==null||e.stop(),this.transformedMediaTrack=void 0}get mediaTrack(){return this._mediaTrack}async setMediaTrack(t){const e=i=>{w.error(`${this.constructorName}.setMediaTrack.error`,{error:i})};try{this.disableTrack()}catch(i){e(i)}this._mediaTrack=await this.conditionallyChangeTrack(t),await this.setTransformedTrack();try{this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(i){e(i)}}get trackEnabled(){return!!this.mediaTrack&&this.mediaTrack.readyState==="live"&&this.mediaTrack.enabled}muteTrack(){if(!this.mediaTrack){w.warn("BaseMediaHandler.muteTrack Tried muting with no track present");return}this.transformedMediaTrack&&(this.transformedMediaTrack.enabled=!1),this.mediaTrack.enabled=!1}async unmuteTrack(){try{this.mediaTrack?this.mediaTrack.enabled=!0:await this.enableTrack(!1)}catch(t){throw w.error(`${this.constructorName}.unmuteTrack.error`,{error:t}),this.disableTrack(),new I("Failed to unmute track")}}async setCurrentDevice(){var t;if(!this.mediaTrack){this.currentDevice=void 0;return}((t=this.currentDevice)==null?void 0:t.deviceId)!==this.mediaTrack.getSettings().deviceId&&(this.currentDevice=await this.mediaInterface.getDevice(this.mediaTrack.getSettings().deviceId))}async addMiddleware(t){if(Me.isSafari())return{success:!1,message:"Middlewares are not yet supported in Safari."};if(this.middlewares.includes(t))return{success:!1,message:"This middleware has been applied, already. Skipping."};try{return this.trackEnabled&&await this.setTransformedTrack(),this.middlewares.push(t),{success:!0,message:"Successfully added the middleware."}}catch(e){return w.error("While adding middleware",{error:e}),{success:!1,message:e==null?void 0:e.message}}}async removeMiddleware(t){const e=this.middlewares.indexOf(t,0);if(e>-1)try{return await this.setTransformedTrack(),this.middlewares.splice(e,1),{success:!0,message:"Successfully removed the middleware."}}catch(i){return w.error("While removing middleware",{error:i}),{success:!1,message:i==null?void 0:i.message}}return{success:!1,message:"No such middleware was found. Skipping."}}addMediaTrackListeners(){var t,e,i;this.mediaTrack&&(w.info(`${this.constructorName}.addMediaTrackListeners for deviceId ${(e=(t=this.mediaTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),this.mediaTrack.addEventListener("ended",this.onTrackEnded),this.mediaTrack.addEventListener("mute",this.onTrackMuted))}removeMediaTrackListeners(){var t,e,i;this.mediaTrack&&(w.info(`${this.constructorName}.removeMediaTrackListeners for deviceId ${(e=(t=this.mediaTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId} of type ${(i=this.mediaTrack)==null?void 0:i.kind}`),w.info(`${this.constructorName}.removeMediaTrackListeners`),this.mediaTrack.removeEventListener("ended",this.onTrackEnded),this.mediaTrack.removeEventListener("mute",this.onTrackMuted))}};u1=bK([Ii(t=>{throw new I(t.message,"1600")})],u1);const q3=u1;var wK=Object.defineProperty,_K=Object.getOwnPropertyDescriptor,L_=(t,e,i,s)=>{for(var r=s>1?void 0:s?_K(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&wK(e,i,r),r};const a0="[Dyte]nonSilentDeviceLabels";class wv extends q3{async setDevice(e){if(!e)throw w.warn("AudioMediaHandler.setDevice No device received"),new I("No device received!","1603");if(e.kind!=="audioinput")throw w.warn("AudioMediaHandler.setDevice Received non audio device"),new I("Non audio device received while setting device!","1603");try{const i=this.trackEnabled;this.userSelectedDevice=e.deviceId,await this.setMediaTrack(await this.mediaInterface.getAudioTrack(!i,e.deviceId))}catch(i){throw w.error("AudioMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new I(i.message,"1604")}}async enableTrack(e){if(this.trackEnabled){w.warn("AudioMediaHandler.enableTrack Track already enabled!");return}const i=await this.mediaInterface.getAudioTrack(e,this.userSelectedDevice);await this.setMediaTrack(i)}async setTransformedTrack(){var e;if(!((e=this.middlewares)!=null&&e.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await fK(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){w.error("AudioMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async onTrackEnded(){w.info("AudioMediaHandler.TrackEnded"),this.emit("trackEnded");const e=this.mediaTrack.enabled;this.disableTrack(),await this.enableTrack(!e),await this.setTransformedTrack(),this.emit("trackChanged")}onTrackMuted(){w.info("AudioMediaHandler.TrackMuted"),this.emit("trackMuted")}async conditionallyChangeTrack(e){var i;if(!e||this.userSelectedDevice)return e;let s=e;const r=await this.mediaInterface.getAudioInputDevices(),n=this.isNonPreferredDevice?r.filter(c=>c&&!this.isNonPreferredDevice(c)):r;if(!(n!=null&&n.length))return s;n.find(c=>c.deviceId===e.getSettings().deviceId)||(s.stop(),w.info("localmediahandler::setupstreams::found_audio_non_preferred"),s=await this.mediaInterface.getAudioTrack(!1,n[0].deviceId));const a=JSON.parse(zn.getItem(a0));if(a!=null&&a.devices.some(c=>c.label===s.label))return s;if(!await np(s)){const c=(i=a==null?void 0:a.devices.concat({label:s.label}))!=null?i:[{label:s.label}];return zn.setItem(a0,JSON.stringify({devices:c})),s}w.info("AudioMediaHandler.conditionallyChangeTrack.DetectedSilentTrack");const o=s.getSettings().deviceId;return n.filter(c=>c.deviceId!==o).some(async c=>{if(s=await this.mediaInterface.getAudioTrack(!1,c.deviceId),!await np(s)){const u=a.devices.concat({label:s.label});return zn.setItem(a0,JSON.stringify({devices:u})),w.info("AudioMediaHandler.conditionallyChangeTrack.SuccesfullyChangedTrack"),!0}return w.info("AudioMediaHandler.conditionallyChangeTrack.AnotherSilentTrackFound"),!1}),s}}L_([S.trace("AudioMediaHandler.setTransformedTrack")],wv.prototype,"setTransformedTrack",1);L_([S.trace("AudioMediaHandler.onTrackEnded")],wv.prototype,"onTrackEnded",1);L_([S.trace("AudioMediaHandler.conditionallyChangeTrack")],wv.prototype,"conditionallyChangeTrack",1);function _v(t,e,i){if(Me.isChromiumBased()){if(e==="NotAllowedError")return i.indexOf("by system")>0?"SYSTEM_DENIED":t==="screenshare"?"CANCELED":"DENIED";if(e==="NotReadableError")return"COULD_NOT_START"}else if(Me.isSafari()){if(e==="NotAllowedError")return"DENIED"}else if(Me.isFirefox()){if(e==="NotFoundError"||e==="NotReadableError")return"SYSTEM_DENIED";if(e==="NotAllowedError")return"DENIED";if(e==="AbortError")return"COULD_NOT_START"}return"COULD_NOT_START"}function o0(t){return t===2 .toString()?Xa.DENIED:t===4 .toString()?Xa.SYS_DENIED:t===1 .toString()?Xa.ACCEPTED:Xa.FAILED}class kK{constructor(){v(this,"permissions"),this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"}}async getAudioInputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="audioinput")}async getVideoInputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="videoinput")}async getAudioOutputDevices(){return(await this.getAvailableDevices()).filter(e=>e.kind==="audiooutput")}}var SK=Object.defineProperty,xK=Object.getOwnPropertyDescriptor,qr=(t,e,i,s)=>{for(var r=s>1?void 0:s?xK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&SK(e,i,r),r},sg,ru,Rn,cE;let Ws=(cE=class extends kK{constructor(t){super(),R(this,sg,void 0),R(this,ru,void 0),R(this,Rn,void 0),P(this,Rn,new d3(t)),P(this,ru,new AbortController),this.getAvailableDevices()}get constraintsBuilder(){return p(this,Rn)}async destruct(){var t;(t=p(this,ru))==null||t.abort()}handlePermissionErrors(t,e){const i=_v(t,e.name,e.message);this.permissions[t]=i,T.emit(E.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:t})}async getAudioAndVideoTrack(){const t={audio:p(this,Rn).getAudioConstraints().audio,video:p(this,Rn).getVideoConstraints().video};try{const e=await navigator.mediaDevices.getUserMedia(t),i=e.getAudioTracks()[0];let s=e.getVideoTracks()[0];if(this.permissions.audio="ACCEPTED",this.permissions.video="ACCEPTED",ee.hasFeature(ie.OBS_QUALITY)&&s.label.includes("OBS Virtual")){const r=(await this.getVideoInputDevices()).find(n=>n.label.includes("OBS Virtual"));s=await this.getVideoTrack(r.deviceId)}return T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),{audioTrack:i,videoTrack:s}}catch(e){throw w.error("WebMediaInterface.getAudioAndVideoTrack",{error:e}),new I("Couldnt fetch audio and video track")}}async getAudioTrack(t,e){const i=p(this,Rn).getAudioConstraints(e);try{const s=(await navigator.mediaDevices.getUserMedia(i)).getAudioTracks()[0];return s.enabled=!t,this.permissions.audio="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),s}catch(s){throw this.handlePermissionErrors("audio",new Hn(s.name,s.message,i)),new I(s.message,"1601")}}async getScreenShareTracks(){const t=p(this,Rn).getScreenShareConstraints();try{const e=await navigator.mediaDevices.getDisplayMedia(t);return this.permissions.screenshare="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"}),{audioTrack:e.getAudioTracks()[0],videoTrack:e.getVideoTracks()[0]}}catch(e){throw this.handlePermissionErrors("screenshare",new Hn(e.name,e.message,t)),w.error("WebMediaInterface.getScreenShareTracks Error while fetching screenshare tracks",{error:e}),new I("Couldnt fetch screen share tracks")}}async getCurrentDeviceLabel(t){const e=await this.getDevice(t||"default");return e==null?void 0:e.label}async getVideoTrack(t){const e=ee.hasFeature(ie.OBS_QUALITY),i=await this.getCurrentDeviceLabel(t),s=i&&i.includes("OBS Virtual"),{video:r}=p(this,Rn).getVideoConstraints(t);let n={};e&&s&&typeof r!="boolean"?n={deviceId:r.deviceId}:n=r;try{const a=(await navigator.mediaDevices.getUserMedia({video:n})).getVideoTracks()[0];if(e&&s&&typeof r!="boolean"&&typeof r.width=="object"){const{width:o,height:c}=a.getSettings(),{ideal:u}=r.width;a.applyConstraints({width:{ideal:u},height:{ideal:Math.floor(c*u/o)},frameRate:r.frameRate})}return this.permissions.video="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),a}catch(a){throw this.handlePermissionErrors("video",new Hn(a.name,a.message,n)),w.error("WebMediaInterface.getVideoTrack Error while fetching video track",{error:a}),new I("Couldnt fetch video track")}}async getAvailableDevices(){try{const t=await navigator.mediaDevices.enumerateDevices();return P(this,sg,t),t}catch(t){throw w.error("enumerate_devices_failed",{error:t}),new I("Failed to get available devices")}}async getAvailableDevicesByKind(t){try{return(await navigator.mediaDevices.enumerateDevices()).filter(({kind:e})=>t===e)}catch(e){throw w.error("enumerate_devices_failed",{error:e}),new I("Failed to get available devices by kind")}}async getDevice(t){try{return(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.deviceId===t)[0]}catch(e){throw w.error("enumerate_devices_failed",{error:e}),new I("Failed to get device")}}onDeviceChange(t){Me.supportsDeviceChangeEvent()&&navigator.mediaDevices.addEventListener("devicechange",m3(async e=>{const i=p(this,sg),s=new Set(i.map(o=>o.deviceId)),r=await this.getAvailableDevices(),n=new Set(r.map(o=>o.deviceId)),a={added:r.filter(o=>!s.has(o.deviceId)),removed:i.filter(o=>!n.has(o.deviceId))};t(e,a)},100),{signal:p(this,ru).signal})}},sg=new WeakMap,ru=new WeakMap,Rn=new WeakMap,cE);qr([S.trace("WebMediaInterface.destruct")],Ws.prototype,"destruct",1);qr([S.trace("WebMediaInterface.handlePermissionErrors")],Ws.prototype,"handlePermissionErrors",1);qr([S.trace("WebMediaInterface.getAudioAndVideoTrack")],Ws.prototype,"getAudioAndVideoTrack",1);qr([S.trace("WebMediaInterface.getAudioTrack")],Ws.prototype,"getAudioTrack",1);qr([S.trace("WebMediaInterface.getScreenShareTracks")],Ws.prototype,"getScreenShareTracks",1);qr([S.trace("WebMediaInterface.getVideoTrack")],Ws.prototype,"getVideoTrack",1);qr([S.trace("WebMediaInterface.getAvailableDevices")],Ws.prototype,"getAvailableDevices",1);qr([S.trace("WebMediaInterface.getAvailableDevicesByKind")],Ws.prototype,"getAvailableDevicesByKind",1);qr([S.trace("WebMediaInterface.getDevice")],Ws.prototype,"getDevice",1);qr([S.trace("WebMediaInterface.onDeviceChange")],Ws.prototype,"onDeviceChange",1);Ws=qr([Ii(t=>{throw new I(t.message,"1600")})],Ws);const G3=Ws;var Ou;class EK{constructor(e){R(this,Ou,void 0),v(this,"currentDevice"),P(this,Ou,e)}async setupSpeaker(e){var i;if(!(p(this,Ou)instanceof G3))return;let s=e;if(e||([s]=await p(this,Ou).getAvailableDevicesByKind("audiooutput")),!s)throw new I("No speaker found");((i=this.currentDevice)==null?void 0:i.deviceId)!==s.deviceId&&(this.currentDevice!=null||(this.currentDevice=s),document.querySelectorAll("audio").forEach(async r=>{if(typeof r.sinkId<"u"&&this.currentDevice.deviceId&&r.sinkId!==this.currentDevice.deviceId)try{await r.setSinkId(this.currentDevice.deviceId)}catch{}}))}}Ou=new WeakMap;class TK extends Nt{constructor(e){super(),v(this,"mediaInterface"),v(this,"audioMediaTrack"),v(this,"videoMediaTrack"),this.mediaInterface=e}get trackEnabled(){return!!this.videoMediaTrack}async enableScreenShare(){var e,i;const{audioTrack:s,videoTrack:r}=await this.mediaInterface.getScreenShareTracks();this.audioMediaTrack=s,this.videoMediaTrack=r,this.addMediaTrackListeners(),((i=(e=this.mediaInterface)==null?void 0:e.permissions)==null?void 0:i.screenshare)!=="ACCEPTED"&&this.mediaInterface.permissions&&(this.mediaInterface.permissions.screenshare="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.mediaInterface.permissions.screenshare,kind:"screenshare"}))}disableScreenShare(){var e,i;this.removeMediaTrackListeners(),(e=this.audioMediaTrack)==null||e.stop(),(i=this.videoMediaTrack)==null||i.stop(),this.videoMediaTrack=void 0,this.audioMediaTrack=void 0}async updateConstraints(e){if(!this.videoMediaTrack)throw new I("No media track enabled!");const i=this.mediaInterface;if(!i.constraintsBuilder)throw new I("update constraints not supported for non web clients","1100");try{this.videoMediaTrack.applyConstraints(i.constraintsBuilder.getUpdatedVideoConstraints(e)),this.addMediaTrackListeners()}catch(s){w.error("ScreenShareHandler.updateConstraints.error",{error:s})}}addMediaTrackListeners(){var e;(e=this.videoMediaTrack)==null||e.addEventListener("ended",this.onTrackEnded.bind(this))}removeMediaTrackListeners(){var e;(e=this.videoMediaTrack)==null||e.removeEventListener("ended",this.onTrackEnded)}onTrackEnded(){this.emit("trackEnded")}}var yd;class CK{constructor(){R(this,yd,void 0)}terminateMiddlewareWebWorker(){if(p(this,yd))try{nR(p(this,yd)),P(this,yd,void 0)}catch{w.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(e,i){if(!(e!=null&&e.length))return i;const s=await Promise.all(e==null?void 0:e.map(u=>u())),r=new MediaStream;r.addTrack(i);const n=document.createElement("canvas"),a=n.getContext("2d"),o=document.createElement("video");o.srcObject=r,o.autoplay=!0,this.terminateMiddlewareWebWorker();const c=async()=>{if(i.enabled===!1||i.readyState==="ended"){this.terminateMiddlewareWebWorker(),o.remove(),n.remove();return}try{a.drawImage(o,0,0);for(let u=0;u<s.length;u+=1)await s[u](n,a)}catch(u){w.error("getTransformedVideoTrack::middleware_execution_failed",{error:u})}};try{o.play()}catch{}return o.addEventListener("play",()=>{n.width=o.width||i.getSettings().width,n.height=o.width||i.getSettings().height,P(this,yd,aR(c,50))},!1),n.captureStream().getVideoTracks()[0]}}yd=new WeakMap;var PK=Object.defineProperty,RK=Object.getOwnPropertyDescriptor,N_=(t,e,i,s)=>{for(var r=s>1?void 0:s?RK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&PK(e,i,r),r},Lu;class kv extends q3{constructor(e,i,s){super(e,i,s),R(this,Lu,void 0),P(this,Lu,new CK)}async setDevice(e){if(!e)throw w.warn("VideoMediaHandler.setDevice No device received"),new I("No device received!");if(e.kind!=="videoinput")throw w.warn("VideoMediaHandler.setDevice Received non video device",{devices:[e]}),new I("Non video device received while setting video device!");if(this.userSelectedDevice=e.deviceId,!(this.mediaTrack&&this.mediaTrack.enabled)){w.warn("VideoMediaHandler.setDevice Tried switching device with video disabled",{devices:[e]}),this.currentDevice=e;return}try{await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}catch(i){throw w.error("VideoMediaHandler.setDevice.error",{error:i}),this.disableTrack(),new I("Failed to change device")}}async enableTrack(){if(this.trackEnabled){w.warn("VideoMediaHandler.enableTrack Track already enabled!");return}await this.setMediaTrack(await this.mediaInterface.getVideoTrack(this.userSelectedDevice))}async setTransformedTrack(){var e;if(!((e=this.middlewares)!=null&&e.length)){this.transformedMediaTrack=this.mediaTrack;return}try{this.transformedMediaTrack=await p(this,Lu).getTransformedVideoTrack(this.middlewares,this.mediaTrack),this.emit("trackChanged")}catch(i){w.error("VideoMediaHandler.setTransformedTrack",{error:i}),this.transformedMediaTrack=this.mediaTrack}}async updateConstraints(e){if(!this._mediaTrack)throw new I("No media track enabled!");const i=this.mediaInterface;if(!i.constraintsBuilder)throw new I("update constraints not supported for non web clients","1100");try{this._mediaTrack.applyConstraints(i.constraintsBuilder.getUpdatedVideoConstraints(e)),await this.setTransformedTrack(),this.addMediaTrackListeners(),await this.setCurrentDevice()}catch(s){w.error("VideoMediaHandler.updateConstraints.error",{error:s})}}terminateMiddlewareWebWorker(){p(this,Lu).terminateMiddlewareWebWorker()}async onTrackEnded(){w.info("VideoMediaHandler.TrackEnded"),this.disableTrack(),this.emit("trackEnded")}onTrackMuted(){w.info("VideoMediaHandler.TrackMuted"),this.emit("trackMuted")}async conditionallyChangeTrack(e){if(!e||this.userSelectedDevice)return e;let i=e;const s=await this.mediaInterface.getVideoInputDevices(),r=this.isNonPreferredDevice?s.filter(n=>!this.isNonPreferredDevice(n)):s;return r!=null&&r.length&&(r.find(n=>n.deviceId===e.getSettings().deviceId)||(i.stop(),w.info("localmediahandler::setupstreams::found_video_non_preferred"),i=await this.mediaInterface.getVideoTrack(r[0].deviceId))),i}}Lu=new WeakMap;N_([S.trace("VideoMediaHandler.setTransformedTrack")],kv.prototype,"setTransformedTrack",1);N_([S.trace("VideoMediaHandler.onTrackEnded")],kv.prototype,"onTrackEnded",1);N_([S.trace("VideoMediaHandler.conditionallyChangeTrack")],kv.prototype,"conditionallyChangeTrack",1);var IK=Object.defineProperty,AK=Object.getOwnPropertyDescriptor,Js=(t,e,i,s)=>{for(var r=s>1?void 0:s?AK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&IK(e,i,r),r},Si,Bi,xi,Ko,br;class Es extends Nt{constructor(e,i=jn){super(),R(this,Si,void 0),R(this,Bi,void 0),R(this,xi,void 0),R(this,Ko,void 0),R(this,br,void 0),P(this,Si,new G3(e)),P(this,Bi,new wv(p(this,Si),void 0,i)),P(this,xi,new kv(p(this,Si),void 0,i)),P(this,br,new TK(p(this,Si))),P(this,Ko,new EK(p(this,Si))),p(this,Bi).on("trackMuted",this.onAudioTrackMuted.bind(this)),p(this,Bi).on("trackChanged",this.onAudioTrackChanged.bind(this)),p(this,xi).on("trackChanged",this.onVideoTrackChanged.bind(this)),p(this,xi).on("trackEnded",this.onVideoTrackEnded.bind(this)),p(this,br).on("trackEnded",this.onScreenShareEnded.bind(this)),p(this,Si).onDeviceChange((s,r)=>{this.onDeviceChange(r)})}async repopulateAvailableDevices(){return!0}async setupStreams({audio:e,video:i}){let s,r;if(e&&i)try{const n=await p(this,Si).getAudioAndVideoTrack();s=n.audioTrack,r=n.videoTrack}catch(n){w.error("LocalMediaHandler::init::Failed to get audio video tracks",{error:n})}if(!s&&e)try{s=await p(this,Si).getAudioTrack(!1)}catch(n){w.error("LocalMediaHandler::init::Failed to get audio track",{error:n})}if(!r&&i)try{r=await p(this,Si).getVideoTrack()}catch(n){w.error("LocalMediaHandler::init::Failed to get video track",{error:n})}await p(this,Bi).setMediaTrack(s),await p(this,xi).setMediaTrack(r);try{await p(this,Ko).setupSpeaker()}catch{}}getCurrentDevices(){return{audio:p(this,Bi).currentDevice,video:p(this,xi).currentDevice,speaker:p(this,Ko).currentDevice}}get permissions(){return p(this,Si).permissions}getAllDevices(){return p(this,Si).getAvailableDevices()}getDeviceById(e,i){return p(this,Si).getDevice(e)}onAudioTrackMuted(){this.emit("AUDIO_TRACK_SILENT")}onAudioTrackChanged(){this.emit("AUDIO_TRACK_CHANGE")}get rawAudioTrack(){return p(this,Bi).mediaTrack}get audioTrack(){return p(this,Bi).transformedMediaTrack}get audioEnabled(){return p(this,Bi).trackEnabled}async enableAudio(){await p(this,Bi).unmuteTrack()}disableAudio(){p(this,Bi).muteTrack()}getAudioDevices(){return p(this,Si).getAudioInputDevices()}async setAudioDevice(e){await p(this,Bi).setDevice(e),this.emit("AUDIO_TRACK_CHANGE"),this.emit("DEVICE_CHANGE",{device:e})}setupSpeaker(){return p(this,Ko).setupSpeaker()}async setSpeakerDevice(e){await p(this,Ko).setupSpeaker(e),this.emit("DEVICE_CHANGE",{device:e})}onVideoTrackChanged(){this.emit("VIDEO_TRACK_CHANGE")}onVideoTrackEnded(){this.emit("VIDEO_TRACK_CHANGE")}get rawVideoTrack(){return p(this,xi).mediaTrack}get videoTrack(){return p(this,xi).transformedMediaTrack}get videoEnabled(){return p(this,xi).trackEnabled}async enableVideo(){await p(this,xi).unmuteTrack()}disableVideo(){p(this,xi).disableTrack()}getVideoDevices(){return p(this,Si).getVideoInputDevices()}async setVideoDevice(e){await p(this,xi).setDevice(e),this.emit("VIDEO_TRACK_CHANGE"),this.emit("DEVICE_CHANGE",{device:e})}async updateVideoConstraints(e){await p(this,xi).updateConstraints(e)}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}get screenShareTracks(){return{audio:p(this,br).audioMediaTrack,video:p(this,br).videoMediaTrack}}get screenShareEnabled(){return p(this,br).trackEnabled}async enableScreenShare(){await p(this,br).enableScreenShare()}async disableScreenShare(){p(this,br).disableScreenShare()}async updateScreenshareConstraints(e){await p(this,br).updateConstraints(e)}getSpeakerDevices(){return p(this,Si).getAudioOutputDevices()}addAudioMiddleware(e){return p(this,Bi).addMiddleware(e)}removeAudioMiddleware(e){return p(this,Bi).removeMiddleware(e)}addVideoMiddleware(e){return p(this,xi).addMiddleware(e)}removeVideoMiddleware(e){return p(this,xi).removeMiddleware(e)}destruct(){p(this,Bi).disableTrack(),p(this,xi).disableTrack(),p(this,xi).terminateMiddlewareWebWorker(),p(this,br).disableScreenShare(),p(this,Si).destruct()}async onDeviceChange(e){var i;(i=e==null?void 0:e.added)==null||i.forEach(async s=>{var r;s&&!jn(s)&&(s.kind==="audioinput"&&((r=this.audioTrack)==null?void 0:r.enabled)===!0?await this.setAudioDevice(s):s.kind==="audiooutput"&&await this.setSpeakerDevice(s))})}removeAllTracks(){this.destruct()}async removeDocumentEventListeners(){}}Si=new WeakMap,Bi=new WeakMap,xi=new WeakMap,Ko=new WeakMap,br=new WeakMap;Js([S.trace("MediaHandler.setupStreams")],Es.prototype,"setupStreams",1);Js([S.trace("MediaHandler.enableAudio")],Es.prototype,"enableAudio",1);Js([S.trace("MediaHandler.disableAudio")],Es.prototype,"disableAudio",1);Js([S.trace("MediaHandler.setAudioDevice")],Es.prototype,"setAudioDevice",1);Js([S.trace("MediaHandler.enableVideo")],Es.prototype,"enableVideo",1);Js([S.trace("MediaHandler.disableVideo")],Es.prototype,"disableVideo",1);Js([S.trace("MediaHandler.setVideoDevice")],Es.prototype,"setVideoDevice",1);Js([S.trace("MediaHandler.updateVideoConstraints")],Es.prototype,"updateVideoConstraints",1);Js([S.trace("MediaHandler.enableScreenShare")],Es.prototype,"enableScreenShare",1);Js([S.trace("MediaHandler.disableScreenShare")],Es.prototype,"disableScreenShare",1);Js([S.trace("MediaHandler.updateScreenshareConstraints")],Es.prototype,"updateScreenshareConstraints",1);Js([S.trace("MediaHandler.destruct")],Es.prototype,"destruct",1);Js([S.trace("MediaHandler.onDeviceChange")],Es.prototype,"onDeviceChange",1);var DK=Object.defineProperty,MK=Object.getOwnPropertyDescriptor,Ml=(t,e,i,s)=>{for(var r=s>1?void 0:s?MK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&DK(e,i,r),r},ei,bd;class Wc{constructor(e){R(this,ei,void 0),v(this,"audioMiddlewares",[]),v(this,"videoMiddlewares",[]),R(this,bd,void 0),P(this,ei,e)}terminateMiddlewareWebWorker(){if(p(this,bd))try{nR(p(this,bd)),P(this,bd,void 0)}catch{w.debug("WorkerTimers::terminateMiddlewareWebWorker::failed")}}async getTransformedVideoTrack(e){var i,s;if(!((i=this.videoMiddlewares)!=null&&i.length))return e;const r=await Promise.all((s=this.videoMiddlewares)==null?void 0:s.map(l=>l())),n=new MediaStream;n.addTrack(e);const a=document.createElement("canvas"),o=a.getContext("2d"),c=document.createElement("video");c.srcObject=n,c.autoplay=!0,this.terminateMiddlewareWebWorker();const u=async()=>{if(!p(this,ei).videoEnabled||e.readyState==="ended"){this.terminateMiddlewareWebWorker(),c.remove(),a.remove();return}try{o.drawImage(c,0,0);for(let l=0;l<r.length;l+=1)await r[l](a,o)}catch(l){w.error("getTransformedVideoTrack::middleware_execution_failed",{error:l})}};try{c.play()}catch{}return c.addEventListener("play",()=>{a.width=c.width||e.getSettings().width,a.height=c.width||e.getSettings().height,P(this,bd,aR(u,50))},!1),a.captureStream().getVideoTracks()[0]}async addVideoMiddleware(e){return Me.isSafari()?{success:!1,message:"Video middlewares are not yet supported in Safari."}:this.videoMiddlewares.includes(e)?{success:!0,message:"This video middleware has been applied, already. Skipping."}:(this.videoMiddlewares.push(e),p(this,ei).videoEnabled?(p(this,ei).setVideoTrack(await this.getTransformedVideoTrack(p(this,ei).rawVideoTrack)),p(this,ei).emit("VIDEO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the video middleware."}):{success:!0,message:"Successfully added the video middleware. It will be applied automatically once webcam is turned on."})}async removeVideoMiddleware(e){const i=this.videoMiddlewares.indexOf(e,0);return i>-1?(this.videoMiddlewares.splice(i,1),p(this,ei).videoEnabled&&(p(this,ei).setVideoTrack(await this.getTransformedVideoTrack(p(this,ei).rawVideoTrack)),p(this,ei).emit("VIDEO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the video middleware."}):{success:!0,message:"No such video middleware was found. Skipping."}}async getTransformedAudioTrack(e){var i,s;if(!((i=this.audioMiddlewares)!=null&&i.length))return e;const r=new AudioContext,n=await Promise.all((s=this.audioMiddlewares)==null?void 0:s.map(c=>c(r))),a=r.createMediaStreamSource(new MediaStream([e])),o=r.createMediaStreamDestination();try{let c=a;for(let u=0;u<n.length;u+=1)c.connect(n[u]),c=n[u];c.connect(o)}catch(c){return w.error("getTransformedAudioTrack::middleware_execution_failed",{error:c}),e}return o.stream.getAudioTracks()[0]}async addAudioMiddleware(e){return Me.isSafari()?{success:!1,message:"Audio middlewares are not yet supported in Safari."}:this.audioMiddlewares.includes(e)?{success:!0,message:"This audio middleware has been applied, already. Skipping."}:(this.audioMiddlewares.push(e),p(this,ei).audioEnabled?(p(this,ei).setAudioTrack(await this.getTransformedAudioTrack(p(this,ei).rawAudioTrack)),p(this,ei).emit("AUDIO_TRACK_CHANGE"),{success:!0,message:"Successfully applied the audio middleware."}):{success:!0,message:"Successfully added the audio middleware. It will be applied automatically once mic is turned on."})}async removeAudioMiddleware(e){const i=this.audioMiddlewares.indexOf(e,0);return i>-1?(this.audioMiddlewares.splice(i,1),p(this,ei).audioEnabled&&(p(this,ei).setAudioTrack(await this.getTransformedAudioTrack(p(this,ei).rawAudioTrack)),p(this,ei).emit("AUDIO_TRACK_CHANGE")),{success:!0,message:"Successfully removed the audio middleware."}):{success:!0,message:"No such audio middleware was found. Skipping."}}}ei=new WeakMap,bd=new WeakMap;Ml([S.trace("MediaMiddlewareUtils.getTransformedVideoTrack")],Wc.prototype,"getTransformedVideoTrack",1);Ml([S.trace("MediaMiddlewareUtils.addVideoMiddleware")],Wc.prototype,"addVideoMiddleware",1);Ml([S.trace("MediaMiddlewareUtils.removeVideoMiddleware")],Wc.prototype,"removeVideoMiddleware",1);Ml([S.trace("MediaMiddlewareUtils.getTransformedAudioTrack")],Wc.prototype,"getTransformedAudioTrack",1);Ml([S.trace("MediaMiddlewareUtils.addAudioMiddleware")],Wc.prototype,"addAudioMiddleware",1);Ml([S.trace("MediaMiddlewareUtils.removeAudioMiddleware")],Wc.prototype,"removeAudioMiddleware",1);const Nu=class{constructor(){v(this,"mediaPermissionEvent"),this.mediaPermissionEvent=!0}static getInstance(){return Nu.instance||(Nu.instance=new Nu),Nu.instance}get shouldEmitMediaPermissionEvent(){return this.mediaPermissionEvent}setEmitMediaPermissionEvent(t){this.mediaPermissionEvent=t}};let J3=Nu;v(J3,"instance");const rg=J3.getInstance(),OK={lowVolumeThreshold:-40,clipThreshold:1,silentThreshold:1/1987,delay:500,media:"audio"};var of,Gd,p1,K3,sm,c0;const Q3=class{constructor(t){R(this,p1),R(this,sm),v(this,"analyser"),v(this,"silentThreshold"),v(this,"lowVolumeThreshold"),v(this,"clipThreshold"),v(this,"delay"),v(this,"audioContext"),v(this,"audioSource"),v(this,"metadata",{}),v(this,"analysing"),v(this,"track"),R(this,of,void 0),R(this,Gd,void 0);const{lowVolumeThreshold:e,silentThreshold:i,clipThreshold:s,delay:r,media:n}={...OK,...t};this.lowVolumeThreshold=e,this.silentThreshold=i,this.clipThreshold=s,this.delay=r,this.analysing=!1,P(this,Gd,n)}setTrack(t){if(!t)return;this.track=t.clone();const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.analyser=this.audioContext.createAnalyser(),p(this,Gd)==="screenshare"){T.emit(E.SCREENSHARE_AUDIO_TRACK_CREATED);return}T.emit(E.AUDIO_TRACK_CREATED)}getTrackMetadata(){if(!this.track)return null;switch(this.metadata.label=this.track.label,this.metadata.channelCountMode=this.analyser.channelCountMode,this.metadata.channelCount=this.analyser.channelCount,this.metadata.channelInterpretation=this.analyser.channelInterpretation,this.metadata.outputs=this.analyser.numberOfOutputs,this.analyser.numberOfOutputs){case 1:this.metadata.channelType="MONO";break;case 2:this.metadata.channelType="STEREO";break;case 4:this.metadata.channelType="QUAD";break}return this.metadata}async startTrackAnalysis(){if(!this.track||this.analysing)return!1;try{return await this.audioContext.resume(),await Pe(this,p1,K3).call(this),this.analysing=!0,!0}catch(t){return w.error(t),!1}}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(p(this,of)))}cleanup(){var t,e,i,s,r;if(this.stopTrackAnalysis(),(t=this.analyser)==null||t.disconnect(),(e=this.audioSource)==null||e.disconnect(this.analyser),(i=this.audioSource)==null||i.disconnect(),(s=this.audioContext)==null||s.close(),this.audioContext=void 0,this.analyser=void 0,this.audioSource=void 0,(r=this.track)==null||r.stop(),this.track=void 0,p(this,Gd)==="screenshare"){T.emit(E.SCREENSHARE_AUDIO_TRACK_CLOSED);return}T.emit(E.AUDIO_TRACK_CLOSED)}static dbFS(t){const e=20*(Math.log(t)/Math.log(10));return Math.round(e*10)/10}};let Y3=Q3;of=new WeakMap,Gd=new WeakMap,p1=new WeakSet,K3=async function(){try{const t=new MediaStream;t.addTrack(this.track),this.audioSource=this.audioContext.createMediaStreamSource(t),this.audioSource.connect(this.analyser),await new Promise(e=>{window.requestAnimationFrame(()=>{Pe(this,sm,c0).call(this),e(!0)})})}catch(t){w.error(t)}},sm=new WeakSet,c0=function(){const t=new Float32Array(this.analyser.fftSize);this.analyser.getFloatTimeDomainData(t);let e=0;for(const n of t)e+=n*n;const i=Math.sqrt(e/t.length),s=Q3.dbFS(i),r={volume:i,lowVolume:s<this.lowVolumeThreshold,silence:i<this.silentThreshold,clip:i>this.clipThreshold,timestamp:new Date().getTime()};p(this,Gd)==="screenshare"?T.emit(E.SCREENSHARE_AUDIO_TRACK_ANALYSIS,r):T.emit(E.AUDIO_TRACK_ANALYSIS,r),P(this,of,setTimeout(()=>{window.requestAnimationFrame(Pe(this,sm,c0).bind(this))},this.delay))};const on=new Y3,xc=new Y3({media:"screenshare"});var LK=Object.defineProperty,NK=Object.getOwnPropertyDescriptor,pt=(t,e,i,s)=>{for(var r=s>1?void 0:s?NK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&LK(e,i,r),r},Qe,Ao,dE;const Z3=(dE=class extends rs.EventEmitter{constructor(t,e){super(),R(this,Qe,void 0),R(this,Ao,void 0),v(this,"mediaMiddlewareUtils"),v(this,"audioTrack"),v(this,"rawAudioTrack"),v(this,"videoTrack"),v(this,"rawVideoTrack"),v(this,"screenShareTracks"),v(this,"audioEnabled"),v(this,"videoEnabled"),v(this,"screenShareEnabled"),v(this,"currentDevices"),v(this,"permissions"),v(this,"audioUpdateInProgress"),v(this,"videoUpdateInProgress"),v(this,"audioRestartInProgress"),v(this,"videoRestartInProgress"),v(this,"screenShareUpdateInProgress"),v(this,"isDeprecated",()=>!0),P(this,Qe,t),P(this,Ao,new d3(e)),this.audioEnabled=!0,this.videoEnabled=!0,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,this.audioRestartInProgress=!1,this.videoRestartInProgress=!1,this.screenShareUpdateInProgress=!1,this.screenShareEnabled=!1,this.permissions={audio:"NOT_REQUESTED",video:"NOT_REQUESTED",screenshare:"NOT_REQUESTED"},this.screenShareTracks={audio:void 0,video:void 0},this.currentDevices={audio:void 0,video:void 0,speaker:void 0},p(this,Qe).onDeviceChange((i,s)=>{this.onDeviceChange(s,!1),this.emit("DEVICE_LIST_UPDATED",s)}),this.conditionallyRestartAudio=this.conditionallyRestartAudio.bind(this),this.conditionallyRestartVideo=this.conditionallyRestartVideo.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange),this.on("AUDIO_TRACK_CHANGE",()=>{this.notifyIfTrackSilent()}),T.on(E.PRODUCER_TRACK_ENDED,({kind:i})=>{i==="mic"&&this.conditionallyRestartAudio(),i==="webcam"&&this.conditionallyRestartVideo()})}handlePermissionErrors(t,e){const i=_v(t,e.name,e.message);this.permissions[t]=i,T.emit(E.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:t})}async repopulateAvailableDevices(){return p(this,Qe).repopulateAvailableDevices()}onVisibilityChange(t){document.visibilityState==="visible"&&(Me.isMobile()&&this.conditionallyRestartAudio(),this.conditionallyRestartVideo()),Z.tabChanged(document.visibilityState==="visible"),document.visibilityState!=="visible"?Z.browserBackgrounded():Z.browserForegrounded()}async conditionallyRestartAudio(t){var e,i;if(this.audioRestartInProgress||(this.audioRestartInProgress=!0,!((e=this.currentDevices)!=null&&e.audio)||!this.audioEnabled))return;await Promise.race([new Promise(r=>{var n;return(n=this.rawAudioTrack)==null?void 0:n.addEventListener("unmute",a=>{r(a)})}),new Promise(r=>setTimeout(r,50))]),w.info("performingCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}});const s=await this.shouldReacquireTrack("audio");w.info("performedCheck::shouldReacquireAudioTrack",{actions:{trackRobustness:{reacquireTrack:s}}}),s&&(w.info("reacquiring_audio_track"),this.removeMediaStreamTrackListeners(this.rawAudioTrack),Me.isChromiumBased()&&await p(this,Qe).repopulateAvailableDevices(),await this.setupAudioStream((i=this.currentDevices.audio)==null?void 0:i.deviceId),this.addMediaStreamTrackListeners(this.rawAudioTrack),this.emit("AUDIO_TRACK_CHANGE")),this.audioRestartInProgress=!1}async conditionallyRestartVideo(t){var e;if(this.videoRestartInProgress||(this.videoRestartInProgress=!0,!((e=this.currentDevices)!=null&&e.video)||!this.videoEnabled))return;w.info("performingCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}}),await Promise.race([new Promise(s=>{var r;return(r=this.rawVideoTrack)==null?void 0:r.addEventListener("unmute",s)}),new Promise(s=>setTimeout(s,50))]);const i=await this.shouldReacquireTrack("video");w.info("performedCheck::shouldReacquireVideoTrack",{actions:{trackRobustness:{reacquireTrack:i}}}),i&&(w.info("reacquiring_video_track"),this.removeMediaStreamTrackListeners(this.rawVideoTrack),await p(this,Qe).repopulateAvailableDevices(),await this.setupVideoStream(this.currentDevices.video.deviceId),this.addMediaStreamTrackListeners(this.rawVideoTrack),this.emit("VIDEO_TRACK_CHANGE")),this.videoRestartInProgress=!1}async shouldReacquireTrack(t){if(t==="audio"){if(this.audioUpdateInProgress||!this.audioEnabled)return!1;if(!this.rawAudioTrack||!this.audioTrack)return!0;const s=this.rawAudioTrack.muted||this.audioTrack.muted,r=(this.rawAudioTrack.readyState==="ended"||this.audioTrack.readyState==="ended")&&this.audioEnabled,n=await np(this.rawAudioTrack);return document.visibilityState==="visible"&&(n||r||s)}if(this.videoUpdateInProgress||!this.videoEnabled)return!1;if(!this.rawVideoTrack||!this.videoTrack)return!0;const e=this.rawVideoTrack.muted||this.videoTrack.muted,i=(this.rawVideoTrack.readyState==="ended"||this.videoTrack.readyState==="ended")&&this.videoEnabled;return document.visibilityState==="visible"&&(i||e)}onAudioUnmute(t){w.info("audio_track_unmuted",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}})}onVideoUnmute(t){w.info("video_track_unmuted",{actions:{trackRobustness:{eventType:t==null?void 0:t.type}}})}removeMediaStreamTrackListeners(t){if(w.info(`Removing ${t.kind} listerners`),!t)return;const e=t.kind==="audio"?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return t.removeEventListener("ended",e),t.removeEventListener("mute",e),t.removeEventListener("unmute",t.kind==="audio"?this.onAudioUnmute:this.onVideoUnmute),t}addMediaStreamTrackListeners(t){if(!t)return null;w.info(`adding_${t.kind}_stream_listerners`);const e=t.kind==="audio",i=e?this.conditionallyRestartAudio:this.conditionallyRestartVideo;return t.addEventListener("ended",async()=>{await i();const s=e?this.audioEnabled:this.videoEnabled,r=e?this.audioTrack:this.videoTrack,n=e?"FORCE_MUTE_AUDIO":"FORCE_MUTE_VIDEO";s&&!(r&&r.readyState==="live"&&r.enabled)&&(w.info(`LocalMediaHandler::trackEnded::Failed to restart ${t.kind} track`),this.emit(n))}),t.addEventListener("mute",i),t.addEventListener("unmute",e?this.onAudioUnmute:this.onVideoUnmute),t}async notifyIfTrackSilent(){var t,e,i,s,r,n;this.audioEnabled&&this.audioTrack&&this.audioTrack.readyState!=="ended"&&this.audioTrack.enabled&&await np(this.audioTrack)===!0&&(w.info("LocalMediaHandler:notifyIfTrackSilent:TrackSilent",{media:{audio:{enabled:this.audioEnabled,deviceId:(e=(t=this.audioTrack)==null?void 0:t.getSettings())==null?void 0:e.deviceId,permission:(i=this.permissions)==null?void 0:i.audio,deviceName:(r=(s=this.currentDevices)==null?void 0:s.audio)==null?void 0:r.label,trackId:(n=this.audioTrack)==null?void 0:n.id}}}),this.emit("AUDIO_TRACK_SILENT"))}async setupAudioStream(t,e=!0){var i,s,r;if(!this.audioUpdateInProgress)try{this.audioUpdateInProgress=!0;const n=p(this,Qe).getAudioDevices();if(!n.length)throw this.audioEnabled=!1,new Hn("COULD_NOT_START","No audio devices",{});let a=t;(!a||!n.find(c=>c.deviceId===a))&&(a=await this.getPreferredDeviceId("AUDIO"),w.debug("setupAudioStream::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}}));const o=It.getAudioConstraints({audioDeviceId:a});e&&((i=this.rawAudioTrack)==null||i.stop(),(s=this.audioTrack)==null||s.stop()),this.rawAudioTrack=await It.getAudioTrack(o),a=this.rawAudioTrack.getSettings().deviceId,((r=this.currentDevices.audio)==null?void 0:r.deviceId)!==a&&(this.currentDevices.audio=p(this,Qe).getDeviceById(a,"audioinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.audio})),this.rawAudioTrack.enabled=this.audioEnabled,this.setAudioTrack(await this.mediaMiddlewareUtils.getTransformedAudioTrack(this.rawAudioTrack)),this.addMediaStreamTrackListeners(this.rawAudioTrack),await p(this,Qe).repopulateAvailableDevices(),this.permissions.audio="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),Z.mediaPermission("AUDIO",Xa.ACCEPTED),Z.selectedDevice("AUDIO",this.currentDevices.audio),a&&zn.setItem("lastUsedAudioDeviceId",a)}catch(n){this.handlePermissionErrors("audio",n)}finally{this.audioUpdateInProgress=!1}}async getPreferredDeviceId(t){var e,i;let s;if(t==="AUDIO"){const r=p(this,Qe).getAudioDevices(),n=zn.getItem("lastUsedAudioDeviceId");w.debug("getPreferredDeviceId::lastUsedAudioDeviceId",{preferredDevice:{lastUsedPreferredDeviceId:n,kind:"audio"}});let a;n&&(a=r.find(o=>o.deviceId===n)),a?s=n:ee.hasFeature(ie.REMOVE_OPERATIONAL_MIC)||(s=(await this.getOperationalMicDeviceId()).deviceId),s||(s=(e=r[0])==null?void 0:e.deviceId)}if(t==="VIDEO"){const r=zn.getItem("lastUsedVideoDeviceId");w.debug("getPreferredDeviceId::lastUsedVideoDeviceId",{preferredDevice:{kind:"video",lastUsedPreferredDeviceId:r}});const n=p(this,Qe).getVideoDevices();let a;r&&(a=n.find(o=>o.deviceId===r)),a?s=r:s=(await this.getOperationalWebcamDeviceId()).deviceId,s||(s=(i=n[0])==null?void 0:i.deviceId)}return s}async setupVideoStream(t,e=!0){var i,s;if(!this.videoUpdateInProgress)try{this.videoUpdateInProgress=!0;const r=p(this,Qe).getVideoDevices();if(!r.length)throw this.videoEnabled=!1,new Hn("COULD_NOT_START","No video devices",{});let n=t;if((!n||!r.find(a=>a.deviceId===n))&&(n=await this.getPreferredDeviceId("VIDEO"),w.debug("setupVideoStream::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:n,kind:"video"}})),e&&((i=this.videoTrack)==null||i.stop()),this.videoEnabled){const a=p(this,Ao).getVideoConstraints(n);this.rawVideoTrack=await It.getVideoTrack(a),n=this.rawVideoTrack.getSettings().deviceId,this.setVideoTrack(await this.mediaMiddlewareUtils.getTransformedVideoTrack(this.rawVideoTrack)),this.addMediaStreamTrackListeners(this.rawVideoTrack)}await p(this,Qe).repopulateAvailableDevices(),((s=this.currentDevices.video)==null?void 0:s.deviceId)!==n&&(this.currentDevices.video=p(this,Qe).getDeviceById(n,"videoinput"),this.emit("DEVICE_CHANGE",{device:this.currentDevices.video})),this.permissions.video="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),Z.mediaPermission("VIDEO",Xa.ACCEPTED),Z.selectedDevice("VIDEO",this.currentDevices.video),n&&zn.setItem("lastUsedVideoDeviceId",n)}catch(r){this.handlePermissionErrors("video",r)}finally{this.videoUpdateInProgress=!1}}async setupScreenShareStreams(){if(this.screenShareUpdateInProgress)return;const t=p(this,Ao).getScreenShareConstraints();ee.hasFeature(ie.SCREENSHARE_MAX_DIMENSIONS)&&(t.video.width.max=window.screen.width,t.video.height.max=window.screen.height);try{this.screenShareUpdateInProgress=!0;const e=await It.getScreenShareTracks(t);this.setScreenShareTracks(e)}catch(e){throw this.handlePermissionErrors("screenshare",new Hn(e.name,e.message,t)),new I(e.message)}finally{this.screenShareUpdateInProgress=!1}}async setupSpeaker(t){var e;const i=p(this,Qe).getSpeakerDevices();if(!i.length)return;const s=t!=null?t:i[0].deviceId;((e=this.currentDevices.speaker)==null?void 0:e.deviceId)!==s&&(this.currentDevices.speaker=p(this,Qe).getDeviceById(s,"audiooutput"),Z.selectedDevice("SPEAKER",this.currentDevices.speaker),this.emit("DEVICE_CHANGE",{device:this.currentDevices.speaker})),document.querySelectorAll("audio").forEach(async r=>{if(typeof r.sinkId<"u"&&this.currentDevices.speaker.deviceId&&r.sinkId!==this.currentDevices.speaker.deviceId)try{await r.setSinkId(this.currentDevices.speaker.deviceId)}catch{}})}async getOperationalWebcamDeviceId(){const t=p(this,Qe).getVideoDevices();if(!t.length)return{isOperational:!1,deviceId:null};rg.setEmitMediaPermissionEvent(!1);const e=[],i=await t.reduce(async(s,r)=>{const n=await s;if(n!==null)return n;const a=p(this,Ao).getVideoConstraints(r.deviceId);try{return(await It.getVideoTrack(a)).stop(),r.deviceId}catch(o){w.error("getOperationalWebcamDeviceId::could_not_acquire_video_device",{error:o,constraints:a}),e.push({exception:o,constraints:a})}return n},Promise.resolve(null));if(rg.setEmitMediaPermissionEvent(!0),!i&&e.length>0&&e.length===t.length){const{exception:s,constraints:r}=e[0];throw new Hn(s.name,s.message,r)}return i?{isOperational:!0,deviceId:i}:{isOperational:!1,deviceId:t[0].deviceId}}async getOperationalMicDeviceId(){const t=p(this,Qe).getAudioDevices();if(!t.length)return{isOperational:!1,deviceId:null};const e=[];rg.setEmitMediaPermissionEvent(!1);const i=await t.reduce(async(s,r)=>{const n=await s;if(n!==null)return n;const a=It.getAudioConstraints({audioDeviceId:r.deviceId});try{const o=await It.getAudioTrack(a),c=await np(o);if(o==null||o.stop(),!c)return r}catch(o){w.error("getOperationalMicDeviceId::could_not_acquire_audio_device",{error:o,constraints:a}),e.push({exception:o,constraints:a})}return n},Promise.resolve(null));if(rg.setEmitMediaPermissionEvent(!0),!i&&e.length>0&&e.length===t.length){const{exception:s,constraints:r}=e[0];throw new Hn(s.name,s.message,r)}return i?{isOperational:!0,deviceId:i.deviceId}:{isOperational:!1,deviceId:t[0].deviceId}}async setupStreams({audio:t,video:e}){var i;const s={};this.currentDevices||(this.currentDevices={audio:void 0,video:void 0,speaker:void 0});try{if(t&&!this.audioUpdateInProgress&&p(this,Qe).getAudioDevices().length!==0){const a=await this.getPreferredDeviceId("AUDIO");w.info("setupStreams::AUDIO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"audio"}});const o=It.getAudioConstraints({audioDeviceId:a});s.audio=o.audio}if(e&&!this.videoUpdateInProgress&&p(this,Qe).getVideoDevices().length!==0){const a=await this.getPreferredDeviceId("VIDEO");w.info("setupStreams::VIDEO::getPreferredDeviceId",{preferredDevice:{preferredDeviceId:a,kind:"video"}});const o=p(this,Ao).getVideoConstraints(a);s.video=o.video}if(((i=Object.keys(s))==null?void 0:i.length)===0){this.audioEnabled=t!=null?t:this.audioEnabled,this.videoEnabled=e!=null?e:this.videoEnabled,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1;return}const{audioTrack:r,videoTrack:n}=await It.getAudioAndVideoTrack(s);t&&r&&(this.audioTrack=r,this.rawAudioTrack=r,this.permissions.audio="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}),this.currentDevices.audio=p(this,Qe).getDeviceById(r.getSettings().deviceId,"audioinput"),zn.setItem("lastUsedAudioDeviceId",r.getSettings().deviceId)),e&&n&&(this.videoTrack=n,this.rawVideoTrack=n,this.permissions.video="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}),this.currentDevices.video=p(this,Qe).getDeviceById(n.getSettings().deviceId,"videoinput"),zn.setItem("lastUsedVideoDeviceId",n.getSettings().deviceId)),await p(this,Qe).repopulateAvailableDevices()}catch(r){r.name==="NotAllowedError"&&(t&&await this.setupAudioStream(),e&&await this.setupVideoStream())}this.audioEnabled=!!this.audioTrack,this.videoEnabled=!!this.videoTrack,this.screenShareEnabled=!1,this.audioUpdateInProgress=!1,this.videoUpdateInProgress=!1,await this.setupSpeaker()}stopAudioTrack(){var t,e;this.audioUpdateInProgress||(this.audioUpdateInProgress=!0,(t=this.audioTrack)==null||t.stop(),(e=this.rawAudioTrack)==null||e.stop(),this.audioEnabled=!1,this.audioUpdateInProgress=!1)}stopVideoTrack(){var t,e;this.videoUpdateInProgress||(this.videoUpdateInProgress=!0,(t=this.videoTrack)==null||t.stop(),(e=this.rawVideoTrack)==null||e.stop(),this.videoEnabled=!1,this.videoUpdateInProgress=!1)}stopScreenShareTracks(t={}){var e,i,s,r;if(this.screenShareUpdateInProgress)return;this.screenShareUpdateInProgress=!0;const{audio:n=!0,video:a=!0}=t;n&&((i=(e=this.screenShareTracks)==null?void 0:e.audio)==null||i.stop()),a&&((r=(s=this.screenShareTracks)==null?void 0:s.video)==null||r.stop()),this.screenShareEnabled=!1,this.screenShareUpdateInProgress=!1}removeAudioTrack(){this.stopAudioTrack(),this.audioTrack=void 0,this.rawAudioTrack=void 0,ee.hasFeature(ie.TROUBLESHOOTING)&&on.cleanup()}removeVideoTrack(){this.stopVideoTrack(),this.videoTrack=void 0,this.rawVideoTrack=void 0}removeScreenShareTracks(t){var e;(e=this.screenShareTracks.video)==null||e.removeEventListener("ended",this.onScreenShareEnded),this.stopScreenShareTracks(t),this.screenShareTracks={audio:void 0,video:void 0}}removeAllTracks(){this.removeAudioTrack(),this.removeVideoTrack(),this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video})}setAudioTrack(t){t!==this.audioTrack&&(t===void 0&&this.stopAudioTrack(),this.audioTrack=t,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled))}setVideoTrack(t){t!==this.videoTrack&&(t===void 0&&this.stopVideoTrack(),this.videoTrack=t)}setScreenShareTracks(t){var e;const{audio:i,video:s}=t;(!i||!s)&&this.stopScreenShareTracks({audio:!!i,video:!!s}),this.screenShareTracks=t,(e=this.screenShareTracks.video)==null||e.addEventListener("ended",this.onScreenShareEnded.bind(this))}onScreenShareEnded(){this.emit("SCREENSHARE_ENDED")}disableAudio(){this.audioEnabled=!1,this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async enableAudio(){var t;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((t=this.currentDevices.audio)==null?void 0:t.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1,w.error("LocalMediaHandler::enableAudio:Setting up audio stream failed while enabling audio",{debuggingHint:"Refer to SelfController::mediaPermissionError log."});return}this.audioEnabled=!0}catch(e){this.audioEnabled=!1,this.audioTrack=void 0,this.rawAudioTrack=void 0,w.error("LocalMediaHandler::enableAudio",{error:e},!0)}this.audioTrack&&(this.audioTrack.enabled=!0),this.rawAudioTrack&&(this.rawAudioTrack.enabled=!0),!(this.permissions.audio==="ACCEPTED"||!this.audioEnabled)&&(this.permissions.audio="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.audio,kind:"audio"}))}async toggleAudio(){var t;if(this.permissions.audio==="DENIED"){this.audioEnabled=!1;return}try{if((!this.audioTrack||this.audioTrack.readyState==="ended")&&await this.setupAudioStream((t=this.currentDevices.audio)==null?void 0:t.deviceId),!this.audioTrack||!this.rawAudioTrack){this.audioEnabled=!1;return}this.audioEnabled=!this.audioEnabled}catch(e){this.audioEnabled=!1,w.error("LocalMediaHandler::toggleAudio",{error:e},!0)}this.audioTrack&&(this.audioTrack.enabled=this.audioEnabled),this.rawAudioTrack&&(this.rawAudioTrack.enabled=this.audioEnabled)}async toggleVideo(){var t;if(this.permissions.video==="DENIED"){this.videoEnabled=!1;return}if(this.videoEnabled){this.removeVideoTrack();return}this.videoEnabled=!0;try{await this.setupVideoStream((t=this.currentDevices.video)==null?void 0:t.deviceId)}catch{this.videoEnabled=!1}this.videoTrack&&(this.videoTrack.enabled=this.videoEnabled),this.rawVideoTrack&&(this.rawVideoTrack.enabled=this.videoEnabled),!(this.permissions.video==="ACCEPTED"||!this.videoEnabled)&&(this.permissions.video="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.video,kind:"video"}))}async toggleScreenShare(){if(this.screenShareEnabled){this.removeScreenShareTracks({audio:!!this.screenShareTracks.audio,video:!!this.screenShareTracks.video});return}try{if(await this.setupScreenShareStreams(),this.screenShareEnabled=!0,this.permissions.screenshare==="ACCEPTED")return;this.permissions.screenshare="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:this.permissions.screenshare,kind:"screenshare"})}catch{this.screenShareEnabled=!1}}getAllDevices(){return p(this,Qe).availableDevices}getDeviceById(t,e){return p(this,Qe).getDeviceById(t,e)}getAudioDevices(){return p(this,Qe).getAudioDevices()}getVideoDevices(){return p(this,Qe).getVideoDevices()}getSpeakerDevices(){return p(this,Qe).getSpeakerDevices()}async onDeviceChange(t,e){var i,s;(i=t==null?void 0:t.added)==null||i.forEach(async r=>{r&&(e||!jn(r))&&(r.kind==="audioinput"?(await this.setupAudioStream(r.deviceId),this.emit("AUDIO_TRACK_CHANGE")):r.kind==="videoinput"&&this.videoEnabled?(await this.setupVideoStream(r.deviceId),this.emit("VIDEO_TRACK_CHANGE")):r.kind==="audiooutput"&&await this.setupSpeaker(r.deviceId))}),(s=t==null?void 0:t.removed)==null||s.forEach(async r=>{var n,a,o;r&&((r.kind==="audioinput"&&!this.audioEnabled||r.kind==="videoinput"&&!this.videoEnabled||ee.hasFeature(ie.DEVICE_REMOVE_EXP)||!Me.isChromiumBased())&&(r.kind==="audioinput"&&r.deviceId===((n=this.currentDevices.audio)==null?void 0:n.deviceId)?(await this.setupAudioStream(),this.emit("AUDIO_TRACK_CHANGE")):r.kind==="videoinput"&&r.deviceId===((a=this.currentDevices.video)==null?void 0:a.deviceId)&&(await this.setupVideoStream(),this.emit("VIDEO_TRACK_CHANGE"))),r.kind==="audiooutput"&&r.deviceId===((o=this.currentDevices.speaker)==null?void 0:o.deviceId)&&await this.setupSpeaker())})}static async init(t){const e=await It.init(),i=new Z3(e,t),s=new Wc(i);return i.mediaMiddlewareUtils=s,i}emit(t,...e){return super.emit(t,...e)}on(t,e){return super.on(t,e)}async removeDocumentEventListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}addAudioMiddleware(t){return this.mediaMiddlewareUtils.addAudioMiddleware(t)}removeAudioMiddleware(t){return this.mediaMiddlewareUtils.removeAudioMiddleware(t)}addVideoMiddleware(t){return this.mediaMiddlewareUtils.addVideoMiddleware(t)}removeVideoMiddleware(t){return this.mediaMiddlewareUtils.removeVideoMiddleware(t)}async enableVideo(){await this.toggleVideo()}async disableVideo(){await this.toggleVideo()}async enableScreenShare(){await this.toggleScreenShare()}async disableScreenShare(){await this.toggleScreenShare()}getCurrentDevices(){return this.currentDevices}destruct(){this.mediaMiddlewareUtils.terminateMiddlewareWebWorker(),p(this,Qe).destruct(),this.removeAllTracks(),this.removeAllListeners()}},Qe=new WeakMap,Ao=new WeakMap,dE);let ct=Z3;pt([S.trace("OldMediaHandler.shouldReacquireTrack")],ct.prototype,"shouldReacquireTrack",1);pt([S.trace("OldMediaHandler.removeMediaStreamTrackListeners")],ct.prototype,"removeMediaStreamTrackListeners",1);pt([S.trace("OldMediaHandler.addMediaStreamTrackListeners")],ct.prototype,"addMediaStreamTrackListeners",1);pt([S.trace("OldMediaHandler.setupAudioStream")],ct.prototype,"setupAudioStream",1);pt([S.trace("OldMediaHandler.getPreferredDeviceId")],ct.prototype,"getPreferredDeviceId",1);pt([S.trace("OldMediaHandler.setupVideoStream")],ct.prototype,"setupVideoStream",1);pt([S.trace("OldMediaHandler.setupScreenShareStreams")],ct.prototype,"setupScreenShareStreams",1);pt([S.trace("OldMediaHandler.setupSpeaker")],ct.prototype,"setupSpeaker",1);pt([S.trace("OldMediaHandler.getOperationalWebcamDeviceId")],ct.prototype,"getOperationalWebcamDeviceId",1);pt([S.trace("OldMediaHandler.getOperationalMicDeviceId")],ct.prototype,"getOperationalMicDeviceId",1);pt([S.trace("OldMediaHandler.setupStreams")],ct.prototype,"setupStreams",1);pt([S.trace("OldMediaHandler.stopAudioTrack")],ct.prototype,"stopAudioTrack",1);pt([S.trace("OldMediaHandler.stopVideoTrack")],ct.prototype,"stopVideoTrack",1);pt([S.trace("OldMediaHandler.stopScreenShareTracks")],ct.prototype,"stopScreenShareTracks",1);pt([S.trace("OldMediaHandler.removeAudioTrack")],ct.prototype,"removeAudioTrack",1);pt([S.trace("OldMediaHandler.removeVideoTrack")],ct.prototype,"removeVideoTrack",1);pt([S.trace("OldMediaHandler.removeScreenShareTracks")],ct.prototype,"removeScreenShareTracks",1);pt([S.trace("OldMediaHandler.removeAllTracks")],ct.prototype,"removeAllTracks",1);pt([S.trace("OldMediaHandler.setAudioTrack")],ct.prototype,"setAudioTrack",1);pt([S.trace("OldMediaHandler.setVideoTrack")],ct.prototype,"setVideoTrack",1);pt([S.trace("OldMediaHandler.setScreenShareTracks")],ct.prototype,"setScreenShareTracks",1);pt([S.trace("OldMediaHandler::disableAudio")],ct.prototype,"disableAudio",1);pt([S.trace("OldMediaHandler::enableAudio")],ct.prototype,"enableAudio",1);pt([S.trace("OldMediaHandler.toggleAudio")],ct.prototype,"toggleAudio",1);pt([S.trace("OldMediaHandler.toggleVideo")],ct.prototype,"toggleVideo",1);pt([S.trace("OldMediaHandler.toggleScreenShare")],ct.prototype,"toggleScreenShare",1);class UK extends Nt{constructor(){super(...arguments),v(this,"localMediaHandler")}async init(e={}){var i,s,r;if(Me.init(),!this.localMediaHandler)try{let n=!0;const a=e.constraints||fs;if(Ve.defaults.mediaHandler)n=!1,this.localMediaHandler=Ve.defaults.mediaHandler.localMediaHandler;else if(navigator.RNLocalMediaHandlerImpl){const{RNLocalMediaHandlerImpl:o}=navigator;this.localMediaHandler=await o.init()}else ee.hasFeature(ie.NEW_LOCAL_MEDIA_HANDLER)?this.localMediaHandler=new Es(a,(i=Ve==null?void 0:Ve.defaults)==null?void 0:i.isNonPreferredDevice):this.localMediaHandler=await ct.init(a);n&&await this.localMediaHandler.setupStreams({video:(s=e==null?void 0:e.video)!=null?s:!0,audio:(r=e==null?void 0:e.audio)!=null?r:!0})}catch(n){w.error("DyteSelf::init::Failed To Setup Streams",{error:{name:n.name,message:n.message}})}}get audioTrack(){return this.localMediaHandler.audioTrack}get rawAudioTrack(){return this.localMediaHandler.rawAudioTrack}async addAudioMiddleware(e){return this.localMediaHandler.addAudioMiddleware(e)}async removeAudioMiddleware(e){return this.localMediaHandler.removeAudioMiddleware(e)}get videoTrack(){return this.localMediaHandler.videoTrack}get rawVideoTrack(){return this.localMediaHandler.rawVideoTrack}async addVideoMiddleware(e){return this.localMediaHandler.addVideoMiddleware(e)}async removeVideoMiddleware(e){return this.localMediaHandler.removeVideoMiddleware(e)}get screenShareTracks(){return this.localMediaHandler.screenShareTracks}get audioEnabled(){return this.localMediaHandler.audioEnabled}get videoEnabled(){return this.localMediaHandler.videoEnabled}get screenShareEnabled(){return this.localMediaHandler.screenShareEnabled}async enableAudio(){await this.localMediaHandler.enableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async enableVideo(){await this.localMediaHandler.enableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}async disableAudio(){this.localMediaHandler.disableAudio(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}async disableVideo(){await this.localMediaHandler.disableVideo(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}getCurrentDevices(){return this.localMediaHandler.getCurrentDevices()}async getAudioDevices(){return await this.localMediaHandler.getAudioDevices()}async getVideoDevices(){return await this.localMediaHandler.getVideoDevices()}async getSpeakerDevices(){return await this.localMediaHandler.getSpeakerDevices()}getDeviceById(e,i){let s;return i==="audio"?s="audioinput":i==="video"?s="videoinput":i==="speaker"&&(s="audiooutput"),this.localMediaHandler.getDeviceById(e,s)}async setDevice(e){const i={added:[e],removed:[]};if("isDeprecated"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(i,!0);return}switch(e.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(e)}catch{}finally{this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(e);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(e)}catch{}finally{this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}this.emit("deviceUpdate",{device:e})}}const $K={nonBlackPixelLumaThreshold:20,identicalFrameSsimThreshold:.985,media:"video"};var cf,bc,wd,df,h1,g1,lE,m1,uE,d0,pE,ng,l0,u0,hE;const Uu=class{constructor(t){R(this,df),R(this,g1),R(this,m1),v(this,"metadata",{}),v(this,"video"),v(this,"canvas"),v(this,"nonBlackPixelLumaThreshold"),v(this,"identicalFrameSsimThreshold"),v(this,"previousFrame",new Uint8ClampedArray),R(this,cf,void 0),v(this,"track"),v(this,"analysing"),R(this,bc,void 0),R(this,wd,void 0),v(this,"preview");const{nonBlackPixelLumaThreshold:e,identicalFrameSsimThreshold:i,media:s}={...$K,...t};this.nonBlackPixelLumaThreshold=e,this.identicalFrameSsimThreshold=i,this.analysing=!1,P(this,bc,s),this.preview=!1}setTrack(t){var e,i,s;(e=this.track)==null||e.stop(),this.track=t;const{height:r,width:n}=(s=(i=this.track)==null?void 0:i.getConstraints())!=null?s:{};if(this.metadata.resolution=[n,r],p(this,bc)==="screenshare"){T.emit(E.SCREENSHARE_VIDEO_TRACK_CREATED);return}T.emit(E.VIDEO_TRACK_CREATED)}getTrackMetadata(){return this.track?(this.metadata.label=this.track.label,this.metadata):null}async startTrackAnalysis(){var t;return!this.track||this.analysing?!1:(!this.video&&!((t=this.video)!=null&&t.src)&&(P(this,wd,new MediaStream),p(this,wd).addTrack(this.track),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),[this.video.width,this.video.height]=this.metadata.resolution,this.video.srcObject=p(this,wd)),window.requestAnimationFrame(Pe(this,df,h1).bind(this)),this.analysing=!0,!0)}stopTrackAnalysis(){this.analysing&&(this.analysing=!1,clearTimeout(p(this,cf)))}cleanup(){var t;if(this.stopTrackAnalysis(),(t=this.track)==null||t.stop(),this.track=void 0,P(this,wd,void 0),this.video&&(this.video.srcObject=void 0,this.video=void 0),this.canvas=void 0,this.previousFrame=new Uint8ClampedArray,p(this,bc)==="screenshare"){T.emit(E.SCREENSHARE_VIDEO_TRACK_CLOSED);return}T.emit(E.VIDEO_TRACK_CLOSED)}};let ap=Uu;cf=new WeakMap,bc=new WeakMap,wd=new WeakMap,df=new WeakSet,h1=function(){var t;try{const e=Pe(this,g1,lE).call(this),i=Pe(this,m1,uE).call(this,e.data,e.data.length),s=Pe(t=Uu,d0,pE).call(t,this.previousFrame,e.data);this.previousFrame=e.data;const r={isBlackFrame:i,videoScore:s,isFrozenFrame:s>this.identicalFrameSsimThreshold,timestamp:new Date().getTime()};p(this,bc)==="screenshare"?T.emit(E.SCREENSHARE_VIDEO_TRACK_ANALYSIS,r):T.emit(E.VIDEO_TRACK_ANALYSIS,r),P(this,cf,setTimeout(()=>{this.track&&window.requestAnimationFrame(Pe(this,df,h1).bind(this))},3e3))}catch{p(this,bc)==="screenshare"?T.emit(E.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR):T.emit(E.VIDEO_TRACK_ANALYSIS_ERROR)}},g1=new WeakSet,lE=function(){var t,e;this.canvas.width=(t=this.video)==null?void 0:t.width,this.canvas.height=(e=this.video)==null?void 0:e.height;const i=this.canvas.getContext("2d",{willReadFrequently:!0});return i.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),i.getImageData(0,0,this.canvas.width,this.canvas.height)},m1=new WeakSet,uE=function(t,e){const i=this.nonBlackPixelLumaThreshold;let s=0;for(let r=4;r<e;r+=4)if(s+=.21*t[r]+.72*t[r+1]+.07*t[r+2],s>i*(r/4))return!1;return!0},d0=new WeakSet,pE=function(t,e){var i,s,r;if(t.length!==e.length)return 0;const n=.01,a=.03,o=255,c=n*o*(n*o),u=a*o*(a*o),l=u/2,h=Pe(i=Uu,ng,l0).call(i,t),g=h.mean,m=h.variance,f=Math.sqrt(m),_=Pe(s=Uu,ng,l0).call(s,e),k=_.mean,y=_.variance,b=Math.sqrt(y),x=Pe(r=Uu,u0,hE).call(r,t,e,g,k),C=(2*g*k+c)/(g*g+k*k+c),D=(x+l)/(f*b+l),M=(2*f*b+u)/(m+y+u);return C*M*D},ng=new WeakSet,l0=function(t){let e=0,i;for(i=0;i<t.length;i++)e+=t[i];const s=e/(t.length-1);let r=0;for(i=1;i<t.length;i++)r=t[i-1]-s,e+=t[i]+r*r;return{mean:s,variance:e/t.length}},u0=new WeakSet,hE=function(t,e,i,s){let r=0;for(let n=0;n<t.length;n+=1)r+=(t[n]-i)*(e[n]-s);return r/t.length},R(ap,d0),R(ap,ng),R(ap,u0);const As=new ap,lo=new ap({media:"screenshare"});var jK=Object.defineProperty,zK=Object.getOwnPropertyDescriptor,ui=(t,e,i,s)=>{for(var r=s>1?void 0:s?zK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&jK(e,i,r),r},bi=(t=>(t.OFF_STAGE="OFF_STAGE",t.REQUESTED_TO_JOIN_STAGE="REQUESTED_TO_JOIN_STAGE",t.ACCEPTED_TO_JOIN_STAGE="ACCEPTED_TO_JOIN_STAGE",t.ON_STAGE="ON_STAGE",t))(bi||{}),p0,nu,In,au,nd,Ge,Ye,gE;let Lt=(gE=class extends UK{constructor(t,e,i,s,r){var n;super(),R(this,Ge),v(this,"id"),v(this,"name"),v(this,"picture"),v(this,"clientSpecificId"),v(this,"waitlistStatus"),R(this,p0,void 0),R(this,nu,void 0),R(this,In,void 0),R(this,au,void 0),v(this,"role"),v(this,"userId"),v(this,"organizationId"),v(this,"supportsRemoteControl",!1),v(this,"device"),R(this,nd,void 0),v(this,"presetName"),v(this,"roomState","init"),this.id=t,this.userId=e.id,this.name=e.name,this.picture=e.picture,this.clientSpecificId=(n=e.customParticipantId)!=null?n:e.clientSpecificId,this.waitlistStatus="none",P(this,In,i),P(this,nu,s),P(this,au,!1),this.organizationId=e.organizationId,this.supportsRemoteControl=Me.isElectron(),this.device=Me.getDeviceInfo(),this.presetName=r,P(this,p0,we.isV2AuthToken?s.viewType:i.viewType),s.viewType!==it.Chat&&this.updatePermission()}get stageStatus(){return p(this,nd)}static async __init__(t,e,i,s,r){var n,a,o,c;let u=(a=(n=Ve.defaults)==null?void 0:n.audio)!=null?a:!0,l=(c=(o=Ve.defaults)==null?void 0:o.video)!=null?c:!0;i.canProduceAudio!=="ALLOWED"&&(u=!1),i.canProduceVideo!=="ALLOWED"&&(l=!1);const h=new Lt(t,e,i,s,r);return s.viewType===it.Chat||(await h.init({audio:u,video:l}),h.setupEvents()),h}async updatePermission(){var t,e;if(Me.getName()==="firefox")return;const i="microphone",s="camera",r=await((t=navigator==null?void 0:navigator.permissions)==null?void 0:t.query({name:i})),n=await((e=navigator==null?void 0:navigator.permissions)==null?void 0:e.query({name:s})),a=(c,u)=>{this.mediaPermissions[c]=u;const l={message:this.mediaPermissions[c],kind:c};u==="DENIED"?T.emit(E.MEDIA_PERMISSION_ERROR,l):T.emit(E.MEDIA_PERMISSION_UPDATE,l)},o=(c,u)=>{switch(u){case"granted":a(c,"ACCEPTED");break;case"denied":a(c,"DENIED");break}this.localMediaHandler.repopulateAvailableDevices()};r&&(r.onchange=()=>o("audio",r.state)),n&&(n.onchange=()=>o("video",n.state))}setupEvents(){T.on(E.ROOM_NODE_CONNECTED,async({wasDisconnected:t})=>{t&&await this.resetSelf()}),T.on(E.SET_STAGE_STATUS,t=>{switch(P(this,nd,t),t){case"ACCEPTED_TO_JOIN_STAGE":this.emit("joinStageRequestAccepted");break;case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}),T.on(E.RESET_PRODUCER_STATE,async()=>{if(this.roomJoined&&p(this,Ge,Ye)instanceof ye){if(this.localMediaHandler.videoEnabled&&await p(this,Ge,Ye).shareWebcam(this.localMediaHandler.videoTrack),this.localMediaHandler.audioEnabled)try{await p(this,Ge,Ye).shareMic(this.localMediaHandler.audioTrack)}catch{this.localMediaHandler.disableAudio()}this.localMediaHandler.screenShareEnabled&&await p(this,Ge,Ye).shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio})}}),T.on(E.STOPPED_PRESENTING,()=>{this.localMediaHandler.destruct(),this.setWebinarStageStatus("OFF_STAGE"),this.emit("stageLeft")}),this.localMediaHandler.on("AUDIO_TRACK_CHANGE",async()=>{if(T.emit(E.AUDIO_TRACK_CHANGED),w.info("DyteSelf::setupEvents::AUDIO_TRACK_CHANGE",{...uc(this)}),this.roomJoined&&this.audioEnabled)try{await p(this,Ge,Ye).shareMic(this.audioTrack)}catch(t){w.error("DyteSelf::setupEvents::Error while sharing mic",{error:t}),this.localMediaHandler.disableAudio()}this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}),this.localMediaHandler.on("VIDEO_TRACK_CHANGE",async()=>{if(T.emit(E.VIDEO_TRACK_CHANGED),w.info("DyteSelf::setupEvents::VIDEO_TRACK_CHANGE",{...uc(this)}),this.roomJoined&&this.rawVideoTrack===void 0)w.info("DyteSelf::VIDEO_TRACK_CHANGE::Forcing_disable_video"),this.disableVideo();else if(this.videoEnabled&&this.roomJoined)try{await p(this,Ge,Ye).shareWebcam(this.videoTrack)}catch(t){w.error("DyteSelf::setupEvents::failed shareWebcam",{error:t}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}),this.localMediaHandler.on("DEVICE_CHANGE",async({device:t})=>{this.emit("deviceUpdate",{device:t})}),this.localMediaHandler.on("DEVICE_LIST_UPDATED",t=>{this.emit("deviceListUpdate",t)}),this.localMediaHandler.on("SCREENSHARE_TRACK_CHANGE",async()=>{if(T.emit(E.SCREENSHARE_TRACK_CHANGED),!this.roomJoined){w.error("DyteSelf.SCREENSHARE_TRACK_CHANGE.LocalMediaInitialized_WithoutRoomNode");return}if(this.screenShareEnabled)try{await p(this,Ge,Ye).shareScreen(this.screenShareTracks)}catch(t){w.error("DyteSelf::setupEvents::Error while sharing screen",{error:t}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}w.info("DyteSelf::setupEvents::SCREENSHARE_TRACK_CHANGE",{...uc(this)}),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}),this.localMediaHandler.on("SCREENSHARE_ENDED",async()=>{await this.disableScreenShare(),w.info("DyteSelf::setupEvents::SCREENSHARE_ENDED",{...uc(this)})}),this.localMediaHandler.on("AUDIO_TRACK_SILENT",()=>{this.emit("audioTrackSilent"),Z.mediaTrackMuted("AUDIO")}),this.localMediaHandler.on("FORCE_MUTE_AUDIO",()=>{this.disableAudio()}),this.localMediaHandler.on("FORCE_MUTE_VIDEO",async()=>{this.roomJoined&&await p(this,Ge,Ye).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),Z.videoOff()})}get mediaPermissions(){return this.localMediaHandler.permissions}get permissions(){return p(this,In)}get suggestedTheme(){return p(this,nu)}get config(){return p(this,nu)}get roomJoined(){var t;return((t=p(this,Ge,Ye))==null?void 0:t.roomJoined)===!0}setName(t){if(!t)throw new I("Name cannot be empty.");this.name=t}async setupTracks(t={}){var e,i;return t.forceReset&&(p(this,Ge,Ye).stopAllProducers(),this.localMediaHandler.removeAllTracks()),this.localMediaHandler.setupStreams({video:(e=t.video)!=null?e:!0,audio:(i=t.audio)!=null?i:!0})}async resetSelf(){var t,e,i,s,r,n,a,o,c,u;if(Z.callEnded(),(i=(e=(t=p(this,Ge,Ye))==null?void 0:t.sfuHandler)==null?void 0:e.cleanupConsumers)==null||i.call(e),await((n=(r=(s=p(this,Ge,Ye))==null?void 0:s.sfuHandler)==null?void 0:r.setupTransports)==null?void 0:n.call(r)),await((a=p(this,Ge,Ye))==null?void 0:a.joinRoom(this.name,!this.localMediaHandler.audioEnabled,p(this,Ge,Ye).roomUUID,p(this,Ge,Ye).meetingTitle,{audio:this.localMediaHandler.audioEnabled,video:this.localMediaHandler.videoEnabled,screen:this.localMediaHandler.screenShareEnabled})),this.localMediaHandler.videoEnabled&&await((o=p(this,Ge,Ye))==null?void 0:o.shareWebcam(this.localMediaHandler.videoTrack)),this.localMediaHandler.audioEnabled)try{await((c=p(this,Ge,Ye))==null?void 0:c.shareMic(this.localMediaHandler.audioTrack))}catch{this.localMediaHandler.disableAudio()}this.localMediaHandler.screenShareEnabled&&await((u=p(this,Ge,Ye))==null?void 0:u.shareScreen({video:this.localMediaHandler.screenShareTracks.video,audio:this.localMediaHandler.screenShareTracks.audio}))}async destructMediaHandler(){return this.localMediaHandler.destruct()}async removeDocumentEventListeners(){return this.localMediaHandler.removeDocumentEventListeners()}async enableAudio(){if(!(this.permissions.canProduceAudio===Ho.notAllowed||p(this,In).canProduceAudio===Ho.canRequest&&(this.stageStatus==="OFF_STAGE"||this.stageStatus==="REQUESTED_TO_JOIN_STAGE")||this.audioEnabled)){if(await this.localMediaHandler.enableAudio(),this.roomJoined){if(this.audioTrack)try{await p(this,Ge,Ye).shareMic(this.audioTrack)}catch(t){w.error("DyteSelf::enableAudio::Error while sharing mic",{error:t}),this.localMediaHandler.disableAudio()}if(!this.audioEnabled)return;p(this,Ge,Ye).unmuteSelf()}if(this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),Z.audioOn(),ee.hasFeature(ie.TROUBLESHOOTING))try{on.setTrack(this.rawAudioTrack)}catch(t){w.error("Troubleshooter::micTest::Error while setting track",{error:t})}}}async enableVideo(){var t;if(!(p(this,In).canProduceVideo===Ho.notAllowed||p(this,In).canProduceVideo===Ho.canRequest&&(this.stageStatus==="OFF_STAGE"||this.stageStatus==="REQUESTED_TO_JOIN_STAGE")||this.videoEnabled)){if(await this.localMediaHandler.enableVideo(),this.roomJoined)try{await p(this,Ge,Ye).shareWebcam(this.videoTrack)}catch(e){w.error("DyteSelf::enableVideo::Error while sharing video",{error:e}),this.videoEnabled&&await this.localMediaHandler.disableVideo()}if(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),w.info("DyteSelf.enableVideo",{...uc(this)}),Z.videoOn(),ee.hasFeature(ie.TROUBLESHOOTING))try{As.setTrack((t=this.videoTrack)==null?void 0:t.clone())}catch(e){w.error("Troubleshooter::camTest::Error while setting track",{error:e})}}}async updateVideoConstraints(t){if(!this.localMediaHandler.updateVideoConstraints)throw new I("Unsupported");await this.localMediaHandler.updateVideoConstraints(t)}async enableScreenShare(){var t;if(!this.roomJoined)throw new I("Can`t enable screenshare without joining room");if(p(this,In).canProduceScreenshare===Ho.notAllowed||p(this,In).canProduceScreenshare===Ho.canRequest&&(this.stageStatus==="OFF_STAGE"||this.stageStatus==="REQUESTED_TO_JOIN_STAGE")||this.screenShareEnabled)return;if(await this.localMediaHandler.enableScreenShare(),this.screenShareTracks.audio||this.screenShareTracks.video)try{await p(this,Ge,Ye).shareScreen(this.screenShareTracks)}catch(i){w.error("DyteSelf::enableScreenShare::Error while sharing screen",{error:i}),this.screenShareEnabled&&await this.localMediaHandler.disableScreenShare()}this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks});const e=ee.hasFeature(ie.TROUBLESHOOTING);if(e&&this.screenShareTracks.audio)try{xc.setTrack(this.screenShareTracks.audio)}catch(i){w.error("Troubleshooter::screenshareMicTest::Error while setting track",{error:i})}if(e&&this.screenShareTracks.video)try{lo.setTrack((t=this.screenShareTracks.video)==null?void 0:t.clone())}catch(i){w.error("Troubleshooter::screenshareCamTest::Error while setting track",{error:i})}}async updateScreenshareConstraints(t){if(!this.localMediaHandler.updateScreenshareConstraints)throw new I("Unsupported");await this.localMediaHandler.updateScreenshareConstraints(t)}async disableAudio(){this.audioEnabled&&(this.localMediaHandler.disableAudio(),this.roomJoined&&p(this,Ge,Ye).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}),Z.audioOff())}async disableVideo(){!this.videoEnabled||(await this.localMediaHandler.disableVideo(),this.roomJoined&&await p(this,Ge,Ye).pauseWebcam(),this.mediaPermissions.video!=="ACCEPTED")||(this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}),Z.videoOff(),ee.hasFeature(ie.TROUBLESHOOTING)&&!As.preview&&As.cleanup())}async disableScreenShare(){!this.screenShareEnabled||(await this.localMediaHandler.disableScreenShare(),this.roomJoined&&await p(this,Ge,Ye).disableScreenShare(),this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks}),ee.hasFeature(ie.TROUBLESHOOTING)&&(lo.cleanup(),xc.cleanup()))}getAllDevices(){return this.localMediaHandler.getAllDevices()}setIsPinned(t,e=!0){P(this,au,t);const i=t?"pinned":"unpinned";e&&this.emit(i,this)}get isPinned(){return p(this,au)}get webinarStageStatus(){return p(this,nd)}async pin(){if(!this.roomJoined)throw new I("Can`t pin participants without joining room");return p(this,Ge,Ye).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new I("Can`t unpin participants without joining room");return p(this,Ge,Ye).pinPeer(null)}async setDevice(t){const e={added:[t],removed:[]};if("isDeprecated"in this.localMediaHandler){await this.localMediaHandler.onDeviceChange(e,!0);return}switch(t.kind){case"audioinput":try{await this.localMediaHandler.setAudioDevice(t)}catch{this.roomJoined&&await p(this,Ge,Ye).muteSelf(),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack})}break;case"audiooutput":await this.localMediaHandler.setSpeakerDevice(t);break;case"videoinput":try{await this.localMediaHandler.setVideoDevice(t)}catch{this.roomJoined&&await p(this,Ge,Ye).pauseWebcam(),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack})}break}}cleanUpTracks(){var t,e,i,s;(t=this.audioTrack)==null||t.stop(),(e=this.rawAudioTrack)==null||e.stop(),(i=this.videoTrack)==null||i.stop(),(s=this.rawVideoTrack)==null||s.stop()}async requestToJoinStage(){T.emitAsync(E.REQUEST_TO_JOIN_STAGE)}async withdrawRequestToJoinStage(){T.emitAsync(E.WITHDRAW_REQUEST_TO_JOIN_STAGE)}async leaveStage(){T.emitAsync(E.LEAVE_STAGE)}async joinStage(){T.emitAsync(E.JOIN_STAGE)}setWebinarStageStatus(t){switch(P(this,nd,t),T.emit(E.SET_WEBINAR_STAGE_STATUS,t),t){case"ACCEPTED_TO_JOIN_STAGE":this.emit("joinStageRequestAccepted");break;case"REQUESTED_TO_JOIN_STAGE":this.emit("peerRequestToJoinStage");break;case"OFF_STAGE":this.emit("stageLeft");break}}async disablePreview(){return this}},p0=new WeakMap,nu=new WeakMap,In=new WeakMap,au=new WeakMap,nd=new WeakMap,Ge=new WeakSet,Ye=function(){return oi()},gE);ui([S.trace("DyteSelf.setupEvents")],Lt.prototype,"setupEvents",1);ui([S.trace("DyteSelf.setupTracks")],Lt.prototype,"setupTracks",1);ui([S.trace("DyteSelf.resetSelf")],Lt.prototype,"resetSelf",1);ui([S.trace("DyteSelf.destructMediaHandler")],Lt.prototype,"destructMediaHandler",1);ui([S.trace("DyteSelf.removeDocumentEventListeners")],Lt.prototype,"removeDocumentEventListeners",1);ui([S.trace("DyteSelf.enableAudio")],Lt.prototype,"enableAudio",1);ui([S.trace("DyteSelf.enableVideo")],Lt.prototype,"enableVideo",1);ui([S.trace("DyteSelf.updateVideoConstraints")],Lt.prototype,"updateVideoConstraints",1);ui([S.trace("DyteSelf.enableScreenShare")],Lt.prototype,"enableScreenShare",1);ui([S.trace("DyteSelf.updateScreenshareConstraints")],Lt.prototype,"updateScreenshareConstraints",1);ui([S.trace("DyteSelf.disableAudio")],Lt.prototype,"disableAudio",1);ui([S.trace("DyteSelf.disableVideo")],Lt.prototype,"disableVideo",1);ui([S.trace("DyteSelf.disableScreenShare")],Lt.prototype,"disableScreenShare",1);ui([S.trace("DyteSelf.setDevice")],Lt.prototype,"setDevice",1);ui([S.trace("DyteSelf.requestToJoinStage")],Lt.prototype,"requestToJoinStage",1);ui([S.trace("DyteSelf.withdrawRequestToJoinStage")],Lt.prototype,"withdrawRequestToJoinStage",1);ui([S.trace("DyteSelf.leaveStage")],Lt.prototype,"leaveStage",1);ui([S.trace("DyteSelf.joinStage")],Lt.prototype,"joinStage",1);ui([S.trace("DyteSelf.deprecated.disablePreview")],Lt.prototype,"disablePreview",1);Lt=ui([Ii(t=>{throw new I(t.message,"1100")})],Lt);function FK(t){return we.isV2AuthToken?t.stageAccess===qe.Allowed:!1}function X3(t){return!(t.viewType==="LIVESTREAM"||t.viewType==="CHAT")}let ad;class jp{constructor(e){v(this,"socket"),this.socket=e,this.handleSocketEvents()}static create(e){return ad||(ad=new jp(e)),ad}static cleanup(){var e;try{(e=ad==null?void 0:ad.socket)==null||e.disconnect()}catch{w.error("roomSocketHandler::cleanup")}ad=void 0}set onReconnect(e){this.socket.onStateEvent("reconnected",e)}async joinRoom(e,i,s,r){const n={capabilities:[],peer:{displayName:e,peerId:i,userId:s,waitlisted:!1},roomUuid:r},a=tg.fromBinary((await this.socket.sendMessagePromise(ne.joinRoom,oq.toBinary(n))).payload);await T.emitAsync(E.SOCKET_SERVICE_ROOM_JOINED,a);try{const{room:o}=await this.getRoomState();T.emit(E.ROOM_STATE,o)}catch(o){w.error("RoomSocketHandler.joinRoom.failedToGetRoomState",{error:o})}}async getAllAddedParticipants(){try{return Wq.fromBinary((await this.socket.sendMessagePromise(ne.getAllAddedParticipants)).payload).participants.map(({id:e,...i})=>({...i,userId:e}))}catch{return[]}}async getRoomPeers(e,i,s){let r;try{const n={seachQuery:e,limit:i,offset:s},a=await this.socket.sendMessagePromise(ne.getRoomPeersInfo,QW.toBinary(n));r=ZW.fromBinary(a.payload)}catch(n){w.error("getRoomPeers::binary_decode_error",{error:n})}return r}async getRoomState(){let e=Hx.create();try{const i=await this.socket.sendMessagePromise(ne.getRoomInfo);e=Hx.fromBinary(i.payload)}catch(i){w.error("getRoomState::binary_decode_error",{error:i})}return e}async broadcastMessage(e,i){const s={type:e,payload:new TextEncoder().encode(JSON.stringify(i)),timestamp:Date.now(),peerIds:[]};return this.socket.sendMessagePromise(ne.broadcastMessage,Gx.toBinary(s))}leaveRoom(){this.socket.sendMessage(ne.leaveRoom,dq.toBinary({}))}async kick(e){const i={peerIds:[e]};this.socket.sendMessage(ne.kick,Kq.toBinary(i))}async kickAll(){this.socket.sendMessage(ne.kickAll)}getWaitingRoomRequests(){this.socket.sendMessage(ne.getWaitingRoomRequests)}acceptWaitingRoomRequest(e){const i={userIds:e};this.socket.sendMessage(ne.acceptWaitingRoomRequests,Zq.toBinary(i))}rejectWaitingRoomRequest(e){const i={userIds:e};this.socket.sendMessage(ne.denyWaitingRoomRequests,eG.toBinary(i))}handleSocketEvents(){this.socket.on(ne.broadcastMessage,({payload:e})=>{try{const i=Gx.fromBinary(e);T.emit(E.ROOM_MESSAGE,{payload:JSON.parse(new TextDecoder().decode(i.payload)),type:i.type,timestamp:i.timestamp})}catch(i){w.error("failed to decode broadcast message:",i)}})}on(e,i){let s,r;switch(e){case ne.joinRoom:case ne.leaveRoom:case ne.kick:case ne.kickAll:{s=tg.fromBinary.bind(tg),r=tg.create();break}case ne.getWaitingRoomRequests:{s=(n,a)=>n?Jx.fromBinary(n,a):{requests:[]},r=Jx.create();break}}this.socket.on(e,({payload:n})=>{let a=r;if(!s)return i(void 0);try{a=s(n)}catch(o){w.error("roomSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}var VK=Object.defineProperty,BK=Object.getOwnPropertyDescriptor,hh=(t,e,i,s)=>{for(var r=s>1?void 0:s?BK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&VK(e,i,r),r},ou,Ks,Ht,Zt,mE;const eI=(mE=class{constructor(t,e,i,s){R(this,Ht),v(this,"self"),v(this,"authToken"),v(this,"peerId"),R(this,ou,void 0),v(this,"roomNodeSetupInProgress",!1),v(this,"viewType"),R(this,Ks,void 0);var r,n,a,o;P(this,ou,t),P(this,Ks,i),this.authToken=(n=(r=oi())==null?void 0:r.authToken)!=null?n:t.authToken,this.peerId=(o=(a=oi())==null?void 0:a.peerId)!=null?o:t.peerId,this.self=e,this.viewType=s,e.config.viewType!==it.Chat&&this.setupEvents()}get roomJoined(){var t;return((t=p(this,Ht,Zt))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,s,r,n){var a,o;const c=_i(),{isV2AuthToken:u}=we,l=await Lt.__init__((o=(a=oi())==null?void 0:a.peerId)!=null?o:t.peerId,we.isV2AuthToken?i.participant:i,s,r,n),h=u?i.participant.organizationId:i.organizationId;if(S.meetingMetadata.organizationId=h,ee.hasFeature(ie.INTERNAL_CALL_STATS)&&navigator.product!=="ReactNative"){ee.getValue(ie.CALLSTATS_INGESTION_LAYER);let g="dev";Ve.apiBase.indexOf("cluster.dyte")>-1||Ve.apiBase.indexOf("api.dyte")>-1?g="production":Ve.apiBase.indexOf("staging.dyte")>-1&&(g="staging"),setTimeout(async()=>{var m,f;Z.initialize({peerId:(f=(m=oi())==null?void 0:m.peerId)!=null?f:t.peerId,engineName:Me.getDeviceInfo().engineName,env:g,iceServers:await c.getICEServers(),apiBase:Ve.apiBase,flags:ee.getAllFlags(),logger:w})})}return new eI(t,l,e,r.viewType)}async shareMediaTracks(){if(this.self.audioTrack)try{await p(this,Ht,Zt).shareMic(this.self.audioTrack)}catch{this.self.disableAudio()}if(this.self.videoTrack)try{await p(this,Ht,Zt).shareWebcam(this.self.videoTrack)}catch{this.self.disableVideo()}}async kickHandler(t){let e="kicked";(t==null?void 0:t.kickType)==="kickAll"&&(e="ended"),this.leaveRoom(e)}waitlistedHandler(t){w.info("SelController.waitlisted",{source:t}),this.self.waitlistStatus="waiting",this.self.roomState="waitlisted",this.self.emit("waitlisted")}waitlistAcceptHandler(t){if(w.info("SelController.waitlistAccepted",{source:t}),this.self.waitlistStatus==="accepted"){w.warn("SelfController.WAITLIST_ACCEPTED.UserAlreadyAccepted");return}this.self.waitlistStatus="accepted",this.joinRoom()}waitlistRejectedHandler(t){if(w.info("SelfController.waitlistRejected",{source:t}),this.self.waitlistStatus==="rejected"){w.warn("SelfController.WAITLIST_REJECTED.UserAlreadyRejected");return}this.self.waitlistStatus="rejected",this.leaveRoom("rejected")}setupEvents(){T.on(E.DISABLE_AUDIO,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),Z.audioOff())}),T.on(E.DISABLE_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),Z.videoOff())}),T.on(E.MUTE_ALL,async()=>{this.self.audioEnabled&&(await this.self.disableAudio(),Z.audioOff())}),T.on(E.MUTE_ALL_VIDEO,async()=>{this.self.videoEnabled&&(await this.self.disableVideo(),Z.videoOff())}),T.onAsync(E.SOCKET_SERVICE_ROOM_JOINED,async t=>{var e;(e=t==null?void 0:t.peer)!=null&&e.waitlisted&&this.waitlistedHandler("socketservice")}),T.on(E.WAITLISTED,()=>{this.waitlistedHandler("roomnode")}),T.on(E.WAITLIST_ACCEPTED,async()=>{this.waitlistAcceptHandler("roomnode")}),p(this,Ks).on(ne.waitingRoomRequestAccepted,()=>{this.waitlistAcceptHandler("socketservice")}),T.on(E.WAITLIST_REJECTED,async()=>{this.waitlistRejectedHandler("roomnode")}),p(this,Ks).on(ne.waitingRoomRequestDenied,()=>{this.waitlistRejectedHandler("socketservice")}),T.on(E.KICKED,this.kickHandler.bind(this)),p(this,Ks).on(ne.kick,()=>{this.kickHandler({kickType:"kick"})}),p(this,Ks).on(ne.kickAll,()=>{this.kickHandler({kickType:"kickAll"})}),T.on(E.MEDIA_PERMISSION_UPDATE,async t=>{if(t.message==="ACCEPTED"){const e=this.self.getCurrentDevices(),i=await this.self.getAudioDevices(),s=await this.self.getVideoDevices(),r=await this.self.getSpeakerDevices();switch(t==null?void 0:t.kind){case"audio":!e.audio&&i.length>0&&this.self.setDevice(i[0]),!e.speaker&&r.length>0&&this.self.setDevice(r[0]);break;case"video":!e.video&&s.length>0&&this.self.setDevice(s[0]);break}}this.self.emit("mediaPermissionUpdate",t)}),T.on(E.MEDIA_PERMISSION_ERROR,async t=>{const{kind:e,message:i}=t;e==="audio"?(Z.mediaPermission("AUDIO",o0(i)),this.self.disableAudio()):e==="video"?(Z.mediaPermission("VIDEO",o0(i)),this.self.disableVideo()):e==="screenshare"&&(Z.mediaPermission("VIDEO",o0(i)),this.self.disableScreenShare()),w.error("SelfController::mediaPermissionError",{error:{message:t.message},constraints:t.constraints,mediaPermissionsErrors:{kind:e,message:i}}),this.self.emit("mediaPermissionError",t),this.self.emit("mediaPermissionUpdate",{message:i,kind:e})}),T.on(E.PRODUCER_SCORE_UPDATE,({score:t,kind:e,appData:i})=>{var s;const r=e==="video"&&((s=i==null?void 0:i.screenShare)!=null?s:!1);this.self.emit("mediaScoreUpdate",{kind:e,isScreenshare:r,score:t})}),T.on(E.PRODUCER_STATUS_UPDATE,({status:t})=>{this.self.emit("mediaChannelUpdate",{status:t})}),T.onAsync(E.JOIN_MEDIA_ROOM,this.setupRoomNode.bind(this)),T.onAsync(E.LEAVE_MEDIA_ROOM,this.leaveMediaRoom.bind(this)),T.on(E.PIP_HANGUP,this.leaveRoom.bind(this))}async setupRoomNode(){var t;if(this.roomNodeSetupInProgress){w.warn("SelfController.roomNodeSetupInProgress");return}if((t=p(this,Ht,Zt))!=null&&t.roomJoined){w.warn("SelfController.roomNodeAlreadySetup");return}this.roomNodeSetupInProgress=!0;const e=we.roomNodeOptions;await H3({...e,roomName:e.roomName,peerId:e.peerId,viewType:this.viewType}),T.once(E.ROOM_NODE_CONNECTED,async()=>{var i,s;let r="";if(p(this,Ht,Zt)instanceof Ie){await p(this,Ht,Zt).setupTransports();const n=await p(this,Ht,Zt).getRoomState();({roomUUID:r}=(s=(i=n==null?void 0:n.payload)==null?void 0:i.roomState)!=null?s:{}),_i().setRoomUUID(r)}await this.joinMediaRoom(r),this.roomNodeSetupInProgress=!1,this.self.roomState="joined",this.self.emit("roomJoined")})}async joinRoom(){var t,e;try{const i=_i();let s="";if(p(this,Ht,Zt)instanceof Ie){const r=await p(this,Ht,Zt).getRoomState();({roomUUID:s}=(e=(t=r==null?void 0:r.payload)==null?void 0:t.roomState)!=null?e:{}),i.setRoomUUID(s)}else i.setRoomUUID(we.meetingId);k3(this.self.config.viewType,p(this,ou).capabilities)&&(await p(this,Ks).joinRoom(this.self.name,this.self.id,this.self.userId,s),p(this,Ks).socket.flush(),p(this,Ks).onReconnect=async()=>{await p(this,Ks).joinRoom(this.self.name,this.self.id,this.self.userId,s),p(this,Ks).socket.flush()}),X3(this.self.config)&&await this.joinMediaRoom(s)}catch(i){throw w.error("Error in joinRoom",{error:i}),i}}async leaveRoom(t="left"){var e;const{roomJoined:i}=this;await this.leaveMediaRoom();try{(e=p(this,ou))==null||e.disconnect()}catch{w.error("SelfController::leaveRoom::socketDisconnect")}this.self.roomState=t,W3(),jp.cleanup(),!(t!=="rejected"&&this.self.config.viewType!=="LIVESTREAM"&&!i)&&this.self.emit("roomLeft",{state:t})}async joinMediaRoom(t){var e,i,s,r;if((e=p(this,Ht,Zt))!=null&&e.isDisconnected&&p(this,Ht,Zt)instanceof Ie){(i=p(this,Ht,Zt))==null||i.reconnect();return}if(p(this,Ht,Zt)instanceof ye&&this.self.waitlistStatus==="waiting")return;const{roomJoined:n}=(r=await((s=p(this,Ht,Zt))==null?void 0:s.joinRoom(this.self.name,!this.self.audioEnabled,t,void 0,{audio:this.self.audioEnabled,video:this.self.videoEnabled,screen:this.self.screenShareEnabled})))!=null?r:{};p(this,Ht,Zt)instanceof ye&&(p(this,Ht,Zt).onSocketReconnection=this.joinMediaRoom.bind(this,t)),n&&await this.shareMediaTracks()}async leaveMediaRoom(){await this.cleanupSelf(),p(this,Ht,Zt)&&this.roomJoined&&(await p(this,Ht,Zt).leaveRoom(),p(this,Ht,Zt).roomJoined=!1)}async cleanupSelf(){await this.self.disableAudio(),await this.self.disableVideo(),await this.self.disableScreenShare(),this.self.cleanUpTracks(),this.self.destructMediaHandler(),this.self.removeDocumentEventListeners()}},ou=new WeakMap,Ks=new WeakMap,Ht=new WeakSet,Zt=function(){return oi()},mE);let Ol=eI;hh([S.trace("SelfController.setupEvents")],Ol.prototype,"setupEvents",1);hh([S.trace("SelfController.joinRoom")],Ol.prototype,"joinRoom",1);hh([S.trace("SelfController.leaveRoom")],Ol.prototype,"leaveRoom",1);hh([S.trace("SelfController.joinMediaRoom")],Ol.prototype,"joinMediaRoom",1);hh([S.trace("SelfController.leaveMediaRoom")],Ol.prototype,"leaveMediaRoom",1);var HK=Object.defineProperty,WK=Object.getOwnPropertyDescriptor,ko=(t,e,i,s)=>{for(var r=s>1?void 0:s?WK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&HK(e,i,r),r},cu,od,_a,Do,cd,fE;let zs=(fE=class extends Nt{constructor(t,e){super(),R(this,_a),v(this,"id"),v(this,"userId"),v(this,"name"),v(this,"picture"),v(this,"isHost"),v(this,"clientSpecificId"),v(this,"flags"),v(this,"device"),v(this,"videoTrack"),v(this,"audioTrack"),v(this,"screenShareTracks"),v(this,"videoEnabled"),v(this,"audioEnabled"),v(this,"screenShareEnabled"),v(this,"producers"),R(this,cu,void 0),v(this,"supportsRemoteControl",!1),R(this,od,void 0),v(this,"presetName"),R(this,cd,void 0);const{id:i,userId:s,displayName:r,device:n,picture:a,isHost:o,flags:c,clientSpecificId:u,stageStatus:l,customParticipantId:h,audioMuted:g,audioTrack:m,videoEnabled:f=!1,videoTrack:_,producers:k,metadata:y}=t;this.id=i,this.userId=s,this.name=r,this.device=n,this.picture=a,this.isHost=o,this.flags=c,P(this,od,l!=null?l:bi.ON_STAGE),this.clientSpecificId=h!=null?h:u,this.audioEnabled=!g,this.audioTrack=m,this.videoEnabled=f,this.videoTrack=_,this.screenShareTracks={audio:void 0,video:void 0},this.producers=k!=null?k:[],this.presetName=y==null?void 0:y.preset_name,P(this,cu,!1),P(this,cd,e),this.setupEvents()}get webinarStageStatus(){return p(this,od)}get stageStatus(){return p(this,od)}get roomJoined(){var t;return((t=p(this,_a,Do))==null?void 0:t.roomJoined)===!0}setVideoEnabled(t,e=!0){this.videoEnabled=t,e&&(w.info("DyteParticipant::setVideoEnabled::videoUpdate",{...uc(this)}),this.emit("videoUpdate",{videoEnabled:this.videoEnabled,videoTrack:this.videoTrack}))}setAudioEnabled(t,e=!0){this.audioEnabled=t,e&&(w.info("DyteParticipant::setAudioEnabled::audioUpdate",{...uc(this)}),this.emit("audioUpdate",{audioEnabled:this.audioEnabled,audioTrack:this.audioTrack}))}setScreenShareEnabled(t,e=!0){this.screenShareEnabled=t,e&&this.emit("screenShareUpdate",{screenShareEnabled:this.screenShareEnabled,screenShareTracks:this.screenShareTracks})}setupEvents(){T.onAsync(E.UPDATE_PEER_STAGE_STATUS,async({id:t,status:e})=>{t===this.id&&e!==this.stageStatus&&this.setStageStatus(e)})}async pin(){if(!this.roomJoined)throw new I("Can`t pin participant without joining room");return p(this,_a,Do).pinPeer(this.id)}async unpin(){if(!this.roomJoined)throw new I("Can`t unpin participant without joining room");return p(this,_a,Do).pinPeer(null)}setIsPinned(t,e=!0){P(this,cu,t);const i=t?"pinned":"unpinned";e&&this.emit(i,this)}async disableAudio(){const t=this.id;if(w.info("DyteParticipant::disable_audio",{dyteParticipant:{id:t}}),!this.roomJoined)throw new I("Can`t disable participant audio without joining room");if(p(this,cd).permissions.canDisableParticipantAudio)return p(this,_a,Do).disableAudio(t);throw w.error("DyteParticipant::unauthorized_disable_audio",{dyteParticipant:{id:t}}),new I("Unauthorized: User does not have permission to disable participant audio.")}async kick(){const t=this.id;if(w.info("DyteParticipant::kick",{dyteParticipant:{id:t}}),!this.roomJoined)throw new I("Can`t kick participant without joining room");if(p(this,cd).permissions.kickParticipant)return p(this,_a,Do).kick(t);throw w.error("DyteParticipant::unauthorized_kick",{dyteParticipant:{id:t}}),new I("Unauthorized: User does not have permission to kick participants.")}async disableVideo(){const t=this.id;if(w.info("DyteParticipant::disable_video",{dyteParticipant:{id:t}}),!this.roomJoined)throw new I("Can`t disable participant video without joining room");if(p(this,cd).permissions.canDisableParticipantVideo)return p(this,_a,Do).disableVideo(t);throw w.error("DyteParticipant::unauthorized_disable_video",{dyteParticipant:{id:t}}),new I("Unauthorized: User does not have permission to disable participant video.")}async acceptJoinStageRequest(){T.emitAsync(E.ACCEPT_JOIN_STAGE_REQUEST,{userId:this.userId})}async rejectRequestToJoinStage(){T.emitAsync(E.REJECT_REQUEST_TO_JOIN_STAGE,{userId:this.userId})}async removeFromStage(){T.emitAsync(E.REMOVE_FROM_STAGE,{userId:this.userId})}setStageStatus(t){P(this,od,t);let e;t===bi.OFF_STAGE&&(e="peerStoppedPresenting"),t===bi.ON_STAGE&&(e="peerStartedPresenting"),t===bi.ACCEPTED_TO_JOIN_STAGE&&(e="peerAcceptedToJoinStage"),t===bi.REQUESTED_TO_JOIN_STAGE&&(e="peerRequestToJoinStage"),e&&this.emit(e,this),this.emit("stageStatusUpdate",this)}setWebinarStageStatus(t){this.setStageStatus(t)}get isPinned(){return p(this,cu)}},cu=new WeakMap,od=new WeakMap,_a=new WeakSet,Do=function(){return oi()},cd=new WeakMap,fE);ko([S.trace("DyteParticipant.disableAudio")],zs.prototype,"disableAudio",1);ko([S.trace("DyteParticipant.kick")],zs.prototype,"kick",1);ko([S.trace("DyteParticipant.disableVideo")],zs.prototype,"disableVideo",1);ko([S.trace("DyteParticipant.acceptJoinStageRequest")],zs.prototype,"acceptJoinStageRequest",1);ko([S.trace("DyteParticipant.rejectRequestToJoinStage")],zs.prototype,"rejectRequestToJoinStage",1);ko([S.trace("DyteParticipant.removeFromStage")],zs.prototype,"removeFromStage",1);ko([S.trace("DyteParticipant.setStageStatus")],zs.prototype,"setStageStatus",1);zs=ko([Ii(t=>{throw new I(t.message,"1200")})],zs);var ti,_d;class U_ extends Map{constructor(e){const{onAddEvent:i="added",onDeleteEvent:s="deleted",onClearEvent:r="cleared"}=e!=null?e:{};super(),R(this,ti,void 0),R(this,_d,void 0),v(this,"onAddEvent"),v(this,"onDeleteEvent"),v(this,"onClearEvent"),P(this,ti,new Nt),this.onAddEvent=i,this.onDeleteEvent=s,this.onClearEvent=r,P(this,_d,new Map)}emit(e,...i){return p(this,ti).emit(e,...i)}on(e,i){return p(this,ti).on(e,i)}addListener(e,i){return p(this,ti).addListener(e,i)}off(e,i){return p(this,ti).off(e,i)}once(e,i){return p(this,ti).once(e,i)}prependListener(e,i){return p(this,ti).prependListener(e,i)}prependOnceListener(e,i){return p(this,ti).prependOnceListener(e,i)}removeListener(e,i){return p(this,ti).removeListener(e,i)}removeAllListeners(e){return p(this,ti).removeAllListeners(e)}listeners(e){return p(this,ti).listeners(e)}listenerCount(e){return p(this,ti).listenerCount(e)}getMaxListeners(){return p(this,ti).getMaxListeners()}setMaxListeners(e){return p(this,ti).setMaxListeners(e)}eventNames(){return p(this,ti).eventNames()}add(e,i=!0){return this.set(e.id,e,i)}set(e,i,s=!0){const r=super.set(e,i),n=(a,...o)=>{this.emit(a,i,...o)};return p(this,_d).set(e,n),i.on("*",n),s&&p(this,ti).emit(this.onAddEvent,i),r}delete(e,i=!0,s=!1){const r=this.get(e);if(!r)return!1;r.removeListener("*",p(this,_d).get(e));const n=super.delete(e);return s&&r.removeAllListeners(),i&&p(this,ti).emit(this.onDeleteEvent,r),n}clear(e=!0,i=!1){this.forEach(r=>{r.removeListener("*",p(this,_d).get(r.id)),i&&r.removeAllListeners()});const s=super.clear();return e&&p(this,ti).emit(this.onClearEvent),s}toArray(){return Array.from(this.values())}}ti=new WeakMap,_d=new WeakMap;class ag extends U_{constructor(e){const{onAddEvent:i="participantJoined",onDeleteEvent:s="participantLeft",onClearEvent:r="participantsCleared"}=e!=null?e:{};super({onAddEvent:i,onDeleteEvent:s,onClearEvent:r})}add(e,i=!0){return super.add(e,i)}clear(e=!0,i=!1){return super.clear(e,i)}delete(e,i=!0,s=!1){return super.delete(e,i,s)}}class qK{constructor(){v(this,"_orderedArray"),v(this,"_map"),this._map=new Map,this._orderedArray=[]}add(e,i){if(!this._map.has(e))return this._map.set(e,{peerId:e,priority:i}),this._orderedArray.splice(Math.max(i-1,0),0,e),this.index(e);const s=this.index(e);this.delete(e);const r=this.add(e,i);return s!==r?(w.info("DyteSelectedPeer::add()::new_position_for_active_speaker",{selectedPeer:{oldIndex:s,newIndex:r}}),r):-1}delete(e){if(this._map.has(e)){const i=this.index(e);this._map.delete(e),this._orderedArray.splice(i,1)}}index(e){return this._map.has(e)?this._orderedArray.indexOf(e):-1}[Symbol.iterator](){return this._orderedArray[Symbol.iterator]()}}class GK{constructor(){v(this,"_activeSpeakerPeers"),v(this,"_compulsoryPeers"),this._activeSpeakerPeers=new qK,this._compulsoryPeers=new Set}add(e,i){if(i<0)return this._compulsoryPeers.add(e),0;if(this.compulsoryPeers.includes(e)&&(i>0||i===246267631)){if(w.info("DyteSelectedPeer::removing_compulsory_peer",{selectedPeer:{peerId:e}}),this._removeFromCompulsoryPeer(e),i===246267631)return-1}else if(i===229490415)return this.delete(e),-1;return this._activeSpeakerPeers.add(e,i)}delete(e){w.info("DyteSelectedPeer::deleting_peer_from_selectedPeer",{selectedPeer:{peerId:e}}),this._removeFromCompulsoryPeer(e),this._activeSpeakerPeers.delete(e)}index(e){return this._activeSpeakerPeers.index(e)}get peers(){return Array.from(new Set(this.compulsoryPeers.concat(this.activeSpeakerPeers)))}get compulsoryPeers(){return Array.from(this._compulsoryPeers.values())}get peerPriorities(){return Array.from(this._activeSpeakerPeers).map((e,i)=>i)}get activeSpeakerPeers(){return Array.from(this._activeSpeakerPeers)}_removeFromCompulsoryPeer(e){this._compulsoryPeers.delete(e)}}var Qo;class JK extends Nt{constructor(){super(),R(this,Qo,void 0),P(this,Qo,new Map)}__set(e,i){return p(this,Qo).set(e,i)}__clear(){return p(this,Qo).clear()}get(e){return p(this,Qo).get(e)}toArray(){return Array.from(p(this,Qo).values())}}Qo=new WeakMap;const vE=1080,yE=1920,KK=(t,e,i,s,r,n)=>{let a=.5,o=.5;const c=r,u=n,l=Math.min(i/c,s/u);let h=c*l,g=u*l,m,f,_,k,y=1;return h<i&&(y=i/h),Math.abs(y-1)<1e-14&&g<s&&(y=s/g),h*=y,g*=y,_=c/(h/i),k=u/(g/s),m=(c-_)*a,f=(u-k)*o,m<0&&(m=0),f<0&&(f=0),_>c&&(_=c),k>u&&(k=u),[m,f,_,k,t,e,i,s]};var en,Yo,Tt,Mn,Oa,Ys,Ct;class QK extends Nt{constructor(e){super(),R(this,en,void 0),R(this,Yo,void 0),R(this,Tt,{height:vE,width:yE}),R(this,Mn,{brand:"#2160FD",background:"#141414",videoBackground:"#191919",textOnBrand:"#EEEEEE"}),R(this,Oa,void 0),R(this,Ys,{}),R(this,Ct,void 0),v(this,"cleanupEventListeners",()=>{p(this,Ct).removeListener("stageJoined",this.enablePipMediaControls),p(this,Ct).removeListener("stageLeft",this.unmountEvents),p(this,Ct).removeListener("videoUpdate",this.onSelfVideoUpdateListener),p(this,Ct).removeListener("audioUpdate",this.onSelfAudioUpdateListener),p(this,Ct).removeListener("roomLeft",this.disable)}),v(this,"enablePipMediaControls",()=>{this.mountAudioEvents(),this.mountVideoEvents()}),v(this,"onSelfVideoUpdateListener",({videoEnabled:i})=>{this.updateMediaSession("CAMERA",i)}),v(this,"onSelfAudioUpdateListener",({audioEnabled:i})=>{this.updateMediaSession("MIC",i)}),v(this,"eventCallback",i=>{i==="CAMERA"&&(p(this,Ct).videoEnabled?p(this,Ct).disableVideo():p(this,Ct).enableVideo(),this.emit("cameraToggled")),i==="MIC"&&(p(this,Ct).audioEnabled?p(this,Ct).disableAudio():p(this,Ct).enableAudio(),this.emit("micToggled")),i==="END"&&(T.emit(E.PIP_HANGUP),this.cleanupEventListeners(),this.emit("hangup"),this.cleanup())}),v(this,"unmountEvents",()=>{navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||(navigator.mediaSession.setActionHandler("togglemicrophone",void 0),navigator.mediaSession.setActionHandler("togglecamera",void 0))}),v(this,"animate",()=>{p(this,Ys)!==void 0&&this.paintCanvas(),p(this,Oa)!==void 0&&P(this,Oa,requestAnimationFrame(()=>this.animate()))}),v(this,"disable",()=>{this.cleanupEventListeners(),cancelAnimationFrame(p(this,Oa)),P(this,Oa,void 0),document.exitPictureInPicture()}),P(this,Ct,e),e.config.isV2===!0?P(this,Mn,{brand:e.config.designTokens.colors.brand[500],background:e.config.designTokens.colors.background[1e3],videoBackground:e.config.designTokens.colors.videoBg,textOnBrand:e.config.designTokens.colors.textOnBrand}):e.config.isV2===!1&&P(this,Mn,{brand:e.config.colors.primary,background:e.config.colors.background,videoBackground:e.config.colors.videoBackground,textOnBrand:e.config.colors.textPrimary})}setupEventListeners(){p(this,Ct).addListener("stageJoined",this.enablePipMediaControls),p(this,Ct).addListener("stageLeft",this.unmountEvents),p(this,Ct).addListener("videoUpdate",this.onSelfVideoUpdateListener),p(this,Ct).addListener("audioUpdate",this.onSelfAudioUpdateListener),p(this,Ct).addListener("roomLeft",this.disable)}createCanvas(){const e=document.createElement("canvas");e.height=p(this,Tt).height,e.width=p(this,Tt).width,P(this,en,e)}setupMediaSessionEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||(navigator.mediaSession.setActionHandler("hangup",()=>{this.eventCallback("END")}),this.mountAudioEvents(),this.mountVideoEvents())}mountAudioEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setMicrophoneActive===void 0||p(this,Ct).permissions.canProduceAudio&&navigator.mediaSession.setActionHandler("togglemicrophone",()=>{this.eventCallback("MIC")})}mountVideoEvents(){navigator.mediaSession===void 0||navigator.mediaSession.setCameraActive===void 0||p(this,Ct).permissions.canProduceVideo&&navigator.mediaSession.setActionHandler("togglecamera",()=>{this.eventCallback("CAMERA")})}drawEmptyTile(e,i,s,r,n){if(p(this,en)===void 0)return;const a=p(this,en).getContext("2d"),o=p(this,en).width,c=4,u=4,l=i-c*2,h=s-c*2,g=Math.floor(o/l),m=Math.floor(e/g),f=e%g*(l+c)+c,_=m*(h+c)+c;a.fillStyle=p(this,Mn).videoBackground,a.strokeStyle=p(this,Mn).brand,a.beginPath(),a.moveTo(f+u,_),a.arcTo(f+l,_,f+l,_+u,u),a.arcTo(f+l,_+h,f+l-u,_+h,u),a.arcTo(f,_+h,f,_+h-u,u),a.arcTo(f,_,f+u,_,u),a.closePath(),a.fill(),a.stroke();const k=l/6,y=l/2+f,b=h/2+_;if(a.save(),(r||n)&&(a.beginPath(),a.arc(y,b,k,0,Math.PI*2),a.fillStyle=p(this,Mn).brand,a.fill()),r&&(a.fillStyle=p(this,Mn).textOnBrand,a.font=`${k/2}px sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(r,y,b)),n){const x=new Image;x.src=n,x.onload=()=>{a.drawImage(x,y-k,b-k,k*2,k*2),a.restore()}}}drawGrid(e,i,s){if(p(this,en)===void 0)return;const r=p(this,en).getContext("2d");r.fillStyle=p(this,Mn).background,r.fillRect(0,0,p(this,Tt).width,p(this,Tt).height);const n=Object.values(p(this,Ys));let a=0,o=0;for(;a<p(this,Tt).height-5;){let c=0;for(;c<p(this,Tt).width-5&&o<s;){const u=n[o].element;if(n[o].enabled){const[l,h,g,m,f,_,k,y]=KK(c,a,e,i,u.videoWidth,u.videoHeight);r.drawImage(u,l,h,g,m,f,_,k,y)}else this.drawEmptyTile(o,e,i,n[o].displayText);o+=1,c+=e}a+=i}}calcGridElemSize(e){switch(e){case 0:case 1:return[p(this,Tt).width,p(this,Tt).height];case 2:return[Math.floor(p(this,Tt).width/2),p(this,Tt).height];case 3:case 4:return[Math.floor(p(this,Tt).width/2),Math.floor(p(this,Tt).height/2)];case 5:case 6:return[Math.floor(p(this,Tt).width/3),Math.floor(p(this,Tt).height/2)];case 7:case 8:case 9:return[Math.floor(p(this,Tt).width/3),Math.floor(p(this,Tt).height/3)];default:return[Math.floor(p(this,Tt).width/3),Math.floor(p(this,Tt).height/2)]}}paintCanvas(){const e=Object.values(p(this,Ys)).length,[i,s]=this.calcGridElemSize(e);this.drawGrid(i,s,e)}isSupported(){return!!window.chrome&&document.pictureInPictureEnabled}get isActive(){return document.pictureInPictureElement!==null}cleanup(){this.isSupported()&&document.exitPictureInPicture!==void 0&&document.pictureInPictureElement!==null&&document.exitPictureInPicture(),this.removeAllSources(),P(this,en,void 0),P(this,Yo,void 0),P(this,Oa,void 0)}init({height:e,width:i}={}){this.cleanup(),this.createCanvas(),this.setupMediaSessionEvents();const s=document.createElement("video");P(this,Tt,{height:e!=null?e:vE,width:i!=null?i:yE}),s.height=p(this,Tt).height,s.width=p(this,Tt).width,s.autoplay=!0,s.srcObject=p(this,en).captureStream(24),P(this,Yo,s),p(this,Yo).onloadedmetadata=()=>{try{this.emit("pipStarted"),p(this,Yo).onleavepictureinpicture=()=>{this.emit("pipEnded")}}catch{this.emit("pipEnded")}},this.paintCanvas()}updateMediaSession(e,i){navigator.mediaSession!==void 0&&(e==="CAMERA"&&navigator.mediaSession.setCameraActive!==void 0&&navigator.mediaSession.setCameraActive(i),e==="MIC"&&navigator.mediaSession.setMicrophoneActive!==void 0&&navigator.mediaSession.setMicrophoneActive(i))}enableSource(e){p(this,Ys)[e]!==void 0&&(p(this,Ys)[e].enabled=!0)}disableSource(e){p(this,Ys)[e]!==void 0&&(p(this,Ys)[e].enabled=!1)}addSource(e,i,s,r=void 0){p(this,Ys)[e]={element:i,enabled:s,displayText:r?r.substring(0,2):void 0}}removeSource(e){delete p(this,Ys)[e]}removeAllSources(){P(this,Ys,{})}enable(){this.setupEventListeners(),this.updateMediaSession("CAMERA",p(this,Ct).videoEnabled),this.updateMediaSession("MIC",p(this,Ct).audioEnabled),P(this,Oa,requestAnimationFrame(()=>this.animate())),p(this,Yo).requestPictureInPicture()}}en=new WeakMap,Yo=new WeakMap,Tt=new WeakMap,Mn=new WeakMap,Oa=new WeakMap,Ys=new WeakMap,Ct=new WeakMap;var YK=Object.defineProperty,ZK=Object.getOwnPropertyDescriptor,hr=(t,e,i,s)=>{for(var r=s>1?void 0:s?ZK(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&YK(e,i,r),r},Xt,gi,ka,Xr,bE;let ws=(bE=class extends Nt{constructor(t,e){super(),R(this,Xt),v(this,"waitlisted"),v(this,"joined"),v(this,"active"),v(this,"pinned"),v(this,"all"),v(this,"pip"),R(this,ka,void 0),R(this,Xr,void 0),v(this,"viewMode"),v(this,"currentPage"),v(this,"lastActiveSpeaker"),v(this,"selectedPeers"),P(this,ka,t),P(this,Xr,e),this.waitlisted=new ag,this.joined=new ag,this.active=new ag,this.pinned=new ag,this.all=new JK,this.pip=new QK(t),this.selectedPeers=new GK,this.viewMode="ACTIVE_GRID",this.currentPage=0}get roomJoined(){var t;return((t=p(this,Xt,gi))==null?void 0:t.roomJoined)===!0}get count(){return this.joined.size}get maxActiveParticipantsCount(){return p(this,Xt,gi).maxPreferredStreams}get pageCount(){return this.viewMode==="PAGINATED"?Math.ceil(this.joined.size/this.maxActiveParticipantsCount):0}acceptWaitingRoomRequest(t){var e,i;if(p(this,Xt,gi)instanceof Ie){if(!this.roomJoined)throw new I("Can`t accept waiting room request without joining room");return p(this,Xt,gi).acceptWaitingRequest(t)}const s=(i=(e=this.waitlisted.get(t))==null?void 0:e.userId)!=null?i:t;return p(this,Xr).acceptWaitingRoomRequest([s])}async acceptAllWaitingRoomRequest(t){if(p(this,Xt,gi)instanceof Ie){const i=t.map(s=>this.acceptWaitingRoomRequest(s));return Promise.all(i)}const e=t.map(i=>{var s,r;return(r=(s=this.waitlisted.get(i))==null?void 0:s.userId)!=null?r:i});return p(this,Xr).acceptWaitingRoomRequest(e)}async rejectWaitingRoomRequest(t){var e,i;if(p(this,Xt,gi)instanceof Ie){if(!this.roomJoined)throw new I("Can`t reject waiting room request without joining room");await p(this,Xt,gi).rejectWaitingRequest(t),this.waitlisted.delete(t)}const s=(i=(e=this.waitlisted.get(t))==null?void 0:e.userId)!=null?i:t;p(this,Xr).rejectWaitingRoomRequest([s])}async setViewMode(t){if(w.info("DyteParticipants::set_view_mode",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),!["ACTIVE_GRID","PAGINATED"].includes(t))throw w.error("DyteParticipants::setViewMode::invalid_view_mode",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new I(`Invalid view mode: ${t}. Try ACTIVE_GRID or PAGINATED.`);if(this.viewMode===t){w.info("DyteParticipants::setViewMode::view_mode_same_as_previous",{pageNavigation:{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});return}if(this.viewMode=t,t==="PAGINATED"){this.currentPage=1;let e=[];p(this,Xt,gi)instanceof Ie?{peerIds:e}=(await p(this,Xt,gi).getPage(this.currentPage)).payload:e=this.getPeerIdsForCurrentPage(),T.emit(E.GET_PAGE,{peerIds:e})}else t==="ACTIVE_GRID"&&(this.currentPage=0,p(this,Xt,gi)instanceof Ie?p(this,Xt,gi).getPage(this.currentPage):T.emit(E.REFRESH_GRID));this.emit("viewModeChanged",{viewMode:t,currentPage:this.currentPage,pageCount:this.pageCount})}getPeerIdsForCurrentPage(){w.info("DyteParticipants::getPeerIdsForCurrentPage()",{pageNavigation:{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}});const{compulsoryPeers:t}=this.selectedPeers,e=t.filter(a=>this.joined.has(a)),i=Array.from(this.pinned.keys()).filter(a=>!e.includes(a)),s=Array.from(this.joined.keys()),r=Math.max((this.currentPage-1)*(this.maxActiveParticipantsCount-e.length-i.length)),n=this.currentPage*(this.maxActiveParticipantsCount-e.length-i.length);return e.concat(i,s.slice(r,n))}async setPage(t){if(w.info("DyteParticipants::set_page",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),this.viewMode!=="PAGINATED")return;if(!Number.isInteger(t))throw w.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new I(`Invalid page: ${t}. Page must be an integer.`);if(t<1||t>this.pageCount)throw w.error("DyteParticipants::invalid_page_number",{pageNavigation:{settingPage:t,viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount,maxActiveParticipantsCount:this.maxActiveParticipantsCount}}),new I(`Invalid page: ${t}. Page must be greater than 0 and less than or equal to ${this.pageCount}.`);this.currentPage=t;let e=[];p(this,Xt,gi)instanceof Ie?{peerIds:e}=(await p(this,Xt,gi).getPage(t)).payload:e=this.getPeerIdsForCurrentPage(),T.emit(E.GET_PAGE,{peerIds:e}),this.emit("pageChanged",{viewMode:this.viewMode,currentPage:this.currentPage,pageCount:this.pageCount})}async disableAllAudio(t){if(w.info("DyteParticipants::disable_all_audio",{actions:{disableAllAudio:{allowUnmute:t}}}),!this.roomJoined)throw new I("Can`t disable all audio without joining room");if(p(this,ka).permissions.canAllowParticipantAudio)return p(this,Xt,gi).muteAll(t);throw w.error("DyteParticipants::unauthorized_disable_all_audio",{actions:{disableAllAudio:{allowUnmute:t}}}),new I("Unauthorized: User does not have permission to disable peer audio.")}async disableAllVideo(){if(w.info("DyteParticipants::disable_all_video"),!this.roomJoined)throw new I("Can`t disable all video without joining room");if(p(this,ka).permissions.canAllowParticipantVideo)return p(this,Xt,gi).muteAllVideo();throw w.error("DyteParticipants::unauthorized_disable_all_video"),new I("Unauthorized: User does not have permission to disable peer video.")}async disableAudio(t){this.joined.get(t).disableAudio()}async disableVideo(t){this.joined.get(t).disableVideo()}async kick(t){await this.joined.get(t).kick(),await p(this,Xr).kick(t)}async kickAll(){if(w.info("DyteParticipants::kick_all"),!this.roomJoined)throw new I("Can`t kick all without joining room");if(!p(this,ka).permissions.kickParticipant)throw w.error("DyteParticipants::unauthorized_kick_all"),new I("Unauthorized: User does not have permission to kick peers.");p(this,Xt,gi).kickAll(),p(this,Xr).kickAll()}async broadcastMessage(t,e){if(w.info("DyteParticipants::broadcastMessage"),!this.roomJoined)throw new I("Can`t broadcast message without joining room");if(!(t!=null&&t.trim()))throw new I("`type` must be a non-empty string.");p(this,Xt,gi)instanceof Ie&&p(this,ka).config.viewType!=="LIVESTREAM"&&p(this,ka).config.viewType!=="CHAT"?p(this,Xt,gi).broadcastMessage(t,e):p(this,Xr).broadcastMessage(t,e)}async acceptAllRequestToJoinStageRequests(t){T.emitAsync(E.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE,{data:t})}async getAllJoinedPeers(t,e,i){return(await p(this,Xr).getRoomPeers(t,e,i)).peers.map(xn.formatSocketServiceMessage)}},Xt=new WeakSet,gi=function(){return oi()},ka=new WeakMap,Xr=new WeakMap,bE);hr([S.trace("DyteParticipants.setViewMode")],ws.prototype,"setViewMode",1);hr([S.trace("DyteParticipants.setPage")],ws.prototype,"setPage",1);hr([S.trace("DyteParticipants.disableAllAudio")],ws.prototype,"disableAllAudio",1);hr([S.trace("DyteParticipants.disableAllVideo")],ws.prototype,"disableAllVideo",1);hr([S.trace("DyteParticipants.disablePeerAudio")],ws.prototype,"disableAudio",1);hr([S.trace("DyteParticipants.disablePeerVideo")],ws.prototype,"disableVideo",1);hr([S.trace("DyteParticipants.kickPeer")],ws.prototype,"kick",1);hr([S.trace("DyteParticipants.kickAll")],ws.prototype,"kickAll",1);hr([S.trace("DyteParticipants.broadcastMessage")],ws.prototype,"broadcastMessage",1);hr([S.trace("DyteParticipants.acceptAllRequestToJoinStageRequests")],ws.prototype,"acceptAllRequestToJoinStageRequests",1);hr([S.trace("DyteParticipants.getAllJoinedPeers")],ws.prototype,"getAllJoinedPeers",1);ws=hr([Ii(t=>{throw new I(t.message,"1200")})],ws);var XK=Object.defineProperty,eQ=Object.getOwnPropertyDescriptor,So=(t,e,i,s)=>{for(var r=s>1?void 0:s?eQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&XK(e,i,r),r},fi,kd,On,rm,La,gt,_t;class xn{constructor(e,i,s){R(this,gt),v(this,"participants"),R(this,fi,void 0),R(this,kd,void 0),R(this,On,new Set),R(this,rm,void 0),R(this,La,void 0),v(this,"syncMembers",async()=>{const r=await p(this,La).getAllAddedParticipants();this.participants.all.__clear(),r.forEach(n=>this.participants.all.__set(n.userId,n)),this.participants.all.emit("participantsUpdate")}),v(this,"chatRoomJoinHandler",async r=>{r.peer&&r.peer.userId!==p(this,fi).userId&&await this.syncMembers()}),P(this,La,i),this.participants=new ws(e,p(this,La)),P(this,kd,new Map),P(this,fi,e),P(this,rm,T_(e.config.viewType,s)?"socket-service":"room-node"),p(this,rm)==="socket-service"&&e.config.viewType==="CHAT"?this.setupChatEvents():this.setupEvents()}get roomJoined(){var e;return((e=p(this,gt,_t))==null?void 0:e.roomJoined)===!0}updatePageParticipants(e){const i=new Set(e),s=new Map(this.participants.active);if(this.participants.active.forEach((r,n)=>{this.participants.active.delete(n,!i.has(n))}),i.forEach(r=>{if(!this.participants.joined.get(r)){w.warn("updatePageParticipants::participant_not_in_joined_list",{dyteParticipant:{id:r}});return}this.participants.active.add(this.participants.joined.get(r),!s.get(r))}),p(this,gt,_t)instanceof ye){P(this,On,new Set(this.participants.active.keys())),Array.from(s.keys()).forEach(n=>{if(i.has(n))return;const a=this.participants.joined.get(n);if(!a)return;const o={producers:a.producers,peerId:a.id};p(this,gt,_t).deactivatePeers(o)});const r=[];this.participants.active.forEach(n=>{const a={peerId:n.id,producers:n.producers};r.push(a)}),p(this,gt,_t).activatePeers(r)}}updatePinnedParticipants(){this.participants.pinned.forEach(e=>{e.setIsPinned(!1),this.participants.pinned.delete(e.id)})}refreshGridParticipants(e=!1){const i=Array.from(this.participants.joined.keys()),s=this.participants.selectedPeers.peers,r=Array.from(this.participants.pinned.keys());if(this.participants.viewMode!=="ACTIVE_GRID"){w.warn("ParticipantController::refreshGridParticipants::not_refreshing_grid_in_not_active_grid_mode");return}const n=this.participants.maxActiveParticipantsCount-1,a=new Set(s.concat(r).filter(u=>u!==p(this,fi).id&&this.participants.joined.has(u)));let o=[...a];const c=n-a.size;if(c>=0){const u=i.filter(l=>!a.has(l)&&l!==p(this,fi).id).slice(0,c);o=[...a].concat(u)}else o=o.slice(0,n);this.updateActiveParticipantsHiveNode(o,e)}updateActiveParticipantsHiveNode(e,i=!1){if(!this.roomJoined){w.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const s=Array.from(this.participants.active.keys()),r=new Map(this.participants.active),n={};e.forEach(l=>{n[l]=!0});const a=[];s.forEach((l,h)=>{(!n[l]||!this.participants.joined.get(l))&&a.push(h)}),e.forEach(l=>{r.get(l)||(s.length<e.length?s.push(l):s[a.shift()]=l)}),s.forEach((l,h)=>{n[l]||s.splice(h,1)}),Array.from(this.participants.active.keys()).forEach(l=>{this.participants.active.delete(l,!n[l])}),s.forEach(l=>{if(!this.participants.joined.get(l)){w.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:l}});return}this.participants.active.add(this.participants.joined.get(l),!r.get(l))}),this.participants.active.emit("participantsUpdate"),w.info("ParticipantController::updateActiveParticipants::updating_current_selected_peers",{debuggingHint:i?"Forcefully updating currentActiveGridParticipants set":null}),i&&P(this,On,new Set);const o=new Set(e),c=[],u=[];if(p(this,On).forEach(l=>{o.has(l)||c.push(l)}),o.forEach(l=>{p(this,On).has(l)||u.push(l)}),P(this,On,o),u.length===0&&c.length===0){w.info("ParticipantController::updateActiveParticipants::current_selected_peers_is_same");return}if(p(this,gt,_t)instanceof ye){const l=[];c.forEach(h=>{const g=this.participants.joined.get(h);if(!g)return;const m={producers:g.producers,peerId:g.id};l.push(p(this,gt,_t).deactivatePeers(m))}),Promise.all(l).then(()=>{const h=[];u.forEach(g=>{const m=this.participants.active.get(g);if(!m){w.warn("peer is not in active map which is going to activate, should not happen",{dyteParticipant:{id:g}});return}const f={peerId:m.id,producers:m.producers};h.push(f)}),p(this,gt,_t).activatePeers(h)}).catch(h=>{w.info("Error on deactivating peers",h)})}}updateActiveParticipants(e){if(!this.roomJoined){w.warn("Skipped::ParticipantController::updateActiveParticipants",{roomJoined:this.roomJoined});return}const i=Array.from(this.participants.active.keys()),s=new Map(this.participants.active),r={};e.forEach(a=>{r[a]=!0});const n=[];i.forEach((a,o)=>{(!r[a]||!this.participants.joined.get(a))&&n.push(o)}),e.forEach(a=>{s.get(a)||(i.length<e.length?i.push(a):i[n.shift()]=a)}),i.forEach((a,o)=>{r[a]||i.splice(o,1)}),Array.from(this.participants.active.keys()).forEach(a=>{this.participants.active.delete(a,!r[a])}),i.forEach(a=>{if(!this.participants.joined.get(a)){w.warn("updateActiveParticipants::participant_not_in_joined_list",{dyteParticipant:{id:a}});return}this.participants.active.add(this.participants.joined.get(a),!s.get(a))}),this.participants.active.emit("participantsUpdate")}updateActiveParticipantsWithPriorities(e,i=!1){if(!this.roomJoined){w.warn("Skipped::ParticipantController::updateActiveParticipantsWithPriorities",{roomJoined:this.roomJoined});return}e.forEach(s=>{this.participants.selectedPeers.add(s.peerId,s.priority)}),i&&this.refreshGridParticipants()}setupChatEvents(){T.onAsync(E.SOCKET_SERVICE_ROOM_JOINED,this.syncMembers),p(this,La).on(ne.joinRoom,this.chatRoomJoinHandler)}waitingRoomRequestHandler(e){if(p(this,gt,_t)instanceof Ie)return;const i=e.requests.filter(r=>!this.participants.waitlisted.toArray().find(n=>n.userId===r.userId)),s=this.participants.waitlisted.toArray().filter(r=>!e.requests.find(n=>n.userId===r.userId));i.forEach(r=>this.participants.waitlisted.add(new zs({id:r.peerId,displayName:r.displayName,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,stageStatus:bi.OFF_STAGE,userId:r.userId,flags:{},isHost:!1},p(this,fi)))),s.forEach(r=>this.participants.waitlisted.delete(r.id))}setupEvents(){T.on(E.PEER_JOINED,async e=>{var i,s,r;const n=new zs(e,p(this,fi));p(this,fi).id!==n.id&&!((i=e.flags)!=null&&i.recorder)&&!((s=n.flags)!=null&&s.hidden_participant)&&!((r=n.flags)!=null&&r.hiddenParticipant)&&(this.participants.joined.add(n),this.participants.waitlisted.delete(n.id),e.stageStatus===bi.REQUESTED_TO_JOIN_STAGE&&T.emit(E.STAGE_REQUESTS_UPDATED),this.participants.currentPage===this.participants.pageCount&&p(this,gt,_t)instanceof Ie&&T.emit(E.GET_PAGE,(await p(this,gt,_t).getPage(this.participants.currentPage)).payload))}),p(this,La).on(ne.getWaitingRoomRequests,this.waitingRoomRequestHandler.bind(this)),T.on(E.SOCKET_SERVICE_ROOM_JOINED,()=>{p(this,gt,_t)instanceof Ie||p(this,La).getWaitingRoomRequests()}),T.on(E.WAITLIST_PEER_ADDED,({id:e,name:i})=>{this.participants.waitlisted.add(new zs({id:e,displayName:i,audioMuted:!0,videoEnabled:!1,audioTrack:void 0,videoTrack:void 0,stageStatus:bi.OFF_STAGE,userId:void 0,flags:{},isHost:!1},p(this,fi)))}),T.on(E.WAITLIST_PEER_REMOVED,({id:e})=>{this.participants.waitlisted.delete(e)}),T.on(E.ROOM_JOINED,e=>{p(this,gt,_t)instanceof ye&&this.participants.joined.clear(),e.peers.forEach(i=>{var s,r,n;if((s=i.flags)!=null&&s.recorder||(r=i.flags)!=null&&r.hidden_participant||(n=i.flags)!=null&&n.hiddenParticipant)return;const a=new zs(i,p(this,fi));a.id===e.pinnedPeerId&&(a.setIsPinned(!0,!1),this.participants.pinned.add(a)),this.participants.joined.add(a)}),e.requestToJoinPeersList&&e.requestToJoinPeersList.forEach(({id:i})=>{T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:i,status:bi.REQUESTED_TO_JOIN_STAGE})}),p(this,gt,_t)instanceof Ie&&p(this,gt,_t).getPage(this.participants.currentPage)}),T.on(E.PEER_CLOSED,async({id:e})=>{if(this.participants.joined.delete(e,!0,!0),this.participants.pinned.delete(e,!0,!0),p(this,gt,_t)instanceof ye&&(this.participants.selectedPeers.delete(e),this.participants.active.get(e)&&this.participants.currentPage===0)){this.refreshGridParticipants();return}const{currentPage:i}=this.participants,s=p(this,fi).config.maxVideoStreams,r=(Me.isMobile()?s.mobile:s.desktop)*(i-1),n=this.participants.active.get(e);if(r===0)this.participants.setViewMode("ACTIVE_GRID");else if(this.participants.joined.size<=r)i===2?this.participants.setViewMode("ACTIVE_GRID"):this.participants.setPage(i-1);else if(n){let a=[];p(this,gt,_t)instanceof Ie?{peerIds:a}=(await p(this,gt,_t).getPage(i)).payload:a=this.participants.getPeerIdsForCurrentPage(),T.emit(E.GET_PAGE,{peerIds:a})}}),T.on(E.ROOM_NODE_DISCONNECTED,()=>{Array.from(this.participants.joined.keys()).forEach(e=>{this.participants.joined.delete(e)}),Array.from(this.participants.active.keys()).forEach(e=>{this.participants.active.delete(e)}),Array.from(this.participants.pinned.keys()).forEach(e=>{this.participants.pinned.delete(e)}),this.participants.currentPage=0,this.participants.viewMode="ACTIVE_GRID",this.participants.emit("viewModeChanged",{viewMode:"ACTIVE_GRID",currentPage:this.participants.currentPage,pageCount:this.participants.pageCount}),P(this,On,new Set)}),T.on(E.PEER_MUTED,({peerId:e})=>{const i=this.participants.joined.get(e);i&&i.setAudioEnabled(!1)}),T.on(E.PEER_UNMUTED,({peerId:e})=>{const i=this.participants.joined.get(e);i&&i.setAudioEnabled(!0)}),T.on(E.CONSUMER_PAUSED,({id:e})=>{this.processConsumerPaused(e)}),T.on(E.CONSUMER_RESUMED,({id:e})=>{this.processConsumerResumed(e)}),T.on(E.NEW_CONSUMER,({id:e})=>{this.processNewConsumer(e)}),T.on(E.CONSUMER_CLOSED,({id:e})=>{this.processConsumerClosed(e)}),T.on(E.GET_PAGE,({peerIds:e})=>{this.participants.viewMode==="PAGINATED"&&this.updatePageParticipants(e)}),T.on(E.SELECTED_PEERS,({peerIds:e,compulsoryPeers:i})=>{if(this.participants.viewMode!=="ACTIVE_GRID")return;if(p(this,gt,_t)instanceof Ie){this.updateActiveParticipants(e);return}const s=e.map((n,a)=>({peerId:n,priority:a+1})),r=i==null?void 0:i.map((n,a)=>({peerId:n,priority:-(a+1)}));s.push(...r!=null?r:[]),s.length>0&&this.updateActiveParticipantsWithPriorities(s)}),T.on(E.SELECTED_PEERS_DIFF,({entries:e})=>{this.participants.viewMode==="ACTIVE_GRID"&&this.updateActiveParticipantsWithPriorities(e,!0)}),T.on(E.REFRESH_GRID,(e=!1)=>{this.participants.viewMode==="ACTIVE_GRID"&&this.refreshGridParticipants(e)}),T.on(E.NEW_PRODUCER,({peerId:e,producer:i})=>{const s=this.participants.joined.get(e);if(!s){w.warn("ParticipantController::NEW_PRODUCER::participant not found",{producer:{id:i==null?void 0:i.producerId,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}},dyteParticipant:{id:e}});return}s.producers.push(i),w.info("ParticipantController::NEW_PRODUCER::producer_added_to_participant",{producer:{id:i==null?void 0:i.producerId,peerId:e,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}}),(i==null?void 0:i.kind)==="audio"||i!=null&&i.screenShare||p(this,On).has(e)?p(this,gt,_t).createConsumer({producingPeerId:e,producerId:i.producerId,screenShare:i.screenShare}):w.info("ParticipantController::NEW_PRODUCER::not_consuming_producer",{producer:{id:i==null?void 0:i.producerId,peerId:e,kind:i==null?void 0:i.kind,status:"UNKNOWN",appData:{screenShare:i==null?void 0:i.screenShare}}})}),T.on(E.PRODUCER_CLOSED,({peerId:e,producerId:i})=>{const s=this.participants.joined.get(e);if(!s){w.warn("ParticipantController::NEW_PRODUCER::participant not found",{dyteParticipant:{id:e}});return}s.producers=s.producers.filter(r=>r.producerId!==i)}),T.on(E.PRODUCER_TOGGLE,({peerId:e,producerId:i,paused:s,kind:r})=>{const n=this.participants.joined.get(e);if(n&&r==="audio"){n.setAudioEnabled(!s);const a=n.producers.find(o=>o.producerId===i);a&&(a.pause=s)}}),T.on(E.ACTIVE_SPEAKER,({peerId:e,volume:i})=>{this.participants.lastActiveSpeaker=e,this.participants.emit("activeSpeaker",{peerId:e,volume:i})}),T.on(E.ROOM_MESSAGE,async({payload:e,type:i,timestamp:s})=>{this.participants.emit("broadcastedMessage",{type:i,payload:e,timestamp:s})}),T.on(E.LOW_CONSUMER_SCORE,({peerId:e,score:i,kind:s})=>{const r=this.participants.joined.get(e);r&&(r.emit("poorConnection",{score:i,kind:s}),this.participants.emit("poorConnection",{participantId:e,score:i,kind:s}))}),T.on(E.CONSUMER_SCORE_UPDATE,({score:e,kind:i,appData:s,peerId:r})=>{var n;const a=i==="video"&&((n=s==null?void 0:s.screenShare)!=null?n:!1),o=this.participants.joined.get(r);o&&(o.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:e,participantId:r}),this.participants.emit("mediaScoreUpdate",{kind:i,isScreenshare:a,score:e,participantId:r}))}),T.on(E.PEER_PINNED,({peerId:e})=>{if(!e){p(this,fi).isPinned&&p(this,fi).setIsPinned(!1),this.participants.pinned.size!==0&&this.updatePinnedParticipants();return}if(e===p(this,fi).id){this.participants.pinned.size!==0&&this.updatePinnedParticipants(),p(this,fi).setIsPinned(!0);return}const i=this.participants.joined.get(e);p(this,fi).isPinned&&p(this,fi).setIsPinned(!1),this.updatePinnedParticipants(),i.setIsPinned(!0),this.participants.pinned.add(i),p(this,gt,_t)instanceof ye&&p(this,gt,_t).activatePeers([{peerId:i.id,producers:i.producers}]).catch(s=>{w.error("unable to create consumers",{error:s})})})}processMedia(e){var i;const s=p(this,gt,_t).getConsumers(),{peerId:r,kind:n,appData:a,remotelyPaused:o,track:c,producerId:u}=(i=s.get(e))!=null?i:{};if(!r)return w.warn("processMedia::Peer ID is undefined",{consumer:{id:e,kind:n,peerId:r,appData:{supportsRemoteControl:a==null?void 0:a.supportsRemoteControl,screenShare:a==null?void 0:a.screenShare},remotelyPaused:o,producerId:u}}),{};const l=a;return w.info("ParticipantController::processMedia",{consumer:{id:e,peerId:r,kind:n,appData:l,remotelyPaused:o,producerId:u}}),p(this,kd).set(e,{type:n,peerId:r,appData:l,remotelyPaused:o,producerId:u}),{peerId:r,kind:n,appData:l,remotelyPaused:o,track:c,producerId:u}}processConsumerClosed(e){const{peerId:i,type:s,appData:r,remotelyPaused:n,producerId:a}=p(this,kd).get(e)||{},o=this.participants.joined.get(i);if(w.info("ParticipantController::processConsumerClosed",{consumer:{id:e,peerId:i,appData:r,kind:s,remotelyPaused:n,producerId:a}}),p(this,kd).delete(e),!!o){if(r&&r.screenShare){o.setScreenShareEnabled(!1),Z.consumerSharedMediaState(e,{screen:!1}),o.screenShareTracks={audio:void 0,video:void 0};return}s==="audio"?(o.setAudioEnabled(!1),Z.consumerSharedMediaState(e,{audio:!1}),o.audioTrack=void 0):s==="video"&&(o.setVideoEnabled(!1),Z.consumerSharedMediaState(e,{video:!1}),o.videoTrack=void 0)}}processConsumerResumed(e){const{peerId:i,kind:s,appData:r,track:n,remotelyPaused:a,producerId:o}=this.processMedia(e);if(!i)return;w.info("ParticipantController::processConsumerResumed",{consumer:{id:e,peerId:i,kind:s,appData:r,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(r.screenShare){s==="video"?c.screenShareTracks.video=n:s==="audio"&&(c.screenShareTracks.audio=n),c.setScreenShareEnabled(!0),Z.consumerSharedMediaState(e,{screen:!0});return}s==="video"?(c.videoTrack=n,c.setVideoEnabled(!0),Z.consumerSharedMediaState(e,{video:!0})):s==="audio"&&(c.audioTrack=n,c.setAudioEnabled(c.audioEnabled),Z.consumerSharedMediaState(e,{audio:c.audioEnabled}))}}processConsumerPaused(e){w.info(`ParticipantController::processConsumerPaused called for consumerId: ${e}`);const{peerId:i,kind:s,track:r,appData:n,remotelyPaused:a,producerId:o}=this.processMedia(e);if(!i)return;w.info("ParticipantController::processConsumerPaused",{consumer:{id:e,peerId:i,kind:s,appData:n,remotelyPaused:a,producerId:o}});const c=this.participants.joined.get(i);c&&(s==="video"?(c.videoTrack=r,c.setVideoEnabled(!1),Z.consumerSharedMediaState(e,{video:!1})):s==="audio"&&(c.audioTrack=r,c.setAudioEnabled(c.audioEnabled),Z.consumerSharedMediaState(e,{audio:c.audioEnabled})))}processNewConsumer(e){const{peerId:i,kind:s,remotelyPaused:r,track:n,appData:a,producerId:o}=this.processMedia(e);if(!i)return;w.info("ParticipantController::processNewConsumer",{consumer:{id:e,peerId:i,kind:s,remotelyPaused:r,appData:a,producerId:o}});const c=this.participants.joined.get(i);if(c){if(a.screenShare){s==="video"?c.screenShareTracks.video=n:s==="audio"&&(c.screenShareTracks.audio=n),(!r||p(this,fi).permissions.isRecorder||ee.hasFeature(ie.SCREEENSHARE_ERR_HACK))&&c.setScreenShareEnabled(!0),a.supportsRemoteControl&&(c.supportsRemoteControl=!0);return}s==="video"?(c.videoTrack=n,r||c.setVideoEnabled(!0),Z.consumerSharedMediaState(e,{video:!r})):s==="audio"&&p(this,gt,_t)instanceof ye&&(c.audioTrack=n,r||c.setAudioEnabled(!0),Z.consumerSharedMediaState(e,{audio:!r}))}}static formatSocketServiceMessage(e){let i;switch(e.stageType){case $s.UNSPECIFIED:i="OFF_STAGE";break;case $s.REQUESTED_STAGE:i="REQUESTED_TO_JOIN_STAGE";break;case $s.APPROVED_STAGE:i="ACCEPTED_TO_JOIN_STAGE";break;case $s.OFF_STAGE:i="OFF_STAGE";break;case $s.ON_STAGE:i="ON_STAGE";break;default:i="OFF_STAGE"}return{id:e.peerId,userId:e.userId,name:e.displayName,stageType:i,customParticipantId:e.customParticipantId,presetId:e.presetId,picture:e.displayPictureUrl,waitlisted:e.waitlisted}}}fi=new WeakMap,kd=new WeakMap,On=new WeakMap,rm=new WeakMap,La=new WeakMap,gt=new WeakSet,_t=function(){return oi()};So([S.trace("ParticipantController.updatePageParticipants")],xn.prototype,"updatePageParticipants",1);So([S.trace("ParticipantController.setupChatEvents")],xn.prototype,"setupChatEvents",1);So([S.trace("ParticipantController.setupEvents")],xn.prototype,"setupEvents",1);So([S.trace("ParticipantController.processMedia")],xn.prototype,"processMedia",1);So([S.trace("ParticipantController.processConsumerClosed")],xn.prototype,"processConsumerClosed",1);So([S.trace("ParticipantController.processConsumerResumed")],xn.prototype,"processConsumerResumed",1);So([S.trace("ParticipantController.processConsumerPaused")],xn.prototype,"processConsumerPaused",1);So([S.trace("ParticipantController.processNewConsumer")],xn.prototype,"processNewConsumer",1);var tQ=Object.defineProperty,iQ=Object.getOwnPropertyDescriptor,sQ=(t,e,i,s)=>{for(var r=s>1?void 0:s?iQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&tQ(e,i,r),r},tI=(t=>(t[t.User=0]="User",t[t.Meeting=1]="Meeting",t))(tI||{}),Mo,dd,ld,og,wE;let f1=(wE=class extends Nt{constructor(t,e,i,s){super(),R(this,Mo),v(this,"selfActiveTab"),v(this,"broadcastTabChanges"),R(this,ld,void 0),R(this,og,void 0),v(this,"viewType"),v(this,"meetingStartedTimestamp"),v(this,"meetingTitle"),P(this,ld,t),this.viewType=e,P(this,og,i),this.meetingTitle=s,this.broadcastTabChanges=t.permissions.canSpotlight}get joined(){var t;return(t=p(this,Mo,dd))==null?void 0:t.roomJoined}get roomName(){var t;return(t=p(this,Mo,dd))==null?void 0:t.roomName}get mediaConnected(){var t,e;return(e=(t=p(this,Mo,dd))==null?void 0:t.mediaConnected)!=null?e:!1}get socketConnected(){return p(this,og).isConnected}setBroadcastTabChanges(t){if(!p(this,ld).permissions.canSpotlight)throw w.error("DyteSpotlight::setSpotlighted::permission_denied"),new I("User does not have permission to toggle spotlight");this.broadcastTabChanges=t,this.emit("broadcastTabChangesUpdate",this.broadcastTabChanges),this.broadcastTabChanges&&this.assertActiveTabToRoom()}setSelfActiveTab(t,e){var i;w.info("DyteSpotlight::setActiveTab",{spotlight:{currentTab:{id:t.id,type:t.type}}}),this.selfActiveTab=t,e===0&&this.emit("selfTabUpdate",t),(i=p(this,ld).permissions)!=null&&i.canSpotlight&&this.broadcastTabChanges&&e===0&&this.assertActiveTabToRoom()}assertActiveTabToRoom(){p(this,Mo,dd)instanceof Ie&&this.selfActiveTab&&p(this,Mo,dd).assertSpotlightToRoom({userId:p(this,ld).userId,currentTab:this.selfActiveTab,peerId:void 0})}},Mo=new WeakSet,dd=function(){return oi()},ld=new WeakMap,og=new WeakMap,wE);f1=sQ([Ii(t=>{throw new I(t.message,"0800")})],f1);function rQ(t){let e="",i=[""];const s=[i];let r=0,n=0,a=!0,o;for(o of t)o==='"'?(a&&o===e&&(i[r]+=o),a=!a):o===","&&a?o=i[++r]="":o===`
`&&a?(e==="\r"&&(i[r]=i[r].slice(0,-1)),i=s[++n]=[o=""],r=0):i[r]+=o,e=o;return s}var nQ=Object.defineProperty,aQ=Object.getOwnPropertyDescriptor,oQ=(t,e,i,s)=>{for(var r=s>1?void 0:s?aQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&nQ(e,i,r),r},Zo,Sd,$u;class iI{constructor(e,i,s,r){R(this,Sd),v(this,"meta"),R(this,Zo,void 0),v(this,"aiSocketHandler"),this.meta=new f1(e,we.isV2AuthToken?e.config.viewType:e.permissions.viewType,i,r),P(this,Zo,e),this.aiSocketHandler=s,e.config.viewType!==it.Chat&&this.setupEvents()}get roomName(){return this.meta.roomName}conditionallySetActiveTab(e){var i;e!=null&&e.currentTab&&((i=this.meta.selfActiveTab)==null?void 0:i.id)!==e.currentTab.id&&(this.meta.setSelfActiveTab(e.currentTab,tI.Meeting),this.meta.emit("activeTabUpdate",e.currentTab))}setupEvents(){T.on(E.ROOM_JOINED,e=>{e.startedAt&&(this.meta.meetingStartedTimestamp=new Date(e.startedAt),this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp}))}),T.on(E.ROOM_STATE,({createdAt:e})=>{const i=this.meta.meetingStartedTimestamp;if(e&&!i){const s=new Date(e*1e3);this.meta.meetingStartedTimestamp=s,this.meta.emit("meetingStartTimeUpdate",{meetingStartedTimestamp:this.meta.meetingStartedTimestamp})}}),T.on(E.ROOM_NODE_CONNECTED,()=>{this.meta.emit("connected")}),T.on(E.ROOM_NODE_DISCONNECTED,()=>{this.meta.emit("disconnected")}),T.on(E.ICE_CONNECTED,({transport:e})=>{this.meta.emit("iceConnected",{transport:e})}),T.on(E.ICE_DISCONNECTED,({transport:e})=>{this.meta.emit("iceDisconnected",{transport:e})}),T.on(E.ICE_RECONNECTING,({transport:e})=>{this.meta.emit("iceReconnecting",{transport:e})}),T.on(E.ICE_FAILED,({transport:e})=>{this.meta.emit("iceFailed",{transport:e})}),T.on(E.PRODUCER_SCORE_UPDATE,({score:e})=>{e<5&&this.meta.emit("poorConnection",{score:e})}),T.on(E.SOCKET_SERVICE_CONNECTED,()=>{this.meta.emit("socketConnected")}),T.on(E.SOCKET_SERVICE_DISCONNECTED,()=>{this.meta.emit("socketDisconnected")}),T.on(E.SOCKET_SERVICE_RECONNECTING,()=>{this.meta.emit("socketReconnecting")}),T.on(E.SOCKET_SERVICE_RECONNECTION_ATTEMPT,({attempt:e})=>{this.meta.emit("socketReconnectAttempt",{attempt:e})}),T.on(E.SOCKET_SERVICE_RECONNECT_FAILURE,({attempt:e})=>{this.meta.emit("socketReconnectFailure",{attempt:e})}),T.on(E.SOCKET_SERVICE_RECONNECTED,()=>{this.meta.emit("socketReconnected")}),T.on(E.SOCKET_SERVICE_FAILED,()=>{this.meta.emit("socketFailure")}),T.on(E.ROOM_NODE_CONNECTION_ERROR,e=>{const{message:i}=e;i.match(/room '([a-z0-9-]+)' not found/i)&&this.meta.emit("connectionError",{reason:"ROOM_NOT_FOUND"})}),p(this,Zo).permissions.canSpotlight&&(w.info("DyteSpotlightController::Asserting Spotlight"),p(this,Sd,$u)instanceof Ie&&this.meta.selfActiveTab&&p(this,Sd,$u).assertSpotlightToRoom({userId:p(this,Zo).userId,currentTab:this.meta.selfActiveTab,peerId:void 0})),T.on(E.PEER_JOINED,async e=>{p(this,Zo).permissions.canSpotlight&&p(this,Sd,$u)instanceof Ie&&this.meta.selfActiveTab&&p(this,Sd,$u).assertSpotlightToPeer({userId:p(this,Zo).userId,currentTab:this.meta.selfActiveTab,peerId:e.id})}),T.on(E.ROOM_MESSAGE,e=>{var i,s;e.roomMessageType==="spotlight"&&(w.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:e.userId},currentTab:{id:(i=e.currentTab)==null?void 0:i.id,type:(s=e.currentTab)==null?void 0:s.type}}}),this.conditionallySetActiveTab(e))}),T.on(E.MESSAGE,e=>{var i,s;e.roomMessageType==="spotlight"&&(w.info("Spotlight Assertion Received",{spotlight:{spotlighter:{id:e.userId},currentTab:{id:(i=e.currentTab)==null?void 0:i.id,type:(s=e.currentTab)==null?void 0:s.type}}}),this.conditionallySetActiveTab(e))}),this.aiSocketHandler.on(ne.transcript,e=>{const{meetingId:i,transcript:s}=e,[[r,n,a,o]]=rQ(s),c={id:th(),name:a,transcript:o,isPartialTranscript:!1,date:new Date(parseInt(r,10)*1e3)};this.meta.emit("transcript",c),w.debug(`${i} Received transcript for peer ${n} - ${a}: ${o}`)})}}Zo=new WeakMap,Sd=new WeakSet,$u=function(){return oi()};oQ([S.trace("MetaController.setupEvents")],iI.prototype,"setupEvents",1);var cQ=Object.defineProperty,dQ=Object.getOwnPropertyDescriptor,$_=(t,e,i,s)=>{for(var r=s>1?void 0:s?dQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&cQ(e,i,r),r};const si={getPeer:14,getPeers:15,chatMessage:16,getRoomName:17,getDisplayTitle:18,getPluginInitiator:19,customPluginEventToParent:20,peerJoined:22,peerLeft:23,sendData:24};var Ki,Oo,ds,du,lu,Lo,uu,Qi,ls,_E;let zp=(_E=class extends Nt{constructor({baseURL:t,createdAt:e,description:i,id:s,name:r,organizationId:n,picture:a,private:o,published:c,staggered:u,tags:l,type:h,updatedAt:g},m,f,_,k,y){super(),R(this,Qi),R(this,Ki,void 0),R(this,Oo,void 0),v(this,"baseURL"),v(this,"createdAt"),v(this,"description"),v(this,"id"),v(this,"name"),R(this,ds,void 0),R(this,du,void 0),R(this,lu,void 0),v(this,"organizationId"),v(this,"picture"),v(this,"private"),v(this,"published"),v(this,"staggered"),v(this,"tags"),v(this,"type"),v(this,"updatedAt"),R(this,Lo,void 0),v(this,"config"),R(this,uu,void 0),v(this,"active"),v(this,"iframes"),v(this,"enabledBy"),this.baseURL=t,this.createdAt=new Date(e),this.description=i,this.id=s,this.name=r,P(this,ds,_),this.organizationId=n,this.picture=a,this.private=o,this.published=c,this.staggered=u,this.tags=l,this.type=h,this.updatedAt=new Date(g),this.active=!1,this.iframes=new Map,P(this,Ki,m),P(this,Oo,f),P(this,du,k),P(this,lu,y),this.enabledBy=""}get roomJoined(){var t;return((t=p(this,Qi,ls))==null?void 0:t.roomJoined)===!0}sendIframeEvent(t){this.iframes.size&&this.iframes.forEach(e=>{const{iframe:i}=e;i&&(navigator.isReactNative?i.postMessage(JSON.stringify(t)):i.contentWindow.postMessage(t,"*"))})}async handleIframeMessage(t){var e,i,s,r;let n;if(p(this,Oo)==="socket-service"){const c=t,{payload:u,uuid:l,type:h}=c;switch(h){case pe.customPluginEventToRoom:{p(this,Ki).customPluginEventToRoom(this.id,u,l);break}case pe.customPluginEventToPeers:{p(this,Ki).customPluginEventToPeers(this.id,u.peerIds,u,l);break}case pe.enablePluginForRoom:{p(this,Ki).enablePluginForRoom(this.id,l);break}case pe.enablePluginForPeers:{p(this,Ki).enablePluginForPeers(this.id,u.peerIds,l);break}case pe.disablePluginForRoom:{p(this,Ki).disablePluginForRoom(this.id,l);break}case pe.disablePluginForPeers:{p(this,Ki).disablePluginForPeers(this.id,u.peerIds,l);break}case pe.storeInsertKeys:{p(this,Ki).storeInsertKeys(this.id,u.store,u.insertKeys,l);break}case pe.storeGetKeys:{p(this,Ki).storeGetKeys(this.id,u.store,u.getKeys,l);break}case pe.storeDeleteKeys:{p(this,Ki).storeDeleteKeys(this.id,u.store,u.deleteKeys,l);break}case pe.storeDelete:{p(this,Ki).storeDelete(this.id,u.store,l);break}case si.chatMessage:{const{messagePayload:g,peerIds:m}=u;if(!p(this,lu)){this.sendIframeEvent({type:si.chatMessage,uuid:c.uuid,payload:{error:"Chat is disabled for this room."}});return}try{await p(this,lu).sendMessage(g,m),this.sendIframeEvent({type:si.chatMessage,uuid:c.uuid,payload:{success:!0}})}catch(f){this.sendIframeEvent({type:si.chatMessage,uuid:c.uuid,payload:{error:f}})}break}case si.getPeer:{let g;const{peerId:m}=u,f={...p(this,ds),isRecorder:(e=p(this,ds).permissions)==null?void 0:e.isRecorder,isHidden:p(this,ds).permissions.hiddenParticipant};m?(g=p(this,du).joined.get(u.peerId),p(this,ds).id===m&&(g=f)):g=f,this.sendIframeEvent({type:si.getPeer,payload:{peer:g&&qb(g)},uuid:c.uuid});break}case si.getPeers:{const g=p(this,du).joined.toArray().map(m=>qb(m));this.sendIframeEvent({type:si.getPeers,payload:{peers:g},uuid:c.uuid});break}case si.getPluginInitiator:{this.sendIframeEvent({type:si.getPluginInitiator,payload:{enabledBy:this.enabledBy},uuid:c.uuid});break}case si.getDisplayTitle:{this.sendIframeEvent({type:si.getDisplayTitle,payload:{displayTitle:p(this,Qi,ls).meetingTitle},uuid:c.uuid});break}case si.getRoomName:{this.sendIframeEvent({type:si.getRoomName,payload:{roomName:p(this,Qi,ls).roomName},uuid:c.uuid});break}case si.customPluginEventToParent:{this.emit(c.payload.eventName,c.payload.data);break}}return}const a=(c,u)=>{if(p(this,ds).userId===c)return p(this,ds).id;let l;return u.forEach(h=>{h.userId===c&&(l=h.id)}),l},o=t;switch(o.type){case"pluginEvent":case"storePluginData":case"getPluginData":case"enablePluginForAll":case"enablePluginForUser":case"disablePluginForUser":case"chatMessage":{n=await p(this,Qi,ls).sendMessage(o),this.sendIframeEvent(n);break}case"getJoinedPeers":{n=await p(this,Qi,ls).getRoomState(),this.sendIframeEvent({type:"websocket/get-joined-peers",payload:{...o.payload,peers:n.payload.roomState.peers}});break}case"getPeerInfo":{n=await p(this,Qi,ls).sendMessage({type:o.type,payload:{...o.payload,peerId:(s=(i=o.payload)==null?void 0:i.peerId)!=null?s:p(this,ds).id}}),this.sendIframeEvent(n);break}case"getRoomState":{n=await p(this,Qi,ls).getRoomState();const{plugins:c,peers:u}=n.payload.roomState,{enabledBy:l}=c.find(g=>g.id===this.id),h=a(l,u);this.sendIframeEvent({type:"websocket/get-room-state",payload:{...o.payload,roomName:n.payload.roomState.roomName,pluginInitiatorPeerId:h,pluginInitiatorUserId:l,peers:n.payload.roomState.peers,displayTitle:n.payload.roomState.displayTitle,roomUUID:n.payload.roomState.roomUUID,currentPeer:p(this,ds).id,isRecorder:(r=p(this,ds).permissions)==null?void 0:r.isRecorder}});break}case"getPluginInitiatorId":{n=await p(this,Qi,ls).getRoomState();const{plugins:c,peers:u}=n.payload.roomState,{enabledBy:l}=c.find(g=>g.id===this.id),h=a(l,u);this.sendIframeEvent({type:"websocket/get-plugin-initiator-peer-id",payload:{...o.payload,pluginInitiatorPeerId:h}});break}case"getPluginInitiatorUserId":{n=await p(this,Qi,ls).getRoomState();const{plugins:c}=n.payload.roomState,{enabledBy:u}=c.find(l=>l.id===this.id);this.sendIframeEvent({type:"websocket/get-plugin-initiator-user-id",payload:{...o.payload,pluginInitiatorUserId:u}});break}case"pluginEventToParent":{this.emit(o.payload.eventName,o.payload.data);break}case"toggleViewMode":{this.emit("toggleViewMode",o.payload.data);break}}}sendData(t){if(p(this,Oo)==="socket-service"){this.sendIframeEvent({type:si.sendData,uuid:"",payload:t});return}this.sendIframeEvent({type:E.PLUGIN_INTERNAL_DATA,payload:{pluginId:this.id,data:t}})}removePluginView(t="default"){var e;const{iframe:i,listener:s}=(e=this.iframes.get(t))!=null?e:{};(i||s)&&(navigator.isReactNative?i.props.onMessage=void 0:window.removeEventListener("message",s),this.iframes.delete(t))}addPluginView(t,e="default"){var i;if(!p(this,uu))throw w.error("DytePlugin::addPluginView::no_auth_token_set_for_plugin"),new I("No auth token set for plugin.");if(!t)throw w.error("DytePlugin::addPluginView::iframe_was_not_provided"),new I("Iframe was not provided.");this.removePluginView(e);const s=t,r=new URL(this.baseURL),n={auth:p(this,uu),parent:navigator.isReactNative?this.baseURL:window.location.origin,backend:Ve.apiBase,pluginId:this.id,roomName:(i=p(this,Qi,ls).roomName)!=null?i:"",displayTitle:p(this,Qi,ls).meetingTitle};if(Object.keys(n).forEach(a=>{r.searchParams.set(a,n[a])}),s.src=r.href,s.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",s.title=e,navigator.isReactNative)s.props.onMessage=a=>{this.handleIframeMessage(JSON.parse(a.nativeEvent.data))},this.iframes.set(e,{iframe:s});else{const a=async o=>{o.source===t.contentWindow&&await this.handleIframeMessage(o.data)};window.addEventListener("message",a),this.iframes.set(e,{iframe:s,listener:a})}}setActive(t){var e,i;if(this.active=t,t){this.emit("stateUpdate",{active:this.active,pluginId:this.id,bind:this.addPluginView.bind(this),views:(e=this.config)==null?void 0:e.views});return}this.active=!1,this.emit("stateUpdate",{active:this.active,pluginId:this.id,views:(i=this.config)==null?void 0:i.views})}async activateForSelf(){const t=_i(),e=await t.authorizePlugin(this.id);P(this,uu,e),P(this,Lo,new Date);try{const i=await t.getPluginConfig(this.baseURL);this.config=i}catch(i){w.error("DytePlugin::activateForSelf",{error:i})}this.setActive(!0),this.emit("enabled")}deactivateForSelf(){Array.from(this.iframes.keys()).forEach(t=>{this.removePluginView(t)}),P(this,Lo,void 0),this.iframes.clear(),this.setActive(!1),this.emit("closed")}async enable(){return this.activateForSelf()}disable(){return this.deactivateForSelf()}async activate(){var t,e;this.active||(e=(t=p(this,ds).permissions)==null?void 0:t.plugins)!=null&&e.canStart&&(p(this,Oo)==="socket-service"?p(this,Ki).addPlugin(this.id,this.staggered):await p(this,Qi,ls).addRoomPlugin(this),P(this,Lo,new Date),w.info("plugin::activated",{plugin:{id:this.id,enabledBy:this.enabledBy,name:this.name}}))}async deactivate(){var t,e;this.activate&&(e=(t=p(this,ds).permissions)==null?void 0:t.plugins)!=null&&e.canClose&&(p(this,Oo)==="socket-service"?p(this,Ki).removePlugin(this.id):await p(this,Qi,ls).removeRoomPlugin(this),w.info("plugin::deactivated",{plugin:{id:this.id,name:this.name,duration:new Date().getTime()-p(this,Lo).getTime()}}),P(this,Lo,void 0))}},Ki=new WeakMap,Oo=new WeakMap,ds=new WeakMap,du=new WeakMap,lu=new WeakMap,Lo=new WeakMap,uu=new WeakMap,Qi=new WeakSet,ls=function(){return oi()},_E);$_([S.trace("PluginController.activatePlugin")],zp.prototype,"activate",1);$_([S.trace("PluginController.deactivatePlugin")],zp.prototype,"deactivate",1);zp=$_([Ii(t=>{throw new I(t.message,"0600")})],zp);class kE extends U_{constructor(){super({onAddEvent:"pluginAdded",onDeleteEvent:"pluginDeleted"})}add(e,i=!0){return super.add(e,i)}delete(e,i=!0,s=!1){return super.delete(e,i,s)}}var lQ=Object.defineProperty,uQ=Object.getOwnPropertyDescriptor,pQ=(t,e,i,s)=>{for(var r=s>1?void 0:s?uQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&lQ(e,i,r),r};let v1=class{constructor(){v(this,"all"),v(this,"active"),this.all=new kE,this.active=new kE}};v1=pQ([Ii(t=>{throw new I(t.message,"0600")})],v1);var hQ=Object.defineProperty,gQ=Object.getOwnPropertyDescriptor,j_=(t,e,i,s)=>{for(var r=s>1?void 0:s?gQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&hQ(e,i,r),r},No,SE;const y1=(SE=class{constructor(t){R(this,No,void 0),P(this,No,t)}async createChannel(t,e,i,s="public",r=!1){const n={displayName:t,targetUserIds:e,displayPictureUrl:i,visibility:s,isDirectMessage:r};r&&(n.visibility="private");const a=await p(this,No).sendMessagePromise(cc.createChatChannel,AW.toBinary(n)),o=An.fromBinary(a.payload).chatChannels;return y1.formatChannel(o[0])}async updateChannel(t,e){const i=await p(this,No).sendMessagePromise(cc.updateChatChannel,MW.toBinary({chatChannelId:t,targetUserIds:e.memberIds,displayName:e.displayName,displayPictureUrl:e.displayPictureUrl,visibility:e.visibility})),s=An.fromBinary(i.payload).chatChannels;return y1.formatChannel(s[0])}static formatChannel(t){var e;const{latestMessageAndUnreadCount:i}=t,s={...t,id:t.chatChannelId,memberIds:t.targetUserIds,unreadCount:(e=i==null?void 0:i.unreadCount)!=null?e:0};return i!=null&&i.message&&(s.latestMessage=Qn.formatSocketServiceMessage(i.message)),delete s.chatChannelId,delete s.targetUserIds,delete s.latestMessageAndUnreadCount,s}async getChannelMembers(t){try{const e=await p(this,No).sendMessagePromise(cc.getChannelMembers,NW.toBinary({chatChannelId:t}));return WW.fromBinary(e.payload).channelMembers.map(({id:i,...s})=>({...s,userId:i}))}catch{return[]}}on(t,e){let i,s;switch(t){case cc.createChatChannel:{i=An.fromBinary.bind(An),s=An.create();break}case cc.updateChatChannel:{i=An.fromBinary.bind(An),s=An.create();break}}if(!i){w.warn(`ChatChannelSocketHandler::Event ${t} is not recognized`);return}p(this,No).on(t,({payload:r})=>{let n=s;try{n=i(r)}catch(a){w.error("ChatChannelSocketHandler::on::binary_decode_error",{error:a})}return e(n)})}},No=new WeakMap,SE);let Oc=y1;j_([S.trace("ChatChannelHandler.createChannel")],Oc.prototype,"createChannel",1);j_([S.trace("ChatChannelHandler.updateChannel")],Oc.prototype,"updateChannel",1);j_([S.trace("ChatChannelHandler.getChannelMembers")],Oc.prototype,"getChannelMembers",1);var mQ=Object.defineProperty,fQ=Object.getOwnPropertyDescriptor,Gr=(t,e,i,s)=>{for(var r=s>1?void 0:s?fQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&mQ(e,i,r),r},Ds=(t=>(t[t.TEXT=0]="TEXT",t[t.IMAGE=1]="IMAGE",t[t.FILE=2]="FILE",t))(Ds||{}),ps;class gr{constructor(e){R(this,ps,void 0),P(this,ps,e)}getChatMessages(){return p(this,ps).sendMessagePromise(ri.getMessages)}async getChatMessagesPaginated(e,i,s,r=0,n=""){const a={timeStamp:e,size:i,from:r,reversed:s,channelId:n},o=await p(this,ps).sendMessagePromise(ri.getPaginatedMessages,nW.toBinary(a));return o.payload?oW.fromBinary(o.payload):{messages:[],next:!1}}sendMessageToRoom(e,i){const s={payloadType:i,payload:e};p(this,ps).sendMessage(ri.sendMessageToRoom,lW.toBinary(s))}sendMessageToPeers(e,i,s){const r={payloadType:i,peerIds:s,payload:e};p(this,ps).sendMessage(ri.sendMessageToPeers,hW.toBinary(r))}sendMessageToChannel(e,i,s){const r={payloadType:i,channelId:s,payload:e};p(this,ps).sendMessage(ri.sendMessageToChannel,fW.toBinary(r))}sendMessage(e,i,s,r){if(r&&this.sendMessageToChannel(e,i,r),s&&s.length>0){this.sendMessageToPeers(e,i,s);return}this.sendMessageToRoom(e,i)}async editMessage(e,i,s,r){const n={chatId:e,payloadType:s,payload:i};r&&(n.channelId=r);const a=await p(this,ps).sendMessagePromise(ri.editMessage,bW.toBinary(n));return Xh.fromBinary(a.payload).message}async deleteMessage(e,i){const s={chatId:e};i&&(s.channelId=i);const r=await p(this,ps).sendMessagePromise(ri.deleteMessage,kW.toBinary(s)),n=eg.fromBinary(r.payload);return{id:n.chatId,...n.channelId?{channelId:n.channelId}:{}}}async searchMessages(e,i){var s,r,n;const a={searchTerm:e,timeStamp:(s=i.timestamp)!=null?s:Date.now(),size:(r=i.size)!=null?r:75,from:0,reversed:(n=i.reversed)!=null?n:!0};i.channelId&&(a.channelId=i.channelId);try{const o=await p(this,ps).sendMessagePromise(ri.searchChannelMessages,EW.toBinary(a));return C3.fromBinary(o.payload).messages}catch{return[]}}async getAllChannels(){try{const e=await p(this,ps).sendMessagePromise(ri.getAllChatChannels);return An.fromBinary(e.payload).chatChannels.map(Oc.formatChannel)}catch{return[]}}async markLastReadMessage(e,i){const s=await p(this,ps).sendMessagePromise(ri.markChannelIndexAsRead,CW.toBinary({channelId:e,userId:i.userId,channelIndex:i.channelIndex}));return RW.fromBinary(s.payload).channelIndex}on(e,i){let s,r;switch(e){case ri.sendMessageToRoom:{s=Xy.fromBinary.bind(Xy),r=Xy.create();break}case ri.sendMessageToPeers:{s=e0.fromBinary.bind(e0),r=e0.create();break}case ri.editMessage:{s=Xh.fromBinary.bind(Xh),r=Xh.create();break}case ri.deleteMessage:{s=eg.fromBinary.bind(eg),r=eg.create();break}}if(!s){w.warn(`ChatSocketHandler::Event ${e} is not recognized`);return}p(this,ps).on(e,({payload:n})=>{let a=r;try{a=s(n)}catch(o){w.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}ps=new WeakMap;Gr([S.trace("SocketService.getChatMessages")],gr.prototype,"getChatMessages",1);Gr([S.trace("SocketService.getChatMessagesPaginated")],gr.prototype,"getChatMessagesPaginated",1);Gr([S.trace("SocketService.sendMessageToRoom")],gr.prototype,"sendMessageToRoom",1);Gr([S.trace("SocketService.sendMessageToPeers")],gr.prototype,"sendMessageToPeers",1);Gr([S.trace("SocketService.sendMessageToChannel")],gr.prototype,"sendMessageToChannel",1);Gr([S.trace("SocketService.sendMessage")],gr.prototype,"sendMessage",1);Gr([S.trace("SocketService.editMessage")],gr.prototype,"editMessage",1);Gr([S.trace("SocketService.deleteMessage")],gr.prototype,"deleteMessage",1);Gr([S.trace("SocketService.searchMessages")],gr.prototype,"searchMessages",1);Gr([S.trace("SocketService.getAllChannels")],gr.prototype,"getAllChannels",1);Gr([S.trace("SocketService.markLastReadMessage")],gr.prototype,"markLastReadMessage",1);function vQ(t,e){return`<blockquote>${e.replace(/<blockquote>[.\s\S]*<\/blockquote>\n\n/m,"")}</blockquote>

${t}`}var yQ=Object.defineProperty,bQ=Object.getOwnPropertyDescriptor,Ji=(t,e,i,s)=>{for(var r=s>1?void 0:s?bQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&yQ(e,i,r),r};const nl=["text","image","file","poll"];var _e,ud,zi,pd,Fi,Sa,Uo,xE;let Ri=(xE=class extends Nt{constructor(t,e,i,s,r){super(),R(this,Sa),v(this,"messages"),v(this,"channels",[]),R(this,_e,void 0),R(this,ud,void 0),R(this,zi,void 0),R(this,pd,void 0),R(this,Fi,void 0),P(this,zi,t),P(this,pd,e),P(this,Fi,i),P(this,_e,s),P(this,ud,r),this.messages=[]}get roomJoined(){var t;return((t=p(this,Sa,Uo))==null?void 0:t.roomJoined)===!0}async sendMessageInternal(t,e,i,s={}){switch(t.type){case"text":{const r=s.replyTo&&s.replyTo.type==="text"?vQ(t.message,s.replyTo.message):t.message;await this.sendTextMessageInternal(r,e,i);break}case"image":await this.sendImageMessageInternal(t.image,e,i);break;case"file":await this.sendFileMessageInternal(t.file,e,i);break;default:w.error("sendMessage::message_type_not_supported",{dyteChat:{messageType:t.type}});break}}async sendTextMessageInternal(t,e,i){var s,r,n,a,o,c;if(e&&e.length>0){if(!((s=p(this,_e).permissions)!=null&&s.chatPrivate.canSend)||!((r=p(this,_e).permissions)!=null&&r.chatPrivate.text))throw w.error("sendTextMessage::private_chat_permission_denied"),new I("Could not send message to private chat.","0501")}else if(!((a=(n=p(this,_e).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=p(this,_e).permissions)==null?void 0:o.chatPublic)!=null&&c.text))throw w.error("sendTextMessage::public_chat_permission_denied"),new I("Could not send message to public chat.","0501");if(!t)throw w.error("sendTextMessage::message_can_not_be_empty"),new I("Message can not be empty.","0502");if(i){if(p(this,Fi)!=="socket-service")throw new Error("Socket service required for channel support");p(this,zi).sendMessageToChannel(t,Ds.TEXT,i);return}if(p(this,Fi)==="socket-service"){let l=[];e&&e.length>0&&(e.push(p(this,_e).id),l=p(this,ud).joined.toArray().filter(h=>e.includes(h.id)).map(h=>h.userId),l.push(p(this,_e).userId)),p(this,zi).sendMessage(t,Ds.TEXT,e);return}if(e!==void 0&&e.length>0){w.error("sendTextMessage::private_chat_unsupported");return}const u={userId:p(this,_e).userId,displayName:p(this,_e).name,message:t,type:nl.indexOf("text"),time:+new Date};if(!this.roomJoined)throw w.error("DyteChat.sendTextMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new I("Can`t sendTextMessage without joining room");await p(this,Sa,Uo).sendChatMessage(u)}async sendImageMessageInternal(t,e,i){var s,r,n,a,o,c;if(e&&e.length>0){if(!((s=p(this,_e).permissions)!=null&&s.chatPrivate.canSend)||!((r=p(this,_e).permissions)!=null&&r.chatPrivate.files)){w.error("sendImageMessage::private_chat_permission_denied");return}}else if(!((a=(n=p(this,_e).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=p(this,_e).permissions)==null?void 0:o.chatPublic)!=null&&c.files)){w.error("sendImageMessage::permission_denied");return}if(!t){w.error("sendImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(t.type)){w.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:t.type}});return}try{const u=_i(),{getLocation:l,putLocation:h}=await u.getPresignedUrls(t.name,p(this,_e).config.viewType);if(await u.uploadFile(t,h),i){if(p(this,Fi)!=="socket-service")throw new Error("Socket service required for channel support");p(this,zi).sendMessageToChannel(l,Ds.IMAGE,i);return}if(p(this,Fi)==="socket-service"){let m=[];e&&e.length>0&&(e.push(p(this,_e).id),m=p(this,ud).joined.toArray().filter(f=>e.includes(f.id)).map(f=>f.userId),m.push(p(this,_e).userId)),p(this,zi).sendMessage(l,Ds.IMAGE,e);return}if(e!==void 0&&e.length>0){w.error("sendImageMessage::private_chat_unsupported");return}const g={userId:p(this,_e).userId,displayName:p(this,_e).name,type:nl.indexOf("image"),link:l,time:+new Date};if(!this.roomJoined)throw w.error("DyteChat.sendImageMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new I("Can`t sendImageMessage without joining room");await p(this,Sa,Uo).sendChatMessage(g)}catch{throw new I("Error sending image message.")}}async sendFileMessageInternal(t,e,i){var s,r,n,a,o,c;if(e&&e.length>0){if(!((s=p(this,_e).permissions)!=null&&s.chatPrivate.canSend)||!((r=p(this,_e).permissions)!=null&&r.chatPrivate.files)){w.error("sendFileMessage::private_chat_permission_denied");return}}else if(!((a=(n=p(this,_e).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=p(this,_e).permissions)==null?void 0:o.chatPublic)!=null&&c.files)){w.error("sendFileMessage::permission_denied");return}if(!t){w.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const u=_i(),{getLocation:l,putLocation:h}=await u.getPresignedUrls(t.name,p(this,_e).config.viewType);if(await u.uploadFile(t,h),i){if(p(this,Fi)!=="socket-service")throw new Error("Socket service required for channel support");p(this,zi).sendMessageToChannel(JSON.stringify({link:l,name:t.name,size:"size"in t?t.size:0}),Ds.FILE,i);return}if(p(this,Fi)==="socket-service"){let m=[];e&&e.length>0&&(e.push(p(this,_e).id),m=p(this,ud).joined.toArray().filter(_=>e.includes(_.id)).map(_=>_.userId),m.push(p(this,_e).userId));const f=JSON.stringify({link:l,name:t.name,size:"size"in t?t.size:0});p(this,zi).sendMessage(f,Ds.FILE,e);return}if(e!==void 0&&e.length>0){w.error("sendFileMessage::private_chat_unsupported");return}const g={userId:p(this,_e).userId,displayName:p(this,_e).name,type:nl.indexOf("file"),link:l,name:t.name,size:"size"in t?t.size:0,time:+new Date};if(!this.roomJoined)throw w.error("DyteChat.sendFileMessage.RoomNodeClientSocketUsed_WithoutRoomJoin"),new I("Can`t sendFileMessage without joining room");await p(this,Sa,Uo).sendChatMessage(g)}catch{throw new I("Error sending file message.")}}async sendTextMessage(t,e){return this.sendTextMessageInternal(t,e)}async sendImageMessage(t,e){return this.sendImageMessageInternal(t,e)}async sendFileMessage(t,e){return this.sendFileMessageInternal(t,e)}async sendMessage(t,e){return this.sendMessageInternal(t,e)}async editTextMessage(t,e,i){var s,r,n,a,o,c;if(p(this,Fi)!=="socket-service"){w.warn("editTextMessage::Coming soon!");return}if(((r=(s=p(this,_e).permissions)==null?void 0:s.chatMessage)==null?void 0:r.canEdit)==="NONE")throw new I("Not permitted to edit messages","0501");if(!((a=(n=p(this,_e).permissions)==null?void 0:n.chatPublic)!=null&&a.canSend)||!((c=(o=p(this,_e).permissions)==null?void 0:o.chatPublic)!=null&&c.text)){w.error("editTextMessage::permission_denied");return}if(!e){w.error("editTextMessage::message_can_not_be_empty");return}p(this,zi).editMessage(t,e,Ds.TEXT,i)}async editImageMessage(t,e,i){var s,r,n,a;if(p(this,Fi)!=="socket-service"){w.warn("editImageMessage::Coming soon!");return}if(!((r=(s=p(this,_e).permissions)==null?void 0:s.chatPublic)!=null&&r.canSend)||!((a=(n=p(this,_e).permissions)==null?void 0:n.chatPublic)!=null&&a.files)){w.error("editImageMessage::permission_denied");return}if(!e){w.error("editImageMessage::required_argument_image_can_not_be_empty");return}if(!["image/gif","image/jpeg","image/png"].includes(e.type)){w.error("sendImageMessage::image_type_not_supported",{dyteChat:{imageType:e.type}});return}try{const o=_i(),{getLocation:c,putLocation:u}=await o.getPresignedUrls(e.name,p(this,_e).config.viewType);await o.uploadFile(e,u),p(this,zi).editMessage(t,c,Ds.IMAGE,i)}catch{throw new I("Error editing image message.")}}async editFileMessage(t,e,i){var s,r,n,a;if(p(this,Fi)!=="socket-service"){w.warn("editFileMessage::Coming soon!");return}if(!((r=(s=p(this,_e).permissions)==null?void 0:s.chatPublic)!=null&&r.canSend)||!((a=(n=p(this,_e).permissions)==null?void 0:n.chatPublic)!=null&&a.files)){w.error("sendFileMessage::permission_denied");return}if(!e){w.error("sendFileMessage::required_argument_file_can_not_be_empty");return}try{const o=_i(),{getLocation:c,putLocation:u}=await o.getPresignedUrls(e.name,p(this,_e).config.viewType);await o.uploadFile(e,u),p(this,zi).editMessage(t,JSON.stringify({link:c,name:e.name,size:"size"in e?e.size:0}),Ds.FILE,i)}catch{throw new I("Error editing file message.")}}async editMessage(t,e,i){if(p(this,Fi)!=="socket-service"){w.warn("editMessage::Coming soon!");return}switch(e.type){case"text":{this.editTextMessage(t,e.message,i);break}case"image":{this.editImageMessage(t,e.image,i);break}case"file":{this.editFileMessage(t,e.file,i);break}default:{w.error("editMessage::message_type_not_supported",{dyteChat:{messageType:e.type}});break}}}async deleteMessage(t,e){var i,s;if(p(this,Fi)!=="socket-service"){w.warn("editMessage::Coming soon!");return}if(((s=(i=p(this,_e).permissions)==null?void 0:i.chatMessage)==null?void 0:s.canDelete)==="NONE")throw new I("Not permitted to delete messages","0501");p(this,zi).deleteMessage(t,e)}getMessagesByUser(t){return this.messages.filter(e=>e.userId===t)}getMessagesByType(t){return this.messages.filter(e=>e.type===t)}async pin(t){if(p(this,Fi)!=="socket-service"){if(!this.roomJoined)throw new I("Can`t pin message without joining room");await p(this,Sa,Uo).pinChatMessage({id:t})}}async unpin(t){if(p(this,Fi)!=="socket-service"){if(!this.roomJoined)throw new I("Can`t unpin message without joining room");await p(this,Sa,Uo).unpinChatMessage({id:t})}}async getMessages(t,e,i,s=0,r=void 0){const n=await p(this,zi).getChatMessagesPaginated(t,e,i,s,r);return{messages:n.messages.map(a=>Qn.formatSocketServiceMessage(a)),next:n.next}}async createChannel(t,e,i={}){var s;const r=(s=p(this,_e).permissions)==null?void 0:s.chatChannel;if(r){if(r.canCreate==="NONE")throw new I("Not permitted to create channels","0501");if(i.visibility==="public"&&!(r.canCreate==="PUBLIC"||r.canCreate==="ALL"))throw new I("Not permitted to create public channels","0501");if(i.visibility==="private"&&!(r.canCreate==="PRIVATE"||r.canCreate==="ALL"))throw new I("Not permitted to create private channels","0501")}if(!t||t.trim().length===0)throw new I("channel name cannot be empty.","0510");const n=[...new Set([...e,p(this,_e).userId])];return await p(this,pd).createChannel(t.trim(),n,i.displayPictureUrl,i.visibility,i.isDirectMessage)}updateChannel(t,e){var i,s,r,n,a;const o=this.channels.find(l=>l.id===t),c=(i=p(this,_e).permissions)==null?void 0:i.chatChannel;if(c){if(c.canUpdate==="NONE")throw new I("Not permitted to update channels","0501");if(o.visibility==="public"&&!(c.canUpdate==="PUBLIC"||c.canUpdate==="ALL"))throw new I("Not permitted to update public channels","0501");if(o.visibility==="private"&&!(c.canUpdate==="PRIVATE"||c.canUpdate==="ALL"))throw new I("Not permitted to update private channels","0501")}const u={memberIds:(s=e.memberIds)!=null?s:o.memberIds,displayName:(r=e.displayName)!=null?r:o.displayName,displayPictureUrl:(n=e.displayPictureUrl)!=null?n:o.displayPictureUrl,visibility:(a=e.visibility)!=null?a:o.visibility};return p(this,pd).updateChannel(t,u)}async sendMessageToChannel(t,e,i={}){return this.sendMessageInternal(t,null,e,i)}async getChannelMembers(t){return p(this,pd).getChannelMembers(t)}async searchMessages(t,e={}){if(!ee.hasFeature(ie.FEAT_CHAT_SDK_SEARCH))throw new I("searchMessages is temporarily disabled!");return(await p(this,zi).searchMessages(t,e)).map(Qn.formatSocketServiceMessage)}async markLastReadMessage(t,e){await p(this,zi).markLastReadMessage(t,e);const i=this.channels.find(s=>s.id===t);if(i){const s={...i,unreadCount:0};this.channels=this.channels.map(r=>r.id===t?s:r),this.emit("channelMessageUpdate",s)}}get pinned(){return this.messages.filter(t=>t.pinned)}},_e=new WeakMap,ud=new WeakMap,zi=new WeakMap,pd=new WeakMap,Fi=new WeakMap,Sa=new WeakSet,Uo=function(){return oi()},xE);Ji([S.trace("DyteChat.sendTextMessage")],Ri.prototype,"sendTextMessage",1);Ji([S.trace("DyteChat.sendImageMessage")],Ri.prototype,"sendImageMessage",1);Ji([S.trace("DyteChat.sendFileMessage")],Ri.prototype,"sendFileMessage",1);Ji([S.trace("DyteChat.sendMessage")],Ri.prototype,"sendMessage",1);Ji([S.trace("DyteChat.editTextMessage")],Ri.prototype,"editTextMessage",1);Ji([S.trace("DyteChat.editImageMessage")],Ri.prototype,"editImageMessage",1);Ji([S.trace("DyteChat.editFileMessage")],Ri.prototype,"editFileMessage",1);Ji([S.trace("DyteChat.editMessage")],Ri.prototype,"editMessage",1);Ji([S.trace("DyteChat.deleteMessage")],Ri.prototype,"deleteMessage",1);Ji([S.trace("DyteChat.createChannel")],Ri.prototype,"createChannel",1);Ji([S.trace("DyteChat.updateChannel")],Ri.prototype,"updateChannel",1);Ji([S.trace("DyteChat.sendMessageToChannel")],Ri.prototype,"sendMessageToChannel",1);Ji([S.trace("DyteChat.getChannelMembers")],Ri.prototype,"getChannelMembers",1);Ji([S.trace("DyteChat.searchMessages")],Ri.prototype,"searchMessages",1);Ji([S.trace("DyteChat.markLastReadMessage")],Ri.prototype,"markLastReadMessage",1);Ri=Ji([Ii(t=>{throw new I(t.message,"0500")})],Ri);var wQ=Object.defineProperty,_Q=Object.getOwnPropertyDescriptor,kQ=(t,e,i,s)=>{for(var r=s>1?void 0:s?_Q(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&wQ(e,i,r),r},cg,h0,pu,EE;const wr=(EE=class{constructor(t,e,i,s,r){R(this,cg),v(this,"chat"),v(this,"chatSocketHandler"),v(this,"chatChannelSocketHandler"),v(this,"self"),R(this,pu,void 0),this.chatSocketHandler=t,this.chatChannelSocketHandler=e,P(this,pu,i),this.chat=new Ri(t,e,i,s,r),this.self=s,this.setupEvents()}get roomJoined(){var t;return((t=p(this,cg,h0))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,s,r){const n=T_(i.config.viewType,r)?"socket-service":"room-node";return w.info(`Using socket server :: ${n} for chat`),new wr(t,e,n,i,s)}static formatMessage(t){return{...t,time:new Date(t.time),type:nl[t.type]}}static formatSocketServiceMessage(t){const e=t.createdAt*1e3,i={displayName:t.displayName,id:t.chatId,time:e,timeMs:t.createdAtMs,type:t.payloadType,isEdited:t.isEdited,userId:t.userId,targetUserIds:t.targetUserIds,channelId:t.channelId,channelIndex:t.channelIndex,message:"",link:"",name:"",size:0};switch(i.type){case Ds.TEXT:{i.message=t.payload;break}case Ds.IMAGE:{i.link=t.payload;break}case Ds.FILE:{const{link:s,name:r,size:n}=JSON.parse(t.payload);i.link=s,i.name=r,i.size=n;break}}return wr.formatMessage(i)}async getChatMessages(){if(this.self.config.viewType==="LIVESTREAM"||this.self.config.viewType==="CHAT"||ee.hasFeature(ie.FEAT_PAGINATED_CHAT))return;if(p(this,pu)==="socket-service"){const e=await this.chatSocketHandler.getChatMessages();if(!(e!=null&&e.payload))return;const i=C3.fromBinary(e.payload).messages;this.chat.messages=i.map(s=>wr.formatSocketServiceMessage(s));return}if(!this.roomJoined){w.error("ChatController.getChatMessages.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{messages:t}=(await p(this,cg,h0).getChatMessages()).payload;this.chat.messages=t.filter(e=>nl[e.type]!=="poll").map(wr.formatMessage)}async getAllChannels(){this.self.config.viewType==="CHAT"&&(this.chat.channels=await this.chatSocketHandler.getAllChannels())}setupEvents(){p(this,pu)==="socket-service"?T.onAsync(E.SOCKET_SERVICE_ROOM_JOINED,async()=>{this.getChatMessages(),await this.getAllChannels()}):T.onAsync(E.ROOM_JOINED,async()=>{await this.getChatMessages()}),this.chatSocketHandler.on(ri.sendMessageToRoom,t=>{const e=wr.formatSocketServiceMessage(t.message);if(!e.channelId)this.chat.messages=[...this.chat.messages,e];else{const i=this.chat.channels.find(s=>s.id===e.channelId);i&&(i.latestMessage=e,i.unreadCount+=1,this.chat.emit("channelMessageUpdate",i))}this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),this.chatSocketHandler.on(ri.sendMessageToPeers,t=>{const e=wr.formatSocketServiceMessage(t.message);this.chat.messages=[...this.chat.messages,e],this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),this.chatSocketHandler.on(ri.editMessage,t=>{const e=wr.formatSocketServiceMessage(t.message);if(e.channelId){this.chat.emit("chatUpdate",{action:"edit",message:e,messages:this.chat.messages});return}const i=this.chat.messages.findIndex(s=>s.id===e.id);i!==-1&&(this.chat.messages[i]=e,this.chat.emit("chatUpdate",{action:"edit",message:e,messages:this.chat.messages}))}),this.chatSocketHandler.on(ri.deleteMessage,t=>{if(t.channelId){this.chat.emit("chatUpdate",{action:"delete",message:{id:t.chatId,channelId:t.channelId},messages:this.chat.messages});return}const e=this.chat.messages.findIndex(s=>s.id===t.chatId);if(e===-1)return;const[i]=this.chat.messages.splice(e,1);this.chat.emit("chatUpdate",{action:"delete",message:i,messages:this.chat.messages})}),this.chatChannelSocketHandler.on(cc.createChatChannel,t=>{const[e]=t.chatChannels,i=Oc.formatChannel(e);this.chat.channels.push(i),this.chat.emit("channelCreate",i)}),this.chatChannelSocketHandler.on(cc.updateChatChannel,t=>{const[e]=t.chatChannels,i=Oc.formatChannel(e);this.chat.channels=this.chat.channels.map(s=>s.id===i.id?i:s),this.chat.emit("channelUpdate",i)}),T.on(E.NEW_CHAT_MESSAGE,t=>{if(nl[t==null?void 0:t.type]==="poll")return;const e=wr.formatMessage(t);this.chat.messages=[...this.chat.messages,e],this.chat.emit("chatUpdate",{action:"add",message:e,messages:this.chat.messages})}),T.on(E.PIN_CHAT_MESSAGE,async t=>{const e=wr.formatMessage(t),i=this.chat.messages.findIndex(s=>s.id===e.id);this.chat.messages[i]=e,this.chat.emit("pinMessage",{message:e,messages:this.chat.messages})}),T.on(E.UNPIN_CHAT_MESSAGE,async t=>{const e=wr.formatMessage(t),i=this.chat.messages.findIndex(s=>s.id===e.id);this.chat.messages[i]=e,this.chat.emit("unpinMessage",{message:e,messages:this.chat.messages})})}},cg=new WeakSet,h0=function(){return oi()},pu=new WeakMap,EE);let Qn=wr;kQ([S.trace("ChatController.setupEvents")],Qn.prototype,"setupEvents",1);var SQ=Object.defineProperty,xQ=Object.getOwnPropertyDescriptor,Sv=(t,e,i,s)=>{for(var r=s>1?void 0:s?xQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&SQ(e,i,r),r},fr,hu,gu,dg,g0,TE;const sI=(TE=class{constructor(t,e,i,s){R(this,dg),v(this,"plugins"),R(this,fr,void 0),R(this,hu,void 0),R(this,gu,void 0),P(this,fr,t),P(this,gu,e),P(this,hu,i),this.plugins=s,this.setupEvents()}get roomJoined(){var t;return((t=p(this,dg,g0))==null?void 0:t.roomJoined)===!0}static async init(t,e,i,s,r,n,a){const o=C_(r.config.viewType,a)?"socket-service":"room-node";w.info(`Using socket server ${o} for plugin`);const c=new v1;return t.forEach(u=>{const l=new zp(u,e,o,r,n,s);c.all.add(l)}),r.config.isV2===!1&&r.config.setDisabledPlugins(c.all.toArray().map(u=>u.id)),new sI(e,i,o,c)}async getRoomPlugins(){if(p(this,hu)==="socket-service"){const{plugins:e}=await p(this,fr).getActivePlugins();await Promise.all(e.map(i=>this.enablePlugin({id:i.pluginId,enabledBy:i.enabledBy})));return}if(!this.roomJoined){w.error("PluginController.getRoomPlugins.RoomNodeClientSocketUsed_WithoutRoomJoin");return}const{payload:t}=await p(this,dg,g0).getRoomState();await Promise.all(t.roomState.plugins.map(e=>this.enablePlugin(e)))}async enablePlugin({id:t,enabledBy:e}){const i=this.plugins.all.get(t);i&&(await i.activateForSelf(),i.enabledBy=e)}async disablePlugin({id:t}){const e=this.plugins.all.get(t);e&&e.deactivateForSelf()}sendIframeEventOld(t,e){const{id:i}=e,s=this.plugins.all.get(i);s&&s.sendIframeEvent({type:t,payload:e})}sendIframeEvent(t,e,i,s){const r=this.plugins.all.get(e);e&&r.sendIframeEvent({type:t,uuid:i,payload:s})}broadcastIframeEventOld(t,e){this.plugins.active.forEach(i=>{this.sendIframeEventOld(t,{...e,id:i.id})})}broadcastIframeEvent(t,e){this.plugins.active.forEach(i=>{this.sendIframeEvent(t,i.id,"",e)})}setupEvents(){if(this.plugins.all.on("stateUpdate",({active:t,id:e})=>{if(t){this.plugins.active.add(this.plugins.all.get(e));return}this.plugins.active.delete(e)}),T.onAsync(E.ROOM_JOINED,async()=>{await this.getRoomPlugins(),w.debug("[ROOM_JOINED] resolved request to fetch plugins.")}),p(this,hu)==="socket-service"){p(this,fr).on(pe.addPlugin,async t=>{var e;const i=t.pluginId;(e=this.plugins.all.get(i))!=null&&e.active||await this.enablePlugin({id:i,enabledBy:t.enabledBy})}),p(this,fr).on(pe.removePlugin,async t=>{var e;const i=t.pluginId;(e=this.plugins.all.get(i))!=null&&e.active&&await this.disablePlugin({id:i})}),[pe.enablePluginForPeers,pe.enablePluginForRoom].forEach(t=>{p(this,fr).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{enabledBy:e.enabledBy})})}),[pe.disablePluginForPeers,pe.disablePluginForRoom].forEach(t=>{p(this,fr).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{disabledBy:e.disabledBy})})}),[pe.customPluginEventToPeers,pe.customPluginEventToRoom].forEach(t=>{p(this,fr).on(t,async(e,i)=>{this.sendIframeEvent(t,e.pluginId,i,{data:JSON.parse(new TextDecoder().decode(e.pluginData))})})}),[pe.storeInsertKeys,pe.storeGetKeys,pe.storeDeleteKeys].forEach(t=>{p(this,fr).on(t,async(e,i)=>{var s;const r=(s=e.storeItems)==null?void 0:s.map(n=>{var a;return{timestamp:n.timestamp,peerId:n.peerId,payload:JSON.parse((a=n.payload)!=null&&a.length?new TextDecoder().decode(n.payload):"{}"),key:n.storeKey}});this.sendIframeEvent(t,e.pluginId,i,{storeName:e.storeName,storeItems:r})})}),p(this,fr).on(pe.storeDelete,async(t,e)=>{this.sendIframeEvent(pe.storeDelete,t.pluginId,e,{storeName:t.storeName})}),p(this,gu).on(ri.sendMessageToPeers,t=>{const e=Qn==null?void 0:Qn.formatSocketServiceMessage(t.message);this.broadcastIframeEvent(si.chatMessage,{message:e})}),p(this,gu).on(ri.sendMessageToRoom,t=>{const e=Qn==null?void 0:Qn.formatSocketServiceMessage(t.message);this.broadcastIframeEvent(si.chatMessage,{message:e})}),T.on(E.PEER_JOINED,t=>{this.broadcastIframeEvent(si.peerJoined,t)}),T.on(E.PEER_CLOSED,t=>{this.broadcastIframeEvent(si.peerLeft,t)});return}T.on(E.ENABLE_PLUGIN,async({id:t,enabledBy:e})=>{await this.enablePlugin({id:t,enabledBy:e})}),T.on(E.DISABLE_PLUGIN,async({id:t})=>{await this.disablePlugin({id:t})}),[E.PLUGIN_DATA,E.PLUGIN_EVENT].forEach(t=>{T.on(t,e=>{this.sendIframeEventOld(t,e)})}),[E.PEER_JOINED,E.PEER_CLOSED,E.NEW_CHAT_MESSAGE].forEach(t=>{T.on(t,e=>{this.broadcastIframeEventOld(t,e)})})}},fr=new WeakMap,hu=new WeakMap,gu=new WeakMap,dg=new WeakSet,g0=function(){return oi()},TE);let gh=sI;Sv([S.trace("PluginController.getRoomPlugins")],gh.prototype,"getRoomPlugins",1);Sv([S.trace("PluginController.enableForSelf")],gh.prototype,"enablePlugin",1);Sv([S.trace("PluginController.disableForSelf")],gh.prototype,"disablePlugin",1);Sv([S.trace("PluginController.setupEvents")],gh.prototype,"setupEvents",1);function EQ(){Me.isElectron()&&window.dyteElectronGetDisplayMediaSource&&(navigator.mediaDevices.getDisplayMedia=async()=>{const t=await window.dyteElectronGetDisplayMediaSource({types:["window","screen"]});let e=[];if(t&&(Array.isArray(t)?e=t:e=[t]),!(e!=null&&e.length))throw new Error("Couldn't find any media source for screen share.");let i=e.find(r=>{var n;return(n=r.id)==null?void 0:n.includes("screen")});i=i!=null?i:e[0];const s={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i.id}}};return await navigator.mediaDevices.getUserMedia(s)})}var TQ=Object.defineProperty,CQ=Object.getOwnPropertyDescriptor,PQ=(t,e,i,s)=>{for(var r=s>1?void 0:s?CQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&TQ(e,i,r),r},mu,lg,xa,fu,vu,CE;let b1=(CE=class extends Nt{constructor(t,e,i){super(),R(this,mu),v(this,"items"),R(this,xa,void 0),R(this,fu,void 0),R(this,vu,void 0),P(this,xa,t),P(this,fu,e),P(this,vu,i),this.items=[]}get roomJoined(){var t;return((t=p(this,mu,lg))==null?void 0:t.roomJoined)===!0}async create(t,e,i=!1,s=!1){if(p(this,xa).config.viewType!=="LIVESTREAM"&&!this.roomJoined)throw new I("Can't create polls without joining room");if(!p(this,xa).permissions.polls.canCreate){w.error("DytePolls::create::permission_denied");return}if(!t||!e){w.error("DytePolls::question_and_options_can_not_be_empty",{dytePolls:{hasQuestion:!!t,optionsLength:e==null?void 0:e.length}});return}if(e.length<2){w.error("DytePolls::there_must_be_at_least_two_options",{dytePolls:{hasQuestion:!!t,optionsLength:e.length}});return}if(p(this,vu)==="socket-service"){await p(this,fu).createPoll(t,e,i,s);return}const r={question:t,options:e,anonymous:i,hideVotes:s,createdBy:p(this,xa).name,createdByUserId:p(this,xa).userId};await p(this,mu,lg).newPoll(r)}async vote(t,e){if(!p(this,xa).permissions.polls.canVote){w.error("DytePolls::vote::permission_denied");return}if(p(this,vu)==="socket-service"){await p(this,fu).votePoll(t,e);return}const i={pollId:t,index:e};await p(this,mu,lg).votePoll(i)}},mu=new WeakSet,lg=function(){return oi()},xa=new WeakMap,fu=new WeakMap,vu=new WeakMap,CE);b1=PQ([Ii(t=>{throw new I(t.message,"0700")})],b1);var RQ=Object.defineProperty,IQ=Object.getOwnPropertyDescriptor,AQ=(t,e,i,s)=>{for(var r=s>1?void 0:s?IQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&RQ(e,i,r),r},ug,$o,yu,pg,m0,PE;const xd=(PE=class{constructor(t,e,i){R(this,pg),v(this,"polls"),R(this,ug,void 0),R(this,$o,void 0),R(this,yu,void 0),this.polls=new b1(t,e,i),P(this,ug,t),P(this,$o,e),P(this,yu,i),this.setupEvents()}static async init(t,e,i){const s=_3(t.config.viewType,i)?"socket-service":"room-node";return w.info(`Using socket server ${s} for polls`),new xd(t,e,s)}canViewPolls(){return p(this,ug).permissions.polls.canView}setupEvents(){if(p(this,yu)==="socket-service"){if(!this.canViewPolls())return;T.on(E.SOCKET_SERVICE_ROOM_JOINED,()=>{this.getPolls()}),p(this,$o).on($n.createPoll,t=>{t.poll&&this.updatePoll(xd.formatSocketServicePoll(t.poll))}),p(this,$o).on($n.updatePoll,t=>{t.poll&&this.updatePoll(xd.formatSocketServicePoll(t.poll))}),p(this,$o).on($n.votePoll,t=>{t.poll&&this.updatePoll(xd.formatSocketServicePoll(t.poll))})}else T.onAsync(E.ROOM_JOINED,async()=>{this.canViewPolls()&&this.getPolls()});T.on(E.UPDATE_POLL,async({poll:t})=>{this.updatePoll(t)})}updatePoll(t){if(!this.canViewPolls())return;const e=this.polls.items.findIndex(i=>i.id===t.id);if(e>-1){const i=JSON.stringify(this.polls.items[e]);this.polls.items[e]=t,i!==JSON.stringify(t)&&this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!1});return}this.polls.items=[...this.polls.items,t],this.polls.emit("pollsUpdate",{polls:this.polls.items,newPoll:!0})}async getPolls(){if(p(this,yu)==="socket-service"){const t=await p(this,$o).getPolls();if(!(t!=null&&t.payload))return;const{polls:e}=sJ.fromBinary(t.payload);this.polls.items=e.map(i=>xd.formatSocketServicePoll(i));return}if(p(this,pg,m0)instanceof Ie){const{polls:t}=(await p(this,pg,m0).getPolls()).payload;this.polls.items=Object.values(t)}}static formatSocketServicePoll(t){const e=t.options.map(i=>({count:i.count,text:i.text,votes:i.votes.map(s=>({id:s.userId,name:s.name}))}));return{anonymous:t.anonymous,createdBy:t.createdBy,createdByUserId:t.createdByUserId,hideVotes:t.hideVotes,id:t.pollId,options:e,question:t.question,voted:t.votes}}},ug=new WeakMap,$o=new WeakMap,yu=new WeakMap,pg=new WeakSet,m0=function(){return oi()},PE);let rI=xd;AQ([S.trace("PollController.setupEvents")],rI.prototype,"setupEvents",1);class RE extends U_{constructor(){super({onAddEvent:"remoteRequestAdd",onDeleteEvent:"remoteRequestRemove"})}add(e,i=!0){return super.add(e,i)}delete(e,i=!0,s=!1){return super.delete(e,i,s)}}var Xo,Ed,Td,nm;const w1=class extends Nt{constructor(t,e){super(),R(this,Xo),v(this,"incomingRequests"),v(this,"outgoingRequests"),v(this,"active"),R(this,Td,void 0),R(this,nm,void 0),P(this,nm,e),P(this,Td,t),this.incomingRequests=new RE,this.outgoingRequests=new RE,this.active=null,this.mouseEvent=this.mouseEvent.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this)}async requestControl(t){var e;if(!p(this,nm).joined.get(t))throw new I("Invalid peer.");const i=(e=this.outgoingRequests)==null?void 0:e.toArray().find(n=>n.hostPeerId===t);if(i)return i.id;const s=th(),r=new $p({requestId:s,hostPeerId:t,remotePeerId:p(this,Td).id,state:rl.PENDING});return this.outgoingRequests.add(r),await p(this,Xo,Ed).requestRemoteControl(r),this.emit("remoteUpdate",{payload:{request:{id:r.id,hostPeerId:r.hostPeerId,remotePeerId:r.remotePeerId}},type:Kn.REQUEST_SENT}),s}async acceptControl(t){var e;if(((e=this.active)==null?void 0:e.id)===t)return;const i=this.incomingRequests.get(t);if(!i)throw new I("No request found.");i.state=rl.ACCEPTED,this.endControl(),this.active=i,p(this,Xo,Ed).acceptRemoteControl(i),this.emit("remoteUpdate",{payload:{request:{id:this.active.id,hostPeerId:this.active.hostPeerId,remotePeerId:this.active.remotePeerId}},type:Kn.INCOMING_REQUEST_ACCEPTED})}async endControl(){if(!this.active)return;const t={...this.active};p(this,Xo,Ed).terminateRemoteControl(this.active.hostPeerId===p(this,Td).id?this.active.remotePeerId:this.active.hostPeerId,this.active),this.active=null,this.emit("remoteUpdate",{payload:{request:{id:t.id,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:t.hostPeerId===p(this,Td).id?Kn.INCOMING_REQUEST_ENDED:Kn.OUTGOING_REQUEST_ENDED})}async keyboardEvent(t){if(!this.active)return;const e=w1.getFormattedKeyboardEvent(t);if(e){const i={eventType:Up.KEYBOARD,keyboardEvent:e};p(this,Xo,Ed).sendEventRemoteControl(this.active.hostPeerId,this.active.id,i)}}async mouseEvent(t,e){if(!this.active)return;const i=w1.getFormattedRemoteMouseEvent(t,e);if(i){const s={eventType:Up.MOUSE,mouseEvent:i};p(this,Xo,Ed).sendEventRemoteControl(this.active.hostPeerId,this.active.id,s)}}static getFormattedRemoteMouseEvent(t,e){const i=e.getBoundingClientRect();return{type:t.type,position:{x:Math.floor(t.x-i.left),y:Math.floor(t.y-i.top)},boundingRect:{width:i.width,height:i.height}}}static getFormattedKeyboardEvent(t){return t.type==="keydown"?{type:t.type,key:t.key}:null}};let DQ=w1;Xo=new WeakSet,Ed=function(){return oi()},Td=new WeakMap,nm=new WeakMap;var am,_1;const k1=class{constructor(t,e){v(this,"remote"),v(this,"hostPeetId"),v(this,"remotePeetId"),v(this,"remoteRequestTokens"),v(this,"activeRemoteToken"),R(this,am,void 0),R(this,_1,void 0),P(this,am,t),P(this,_1,e),this.hostPeetId=t.id,this.remote=new DQ(t,e),this.setupEvents()}setupEvents(){T.on(E.MESSAGE,t=>{var e;if(t.remoteRequestType===Jn.REQUEST&&(this.remote.incomingRequests.add(new $p({requestId:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,state:rl.PENDING})),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:Kn.REQUEST_RECEIVED})),t.remoteRequestType===Jn.ACCEPT){const i=this.remote.outgoingRequests.get(t.remoteRequestId);if(!i)throw new I("There is no pending remote control request to accept.");this.remote.endControl(),i.state=rl.ACCEPTED,this.remote.active=new $p({requestId:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId,state:rl.ACCEPTED}),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:Kn.OUTGOING_REQUEST_ACCEPTED})}t.remoteRequestType===Jn.END&&(((e=this.remote.active)==null?void 0:e.id)===t.remoteRequestId&&(this.remote.active=null),this.remote.emit("remoteUpdate",{payload:{request:{id:t.remoteRequestId,hostPeerId:t.hostPeerId,remotePeerId:t.remotePeerId}},type:t.hostPeerId===p(this,am).id?Kn.INCOMING_REQUEST_ENDED:Kn.OUTGOING_REQUEST_ENDED})),t.remoteRequestType===Jn.EVENT&&this.remote.active&&this.remote.active.id===t.remoteRequestId&&window.DyteRobot&&(t.remoteEvent.eventType===Up.MOUSE?k1.executeMouseEvent(t.remoteEvent.mouseEvent):t.remoteEvent.eventType===Up.KEYBOARD&&k1.executeKeyboardEvent(t.remoteEvent.keyboardEvent))}),T.on(E.PEER_CLOSED,({id:t})=>{var e,i,s,r,n,a,o,c;[(i=(e=this.remote)==null?void 0:e.active)==null?void 0:i.hostPeerId,(r=(s=this.remote)==null?void 0:s.active)==null?void 0:r.remotePeerId].includes(t)&&this.remote.endControl(),(a=(n=this.remote)==null?void 0:n.incomingRequests)==null||a.toArray().forEach(u=>{[u.hostPeerId,u.remotePeerId].includes(t)&&this.remote.incomingRequests.delete(u.id)}),(c=(o=this.remote)==null?void 0:o.outgoingRequests)==null||c.toArray().forEach(u=>{[u.hostPeerId,u.remotePeerId].includes(t)&&this.remote.outgoingRequests.delete(u.id)})})}static executeMouseEvent(t){const e=window.screen.width*t.position.x/t.boundingRect.width,i=window.screen.height*t.position.y/t.boundingRect.height,s={width:window.screen.width,height:window.screen.height};switch(t.type){case im.LEFT_CLICK:window.DyteRobot.mouse.leftClick(e,i,s);break;case im.RIGHT_CLICK:window.DyteRobot.mouse.rightClick(e,i,s);break;case im.MOVE:window.DyteRobot.mouse.moveTo(e,i,s);break}}static executeKeyboardEvent(t){switch(t.type){case"keydown":window.DyteRobot.keyboard.press(t.key);break}}};let MQ=k1;am=new WeakMap,_1=new WeakMap;var OQ=Object.defineProperty,LQ=(t,e,i)=>e in t?OQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,NQ=(t,e,i)=>(LQ(t,typeof e!="symbol"?e+"":e,i),i),z_=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},B=(t,e,i)=>(z_(t,e,"read from private field"),i?i.call(t):e.get(t)),$t=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Rt=(t,e,i,s)=>(z_(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),jt=(t,e,i)=>(z_(t,e,"access private method"),i),Na,ec,tc,zt,Cd,mt,Jt,Ua,ni,Fn,sr,al,Vn,S1,nI,ju,om,x1,aI,F_,oI,ol,Fp,op,lf,uf,V_,cl,Vp,cp,pf,B_={exports:{}},dl=typeof Reflect=="object"?Reflect:null,IE=dl&&typeof dl.apply=="function"?dl.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},cm;dl&&typeof dl.ownKeys=="function"?cm=dl.ownKeys:Object.getOwnPropertySymbols?cm=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:cm=function(t){return Object.getOwnPropertyNames(t)};function UQ(t){console&&console.warn&&console.warn(t)}var cI=Number.isNaN||function(t){return t!==t};function rt(){rt.init.call(this)}B_.exports=rt;B_.exports.once=FQ;rt.EventEmitter=rt;rt.prototype._events=void 0;rt.prototype._eventsCount=0;rt.prototype._maxListeners=void 0;var AE=10;function xv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(rt,"defaultMaxListeners",{enumerable:!0,get:function(){return AE},set:function(t){if(typeof t!="number"||t<0||cI(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");AE=t}});rt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};rt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cI(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function dI(t){return t._maxListeners===void 0?rt.defaultMaxListeners:t._maxListeners}rt.prototype.getMaxListeners=function(){return dI(this)};rt.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s=t==="error",r=this._events;if(r!==void 0)s=s&&r.error===void 0;else if(!s)return!1;if(s){var n;if(e.length>0&&(n=e[0]),n instanceof Error)throw n;var a=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw a.context=n,a}var o=r[t];if(o===void 0)return!1;if(typeof o=="function")IE(o,this,e);else for(var c=o.length,u=gI(o,c),i=0;i<c;++i)IE(u[i],this,e);return!0};function lI(t,e,i,s){var r,n,a;if(xv(i),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),n=t._events),a=n[e]),a===void 0)a=n[e]=i,++t._eventsCount;else if(typeof a=="function"?a=n[e]=s?[i,a]:[a,i]:s?a.unshift(i):a.push(i),r=dI(t),r>0&&a.length>r&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,UQ(o)}return t}rt.prototype.addListener=function(t,e){return lI(this,t,e,!1)};rt.prototype.on=rt.prototype.addListener;rt.prototype.prependListener=function(t,e){return lI(this,t,e,!0)};function $Q(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uI(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=$Q.bind(s);return r.listener=i,s.wrapFn=r,r}rt.prototype.once=function(t,e){return xv(e),this.on(t,uI(this,t,e)),this};rt.prototype.prependOnceListener=function(t,e){return xv(e),this.prependListener(t,uI(this,t,e)),this};rt.prototype.removeListener=function(t,e){var i,s,r,n,a;if(xv(e),s=this._events,s===void 0)return this;if(i=s[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(r=-1,n=i.length-1;n>=0;n--)if(i[n]===e||i[n].listener===e){a=i[n].listener,r=n;break}if(r<0)return this;r===0?i.shift():jQ(i,r),i.length===1&&(s[t]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};rt.prototype.off=rt.prototype.removeListener;rt.prototype.removeAllListeners=function(t){var e,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var r=Object.keys(i),n;for(s=0;s<r.length;++s)n=r[s],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this};function pI(t,e,i){var s=t._events;if(s===void 0)return[];var r=s[e];return r===void 0?[]:typeof r=="function"?i?[r.listener||r]:[r]:i?zQ(r):gI(r,r.length)}rt.prototype.listeners=function(t){return pI(this,t,!0)};rt.prototype.rawListeners=function(t){return pI(this,t,!1)};rt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):hI.call(t,e)};rt.prototype.listenerCount=hI;function hI(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}rt.prototype.eventNames=function(){return this._eventsCount>0?cm(this._events):[]};function gI(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function jQ(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function zQ(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function FQ(t,e){return new Promise(function(i,s){function r(a){t.removeListener(e,n),s(a)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",r),i([].slice.call(arguments))}mI(t,e,n,{once:!0}),e!=="error"&&VQ(t,r,{once:!0})})}function VQ(t,e,i){typeof t.on=="function"&&mI(t,"error",e,i)}function mI(t,e,i,s){if(typeof t.on=="function")s.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(n){s.once&&t.removeEventListener(e,r),i(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var BQ=B_.exports;class HQ extends A{constructor(){super("message.v1.SocketMessage",[{no:1,name:"event",kind:"scalar",T:13},{no:2,name:"id",kind:"scalar",opt:!0,T:9},{no:3,name:"payload",kind:"scalar",opt:!0,T:12},{no:4,name:"metadata",kind:"scalar",opt:!0,T:12}])}}const DE=new HQ;class fI{static encode(e){return DE.toBinary(e)}static decode(e){return DE.fromBinary(new Uint8Array(e))}}function WQ(t,e){return Math.floor(Math.random()*(e-t+1)+t)}class qQ{constructor(e={}){NQ(this,"opts"),$t(this,Na,void 0),this.opts={initialTimeout:e.initialTimeout||1e3,maxTimeout:e.maxTimeout||1e4,factor:e.factor||2},Rt(this,Na,0)}async wait(){Rt(this,Na,B(this,Na)+1);const e=WQ(0,Math.min(this.opts.maxTimeout,this.opts.initialTimeout*2**B(this,Na)));await new Promise(i=>{setTimeout(i,e)})}getAttempts(){return B(this,Na)}reset(){Rt(this,Na,0)}}Na=new WeakMap;const Ea={debug:0,info:1,warn:2,error:3};class GQ{constructor(e){$t(this,ec,void 0),$t(this,tc,void 0),Rt(this,ec,console),Rt(this,tc,e)}debug(...e){Ea[B(this,tc)]>Ea.debug||B(this,ec).debug("[Sockrates]:",...e)}info(...e){Ea[B(this,tc)]>Ea.info||B(this,ec).info("[Sockrates]:",...e)}warn(...e){Ea[B(this,tc)]>Ea.warn||B(this,ec).warn("[Sockrates]:",...e)}error(...e){Ea[B(this,tc)]>Ea.error||B(this,ec).error("[Sockrates]:",...e)}}ec=new WeakMap;tc=new WeakMap;var vI=(t=>(t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED",t))(vI||{});const JQ="2",KQ="3";class QQ{constructor(e,i){$t(this,S1),$t(this,ju),$t(this,x1),$t(this,F_),$t(this,ol),$t(this,op),$t(this,uf),$t(this,cl),$t(this,cp),$t(this,zt,void 0),$t(this,Cd,void 0),$t(this,mt,void 0),$t(this,Jt,void 0),$t(this,Ua,void 0),$t(this,ni,void 0),$t(this,Fn,void 0),$t(this,sr,void 0),$t(this,al,void 0),$t(this,Vn,void 0);var s,r,n,a,o,c,u,l,h,g;Rt(this,Cd,e),Rt(this,Ua,[]),Rt(this,ni,new BQ),Rt(this,Fn,!0),Rt(this,sr,!1),Rt(this,mt,i!=null?i:{}),(s=B(this,mt)).autoReconnect!=null||(s.autoReconnect=!0),(r=B(this,mt)).retryConnectionInterval!=null||(r.retryConnectionInterval=1e3),(n=B(this,mt)).pingTimeout!=null||(n.pingTimeout=3e4),(a=B(this,mt)).connectionTimeout!=null||(a.connectionTimeout=5e3),(o=B(this,mt)).debug!=null||(o.debug=!0),(c=B(this,mt)).maxReconnectionAttempts!=null||(c.maxReconnectionAttempts=10),(u=B(this,mt)).disconnectOnPingTimeout!=null||(u.disconnectOnPingTimeout=!0),(l=B(this,mt)).queueOnDisconnect!=null||(l.queueOnDisconnect=!1),(h=B(this,mt)).flushOnReconnect!=null||(h.flushOnReconnect=!1),Rt(this,Jt,(g=B(this,mt).logger)!=null?g:new GQ(B(this,mt).debug?"debug":"info")),Rt(this,Vn,new qQ)}get readyState(){var e;return(e=B(this,zt))==null?void 0:e.readyState}get url(){return B(this,Cd)}get config(){return B(this,mt)}get sendQueue(){return B(this,Ua)}flush(){if(!B(this,mt).queueOnDisconnect)return!1;const e=[];return B(this,Ua).forEach(i=>{this.send(i.event,i.id,i.payload,i.metadata)||e.push(i)}),Rt(this,Ua,e),B(this,Ua)}async connect(e=!1){if(!e&&[0,1].includes(this.readyState)){B(this,Jt).debug("Websocket was already connecting or connected.");return}if(B(this,Fn)!==!1)return new Promise((i,s)=>{jt(this,cl,Vp).call(this),jt(this,cp,pf).call(this);try{Rt(this,zt,new WebSocket(jt(this,S1,nI).call(this,B(this,Cd)))),B(this,zt).binaryType="arraybuffer",B(this,Jt).debug("Connecting to",B(this,Cd));const r=setTimeout(()=>{B(this,Jt).debug("Connection timeout. Closing socket"),Rt(this,Fn,!0),jt(this,cp,pf).call(this),B(this,zt).close(3001,"Connection Timeout"),B(this,mt).autoReconnect&&!B(this,sr)&&(B(this,ni).emit("reconnecting"),jt(this,ol,Fp).call(this)),s(new Error("Connection timed out!"))},B(this,mt).connectionTimeout);B(this,zt).onopen=()=>{B(this,Jt).debug(`Ready State: ${vI[B(this,zt).readyState]}`),r&&clearTimeout(r),jt(this,uf,V_).call(this),B(this,ni).emit("connected"),B(this,mt).flushOnReconnect&&this.flush(),i()},B(this,zt).onclose=n=>{try{r&&clearTimeout(r);const{code:a,reason:o}=n;if(s(o),B(this,Jt).debug("Socket closed. Close event:",n),B(this,Jt).debug("Connection closed code:",a),B(this,Jt).debug("Connection closed reason:",o),B(this,Fn)&&a!==1e3&&B(this,mt).autoReconnect&&!B(this,sr)){B(this,ni).emit("reconnecting"),jt(this,ol,Fp).call(this);return}B(this,sr)||B(this,ni).emit("disconnected",{code:a,reason:o})}catch(a){jt(this,ju,om).call(this,a)}},B(this,zt).onerror=n=>{jt(this,ju,om).call(this,n)},B(this,zt).onmessage=n=>jt(this,x1,aI).call(this,n)}catch(r){jt(this,ju,om).call(this,r,s)}})}send(e,i,s,r){const n={event:e,id:i,payload:s,metadata:r};if(B(this,mt).queueOnDisconnect&&(!B(this,zt)||B(this,zt).readyState!==1))return B(this,Jt).debug("Queuing message since socket is not connected!",n),B(this,Ua).push(n),!1;const a=fI.encode(n);return jt(this,op,lf).call(this,a)}emit(e,i,s,r){return this.send(e,i,s,r)}sendRaw(e){return jt(this,op,lf).call(this,e)}receive(e,i){return B(this,ni).on(e.toString(),i)}on(e,i){if(typeof e=="string"&&(e==="connected"||e==="disconnected"||e==="errored"||e==="reconnected"||e==="reconnecting"||e==="reconnectAttempt"||e==="reconnectFailure"||e==="failed")){B(this,ni).on(e,i);return}this.receive(e,i)}removeAllListeners(){B(this,ni).removeAllListeners()}removeReceiver(e,i){this.removeListener(e,i)}removeListener(e,i){B(this,ni).removeListener(e.toString(),i)}removeReceivers(e){this.removeListeners(e)}removeListeners(e){B(this,ni).listeners(e.toString()).map(i=>this.removeListener(e,i))}disconnect(){Rt(this,Fn,!1),jt(this,cl,Vp).call(this),this.removeAllListeners(),B(this,zt).close(1e3,"Sockrates disconnect method called.")}}zt=new WeakMap;Cd=new WeakMap;mt=new WeakMap;Jt=new WeakMap;Ua=new WeakMap;ni=new WeakMap;Fn=new WeakMap;sr=new WeakMap;al=new WeakMap;Vn=new WeakMap;S1=new WeakSet;nI=function(t){if(t.startsWith("ws://")||t.startsWith("wss://"))return t;if(t.startsWith("https://"))return`wss://${t.substring(8)}`;if(t.startsWith("http://"))return`ws://${t.substring(7)}`;throw new Error("Invalid URL. URL must start with http(s):// or ws(s)://.")};ju=new WeakSet;om=function(t,e){B(this,Jt).error("Error:",t),B(this,ni).emit("errored",{error:t}),e==null||e(t)};x1=new WeakSet;aI=function(t){if(t.data===JQ){B(this,Jt).debug("Received ping from server"),jt(this,uf,V_).call(this),jt(this,op,lf).call(this,KQ);return}B(this,Jt).debug("Received data:",t.data);const e=fI.decode(t.data),{id:i,payload:s}=e;B(this,ni).emit(e.event.toString(),{id:i,payload:s})};F_=new WeakSet;oI=function(){return B(this,zt).readyState===1};ol=new WeakSet;Fp=async function(t=!0){if(t&&B(this,sr)){B(this,Jt).debug("Reconnect called when already in a reconnect loop. Ignoring.");return}if(B(this,sr)||B(this,Vn).reset(),B(this,mt).maxReconnectionAttempts!==null&&B(this,Vn).getAttempts()>=B(this,mt).maxReconnectionAttempts){B(this,ni).emit("failed"),Rt(this,sr,!1);return}Rt(this,sr,!0),jt(this,cp,pf).call(this),jt(this,cl,Vp).call(this);try{if(await B(this,Vn).wait(),B(this,Fn)===!1)return;if(B(this,Jt).debug(`Reconnection attempt ${B(this,Vn).getAttempts()}`),B(this,ni).emit("reconnectAttempt",{attempt:B(this,Vn).getAttempts()}),await this.connect(),!jt(this,F_,oI).call(this))throw Error("Reconnect Failed");Rt(this,sr,!1),B(this,ni).emit("reconnected")}catch{B(this,Jt).debug("Failed to reconnect."),B(this,ni).emit("reconnectFailure",{attempt:B(this,Vn).getAttempts()}),jt(this,ol,Fp).call(this,!1)}};op=new WeakSet;lf=function(t){try{return B(this,zt).send(t),!0}catch(e){return B(this,Jt).error(e.message),!1}};uf=new WeakSet;V_=function(){this.config.disconnectOnPingTimeout&&(B(this,Jt).debug("Resetting ping timeout"),jt(this,cl,Vp).call(this),Rt(this,al,setTimeout(()=>{var t;B(this,Jt).debug("Disconnecting the socket due to ping timeout"),Rt(this,Fn,!0);const e=3002,i="Ping timeout";(t=B(this,zt))==null||t.close(e,i),B(this,ni).emit("disconnected",{code:e,reason:i}),B(this,mt).autoReconnect&&!B(this,sr)&&(B(this,Jt).debug("Triggering reconnection due to ping timeout"),B(this,ni).emit("reconnecting"),jt(this,ol,Fp).call(this))},B(this,mt).pingTimeout)))};cl=new WeakSet;Vp=function(){B(this,al)&&(clearTimeout(B(this,al)),Rt(this,al,void 0))};cp=new WeakSet;pf=function(){B(this,zt)&&(B(this,zt).onopen=void 0,B(this,zt).onerror=void 0,B(this,zt).onmessage=void 0,B(this,zt).onclose=void 0)};var YQ=Object.defineProperty,ZQ=Object.getOwnPropertyDescriptor,Ev=(t,e,i,s)=>{for(var r=s>1?void 0:s?ZQ(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&YQ(e,i,r),r};const ME=65535;var bu,Ai,hg,gg,f0,OE;const yI=(OE=class{constructor({peerId:t,roomName:e,authToken:i,capabilities:s}){R(this,gg),R(this,bu,void 0),R(this,Ai,void 0),R(this,hg,void 0),v(this,"roomName"),v(this,"peerId"),v(this,"authToken"),v(this,"capabilities");var r;if(!t||!e||!i)throw new I("peerId, roomName, or authToken can not be empty");const{apiBase:n,baseURI:a}=Ve;let o=yI.getSocketEdgeDomain(n,a);typeof nf("socket_server_base")=="string"&&(o=nf("socket_server_base"));const c=`wss://${o}`;this.roomName=e,this.peerId=t,this.authToken=i,this.capabilities=s;const u=new URL(`${c}/ws`),l={roomID:e,peerID:t,authToken:i,useMediaV2:s.includes("HIVE"),ping:s.includes("PING"),capabilities:s.map(h=>af[h]).join(" ")};Object.entries(l).forEach(([h,g])=>{u.searchParams.append(h,g.toString())}),P(this,bu,u.href),P(this,hg,t),P(this,Ai,new QQ(p(this,bu),{autoReconnect:!0,disconnectOnPingTimeout:(r=s.includes("PING"))!=null?r:!1,queueOnDisconnect:!0,flushOnReconnect:!1,logger:w}))}static getSocketEdgeDomain(t,e){let i="";return e?`socket-edge.${e}`:(t.includes("api.cluster.dyte")||t.includes("api.dyte")?i="edge":t.includes("api.staging.dyte")?i="staging":t.includes("api.preprod.dyte")?i="preprod":t.includes("api.devel.dyte")&&(i="devel"),`socket-${i}.dyte.io`)}get url(){return p(this,bu)}async connect(){const t=()=>{w.info("SocketService::connect::Connected to socket-edge"),T.emit(E.SOCKET_SERVICE_CONNECTED)};this.onStateEvent("connected",t);const e=({reason:o,code:c})=>{w.info("SocketService::connect::Disconnected from socket-edge",{error:{code:c,reason:o}}),T.emit(E.SOCKET_SERVICE_DISCONNECTED),!(c<4e3||c>4002)&&(c===4e3?w.error("SocketService::connect::Bad Request",{error:{code:c,reason:o}}):c===4001?w.error("SocketService::connect::Unauthorized",{error:{code:c,reason:o}}):c===4002?w.error("SocketService::connect::Internal Error",{error:{code:c,reason:o}}):w.error("SocketService::connect::Unknown Error",{error:{code:c,reason:o}}))};this.onStateEvent("disconnected",e);const i=()=>{w.info("SocketService::connect::Reconnecting to socket-edge"),T.emit(E.SOCKET_SERVICE_RECONNECTING)};this.onStateEvent("reconnecting",i);const s=({attempt:o})=>{w.info("SocketService::connect::Attempting reconnect to socket-edge"),T.emit(E.SOCKET_SERVICE_RECONNECTION_ATTEMPT,{attempt:o})};this.onStateEvent("reconnectAttempt",s);const r=({attempt:o})=>{w.info("SocketService::connect::Reconnect attempt failed"),T.emit(E.SOCKET_SERVICE_RECONNECT_FAILURE,{attempt:o})};this.onStateEvent("reconnectFailure",r);const n=()=>{w.info("SocketService::connect::Reconnected to socket-edge"),T.emit(E.SOCKET_SERVICE_RECONNECTED)};this.onStateEvent("reconnected",n);const a=()=>{w.info("SocketService::connect::Socket-edge reconnects failed"),T.emit(E.SOCKET_SERVICE_FAILED)};this.onStateEvent("failed",a),await p(this,Ai).connect()}disconnect(){return p(this,Ai).disconnect()}get isConnected(){try{return p(this,Ai).readyState===1}catch{return!1}}sendMessage(t,e,i){const s={};return S.injectContext(s),w.info(`SocketSetvice::SendMessage::${t}`),p(this,Ai).send(t,i!=null?i:Pe(this,gg,f0).call(this),e,new TextEncoder().encode(JSON.stringify(s)))}sendMessagePromise(t,e,i){const s=parseInt({}.SOCKET_SERVICE_MESSAGE_REQUEST_TIMEOUT,10)||2e4;return this.sendMessagePromiseWithTimeout({event:t,timeout:s,protobuf:e,messageId:i})}sendMessagePromiseWithTimeout({event:t,timeout:e,protobuf:i,messageId:s}){return new Promise((r,n)=>{const a=(h,g)=>{p(this,Ai).removeListener(t,h),p(this,Ai).removeListener(ME,g),p(this,Ai).removeListener($e.errorResponse,g)},o=s!=null?s:Pe(this,gg,f0).call(this),c={};S.injectContext(c);const u=({id:h,payload:g})=>{if(o===h){let m;try{const f=CB.fromBinary(g);m=new Error(f.errorMessage)}catch(f){m=new Error("failed to parse error message",{cause:f})}try{const f=MH.fromBinary(g);m=new Error(f.message)}catch(f){m=new Error("failed to parse error message",{cause:f})}n(m),a(l,u)}},l=({id:h,payload:g})=>{o===h&&(r({id:h,payload:g}),a(l,u))};p(this,Ai).on(t,l),p(this,Ai).on(ME,u),p(this,Ai).on($e.errorResponse,u),setTimeout(()=>{a(l,u),n(new Error("request timeout for callback"))},e),p(this,Ai).send(t,o,i,new TextEncoder().encode(JSON.stringify(c)))})}on(t,e){p(this,Ai).on(t,e)}onStateEvent(t,e){p(this,Ai).on(t,e)}flush(){return p(this,Ai).flush()}},bu=new WeakMap,Ai=new WeakMap,hg=new WeakMap,gg=new WeakSet,f0=function(){return`${p(this,hg)}-${(Math.random()+1).toString(36).substring(7)}`},OE);let mh=yI;Ev([S.trace("SocketService.connect")],mh.prototype,"connect",1);Ev([S.trace("SocketService.disconnect")],mh.prototype,"disconnect",1);Ev([S.trace("SocketService.sendMessagePromise")],mh.prototype,"sendMessagePromise",1);Ev([S.trace("SocketService.sendMessagePromiseWithTimeout")],mh.prototype,"sendMessagePromiseWithTimeout",1);var Ei;class XQ{constructor(e){R(this,Ei,void 0),P(this,Ei,e)}addPlugin(e,i){p(this,Ei).sendMessage(pe.addPlugin,nG.toBinary({pluginId:e,staggered:i}))}removePlugin(e){p(this,Ei).sendMessage(pe.removePlugin,oG.toBinary({pluginId:e,staggered:!1}))}async getActivePlugins(){const{payload:e}=await p(this,Ei).sendMessagePromise(pe.getPlugins);return e?IG.fromBinary(e):{plugins:[]}}customPluginEventToRoom(e,i,s){const r={pluginId:e,pluginData:new TextEncoder().encode(JSON.stringify(i))};p(this,Ei).sendMessage(pe.customPluginEventToRoom,vG.toBinary(r),s)}customPluginEventToPeers(e,i,s,r){const n={pluginId:e,peerIds:i,pluginData:new TextEncoder().encode(JSON.stringify(s))};p(this,Ei).sendMessage(pe.customPluginEventToPeers,bG.toBinary(n),r)}enablePluginForRoom(e,i){p(this,Ei).sendMessage(pe.enablePluginForRoom,dG.toBinary({pluginId:e}),i)}enablePluginForPeers(e,i,s){p(this,Ei).sendMessage(pe.enablePluginForPeers,hG.toBinary({pluginId:e,peerIds:i}),s)}disablePluginForRoom(e,i){p(this,Ei).sendMessage(pe.disablePluginForRoom,uG.toBinary({pluginId:e}),i)}disablePluginForPeers(e,i,s){p(this,Ei).sendMessage(pe.disablePluginForPeers,mG.toBinary({pluginId:e,peerIds:i}),s)}storeInsertKeys(e,i,s,r){const n={pluginId:e,storeName:i,insertKeys:s.map(a=>({storeKey:a.key,payload:new TextEncoder().encode(JSON.stringify(a.payload))}))};p(this,Ei).sendMessage(pe.storeInsertKeys,Kx.toBinary(n),r)}storeGetKeys(e,i,s,r){const n={pluginId:e,storeName:i,getKeys:s.map(a=>({storeKey:a.key}))};p(this,Ei).sendMessage(pe.storeGetKeys,SG.toBinary(n),r)}storeDeleteKeys(e,i,s,r){const n={pluginId:e,storeName:i,deleteKeys:s.map(a=>({storeKey:a.key}))};p(this,Ei).sendMessage(pe.storeDeleteKeys,EG.toBinary(n),r)}storeDelete(e,i,s){p(this,Ei).sendMessage(pe.storeDelete,CG.toBinary({pluginId:e,storeName:i}),s)}getPluginDataOld(e,i){w.info("getPluginDataOld",{plugin:{id:e,storeName:i}})}storePluginDataOld(e,i,s){const r={pluginId:e,storeName:i,insertKeys:[{storeKey:s.key,payload:new TextEncoder().encode(JSON.stringify(s))}]};p(this,Ei).sendMessage(pe.storeInsertKeys,Kx.toBinary(r))}on(e,i){let s;switch(e){case pe.addPlugin:case pe.enablePluginForPeers:case pe.enablePluginForRoom:{s=Yb.fromBinary.bind(Yb);break}case pe.removePlugin:case pe.disablePluginForPeers:case pe.disablePluginForRoom:{s=Qx.fromBinary.bind(Qx);break}case pe.customPluginEventToPeers:case pe.customPluginEventToRoom:{s=Zx.fromBinary.bind(Zx);break}case pe.storeInsertKeys:case pe.storeGetKeys:case pe.storeDeleteKeys:case pe.storeDelete:{s=Yx.fromBinary.bind(Yx);break}}p(this,Ei).on(e,({payload:r,id:n})=>{const a=s(r);return i(a,n)})}}Ei=new WeakMap;var eY=Object.defineProperty,tY=Object.getOwnPropertyDescriptor,Tv=(t,e,i,s)=>{for(var r=s>1?void 0:s?tY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&eY(e,i,r),r},hd,LE;let _l=(LE=class extends Nt{constructor(t){super(),R(this,hd,void 0),v(this,"recordingState","IDLE"),v(this,"recordingId"),v(this,"recordingPeerIds",[]),P(this,hd,t)}get activeRecordingsCount(){var t,e;return(e=(t=this.recordingPeerIds)==null?void 0:t.length)!=null?e:0}setRecordingState(t){const e=this.recordingState;this.recordingState=t,e!==t&&this.emitCurrentRecordingState()}emitCurrentRecordingState(){this.emit("recordingUpdate",this.recordingState)}async start(){if(!p(this,hd).permissions.canRecord)throw w.error("DyteRecording::start::permission_denied"),new I("User does not have permission to start recording");if(this.recordingState==="STARTING"||this.recordingState==="RECORDING"||this.recordingState==="STOPPING")throw w.error("DyteRecording::start::recording_in_progress",{recording:{state:this.recordingState}}),new I(`Cant start recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STARTING");try{const t=_i(),{recording:e={}}=Ve.defaults,i=await t.startRecording(e);this.recordingId=i}catch(t){throw w.error("DyteRecording::stop::recording_failed_to_start",{error:t}),this.setRecordingState("IDLE"),new I("Error while starting recording")}}async stop(){if(!p(this,hd).permissions.canRecord)throw w.error("DyteRecording::stop::permission_denied"),new I("User does not have permission to stop recording");if((this.recordingState!=="RECORDING"||!this.recordingId)&&(w.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),await this.getRecordingId()),this.recordingState!=="RECORDING"||!this.recordingId)throw w.error("DyteRecording::stop::recording_not_in_progress",{recording:{state:this.recordingState,id:this.recordingId}}),new I(`Cant stop recording, recordingState irregular: ${this.recordingState}`);this.setRecordingState("STOPPING");try{const t=_i(),e=this.activeRecordingsCount===1?"IDLE":"RECORDING";await t.stopRecording(this.recordingId),this.recordingId=void 0,this.setRecordingState(e)}catch(t){throw w.error("DyteRecording::stop::recording_failed_to_stop",{error:t}),this.setRecordingState("RECORDING"),new I("Error while stopping recording")}}async getRecordingId(){if(!p(this,hd).permissions.canRecord)throw w.error("DyteRecording::getRecordingId::permission_denied"),new I("User does not have permission to stop recording");try{const t=_i(),{status:e,id:i}=await t.getActiveRecording();e==="RECORDING"&&(this.recordingState="RECORDING",this.recordingId=i)}catch(t){throw w.error("DyteRecording::getRecordingId::unable_to_get_recording_id",{error:t}),new I("Unable to get recording")}}},hd=new WeakMap,LE);Tv([S.trace("DyteRecording.start")],_l.prototype,"start",1);Tv([S.trace("DyteRecording.stop")],_l.prototype,"stop",1);Tv([S.trace("DyteRecording.getRecordingId")],_l.prototype,"getRecordingId",1);_l=Tv([Ii(t=>{throw new I(t.message,"1000")})],_l);var iY=Object.defineProperty,sY=Object.getOwnPropertyDescriptor,rY=(t,e,i,s)=>{for(var r=s>1?void 0:s?sY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&iY(e,i,r),r};class bI{constructor(e){v(this,"recording"),this.recording=new _l(e),this.setupEvents()}setupEvents(){T.on(E.HIVE_RECORDING_STARTED,e=>{this.recording.recordingPeerIds.push(e),this.recording.setRecordingState("RECORDING")}),T.on(E.HIVE_RECORDING_STOPPED,()=>{this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE")}),T.on(E.LEAVE_MEDIA_ROOM,()=>{this.recording.setRecordingState("IDLE")}),T.on(E.PEER_JOINED,async e=>{var i;(i=e.flags)!=null&&i.recorder&&(this.recording.recordingPeerIds.push(e.id),this.recording.setRecordingState("RECORDING"))}),T.on(E.PEER_CLOSED,e=>{this.recording.recordingPeerIds=Yz(this.recording.recordingPeerIds,e.id),this.recording.recordingPeerIds.length===0&&this.recording.setRecordingState("IDLE")}),T.onAsync(E.ROOM_JOINED,async e=>{var i;w.debug("[ROOM_JOINED] resolved request to fetch recordings.");const s=(i=e.peers)==null?void 0:i.filter(r=>{var n;return!!((n=r.flags)!=null&&n.recorder)});s.length?(this.recording.recordingPeerIds=s.map(r=>r.id),this.recording.setRecordingState("RECORDING")):(this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE"))}),T.on(E.RECORDING_STARTED,()=>{this.recording.setRecordingState("RECORDING")}),T.on(E.RECORDING_STOPPED,()=>{this.recording.recordingId=void 0,this.recording.recordingPeerIds=[],this.recording.setRecordingState("IDLE")})}}rY([S.trace("RecordingController.setupEvents")],bI.prototype,"setupEvents",1);function nY(t){let e=0,i,s;if(!t)return e;for(i=0;i<t.length;i+=1)s=t.charCodeAt(i),e=(e<<5)-e+s,e|=0;return Math.abs(e)%100+1}class aY{static hasFeature(e){var i;return(i=ee.hasFeature(e))!=null?i:!1}static getFeatureValue(e){return ee.getValue(e)}static getAllFeatures(){return ee.getAllFlags()}}class H_{constructor(e,i,s){v(this,"logger"),v(this,"features"),v(this,"browserSpecs"),v(this,"callStats"),this.logger=e,this.features=i,this.browserSpecs=Me,this.callStats=s}static init(e){return new H_(w,aY,e)}}class W_{constructor(e){v(this,"internals"),this.internals=e}static async init(){const e=H_.init(Z);return new W_(e)}}var oY=Object.defineProperty,cY=Object.getOwnPropertyDescriptor,wI=(t,e,i,s)=>{for(var r=s>1?void 0:s?cY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&oY(e,i,r),r},zu;class q_ extends Nt{constructor(e){super(),R(this,zu,void 0),v(this,"state","IDLE"),v(this,"playbackUrl"),v(this,"viewerCount"),P(this,zu,e),this.viewerCount=0}setLivestreamState(e){const i=this.state;this.state=e,i!==e&&this.emitCurrentLivestreamState()}emitCurrentLivestreamState(){this.emit("livestreamUpdate",this.state)}async start(){if(!p(this,zu).permissions.canLivestream)throw w.error("DyteLivestream::start::permission_denied"),new I("User does not have permission to start livestreaming");this.setLivestreamState("STARTING");try{const e=await _i().startLivestreaming();this.playbackUrl=e}catch(e){throw w.error("DyteRecording::stop::livestream_failed_to_start",{error:e}),this.setLivestreamState("IDLE"),new I("Error while starting livestream")}}async stop(){if(!p(this,zu).permissions.canLivestream)throw w.error("DyteLivestream::stop::permission_denied"),new I("User does not have permission to stop livestreaming");if(this.state!=="LIVESTREAMING")throw w.error("DyteLivestream::stop::inconsistent_state"),new I("Livestream not started yet");try{this.setLivestreamState("STOPPING"),await _i().stopLivestreaming()}catch(e){throw w.error("DyteLivestream::stop::livestream_failed_to_stop",{error:e}),this.setLivestreamState("STOPPING"),new I("Error while stopping livestream")}}}zu=new WeakMap;wI([S.trace("livestream.start")],q_.prototype,"start",1);wI([S.trace("livestream.stop")],q_.prototype,"stop",1);var dY=Object.defineProperty,lY=Object.getOwnPropertyDescriptor,uY=(t,e,i,s)=>{for(var r=s>1?void 0:s?lY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&dY(e,i,r),r},ic,sc;class _I{constructor(e,i){v(this,"livestream"),R(this,ic,void 0),R(this,sc,void 0),this.livestream=new q_(e),P(this,sc,i),this.setupEvents()}async fetchInitialLivestreamingState(){const e=_i(),{status:i,playbackUrl:s}=await e.getActiveLivestream();this.livestream.playbackUrl=s,i==="LIVE"&&this.livestream.setLivestreamState("LIVESTREAMING")}setupEvents(){p(this,sc).on(ne.startedLivestream,e=>{this.livestream.playbackUrl=e.playbackUrl,this.livestream.setLivestreamState("LIVESTREAMING")}),p(this,sc).on(ne.stoppedLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),p(this,sc).on(ne.erroredLivestream,()=>{this.livestream.setLivestreamState("IDLE"),this.livestream.playbackUrl=void 0}),p(this,sc).on(ne.roomPeerCount,e=>{this.livestream.viewerCount=e.count,this.livestream.emit("viewerCountUpdate",e.count)}),T.on(E.PEER_JOINED,async e=>{var i;((i=e.flags)==null?void 0:i.hiddenParticipant)===!0&&e.recorderType==="LIVESTREAMER"&&(P(this,ic,e.id),this.livestream.setLivestreamState("LIVESTREAMING"))}),T.on(E.PEER_CLOSED,e=>{e.id===p(this,ic)&&(P(this,ic,void 0),this.livestream.setLivestreamState("IDLE"))}),T.onAsync(E.ROOM_JOINED,async e=>{var i,s;w.debug("[ROOM_JOINED] resolved request to fetch livestream.");const r=(i=e.peers)==null?void 0:i.filter(n=>{var a;return((a=n.flags)==null?void 0:a.hiddenParticipant)===!0&&n.recorderType==="LIVESTREAMER"});r.length?(P(this,ic,r&&((s=r[0])==null?void 0:s.id)),this.livestream.setLivestreamState("LIVESTREAMING")):(P(this,ic,void 0),this.livestream.setLivestreamState("IDLE"))}),T.onAsync(E.LEAVE_MEDIA_ROOM,async()=>{if(!this.livestream.playbackUrl){w.info("Fetching livestreaming state on leave stage");try{await this.fetchInitialLivestreamingState()}catch{}}}),T.onAsync(E.SOCKET_SERVICE_ROOM_JOINED,async()=>{try{await this.fetchInitialLivestreamingState()}catch{}})}}ic=new WeakMap,sc=new WeakMap;uY([S.trace("LivestreamController.setupEvents")],_I.prototype,"setupEvents",1);const Ze=or(f_().permissions);var ae,Fu;const E1=class{constructor(t,e){if(R(this,ae,void 0),R(this,Fu,void 0),!t)throw w.error("DytePermissionsPreset::load_preset_permissions_failed"),new I("Could not load preset permissions.");P(this,Fu,e),P(this,ae,t)}static fromResponse(t,e){return new E1(t,e)}static default(t){return new E1(Ze,t)}get stageEnabled(){var t;return((t=p(this,ae))==null?void 0:t.stageEnabled)||p(this,Fu)===it.Webinar||p(this,Fu)===it.Livestream}get stageAccess(){var t,e;return((t=p(this,ae))==null?void 0:t.stageAccess)===qe.Allowed||p(this,ae).media.audio.canProduce===qe.Allowed||p(this,ae).media.video.canProduce===qe.Allowed||p(this,ae).media.screenshare.canProduce===qe.Allowed?qe.Allowed:((e=p(this,ae))==null?void 0:e.stageAccess)===qe.CanRequest||p(this,ae).media.audio.canProduce===qe.CanRequest||p(this,ae).media.video.canProduce===qe.CanRequest||p(this,ae).media.screenshare.canProduce===qe.CanRequest?qe.CanRequest:qe.NotAllowed}get acceptWaitingRequests(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.acceptWaitingRequests)!=null?e:Ze.acceptWaitingRequests}get requestProduceVideo(){var t,e,i;return((i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)===qe.CanRequest}get requestProduceAudio(){var t,e,i;return((i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.audio)==null?void 0:i.canProduce)===qe.CanRequest}get requestProduceScreenshare(){var t,e,i;return((i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)===qe.CanRequest}get canAllowParticipantAudio(){var t,e,i,s;return((e=(t=p(this,ae))==null?void 0:t.canAcceptProductionRequests)!=null?e:Ze.canAcceptProductionRequests)||((s=(i=p(this,ae))==null?void 0:i.disableParticipantAudio)!=null?s:Ze.disableParticipantAudio)}get canAllowParticipantScreensharing(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.canAcceptProductionRequests)!=null?e:Ze.canAcceptProductionRequests}get canAllowParticipantVideo(){var t,e,i,s;return((e=(t=p(this,ae))==null?void 0:t.canAcceptProductionRequests)!=null?e:Ze.canAcceptProductionRequests)||((s=(i=p(this,ae))==null?void 0:i.disableParticipantVideo)!=null?s:Ze.disableParticipantVideo)}get canDisableParticipantAudio(){return this.canAllowParticipantAudio}get canDisableParticipantVideo(){return this.canAllowParticipantVideo}get kickParticipant(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.kickParticipant)!=null?e:Ze.kickParticipant}get pinParticipant(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.pinParticipant)!=null?e:Ze.pinParticipant}get canRecord(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.canRecord)!=null?e:Ze.canRecord}get waitingRoomType(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.waitingRoomType)!=null?e:Ze.waitingRoomType}get waitingRoomBehaviour(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.waitingRoomType)!=null?e:Ze.waitingRoomType}get plugins(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.plugins)!=null?e:Ze.plugins}get polls(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.polls)!=null?e:Ze.polls}get produceVideo(){var t,e,i,s;return(s=(i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)!=null?s:Ze.media.video.canProduce}get requestProduce(){return p(this,ae).media.audio.canProduce===qe.CanRequest||p(this,ae).media.video.canProduce===qe.CanRequest||p(this,ae).media.screenshare.canProduce===qe.CanRequest}get canProduceVideo(){var t,e,i,s;return(s=(i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.canProduce)!=null?s:Ze.media.video.canProduce}get produceScreenshare(){var t,e,i,s;return(s=(i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)!=null?s:Ze.media.screenshare.canProduce}get canProduceScreenshare(){var t,e,i,s;return(s=(i=(e=(t=p(this,ae))==null?void 0:t.media)==null?void 0:e.screenshare)==null?void 0:i.canProduce)!=null?s:Ze.media.screenshare.canProduce}get produceAudio(){var t;return(t=p(this,ae).media.audio.canProduce)!=null?t:Ze.media.audio.canProduce}get canProduceAudio(){var t;return(t=p(this,ae).media.audio.canProduce)!=null?t:Ze.media.audio.canProduce}get chatPublic(){var t,e,i;return(i=(e=(t=p(this,ae))==null?void 0:t.chat)==null?void 0:e.public)!=null?i:Ze.chat.public}get chatPrivate(){var t,e,i;return(i=(e=(t=p(this,ae))==null?void 0:t.chat)==null?void 0:e.private)!=null?i:Ze.chat.private}get chatChannel(){var t,e,i;return(i=(e=(t=p(this,ae))==null?void 0:t.chat)==null?void 0:e.channel)!=null?i:Ze.chat.channel}get chatMessage(){var t,e,i;return(i=(e=(t=p(this,ae))==null?void 0:t.chat)==null?void 0:e.message)!=null?i:Ze.chat.message}get connectedMeetings(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.connectedMeetings)!=null?e:Ze==null?void 0:Ze.connectedMeetings}get hiddenParticipant(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.hiddenParticipant)!=null?e:Ze.hiddenParticipant}get showParticipantList(){var t;return(t=p(this,ae).showParticipantList)!=null?t:Ze.showParticipantList}get canChangeParticipantRole(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.canChangeParticipantPermissions)!=null?e:Ze.canChangeParticipantPermissions}get canChangeParticipantPermissions(){var t,e;return(e=(t=p(this,ae))==null?void 0:t.canChangeParticipantPermissions)!=null?e:Ze.canChangeParticipantPermissions}get canChangeTheme(){return!1}get canPresent(){return p(this,ae).media.audio.canProduce===qe.Allowed||p(this,ae).media.video.canProduce===qe.Allowed||p(this,ae).media.screenshare.canProduce===qe.Allowed}get acceptPresentRequests(){return p(this,ae).canAcceptProductionRequests}get canEditDisplayName(){var t;return(t=p(this,ae).canEditDisplayName)!=null?t:!1}get maxScreenShareCount(){return 1}get isRecorder(){return p(this,ae).isRecorder}get canSpotlight(){return p(this,ae).canSpotlight}get canLivestream(){return p(this,ae).canLivestream}get transcriptionEnabled(){return p(this,ae).transcriptionEnabled}get isV2(){return!0}};let NE=E1;ae=new WeakMap,Fu=new WeakMap;const pY=or(f_());var tn,Pd,Vu;const T1=class{constructor(t){if(R(this,tn,void 0),R(this,Pd,void 0),R(this,Vu,void 0),!t)throw new I("Could not load preset.");P(this,tn,t.config),P(this,Pd,t.ui||or(f_().ui)),P(this,Vu,t.permissions.plugins.config)}static fromResponse(t){return new T1(t)}static default(){return new T1(pY)}get setupScreen(){return{isEnabled:!0}}get waitingRoom(){return{isEnabled:!0}}get controlBar(){return{isEnabled:!0,elements:{chat:!0,fullscreen:!0,invite:!1,layout:!1,participants:!0,plugins:!0,polls:!0,reactions:!1,screenshare:!0}}}get header(){return{isEnabled:!0,elements:{logo:p(this,Pd).designTokens.logo,timer:!0,title:!0,participantCount:!0,changeLayout:!1}}}get pipMode(){return!0}get viewType(){return p(this,tn).viewType}get maxVideoStreams(){return p(this,tn).maxVideoStreams}get maxScreenShareCount(){return p(this,tn).maxScreenshareCount}get plugins(){return[]}get disabledPlugins(){return Object.keys(p(this,Vu)).filter(t=>p(this,Vu)[t].disabled)}get designTokens(){return p(this,Pd).designTokens}get configDiff(){return p(this,Pd).configDiff}get mediaConstraints(){var t,e,i,s,r,n,a,o,c,u,l,h,g,m,f,_;return{video:{quality:(s=(i=(e=(t=p(this,tn))==null?void 0:t.media)==null?void 0:e.video)==null?void 0:i.quality)!=null?s:fs.video.quality,frameRate:(o=(a=(n=(r=p(this,tn))==null?void 0:r.media)==null?void 0:n.video)==null?void 0:a.frameRate)!=null?o:fs.video.frameRate},screenshare:{quality:(h=(l=(u=(c=p(this,tn))==null?void 0:c.media)==null?void 0:u.screenshare)==null?void 0:l.quality)!=null?h:fs.screenshare.quality,frameRate:(_=(f=(m=(g=p(this,tn))==null?void 0:g.media)==null?void 0:m.screenshare)==null?void 0:f.frameRate)!=null?_:fs.screenshare.frameRate}}}get isV2(){return!0}};let UE=T1;tn=new WeakMap,Pd=new WeakMap,Vu=new WeakMap;const hY={setup_screen:{is_enabled:!1},alone_here:{is_enabled:!1},waiting_room:{is_enabled:!1,enable_preview:!0},control_bar:{is_enabled:!0,elements:{plugins:!0,screenshare:!0,invite:!1,participants:!0,chat:!0,reactions:!1,polls:!0,fullscreen:!0,layout:!0}},header:{is_enabled:!0,elements:{logo:"",timer:!0,title:!0,participant_count:!0,change_layout:!0}},pip_mode:!0,auto_tune:!0,grid:{multi:{max_video_count:9,video_fit:"cover"},single:{max_video_count:6,video_fit:"cover"},default_view:"MULTI"},colors:{primary:"#2160FD",secondary:"#1A1A1A",text:"#EEEEEE",background:"#1A1A1A",text_primary:"#EEEEEE",video_background:"#1A1A1A"},controls:{pip_toggle:!1},plugins:[]},gY=or(hY);var Hi,Bu,Hu,dm,lm;const C1=class{constructor(t){if(R(this,Hi,void 0),R(this,Bu,void 0),R(this,Hu,void 0),R(this,dm,void 0),R(this,lm,[]),!t)throw new I("Could not load preset theme.");P(this,Hi,t),P(this,Bu,1),P(this,Hu,it.GroupCall)}static fromResponse(t){return new C1(t)}static default(){return new C1(gY)}configFromPermissions(t){var e,i,s,r,n,a,o,c,u,l,h,g;P(this,Bu,t.maxScreenshareCount||1),P(this,Hu,t.viewType),P(this,dm,{video:{quality:(s=(i=(e=t==null?void 0:t.produce)==null?void 0:e.video)==null?void 0:i.quality)!=null?s:fs.video.quality,frameRate:(a=(n=(r=t==null?void 0:t.produce)==null?void 0:r.video)==null?void 0:n.frameRate)!=null?a:fs.video.frameRate},screenshare:{quality:(u=(c=(o=t==null?void 0:t.produce)==null?void 0:o.screenshare)==null?void 0:c.quality)!=null?u:fs.screenshare.quality,frameRate:(g=(h=(l=t==null?void 0:t.produce)==null?void 0:l.screenshare)==null?void 0:h.frameRate)!=null?g:fs.screenshare.frameRate}})}setDisabledPlugins(t){const e=p(this,Hi).plugins;e&&e.length>0&&P(this,lm,t.filter(i=>!e.includes(i)))}get setupScreen(){return p(this,Hi).setupScreen}get aloneHere(){return p(this,Hi).aloneHere}get waitingRoom(){return p(this,Hi).waitingRoom}get controlBar(){return p(this,Hi).controlBar}get header(){return p(this,Hi).header}get pipMode(){var t;return((t=p(this,Hi).controls)==null?void 0:t.pipToggle)||p(this,Hi).pipMode}get viewType(){return p(this,Hu)}get autoTune(){return p(this,Hi).autoTune}get grid(){return p(this,Hi).grid}get maxVideoStreams(){return{mobile:this.grid.multi.maxVideoCount>6?6:this.grid.multi.maxVideoCount,desktop:this.grid.multi.maxVideoCount}}get maxScreenShareCount(){return p(this,Bu)}get colors(){return p(this,Hi).colors}get controls(){return p(this,Hi).controls}get plugins(){return p(this,Hi).plugins}get disabledPlugins(){return p(this,lm)}get mediaConstraints(){return p(this,dm)}get isV2(){return!1}};let $E=C1;Hi=new WeakMap,Bu=new WeakMap,Hu=new WeakMap,dm=new WeakMap,lm=new WeakMap;var um;class mY{constructor(e){R(this,um,void 0),P(this,um,e)}on(e,i){let s;e===ne.roomPeerCount?s=Bx.fromBinary.bind(Bx):s=Xx.fromBinary.bind(Xx),p(this,um).on(e,({payload:r})=>{const n=s(r);return i(n)})}}um=new WeakMap;var Zs;class fY{constructor(e){R(this,Zs,void 0),P(this,Zs,e)}async getStageRequests(){const{payload:e}=await p(this,Zs).sendMessagePromise(ne.getStageRequests);return e?t0.fromBinary(e):{stageRequests:[]}}requestAccess(){p(this,Zs).sendMessage(ne.requestStageAccess)}cancelRequestAccess(){p(this,Zs).sendMessage(ne.cancelStageRequest)}async grantAccess(e){const i={userIds:e};await p(this,Zs).sendMessagePromise(ne.grantStageAccess,VG.toBinary(i))}async denyAccess(e){const i={userIds:e};await p(this,Zs).sendMessagePromise(ne.denyStageAccess,HG.toBinary(i))}joinStage(){return p(this,Zs).sendMessage(ne.joinStage)}leaveStage(e){const i={userIds:[e]};return p(this,Zs).sendMessage(ne.leaveStage,tE.toBinary(i))}kick(e){const i={userIds:e};return p(this,Zs).sendMessagePromise(ne.leaveStage,tE.toBinary(i))}on(e,i){let s;switch(e){case ne.grantStageAccess:case ne.denyStageAccess:{s=void 0;break}case ne.getStagePeers:{s=eE.fromBinary.bind(eE);break}case ne.getStageRequests:case ne.requestStageAccess:case ne.cancelStageRequest:{s=t0.fromBinary.bind(t0);break}}p(this,Zs).on(e,({payload:r,id:n})=>{if(!r||!s)return i(void 0,n);const a=s(r);return i(a,n)})}}Zs=new WeakMap;var vY=Object.defineProperty,yY=Object.getOwnPropertyDescriptor,qc=(t,e,i,s)=>{for(var r=s>1?void 0:s?yY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&vY(e,i,r),r},_r,kr,tt,pm,Sr,sn,xr,rn;class xo extends Nt{constructor(e,i,s,r,n,a){super(),R(this,xr),R(this,_r,void 0),R(this,kr,void 0),R(this,tt,void 0),R(this,pm,void 0),R(this,Sr,void 0),R(this,sn,void 0),v(this,"status"),P(this,_r,r),P(this,tt,i),P(this,pm,s),P(this,sn,a),P(this,kr,e),P(this,Sr,n)}async getAccessRequests(){if(p(this,Sr)===it.Livestream){if(!p(this,kr))throw new I("You do not have permissions for getStageRequests");const{stageRequests:e}=await p(this,_r).getStageRequests();return{stageRequests:e}}return{stageRequests:p(this,pm).joined.toArray().filter(e=>e.stageStatus===bi.REQUESTED_TO_JOIN_STAGE).map(e=>({displayName:e.name,userId:e.userId,peerId:e.id}))}}async requestAccess(){if(!p(this,tt).permissions.stageEnabled)throw w.error("DyteStage::stage_disabled"),new I("Stage is disabled");if(this.status!=="OFF_STAGE")throw new I(`Unable to request access you are currently ${this.status}`);if(p(this,Sr)===it.Livestream){if(p(this,kr)){Pe(this,xr,rn).call(this,"ACCEPTED_TO_JOIN_STAGE");return}p(this,_r).requestAccess(),Pe(this,xr,rn).call(this,"REQUESTED_TO_JOIN_STAGE")}else{if(!p(this,tt).roomJoined)throw new I("Can`t request to join stage without joining room");if(p(this,kr)){Pe(this,xr,rn).call(this,"ACCEPTED_TO_JOIN_STAGE");return}if(p(this,tt).permissions.stageAccess===qe.NotAllowed)throw w.error("DyteStage::requestGoToStage::permission_denied"),new I("User does not have permission to go on stage");if(this.status!=="OFF_STAGE")return;try{Pe(this,xr,rn).call(this,"REQUESTED_TO_JOIN_STAGE"),await p(this,sn).requestToJoinStage(B3.PRESENT)}catch{Pe(this,xr,rn).call(this,"OFF_STAGE")}}}async cancelRequestAccess(){if(!p(this,tt).permissions.stageEnabled)throw w.error("DyteStage::stage_disabled"),new I("Stage is disabled");if(p(this,Sr)===it.Livestream)p(this,_r).cancelRequestAccess();else{if(!p(this,tt).roomJoined)throw new I("Can`t request to join stage without joining room");if(p(this,tt).stageStatus!==bi.REQUESTED_TO_JOIN_STAGE)return;await p(this,sn).withdrawRequestToJoinStage()}Pe(this,xr,rn).call(this,"OFF_STAGE")}grantAccess(e){if(!p(this,tt).permissions.stageEnabled)throw w.error("DyteStage::stage_disabled"),new I("Stage is disabled");if(p(this,Sr)===it.Livestream){if(!p(this,kr))throw new I("You do not have permissions for grantAccess");return p(this,_r).grantAccess(e)}if(!p(this,tt).roomJoined)throw new I("Can`t rejectRequestToJoinStage for participant without joining room");return p(this,sn).grantStageAccess(e)}denyAccess(e){if(!p(this,tt).permissions.stageEnabled)throw w.error("DyteStage::stage_disabled"),new I("Stage is disabled");if(p(this,Sr)===it.Livestream){if(!p(this,kr))throw new I("You do not have permissions for denyAccess");return p(this,_r).denyAccess(e)}if(!p(this,tt).roomJoined)throw new I("Can`t rejectRequestToJoinStage for participant without joining room");return p(this,sn).denyStageAccess(e)}async join(){if(p(this,Sr)===it.Livestream){if(!p(this,kr)&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw new I(`Unable to join stage you are currently ${this.status}`);if(p(this,kr)&&this.status==="ON_STAGE")throw new I("You are already on stage.");p(this,_r).joinStage(),await T.emitAsync(E.JOIN_MEDIA_ROOM)}else{if(!p(this,tt).roomJoined)throw new I("Can`t join stage without joining room");if(p(this,tt).permissions.stageAccess!==qe.Allowed&&this.status!=="ACCEPTED_TO_JOIN_STAGE")throw w.error("DyteStage::join::permission_denied"),new I("User does not have permission to join stage");await p(this,sn).startPresenting(),p(this,tt).emit("stageJoined"),Pe(this,xr,rn).call(this,"ON_STAGE")}}async leave(){var e;if(!p(this,tt).permissions.stageEnabled)throw w.error("DyteStage::stage_disabled"),new I("Stage is disabled");if(p(this,Sr)===it.Livestream){if(!(this.status==="ON_STAGE"||this.status==="ACCEPTED_TO_JOIN_STAGE"))throw new I(`Unable to leave stage you are currently ${this.status}`);p(this,tt).setIsPinned(!1),Pe(this,xr,rn).call(this,"OFF_STAGE"),(e=oi())!=null&&e.roomJoined&&await T.emitAsync(E.LEAVE_MEDIA_ROOM);try{await p(this,tt).disableScreenShare(),await p(this,tt).disableVideo(),await p(this,tt).disableAudio(),p(this,tt).destructMediaHandler()}catch(i){w.error("DyteStage.leaveStage.DisableMediaError",{error:i})}p(this,_r).leaveStage(p(this,tt).userId)}else{if(!p(this,tt).roomJoined)throw new I("Can`t leave stage without joining room");await p(this,tt).disableScreenShare(),await p(this,tt).disableAudio(),await p(this,tt).disableVideo(),await p(this,sn).stopPresenting(),Pe(this,xr,rn).call(this,"OFF_STAGE")}}async kick(e){if(p(this,Sr)===it.Livestream){if(!p(this,kr))throw new I("You do not have permissions for kick");return p(this,_r).kick(e)}if(!p(this,tt).roomJoined)throw new I("Can`t kick participant without joining room");return p(this,sn).kickPeerFromStage(e)}}_r=new WeakMap,kr=new WeakMap,tt=new WeakMap,pm=new WeakMap,Sr=new WeakMap,sn=new WeakMap,xr=new WeakSet,rn=function(t){this.status!==t&&(this.status=t,T.emit(E.SET_STAGE_STATUS,t),this.emit("stageStatusUpdate",t))};qc([S.trace("DyteStage.getStageRequests")],xo.prototype,"getAccessRequests",1);qc([S.trace("DyteStage.requestAccess")],xo.prototype,"requestAccess",1);qc([S.trace("DyteStage.cancelRequestAccess")],xo.prototype,"cancelRequestAccess",1);qc([S.trace("DyteStage.grantAccess")],xo.prototype,"grantAccess",1);qc([S.trace("DyteStage.denyAccess")],xo.prototype,"denyAccess",1);qc([S.trace("DyteStage.joinStage")],xo.prototype,"join",1);qc([S.trace("DyteStage.leaveStage")],xo.prototype,"leave",1);var bY=Object.defineProperty,wY=Object.getOwnPropertyDescriptor,_Y=(t,e,i,s)=>{for(var r=s>1?void 0:s?wY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&bY(e,i,r),r},Rd,Pt,Id,rc,hm,Wu;class kI{constructor(e,i,s,r,n,a){v(this,"stage"),R(this,Rd,void 0),R(this,Pt,void 0),R(this,Id,void 0),R(this,rc,void 0),R(this,hm,0),R(this,Wu,void 0),this.stage=new xo(i,s,r,e,n,a),P(this,rc,e),P(this,Rd,i),P(this,Wu,n),P(this,Pt,s),P(this,Wu,n),P(this,Id,r),this.setupEvents(),this.setupWebinarMigrationEvents()}setupEvents(){p(this,rc).on(ne.grantStageAccess,()=>{p(this,Rd)||(this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"))}),p(this,rc).on(ne.denyStageAccess,()=>{p(this,Rd)||(this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"))}),p(this,rc).on(ne.getStagePeers,e=>{this.stage.status==="ON_STAGE"&&!e.stagePeers.includes(p(this,Pt).userId)&&this.stage.leave()}),p(this,rc).on(ne.getStageRequests,e=>{var i;if(!p(this,Rd))return;const s=(i=e==null?void 0:e.stageRequests)!=null?i:[];p(this,hm)<s.length&&s.length>0&&this.stage.emit("newStageRequest",{count:s.length}),P(this,hm,s.length),this.stage.emit("stageAccessRequestUpdate",s)}),T.onAsync(E.SOCKET_SERVICE_ROOM_JOINED,async e=>{var i;switch((i=e.peer)==null?void 0:i.stageType){case $s.OFF_STAGE:{this.setStageStatus("OFF_STAGE");break}case $s.ON_STAGE:{p(this,Pt).config.viewType==="LIVESTREAM"&&await T.emitAsync(E.JOIN_MEDIA_ROOM);break}case $s.APPROVED_STAGE:{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE");break}case $s.REQUESTED_STAGE:{this.setStageStatus("REQUESTED_TO_JOIN_STAGE");break}default:this.setStageStatus("OFF_STAGE")}p(this,Pt).emit("socketServiceRoomJoined")}),T.onAsync(E.ROOM_JOINED,async e=>{this.setStageStatus(e.stageStatus)}),T.on(E.SELF_ROOM_JOINED,async()=>{if(p(this,Wu)===it.Livestream){this.setStageStatus("ON_STAGE");return}p(this,Pt).permissions.stageAccess===qe.Allowed&&await this.stage.join(),p(this,Pt).roomState="joined",p(this,Pt).emit("roomJoined")}),T.on(E.REQUEST_TO_JOIN_STAGE_ACCEPTED,()=>{this.stage.emit("stageRequestApproved"),this.setStageStatus("ACCEPTED_TO_JOIN_STAGE"),p(this,Pt).emit("joinStageRequestAccepted")}),T.on(E.REQUEST_TO_JOIN_STAGE_REJECTED,()=>{this.stage.emit("stageRequestRejected"),this.setStageStatus("OFF_STAGE"),p(this,Pt).emit("joinStageRequestRejected")}),T.on(E.PEER_REJECTED_TO_JOIN_STAGE,({id:e})=>{!e||e===p(this,Pt).id||T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.OFF_STAGE})}),T.on(E.PEER_ADDED_TO_STAGE,({id:e})=>{!e||e===p(this,Pt).id||(T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.ACCEPTED_TO_JOIN_STAGE}),this.stage.emit("stageAccessRequestUpdate"))}),T.on(E.PEER_STARTED_PRESENTING,({id:e})=>{!e||e===p(this,Pt).id||T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.ON_STAGE})}),T.on(E.PEER_REMOVED_FROM_STAGE,({id:e})=>{!e||e===p(this,Pt).id||(T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.OFF_STAGE}),p(this,Id).pinned.delete(e))}),T.on(E.PEER_STOPPED_PRESENTING,({id:e})=>{!e||e===p(this,Pt).id||(T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.OFF_STAGE}),p(this,Id).pinned.delete(e))}),T.on(E.PEER_REQUESTED_TO_JOIN_STAGE,async({id:e})=>{!e||e===p(this,Pt).id||(await T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.REQUESTED_TO_JOIN_STAGE}),this.stage.emit("stageAccessRequestUpdate"))}),T.on(E.STAGE_REQUESTS_UPDATED,async()=>{this.stage.emit("stageAccessRequestUpdate")}),T.on(E.PEER_WITHDRAWN_REQUEST_TO_JOIN_STAGE,async({id:e})=>{!e||e===p(this,Pt).id||(await T.emitAsync(E.UPDATE_PEER_STAGE_STATUS,{id:e,status:bi.OFF_STAGE}),this.stage.emit("stageAccessRequestUpdate"))}),T.on(E.REMOVED_FROM_STAGE,async()=>{this.setStageStatus("OFF_STAGE"),await p(this,Pt).disableScreenShare(),await p(this,Pt).disableVideo(),await p(this,Pt).disableAudio(),p(this,Pt).destructMediaHandler(),p(this,Pt).emit("removedFromStage")})}setupWebinarMigrationEvents(){T.on(E.SET_WEBINAR_STAGE_STATUS,async e=>{this.stage.status!==e&&(this.stage.status=e,this.stage.emit("stageStatusUpdate",e))}),T.onAsync(E.REQUEST_TO_JOIN_STAGE,async()=>this.stage.requestAccess()),T.onAsync(E.WITHDRAW_REQUEST_TO_JOIN_STAGE,async()=>this.stage.cancelRequestAccess()),T.onAsync(E.LEAVE_STAGE,async()=>this.stage.leave()),T.onAsync(E.JOIN_STAGE,async()=>this.stage.join()),T.onAsync(E.ACCEPT_JOIN_STAGE_REQUEST,async({userId:e})=>this.stage.grantAccess([e])),T.onAsync(E.REMOVE_FROM_STAGE,async({userId:e})=>{this.stage.kick([e])}),T.onAsync(E.REJECT_REQUEST_TO_JOIN_STAGE,async({userId:e})=>this.stage.denyAccess([e])),T.onAsync(E.ACCEPT_ALL_REQUESTS_TO_JOIN_STAGE,async({data:e})=>{const i=e.map(({id:s})=>p(this,Id).joined.get(s).userId);this.stage.grantAccess(i)})}setStageStatus(e){this.stage.status!==e&&(this.stage.status=e,T.emit(E.SET_STAGE_STATUS,e),this.stage.emit("stageStatusUpdate",e))}}Rd=new WeakMap,Pt=new WeakMap,Id=new WeakMap,rc=new WeakMap,hm=new WeakMap,Wu=new WeakMap;_Y([S.trace("DyteStage.setupEvents")],kI.prototype,"setupEvents",1);var kY=Object.defineProperty,SY=Object.getOwnPropertyDescriptor,G_=(t,e,i,s)=>{for(var r=s>1?void 0:s?SY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&kY(e,i,r),r},nc;class Cv{constructor(e){R(this,nc,void 0),P(this,nc,e)}getPolls(){return p(this,nc).sendMessagePromise($n.getPolls)}createPoll(e,i,s=!1,r=!1){const n={anonymous:s,hideVotes:r,question:e,options:i};return p(this,nc).sendMessage($n.createPoll,ZG.toBinary(n))}votePoll(e,i){const s={index:i,pollId:e};return p(this,nc).sendMessage($n.votePoll,eJ.toBinary(s))}on(e,i){let s,r;switch(e){case $n.updatePoll:case $n.createPoll:case $n.votePoll:{s=i0.fromBinary.bind(i0),r=i0.create();break}}p(this,nc).on(e,({payload:n})=>{let a=r;try{a=s(n)}catch(o){w.error("pollSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}nc=new WeakMap;G_([S.trace("PollSocketHandler.getPolls")],Cv.prototype,"getPolls",1);G_([S.trace("PollSocketHandler.createPoll")],Cv.prototype,"createPoll",1);G_([S.trace("PollSocketHandler.votePoll")],Cv.prototype,"votePoll",1);class xY{constructor(){v(this,"battery"),v(this,"init",async()=>{try{"getBattery"in navigator&&(this.battery=await navigator.getBattery(),this.battery.addEventListener("chargingchange",this.updateChargeInfo),this.battery.addEventListener("levelchange",this.updateLevelInfo),this.updateLevelInfo(),this.updateChargeInfo())}catch(e){w.error("Error getting battery",e)}}),v(this,"updateChargeInfo",()=>{var e;w.log(`Battery charging? ${(e=this.battery)!=null&&e.charging?"Yes":"No"}`)}),v(this,"updateLevelInfo",()=>{if(!this.battery){w.log("Battery level: Not known");return}w.log(`Battery level: ${this.battery.level*100}%`)}),v(this,"cleanup",()=>{var e,i;"getBattery"in navigator&&((e=this.battery)==null||e.removeEventListener("chargingchange",this.updateChargeInfo),(i=this.battery)==null||i.removeEventListener("levelchange",this.updateLevelInfo))})}}const jE=new xY;var Ka,$a,gm,P1;class EY extends Nt{constructor(e){super(),R(this,gm),R(this,Ka,void 0),R(this,$a,void 0),P(this,Ka,e),P(this,$a,!1)}get mediaPermission(){return p(this,Ka).mediaPermissions.audio}async getTrackMetadata(e=!1){if(!on.track){if(!e)return null;const i=await Pe(this,gm,P1).call(this);on.setTrack(i)}return on.getTrackMetadata()}async startTrackAnalysis(e=!1){if(p(this,$a))return!0;P(this,$a,!0);let i=await on.startTrackAnalysis();if(!i&&e){const s=await Pe(this,gm,P1).call(this);on.setTrack(s),i=await on.startTrackAnalysis()}return i||P(this,$a,!1),i}stopTrackAnalysis(){return p(this,$a)&&(P(this,$a,!1),on.stopTrackAnalysis()),!0}}Ka=new WeakMap,$a=new WeakMap,gm=new WeakSet,P1=async function(){var t;try{const e=p(this,Ka).getCurrentDevices(),i=(t=e==null?void 0:e.audio)==null?void 0:t.deviceId;let s={audio:!0};i&&(s=It.getAudioConstraints({audioDeviceId:i}));const r=await It.getAudioTrack(s);return p(this,Ka).mediaPermissions.audio="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:p(this,Ka).mediaPermissions.audio,kind:"audio"}),r}catch(e){const i=_v("audio",e.name,e.message);throw p(this,Ka).mediaPermissions.audio=i,T.emit(E.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:"audio"}),new I("Failed to fetch audio track","1700")}};var ac;class TY extends Nt{constructor(){super(),R(this,ac,void 0),P(this,ac,!1)}async getNetworkMetadata(){return new Promise(e=>{Z.onSafeInitialization(()=>{Z.onPreCallTestResults(i=>{e(i.connectionInfo)}),Z.startPreCallTest()})})}startNetworkAnalysis(){return P(this,ac,eo.collectSendTransportStats()&&eo.collectRecvTransportStats()),p(this,ac)}stopNetworkAnalysis(){return P(this,ac,!(eo.stopStatsCollection("send")&&eo.stopStatsCollection("receive"))),p(this,ac)}}ac=new WeakMap;var Ad,Ps;class CY extends Nt{constructor(e){super(),R(this,Ad,void 0),R(this,Ps,void 0),P(this,Ad,e),P(this,Ps,{audio:!1,video:!1})}get mediaPermission(){return p(this,Ad).mediaPermissions.screenshare}getAudioTrackMetaData(){var e;return(e=p(this,Ad).screenShareTracks)!=null&&e.audio?xc.getTrackMetadata():null}getVideoTrackMetaData(){var e;return(e=p(this,Ad).screenShareTracks)!=null&&e.video?lo.getTrackMetadata():null}async startAudioTrackAnalysis(){if(p(this,Ps).audio)return!0;const e=await xc.startTrackAnalysis();return p(this,Ps).audio=e,p(this,Ps).audio}async startVideoTrackAnalysis(){if(p(this,Ps).video)return!0;const e=await lo.startTrackAnalysis();return p(this,Ps).video=e,p(this,Ps).video}stopAudioTrackAnalysis(){return p(this,Ps)&&(p(this,Ps).audio=!1,xc.stopTrackAnalysis()),!0}stopVideoTrackAnalysis(){return p(this,Ps)&&(p(this,Ps).video=!1,lo.stopTrackAnalysis()),!0}}Ad=new WeakMap,Ps=new WeakMap;var Wn,Ln,ja,R1,SI;class PY extends Nt{constructor(e){super(),R(this,R1),R(this,Wn,void 0),R(this,Ln,void 0),R(this,ja,void 0),v(this,"preview"),P(this,Wn,e),P(this,Ln,!1),P(this,ja,!1)}get mediaPermission(){return p(this,Wn).mediaPermissions.video}getTrackMetadata(){return p(this,Wn).videoTrack?null:As.getTrackMetadata()}async startTrackAnalysis({preview:e}={preview:!1}){return p(this,Ln)?!0:await As.startTrackAnalysis()?((e||this.preview)&&P(this,ja,!0),P(this,Ln,!0),!0):!1}stopTrackAnalysis(){p(this,Ln)&&(As.stopTrackAnalysis(),P(this,Ln,!1),p(this,ja)&&P(this,ja,!1))}async startPreview(){let{track:e}=As;return e||(e=await Pe(this,R1,SI).call(this)),this.preview||(As.setTrack(e),this.preview=!0,As.preview=!0),e}stopPreview(){p(this,Ln)&&p(this,ja)&&this.stopTrackAnalysis(),this.preview=!1,As.preview=!1,As.cleanup()}cleanup(){p(this,Ln)&&p(this,ja)&&this.stopTrackAnalysis(),this.preview=!1,As.preview=!1}}Wn=new WeakMap,Ln=new WeakMap,ja=new WeakMap,R1=new WeakSet,SI=async function(){var t;try{const e=p(this,Wn).getCurrentDevices(),i=(t=e==null?void 0:e.video)==null?void 0:t.deviceId;let s={video:{width:{ideal:1280},height:{ideal:720}}};i&&(s=It.getVideoConstraints({videoDeviceId:i}));const r=await It.getVideoTrack(s);return p(this,Wn).mediaPermissions.video="ACCEPTED",T.emit(E.MEDIA_PERMISSION_UPDATE,{message:p(this,Wn).mediaPermissions.video,kind:"video"}),r}catch(e){const i=_v("video",e.name,e.message);throw p(this,Wn).mediaPermissions.video=i,T.emit(E.MEDIA_PERMISSION_ERROR,{message:i,constraints:e.constraints,kind:"video"}),new I("Failed to fetch video track","1700")}};class RY{constructor(e){v(this,"audio"),v(this,"video"),v(this,"screenshare"),v(this,"network"),this.audio=new EY(e),this.video=new PY(e),this.screenshare=new CY(e),this.network=new TY}}const v0=t=>{const{type:e,id:i,transport:s,timestamp:r,currentRoundTripTime:n,bytesSent:a,bytesReceived:o,kind:c,jitter:u,packetsLost:l,packetSendDelay:h}=t;switch(e){case"candidate-pair":return{type:e,id:i,transport:s,timestamp:r,rtt:n,bytesSent:a,bytesReceived:o};case"inbound-rtp":return{type:e,id:i,transport:s,timestamp:r,kind:c,jitter:u,packetsLost:l,bytesReceived:o};default:return{type:e,id:i,transport:s,timestamp:r,kind:c,packetSendDelay:h,bytesSent:a}}};class IY{constructor(e){v(this,"troubleshooter"),v(this,"self"),this.troubleshooter=new RY(e),this.self=e,this.setupEvents()}setupEvents(){T.on(E.AUDIO_TRACK_CHANGED,()=>{var e;this.self.audioTrack&&(e=this.self.audioTrack)!=null&&e.enabled&&on.setTrack(this.self.audioTrack)}),T.on(E.VIDEO_TRACK_CHANGED,()=>{var e;this.self.videoTrack&&As.setTrack((e=this.self.videoTrack)==null?void 0:e.clone())}),T.on(E.SCREENSHARE_TRACK_CHANGED,()=>{var e,i,s,r,n;(e=this.self.screenShareTracks)!=null&&e.audio&&this.self.screenShareTracks.audio.enabled?xc.setTrack((i=this.self.screenShareTracks)==null?void 0:i.audio):xc.cleanup(),(s=this.self.screenShareTracks)!=null&&s.video?lo.setTrack((n=(r=this.self.screenShareTracks)==null?void 0:r.video)==null?void 0:n.clone()):lo.cleanup()}),T.on(E.AUDIO_TRACK_ANALYSIS,e=>{this.troubleshooter.audio.emit("audioTrackStats",e)}),T.on(E.AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"ended"})}),T.on(E.AUDIO_TRACK_CREATED,()=>{this.troubleshooter.audio.emit("audioTrackUpdate",{status:"live"})}),T.on(E.SCREENSHARE_AUDIO_TRACK_ANALYSIS,e=>{this.troubleshooter.screenshare.emit("audioTrackStats",e)}),T.on(E.SCREENSHARE_AUDIO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"ended"})}),T.on(E.SCREENSHARE_AUDIO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("audioTrackUpdate",{status:"live"})}),T.on(E.SCREENSHARE_VIDEO_TRACK_ANALYSIS,e=>{this.troubleshooter.screenshare.emit("videoTrackStats",e)}),T.on(E.SCREENSHARE_VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.screenshare.stopVideoTrackAnalysis(),lo.cleanup()}),T.on(E.SCREENSHARE_VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"ended"})}),T.on(E.SCREENSHARE_VIDEO_TRACK_CREATED,()=>{this.troubleshooter.screenshare.emit("videoTrackUpdate",{status:"live"})}),T.on(E.VIDEO_TRACK_ANALYSIS,e=>{this.troubleshooter.video.emit("videoTrackStats",e)}),T.on(E.VIDEO_TRACK_ANALYSIS_ERROR,()=>{this.troubleshooter.video.stopTrackAnalysis(),this.troubleshooter.video.startTrackAnalysis(),this.troubleshooter.video.stopPreview()}),T.on(E.VIDEO_TRACK_CLOSED,()=>{this.troubleshooter.video.cleanup(),this.troubleshooter.video.emit("videoTrackUpdate",{status:"ended"})}),T.on(E.VIDEO_TRACK_CREATED,()=>{this.troubleshooter.video.emit("videoTrackUpdate",{status:"live"})}),T.on(E.CANDIDATE_PEER_UPDATE,e=>{this.troubleshooter.network.emit("connectionDelayStats",v0(e))}),T.on(E.INBOUND_RTP_UPDATE,e=>{this.troubleshooter.audio.emit("audioConsumptionStats",v0(e))}),T.on(E.OUTBOUND_RTP_UPDATE,e=>{this.troubleshooter.audio.emit("audioProductionStats",v0(e))}),T.on(E.SEND_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"ended"})}),T.on(E.RECV_TRANSPORT_CLOSED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"ended"})}),T.on(E.SEND_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"send",status:"live"})}),T.on(E.RECV_TRANSPORT_CREATED,()=>{this.troubleshooter.audio.emit("connectionUpdate",{transport:"receive",status:"live"})})}}const oc=class{static handleConnectedRoomsDumpRaw({payload:t}){var e;const i=vq.fromBinary(t),s=i.meetings.map(r=>{var n;return{id:r.id,title:r.title,participants:(n=r.participants)!=null?n:[]}});return{parentMeeting:{id:i.parentMeeting.id,title:i.parentMeeting.title,participants:(e=i.parentMeeting.participants)!=null?e:[]},meetings:s}}static handleTransferPeerRaw({payload:t}){const e=Bq.fromBinary(t);return{authToken:e.authToken,meetingId:e.meetingId}}static handleMovedPeerRaw({payload:t}){const e=R3.fromBinary(t);return{meetingId:e.meetingId,customParticipantId:e.customParticipantId}}static handleConnectedRoomsUpdatedRaw({payload:t}){return qx.fromBinary(t).payloads.map(e=>({id:e.id,title:e.title}))}static handleConnectedRoomsDeletedRaw({payload:t}){return Mq.fromBinary(t).payloads}static async getConnectedRoomsDump(){const t=await oc.socketService.sendMessagePromise(ne.getConnectedRoomsDump);return oc.handleConnectedRoomsDumpRaw(t)}static async createConnectedRooms(t){const{payload:e}=await oc.socketService.sendMessagePromise(ne.createConnectedRooms,_q.toBinary({payloads:t}));return qx.fromBinary(e).payloads.map(i=>({id:i.id,title:i.title}))}static async updateConnectedRooms(t){}static async disableConnectedRooms(t){const e=t.map(s=>({id:s})),i=await oc.socketService.sendMessagePromise(ne.deleteConnectedRooms,Aq.toBinary({payloads:e}));return oc.handleConnectedRoomsDeletedRaw(i)}static async movePeersBetweenRooms(t){try{const e=await oc.socketService.sendMessagePromise(ne.movePeers,jq.toBinary({sourceMeetingId:t.sourceMeetingId,destinationMeetingId:t.destinationMeetingId,participants:t.participants}));return new TextDecoder().decode(e.payload).includes("error")?{success:!1,error:"failed to move participants"}:{success:!0}}catch(e){return{success:!1,error:e}}}};let Ft=oc;v(Ft,"socketService"),v(Ft,"currentMeetingId");const AY={codecs:[{kind:"audio",mimeType:"audio/opus",clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc",parameter:""}],parameters:{},preferredPayloadType:100},{kind:"video",mimeType:"video/VP8",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"x-google-start-bitrate":1e3},preferredPayloadType:101},{kind:"video",mimeType:"video/rtx",preferredPayloadType:102,clockRate:9e4,parameters:{apt:101},rtcpFeedback:[]},{kind:"video",mimeType:"video/VP9",clockRate:9e4,rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],parameters:{"profile-id":0,"x-google-start-bitrate":1e3},preferredPayloadType:103},{kind:"video",mimeType:"video/rtx",preferredPayloadType:104,clockRate:9e4,parameters:{apt:103},rtcpFeedback:[]},{kind:"video",mimeType:"video/H264",clockRate:9e4,parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f","x-google-start-bitrate":1e3},rtcpFeedback:[{type:"nack",parameter:""},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb",parameter:""},{type:"transport-cc",parameter:""}],preferredPayloadType:105},{kind:"video",mimeType:"video/rtx",preferredPayloadType:106,clockRate:9e4,parameters:{apt:105},rtcpFeedback:[]}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",preferredId:13,preferredEncrypt:!1,direction:"sendrecv"}]};var mm;class DY{constructor(e){R(this,mm,void 0),P(this,mm,e)}on(e,i){let s,r;switch(e){case ne.transcript:{s=Zy.fromBinary.bind(Zy),r=Zy.create();break}default:{w.debug("AISocketHandler switch case hit default, event not accounted for.");break}}p(this,mm).on(e,({payload:n})=>{let a=r;try{a=s(n)}catch(o){w.error("chatSocketHandler::on::binary_decode_error",{error:o})}return i(a)})}}mm=new WeakMap;var MY=Object.defineProperty,OY=Object.getOwnPropertyDescriptor,fh=(t,e,i,s)=>{for(var r=s>1?void 0:s?OY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&MY(e,i,r),r};const fm=class{constructor(t,e,i,s,r,n,a,o,c,u,l,h,g){v(this,"apiBase"),v(this,"chatController"),v(this,"metaController"),v(this,"participantController"),v(this,"pluginController"),v(this,"pollController"),v(this,"remoteController"),v(this,"selfController"),v(this,"recordingController"),v(this,"livestreamController"),v(this,"internalsController"),v(this,"stageController"),v(this,"troubleshooterController"),this.apiBase=t,this.metaController=e,this.selfController=i,this.pluginController=s,this.participantController=r,this.chatController=n,this.pollController=a,this.remoteController=o,this.recordingController=c,this.livestreamController=l,this.internalsController=u,this.stageController=h,this.troubleshooterController=g}static async init(t,e){var i,s,r,n,a,o,c,u,l,h,g,m;const{authToken:f}=t;let _="https://api.dyte.io";t.apiBase&&(_=t.apiBase),t.baseURI&&(_=`https://api.${t.baseURI}`);const k={chat:!0,participant:!0,plugin:!0,poll:!0,self:!0,meta:!0,permissions:!0,theme:!0,tracing:!0,devTools:{logs:!1},internals:!0,stage:!0,...t==null?void 0:t.modules};T.reset(),W3(),jp.cleanup();const y=xJ({authToken:f,baseURL:_});y.setHeader("dyte-tracing-id",e),y.setPeerId(e),y.setRoomName(t.roomName);const{roomName:b}=t,x=we.isV2AuthToken?we.meetingId:b,C=new XR,D=C.load({routerRtpCapabilities:AY}),M=y.getRoomNodeData({roomName:x,peerId:e}),L=we.isV2AuthToken?void 0:y.getUserPreset(b),V=await y.getUserDetails(),se=we.isV2AuthToken?V.participant.organizationId:V.organizationId;S.meetingMetadata.userId=we.isV2AuthToken?V.participant.id:V.id,S.meetingMetadata.organizationId=se;const Q=nY(x);await ee.identify(`${Gb.PEER}_${e}`,JSON.parse(JSON.stringify({entity:Gb.PEER,clientId:se,isAnonUser:!se,sdkVersion:dh,meetingHash:Q,roomName:x,...Me.getDeviceInfo()}))),EQ(),w.info("flagsmith::allFlags",{flags:JSON.stringify(ee.getAllFlags())},!0),jE.init();let te=we.isV2AuthToken?UE.default():$E.default(),Ae=we.isV2AuthToken?NE.default(te.viewType):Fx.default(),ze=we.isV2AuthToken?V.preset.name:void 0;if(Zz({...t,modules:k,apiBase:_,organizationId:se,viewType:te.viewType}),k.permissions||k.theme){const Cn=await L;Cn&&(ze=Cn.presetName),k.theme&&(te=we.isV2AuthToken?UE.fromResponse(V.preset):$E.fromResponse(Cn.theme),we.isV2AuthToken||te.configFromPermissions(Cn.permissions)),k.permissions&&(Ae=we.isV2AuthToken?NE.fromResponse(V.preset.permissions,te.viewType):Fx.fromResponse(Cn.permissions))}const{roomNodeUrl:Xe,meetingTitle:xt,useHiveMedia:Ut}=await M;await D;const cs=X3(te),z=ee.hasFeature(ie.CUSTOM_PING_PONG),W=[];Ut&&W.push("HIVE"),z&&W.push("PING");const Y=C_(te.viewType,W),Ne=y.getPlugins(Y),nt=te.viewType!==it.Chat;b3({...t,roomName:x,peerId:e,meetingTitle:xt,roomNodeUrl:Xe,device:C});const wt=await fm.createSocketServiceAndRoomNodeClient({...t,roomName:x,peerId:e,meetingTitle:xt,roomNodeUrl:Xe,capabilities:W,shouldInitializeRoomNode:cs,viewType:te.viewType,device:C}),pi=oi();let Jr,ki,Po,Ak,Et,Gv,Dk,Mk,Ok,Lk,Nk,Uk;const $k=new gr(wt),dM=new Oc(wt),lM=new Cv(wt),uM=new XQ(wt),pM=new mY(wt),hM=new fY(wt),gM=new DY(wt);Ft.socketService=wt;const jk=jp.create(wt);(i=k.self)==null||i?([Et]=await Promise.all([Ol.init(wt,jk,V,Ae,te,ze),pi instanceof Ie?pi.setupTransports():null]),y.setOrganizationId(Et.self.organizationId)):pi instanceof Ie&&await pi.setupTransports();const mM=ee.hasFeature(ie.TROUBLESHOOTING);if(Et&&mM&&(Uk=new IY(Et.self)),(s=k.participant)==null||s){if(!Et)throw new I("The participant module cannot be initialized without the `self` module");ki=new xn(Et.self,jk,W)}if((r=k.chat)==null||r){if(!Et)throw new I("The chat module cannot be initialized without the `self` module");Jr=await Qn.init($k,dM,Et.self,ki.participants,W)}if(nt&&((n=k.plugin)==null||n)){if(!Et)throw new I("The plugin module cannot be initialized without the `self` module");if(!ki)throw new I("The plugin module cannot be initialized without the `participant` module");const Cn=await Ne;Po=await gh.init(Cn,uM,$k,Jr==null?void 0:Jr.chat,Et.self,ki.participants,W)}if(nt&&((a=k.poll)==null||a)){if(!Et)throw new I("The poll cannot be initialized without the `self` module");Ak=await rI.init(Et.self,lM,W)}if((o=k.meta)==null||o){if(!Et)throw new I("The meta module cannot be initialized without the `self` module");Gv=new iI(Et.self,wt,gM,xt)}if((c=k.remoteControl)==null||c){if(!Et)throw new I("The remote controller cannot be initialized without the `self` module");Dk=new MQ(Et.self,ki.participants)}if(nt&&((u=k.recording)==null||u)){if(!Et)throw new I("The recording controller cannot be initialized without the `self` module");Mk=new bI(Et.self)}if(((l=k.internals)==null||l)&&(Lk=await W_.init()),te.viewType===it.Livestream&&((h=k.livestream)==null||h)){if(!Et)throw new I("The livestream controller cannot be initialized without the `self` module");ee.hasFeature(ie.LIVESTREAM)&&(Ok=new _I(Et.self,pM))}if(nt&&((g=k.stage)==null||g)){if(!Et)throw new I("The stage client cannot be initialized without the `self` module");Nk=new kI(hM,FK(Ae),Et.self,ki.participants,Gv.meta.viewType,pi)}if(k3(te.viewType,W)||((m=t.overrides)==null?void 0:m.chat_socket_server)==="socket-service")try{await wt.connect()}catch(Cn){w.error("[Socket Service] Failed to connect to socket server:",{error:Cn})}return new fm(_,Gv,Et,Po,ki,Jr,Ak,Dk,Mk,Lk,Ok,Nk,Uk)}static async createSocketServiceAndRoomNodeClient(t){const e=fm.createSocketService(t);return t.shouldInitializeRoomNode?t.capabilities.includes("HIVE")?(await nK({...t,roomName:t.roomName,peerId:t.peerId,socket:e}),e):(await H3({...t,roomName:t.roomName,peerId:t.peerId}),e):e}static createSocketService(t){const{peerId:e,roomName:i,authToken:s,capabilities:r}=t;return new mh({peerId:e,roomName:i,authToken:s,capabilities:r})}async joinRoom(){return this.selfController.joinRoom()}async leaveRoom(t="left"){return jE.cleanup(),this.selfController.leaveRoom(t)}};let Ll=fm;fh([S.trace("Controller.joinRoom")],Ll.prototype,"joinRoom",1);fh([S.trace("Controller.leaveRoom")],Ll.prototype,"leaveRoom",1);fh([S.trace("Controller.init")],Ll,"init",1);fh([S.trace("Controller.createSocketServiceAndRoomNodeClient")],Ll,"createSocketServiceAndRoomNodeClient",1);fh([S.trace("Controller.createSocketService")],Ll,"createSocketService",1);var vm;class LY extends Nt{constructor(e){super(),R(this,vm,void 0),v(this,"meetings",[]),v(this,"parentMeeting",null),P(this,vm,e.self)}get supportsConnectedMeetings(){return p(this,vm).id!==""&&we.isV2AuthToken&&ee.hasFeature(ie.CONNECTED_MEETINGS)}get isActive(){return this.meetings.length!==0}get currentMeetingId(){return Ft.currentMeetingId}validateConnectedMeetingsAction(){if(!this.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
						Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`)}async getConnectedMeetings(){return this.validateConnectedMeetingsAction(),await Ft.getConnectedRoomsDump()}async createMeetings(e){return this.validateConnectedMeetingsAction(),(await Ft.createConnectedRooms(e)).map(i=>({id:i.id,title:i.title}))}async updateMeetings(e){this.validateConnectedMeetingsAction(),await Ft.updateConnectedRooms(e.map(i=>({meetingId:i.id,title:i.title})))}async deleteMeetings(e){this.validateConnectedMeetingsAction();const i=this.meetings.map(s=>e.includes(s.id)&&s.participants.length!==0?this.moveParticipants(s.id,this.parentMeeting.id,s.participants.map(r=>r.id)):Promise.resolve());return await Promise.all(i),await Ft.disableConnectedRooms(e)}async moveParticipants(e,i,s){this.validateConnectedMeetingsAction();const r=new Map;[...this.parentMeeting.participants,...this.meetings.flatMap(a=>a.participants)].forEach(a=>r.set(a.id,a));const n=await Ft.movePeersBetweenRooms({sourceMeetingId:e,destinationMeetingId:i,participants:s.map(a=>({id:a}))});return n.success&&(i===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.concat(s.map(a=>r.get(a)))),e===this.parentMeeting.id&&(this.parentMeeting.participants=this.parentMeeting.participants.filter(a=>!s.includes(a.id))),this.meetings=this.meetings.map(a=>{if(i===a.id){const o=a.participants.concat(s.map(c=>r.get(c)));return{...a,participants:o}}if(e===a.id){const o=a.participants.filter(c=>!s.includes(c.id));return{...a,participants:o}}return a})),n}}vm=new WeakMap;var NY=Object.defineProperty,UY=Object.getOwnPropertyDescriptor,J_=(t,e,i,s)=>{for(var r=s>1?void 0:s?UY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&NY(e,i,r),r},gd,wu,y0;const za=(y0=class{constructor(t,e){v(this,"connectedMeetings"),R(this,gd,void 0),R(this,wu,void 0),P(this,gd,e),this.connectedMeetings=new LY(t),this.setCurrentMeeting(t)}static init(t,e){return za.instance||(za.instance=new za(t,e)),za.instance.connectedMeetings.supportsConnectedMeetings&&(za.instance.setupEvents(),t.self.once("roomJoined",()=>za.instance.getConnectedMeetings())),za.instance}setCurrentMeeting(t){P(this,wu,t),Ft.currentMeetingId=t.meta.roomName}getConnectedMeetings(){this.connectedMeetings.getConnectedMeetings()}setupEvents(){Ft.socketService&&(Ft.socketService.on(ne.getConnectedRoomsDump,this.handleConnectedRoomsDump.bind(this)),Ft.socketService.on(ne.transferPeer,this.handleTransferPeer.bind(this)),Ft.socketService.on(ne.movedPeer,this.handleMovedPeer.bind(this)),Ft.socketService.on(ne.connectedRoomsUpdated,this.handleConnectedRoomsUpdated.bind(this)),Ft.socketService.on(ne.connectedRoomsDeleted,this.handleConnectedRoomsDeleted.bind(this)))}handleTransferPeer(t){const e=Ft.handleTransferPeerRaw(t);return this.switchMeeting(e)}async switchMeeting({authToken:t,meetingId:e}){if(!this.connectedMeetings.supportsConnectedMeetings)throw new Error(`You are not allowed to perform this action.
								Please connect with Dyte team to move you to V2 APIs & to enable connected meetings.`);this.connectedMeetings.emit("changingMeeting",e);const i=p(this,wu).self.videoEnabled;await p(this,wu).leaveRoom("connected-meeting"),Ft.socketService=void 0;const s=await xI.init({authToken:t,apiBase:p(this,gd).apiBase,defaults:{...p(this,gd).defaults,video:i,audio:!1},modules:p(this,gd).modules});return this.connectedMeetings.emit("meetingChanged",s),this.setCurrentMeeting(s),s}handleConnectedRoomsDump(t){const e=Ft.handleConnectedRoomsDumpRaw(t);this.connectedMeetings.meetings=e.meetings.map(i=>({id:i.id,title:i.title,participants:i.participants||[]})),this.connectedMeetings.parentMeeting={id:e.parentMeeting.id,title:e.parentMeeting.title,participants:e.parentMeeting.participants},this.emitStateUpdate()}handleMovedPeer(t){return Ft.handleMovedPeerRaw(t)}handleConnectedRoomsUpdated(t){const e=Ft.handleConnectedRoomsUpdatedRaw(t),i=new Map;this.connectedMeetings.meetings.forEach(s=>{i.set(s.id,s)}),e.forEach(s=>{i.has(s.id)?i.get(s.id).title=s.title:i.set(s.id,{...s,participants:[]})}),this.connectedMeetings.meetings=Array.from(i.values()),this.emitStateUpdate()}handleConnectedRoomsDeleted(t){const e=Ft.handleConnectedRoomsDeletedRaw(t).map(i=>i.id);this.connectedMeetings.meetings=this.connectedMeetings.meetings.filter(i=>!e.includes(i.id))}emitStateUpdate(){this.connectedMeetings.emit("stateUpdate",{meetings:this.connectedMeetings.meetings,parentMeeting:this.connectedMeetings.parentMeeting})}},gd=new WeakMap,wu=new WeakMap,v(y0,"instance"),y0);let Pv=za;J_([S.trace("ConnectedMeetingsController.getConnectedMeetings")],Pv.prototype,"getConnectedMeetings",1);J_([S.trace("ConnectedMeetingsController.setupEvents")],Pv.prototype,"setupEvents",1);J_([S.trace("ConnectedMeetingsController.switchMeeting")],Pv.prototype,"switchMeeting",1);const _u={},K_={executeWithLock({methodName:t,lockName:e,timeout:i}){return(s,r,n)=>{const a=n.value;return n.value=function(...o){if(_u[e]){const l=new Error(`Unsupported concurrent calls on Dyte method: ${t}.`);throw l.name="UnsupportedConcurrentMethodExecution",w.error("DyteLocker::UnsupportedConcurrentMethodExecution",{error:{stack:l.stack},dyteLocker:{methodName:t,lockName:e}}),l}_u[e]=!0;const c=setTimeout(()=>delete _u[e],i),u=a.apply(this,o);return Promise.resolve(u).then(()=>{delete _u[e],clearTimeout(c)}).catch(()=>{delete _u[e],clearTimeout(c)}),u},n}}};var $Y=Object.defineProperty,jY=Object.getOwnPropertyDescriptor,Nl=(t,e,i,s)=>{for(var r=s>1?void 0:s?jY(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(r=(s?a(e,i,r):a(r))||r);return s&&r&&$Y(e,i,r),r},mi,mg,b0,zE,FE;let aa=(FE=class{constructor(t){R(this,b0),R(this,mi,void 0),R(this,mg,void 0),P(this,mi,t)}static async init(t){var e,i,s,r,n,a;kV((e=t.overrides)!=null?e:{}),Me.init();const o=th();window.__zone_symbol__DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION=!0,S.init(o,(s=(i=t.modules)==null?void 0:i.tracing)!=null?s:!0),w.info("DyteClient::init::options",{dyteClientInitOptions:{...t,authToken:`${(r=t.authToken)==null?void 0:r.slice(0,10)}...${(n=t.authToken)==null?void 0:n.slice(-10)}`}}),!navigator.isReactNative&&typeof window<"u"&&(window.addEventListener("error",l=>{var h;!((h=l.filename)!=null&&h.includes("localhost"))&&l.lineno!==0&&w.error("window::error",{error:l.error},!0)}),window.addEventListener("unhandledrejection",l=>{var h,g,m,f,_,k,y,b;w.error("window::unhandledrejection",{error:l==null?void 0:l.reason,networkCall:{url:(g=(h=l==null?void 0:l.reason)==null?void 0:h.config)==null?void 0:g.url,baseURL:(f=(m=l==null?void 0:l.reason)==null?void 0:m.config)==null?void 0:f.baseURL,method:(k=(_=l==null?void 0:l.reason)==null?void 0:_.config)==null?void 0:k.method,status:(y=l==null?void 0:l.reason)==null?void 0:y.status,statusText:(b=l==null?void 0:l.reason)==null?void 0:b.statusText}},!0)}),window.addEventListener("offline",()=>{w.info("window::offline")}),window.addEventListener("online",()=>{w.info("window::online")})),_V(t.authToken,t.roomName),S.meetingMetadata.roomName=we.isV2AuthToken?we.meetingId:t.roomName;const c=await Ll.init(t,o),u=new aa(c);return Pe(a=u,b0,zE).call(a,t),u}async joinRoom(){return p(this,mi).joinRoom()}async leaveRoom(t){return p(this,mi).leaveRoom(t)}async join(){return p(this,mi).joinRoom()}async leave(t){return p(this,mi).leaveRoom(t)}get participants(){var t;return(t=p(this,mi).participantController)==null?void 0:t.participants}get self(){var t;return(t=p(this,mi).selfController)==null?void 0:t.self}get meta(){var t;return(t=p(this,mi).metaController)==null?void 0:t.meta}get plugins(){var t;return(t=p(this,mi).pluginController)==null?void 0:t.plugins}get chat(){var t;return(t=p(this,mi).chatController)==null?void 0:t.chat}get polls(){var t;return(t=p(this,mi).pollController)==null?void 0:t.polls}get remote(){var t;return(t=p(this,mi).remoteController)==null?void 0:t.remote}get connectedMeetings(){var t;return(t=p(this,mg))==null?void 0:t.connectedMeetings}get recording(){var t;return(t=p(this,mi).recordingController)==null?void 0:t.recording}get livestream(){var t;return(t=p(this,mi).livestreamController)==null?void 0:t.livestream}get stage(){var t;return(t=p(this,mi).stageController)==null?void 0:t.stage}get troubleshoot(){var t;return(t=p(this,mi).troubleshooterController)==null?void 0:t.troubleshooter}get __internals__(){var t;return(t=p(this,mi).internalsController)==null?void 0:t.internals}},mi=new WeakMap,mg=new WeakMap,b0=new WeakSet,zE=function(t){P(this,mg,Pv.init(this,t))},FE);Nl([Ii(t=>{throw new I(t.message,"0002")}),K_.executeWithLock({methodName:"meeting.joinRoom",lockName:"DyteClient.joinRoom",timeout:3e3})],aa.prototype,"joinRoom",1);Nl([Ii(t=>{throw new I(t.message,"0003")})],aa.prototype,"leaveRoom",1);Nl([Ii(t=>{throw new I(t.message,"0002")}),K_.executeWithLock({methodName:"meeting.join",lockName:"DyteClient.join",timeout:3e3})],aa.prototype,"join",1);Nl([Ii(t=>{throw new I(t.message,"0003")})],aa.prototype,"leave",1);Nl([Ii(t=>{throw new I(t.message,"0001")}),K_.executeWithLock({methodName:"DyteClient.init",lockName:"DyteClient.init",timeout:3e3})],aa,"init",1);aa=Nl([Ii(t=>{throw new I(t.message,"0000")})],aa);const xI=aa;var zY=Object.defineProperty,FY=(t,e,i)=>e in t?zY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,w0=(t,e,i)=>(FY(t,typeof e!="symbol"?e+"":e,i),i),EI={exports:{}},vh={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var VE=Object.getOwnPropertySymbols,VY=Object.prototype.hasOwnProperty,BY=Object.prototype.propertyIsEnumerable;function HY(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function WY(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var s=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if(s.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(n){r[n]=n}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}WY();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qY=iw,TI=60103;vh.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var BE=Symbol.for;TI=BE("react.element"),vh.Fragment=BE("react.fragment")}var GY=qY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JY=Object.prototype.hasOwnProperty,KY={key:!0,ref:!0,__self:!0,__source:!0};function CI(t,e,i){var s,r={},n=null,a=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)JY.call(e,s)&&!KY.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:TI,type:t,key:n,ref:a,props:r,_owner:GY.current}}vh.jsx=CI;vh.jsxs=CI;EI.exports=vh;const QY=EI.exports.jsx;class YY{constructor(e){w0(this,"meeting"),w0(this,"l"),w0(this,"onUpdate",()=>{this.l.forEach(C=>{C()})});var i,s,r,n,a,o,c,u,l,h,g,m,f,_,k,y,b,x;this.meeting=e,this.l=new Set,(i=this.meeting.self)==null||i.addListener("*",this.onUpdate),(s=this.meeting.meta)==null||s.addListener("*",this.onUpdate),(r=this.meeting.participants)==null||r.addListener("*",this.onUpdate),(a=(n=this.meeting.participants)==null?void 0:n.joined)==null||a.addListener("*",this.onUpdate),(c=(o=this.meeting.participants)==null?void 0:o.active)==null||c.addListener("*",this.onUpdate),(l=(u=this.meeting.participants)==null?void 0:u.waitlisted)==null||l.addListener("*",this.onUpdate),(h=this.meeting.stage)==null||h.addListener("*",this.onUpdate),(g=this.meeting.livestream)==null||g.addListener("*",this.onUpdate),(m=this.meeting.chat)==null||m.addListener("*",this.onUpdate),(f=this.meeting.plugins)==null||f.all.addListener("*",this.onUpdate),(_=this.meeting.recording)==null||_.addListener("*",this.onUpdate),(k=this.meeting.connectedMeetings)==null||k.addListener("*",this.onUpdate),(y=this.meeting.spotlight)==null||y.addListener("*",this.onUpdate),(b=this.meeting.remote)==null||b.addListener("*",this.onUpdate),(x=this.meeting.polls)==null||x.addListener("*",this.onUpdate)}clean(){var e,i,s,r,n,a,o,c,u,l,h,g,m,f,_,k,y,b;(e=this.meeting.self)==null||e.removeListener("*",this.onUpdate),(i=this.meeting.meta)==null||i.removeListener("*",this.onUpdate),(s=this.meeting.participants)==null||s.removeListener("*",this.onUpdate),(n=(r=this.meeting.participants)==null?void 0:r.joined)==null||n.removeListener("*",this.onUpdate),(o=(a=this.meeting.participants)==null?void 0:a.active)==null||o.removeListener("*",this.onUpdate),(u=(c=this.meeting.participants)==null?void 0:c.waitlisted)==null||u.removeListener("*",this.onUpdate),(l=this.meeting.stage)==null||l.removeListener("*",this.onUpdate),(h=this.meeting.livestream)==null||h.removeListener("*",this.onUpdate),(g=this.meeting.chat)==null||g.removeListener("*",this.onUpdate),(m=this.meeting.plugins)==null||m.all.removeListener("*",this.onUpdate),(f=this.meeting.recording)==null||f.removeListener("*",this.onUpdate),(_=this.meeting.connectedMeetings)==null||_.removeListener("*",this.onUpdate),(k=this.meeting.spotlight)==null||k.removeListener("*",this.onUpdate),(y=this.meeting.remote)==null||y.removeListener("*",this.onUpdate),(b=this.meeting.polls)==null||b.removeListener("*",this.onUpdate)}addListener(e){this.l.add(e)}removeListener(e){this.l.delete(e)}}const Q_=Dt.exports.createContext({meeting:void 0,updates:void 0});function ZY({value:t,children:e,fallback:i}){const[s,r]=Dt.exports.useState(),n=Dt.exports.useRef();return Dt.exports.useEffect(()=>(t&&r(new YY(t)),()=>{var a;(a=n.current)==null||a.clean()}),[t]),QY(Q_.Provider,{value:{meeting:t,updates:s},children:t?e:i})}const Y_=()=>{const{meeting:t}=Dt.exports.useContext(Q_);if(!t)throw new Error("useDyteMeeting must be used within the DyteProvider");return{meeting:t}},XY=t=>{const e=Dt.exports.useRef(!1),[i,s]=Dt.exports.useState(),r=t==null?void 0:t.resetOnLeave;return[i,async a=>{if(!e.current){e.current=!0;try{const o=await xI.init(a);return s(o),r&&o.self.on("roomLeft",()=>s(void 0)),o}catch{}finally{e.current=!1}}}]},eZ=(t,e)=>!!(t!==e||Array.isArray(t)&&Array.isArray(e)&&t.length!==e.length),hf=t=>{const{meeting:e,updates:i}=Dt.exports.useContext(Q_);if(!e)throw new Error("useDyteSelector must be used within the DyteProvider");const s=Dt.exports.useRef(t(e)),[,r]=Dt.exports.useReducer(n=>n+1,0);return Dt.exports.useEffect(()=>{const n=e&&t(e),a=()=>{const o=e&&t(e);eZ(s.current,o)&&(s.current=o,r())};return n&&typeof n=="object"&&"addListener"in n?(n.addListener("*",r),()=>{n.removeListener("*",r)}):(i==null||i.addListener(a),()=>{i==null||i.removeListener(a)})},[e,i]),s.current};var Z_={exports:{}},Rv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tZ=Dt.exports,iZ=Symbol.for("react.element"),sZ=Symbol.for("react.fragment"),rZ=Object.prototype.hasOwnProperty,nZ=tZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aZ={key:!0,ref:!0,__self:!0,__source:!0};function PI(t,e,i){var s,r={},n=null,a=null;i!==void 0&&(n=""+i),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)rZ.call(e,s)&&!aZ.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:iZ,type:t,key:n,ref:a,props:r,_owner:nZ.current}}Rv.Fragment=sZ;Rv.jsx=PI;Rv.jsxs=PI;(function(t){t.exports=Rv})(Z_);const Be=Z_.exports.jsx,pn=Z_.exports.jsxs,oZ=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),RI=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),cZ=(t,e,i={})=>{if(t instanceof Element){const s=dZ(t.classList,e,i);s!==""&&(t.className=s),Object.keys(e).forEach(r=>{if(!(r==="children"||r==="style"||r==="ref"||r==="class"||r==="className"||r==="forwardedRef"))if(r.indexOf("on")===0&&r[2]===r[2].toUpperCase()){const n=r.substring(2),a=n[0].toLowerCase()+n.substring(1);II(a)||lZ(t,a,e[r])}else t[r]=e[r],typeof e[r]==="string"&&t.setAttribute(RI(r),e[r])})}},dZ=(t,e,i)=>{const s=e.className||e.class,r=i.className||i.class,n=_0(t),a=_0(s?s.split(" "):[]),o=_0(r?r.split(" "):[]),c=[];return n.forEach(u=>{a.has(u)?(c.push(u),a.delete(u)):o.has(u)||c.push(u)}),a.forEach(u=>c.push(u)),c.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const II=t=>{if(typeof document>"u")return!0;{const e="on"+t;let i=e in document;if(!i){const s=document.createElement("div");s.setAttribute(e,"return;"),i=typeof s[e]=="function"}return i}},lZ=(t,e,i)=>{const s=t.__events||(t.__events={}),r=s[e];r&&t.removeEventListener(e,r),t.addEventListener(e,s[e]=function(a){i&&i.call(this,a)})},_0=t=>{const e=new Map;return t.forEach(i=>e.set(i,i)),e},uZ=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},pZ=(...t)=>e=>{t.forEach(i=>{uZ(i,e)})},hZ=(t,e)=>{const i=(s,r)=>Be(t,{...Object.assign({},s,{forwardedRef:r})});return i.displayName=e,iw.forwardRef(i)};var gZ=globalThis&&globalThis.__rest||function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i};const Ul=(t,e,i,s)=>{s!==void 0&&s();const r=oZ(t),n=class extends iw.Component{constructor(a){super(a),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){cZ(this.componentEl,this.props,a)}render(){const a=this.props,{children:o,forwardedRef:c,style:u,className:l,ref:h}=a,g=gZ(a,["children","forwardedRef","style","className","ref"]);let m=Object.keys(g).reduce((_,k)=>{const y=g[k];if(k.indexOf("on")===0&&k[2]===k[2].toUpperCase()){const b=k.substring(2).toLowerCase();typeof document<"u"&&II(b)&&(_[k]=y)}else{const b=typeof y;(b==="string"||b==="boolean"||b==="number")&&(_[RI(k)]=y)}return _},{});i&&(m=i(this.props,m));const f=Object.assign(Object.assign({},m),{ref:pZ(c,this.setComponentElRef),style:u});return Dt.exports.createElement(t,f,o)}static get displayName(){return r}};return e&&(n.contextType=e),hZ(n,r)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__rest;const mZ="modulepreload",fZ=function(t,e){return new URL(t,e).href},HE={},vZ=function(e,i,s){if(!i||i.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(i.map(n=>{if(n=fZ(n,s),n in HE)return;HE[n]=!0;const a=n.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!s)for(let l=r.length-1;l>=0;l--){const h=r[l];if(h.href===n&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":mZ,a||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),a)return new Promise((l,h)=>{u.addEventListener("load",l),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())},yZ="dyte-ui-kit";let Dd,AI,Iv,DI=!1,gf=!1,X_=!1,MI=!1,I1=null,A1=!1;const oa=(t,e="")=>()=>{},bZ=(t,e)=>()=>{},wZ="{visibility:hidden}.hydrated{visibility:inherit}",WE="http://www.w3.org/1999/xlink",qE={},_Z=t=>t!=null,ek=t=>(t=typeof t,t==="object"||t==="function"),d=(t,e,...i)=>{let s=null,r=null,n=null,a=!1,o=!1;const c=[],u=h=>{for(let g=0;g<h.length;g++)s=h[g],Array.isArray(s)?u(s):s!=null&&typeof s!="boolean"&&((a=typeof t!="function"&&!ek(s))&&(s=String(s)),a&&o?c[c.length-1].$text$+=s:c.push(a?mf(null,s):s),o=a)};if(u(i),e){e.key&&(r=e.key),e.name&&(n=e.name);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(g=>h[g]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,c,SZ);const l=mf(t,null);return l.$attrs$=e,c.length>0&&(l.$children$=c),l.$key$=r,l.$name$=n,l},mf=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},O={},kZ=t=>t&&t.$tag$===O,SZ={forEach:(t,e)=>t.map(GE).forEach(e),map:(t,e)=>t.map(GE).map(e).map(xZ)},GE=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),xZ=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),d(t.vtag,i,...t.vchildren||[])}const e=mf(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},EZ=(t,e)=>t!=null&&!ek(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Ts=t=>Eo(t).$hostElement$,K=(t,e,i)=>{const s=Ts(t);return{emit:r=>OI(s,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:r})}},OI=(t,e,i)=>{const s=ci.ce(e,i);return t.dispatchEvent(s),s},JE=new WeakMap,TZ=(t,e,i)=>{let s=yf.get(t);QZ&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,yf.set(t,s)},CZ=(t,e,i,s)=>{let r=LI(e);const n=yf.get(r);if(t=t.nodeType===11?t:Fr,n)if(typeof n=="string"){t=t.head||t;let a=JE.get(t),o;a||JE.set(t,a=new Set),a.has(r)||(o=Fr.createElement("style"),o.innerHTML=n,t.insertBefore(o,t.querySelector("link")),a&&a.add(r))}else t.adoptedStyleSheets.includes(n)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,n]);return r},PZ=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,r=oa("attachStyles",e.$tagName$),n=CZ(i.shadowRoot?i.shadowRoot:i.getRootNode(),e);s&10&&(i["s-sc"]=n,i.classList.add(n+"-h")),r()},LI=(t,e)=>"sc-"+t.$tagName$,KE=(t,e,i,s,r,n)=>{if(i!==s){let a=XE(t,e),o=e.toLowerCase();if(e==="class"){const c=t.classList,u=QE(i),l=QE(s);c.remove(...u.filter(h=>h&&!l.includes(h))),c.add(...l.filter(h=>h&&!u.includes(h)))}else if(e==="style"){for(const c in i)(!s||s[c]==null)&&(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in s)(!i||s[c]!==i[c])&&(c.includes("-")?t.style.setProperty(c,s[c]):t.style[c]=s[c])}else if(e!=="key")if(e==="ref")s&&s(t);else if(!a&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):XE(yh,o)?e=o.slice(2):e=o[2]+e.slice(3),i&&ci.rel(t,e,i,!1),s&&ci.ael(t,e,s,!1);else{const c=ek(s);if((a||c&&s!==null)&&!r)try{if(t.tagName.includes("-"))t[e]=s;else{const l=s==null?"":s;e==="list"?a=!1:(i==null||t[e]!=l)&&(t[e]=l)}}catch{}let u=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,u=!0),s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(WE,e):t.removeAttribute(e)):(!a||n&4||r)&&!c&&(s=s===!0?"":s,u?t.setAttributeNS(WE,e,s):t.setAttribute(e,s))}}},RZ=/\s/,QE=t=>t?t.split(RZ):[],NI=(t,e,i,s)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,n=t&&t.$attrs$||qE,a=e.$attrs$||qE;for(s in n)s in a||KE(r,s,n[s],void 0,i,e.$flags$);for(s in a)KE(r,s,n[s],a[s],i,e.$flags$)},ff=(t,e,i,s)=>{const r=e.$children$[i];let n=0,a,o,c;if(DI||(X_=!0,r.$tag$==="slot"&&(Dd&&s.classList.add(Dd+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=Fr.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=Fr.createTextNode("");else if(a=r.$elm$=Fr.createElement(r.$flags$&2?"slot-fb":r.$tag$),NI(null,r,MI),_Z(Dd)&&a["s-si"]!==Dd&&a.classList.add(a["s-si"]=Dd),r.$children$)for(n=0;n<r.$children$.length;++n)o=ff(t,r,n,a),o&&a.appendChild(o);return a["s-hn"]=Iv,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=AI,a["s-sn"]=r.$name$||"",c=t&&t.$children$&&t.$children$[i],c&&c.$tag$===r.$tag$&&t.$elm$&&Bp(t.$elm$,!1)),a},Bp=(t,e)=>{ci.$flags$|=1;const i=t.childNodes;for(let s=i.length-1;s>=0;s--){const r=i[s];r["s-hn"]!==Iv&&r["s-ol"]&&(jI(r).insertBefore(r,tk(r)),r["s-ol"].remove(),r["s-ol"]=void 0,X_=!0),e&&Bp(r,e)}ci.$flags$&=-2},UI=(t,e,i,s,r,n)=>{let a=t["s-cr"]&&t["s-cr"].parentNode||t,o;for(a.shadowRoot&&a.tagName===Iv&&(a=a.shadowRoot);r<=n;++r)s[r]&&(o=ff(null,i,r,t),o&&(s[r].$elm$=o,a.insertBefore(o,tk(e))))},$I=(t,e,i,s,r)=>{for(;e<=i;++e)(s=t[e])&&(r=s.$elm$,VI(s),gf=!0,r["s-ol"]?r["s-ol"].remove():Bp(r,!0),r.remove())},IZ=(t,e,i,s)=>{let r=0,n=0,a=0,o=0,c=e.length-1,u=e[0],l=e[c],h=s.length-1,g=s[0],m=s[h],f,_;for(;r<=c&&n<=h;)if(u==null)u=e[++r];else if(l==null)l=e[--c];else if(g==null)g=s[++n];else if(m==null)m=s[--h];else if(fg(u,g))Md(u,g),u=e[++r],g=s[++n];else if(fg(l,m))Md(l,m),l=e[--c],m=s[--h];else if(fg(u,m))(u.$tag$==="slot"||m.$tag$==="slot")&&Bp(u.$elm$.parentNode,!1),Md(u,m),t.insertBefore(u.$elm$,l.$elm$.nextSibling),u=e[++r],m=s[--h];else if(fg(l,g))(u.$tag$==="slot"||m.$tag$==="slot")&&Bp(l.$elm$.parentNode,!1),Md(l,g),t.insertBefore(l.$elm$,u.$elm$),l=e[--c],g=s[++n];else{for(a=-1,o=r;o<=c;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===g.$key$){a=o;break}a>=0?(_=e[a],_.$tag$!==g.$tag$?f=ff(e&&e[n],i,a,t):(Md(_,g),e[a]=void 0,f=_.$elm$),g=s[++n]):(f=ff(e&&e[n],i,n,t),g=s[++n]),f&&jI(u.$elm$).insertBefore(f,tk(u.$elm$))}r>c?UI(t,s[h+1]==null?null:s[h+1].$elm$,i,s,n,h):n>h&&$I(e,r,c)},fg=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,tk=t=>t&&t["s-ol"]||t,jI=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Md=(t,e)=>{const i=e.$elm$=t.$elm$,s=t.$children$,r=e.$children$,n=e.$tag$,a=e.$text$;let o;a===null?(n==="slot"||NI(t,e,MI),s!==null&&r!==null?IZ(i,s,e,r):r!==null?(t.$text$!==null&&(i.textContent=""),UI(i,null,e,r,0,r.length-1)):s!==null&&$I(s,0,s.length-1)):(o=i["s-cr"])?o.parentNode.textContent=a:t.$text$!==a&&(i.data=a)},zI=t=>{const e=t.childNodes;let i,s,r,n,a,o;for(s=0,r=e.length;s<r;s++)if(i=e[s],i.nodeType===1){if(i["s-sr"]){for(a=i["s-sn"],i.hidden=!1,n=0;n<r;n++)if(o=e[n].nodeType,e[n]["s-hn"]!==i["s-hn"]||a!==""){if(o===1&&a===e[n].getAttribute("slot")){i.hidden=!0;break}}else if(o===1||o===3&&e[n].textContent.trim()!==""){i.hidden=!0;break}}zI(i)}},Dr=[],FI=t=>{let e,i,s,r,n,a,o=0;const c=t.childNodes,u=c.length;for(;o<u;o++){if(e=c[o],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,r=e["s-sn"],a=s.length-1;a>=0;a--)i=s[a],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(YE(i,r)?(n=Dr.find(l=>l.$nodeToRelocate$===i),gf=!0,i["s-sn"]=i["s-sn"]||r,n?n.$slotRefNode$=e:Dr.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&Dr.map(l=>{YE(l.$nodeToRelocate$,i["s-sn"])&&(n=Dr.find(h=>h.$nodeToRelocate$===i),n&&!l.$slotRefNode$&&(l.$slotRefNode$=n.$slotRefNode$))})):Dr.some(l=>l.$nodeToRelocate$===i)||Dr.push({$nodeToRelocate$:i}));e.nodeType===1&&FI(e)}},YE=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",VI=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(VI)},AZ=(t,e)=>{const i=t.$hostElement$,s=t.$cmpMeta$,r=t.$vnode$||mf(null,null),n=kZ(e)?e:d(null,null,e);Iv=i.tagName,s.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},s.$attrsToReflect$.map(([a,o])=>n.$attrs$[o]=i[a])),n.$tag$=null,n.$flags$|=4,t.$vnode$=n,n.$elm$=r.$elm$=i.shadowRoot||i,Dd=i["s-sc"],AI=i["s-cr"],DI=(s.$flags$&1)!==0,gf=!1,Md(r,n);{if(ci.$flags$|=1,X_){FI(n.$elm$);let a,o,c,u,l,h,g=0;for(;g<Dr.length;g++)a=Dr[g],o=a.$nodeToRelocate$,o["s-ol"]||(c=Fr.createTextNode(""),c["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=c,o));for(g=0;g<Dr.length;g++)if(a=Dr[g],o=a.$nodeToRelocate$,a.$slotRefNode$){for(u=a.$slotRefNode$.parentNode,l=a.$slotRefNode$.nextSibling,c=o["s-ol"];c=c.previousSibling;)if(h=c["s-nr"],h&&h["s-sn"]===o["s-sn"]&&u===h.parentNode&&(h=h.nextSibling,!h||!h["s-nr"])){l=h;break}(!l&&u!==o.parentNode||o.nextSibling!==l)&&o!==l&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),u.insertBefore(o,l))}else o.nodeType===1&&(o.hidden=!0)}gf&&zI(n.$elm$),ci.$flags$&=-2,Dr.length=0}},BI=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(i=>t.$onRenderResolve$=i))},Av=(t,e)=>{if(t.$flags$|=16,t.$flags$&4){t.$flags$|=512;return}return BI(t,t.$ancestorComponent$),Ci(()=>DZ(t,e))},DZ=(t,e)=>{const i=oa("scheduleUpdate",t.$cmpMeta$.$tagName$),s=t.$lazyInstance$;let r;return e&&(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map(([n,a])=>kl(s,n,a)),t.$queuedListeners$=null),r=kl(s,"componentWillLoad")),i(),NZ(r,()=>MZ(t,s,e))},MZ=async(t,e,i)=>{const s=t.$hostElement$,r=oa("update",t.$cmpMeta$.$tagName$),n=s["s-rc"];i&&PZ(t);const a=oa("render",t.$cmpMeta$.$tagName$);OZ(t,e),n&&(n.map(o=>o()),s["s-rc"]=void 0),a(),r();{const o=s["s-p"],c=()=>LZ(t);o.length===0?c():(Promise.all(o).then(c),t.$flags$|=4,o.length=0)}},OZ=(t,e,i)=>{try{I1=e,e=e.render(),t.$flags$&=-17,t.$flags$|=2,AZ(t,e)}catch(s){q(s,t.$hostElement$)}return I1=null,null},ZE=()=>I1,LZ=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,s=oa("postUpdate",e),r=t.$lazyInstance$,n=t.$ancestorComponent$;kl(r,"componentDidRender"),t.$flags$&64?s():(t.$flags$|=64,WI(i),kl(r,"componentDidLoad"),s(),t.$onReadyResolve$(i),n||HI()),t.$onInstanceResolve$(i),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),t.$flags$&512&&sk(()=>Av(t,!1)),t.$flags$&=-517},vf=t=>{{const e=Eo(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&Av(e,!1),i}},HI=t=>{WI(Fr.documentElement),sk(()=>OI(yh,"appload",{detail:{namespace:yZ}}))},kl=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){q(s)}},NZ=(t,e)=>t&&t.then?t.then(e):e(),WI=t=>t.classList.add("hydrated"),UZ=(t,e)=>Eo(t).$instanceValues$.get(e),$Z=(t,e,i,s)=>{const r=Eo(t),n=r.$hostElement$,a=r.$instanceValues$.get(e),o=r.$flags$,c=r.$lazyInstance$;i=EZ(i,s.$members$[e][0]);const u=Number.isNaN(a)&&Number.isNaN(i),l=i!==a&&!u;if((!(o&8)||a===void 0)&&l&&(r.$instanceValues$.set(e,i),c)){if(s.$watchers$&&o&128){const h=s.$watchers$[e];h&&h.map(g=>{try{c[g](i,a,e)}catch(m){q(m,n)}})}(o&18)===2&&Av(r,!1)}},qI=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const s=Object.entries(e.$members$),r=t.prototype;if(s.map(([n,[a]])=>{a&31||i&2&&a&32?Object.defineProperty(r,n,{get(){return UZ(this,n)},set(o){$Z(this,n,o,e)},configurable:!0,enumerable:!0}):i&1&&a&64&&Object.defineProperty(r,n,{value(...o){const c=Eo(this);return c.$onInstancePromise$.then(()=>c.$lazyInstance$[n](...o))}})}),i&1){const n=new Map;r.attributeChangedCallback=function(a,o,c){ci.jmp(()=>{const u=n.get(a);if(this.hasOwnProperty(u))c=this[u],delete this[u];else if(r.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==c)return;this[u]=c===null&&typeof this[u]=="boolean"?!1:c})},t.observedAttributes=s.filter(([a,o])=>o[0]&15).map(([a,o])=>{const c=o[1]||a;return n.set(c,a),o[0]&512&&e.$attrsToReflect$.push([a,c]),c})}}return t},jZ=async(t,e,i,s,r)=>{if((e.$flags$&32)===0){{if(e.$flags$|=32,r=KZ(i),r.then){const c=bZ();r=await r,c()}r.isProxied||(i.$watchers$=r.watchers,qI(r,i,2),r.isProxied=!0);const o=oa("createInstance",i.$tagName$);e.$flags$|=8;try{new r(e)}catch(c){q(c)}e.$flags$&=-9,e.$flags$|=128,o(),GI(e.$lazyInstance$)}if(r.style){let o=r.style;const c=LI(i);if(!yf.has(c)){const u=oa("registerStyles",i.$tagName$);TZ(c,o,!!(i.$flags$&1)),u()}}}const n=e.$ancestorComponent$,a=()=>Av(e,!0);n&&n["s-rc"]?n["s-rc"].push(a):a()},GI=t=>{kl(t,"connectedCallback")},zZ=t=>{if((ci.$flags$&1)===0){const e=Eo(t),i=e.$cmpMeta$,s=oa("connectedCallback",i.$tagName$);if(e.$flags$&1)JI(t,e,i.$listeners$),GI(e.$lazyInstance$);else{e.$flags$|=1,i.$flags$&12&&FZ(t);{let r=t;for(;r=r.parentNode||r.host;)if(r["s-p"]){BI(e,e.$ancestorComponent$=r);break}}i.$members$&&Object.entries(i.$members$).map(([r,[n]])=>{if(n&31&&t.hasOwnProperty(r)){const a=t[r];delete t[r],t[r]=a}}),jZ(t,e,i)}s()}},FZ=t=>{const e=t["s-cr"]=Fr.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},VZ=t=>{if((ci.$flags$&1)===0){const e=Eo(t),i=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map(s=>s()),e.$rmListeners$=void 0),kl(i,"disconnectedCallback")}},BZ=(t,e={})=>{const i=oa(),s=[],r=e.exclude||[],n=yh.customElements,a=Fr.head,o=a.querySelector("meta[charset]"),c=Fr.createElement("style"),u=[];let l,h=!0;Object.assign(ci,e),ci.$resourcesUrl$=new URL(e.resourcesUrl||"./",Fr.baseURI).href,t.map(g=>{g[1].map(m=>{const f={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};f.$members$=m[2],f.$listeners$=m[3],f.$attrsToReflect$=[],f.$watchers$={};const _=f.$tagName$,k=class extends HTMLElement{constructor(y){super(y),y=this,JZ(y,f),f.$flags$&1&&y.attachShadow({mode:"open"})}connectedCallback(){l&&(clearTimeout(l),l=null),h?u.push(this):ci.jmp(()=>zZ(this))}disconnectedCallback(){ci.jmp(()=>VZ(this))}componentOnReady(){return Eo(this).$onReadyPromise$}};f.$lazyBundleId$=g[0],!r.includes(_)&&!n.get(_)&&(s.push(_),n.define(_,qI(k,f,1)))})}),c.innerHTML=s+wZ,c.setAttribute("data-styles",""),a.insertBefore(c,o?o.nextSibling:a.firstChild),h=!1,u.length?u.map(g=>g.connectedCallback()):ci.jmp(()=>l=setTimeout(HI,30)),i()},HZ=(t,e)=>e,JI=(t,e,i,s)=>{i&&i.map(([r,n,a])=>{const o=qZ(t,r),c=WZ(e,a),u=GZ(r);ci.ael(o,n,c,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>ci.rel(o,n,c,u))})},WZ=(t,e)=>i=>{try{t.$flags$&256?t.$lazyInstance$[e](i):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,i])}catch(s){q(s)}},qZ=(t,e)=>e&8?yh:t,GZ=t=>(t&2)!==0,ik=new WeakMap,Eo=t=>ik.get(t),N=(t,e)=>ik.set(e.$lazyInstance$=t,e),JZ=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return i.$onInstancePromise$=new Promise(s=>i.$onInstanceResolve$=s),i.$onReadyPromise$=new Promise(s=>i.$onReadyResolve$=s),t["s-p"]=[],t["s-rc"]=[],JI(t,i,e.$listeners$),ik.set(t,i)},XE=(t,e)=>e in t,q=(t,e)=>(0,console.error)(t,e),k0=new Map,KZ=(t,e,i)=>{const s=t.$tagName$.replace(/-/g,"_"),r=t.$lazyBundleId$,n=k0.get(r);if(n)return n[s];if(!i||!BUILD.hotModuleReplacement){const a=o=>(k0.set(r,o),o[s]);switch(r){case"dyte-meeting":return Promise.resolve().then(function(){return Tie}).then(a,q);case"dyte-ai":return Promise.resolve().then(function(){return Pie}).then(a,q);case"dyte-ai-chat":return Promise.resolve().then(function(){return Iie}).then(a,q);case"dyte-ai-home":return Promise.resolve().then(function(){return Die}).then(a,q);case"dyte-ai-toggle":return Promise.resolve().then(function(){return Oie}).then(a,q);case"dyte-ai-transcriptions":return Promise.resolve().then(function(){return Nie}).then(a,q);case"dyte-audio-tile":return Promise.resolve().then(function(){return zie}).then(a,q);case"dyte-breakout-rooms-manager":return Promise.resolve().then(function(){return Hie}).then(a,q);case"dyte-breakout-rooms-toggle":return Promise.resolve().then(function(){return qie}).then(a,q);case"dyte-broadcast-message-modal":return Promise.resolve().then(function(){return Jie}).then(a,q);case"dyte-camera-toggle":return Promise.resolve().then(function(){return Qie}).then(a,q);case"dyte-channel-creator":return Promise.resolve().then(function(){return Zie}).then(a,q);case"dyte-chat-toggle":return Promise.resolve().then(function(){return ese}).then(a,q);case"dyte-clock":return Promise.resolve().then(function(){return ise}).then(a,q);case"dyte-confirmation-modal":return Promise.resolve().then(function(){return rse}).then(a,q);case"dyte-controlbar":return Promise.resolve().then(function(){return ase}).then(a,q);case"dyte-debugger":return Promise.resolve().then(function(){return cse}).then(a,q);case"dyte-debugger-network":return Promise.resolve().then(function(){return lse}).then(a,q);case"dyte-debugger-toggle":return Promise.resolve().then(function(){return pse}).then(a,q);case"dyte-ended-screen":return Promise.resolve().then(function(){return gse}).then(a,q);case"dyte-file-dropzone":return Promise.resolve().then(function(){return fse}).then(a,q);case"dyte-file-message-view":return Promise.resolve().then(function(){return bse}).then(a,q);case"dyte-fullscreen-toggle":return Promise.resolve().then(function(){return _se}).then(a,q);case"dyte-grid":return Promise.resolve().then(function(){return Cse}).then(a,q);case"dyte-grid-pagination":return Promise.resolve().then(function(){return Rse}).then(a,q);case"dyte-header":return Promise.resolve().then(function(){return Ase}).then(a,q);case"dyte-idle-screen":return Promise.resolve().then(function(){return Mse}).then(a,q);case"dyte-image-message-view":return Promise.resolve().then(function(){return Lse}).then(a,q);case"dyte-image-viewer":return Promise.resolve().then(function(){return Use}).then(a,q);case"dyte-leave-button":return Promise.resolve().then(function(){return jse}).then(a,q);case"dyte-leave-meeting":return Promise.resolve().then(function(){return Fse}).then(a,q);case"dyte-livestream-toggle":return Promise.resolve().then(function(){return Bse}).then(a,q);case"dyte-meeting-title":return Promise.resolve().then(function(){return Wse}).then(a,q);case"dyte-message-view":return Promise.resolve().then(function(){return Gse}).then(a,q);case"dyte-mic-toggle":return Promise.resolve().then(function(){return Kse}).then(a,q);case"dyte-mixed-grid":return Promise.resolve().then(function(){return Yse}).then(a,q);case"dyte-more-toggle":return Promise.resolve().then(function(){return Xse}).then(a,q);case"dyte-mute-all-button":return Promise.resolve().then(function(){return tre}).then(a,q);case"dyte-mute-all-confirmation":return Promise.resolve().then(function(){return sre}).then(a,q);case"dyte-network-indicator":return Promise.resolve().then(function(){return nre}).then(a,q);case"dyte-participant-count":return Promise.resolve().then(function(){return ore}).then(a,q);case"dyte-participant-setup":return Promise.resolve().then(function(){return dre}).then(a,q);case"dyte-participants-audio":return Promise.resolve().then(function(){return pre}).then(a,q);case"dyte-participants-stage-list":return Promise.resolve().then(function(){return gre}).then(a,q);case"dyte-participants-stage-queue":return Promise.resolve().then(function(){return fre}).then(a,q);case"dyte-participants-toggle":return Promise.resolve().then(function(){return yre}).then(a,q);case"dyte-participants-viewer-list":return Promise.resolve().then(function(){return wre}).then(a,q);case"dyte-participants-waiting-list":return Promise.resolve().then(function(){return kre}).then(a,q);case"dyte-permissions-message":return Promise.resolve().then(function(){return xre}).then(a,q);case"dyte-pip-toggle":return Promise.resolve().then(function(){return Tre}).then(a,q);case"dyte-plugin-main":return Promise.resolve().then(function(){return Pre}).then(a,q);case"dyte-plugins-toggle":return Promise.resolve().then(function(){return Ire}).then(a,q);case"dyte-polls-toggle":return Promise.resolve().then(function(){return Dre}).then(a,q);case"dyte-recording-indicator":return Promise.resolve().then(function(){return Ore}).then(a,q);case"dyte-recording-toggle":return Promise.resolve().then(function(){return Nre}).then(a,q);case"dyte-remote-access-manager":return Promise.resolve().then(function(){return $re}).then(a,q);case"dyte-screen-share-toggle":return Promise.resolve().then(function(){return zre}).then(a,q);case"dyte-screenshare-view":return Promise.resolve().then(function(){return Vre}).then(a,q);case"dyte-settings":return Promise.resolve().then(function(){return Hre}).then(a,q);case"dyte-settings-toggle":return Promise.resolve().then(function(){return qre}).then(a,q);case"dyte-setup-screen":return Promise.resolve().then(function(){return Jre}).then(a,q);case"dyte-sidebar":return Promise.resolve().then(function(){return Qre}).then(a,q);case"dyte-simple-grid":return Promise.resolve().then(function(){return Zre}).then(a,q);case"dyte-spotlight-grid":return Promise.resolve().then(function(){return ene}).then(a,q);case"dyte-stage":return Promise.resolve().then(function(){return ine}).then(a,q);case"dyte-stage-toggle":return Promise.resolve().then(function(){return ane}).then(a,q);case"dyte-text-field":return Promise.resolve().then(function(){return cne}).then(a,q);case"dyte-text-message-view":return Promise.resolve().then(function(){return lne}).then(a,q);case"dyte-transcripts":return Promise.resolve().then(function(){return pne}).then(a,q);case"dyte-ui-provider":return Promise.resolve().then(function(){return gne}).then(a,q);case"dyte-waiting-screen":return Promise.resolve().then(function(){return fne}).then(a,q);case"dyte-webinar-stage-toggle":return Promise.resolve().then(function(){return yne}).then(a,q);case"dyte-audio-grid_2":return Promise.resolve().then(function(){return _ne}).then(a,q);case"dyte-breakout-room-manager_3":return Promise.resolve().then(function(){return Ene}).then(a,q);case"dyte-chat_5":return Promise.resolve().then(function(){return Une}).then(a,q);case"dyte-debugger-audio_3":return Promise.resolve().then(function(){return Fne}).then(a,q);case"dyte-markdown-view":return Promise.resolve().then(function(){return Bne}).then(a,q);case"dyte-name-tag":return Promise.resolve().then(function(){return Wne}).then(a,q);case"dyte-participant":return Promise.resolve().then(function(){return Gne}).then(a,q);case"dyte-settings-audio_2":return Promise.resolve().then(function(){return Qne}).then(a,q);case"dyte-tab-bar":return Promise.resolve().then(function(){return Zne}).then(a,q);case"dyte-transcript":return Promise.resolve().then(function(){return eae}).then(a,q);case"dyte-audio-visualizer_2":return Promise.resolve().then(function(){return sae}).then(a,q);case"dyte-channel-details_14":return Promise.resolve().then(function(){return Sae}).then(a,q);case"dyte-livestream-indicator_3":return Promise.resolve().then(function(){return Cae}).then(a,q);case"dyte-participant-tile":return Promise.resolve().then(function(){return Rae}).then(a,q);case"dyte-poll_2":return Promise.resolve().then(function(){return Dae}).then(a,q);case"dyte-spotlight-indicator":return Promise.resolve().then(function(){return Oae}).then(a,q);case"dyte-chat-message_5":return Promise.resolve().then(function(){return eoe}).then(a,q);case"dyte-debugger-issues-ui_3":return Promise.resolve().then(function(){return uoe}).then(a,q);case"dyte-dialog":return Promise.resolve().then(function(){return hoe}).then(a,q);case"dyte-logo":return Promise.resolve().then(function(){return moe}).then(a,q);case"dyte-menu_3":return Promise.resolve().then(function(){return Foe}).then(a,q);case"dyte-avatar":return Promise.resolve().then(function(){return Boe}).then(a,q);case"dyte-controlbar-button":return Promise.resolve().then(function(){return Woe}).then(a,q);case"dyte-tooltip":return Promise.resolve().then(function(){return Goe}).then(a,q);case"dyte-spinner":return Promise.resolve().then(function(){return Koe}).then(a,q);case"dyte-button":return Promise.resolve().then(function(){return Yoe}).then(a,q);case"dyte-icon":return Promise.resolve().then(function(){return ece}).then(a,q)}}return vZ(()=>import(`./${r}.entry.js`),[],import.meta.url).then(a=>(k0.set(r,a),a[s]),q)},yf=new Map,yh=typeof window<"u"?window:{},Fr=yh.document||{head:{}},ci={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},KI=t=>Promise.resolve(t),QZ=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),eT=[],QI=[],YZ=(t,e)=>i=>{t.push(i),A1||(A1=!0,e&&ci.$flags$&4?sk(D1):ci.raf(D1))},tT=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){q(i)}t.length=0},D1=()=>{tT(eT),tT(QI),(A1=eT.length>0)&&ci.raf(D1)},sk=t=>KI().then(t),Ci=YZ(QI,!0),ZZ=()=>KI(),XZ=(t,e)=>typeof window>"u"?Promise.resolve():ZZ().then(()=>BZ(JSON.parse('[["dyte-icon",[[1,"dyte-icon",{"icon":[1],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-sidebar",[[1,"dyte-sidebar",{"enabledSections":[1040],"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"currentTab":[32],"isFloating":[32],"enablePinning":[32]}]]],["dyte-breakout-rooms-manager",[[1,"dyte-breakout-rooms-manager",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"loading":[32],"roomConfig":[32],"draftState":[32],"assigningParticipants":[32],"selectedParticipants":[32],"ephemeralStatusText":[32],"isDragMode":[32]},[[0,"participantDelete","onParticipantDelete"],[0,"participantsDragging","toggleDragMode"],[0,"selectedParticipantsUpdate","updateSelectedParticipants"],[0,"allParticipantsToggleUpdate","updateAllParticipants"]]]]],["dyte-debugger",[[1,"dyte-debugger",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"progress":[32]},[[0,"testProgress","progressUpdate"]]]]],["dyte-grid",[[1,"dyte-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"mediaConnected":[32],"roomState":[32]}]]],["dyte-participants-viewer-list",[[1,"dyte-participants-viewer-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"search":[1],"t":[16],"stageViewers":[32]}]]],["dyte-settings",[[1,"dyte-settings",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"isMobileMainVisible":[32],"networkStatus":[32],"canProduceVideo":[32]}]]],["dyte-message-view",[[1,"dyte-message-view",{"actions":[16],"variant":[1],"viewType":[1,"view-type"],"avatarUrl":[1,"avatar-url"],"hideAvatar":[4,"hide-avatar"],"authorName":[1,"author-name"],"hideAuthorName":[4,"hide-author-name"],"hideMetadata":[4,"hide-metadata"],"time":[16],"iconPack":[16]}]]],["dyte-screenshare-view",[[1,"dyte-screenshare-view",{"hideFullScreenButton":[4,"hide-full-screen-button"],"nameTagPosition":[513,"name-tag-position"],"participant":[16],"meeting":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoExpanded":[32],"screenShareEnabled":[32],"isFullScreen":[32],"remoteControlInfo":[32]}]]],["dyte-mixed-grid",[[1,"dyte-mixed-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"screenShareParticipants":[16],"plugins":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"activeTab":[32],"initialised":[32]}]]],["dyte-spinner",[[1,"dyte-spinner",{"iconPack":[16],"size":[513],"t":[16]}]]],["dyte-participants-stage-queue",[[1,"dyte-participants-stage-queue",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"stageRequestedParticipants":[32]}]]],["dyte-participants-waiting-list",[[1,"dyte-participants-waiting-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"waitlistedParticipants":[32]}]]],["dyte-audio-tile",[[1,"dyte-audio-tile",{"meeting":[16],"config":[16],"size":[513],"states":[16],"iconPack":[16],"t":[16],"participant":[16],"audioEnabled":[32],"volume":[32]}]]],["dyte-camera-toggle",[[1,"dyte-camera-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"videoEnabled":[32],"canProduceVideo":[32],"cameraPermission":[32]}]]],["dyte-channel-creator",[[1,"dyte-channel-creator",{"meeting":[16],"t":[16],"iconPack":[16],"channelName":[32],"searchQuery":[32],"step":[32],"loading":[32],"selectedMemberIds":[32],"focusedMemberIndex":[32],"showAllMembersList":[32]}]]],["dyte-mic-toggle",[[1,"dyte-mic-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"audioEnabled":[32],"canProduceAudio":[32],"micPermission":[32]}]]],["dyte-mute-all-button",[[1,"dyte-mute-all-button",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-remote-access-manager",[[1,"dyte-remote-access-manager",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"acceptedRequestId":[32]}]]],["dyte-screen-share-toggle",[[1,"dyte-screen-share-toggle",{"states":[16],"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"maxScreenShareCount":[32],"screenShareCount":[32],"screenShareEnabled":[32],"canScreenShare":[32],"shareScreenPermission":[32],"screenShareState":[32]}]]],["dyte-stage-toggle",[[1,"dyte-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"state":[32]}]]],["dyte-webinar-stage-toggle",[[1,"dyte-webinar-stage-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"stageStatus":[32],"canPresent":[32],"requestProduce":[32]}]]],["dyte-ai-toggle",[[1,"dyte-ai-toggle",{"variant":[513],"states":[16],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"aiActive":[32]}]]],["dyte-breakout-rooms-toggle",[[1,"dyte-breakout-rooms-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-chat-toggle",[[1,"dyte-chat-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"unreadMessageCount":[32],"chatActive":[32],"canViewChat":[32],"hasNewMessages":[32]}]]],["dyte-debugger-toggle",[[1,"dyte-debugger-toggle",{"variant":[513],"meeting":[16],"states":[16],"t":[16],"iconPack":[16],"size":[513]}]]],["dyte-fullscreen-toggle",[[1,"dyte-fullscreen-toggle",{"states":[16],"targetElement":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"fullScreenActive":[32],"isFullScreenSupported":[32]}]]],["dyte-grid-pagination",[[1,"dyte-grid-pagination",{"meeting":[16],"states":[16],"size":[513],"variant":[513],"iconPack":[16],"t":[16],"page":[32],"pageCount":[32],"activeCount":[32],"activeComputedCount":[32],"showPagination":[32]}]]],["dyte-idle-screen",[[1,"dyte-idle-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-image-message-view",[[1,"dyte-image-message-view",{"url":[1],"iconPack":[16],"t":[16],"status":[32]}]]],["dyte-leave-button",[[1,"dyte-leave-button",{"variant":[513],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-livestream-toggle",[[1,"dyte-livestream-toggle",{"variant":[513],"meeting":[16],"size":[513],"iconPack":[16],"t":[16],"livestreamState":[32]}]]],["dyte-more-toggle",[[1,"dyte-more-toggle",{"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-participants-audio",[[1,"dyte-participants-audio",{"meeting":[16],"iconPack":[16],"t":[16],"showPlayDialog":[32]}]]],["dyte-participants-toggle",[[1,"dyte-participants-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"participantsActive":[32],"waitlistedParticipants":[32],"stageRequestedParticipants":[32],"badgeCount":[32],"canViewParticipants":[32]}]]],["dyte-pip-toggle",[[1,"dyte-pip-toggle",{"variant":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"size":[513],"t":[16],"pipSupported":[32]}]]],["dyte-plugins-toggle",[[1,"dyte-plugins-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pluginsActive":[32],"canViewPlugins":[32]}]]],["dyte-polls-toggle",[[1,"dyte-polls-toggle",{"variant":[513],"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"pollsActive":[32],"unreadPollsCount":[32],"canViewPolls":[32]}]]],["dyte-recording-toggle",[[1,"dyte-recording-toggle",{"variant":[513],"meeting":[16],"t":[16],"iconPack":[16],"size":[513],"disabled":[4],"recordingState":[32],"canRecord":[32]}]]],["dyte-settings-toggle",[[1,"dyte-settings-toggle",{"variant":[513],"states":[16],"size":[513],"iconPack":[16],"t":[16]}]]],["dyte-setup-screen",[[1,"dyte-setup-screen",{"meeting":[16],"states":[16],"size":[513],"config":[16],"iconPack":[16],"t":[16],"displayName":[32],"isJoining":[32],"canEditName":[32]}]]],["dyte-ai",[[1,"dyte-ai",{"defaultSection":[1,"default-section"],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"size":[513],"view":[513],"tab":[32],"newTranscriptionAvailable":[32],"newAiMessageAvailable":[32]}]]],["dyte-ai-home",[[1,"dyte-ai-home",{"meeting":[16],"initialMessages":[16],"prompt":[32],"messages":[32]}]]],["dyte-broadcast-message-modal",[[1,"dyte-broadcast-message-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"messagePayload":[32],"successMessage":[32]}]]],["dyte-ended-screen",[[1,"dyte-ended-screen",{"config":[16],"size":[513],"states":[16],"t":[16],"iconPack":[16],"meeting":[16],"icon":[32],"message":[32]}]]],["dyte-file-message-view",[[1,"dyte-file-message-view",{"name":[1],"size":[2],"url":[1],"iconPack":[16],"t":[16]}]]],["dyte-image-viewer",[[1,"dyte-image-viewer",{"image":[16],"size":[513],"t":[16],"iconPack":[16]}]]],["dyte-permissions-message",[[1,"dyte-permissions-message",{"meeting":[16],"t":[16],"iconPack":[16],"states":[16],"device":[32]}]]],["dyte-plugin-main",[[1,"dyte-plugin-main",{"meeting":[16],"plugin":[16],"iconPack":[16],"t":[16],"canClosePlugin":[32],"viewModeEnabled":[32]}]]],["dyte-clock",[[1,"dyte-clock",{"meeting":[16],"iconPack":[16],"t":[16],"startedTime":[32],"timeDiff":[32]}]]],["dyte-confirmation-modal",[[1,"dyte-confirmation-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-file-dropzone",[[1,"dyte-file-dropzone",{"hostEl":[16],"iconPack":[16],"t":[16],"dropzoneActivated":[32]}]]],["dyte-leave-meeting",[[1,"dyte-leave-meeting",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"canEndMeeting":[32]}]]],["dyte-meeting-title",[[1,"dyte-meeting-title",{"meeting":[16],"iconPack":[16],"t":[16]}]]],["dyte-mute-all-confirmation",[[1,"dyte-mute-all-confirmation",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16],"allowUnmute":[32]}]]],["dyte-network-indicator",[[1,"dyte-network-indicator",{"participant":[16],"meeting":[16],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"score":[32]}]]],["dyte-participant-count",[[1,"dyte-participant-count",{"meeting":[16],"iconPack":[16],"t":[16],"participantCount":[32],"isViewer":[32]}]]],["dyte-participant-setup",[[1,"dyte-participant-setup",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-recording-indicator",[[1,"dyte-recording-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isRecording":[32]}]]],["dyte-text-message-view",[[0,"dyte-text-message-view",{"text":[1],"isMarkdown":[4,"is-markdown"]}]]],["dyte-ai-chat",[[1,"dyte-ai-chat",{"t":[16]}]]],["dyte-ai-transcriptions",[[1,"dyte-ai-transcriptions",{"t":[16],"meeting":[16],"initialTranscriptions":[16],"participantQuery":[32],"isProcessing":[32],"captionViewEnabled":[32],"transcriptions":[32]}]]],["dyte-controlbar",[[1,"dyte-controlbar",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-debugger-network",[[1,"dyte-debugger-network",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"issueKey":[32]}]]],["dyte-header",[[1,"dyte-header",{"variant":[513],"disableRender":[4,"disable-render"],"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"t":[16],"size":[513]}]]],["dyte-meeting",[[1,"dyte-meeting",{"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"mode":[513],"leaveOnUnmount":[4,"leave-on-unmount"],"meeting":[16],"showSetupScreen":[1028,"show-setup-screen"],"t":[16],"config":[1040],"iconPackUrl":[513,"icon-pack-url"],"size":[1537],"gridLayout":[1,"grid-layout"],"states":[32],"newMeeting":[32],"iconPack":[32]},[[0,"dyteStateUpdate","listenState"]]]]],["dyte-participants-stage-list",[[1,"dyte-participants-stage-list",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"view":[1],"t":[16],"search":[1],"participants":[32],"showStageList":[32]}]]],["dyte-transcript",[[1,"dyte-transcript",{"transcript":[16],"t":[16]}]]],["dyte-transcripts",[[1,"dyte-transcripts",{"meeting":[16],"states":[16],"config":[16],"t":[16],"transcripts":[32]}]]],["dyte-waiting-screen",[[1,"dyte-waiting-screen",{"meeting":[16],"config":[16],"iconPack":[16],"t":[16]}]]],["dyte-simple-grid",[[1,"dyte-simple-grid",{"participants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"dimensions":[32]}]]],["dyte-spotlight-grid",[[1,"dyte-spotlight-grid",{"layout":[513],"participants":[16],"pinnedParticipants":[16],"aspectRatio":[1,"aspect-ratio"],"gap":[2],"size":[513],"meeting":[16],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16]}]]],["dyte-stage",[[1,"dyte-stage",{"iconPack":[16],"t":[16]}]]],["dyte-text-field",[[1,"dyte-text-field",{"type":[1],"placeholder":[1],"disabled":[4],"iconPack":[16],"t":[16]}]]],["dyte-ui-provider",[[4,"dyte-ui-provider",{"meeting":[16],"size":[1537],"config":[1040],"t":[16],"iconPackUrl":[513,"icon-pack-url"],"loadConfigFromPreset":[4,"load-config-from-preset"],"applyDesignSystem":[4,"apply-design-system"],"joinRoom":[4,"join-room"],"isReady":[32],"iconPack":[32]}]]],["dyte-participant",[[1,"dyte-participant",{"meeting":[16],"view":[1],"participant":[16],"iconPack":[16],"t":[16],"audioEnabled":[32],"videoEnabled":[32],"isPinned":[32],"isOnStage":[32],"canDisableParticipantAudio":[32],"canDisableParticipantVideo":[32],"canKickParticipant":[32],"canPinParticipant":[32],"canAllowParticipantOnStage":[32]}]]],["dyte-tab-bar",[[1,"dyte-tab-bar",{"size":[513],"meeting":[16],"states":[16],"config":[16],"layout":[513],"iconPack":[16],"t":[16],"activeTab":[16],"tabs":[16]}]]],["dyte-markdown-view",[[1,"dyte-markdown-view",{"text":[1],"maxLength":[2,"max-length"]}]]],["dyte-name-tag",[[1,"dyte-name-tag",{"participant":[16],"meeting":[16],"size":[513],"maxLength":[2,"max-length"],"isScreenShare":[4,"is-screen-share"],"variant":[513],"iconPack":[16],"t":[16],"length":[32]}]]],["dyte-button",[[1,"dyte-button",{"size":[513],"variant":[513],"kind":[513],"reverse":[516],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-settings-audio_2",[[1,"dyte-settings-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"audioDevices":[32],"speakerDevices":[32],"canProduceAudio":[32],"currentDevices":[32]}],[1,"dyte-settings-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"videoDevices":[32],"currentDevice":[32],"videoEnabled":[32]}]]],["dyte-audio-grid_2",[[1,"dyte-video-grid",{"layout":[513],"aspectRatio":[513,"aspect-ratio"],"meeting":[16],"gap":[514],"size":[513],"states":[16],"config":[16],"iconPack":[16],"t":[16],"gridSize":[16],"overrides":[8],"participants":[32],"pinnedParticipants":[32],"screenShareParticipants":[32],"plugins":[32],"showWebinarStage":[32],"showLiveStreamPlayer":[32],"canCurrentPeerHost":[32],"connected":[32],"pipSupported":[32],"pipEnabled":[32]}],[1,"dyte-audio-grid",{"meeting":[16],"config":[16],"states":[16],"iconPack":[16],"size":[513],"t":[16],"hideSelf":[4,"hide-self"],"activeParticipants":[32],"onStageParticipants":[32],"offStageParticipants":[32]}]]],["dyte-spotlight-indicator",[[1,"dyte-spotlight-indicator",{"meeting":[16],"iconPack":[16],"t":[16],"size":[513],"canSpotlight":[32],"isSpotlighted":[32]}]]],["dyte-participant-tile",[[1,"dyte-participant-tile",{"nameTagPosition":[513,"name-tag-position"],"isPreview":[4,"is-preview"],"participant":[16],"meeting":[16],"states":[16],"config":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"videoState":[32],"isPinned":[32]}]]],["dyte-debugger-audio_3",[[1,"dyte-debugger-audio",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"micMetadata":[32],"micPreview":[32],"speakerPreview":[32],"audioTrackStats":[32],"activeTab":[32],"stage":[32],"mediaPermission":[32],"speakerDevice":[32],"speakerTest":[32]}],[1,"dyte-debugger-screenshare",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"stage":[32],"mediaPermission":[32],"screenshareEnabled":[32],"audioTrackMetadata":[32],"videoTrackMetadata":[32],"screenshareTest":[32],"audioTrackStats":[32],"videoTrackStats":[32]}],[1,"dyte-debugger-video",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"activeTab":[32],"stage":[32],"mediaPermission":[32],"videoPreview":[32],"videoMetadata":[32],"videoTrackStats":[32]}]]],["dyte-avatar",[[1,"dyte-avatar",{"participant":[16],"variant":[513],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}]]],["dyte-tooltip",[[1,"dyte-tooltip",{"label":[1],"variant":[513],"disabled":[516],"open":[516],"kind":[513],"size":[513],"placement":[1],"delay":[2],"iconPack":[16],"t":[16],"isInFocus":[32]}]]],["dyte-breakout-room-manager_3",[[1,"dyte-breakout-room-manager",{"meeting":[16],"assigningParticipants":[4,"assigning-participants"],"mode":[1],"states":[16],"allowDelete":[4,"allow-delete"],"iconPack":[16],"t":[16],"isDragMode":[4,"is-drag-mode"],"room":[16],"defaultExpanded":[4,"default-expanded"],"editingTitleRoomId":[32],"newTitle":[32],"showExpandedCard":[32],"glowingCard":[32]}],[1,"dyte-breakout-room-participants",{"meeting":[16],"participantIds":[16],"iconPack":[16],"t":[16],"selectedParticipantIds":[16],"search":[32],"participantsToShow":[32],"isDragging":[32]}],[1,"dyte-counter",{"size":[513],"value":[2],"minValue":[2,"min-value"],"iconPack":[16],"t":[16],"input":[32]}]]],["dyte-poll_2",[[1,"dyte-poll-form",{"iconPack":[16],"t":[16],"options":[32],"anonymous":[32],"hideVotes":[32],"error":[32]}],[1,"dyte-poll",{"poll":[16],"self":[1],"permissions":[16],"iconPack":[16],"t":[16]}]]],["dyte-dialog",[[1,"dyte-dialog",{"hideCloseButton":[4,"hide-close-button"],"disableEscapeKey":[4,"disable-escape-key"],"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"open":[1540]}]]],["dyte-logo",[[1,"dyte-logo",{"logoUrl":[1025,"logo-url"],"config":[16],"meeting":[16],"t":[16]}]]],["dyte-debugger-issues-ui_3",[[1,"dyte-debugger-permissions-ui",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"mediaType":[1,"media-type"],"issueKey":[32],"permission":[32],"devices":[32]}],[1,"dyte-debugger-issues-ui",{"meeting":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"mediaType":[1,"media-type"],"issueIndex":[32],"reported":[32]}],[1,"dyte-information-tooltip",{"iconPack":[16]}]]],["dyte-controlbar-button",[[1,"dyte-controlbar-button",{"variant":[513],"showWarning":[4,"show-warning"],"size":[513],"label":[1],"icon":[1],"isLoading":[4,"is-loading"],"disabled":[516],"iconPack":[16],"t":[16],"brandIcon":[516,"brand-icon"]}]]],["dyte-menu_3",[[1,"dyte-menu",{"size":[513],"placement":[1],"iconPack":[16],"t":[16]}],[1,"dyte-menu-item",{"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-menu-list",{"iconPack":[16],"t":[16]}]]],["dyte-chat-message_5",[[1,"dyte-chat-message",{"message":[16],"isContinued":[4,"is-continued"],"isUnread":[4,"is-unread"],"size":[513],"iconPack":[16],"t":[16],"isSelf":[4,"is-self"],"canEdit":[4,"can-edit"],"canDelete":[4,"can-delete"],"canReply":[4,"can-reply"],"disableControls":[4,"disable-controls"],"alignRight":[4,"align-right"],"senderDisplayPicture":[1,"sender-display-picture"],"hideAvatar":[4,"hide-avatar"],"now":[32]}],[1,"dyte-paginated-list",{"pageSize":[2,"page-size"],"pagesAllowed":[2,"pages-allowed"],"fetchData":[16],"createNodes":[16],"selectedItemId":[1,"selected-item-id"],"autoScroll":[4,"auto-scroll"],"iconPack":[16],"t":[16],"emptyListLabel":[1,"empty-list-label"],"isLoading":[32],"rerenderBoolean":[32],"shouldRenderNewNodes":[32],"hasNewNodesToRender":[32],"showEmptyListLabel":[32],"onNewNode":[64],"onNodeDelete":[64],"onNodeUpdate":[64]}],[0,"dyte-image-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"],"status":[32]}],[0,"dyte-file-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}],[0,"dyte-text-message",{"message":[16],"now":[16],"isContinued":[516,"is-continued"],"iconPack":[16],"t":[16],"showBubble":[4,"show-bubble"]}]]],["dyte-channel-details_14",[[1,"dyte-chat-messages-ui-paginated",{"meeting":[16],"selectedChannel":[16],"selectedChannelId":[1,"selected-channel-id"],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-chat-search-results",{"meeting":[16],"query":[1],"channelId":[1,"channel-id"],"iconPack":[16],"t":[16]}],[0,"dyte-channel-header",{"meeting":[16],"channel":[16],"iconPack":[16],"t":[16],"showChannelDetailsDialog":[32],"showSearchBar":[32],"members":[32]}],[1,"dyte-chat-composer-ui",{"canSendTextMessage":[4,"can-send-text-message"],"canSendFiles":[4,"can-send-files"],"size":[513],"iconPack":[16],"t":[16],"disableEmojiPicker":[4,"disable-emoji-picker"],"prefill":[16],"members":[16],"channelId":[1,"channel-id"],"emojiPickerActive":[32],"mentionQuery":[32],"focusedMemberIndex":[32],"filePreview":[32]}],[1,"dyte-chat-messages-ui",{"selectedGroup":[1,"selected-group"],"messages":[16],"selfUserId":[1,"self-user-id"],"size":[513],"iconPack":[16],"t":[16],"now":[32],"showLatestMessageButton":[32]}],[1,"dyte-dialog-manager",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16]}],[1,"dyte-channel-selector-ui",{"channels":[16],"selectedChannelId":[1,"selected-channel-id"],"iconPack":[16],"t":[16],"showRecentMessage":[4,"show-recent-message"],"isHidden":[32],"searchQuery":[32]}],[1,"dyte-notifications",{"meeting":[16],"states":[16],"config":[16],"t":[16],"size":[513],"iconPack":[16],"notifications":[32]},[[8,"dyteAPIError","apiErrorListener"],[8,"dyteSendNotification","sendNotificationListener"]]],[1,"dyte-chat-selector-ui",{"selfUserId":[1,"self-user-id"],"selectedGroupId":[1,"selected-group-id"],"unreadCounts":[16],"groups":[16],"iconPack":[16],"t":[16],"showParticipantsPanel":[32],"query":[32]}],[1,"dyte-channel-details",{"channel":[16],"t":[16],"iconPack":[16],"members":[16]}],[1,"dyte-emoji-picker",{"iconPack":[16],"t":[16],"emojiList":[32],"filterVal":[32],"filteredEmojis":[32]}],[1,"dyte-join-stage",{"meeting":[16],"config":[16],"states":[16],"size":[513],"iconPack":[16],"t":[16],"dataConfig":[16],"isLoading":[32]}],[1,"dyte-notification",{"notification":[16],"size":[513],"iconPack":[16],"t":[16],"imageState":[32]}],[1,"dyte-overlay-modal",{"meeting":[16],"states":[16],"iconPack":[16],"t":[16]}]]],["dyte-chat_5",[[1,"dyte-chat",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"disablePrivateChat":[4,"disable-private-chat"],"privatePresetFilter":[16],"unreadCountGroups":[32],"chatGroups":[32],"selectedGroup":[32],"now":[32],"dropzoneActivated":[32],"showLatestMessageButton":[32],"canSend":[32],"canSendTextMessage":[32],"canSendFiles":[32],"canPrivateMessage":[32],"canSendPrivateTexts":[32],"canSendPrivateFiles":[32],"emojiPickerEnabled":[32],"chatRecipientId":[32],"participants":[32],"selectedParticipant":[32],"channels":[32],"selectedChannelId":[32],"editingMessage":[32],"replyMessage":[32],"searchQuery":[32],"creatingChannel":[32]},[[8,"editMessageInit","onEditMessageInit"],[0,"switchChannel","channelSwitchListener"]]],[1,"dyte-polls",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"create":[32],"polls":[32]}],[1,"dyte-plugins",{"meeting":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"plugins":[32],"canStartPlugins":[32],"canClosePlugins":[32],"activatedPluginsId":[32]}],[1,"dyte-sidebar-ui",{"view":[513],"tabs":[16],"currentTab":[1,"current-tab"],"iconPack":[16],"t":[16]}],[1,"dyte-participants",{"meeting":[16],"states":[16],"config":[16],"size":[513],"iconPack":[16],"t":[16],"search":[32]}]]],["dyte-audio-visualizer_2",[[1,"dyte-audio-visualizer",{"variant":[513],"participant":[16],"size":[513],"iconPack":[16],"t":[16],"isScreenShare":[4,"is-screen-share"],"audioEnabled":[32],"volume":[32]}],[1,"dyte-switch",{"checked":[1028],"readonly":[4],"disabled":[516],"iconPack":[16],"t":[16]}]]],["dyte-livestream-indicator_3",[[1,"dyte-livestream-player",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"playbackUrl":[32],"isSupported":[32],"playerState":[32],"livestreamState":[32],"playerError":[32],"latency":[32],"audioPlaybackError":[32]}],[1,"dyte-livestream-indicator",{"meeting":[16],"size":[513],"t":[16],"iconPack":[16],"isLivestreaming":[32]}],[1,"dyte-viewer-count",{"meeting":[16],"variant":[513],"iconPack":[16],"t":[16],"viewerCount":[32]}]]]]'),e)),Re={designTokens:{spacingBase:4,googleFont:"Inter"},styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"rgb(var(--dyte-colors-background-1000, 0 0 0))"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"dyte-breakout-rooms-manager":{minHeight:"400px",minWidth:"500px",maxWidth:"80%",maxHeight:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:{"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":["dyte-header","dyte-stage","dyte-controlbar","dyte-participants-audio","dyte-dialog-manager"],"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"],"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":["dyte-logo","dyte-recording-indicator","dyte-livestream-indicator"],"div#header-center":["dyte-meeting-title"],"div#header-right":["dyte-grid-pagination","dyte-clock","dyte-participant-count","dyte-viewer-count"],"div#header-left.sm":["dyte-meeting-title","dyte-recording-indicator","dyte-livestream-indicator"],"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-settings","div#setupcontrols-media"],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}]],"dyte-screenshare-view":{children:["dyte-name-tag","dyte-network-indicator"]},"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]],"dyte-controlbar":{states:["activeMoreMenu"],props:{variant:"solid"},children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu":[["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-recording-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.sm":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"dyte-more-toggle.activeMoreMenu.md":[["dyte-chat-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-participants-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-polls-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-plugins-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-fullscreen-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-screen-share-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-pip-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-mute-all-button",{variant:"horizontal",slot:"more-elements"}],["dyte-breakout-rooms-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-settings-toggle",{variant:"horizontal",slot:"more-elements"}],["dyte-ai-toggle",{variant:"horizontal"}],["dyte-debugger-toggle",{variant:"horizontal"}]],"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-leave-button","dyte-more-toggle"],"div#controlbar-left":["dyte-settings-toggle","dyte-screen-share-toggle","dyte-livestream-toggle"],"div#controlbar-center":["dyte-mic-toggle","dyte-camera-toggle","dyte-webinar-stage-toggle","dyte-stage-toggle","dyte-more-toggle","dyte-leave-button"],"div#controlbar-right":["dyte-chat-toggle","dyte-polls-toggle","dyte-participants-toggle","dyte-plugins-toggle","dyte-ai-toggle"]},config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};var YI=typeof global=="object"&&global&&global.Object===Object&&global,eX=typeof self=="object"&&self&&self.Object===Object&&self,Gc=YI||eX||Function("return this")(),bf=Gc.Symbol,ZI=Object.prototype,tX=ZI.hasOwnProperty,iX=ZI.toString,ku=bf?bf.toStringTag:void 0;function sX(t){var e=tX.call(t,ku),i=t[ku];try{t[ku]=void 0;var s=!0}catch{}var r=iX.call(t);return s&&(e?t[ku]=i:delete t[ku]),r}var rX=Object.prototype,nX=rX.toString;function aX(t){return nX.call(t)}var oX="[object Null]",cX="[object Undefined]",iT=bf?bf.toStringTag:void 0;function bh(t){return t==null?t===void 0?cX:oX:iT&&iT in Object(t)?sX(t):aX(t)}function wn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function $l(t){return t!=null&&typeof t=="object"}const Sl=t=>To(t)?t.meta.viewType==="LIVESTREAM"&&t.stage.status!=="ON_STAGE":!1,XI=t=>{var e;return To(t)?t.meta.viewType==="LIVESTREAM"&&((e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions.canLivestream):!1},To=t=>{var e;return((e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions.isV2)&&(t==null?void 0:t.livestream)};var an;(function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PLAYING="Playing",t.READY="Ready"})(an||(an={}));var Gt;(function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"})(Gt||(Gt={}));const dX=[Gt.TIME_UPDATE,Gt.BUFFER_UPDATE,Gt.TEXT_METADATA_CUE,Gt.PLAYER_METADATA],lX=[Gt.REBUFFERING,Gt.AUDIO_BLOCKED,Gt.PLAYBACK_BLOCKED,Gt.ERROR,Gt.RECOVERABLE_ERROR,Gt.WORKER_ERROR,Gt.NETWORK_UNAVAILABLE,Gt.ANALYTICS_EVENT,Gt.PLAYBACK_RATE_CHANGED,Gt.QUALITY_CHANGED,Gt.INITIALIZED],wf={PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE:"play_participant_tile_video_on_pause",DISABLE_EMOJI_PICKER:"disable_emoji_picker",FEAT_PAGINATED_CHAT:"feat_paginated_chat",LOG_PLAYING_FAILURES:"log_playing_failures",FEAT_CHANNEL_CHAT:"feat_channel_chat",FEAT_PARTICIPANT_LIST:"feat_participant_list"},uX=t=>t.connectedMeetings.supportsConnectedMeetings,_f=t=>{var e;return(t==null?void 0:t.meta.viewType)==="CHAT"||To(t)||((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.features.hasFeature("feat_paginated_chat"))},kf=t=>{var e,i;return((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.browserSpecs.isFirefox())&&((i=t==null?void 0:t.__internals__)===null||i===void 0?void 0:i.features.hasFeature("disable_firefox_setting_sink_id"))};let e4=0;function pX(){return++e4}function hX(){e4=0}const t4="temp-";function gX(){return{id:`${t4}${Math.random().toString(36)}`,title:`Room ${pX()}`,participants:[]}}function S0(t){return t.includes(t4)}function mX(t,e){const i=t.length,s=Math.ceil(i/e),r=new Array(e);let n=0;for(let a=0;a<e;a++)r[a]=t.slice(n,n+s),n+=s;return r.filter(a=>a.length)}function Qt(t){var e;return(e=t.customParticipantId)!==null&&e!==void 0?e:t.clientSpecificId}function i4(t){const e=new Map;return[t.self,...t.participants.joined.toArray()].map(i=>{e.set(Qt(i),i.picture)}),[t.connectedMeetings.parentMeeting,...t.connectedMeetings.meetings].flatMap(i=>i.participants).map(i=>({id:i.id,customParticipantId:Qt(i),displayName:i.displayName,displayPictureUrl:i.displayPictureUrl!==""?i.displayPictureUrl:e.get(Qt(i))}))}const s4=t=>{const e=t.self.permissions.connectedMeetings;return!(!e.canAlterConnectedMeetings&&!t.connectedMeetings.isActive||!e.canSwitchConnectedMeetings&&!e.canSwitchToParentMeeting||!uX(t))},fX=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],vX={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},sT={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},rT={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}},rk=[-2,-1,0,1,2];function ym(t){t=t.trim();let e="0",i="0",s="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],s="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],s="0x"+t[5]+t[6]),[+e,+i,+s]}const yX=(t,e,i)=>{let s,r,n;if(e==0)s=r=n=i;else{const a=(u,l,h)=>(h<0&&(h+=1),h>1&&(h-=1),h<.16666666666666666?u+(l-u)*6*h:h<.5?l:h<.6666666666666666?u+(l-u)*(.6666666666666666-h)*6:u),o=i<.5?i*(1+e):i+e-i*e,c=2*i-o;s=a(c,o,t+1/3),r=a(c,o,t),n=a(c,o,t-1/3)}return[Math.round(s*255),Math.round(r*255),Math.round(n*255)]},bX=(t,e,i)=>{t/=255,e/=255,i/=255;const s=Math.max(t,e,i),r=Math.min(t,e,i);let n,a,o=(s+r)/2;if(s==r)n=a=0;else{const c=s-r;switch(a=o>.5?c/(2-s-r):c/(s+r),s){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4;break}n/=6}return[n,a,o]},wX=(t,e,i)=>{const s=r=>r.toString(16).padStart(2,"0");return`#${s(t)}${s(e)}${s(i)}`},r4=(t,e=rk,i=.4)=>{const s=[],[r,n,a]=ym(t),[o,c,u]=bX(r,n,a),l=Math.round(u*100);l>70?i=.8:l>60?i=.9:l<10?i=.075:l<42&&(i=.3);const h=e.findIndex(k=>k===0);if(h===-1)throw new Error("Invalid reducer provided, it must contain atleast one zero");const g=5-h,m=h+1,f=(100-l)/g,_=l/m;for(const k of e){let y;k<0?y=l+k*_*i:k>0?y=l+k*f*i:y=l;const[b,x,C]=yX(o,c,y/100);s.push(wX(b,x,C))}return s},jo=t=>typeof t=="string"&&t.length===7&&t.startsWith("#"),_X=t=>{const[e,i,s,r,n]=r4(t,rk);return{300:e,400:i,500:s,600:r,700:n}},kX=t=>{const[e,i,s,r,n]=r4(t,rk);return{1e3:e,900:i,800:s,700:r,600:n}},SX=t=>{const e=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const r=document.createElement("link");r.rel="preconnect",r.setAttribute("data-dyte-font","true"),r.href="https://fonts.googleapis.com";const n=r.cloneNode(!0);n.href="https://fonts.gstatic.com",n.crossOrigin="",i.push(r,n)}const s=document.createElement("link");s.rel="stylesheet",s.setAttribute("data-dyte-font",t),s.href=encodeURI(`https://fonts.googleapis.com/css2?family=${t}:wght@${e.join(";")}&display=swap`),i.push(s),document.head.append(...i)},xX=(t,e)=>{fX.forEach(i=>{t.style.setProperty(`--dyte-space-${i}`,`${i*e}px`)})},EX=(t,e)=>{if(e in sT){const i=sT[e];Object.keys(i).forEach(s=>{t.style.setProperty(`--dyte-border-width-${s}`,`${i[s]}px`)})}},TX=(t,e)=>{if(e in rT){const i=rT[e];Object.keys(i).forEach(s=>{t.style.setProperty(`--dyte-border-radius-${s}`,`${i[s]}px`)})}},nT=(t,e)=>{Object.keys(e).forEach(i=>{const s=e[i];if(typeof s=="string")if(i==="text"||i==="text-on-brand"){const r=ym(s).join(" ");t.style.setProperty(`--dyte-colors-${i}-1000`,`${r}`),t.style.setProperty(`--dyte-colors-${i}-900`,`${r} / 0.88`),t.style.setProperty(`--dyte-colors-${i}-800`,`${r} / 0.76`),t.style.setProperty(`--dyte-colors-${i}-700`,`${r} / 0.64`),t.style.setProperty(`--dyte-colors-${i}-600`,`${r} / 0.52`)}else{const r=ym(s).join(" ");t.style.setProperty(`--dyte-colors-${i}`,r)}else typeof s=="object"&&Object.keys(s).forEach(r=>{const n=s[r],a=ym(n).join(" ");t.style.setProperty(`--dyte-colors-${i}-${r}`,a)})})},M1=(t,{spacingBase:e,borderRadius:i,borderWidth:s,colors:r,fontFamily:n,googleFont:a,theme:o})=>{if(typeof t!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(SX(a),t.style.setProperty("--dyte-font-family",a)),typeof n=="string"&&t.style.setProperty("--dyte-font-family",n),typeof e=="number"&&xX(t,e),typeof s=="string"&&EX(t,s),typeof i=="string"&&TX(t,i),typeof o=="string"){const c=vX[o];c!=null&&nT(t,c)}typeof r=="object"&&nT(t,r)};function CX(){this.__data__=[],this.size=0}function Dv(t,e){return t===e||t!==t&&e!==e}function Mv(t,e){for(var i=t.length;i--;)if(Dv(t[i][0],e))return i;return-1}var PX=Array.prototype,RX=PX.splice;function IX(t){var e=this.__data__,i=Mv(e,t);if(i<0)return!1;var s=e.length-1;return i==s?e.pop():RX.call(e,i,1),--this.size,!0}function AX(t){var e=this.__data__,i=Mv(e,t);return i<0?void 0:e[i][1]}function DX(t){return Mv(this.__data__,t)>-1}function MX(t,e){var i=this.__data__,s=Mv(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this}function ga(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}ga.prototype.clear=CX;ga.prototype.delete=IX;ga.prototype.get=AX;ga.prototype.has=DX;ga.prototype.set=MX;function OX(){this.__data__=new ga,this.size=0}function LX(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function NX(t){return this.__data__.get(t)}function UX(t){return this.__data__.has(t)}var $X="[object AsyncFunction]",jX="[object Function]",zX="[object GeneratorFunction]",FX="[object Proxy]";function nk(t){if(!wn(t))return!1;var e=bh(t);return e==jX||e==zX||e==$X||e==FX}var x0=Gc["__core-js_shared__"],aT=function(){var t=/[^.]+$/.exec(x0&&x0.keys&&x0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function VX(t){return!!aT&&aT in t}var BX=Function.prototype,HX=BX.toString;function WX(t){if(t!=null){try{return HX.call(t)}catch{}try{return t+""}catch{}}return""}var qX=/[\\^$.*+?()[\]{}|]/g,GX=/^\[object .+?Constructor\]$/,JX=Function.prototype,KX=Object.prototype,QX=JX.toString,YX=KX.hasOwnProperty,ZX=RegExp("^"+QX.call(YX).replace(qX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function XX(t){if(!wn(t)||VX(t))return!1;var e=nk(t)?ZX:GX;return e.test(WX(t))}function eee(t,e){return t==null?void 0:t[e]}function ak(t,e){var i=eee(t,e);return XX(i)?i:void 0}var n4=ak(Gc,"Map"),Hp=ak(Object,"create");function tee(){this.__data__=Hp?Hp(null):{},this.size=0}function iee(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var see="__lodash_hash_undefined__",ree=Object.prototype,nee=ree.hasOwnProperty;function aee(t){var e=this.__data__;if(Hp){var i=e[t];return i===see?void 0:i}return nee.call(e,t)?e[t]:void 0}var oee=Object.prototype,cee=oee.hasOwnProperty;function dee(t){var e=this.__data__;return Hp?e[t]!==void 0:cee.call(e,t)}var lee="__lodash_hash_undefined__";function uee(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Hp&&e===void 0?lee:e,this}function Lc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Lc.prototype.clear=tee;Lc.prototype.delete=iee;Lc.prototype.get=aee;Lc.prototype.has=dee;Lc.prototype.set=uee;function pee(){this.size=0,this.__data__={hash:new Lc,map:new(n4||ga),string:new Lc}}function hee(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ov(t,e){var i=t.__data__;return hee(e)?i[typeof e=="string"?"string":"hash"]:i.map}function gee(t){var e=Ov(this,t).delete(t);return this.size-=e?1:0,e}function mee(t){return Ov(this,t).get(t)}function fee(t){return Ov(this,t).has(t)}function vee(t,e){var i=Ov(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this}function jl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}jl.prototype.clear=pee;jl.prototype.delete=gee;jl.prototype.get=mee;jl.prototype.has=fee;jl.prototype.set=vee;var yee=200;function bee(t,e){var i=this.__data__;if(i instanceof ga){var s=i.__data__;if(!n4||s.length<yee-1)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new jl(s)}return i.set(t,e),this.size=i.size,this}function zl(t){var e=this.__data__=new ga(t);this.size=e.size}zl.prototype.clear=OX;zl.prototype.delete=LX;zl.prototype.get=NX;zl.prototype.has=UX;zl.prototype.set=bee;var Sf=function(){try{var t=ak(Object,"defineProperty");return t({},"",{}),t}catch{}}();function ok(t,e,i){e=="__proto__"&&Sf?Sf(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function O1(t,e,i){(i!==void 0&&!Dv(t[e],i)||i===void 0&&!(e in t))&&ok(t,e,i)}function wee(t){return function(e,i,s){for(var r=-1,n=Object(e),a=s(e),o=a.length;o--;){var c=a[t?o:++r];if(i(n[c],c,n)===!1)break}return e}}var _ee=wee(),a4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oT=a4&&typeof module=="object"&&module&&!module.nodeType&&module,kee=oT&&oT.exports===a4,cT=kee?Gc.Buffer:void 0,dT=cT?cT.allocUnsafe:void 0;function See(t,e){if(e)return t.slice();var i=t.length,s=dT?dT(i):new t.constructor(i);return t.copy(s),s}var lT=Gc.Uint8Array;function xee(t){var e=new t.constructor(t.byteLength);return new lT(e).set(new lT(t)),e}function Eee(t,e){var i=e?xee(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Tee(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}var uT=Object.create,Cee=function(){function t(){}return function(e){if(!wn(e))return{};if(uT)return uT(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function Pee(t,e){return function(i){return t(e(i))}}var o4=Pee(Object.getPrototypeOf,Object),Ree=Object.prototype;function c4(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||Ree;return t===i}function Iee(t){return typeof t.constructor=="function"&&!c4(t)?Cee(o4(t)):{}}var Aee="[object Arguments]";function pT(t){return $l(t)&&bh(t)==Aee}var d4=Object.prototype,Dee=d4.hasOwnProperty,Mee=d4.propertyIsEnumerable,L1=pT(function(){return arguments}())?pT:function(t){return $l(t)&&Dee.call(t,"callee")&&!Mee.call(t,"callee")},N1=Array.isArray,Oee=9007199254740991;function l4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Oee}function ck(t){return t!=null&&l4(t.length)&&!nk(t)}function Lee(t){return $l(t)&&ck(t)}function Nee(){return!1}var u4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hT=u4&&typeof module=="object"&&module&&!module.nodeType&&module,Uee=hT&&hT.exports===u4,gT=Uee?Gc.Buffer:void 0,$ee=gT?gT.isBuffer:void 0,p4=$ee||Nee,jee="[object Object]",zee=Function.prototype,Fee=Object.prototype,h4=zee.toString,Vee=Fee.hasOwnProperty,Bee=h4.call(Object);function Hee(t){if(!$l(t)||bh(t)!=jee)return!1;var e=o4(t);if(e===null)return!0;var i=Vee.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&h4.call(i)==Bee}var Wee="[object Arguments]",qee="[object Array]",Gee="[object Boolean]",Jee="[object Date]",Kee="[object Error]",Qee="[object Function]",Yee="[object Map]",Zee="[object Number]",Xee="[object Object]",ete="[object RegExp]",tte="[object Set]",ite="[object String]",ste="[object WeakMap]",rte="[object ArrayBuffer]",nte="[object DataView]",ate="[object Float32Array]",ote="[object Float64Array]",cte="[object Int8Array]",dte="[object Int16Array]",lte="[object Int32Array]",ute="[object Uint8Array]",pte="[object Uint8ClampedArray]",hte="[object Uint16Array]",gte="[object Uint32Array]",vt={};vt[ate]=vt[ote]=vt[cte]=vt[dte]=vt[lte]=vt[ute]=vt[pte]=vt[hte]=vt[gte]=!0;vt[Wee]=vt[qee]=vt[rte]=vt[Gee]=vt[nte]=vt[Jee]=vt[Kee]=vt[Qee]=vt[Yee]=vt[Zee]=vt[Xee]=vt[ete]=vt[tte]=vt[ite]=vt[ste]=!1;function mte(t){return $l(t)&&l4(t.length)&&!!vt[bh(t)]}function fte(t){return function(e){return t(e)}}var g4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dp=g4&&typeof module=="object"&&module&&!module.nodeType&&module,vte=dp&&dp.exports===g4,E0=vte&&YI.process,mT=function(){try{var t=dp&&dp.require&&dp.require("util").types;return t||E0&&E0.binding&&E0.binding("util")}catch{}}(),fT=mT&&mT.isTypedArray,m4=fT?fte(fT):mte;function U1(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var yte=Object.prototype,bte=yte.hasOwnProperty;function wte(t,e,i){var s=t[e];(!(bte.call(t,e)&&Dv(s,i))||i===void 0&&!(e in t))&&ok(t,e,i)}function _te(t,e,i,s){var r=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=s?s(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),r?ok(i,o,c):wte(i,o,c)}return i}function kte(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}var Ste=9007199254740991,xte=/^(?:0|[1-9]\d*)$/;function f4(t,e){var i=typeof t;return e=e==null?Ste:e,!!e&&(i=="number"||i!="symbol"&&xte.test(t))&&t>-1&&t%1==0&&t<e}var Ete=Object.prototype,Tte=Ete.hasOwnProperty;function Cte(t,e){var i=N1(t),s=!i&&L1(t),r=!i&&!s&&p4(t),n=!i&&!s&&!r&&m4(t),a=i||s||r||n,o=a?kte(t.length,String):[],c=o.length;for(var u in t)(e||Tte.call(t,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||f4(u,c)))&&o.push(u);return o}function Pte(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var Rte=Object.prototype,Ite=Rte.hasOwnProperty;function Ate(t){if(!wn(t))return Pte(t);var e=c4(t),i=[];for(var s in t)s=="constructor"&&(e||!Ite.call(t,s))||i.push(s);return i}function v4(t){return ck(t)?Cte(t,!0):Ate(t)}function Dte(t){return _te(t,v4(t))}function Mte(t,e,i,s,r,n,a){var o=U1(t,i),c=U1(e,i),u=a.get(c);if(u){O1(t,i,u);return}var l=n?n(o,c,i+"",t,e,a):void 0,h=l===void 0;if(h){var g=N1(c),m=!g&&p4(c),f=!g&&!m&&m4(c);l=c,g||m||f?N1(o)?l=o:Lee(o)?l=Tee(o):m?(h=!1,l=See(c,!0)):f?(h=!1,l=Eee(c,!0)):l=[]:Hee(c)||L1(c)?(l=o,L1(o)?l=Dte(o):(!wn(o)||nk(o))&&(l=Iee(c))):h=!1}h&&(a.set(c,l),r(l,c,s,n,a),a.delete(c)),O1(t,i,l)}function y4(t,e,i,s,r){t!==e&&_ee(e,function(n,a){if(r||(r=new zl),wn(n))Mte(t,e,a,i,y4,s,r);else{var o=s?s(U1(t,a),n,a+"",t,e,r):void 0;o===void 0&&(o=n),O1(t,a,o)}},v4)}function b4(t){return t}function Ote(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var vT=Math.max;function Lte(t,e,i){return e=vT(e===void 0?t.length-1:e,0),function(){for(var s=arguments,r=-1,n=vT(s.length-e,0),a=Array(n);++r<n;)a[r]=s[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=s[r];return o[e]=i(a),Ote(t,this,o)}}function Nte(t){return function(){return t}}var Ute=Sf?function(t,e){return Sf(t,"toString",{configurable:!0,enumerable:!1,value:Nte(e),writable:!0})}:b4,$te=800,jte=16,zte=Date.now;function Fte(t){var e=0,i=0;return function(){var s=zte(),r=jte-(s-i);if(i=s,r>0){if(++e>=$te)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Vte=Fte(Ute);function Bte(t,e){return Vte(Lte(t,e,b4),t+"")}function Hte(t,e,i){if(!wn(i))return!1;var s=typeof e;return(s=="number"?ck(i)&&f4(e,i.length):s=="string"&&e in i)?Dv(i[e],t):!1}function Wte(t){return Bte(function(e,i){var s=-1,r=i.length,n=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(r--,n):void 0,a&&Hte(i[0],i[1],a)&&(n=r<3?void 0:n,r=1),e=Object(e);++s<r;){var o=i[s];o&&t(e,o,s,n)}return e})}var w4=Wte(function(t,e,i){y4(t,e,i)});const qte=(t,e=Re)=>{let i=Object.assign({},e);return w4(i,t),i},_4=(t,e,i={},s={grid_pagination:!0,settings_toggle:!0})=>{var r,n,a,o,c,u,l,h,g,m,f,_,k,y,b,x;const C={showSetupScreen:!0};let D,M=["dyte-stage"],L={},V={};const se=(s==null?void 0:s.settings_toggle)!==!1,Q=(s==null?void 0:s.grid_pagination)!==!1;if(!((r=t.controlBar)===null||r===void 0)&&r.isEnabled){M.push("dyte-controlbar");const{elements:ze}=t.controlBar,Xe=[...ze.fullscreen?["dyte-fullscreen-toggle"]:[],...se?["dyte-settings-toggle"]:[]],xt=[],Ut=[];e.troubleshoot!==void 0&&Ut.push("dyte-debugger-toggle"),e.participants.pip.isSupported()&&((a=(n=e.self)===null||n===void 0?void 0:n.config)===null||a===void 0?void 0:a.pipMode)&&((o=e.self.config)===null||o===void 0?void 0:o.viewType)!=="LIVESTREAM"&&Ut.push("dyte-pip-toggle"),e!=null&&e.self.permissions.canDisableParticipantAudio&&Ut.push("dyte-mute-all-button"),s4(e)&&Ut.push("dyte-breakout-rooms-toggle"),!((c=e.self)===null||c===void 0)&&c.permissions.canRecord&&Ut.push("dyte-recording-toggle"),XI(e)&&Xe.push("dyte-livestream-toggle"),ze.screenshare&&Xe.push("dyte-screen-share-toggle"),ze.chat&&xt.push("dyte-chat-toggle"),ze.polls&&xt.push("dyte-polls-toggle"),ze.participants&&xt.push("dyte-participants-toggle"),ze.plugins&&xt.push("dyte-plugins-toggle"),xt.push("dyte-ai-toggle");const cs=["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle","dyte-leave-button"];Ut.length>0&&cs.push("dyte-more-toggle");const z=Xe.concat(xt).concat(Ut);let W=!1;z.length>0&&(W=!0),V={"dyte-controlbar":{states:["activeMoreMenu"],children:["div#controlbar-left","div#controlbar-center","div#controlbar-right"]},"div#controlbar-left":Xe,"div#controlbar-center":cs,"div#controlbar-right":xt,"dyte-more-toggle":{states:["activeMoreMenu"],children:[]},"dyte-more-toggle.activeMoreMenu":Ut.map(Y=>[Y,{variant:"horizontal",slot:"more-elements"}]),"dyte-controlbar.sm":["div#controlbar-mobile"],"dyte-controlbar.md":["div#controlbar-mobile"],"dyte-more-toggle.activeMoreMenu.md":z.map(Y=>[Y,{variant:"horizontal",slot:"more-elements"}]),"dyte-more-toggle.activeMoreMenu.sm":z.map(Y=>[Y,{variant:"horizontal",slot:"more-elements"}]),"div#controlbar-mobile":["dyte-mic-toggle","dyte-camera-toggle","dyte-stage-toggle",W&&"dyte-more-toggle","dyte-leave-button"]}}if(!((u=t.header)===null||u===void 0)&&u.isEnabled){M.unshift("dyte-header");const{elements:ze}=t.header;let Xe=["dyte-recording-indicator","dyte-livestream-indicator"],xt=[],Ut=[];Q&&Ut.push("dyte-grid-pagination"),ze.title&&xt.push("dyte-meeting-title"),typeof ze.logo=="string"&&ze.logo.length>0&&(D=ze.logo,Xe.unshift("dyte-logo")),ze.participantCount&&Ut.push("dyte-participant-count","dyte-viewer-count"),ze.timer&&Ut.push("dyte-clock"),L={"dyte-header":["div#header-left","div#header-center","div#header-right"],"dyte-header.sm":{remove:["div#header-center"]},"div#header-left":Xe,"div#header-center":xt,"div#header-right":Ut,"div#header-left.sm":{remove:["dyte-logo"],prepend:["dyte-meeting-title"]}}}M.push("dyte-participants-audio","dyte-dialog-manager");let te={logo:D};t.isV2===!0?(te=t.designTokens,jo((h=(l=t==null?void 0:t.designTokens)===null||l===void 0?void 0:l.colors)===null||h===void 0?void 0:h.textOnBrand)&&(te.colors["text-on-brand"]=(m=(g=t==null?void 0:t.designTokens)===null||g===void 0?void 0:g.colors)===null||m===void 0?void 0:m.textOnBrand),jo((_=(f=t==null?void 0:t.designTokens)===null||f===void 0?void 0:f.colors)===null||_===void 0?void 0:_.videoBg)&&(te.colors["video-bg"]=(y=(k=t==null?void 0:t.designTokens)===null||k===void 0?void 0:k.colors)===null||y===void 0?void 0:y.videoBg)):t.colors!=null&&(te.colors={},jo(t.colors.primary)?te.colors.brand=_X(t.colors.primary):typeof t.colors.primary=="object"&&(te.colors.brand=t.colors.primary),jo(t.colors.secondary)?te.colors.background=kX(t.colors.secondary):typeof t.colors.secondary=="object"&&(te.colors.background=t.colors.secondary),jo(t.colors.text)&&(te.colors.text=t.colors.text),jo(t.colors.textPrimary)&&(te.colors["text-on-brand"]=t.colors.textPrimary),jo(t.colors.videoBackground)&&(te.colors["video-bg"]=t.colors.videoBackground));let Ae={designTokens:te,styles:{"dyte-header":{display:"grid",height:"48px",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"dyte-header.sm":{display:"grid",gridArea:"header",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr",alignItems:"center"},"div#header-left":{display:"flex",alignItems:"center",height:"48px",wordBreak:"break-all"},"dyte-logo":{height:"26px"},"div#header-center":{display:"flex",alignItems:"center",justifyContent:"center",wordBreak:"break-all"},"div#header-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-stage":{display:"flex",flex:"1"},"dyte-grid":{flex:"1",height:"auto"},"dyte-controlbar":{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gridTemplateRows:"1fr",alignItems:"center",padding:"8px"},"dyte-controlbar.sm":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"dyte-controlbar.md":{display:"flex",position:"relative",backgroundColor:"var(--dyte-colors-background-1000, #000)"},"div#controlbar-left":{display:"flex",alignItems:"center"},"div#controlbar-center":{display:"flex",alignItems:"center",position:"relative",overflow:"visible",justifyContent:"center"},"div#controlbar-mobile":{display:"flex",flex:"1",alignItems:"center",justifyContent:"center",zIndex:"10000"},"div#controlbar-right":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"dyte-settings":{width:"720px",height:"480px"},"dyte-debugger":{width:"720px",height:"480px"},"div#setupcontrols-media":{position:"absolute",bottom:"8px",right:"8px",display:"flex"},"div#setupcontrols-settings":{position:"absolute",top:"8px",right:"8px"},"dyte-meeting-title.sm":{marginLeft:"0"},"dyte-clock":{marginRight:"0"}},root:Object.assign(Object.assign(Object.assign({"dyte-meeting":{state:"meeting",states:["activeSidebar","activeAI"]},"dyte-meeting[meeting=idle]":["dyte-idle-screen"],"dyte-meeting[meeting=waiting]":["dyte-waiting-screen"],"dyte-meeting[meeting=setup]":["dyte-setup-screen","dyte-dialog-manager"],"dyte-meeting[meeting=joined]":M,"dyte-meeting[meeting=joined].activeSidebar.sm":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeSidebar.md":{add:[["dyte-sidebar",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.sm":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=joined].activeAI.md":{add:[["dyte-ai",{view:"full-screen"}]]},"dyte-meeting[meeting=ended]":["dyte-ended-screen"]},L),V),{"dyte-stage":{states:["activeSidebar","activeAI"],children:["dyte-grid","dyte-notifications","dyte-transcripts"]},"dyte-stage.activeSidebar":{add:[["dyte-sidebar",{view:"sidebar"}]]},"dyte-stage.activeSidebar.sm":{remove:["dyte-sidebar"]},"dyte-stage.activeAI":{add:[["dyte-ai",{view:"sidebar"}]]},"dyte-stage.activeAI.sm":{remove:["dyte-ai"]},"dyte-grid":{states:["activeScreenShare","activePlugin","activeSpotlight"],children:["dyte-simple-grid"]},"dyte-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-grid.activeScreenShare":["dyte-mixed-grid"],"dyte-grid.activePlugin":["dyte-mixed-grid"],"dyte-grid.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeSpotlight":["dyte-mixed-grid"],"dyte-grid.activePlugin.activeScreenShare.activeSpotlight":["dyte-mixed-grid"],"dyte-mixed-grid":{states:["activeSpotlight"],children:["dyte-simple-grid"]},"dyte-mixed-grid.activeSpotlight":["dyte-spotlight-grid"],"dyte-participant-tile":{state:"meeting",children:["dyte-name-tag","dyte-avatar","dyte-network-indicator"]},"dyte-participant-setup":["dyte-avatar","div#setupcontrols-media"],"dyte-participant-tile[meeting=setup]":["dyte-avatar","div#setupcontrols-media",...se?["div#setupcontrols-settings"]:[]],"div#setupcontrols-media":[["dyte-mic-toggle",{size:"sm"}],["dyte-camera-toggle",{size:"sm"}]],"div#setupcontrols-settings":[["dyte-settings-toggle",{size:"sm"}],["dyte-debugger-toggle",{size:"sm"}]],"dyte-screenshare-view":["dyte-name-tag","dyte-network-indicator"],"dyte-name-tag":[["dyte-audio-visualizer",{slot:"start"}]]}),config:{notification_sounds:{participant_left:!1},participant_joined_sound_notification_limit:3,participant_chat_message_sound_notification_limit:10,videoFit:"cover"}};return Ae=qte(i,Ae),C.showSetupScreen=(x=(b=t.setupScreen)===null||b===void 0?void 0:b.isEnabled)!==null&&x!==void 0?x:!0,{config:Ae,data:C}},U={people:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 13.999 13 14a2 2 0 0 1 1.995 1.85L15 16v1.5C14.999 21 11.284 22 8.5 22c-2.722 0-6.335-.956-6.495-4.27L2 17.5v-1.501c0-1.054.816-1.918 1.85-1.995L4 14ZM15.22 14H20c1.054 0 1.918.816 1.994 1.85L22 16v1c-.001 3.062-2.858 4-5 4a7.16 7.16 0 0 1-2.14-.322c.336-.386.607-.827.802-1.327A6.19 6.19 0 0 0 17 19.5l.267-.006c.985-.043 3.086-.363 3.226-2.289L20.5 17v-1a.501.501 0 0 0-.41-.492L20 15.5h-4.051a2.957 2.957 0 0 0-.595-1.34L15.22 14H20h-4.78ZM4 15.499l-.1.01a.51.51 0 0 0-.254.136.506.506 0 0 0-.136.253l-.01.101V17.5c0 1.009.45 1.722 1.417 2.242.826.445 2.003.714 3.266.753l.317.005.317-.005c1.263-.039 2.439-.308 3.266-.753.906-.488 1.359-1.145 1.412-2.057l.005-.186V16a.501.501 0 0 0-.41-.492L13 15.5l-9-.001ZM8.5 3a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm9 2a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm-9-.5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3Zm9 2c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2Z" fill="currentColor"/></svg>',people_checked:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path fill="currentColor" d="M14.58 15.333H2.833a2.667 2.667 0 0 0-2.666 2.666v2l.006.307c.214 4.419 5.031 5.693 8.66 5.693 1.374 0 2.92-.182 4.32-.649a8.53 8.53 0 0 1-.717-1.87c-.93.298-2.027.478-3.18.513l-.423.006-.422-.006c-1.684-.052-3.254-.411-4.355-1.004-1.29-.694-1.89-1.644-1.89-2.99v-2.001l.014-.135a.675.675 0 0 1 .181-.337.68.68 0 0 1 .338-.181l.134-.014h10.31a8.71 8.71 0 0 1 1.436-1.998h.001Zm.253-8.667a6 6 0 1 0-12 0 6 6 0 0 0 12 0Zm-10 0c0-2.205 1.795-4 4-4 2.206 0 4 1.795 4 4s-1.794 4-4 4c-2.205 0-4-1.795-4-4ZM25.5 7.999a4.667 4.667 0 1 0-9.333 0A4.667 4.667 0 0 0 25.5 8Zm-7.333 0a2.67 2.67 0 0 1 2.666-2.666A2.67 2.67 0 0 1 23.5 7.999a2.67 2.67 0 0 1-2.667 2.667 2.67 2.67 0 0 1-2.666-2.667Zm10 13.334a7.333 7.333 0 1 1-14.667 0 7.333 7.333 0 0 1 14.667 0Zm-2.862-3.139a.666.666 0 0 0-.944 0l-4.86 4.863-2.196-2.196a.667.667 0 1 0-.944.944l2.667 2.666a.666.666 0 0 0 .944 0l5.333-5.333a.666.666 0 0 0 0-.944Z"/></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.96 9.96 0 0 1-4.587-1.112l-3.826 1.067a1.25 1.25 0 0 1-1.54-1.54l1.068-3.823A9.96 9.96 0 0 1 2 12C2 6.477 6.477 2 12 2Zm0 1.5A8.5 8.5 0 0 0 3.5 12c0 1.47.373 2.883 1.073 4.137l.15.27-1.112 3.984 3.987-1.112.27.15A8.5 8.5 0 1 0 12 3.5ZM8.75 13h4.498a.75.75 0 0 1 .102 1.493l-.102.007H8.75a.75.75 0 0 1-.102-1.493L8.75 13h4.498H8.75Zm0-3.5h6.505a.75.75 0 0 1 .101 1.493l-.101.007H8.75a.75.75 0 0 1-.102-1.493L8.75 9.5h6.505H8.75Z" fill="currentColor"/></svg>',poll:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.752 2a2.752 2.752 0 0 1 2.752 2.751V19.25a2.752 2.752 0 1 1-5.504 0V4.75A2.752 2.752 0 0 1 11.752 2Zm7 5a2.752 2.752 0 0 1 2.752 2.751v9.499a2.752 2.752 0 1 1-5.504 0V9.75A2.752 2.752 0 0 1 18.752 7Zm-14 5a2.752 2.752 0 0 1 2.752 2.751v4.499a2.752 2.752 0 0 1-5.504 0V14.75A2.752 2.752 0 0 1 4.752 12Zm7-8.5c-.692 0-1.252.56-1.252 1.251V19.25a1.252 1.252 0 0 0 2.504 0V4.75c0-.691-.56-1.251-1.252-1.251Zm7 5c-.691 0-1.252.56-1.252 1.251v9.499a1.252 1.252 0 0 0 2.504 0V9.75c0-.691-.56-1.251-1.252-1.251Zm-14 5c-.692 0-1.252.56-1.252 1.251v4.499a1.252 1.252 0 1 0 2.504 0V14.75c0-.691-.56-1.252-1.252-1.252Z" fill="currentColor"/></svg>',participants:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.754 10c.966 0 1.75.784 1.75 1.75v4.749a4.501 4.501 0 0 1-9.002 0V11.75c0-.966.783-1.75 1.75-1.75h5.502Zm0 1.5H9.252a.25.25 0 0 0-.25.25v4.749a3.001 3.001 0 0 0 6.002 0V11.75a.25.25 0 0 0-.25-.25ZM3.75 10h3.381a2.738 2.738 0 0 0-.618 1.5H3.75a.25.25 0 0 0-.25.25v3.249a2.501 2.501 0 0 0 3.082 2.433c.085.504.24.985.453 1.432A4.001 4.001 0 0 1 2 14.999V11.75c0-.966.784-1.75 1.75-1.75Zm13.125 0h3.375c.966 0 1.75.784 1.75 1.75V15a4 4 0 0 1-5.03 3.866c.214-.448.369-.929.455-1.433A2.5 2.5 0 0 0 20.5 15v-3.25a.25.25 0 0 0-.25-.25h-2.757a2.738 2.738 0 0 0-.618-1.5ZM12 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm6.5 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-13 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm6.5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-13 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"/></svg>',rocket:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M9.35 20.45 14.65 22.7Q15.55 20.9 16.575 19.15Q17.6 17.4 18.75 15.8L14.8 15Q14.8 15 14.8 15Q14.8 15 14.8 15ZM17.05 24.5 23.7 31.15Q26.55 29.85 29.05 28.2Q31.55 26.55 33.1 25Q37.15 20.95 39.05 16.7Q40.95 12.45 41.1 7.1Q35.75 7.25 31.5 9.15Q27.25 11.05 23.2 15.1Q21.65 16.65 20 19.15Q18.35 21.65 17.05 24.5ZM28.5 19.7Q27.5 18.7 27.5 17.225Q27.5 15.75 28.5 14.75Q29.5 13.75 30.975 13.75Q32.45 13.75 33.45 14.75Q34.45 15.75 34.45 17.225Q34.45 18.7 33.45 19.7Q32.45 20.7 30.975 20.7Q29.5 20.7 28.5 19.7ZM27.75 38.85 33.2 33.4Q33.2 33.4 33.2 33.4Q33.2 33.4 33.2 33.4L32.4 29.45Q30.8 30.6 29.05 31.625Q27.3 32.65 25.5 33.55ZM44.05 4.15Q44.5 10.95 42.35 16.55Q40.2 22.15 35.25 27.1Q35.2 27.15 35.15 27.2Q35.1 27.25 35.05 27.3L36.15 32.8Q36.3 33.55 36.075 34.25Q35.85 34.95 35.3 35.5L26.75 44.1L22.5 34.2L14 25.7L4.1 21.45L12.7 12.9Q13.25 12.35 13.95 12.125Q14.65 11.9 15.4 12.05L20.9 13.15Q20.95 13.1 21 13.075Q21.05 13.05 21.1 13Q26.05 8.05 31.65 5.875Q37.25 3.7 44.05 4.15ZM7.45 31.75Q9.2 30 11.725 29.975Q14.25 29.95 16 31.7Q17.75 33.45 17.725 35.975Q17.7 38.5 15.95 40.25Q14.65 41.55 11.925 42.4Q9.2 43.25 3.75 44Q4.5 38.55 5.325 35.8Q6.15 33.05 7.45 31.75ZM9.55 33.9Q8.85 34.65 8.3 36.25Q7.75 37.85 7.35 40.35Q9.85 39.95 11.45 39.4Q13.05 38.85 13.8 38.15Q14.75 37.3 14.775 36.025Q14.8 34.75 13.9 33.8Q12.95 32.9 11.675 32.925Q10.4 32.95 9.55 33.9Z" fill="currentColor" /></svg>',call_end:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.903 13.202-.191.816a2.75 2.75 0 0 1-2.955 2.107l-1.755-.178A2.75 2.75 0 0 1 14.6 13.83l-.389-1.686a.25.25 0 0 0-.113-.157c-.321-.197-1.034-.32-2.098-.32-.786 0-1.386.067-1.786.189-.14.043-.238.085-.301.116l-.09.048-.015.04-.409 1.77A2.75 2.75 0 0 1 7 15.948l-1.746.177A2.75 2.75 0 0 1 2.3 14.03l-.196-.817a3.75 3.75 0 0 1 1.13-3.651C5.134 7.839 8.064 7 12 7c3.943 0 6.875.842 8.776 2.57a3.75 3.75 0 0 1 1.172 3.41l-.045.222Zm-1.426-.514a2.25 2.25 0 0 0-.71-2.009C18.184 9.241 15.602 8.5 12 8.5c-3.598 0-6.177.739-7.76 2.172a2.25 2.25 0 0 0-.677 2.19l.196.818a1.25 1.25 0 0 0 1.342.953l1.746-.178a1.25 1.25 0 0 0 1.09-.962l.423-1.82.043-.136c.376-.998 1.591-1.37 3.597-1.37 1.318 0 2.265.164 2.88.54.401.245.687.642.793 1.1l.389 1.685c.12.522.56.909 1.092.963l1.754.178a1.25 1.25 0 0 0 1.343-.958l.192-.816.034-.171Z" fill="currentColor"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 2.498a3.502 3.502 0 1 1-2.597 5.851l-4.558 2.604a3.5 3.5 0 0 1 0 2.093l4.557 2.606a3.502 3.502 0 1 1-.745 1.302L9.1 14.347a3.502 3.502 0 1 1 0-4.698l4.557-2.604A3.502 3.502 0 0 1 17 2.498Zm0 13.5a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm-10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Zm10.498-6a2.002 2.002 0 1 0 0 4.004 2.002 2.002 0 0 0 0-4.004Z" fill="currentColor"/></svg>',mic_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 11a.75.75 0 0 1 .743.648l.007.102v.5a6.75 6.75 0 0 1-6.249 6.732l-.001 2.268a.75.75 0 0 1-1.493.102l-.007-.102v-2.268a6.75 6.75 0 0 1-6.246-6.496L5 12.25v-.5a.75.75 0 0 1 1.493-.102l.007.102v.5a5.25 5.25 0 0 0 5.034 5.246l.216.004h.5a5.25 5.25 0 0 0 5.246-5.034l.004-.216v-.5a.75.75 0 0 1 .75-.75ZM12 2a4 4 0 0 1 4 4v6a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 9.5 6v6a2.5 2.5 0 0 0 5 0V6A2.5 2.5 0 0 0 12 3.5Z" fill="currentColor"/></svg>',mic_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L8 9.06V12a4 4 0 0 0 6.248 3.309l1.146 1.146A5.227 5.227 0 0 1 12.25 17.5h-.5l-.216-.004A5.25 5.25 0 0 1 6.5 12.25v-.5l-.007-.102A.75.75 0 0 0 5 11.75v.5l.004.236a6.75 6.75 0 0 0 6.246 6.496v2.268l.007.102a.75.75 0 0 0 1.493-.102l.001-2.268a6.718 6.718 0 0 0 3.712-1.458l4.256 4.256a.75.75 0 0 0 1.061-1.06L3.28 2.22Zm9.876 11.997A2.5 2.5 0 0 1 9.5 12v-1.44l3.656 3.657ZM14.5 6v5.318l1.43 1.43c.046-.242.07-.492.07-.748V6a4 4 0 0 0-7.862-1.044L9.5 6.318V6a2.5 2.5 0 0 1 5 0ZM17.196 14.014l1.146 1.146A6.725 6.725 0 0 0 19 12.25v-.5l-.007-.102a.75.75 0 0 0-1.493.102v.5l-.004.216a5.233 5.233 0 0 1-.3 1.548Z" fill="currentColor"/></svg>',video_on:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.75 4.5A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75a.75.75 0 0 1-1.136.643L17 16.075v.175a3.25 3.25 0 0 1-3.25 3.25h-8.5A3.25 3.25 0 0 1 2 16.25v-8.5A3.25 3.25 0 0 1 5.25 4.5h8.5Zm0 1.5h-8.5A1.75 1.75 0 0 0 3.5 7.75v8.5c0 .966.784 1.75 1.75 1.75h8.5a1.75 1.75 0 0 0 1.75-1.75v-8.5A1.75 1.75 0 0 0 13.75 6Zm6.75 1.573L17 9.674v4.651l3.5 2.1V7.573Z" fill="currentColor"/></svg>',video_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.567 1.567A3.25 3.25 0 0 0 2 7.75v8.5a3.25 3.25 0 0 0 3.25 3.25h8.5a3.25 3.25 0 0 0 2.903-1.786l4.066 4.067a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm12.196 14.317A1.75 1.75 0 0 1 13.75 18h-8.5a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.869.633-1.59 1.463-1.727l10.514 10.514ZM15.5 12.318V7.75A1.75 1.75 0 0 0 13.75 6H9.182l-1.5-1.5h6.068A3.25 3.25 0 0 1 17 7.75v.173l3.864-2.318A.75.75 0 0 1 22 6.248V17.75c0 .301-.17.543-.403.665L20.5 17.318V7.573L17 9.674v4.144l-1.5-1.5Z" fill="currentColor"/></svg>',share_screen_start:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M12 7.245a.75.75 0 0 1 .53.22l3.255 3.255a.75.75 0 1 1-1.06 1.06L12.75 9.806v6.447a.75.75 0 0 1-1.5 0V9.808L9.28 11.78a.75.75 0 1 1-1.06-1.06l3.25-3.254a.75.75 0 0 1 .53-.22Z"/></svg>',share_screen_stop:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.25A2.25 2.25 0 0 1 4.25 4h15.5A2.25 2.25 0 0 1 22 6.25v11.5A2.25 2.25 0 0 1 19.75 20H4.25A2.25 2.25 0 0 1 2 17.75V6.25Zm2.25-.75a.75.75 0 0 0-.75.75v11.5c0 .414.336.75.75.75h15.5a.75.75 0 0 0 .75-.75V6.25a.75.75 0 0 0-.75-.75H4.25Z"/><path d="M8.22 8.215a.75.75 0 0 1 1.06 0l2.72 2.72 2.725-2.716a.75.75 0 0 1 1.06 1.062l-2.724 2.715 2.724 2.724a.75.75 0 1 1-1.06 1.06L12 13.057 9.28 15.78a.75.75 0 0 1-1.06-1.06l2.72-2.724-2.72-2.72a.75.75 0 0 1 0-1.06Z"/></svg>',share_screen_person:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25V13h-.258a3.74 3.74 0 0 0-1.242-2.545V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75H12v.5c0 .34.04.674.118 1H5.25A3.25 3.25 0 0 1 2 16.75v-9.5ZM21.5 17a1.5 1.5 0 0 1 1.5 1.5v.5c0 1.971-1.86 4-5 4-3.14 0-5-2.029-5-4v-.5a1.5 1.5 0 0 1 1.5-1.5h7ZM18 10.5a2.75 2.75 0 1 1 0 5.5 2.75 2.75 0 0 1 0-5.5Z" fill="currentColor"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM11.25 6a.75.75 0 0 1 .743.648L12 6.75V12h3.25a.75.75 0 0 1 .102 1.493l-.102.007h-4a.75.75 0 0 1-.743-.648l-.007-.102v-6a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',dismiss:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m4.397 4.554.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084-.073.084Z" fill="currentColor"/></svg>',send:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.694 12 2.299 3.272c-.236-.607.356-1.188.942-.982l.093.04 18 9a.75.75 0 0 1 .097 1.283l-.097.058-18 9a.75.75 0 0 1-1.065-.847l.03-.096L5.694 12 2.299 3.272 5.694 12ZM4.402 4.54l2.61 6.71h6.627a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.649.743l-.101.007H7.01l-2.609 6.71L19.322 12 4.401 4.54Z" fill="currentColor"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2.75a7.25 7.25 0 0 1 5.63 11.819l4.9 4.9a.75.75 0 0 1-.976 1.134l-.084-.073-4.901-4.9A7.25 7.25 0 1 1 10 2.75Zm0 1.5a5.75 5.75 0 1 0 0 11.5 5.75 5.75 0 0 0 0-11.5Z" fill="currentColor"/</svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM12 13.75a1.75 1.75 0 1 1 0-3.5 1.75 1.75 0 0 1 0 3.5ZM10.25 18a1.75 1.75 0 1 0 3.5 0 1.75 1.75 0 0 0-3.5 0Z" fill="currentColor"/></svg>',chevron_down:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 8.47a.75.75 0 0 1 1.06 0L12 15.19l6.72-6.72a.75.75 0 1 1 1.06 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L4.22 9.53a.75.75 0 0 1 0-1.06Z" fill="currentColor"/></svg>',chevron_up:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.22 15.53a.75.75 0 0 0 1.06 0L12 8.81l6.72 6.72a.75.75 0 1 0 1.06-1.06l-7.25-7.25a.75.75 0 0 0-1.06 0l-7.25 7.25a.75.75 0 0 0 0 1.06Z" fill="currentColor"/></svg>',chevron_left:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.53 4.22a.75.75 0 0 1 0 1.06L8.81 12l6.72 6.72a.75.75 0 1 1-1.06 1.06l-7.25-7.25a.75.75 0 0 1 0-1.06l7.25-7.25a.75.75 0 0 1 1.06 0Z" fill="currentColor"/></svg>',chevron_right:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0Z" fill="currentColor"/></svg>',settings:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.745 10.75a8.291 8.291 0 0 1 1.492 2.07.75.75 0 1 1-1.335.683 6.798 6.798 0 0 0-1.218-1.692 6.562 6.562 0 0 0-10.493 1.673.75.75 0 1 1-1.339-.677 8.062 8.062 0 0 1 12.893-2.057Zm-2.102 3.07c.448.447.816.997 1.072 1.582a.75.75 0 1 1-1.373.602 3.72 3.72 0 0 0-.76-1.124 3.592 3.592 0 0 0-5.08 0c-.31.31-.562.689-.746 1.11a.75.75 0 1 1-1.375-.6 5.11 5.11 0 0 1 1.061-1.57 5.092 5.092 0 0 1 7.201 0Zm4.805-5.541c.51.509.99 1.09 1.409 1.697a.75.75 0 0 1-1.235.852 10.822 10.822 0 0 0-1.234-1.489c-4.08-4.08-10.695-4.08-14.776 0-.421.422-.84.934-1.222 1.484a.75.75 0 0 1-1.232-.855c.43-.62.905-1.2 1.394-1.69 4.666-4.665 12.23-4.665 16.896 0Zm-7.387 8.16a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122Z" fill="currentColor"/></svg>',speaker:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 4.25c0-1.079-1.274-1.65-2.08-.934L8.427 7.309a.75.75 0 0 1-.498.19H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V4.25ZM9.425 8.43 13.5 4.807v14.382l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.68a2.25 2.25 0 0 0 1.495-.569ZM18.992 5.897a.75.75 0 0 1 1.049.157A9.959 9.959 0 0 1 22 12a9.96 9.96 0 0 1-1.96 5.946.75.75 0 0 1-1.205-.892A8.459 8.459 0 0 0 20.5 12a8.459 8.459 0 0 0-1.665-5.054.75.75 0 0 1 .157-1.049Z" /><path d="M17.143 8.37a.75.75 0 0 1 1.017.302c.536.99.84 2.125.84 3.328a6.973 6.973 0 0 1-.84 3.328.75.75 0 0 1-1.32-.714c.42-.777.66-1.666.66-2.614s-.24-1.837-.66-2.614a.75.75 0 0 1 .303-1.017Z"/></svg>',speaker_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06L6.438 7.5H4.25A2.25 2.25 0 0 0 2 9.749v4.497a2.25 2.25 0 0 0 2.25 2.25h3.68a.75.75 0 0 1 .498.19l4.491 3.994c.806.716 2.081.144 2.081-.934V16.06l5.72 5.72a.75.75 0 0 0 1.06-1.061L3.28 2.22ZM13.5 14.56v4.629l-4.075-3.624a2.25 2.25 0 0 0-1.495-.569H4.25a.75.75 0 0 1-.75-.75V9.75a.75.75 0 0 1 .75-.75h3.688L13.5 14.56ZM13.5 4.807v5.511l1.5 1.5V4.25c0-1.079-1.274-1.65-2.08-.934l-3.4 3.022 1.063 1.063L13.5 4.807ZM17.141 13.96l1.138 1.137A6.974 6.974 0 0 0 19 12a6.973 6.973 0 0 0-.84-3.328.75.75 0 0 0-1.32.714c.42.777.66 1.666.66 2.614 0 .691-.127 1.351-.359 1.96ZM19.388 16.206l1.093 1.094A9.955 9.955 0 0 0 22 12a9.959 9.959 0 0 0-1.96-5.946.75.75 0 0 0-1.205.892A8.46 8.46 0 0 1 20.5 12a8.458 8.458 0 0 1-1.112 4.206Z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .004a.75.75 0 1 1 0-1.5l13-.004ZM11.648 2.012l.102-.007a.75.75 0 0 1 .743.648l.007.102-.001 13.685 3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072 3.719 3.714L11 2.755a.75.75 0 0 1 .648-.743l.102-.007-.102.007Z" fill="currentColor"/></svg>',full_screen_maximize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0v-2ZM4.5 18.25c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0v2ZM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5h2ZM19.5 18.25c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0v2Z" fill="currentColor"/></svg>',full_screen_minimize:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25v-2.5ZM8.5 20.25a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25v2.5ZM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75ZM15.5 20.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25v2.5Z" fill="currentColor"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.503 4.627 5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.251 2.251 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123ZM17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2h9Zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75Z" fill="currentColor"/></svg>',attach:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.772 3.743a6 6 0 0 1 8.66 8.302l-.19.197-8.8 8.798-.036.03a3.723 3.723 0 0 1-5.489-4.973.764.764 0 0 1 .085-.13l.054-.06.086-.088.142-.148.002.003 7.436-7.454a.75.75 0 0 1 .977-.074l.084.073a.75.75 0 0 1 .074.976l-.073.084-7.594 7.613a2.23 2.23 0 0 0 3.174 3.106l8.832-8.83A4.502 4.502 0 0 0 13 4.644l-.168.16-.013.014-9.536 9.536a.75.75 0 0 1-1.133-.977l.072-.084 9.549-9.55h.002Z" fill="currentColor"/></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',emoji_multiple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.5 2a6.503 6.503 0 0 1 6.312 4.943c-.515.01-1.02.068-1.506.171a5 5 0 1 0-6.191 6.191 8.053 8.053 0 0 0-.172 1.507A6.5 6.5 0 0 1 8.5 2Zm.16 8.006c.355-.451.759-.864 1.202-1.23a3.5 3.5 0 0 0-4.022.95.75.75 0 1 0 1.14.974 2 2 0 0 1 1.68-.694ZM7.5 6.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5.458 2.042a.75.75 0 0 1 .082 1.058 4 4 0 0 1-6.075.005.75.75 0 0 1 1.138-.977 2.499 2.499 0 0 0 3.797-.003.75.75 0 0 1 1.058-.083ZM17.5 14.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM15 22a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11Z" fill="currentColor"/></svg>',image_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 1 0-1.06 1.06l1.263 1.264A3.235 3.235 0 0 0 3 6.25v11.5A3.25 3.25 0 0 0 6.25 21h11.5c.626 0 1.21-.177 1.706-.483l1.263 1.264a.75.75 0 0 0 1.061-1.061L3.28 2.22Zm8.788 10.909 6.206 6.206.056.066a1.746 1.746 0 0 1-.58.099H6.25c-.204 0-.4-.035-.582-.099l5.807-5.686.593-.586Zm-.95-.95a2.245 2.245 0 0 0-.692.464l-5.823 5.7a1.747 1.747 0 0 1-.103-.593V6.25c0-.206.036-.404.101-.588l6.518 6.518ZM19.5 16.318V6.25a1.75 1.75 0 0 0-1.75-1.75H7.682L6.182 3H17.75A3.25 3.25 0 0 1 21 6.25v11.568l-1.5-1.5Z" fill="currentColor"/><path d="M15.252 6.5a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z" fill="currentColor"/></svg>',disconnected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l3.364 3.365a11.99 11.99 0 0 0-2.033 1.634c-.49.489-.964 1.069-1.394 1.689a.75.75 0 1 0 1.233.855c.381-.55.8-1.062 1.222-1.484a10.468 10.468 0 0 1 2.063-1.604l1.591 1.592a8.062 8.062 0 0 0-1.923 1.424c-.61.61-1.109 1.3-1.491 2.056a.75.75 0 1 0 1.338.677 6.51 6.51 0 0 1 1.214-1.673 6.546 6.546 0 0 1 1.984-1.362l1.93 1.93a5.07 5.07 0 0 0-2.876 1.44 5.11 5.11 0 0 0-1.061 1.57.75.75 0 0 0 1.374.602c.185-.422.437-.8.747-1.111a3.59 3.59 0 0 1 3.36-.958l7.858 7.858a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm8.304 6.182 1.584 1.584a6.532 6.532 0 0 1 3.516 1.825 6.798 6.798 0 0 1 1.217 1.692.75.75 0 1 0 1.336-.683 8.292 8.292 0 0 0-1.492-2.07 8.042 8.042 0 0 0-6.16-2.348ZM8.487 5.305 9.713 6.53a10.44 10.44 0 0 1 10.908 4.297.75.75 0 1 0 1.235-.852 11.946 11.946 0 0 0-13.369-4.67Zm4.573 11.134a1.5 1.5 0 1 1-2.121 2.122 1.5 1.5 0 0 1 2.121-2.122Z" fill="currentColor"/></svg>',wand:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.314 7.565-.136.126-10.48 10.488a2.27 2.27 0 0 0 3.211 3.208L16.388 10.9a2.251 2.251 0 0 0-.001-3.182l-.157-.146a2.25 2.25 0 0 0-2.916-.007Zm-.848 2.961 1.088 1.088-8.706 8.713a.77.77 0 1 1-1.089-1.088l8.707-8.713Zm4.386 4.48L16.75 15a.75.75 0 0 0-.743.648L16 15.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.694.648.743l.102.007H16v.75c0 .38.282.694.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V18h.75a.75.75 0 0 0 .743-.648L19 17.25a.75.75 0 0 0-.648-.743l-.102-.007h-.75v-.75a.75.75 0 0 0-.648-.743L16.75 15l.102.007Zm-1.553-6.254.027.027a.751.751 0 0 1 0 1.061l-.711.713-1.089-1.089.73-.73a.75.75 0 0 1 1.043.018ZM6.852 5.007 6.75 5a.75.75 0 0 0-.743.648L6 5.75v.75h-.75a.75.75 0 0 0-.743.648L4.5 7.25c0 .38.282.693.648.743L5.25 8H6v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648L7.5 8.75V8h.75a.75.75 0 0 0 .743-.648L9 7.25a.75.75 0 0 0-.648-.743L8.25 6.5H7.5v-.75a.75.75 0 0 0-.648-.743L6.75 5l.102.007Zm12-2L18.75 3a.75.75 0 0 0-.743.648L18 3.75v.75h-.75a.75.75 0 0 0-.743.648l-.007.102c0 .38.282.693.648.743L17.25 6H18v.75c0 .38.282.693.648.743l.102.007a.75.75 0 0 0 .743-.648l.007-.102V6h.75a.75.75 0 0 0 .743-.648L21 5.25a.75.75 0 0 0-.648-.743L20.25 4.5h-.75v-.75a.75.75 0 0 0-.648-.743L18.75 3l.102.007Z" fill="currentColor"/></svg>',recording:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM3.5 12a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Z"/></svg>',subtract:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.755 12.5h16.492a.75.75 0 0 0 0-1.5H3.755a.75.75 0 0 0 0 1.5Z" fill="currentColor"/></svg>',stop_recording:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.5C9.74566 3.5 7.58365 4.39553 5.98959 5.98959C4.39553 7.58365 3.5 9.74566 3.5 12C3.5 14.2543 4.39553 16.4163 5.98959 18.0104C7.58365 19.6045 9.74566 20.5 12 20.5C14.2543 20.5 16.4163 19.6045 18.0104 18.0104C19.6045 16.4163 20.5 14.2543 20.5 12C20.5 9.74566 19.6045 7.58365 18.0104 5.98959C16.4163 4.39553 14.2543 3.5 12 3.5ZM2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM8 9.5C8 9.10218 8.15804 8.72064 8.43934 8.43934C8.72064 8.15804 9.10218 8 9.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5C16 14.8978 15.842 15.2794 15.5607 15.5607C15.2794 15.842 14.8978 16 14.5 16H9.5C9.10218 16 8.72064 15.842 8.43934 15.5607C8.15804 15.2794 8 14.8978 8 14.5V9.5Z" fill="currentColor"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.91 2.782a2.25 2.25 0 0 1 2.975.74l.083.138 7.759 14.009a2.25 2.25 0 0 1-1.814 3.334l-.154.006H4.243a2.25 2.25 0 0 1-2.041-3.197l.072-.143L10.031 3.66a2.25 2.25 0 0 1 .878-.878Zm9.505 15.613-7.76-14.008a.75.75 0 0 0-1.254-.088l-.057.088-7.757 14.008a.75.75 0 0 0 .561 1.108l.095.006h15.516a.75.75 0 0 0 .696-1.028l-.04-.086-7.76-14.008 7.76 14.008ZM12 16.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997ZM11.995 8.5a.75.75 0 0 1 .744.647l.007.102.004 4.502a.75.75 0 0 1-1.494.103l-.006-.102-.004-4.502a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.242 2.932 4.826 4.826a2.75 2.75 0 0 1-.715 4.404l-4.87 2.435a.75.75 0 0 0-.374.426l-1.44 4.166a1.25 1.25 0 0 1-2.065.476L8.5 16.561 4.06 21H3v-1.06l4.44-4.44-3.105-3.104a1.25 1.25 0 0 1 .476-2.066l4.166-1.44a.75.75 0 0 0 .426-.373l2.435-4.87a2.75 2.75 0 0 1 4.405-.715Zm3.766 5.886-4.826-4.826a1.25 1.25 0 0 0-2.002.325l-2.435 4.871a2.25 2.25 0 0 1-1.278 1.12l-3.789 1.31 6.705 6.704 1.308-3.789a2.25 2.25 0 0 1 1.12-1.277l4.872-2.436a1.25 1.25 0 0 0 .325-2.002Z" fill="currentColor"/></svg>',pin_off:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.28 2.22a.75.75 0 0 0-1.06 1.06l5.905 5.905L4.81 10.33a1.25 1.25 0 0 0-.476 2.065L7.439 15.5 3 19.94V21h1.06l4.44-4.44 3.105 3.105a1.25 1.25 0 0 0 2.065-.476l1.145-3.313 5.905 5.904a.75.75 0 0 0 1.06-1.06L3.28 2.22Zm10.355 12.476-1.252 3.626-6.705-6.705 3.626-1.252 4.331 4.331Zm6.048-3.876-3.787 1.894 1.118 1.118 3.34-1.67a2.75 2.75 0 0 0 .714-4.404l-4.825-4.826a2.75 2.75 0 0 0-4.405.715l-1.67 3.34 1.118 1.117 1.894-3.787a1.25 1.25 0 0 1 2.002-.325l4.826 4.826a1.25 1.25 0 0 1-.325 2.002Z" fill="currentColor"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke-width="2" stroke="currentColor" stroke-opacity="0.2" vector-effect="non-scaling-stroke"/><path d="M22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"/></svg>',breakout_rooms:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.5 3a2.25 2.25 0 0 1 2.25 2.25v6h6A2.25 2.25 0 0 1 21 13.5v5.25A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h5.25Zm.75 9.75H4.5v6c0 .414.336.75.75.75h5.999l.001-6.75Zm7.5 0h-6.001v6.75h6.001a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75ZM10.5 4.5H5.25a.75.75 0 0 0-.75.75v6h6.75v-6a.75.75 0 0 0-.75-.75Zm7.398-2.493L18 2a.75.75 0 0 1 .743.648l.007.102v2.5h2.5a.75.75 0 0 1 .743.648L22 6a.75.75 0 0 1-.648.743l-.102.007h-2.5v2.5a.75.75 0 0 1-.648.743L18 10a.75.75 0 0 1-.743-.648l-.007-.102v-2.5h-2.5a.75.75 0 0 1-.743-.648L14 6a.75.75 0 0 1 .648-.743l.102-.007h2.5v-2.5a.75.75 0 0 1 .648-.743Z" fill="currentColor"/></svg>',add:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.75 3a.75.75 0 0 1 .743.648l.007.102.001 7.25h7.253a.75.75 0 0 1 .102 1.493l-.102.007h-7.253l.002 7.25a.75.75 0 0 1-1.493.101l-.007-.102-.002-7.249H3.752a.75.75 0 0 1-.102-1.493L3.752 11h7.25L11 3.75a.75.75 0 0 1 .75-.75Z" fill="currentColor"/></svg>',shuffle:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M14.0058 8.11111H18.7947L16.9613 9.94444C16.9095 9.99587 16.8684 10.057 16.8402 10.1243C16.812 10.1917 16.7974 10.2639 16.7971 10.3369C16.7966 10.4843 16.8547 10.6259 16.9586 10.7306C17.01 10.7823 17.0711 10.8235 17.1385 10.8517C17.2058 10.8799 17.278 10.8945 17.351 10.8947C17.4985 10.8953 17.64 10.8372 17.7447 10.7333L20.8891 7.59999L20.4947 7.20555L17.7447 4.46111C17.64 4.35723 17.4985 4.29917 17.351 4.29969C17.2036 4.30021 17.0624 4.35927 16.9586 4.46388C16.8547 4.5685 16.7966 4.71009 16.7971 4.85751C16.7977 5.00494 16.8567 5.14612 16.9613 5.24999L18.728 6.99999H13.6669C13.5699 7.00058 13.4748 7.02653 13.391 7.07526C13.3072 7.12399 13.2376 7.19381 13.1891 7.27777L11.7224 9.82777L12.3669 10.9389L14.0058 8.11111Z" fill="currentColor"/><path d="M8.15022 15.9278H3.66688C3.51954 15.9278 3.37823 15.9863 3.27405 16.0905C3.16986 16.1947 3.11133 16.336 3.11133 16.4833C3.11133 16.6307 3.16986 16.772 3.27405 16.8762C3.37823 16.9804 3.51954 17.0389 3.66688 17.0389H8.47244C8.56939 17.0383 8.6645 17.0124 8.74832 16.9636C8.83214 16.9149 8.90174 16.8451 8.95022 16.7611L10.4335 14.2222L9.77799 13.1111L8.15022 15.9278Z"/><path d="M17.7447 13.2056C17.64 13.1017 17.4985 13.0436 17.351 13.0441C17.2036 13.0447 17.0624 13.1037 16.9586 13.2083C16.8547 13.3129 16.7966 13.4545 16.7971 13.602C16.7977 13.7494 16.8567 13.8906 16.9613 13.9944L18.9058 15.9389H14.0058L8.95022 7.29444C8.90174 7.21047 8.83214 7.14066 8.74832 7.09193C8.6645 7.04319 8.56939 7.01725 8.47244 7.01666H3.66688C3.51954 7.01666 3.37823 7.07519 3.27405 7.17938C3.16986 7.28357 3.11133 7.42487 3.11133 7.57222C3.11133 7.71956 3.16986 7.86087 3.27405 7.96505C3.37823 8.06924 3.51954 8.12777 3.66688 8.12777H8.15022L13.2058 16.7667C13.2542 16.8506 13.3239 16.9204 13.4077 16.9692C13.4915 17.0179 13.5866 17.0439 13.6836 17.0444H18.6113L16.9447 18.7111C16.8929 18.7625 16.8517 18.8237 16.8235 18.891C16.7954 18.9584 16.7807 19.0306 16.7805 19.1036C16.7802 19.1766 16.7943 19.2489 16.822 19.3165C16.8497 19.384 16.8905 19.4454 16.9419 19.4972C16.9933 19.549 17.0545 19.5902 17.1218 19.6184C17.1891 19.6465 17.2614 19.6612 17.3344 19.6614C17.4074 19.6617 17.4797 19.6476 17.5472 19.6199C17.6148 19.5922 17.6762 19.5514 17.728 19.5L20.478 16.7556L20.8724 16.3611L17.7447 13.2056Z"/></svg>',edit:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06L9.062 20a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0ZM15 6.06 5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85 3.85-1.05A.75.75 0 0 0 8 18.938L17.94 9 15 6.06Zm2.03-2.03-.97.97L19 7.94l.97-.97a2.079 2.079 0 0 0-2.94-2.94Z" fill="currentColor"/></svg>',delete:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.75a3.25 3.25 0 0 1 3.245 3.066L15.25 5h5.25a.75.75 0 0 1 .102 1.493L20.5 6.5h-.796l-1.28 13.02a2.75 2.75 0 0 1-2.561 2.474l-.176.006H8.313a2.75 2.75 0 0 1-2.714-2.307l-.023-.174L4.295 6.5H3.5a.75.75 0 0 1-.743-.648L2.75 5.75a.75.75 0 0 1 .648-.743L3.5 5h5.25A3.25 3.25 0 0 1 12 1.75Zm6.197 4.75H5.802l1.267 12.872a1.25 1.25 0 0 0 1.117 1.122l.127.006h7.374c.6 0 1.109-.425 1.225-1.002l.02-.126L18.196 6.5ZM13.75 9.25a.75.75 0 0 1 .743.648L14.5 10v7a.75.75 0 0 1-1.493.102L13 17v-7a.75.75 0 0 1 .75-.75Zm-3.5 0a.75.75 0 0 1 .743.648L11 10v7a.75.75 0 0 1-1.493.102L9.5 17v-7a.75.75 0 0 1 .75-.75Zm1.75-6a1.75 1.75 0 0 0-1.744 1.606L10.25 5h3.5A1.75 1.75 0 0 0 12 3.25Z" fill="currentColor"/></svg>',back:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z" fill="currentColor"/></svg>',save:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>',web:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999ZM14.939 16.5H9.06c.652 2.414 1.786 4.002 2.939 4.002s2.287-1.588 2.939-4.002Zm-7.43 0H4.785a8.532 8.532 0 0 0 4.094 3.411c-.522-.82-.953-1.846-1.27-3.015l-.102-.395Zm11.705 0h-2.722c-.324 1.335-.792 2.5-1.373 3.411a8.528 8.528 0 0 0 3.91-3.127l.185-.283ZM7.094 10H3.735l-.005.017a8.525 8.525 0 0 0-.233 1.984c0 1.056.193 2.067.545 3h3.173a20.847 20.847 0 0 1-.123-5Zm8.303 0H8.603a18.966 18.966 0 0 0 .135 5h6.524a18.974 18.974 0 0 0 .135-5Zm4.868 0h-3.358c.062.647.095 1.317.095 2a20.3 20.3 0 0 1-.218 3h3.173a8.482 8.482 0 0 0 .544-3c0-.689-.082-1.36-.236-2ZM8.88 4.09l-.023.008A8.531 8.531 0 0 0 4.25 8.5h3.048c.314-1.752.86-3.278 1.583-4.41ZM12 3.499l-.116.005C10.62 3.62 9.396 5.622 8.83 8.5h6.342c-.566-2.87-1.783-4.869-3.045-4.995L12 3.5Zm3.12.59.107.175c.669 1.112 1.177 2.572 1.475 4.237h3.048a8.533 8.533 0 0 0-4.339-4.29l-.291-.121Z" fill="currentColor"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="m18 6.7-8.48 8.48-3.54-3.54a.996.996 0 1 0-1.41 1.41l4.24 4.24c.39.39 1.02.39 1.41 0l9.18-9.18a.999.999 0 0 0-.01-1.42c-.37-.38-1-.38-1.39.01z"/></svg>',spotlight:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19.745 4C20.3417 4 20.914 4.23705 21.336 4.65901C21.7579 5.08097 21.995 5.65326 21.995 6.25V12.805C21.5485 12.3774 21.0434 12.0154 20.495 11.73V6.25C20.495 6.05109 20.416 5.86032 20.2753 5.71967C20.1347 5.57902 19.9439 5.5 19.745 5.5H4.25C4.05109 5.5 3.86032 5.57902 3.71967 5.71967C3.57902 5.86032 3.5 6.05109 3.5 6.25V17.755C3.5 18.169 3.836 18.505 4.25 18.505L6.999 18.504L7 15.75C7.00002 15.3108 7.16517 14.8877 7.46268 14.5646C7.76019 14.2415 8.1683 14.0421 8.606 14.006L8.75 14H12.022C11.7223 14.4675 11.484 14.9716 11.313 15.5H8.75C8.69368 15.5001 8.63904 15.5192 8.59493 15.5542C8.55083 15.5893 8.51984 15.6382 8.507 15.693L8.5 15.75L8.499 18.504H11.077C11.1569 19.0193 11.2989 19.5229 11.5 20.004H4.25C3.65344 20.004 3.08129 19.7671 2.65936 19.3453C2.23744 18.9236 2.00027 18.3516 2 17.755V6.25C2 5.65326 2.23705 5.08097 2.65901 4.65901C3.08097 4.23705 3.65326 4 4.25 4H19.745Z"/><path d="M12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7ZM12 8.5C11.6022 8.5 11.2206 8.65804 10.9393 8.93934C10.658 9.22064 10.5 9.60218 10.5 10C10.5 10.3978 10.658 10.7794 10.9393 11.0607C11.2206 11.342 11.6022 11.5 12 11.5C12.3978 11.5 12.7794 11.342 13.0607 11.0607C13.342 10.7794 13.5 10.3978 13.5 10C13.5 9.60218 13.342 9.22064 13.0607 8.93934C12.7794 8.65804 12.3978 8.5 12 8.5Z"/><path d="M23 17.5C23 18.9587 22.4205 20.3576 21.3891 21.3891C20.3576 22.4205 18.9587 23 17.5 23C16.0413 23 14.6424 22.4205 13.6109 21.3891C12.5795 20.3576 12 18.9587 12 17.5C12 16.0413 12.5795 14.6424 13.6109 13.6109C14.6424 12.5795 16.0413 12 17.5 12C18.9587 12 20.3576 12.5795 21.3891 13.6109C22.4205 14.6424 23 16.0413 23 17.5ZM18.055 14.42C18.0207 14.2993 17.9479 14.193 17.8478 14.1174C17.7476 14.0417 17.6255 14.0008 17.5 14.0008C17.3745 14.0008 17.2524 14.0417 17.1522 14.1174C17.0521 14.193 16.9793 14.2993 16.945 14.42L16.388 16.208H14.585C14.019 16.208 13.785 16.962 14.242 17.308L15.7 18.413L15.143 20.2C14.968 20.761 15.584 21.228 16.042 20.881L17.5 19.777L18.958 20.881C19.416 21.228 20.032 20.761 19.857 20.201L19.3 18.413L20.758 17.309C21.216 16.962 20.981 16.208 20.415 16.208H18.612L18.055 14.421V14.42Z"/></svg>',join_stage:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M17.5 22C14.4618 22 12 19.5376 12 16.5C12 13.4623 14.4618 11 17.5 11C20.5371 11 23 13.4624 23 16.5C23 19.5376 20.5371 22 17.5 22ZM17.0704 18.992L17.1167 19.0322C17.1868 19.0841 17.2716 19.1125 17.3588 19.1132C17.4461 19.1139 17.5314 19.0869 17.6023 19.036L17.654 18.992L17.6936 18.9458C17.7455 18.8757 17.7739 18.7909 17.7746 18.7037C17.7753 18.6164 17.7483 18.5311 17.6975 18.4602L17.6535 18.4085L16.158 16.9125H19.8375L19.8936 16.9092C19.9829 16.8969 20.0657 16.8558 20.1293 16.792C20.193 16.7282 20.234 16.6454 20.2462 16.5561L20.25 16.5005L20.2462 16.4444C20.2339 16.3553 20.1928 16.2725 20.1292 16.2089C20.0655 16.1452 19.9828 16.1041 19.8936 16.0919L19.8375 16.088H16.158L17.654 14.592L17.6941 14.5453C17.7537 14.4659 17.7827 14.3676 17.7756 14.2686C17.7686 14.1695 17.726 14.0763 17.6558 14.0061C17.5856 13.9359 17.4924 13.8934 17.3934 13.8863C17.2943 13.8793 17.1961 13.9082 17.1167 13.9678L17.071 14.0079L14.8699 16.2079L14.8303 16.2547C14.7784 16.3247 14.75 16.4094 14.7493 16.4965C14.7485 16.5837 14.7753 16.6688 14.8259 16.7398L14.8699 16.7915L17.0704 18.992Z"/><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"></svg>',leave_stage:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.80546 3.80546C2.28973 4.32118 2 5.02065 2 5.75V16.25C2 16.6111 2.07113 16.9687 2.20933 17.3024C2.34753 17.636 2.5501 17.9392 2.80546 18.1945C3.06082 18.4499 3.36398 18.6525 3.69762 18.7907C4.03127 18.9289 4.38886 19 4.75 19H11.498C11.3 18.526 11.157 18.023 11.076 17.5H9.002V14.75C9.002 14.6837 9.02834 14.6201 9.07522 14.5732C9.12211 14.5263 9.1857 14.5 9.252 14.5H11.3135C11.4858 13.9665 11.7253 13.4632 12.0218 13H9.252C8.285 13 7.502 13.784 7.502 14.75V16H7.5V17.5H4.75C4.06 17.5 3.5 16.94 3.5 16.25V5.75C3.5 5.06 4.06 4.5 4.75 4.5H19.25C19.94 4.5 20.5 5.06 20.5 5.75V10.732C20.6457 10.808 20.7884 10.8895 20.9277 10.9762C20.9687 11.0017 21.0093 11.0276 21.0497 11.054C21.3899 11.2762 21.708 11.5294 22 11.8096V5.75C22 5.02065 21.7103 4.32118 21.1945 3.80546C20.6788 3.28973 19.9793 3 19.25 3H4.75C4.02065 3 3.32118 3.28973 2.80546 3.80546Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.4181 10.7757C14.7938 10.264 15 9.64262 15 9C15 8.20435 14.6839 7.44129 14.1213 6.87868C13.5587 6.31607 12.7956 6 12 6C11.2044 6 10.4413 6.31607 9.87868 6.87868C9.31607 7.44129 9 8.20435 9 9C9 9.79565 9.31607 10.5587 9.87868 11.1213C10.4413 11.6839 11.2044 12 12 12C12.333 12 12.6602 11.9446 12.9695 11.839C13.3992 11.4213 13.8864 11.0625 14.4181 10.7757ZM10.9393 7.93934C11.2206 7.65804 11.6022 7.5 12 7.5C12.3978 7.5 12.7794 7.65804 13.0607 7.93934C13.342 8.22064 13.5 8.60218 13.5 9C13.5 9.39782 13.342 9.77936 13.0607 10.0607C12.7794 10.342 12.3978 10.5 12 10.5C11.6022 10.5 11.2206 10.342 10.9393 10.0607C10.658 9.77936 10.5 9.39782 10.5 9C10.5 8.60218 10.658 8.22064 10.9393 7.93934Z"/><path d="M17.5 11C20.5382 11 23 13.4624 23 16.5C23 19.5377 20.5382 22 17.5 22C14.4629 22 12 19.5377 12 16.5C12 13.4624 14.4629 11 17.5 11V11ZM17.9296 14.0079L17.8833 13.9678C17.8132 13.9159 17.7284 13.8875 17.6412 13.8868C17.5539 13.8861 17.4686 13.9131 17.3977 13.964L17.346 14.0079L17.3064 14.0542C17.2545 14.1243 17.2261 14.2091 17.2254 14.2963C17.2247 14.3836 17.2517 14.4689 17.3026 14.5398L17.3465 14.5915L18.842 16.0875H15.1625L15.1064 16.0908C15.0171 16.1031 14.9343 16.1442 14.8707 16.208C14.807 16.2718 14.766 16.3546 14.7539 16.4439L14.75 16.4995L14.7539 16.5556C14.7661 16.6447 14.8072 16.7275 14.8708 16.7911C14.9345 16.8548 15.0172 16.8959 15.1064 16.9081L15.1625 16.912H18.842L17.346 18.408L17.3059 18.4547C17.2463 18.5341 17.2173 18.6324 17.2244 18.7314C17.2314 18.8305 17.274 18.9237 17.3442 18.9939C17.4144 19.0641 17.5076 19.1066 17.6066 19.1137C17.7057 19.1207 17.8039 19.0918 17.8833 19.0322L17.929 18.9921L20.1301 16.7921L20.1697 16.7453C20.2216 16.6753 20.25 16.5906 20.2507 16.5035C20.2515 16.4163 20.2247 16.3312 20.1741 16.2602L20.1301 16.2085L17.9301 14.0079L17.8833 13.9678L17.9296 14.0079V14.0079Z"/></svg>',pip_off:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8666 12.3058C11.0731 12.3058 11.2404 12.1385 11.2404 11.932V8.56753C11.2404 8.36107 11.0731 8.1937 10.8666 8.1937C10.6601 8.1937 10.4928 8.36107 10.4928 8.56753V11.0295L6.45393 6.99066C6.30794 6.84467 6.07124 6.84467 5.92525 6.99066C5.77926 7.13665 5.77926 7.37335 5.92525 7.51934L9.9641 11.5582L7.50212 11.5582C7.29566 11.5582 7.12829 11.7256 7.12829 11.932C7.12829 12.1385 7.29566 12.3058 7.50212 12.3058L10.8666 12.3058ZM5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/></svg>',pip_on:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.73832 19.8879C3.6737 19.8879 2 18.2141 2 16.1495V7.73832C2 5.6737 3.6737 4 5.73832 4H18.2617C20.3263 4 22 5.6737 22 7.73832L22 13.0269C22 12.2687 21.6002 11.6038 21 11.2316C20.8468 11.1366 20.6806 11.0607 20.5047 11.0071V7.73832C20.5047 6.49955 19.5005 5.49533 18.2617 5.49533H5.73832C4.49955 5.49533 3.49533 6.49955 3.49533 7.73832V16.1495C3.49533 17.3883 4.49955 18.3925 5.73832 18.3925H10.7971C10.8506 18.5685 10.9266 18.7347 11.0216 18.8879C11.3938 19.4881 12.0587 19.8879 12.8169 19.8879H5.73832Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.7265 12.5H13.3911C12.899 12.5 12.5 12.899 12.5 13.3911V17.6462C12.5 18.1384 12.899 18.5374 13.3911 18.5374H19.7265C20.2187 18.5374 20.6176 18.1384 20.6176 17.6462V13.3911C20.6176 12.899 20.2187 12.5 19.7265 12.5ZM13.3911 11.5C12.3467 11.5 11.5 12.3467 11.5 13.3911V17.6462C11.5 18.6907 12.3467 19.5374 13.3911 19.5374H19.7265C20.771 19.5374 21.6176 18.6907 21.6176 17.6462V13.3911C21.6176 12.3467 20.771 11.5 19.7265 11.5H13.3911Z"/><path d="M6.18951 6.88123C5.98304 6.88123 5.81567 7.0486 5.81567 7.25506V10.6195C5.81567 10.826 5.98304 10.9934 6.18951 10.9934C6.39597 10.9934 6.56334 10.826 6.56334 10.6195V8.15757L10.6022 12.1964C10.7482 12.3424 10.9849 12.3424 11.1309 12.1964C11.2769 12.0504 11.2769 11.8137 11.1309 11.6677L7.09202 7.62889L9.55399 7.62889C9.76045 7.62889 9.92782 7.46152 9.92782 7.25506C9.92782 7.0486 9.76045 6.88123 9.55399 6.88123L6.18951 6.88123Z"/></svg>',signal_1:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3z"></path></svg>',signal_2:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7z"></path></svg>',signal_3:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2z"></path></svg>',signal_4:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2z"></path></svg>',signal_5:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 16h2v5H3zm4-3h2v8H7zm4-3h2v11h-2zm4-3h2v14h-2zm4-3h2v17h-2z"></path></svg>',start_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M6.343 4.938a1 1 0 0 1 0 1.415a8.003 8.003 0 0 0 0 11.317a1 1 0 1 1-1.415 1.414c-3.906-3.906-3.906-10.24 0-14.146a1 1 0 0 1 1.415 0Zm12.731 0c3.906 3.907 3.906 10.24 0 14.146a1 1 0 0 1-1.414-1.414a8.003 8.003 0 0 0 0-11.317a1 1 0 0 1 1.414-1.415ZM9.31 7.812a1 1 0 0 1 0 1.414a3.92 3.92 0 0 0 0 5.544a1 1 0 1 1-1.414 1.414a5.92 5.92 0 0 1 0-8.372a1 1 0 0 1 1.414 0Zm6.959 0a5.92 5.92 0 0 1 0 8.372a1 1 0 0 1-1.415-1.414a3.92 3.92 0 0 0 0-5.544a1 1 0 0 1 1.415-1.414Zm-4.187 2.77a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"/></svg>',stop_livestream:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M2.854 2.146a.5.5 0 1 0-.708.708l1.811 1.81A8.218 8.218 0 0 0 2 10a8.228 8.228 0 0 0 2.604 6.015a.725.725 0 0 0 1.01-.025c.316-.316.277-.819-.027-1.11A6.73 6.73 0 0 1 3.5 10c0-1.62.57-3.107 1.522-4.27l.712.71A5.726 5.726 0 0 0 4.5 10c0 1.691.73 3.213 1.893 4.264a.713.713 0 0 0 .983-.037c.328-.328.267-.844-.041-1.134A4.238 4.238 0 0 1 6 10c0-.93.298-1.789.804-2.489l1.842 1.842a1.5 1.5 0 0 0 2 2l6.5 6.5a.5.5 0 0 0 .708-.707l-1.811-1.81l-1.065-1.066l-.712-.71l-1.07-1.072l-1.842-1.841l-2-2L7.4 6.693l-.942-.942l-.82-.82l-.944-.944l-1.841-1.842Zm13.794 12.38A8.212 8.212 0 0 0 18 10c0-2.283-.928-4.35-2.426-5.843a.726.726 0 0 0-1.027.01c-.31.31-.28.8.01 1.095A6.727 6.727 0 0 1 16.5 10a6.718 6.718 0 0 1-.94 3.438l1.088 1.089Zm-1.822-1.822A5.73 5.73 0 0 0 15.5 10a5.733 5.733 0 0 0-1.706-4.087a.714.714 0 0 0-1.008.016c-.319.318-.272.816.014 1.111A4.235 4.235 0 0 1 14 10c0 .557-.107 1.09-.302 1.577l1.128 1.127Z"/></svg>',viewers:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 9.005a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM12 5.5c4.613 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365 8.503 8.503 0 0 0-16.493.004.75.75 0 0 1-1.455-.363A10.003 10.003 0 0 1 12 5.5Z" fill="currentColor"/></svg>',debug:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m10.05 15.42 6.256-8.476a.694.694 0 0 1 1.235.57l-.03.098-3.87 9.8a2.07 2.07 0 1 1-3.737-1.766l.069-.115.076-.11 6.257-8.477-6.257 8.476Zm2.05-4.549-1.226 1.66a3.32 3.32 0 0 0-2.29 3.024.75.75 0 0 1-1.5-.063A4.819 4.819 0 0 1 9.14 11.74c.9-.631 1.942-.911 2.961-.87Zm4.167 2.752c.28.586.436 1.22.463 1.866a.75.75 0 0 1-1.376.444l.913-2.31Zm-2.233-5.37-.969 1.311a6.22 6.22 0 0 0-4.736 1.02 6.208 6.208 0 0 0-2.419 3.39.75.75 0 0 1-1.442-.412 7.708 7.708 0 0 1 3-4.207 7.724 7.724 0 0 1 6.566-1.102Zm3.51 2.138c.25.267.486.556.702.865a7.727 7.727 0 0 1 1.097 2.288.75.75 0 0 1-1.44.417 6.23 6.23 0 0 0-.885-1.845l-.102-.138.627-1.587ZM15.98 5.852l-.088.054c-.123.082-.236.18-.337.295l-.096.12-.54.732a9.138 9.138 0 0 0-8.261 1.146A9.103 9.103 0 0 0 3.38 12.37a.75.75 0 1 1-1.398-.543A10.603 10.603 0 0 1 5.799 6.97 10.642 10.642 0 0 1 15.98 5.852Zm2.629 1.562a10.646 10.646 0 0 1 2.022 2.171c.49.702.892 1.451 1.199 2.235a.75.75 0 1 1-1.397.547 9.188 9.188 0 0 0-2.327-3.405l.381-.964c.076-.19.115-.388.122-.584Z" fill="currentColor"/></svg>',info:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.999c5.524 0 10.002 4.478 10.002 10.002 0 5.523-4.478 10.001-10.002 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.999 12 1.999Zm0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5Zm-.004 7a.75.75 0 0 1 .744.648l.007.102.003 5.502a.75.75 0 0 1-1.493.102l-.007-.101-.003-5.502a.75.75 0 0 1 .75-.75ZM12 7.003a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997Z" fill="currentColor"/></svg>',devices:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm5.5-8.5V9a5.5 5.5 0 1 0-11 0v1H9a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H6.5v.25a2.25 2.25 0 0 0 2.096 2.245l.154.005h1.128a2.251 2.251 0 1 1 0 1.5H8.75a3.75 3.75 0 0 1-3.745-3.55L5 16.25V9a7 7 0 0 1 14 0v5a2 2 0 0 1-1.85 1.995L17 16h-2a1 1 0 0 1-.993-.883L14 15v-4a1 1 0 0 1 .883-.993L15 10h2.5Zm-9 1.5h-2v3h2v-3Zm9 0h-2v3H17a.5.5 0 0 0 .492-.41L17.5 14v-2.5Z" fill="currentColor"/></svg>',horizontal_dots:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM18 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill="currentColor"/></svg>',ai_sparkle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" fill="none"><path fill="#F13E1B" d="m30.023 15.96.07.016a1.362 1.362 0 0 1 .657 2.068c-.163.23-.392.403-.658.497l-3.444 1.118a7.095 7.095 0 0 0-4.495 4.492l-1.12 3.442a1.357 1.357 0 0 1-1.267.907h-.016a1.361 1.361 0 0 1-1.283-.907l-1.12-3.442a7.091 7.091 0 0 0-4.495-4.509l-3.444-1.119a1.36 1.36 0 0 1 0-2.564l3.444-1.118a7.097 7.097 0 0 0 4.427-4.492l1.119-3.442a1.36 1.36 0 0 1 2.566 0l1.12 3.442a7.09 7.09 0 0 0 4.495 4.492l3.444 1.118Zm9.195 16.007-2.755-.894a5.678 5.678 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/><path fill="#2160FD" d="m39.218 31.967-2.755-.894a5.677 5.677 0 0 1-3.596-3.594l-.896-2.753a1.087 1.087 0 0 0-2.053 0l-.895 2.753a5.672 5.672 0 0 1-3.541 3.594l-2.756.894a1.088 1.088 0 0 0 0 2.052l2.756.895a5.675 5.675 0 0 1 3.596 3.607l.896 2.753a1.088 1.088 0 0 0 2.052 0l.896-2.753a5.672 5.672 0 0 1 3.596-3.594l2.756-.894a1.088 1.088 0 0 0 0-2.052l-.056-.014Z"/></svg>',meeting_ai:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" fill="none"><path fill="#F13E1B" d="M9.111 12.888a4.98 4.98 0 0 0-1.075-.8l-.04.048a4.651 4.651 0 0 0-.903-.424l-2.446-.8a.963.963 0 0 1-.467-.356.953.953 0 0 1 0-1.116.955.955 0 0 1 .467-.352l2.446-.8A5.088 5.088 0 0 0 9.04 7.06a5.048 5.048 0 0 0 1.2-1.904l.02-.064.799-2.444A.97.97 0 0 1 11.969 2a.97.97 0 0 1 .91.648l.8 2.444a5.147 5.147 0 0 0 1.219 1.976 5.042 5.042 0 0 0 1.974 1.2l2.45.8h.048c.188.067.351.19.468.352.115.164.176.36.175.56.001.2-.06.396-.175.56a1 1 0 0 1-.468.352l-2.446.8a5.067 5.067 0 0 0-1.978 1.2 5.096 5.096 0 0 0-1.199 1.976l-.8 2.448-.023.06a1.02 1.02 0 0 1-.184.284.967.967 0 0 1-.703.3 1 1 0 0 1-.927-.644l-.8-2.448a5.11 5.11 0 0 0-.799-1.508 5.16 5.16 0 0 0-.4-.472Zm10.434 5.396a.492.492 0 0 1 .176-.236.473.473 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.278.276.616.484.987.608l1.223.4h.028l.084.04a.536.536 0 0 1 .148.136c.056.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.176.232.464.464 0 0 1-.28.088.475.475 0 0 1-.455-.32l-.4-1.224a2.507 2.507 0 0 0-.611-.992 2.487 2.487 0 0 0-.987-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612.137-.142.257-.3.36-.468.1-.162.18-.335.24-.516l.399-1.224Z"/><path fill="currentColor" d="M19.545 18.284a.492.492 0 0 1 .176-.236.469.469 0 0 1 .1-.048.466.466 0 0 1 .168-.04c.1 0 .197.031.28.088l.091.072a.456.456 0 0 1 .096.164l.4 1.224c.124.372.332.71.607.988.279.276.616.484.988.608l1.222.4h.028l.084.04a.534.534 0 0 1 .148.136c.057.082.087.18.088.28a.484.484 0 0 1-.32.456l-1.227.4a2.528 2.528 0 0 0-1.595 1.6l-.399 1.224a.46.46 0 0 1-.175.232.464.464 0 0 1-.28.088.475.475 0 0 1-.456-.32l-.4-1.224a2.509 2.509 0 0 0-.61-.992 2.487 2.487 0 0 0-.988-.612l-1.223-.4a.48.48 0 0 1 0-.908l1.223-.4c.367-.128.7-.337.975-.612a2.7 2.7 0 0 0 .36-.468c.1-.162.18-.335.24-.516l.4-1.224Z"/></svg>',create_channel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" d="M2 14.75A3.25 3.25 0 0 0 5.25 18H6v2.75a1.25 1.25 0 0 0 1.999 1l2.125-1.59.396-1.583c.071-.286.177-.56.312-.82L7.5 20.252 7.499 16.5H5.25a1.75 1.75 0 0 1-1.75-1.75v-8.5c0-.966.784-1.75 1.75-1.75h13.5c.966 0 1.75.784 1.75 1.75v3.845a3.27 3.27 0 0 1 1.5.83V6.25A3.25 3.25 0 0 0 18.75 3H5.25A3.25 3.25 0 0 0 2 6.25v8.5Z"/><path fill="currentColor" d="m18.098 11.67-5.902 5.902a2.684 2.684 0 0 0-.707 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902a2.285 2.285 0 1 0-3.232-3.232Z"/></svg>',create_channel_illustration:'<svg width="503" height="362" viewBox="0 0 503 362" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M93.3477 192.893C93.3477 190.684 95.1385 188.893 97.3477 188.893H476C478.209 188.893 480 190.684 480 192.893V311.824C480 314.033 478.209 315.824 476 315.824H469.354C467.145 315.824 465.354 317.615 465.354 319.824V339.364C465.354 342.928 461.045 344.712 458.525 342.193L433.328 316.996C432.578 316.245 431.561 315.824 430.5 315.824H97.3477C95.1385 315.824 93.3477 314.033 93.3477 311.824V192.893Z" fill="#282828"/> <path d="M306.606 230.9H136.121C134.648 230.9 133.453 232.095 133.453 233.568C133.453 235.041 134.648 236.236 136.121 236.236H306.606C308.079 236.236 309.274 235.041 309.274 233.568C309.274 232.095 308.079 230.9 306.606 230.9Z" fill="#2160FD"/> <path d="M437.226 249.358H136.121C134.648 249.358 133.453 250.553 133.453 252.026C133.453 253.499 134.648 254.694 136.121 254.694H437.226C438.7 254.694 439.894 253.499 439.894 252.026C439.894 250.553 438.7 249.358 437.226 249.358Z" fill="#5C5C5C"/> <path d="M436.926 267.816H136.121C134.648 267.816 133.453 269.011 133.453 270.484C133.453 271.957 134.648 273.152 136.121 273.152H436.926C438.4 273.152 439.594 271.957 439.594 270.484C439.594 269.011 438.399 267.816 436.926 267.816Z" fill="#5C5C5C"/> <path d="M411.652 23C411.652 20.7909 409.861 19 407.652 19H29C26.7909 19 25 20.7909 25 23V141.931C25 144.14 26.7909 145.931 29 145.931H35.646C37.8551 145.931 39.646 147.722 39.646 149.931V169.472C39.646 173.036 43.9546 174.82 46.4745 172.3L71.6714 147.103C72.4216 146.352 73.439 145.931 74.4999 145.931H407.652C409.861 145.931 411.652 144.14 411.652 141.931V23Z" fill="#282828"/> <path d="M241.188 61.9839H70.703C69.2296 61.9839 68.0352 63.1783 68.0352 64.6517C68.0352 66.1252 69.2296 67.3196 70.703 67.3196H241.188C242.662 67.3196 243.856 66.1252 243.856 64.6517C243.856 63.1783 242.662 61.9839 241.188 61.9839Z" fill="#2160FD"/> <path d="M371.808 80.4419H70.703C69.2296 80.4419 68.0352 81.6363 68.0352 83.1098C68.0352 84.5832 69.2296 85.7776 70.703 85.7776H371.808C373.282 85.7776 374.476 84.5832 374.476 83.1098C374.476 81.6363 373.282 80.4419 371.808 80.4419Z" fill="#5C5C5C"/> <path d="M371.508 98.8999H70.703C69.2296 98.8999 68.0352 100.094 68.0352 101.568C68.0352 103.041 69.2296 104.236 70.703 104.236H371.508C372.982 104.236 374.176 103.041 374.176 101.568C374.176 100.094 372.982 98.8999 371.508 98.8999Z" fill="#5C5C5C"/> </svg>'},k4=async t=>{if(t==null)return U;try{const e=await fetch(t);return e.ok?Object.assign({},U,await e.json()):U}catch{return U}},Gte=640,Jte=768,Kte=1080,Qte=2160,yT={sm:Gte,md:Jte,lg:Kte,xl:Qte},S4=t=>t>=yT.lg?"lg":t>=yT.md?"md":"sm",bT={about_call:"About Call",screen:"Screen",leave:"Leave",dismiss:"Dismiss",logo:"Logo",page:"Page",more:"More","page.prev":"Previous Page","page.next":"Next Page",layout:"Layout","layout.auto":"Auto Layout",settings:"Settings",file:"File",image:"Image",connection:"Connection",leave_confirmation:"Are you sure you want to leave the call?",cancel:"Cancel",yes:"Yes",you:"You",to:"To",mute:"Mute",kick:"Kick",pin:"Pin",pinned:"Pinned",unpin:"Unpin",pip_on:"Show PiP",pip_off:"Hide PiP",viewers:"Viewers",join:"Join",joined:"Joined",create:"Create",close:"Close",ask:"Ask",type:"Type",activate:"Activate",mic_off:"Mic Off",disable_mic:"Disable Mic",mic_on:"Mic On",enable_mic:"Enable Mic",audio:"Audio",mute_all:"Mute all","mute_all.description":"Everyone in the meeting will be muted.","mute_all.header":"Are you sure?","mute_all.allow_unmute":"Allow others to unmute",video_off:"Video Off",disable_video:"Disable Video",video_on:"Video On",enable_video:"Enable Video",video:"Video",offline:"You're offline","offline.description":"Please ensure that you are connected to the internet.",disconnected:"You haven't joined the meeting.","disconnected.description":"Please join the meeting in order to see and interact with other participants.",participants:"Participants","participants.errors.empty_results":"Couldn't find a participant with the specified name or ID.","participants.empty_list":"It looks like nobody is here.","participants.turn_off_video":"Turn off video",polls:"Polls","polls.by":"Poll by","polls.question":"Poll Question","polls.question.placeholder":"What is your poll for?","polls.answers":"Answers","polls.option":"Add an option.","polls.option.placeholder":"Enter an option","polls.results.anon":"Anonymous","polls.results.hide":"Hide results before voting","polls.create":"Create Poll","polls.cancel":"Cancel Poll Creation","polls.errors.question_required":"Question is required.","polls.errors.empty_option":"Empty options not allowed.",screenshare:"Screen Share","screenshare.min_preview":"Minimize Preview","screenshare.max_preview":"Expand Preview","screenshare.shared":"Your screen is being shared.","screenshare.start":"Share Screen","screenshare.stop":"Stop Sharing","screenshare.error.unknown":"An error occured while starting screenshare.","screenshare.error.max_count":"Maximum screen share limit reached.",plugins:"Plugins",perm_denied:"Permission denied by browser.","perm_denied.audio":"Mic Permission denied by browser","perm_denied.video":"Camera Permission denied by browser","perm_denied.screenshare":"Screenshare Permission denied by browser","perm_denied.audio.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Microphone', provide permission and reload this application.","perm_denied.video.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Camera', provide permission and reload this application.","perm_denied.screenshare.chrome.message":"Under Chrome settings, navigate to 'Privacy and Security > Site Settings > Permissions'. Select 'Screenshare', provide permission and reload this application.","perm_denied.audio.safari.message":"Under Safari settings, navigate to 'Websites > Microphone', provide permission and reload this application.","perm_denied.video.safari.message":"Under Safari settings, navigate to 'Websites > Camera', provide permission and reload this application.","perm_denied.screenshare.safari.message":"Under Safari settings, navigate to 'Websites > Screenshare', provide permission and reload this application.","perm_denied.audio.edge.message":"Under Edge settings, navigate to 'Site Permissions > Microphone', provide permission and reload this application.","perm_denied.video.edge.message":"Under Edge settings, navigate to 'Site Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.edge.message":"Under Edge settings, navigate to 'Site Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Microphone', provide permission and reload this application.","perm_denied.video.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Camera', provide permission and reload this application.","perm_denied.screenshare.firefox.message":"Under Firefox settings, navigate to 'Privacy and Security > Permissions > Screenshare', provide permission and reload this application.","perm_denied.audio.others.message":"From your browser settings, enable 'Microphone' permissions and reload this application.","perm_denied.video.others.message":"From your browser settings, enable 'Camera' permissions and reload this application.","perm_denied.screenshare.others.message":"From your browser settings, enable 'Screenshare' permissions and reload this application.",perm_sys_denied:"Permission denied by system","perm_sys_denied.audio":"Mic permission denied by system","perm_sys_denied.video":"Camera permission denied by system","perm_sys_denied.screenshare":"Screenshare permission denied by system","perm_sys_denied.audio.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Microphone'. Allow access to your browser and reload this application.","perm_sys_denied.video.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Camera'. Allow access to your browser and reload this application.","perm_sys_denied.screenshare.macos.message":"Open Apple Menu, Navigate to 'System Settings > Privacy & Security > Screenshare'. Allow access to your browser and reload this application.","perm_sys_denied.audio.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Microphone', allow access to your browser and reload this application.","perm_sys_denied.video.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Camera', allow access to your browser and reload this application.","perm_sys_denied.screenshare.ios.message":"On your iPhone, navigate to 'Settings > Privacy > Screenshare', allow access to your browser and reload this application.","perm_sys_denied.audio.windows.message":"Go to windows settings, select 'Settings > Privacy > Microphone'. Allow permissions to your browser and reload this application.","perm_sys_denied.video.windows.message":"Go to windows settings, select 'Settings > Privacy > Camera'. Allow permissions to your browser and reload this application.","perm_sys_denied.screenshare.windows.message":"Go to windows settings, select 'Settings > Privacy > Screenshare'. Allow permissions to your browser and reload this application.","perm_sys_denied.audio.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Microphone permissions and reload this application.","perm_sys_denied.video.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Camera permissions and reload this application.","perm_sys_denied.screenshare.android.message":"On you device, navigate to 'Settings > Apps'. Select your browser, allow Screenshare permissions and reload this application.","perm_sys_denied.audio.others.message":"Navigate to your system settings. Allow 'Microphone' permissions for your browser and reload this application.","perm_sys_denied.video.others.message":"Navigate to your system settings. Allow 'Camera' permissions for your browser and reload this application.","perm_sys_denied.screenshare.others.message":"Navigate to your system settings. Allow 'Screenshare' permissions for your browser and reload this application.",perm_could_not_start:"Could not capture device.","perm_could_not_start.audio":"Unable to start your Microphone","perm_could_not_start.video":"Unable to start your Camera","perm_could_not_start.screenshare":"Unable to start your Screenshare","perm_could_not_start.audio.message":"Looks like the system could not capture your microphone. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.video.message":"Looks like the system could not capture your camera. Please restart your device or upgrade your browser to fix this.","perm_could_not_start.screenshare.message":"Looks like the system could not capture your screenshare. Please restart your device or upgrade your browser to fix this.",full_screen:"Full Screen","full_screen.exit":"Exit Full Screen","waitlist.header_title":"Waiting","waitlist.body_text":"You are in the waiting room, the host will let you in soon.","waitlist.deny_request":"Deny request","waitlist.accept_request":"Accept request","waitlist.accept_all":"Accept all","stage_request.header_title":"Join Stage Requests","stage_request.deny_request":"Deny request","stage_request.accept_request":"Accept request","stage_request.accept_all":"Accept all","stage_request.deny_all":"Deny all","stage_request.approval_pending":"Pending","stage_request.denied":"Denied","stage_request.request":"Join stage","stage_request.cancel_request":"Cancel request","stage_request.leave_stage":"Leave stage","stage_request.request_tip":"Request to join the discussion","stage_request.leave_tip":"Leave the stage","stage_request.pending_tip":"Request pending","stage_request.denied_tip":"Rejected request","stage.empty_host":"The stage is empty","stage.empty_host_summary":"You are off stage. You can manage stage request from the participants tab.","stage.empty_viewer":"There is no one on stage","stage.remove_from_stage":"Remove from stage","stage.invited_notification":"has been invited to join stage.","stage.add_to_stage":"Invite to stage","stage.join_title":"Join Stage","stage.join_summary":"You are about to join the stage, your video & audio as shown above will be visible to all participants.","stage.join_cancel":"Cancel","stage.join_confirm":"Join","setup_screen.join_in_as":"Join in as","setup_screen.joining_as":"Joining as","setup_screen.your_name":"Your name","stage.reconnecting":"Reconnecting...","recording.label":"REC","recording.indicator":"This meeting is being recorded.","recording.started":"This meeting is being recorded.","recording.stopped":"Recording for this meeting has been stopped.","recording.error.start":"Error while starting recording.","recording.error.stop":"Error while stopping recording","recording.start":"Start Recording","recording.stop":"Stop Recording","recording.starting":"Starting","recording.stopping":"Stopping","recording.loading":"Loading","recording.idle":"Record",audio_playback:"Play Audio","audio_playback.title":"Allow Audio Playback","audio_playback.description":"In order to play audio properly on your device, click the button below.",breakout_rooms:"Breakout Rooms","breakout_rooms.room_config_header":"Create Breakout","breakout_rooms.join_breakout_header":"Join Breakout","breakout_rooms.empty":"Nobody here yet.","breakout_rooms.delete":"Delete Room","breakout_rooms.switch":"Switch","breakout_rooms.main_room":"Main Room","breakout_rooms.shuffle_participants":"Shuffle Participants","breakout_rooms.deselect":"Deselect","breakout_rooms.selected":"selected","breakout_rooms.num_of_rooms":"No. of Rooms","breakout_rooms.approx":"Approx.","breakout_rooms.participants_per_room":"participants/room","breakout_rooms.division_text":"when equally divided.","breakout_rooms.start_breakout":"Start Breakout","breakout_rooms.close_breakout":"Close Breakout","breakout_rooms.update_breakout":"Update Breakout","breakout_rooms.discard_changes":"Discard Changes","breakout_rooms.room":"Room","breakout_rooms.rooms":"Rooms","breakout_rooms.room_name":"Room Name","breakout_rooms.edit_room_name":"Edit Room Name","breakout_rooms.save_room_name":"Save Room Name","breakout_rooms.add_room":"Add","breakout_rooms.add_room_brief":"Add Room","breakout_rooms.select_all":"Select all","breakout_rooms.unassign_all":"Unassign all","breakout_rooms.assign":"Assign","breakout_rooms.assign_participants":"Assign Participants","breakout_rooms.none_assigned":"No participants assigned yet","breakout_rooms.drag_drop_participants":"Drag and drop participants","breakout_rooms.click_drop_participants":"Click here to assign","breakout_rooms.status.assign_multiple":"Assign multiple participants at once by clicking and selecting them","breakout_rooms.status.select_room":"Select a room to assign","breakout_rooms.ephemeral_status.participants_assigned":"Participants assigned","breakout_rooms.ephemeral_status.participants_assigned_randomly":"Participants assigned randomly","breakout_rooms.ephemeral_status.changes_discarded":"Changes discarded","breakout_rooms.confirm_modal.start_breakout.header":"Start breakout rooms?","breakout_rooms.confirm_modal.start_breakout.content":"Once started, all participants will be moved to their assigned rooms.","breakout_rooms.confirm_modal.start_breakout.cancelText":"No, go back","breakout_rooms.confirm_modal.start_breakout.ctaText":"Yes, start","breakout_rooms.confirm_modal.close_breakout.header":"Close breakout rooms?","breakout_rooms.confirm_modal.close_breakout.content":"All breakout rooms will be closed & participants will be moved back to the main room.","breakout_rooms.confirm_modal.close_breakout.ctaText":"Yes, close breakout","breakout_rooms.move_reason.started_msg":"Starting breakout rooms...","breakout_rooms.move_reason.started_desc":"You are being moved to your assigned room","breakout_rooms.move_reason.closed_msg":"Closing Breakout rooms...","breakout_rooms.move_reason.closed_desc":"You are being moved back to the main room","breakout_rooms.move_reason.switch_room":"Joining Breakout Room...","breakout_rooms.move_reason.switch_main_room":"Joining Main Room...","breakout_rooms.all_assigned":"All participants have been assigned","breakout_rooms.empty_main_room":"No more participants in the main room.","breakout_rooms.leave_confirmation":"Are you sure you want to leave the call? You are in a breakout room, you can join the main room too.","breakout_rooms.leave_confirmation.main_room_btn":"Go back to main room",ai:"AI","ai.meeting_ai":"MeetingAI","ai.home":"Home","ai.transcriptions":"Transcriptions","ai.personal":"Personal","ai.caption_view":"Caption View","ai.chat.tooltip":"This conversation will just be visible to you and not to others in the call.","ai.chat.summerise":"Hey AI, summarise this call","ai.chat.agenda":"Hey AI, what is today's agenda?",search:"Search","search.could_not_find":"Couldn't find a participant with the specified name or ID.","search.empty":"It looks like nobody is here.",end:"End Meeting","end.all":"End meeting for all",ended:"The meeting ended.","ended.rejected":"Your request to join the meeting was denied.","ended.left":"You left the meeting.","ended.kicked":"You were removed from the meeting.","ended.disconnected":"The call ended because the connection was lost.","ended.network":"Please check your internet connection and try again.",network:"Network","network.reconnecting":"Connection lost. Trying to reconnect...","network.delay":"Taking too long to reconnect...","network.delay_extended":"Taking too long to reconnect. Please check your network connection.","network.restored":"Connection restored","network.lost":"Connection lost","network.lost_extended":"Connection lost. Please check your network connection.","network.disconnected":"Could not reconnect. Please leave the meeting and try refreshing the window.","network.leaving":"Automatically leaving the meeting in 10 seconds.",livestream:"Livestream","livestream.indicator":"This meeting is being livestreamed.","livestream.skip":"Skip to Live","livestream.idle":"Waiting to go live.","livestream.starting":"Livestream is starting...","livestream.stopping":"Livestream is stopping...","livestream.error.not_supported":"Player not supported.","livestream.error.not_found":"Playback URL not found.","livestream.error.unknown":"An unknown error occured.","livestream.error.sync":"Could not sync livestream please try again later.","livestream.error.start":"Error while starting livestream.","livestream.error.stop":"Error while stopping livestream.","livestream.go_live":"Go Live","livestream.end_live":"End Live","livestream.error":"Error","cta.help":"Need help on how to do this?","cta.continue":"Continue as it is","cta.reload":"Reload","cta.confirmation":"Are you sure?","remote_access.empty":"There are no remote requests, yet.","remote_access.requests":"The following people have requested remote control to your screen share.","remote_access.allow":"Please select whom you want to give access to.","remote_access.grant":"Grant acess","remote_access.indicator":"Any plugin or screenshare you switch to will sync the change across the meeting",chat:"Chat","chat.new":"New","chat.new_channel":"Create new channel","chat.channel_name":"Enter channel name","chat.member_name":"Enter member name","chat.add_members":"Add members","chat.delete_msg":"Delete","chat.edit_msg":"Edit","chat.send_msg":"Send message","chat.send_attachment":"Drop files/images to send","chat.send_img":"Send an image","chat.send_file":"Send a file","chat.send_emoji":"Send an emoji","chat.update_msg":"Update message","chat.channel_members":"Channel Members","chat.img.loading":"Loading image","chat.error.img_not_found":"Image not found","chat.error.empty_results":"Couldn't find a member with the specified name.","chat.img.shared_by":"Shared by","chat.reply":"Reply","chat.message_placeholder":"Message..","chat.click_to_send":"Click to send as message","chat.search_msgs":"Search messages","chat.search_conversations":"Search conversations","chat.start_conversation":"Start a conversation..","chat.empty_search":"No messages found","chat.empty_channel":"Send a message to get started","chat.cancel_upload":"Cancel upload","date.today":"Today","date.yesteday":"Yesterday","date.sunday":"Sunday","date.monday":"Monday","date.tuesday":"Tuesday","date.wednesday":"Wednesday","date.thursday":"Thursday","date.friday":"Friday","date.saturday":"Saturday","list.empty":"No items found","grid.listening":"Listening"},j=(t=bT)=>{const e=Object.assign({},bT,t);return i=>{var s;return(s=e[i])!==null&&s!==void 0?s:i}},Yte=({element:t,size:e,states:i={},config:s={}})=>{let r=[];const n=s==null?void 0:s.root[t],a=o=>{r.push(o),typeof e=="string"&&r.push(`${o}.${e}`)};if(a(t),typeof n=="object"&&!Array.isArray(n)&&n!==null){const{state:o,states:c}=n;let u=t,l=[];if(Array.isArray(c)){l=c.filter(h=>i[h]),l.sort();for(const h of l)a(`${u}.${h}`);if(l.length>1){const h=[u,...l].join(".");a(h)}}if(typeof o=="string"){const h=`${t}[${o}=${i[o]}]`;a(h);for(const g of l)a(`${h}.${g}`);if(l.length>1){const g=[h,...l].join(".");a(g)}}}return r},Zte=({selectors:t,styles:e})=>{if(!Array.isArray(t)||e==null)return{};const i={};for(const s of t){const r=e[s];r!=null&&Object.assign(i,r)}return i},Xte=({selectors:t,root:e})=>{if(!e||!Array.isArray(t))return[];let i=[];for(const s of t){const r=e[s];if(Array.isArray(r))i=[...r];else if(r){if(r.children&&(i=[...r.children]),Array.isArray(r.remove))for(const n of r.remove)i=i.filter(a=>typeof a=="string"?a!==n:Array.isArray(a)?a[0]!==n:!0);if(r.addBefore)for(const[n,a]of Object.entries(r.addBefore)){const o=i.findIndex(c=>typeof c=="string"?c===n:Array.isArray(c)?c[0]===n:!1);o>=0&&i.splice(o,0,...a)}Array.isArray(r.add)&&(i=i.concat(r.add)),Array.isArray(r.prepend)&&(i=r.prepend.concat(i))}}return i},vg=({elements:t,defaults:e,props:i={},deepProps:s=!1,elementProps:r={}})=>!Array.isArray(t)||t.length===0?null:t.map(n=>d(je,{element:n,defaults:e,props:i,childProps:s&&i,elementProps:r})),je=({element:t,defaults:e,childProps:i={},props:s={},onlyChildren:r=!1,asHost:n=!1,deepProps:a=!1,elementProps:o={}},c)=>{var u;const{config:l,size:h,states:g}=e;let m,f={},_=[];Array.isArray(t)?[m,f,..._]=t:m=t;const k=(u=l==null?void 0:l.root)===null||u===void 0?void 0:u[m];k!=null&&"props"in k&&(s=Object.assign(Object.assign({},k.props),s)),s=Object.assign(Object.assign({},s),f),m in o&&(s=Object.assign(Object.assign({},s),o[m]));const y=Yte({element:m,size:h,states:g,config:l}),b=Xte({selectors:y,root:l.root});if(r)return d(vg,{elements:b,defaults:e,props:i,deepProps:a,elementProps:o});const x=Zte({selectors:y,styles:l.styles});if(n)return d(O,Object.assign({},e,{style:x},s),d(vg,{elements:b,defaults:e,props:i,deepProps:a,elementProps:o}),c,_.map(C=>{if(Array.isArray(C)){const[D,M]=C;return d(D,Object.assign({},e,M))}return C}));if(["dyte-header","dyte-controlbar"].includes(m)&&(s.disableRender=!0),m.startsWith("dyte-"))return d(m,Object.assign({},e,{style:x},s),d(vg,{elements:b,defaults:e,props:i,deepProps:a,elementProps:o}),c,_.map(C=>{if(Array.isArray(C)){const[D,M]=C;return d(D,Object.assign({},e,M))}return C}));{const[C,D]=m.split("#");return d(C,Object.assign({id:D,style:x},s),d(vg,{elements:b,defaults:e,props:i,deepProps:a,elementProps:o}),c,_.map(M=>{if(Array.isArray(M)){const[L,V]=M;return d(L,Object.assign({},e,V))}return M}))}},wT={get:(t,e,i)=>(...s)=>{try{return Reflect.get(t,e,i).apply(t,s)}catch{return null}}};let $1;try{$1=new Proxy(localStorage,wT)}catch{$1=new Proxy({},wT)}const Yn=$1,dk="dyte-prefs",x4=(t,e)=>{const i=JSON.parse(Yn.getItem(dk)||"{}");i[t]=JSON.stringify(e),Yn.setItem("dyte-prefs",JSON.stringify(i))},E4=t=>JSON.parse(Yn.getItem(dk)||"{}")[t],eie=()=>{const t=JSON.parse(Yn.getItem(dk)||"{}"),e=t["mirror-video"]?t["mirror-video"]==="true":!0,i=t["mute-notification-sounds"]?t["mute-notification-sounds"]==="true":!1;return{mirrorVideo:e,muteNotificationSounds:i}},xf={},tie=(t,e,i)=>{const s=t.get(e);s?s.includes(i)||s.push(i):t.set(e,[i])},iie=(t,e)=>{let i;return(...s)=>{i&&clearTimeout(i),i=setTimeout(()=>{i=0,t(...s)},e)}},sie=t=>!("isConnected"in t)||t.isConnected,_T=iie(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(sie))},2e3),rie=()=>{if(typeof ZE!="function")return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const i=ZE();i&&tie(t,e,i)},set:e=>{const i=t.get(e);i&&t.set(e,i.filter(vf)),_T(t)},reset:()=>{t.forEach(e=>e.forEach(vf)),_T(t)}}},T0=t=>typeof t=="function"?t():t,nie=(t,e=(i,s)=>i!==s)=>{const i=T0(t);let s=new Map(Object.entries(i!=null?i:{}));const r={dispose:[],get:[],set:[],reset:[]},n=()=>{var f;s=new Map(Object.entries((f=T0(t))!==null&&f!==void 0?f:{})),r.reset.forEach(_=>_())},a=()=>{r.dispose.forEach(f=>f()),n()},o=f=>(r.get.forEach(_=>_(f)),s.get(f)),c=(f,_)=>{const k=s.get(f);e(_,k,f)&&(s.set(f,_),r.set.forEach(y=>y(f,_,k)))},u=typeof Proxy>"u"?{}:new Proxy(i,{get(f,_){return o(_)},ownKeys(f){return Array.from(s.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(f,_){return s.has(_)},set(f,_,k){return c(_,k),!0}}),l=(f,_)=>(r[f].push(_),()=>{aie(r[f],_)});return{state:u,get:o,set:c,on:l,onChange:(f,_)=>{const k=l("set",(b,x)=>{b===f&&_(x)}),y=l("reset",()=>_(T0(t)[f]));return()=>{k(),y()}},use:(...f)=>{const _=f.reduce((k,y)=>(y.set&&k.push(l("set",y.set)),y.get&&k.push(l("get",y.get)),y.reset&&k.push(l("reset",y.reset)),y.dispose&&k.push(l("dispose",y.dispose)),k),[]);return()=>_.forEach(k=>k())},dispose:a,reset:n,forceUpdate:f=>{const _=s.get(f);r.set.forEach(k=>k(f,_,_))}}},aie=(t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)},oie=(t,e)=>{const i=nie(t,e);return i.use(rie()),i},{state:$,onChange:Fl}=oie({});var T4=function(){if(typeof Map<"u")return Map;function t(e,i){var s=-1;return e.some(function(r,n){return r[0]===i?(s=n,!0):!1}),s}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(i){var s=t(this.__entries__,i),r=this.__entries__[s];return r&&r[1]},e.prototype.set=function(i,s){var r=t(this.__entries__,i);~r?this.__entries__[r][1]=s:this.__entries__.push([i,s])},e.prototype.delete=function(i){var s=this.__entries__,r=t(s,i);~r&&s.splice(r,1)},e.prototype.has=function(i){return!!~t(this.__entries__,i)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(i,s){s===void 0&&(s=null);for(var r=0,n=this.__entries__;r<n.length;r++){var a=n[r];i.call(s,a[1],a[0])}},e}()}(),j1=typeof window<"u"&&typeof document<"u"&&window.document===document,Ef=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),cie=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ef):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),die=2;function lie(t,e){var i=!1,s=!1,r=0;function n(){i&&(i=!1,t()),s&&o()}function a(){cie(n)}function o(){var c=Date.now();if(i){if(c-r<die)return;s=!0}else i=!0,s=!1,setTimeout(a,e);r=c}return o}var uie=20,pie=["top","right","bottom","left","width","height","size","weight"],hie=typeof MutationObserver<"u",gie=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=lie(this.refresh.bind(this),uie)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var i=this.observers_,s=i.indexOf(e);~s&&i.splice(s,1),!i.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return e.forEach(function(i){return i.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!j1||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),hie?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!j1||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var i=e.propertyName,s=i===void 0?"":i,r=pie.some(function(n){return!!~s.indexOf(n)});r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),C4=function(t,e){for(var i=0,s=Object.keys(e);i<s.length;i++){var r=s[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},xl=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||Ef},P4=Lv(0,0,0,0);function Tf(t){return parseFloat(t)||0}function kT(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(s,r){var n=t["border-"+r+"-width"];return s+Tf(n)},0)}function mie(t){for(var e=["top","right","bottom","left"],i={},s=0,r=e;s<r.length;s++){var n=r[s],a=t["padding-"+n];i[n]=Tf(a)}return i}function fie(t){var e=t.getBBox();return Lv(0,0,e.width,e.height)}function vie(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return P4;var s=xl(t).getComputedStyle(t),r=mie(s),n=r.left+r.right,a=r.top+r.bottom,o=Tf(s.width),c=Tf(s.height);if(s.boxSizing==="border-box"&&(Math.round(o+n)!==e&&(o-=kT(s,"left","right")+n),Math.round(c+a)!==i&&(c-=kT(s,"top","bottom")+a)),!bie(t)){var u=Math.round(o+n)-e,l=Math.round(c+a)-i;Math.abs(u)!==1&&(o-=u),Math.abs(l)!==1&&(c-=l)}return Lv(r.left,r.top,o,c)}var yie=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof xl(t).SVGGraphicsElement}:function(t){return t instanceof xl(t).SVGElement&&typeof t.getBBox=="function"}}();function bie(t){return t===xl(t).document.documentElement}function wie(t){return j1?yie(t)?fie(t):vie(t):P4}function _ie(t){var e=t.x,i=t.y,s=t.width,r=t.height,n=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(n.prototype);return C4(a,{x:e,y:i,width:s,height:r,top:i,right:e+s,bottom:r+i,left:e}),a}function Lv(t,e,i,s){return{x:t,y:e,width:i,height:s}}var kie=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Lv(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=wie(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Sie=function(){function t(e,i){var s=_ie(i);C4(this,{target:e,contentRect:s})}return t}(),xie=function(){function t(e,i,s){if(this.activeObservations_=[],this.observations_=new T4,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=i,this.callbackCtx_=s}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof xl(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(e)||(i.set(e,new kie(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof xl(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;!i.has(e)||(i.delete(e),i.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&e.activeObservations_.push(i)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,i=this.activeObservations_.map(function(s){return new Sie(s.target,s.broadcastRect())});this.callback_.call(e,i,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),R4=typeof WeakMap<"u"?new WeakMap:new T4,I4=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=gie.getInstance(),s=new xie(e,i,this);R4.set(this,s)}return t}();["observe","unobserve","disconnect"].forEach(function(t){I4.prototype[t]=function(){var e;return(e=R4.get(this))[t].apply(e,arguments)}});var A4=function(){return typeof Ef.ResizeObserver<"u"?Ef.ResizeObserver:I4}();const Eie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}",D4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.roomJoinedListener=()=>{this.setStates({meeting:"joined"}),$.meeting="joined"},this.socketServiceRoomJoinedListener=()=>{this.meeting.stage.status==="ON_STAGE"||this.meeting.stage.status===void 0||(this.setStates({meeting:"joined"}),$.meeting="joined")},this.waitlistedListener=()=>{this.setStates({meeting:"waiting"}),$.meeting="waiting"},this.roomLeftListener=({state:e})=>{const i=this.states||$;if((i==null?void 0:i.roomLeftState)==="disconnected"){this.setStates({meeting:"ended",roomLeftState:e}),$.meeting="ended";return}this.setStates({meeting:"ended",roomLeftState:e}),$.meeting="ended",$.roomLeftState=e},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{if(["audio","video"].includes(e)){if(i==="ACCEPTED"||$.activeDebugger)return;const s={enabled:!0,kind:e};this.setStates({activePermissionsMessage:s}),$.activePermissionsMessage=s}},this.joinStateAcceptedListener=()=>{this.setStates({activeJoinStage:!0}),this.stateUpdate.emit({activeJoinStage:!0}),$.activeJoinStage=!0},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.t=j(),this.config=Re,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.newMeeting=void 0,this.iconPack=U}connectedCallback(){var t;this.resizeObserver=new A4(()=>this.handleResize()),this.resizeObserver.observe(this.host),this.applyDesignSystem&&((t=this.config)===null||t===void 0?void 0:t.designTokens)!=null&&typeof document<"u"&&M1(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.initializePreferences()}clearListeners(t){t!=null&&(t.self.removeListener("roomJoined",this.roomJoinedListener),t.self.removeListener("socketServiceRoomJoined",this.roomJoinedListener),t.meta.removeListener("socketReconnected",this.roomJoinedListener),t.self.removeListener("roomLeft",this.roomLeftListener),t.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.self.removeListener("waitlisted",this.waitlistedListener),t.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener))}disconnectedCallback(){var t;this.leaveOnUnmount&&((t=this.meeting)===null||t===void 0||t.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}meetingChanged(t){var e,i;if(t!=null){if(this.loadConfigFromPreset&&t.self.config!=null){const s=t.self.config,{config:r,data:n}=_4(s,t);this.config===Re&&(this.config=r),this.showSetupScreen==null&&(this.showSetupScreen=n.showSetupScreen),t.connectedMeetings.supportsConnectedMeetings&&((e=$.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.destinationMeetingId)&&(this.showSetupScreen=!1)}this.applyDesignSystem&&((i=this.config)===null||i===void 0?void 0:i.designTokens)!=null&&typeof document<"u"&&M1(document.documentElement,this.config.designTokens),t.meta.viewType==="LIVESTREAM"&&t.self.addListener("socketServiceRoomJoined",this.socketServiceRoomJoinedListener),t.self.addListener("roomJoined",this.roomJoinedListener),t.self.addListener("waitlisted",this.waitlistedListener),t.self.addListener("roomLeft",this.roomLeftListener),t.self.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),t.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),t.connectedMeetings.supportsConnectedMeetings&&t.connectedMeetings.once("changingMeeting",this.handleChangingMeeting),t.self.roomJoined?(this.states=Object.assign(Object.assign({},this.states),{meeting:"joined"}),$.meeting="joined"):this.showSetupScreen&&this.newMeeting==null?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),$.meeting="setup"):t.joinRoom()}}async iconPackUrlChanged(t){this.iconPack=await k4(t)}listenState(t){t.stopPropagation(),this.setStates(t.detail)}initializePreferences(){const t=eie();this.setStates({prefs:t}),$.prefs=t}handleChangingMeeting(t){$.activeBreakoutRoomsManager=Object.assign(Object.assign({},$.activeBreakoutRoomsManager),{destinationMeetingId:t})}handleResize(){this.size=S4(this.host.clientWidth)}setStates(t){const e=Object.assign({},this.states);w4(e,t),this.states=e}render(){var t,e,i;const s={meeting:(t=this.newMeeting)!==null&&t!==void 0?t:this.meeting,size:this.size,states:this.states||$,config:this.config,iconPack:this.iconPack,t:this.t},r={"dyte-grid":{layout:this.gridLayout}};return((i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.viewType)==="CHAT"?d(je,{element:"dyte-chat",defaults:s}):d(je,{element:"dyte-meeting",defaults:s,asHost:!0,elementProps:r})}get host(){return Ts(this)}static get watchers(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"]}}};D4.style=Eie;var Tie=Object.freeze({__proto__:null,dyte_meeting:D4});const Cie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;box-sizing:border-box;display:flex;width:100%;max-width:var(--dyte-space-80, 320px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden}.close{position:absolute;top:var(--dyte-space-3, 12px);left:var(--dyte-space-3, 12px)}.title{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400}#mobile-header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#mobile-header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;position:relative;border-radius:var(--dyte-border-radius-none, 0)}#mobile-header dyte-button:hover{background-color:transparent}#mobile-header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}#mobile-header dyte-button .dot{font-size:48px;position:absolute;top:-26px;right:calc(var(--dyte-space-1, 4px) * -1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}dyte-ai-home,dyte-ai-transcriptions,dyte-ai-chat{flex:1}:host([view='sidebar']){margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:50;max-width:100%;border:none}",M4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeAI:!1}),$.activeAI=!1},this.transcriptionHandler=()=>{this.tab!=="transcriptions"&&(this.newTranscriptionAvailable=!0)},this.defaultSection="home",this.meeting=void 0,this.states=void 0,this.config=Re,this.iconPack=U,this.t=j(),this.size=void 0,this.view="sidebar",this.tab=this.defaultSection,this.newTranscriptionAvailable=!1,this.newAiMessageAvailable=!1}connectedCallback(){var t,e;this.viewChanged(this.view),(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.on("transcript",this.transcriptionHandler)}disconnectedCallback(){var t,e;this.keydownListener&&document.removeEventListener("keydown",this.keydownListener),(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.off("transcript",this.transcriptionHandler)}viewChanged(t){t==="full-screen"&&(this.keydownListener=e=>{e.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener))}tabChanged(t){t==="transcriptions"&&this.newTranscriptionAvailable&&(this.newTranscriptionAvailable=!1),t==="home"&&this.newAiMessageAvailable&&(this.newAiMessageAvailable=!1)}viewSection(t){this.tab=t,$.activeSidebar=!0}render(){var t,e,i;if(!((e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.permissions).transcriptionEnabled||!(!((i=this.states)===null||i===void 0)&&i.activeAI))return null;const s={meeting:this.meeting,config:this.config,states:this.states||$,size:this.size,t:this.t,iconPack:this.iconPack};return d(O,null,d("h3",{class:"title"},this.t("ai")),d("div",{id:"mobile-header"},d("dyte-button",{variant:"ghost",class:{active:this.tab==="home"},onClick:()=>this.viewSection("home"),iconPack:this.iconPack,t:this.t},this.t("ai.home"),this.newAiMessageAvailable&&d("span",{class:"dot"},".")),d("dyte-button",{variant:"ghost",class:{active:this.tab==="transcriptions"},onClick:()=>this.viewSection("transcriptions"),iconPack:this.iconPack,t:this.t},this.t("ai.transcriptions"),this.newTranscriptionAvailable&&d("span",{class:"dot"},"."))),d("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.close,"aria-label":this.t("close"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),this.tab==="home"&&d(je,{element:"dyte-ai-home",defaults:s,props:{meeting:this.meeting}}),this.tab==="transcriptions"&&d(je,{element:"dyte-ai-transcriptions",defaults:s}),this.tab==="personal"&&d(je,{element:"dyte-ai-chat",defaults:s}))}static get watchers(){return{view:["viewChanged"],tab:["tabChanged"]}}};M4.style=Cie;var Pie=Object.freeze({__proto__:null,dyte_ai:M4});const Rie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column}.private-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}",O4=class{constructor(t){N(this,t),this.t=j()}render(){return d(O,null,d("p",{class:"private-message"},this.t("ai.chat.tooltip")),d("div",{class:"hint-message"},d("p",null,this.t("ask")," ",d("i",null,'"',this.t("ai.chat.summerise"),'"'),d("br",null)," or ",d("br",null),this.t("type")," ",d("i",null,'"',this.t("ai.chat.agenda"),'"'))))}};O4.style=Rie;var Iie=Object.freeze({__proto__:null,dyte_ai_chat:O4});const L4=(t,e)=>{const i=e.getTime()-t.getTime();return Math.round(Math.abs(i/1e3/60))},N4=(t,e)=>{const i=L4(t,e);if(i<2)return"just now";if(i<60)return`${i}m ago`;const s=Math.round(i/60);if(i<90)return`about ${s}h ago`;if(s<24)return`${s}h ago`;const r=Math.round(s/24);return r<7?`${r}d ago`:`${Math.round(r/7)}w ago`},U4=t=>t.toDateString()+" "+t.toLocaleTimeString(),Fs=(t,e=20)=>t==null?"":t.length>e?`${t.substring(0,e)}...`:t,$4=t=>{const e=/^\d+$/;return/^\p{Emoji}+$/u.test(t)&&!e.test(t)},wh=t=>t!=null&&t.trim().toLowerCase().startsWith("javascript:")?"https://dyte.io":t,cr=t=>(t=t==null?void 0:t.trim(),t===""?"Participant":t);function j4(t,e=2){return t.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,e).map(r=>r.charAt(0)).join("").toUpperCase()}const _h=({name:t,time:e,now:i})=>d("div",{class:"head"},d("div",{class:"name"},Fs(cr(t),20)),d("div",{class:"time",title:U4(e)},N4(e,i))),uo=(t,e=!0)=>{t!=null&&t.scrollTo({top:t.scrollHeight,behavior:e?"smooth":"auto"})},Aie=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{display:flex;flex-direction:column}.public-message{text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));margin-top:var(--dyte-space-8, 32px);margin-bottom:var(--dyte-space-8, 32px);margin-left:var(--dyte-space-10, 40px);margin-right:var(--dyte-space-10, 40px)}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll;}.subtitle{margin-top:var(--dyte-space-1, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.hint-message{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;flex:1 1 0%;font-size:14px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}i{font-weight:500;font-style:italic;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.actions{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;justify-content:space-between;font-size:12px}.actions div{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.actions button{display:inline-flex;cursor:pointer;border-radius:var(--dyte-border-radius-md, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.5);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.prompt{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.prompt input{height:var(--dyte-space-12, 48px);width:100%;resize:none;background-color:transparent;padding:var(--dyte-space-4, 16px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);white-space:pre-wrap;font-size:14px}.message .loader{display:flex;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);font-size:12px}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}.prompt-text{margin-top:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);border-left-width:var(--dyte-border-width-sm, 1px);border-left-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}`,z4=class{constructor(t){N(this,t),this.handleSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.messages=[...this.messages,{action:"Prompt",participantName:this.meeting.self.name,createdAt:new Date,prompt:this.prompt,loading:!0}],this.prompt=""},this.handleSummarise=()=>{},this.handleAgenda=()=>{},this.handleMoM=()=>{},this.prompt="",this.messages=[],this.meeting=void 0,this.initialMessages=void 0}connectedCallback(){this.initialMessages&&(this.messages=this.initialMessages.map(t=>Object.assign(Object.assign({},t),{action:this.mapMessageAction(t.action)})))}disconnectedCallback(){}messagesUpdated(){setTimeout(()=>{uo(this.contentContainer,!1)},100)}mapMessageAction(t){switch(t){case"default":return"Prompt";case"summarization":return"Summary";case"agenda generation":return"Agenda";case"action items generation":return"Action items"}}render(){return d(O,null,d("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},d("p",{class:"public-message"},"This conversation will be visible to everyone on the call."),!this.messages.length&&d("div",{class:"hint-message"},d("p",null,"Ask ",d("i",null,'"Hey AI, summarise this call"'),d("br",null)," or ",d("br",null),"Type ",d("i",null,`"Hey AI, what is today's agenda?"`))),this.messages.length>0&&d("div",{class:""},this.messages.map(t=>d("div",{class:"message"},d(_h,{name:t.action,time:new Date(t.createdAt),now:new Date}),d("p",{class:"subtitle"},"Triggered by ",t.participantName),t.prompt&&d("div",{class:"prompt-text"},t.prompt),t.loading?d("div",{class:"loader"},d("dyte-spinner",{size:"sm"}),"\xA0\xA0Generating..."):d("div",{class:"body"},t.response))))),d("div",{class:"actions"},d("span",null,"Quick actions:"),d("div",null,d("button",{onClick:this.handleSummarise},"Summarise"),d("button",{onClick:this.handleAgenda},"Agenda"),d("button",{onClick:this.handleMoM},"MoM"))),d("form",{class:"prompt",onSubmit:this.handleSubmit},d("input",{value:this.prompt,onInput:t=>{this.prompt=t.target.value},placeholder:"Type your prompt..."})))}static get watchers(){return{messages:["messagesUpdated"]}}};z4.style=Aie;var Die=Object.freeze({__proto__:null,dyte_ai_home:z4});const Mie=":host{display:block}",F4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.aiActive=!1}statesChanged(t){const e=t||$;this.aiActive=e.activeAI}toggleAI(){const t=this.states||$;this.aiActive=!(t!=null&&t.activeAI),this.stateUpdate.emit({activeAI:this.aiActive,activeMoreMenu:!1,activeSidebar:!1}),$.activeAI=this.aiActive,$.activeMoreMenu=!1}render(){var t,e;const i=this.t("ai.meeting_ai");return((e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.permissions).transcriptionEnabled?d(O,{title:i},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.aiActive},onClick:()=>this.toggleAI(),icon:this.iconPack.meeting_ai,label:i,variant:this.variant,brandIcon:!0})):null}static get watchers(){return{states:["statesChanged"]}}};F4.style=Mie;var Oie=Object.freeze({__proto__:null,dyte_ai_toggle:F4});const Lie=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.head{display:flex;align-items:center}.head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}*{box-sizing:border-box;border-width:0;border-style:solid}:host{width:100%;display:flex;flex-direction:column}.processing{display:flex;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center}.content{box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px);flex:1 0 0px;overflow-y:scroll}.started-message{margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-5, 20px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.search-bar{height:var(--dyte-space-14, 56px);width:100%;border-bottom-width:var(--dyte-border-width-sm, 1px);--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));padding:var(--dyte-space-3, 12px)}input{height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.caption-view{height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));display:flex;align-items:center;justify-content:space-between;font-size:14px}.message .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;word-break:break-word}.message{margin-bottom:var(--dyte-space-3, 12px)}.message:last-child{margin-bottom:var(--dyte-space-0, 0px)}`,V4=class{constructor(t){N(this,t),this.participantQuery="",this.isProcessing=!1,this.captionViewEnabled=!1,this.t=j(),this.meeting=void 0,this.transcriptions=[],this.initialTranscriptions=void 0}transcriptionHandler(t){this.transcriptions=[...this.transcriptions,t]}connectedCallback(){var t,e;this.initialTranscriptions&&(this.transcriptions=[...this.initialTranscriptions]),(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.on("transcript",i=>this.transcriptionHandler(i))}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.meta)===null||e===void 0||e.off("transcript",i=>this.transcriptionHandler(i))}transcriptionsChanged(){setTimeout(()=>{uo(this.contentContainer,!1)},100)}render(){return d(O,null,d("div",{class:"search-bar"},d("input",{type:"text",placeholder:"Search Participant",value:this.participantQuery,onInput:t=>this.participantQuery=t.target.value})),this.isProcessing&&d("div",{class:"processing"},d("p",null,"Processing audio....")),!this.isProcessing&&d("div",{class:"content scrollbar",ref:t=>this.contentContainer=t},d("div",{class:"started-message"},"Transcription started"),this.transcriptions.filter(t=>this.participantQuery?t.name.toLowerCase().includes(this.participantQuery.toLowerCase()):!0).map(t=>d("div",{class:"message"},d(_h,{name:t.name,time:new Date(t.date),now:new Date}),d("div",{class:"body"},t.transcript)))),this.captionViewEnabled&&d("dyte-ai-caption",null))}static get watchers(){return{transcriptions:["transcriptionsChanged"]}}};V4.style=Lie;var Nie=Object.freeze({__proto__:null,dyte_ai_transcriptions:V4}),Uie=Cf;function Cf(){}Cf.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(i,s,r){this.callbacks=this.callbacks||{};var n=arguments.length===3,a=n?arguments[1]:void 0,o=n?arguments[2]:arguments[1];return o._groupName=a,(this.callbacks[i]=this.callbacks[i]||[]).push(o),this},e.once=function(i,s,r){var n=this,a=arguments.length===3,o=a?arguments[1]:void 0,c=a?arguments[2]:arguments[1];function u(){n.off(i,u),c.apply(this,arguments)}return this.on(i,o,u),this},e.releaseGroup=function(i){this.callbacks=this.callbacks||{};var s,r,n,a;for(s in this.callbacks)for(a=this.callbacks[s],r=0,n=a.length;r<n;r++)a[r]._groupName===i&&(a.splice(r,1),r--,n--);return this},e.off=function(i,s){this.callbacks=this.callbacks||{};var r=this.callbacks[i],n;return r?arguments.length===1?(delete this.callbacks[i],this):(n=r.indexOf(s),n!==-1&&(r.splice(n,1),r.length===0&&delete this.callbacks[i]),this):this},e.emit=function(i){this.callbacks=this.callbacks||{};var s=[].slice.call(arguments,1),r=this.callbacks[i],n=this.getWildcardCallbacks(i),a,o,c;if(r)for(c=r.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,s);if(n)for(o=n.length,c=n.slice(),a=0,o=c.length;a<o&&c[a];++a)c[a].apply(this,[i].concat(s));return this},e.getWildcardCallbacks=function(i){this.callbacks=this.callbacks||{};var s,r,n=[];for(s in this.callbacks)r=s.split("*"),(s==="*"||r.length===2&&i.slice(0,r[0].length)===r[0])&&(n=n.concat(this.callbacks[s]));return n}};Cf.mixin(Cf);function $ie(t,e){var i=-1/0;t.getFloatFrequencyData(e);for(var s=4,r=e.length;s<r;s++)e[s]>i&&e[s]<0&&(i=e[s]);return i}var z1;typeof window<"u"&&(z1=window.AudioContext||window.webkitAudioContext);var vr=null,B4=function(t,s){var i=new Uie;if(!z1)return i;var s=s||{},r=s.smoothing||.1,n=s.interval||50,a=s.threshold,o=s.play,c=s.history||10,u=!0;vr=s.audioContext||vr||new z1;var l,h,g;g=vr.createAnalyser(),g.fftSize=512,g.smoothingTimeConstant=r,h=new Float32Array(g.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(l=vr.createMediaElementSource(t),typeof o>"u"&&(o=!0),a=a||-50):(l=vr.createMediaStreamSource(t),a=a||-50),l.connect(g),o&&g.connect(vr.destination),i.speaking=!1,i.suspend=function(){return vr.suspend()},i.resume=function(){return vr.resume()},Object.defineProperty(i,"state",{get:function(){return vr.state}}),vr.onstatechange=function(){i.emit("state_change",vr.state)},i.setThreshold=function(_){a=_},i.setInterval=function(_){n=_},i.stop=function(){u=!1,i.emit("volume_change",-100,a),i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),g.disconnect(),l.disconnect()},i.speakingHistory=[];for(var m=0;m<c;m++)i.speakingHistory.push(0);var f=function(){setTimeout(function(){if(!!u){var _=$ie(g,h);i.emit("volume_change",_,a);var k=0;if(_>a&&!i.speaking){for(var y=i.speakingHistory.length-3;y<i.speakingHistory.length;y++)k+=i.speakingHistory[y];k>=2&&(i.speaking=!0,i.emit("speaking"))}else if(_<a&&i.speaking){for(var y=0;y<i.speakingHistory.length;y++)k+=i.speakingHistory[y];k==0&&(i.speaking=!1,i.emit("stopped_speaking"))}i.speakingHistory.shift(),i.speakingHistory.push(0+(_>a)),f()}},n)};return f(),i};const jie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;flex-direction:column}.avatar-ctr{box-sizing:border-box;width:100%;flex:1 1 0%;padding:var(--dyte-space-1\\.5, 6px);border:2px solid transparent;border-radius:calc(var(--dyte-border-radius-xl, 40px) + var(--dyte-space-1\\.5, 6px))}.avatar-ctr.speaking{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));transition-property:box-shadow;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.bar-0{box-shadow:none}.bar-1{box-shadow:0 0 4px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-2{box-shadow:0 0 8px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-3{box-shadow:0 0 16px 1px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-4{box-shadow:0 0 20px 3px rgb(var(--dyte-colors-brand-500, 33 96 253))}.bar-5{box-shadow:0 0 24px 6px rgb(var(--dyte-colors-brand-500, 33 96 253))}dyte-avatar{aspect-ratio:1 / 1;height:100%;width:100%;position:relative;border-radius:var(--dyte-border-radius-xl, 40px)}dyte-name-tag{display:block;height:var(--dyte-space-10, 40px);width:100%;text-align:center;line-height:2.5rem}:host([size='sm']) .avatar-ctr{border-radius:calc(var(--dyte-border-radius-lg, 12px) + var(--dyte-space-1\\.5, 6px))}:host([size='sm']) dyte-name-tag{height:var(--dyte-space-7, 28px);line-height:1.75rem}:host([size='sm']) dyte-avatar{border-radius:var(--dyte-border-radius-lg, 12px)}.mic-icon{position:absolute;bottom:calc(var(--dyte-space-1, 4px) * -1);right:calc(var(--dyte-space-1, 4px) * -1);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.mic-icon dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) .mic-icon dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='md']) .mic-icon dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}",H4=class{constructor(t){N(this,t),this.onAudioUpdate=({audioEnabled:e,audioTrack:i})=>{if(!!this.participant)if(e&&i){const s=new MediaStream;s.addTrack(i),this.calcVolume(s),this.audioEnabled=!0}else this.volume=0,this.audioEnabled=!1},this.meeting=void 0,this.config=void 0,this.size=void 0,this.states=void 0,this.iconPack=U,this.t=j(),this.participant=void 0,this.audioEnabled=!1,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}disconnectedCallback(){var t,e;(t=this.hark)===null||t===void 0||t.stop(),(e=this.participant)===null||e===void 0||e.removeListener("audioUpdate",this.onAudioUpdate)}participantChanged(t){!t||(this.audioEnabled=t.audioEnabled,t.addListener("audioUpdate",this.onAudioUpdate))}calcVolume(t){this.hark=B4(t,{play:!1,interval:1e3/10}),this.hark.on("volume_change",e=>{const i=this.volume;let s=Math.round(10**(e/115)*10);s<3&&(s=0);let r=Math.round((i*2+s)/3);i!==r&&(this.volume=r)})}render(){const t={meeting:this.meeting,size:this.size,config:this.config,states:this.states,iconPack:this.iconPack,t:this.t};let e="bar-0";return this.volume>5?e="bar-5":this.volume<0?e="bar-0":e="bar-"+this.volume,d(O,null,d("div",{class:{"avatar-ctr":!0,speaking:this.audioEnabled,[e]:!0}},d("dyte-avatar",{participant:this.participant,size:this.size},!this.audioEnabled&&d("div",{class:"mic-icon"},d("dyte-icon",{icon:U.mic_off})))),d("dyte-name-tag",Object.assign({variant:"text",participant:this.participant},t)),d("slot",null))}static get watchers(){return{participant:["participantChanged"]}}};H4.style=jie;var zie=Object.freeze({__proto__:null,dyte_audio_tile:H4}),Ms=function(t,e,i,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,i):r?r.value=i:e.set(t,i),i},re=function(t,e,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(t):s?s.value:e.get(t)},Fie=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]]);return i},Is,Fa,Mr,Or,pc,Ns,Qa,Lr,lp,up,W4,Pf,q4,G4,Od;class Vie{constructor(){Is.add(this),Fa.set(this,!1),Mr.set(this,void 0),Or.set(this,void 0),pc.set(this,void 0),Ns.set(this,void 0),Qa.set(this,void 0),Lr.set(this,void 0),lp.set(this,void 0),up.set(this,void 0)}get hasLocalChanges(){return re(this,Fa,"f")}get currentState(){let e,i=[];return Array.from(re(this,Ns,"f").keys()).forEach(s=>{const r=re(this,Lr,"f").get(s);r.isParent?e=Object.assign(Object.assign({},r),{participants:re(this,Is,"m",Od).call(this,s)}):i.push(Object.assign(Object.assign({},r),{participants:re(this,Is,"m",Od).call(this,s)}))}),{parentMeeting:e,meetings:i}}get allConnectedMeetings(){return this.currentState.meetings.sort((e,i)=>e.title.localeCompare(i.title))}get allParticipants(){return Array.from(re(this,Qa,"f").values())}get unassignedParticipants(){return re(this,Is,"m",Od).call(this,re(this,Mr,"f").parentMeeting.id)}getParticipantsForMeeting(e){return re(this,Is,"m",Od).call(this,e)}addNewMeeting(){Ms(this,Fa,!0,"f");const e=gX(),i=Fie(e,["participants"]);return re(this,Is,"m",Pf).call(this,Object.assign(Object.assign({},i),{isParent:!1})),i}addNewMeetings(e){return Array.from({length:e}).map(()=>this.addNewMeeting())}updateMeetingTitle(e,i){re(this,Lr,"f").get(e).title=i,S0(e)||re(this,lp,"f").add(e)}deleteMeeting(e){Ms(this,Fa,!0,"f");const i=re(this,Lr,"f").get(e),s=re(this,Is,"m",Od).call(this,i.id).map(Qt);this.assignParticipantsToMeeting(s,re(this,Mr,"f").parentMeeting.id),re(this,Lr,"f").delete(i.id),re(this,Ns,"f").delete(i.id),S0(i.id)||re(this,up,"f").add(i.id)}assignParticipantsToMeeting(e,i){return Ms(this,Fa,!0,"f"),e.forEach(s=>{const r=re(this,Or,"f").get(s);re(this,Ns,"f").get(r).delete(s),re(this,Ns,"f").get(i).add(s),re(this,Or,"f").set(s,i)}),this.currentState}assignParticipantsRandomly(){const e=mX(this.unassignedParticipants,this.allConnectedMeetings.length);return this.allConnectedMeetings.forEach((i,s)=>{const r=e[s];r&&r.length!==0&&this.assignParticipantsToMeeting(r.map(n=>n.customParticipantId),i.id)}),this.currentState}unassignParticipants(e){const i=re(this,Mr,"f").parentMeeting.id;return this.assignParticipantsToMeeting(e,i)}unassignAllParticipants(){const e=re(this,Mr,"f").parentMeeting.id,i=this.allParticipants.map(Qt);return this.assignParticipantsToMeeting(i,e)}updateCurrentState(e){re(this,Fa,"f")||re(this,Is,"m",W4).call(this,e),[e.parentMeeting,...e.meetings].forEach((i,s)=>{const r=Object.assign(Object.assign({},i),{isParent:s===0});re(this,Is,"m",Pf).call(this,r),i.participants.forEach(n=>{re(this,Is,"m",q4).call(this,n,r)})})}get meetingsToCreate(){return this.allConnectedMeetings.filter(e=>S0(e.id)).map(({id:e,title:i})=>({id:e,title:i}))}get meetingsToUpdate(){return this.allConnectedMeetings.filter(e=>re(this,lp,"f").has(e.id)).map(({id:e,title:i})=>({id:e,title:i}))}get meetingsToDelete(){return Array.from(re(this,up,"f"))}get participantsToMove(){const e=new Map;return Array.from(re(this,Or,"f").keys()).forEach(i=>{const s=re(this,pc,"f").get(i),r=re(this,Or,"f").get(i);if(s===r)return;const n=`${s}__${r}`;e.has(n)||e.set(n,[]);const a=re(this,Qa,"f").get(i);e.get(n).push(a.id)}),Array.from(e.keys()).map(i=>{const[s,r]=i.split("__");return{sourceMeetingId:s,destinationMeetingId:r,participantIds:e.get(i)}})}async applyChanges(e){const i=this.meetingsToCreate.length!==0?e.connectedMeetings.createMeetings(this.meetingsToCreate):Promise.resolve([]),s=this.meetingsToUpdate.length!==0?e.connectedMeetings.updateMeetings(this.meetingsToUpdate):Promise.resolve(),[r]=await Promise.all([i,s]);r&&r.forEach(n=>{this.meetingsToCreate.forEach(a=>{a.title===n.title&&re(this,Is,"m",G4).call(this,re(this,Lr,"f").get(a.id),n.id)})}),this.participantsToMove.length!==0&&this.participantsToMove.forEach(({sourceMeetingId:n,destinationMeetingId:a,participantIds:o})=>{e.connectedMeetings.moveParticipants(n,a,o)}),this.meetingsToDelete.length!==0&&e.connectedMeetings.deleteMeetings(this.meetingsToDelete)}discardChanges(){return Ms(this,Fa,!1,"f"),this.updateCurrentState(re(this,Mr,"f")),this.currentState}}Fa=new WeakMap,Mr=new WeakMap,Or=new WeakMap,pc=new WeakMap,Ns=new WeakMap,Qa=new WeakMap,Lr=new WeakMap,lp=new WeakMap,up=new WeakMap,Is=new WeakSet,W4=function(e){Ms(this,Mr,e,"f"),Ms(this,Lr,new Map,"f"),Ms(this,Qa,new Map,"f"),Ms(this,lp,new Set,"f"),Ms(this,up,new Set,"f"),Ms(this,Ns,new Map,"f"),Ms(this,Or,new Map,"f"),Ms(this,pc,new Map,"f"),Ms(this,pc,new Map,"f"),re(this,Mr,"f").parentMeeting.participants.forEach(i=>{re(this,pc,"f").set(Qt(i),re(this,Mr,"f").parentMeeting.id)}),re(this,Mr,"f").meetings.forEach(i=>{i.participants.forEach(s=>{re(this,pc,"f").set(Qt(s),i.id)})})},Pf=function(e){re(this,Lr,"f").has(e.id)||(re(this,Lr,"f").set(e.id,e),re(this,Ns,"f").set(e.id,new Set))},q4=function(e,i){re(this,Qa,"f").has(Qt(e))||(re(this,Qa,"f").set(Qt(e),e),re(this,Or,"f").set(Qt(e),i.id),re(this,Ns,"f").get(i.id).add(Qt(e)))},G4=function(e,i){const s=e.id;re(this,Is,"m",Pf).call(this,Object.assign(Object.assign({},e),{id:i})),re(this,Lr,"f").delete(s);const r=re(this,Ns,"f").get(s);re(this,Ns,"f").set(i,r),re(this,Ns,"f").delete(s),Array.from(re(this,Or,"f").keys()).forEach(n=>{re(this,Or,"f").get(n)===s&&re(this,Or,"f").set(n,i)})},Od=function(e){return Array.from(re(this,Ns,"f").get(e)).map(s=>re(this,Qa,"f").get(s))};const Bie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.color-brand{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.color-danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.loading-content{height:var(--dyte-space-60, 240px);width:var(--dyte-space-96, 384px);padding:var(--dyte-space-9, 36px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;align-items:center;justify-content:center}.room-config{overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}header dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.create-room{margin-bottom:var(--dyte-space-4, 16px);display:flex;align-items:center;gap:var(--dyte-space-3, 12px);width:100%}.create-room p{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px}.distribution-hint{margin-bottom:var(--dyte-space-8, 32px);font-size:14px;font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.distribution-hint em{font-style:normal;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}footer{display:flex;flex-direction:row;vertical-align:middle;justify-content:center}footer dyte-button{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}label{margin-bottom:var(--dyte-space-3, 12px);font-weight:400;color:rgb(var(--dyte-colors-text-1000, 255 255 255));opacity:0.4}.participant-config-wrapper{width:850px;height:595px;max-width:100%;max-height:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column}.participant-config-actions{display:flex;justify-content:space-between;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.participant-config{display:flex;flex-grow:1;flex-direction:row;overflow:hidden}aside{box-sizing:border-box;display:flex;width:var(--dyte-space-96, 384px);flex-grow:1;flex-direction:column;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-4, 16px);border-right-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}aside header{margin-bottom:var(--dyte-space-4, 16px);width:100%;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);padding-top:var(--dyte-space-8, 32px);font-size:20px;font-weight:500;line-height:2rem}.shuffle-button{display:flex;flex-direction:row;align-items:center}.shuffle-button dyte-icon{height:var(--dyte-space-8, 32px)}.participants-assign-actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between;font-size:14px;padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-2, 8px);margin-left:calc(var(--dyte-space-8, 32px) * -1);margin-right:calc(var(--dyte-space-4, 16px) * -1);padding-top:var(--dyte-space-0\\.5, 2px);padding-bottom:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.participants-assign-actions .deselect-button{height:var(--dyte-space-6, 24px)}.participants-assign-actions .deselect-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.assign-rooms{padding:var(--dyte-space-8, 32px);display:flex;width:100%;flex-direction:column}.assign-rooms .disabled{opacity:0.2}.assign-rooms .back{display:flex;cursor:pointer;flex-direction:row;align-items:center;justify-content:flex-start;padding:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-0, 0px);font-size:14px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.assign-rooms .back dyte-icon{height:var(--dyte-space-5, 20px)}.assign-rooms .row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}.assign-rooms .row-header{margin:var(--dyte-space-0, 0px);font-size:16px;line-height:2rem}.assign-rooms .cta-buttons{display:flex;align-items:center;justify-content:flex-start;gap:var(--dyte-space-2, 8px)}.assign-rooms .cta-buttons dyte-button div{display:flex;flex-direction:row;align-items:center}.assign-rooms .cta-buttons dyte-button div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.rooms{margin-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-1, 4px);display:flex;flex-grow:1;flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;max-height:500px}.rooms::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px)}.rooms::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.rooms::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.breakout-actions{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}.breakout-actions .start-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.breakout-actions .close-breakout-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}.breakout-actions .update-breakout-button{background-color:transparent;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}.status-bar{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));width:var(--dyte-space-80, 320px)}.ephemeral-status{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.ephemeral-status dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.room-switcher-container{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));width:468px;padding:var(--dyte-space-8, 32px)}.add-room-jumbo-btn div{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.add-room-jumbo-btn div dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.br-primary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-primary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",Su=1,J4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.updateLocalState=e=>{this.stateManager.updateCurrentState(e),this.draftState=this.stateManager.currentState,this.meeting.connectedMeetings.isActive&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{mode:"edit"})),this.roomConfig.mode==="create"&&!this.meeting.connectedMeetings.isActive&&hX(),["edit","view"].includes(this.roomConfig.mode)&&(this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:e.meetings.length,step:"participants-config"}),this.selectedParticipants=[])},this.onAddNewRoom=()=>{this.stateManager.addNewMeeting(),this.draftState=this.stateManager.currentState,this.selectorRef.scrollTo({top:this.selectorRef.scrollHeight,behavior:"smooth"})},this.onRoomUpdate=e=>{const{detail:i}=e;this.stateManager.updateMeetingTitle(i.id,i.title),this.draftState=this.stateManager.currentState},this.onRoomDelete=e=>{this.stateManager.allConnectedMeetings.find(s=>s.id===e)&&(this.stateManager.deleteMeeting(e),this.draftState=this.stateManager.currentState)},this.unassignParticipant=e=>{this.stateManager.unassignParticipants([e]),this.draftState=this.stateManager.currentState},this.onUnassignAll=()=>{this.stateManager.unassignAllParticipants(),this.draftState=this.stateManager.currentState},this.assignParticipantsToRoom=e=>{this.selectedParticipants.length===0||this.assigningParticipants==!1||(this.stateManager.assignParticipantsToMeeting(this.selectedParticipants,e),this.draftState=this.stateManager.currentState,this.selectedParticipants=[],this.assigningParticipants=!1,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned")))},this.handleClose=(e,i)=>{e.emit({activeBreakoutRoomsManager:{active:!0}}),i.activeBreakoutRoomsManager={active:!0}},this.enableConfirmationModal=(e="start-breakout")=>{let i={active:!0,header:"breakout_rooms.confirm_modal.start_breakout.header",content:"breakout_rooms.confirm_modal.start_breakout.content",variant:"primary",cancelText:"breakout_rooms.confirm_modal.start_breakout.cancelText",ctaText:"breakout_rooms.confirm_modal.start_breakout.ctaText",onClick:()=>this.applyChanges(),onClose:this.handleClose};e==="close-breakout"&&(i={active:!0,header:"breakout_rooms.confirm_modal.close_breakout.header",content:"breakout_rooms.confirm_modal.close_breakout.content",variant:"danger",cancelText:"cancel",ctaText:"breakout_rooms.confirm_modal.close_breakout.ctaText",onClick:()=>this.closeBreakout(),onClose:this.handleClose}),this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!1},activeConfirmationModal:i}),$.activeBreakoutRoomsManager={active:!1},$.activeConfirmationModal=i},this.close=()=>{var e;this.stateManager.discardChanges(),(e=this.stateUpdate)===null||e===void 0||e.emit({activeBreakoutRoomsManager:{active:!1}}),$.activeBreakoutRoomsManager={active:!1}},this.applyChanges=async()=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!0}),await this.stateManager.applyChanges(this.meeting),this.close(),this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{applyingChanges:!1})},this.loading=!1,this.roomConfig={rooms:2,step:"room-config",mode:"create",applyingChanges:!1},this.draftState=void 0,this.assigningParticipants=!1,this.selectedParticipants=[],this.ephemeralStatusText="",this.isDragMode=!1,this.meeting=void 0,this.states=void 0,this.iconPack=U,this.t=j()}onSelectedParticipantsChanged(t){t.length>0?this.assigningParticipants=!0:this.assigningParticipants=!1}connectedCallback(){this.permissions=this.meeting.self.permissions.connectedMeetings,this.meeting.connectedMeetings.on("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.on("changingMeeting",this.close),this.stateManager=new Vie,this.fetchRoomState()}disconnectedCallback(){this.meeting.connectedMeetings.off("stateUpdate",this.updateLocalState),this.meeting.connectedMeetings.off("changingMeeting",this.close)}async fetchRoomState(){this.loading=!0,await this.meeting.connectedMeetings.getConnectedMeetings(),this.loading=!1}setEphemeralStatus(t){this.ephemeralStatusText=t,setTimeout(()=>{this.ephemeralStatusText=""},3e3)}onCreateRooms(){this.selectedParticipants=[],this.stateManager.addNewMeetings(this.roomConfig.rooms),this.draftState=this.stateManager.currentState,this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{step:"participants-config"})}onParticipantDelete(t){const{detail:e}=t,i=Qt(e);i!=null&&this.unassignParticipant(i)}toggleDragMode(t){this.isDragMode=t.detail}assignParticipantsRandomly(){this.stateManager.unassignedParticipants.length!==0&&(this.stateManager.assignParticipantsRandomly(),this.draftState=this.stateManager.currentState,this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.participants_assigned_randomly")))}async joinRoom(t){const e=Qt(this.meeting.self);this.stateManager.assignParticipantsToMeeting([e],t),await this.applyChanges()}async closeBreakout(){this.stateManager.allConnectedMeetings.forEach(t=>this.stateManager.deleteMeeting(t.id)),await this.applyChanges()}updateSelectedParticipants(t){this.selectedParticipants=t.detail}updateAllParticipants(t){this.selectedParticipants=t.detail}getStatusText(){if(this.ephemeralStatusText!=="")return this.ephemeralStatusText;let t="";return this.roomConfig.mode==="create"&&(t=this.t("breakout_rooms.status.assign_multiple"),this.selectedParticipants.length!==0&&(t=this.t("breakout_rooms.status.select_room"))),t}getApproxDistribution(){const t=this.stateManager.unassignedParticipants.length/(this.roomConfig.rooms||Su);return Math.max(Su,Math.round(t))}deselectAll(){this.selectedParticipants=[]}async discardChanges(){this.stateManager.discardChanges(),await this.fetchRoomState(),this.setEphemeralStatus(this.t("breakout_rooms.ephemeral_status.changes_discarded"))}shouldShowOnlyRoomSwitcher(){return this.permissions.canAlterConnectedMeetings===!1}getPermittedRooms(){return this.permissions.canAlterConnectedMeetings||this.permissions.canSwitchConnectedMeetings?this.stateManager.allConnectedMeetings:this.stateManager.allConnectedMeetings.filter(t=>t.id===this.meeting.meta.roomName)}renderMainRoomMaybe(){return this.meeting.connectedMeetings.isActive&&this.permissions.canSwitchToParentMeeting?d("dyte-breakout-room-manager",{key:this.stateManager.currentState.parentMeeting.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,meeting:this.meeting,mode:this.roomConfig.mode,onParticipantsAdd:()=>this.assignParticipantsToRoom(this.stateManager.currentState.parentMeeting.id),onRoomJoin:()=>this.joinRoom(this.stateManager.currentState.parentMeeting.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},this.stateManager.currentState.parentMeeting),iconPack:this.iconPack,t:this.t}):null}renderRoomSwitcher(){return d(O,null,d("div",{class:"room-switcher-container"},d("header",null,d("dyte-icon",{icon:this.iconPack.breakout_rooms}),d("span",null,this.t("breakout_rooms.join_breakout_header"))),d("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map((t,e)=>d("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:e===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:!1})))))}renderLoading(){return d(O,null,d("div",{class:"loading-content"},d("dyte-spinner",{size:"xl"})))}renderRoomConfig(){return d(O,null,d("div",{class:"room-config"},d("header",null,d("dyte-icon",{icon:this.iconPack.breakout_rooms}),d("span",null,this.t("breakout_rooms.room_config_header"))),d("div",{class:"create-room"},d("p",null,this.t("breakout_rooms.num_of_rooms")),d("dyte-counter",{value:this.roomConfig.rooms,minValue:Su,iconPack:this.iconPack,t:this.t,onValueChange:t=>{this.roomConfig=Object.assign(Object.assign({},this.roomConfig),{rooms:Math.max(+t.detail,Su)})}})),d("span",{class:"distribution-hint"},`${this.t("breakout_rooms.approx")} `," ",d("em",null,this.getApproxDistribution()," ",this.t("breakout_rooms.participants_per_room"))," ",this.t("breakout_rooms.division_text")),d("footer",null,d("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",title:this.t("create"),disabled:this.roomConfig.rooms===0,onClick:()=>this.onCreateRooms()},this.t("create")))))}render(){return this.loading?this.renderLoading():this.shouldShowOnlyRoomSwitcher()?this.renderRoomSwitcher():this.roomConfig.step==="room-config"?this.renderRoomConfig():d(O,null,d("div",{class:"participant-config-wrapper"},d("div",{class:"participant-config"},d("aside",{part:"menu"},d("header",null,this.t("breakout_rooms.assign_participants")),d("dyte-breakout-room-participants",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,participantIds:this.stateManager.unassignedParticipants.map(Qt),selectedParticipantIds:this.selectedParticipants},d("dyte-tooltip",{label:this.t("breakout_rooms.shuffle_participants"),iconPack:this.iconPack,t:this.t,slot:"shuffle-button"},d("dyte-button",{disabled:this.roomConfig.mode==="edit"||this.stateManager.unassignedParticipants.length===0,iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>this.assignParticipantsRandomly(),class:"shuffle-button br-primary-btn"},d("dyte-icon",{icon:this.iconPack.shuffle,iconPack:this.iconPack,t:this.t})))),this.selectedParticipants.length!==0&&d("div",{class:"participants-assign-actions"},d("span",null,`${this.selectedParticipants.length} ${this.t("breakout_rooms.selected")}`),d("dyte-button",{disabled:this.roomConfig.mode==="edit",iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:()=>this.deselectAll(),class:"deselect-button color-danger"},this.t("breakout_rooms.deselect")))),d("div",{class:"assign-rooms"},d("div",{class:"row"},d("p",{class:"row-header"},this.t("breakout_rooms.rooms")," (",this.stateManager.allConnectedMeetings.length,")"),!this.assigningParticipants&&d("div",{class:"cta-buttons"},d("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,class:"br-primary-btn"},d("div",{onClick:this.onAddNewRoom},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),this.t("breakout_rooms.add_room"))),this.stateManager.allConnectedMeetings.flatMap(t=>t.participants).length!==0&&d("dyte-button",{kind:"button",variant:"ghost",onClick:this.onUnassignAll,iconPack:this.iconPack,t:this.t},this.t("breakout_rooms.unassign_all")))),d("div",{class:"rooms",ref:t=>this.selectorRef=t},this.renderMainRoomMaybe(),this.getPermittedRooms().map((t,e)=>d("dyte-breakout-room-manager",{key:t.id,assigningParticipants:this.assigningParticipants,isDragMode:this.isDragMode,defaultExpanded:e===0,meeting:this.meeting,mode:this.roomConfig.mode,onDelete:()=>this.onRoomDelete(t.id),onParticipantsAdd:()=>this.assignParticipantsToRoom(t.id),onRoomJoin:()=>this.joinRoom(t.id),onUpdate:this.onRoomUpdate,states:this.states,room:Object.assign({},t),iconPack:this.iconPack,t:this.t,allowDelete:this.stateManager.allConnectedMeetings.length>Su})),d("dyte-button",{kind:"button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.onAddNewRoom,class:"add-room-jumbo-btn br-secondary-btn"},d("div",null,d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}),d("span",null,this.t("breakout_rooms.add_room_brief"))))))),d("div",{class:"participant-config-actions"},d("div",{class:{"status-bar":!0,"ephemeral-status":this.ephemeralStatusText!==""}},this.ephemeralStatusText!==""&&d("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}),this.getStatusText()),d("div",{class:"breakout-actions"},this.roomConfig.mode==="create"&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"start-breakout-button",onClick:()=>this.enableConfirmationModal("start-breakout")},this.t("breakout_rooms.start_breakout")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"color-danger",variant:"ghost",onClick:()=>this.discardChanges()},this.t("breakout_rooms.discard_changes")),this.roomConfig.mode==="edit"&&this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"update-breakout-button",onClick:this.applyChanges},this.t("breakout_rooms.update_breakout")),this.roomConfig.mode==="edit"&&!this.stateManager.hasLocalChanges&&this.permissions.canAlterConnectedMeetings&&d("dyte-button",{size:"md",iconPack:this.iconPack,t:this.t,class:"close-breakout-button",onClick:()=>this.enableConfirmationModal("close-breakout")},this.t("breakout_rooms.close_breakout"))))))}static get watchers(){return{selectedParticipants:["onSelectedParticipantsChanged"]}}};J4.style=Bie;var Hie=Object.freeze({__proto__:null,dyte_breakout_rooms_manager:J4});const Wie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",K4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.breakoutRoomToggle=()=>{var e,i,s;const r=this.meeting.connectedMeetings.isActive?"view":"create";this.stateUpdate.emit({activeBreakoutRoomsManager:{active:!(!((i=(e=this.states)===null||e===void 0?void 0:e.activeBreakoutRoomsManager)===null||i===void 0)&&i.active),mode:r}}),$.activeBreakoutRoomsManager={active:!(!((s=$.activeBreakoutRoomsManager)===null||s===void 0)&&s.active),mode:r}},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j()}render(){if(!!s4(this.meeting))return d(O,{title:this.t("breakout_rooms")},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.breakoutRoomToggle,icon:this.iconPack.breakout_rooms,label:this.t("breakout_rooms"),variant:this.variant}))}};K4.style=Wie;var qie=Object.freeze({__proto__:null,dyte_breakout_rooms_toggle:K4});const Gie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-4, 16px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.content-col{display:flex;width:100%;flex-direction:column}h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px)}.content-row{display:flex;width:100%;flex-direction:row}.content-row dyte-button{margin-top:var(--dyte-space-4, 16px);width:100%}textarea{margin-top:var(--dyte-space-3, 12px);resize:none;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;height:var(--dyte-space-16, 64px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}textarea::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}select{border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);outline:2px solid transparent;outline-offset:2px;border-right-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:transparent;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-2, 8px);width:100%;text-align:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));display:flex;flex-direction:row;align-items:center;justify-content:center}p dyte-icon{margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px)}",Q4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=U,this.t=j(),this.messagePayload={to:"Everyone",message:""},this.successMessage=!1}close(){var t;(t=this.stateUpdate)===null||t===void 0||t.emit({activeBroadcastMessageModal:!1}),$.activeBroadcastMessageModal=!1}sendMessage(){this.successMessage=!0,setTimeout(()=>{this.close()},2e3)}render(){return d(O,null,d("div",{class:"content-col"},d("h2",null,"Broadcast message to"),d("select",{onChange:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{to:t.target.value})}},d("option",null,"Everyone"),d("option",null,"List of rooms")),d("textarea",{placeholder:"Type message here...",onInput:t=>{this.messagePayload=Object.assign(Object.assign({},this.messagePayload),{message:t.target.value})}}),this.successMessage?d("p",null,"Message sent to ",this.messagePayload.to,d("dyte-icon",{icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t})):d("div",{class:"content-row"},d("dyte-button",{onClick:()=>this.close(),variant:"secondary",iconPack:this.iconPack,t:this.t},"Cancel"),"\u2002",d("dyte-button",{variant:"primary",onClick:()=>this.sendMessage(),iconPack:this.iconPack,t:this.t},"Send"))))}};Q4.style=Gie;var Jie=Object.freeze({__proto__:null,dyte_broadcast_message_modal:Q4});const Kie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Y4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.videoUpdateListener=({videoEnabled:e})=>{this.videoEnabled=e},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{e==="video"&&(this.cameraPermission=i)},this.toggleCamera=()=>{var e,i,s,r,n,a,o,c,u,l,h;if((e=this.meeting)===null||e===void 0||e.__internals__.logger.info("dyteCameraToggle::toggleCamera",{media:{video:{enabled:Boolean((s=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||s===void 0?void 0:s.videoEnabled),permission:this.cameraPermission,canProduce:(a=(n=(r=this.meeting)===null||r===void 0?void 0:r.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo}},webinar:{stageStatus:(o=this.meeting)===null||o===void 0?void 0:o.stage.status},livestream:{stageStatus:(u=(c=this.meeting)===null||c===void 0?void 0:c.stage)===null||u===void 0?void 0:u.status},moduleExists:{self:Boolean((l=this.meeting)===null||l===void 0?void 0:l.self)}}),this.hasPermissionError()){const m={enabled:!0,kind:"video"};return this.stateUpdate.emit({activePermissionsMessage:m}),$.activePermissionsMessage=m,!1}const g=(h=this.meeting)===null||h===void 0?void 0:h.self;g==null||!this.canProduceVideo||(g.videoEnabled?g.disableVideo():g.enableVideo())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.videoEnabled=!1,this.canProduceVideo=!1,this.cameraPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s;(t=this.meeting)===null||t===void 0||t.self.removeListener("videoUpdate",this.videoUpdateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(s=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||s===void 0||s.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.cameraPermission=e.mediaPermissions.video||"NOT_REQUESTED",this.videoEnabled=e.videoEnabled,e.addListener("videoUpdate",this.videoUpdateListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),i==null||i.addListener("stageStatusUpdate",this.stageStatusListener)}}updateCanProduce(t){const{self:e,meta:i,stage:s}=t,r=e.permissions.canProduceVideo==="ALLOWED",n=i.viewType==="WEBINAR"||t.self.permissions.stageEnabled,a=i.viewType==="LIVESTREAM";this.canProduceVideo=!1,r&&!a&&!n?this.canProduceVideo=!0:(n||a)&&(r&&s.status!=="OFF_STAGE"&&s.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceVideo=!0),e.permissions.canProduceVideo==="CAN_REQUEST"&&(s.status==="ON_STAGE"||s.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canProduceVideo=!0))}hasPermissionError(){return this.cameraPermission==="DENIED"||this.cameraPermission==="SYSTEM_DENIED"}getState(){let t="",e="",i="",s={},r=this.hasPermissionError(),n=this.cameraPermission==="COULD_NOT_START";return this.videoEnabled&&!r?(e=this.t("video_on"),i=this.iconPack.video_on):(e=this.t("video_off"),i=this.iconPack.video_off,s["red-icon"]=!0),n?t=this.t("perm_could_not_start.video"):this.cameraPermission==="SYSTEM_DENIED"?t=this.t("perm_sys_denied.video"):this.cameraPermission==="DENIED"?t=this.t("perm_denied.video"):t=this.videoEnabled?this.t("disable_video"):this.t("enable_video"),{tooltipLabel:t,label:e,icon:i,classList:s,showWarning:r||n,disable:r}}render(){var t;if(!this.canProduceVideo||((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM")return null;const{tooltipLabel:e,label:i,icon:s,classList:r,showWarning:n,disable:a}=this.getState();return d(O,{title:i},d("dyte-tooltip",{kind:"block",label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:r,variant:this.variant,label:i,icon:s,onClick:this.toggleCamera,showWarning:n,disabled:a})))}static get watchers(){return{meeting:["meetingChanged"]}}};Y4.style=Kie;var Qie=Object.freeze({__proto__:null,dyte_camera_toggle:Y4});const Yie=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-96, 384px);padding-left:var(--dyte-space-9, 36px);padding-right:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-10, 40px);padding-bottom:var(--dyte-space-10, 40px)}header{margin-bottom:var(--dyte-space-8, 32px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);font-size:24px;font-weight:600}.channel-name-input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-3, 12px);font-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px}.channel-name-input:focus{outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}footer{margin-top:var(--dyte-space-5, 20px);display:flex;justify-content:flex-end}.member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px)}.member dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.input-container{position:relative;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:1.25;outline:2px solid transparent;outline-offset:2px;outline-width:2px;outline-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5);border-radius:var(--dyte-border-radius-sm, 4px)}.input-container .members{margin:var(--dyte-space-0, 0px);max-height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);list-style-type:none;display:flex;flex-wrap:wrap;gap:var(--dyte-space-1, 4px);cursor:text;font-size:16px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));overflow-y:auto;min-height:var(--dyte-space-7, 28px)}.input-container .pill{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.input-container .pill dyte-avatar{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.input-container .pill span{max-width:var(--dyte-space-32, 128px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.input-container .pill dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.input-container input{width:var(--dyte-space-24, 96px);border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-1, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;font-size:16px;line-height:1.25rem}.input-container input.wide-input{width:100%}.search-results{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);width:100%;padding:var(--dyte-space-0, 0px);position:absolute;list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.search-results .member{cursor:pointer}.search-results .member dyte-avatar{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.search-results .member:hover,.search-results .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}`,Z4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.switchChannel=K(this,"switchChannel",7),this.allMembers=new Map,this.inputTextRef=null,this.searchInputTextRef=null,this.focusOnSearch=(e=!1)=>{this.focusedMemberIndex=-1,Ci(()=>{var i,s;(i=this.searchInputTextRef)===null||i===void 0||i.focus(),e&&((s=this.searchInputTextRef)===null||s===void 0||s.select())})},this.onClickHandler=async()=>{if(this.channelName.length!==0){if(this.step===1){const e=this.meeting.participants.all.toArray(),i=this.meeting.self.userId;e.filter(r=>r.userId!==i).forEach(r=>this.allMembers.set(r.userId,r)),this.step=2,this.focusOnSearch();return}await this.createChannel()}},this.createChannel=async()=>{const e=Array.from(this.selectedMemberIds),i=await this.meeting.chat.createChannel(this.channelName,e,{displayPictureUrl:"",visibility:"public",isDirectMessage:!1});this.switchChannel.emit(i.id),this.stateUpdate.emit({activeChannelCreator:!1}),$.activeChannelCreator=!1},this.onMemberAdd=e=>{this.showAllMembersList=!1,this.selectedMemberIds.add(e),this.searchQuery="",this.focusOnSearch()},this.keyDownHandler=(e,i)=>{if(e.key==="ArrowDown")this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,i.length-1);else if(e.key==="ArrowUp"){if(this.focusedMemberIndex===-1)return;if(this.focusedMemberIndex===0){this.focusOnSearch(!0);return}this.focusedMemberIndex=Math.max(this.focusedMemberIndex-1,0)}else if(e.key==="Enter")this.onMemberAdd(i[this.focusedMemberIndex].userId);else if(e.key==="Backspace"){if(this.searchQuery.length!==0||this.selectedMemberIds.size===0)return;const s=Array.from(this.selectedMemberIds.values()).at(-1);this.selectedMemberIds.delete(s),vf(this.$el)}},this.renderMemberSelector=()=>{const e=Array.from(this.allMembers.values()).filter(r=>!this.selectedMemberIds.has(r.userId)&&r.name.toLowerCase().includes(this.searchQuery.toLowerCase())),i=Array.from(this.selectedMemberIds.values()).map(r=>this.allMembers.get(r)),s=this.selectedMemberIds.size===this.allMembers.size;return d("div",{class:"input-container"},d("ul",{class:"members scrollbar",onClick:()=>{var r;(r=this.searchInputTextRef)===null||r===void 0||r.focus()}},i.map(r=>d("li",{class:"pill"},d("dyte-avatar",{participant:{name:r.name,picture:r.picture},size:"sm"}),d("span",null,r.name),d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.selectedMemberIds.delete(r.userId),vf(this.$el),this.focusOnSearch()}}))),!s&&d("input",{type:"text",ref:r=>this.searchInputTextRef=r,value:this.searchQuery,placeholder:this.selectedMemberIds.size===0?this.t("chat.member_name"):"",class:{"wide-input":this.selectedMemberIds.size===0},onInput:r=>{this.searchQuery=r.target.value.trim()},onClick:()=>{this.showAllMembersList=!this.showAllMembersList},onKeyDown:r=>this.keyDownHandler(r,e)})),(this.searchQuery.length!==0||this.showAllMembersList)&&d("ul",{class:"search-results"},e.map((r,n)=>d("li",{class:{member:!0,selected:n===this.focusedMemberIndex},onClick:()=>this.onMemberAdd(r.userId),ref:a=>{n===this.focusedMemberIndex&&Ci(()=>{a&&a.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}},d("dyte-avatar",{participant:{name:r.name,picture:r.picture},size:"sm"}),d("span",null,r.name))),e.length===0&&d("li",{class:"member"},d("span",null,this.t("chat.error.empty_results")))))},this.meeting=void 0,this.t=j(),this.iconPack=U,this.channelName="",this.searchQuery="",this.step=1,this.loading=!1,this.selectedMemberIds=new Set,this.focusedMemberIndex=-1,this.showAllMembersList=!1}componentDidLoad(){var t;(t=this.inputTextRef)===null||t===void 0||t.focus()}render(){return d(O,null,d("header",null,this.step===1?this.t("chat.new_channel"):this.t("chat.add_members")),this.step===1&&d("input",{class:"channel-name-input",type:"text",placeholder:this.t("chat.channel_name"),ref:t=>this.inputTextRef=t,onInput:t=>{this.channelName=t.target.value.trim()}}),this.step===2&&this.renderMemberSelector(),d("footer",null,d("dyte-button",{kind:"button",iconPack:this.iconPack,t:this.t,size:"lg",disabled:this.channelName.length===0,onClick:this.onClickHandler},this.step===1?this.t("chat.add_members"):this.t("create"))))}get $el(){return Ts(this)}};Z4.style=Yie;var Zie=Object.freeze({__proto__:null,dyte_channel_creator:Z4});const F1=t=>{if(t&&!t.chat)return!1;const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.chat)return!1;const{chatPublic:i,chatPrivate:s}=t.self.permissions;return i.canSend||i.text||i.files||s.canSend||s.canReceive||s.files||s.text},V1=t=>{if(t&&!t.polls)return!1;const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.polls)return!1;const{polls:i}=t.self.permissions;return i.canCreate||i.canView||i.canVote},B1=t=>{var e,i,s,r;if(((e=t==null?void 0:t.__internals__)===null||e===void 0?void 0:e.features.hasFeature(wf.FEAT_PARTICIPANT_LIST))&&!(!((i=t.self.permissions)===null||i===void 0)&&i.showParticipantList)||To(t)&&!(!((s=t.self.permissions)===null||s===void 0)&&s.acceptPresentRequests)||t&&!t.participants)return!1;if(t.meta.viewType==="LIVESTREAM")return t.self.permissions.acceptPresentRequests||((r=t==null?void 0:t.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE";const n=t==null?void 0:t.self.config;return!(n&&!n.controlBar.elements.participants)},H1=t=>{if(Sl(t)||t&&!t.plugins)return!1;if(t.meta.viewType==="LIVESTREAM")return t.stage.status==="ON_STAGE";const e=t==null?void 0:t.self.config;if(e&&!e.controlBar.elements.plugins)return!1;const{plugins:i}=t.self.permissions;return i.canClose||i.canStart},Xie=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}.unread-count-dot{position:absolute;right:var(--dyte-space-3, 12px);z-index:10;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));border-radius:50%;display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",X4=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onChatUpdate=({action:e,message:i})=>{var s;this.chatActive||e==="add"&&i.userId!==((s=this.meeting)===null||s===void 0?void 0:s.self.userId)&&(this.hasNewMessages=!0,this.unreadMessageCount+=1)},this.toggleChat=()=>{const e=this.states||$;this.chatActive=!((e==null?void 0:e.activeSidebar)&&(e==null?void 0:e.sidebar)==="chat"),this.chatActive&&(this.unreadMessageCount=0,this.hasNewMessages=!1),$.activeSidebar=this.chatActive,$.activeMoreMenu=!1,$.sidebar=this.chatActive?"chat":void 0,this.stateUpdate.emit({activeSidebar:this.chatActive,sidebar:this.chatActive?"chat":void 0,activeMoreMenu:!1,activeAI:!1})},this.updateCanView=()=>{this.canViewChat=F1(this.meeting)},this.unreadMessageCount=0,this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.chatActive=!1,this.canViewChat=!1,this.hasNewMessages=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Fl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i,s;(e=(t=this.meeting)===null||t===void 0?void 0:t.chat)===null||e===void 0||e.removeListener("chatUpdate",this.onChatUpdate),(s=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||s===void 0||s.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e,i,s,r;t!=null&&(_f(t)&&((e=t.chat)===null||e===void 0||e.getMessages(new Date().getTime(),1,!0).then(n=>{var a;!((a=n==null?void 0:n.messages)===null||a===void 0)&&a.length&&(this.hasNewMessages=!0)})),this.unreadMessageCount=((i=t.chat)===null||i===void 0?void 0:i.messages.length)||0,(s=t.chat)===null||s===void 0||s.addListener("chatUpdate",this.onChatUpdate),this.canViewChat=F1(t),(r=t==null?void 0:t.stage)===null||r===void 0||r.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||$;e!=null&&(this.chatActive=e.activeSidebar===!0&&e.sidebar==="chat")}render(){if(!!this.canViewChat)return d(O,{title:this.t("chat")},_f(this.meeting)?this.hasNewMessages&&d("div",{class:"unread-count-dot",part:"unread-count-dot"}):this.unreadMessageCount!==0&&!this.chatActive&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,this.unreadMessageCount<=100?this.unreadMessageCount:"99+")),d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.chatActive},onClick:this.toggleChat,icon:this.iconPack.chat,label:this.t("chat"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};X4.style=Xie;var ese=Object.freeze({__proto__:null,dyte_chat_toggle:X4});const tse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-variant-numeric:tabular-nums}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",C0=t=>Math.trunc(t).toString().padStart(2,"0"),e6=class{constructor(t){N(this,t),this.disconnectMeeting=()=>{var e,i;this.timeout&&clearTimeout(this.timeout),typeof this.request=="number"&&cancelAnimationFrame(this.request),(i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0||i.removeListener("meetingStartTimeUpdate",this.startedTimeUpdateListener)},this.startedTimeUpdateListener=()=>{var e,i,s;this.startedTime=(s=(i=(e=this.meeting)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.meetingStartedTimestamp)===null||s===void 0?void 0:s.toISOString()},this.meeting=void 0,this.iconPack=U,this.t=j(),this.startedTime=void 0,this.timeDiff=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting()}meetingChanged(t){var e,i,s;this.disconnectMeeting(),t!=null&&(this.startedTime=(i=(e=t.meta)===null||e===void 0?void 0:e.meetingStartedTimestamp)===null||i===void 0?void 0:i.toISOString(),(s=t.meta)===null||s===void 0||s.addListener("meetingStartTimeUpdate",this.startedTimeUpdateListener))}startedTimeChanged(t){if(t!==void 0){const e=()=>{this.timeDiff=(Date.now()-new Date(this.startedTime).getTime())/1e3,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(e))},500)};this.request=requestAnimationFrame(e)}}getFormattedTime(){if(this.timeDiff==null)return null;const t=this.timeDiff;let e="";return t>=3600&&(e=`${C0(t/3600)}:`),e+=`${C0(t%3600/60)}:${C0(t%60)}`,e}render(){return d(O,{tabIndex:0,role:"timer","aria-live":"off"},this.startedTime!==void 0&&[d("dyte-icon",{icon:this.iconPack.clock,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),d("span",{part:"text"},this.getFormattedTime())])}static get watchers(){return{meeting:["meetingChanged"],startedTime:["startedTimeChanged"]}}};e6.style=tse;var ise=Object.freeze({__proto__:null,dyte_clock:e6});const sse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);padding:var(--dyte-space-8, 32px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));width:400px;max-width:80%}.leave-modal{width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-4, 16px)}.leave-meeting dyte-button{color:rgb(var(--dyte-colors-text-1000, 255 255 255));flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.br-secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.br-secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",t6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.close=()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),$.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClose(this.stateUpdate,$,this.meeting)},this.onConfirmation=async()=>{this.stateUpdate.emit({activeConfirmationModal:{active:!1}}),$.activeConfirmationModal={active:!1},this.states.activeConfirmationModal.onClick(this.stateUpdate,$,this.meeting)},this.meeting=void 0,this.states=void 0,this.iconPack=U,this.t=j()}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}render(){var t,e;const i=this.states.activeConfirmationModal;return d(O,null,d("div",{class:"leave-modal"},d("div",{class:"header"},d("h2",{class:"title"},i.header?this.t(i.header):this.t("cta.confirmation"))),d("p",{class:"message"},i.content?this.t(i.content):""),d("div",{class:"content"},d("div",{class:"leave-meeting"},d("dyte-button",{variant:"secondary",title:i.cancelText?this.t(i.cancelText):this.t("cancel"),onClick:this.close,iconPack:this.iconPack,t:this.t,class:"br-secondary-btn"},i.cancelText?this.t(i.cancelText):this.t("cancel")),d("dyte-button",{onClick:()=>this.onConfirmation(),variant:(e=(t=this.states.activeConfirmationModal)===null||t===void 0?void 0:t.variant)!==null&&e!==void 0?e:"danger",title:i.ctaText?this.t(i.ctaText):this.t("yes"),iconPack:this.iconPack,t:this.t},i.ctaText?this.t(i.ctaText):this.t("yes"))))))}};t6.style=sse;var rse=Object.freeze({__proto__:null,dyte_confirmation_modal:t6});const nse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:flex;align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);position:relative;z-index:10}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{padding-top:var(--dyte-space-0, 0px) !important}}",i6=class{constructor(t){N(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Re,this.states=void 0,this.iconPack=U,this.t=j(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return d(O,null,!this.disableRender&&d(je,{element:"dyte-controlbar",defaults:t,onlyChildren:!0}),d("slot",null))}};i6.style=nse;var ase=Object.freeze({__proto__:null,dyte_controlbar:i6});const ose=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-between;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}header h3{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px)}.back-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;max-width:var(--dyte-space-56, 224px) !important;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:14px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}main{position:relative;box-sizing:border-box;display:flex;height:100%;width:100%;flex-direction:column;padding-top:var(--dyte-space-1, 4px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));width:100% !important;max-width:100% !important;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;height:100%;width:100%;padding:var(--dyte-space-0, 0px)}:host([size='sm']) main.active{display:block}:host([size='sm']) header{margin:var(--dyte-space-0, 0px);justify-content:center}:host([size='sm']) header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}::-webkit-scrollbar-thumb:hover{border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.progress-bar{height:var(--dyte-space-1, 4px);width:100%;overflow:hidden;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.progress-indicator{height:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}`,s6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.activeTab="audio",this.isMobileMainVisible=!1,this.progress=0}connectedCallback(){document.addEventListener("keydown",this.keyPressListener)}disconnectedCallback(){this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener)}progressUpdate(t){this.progress=t.detail}changeTab(t){this.activeTab=t,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeDebugger:!1}),$.activeDebugger=!1}getActiveTab(){switch(this.activeTab){case"audio":return this.t("Audio Troubleshooting");case"screenshare":return this.t("Media Troubleshooting");case"video":return this.t("Video Troubleshooting");default:return this.t("Troubleshooting")}}render(){if(this.meeting==null)return null;const t={meeting:this.meeting,states:this.states||$,iconPack:this.iconPack,t:this.t,size:this.size},e=this.getActiveTab();return d(O,null,d("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},d("header",null,d("h3",null,this.t("Troubleshooting"))),d("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),d("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),d("button",{type:"button",class:{active:this.activeTab==="screenshare"},onClick:()=>this.changeTab("screenshare")},this.t("Screenshare"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.share_screen_start,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t})))),d("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&d("header",null,d("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),d("h4",null,e)),this.activeTab==="audio"&&d("dyte-debugger-audio",Object.assign({},t)),this.activeTab==="video"&&d("dyte-debugger-video",Object.assign({},t)),this.activeTab==="screenshare"&&d("dyte-debugger-screenshare",Object.assign({},t)),this.progress>1&&d("div",{class:"progress-bar"},d("div",{class:"progress-indicator",style:{width:`${this.progress}%`}}))))}};s6.style=ose;var cse=Object.freeze({__proto__:null,dyte_debugger:s6});const dse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:flex-start;justify-content:flex-start}`,r6=class{constructor(t){N(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.issueKey=0}render(){return d(O,null)}};r6.style=dse;var lse=Object.freeze({__proto__:null,dyte_debugger_network:r6});const use=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",n6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.t=j(),this.iconPack=U,this.size=void 0}toggleDebugger(){var t;this.stateUpdate.emit({activeDebugger:!(!((t=this.states)===null||t===void 0)&&t.activeDebugger),activeMoreMenu:!1}),$.activeDebugger=!$.activeDebugger,$.activeMoreMenu=!1}render(){var t;if(!!(!((t=this.meeting)===null||t===void 0)&&t.troubleshoot))return d(O,{title:this.t("Network & Trouble Shooting")},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleDebugger(),icon:this.iconPack.debug,label:this.t("Troubleshooting and Help"),variant:this.variant}))}};n6.style=use;var pse=Object.freeze({__proto__:null,dyte_debugger_toggle:n6});const hse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-8, 32px)}dyte-logo.loaded{height:var(--dyte-space-12, 48px)}.rejoin-button{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-6, 24px);padding-bottom:var(--dyte-space-6, 24px);padding-left:var(--dyte-space-16, 64px);padding-right:var(--dyte-space-16, 64px)}.rejoin-icon{margin-right:var(--dyte-space-2, 8px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}p.breakout{font-size:20px;display:flex;flex-direction:column;align-items:center}p.breakout span{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}span{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}",a6=class{constructor(t){N(this,t),this.config=Re,this.size=void 0,this.icon=U,this.states=void 0,this.t=j(),this.iconPack=U,this.message="",this.meeting=void 0}connectedCallback(){this.statesChanged(this.states),Fl("roomLeftState",()=>this.statesChanged())}getBreakoutRoomsMessage(t){var e;let i;return(t==null?void 0:t.roomLeftState)==="connected-meeting"&&(((e=$.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.destinationMeetingId)===this.meeting.connectedMeetings.parentMeeting.id?i="breakout_rooms.move_reason.switch_main_room":i="breakout_rooms.move_reason.switch_room"),i}statesChanged(t){const e=t||$;if(e!=null)switch(e==null?void 0:e.roomLeftState){case"left":this.message="ended.left";break;case"kicked":this.message="ended.kicked";break;case"disconnected":this.message="ended.disconnected";break;case"rejected":this.message="ended.rejected";break;case"connected-meeting":this.message=this.getBreakoutRoomsMessage(e);break;default:this.message="ended"}}renderBreakoutRoomScreen(){return d(O,null,d("div",{class:"ctr",part:"container"},d("dyte-icon",{icon:this.iconPack.breakout_rooms}),d("p",{part:"message",class:"breakout"},this.t(this.message))))}render(){const t=this.states||$;return t.roomLeftState==="connected-meeting"?this.renderBreakoutRoomScreen():d(O,null,d("div",{class:"ctr",part:"container"},d("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),d("p",{part:"message"},this.t(this.message)),(t==null?void 0:t.roomLeftState)==="disconnected"&&d("span",{part:"description"},this.t("ended.network"))))}static get watchers(){return{states:["statesChanged"]}}};a6.style=hse;var gse=Object.freeze({__proto__:null,dyte_ended_screen:a6});const mse="#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;animation:0.2s slide-up ease-in}",o6=class{constructor(t){N(this,t),this.onDropCallback=K(this,"dropCallback",7),this.hostEl=void 0,this.iconPack=U,this.t=j(),this.dropzoneActivated=!1}connectedCallback(){if(!this.hostEl)throw new Error("hostEl prop is required");this.hostEl.addEventListener("dragover",t=>{t.preventDefault(),this.dropzoneActivated=!0}),this.hostEl.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.hostEl.addEventListener("drop",t=>{t.preventDefault(),this.dropzoneActivated=!1,this.onDropCallback.emit(t)})}render(){return d(O,null,d("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},d("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),d("p",null,this.t("chat.send_attachment"))))}};o6.style=mse;var fse=Object.freeze({__proto__:null,dyte_file_dropzone:o6});const c6=t=>t.split(/[#?]/)[0].split(".").pop().trim(),d6=t=>{if(!t)return"0 B";const e=Math.floor(Math.log(t)/Math.log(1024));return`${(t/1024**e).toFixed(2)} ${["B","kB","MB","GB","TB"][e]}`},vse=(t,e="file")=>{try{const s=new URL(t).pathname.split("/").pop();return s!=="/"?s:e}catch{return e}},kh=async(t,e)=>{t=wh(t);let i=e==null?void 0:e.name;const s=await fetch(t);if(!s.ok){window.open(t,"_blank");return}const r=URL.createObjectURL(await s.blob()),n=document.createElement("a");n.href=r,n.download=i!=null?i:vse(t,e==null?void 0:e.fallbackName),n.click()},yse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{margin-left:var(--dyte-space-1, 4px);flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}",l6=class{constructor(t){N(this,t),this.name=void 0,this.size=void 0,this.url=void 0,this.iconPack=U,this.t=j()}render(){return d("div",{class:"file"},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>kh(wh(this.url),{name:this.name,fallbackName:"file"}),part:"button"},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})),d("div",{class:"file-data"},d("div",{class:"name"},this.name),d("div",{class:"file-data-split"},d("div",{class:"ext"},c6(this.name)),d("span",{class:"divider"}),d("div",{class:"size"},d6(this.size)))))}};l6.style=yse;var bse=Object.freeze({__proto__:null,dyte_file_message_view:l6});const u6=t=>{t!=null&&(t.requestFullscreen!=null?t.requestFullscreen():t.mozRequestFullScreen!=null?t.mozRequestFullScreen():t.webkitRequestFullscreen!=null?t.webkitRequestFullscreen():t.msRequestFullscreen!=null&&t.msRequestFullscreen())},p6=()=>{document.exitFullscreen!=null?document.exitFullscreen():document.mozExitFullScreen!=null?document.mozExitFullScreen():document.webkitExitFullscreen!=null?document.webkitExitFullscreen():document.msExitFullscreen!=null&&document.msExitFullscreen()},h6=()=>document.fullscreenElement!=null||document.webkitCurrentFullScreenElement!=null,g6=()=>typeof document<"u"?document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled:!1,wse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",m6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onFullScreenchange=()=>{this.fullScreenActive=h6()},this.toggleFullScreen=()=>{let e=this.targetElement||document.querySelector("dyte-meeting");!e||(this.fullScreenActive?(p6(),this.fullScreenActive=!1):(u6(e),this.fullScreenActive=!0),this.stateUpdate.emit({activeMoreMenu:!1}),$.activeMoreMenu=!1)},this.states=void 0,this.targetElement=void 0,this.variant="button",this.size=void 0,this.iconPack=U,this.t=j(),this.fullScreenActive=!1,this.isFullScreenSupported=!0}connectedCallback(){this.isFullScreenSupported=g6(),this.onFullScreenchange(),window.addEventListener("webkitfullscreenchange",this.onFullScreenchange),window.addEventListener("fullscreenchange",this.onFullScreenchange)}disconnectedCallback(){window.removeEventListener("webkitfullscreenchange",this.onFullScreenchange),window.removeEventListener("fullscreenchange",this.onFullScreenchange)}render(){return this.isFullScreenSupported?d(O,{title:this.t("full_screen")},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleFullScreen,icon:this.fullScreenActive?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,label:this.fullScreenActive?this.t("full_screen.exit"):this.t("full_screen"),variant:this.variant})):null}};m6.style=wse;var _se=Object.freeze({__proto__:null,dyte_fullscreen_toggle:m6});function ST(t,e){const i=Math.pow(10,e);return Math.floor(t*i)/i}function kse({dimensions:t,count:e,aspectRatio:i,gap:s}){const{width:r,height:n,rows:a,cols:o}=Sse({dimensions:t,count:e,aspectRatio:i,gap:s}),c=xse({parentDimensions:t,dimensions:{width:r,height:n},rows:a,cols:o,count:e,gap:s});return{width:r,height:n,getPosition:c}}function Sse({count:t,dimensions:e,aspectRatio:i,gap:s}){let{width:r,height:n}=e;if(r===0||n===0)return{width:0,height:0,rows:1,cols:1};r-=s*2,n-=s*2;const a=s,o=t,c=Ese(i);let u=0,l=0,h=1,g=1;const m=[];for(let f=1;f<=o;f++)m.push((r-a*(f-1))/f),m.push((n-a*(f-1))/(f*c));m.sort((f,_)=>_-f);for(const f of m)if(u=ST(f,4),l=ST(u*c,4),h=Math.floor((r+a)/(u+a)),g=Math.floor((n+a)/(l+a)),h*g>=o){g=Math.ceil(o/h);break}return{width:u,height:l,rows:g,cols:h}}function xse({parentDimensions:t,dimensions:e,rows:i,cols:s,count:r,gap:n}){const{width:a,height:o}=t,{width:c,height:u}=e,l=(o-(u*i+(i-1)*n))/2;let h=(a-(c*s+(s-1)*n))/2;const g=u+n,m=c+n;let f=0,_=0;const k=r%s;function y(b){const x=r-b;x===k&&(h=(a-(c*x+(x-1)*n))/2);const C=l+_*g,D=h+f*m;return f++,(b+1)%s===0&&(_++,f=0),{top:C,left:D}}return y}const Ese=t=>{const[e,i]=t.split(":");return Number.parseInt(i)/Number.parseInt(e)},Nv={spotlight:"sm",mixed:"sm"},Tse=":host{display:block;height:100%;width:100%}.offline-grid{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center}.offline-grid h3{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);font-size:20px;font-weight:500;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.offline-grid p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);text-align:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.offline-grid dyte-icon{margin-bottom:var(--dyte-space-2, 8px)}",f6=class{constructor(t){N(this,t),this.roomJoinedListener=()=>{this.mediaConnected=this.meeting.meta.mediaConnected},this.updateRoomStateListener=()=>{this.roomState=this.meeting.self.roomState},this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=$,this.config=Re,this.iconPack=U,this.t=j(),this.gridSize=Nv,this.overrides={},this.mediaConnected=!0,this.roomState=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.meta.removeListener("connected",this.roomJoinedListener),this.meeting.meta.removeListener("disconnected",this.roomJoinedListener),this.meeting.self.removeListener("roomLeft",this.updateRoomStateListener),this.meeting.self.removeListener("roomJoined",this.updateRoomStateListener)}meetingChanged(t){if(t==null)return;const{self:e,meta:i}=t;this.roomState=e.roomState,this.mediaConnected=i.mediaConnected,i.addListener("connected",this.roomJoinedListener),i.addListener("disconnected",this.roomJoinedListener),e.addListener("roomLeft",this.updateRoomStateListener),e.addListener("roomJoined",this.updateRoomStateListener)}render(){var t;if(!this.meeting)return d(O,null);const e={meeting:this.meeting,size:this.size,states:this.states||$,config:this.config,iconPack:this.iconPack,t:this.t,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize};return this.roomState!=="joined"&&!Sl(this.meeting)?d(O,null,d("div",{class:"offline-grid"},d("dyte-icon",{icon:this.iconPack.join_stage,size:"xl"}),d("h3",null,this.t("disconnected")),d("p",null,this.t("disconnected.description")))):!this.mediaConnected&&!Sl(this.meeting)?d(O,null,d("div",{class:"offline-grid"},d("dyte-icon",{icon:this.iconPack.disconnected,size:"xl"}),d("h3",null,this.t("offline")),d("p",null,this.t("offline.description")))):((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM"?d(O,null,d("dyte-audio-grid",Object.assign({},e))):d(O,null,d("dyte-video-grid",Object.assign({overrides:this.overrides},e)))}static get watchers(){return{meeting:["meetingChanged"]}}};f6.style=Tse;var Cse=Object.freeze({__proto__:null,dyte_grid:f6});const Pse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:16px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}:host([size='sm']) .center{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([size='sm']) dyte-button{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}:host([size='sm']) dyte-button dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}dyte-button{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.center{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.center .page{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.center .slash{margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px)}.center .pages{align-self:flex-end;font-size:12px}:host([variant='rounded']){overflow:hidden;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button{border-radius:9999px;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='rounded']) dyte-button:not([disabled]):hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='rounded']) dyte-button:not([disabled]):focus{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='grid']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) dyte-button{position:absolute;top:50%;height:var(--dyte-space-20, 80px);width:var(--dyte-space-20, 80px);opacity:0.2;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}:host([variant='grid']) dyte-button:hover{opacity:1}:host([variant='grid']) dyte-button{transform:translateY(-50%)}:host([variant='grid']) dyte-button.prev{left:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) dyte-button.next{right:var(--dyte-space-0, 0px);border-top-left-radius:9999px;border-bottom-left-radius:9999px}:host([variant='grid']) dyte-button.auto{left:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);border-top-right-radius:9999px;border-bottom-right-radius:9999px}:host([variant='grid']) .dots{position:absolute;left:50%;bottom:var(--dyte-space-3, 12px);display:flex;align-items:center;transform:translateX(-50%)}:host([variant='grid']) .dots .dot{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);cursor:pointer;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([variant='grid']) .dots .dot:last-child{margin-right:var(--dyte-space-0, 0px)}:host([variant='grid']) .dots .dot.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host([variant='grid'][size='sm']) dyte-button{height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);opacity:0.1}",v6=class{constructor(t){N(this,t),this.onPageChanged=({currentPage:e,pageCount:i})=>{this.pageCount=i,this.page=e},this.toggleGridPagination=()=>{var e;const{self:i,participants:s}=this.meeting,{mobile:r,desktop:n}=(e=i.config)===null||e===void 0?void 0:e.maxVideoStreams,a=this.size==="sm"?r:n;s.joined.size<a?this.showPagination=!1:this.showPagination=!0},this.onParticipantJoin=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.onParticipantLeave=()=>{this.pageCount=this.meeting.participants.pageCount,this.toggleGridPagination()},this.prevPage=()=>{if(this.meeting==null)return;const{participants:e}=this.meeting;this.page>1?e.setPage(this.page-=1):e.viewMode==="PAGINATED"&&e.setViewMode("ACTIVE_GRID")},this.nextPage=()=>{if(this.meeting==null)return;const{participants:e}=this.meeting;this.page>0&&this.page<this.pageCount?e.setPage(this.page+=1):e.count>0&&this.pageCount===0&&e.setViewMode("PAGINATED")},this.meeting=void 0,this.states=void 0,this.size=void 0,this.variant="rounded",this.iconPack=U,this.t=j(),this.page=1,this.pageCount=0,this.activeCount=0,this.activeComputedCount=0,this.showPagination=!1}connectedCallback(){this.meetingChanged(this.meeting),this.sizeChanged()}disconnectedCallback(){if(this.meeting==null)return;const{participants:t}=this.meeting;t.removeListener("pageChanged",this.onPageChanged),t.removeListener("viewModeChanged",this.onPageChanged),t.joined.removeListener("participantJoined",this.onParticipantJoin),t.joined.removeListener("participantLeft",this.onParticipantLeave)}meetingChanged(t){if(t!=null){const{participants:e}=t;this.page=e.currentPage,this.pageCount=e.pageCount,e.addListener("viewModeChanged",this.onPageChanged),e.addListener("pageChanged",this.onPageChanged),e.joined.addListener("participantJoined",this.onParticipantJoin),e.joined.addListener("participantLeft",this.onParticipantLeave),this.activeCount=this.meeting.participants.joined.size,this.activeComputedCount=this.meeting.participants.joined.size,this.toggleGridPagination()}}sizeChanged(){this.toggleGridPagination()}render(){const t=this.meeting.meta.viewType==="WEBINAR";if(!(this.meeting.meta.viewType==="AUDIO_ROOM"||t||!this.showPagination))return d(O,null,d("dyte-button",{class:"prev",variant:"secondary",kind:"icon",disabled:this.pageCount===0,onClick:this.prevPage,"aria-label":this.t("page.prev"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),this.variant!=="grid"&&d("div",{class:"center"},d("span",{class:"page"},this.pageCount===0?d("dyte-tooltip",{label:this.t("layout.auto"),iconPack:this.iconPack,t:this.t},d("dyte-button",{kind:"icon",class:"auto",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.wand,iconPack:this.iconPack,t:this.t}))):this.page),this.pageCount!==0&&[d("span",{class:"slash"},"/"),d("span",{class:"pages"},this.pageCount)]),this.variant==="grid"&&this.pageCount>0&&d("div",{class:"dots"},[...Array(this.pageCount)].map((i,s)=>d("div",{key:`dot-${s}`,class:{dot:!0,active:s+1===this.page}}))),d("dyte-button",{class:"next",variant:"secondary",kind:"icon",disabled:this.page!==0&&this.page===this.pageCount,onClick:this.nextPage,"aria-label":this.t("page.next"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_right,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{meeting:["meetingChanged"],size:["sizeChanged"]}}};v6.style=Pse;var Rse=Object.freeze({__proto__:null,dyte_grid_pagination:v6});const Ise=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-12, 48px);align-items:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{display:none !important}}",y6=class{constructor(t){N(this,t),this.variant="solid",this.disableRender=!1,this.meeting=void 0,this.config=Re,this.states=void 0,this.iconPack=U,this.t=j(),this.size=void 0}render(){const t={meeting:this.meeting,config:this.config,states:this.states,t:this.t,iconPack:this.iconPack,size:this.size};return d(O,null,!this.disableRender&&d(je,{element:"dyte-header",defaults:t,onlyChildren:!0}),d("slot",null))}};y6.style=Ise;var Ase=Object.freeze({__proto__:null,dyte_header:y6});const Dse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ctr{display:flex;flex-direction:column;align-items:center;gap:var(--dyte-space-8, 32px)}dyte-logo.loaded{height:var(--dyte-space-12, 48px)}dyte-spinner{height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",b6=class{constructor(t){N(this,t),this.meeting=void 0,this.config=Re,this.iconPack=U,this.t=j()}render(){return d(O,null,d("slot",null,d("div",{class:"ctr",part:"container"},d("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t,part:"logo"}),d("dyte-spinner",{"aria-label":"Idle, waiting for meeting data",part:"spinner",iconPack:this.iconPack,t:this.t}))))}};b6.style=Dse;var Mse=Object.freeze({__proto__:null,dyte_idle_screen:b6});const Ose=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}.image{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}",w6=class{constructor(t){N(this,t),this.onPreview=K(this,"preview",7),this.url=void 0,this.iconPack=U,this.t=j(),this.status="loading"}render(){return d("div",{class:{image:!0,loaded:this.status==="loaded"}},d("img",{src:wh(this.url),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&this.onPreview.emit(this.url)}}),this.status==="loading"&&d("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},d("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&d("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},d("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&d("div",{class:"actions"},d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.onPreview.emit(this.url)},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.full_screen_maximize})),d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>kh(this.url,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))}};w6.style=Ose;var Lse=Object.freeze({__proto__:null,dyte_image_message_view:w6});const Nse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{width:1140px;max-width:100%;box-sizing:border-box;display:flex;flex-direction:column;padding:var(--dyte-space-6, 24px);padding-top:var(--dyte-space-5, 20px);overflow-y:auto;color:rgb(var(--dyte-colors-text-1000, 255 255 255));z-index:40;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.displayName{font-weight:700}.image-ctr{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;justify-content:center;overflow:hidden}.actions{display:flex;align-items:center;justify-content:flex-end;gap:var(--dyte-space-2, 8px)}img{box-sizing:border-box;display:block;max-height:100%;max-width:100%;-o-object-fit:contain;object-fit:contain}.header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--dyte-space-4, 16px)}.shared-by-user{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']) .header{flex-direction:column}:host([size='sm']) .header .actions{margin-top:var(--dyte-space-4, 16px)}`,_6=class{constructor(t){N(this,t),this.close=K(this,"close",7),this.keypressListener=e=>{e.key==="Escape"&&this.close.emit()},this.handleOutsideClick=()=>this.close.emit(),this.image=void 0,this.size=void 0,this.t=j(),this.iconPack=U}connectedCallback(){document.addEventListener("keydown",this.keypressListener),document.addEventListener("click",this.handleOutsideClick)}disconnectedCallback(){document.removeEventListener("keydown",this.keypressListener),document.removeEventListener("click",this.handleOutsideClick)}render(){return d(O,{class:"scrollbar",onClick:t=>t.stopPropagation()},d("div",{class:"header"},d("div",{class:"shared-by-user"},this.t("chat.img.shared_by")," ",d("span",{class:"displayName"},cr(Fs(this.image.displayName)))),d("div",{class:"actions"},d("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.close.emit(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.full_screen_minimize,iconPack:this.iconPack,t:this.t})),d("dyte-button",{onClick:()=>kh(this.image.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.download,slot:"start",iconPack:this.iconPack,t:this.t}),"Download"))),d("div",{class:"image-ctr"},d("img",{src:this.image.link})))}};_6.style=Nse;var Use=Object.freeze({__proto__:null,dyte_image_viewer:_6});const $se=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",k6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.leave=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!0}),$.activeLeaveConfirmation=!0},this.variant="button",this.size=void 0,this.iconPack=U,this.t=j()}render(){const t=this.t("leave");return d(O,{label:t},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,class:"leave",onClick:this.leave,icon:this.iconPack.call_end,label:t,variant:this.variant}))}};k6.style=$se;var jse=Object.freeze({__proto__:null,dyte_leave_button:k6});const zse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.leave-modal{width:var(--dyte-space-72, 288px)}@media (min-width: 768px){.leave-modal{width:var(--dyte-space-96, 384px)}}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .message{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.leave-modal .content{margin-top:var(--dyte-space-4, 16px);font-size:14px;display:flex;flex-wrap:wrap;gap:var(--dyte-space-4, 16px)}.leave-modal .content dyte-button{height:var(--dyte-space-9, 36px);min-width:var(--dyte-space-44, 176px);flex-grow:1}.leave-modal .content .secondary-btn{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.leave-modal .content .secondary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.leave-modal .content .secondary-danger-btn{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",S6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.isBreakoutRoomsActive=!1,this.isChildMeeting=!1,this.canJoinMainRoom=!1,this.close=()=>{this.stateUpdate.emit({activeLeaveConfirmation:!1}),$.activeLeaveConfirmation=!1},this.handleLeave=()=>{var e;(e=this.meeting)===null||e===void 0||e.leaveRoom(),this.close()},this.handleJoinMainRoom=()=>{this.meeting.connectedMeetings.moveParticipants(this.meeting.meta.roomName,this.meeting.connectedMeetings.parentMeeting.id,[this.meeting.self.userId]),this.close()},this.handleEndMeeting=()=>{var e;(e=this.meeting)===null||e===void 0||e.participants.kickAll(),this.close()},this.meeting=void 0,this.states=void 0,this.iconPack=U,this.t=j(),this.canEndMeeting=!1}connectedCallback(){this.meetingChanged(this.meeting),document.addEventListener("keydown",this.keyPressListener)}componentDidLoad(){}disconnectedCallback(){document.removeEventListener("keydown",this.keyPressListener)}meetingChanged(t){t!=null&&(this.canEndMeeting=t.self.permissions.kickParticipant,this.isBreakoutRoomsActive=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.isActive,this.isChildMeeting=this.meeting.connectedMeetings.supportsConnectedMeetings&&this.meeting.connectedMeetings.meetings.some(e=>e.id===t.meta.roomName),this.canJoinMainRoom=this.meeting.self.permissions.connectedMeetings.canSwitchToParentMeeting)}render(){return d(O,null,d("div",{class:"leave-modal"},d("div",{class:"header"},d("h2",{class:"title"},this.t("leave"))),d("p",{class:"message"},this.isBreakoutRoomsActive&&this.isChildMeeting?this.t("breakout_rooms.leave_confirmation"):this.t("leave_confirmation")),d("div",{class:"content"},d("dyte-button",{variant:"secondary",onClick:this.close,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("cancel")),this.isBreakoutRoomsActive&&this.isChildMeeting&&this.canJoinMainRoom&&d("dyte-button",{variant:"secondary",onClick:this.handleJoinMainRoom,iconPack:this.iconPack,class:"secondary-btn",t:this.t},this.t("breakout_rooms.leave_confirmation.main_room_btn")),d("dyte-button",{variant:this.canEndMeeting?"secondary":"danger",title:this.t("leave"),onClick:this.handleLeave,iconPack:this.iconPack,class:{"secondary-btn":this.canEndMeeting,"secondary-danger-btn":this.canEndMeeting},t:this.t},this.t("leave")),this.canEndMeeting&&d("dyte-button",{variant:"danger",onClick:this.handleEndMeeting,iconPack:this.iconPack,t:this.t},this.t("end.all")))))}static get watchers(){return{meeting:["meetingChanged"]}}};S6.style=zse;var Fse=Object.freeze({__proto__:null,dyte_leave_meeting:S6});const Vse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",x6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.dyteAPIError=K(this,"dyteAPIError",7),this.livestreamStateListener=e=>{this.livestreamState=e,(e==="LIVESTREAMING"||e==="IDLE")&&(this.stateUpdate.emit({activeMoreMenu:!1}),$.activeMoreMenu=!1)},this.isLoading=()=>this.meeting==null||this.livestreamState==="STARTING"||this.livestreamState==="STOPPING",this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.livestreamState="IDLE"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.clearListeners()}meetingChanged(t){var e,i;t!=null&&(this.livestreamState=(e=this.meeting.livestream)===null||e===void 0?void 0:e.state,(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.livestreamStateListener))}async toggleLivestream(){var t,e;if(this.livestreamState==="LIVESTREAMING")try{await((t=this.meeting.livestream)===null||t===void 0?void 0:t.stop())}catch{this.dyteAPIError.emit({trace:this.t("livestream.stop"),message:this.t("livestream.error.stop")})}else try{await((e=this.meeting.livestream)===null||e===void 0?void 0:e.start())}catch{this.dyteAPIError.emit({trace:this.t("livestream.start"),message:this.t("livestream.error.start")})}}clearListeners(){var t;(t=this.meeting.livestream)===null||t===void 0||t.removeListener("livestreamUpdate",this.livestreamStateListener)}getLivestreamLabel(){switch(this.livestreamState){case"IDLE":return this.t("livestream.go_live");case"LIVESTREAMING":return this.t("livestream.end_live");case"STARTING":return this.t("livestream.starting");case"STOPPING":return this.t("livestream.stopping");default:return this.t("livestream.error")}}getLivestreamIcon(){switch(this.livestreamState){case"IDLE":return this.iconPack.start_livestream;case"LIVESTREAMING":return this.iconPack.stop_livestream;case"STARTING":case"STOPPING":default:return this.iconPack.stop_livestream}}render(){if(!!XI(this.meeting))return d(O,null,d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,isLoading:this.isLoading(),class:{"active-livestream":this.livestreamState==="LIVESTREAMING"},onClick:()=>this.toggleLivestream(),icon:this.getLivestreamIcon(),disabled:this.isLoading(),label:this.t(this.getLivestreamLabel()),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};x6.style=Vse;var Bse=Object.freeze({__proto__:null,dyte_livestream_toggle:x6});const Hse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:16px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title{text-align:center;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}:host([size='sm']){font-size:12px}",E6=class{constructor(t){N(this,t),this.meeting=void 0,this.iconPack=U,this.t=j()}render(){var t;const e=(t=this.meeting)===null||t===void 0?void 0:t.meta.meetingTitle;return e==null?null:d(O,{tabIndex:0,role:"banner","aria-label":e},d("dyte-tooltip",{label:e,part:"tooltip",iconPack:this.iconPack,t:this.t},d("div",{class:"title",part:"title"},e)))}};E6.style=Hse;var Wse=Object.freeze({__proto__:null,dyte_meeting_title:E6});const qse=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.message-wrapper{display:flex;flex-direction:row-reverse;gap:var(--dyte-space-2, 8px)}.message-wrapper.incoming{flex-direction:row}.message{display:flex;flex-direction:column}.header{margin-bottom:var(--dyte-space-1, 4px);align-self:flex-end;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));font-size:14px;font-weight:600}.incoming .header{align-self:flex-start}.body{display:flex;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));font-size:14px;line-height:1.375;position:relative}.body .metadata{margin-top:var(--dyte-space-1, 4px);align-self:flex-end;font-size:10px}.body:hover dyte-menu{visibility:visible}.bubble{max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-md, 8px)}.incoming .bubble{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.avatar{display:none}dyte-menu{position:absolute;right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);border-radius:var(--dyte-border-radius-lg, 12px);visibility:hidden}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}.actions{display:flex;align-items:center;justify-content:center;padding-left:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background:radial-gradient(
    at top right,
    rgb(var(--dyte-colors-brand-300, 73 124 253)) 60%,
    rgba(255, 255, 255, 0) 80%
  )}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.incoming .actions{background:radial-gradient(
      at top right,
      rgb(var(--dyte-colors-background-600, 60 60 60)) 60%,
      rgba(255, 255, 255, 0) 80%
    )}.incoming dyte-avatar{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px}}`,T6=class{constructor(t){N(this,t),this.onAction=K(this,"action",7),this.actions=[],this.variant="bubble",this.viewType="outgoing",this.avatarUrl=void 0,this.hideAvatar=!1,this.authorName=void 0,this.hideAuthorName=!1,this.hideMetadata=!1,this.time=void 0,this.iconPack=U}renderActions(){return d("dyte-menu",{placement:"top-end"},d("button",{slot:"trigger",class:"actions"},d("dyte-icon",{icon:this.iconPack.chevron_down})),d("dyte-menu-list",null,this.actions.map(t=>d("dyte-menu-item",{onClick:()=>this.onAction.emit(t.id)},t.icon&&d("dyte-icon",{icon:t.icon,slot:"start"}),t.label))))}render(){return d(O,null,d("div",{class:{"message-wrapper":!0,[this.viewType]:!0}},!this.hideAvatar&&d("aside",{class:"avatar"},d("dyte-avatar",{participant:{name:this.authorName,picture:this.avatarUrl},size:"sm"})),d("div",{class:"message"},!this.hideAuthorName&&d("div",{class:"header"},this.authorName),d("div",{class:{body:!0,bubble:this.variant==="bubble"}},d("slot",null),!this.hideMetadata&&d("div",{class:"metadata",title:U4(this.time)},N4(this.time,new Date(Date.now()))),this.actions.length!==0&&this.renderActions()))))}};T6.style=qse;var Gse=Object.freeze({__proto__:null,dyte_message_view:T6});const Jse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}:host(.audioDisabled) :slotted(dyte-icon){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",C6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.audioUpdateListener=({audioEnabled:e})=>{this.audioEnabled=e},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{e==="audio"&&(this.micPermission=i)},this.toggleMic=()=>{var e,i,s,r,n,a,o,c,u,l,h,g;if((e=this.meeting)===null||e===void 0||e.__internals__.logger.info("dyteMicToggle::toggleMic",{media:{audio:{enabled:Boolean((s=(i=this.meeting)===null||i===void 0?void 0:i.self)===null||s===void 0?void 0:s.audioEnabled),permission:this.micPermission,canProduce:(a=(n=(r=this.meeting)===null||r===void 0?void 0:r.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceAudio}},webinar:{stageStatus:(c=(o=this.meeting)===null||o===void 0?void 0:o.stage)===null||c===void 0?void 0:c.status},livestream:{stageStatus:(l=(u=this.meeting)===null||u===void 0?void 0:u.stage)===null||l===void 0?void 0:l.status},moduleExists:{self:Boolean((h=this.meeting)===null||h===void 0?void 0:h.self)}}),this.hasPermissionError()){const f={enabled:!0,kind:"audio"};return this.stateUpdate.emit({activePermissionsMessage:f}),$.activePermissionsMessage=f,!1}const m=(g=this.meeting)===null||g===void 0?void 0:g.self;m==null||!this.canProduceAudio||(m.audioEnabled?m.disableAudio():m.enableAudio())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.audioEnabled=!1,this.canProduceAudio=!1,this.micPermission="NOT_REQUESTED"}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s;(t=this.meeting)===null||t===void 0||t.self.removeListener("audioUpdate",this.audioUpdateListener),(e=this.meeting)===null||e===void 0||e.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(s=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||s===void 0||s.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.micPermission=t.self.mediaPermissions.audio||"NOT_REQUESTED",this.audioEnabled=e.audioEnabled,e.addListener("audioUpdate",this.audioUpdateListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),i==null||i.addListener("stageStatusUpdate",this.stageStatusListener)}}updateCanProduce(t){const{self:e,meta:i,stage:s}=t,r=e.permissions.canProduceAudio==="ALLOWED",n=i.viewType==="WEBINAR"||t.self.permissions.stageEnabled,a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,r&&!a&&!n?this.canProduceAudio=!0:(n||a)&&(r&&s.status!=="OFF_STAGE"&&s.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canProduceAudio=!0),e.permissions.canProduceAudio==="CAN_REQUEST"&&(s.status==="ON_STAGE"||s.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canProduceAudio=!0))}hasPermissionError(){return this.micPermission==="DENIED"||this.micPermission==="SYSTEM_DENIED"}getState(){let t="",e="",i="",s={},r=this.hasPermissionError(),n=this.micPermission==="COULD_NOT_START";return this.audioEnabled&&!r?(e=this.t("mic_on"),i=this.iconPack.mic_on):(e=this.t("mic_off"),i=this.iconPack.mic_off,s["red-icon"]=!0),n?t=this.t("perm_could_not_start.audio"):this.micPermission==="SYSTEM_DENIED"?t=this.t("perm_sys_denied.audio"):this.micPermission==="DENIED"?t=this.t("perm_denied.audio"):t=this.audioEnabled?this.t("disable_mic"):this.t("enable_mic"),{tooltipLabel:t,label:e,icon:i,classList:s,showWarning:r||n,disable:r}}render(){if(!this.canProduceAudio)return null;const{tooltipLabel:t,label:e,icon:i,classList:s,showWarning:r,disable:n}=this.getState();return d(O,{title:e},d("dyte-tooltip",{kind:"block",label:t,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",icon:i,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,class:s,onClick:this.toggleMic,showWarning:r,disabled:n})))}static get watchers(){return{meeting:["meetingChanged"]}}};C6.style=Jse;var Kse=Object.freeze({__proto__:null,dyte_mic_toggle:C6});const Qse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:100%;width:100%;display:flex}main{display:flex;flex:1 1 0%;padding-left:var(--dyte-space-4, 16px)}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main dyte-tab-bar{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}:host([size='sm']){flex-direction:column}:host([size='sm']) .grid-width-lg,:host([size='sm']) .grid-width-md{height:50%;width:100%;max-width:100%}:host([size='sm']) .grid-width-sm{height:33.333333%;width:100%;max-width:100%}:host([size='sm']) main{display:flex;flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) dyte-tab-bar{height:var(--dyte-space-12, 48px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{display:flex;flex:1 1 0%}:host([layout='column']) .grid-width-lg,:host([layout='column']) .grid-width-md{height:50%;max-width:100%;width:100%}:host([layout='column']) .grid-width-sm{height:33.333333%;max-width:100%;width:100%}@media (orientation: portrait){:host{flex-direction:column}:host .grid-width-lg{height:50%;width:100%;max-width:100%}:host .grid-width-md{height:33.333333%;width:100%;max-width:100%}:host .grid-width-sm{height:25%;width:100%;max-width:100%}:host main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='md']) main{flex:1 1 0%;flex-direction:column;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host dyte-tab-bar{height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}",P6=class{constructor(t){N(this,t),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Re,this.iconPack=U,this.t=j(),this.gridSize=Nv,this.activeTab=void 0,this.initialised=void 0}componentWillLoad(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting.meta)===null||t===void 0||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)}meetingChanged(t){var e,i,s,r;t!=null&&(((e=t.meta)===null||e===void 0?void 0:e.selfActiveTab)!=null&&this.onActiveTabUpdate((i=t.meta.selfActiveTab)===null||i===void 0?void 0:i.type,(s=t.meta.selfActiveTab)===null||s===void 0?void 0:s.id),this.activeTabUpdateListener=n=>{this.onActiveTabUpdate(n==null?void 0:n.type,n==null?void 0:n.id)},(r=t.meta)===null||r===void 0||r.addListener("activeTabUpdate",this.activeTabUpdateListener))}screenShareParticipantsChanged(t=[]){!this.initialised&&this.activeTab!=null||(this.activeTab==null&&t.length>0?this.setActiveTab({type:"screenshare",participant:t[0]}):this.revalidateActiveTab())}pluginsChanged(t){if(!(!this.initialised&&this.activeTab!=null))if(t.length>0){const e=t.length-1;this.setActiveTab({type:"plugin",plugin:t[e]})}else this.revalidateActiveTab()}revalidateActiveTab(){if(this.activeTab!=null)if(this.activeTab.type==="screenshare"){const{participant:t}=this.activeTab;this.screenShareParticipants.some(e=>e.id===t.id)||this.reassignActiveTab()}else{const{plugin:t}=this.activeTab;this.plugins.some(e=>e.id===t.id)||this.reassignActiveTab()}}setActiveTab(t,e=!0){var i;this.activeTab=t;const s=t.type==="screenshare"?t.participant.id:t.plugin.id;e&&((i=this.meeting.meta)===null||i===void 0||i.setSelfActiveTab({type:t.type,id:s},0))}reassignActiveTab(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){const t=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[t]})}}onActiveTabUpdate(t,e){if(t!=null&&e!=null)switch(t){case"plugin":const i=this.plugins.find(r=>r.id===e);i!=null&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":const s=this.screenShareParticipants.find(r=>r.id===e);s!=null&&this.setActiveTab({type:"screenshare",participant:s},!1)}}getTabs(){const t=this.screenShareParticipants.map(i=>({type:"screenshare",participant:i})),e=this.plugins.map(i=>({type:"plugin",plugin:i}));return t.concat(e)}render(){var t;const e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return d(O,null,d("main",{id:"main-view",part:"main-view"},((t=this.getTabs())===null||t===void 0?void 0:t.length)>1&&d("dyte-tab-bar",Object.assign({activeTab:this.activeTab,tabs:this.getTabs(),onTabChange:i=>this.setActiveTab(i.detail)},e)),d("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map(i=>{var s,r;return d(je,{element:"dyte-screenshare-view",defaults:e,props:{participant:i,key:i.id,style:{display:((s=this.activeTab)===null||s===void 0?void 0:s.type)==="screenshare"&&((r=this.activeTab)===null||r===void 0?void 0:r.participant.id)===i.id?"flex":"none"}},childProps:{participant:i,isScreenShare:!0},deepProps:!0})}),this.plugins.map(i=>{var s,r;return d(je,{element:"dyte-plugin-main",defaults:e,props:{plugin:i,key:i.id,style:{display:((s=this.activeTab)===null||s===void 0?void 0:s.type)==="plugin"&&((r=this.activeTab)===null||r===void 0?void 0:r.plugin.id)===i.id?"flex":"none"}}})}))),d(je,{element:"dyte-mixed-grid",defaults:e,childProps:{part:"participants-grid",class:this.gridSize.mixed?`grid-width-${this.gridSize.mixed}`:"grid-width-lg",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"sm",layout:"row"},onlyChildren:!0}))}get host(){return Ts(this)}static get watchers(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}};P6.style=Qse;var Yse=Object.freeze({__proto__:null,dyte_mixed_grid:P6});const Zse=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:visible}.more-menu{position:absolute;right:calc(var(--dyte-space-24, 96px) * -1);bottom:var(--dyte-space-16, 64px);z-index:50;margin-bottom:var(--dyte-space-3, 12px);box-sizing:border-box;max-height:60vh;width:var(--dyte-space-64, 256px);overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));outline:2px solid transparent;outline-offset:2px}:host([size='sm']) .more-menu{bottom:var(--dyte-space-10, 40px)}.more-menu::-webkit-scrollbar{height:var(--dyte-space-0, 0px);width:var(--dyte-space-1\\.5, 6px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.more-menu::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}",R6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.handleKeyDown=({key:e})=>{e==="Escape"&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),$.activeMoreMenu=!$.activeMoreMenu)},this.handleOnClick=e=>{!e.composedPath().includes(this.host)&&this.states.activeMoreMenu&&(this.stateUpdate.emit({activeMoreMenu:!1}),$.activeMoreMenu=!$.activeMoreMenu)},this.toggleMoreMenu=()=>{this.stateUpdate.emit({activeMoreMenu:!$.activeMoreMenu}),$.activeMoreMenu=!$.activeMoreMenu},this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j()}connectedCallback(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleOnClick)}disconnectedCallback(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleOnClick)}render(){const t=this.t("more");return d(O,{title:t},this.states.activeMoreMenu&&d("div",{class:"more-menu"},d("slot",{name:"more-elements"})),d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:e=>{e.stopPropagation(),this.toggleMoreMenu()},icon:this.iconPack.horizontal_dots,label:t,part:"controlbar-button"}),d("slot",{name:"expanded"}))}get host(){return Ts(this)}};R6.style=Zse;var Xse=Object.freeze({__proto__:null,dyte_more_toggle:R6});const ere=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",I6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onMuteAll=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!0})},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j()}render(){var t;if(!(!((t=this.meeting)===null||t===void 0)&&t.self.permissions.canDisableParticipantAudio))return null;const e=this.t("mute_all");return d(O,{title:e},d("dyte-tooltip",{kind:"block",label:e,part:"tooltip"},d("dyte-controlbar-button",{part:"controlbar-button",icon:this.iconPack.speaker_off,label:e,size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,onClick:this.onMuteAll})))}};I6.style=ere;var tre=Object.freeze({__proto__:null,dyte_mute_all_button:I6});const ire=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leave-modal{position:relative;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.leave-modal .header h2{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}.leave-modal .content{font-size:14px}.leave-message p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px)}.leave-meeting{display:flex;flex-direction:row;justify-content:space-between;gap:var(--dyte-space-2, 8px)}.leave-meeting dyte-button{flex:1 1 0%}.end-meeting{margin-top:var(--dyte-space-2, 8px)}.message{margin-bottom:var(--dyte-space-4, 16px)}label{display:flex;align-items:center}input[type='checkbox']{margin-right:var(--dyte-space-2, 8px);accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}",A6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onClose=()=>{this.stateUpdate.emit({activeMuteAllConfirmation:!1}),$.activeMuteAllConfirmation=!1},this.onMuteAll=()=>{var e;(e=this.meeting)===null||e===void 0||e.participants.disableAllAudio(this.allowUnmute),this.onClose()},this.meeting=void 0,this.states=void 0,this.iconPack=U,this.t=j(),this.allowUnmute=!0}render(){return d(O,null,d("div",{class:"leave-modal"},d("div",{class:"header"},d("h2",{class:"title"},this.t("mute_all.header"))),d("p",{class:"message"},this.t("mute_all.description")),d("div",{class:"content"},d("div",{class:"leave-meeting"},d("dyte-button",{variant:"secondary",title:this.t("close"),onClick:this.onClose,iconPack:this.iconPack,t:this.t},this.t("cancel")),d("dyte-button",{variant:"danger",title:this.t("mute_all"),onClick:this.onMuteAll,iconPack:this.iconPack,t:this.t},this.t("mute_all"))))))}};A6.style=ire;var sre=Object.freeze({__proto__:null,dyte_mute_all_confirmation:A6});const rre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}dyte-icon{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;height:100%;width:100%;--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.bg-signal{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:0;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}",D6=class{constructor(t){N(this,t),this.onMediaScoreUpdate=({kind:e,isScreenshare:i,score:s})=>{(e==="video"||this.isScreenShare&&i)&&(this.score=s)},this.participant=void 0,this.meeting=void 0,this.iconPack=U,this.t=j(),this.isScreenShare=!1,this.score=10}connectedCallback(){this.participantChanged(this.participant)}participantChanged(t){!t||t.addListener("mediaScoreUpdate",this.onMediaScoreUpdate)}disconnectedCallback(){var t;(t=this.participant)===null||t===void 0||t.removeListener("mediaScoreUpdate",this.onMediaScoreUpdate)}render(){if(this.meeting&&this.meeting.self.userId===this.participant.userId)return null;let t=Math.round(this.score/2),e="good";if(t>3)return null;switch(t<1&&(t=1),t){case 3:case 2:e="poor";break;case 1:e="poorest"}return d(O,null,d("dyte-icon",{icon:this.iconPack[`signal_${t}`],class:e}),d("dyte-icon",{icon:this.iconPack.signal_5,class:"bg-signal"}))}static get watchers(){return{participant:["participantChanged"]}}};D6.style=rre;var nre=Object.freeze({__proto__:null,dyte_network_indicator:D6});const are=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",M6=class{constructor(t){N(this,t),this.disconnectMeeting=e=>{e!=null&&this.countListener!=null&&(e.participants.joined.removeListener("participantJoined",this.countListener),e.participants.joined.removeListener("participantLeft",this.countListener),(e==null?void 0:e.stage)&&this.stageUpdateListener&&e.stage.removeListener("stageStatusUpdate",this.stageUpdateListener),e.self.removeListener("roomJoined",this.countListener))},this.meeting=void 0,this.iconPack=U,this.t=j(),this.participantCount=0,this.isViewer=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){this.disconnectMeeting(e),t!=null&&(this.countListener=()=>{this.participantCount=t.participants.joined.size+(t.self.roomJoined?1:0)},this.countListener(),this.isViewer=Sl(this.meeting),t.participants.joined.addListener("participantJoined",this.countListener),t.participants.joined.addListener("participantLeft",this.countListener),t!=null&&t.stage&&(this.stageUpdateListener=()=>{this.isViewer=Sl(this.meeting)},t==null||t.stage.addListener("stageStatusUpdate",this.stageUpdateListener)),t.self.addListener("roomJoined",this.countListener))}render(){return this.isViewer?null:d(O,{tabIndex:0,role:"log","aria-label":`${this.participantCount} ${this.t("participants")}`},d("dyte-icon",{icon:this.iconPack.people,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.participantCount)}static get watchers(){return{meeting:["meetingChanged"]}}};M6.style=are;var ore=Object.freeze({__proto__:null,dyte_participant_count:M6});const cre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;align-items:center;justify-content:center;aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}",O6=class{constructor(t){N(this,t),this.onVideoUpdate=e=>{this.videoState=e},this.onPinned=({isPinned:e})=>{this.isPinned=e},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.states=void 0,this.config=Re,this.variant="solid",this.size=void 0,this.iconPack=U,this.t=j()}connectedCallback(){this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){this.participant!=null&&(this.participant.removeListener("videoUpdate",this.onVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned))}async participantsChanged(t){t!=null&&(this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.isPinned=t.isPinned,t.addListener("videoUpdate",this.onVideoUpdate),t.addListener("pinned",this.onPinned),t.addListener("unpinned",this.onPinned))}videoStateChanged(t){if(t!=null&&this.videoEl!=null)if(t.videoEnabled){const e=new MediaStream;e.addTrack(t.videoTrack),this.videoEl.srcObject=e}else this.videoEl.srcObject=void 0}isMirrored(){var t;if(this.participant!=null&&("preview"in this.participant||this.isPreview)){const i=this.states||$,s=(t=i==null?void 0:i.prefs)===null||t===void 0?void 0:t.mirrorVideo;if(typeof s=="boolean")return s}return!1}render(){var t,e,i,s;return d(O,null,d("video",{ref:r=>this.videoEl=r,class:{visible:(t=this.videoState)===null||t===void 0?void 0:t.videoEnabled,mirror:this.isMirrored(),[(s=(i=(e=this.config)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.videoFit)!==null&&s!==void 0?s:"cover"]:!0},autoPlay:!0,playsInline:!0,muted:!0}),this.isPinned&&d("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t}),d("slot",null))}static get watchers(){return{participant:["participantsChanged"],videoState:["videoStateChanged"]}}};O6.style=cre;var dre=Object.freeze({__proto__:null,dyte_participant_setup:O6});const Wp=console;class lre{constructor(e){this.meeting=e,this.audio=document.createElement("audio"),this.audio.autoplay=!0,this.audioStream=new MediaStream,this.audio.srcObject=this.audioStream,this.audioTracks=[]}addTrack(e,i){this.audioTracks.some(s=>s.id===e)||(this.audioTracks.push({id:e,track:i}),this.audioStream.addTrack(i),this.play())}removeTrack(e){const i=this.audioTracks.find(s=>s.id===e);i!=null&&(this.audioStream.removeTrack(i.track),this.audioTracks=this.audioTracks.filter(s=>s.id!==e))}async play(){var e;this.audio.srcObject=this.audioStream,await((e=this.audio.play())===null||e===void 0?void 0:e.catch(i=>{i.name==="NotAllowedError"?this._onError!=null&&this._onError():i.name!=="AbortError"&&Wp.error(`[dyte-audio] play() error
`,i)}))}async setDevice(e){var i,s,r;kf(this.meeting)||await((r=(s=(i=this.audio).setSinkId)===null||s===void 0?void 0:s.call(i,e))===null||r===void 0?void 0:r.catch(n=>{Wp.error(`[dyte-audio] setSinkId() error
`,n)}))}onError(e){this._onError=e}}const ure=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}",L6=class{constructor(t){N(this,t),this.dialogClose=K(this,"dialogClose",7),this.onDyteDialogClose=()=>{this.showPlayDialog=!1,this.dialogClose.emit()},this.meeting=void 0,this.iconPack=U,this.t=j(),this.showPlayDialog=!1}componentDidLoad(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.meeting!=null&&(this.audioUpdateListener&&this.meeting.participants.joined.removeListener("audioUpdate",this.audioUpdateListener),this.screenShareUpdateListener&&this.meeting.participants.joined.removeListener("screenShareUpdate",this.screenShareUpdateListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),this.deviceUpdateListener&&this.meeting.self.removeListener("deviceUpdate",this.deviceUpdateListener),this.stageStatusUpdateListener&&((t=this.meeting.stage)===null||t===void 0||t.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)))}setupAudio(){this.audio=new lre(this.meeting)}async handleAutoPlayError(){this.audio||this.setupAudio(),this.audio.onError(()=>{this.showPlayDialog=!0}),this.audio.play()}async handleEvents(t){const e=t.self.getCurrentDevices();e.speaker!=null&&await this.audio.setDevice(e.speaker.deviceId),this.audioUpdateListener=({id:s,audioEnabled:r,audioTrack:n})=>{const a=`audio-${s}`;r&&n!=null?this.audio.addTrack(a,n):this.audio.removeTrack(a)};const i=t.participants.joined.toArray();for(const s of i)this.audioUpdateListener(s);this.participantLeftListener=({id:s})=>{this.audio.removeTrack(`audio-${s}`),this.audio.removeTrack(`screenshare-${s}`)},this.screenShareUpdateListener=({id:s,screenShareEnabled:r,screenShareTracks:n})=>{const a=`screenshare-${s}`;r&&n.audio!=null?this.audio.addTrack(a,n.audio):this.audio.removeTrack(a)},this.deviceUpdateListener=({device:s,preview:r})=>{r||s.kind==="audiooutput"&&this.audio.setDevice(s.deviceId)},t.participants.joined.addListener("audioUpdate",this.audioUpdateListener),t.participants.joined.addListener("screenShareUpdate",this.screenShareUpdateListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener)}async meetingChanged(t){var e;t!=null&&(this.setupAudio(),t.stage.status!=="ON_STAGE"?(this.stageStatusUpdateListener=async i=>{i==="ON_STAGE"&&(await this.handleAutoPlayError(),await this.handleEvents(this.meeting))},(e=t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.stageStatusUpdateListener),(t.self.permissions.canProduceAudio==="ALLOWED"||t.self.permissions.canProduceVideo==="ALLOWED"||t.self.permissions.canProduceScreenshare==="ALLOWED")&&await this.handleAutoPlayError()):await this.handleAutoPlayError()),await this.handleEvents(t)}render(){return d(O,null,this.showPlayDialog&&d("dyte-dialog",{open:!0,onDyteDialogClose:this.onDyteDialogClose,hideCloseButton:!0,disableEscapeKey:!0,iconPack:this.iconPack,t:this.t},d("div",{class:"modal"},d("h3",null,this.t("audio_playback.title")),d("p",null,this.t("audio_playback.description")),d("dyte-button",{kind:"wide",onClick:()=>{this.audio.play(),this.onDyteDialogClose()},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback")))))}static get watchers(){return{meeting:["meetingChanged"]}}};L6.style=ure;var pre=Object.freeze({__proto__:null,dyte_participants_audio:L6});const hre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.participants-container{margin-bottom:var(--dyte-space-4, 16px);width:100%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-participant{width:100%}",N6=class{constructor(e){N(this,e),this.updateStageList=()=>{var i,s,r;((i=this.meeting)===null||i===void 0?void 0:i.meta.viewType)==="LIVESTREAM"?this.showStageList=((r=(s=this.meeting)===null||s===void 0?void 0:s.stage)===null||r===void 0?void 0:r.status)==="ON_STAGE":this.showStageList=!0,this.getParticipants(this.search)},this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.view="sidebar",this.t=j(),this.search="",this.participants=[],this.showStageList=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){const{participants:e,stage:i}=this.meeting;this.meeting!=null&&(this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),e.joined.removeListener("stageStatusUpdate",this.getParticipants),i==null||i.removeListener("stageStatusUpdate",this.updateStageList))}meetingChanged(e){e!=null&&(this.participantJoinedListener=i=>{if(i.stageStatus!=="ON_STAGE")return;const s=this.search.toLowerCase();!i.name.toLowerCase().includes(s)||!i.id.toLowerCase().includes(s)||(this.participants=[...this.participants.filter(r=>r.id!==i.id),i])},this.participantLeftListener=i=>{this.participants=this.participants.filter(s=>s.id!==i.id)},e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener),this.updateStageList(),e==null||e.participants.joined.on("stageStatusUpdate",this.updateStageList),e==null||e.stage.on("stageStatusUpdate",this.updateStageList))}searchChanged(e){this.getParticipants(e)}getParticipants(e=this.search){let i=this.meeting.stage.status==="ON_STAGE"?[this.meeting.self]:[];i=[...i,...this.meeting.participants.joined.toArray().filter(s=>s.stageStatus==="ON_STAGE")],e===""?this.participants=i:this.participants=i.filter(s=>{var r;return((r=s.name)!==null&&r!==void 0?r:s.id).toLowerCase().includes(e.toLowerCase())})}render(){if(!this.showStageList)return;const e={meeting:this.meeting,view:this.view,t:this.t,config:this.config,states:$,size:this.size,iconPack:this.iconPack};return d(O,null,d("div",{class:"participants-container"},d("div",{class:"heading-count",part:"heading-count"},this.t("participants")," (",this.participants.length,")"),d("ul",{class:"participants",part:"participants"},this.participants.map(i=>d(je,{element:"dyte-participant",defaults:e,props:{role:"listitem",participant:i},childProps:Object.assign(Object.assign({},e),{participant:i,size:this.size}),deepProps:!0})),this.participants.length===0&&d("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("search.could_not_find"):this.t("search.empty")))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};N6.style=hre;var gre=Object.freeze({__proto__:null,dyte_participants_stage_list:N6});const mre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:column;font-size:14px}.stage-requested-participants{margin-bottom:var(--dyte-space-8, 32px)}.stage-requested-participants .bulk-actions{display:flex;gap:var(--dyte-space-2, 8px)}.stage-requested-participants .bulk-actions .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.stage-requested-participants .bulk-actions dyte-button{flex:1 1 0%}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",U6=class{constructor(t){N(this,t),this.updateStageRequestedParticipants=()=>{this.stageRequestedParticipants=this.meeting.participants.joined.toArray().filter(e=>e.stageStatus==="REQUESTED_TO_JOIN_STAGE")},this.acceptStageRequest=async e=>{const{userId:i}=e;await this.meeting.stage.grantAccess([i]),this.updateStageRequestedParticipants()},this.rejectStageRequest=async e=>{const{userId:i}=e;await this.meeting.stage.denyAccess([i]),this.updateStageRequestedParticipants()},this.acceptAllStageRequest=async()=>{await this.meeting.stage.grantAccess(this.stageRequestedParticipants.map(e=>e.userId)),this.updateStageRequestedParticipants()},this.denyAllStageRequest=async()=>{var e;await((e=this.meeting.stage)===null||e===void 0?void 0:e.denyAccess(this.stageRequestedParticipants.map(i=>i.userId))),this.updateStageRequestedParticipants()},this.shouldShowStageRequests=()=>this.meeting.self.permissions.acceptPresentRequests&&this.stageRequestedParticipants.length>0,this.updateRequestList=async e=>{var i,s,r,n;this.meeting.meta.viewType==="WEBINAR"?this.stageRequestedParticipants=(i=[this.meeting.self,...this.meeting.participants.joined.toArray()])===null||i===void 0?void 0:i.filter(a=>a.stageStatus==="REQUESTED_TO_JOIN_STAGE"):this.meeting.meta.viewType==="LIVESTREAM"&&this.meeting.self.permissions.acceptPresentRequests&&(e||(e=(n=(r=await((s=this.meeting.stage)===null||s===void 0?void 0:s.getAccessRequests()))===null||r===void 0?void 0:r.stageRequests)!==null&&n!==void 0?n:[]),this.stageRequestedParticipants=e.map(a=>Object.assign(Object.assign({},a),{name:a.displayName})))},this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.view="sidebar",this.t=j(),this.stageRequestedParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantLeftListener&&t.joined.removeListener("participantLeft",this.participantLeftListener),e==null||e.removeListener("stageAccessRequestUpdate",this.updateRequestList)}meetingChanged(t){var e;t!=null&&(this.participantLeftListener=i=>{this.stageRequestedParticipants=this.stageRequestedParticipants.filter(s=>s.id!==i.id)},this.updateRequestList(),(e=t.stage)===null||e===void 0||e.on("stageAccessRequestUpdate",this.updateRequestList),t.participants.joined.addListener("participantLeft",this.participantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowStageRequests()))return d("div",{class:"stage-requested-participants"},d("div",{class:"heading-count",part:"staged-heading-count"},this.t("stage_request.header_title")," (",this.stageRequestedParticipants.length,")"),d("ul",{class:"participants",part:"staged-participants"},this.stageRequestedParticipants.map(t=>d("li",{class:"waiting-participant",key:t.id},d("div",{class:"participant-details"},d("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),d("p",{class:"name",title:t.name},t.name)),d("div",{class:"waitlist-controls"},d("dyte-tooltip",{label:this.t("stage_request.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",onClick:()=>this.rejectStageRequest(t),iconPack:this.iconPack,t:this.t},d("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),d("dyte-tooltip",{label:this.t("stage_request.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptStageRequest(t)},d("dyte-icon",{class:"accept",icon:this.iconPack.checkmark}))))))),d("div",{class:"bulk-actions"},d("dyte-button",{class:"accept-all-button",variant:"secondary",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllStageRequest},this.t("stage_request.accept_all")),d("dyte-button",{class:"deny-all-button",variant:"danger",iconPack:this.iconPack,t:this.t,onClick:this.denyAllStageRequest},this.t("stage_request.deny_all"))))}static get watchers(){return{meeting:["meetingChanged"]}}};U6.style=mre;var fre=Object.freeze({__proto__:null,dyte_participants_stage_queue:U6});const vre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.waiting-participants-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .waiting-participants-count{right:var(--dyte-space-4, 16px);top:auto}",$6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.updateStageRequests=async e=>{var i,s,r;if(this.meeting.meta.viewType==="LIVESTREAM")e||(e=(r=(s=await((i=this.meeting.stage)===null||i===void 0?void 0:i.getAccessRequests()))===null||s===void 0?void 0:s.stageRequests)!==null&&r!==void 0?r:[]),this.stageRequestedParticipants=e;else{const n=this.meeting.participants.joined.toArray().filter(a=>a.stageStatus==="REQUESTED_TO_JOIN_STAGE");this.stageRequestedParticipants=this.meeting.stage.status==="REQUESTED_TO_JOIN_STAGE"?[this.meeting.self]:[],this.stageRequestedParticipants=[...this.stageRequestedParticipants,...n]}this.updateBadgeCount()},this.updateBadgeCount=()=>{this.badgeCount=this.waitlistedParticipants.length+this.stageRequestedParticipants.length},this.updateCanView=()=>{this.canViewParticipants=B1(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.participantsActive=!1,this.waitlistedParticipants=[],this.stageRequestedParticipants=[],this.badgeCount=0,this.canViewParticipants=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Fl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i,s;this.meeting!=null&&((e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateCanView),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&this.meeting.participants.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener),(i=this.meeting.stage)===null||i===void 0||i.removeListener("stageAccessRequestUpdate",this.updateStageRequests),(s=this.meeting.participants)===null||s===void 0||s.joined.removeListener("stageStatusUpdate",this.updateStageRequests))}meetingChanged(t){var e;t!=null&&(this.canViewParticipants=B1(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView),t.self.permissions.acceptWaitingRequests&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=i=>{this.waitlistedParticipants.some(s=>s.id===i.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,i],this.updateBadgeCount())},this.waitlistedParticipantLeftListener=i=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(s=>s.id!==i.id),this.updateBadgeCount()},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener)),this.meeting.self.permissions.acceptPresentRequests&&(this.updateStageRequests(),t==null||t.stage.on("stageAccessRequestUpdate",this.updateStageRequests),t==null||t.participants.joined.on("stageStatusUpdate",this.updateStageRequests)),this.updateBadgeCount())}statesChanged(t){const e=t||$;e!=null&&(this.participantsActive=e.activeSidebar===!0&&e.sidebar==="participants")}toggleParticipantsTab(){const t=this.states||$;this.participantsActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="participants"),$.activeSidebar=this.participantsActive,$.sidebar=this.participantsActive?"participants":void 0,this.stateUpdate.emit({activeSidebar:this.participantsActive,sidebar:this.participantsActive?"participants":void 0,activeMoreMenu:!1,activeAI:!1}),$.activeMoreMenu=!1}render(){if(!this.canViewParticipants)return;const t=this.t("participants");return d(O,{title:t},this.badgeCount!==0&&!this.participantsActive&&d("div",{class:"waiting-participants-count",part:"waiting-participants-count"},d("span",null,this.badgeCount<=100?this.badgeCount:"99+")),d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.participantsActive},onClick:()=>this.toggleParticipantsTab(),icon:this.iconPack.participants,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};$6.style=vre;var yre=Object.freeze({__proto__:null,dyte_participants_toggle:$6});const bre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:100%;flex-direction:column;font-size:14px}.list{margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column}h3,.heading-count{margin:var(--dyte-space-0, 0px);align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.empty-message{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);text-align:center;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}",j6=class{constructor(t){N(this,t),this.updateStageViewers=()=>{this.getViewers(this.search)},this.shouldShowViewers=()=>this.meeting.meta.viewType==="WEBINAR",this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.view="sidebar",this.search="",this.t=j(),this.stageViewers=[]}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}meetingChanged(t){t!=null&&(this.participantJoinedListener=e=>{if(e.stageStatus==="ON_STAGE")return;const i=this.search.toLowerCase();!e.name.toLowerCase().includes(i)||!e.id.toLowerCase().includes(i)||(this.stageViewers=[...this.stageViewers.filter(s=>s.id!==e.id),e])},this.participantLeftListener=e=>{this.stageViewers=this.stageViewers.filter(i=>i.id!==e.id)},t.participants.joined.addListener("participantJoined",this.participantJoinedListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),t.participants.joined.on("stageStatusUpdate",this.updateStageViewers),t.stage.on("stageStatusUpdate",this.updateStageViewers))}searchChanged(t){this.getViewers(t)}disconnectedCallback(){const{participants:t,stage:e}=this.meeting;this.participantJoinedListener&&this.meeting.participants.joined.removeListener("participantJoined",this.participantJoinedListener),this.participantLeftListener&&this.meeting.participants.joined.removeListener("participantLeft",this.participantLeftListener),t.joined.removeListener("stageStatusUpdate",this.updateStageViewers),e.removeListener("stageStatusUpdate",this.updateStageViewers)}getViewers(t){let e=this.meeting.stage.status==="ON_STAGE"?[]:[this.meeting.self];e=[...e,...this.meeting.participants.joined.toArray()].filter(i=>i.stageStatus!=="ON_STAGE"),t===""?this.stageViewers=e:this.stageViewers=e.filter(i=>{var s;return((s=i.name)!==null&&s!==void 0?s:i.id).toLowerCase().includes(t.toLowerCase())})}render(){if(!(this.view!=="sidebar"||!this.shouldShowViewers()))return d("div",{class:"list"},d("div",{class:"heading-count",part:"heading-count"},this.t("viewers")," (",this.stageViewers.length,")"),d("ul",{class:"participants",part:"participants"},this.stageViewers.map(t=>{if(t.stageStatus!=="ON_STAGE")return d("dyte-participant",{role:"listitem",key:t.id,meeting:this.meeting,participant:t,view:this.view,iconPack:this.iconPack,t:this.t})}),this.stageViewers.length===0&&d("div",{class:"empty-message",part:"empty-message"},this.search.length>0?this.t("participants.errors.empty_results"):this.t("participants.empty_list"))))}static get watchers(){return{meeting:["meetingChanged"],search:["searchChanged"]}}};j6.style=bre;var wre=Object.freeze({__proto__:null,dyte_participants_viewer_list:j6});const _re=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-top:var(--dyte-space-4, 16px);margin-bottom:calc(var(--dyte-space-2, 8px) * -1);display:flex;width:100%;flex-direction:column;font-size:14px}.waiting-participants{margin-bottom:var(--dyte-space-8, 32px)}.waiting-participants .accept-all-button{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}h3,.heading-count{margin:var(--dyte-space-0, 0px);display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.heading-count{font-size:14px}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.waiting-participant{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;align-items:center}.waiting-participant .participant-details{margin-right:auto;display:flex;align-items:center}.waiting-participant .participant-details dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);flex-shrink:0;font-size:14px}.waiting-participant .participant-details .name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 1080px){.waiting-participant .participant-details .name{max-width:var(--dyte-space-40, 160px)}}.waiting-participant .waitlist-controls{display:flex}.waiting-participant .waitlist-controls dyte-button{margin-left:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}.waiting-participant .waitlist-controls dyte-icon.accept{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.waiting-participant .waitlist-controls dyte-icon.deny{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",z6=class{constructor(t){N(this,t),this.acceptWaitingRoomRequest=async e=>{await this.meeting.participants.acceptWaitingRoomRequest(e)},this.acceptAllWaitingRoomRequests=async()=>{await this.meeting.participants.acceptAllWaitingRoomRequest(this.waitlistedParticipants.map(e=>e.id))},this.rejectWaitingRoomRequest=async e=>{await this.meeting.participants.rejectWaitingRoomRequest(e)},this.shouldShowWaitlist=()=>this.meeting.meta.viewType==="LIVESTREAM"?!1:this.meeting.self.permissions.acceptWaitingRequests&&this.waitlistedParticipants.length!==0,this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.view="sidebar",this.t=j(),this.waitlistedParticipants=[]}disconnectedCallback(){const{participants:t}=this.meeting;this.waitlistedParticipantJoinedListener&&t.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.waitlistedParticipantLeftListener&&t.waitlisted.removeListener("participantLeft",this.waitlistedParticipantLeftListener)}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t!=null&&(this.waitlistedParticipants=t.participants.waitlisted.toArray(),this.waitlistedParticipantJoinedListener=e=>{this.waitlistedParticipants.some(i=>i.id===e.id)||(this.waitlistedParticipants=[...this.waitlistedParticipants,e])},this.waitlistedParticipantLeftListener=e=>{this.waitlistedParticipants=this.waitlistedParticipants.filter(i=>i.id!==e.id)},t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),t.participants.waitlisted.addListener("participantLeft",this.waitlistedParticipantLeftListener))}render(){if(!(this.view!=="sidebar"||!this.shouldShowWaitlist()))return d("div",{class:"waiting-participants"},d("div",{class:"heading-count",part:"waitlisted-heading-count"},this.t("waitlist.header_title")," (",this.waitlistedParticipants.length,")"),d("ul",{class:"participants",part:"waitlisted-participants"},this.waitlistedParticipants.map(t=>d("li",{class:"waiting-participant",key:t.id},d("div",{class:"participant-details"},d("dyte-avatar",{participant:t,size:"sm",iconPack:this.iconPack,t:this.t}),d("p",{class:"name",title:t.name},t.name)),d("div",{class:"waitlist-controls"},d("dyte-tooltip",{label:this.t("waitlist.deny_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.rejectWaitingRoomRequest(t.id)},d("dyte-icon",{class:"deny",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))),d("dyte-tooltip",{label:this.t("waitlist.accept_request"),variant:"secondary",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>this.acceptWaitingRoomRequest(t.id)},d("dyte-icon",{class:"accept",icon:this.iconPack.checkmark,iconPack:this.iconPack,t:this.t}))))))),d("dyte-button",{class:"accept-all-button",variant:"secondary",kind:"wide",iconPack:this.iconPack,t:this.t,onClick:this.acceptAllWaitingRoomRequests},this.t("waitlist.accept_all")))}static get watchers(){return{meeting:["meetingChanged"]}}};z6.style=_re;var kre=Object.freeze({__proto__:null,dyte_participants_waiting_list:z6});const Sre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;width:560px;padding:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.actions{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.text-icon{display:inline-block;vertical-align:middle}h2{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}h2 .text-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-4, 16px)}.need-help-link{display:inline-block;text-underline-offset:2px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity))}.need-help-link:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}a dyte-icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) .actions{flex-direction:column;align-items:flex-start;justify-content:center}:host([size='sm']) .action{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.actions{margin-top:var(--dyte-space-6, 24px)}.actions dyte-button{flex:1 1 0%}",F6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.continue=()=>{this.stateUpdate.emit({activePermissionsMessage:{enabled:!1}}),$.activePermissionsMessage={enabled:!1}},this.reload=()=>{typeof window<"u"&&window.location.reload()},this.meeting=void 0,this.t=j(),this.iconPack=U,this.states=void 0,this.device=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){t!=null&&(this.device=t.self.device)}getLink(t){let e;switch(t){case"audio":e="microphone";break;case"video":e="camera";break;default:e="screenshare";break}const i="https://www.google.com/search?q=";let s=`Allow+${e}+access`;if(this.device!=null){const{browserName:r,isMobile:n}=this.device;s+="+"+r,n&&(s+="+mobile")}return i+s}isDeniedBySystem(){var t;const e=(t=this.meeting)===null||t===void 0?void 0:t.self.mediaPermissions;return e==null?!1:!!Object.values(e).includes("SYSTEM_DENIED")}getTitle(){var t,e,i;const s=this.isDeniedBySystem(),r=(i=(e=(t=this.states)===null||t===void 0?void 0:t.activePermissionsMessage)===null||e===void 0?void 0:e.kind)!==null&&i!==void 0?i:"audio";return s?this.t(`perm_sys_denied.${r}`):this.t(`perm_denied.${r}`)}getMessage(){var t,e,i,s;const{browserName:r,osName:n}=this.meeting.self.device,a=this.isDeniedBySystem(),o=(t=r.toLowerCase())!==null&&t!==void 0?t:"others",c=n!=null?n:"others",u=(s=(i=(e=this.states)===null||e===void 0?void 0:e.activePermissionsMessage)===null||i===void 0?void 0:i.kind)!==null&&s!==void 0?s:"audio";return a?this.t(`perm_sys_denied.${u}.${c}.message`):this.t(`perm_denied.${u}.${o}.message`)}render(){var t,e,i;const s=this.isDeniedBySystem();return d(O,null,d("h2",null,d("dyte-icon",{class:"text-icon",icon:this.iconPack.warning,iconPack:this.iconPack,t:this.t}),this.getTitle()),d("p",null,this.getMessage()),!s&&d("a",{class:"need-help-link",href:this.getLink((i=(e=(t=this.states)===null||t===void 0?void 0:t.activePermissionsMessage)===null||e===void 0?void 0:e.kind)!==null&&i!==void 0?i:"audio"),target:"_blank",rel:"noreferrer external noreferrer noopener"},d("dyte-icon",{class:"text-icon",icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),this.t("cta.help")),d("div",{class:"actions"},d("dyte-button",{size:"lg",kind:"wide",variant:"secondary",onClick:this.continue,iconPack:this.iconPack,t:this.t},this.t("cta.continue")),d("dyte-button",{size:"lg",kind:"wide",onClick:this.reload,iconPack:this.iconPack,t:this.t},this.t("cta.reload"))),d("slot",null))}static get watchers(){return{meeting:["meetingChanged"]}}};F6.style=Sre;var xre=Object.freeze({__proto__:null,dyte_permissions_message:F6});const Ere=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",V6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.meeting=void 0,this.states=void 0,this.config=Re,this.iconPack=U,this.size=void 0,this.t=j(),this.pipSupported=!1}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i;t!==null&&(this.pipSupported=t.participants.pip.isSupported()&&((e=t.self.config)===null||e===void 0?void 0:e.pipMode)&&((i=t.self.config)===null||i===void 0?void 0:i.viewType)!=="LIVESTREAM")}togglePip(){this.meeting.participants.pip.isActive?this.meeting.participants.pip.disable():this.meeting.participants.pip.enable(),this.stateUpdate.emit({activeMoreMenu:!1}),$.activeMoreMenu=!1}render(){if(!this.pipSupported)return;const t=this.meeting.participants.pip.isActive;return d(O,{tabIndex:0,role:"log","aria-label":"Picture-in-Picture mode"},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.togglePip(),icon:t?this.iconPack.pip_on:this.iconPack.pip_off,label:t?this.t("pip_off"):this.t("pip_on"),variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"]}}};V6.style=Ere;var Tre=Object.freeze({__proto__:null,dyte_pip_toggle:V6});const Cre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}",B6=class{constructor(t){N(this,t),this.canInteractWithPlugin=()=>{const e=this.plugin.id;if(!e)return!0;if(this.meeting.self.permissions.isV2){const i=this.meeting.self.permissions.plugins.config[e];return!i||!i.accessControl?!0:i.accessControl==="FULL_ACCESS"}else return!0},this.meeting=void 0,this.plugin=void 0,this.iconPack=U,this.t=j(),this.canClosePlugin=!1,this.viewModeEnabled=!1}componentDidLoad(){this.meetingChanged(this.meeting),this.pluginChanged(this.plugin)}meetingChanged(t){if(t==null)return;const e=this.canInteractWithPlugin();this.viewModeEnabled=!e,Ci(()=>{this.canClosePlugin=t.self.permissions.plugins.canClose})}pluginChanged(t){this.toggleViewModeListener=e=>{this.viewModeEnabled=e},t!=null&&(t.addPluginView(this.iframeEl),t.addListener("toggleViewMode",this.toggleViewModeListener))}disconnectedCallback(){var t;(t=this.plugin)===null||t===void 0||t.removeListener("toggleViewMode",this.toggleViewModeListener)}render(){return this.plugin==null?null:d(O,null,d("header",{part:"header"},d("div",null,this.plugin.name),this.canClosePlugin&&d("div",null,d("dyte-button",{kind:"icon",onClick:()=>this.plugin.deactivate(),part:"button",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))),d("div",{class:"iframe-container"},!this.canInteractWithPlugin()||this.viewModeEnabled?d("div",{class:"block-inputs"}):null,d("iframe",{ref:t=>this.iframeEl=t,part:"iframe"})))}static get watchers(){return{meeting:["meetingChanged"],plugin:["pluginChanged"]}}};B6.style=Cre;var Pre=Object.freeze({__proto__:null,dyte_plugin_main:B6});const Rre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",H6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.updateCanView=()=>{this.canViewPlugins=H1(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.pluginsActive=!1,this.canViewPlugins=!1}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateCanView)}connectedCallback(){this.statesChanged(this.states),this.meetingChanged(this.meeting),Fl("sidebar",()=>this.statesChanged())}meetingChanged(t){var e;t!=null&&(this.canViewPlugins=H1(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||$;e!=null&&(this.pluginsActive=e.activeSidebar===!0&&e.sidebar==="plugins")}togglePlugins(){const t=this.states||$;this.pluginsActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="plugins"),this.stateUpdate.emit({activeSidebar:this.pluginsActive,sidebar:this.pluginsActive?"plugins":void 0,activeMoreMenu:!1,activeAI:!1}),$.activeSidebar=this.pluginsActive,$.sidebar=this.pluginsActive?"plugins":void 0,$.activeMoreMenu=!1}render(){if(!this.canViewPlugins)return;const t=this.t("plugins");return d(O,{title:t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pluginsActive},onClick:()=>this.togglePlugins(),icon:this.iconPack.rocket,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};H6.style=Rre;var Ire=Object.freeze({__proto__:null,dyte_plugins_toggle:H6});const Are=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}:host([variant='horizontal']){display:flex;flex-direction:row-reverse;align-items:center}:host([variant='horizontal']) .unread-count{right:var(--dyte-space-4, 16px);top:auto}",W6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onPollsUpdate=({newPoll:e})=>{e===!0&&(this.unreadPollsCount+=1)},this.updateCanView=()=>{this.canViewPolls=V1(this.meeting)},this.variant="button",this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.pollsActive=!1,this.unreadPollsCount=0,this.canViewPolls=!1}connectedCallback(){this.meetingChanged(this.meeting),this.statesChanged(this.states),Fl("sidebar",()=>this.statesChanged())}disconnectedCallback(){var t,e,i;(t=this.meeting.polls)===null||t===void 0||t.removeListener("pollsUpdate",this.onPollsUpdate),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.removeListener("stageStatusUpdate",this.updateCanView)}meetingChanged(t){var e;t&&t.polls&&(this.unreadPollsCount=t.polls.items.length,this.meeting.polls.addListener("pollsUpdate",this.onPollsUpdate),this.canViewPolls=V1(t),(e=t==null?void 0:t.stage)===null||e===void 0||e.on("stageStatusUpdate",this.updateCanView))}statesChanged(t){const e=t||$;e!=null&&(this.pollsActive=e.activeSidebar===!0&&e.sidebar==="polls")}togglePollsTab(){const t=this.states||$;this.unreadPollsCount=0,this.pollsActive=!((t==null?void 0:t.activeSidebar)&&(t==null?void 0:t.sidebar)==="polls"),this.stateUpdate.emit({activeSidebar:this.pollsActive,sidebar:this.pollsActive?"polls":void 0,activeMoreMenu:!1,activeAI:!1}),$.activeSidebar=this.pollsActive,$.sidebar=this.pollsActive?"polls":void 0,$.activeMoreMenu=!1}render(){if(!this.canViewPolls)return;const t=this.t("polls");return d(O,{title:t},this.unreadPollsCount!==0&&!this.pollsActive&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,this.unreadPollsCount<=100?this.unreadPollsCount:"99+")),d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,class:{active:this.pollsActive},onClick:()=>this.togglePollsTab(),icon:this.iconPack.poll,label:t,variant:this.variant}))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"]}}};W6.style=Are;var Dre=Object.freeze({__proto__:null,dyte_polls_toggle:W6});const Mre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:block}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",q6=class{constructor(t){N(this,t),this.setIsRecording=e=>{this.isRecording=e==="RECORDING"},this.meeting=void 0,this.size=void 0,this.t=j(),this.iconPack=U,this.isRecording=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting)===null||t===void 0||t.recording.removeListener("recordingUpdate",this.updateRecordingStatus)}meetingChanged(t){t!=null&&(this.setIsRecording(t.recording.recordingState),this.updateRecordingStatus=e=>{this.setIsRecording(e)},t.recording.addListener("recordingUpdate",this.updateRecordingStatus))}render(){return d(O,null,this.isRecording&&d("div",{class:"indicator","aria-label":this.t("recording.indicator"),part:"indicator"},d("dyte-icon",{icon:this.iconPack.recording,"aria-hidden":!0,tabIndex:-1,part:"icon",iconPack:this.iconPack,t:this.t}),d("span",null,this.t("recording.label"))))}static get watchers(){return{meeting:["meetingChanged"]}}};q6.style=Mre;var Ore=Object.freeze({__proto__:null,dyte_recording_indicator:q6});const Lre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",G6=class{constructor(t){N(this,t),this.dyteAPIError=K(this,"dyteAPIError",7),this.toggleRecording=async()=>{var e,i;if(!(this.isLoading()||this.disabled))switch(this.recordingState){case"IDLE":try{await((e=this.meeting)===null||e===void 0?void 0:e.recording.start());return}catch{this.dyteAPIError.emit({trace:this.t("recording.start"),message:this.t("recording.error.start")})}return;case"RECORDING":try{await((i=this.meeting)===null||i===void 0?void 0:i.recording.stop());return}catch{this.dyteAPIError.emit({trace:this.t("recording.stop"),message:this.t("recording.error.stop")})}return;case"STARTING":case"STOPPING":default:return}},this.isLoading=()=>this.meeting==null||this.recordingState==="STARTING"||this.recordingState==="STOPPING",this.variant="button",this.meeting=void 0,this.t=j(),this.iconPack=U,this.size=void 0,this.disabled=!1,this.recordingState=void 0,this.canRecord=!1}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.recordingStateUpdateListener&&((t=this.meeting)===null||t===void 0||t.recording.removeListener("recordingUpdate",this.recordingStateUpdateListener))}meetingChanged(t){t!=null&&(this.recordingState=t.recording.recordingState,this.canRecord=t.self.permissions.canRecord===!0,this.recordingStateUpdateListener=e=>{this.recordingState=e},t.recording.addListener("recordingUpdate",this.recordingStateUpdateListener))}getLabel(){switch(this.recordingState){case"IDLE":return this.t("recording.idle");case"RECORDING":return this.t("recording.stop");case"STARTING":return this.t("recording.starting");case"STOPPING":return this.t("recording.stopping");default:return this.t("recording.loading")}}getIcon(){switch(this.recordingState){case"IDLE":return this.iconPack.recording;case"RECORDING":return this.iconPack.stop_recording;case"STARTING":case"STOPPING":default:return this.iconPack.recording}}render(){if(!!this.canRecord)return d(O,{title:this.t("Record")},d("dyte-controlbar-button",{size:this.size,iconPack:this.iconPack,t:this.t,onClick:this.toggleRecording,icon:this.getIcon(),isLoading:this.isLoading(),label:this.t(this.getLabel()),variant:this.variant,disabled:this.disabled}))}static get watchers(){return{meeting:["meetingChanged"]}}};G6.style=Lre;var Nre=Object.freeze({__proto__:null,dyte_recording_toggle:G6});const Ure=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}h3,p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}h3{margin-bottom:var(--dyte-space-4, 16px);font-size:20px;line-height:1.5}p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}p.empty-message{text-align:center;font-size:16px}label>input{margin-right:var(--dyte-space-2, 8px)}input{background-color:transparent;accent-color:rgb(var(--dyte-colors-brand-500, 33 96 253))}#allow-requests-label{display:flex;align-items:center;font-size:12px}#actions{margin-top:var(--dyte-space-4, 16px);display:flex;align-items:center}dyte-button{flex:1 1 0%;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px}#participants-list{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-56, 224px);overflow-y:auto}.participant{box-sizing:border-box;display:flex;height:var(--dyte-space-14, 56px);align-items:center;padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-700, 44 44 44))}.participant:last-child{border-bottom-width:var(--dyte-border-width-none, 0)}.participant{cursor:pointer;font-size:14px}.participant input{margin-right:var(--dyte-space-3, 12px)}dyte-avatar{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,J6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.acceptedRequestId=void 0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j()}disconnectedCallback(){}meetingChanged(t){var e,i,s,r,n;t!=null&&!Boolean(this.acceptedRequestId)&&Boolean((s=(i=(e=this.meeting)===null||e===void 0?void 0:e.remote)===null||i===void 0?void 0:i.active)===null||s===void 0?void 0:s.id)&&(this.acceptedRequestId=(n=(r=this.meeting.remote)===null||r===void 0?void 0:r.active)===null||n===void 0?void 0:n.id)}render(){var t,e,i,s;return Boolean((e=(t=this===null||this===void 0?void 0:this.meeting)===null||t===void 0?void 0:t.remote)===null||e===void 0?void 0:e.incomingRequests.toArray().length)?d(O,null,d("h3",null,this.t("remote_access.requests")),d("p",null,this.t("remote_access.allow")),d("div",{class:"scrollbar"},(s=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.remote)===null||s===void 0?void 0:s.incomingRequests.toArray().map(r=>{const n=this.meeting.participants.joined.get(r.remotePeerId);return d("label",{onClick:()=>{this.acceptedRequestId=r.id},class:"participant",htmlFor:n.id},d("input",{type:"radio",checked:this.acceptedRequestId===r.id,name:"remote-access-participant",value:r.id}),d("dyte-avatar",{participant:n,size:"sm"}),n.name)})),d("div",{id:"actions"},d("dyte-button",{disabled:!Boolean(this.acceptedRequestId),iconPack:this.iconPack,t:this.t,onClick:()=>{var r,n;(n=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||n===void 0||n.acceptControl(this.acceptedRequestId),this.stateUpdate.emit({activeRemoteAccessManager:!1})}},this.t("remote_access.grant")))):d(O,null,d("p",{class:"empty-message"},this.t("remote_access.empty")))}static get watchers(){return{meeting:["meetingChanged"]}}};J6.style=Ure;var $re=Object.freeze({__proto__:null,dyte_remote_access_manager:J6});const jre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",xT=()=>typeof navigator<"u"&&typeof navigator.mediaDevices<"u"&&"getDisplayMedia"in navigator.mediaDevices,K6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.dyteAPIError=K(this,"dyteAPIError",7),this.selfScreenShareListener=({screenShareEnabled:e})=>{this.screenShareEnabled=e;const i=this.screenShareCount+(e?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.screenShareListener=({screenShareEnabled:e})=>{const i=this.screenShareCount+(e?1:-1);this.screenShareCount=Math.max(i,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}})},this.participantLeftListener=({screenShareEnabled:e})=>{e&&(this.screenShareCount=Math.max(this.screenShareCount-1,0),this.getState(),this.meeting.__internals__.logger.info("dyteScreenShare::screenShareUpdate",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount}}}))},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.mediaPermissionUpdateListener=({kind:e,message:i})=>{if(e==="screenshare"&&(this.shareScreenPermission=i,this.getState(),i==="COULD_NOT_START"&&this.dyteAPIError.emit({trace:this.t("screenshare.permissions"),message:this.t("screenshare.error.unknown")}),this.hasPermissionError())){const s={enabled:!0,kind:"screenshare"};this.stateUpdate.emit({activePermissionsMessage:s}),$.activePermissionsMessage=s}},this.reachedMaxScreenShares=()=>this.maxScreenShareCount>0&&this.screenShareCount>=this.maxScreenShareCount,this.toggleScreenShare=async()=>{var e;if(this.screenShareState.disable)return;if(this.hasPermissionError()){const s={enabled:!0,kind:"screenshare"};return this.stateUpdate.emit({activePermissionsMessage:s}),$.activePermissionsMessage=s,!1}const i=(e=this.meeting)===null||e===void 0?void 0:e.self;if(this.screenShareEnabled){i.disableScreenShare();return}i==null||!this.canScreenShare||this.reachedMaxScreenShares()||this.hasPermissionError()||(this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!0}),await i.enableScreenShare(),this.screenShareState=Object.assign(Object.assign({},this.screenShareState),{disable:!1}),this.stateUpdate.emit({activeMoreMenu:!1}),$.activeMoreMenu=!1)},this.states=void 0,this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.maxScreenShareCount=-1,this.screenShareCount=0,this.screenShareEnabled=!1,this.canScreenShare=!1,this.shareScreenPermission="NOT_REQUESTED",this.screenShareState={tooltipLabel:this.t("screenshare.start"),label:this.t("screenshare.start"),icon:this.iconPack.share_screen_start,classList:{},showWarning:!1,disable:!1}}connectedCallback(){if(!xT()){Wp.error("[dyte-screenshare-toggle] Device does not support screensharing.");return}this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s,r,n;(t=this.meeting)===null||t===void 0||t.participants.joined.removeListener("screenShareUpdate",this.screenShareListener),(e=this.meeting)===null||e===void 0||e.participants.joined.removeListener("participantLeft",this.participantLeftListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("screenShareUpdate",this.selfScreenShareListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(n=(r=this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){if(t!=null){const{self:e,stage:i}=t;this.updateCanProduce(t),this.maxScreenShareCount=e.config.maxScreenShareCount,this.screenShareEnabled=e.screenShareEnabled;let s=0;for(const r of t.participants.joined.toArray())r.screenShareEnabled&&s++;this.screenShareCount=s,this.getState(),t.__internals__.logger.info("dyteScreenShare::initialise",{media:{screenshare:{enabled:this.screenShareEnabled,count:this.screenShareCount,maxAllowedCount:this.maxScreenShareCount}}}),t.participants.joined.addListener("screenShareUpdate",this.screenShareListener),t.participants.joined.addListener("participantLeft",this.participantLeftListener),e.addListener("screenShareUpdate",this.selfScreenShareListener),e.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),i==null||i.addListener("stageStatusUpdate",this.stageStatusListener)}}updateCanProduce(t){const{self:e,meta:i,stage:s}=t,r=e.permissions.canProduceScreenshare==="ALLOWED",n=i.viewType==="WEBINAR"||t.self.permissions.stageEnabled,a=i.viewType==="LIVESTREAM";this.canScreenShare=!1,r&&!a&&!n?this.canScreenShare=!0:(n||a)&&(r&&s.status!=="OFF_STAGE"&&s.status!=="REQUESTED_TO_JOIN_STAGE"&&(this.canScreenShare=!0),e.permissions.canProduceScreenshare==="CAN_REQUEST"&&(s.status==="ON_STAGE"||s.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canScreenShare=!0))}hasPermissionError(){return this.shareScreenPermission==="SYSTEM_DENIED"||this.shareScreenPermission==="DENIED"}getState(){let t="",e="",i="",s={};const r=this.hasPermissionError()&&!this.screenShareEnabled,n=this.reachedMaxScreenShares()&&!this.screenShareEnabled,a=this.shareScreenPermission==="COULD_NOT_START";this.screenShareEnabled&&!r?(e=this.t("screenshare.stop"),i=this.iconPack.share_screen_stop,s["red-icon"]=!0):(e=this.t("screenshare.start"),i=this.iconPack.share_screen_start),this.shareScreenPermission==="SYSTEM_DENIED"?(t=this.t("perm_sys_denied.screenshare"),s["red-icon"]=!0):this.shareScreenPermission==="DENIED"?(t=this.t("perm_denied.screenshare"),s["red-icon"]=!0):t=e,n&&(t=this.t("screenshare.error.max_count")),a&&(t=this.t("screenshare.error.unknown")),this.screenShareState={tooltipLabel:t,label:e,icon:i,classList:s,disable:r||n,showWarning:r||n||a}}render(){return!xT()||!this.canScreenShare?null:d(O,{title:this.screenShareState.label},d("dyte-tooltip",{placement:"top",kind:"block",label:this.screenShareState.tooltipLabel,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.screenShareState.label,icon:this.screenShareState.icon,class:this.screenShareState.classList,onClick:this.toggleScreenShare,disabled:this.screenShareState.disable,showWarning:this.screenShareState.showWarning})))}static get watchers(){return{meeting:["meetingChanged"]}}};K6.style=jre;var zre=Object.freeze({__proto__:null,dyte_screen_share_toggle:K6}),Us;(function(t){t.REQUEST_RECEIVED="REQUEST_RECEIVED",t.REQUEST_SENT="REQUEST_SENT",t.INCOMING_REQUEST_ACCEPTED="INCOMING_REQUEST_ACCEPTED",t.OUTGOING_REQUEST_ACCEPTED="OUTGOING_REQUEST_ACCEPTED",t.INCOMING_REQUEST_ENDED="INCOMING_REQUEST_ENDED",t.OUTGOING_REQUEST_ENDED="OUTGOING_REQUEST_ENDED"})(Us||(Us={}));const Fre=`:host {
  line-height: initial;
  font-family: var(--dyte-font-family, sans-serif);

  font-feature-settings: normal;
  font-variation-settings: normal;
}

p {
  margin: var(--dyte-space-0, 0px);
  padding: var(--dyte-space-0, 0px);
}


:host {
  height: 100%;
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: var(--dyte-border-radius-lg, 12px);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));
  container-type: inline-size;
  container-name: screentile;
}

::slotted(dyte-name-tag) {
  position: absolute;
  left: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
  opacity: 0.8;
}

#video-container {
  position: absolute;
  display: block;
  height: 100%;
  width: 100%;
}

#video-container .fit-in-container {
  -o-object-fit: fill;
     object-fit: fill;
}

video {
  height: 100%;
  width: 100%;
  -o-object-fit: contain;
     object-fit: contain;
}

:host([variant='gradient']) ::slotted(dyte-audio-visualizer) {
  position: absolute;
  top: var(--dyte-space-2, 8px);
  right: var(--dyte-space-2, 8px);
  border-radius: 9999px;
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));
  padding: var(--dyte-space-2, 8px);
}

:host([variant='gradient']) ::slotted(dyte-name-tag) {
  bottom: var(--dyte-space-0, 0px);
  left: var(--dyte-space-0, 0px);
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: transparent;
  background-image: linear-gradient(to top, var(--tw-gradient-stops));
  --tw-gradient-from: rgb(var(--dyte-colors-background-1000, 8 8 8));
  --tw-gradient-to: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  --tw-gradient-to: transparent;
}

:host([size='sm'][variant='gradient']) ::slotted(dyte-audio-visualizer) {
  height: var(--dyte-space-5, 20px);
  width: var(--dyte-space-5, 20px);
}

video.visible {
  animation: video-fadein 0.4s ease;
}

#controls {
  display: none;
  position: absolute;
  top: var(--dyte-space-3, 12px);
  right: var(--dyte-space-3, 12px);
  align-items: center;
  justify-content: flex-end;
  gap: var(--dyte-space-2, 8px);
}

:host(:hover) #controls, 
:host(:active) #controls, 
:host(:focus-visible) #controls {
  display: flex;
}

#full-screen-btn {
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));
}

/** For self view */

h3 {
  margin-top: var(--dyte-space-10, 40px);
  margin-bottom: var(--dyte-space-6, 24px);
  text-align: center;
  font-size: 20px;
  font-weight: 500;
}

:host([size='sm']) h3 {
  font-size: 16px;
}

#self-message {
  padding-left: var(--dyte-space-4, 16px);
  padding-right: var(--dyte-space-4, 16px);
}

:host(.isSelf) #self-view {
  flex: 1 1 0%;
}

:host(.isSelf) #video-container {
  position: static;
  aspect-ratio: auto;
  height: auto;
  width: 50%;
  max-width: var(--dyte-space-96, 384px);
  border-radius: var(--dyte-border-radius-md, 8px);
  transition: 0.6s ease;
}

:host(.isSelf) #video-container.expand {
  width: 60%;
  max-width: 100%;
}

.actions {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--dyte-space-2, 8px);
}

:host([size='sm'].isSelf) #video-container,
:host([size='md'].isSelf) #video-container,
:host([size='sm'].isSelf) #expand-btn,
:host([size='md'].isSelf) #expand-btn {
  /** Hide video, fullscreen buttons in sm and md breakpoints */
  display: none;
}

/** Remote control */

p {
  margin: var(--dyte-space-0, 0px);
  padding: var(--dyte-space-0, 0px);
}

.remote-control {
  z-index: 10;
  height: 100%;
  max-height: 100%;
  flex: 0 1 auto;
}

#remote-control-self {
  position: absolute;
  top: var(--dyte-space-0, 0px);
  left: 50%;
  z-index: 10;
  width: -moz-max-content;
  width: max-content;
  max-width: 100%;
  box-sizing: border-box;
  display: flex;
  height: var(--dyte-space-8, 32px);
  align-items: center;
  overflow: hidden;
  border-radius: var(--dyte-border-radius-sm, 4px);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-bg-opacity));
  font-size: 12px;
  color: rgb(var(--dyte-colors-text-1000, 255 255 255));
  transform: translateX(-50%);
}

#remote-control-self p {
  padding-left: var(--dyte-space-3, 12px);
  padding-right: var(--dyte-space-3, 12px);
  padding-top: var(--dyte-space-2, 8px);
  padding-bottom: var(--dyte-space-2, 8px);
}

#remote-control-self dyte-button {
  height: 100%;
  border-radius: var(--dyte-border-radius-none, 0);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity));
  font-size: 12px;
}

:host([size='sm']) #remote-control-self {
  height: auto;
  flex-direction: column;
}

:host([size='sm']) #remote-control-self dyte-button {
  width: 100%;
  padding-top: var(--dyte-space-1, 4px);
  padding-bottom: var(--dyte-space-1, 4px);
}

/** Name tag positions */

:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag) {
  left: auto;
  right: var(--dyte-space-3, 12px);
}

:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag) {
  left: auto;
  right: auto;
}

:host([name-tag-position='top-left']) ::slotted(dyte-name-tag) {
  top: var(--dyte-space-3, 12px);
  bottom: auto;
}

:host([name-tag-position='top-right']) ::slotted(dyte-name-tag) {
  top: var(--dyte-space-3, 12px);
  right: var(--dyte-space-3, 12px);
  left: auto;
  bottom: auto;
}

:host([name-tag-position='top-center']) ::slotted(dyte-name-tag) {
  left: auto;
  right: auto;
  bottom: auto;
  top: var(--dyte-space-3, 12px);
}

/** Keyframes */

@keyframes video-fadein {
  0% {
    opacity: 0;
    transform: scale(1.4) translateY(20px);
  }

  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

::slotted(dyte-network-indicator) {
  position: absolute;
  right: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
}

@container screentile (max-width: 400px) {
  ::slotted(dyte-name-tag) {
    transform-origin: 0 130%;
    transform: scale(0.7)
  }
}`,Q6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.fullScreenListener=()=>{this.isFullScreen=h6()},this.onRemoteUpdate=({payload:e,type:i})=>{var s,r;let n="";i===Us.INCOMING_REQUEST_ACCEPTED&&(n=`${this.meeting.participants.joined.get(e.request.remotePeerId).name} is controlling your screen.`),i===Us.OUTGOING_REQUEST_ACCEPTED&&(n=`You are controlling ${this.meeting.participants.joined.get(e.request.hostPeerId).name}'s screen.`),(i===Us.INCOMING_REQUEST_ENDED||i===Us.OUTGOING_REQUEST_ENDED)&&(n=""),i===Us.REQUEST_RECEIVED&&!Boolean((r=(s=this.meeting)===null||s===void 0?void 0:s.remote)===null||r===void 0?void 0:r.active)&&this.stateUpdate.emit({activeRemoteAccessManager:!0}),this.remoteControlInfo=n},this.onMouseEvent=e=>{var i,s;this.shouldSkipEventTrigger()||(e.stopPropagation(),e.preventDefault(),(s=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||s===void 0||s.mouseEvent(e,this.videoEl))},this.onKeyDown=e=>{var i,s;this.shouldSkipEventTrigger()||(s=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||s===void 0||s.keyboardEvent(e)},this.toggleFullScreen=()=>{this.isFullScreen?(p6(),this.isFullScreen=!1):(u6(this.host),this.isFullScreen=!0)},this.hideFullScreenButton=!1,this.nameTagPosition="bottom-left",this.participant=void 0,this.meeting=void 0,this.variant="solid",this.size=void 0,this.iconPack=U,this.t=j(),this.videoExpanded=!1,this.screenShareEnabled=!1,this.isFullScreen=!1,this.remoteControlInfo=void 0}participantScreenshareUpdate(t){t.id===this.participant.id&&this.screenShareListener(t)}connectedCallback(){window==null||window.addEventListener("fullscreenchange",this.fullScreenListener),window==null||window.addEventListener("webkitfullscreenchange",this.fullScreenListener)}componentDidLoad(){this.participantChanged(this.participant)}disconnectedCallback(){var t,e;const{self:i}=this.meeting;this.participant.id===i.id&&this.screenShareListener?this.participant.removeListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.removeListener("screenShareUpdate",this.participantScreenshareUpdate),(e=(t=this.meeting)===null||t===void 0?void 0:t.remote)===null||e===void 0||e.removeListener("remoteUpdate",this.onRemoteUpdate),window==null||window.removeEventListener("fullscreenchange",this.fullScreenListener),window==null||window.removeEventListener("webkitfullscreenchange",this.fullScreenListener)}participantChanged(t){var e,i,s,r,n;if(t!=null){const{self:a}=this.meeting;this.screenShareListener=({screenShareEnabled:o,screenShareTracks:c})=>{const u=o&&c.video!=null;if(Ci(()=>{this.screenShareEnabled=u}),u){const l=new MediaStream;l.addTrack(c.video),this.videoEl!=null&&(this.videoEl.srcObject=l,this.videoEl.play())}else this.videoEl!=null&&(this.videoEl.srcObject=void 0)},this.screenShareListener(t),Boolean((i=(e=this.meeting)===null||e===void 0?void 0:e.remote)===null||i===void 0?void 0:i.active)&&[this.meeting.remote.active.hostPeerId,this.meeting.remote.active.remotePeerId].includes(t==null?void 0:t.id)&&this.onRemoteUpdate({payload:{request:this.meeting.remote.active},type:((s=this.meeting.remote.active)===null||s===void 0?void 0:s.hostPeerId)===this.meeting.self.id?"INCOMING_REQUEST_ACCEPTED":"OUTGOING_REQUEST_ACCEPTED"}),t.id===a.id?t.addListener("screenShareUpdate",this.screenShareListener):this.meeting.participants.joined.addListener("screenShareUpdate",this.participantScreenshareUpdate.bind(this)),(n=(r=this.meeting)===null||r===void 0?void 0:r.remote)===null||n===void 0||n.addListener("remoteUpdate",this.onRemoteUpdate)}}shouldSkipEventTrigger(){var t,e,i;return this.meeting==null||this.participant==null?!0:!Boolean((t=this.meeting.remote)===null||t===void 0?void 0:t.active)||!Boolean(this.meeting.participants.joined.get((e=this.meeting.remote)===null||e===void 0?void 0:e.active.hostPeerId))||((i=this.meeting.remote)===null||i===void 0?void 0:i.active.hostPeerId)!=this.participant.id}render(){var t,e,i,s,r,n,a,o;const c=((t=this.participant)===null||t===void 0?void 0:t.id)===((e=this.meeting)===null||e===void 0?void 0:e.self.id),u=this.isFullScreen?this.t("full_screen.exit"):this.t("full_screen"),l=this.isFullScreen?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize;return d(O,{class:{isSelf:c}},Boolean(((s=(i=this.meeting)===null||i===void 0?void 0:i.remote)===null||s===void 0?void 0:s.active)&&this.remoteControlInfo)&&d("div",{id:"remote-control-self",key:"remote-control-self"},d("p",{class:"remote-control-message"},this.remoteControlInfo),d("dyte-button",{onClick:()=>{var h;return(h=this.meeting.remote)===null||h===void 0?void 0:h.endControl()},iconPack:this.iconPack,t:this.t},((n=(r=this.meeting.remote)===null||r===void 0?void 0:r.active)===null||n===void 0?void 0:n.hostPeerId)===this.meeting.self.id?"Revoke access":"Stop")),d("div",{key:"video-container",id:"video-container",class:{expand:this.videoExpanded},contentEditable:Boolean((a=this.meeting.remote)===null||a===void 0?void 0:a.active),onKeyDown:this.onKeyDown},d("video",{ref:h=>this.videoEl=h,class:{visible:this.screenShareEnabled,"fit-in-container":this.participant.supportsRemoteControl},playsInline:!0,autoPlay:!0,muted:!0,id:`screen-share-video-${this.participant.id}`,onMouseMove:this.onMouseEvent,onClick:this.onMouseEvent,onContextMenu:this.onMouseEvent})),d("div",{id:"controls",key:"controls"},!this.hideFullScreenButton&&!c&&g6()&&d("dyte-tooltip",{label:u,iconPack:this.iconPack,t:this.t},d("dyte-button",{id:"full-screen-btn",kind:"icon",onClick:this.toggleFullScreen,title:u,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:l,"aria-hidden":!0,tabIndex:-1,iconPack:this.iconPack,t:this.t}))),((o=this.participant)===null||o===void 0?void 0:o.supportsRemoteControl)===!0&&d("dyte-menu",{id:"menu",key:"menu",iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"secondary",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.more_vertical,iconPack:this.iconPack,t:this.t})),d("dyte-menu-list",{iconPack:this.iconPack,t:this.t},!c&&d("dyte-menu-item",{style:{cursor:this.participant.supportsRemoteControl?"pointer":"not-allowed"},iconPack:this.iconPack,t:this.t,onClick:()=>{var h,g;!((h=this.participant)===null||h===void 0)&&h.supportsRemoteControl&&((g=this.meeting.remote)===null||g===void 0||g.requestControl(this.participant.id))}},"Request remote control"),c&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>this.stateUpdate.emit({activeRemoteAccessManager:!0})},"Manage remote control requests")))),c&&d("div",{id:"self-message",key:"self-message"},d("h3",null,this.t("screenshare.shared")),d("div",{class:"actions"},this.meeting!=null&&d("dyte-button",{variant:"danger",onClick:()=>{this.meeting.self.disableScreenShare()},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.share_screen_stop,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("screenshare.stop")),d("dyte-button",{variant:"secondary",id:"expand-btn",iconPack:this.iconPack,t:this.t,onClick:()=>{this.videoExpanded=!this.videoExpanded}},d("dyte-icon",{icon:this.videoExpanded?this.iconPack.full_screen_minimize:this.iconPack.full_screen_maximize,slot:"start",iconPack:this.iconPack,t:this.t}),this.videoExpanded?this.t("screenshare.min_preview"):this.t("screenshare.max_preview")))),d("slot",null))}get host(){return Ts(this)}static get watchers(){return{participant:["participantChanged"]}}};Q6.style=Fre;var Vre=Object.freeze({__proto__:null,dyte_screenshare_view:Q6});const Bre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%;max-width:calc(100% - var(--dyte-space-56, 224px))}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;max-width:100%;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}",Y6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.keyPressListener=e=>{e.key==="Escape"&&this.close()},this.stageStatusListener=()=>{this.updateCanProduce(this.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceVideo=!1}connectedCallback(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}disconnectedCallback(){var t;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&((t=this.meeting)===null||t===void 0||t.meta.removeListener("poorConnection",this.poorConnectionListener)),this.meeting.stage.removeListener("stageStatusUpdate",this.stageStatusListener)}meetingChanged(t){t!=null&&(this.updateCanProduce(t),this.canProduceVideo?this.activeTab="video":this.activeTab="audio",this.poorConnectionListener=({score:e})=>{e<7?this.networkStatus="poor":e<4&&(this.networkStatus="poorest"),setTimeout(()=>{this.networkStatus="good"},5e3)},t.meta.addListener("poorConnection",this.poorConnectionListener),t.stage.addListener("stageStatusUpdate",this.stageStatusListener))}updateCanProduce(t){const{self:e,meta:i,stage:s}=t,r=e.permissions.canProduceVideo==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";if(!n&&!a)this.canProduceVideo=r;else{const o=e.permissions.canProduceVideo==="CAN_REQUEST";(r||o&&(s.status==="ON_STAGE"||s.status==="ACCEPTED_TO_JOIN_STAGE"))&&(this.canProduceVideo=!0)}}changeTab(t){this.activeTab=t,this.size==="sm"&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}close(){this.stateUpdate.emit({activeSettings:!1}),$.activeSettings=!1}render(){if(this.meeting==null)return null;const t={meeting:this.meeting,states:this.states||$,iconPack:this.iconPack,t:this.t};return d(O,null,d("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},d("header",null,d("h2",null,this.t("settings"))),d("button",{type:"button",class:{active:this.activeTab==="audio"},onClick:()=>this.changeTab("audio")},this.t("audio"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&d("button",{type:"button",class:{active:this.activeTab==="video"},onClick:()=>this.changeTab("video")},this.t("video"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),this.size==="sm"&&d("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),d("button",{type:"none",title:`Your network condition is ${this.networkStatus}`},this.t("connection"),d("div",{class:"right"},d("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),d("main",{class:{active:this.isMobileMainVisible},part:"main-content"},this.size==="sm"&&d("header",null,d("dyte-button",{kind:"icon",class:"back-btn",onClick:()=>this.isMobileMainVisible=!1,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),d("h2",null,this.t(this.activeTab==="audio"?"audio":"video"))),this.activeTab==="audio"&&d("dyte-settings-audio",Object.assign({},t)),this.activeTab==="video"&&d("dyte-settings-video",Object.assign({},t))))}static get watchers(){return{meeting:["meetingChanged"]}}};Y6.style=Bre;var Hre=Object.freeze({__proto__:null,dyte_settings:Y6});const Wre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",Z6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.variant="button",this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j()}toggleSettings(){var t;this.stateUpdate.emit({activeSettings:!(!((t=this.states)===null||t===void 0)&&t.activeSettings),activeMoreMenu:!1}),$.activeSettings=!$.activeSettings,$.activeMoreMenu=!1}render(){const t=this.t("settings");return d(O,{title:t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleSettings(),icon:this.iconPack.settings,label:t,variant:this.variant}))}};Z6.style=Wre;var qre=Object.freeze({__proto__:null,dyte_settings_toggle:Z6});const Gre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;padding:var(--dyte-space-4, 16px);height:100%;min-height:100%;width:100%;display:flex;place-items:center;justify-content:center;--dyte-controlbar-button-background-color:rgb(var(--dyte-colors-background-700, 44 44 44))}.container{width:100%;max-width:1080px;display:flex;align-items:center;justify-content:space-evenly}.metadata{width:100%;max-width:var(--dyte-space-80, 320px)}.label{display:flex;flex-direction:column;align-items:center}.label p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px}.name{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-6, 24px);text-align:center;font-size:28px;font-weight:500;letter-spacing:-0.025em;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}input{margin-bottom:var(--dyte-space-6, 24px);display:block;height:var(--dyte-space-10, 40px);width:100%;max-width:var(--dyte-space-80, 320px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));box-sizing:border-box;font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input::placeholder{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}input{border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}dyte-spinner{color:rgb(var(--dyte-colors-text-1000, 255 255 255));--icon-size:var(--dyte-space-8, 32px)}:host([size='sm']) .container,:host([size='md']) .container{height:100%;flex-direction:column;justify-content:space-evenly}dyte-camera-toggle{margin-left:var(--dyte-space-1\\.5, 6px)}dyte-participant-tile{height:auto;width:100%;max-width:var(--dyte-space-96, 384px)}",X6=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.join=async()=>{var e,i,s;((e=this.displayName)===null||e===void 0?void 0:e.trim())!==""&&!this.isJoining&&(this.isJoining=!0,(i=this.meeting)===null||i===void 0||i.self.setName(this.displayName),Yn.setItem("dyte-display-name",this.displayName),await((s=this.meeting)===null||s===void 0?void 0:s.joinRoom()))},this.meeting=void 0,this.states=$,this.size=void 0,this.config=Re,this.iconPack=U,this.t=j(),this.displayName=void 0,this.isJoining=!1,this.canEditName=!0}connectedCallback(){this.meetingChanged(this.meeting)}componentDidLoad(){var t;(t=this.inputEl)===null||t===void 0||t.focus()}meetingChanged(t){var e,i;t!=null&&(this.canEditName=(e=t.self.permissions.canEditDisplayName)!==null&&e!==void 0?e:!0,this.displayName=((i=t.self.name)===null||i===void 0?void 0:i.trim())||"",$.meeting="setup")}render(){var t,e,i,s;const r=((t=this.displayName)===null||t===void 0?void 0:t.trim())==="",n={meeting:this.meeting,config:this.config,states:this.states||$,size:this.size,iconPack:this.iconPack,t:this.t};return d(O,null,d("div",{class:"container"},d(je,{element:"dyte-participant-tile",defaults:n,props:{participant:(e=this.meeting)===null||e===void 0?void 0:e.self,size:"md"},childProps:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},deepProps:!0}),d("div",{class:"metadata"},((s=this.displayName)===null||s===void 0?void 0:s.trim())===""?d("div",{class:"name"},this.t("setup_screen.join_in_as")):d("div",{class:"label"},d("p",null,this.t("setup_screen.joining_as")),d("div",{class:"name"},Fs(this.displayName,20))),this.canEditName&&d("input",{placeholder:this.t("setup_screen.your_name"),value:this.displayName,autoFocus:!0,ref:a=>{this.inputEl=a},onInput:a=>{this.displayName=a.target.value},onKeyDown:a=>{a.key==="Enter"&&this.join()}}),d("dyte-button",{size:"lg",kind:"wide",onClick:this.join,disabled:r,iconPack:this.iconPack,t:this.t},this.isJoining?d("dyte-spinner",{iconPack:this.iconPack,t:this.t}):this.t("join")))))}static get watchers(){return{meeting:["meetingChanged"]}}};X6.style=Gre;var Jre=Object.freeze({__proto__:null,dyte_setup_screen:X6});const Kre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;max-width:var(--dyte-space-80, 320px);box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));border-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}:host([view='sidebar']){right:var(--dyte-space-2, 8px);overflow:clip;border-radius:var(--dyte-border-radius-lg, 12px);--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-900, 26 26 26));--tw-shadow:var(--tw-shadow-colored)}:host([view='full-screen']){top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%}:host(.floating){position:absolute !important;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);left:auto;z-index:50}.pinned-state{position:absolute;right:var(--dyte-space-1, 4px);display:inline-flex;width:var(--dyte-space-2, 8px);justify-content:flex-end}",eA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.getTabs=()=>this.meeting.self.config?this.enabledSections.filter(e=>this.meeting.self.config.controlBar.elements[e.id]):this.enabledSections,this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:this.defaultSection}),$.sidebar=this.currentTab},this.toggleFloating=()=>{this.isFloating=!this.isFloating,$.sidebarFloating=this.isFloating},this.enabledSections=[],this.defaultSection="chat",this.meeting=void 0,this.states=void 0,this.config=Re,this.iconPack=U,this.t=j(),this.size=void 0,this.view="sidebar",this.currentTab=this.defaultSection,this.isFloating=!1,this.enablePinning=!0}connectedCallback(){this.viewChanged(this.view),this.statesChanged(this.states),this.meetingChanged(this.meeting),Fl("sidebar",()=>this.statesChanged()),this.isFloating=($==null?void 0:$.sidebarFloating)||!1}disconnectedCallback(){var t,e;document.removeEventListener("keydown",this.keydownListener),(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.updateEnabledSections)}meetingChanged(t){var e,i;this.updateEnabledSections(t),(i=(e=this.meeting)===null||e===void 0?void 0:e.stage)===null||i===void 0||i.on("stageStatusUpdate",this.updateEnabledSections)}statesChanged(t){const e=t||$;e!=null&&e.sidebar&&(this.currentTab=e.sidebar)}viewChanged(t){t==="full-screen"?(this.enablePinning=!1,this.keydownListener=e=>{e.key==="Escape"&&this.close()},document.addEventListener("keydown",this.keydownListener)):this.enablePinning=!0}viewSection(t){this.currentTab=t,this.stateUpdate.emit({activeSidebar:!0,sidebar:this.currentTab}),$.activeSidebar=!0,$.sidebar=this.currentTab}updateEnabledSections(t=this.meeting){const e=[];F1(t)&&e.push({id:"chat",name:this.t("chat")}),V1(t)&&e.push({id:"polls",name:this.t("polls")}),B1(t)&&e.push({id:"participants",name:this.t("participants")}),H1(t)&&e.push({id:"plugins",name:this.t("plugins")}),this.enabledSections=e}render(){var t;const e={meeting:this.meeting,config:this.config,states:this.states||$,size:this.size,t:this.t,iconPack:this.iconPack};return((t=e.states)===null||t===void 0?void 0:t.activeSidebar)===!1||!this.currentTab?null:d(O,{class:this.enablePinning?this.isFloating?"floating":"":"floating"},d("dyte-sidebar-ui",{tabs:this.getTabs(),currentTab:this.currentTab,view:this.view,onTabChange:i=>{this.viewSection(i.detail)},onSidebarClose:this.close},this.enablePinning&&d("div",{class:"pinned-state",slot:"pinned-state"},d("dyte-button",{variant:"ghost",kind:"icon",onClick:this.toggleFloating,"aria-label":this.isFloating?this.t("pin"):this.t("unpin")},d("dyte-icon",{icon:this.isFloating?this.iconPack.pin:this.iconPack.pin_off}))),d("dyte-chat",Object.assign({},e,{slot:"chat"})),d("dyte-polls",Object.assign({},e,{slot:"polls"})),d("dyte-participants",Object.assign({},e,{slot:"participants"})),d("dyte-plugins",Object.assign({},e,{slot:"plugins"}))))}static get watchers(){return{meeting:["meetingChanged"],states:["statesChanged"],view:["viewChanged"]}}};eA.style=Kre;var Qre=Object.freeze({__proto__:null,dyte_sidebar:eA});const Yre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:block;height:100%;width:100%}",tA=class{constructor(t){N(this,t),this.setHostDimensions=()=>{const{clientWidth:e,clientHeight:i}=this.host;this.dimensions={width:e,height:i}},this.participants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Re,this.iconPack=U,this.t=j(),this.dimensions={width:0,height:0}}connectedCallback(){this.resizeObserver=new A4(this.setHostDimensions),this.resizeObserver.observe(this.host)}disconnectedCallback(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},{width:e,height:i,getPosition:s}=kse({dimensions:this.dimensions,count:this.participants.length,aspectRatio:this.aspectRatio,gap:this.gap});return d(O,null,this.participants.map((r,n)=>{const{top:a,left:o}=s(n);return d(je,{element:"dyte-participant-tile",defaults:t,props:{participant:r,style:{position:"absolute",top:`${a}px`,left:`${o}px`,width:`${e}px`,height:`${i}px`},key:r.id,"data-participant":r.id},childProps:{participant:r},deepProps:!0})}),d("slot",null))}get host(){return Ts(this)}};tA.style=Yre;var Zre=Object.freeze({__proto__:null,dyte_simple_grid:tA});const Xre=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%}main{flex:1 1 0%}.grid-width-sm{width:25%}.grid-width-md{width:50%}.grid-width-lg{width:66.666667%}:host([size='sm']),:host([size='md']){flex-direction:column}:host([size='md']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='md']) .grid-width-sm{height:25%}:host([size='md']) .grid-width-md{height:50%}:host([size='md']) .grid-width-lg{height:66.666667%}:host([size='sm']) aside{max-height:var(--dyte-space-96, 384px);width:100%;max-width:100%}:host([size='sm']) .grid-width-sm,:host([size='sm']) .grid-width-md,:host([size='sm']) .grid-width-lg{height:50%}:host([size='xl']) .grid-width-sm,:host([size='xl']) .grid-width-md,:host([size='xl']) .grid-width-lg{width:400px}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) aside{flex:2;max-width:100%;width:100%}",iA=class{constructor(t){N(this,t),this.getAdaptiveSize=e=>this.size==="sm"||e>3||this.size==="md"?"sm":"md",this.layout="row",this.participants=[],this.pinnedParticipants=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Re,this.iconPack=U,this.t=j(),this.gridSize=Nv}render(){const t={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t},e=this.participants.filter(i=>this.pinnedParticipants.some(s=>s.id!=i.id));return d(O,null,d("main",{part:"main"},d(je,{element:"dyte-simple-grid",defaults:t,props:{part:"main-grid",participants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(this.pinnedParticipants.length)}})),e.length>0&&d("aside",{part:"aside",class:this.gridSize.spotlight?`grid-width-${this.gridSize.spotlight}`:"grid-width-md"},d(je,{element:"dyte-simple-grid",defaults:t,props:{part:"aside-grid",participants:e,aspectRatio:this.aspectRatio,gap:this.gap,size:this.getAdaptiveSize(e.length)}})))}get host(){return Ts(this)}};iA.style=Xre;var ene=Object.freeze({__proto__:null,dyte_spotlight_grid:iA});const tne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;position:relative;overflow:hidden}",sA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.iconPack=U,this.t=j()}render(){return d(O,null,d("slot",null))}};sA.style=tne;var ine=Object.freeze({__proto__:null,dyte_stage:sA});const sne=t=>{var e,i,s,r,n,a;return(t.meta.viewType==="LIVESTREAM"||t.meta.viewType==="WEBINAR")&&(((i=(e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions)===null||i===void 0?void 0:i.canProduceAudio)==="ALLOWED"||((r=(s=t==null?void 0:t.self)===null||s===void 0?void 0:s.permissions)===null||r===void 0?void 0:r.canProduceScreenshare)==="ALLOWED"||((a=(n=t==null?void 0:t.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo)==="ALLOWED")},rne=t=>{var e,i,s,r,n,a,o,c,u,l;return(t.meta.viewType==="LIVESTREAM"||t.meta.viewType==="WEBINAR")&&(((i=(e=t==null?void 0:t.self)===null||e===void 0?void 0:e.permissions)===null||i===void 0?void 0:i.canProduceAudio)!=="NOT_ALLOWED"||((r=(s=t==null?void 0:t.self)===null||s===void 0?void 0:s.permissions)===null||r===void 0?void 0:r.canProduceScreenshare)!=="NOT_ALLOWED"||((a=(n=t==null?void 0:t.self)===null||n===void 0?void 0:n.permissions)===null||a===void 0?void 0:a.canProduceVideo)!=="NOT_ALLOWED"||((c=(o=t==null?void 0:t.self)===null||o===void 0?void 0:o.permissions)===null||c===void 0?void 0:c.canLivestream)||((l=(u=t==null?void 0:t.self)===null||u===void 0?void 0:u.permissions)===null||l===void 0?void 0:l.canLivestream))},nne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",rA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.stageCallback=async()=>{var e,i,s,r,n,a,o;const c=(e=this.meeting.stage)===null||e===void 0?void 0:e.status;c==="ON_STAGE"&&await((s=(i=this===null||this===void 0?void 0:this.meeting)===null||i===void 0?void 0:i.stage)===null||s===void 0?void 0:s.leave()),c==="OFF_STAGE"&&((n=(r=this===null||this===void 0?void 0:this.meeting)===null||r===void 0?void 0:r.stage)===null||n===void 0||n.requestAccess(),sne(this.meeting)&&this.stateUpdate.emit({activeJoinStage:!0})),c==="REQUESTED_TO_JOIN_STAGE"&&((o=(a=this===null||this===void 0?void 0:this.meeting)===null||a===void 0?void 0:a.stage)===null||o===void 0||o.cancelRequestAccess())},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.stageStatus="OFF_STAGE",this.state={label:"",disabled:!1,icon:""},this.t=j()}connectedCallback(){this.meetingChanged(this.meeting)}stageStatusHandler(t,e){this.stageStatus=e,e==="ACCEPTED_TO_JOIN_STAGE"&&(t.self.setupTracks({audio:!1,video:!1}),this.stateUpdate.emit({activeJoinStage:!0})),this.state=this.getState()}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",i=>this.stageStatusHandler(this.meeting,i))}meetingChanged(t){var e,i,s,r;t!=null&&(this.stageStatus=(e=t.stage)===null||e===void 0?void 0:e.status,this.stageStatusHandler(t,(i=t.stage)===null||i===void 0?void 0:i.status),(r=(s=this.meeting)===null||s===void 0?void 0:s.stage)===null||r===void 0||r.on("stageStatusUpdate",n=>this.stageStatusHandler(t,n)))}getState(){let t="",e="",i=!1;switch(this.stageStatus){case"ON_STAGE":{e=this.iconPack.leave_stage,t="Leave Stage",i=!1;break}case"ACCEPTED_TO_JOIN_STAGE":{e=this.iconPack.join_stage,t="Join Stage",i=!0;break}case"REQUESTED_TO_JOIN_STAGE":{e=this.iconPack.join_stage,t="Requested",i=!1;break}default:{e=this.iconPack.join_stage,t="Join Stage",i=!1;break}}return{label:t,disabled:i,icon:e}}render(){if(!!rne(this.meeting))return d(O,{title:this.state.label},d("dyte-tooltip",{placement:"top",kind:"block",label:this.state.label,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:this.state.label,icon:this.state.icon,onClick:this.stageCallback,disabled:this.state.disabled,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};rA.style=nne;var ane=Object.freeze({__proto__:null,dyte_stage_toggle:rA});const one=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}input{display:block;height:var(--dyte-space-10, 40px);padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-size:14px;border-width:var(--dyte-border-width-md, 2px);border-style:solid;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input:focus{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity))}input:disabled{cursor:not-allowed}",nA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.type="text",this.placeholder="",this.disabled=!1,this.iconPack=U,this.t=j()}connectedCallback(){this.stateUpdate.emit({abc:!1}),$.abc=!1}get value(){return this.input.value}render(){return d(O,null,d("input",{ref:t=>this.input=t,type:this.type,placeholder:this.placeholder,disabled:this.disabled}))}};nA.style=one;var cne=Object.freeze({__proto__:null,dyte_text_field:nA});const dne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.text{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow-wrap:break-word;font-size:14px;line-height:1.375}.text.emoji{font-size:24px}",aA=class{constructor(t){N(this,t),this.text=void 0,this.isMarkdown=!0}render(){return d("p",{class:{text:!0,emoji:$4(this.text)}},this.isMarkdown?this.text:d("dyte-markdown-view",{text:this.text}))}};aA.style=dne;var lne=Object.freeze({__proto__:null,dyte_text_message_view:aA});const une=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;width:100%;justify-content:center;z-index:50}dyte-transcript{margin-top:var(--dyte-space-2, 8px)}",oA=class{constructor(t){N(this,t),this.onTranscript=e=>{e.transcript&&this.add(e)},this.meeting=void 0,this.states=void 0,this.config=Re,this.t=j(),this.transcripts=[]}connectedCallback(){this.meetingChanged(this.meeting)}clearListeners(t){this.onTranscript&&t.meta.removeListener("transcript",this.onTranscript),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){this.meeting!=null&&this.clearListeners(this.meeting)}meetingChanged(t,e){clearTimeout(this.disconnectTimeout),e!==void 0&&this.clearListeners(e),t!=null&&this.meeting.meta.addListener("transcript",this.onTranscript)}add(t){this.transcripts.splice(0,this.transcripts.length-2),this.transcripts=[...this.transcripts,t]}remove(t){this.transcripts=this.transcripts.filter(e=>e.id!==t)}handleDismiss(t){t.stopPropagation();const e=t.detail,i=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{Ci(()=>{this.remove(e)})},400)}render(){var t;return d(O,null,(t=this.transcripts)===null||t===void 0?void 0:t.map(e=>d("dyte-transcript",{key:e.id,"data-id":e.id,transcript:e,onDyteTranscriptDismiss:i=>this.handleDismiss(i),t:this.t})))}get host(){return Ts(this)}static get watchers(){return{meeting:["meetingChanged"]}}};oA.style=une;var pne=Object.freeze({__proto__:null,dyte_transcripts:oA});const hne=class{constructor(t){N(this,t),this.meeting=void 0,this.size=void 0,this.config=Re,this.t=j(),this.iconPackUrl=void 0,this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.joinRoom=!0,this.isReady=!1,this.iconPack=U}async iconPackUrlChanged(t){this.iconPack=await k4(t)}async meetingChanged(t){var e;if(!!t){if(!t.self.roomJoined&&this.joinRoom&&(this.isReady=!1,await t.joinRoom(),this.isReady=!0),this.loadConfigFromPreset&&t.self.config!=null){const i=t.self.config,{config:s}=_4(i,t);this.config===Re&&(this.config=Object.assign(Object.assign(Object.assign({},Re),s),{designTokens:Object.assign(Object.assign({},Re.designTokens),s.designTokens)}))}this.applyDesignSystem&&((e=this.config)===null||e===void 0?void 0:e.designTokens)!=null&&typeof document<"u"&&M1(document.documentElement,this.config.designTokens),Array.from(this.hostEl.children).filter(i=>i.tagName.startsWith("DYTE-")).forEach(i=>{i.meeting=t,i.config=this.config,i.size=this.size,i.iconPack=this.iconPack,i.t=this.t})}}connectedCallback(){this.resizeObserver=new ResizeObserver(()=>this.handleResize()),this.resizeObserver.observe(this.hostEl),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl)}handleResize(){this.size=S4(this.hostEl.clientWidth)}render(){return this.isReady?d("slot",null):null}get hostEl(){return Ts(this)}static get watchers(){return{iconPackUrl:["iconPackUrlChanged"],meeting:["meetingChanged"]}}};var gne=Object.freeze({__proto__:null,dyte_ui_provider:hne});const mne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.centered{display:flex;flex-direction:column;align-items:center}dyte-logo{margin-bottom:var(--dyte-space-8, 32px);height:var(--dyte-space-12, 48px)}p{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}",cA=class{constructor(t){N(this,t),this.meeting=void 0,this.config=Re,this.iconPack=U,this.t=j()}render(){return d(O,null,d("slot",null,d("div",{class:"centered",part:"content"},d("dyte-logo",{meeting:this.meeting,config:this.config,part:"logo",t:this.t}),d("p",null,this.t("waitlist.body_text")))))}};cA.style=mne;var fne=Object.freeze({__proto__:null,dyte_waiting_screen:cA});const vne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",dA=class{constructor(t){N(this,t),this.requestToJoinAcceptedListener=()=>{this.stageStatus="ACCEPTED"},this.requestToJoinRejectedListener=()=>{this.stageStatus="DENIED"},this.stageJoinedListener=()=>{this.stageStatus="ACCEPTED"},this.removeFromStageListener=()=>{this.stageStatus="NOT_REQUESTED"},this.selfStageLeftListener=()=>{this.stageStatus="NOT_REQUESTED"},this.requestStageListener=()=>{this.stageStatus="PENDING"},this.stageCallback=async()=>{var e;const i=(e=this.meeting)===null||e===void 0?void 0:e.self;if(!(i==null||!this.requestProduce&&!this.canPresent)){if(this.stageStatus==="PENDING"){await i.withdrawRequestToJoinStage();return}if(this.stageStatus==="ACCEPTED"){await i.leaveStage(),this.stageStatus="NOT_REQUESTED";return}this.canPresent?(await i.joinStage(),this.stageStatus="ACCEPTED"):(await i.requestToJoinStage(),this.stageStatus="PENDING")}},this.variant="button",this.meeting=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.stageStatus="NOT_REQUESTED",this.canPresent=!1,this.requestProduce=!1}connectedCallback(){this.meetingChanged(this.meeting),this.meeting.self.addListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.addListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.addListener("stageJoined",this.stageJoinedListener),this.meeting.self.addListener("removedFromStage",this.removeFromStageListener),this.meeting.self.addListener("stageLeft",this.selfStageLeftListener),this.meeting.self.addListener("peerRequestToJoinStage",this.requestStageListener)}disconnectedCallback(){this.meeting.self.removeListener("joinStageRequestAccepted",this.requestToJoinAcceptedListener),this.meeting.self.removeListener("joinStageRequestRejected",this.requestToJoinRejectedListener),this.meeting.self.removeListener("removedFromStage",this.removeFromStageListener),this.meeting.self.removeListener("stageJoined",this.stageJoinedListener),this.meeting.self.removeListener("stageLeft",this.selfStageLeftListener),this.meeting.self.removeListener("peerRequestToJoinStage",this.requestStageListener)}meetingChanged(t){t!=null&&(this.requestProduce=t.self.permissions.requestProduce,this.canPresent=t.self.permissions.canPresent,(this.canPresent||t.self.webinarStageStatus==="ON_STAGE")&&(this.stageStatus="ACCEPTED"))}getState(){let t="",e="",i="",s={},r=!1;return this.stageStatus==="PENDING"?(e=this.t("stage_request.cancel_request"),t=this.t("stage_request.pending_tip"),i=this.iconPack.leave_stage,s["red-icon"]=!1):this.stageStatus==="ACCEPTED"?(e=this.t("stage_request.leave_stage"),t=this.t("stage_request.leave_tip"),i=this.iconPack.leave_stage,s["red-icon"]=!1,r=!1):this.stageStatus==="DENIED"?(e=this.t("stage_request.denied"),t=this.t("stage_request.denied_tip"),i=this.iconPack.join_stage,s["red-icon"]=!1,r=!0):(e=this.t("stage_request.request"),this.canPresent?t=this.t("stage_request.request"):t=this.t("stage_request.request_tip"),i=this.iconPack.join_stage,r=!1),{tooltipLabel:t,label:e,icon:i,classList:s,disabled:r}}render(){if(!this.requestProduce&&!this.canPresent||this.meeting.self.config.viewType!=="WEBINAR")return null;const{tooltipLabel:t,label:e,icon:i,classList:s,disabled:r}=this.getState();return d(O,{title:e},d("dyte-tooltip",{placement:"top",kind:"block",label:t,delay:600,part:"tooltip",iconPack:this.iconPack,t:this.t},d("dyte-controlbar-button",{part:"controlbar-button",size:this.size,iconPack:this.iconPack,t:this.t,variant:this.variant,label:e,icon:i,class:s,onClick:this.stageCallback,disabled:r,showWarning:!1})))}static get watchers(){return{meeting:["meetingChanged"]}}};dA.style=vne;var yne=Object.freeze({__proto__:null,dyte_webinar_stage_toggle:dA});const bne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;height:100%;width:100%;box-sizing:border-box}.content{position:relative;display:flex;height:100%;width:100%;flex-direction:column;overflow-y:auto}.waitlist-area{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.listening-title{text-align:center;margin-top:var(--dyte-space-5, 20px);margin-bottom:var(--dyte-space-4, 16px)}.waitlist-grid{flex:1 1 0%}.grid{box-sizing:border-box;flex:1 1 0%;gap:var(--dyte-space-6, 24px);display:flex;align-content:center;justify-content:center;flex-wrap:wrap}:host([size='md']) .grid{gap:var(--dyte-space-4, 16px)}:host([size='sm']) .grid{gap:var(--dyte-space-3, 12px)}dyte-audio-tile{aspect-ratio:1 / 1;flex:none;width:calc(20%);max-width:var(--dyte-space-48, 192px);transition:all 0.3s}:host([size='md']) dyte-audio-tile{width:100%;max-width:var(--dyte-space-36, 144px)}:host([size='sm']) dyte-audio-tile{width:100%;max-width:var(--dyte-space-24, 96px)}`,lA=class{constructor(t){N(this,t),this.onParticipantListUpdate=()=>{if(!this.meeting)return;let e=this.meeting.participants.active.toArray();this.hideSelf||(e=[...e,this.meeting.self]);let i=this.meeting.participants.joined.toArray().filter(s=>!e.some(r=>r.id===s.id));this.activeParticipants=e,this.onStageParticipants=i},this.meeting=void 0,this.config=void 0,this.states=void 0,this.iconPack=U,this.size=void 0,this.t=j(),this.hideSelf=!1,this.activeParticipants=[],this.onStageParticipants=[],this.offStageParticipants=[]}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){!t||t.self.config.viewType!=="AUDIO_ROOM"||(this.onParticipantListUpdate(),t.participants.active.addListener("participantJoined",this.onParticipantListUpdate),t.participants.active.addListener("participantLeft",this.onParticipantListUpdate),t.participants.joined.addListener("participantJoined",this.onParticipantListUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantListUpdate))}disconnectedCallback(){this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.meeting.participants.active.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.active.removeListener("participantLeft",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantJoined",this.onParticipantListUpdate),this.meeting.participants.joined.removeListener("participantLeft",this.onParticipantListUpdate)}renderGrid(t=[]){const e={meeting:this.meeting,size:this.size,config:this.config,t:this.t,iconPack:this.iconPack,states:this.states};return t.map(i=>d(je,{element:"dyte-audio-tile",defaults:e,props:{key:i.id,participant:i},childProps:{participant:i},deepProps:!0}))}render(){const t=this.activeParticipants.concat(this.onStageParticipants);return d(O,null,d("div",{class:"content scrollbar"},d("div",{class:"stage grid"},this.renderGrid(t)),this.offStageParticipants.length>0&&d("div",{class:"waitlist-area"},d("div",{class:"listening-title"},this.offStageParticipants.length," ",this.t("grid.listening")),d("div",{class:"waitlist-grid grid"},this.renderGrid(this.offStageParticipants)))),d("slot",null))}get host(){return Ts(this)}static get watchers(){return{meeting:["meetingChanged"]}}};lA.style=bne;const wne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;overflow:hidden;flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition:0.4s}dyte-participant-tile{aspect-ratio:initial;box-sizing:border-box}.webinar-stage{box-sizing:border-box;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}.livestream-stage{box-sizing:border-box;margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;flex-grow:1;align-content:center;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);text-align:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}dyte-viewer-count{display:none}.ctr{display:flex;flex-direction:column;align-items:center}.message{font-size:16px;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.description{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);font-size:14px}dyte-livestream-indicator{display:none}@media only screen and (max-device-height: 480px) and (orientation: landscape){dyte-viewer-count[variant='embedded']{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}dyte-livestream-indicator{position:absolute;top:var(--dyte-space-0, 0px);left:var(--dyte-space-2, 8px);z-index:20;margin-top:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0, 0px);display:flex}}",uA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.hideSelf=!1,this.networkUpdateListener=({event:e})=>{this.connected=e==="connected"},this.meetingDisconnectedListener=()=>{this.networkUpdateListener({event:"disconnected"})},this.meetingConnectedListener=()=>{this.networkUpdateListener({event:"connected"})},this.filterParticipants=e=>{var i;if(this.overrides&&((i=this.overrides)===null||i===void 0?void 0:i.videoUnsubscribed)){const s=this.overrides.videoUnsubscribed.preset;s.length>0&&(e=e.filter(r=>!s.some(a=>r.presetName===void 0?!1:r.presetName.match(a))))}return e},this.onViewModeChanged=()=>{this.meeting!=null&&this.updateActiveParticipants()},this.onParticipantJoined=e=>{this.meeting!=null&&(this.participants.some(i=>i.id===e.id)||(this.participants=this.filterParticipants([e,...this.participants])),e.isPinned&&!this.pinnedParticipants.some(i=>i.id===e.id)&&(this.pinnedParticipants=this.pinnedParticipants.concat([e])),this.updateWebinarStage())},this.onParticipantLeft=e=>{this.participants=this.participants.filter(i=>i.id!==e.id),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter(i=>!this.participants.find(s=>s.id===i.id))),this.participants=this.filterParticipants(this.participants),this.pinnedParticipants=this.pinnedParticipants.filter(i=>i.id!==e.id),e.screenShareEnabled&&this.removeScreenShare(e),this.updateWebinarStage()},this.stageStatusListener=()=>{this.updateActiveParticipants(),this.showLiveStreamPlayer=Sl(this.meeting),this.meeting.stage.status!=="ON_STAGE"&&this.removeScreenShare(this.meeting.self)},this.peerStageStatusListener=e=>{this.updateActiveParticipants(),this.meeting.stage.status!=="ON_STAGE"&&(this.removePinned(e),this.removeScreenShare(e))},this.onScreenShareUpdate=e=>{e.screenShareEnabled?this.addScreenShare(e):this.removeScreenShare(e)},this.onSelfScreenShareUpdate=({screenShareEnabled:e})=>{e?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(e,{active:i})=>{i?this.plugins.some(s=>s.id===e.id)||(this.plugins=[...this.plugins,e]):this.plugins=this.plugins.filter(s=>s.id!==e.id)},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()},this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.showWebinarStage=!1,this.showLiveStreamPlayer=!1,this.canCurrentPeerHost=!1,this.connected=!0,this.pipSupported=!1,this.pipEnabled=!1,this.layout="row",this.aspectRatio="16:9",this.meeting=void 0,this.gap=8,this.size=void 0,this.states=$,this.config=Re,this.iconPack=U,this.t=j(),this.gridSize=Nv,this.overrides={}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectMeeting(t){var e;if(t==null)return;this.participants=[],this.plugins=[];const{self:i,participants:s,plugins:r,meta:n}=t;s.active.removeListener("participantJoined",this.onParticipantJoined),s.active.removeListener("participantLeft",this.onParticipantLeft),s.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),s.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener),i.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),r==null||r.all.removeListener("stateUpdate",this.onPluginStateUpdate),s.pinned.removeListener("participantJoined",this.onParticipantPinned),s.pinned.removeListener("participantLeft",this.onParticipantUnpinned),i.removeListener("pinned",this.onParticipantPinned),i.removeListener("unpinned",this.onParticipantUnpinned),s.removeListener("viewModeChanged",this.onViewModeChanged),n.removeListener("disconnected",this.meetingDisconnectedListener),n.removeListener("connected",this.meetingConnectedListener),(e=t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStatusListener)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}overridesChanged(t){this.updateActiveParticipants()}screenShareParticipantsChanged(t){const e=t.length>0;this.stateUpdate.emit({activeScreenShare:e}),$.activeScreenShare=e}pluginsChanged(t){const e=t.length>0;this.stateUpdate.emit({activePlugin:e}),$.activePlugin=e}pinnedParticipantsChanged(t){const e=t.length>0;this.stateUpdate.emit({activeSpotlight:e}),$.activeSpotlight=e}updateActiveParticipants(){var t,e;const{self:i,participants:s,stage:r}=this.meeting,n=((t=i.config)===null||t===void 0?void 0:t.viewType)==="WEBINAR"&&r.status!=="ON_STAGE",a=(e=i.permissions)===null||e===void 0?void 0:e.isRecorder;this.hideSelf=n||a||i.permissions.hiddenParticipant,this.participants=this.filterParticipants([...s.active.toArray().filter(o=>o.id!==i.id),...s.viewMode==="ACTIVE_GRID"&&!i.isPinned&&!this.hideSelf?[i]:[]]),this.pinnedParticipants=[...s.pinned.toArray().filter(o=>o.id!==i.id),...i.isPinned&&!this.hideSelf?[i]:[]],this.screenShareParticipants=s.joined.toArray().filter(o=>o.screenShareEnabled),i.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([i])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&this.meeting.meta.viewType==="WEBINAR"?this.showWebinarStage=this.participants.length===0&&this.pinnedParticipants.length===0:this.showWebinarStage=!1}meetingChanged(t,e){var i,s,r;if(e!==null&&this.disconnectMeeting(e),t!=null){const{self:n,participants:a,plugins:o,meta:c,stage:u}=t,{config:l,permissions:h}=n,g=this.meeting.stage.status!=="ON_STAGE",m=h==null?void 0:h.isRecorder;this.hideSelf=g||m||h.hiddenParticipant,this.participants=this.filterParticipants([...a.active.toArray(),...!n.isPinned&&!this.hideSelf?[n]:[]]),this.pinnedParticipants=[...a.pinned.toArray(),...n.isPinned&&!this.hideSelf?[n]:[]],this.screenShareParticipants=a.joined.toArray().filter(f=>f.screenShareEnabled),this.plugins=(o==null?void 0:o.active.toArray())||[],(l==null?void 0:l.viewType)==="WEBINAR"&&(this.canCurrentPeerHost=h.acceptPresentRequests||h.canPresent,this.updateWebinarStage()),this.pipSupported=this.meeting.participants.pip.isSupported()&&((i=t.self.config)===null||i===void 0?void 0:i.pipMode),this.pipSupported&&this.meeting.participants.pip.init(),a.active.addListener("participantJoined",this.onParticipantJoined),a.active.addListener("participantLeft",this.onParticipantLeft),a.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),(s=a==null?void 0:a.joined)===null||s===void 0||s.on("stageStatusUpdate",this.peerStageStatusListener),n.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),o==null||o.all.addListener("stateUpdate",this.onPluginStateUpdate),a.pinned.addListener("participantJoined",this.onParticipantPinned),a.pinned.addListener("participantLeft",this.onParticipantUnpinned),n.addListener("pinned",this.onParticipantPinned),n.addListener("unpinned",this.onParticipantUnpinned),c.addListener("disconnected",this.meetingDisconnectedListener),c.addListener("connected",this.meetingConnectedListener),u==null||u.addListener("stageStatusUpdate",this.stageStatusListener.bind(this)),a.addListener("viewModeChanged",this.onViewModeChanged),!((r=t.stage)===null||r===void 0)&&r.status&&this.stageStatusListener()}}addScreenShare(t){this.screenShareParticipants.some(e=>e.id===t.id)||(this.screenShareParticipants=[...this.screenShareParticipants,t])}removeScreenShare(t){this.screenShareParticipants=this.screenShareParticipants.filter(e=>e.id!==t.id)}removePinned(t){this.pinnedParticipants=this.pinnedParticipants.filter(e=>e.id!==t.id)}render(){const t={meeting:this.meeting,size:this.size,states:this.states||$,config:this.config,iconPack:this.iconPack,t:this.t};return!this.connected&&this.hideSelf?d("div",{class:"webinar-stage"},d("div",{class:"center"},d("h2",null,this.t("stage.reconnecting")))):this.showWebinarStage?d(O,null,d("div",{class:"webinar-stage"},d("div",{class:"center"},this.canCurrentPeerHost&&d("div",{class:"ctr",part:"container"},d("p",{class:"message",part:"message"},this.t("stage.empty_host")),d("span",{class:"description",part:"description"},this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&d("div",{class:"ctr",part:"container"},d("p",{class:"message",part:"message"},this.t("stage.empty_viewer")))))):this.showLiveStreamPlayer?d(O,null,d("dyte-livestream-player",{meeting:this.meeting,size:this.size}),d("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),d("dyte-viewer-count",{meeting:this.meeting,variant:"embedded",t:this.t})):d(O,null,d(je,{element:"dyte-grid",defaults:t,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap,layout:this.layout,gridSize:this.gridSize},onlyChildren:!0}),d("dyte-livestream-indicator",{meeting:this.meeting,size:"sm",t:this.t}),d("dyte-viewer-count",{meeting:this.meeting,variant:"embedded"}))}static get watchers(){return{overrides:["overridesChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};uA.style=wne;var _ne=Object.freeze({__proto__:null,dyte_audio_grid:lA,dyte_video_grid:uA});const kne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@keyframes bg-glow{25%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}50%{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}75%{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}}.glowing-card{animation:bg-glow 0.8s}.selector-mode,.assign-mode{display:flex;flex-direction:column;align-items:center;padding:var(--dyte-space-2, 8px);cursor:pointer}.selector:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.show-on-hover{display:none}.header{width:100%;display:flex;align-items:center}.header dyte-icon{margin-left:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);cursor:pointer}.header .danger{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.header .hide{display:none}.header .rooms-container{display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:flex-end}.header input{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));max-width:var(--dyte-space-36, 144px);font-size:14px;font-weight:500;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.header input:disabled{overflow-x:visible;border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.header input:invalid{border-bottom-width:var(--dyte-border-width-sm, 1px);border-style:dashed;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}.header input.editing-enabled{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.header .participant-count{display:flex;align-items:center;font-size:14px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.header .participant-count dyte-icon{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.header .assign-button{height:var(--dyte-space-6, 24px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.header .assign-button:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-list{display:grid;flex-grow:1;grid-template-columns:repeat(2, minmax(0, 1fr));gap:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);width:100%;border-radius:var(--dyte-border-radius-sm, 4px)}.participant-list::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px)}.participant-list::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-list::-webkit-scrollbar-track{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-right:var(--dyte-space-2, 8px);height:-moz-fit-content;height:fit-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.participant-item:hover{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.selector-mode:hover .show-on-hover{display:flex}.message-container{margin:var(--dyte-space-0, 0px);display:flex;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.message-container p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-20, 80px);display:flex;width:100%;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));border-style:dashed;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity))}.message-container p:hover{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}.message-container .drop-zone-active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.25)}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.show-on-hover{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);display:none}:host(:hover) .show-on-hover{display:flex}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}",ET=3,pA=class{constructor(t){N(this,t),this.onParticipantsAdd=K(this,"participantsAdd",7),this.onParticipantDelete=K(this,"participantDelete",7),this.onRoomJoin=K(this,"roomJoin",7),this.deleteRoom=K(this,"delete",7),this.updateRoom=K(this,"update",7),this.reset=()=>{this.editingTitleRoomId=null,this.newTitle=null},this.onEditClick=()=>{if(this.editingTitleRoomId){if(this.newTitle.length<ET)return;this.roomTitle=this.newTitle,this.updateRoom.emit({title:this.newTitle,id:this.editingTitleRoomId}),this.glowCard(),this.reset()}else this.editingTitleRoomId=this.room.id,Ci(()=>{this.inputTextEl.focus(),this.inputTextEl.select()})},this.onDrop=e=>{e.currentTarget instanceof HTMLParagraphElement&&(e.currentTarget.classList.remove("drop-zone-active"),this.onAssign())},this.onDragOver=e=>{e.currentTarget instanceof HTMLParagraphElement&&(e.currentTarget.classList.add("drop-zone-active"),e.preventDefault())},this.meeting=void 0,this.assigningParticipants=void 0,this.mode=void 0,this.states=void 0,this.allowDelete=!0,this.iconPack=U,this.t=j(),this.isDragMode=!1,this.room=void 0,this.defaultExpanded=!1,this.editingTitleRoomId=null,this.newTitle=null,this.showExpandedCard=!1,this.glowingCard=!1}connectedCallback(){var t;this.allParticipants=i4(this.meeting),this.permissions=this.meeting.self.permissions.connectedMeetings,this.showExpandedCard=this.defaultExpanded,this.roomTitle=this.room.isParent?this.t("breakout_rooms.main_room"):(t=this.room)===null||t===void 0?void 0:t.title,this.canEditMeetingTitle=this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&!this.meeting.connectedMeetings.isActive}onDragLeave(t){t.currentTarget instanceof HTMLParagraphElement&&t.currentTarget.classList.remove("drop-zone-active")}getAssignmentHint(){if(this.assigningParticipants&&this.isDragMode)return this.t("breakout_rooms.drag_drop_participants");if(this.assigningParticipants)return this.t("breakout_rooms.click_drop_participants");if(this.room.participants.length===0)return this.t("breakout_rooms.none_assigned")}toggleCardDisplay(){this.showExpandedCard=!this.showExpandedCard}glowCard(){this.glowingCard=!0,setTimeout(()=>{this.glowingCard=!1},2e3)}onAssign(){this.onParticipantsAdd.emit(),this.glowCard()}onJoin(){this.onRoomJoin.emit()}onTitleChanged(t){t.key==="Enter"&&(this.newTitle=t.target.value,this.onEditClick())}renderPeer(t){const{displayPictureUrl:e}=this.allParticipants.find(s=>Qt(s)===Qt(t)),i=cr(t.displayName||"");return d("div",{class:"peer-ui-container"},d("dyte-avatar",{participant:{name:i,picture:e},size:"sm"}),d("p",{class:"name",title:i},Fs(i,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}renderExpandedCardMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&!!this.getAssignmentHint()&&!!this.permissions.canAlterConnectedMeetings)return d("div",{class:"message-container"},d("p",{class:{"compact-height":this.room.participants.length!==0},onClick:()=>this.onAssign(),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.getAssignmentHint()))}renderParticipantsMaybe(){if(!!this.showExpandedCard&&!this.room.isParent&&this.room.participants.length!==0)return d("div",{class:"participant-list",onClick:()=>{this.onAssign()}},this.room.participants.map(t=>d("div",{class:"participant-item",role:"listitem",key:t.id},this.renderPeer(t),this.permissions.canAlterConnectedMeetings&&d("dyte-icon",{class:"show-on-hover",icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t,onClick:()=>{this.onParticipantDelete.emit(t)}}))))}render(){var t,e,i;return d(O,null,d("div",{class:{"assign-mode":this.assigningParticipants,"selector-mode":!this.assigningParticipants,"glowing-card":this.glowingCard}},d("div",{class:"header"},d("input",{ref:s=>this.inputTextEl=s,placeholder:this.t("breakout_rooms.room_name"),disabled:this.editingTitleRoomId!==this.room.id,value:this.roomTitle,minlength:ET,onChange:s=>{this.newTitle=s.target.value},onKeyPress:s=>this.onTitleChanged(s),class:{"editing-enabled":this.editingTitleRoomId===this.room.id},style:{width:`${this.roomTitle.length+1}ch`}}),this.editingTitleRoomId!==this.room.id&&d("span",{class:"participant-count"},"(",d("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),(i=(e=(t=this.room)===null||t===void 0?void 0:t.participants)===null||e===void 0?void 0:e.length)!==null&&i!==void 0?i:"0",")"),this.canEditMeetingTitle&&d("dyte-tooltip",{label:this.editingTitleRoomId===this.room.id?this.t("breakout_rooms.save_room_name"):this.t("breakout_rooms.edit_room_name"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.editingTitleRoomId===this.room.id?this.iconPack.checkmark:this.iconPack.edit,iconPack:this.iconPack,t:this.t,class:"show-on-hover",onClick:this.onEditClick})),d("div",{class:"rooms-container"},this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&this.allowDelete&&d("dyte-tooltip",{label:this.t("breakout_rooms.delete"),class:"danger",iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.delete,class:"show-on-hover",iconPack:this.iconPack,t:this.t,onClick:()=>{this.deleteRoom.emit()}})),this.assigningParticipants&&this.permissions.canAlterConnectedMeetings&&!this.room.isParent&&d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",onClick:()=>this.onAssign()},this.t("breakout_rooms.assign")),this.mode==="edit"&&!this.assigningParticipants&&this.permissions.canSwitchConnectedMeetings&&d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",class:"assign-button",size:"md",disabled:this.room.id===this.meeting.meta.roomName,onClick:()=>this.onJoin()},this.room.id===this.meeting.meta.roomName?this.t("joined"):this.t("join")),!this.room.isParent&&d("dyte-icon",{icon:this.showExpandedCard?this.iconPack.chevron_up:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t,onClick:()=>this.toggleCardDisplay()}))),this.renderExpandedCardMaybe(),this.renderParticipantsMaybe()))}};pA.style=kne;const Sne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;flex-direction:column;font-size:14px}:host input[type='checkbox']{margin:var(--dyte-space-0, 0px);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--dyte-border-radius-sm, 4px);position:relative;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}:host input[type='checkbox']:checked{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host input[type='checkbox']:checked::before{position:absolute;top:1px;left:1px;height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);background-color:rgb(var(--dyte-colors-text-1000, 255 255 255));content:'';-webkit-clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%);clip-path:polygon(5% 60%, 35% 93%, 100% 19%, 86% 4%, 36% 62%, 19% 44%)}*{box-sizing:border-box}.participants{margin-top:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px)}.ctr{box-sizing:border-box;padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.empty-message{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);text-align:center;font-size:14px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--dyte-space-2, 8px);height:100%;text-align:center;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.empty-room dyte-icon{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px)}.empty-room p{font-size:16px;font-weight:500;margin:var(--dyte-space-0, 0px)}.empty-room span{font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search-wrapper{margin-bottom:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px)}.search .search-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:inherit;color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.header{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-1\\.5, 6px);height:var(--dyte-space-9, 36px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-0\\.5, 2px);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-border-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));display:flex;align-items:center;justify-content:space-between}.title-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.participant-count{display:flex;align-items:center;font-size:14px}.participant-count dyte-icon{margin-right:var(--dyte-space-0\\.5, 2px);width:var(--dyte-space-3, 12px)}.participant-item{display:flex;align-items:center;justify-content:space-between;margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);cursor:pointer}.participant-item input.hide-checkbox{display:none}.participant-item input:checked{display:inline-block}.dragging input{display:none}.participant-item:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.participant-item:hover input{display:inline-block}.peer-ui-container{position:relative;display:flex;align-items:center;gap:var(--dyte-space-2, 8px);height:var(--dyte-space-10, 40px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.peer-ui-container dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.peer-ui-container .name{font-size:14px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}`,hA=class{constructor(t){N(this,t),this.onSelectedParticipantsUpdate=K(this,"selectedParticipantsUpdate",7),this.onAllToggled=K(this,"allParticipantsToggleUpdate",7),this.onParticipantsDragging=K(this,"participantsDragging",7),this.onSearchInput=e=>{this.search=e.target.value},this.onDragStart=e=>{this.isDragging=!0,this.onParticipantsDragging.emit(!0),this.updateSelectedParticipants(e,!0)},this.onDragEnd=e=>{this.isDragging=!1,this.onParticipantsDragging.emit(!1),this.updateSelectedParticipants(e,!1)},this.onClick=e=>{const i=this.selectedParticipantIds.includes(Qt(e));this.updateSelectedParticipants(e,!i)},this.onToggleAll=e=>{const i=e?this.participantsToShow.map(Qt):[];this.onAllToggled.emit(i)},this.meeting=void 0,this.participantIds=[],this.iconPack=U,this.t=j(),this.search="",this.participantsToShow=[],this.selectedParticipantIds=[],this.isDragging=!1}connectedCallback(){this.meetingChanged(this.meeting),this.searchChanged(this.search)}disconnectedCallback(){this.meeting!=null}updateSelectedParticipants(t,e){const i=Qt(t);let s=[];e&&!this.selectedParticipantIds.includes(i)?s=[...this.selectedParticipantIds,i]:s=[...this.selectedParticipantIds.filter(r=>r!==i)],this.onSelectedParticipantsUpdate.emit(s)}meetingChanged(t){t!=null&&this.getParticipants(this.search)}participantsChanged(){this.getParticipants(this.search)}searchChanged(t){this.getParticipants(t)}getParticipants(t){const e=i4(this.meeting);this.participantsToShow=e.filter(i=>{var s;return this.participantIds.includes(Qt(i))&&((s=i.displayName)!==null&&s!==void 0?s:"").toLowerCase().includes(t.toLowerCase())})}renderPeer(t){const e=cr(t.displayName||"");return d("div",{class:"peer-ui-container"},d("dyte-avatar",{participant:{name:t.displayName,picture:t.displayPictureUrl},size:"sm"}),d("p",{class:"name",title:e},Fs(e,16),this.meeting.self.userId===t.id&&` (${this.t("you")})`))}render(){return d(O,null,d("div",{class:"search-wrapper"},d("div",{class:"search",part:"search"},d("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),d("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),d("slot",{name:"shuffle-button"})),d("div",{class:"header"},d("div",{class:"title-wrapper"},d("span",null,this.t("breakout_rooms.main_room")),d("span",{class:"participant-count"},"(",d("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t}),this.participantsToShow.length,")")),this.selectedParticipantIds.length!==0&&d("dyte-tooltip",{label:this.t("breakout_rooms.select_all"),iconPack:this.iconPack,t:this.t},d("input",{type:"checkbox",checked:this.selectedParticipantIds.length===this.participantsToShow.length,onChange:t=>this.onToggleAll(!!t.target.checked)}))),d("div",{class:"ctr scrollbar",part:"container"},this.participantsToShow.length>0&&d("ul",{class:"participants",part:"participants"},this.participantsToShow.map(t=>d("li",{class:{"participant-item":!0,dragging:this.isDragging},onClick:()=>this.onClick(t),onDragStart:()=>this.onDragStart(t),onDragEnd:()=>this.onDragEnd(t),draggable:this.selectedParticipantIds.length===0,role:"listitem",key:t.id},this.renderPeer(t),!this.isDragging&&d("input",{type:"checkbox",class:{"hide-checkbox":this.selectedParticipantIds.length===0},checked:this.selectedParticipantIds.includes(Qt(t))})))),this.participantsToShow.length===0&&this.search.length>0&&d("div",{class:"empty-message"},this.t("participants.errors.empty_results")),this.participantsToShow.length===0&&this.search.length===0&&d("div",{class:"empty-room"},d("dyte-icon",{icon:this.iconPack.people_checked,part:"search-icon",iconPack:this.iconPack,t:this.t,class:"search-icon"}),d("p",null,this.t("breakout_rooms.all_assigned")),d("span",null,this.t("breakout_rooms.empty_main_room")))))}static get watchers(){return{meeting:["meetingChanged"],participantIds:["participantsChanged"],search:["searchChanged"]}}};hA.style=Sne;const xne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:row;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));width:-moz-fit-content;width:fit-content;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-1, 4px)}p{margin:var(--dyte-space-0, 0px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}input{margin:var(--dyte-space-0, 0px);width:var(--dyte-space-6, 24px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-sm, 1px);border-style:solid;border-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));text-align:center;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));border-radius:var(--dyte-border-radius-sm, 4px);font-size:16px;outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{margin:var(--dyte-space-0, 0px);appearance:none;-webkit-appearance:none}input[type='number']{-moz-appearance:textfield}",gA=class{constructor(t){N(this,t),this.onChange=K(this,"valueChange",7),this.input="1",this.size=void 0,this.value=void 0,this.minValue=0,this.iconPack=U,this.t=j()}connectedCallback(){this.watchStateHandler(this.input),this.input=this.value.toString()}watchStateHandler(t){this.onChange.emit(t)}increment(){this.input=Math.max(parseInt(this.input)+1,this.minValue).toString()}decrement(){this.input=Math.max(this.minValue,parseInt(this.input)-1).toString()}render(){return d(O,null,d("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.decrement(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})),d("input",{type:"number",value:this.input,min:this.minValue,onInput:t=>{const e=parseInt(t.target.value,10);isNaN(e)||e<this.minValue?this.input=this.minValue.toString():this.input=e.toString()}}),d("dyte-button",{kind:"icon",variant:"ghost",onClick:()=>this.increment(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t})))}static get watchers(){return{input:["watchStateHandler"]}}};gA.style=xne;var Ene=Object.freeze({__proto__:null,dyte_breakout_room_manager:pA,dyte_breakout_room_participants:hA,dyte_counter:gA});const mA=t=>{let e=null;try{const i=JSON.parse(t.message),{target:s,message:r}=i;s===void 0||r===void 0?e=t:e=Object.assign(Object.assign({},t),{targetUserIds:s,message:r})}catch{e=t}return e};function W1(t,e){return t.localeCompare(e)}function bm(t){return t.sort((e,i)=>e.localeCompare(i)).join("_")}function fA(t,e){if(t==null)return!0;for(const i of t)if(i.kind==="file"){const s=i.getAsFile();i.type.startsWith("image/")?e("image",s):e("file",s)}}const yg="dm__";function TT(t){return t.isDirectMessage}function CT(t){return[...new Set(t)].sort(W1).join("<>")}function xu(t){return t.split("").reverse().join("")}const PT=/^\*([^*\s]+)\*/,RT=/^_([^_\s]+)_/,IT=/^~([^~\s]+)~/,AT=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.,~#?&//=]*)/,lk=/<blockquote>[.\s\S]*<\/blockquote>\n\n/m;function uk(t,e=!1){if(!lk.test(t))return"";let i=0,s=13;return e&&(i=12,s=0),t.substring(t.indexOf("<blockquote>")+i,t.indexOf("</blockquote>")+s)}function pk(t){return t.replace(lk,"")}const hk=2e3,Tne=["<a>","<b>","<i>","<q>","<s>"];function Rf(t){t=t.split(" ").map(i=>{if(AT.test(i)){const s=AT.exec(i);i=i.replace(s[0],`<a>${s[0]}</a>`)}else{if(PT.test(i)){const s=PT.exec(i);i=i.replace(s[0],`<b>${s[1]}</b>`)}if(RT.test(i)){const s=RT.exec(i);i=i.replace(s[0],`<i>${s[1]}</i>`)}if(IT.test(i)){const s=IT.exec(i);i=i.replace(s[0],`<s>${s[1]}</s>`)}}return i}).join(" "),t=t.split(" ").map((i,s)=>i===">"&&(s===0||i[s-1]===">")?"<q></q>":i).join(" ");const[e]=vA(t);return e}function vA(t,e=""){const i=[];if(t.length===0)return[i,0];let s=0;for(;s<t.length;){if(e.length&&e===t.substring(s,s+e.length))return[i,s+e.length];if(Tne.includes(t.substring(s,s+3))){const[r,n]=vA(t.substring(s+3),`</${t[s+1]}>`);i.push({type:t[s+1],content:r.length===1&&r[0].type==="plain_text"?r[0].content:r}),s+=n+3}else{let r=i[i.length-1];(!r||r.type!=="plain_text")&&(i.push({type:"plain_text",content:""}),r=i[i.length-1]),r.content+=t[s],s++}}return[i,s]}const Cne=t=>d("a",{class:"link",href:t,target:"_blank",rel:"noopener noreferrer"},t),Pne=t=>typeof t=="string"?d("b",null,t):d("b",null,El(t)),Rne=t=>typeof t=="string"?d("i",null,t):d("i",null,El(t)),Ine=t=>typeof t=="string"?d("s",null,t):d("b",null,El(t)),Ane=t=>typeof t=="string"?t:d("p",null,El(t)),El=t=>t.map(e=>{switch(e.type){case"a":if(typeof e.content=="string")return Cne(e.content);case"b":return Pne(e.content);case"i":return Rne(e.content);case"s":return Ine(e.content);case"q":return d("span",{class:"block-quote"});case"plain_text":default:return Ane(e.content)}}),Sh=({message:t})=>{const e=t.slice(0,hk),i=uk(e,!0),s=pk(e);return d("p",null,i.length!==0&&d("blockquote",null,i.split(`
`).map(r=>{const n=Rf(r);return d("p",null,El(n))})),s.split(`
`).map(r=>{const n=Rf(r);return d("p",null,El(n))}))},Dne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;animation:0.2s slide-up ease-in}dyte-chat-messages-ui,dyte-chat-messages-ui-paginated{flex:1 0 0}.chat-container{display:flex;height:100%;width:100%;flex-direction:row}.chat{display:flex;flex:1 1 0%;flex-direction:column}.banner{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.banner .welcome-new-channel{width:var(--dyte-space-48, 192px)}.banner .create-channel-illustration{height:var(--dyte-space-40, 160px);width:var(--dyte-space-40, 160px)}.quoted-message-container{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.quoted-message-container .quoted-message{flex:1 1 0%;padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-24, 96px);overflow-y:auto;word-break:break-all}.quoted-message-container .quoted-message blockquote{display:none}.quoted-message-container dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.quoted-message-container dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.quoted-message-container dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.channel-selector-header{box-sizing:border-box;height:var(--dyte-space-16, 64px);padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.channel-selector-header .channel-create-btn{width:var(--dyte-space-8, 32px);justify-content:center}.channel-selector-header .channel-create-btn:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}`,yA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.channelMap=new Map,this.disconnectMeeting=e=>{var i,s,r,n,a,o;this.isPrivateChatSupported()&&(e==null||e.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),e==null||e.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),(i=e==null?void 0:e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener),(s=e==null?void 0:e.chat)===null||s===void 0||s.removeListener("channelCreate",this.onChannelCreateOrUpdate),(r=e==null?void 0:e.chat)===null||r===void 0||r.removeListener("channelUpdate",this.onChannelCreateOrUpdate),(n=e==null?void 0:e.chat)===null||n===void 0||n.removeListener("channelMessageUpdate",this.onChannelCreateOrUpdate),(o=(a=e==null?void 0:e.participants)===null||a===void 0?void 0:a.all)===null||o===void 0||o.removeListener("participantsUpdate",this.onChannelCreateOrUpdate)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter(e=>this.privatePresetFilter.length===0||this.privatePresetFilter.includes(e.presetName)),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>_f(this.meeting),this.updateUnreadCountGroups=e=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),e)},this.isPrivateChatSupported=()=>{var e,i,s;return!_f(this.meeting)&&this.canPrivateMessage&&!this.disablePrivateChat&&((s=(i=(e=this.meeting)===null||e===void 0?void 0:e.__internals__)===null||i===void 0?void 0:i.features)===null||s===void 0?void 0:s.getFeatureValue("chat_socket_server"))==="socket-service"},this.updateRecipients=e=>{if(typeof e.detail=="string")this.chatRecipientId="everyone",this.selectedParticipant=null;else{const{userId:i}=e.detail;this.chatRecipientId=i,this.selectedParticipant=this.participants.find(s=>s.userId===i)}if(this.chatRecipientId!=="everyone"){const i=[this.chatRecipientId,this.meeting.self.userId],s=bm(i);this.selectedGroup=s}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>this.chatRecipientId==="everyone"?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.onChannelChanged=e=>{e.detail.includes(yg)?this.createDMChannel(e.detail.replace(yg,"")):this.selectedChannelId=e.detail,this.cleanup()},this.createDMChannel=async e=>{this.creatingChannel=!0;const i=await this.meeting.chat.createChannel("Direct Message",[e],{visibility:"private",isDirectMessage:!0});this.creatingChannel=!1,this.selectedChannelId=i.id},this.cleanup=()=>{this.editingMessage=null,this.replyMessage=null,this.searchQuery=""},this.onChannelCreateOrUpdate=e=>{e?this.channelMap.set(e.id,e):this.meeting.chat.channels.forEach(a=>this.channelMap.set(a.id,a));const i=Array.from(this.channelMap.values()).filter(a=>!TT(a)).sort((a,o)=>W1(a.displayName,o.displayName)),s=Array.from(this.channelMap.values()).filter(TT).map(a=>Object.assign(Object.assign({},a),{displayName:this.getMemberDisplayName(a)})),r=this.meeting.participants.all.toArray().filter(a=>{if(a.userId===this.meeting.self.userId)return!1;const o=CT([this.meeting.self.userId,a.userId]);return s.every(c=>CT(c.memberIds)!==o)}).map(a=>({id:`${yg}${a.userId}`,displayName:a.name,displayPictureUrl:a.picture,isDirectMessage:!0,unreadCount:0})),n=[...s,...r].sort((a,o)=>W1(a.displayName,o.displayName));this.channels=[...i,...n]},this.getMemberDisplayName=e=>{var i;let s;e.memberIds.length===1?s=e.memberIds[0]:s=e.memberIds[0]===this.meeting.self.userId?e.memberIds[1]:e.memberIds[0];const r=this.meeting.participants.all.toArray().find(n=>n.userId===s);return(i=r==null?void 0:r.name)!==null&&i!==void 0?i:s},this.onNewMessageHandler=async e=>{const i=e.detail;this.isChatViewType?(await this.meeting.chat.sendMessageToChannel(i,this.selectedChannelId,this.replyMessage?{replyTo:this.replyMessage}:{}),this.replyMessage=null):this.meeting.chat.sendMessage(i,this.getRecipientPeerIds())},this.onEditMessageHandler=async e=>{var i,s;await((s=(i=this.meeting)===null||i===void 0?void 0:i.chat)===null||s===void 0?void 0:s.editTextMessage(e.detail.id,e.detail.message,e.detail.channelId)),this.editingMessage=null},this.onSearchHandler=async e=>{this.searchQuery=e.detail},this.onSearchDismissed=()=>{this.searchQuery=""},this.onChannelCreateClicked=()=>{this.stateUpdate.emit({activeChannelCreator:!0}),$.activeChannelCreator=!0},this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.t=j(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0,this.channels=[],this.selectedChannelId=void 0,this.editingMessage=null,this.replyMessage=null,this.searchQuery="",this.creatingChannel=!1}connectedCallback(){!this.meeting||(this.meetingChanged(this.meeting),!(this.meeting&&!this.meeting.chat)&&this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",t=>{t.preventDefault(),this.dropzoneActivated=!0}),this.host.addEventListener("dragleave",()=>{this.dropzoneActivated=!1}),this.host.addEventListener("drop",t=>{t.preventDefault(),this.dropzoneActivated=!1,fA(t.dataTransfer.items,(e,i)=>{var s,r,n,a;switch(e){case"image":this.isFileMessagingAllowed()&&((r=(s=this.meeting)===null||s===void 0?void 0:s.chat)===null||r===void 0||r.sendImageMessage(i,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&((a=(n=this.meeting)===null||n===void 0?void 0:n.chat)===null||a===void 0||a.sendFileMessage(i,this.getRecipientPeerIds()));break}})})))}onEditMessageInit(t){t.detail.flags.isReply?this.replyMessage=t.detail.payload:t.detail.flags.isEdit&&(this.editingMessage=t.detail.payload)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i,s,r,n,a;e!=null&&this.disconnectMeeting(e),!(t&&!t.chat)&&t!=null&&(this.canSend=t.self.permissions.chatPublic.canSend,this.canSendTextMessage=t.self.permissions.chatPublic.text,this.canSendFiles=t.self.permissions.chatPublic.files,this.canPrivateMessage=!!(((i=t.self.permissions.chatPrivate)===null||i===void 0?void 0:i.canSend)||((s=t.self.permissions.chatPrivate)===null||s===void 0?void 0:s.canReceive)),this.canSendPrivateTexts=!!(!((r=t.self.permissions.chatPrivate)===null||r===void 0)&&r.text),this.canSendPrivateFiles=!!(!((n=t.self.permissions.chatPrivate)===null||n===void 0)&&n.files),this.isChatViewType=t.meta.viewType==="CHAT",this.isChatViewType&&(this.onChannelCreateOrUpdate(),this.channels.filter(c=>!c.id.includes(yg)).length&&(this.selectedChannelId=this.channels[0].id)),this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:o})=>{o.channelId||(this.addToChatGroup(o),this.chatGroups=Object.assign({},this.chatGroups))},this.onParticipantUpdate(),this.usePaginatedChat()||(a=t.chat)===null||a===void 0||a.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(t.participants.joined.addListener("participantJoined",this.onParticipantUpdate),t.participants.joined.addListener("participantLeft",this.onParticipantUpdate)),this.isChatViewType&&(t.chat.addListener("channelCreate",this.onChannelCreateOrUpdate),t.chat.addListener("channelUpdate",this.onChannelCreateOrUpdate),t.chat.addListener("channelMessageUpdate",this.onChannelCreateOrUpdate),t.participants.all.addListener("participantsUpdate",this.onChannelCreateOrUpdate)))}chatGroupsChanged(t){var e,i;if(!this.isPrivateChatSupported())return;const s={};for(const r in t){const n=(e=xf[r])!==null&&e!==void 0?e:0;s[r]=t[r].filter(a=>a.type=="chat"&&a.message.time>n&&a.message.userId!==this.meeting.self.userId).length,(r===bm([this.meeting.self.userId,(i=this.selectedParticipant)===null||i===void 0?void 0:i.userId])||r==="everyone"&&this.selectedParticipant===null)&&(s[r]=0,xf[r]=new Date)}this.updateUnreadCountGroups(s)}initializeChatGroups(){var t;(t=this.meeting.chat)===null||t===void 0||t.messages.forEach(e=>{this.addToChatGroup(e)})}addToChatGroup(t){var e;const i=mA(t);let s="everyone";if(((e=i.targetUserIds)===null||e===void 0?void 0:e.length)>0){const r=new Set([i.userId,...i.targetUserIds]);s=bm(Array.from(r))}this.chatGroups[s]===void 0&&(this.chatGroups[s]=[]),this.chatGroups[s]=[...this.chatGroups[s],{type:"chat",message:i}]}getRecipientPeerIds(){let t=[];return this.chatRecipientId!=="everyone"&&(t=[this.selectedParticipant.id]),t}channelSwitchListener(t){this.onChannelChanged(t)}renderHeadlessComponents(){return d(HZ,null,d("dyte-dialog-manager",{meeting:this.meeting}),d("dyte-notifications",{meeting:this.meeting}))}renderComposerUI(){var t,e;if(this.isChatViewType&&this.channels.length===0||this.isChatViewType&&this.searchQuery!==""||this.isChatViewType&&!this.selectedChannelId)return null;if(this.chatRecipientId==="everyone"){if(!this.canSendTextMessage&&!this.canSendFiles)return null}else if(!this.canSendPrivateTexts&&!this.canSendPrivateFiles)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},s={};return this.editingMessage?s.editMessage=this.editingMessage:this.replyMessage&&(s.replyMessage=this.replyMessage),d("dyte-chat-composer-ui",Object.assign({canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(!((e=(t=this.meeting)===null||t===void 0?void 0:t.__internals__)===null||e===void 0)&&e.features.hasFeature(wf.DISABLE_EMOJI_PICKER)),members:this.meeting.participants.all.toArray(),prefill:s,channelId:this.selectedChannelId,onDyteNewMessage:this.onNewMessageHandler,onDyteEditMessage:this.onEditMessageHandler,onDyteEditCancelled:()=>this.editingMessage=null},i),this.replyMessage&&d("div",{class:"quoted-message-container",slot:"quote-block"},d("div",{class:"quoted-message scrollbar"},d(Sh,{message:this.replyMessage.message})),d("div",null,d("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.replyMessage=null,iconPack:this.iconPack,t:this.t}))),d("slot",{name:"chat-addon",slot:"chat-addon"}))}renderFullChat(){if(this.creatingChannel)return d("div",{class:"banner"},d("dyte-spinner",{size:"lg"}));if(this.channels.length===0||!this.selectedChannelId)return d("div",{class:"banner"},d("dyte-icon",{icon:this.iconPack.create_channel_illustration,iconPack:this.iconPack,t:this.t,slot:"start",class:"create-channel-illustration"}),d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"wide",variant:"primary",size:"md",onClick:this.onChannelCreateClicked,class:"welcome-new-channel"},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t,slot:"start"}),d("span",null,this.t("chat.new_channel"))));const t=this.channels.find(e=>e.id===this.selectedChannelId);return d("div",{class:"chat"},d("dyte-channel-header",{slot:"header",meeting:this.meeting,channel:t,onSearch:this.onSearchHandler,onSearchDismissed:this.onSearchDismissed}),this.searchQuery!==""&&d("dyte-chat-search-results",{meeting:this.meeting,query:this.searchQuery,channelId:this.selectedChannelId}),this.searchQuery===""&&d("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t,selectedChannelId:this.selectedChannelId,selectedChannel:t}))}render(){var t,e;if(!this.meeting)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},s=(t=this.meeting)===null||t===void 0?void 0:t.self.userId,r=this.chatGroups[this.selectedGroup]||[];return d(O,null,this.isChatViewType&&this.renderHeadlessComponents(),d("div",{class:"chat-container"},this.isChatViewType&&d("dyte-channel-selector-ui",{channels:this.channels,onChannelChanged:this.onChannelChanged,selectedChannelId:this.selectedChannelId,showRecentMessage:!0},d("div",{class:"channel-selector-header",slot:"header"},d("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t}),d("dyte-tooltip",{label:this.t("chat.new_channel"),iconPack:this.iconPack,t:this.t},d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:this.onChannelCreateClicked,class:"channel-create-btn"},d("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}))))),d("div",{class:"chat"},this.isFileMessagingAllowed()&&d("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},d("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),d("p",null,this.t("chat.send_attachment"))),this.isPrivateChatSupported()&&d("dyte-chat-selector-ui",Object.assign({selfUserId:s,groups:this.participants,selectedGroupId:(e=this.selectedParticipant)===null||e===void 0?void 0:e.userId,unreadCounts:this.unreadCountGroups,onDyteChatGroupChanged:this.updateRecipients},i)),this.isChatViewType?this.renderFullChat():this.usePaginatedChat()?d("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):d("dyte-chat-messages-ui",Object.assign({messages:r,selfUserId:s,selectedGroup:this.selectedGroup},i)),this.renderComposerUI())))}get host(){return Ts(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};yA.style=Dne;const Mne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}`,bA=class{constructor(t){N(this,t),this.onSearchInput=e=>{this.search=e.target.value},this.meeting=void 0,this.states=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.t=j(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting!=null}meetingChanged(t){t!=null}render(){const t={meeting:this.meeting,states:this.states||$,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return d(O,null,d("div",{class:"search",part:"search"},d("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),d("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),d("div",{class:"ctr scrollbar",part:"container"},d(je,{element:"dyte-participants-waiting-list",defaults:t}),d(je,{element:"dyte-participants-stage-queue",defaults:t}),d(je,{element:"dyte-participants-stage-list",defaults:t,props:{search:this.search}}),d(je,{element:"dyte-participants-viewer-list",defaults:t,props:{search:this.search}})))}static get watchers(){return{meeting:["meetingChanged"]}}};bA.style=Mne;const One=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}`,wA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:void 0}),$.activeSidebar=!1,$.sidebar=void 0},this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.t=j(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugins=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t;(t=this.meeting)===null||t===void 0||t.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(t){t!=null&&(this.canStartPlugins=t.self.permissions.plugins.canStart,this.canClosePlugins=t.self.permissions.plugins.canClose,this.plugins=t.plugins.all.toArray().filter(e=>{var i;return!(!((i=t.self.config.disabledPlugins)===null||i===void 0)&&i.includes(e.id))}),this.updateActivePlugins=()=>{this.activatedPluginsId=t.plugins.active.toArray().map(e=>e.id)},this.updateActivePlugins(),t.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return d(O,null,d("ul",{class:"scrollbar"},this.plugins.map(t=>d("li",{key:t.name,class:"plugin"},d("div",{class:"metadata"},d("img",{src:t.picture}),d("div",{class:"name"},t.name)),!this.activatedPluginsId.includes(t.id)&&this.canStartPlugins&&d("div",{class:"buttons"},d("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{t.activate(),this.close()},"aria-label":`${this.t("activate")} ${t.name}`},d("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(t.id)&&this.canClosePlugins&&d("div",{class:"buttons"},d("dyte-button",{kind:"icon",size:"lg",onClick:()=>{t.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("close")} ${t.name}`},d("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t})))))))}static get watchers(){return{meeting:["meetingChanged"]}}};wA.style=One;const Lne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}`,_A=class{constructor(e){N(this,e),this.onPollsUpdate=i=>{this.polls=[...i.polls]},this.meeting=void 0,this.config=Re,this.size=void 0,this.iconPack=U,this.t=j(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;this.meeting!=null&&((e=this.meeting.polls)===null||e===void 0||e.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(e){e!=null&&(e&&!e.polls||(this.polls=[...e.polls.items],e.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async i=>{this.create=!1,await e.polls.create(i.question,i.options,i.anonymous,i.hideVotes)},this.onVote=async(i,s)=>{await e.polls.vote(i,s)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){uo(this.pollEl)}render(){return d(O,null,d("div",{class:"ctr",part:"container"},d("div",{class:"polls-view scrollbar",ref:e=>this.pollEl=e,part:"polls"},this.polls.map(e=>{var i;return d("dyte-poll",{key:e.id,poll:e,onDyteVotePoll:s=>{this.onVote(s.detail.id,s.detail.index)},self:(i=this.meeting)===null||i===void 0?void 0:i.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})}),this.create&&d("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:e=>{this.onCreate(e.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&d("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("polls.cancel"):this.t("polls.create"))))}static get watchers(){return{meeting:["meetingChanged"]}}};_A.style=Lne;const Nne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;height:100%;width:100%;font-family:var(--dyte-font-family, sans-serif);z-index:50;display:flex;flex-direction:column}:host([view='sidebar']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%;border:none}::slotted(*){flex-grow:1}.close{position:absolute;top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px);z-index:10}.main-header{position:relative;display:flex;height:var(--dyte-space-12, 48px);place-items:center;justify-content:center}.main-header,.mobile-tabs{flex-shrink:0}.mobile-tabs{display:flex;place-items:center;justify-content:space-evenly;border-bottom:1px solid rgb(var(--dyte-colors-background-700, 44 44 44))}.mobile-tabs button{margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;padding:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));height:var(--dyte-space-10, 40px);cursor:pointer;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);font-weight:500;border-bottom:1px solid transparent}.mobile-tabs button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}header h3{font-size:14px;font-weight:500}@media only screen and (max-device-height: 480px) and (orientation: landscape){.main-header{display:none !important}}",kA=class{constructor(t){N(this,t),this.tabChange=K(this,"tabChange",7),this.sidebarClose=K(this,"sidebarClose",7),this.onClose=()=>{this.sidebarClose.emit()},this.view="sidebar",this.tabs=[],this.currentTab=void 0,this.iconPack=U,this.t=j()}render(){const t=this.view==="full-screen",e=this.tabs.find(i=>i.id===this.currentTab);return d(O,{class:this.view},d("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.onClose,"aria-label":this.t("close")},d("dyte-icon",{icon:this.iconPack.dismiss})),e&&d("header",{class:"main-header"},d("h3",null,e.name),d("slot",{name:"pinned-state"})),t&&d("header",{class:"mobile-tabs"},this.tabs.map(i=>d("button",{onClick:()=>{this.tabChange.emit(i.id)},class:{active:this.currentTab===i.id}},i.name))),d("slot",{name:this.currentTab}))}};kA.style=Nne;var Une=Object.freeze({__proto__:null,dyte_chat:yA,dyte_participants:bA,dyte_plugins:wA,dyte_polls:_A,dyte_sidebar_ui:kA});const $ne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.failed,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}.row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.section{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.status-text{margin-top:var(--dyte-space-3, 12px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;flex-direction:row;align-items:center;justify-content:center}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-40, 160px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.m3{margin-top:var(--dyte-space-3, 12px)}.m1{margin-top:var(--dyte-space-1, 4px)}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.error-text{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;font-size:14px;font-weight:100 !important;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.error-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.volume-indicator{margin-left:var(--dyte-space-4, 16px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.volume-level{height:var(--dyte-space-3, 12px);width:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-bg-opacity));transition:width 0.5s}.stage-manager{position:sticky;bottom:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}.speaker-test{margin-top:var(--dyte-space-4, 16px);display:flex;flex-direction:row}.speaker-test dyte-button{margin-right:var(--dyte-space-2, 8px)}",SA=class{constructor(t){N(this,t),this.testProgress=K(this,"testProgress",7),this.lowVolCount=0,this.silenceCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.micMetadata={},this.micPreview=!1,this.speakerPreview=!1,this.audioTrackStats={lowVolume:!1,clip:!1,silence:!1,volume:0,timestamp:0},this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.speakerDevice=void 0,this.speakerTest="none"}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var t;const{self:e,troubleshoot:i}=this.meeting;this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest(),e==null||e.removeListener("deviceUpdate",this.deviceUpdateListener),e==null||e.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(t=i==null?void 0:i.audio)===null||t===void 0||t.removeListener("audioTrackStats",this.audioTrackUpdateListener)}async meetingChanged(t){var e,i;if(!t)return;const{self:s,troubleshoot:r}=t;s!=null&&s.audioTrack&&await this.getTrackInfo(),s==null||s.on("deviceUpdate",this.deviceUpdateListener.bind(this)),s.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this));const n=(e=s==null?void 0:s.mediaPermissions)===null||e===void 0?void 0:e.audio;this.mediaPermissionUpdateListener({kind:"audio",message:n}),(i=r==null?void 0:r.audio)===null||i===void 0||i.on("audioTrackStats",this.audioTrackUpdateListener.bind(this))}deviceUpdateListener({device:t,preview:e}){e||(t.kind==="audioInput"&&(this.speakerDevice=t),t.kind==="audiooutput"&&this.getTrackInfo())}mediaPermissionUpdateListener({kind:t,message:e}){t==="audio"&&(this.mediaPermission=e,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress(),this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest()))}audioTrackUpdateListener(t){this.audioTrackStats=Object.assign(Object.assign({},t),{volume:this.normalizeVolume(t==null?void 0:t.volume)}),this.volumeEl&&(this.volumeEl.style.width=`${this.audioTrackStats.volume}%`)}setActiveTab(t){this.activeTab=t,this.updateProgress()}async toggleMicTest(){var t,e,i;const s=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;this.micPreview=!this.micPreview,this.micPreview?(await this.getTrackInfo(),s.stopTrackAnalysis(),await(s==null?void 0:s.startTrackAnalysis(!0))):((i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.audio)===null||i===void 0||i.stopTrackAnalysis(),this.audioTrackStats.volume=0,this.volumeEl&&(this.volumeEl.style.width="5%"))}async toggleSpeakerTest(){var t,e,i,s;const r=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;if(!((e=this.testAudioEl)===null||e===void 0)&&e.paused?(this.testAudioEl.currentTime=.2,(i=this.testAudioEl)===null||i===void 0||i.play(),this.speakerPreview=!0,r==null||r.startTrackAnalysis(!0),this.testAudioEl.addEventListener("ended",()=>{this.speakerPreview=!1,r==null||r.stopTrackAnalysis()})):((s=this.testAudioEl)===null||s===void 0||s.pause(),this.speakerPreview=!1,r==null||r.stopTrackAnalysis()),this.speakerPreview){const{self:n}=this.meeting,a=await(n==null?void 0:n.getSpeakerDevices());if(!a)return;this.speakerDevice=a[0],n==null||n.setDevice(a[0])}}async getTrackInfo(){var t,e;this.micMetadata=await((e=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio)===null||e===void 0?void 0:e.getTrackMetadata(!0))}changeStage(t){this.mediaPermission==="ACCEPTED"&&(t=Math.max(0,t),t=Math.min(2,t),this.stage=t,this.updateProgress(),this.micPreview&&this.toggleMicTest(),this.speakerPreview&&this.toggleSpeakerTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/3):this.testProgress.emit(0)}getAudioLevelStatus(){let t="All systems are functional.",e="checkmark",i="success";return this.detectLowVolume()&&(t="Low volume detected, please move closer to the device.",e="warning",i="warning"),this.audioTrackStats.clip&&(t="Clipping detected. Your audio may be noisy.",e="warning",i="error"),this.detectSilence()&&(t="Silence detected. Your device is not picking up audio.",e="warning",i="error"),d("div",{class:`row status-text ${i}`},d("dyte-icon",{size:"sm",icon:this.iconPack[e]}),this.t(t))}getDeviceInformationStatus(){let t="All systems are functional.",e="checkmark",i="success";const{channelCount:s,channelInterpretation:r,channelType:n,outputs:a}=this.micMetadata;return(r==="discrete"&&a>s||n==="STEREO"&&a===1||n==="QUAD"&&a===1||n==="QUAD"&&a===2)&&(t="Audio quality might be degraded.",e="warning",i="warning"),(n==="MONO"&&s<1||n==="STEREO"&&s<2||n==="QUAD"&&s<4)&&(t="Looks like your device is not functioning properly.",e="warning",i="error"),d("div",{class:`row status-text ${i}`},d("dyte-icon",{size:"sm",icon:this.iconPack[e]}),this.t(t))}getSpeakerTestStatus(){if(this.speakerTest==="success")return"All systems are functional.";if(this.speakerTest==="failed")return"Test failed. Please ensure your system volume is not 0."}setSpeakerTestResult(t){this.speakerPreview&&this.toggleSpeakerTest(),this.speakerTest=t}boolToStr(t){return t?"Yes":"No"}formatLabel(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}normalizeVolume(t=0){let e=.3;const i=.001;return t>e&&(e=t),Math.max(5,Math.round(t*100/(e-i)))}detectLowVolume(){var t;return!((t=this.audioTrackStats)===null||t===void 0)&&t.lowVolume?this.lowVolCount++:this.lowVolCount=0,this.lowVolCount>10}detectSilence(){var t;return!((t=this.audioTrackStats)===null||t===void 0)&&t.silence?this.silenceCount++:this.silenceCount=0,this.silenceCount>5}render(){const t={meeting:this.meeting,states:this.states||$,iconPack:this.iconPack,t:this.t,size:this.size},e=["label","channelType"];return d(O,null,d("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:i=>this.testAudioEl=i}),d("div",{id:"header"},["Report","Troubleshoot"].map(i=>d("dyte-button",{key:i,variant:"ghost",class:{active:this.activeTab===i},onClick:()=>this.setActiveTab(i),iconPack:this.iconPack,t:this.t},this.t(i)))),this.activeTab==="Troubleshoot"&&d("div",{class:"tab-body"},d("div",null,d("div",{class:"stage-indicator"},"Step ",this.stage+1,"/3"),this.stage===0&&d("dyte-debugger-permissions-ui",Object.assign({},t,{mediaType:"audio"})),this.stage===1&&d("div",null,d("div",{class:"title"},"Microphone Test"),d("div",{class:"text"},this.t("Please start the microphone test and start speaking in order to test your audio device.")),d("dyte-button",{size:"md",onClick:()=>this.toggleMicTest()},this.micPreview?"Stop":"Start"," Microphone Test"),this.micPreview&&d("div",{class:"col"},d("div",{class:"sub-title"},"Device Information",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.micMetadata).map(i=>d("div",null,this.formatLabel(i),": ",d("span",null,this.micMetadata[i])))))),e.map(i=>{const s=this.micMetadata[i];if(!!s)return d("div",{class:"row"},d("div",{class:"label"},d("span",null,this.t(this.formatLabel(i))),":"),d("div",{class:"text"},this.t(s)))}),this.getDeviceInformationStatus(),d("div",{class:"sub-title"},"Audio Level Analysis",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},d("div",null,"Volume Level:",d("span",null,this.audioTrackStats.volume,"/100")),d("div",null,"Low Volume:",d("span",null,this.boolToStr(this.audioTrackStats.lowVolume))),d("div",null,"Silence Detected:",d("span",null,this.boolToStr(this.audioTrackStats.silence))),d("div",null,"Noise Detected:",d("span",null,this.boolToStr(this.audioTrackStats.clip))),d("div",null,"Time:",d("span",null,new Date(this.audioTrackStats.timestamp).toLocaleTimeString()))))),d("div",{class:"row"},d("dyte-icon",{icon:this.iconPack.speaker,size:"md"}),d("div",{class:"volume-indicator"},d("div",{class:"volume-level",ref:i=>this.volumeEl=i}))),this.getAudioLevelStatus())),this.stage===2&&d("div",{class:"col"},d("div",{class:"title"},"Speaker Test"),d("div",{class:"text"},this.t("Upon starting this test, an audio will be played. Please ensure your system volume is not set to zero.")),d("dyte-button",{onClick:()=>this.toggleSpeakerTest(),size:"md"},this.speakerPreview?"Stop":"Start"," Speaker Test"),this.speakerDevice&&d("div",null,d("div",{class:"sub-title"},"Device Information"),d("div",{class:"row"},d("div",{class:"label"},d("span",null,"Label"),":"),d("div",{class:"text"},this.speakerDevice.label))),this.speakerPreview&&d("div",null,d("p",{class:"sub-title"},"Are you able to hear the audio?"),d("div",{class:"speaker-test"},d("dyte-button",{onClick:()=>this.setSpeakerTestResult("success"),size:"sm",variant:"primary"},"Yes"),d("dyte-button",{onClick:()=>this.setSpeakerTestResult("failed"),size:"sm",variant:"secondary"},"No"))),!this.speakerPreview&&this.speakerTest!=="none"&&d("div",{class:`row status-text ${this.speakerTest}`},d("dyte-icon",{size:"sm",icon:this.iconPack[this.speakerTest==="failed"?"dismiss":"checkmark"]}),this.getSpeakerTestStatus()))),d("div",{class:"stage-manager"},this.stage<2&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})),this.stage>0&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"))),this.activeTab==="Report"&&d("div",{class:"tab-body"},d("dyte-debugger-issues-ui",Object.assign({},t,{mediaType:"audio"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};SA.style=$ne;const jne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.status-text{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;width:100%;flex-direction:row;align-items:center;justify-content:flex-start}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-icon{margin-left:var(--dyte-space-2, 8px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-28, 112px) !important;min-width:var(--dyte-space-28, 112px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.align-start{align-items:flex-start !important}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.info{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;font-size:14px;font-weight:100 !important;--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity));opacity:0.7}.info dyte-icon{margin-right:var(--dyte-space-2, 8px)}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.stage-manager{margin-top:var(--dyte-space-4, 16px);display:flex;width:100%;flex-direction:row-reverse;align-items:center;justify-content:space-between;align-self:flex-end;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{position:relative;display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}",xA=class{constructor(e){N(this,e),this.testProgress=K(this,"testProgress",7),this.lowVolCount=0,this.silenceCount=0,this.frozenFramesCount=0,this.blackFramesCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.screenshareEnabled=!1,this.audioTrackMetadata={},this.videoTrackMetadata={},this.screenshareTest=!1,this.audioTrackStats={lowVolume:!1,clip:!1,silence:!1,volume:0,timestamp:0},this.videoTrackStats={isBlackFrame:!1,isFrozenFrame:!1,timestamp:0,videoScore:0}}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var e,i;const{self:s,troubleshoot:r}=this.meeting;this.screenshareTest&&this.toggleScreenshareTest(),s==null||s.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),s.removeListener("screenShareUpdate",this.screenShareUpdateListener),(e=r==null?void 0:r.screenshare)===null||e===void 0||e.removeListener("audioTrackStats",this.audioTrackUpdateListener),(i=r==null?void 0:r.screenshare)===null||i===void 0||i.removeListener("videoTrackStats",this.videoTrackUpdateListener)}async meetingChanged(e){var i,s,r;if(!e)return;const{self:n,troubleshoot:a}=e;n.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this)),n.addListener("screenShareUpdate",this.screenShareUpdateListener.bind(this)),(i=a==null?void 0:a.screenshare)===null||i===void 0||i.on("audioTrackStats",this.audioTrackUpdateListener.bind(this)),(s=a==null?void 0:a.screenshare)===null||s===void 0||s.on("videoTrackStats",this.videoTrackUpdateListener.bind(this));const o=(r=n==null?void 0:n.mediaPermissions)===null||r===void 0?void 0:r.screenshare;this.mediaPermissionUpdateListener({kind:"screenshare",message:o});const c=n==null?void 0:n.screenShareEnabled;this.screenShareUpdateListener({screenShareEnabled:c})}mediaPermissionUpdateListener({kind:e,message:i}){e==="screenshare"&&(this.mediaPermission=i,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress()))}screenShareUpdateListener({screenShareEnabled:e}){this.screenshareEnabled=e,!this.screenshareEnabled&&this.screenshareTest&&this.toggleScreenshareTest()}audioTrackUpdateListener(e){this.audioTrackStats=Object.assign(Object.assign({},e),{volume:this.normalizeVolume(e==null?void 0:e.volume)})}videoTrackUpdateListener(e){this.videoTrackStats=Object.assign(Object.assign({},e),{videoScore:this.normalizeVideoScore(e==null?void 0:e.videoScore)})}async toggleScreenshareTest(){var e,i,s;this.screenshareTest=!this.screenshareTest;const r=(e=this.meeting)===null||e===void 0?void 0:e.troubleshoot.screenshare;this.screenshareTest&&this.screenshareEnabled?(this.audioTrackMetadata=(i=r==null?void 0:r.getAudioTrackMetaData())!==null&&i!==void 0?i:{},this.videoTrackMetadata=(s=r==null?void 0:r.getVideoTrackMetaData())!==null&&s!==void 0?s:{},await r.startAudioTrackAnalysis(),await r.startVideoTrackAnalysis()):(r==null||r.stopAudioTrackAnalysis(),r==null||r.stopVideoTrackAnalysis())}setActiveTab(e){this.activeTab=e,this.updateProgress()}changeStage(e){this.mediaPermission==="ACCEPTED"&&(e=Math.max(0,e),e=Math.min(1,e),this.stage=e,this.updateProgress(),this.screenshareTest&&this.toggleScreenshareTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/2):this.testProgress.emit(0)}getDeviceInformationStatus(){let e="All systems are functional.",i="checkmark",s="success";if(this.audioTrackMetadata){const{channelCount:r,channelInterpretation:n,channelType:a,outputs:o}=this.audioTrackMetadata;(n==="discrete"&&o>r||a==="STEREO"&&o===1||a==="QUAD"&&o===1||a==="QUAD"&&o===2)&&(e="Audio quality might be degraded.",i="warning",s="warning"),(a==="MONO"&&r<1||a==="STEREO"&&r<2||a==="QUAD"&&r<4)&&(e="Looks like your device is not functioning properly.",i="warning",s="error")}return d("div",{class:`row status-text ${s}`},d("dyte-icon",{size:"sm",icon:this.iconPack[i]}),this.t(e))}getAudioAnalysisStatus(){var e;let i="All systems are functional.",s="checkmark",r="success";return!((e=this.audioTrackMetadata)===null||e===void 0)&&e.label?(this.detectLowVolume()&&(i="Low volume detected.",s="warning",r="warning"),this.audioTrackStats.clip&&(i="Your audio may be noisy.",s="warning",r="error"),this.detectSilence()&&(i="Silence detected.",s="warning",r="error"),d("div",{class:`row status-text ${r}`},d("dyte-icon",{size:"sm",icon:this.iconPack[s]}),this.t(i))):d("div",{class:"row status-text warning"},d("dyte-icon",{size:"sm",icon:this.iconPack.warning}),this.t("Not Available"))}getVideoAnalysisStatus(){var e,i;let s="All systems are functional.",r="checkmark",n="success";return!((e=this.videoTrackStats)===null||e===void 0)&&e.isBlackFrame?this.blackFramesCount++:this.blackFramesCount=0,!((i=this.videoTrackStats)===null||i===void 0)&&i.isFrozenFrame?this.frozenFramesCount++:this.frozenFramesCount=0,this.frozenFramesCount>4&&(s="Looks like the video is frozen.",r="warning",n="error"),this.blackFramesCount>4&&(s="Video is not being processed by the camera.",r="warning",n="error"),d("div",{class:`row status-text ${n}`},d("dyte-icon",{size:"sm",icon:this.iconPack[r]}),this.t(s))}formatLabel(e){const i=e.replace(/([A-Z])/g," $1");return i.charAt(0).toUpperCase()+i.slice(1)}nullToStr(e){return e||"Not Available"}normalizeVolume(e=0){let i=.3;const s=.001;return e>i&&(i=e),Math.max(5,Math.round(e*100/(i-s)))}normalizeVideoScore(e=0){let i=1;const s=0;return e>i&&(i=e),Math.max(5,Math.round(e*10/(i-s)))}detectLowVolume(){var e;return!((e=this.audioTrackStats)===null||e===void 0)&&e.lowVolume?this.lowVolCount++:this.lowVolCount=0,this.lowVolCount>10}detectSilence(){var e;return!((e=this.audioTrackStats)===null||e===void 0)&&e.silence?this.silenceCount++:this.silenceCount=0,this.silenceCount>5}render(){var e,i;const s={meeting:this.meeting,states:this.states||$,iconPack:this.iconPack,t:this.t,size:this.size};return d(O,null,d("div",{id:"header"},["Report","Troubleshoot"].map(r=>d("dyte-button",{key:r,variant:"ghost",class:{active:this.activeTab===r},onClick:()=>this.setActiveTab(r),iconPack:this.iconPack,t:this.t},this.t(r)))),this.activeTab==="Troubleshoot"&&d("div",{class:"tab-body"},d("div",null,d("div",{class:"stage-indicator"},"Step ",this.stage+1,"/2"),this.stage===0&&d("dyte-debugger-permissions-ui",Object.assign({},s,{mediaType:"screenshare"})),this.stage===1&&(this.screenshareEnabled?d("div",{class:"col"},d("div",{class:"text"},"Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots."),d("dyte-button",{onClick:()=>this.toggleScreenshareTest()},this.screenshareTest?"Stop":"Start"," Screenshare Tests"),this.screenshareTest&&d("div",null,d("div",{class:"sub-title"},"Device Information",d("dyte-information-tooltip",null,d("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.audioTrackMetadata).map(r=>{if(r!=="label")return d("div",null,"Audio ",this.formatLabel(r),":"," ",d("span",null,this.audioTrackMetadata[r]))}),Object.keys(this.videoTrackMetadata).map(r=>{if(r!=="label")return d("div",null,"Video ",this.formatLabel(r),":"," ",d("span",null,JSON.stringify(this.videoTrackMetadata[r])))})))),d("div",{class:"row align-start"},d("div",{class:"label"},d("span",null,"Audio Label"),":"),d("div",{class:"text"},this.nullToStr((e=this.audioTrackMetadata)===null||e===void 0?void 0:e.label))),d("div",{class:"row align-start"},d("div",{class:"label"},d("span",null,"Video Label"),":"),d("div",{class:"text"},this.nullToStr((i=this.videoTrackMetadata)===null||i===void 0?void 0:i.label))),this.getDeviceInformationStatus(),d("div",{class:"sub-title"},"Device Analysis"),d("div",{class:"row "},d("div",{class:"label"},d("span",null,"Audio Analysis")," :"),this.getAudioAnalysisStatus()),d("div",{class:"row"},d("div",{class:"label"},d("span",null,"Video Analysis")," :"),this.getVideoAnalysisStatus()))):d("div",{class:"col"},d("div",{class:"info"},d("dyte-icon",{size:"sm",icon:this.iconPack.warning}),"You are not sharing your screen."),d("div",{class:"text"},"In order for us to test your screenshare, you need to be sharing your screen. You can enable screenshare from the control bar.")))),d("div",{class:"stage-manager"},this.stage<1&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})),this.stage>0&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"))),this.activeTab==="Report"&&d("div",{class:"tab-body"},d("dyte-debugger-issues-ui",Object.assign({},s,{mediaType:"screenshare"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};xA.style=jne;const zne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;flex-direction:column;overflow:hidden;height:100%;width:100%;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:600}.status{margin-left:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:12px}.status dyte-icon{margin-right:var(--dyte-space-2, 8px)}.stage-indicator{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.scroll{overflow:auto;border-radius:var(--dyte-border-radius-none, 0)}.warning,.NOT_REQUESTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity)) !important;opacity:0.8}.success,.ACCEPTED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity)) !important;opacity:0.8}.COULD_NOT_START,.error,.DENIED,.SYSTEM_DENIED{--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity)) !important;opacity:0.8}.row{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}h3{margin:var(--dyte-space-0, 0px);font-size:14px;font-weight:600}.status-text{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important}.status-text dyte-icon{margin-right:var(--dyte-space-2, 8px)}.tooltip-text{display:flex;flex-direction:column;font-size:12px}.tooltip-text span{margin-left:var(--dyte-space-1, 4px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88)) !important}.tooltip-text div{margin-top:var(--dyte-space-1, 4px)}.tooltip-text div:nth-child(1){margin:var(--dyte-space-0, 0px)}.row{display:flex;flex-direction:row;align-items:center;justify-content:center}.row dyte-switch{margin-left:var(--dyte-space-8, 32px)}.row dyte-button{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px)}.row .label{width:var(--dyte-space-40, 160px)}.row .text{margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-0, 0px)}.col{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.label{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;justify-content:space-between;font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.text{margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));opacity:0.7}.title{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.sub-title{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;align-items:center;font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.stage-manager{position:sticky;bottom:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);display:flex;width:100%;flex-direction:row-reverse;align-items:center;justify-content:space-between;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-text-opacity))}.stage-button{display:flex;cursor:pointer;flex-direction:row;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px)}.stage-button dyte-icon{padding:var(--dyte-space-0, 0px)}.disabled{cursor:not-allowed;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52)) !important}.video-container{position:relative;width:-moz-fit-content;width:fit-content}.no-video-preview{position:absolute;top:50%;left:50%;z-index:50;display:flex;height:var(--dyte-space-12, 48px);width:var(--dyte-space-12, 48px);align-items:center;justify-content:center;border-radius:50%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));translate:-50% -50%}.video-preview{margin-top:var(--dyte-space-1, 4px);aspect-ratio:16 / 9;height:var(--dyte-space-28, 112px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}video{transform:scaleX(-1)}#header{margin-top:var(--dyte-space-2, 8px);display:flex;align-items:center;justify-content:space-evenly;border-bottom:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}#header dyte-button{border-bottom:var(--dyte-border-width-md, 2px) solid transparent;border-radius:var(--dyte-border-radius-none, 0)}#header dyte-button:hover{background-color:transparent}#header dyte-button.active{border-color:rgb(var(--dyte-colors-brand-400, 53 110 253))}.tab-body{display:flex;height:100%;flex-direction:column;justify-content:space-between;overflow-y:auto;padding:var(--dyte-space-4, 16px)}",EA=class{constructor(e){N(this,e),this.testProgress=K(this,"testProgress",7),this.blackFramesCount=0,this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.activeTab="Report",this.stage=0,this.mediaPermission="NOT_REQUESTED",this.videoPreview=!1,this.videoMetadata={},this.videoTrackStats={isBlackFrame:!1,isFrozenFrame:!1,timestamp:0,videoScore:0}}connectedCallback(){this.meetingChanged(this.meeting),this.updateProgress()}disconnectedCallback(){var e;const{self:i,troubleshoot:s}=this.meeting;this.videoPreview&&this.toggleVideoTest(),i==null||i.removeListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener),(e=s==null?void 0:s.video)===null||e===void 0||e.removeListener("videoTrackStats",this.videoTrackUpdateListener)}async meetingChanged(e){var i,s;if(!e)return;const{self:r,troubleshoot:n}=e;r!=null&&r.videoTrack&&await this.getTrackInfo(),r==null||r.on("deviceUpdate",this.deviceUpdateListner.bind(this)),r.addListener("mediaPermissionUpdate",this.mediaPermissionUpdateListener.bind(this));const a=(i=r==null?void 0:r.mediaPermissions)===null||i===void 0?void 0:i.video;this.mediaPermissionUpdateListener({kind:"video",message:a}),(s=n==null?void 0:n.video)===null||s===void 0||s.on("videoTrackStats",this.videoTrackUpdateListener.bind(this))}mediaPermissionUpdateListener({kind:e,message:i}){e==="video"&&(this.mediaPermission=i,this.mediaPermission!=="ACCEPTED"&&(this.stage=0,this.updateProgress(),this.videoPreview&&this.toggleVideoTest()))}deviceUpdateListner({device:e,preview:i}){i||(e==null?void 0:e.kind)==="videoinput"&&this.getTrackInfo()}videoTrackUpdateListener(e){this.videoTrackStats=Object.assign(Object.assign({},e),{videoScore:this.normalizeVideoScore(e==null?void 0:e.videoScore)})}setActiveTab(e){this.activeTab=e,this.updateProgress()}async toggleVideoTest(){var e,i;this.videoPreview=!this.videoPreview;const s=(i=(e=this.meeting)===null||e===void 0?void 0:e.troubleshoot)===null||i===void 0?void 0:i.video;if(this.videoPreview){const r=await(s==null?void 0:s.startPreview()),n=new MediaStream;if(!r)return;n.addTrack(r),setTimeout(()=>{this.videoEl.srcObject=n},500),this.getTrackInfo(),await(s==null?void 0:s.startTrackAnalysis())}else s==null||s.stopPreview(),s==null||s.stopTrackAnalysis(),this.videoEl.srcObject=void 0}getTrackInfo(){var e,i;this.videoMetadata=(i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.video)===null||i===void 0?void 0:i.getTrackMetadata()}getAnalysisStatus(){var e,i;let s="All systems are functional.",r="checkmark",n="success";return!((e=this.videoTrackStats)===null||e===void 0)&&e.isBlackFrame?this.blackFramesCount++:this.blackFramesCount=0,!((i=this.videoTrackStats)===null||i===void 0)&&i.isFrozenFrame&&(s="Looks like the video is frozen.",r="warning",n="error"),this.blackFramesCount>10&&(s="Video is not being processed by the camera.",r="warning",n="error"),d("div",{class:`row status-text ${n}`},d("dyte-icon",{size:"sm",icon:this.iconPack[r]}),this.t(s))}changeStage(e){this.mediaPermission==="ACCEPTED"&&(e=Math.max(0,e),e=Math.min(1,e),this.stage=e,this.updateProgress(),this.videoPreview&&this.toggleVideoTest())}updateProgress(){this.activeTab==="Troubleshoot"?this.testProgress.emit((this.stage+1)*100/2):this.testProgress.emit(0)}formatLabel(e){const i=e.replace(/([A-Z])/g," $1");return i.charAt(0).toUpperCase()+i.slice(1)}boolToStr(e){return e?"Yes":"No"}normalizeVideoScore(e=0){let i=1;const s=0;return e>i&&(i=e),Math.max(5,Math.round(e*10/(i-s)))}render(){const e={meeting:this.meeting,states:this.states||$,iconPack:this.iconPack,t:this.t,size:this.size};return d(O,null,d("div",{id:"header"},["Report","Troubleshoot"].map(i=>d("dyte-button",{key:i,variant:"ghost",class:{active:this.activeTab===i},onClick:()=>this.setActiveTab(i),iconPack:this.iconPack,t:this.t},this.t(i)))),this.activeTab==="Troubleshoot"&&d("div",{class:"tab-body"},d("div",null,d("div",{class:"stage-indicator"},"Step ",this.stage+1,"/2"),this.stage===0&&d("dyte-debugger-permissions-ui",Object.assign({},e,{mediaType:"video"})),this.stage===1&&d("div",null,d("div",{class:"title"},"Camera Test"),d("div",{class:"text"},this.t("Upon starting the Camera Test, a video preview will be enabled for you.")),d("dyte-button",{size:"md",onClick:()=>this.toggleVideoTest()},this.videoPreview?"Stop":"Start"," Camera Test"),this.videoPreview&&this.videoMetadata&&d("div",{class:"col"},d("div",{class:"sub-title"},"Device Information",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},Object.keys(this.videoMetadata).map(i=>d("div",null,this.formatLabel(i),":",d("span",null,JSON.stringify(this.videoMetadata[i]))))))),d("div",{class:"row"},d("div",{class:"label"},d("span",null,this.t("Device Label")),":"),d("div",{class:"text"},this.t(this.videoMetadata.label))),d("div",{class:"sub-title"},"Video & Device Analysis",d("dyte-information-tooltip",{iconPack:this.iconPack},d("div",{slot:"tootlip-text",class:"tooltip-text"},d("div",null,"Video Score:",d("span",null,this.videoTrackStats.videoScore,"/10")),d("div",null,"Black Frame Detected:",d("span",null,this.boolToStr(this.videoTrackStats.isBlackFrame))),d("div",null,"Frozen Frame Detected:",d("span",null,this.boolToStr(this.videoTrackStats.isFrozenFrame))),d("div",null,"Time:",d("span",null,new Date(this.videoTrackStats.timestamp).toLocaleTimeString()))))),d("div",{class:"video-container"},!this.videoPreview&&d("div",{class:"no-video-preview"},d("dyte-icon",{icon:this.iconPack.video_off,size:"md"})),d("video",{ref:i=>this.videoEl=i,autoPlay:!0,playsInline:!0,muted:!0,class:"video-preview"})),this.getAnalysisStatus()))),d("div",{class:"stage-manager"},this.stage>0&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage-1)},d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_left}),"Prev"),this.stage<1&&d("div",{class:{"stage-button":!0,disabled:this.mediaPermission!=="ACCEPTED"},onClick:()=>this.changeStage(this.stage+1)},"Next",d("dyte-icon",{size:"sm",icon:this.iconPack.chevron_right})))),this.activeTab==="Report"&&d("div",{class:"tab-body"},d("dyte-debugger-issues-ui",Object.assign({},e,{mediaType:"video"}))))}static get watchers(){return{meeting:["meetingChanged"]}}};EA.style=zne;var Fne=Object.freeze({__proto__:null,dyte_debugger_audio:SA,dyte_debugger_screenshare:xA,dyte_debugger_video:EA});const Vne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}a{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.block-quote,blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}",TA=class{constructor(t){N(this,t),this.restoreEmpty=(e,i,s)=>e.trim().length===0?`${i}${e}${i}`:s(e),this.renderLink=e=>d("a",{class:"link",href:e,target:"_blank",rel:"noopener noreferrer"},e),this.renderBold=e=>typeof e=="string"?this.restoreEmpty(e,"*",i=>d("b",null,i)):d("b",null,this.renderTokens(e)),this.renderItalic=e=>typeof e=="string"?this.restoreEmpty(e,"_",i=>d("i",null,i)):d("i",null,this.renderTokens(e)),this.renderStrikethrough=e=>typeof e=="string"?this.restoreEmpty(e,"~",i=>d("s",null,i)):d("b",null,this.renderTokens(e)),this.renderPlainText=e=>typeof e=="string"?e:d("p",null,this.renderTokens(e)),this.renderTokens=e=>e.map(i=>{switch(i.type){case"a":if(typeof i.content=="string")return this.renderLink(i.content);case"b":return this.renderBold(i.content);case"i":return this.renderItalic(i.content);case"s":return this.renderStrikethrough(i.content);case"q":return d("span",{class:"block-quote"});case"plain_text":default:return this.renderPlainText(i.content)}}),this.text=void 0,this.maxLength=hk}render(){const t=this.text.slice(0,this.maxLength),e=uk(t,!0),i=pk(t);return d("p",null,e.length!==0&&d("blockquote",null,e.split(`
`).map(s=>{const r=Rf(s);return d("p",null,this.renderTokens(r))})),i.split(`
`).map(s=>{const r=Rf(s);return d("p",null,this.renderTokens(r))}))}};TA.style=Vne;var Bne=Object.freeze({__proto__:null,dyte_markdown_view:TA});const Hne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:inline-flex;-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1\\.5, 6px);padding-right:var(--dyte-space-1\\.5, 6px);font-size:14px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}span.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}::slotted(dyte-audio-visualizer[slot='start']){margin-right:var(--dyte-space-1\\.5, 6px)}::slotted(dyte-audio-visualizer[slot='end']){margin-left:var(--dyte-space-1\\.5, 6px)}:host([size='sm']){font-size:12px;--tw-bg-opacity:0.6}:host([variant='text']){background-color:transparent;padding:var(--dyte-space-0, 0px)}",CA=class{constructor(t){N(this,t),this.participant=void 0,this.meeting=void 0,this.size=void 0,this.maxLength=20,this.isScreenShare=!1,this.variant="default",this.iconPack=U,this.t=j(),this.length=13}sizeChanged(t){this.length=t==="sm"?8:13}formatNameTag(t,e){return this.isScreenShare?e?`${this.t("screen")} - ${Fs(t,this.length-3)} (${this.t("you")})`:`${this.t("screen")} - ${Fs(t,this.length)}`:e?`${Fs(t,this.length-3)} (${this.t("you")})`:Fs(t,this.length)}render(){var t,e,i;const s=cr(((t=this.participant)===null||t===void 0?void 0:t.name)||""),r=((e=this.participant)===null||e===void 0?void 0:e.id)===((i=this.meeting)===null||i===void 0?void 0:i.self.id);return d(O,{title:s},d("slot",{name:"start"}),d("span",{class:"name"},this.formatNameTag(s,r)),d("slot",{name:"end"}))}static get watchers(){return{size:["sizeChanged"]}}};CA.style=Hne;var Wne=Object.freeze({__proto__:null,dyte_name_tag:CA});const qne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}",PA=class{constructor(t){N(this,t),this.dyteSendNotification=K(this,"dyteSendNotification",7),this.pinnedListener=({isPinned:e})=>{this.isPinned=e},this.stageListener=({stageStatus:e})=>{this.isOnStage=e==="ON_STAGE"},this.inviteToStageToggle=async()=>{const e=this.participant,{stage:i}=this.meeting;if(e.stageStatus==="ACCEPTED_TO_JOIN_STAGE"){this.dyteSendNotification.emit({message:`${e.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-${e.id}`});return}this.isOnStage?(e.isPinned&&e.unpin(),await i.kick([e.userId])):(await i.grantAccess([e.userId]),this.dyteSendNotification.emit({message:`${e.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-invite-${e.id}`})),this.isOnStage=e.stageStatus==="ON_STAGE"},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=U,this.t=j(),this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){this.participant==null||this.participant.removeListener==null||(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("stageStatusUpdate",this.stageListener))}meetingChanged(t){if(t!=null){const{self:e}=t;this.canDisableParticipantAudio=e.permissions.canAllowParticipantAudio||e.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=e.permissions.canAllowParticipantVideo||e.permissions.canDisableParticipantVideo,this.canKickParticipant=e.permissions.kickParticipant,this.canPinParticipant=e.permissions.pinParticipant,this.canAllowParticipantOnStage=e.permissions.acceptPresentRequests}}participantChanged(t){if(t!=null){if(this.audioEnabled=t.audioEnabled,this.videoEnabled=t.videoEnabled,this.isPinned=t.isPinned,this.isOnStage=t.stageStatus==="ON_STAGE",this.audioUpdateListener=({audioEnabled:e})=>{this.audioEnabled=e},this.videoUpdateListener=({videoEnabled:e})=>{this.videoEnabled=e},t.addListener==null)return;t.addListener("audioUpdate",this.audioUpdateListener),t.addListener("videoUpdate",this.videoUpdateListener),t.addListener("pinned",this.pinnedListener),t.addListener("unpinned",this.pinnedListener),t.addListener("stageStatusUpdate",this.stageListener)}}render(){var t,e,i,s,r,n,a,o,c;const u=((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="AUDIO_ROOM",l=((e=this.meeting)===null||e===void 0?void 0:e.self.id)===this.participant.id,h=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&!u||this.canKickParticipant||this.canPinParticipant,g=cr(((i=this.participant)===null||i===void 0?void 0:i.name)||""),m=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes((s=this.meeting)===null||s===void 0?void 0:s.meta.viewType);return d(O,null,d("div",{class:"left"},d("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),d("p",{class:"name",title:g},Fs(g,16)," ",((r=this.meeting)===null||r===void 0?void 0:r.self.id)===((n=this.participant)===null||n===void 0?void 0:n.id)&&this.t("(you)"))),this.view==="sidebar"&&d("div",{class:"right"},m&&d("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),m&&!u&&d("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),h&&d("dyte-menu",{iconPack:this.iconPack,t:this.t},d("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},d("dyte-icon",{class:"more",icon:this.iconPack.more_vertical})),d("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&m&&d("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("unpin"):this.t("pin")),this.canDisableParticipantAudio&&m&&this.audioEnabled&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},d("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&m&&this.videoEnabled&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},d("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participants.turn_off_video")),((a=this.meeting)===null||a===void 0?void 0:a.meta.viewType)==="WEBINAR"&&this.canAllowParticipantOnStage&&((o=this.participant)===null||o===void 0?void 0:o.id)!==((c=this.meeting)===null||c===void 0?void 0:c.self.id)&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:this.inviteToStageToggle},d("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),!l&&this.canKickParticipant&&d("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var f,_;(f=this.meeting)===null||f===void 0||f.participants.kick((_=this.participant)===null||_===void 0?void 0:_.id)}},d("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick")),d("slot",{name:"menu-list"})))))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};PA.style=qne;var Gne=Object.freeze({__proto__:null,dyte_participant:PA});const Jne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}audio{visibility:hidden}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}.dyte-select{width:100%;max-width:100%;text-overflow:ellipsis}dyte-audio-visualizer{flex-shrink:0}dyte-button{border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}dyte-button dyte-icon{margin-right:var(--dyte-space-2, 8px)}`,RA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.stageStateListener=()=>{this.updateCanProduce(this.meeting)},this.deviceListUpdateListener=({added:e,removed:i})=>{e.map(s=>{s.kind==="audioinput"&&(this.audioDevices=[...this.audioDevices,s]),s.kind==="audiooutput"&&(this.speakerDevices=[...this.speakerDevices,s])}),i.map(s=>{s.kind==="audioinput"&&(this.audioDevices=this.audioDevices.filter(r=>r.deviceId!==s.deviceId)),s.kind==="audiooutput"&&(this.speakerDevices=this.speakerDevices.filter(r=>r.deviceId!==s.deviceId))})},this.deviceUpdateListener=({device:e})=>{e.kind==="audioinput"&&(this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{audio:e})),e.kind==="audiooutput"&&(this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{speaker:e}))},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.audioDevices=[],this.speakerDevices=[],this.canProduceAudio=!0,this.currentDevices={audio:void 0,speaker:void 0}}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e,i,s;(e=(t=this.meeting)===null||t===void 0?void 0:t.stage)===null||e===void 0||e.removeListener("stageStatusUpdate",this.stageStateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),(s=this.meeting)===null||s===void 0||s.self.removeListener("deviceUpdate",this.deviceUpdateListener)}updateCanProduce(t){const{self:e,meta:i,stage:s}=t,r=e.permissions.canProduceAudio==="ALLOWED",n=i.viewType==="WEBINAR",a=i.viewType==="LIVESTREAM";this.canProduceAudio=!1,r?this.canProduceAudio=!0:(n||a)&&e.permissions.canProduceAudio==="CAN_REQUEST"&&(s.status==="ON_STAGE"||s.status==="ACCEPTED_TO_JOIN_STAGE")&&(this.canProduceAudio=!0)}meetingChanged(t){t!=null&&Ci(async()=>{var e,i,s,r;const{self:n,stage:a}=t,o=await t.self.getAudioDevices(),c=await t.self.getSpeakerDevices(),u=(e=t.self.getCurrentDevices())===null||e===void 0?void 0:e.audio,l=(i=t.self.getCurrentDevices())===null||i===void 0?void 0:i.speaker;this.currentDevices={audio:u,speaker:l},this.updateCanProduce(t),a==null||a.addListener("stageStatusUpdate",this.stageStateListener),n.addListener("deviceListUpdate",this.deviceListUpdateListener),n.addListener("deviceUpdate",this.deviceUpdateListener),u!=null?this.audioDevices=[(s=o.find(h=>h.deviceId===u.deviceId))!==null&&s!==void 0?s:u,...o.filter(h=>h.deviceId!==u.deviceId)]:this.audioDevices=o,l!=null?this.speakerDevices=[(r=c.find(h=>h.deviceId===l.deviceId))!==null&&r!==void 0?r:l,...c.filter(h=>h.deviceId!==l.deviceId)]:this.speakerDevices=c})}testAudio(){var t;(t=this.testAudioEl)===null||t===void 0||t.play()}setDevice(t,e){var i,s;if(kf(this.meeting))return;const r=t==="audio"?this.audioDevices.find(n=>n.deviceId===e):this.speakerDevices.find(n=>n.deviceId===e);this.currentDevices=Object.assign(Object.assign({},this.currentDevices),{[t]:r}),r!=null&&((i=this.meeting)===null||i===void 0||i.self.setDevice(r),r.kind==="audiooutput"&&((s=this.testAudioEl)===null||s===void 0||s.setSinkId(r.deviceId)))}render(){var t,e;if(this.meeting==null)return null;let i=0,s=0;const r=this.states||$,n=((t=r==null?void 0:r.prefs)===null||t===void 0?void 0:t.muteNotificationSounds)===!0||E4("mute-notification-sounds")==="true";return d(O,null,d("audio",{preload:"auto",src:"https://assets.dyte.io/ui-kit/speaker-test.mp3",ref:a=>this.testAudioEl=a}),this.canProduceAudio&&d("div",{class:"group",part:"microphone-selection"},d("label",null,"Microphone (input)"),d("div",{class:"row"},d("select",{class:"dyte-select",onChange:a=>this.setDevice("audio",a.target.value)},this.audioDevices.map(({deviceId:a,label:o})=>{var c;return d("option",{value:a,selected:((c=this.currentDevices.audio)===null||c===void 0?void 0:c.deviceId)===a},o||`Microphone ${++i}`)})),d("dyte-audio-visualizer",{participant:(e=this.meeting)===null||e===void 0?void 0:e.self,iconPack:this.iconPack,t:this.t}))),d("div",{class:"group",part:"speaker-selection"},this.speakerDevices.length>0&&!kf(this.meeting)&&d("div",null,d("label",null,"Speaker (output)"),d("div",{class:"row"},d("select",{class:"dyte-select",onChange:a=>this.setDevice("speaker",a.target.value)},this.speakerDevices.map(({deviceId:a,label:o})=>{var c;return d("option",{value:a,selected:((c=this.currentDevices.speaker)===null||c===void 0?void 0:c.deviceId)===a},o||`Speaker ${++s}`)})))),d("dyte-button",{variant:"secondary",onClick:()=>this.testAudio(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.speaker,slot:"start",iconPack:this.iconPack,t:this.t}),"Test")),d("div",{class:"group",part:"notification-toggle"},d("div",{class:"row"},d("label",{htmlFor:"notification-toggle"},"Notification sound"),d("dyte-switch",{id:"notification-toggle",checked:!n,onDyteChange:a=>{var o;const{checked:c}=a.target,u=!c;this.stateUpdate.emit({prefs:{muteNotificationSounds:u}}),$.prefs=Object.assign(Object.assign({},(o=$.prefs)!==null&&o!==void 0?o:{}),{muteNotificationSounds:u}),x4("mute-notification-sounds",u)},iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{meeting:["meetingChanged"]}}};RA.style=Jne;const Kne=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column}.dyte-select{width:100%;text-overflow:ellipsis}dyte-participant-tile{margin-left:auto;margin-right:auto;margin-bottom:var(--dyte-space-4, 16px);max-width:100%}#icon{padding-bottom:var(--dyte-space-1, 4px)}.apply-button{height:var(--dyte-space-10, 40px)}label{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.group{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px)}.group>*{margin-bottom:var(--dyte-space-2, 8px)}.group>*:last-child{margin-bottom:var(--dyte-space-0, 0px)}.group select{flex:1 1 0%}.row{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-3, 12px)}`,IA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onVideoUpdate=e=>{this.videoEnabled=e.videoEnabled},this.deviceListUpdateListener=({added:e,removed:i})=>{e.map(s=>{s.kind==="videoinput"&&(this.videoDevices=[...this.videoDevices,s])}),i.map(s=>{s.kind==="videoinput"&&(this.videoDevices=this.videoDevices.filter(r=>r.deviceId!==s.deviceId))})},this.deviceUpdateListener=({device:e})=>{e.kind==="videoinput"&&(this.currentDevice=e)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.videoDevices=[],this.currentDevice=void 0,this.videoEnabled=void 0}componentDidLoad(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i,s;t!=null&&(this.videoEnabled=t.self.videoEnabled,(e=t.self)===null||e===void 0||e.addListener("videoUpdate",this.onVideoUpdate),(i=t.self)===null||i===void 0||i.addListener("deviceListUpdate",this.deviceListUpdateListener),(s=t.self)===null||s===void 0||s.addListener("deviceUpdate",this.deviceUpdateListener),Ci(async()=>{var r,n;const a=await t.self.getVideoDevices(),o=(r=t.self.getCurrentDevices())===null||r===void 0?void 0:r.video;o!=null?this.videoDevices=[(n=a.find(c=>c.deviceId===o.deviceId))!==null&&n!==void 0?n:o,...a.filter(c=>c.deviceId!==o.deviceId)]:this.videoDevices=a}))}disconnectedCallback(){var t,e,i;(t=this.meeting.self)===null||t===void 0||t.removeListener("videoUpdate",this.onVideoUpdate),(e=this.meeting)===null||e===void 0||e.self.removeListener("deviceListUpdate",this.deviceListUpdateListener),(i=this.meeting)===null||i===void 0||i.self.removeListener("deviceUpdate",this.deviceUpdateListener)}async setDevice(t){var e;const i=this.videoDevices.find(s=>s.deviceId===t);this.currentDevice=i,i!=null&&await((e=this.meeting)===null||e===void 0?void 0:e.self.setDevice(i))}render(){var t,e,i;if(this.meeting==null)return null;let s=0;const r=this.states||$,n=((t=r==null?void 0:r.prefs)===null||t===void 0?void 0:t.mirrorVideo)===!0||E4("mirror-video")==="true";return d(O,null,d("div",{class:"group",part:"tile-preview"},this.videoEnabled===!0?d("dyte-participant-tile",{meeting:this.meeting,participant:(e=this.meeting)===null||e===void 0?void 0:e.self,iconPack:this.iconPack,t:this.t,states:r,isPreview:!0}):d("div",{class:"camera-off-helper"},d("dyte-participant-tile",{meeting:this.meeting,participant:(i=this.meeting)===null||i===void 0?void 0:i.self},d("div",null,d("dyte-icon",{id:"icon",icon:this.iconPack.video_off,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}),d("div",null,"Camera is off"))))),d("div",{class:"group",part:"camera-selection"},d("label",null,"Camera"),d("div",{class:"row"},d("select",{class:"dyte-select",onChange:a=>this.setDevice(a.target.value)},this.videoDevices.map(({deviceId:a,label:o})=>{var c;return d("option",{selected:((c=this.currentDevice)===null||c===void 0?void 0:c.deviceId)===a,value:a},o||`Camera ${++s}`)})))),d("div",{class:"group",part:"mirror-toggle"},d("div",{class:"row"},d("label",{htmlFor:"mirror-toggle"},"Mirror my Video"),d("dyte-switch",{checked:n,iconPack:this.iconPack,t:this.t,onDyteChange:a=>{var o;const{checked:c}=a.target;this.stateUpdate.emit({prefs:{mirrorVideo:c}}),$.prefs=Object.assign(Object.assign({},(o=$.prefs)!==null&&o!==void 0?o:{}),{mirrorVideo:c}),x4("mirror-video",c)}}))))}static get watchers(){return{meeting:["meetingChanged"]}}};IA.style=Kne;var Qne=Object.freeze({__proto__:null,dyte_settings_audio:RA,dyte_settings_video:IA});const Yne=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column;gap:var(--dyte-space-2, 8px);overflow-y:auto;font-family:var(--dyte-font-family, sans-serif)}dyte-button{z-index:10}.col{display:flex;flex-direction:column;align-items:center}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host([size='sm']){margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;transition:all 0.3s linear}:host([size='md']){height:var(--dyte-space-24, 96px);width:100%;flex-direction:row;transition:all 0.3s linear}:host .tab{margin:var(--dyte-space-0, 0px)}}:host([size='sm']){flex-direction:column;margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row;gap:var(--dyte-space-2, 8px);overflow-x:auto}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);text-overflow:clip;min-width:100px;height:40px}:host([size='sm']) .tab .col{display:flex;flex-direction:row;align-items:center;gap:var(--dyte-space-2, 8px)}:host([size='sm']) .tab .col img,:host([size='sm']) .tab .col dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([layout='column']){flex-direction:column}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}`,AA=class{constructor(t){N(this,t),this.tabChange=K(this,"tabChange",7),this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=Re,this.layout="row",this.iconPack=U,this.t=j(),this.activeTab=void 0,this.tabs=[]}render(){return d(O,null,d("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t,size:this.size}),this.tabs.map(t=>{var e,i,s,r,n;if(t.type==="screenshare"){const a=t.participant,o=cr(a.name);return d("dyte-button",{title:`${o}'s Screen Share`,key:t.participant.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((e=this.activeTab)===null||e===void 0?void 0:e.type)==="screenshare"&&((i=this.activeTab)===null||i===void 0?void 0:i.participant.id)===t.participant.id},onClick:()=>this.tabChange.emit(t)},d("div",{class:"center col"},d("dyte-icon",{icon:this.iconPack.share_screen_person,iconPack:this.iconPack,t:this.t}),d("span",{class:"name"},a.id===((s=this.meeting)===null||s===void 0?void 0:s.self.id)?this.t("you"):Fs(o,6))))}else if(t.type==="plugin"){const a=t.plugin;return d("dyte-button",{title:a.name,key:a.id,kind:"icon",iconPack:this.iconPack,t:this.t,class:{tab:!0,active:((r=this.activeTab)===null||r===void 0?void 0:r.type)==="plugin"&&((n=this.activeTab)===null||n===void 0?void 0:n.plugin.id)===a.id},onClick:()=>this.tabChange.emit(t)},d("div",{class:"center col"},d("img",{src:a.picture}),d("span",{class:"name"},Fs(a.name,6))))}}))}};AA.style=Yne;var Zne=Object.freeze({__proto__:null,dyte_tab_bar:AA});const Xne=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));display:flex;justify-content:center;vertical-align:middle;animation:show 0.4s ease;transition:0.4s;z-index:50}.ctr{box-sizing:border-box;display:inline-flex;height:100%;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}.message{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message p{margin:var(--dyte-space-0, 0px);display:inline-block}.message blockquote{display:none}:host(.exit){animation:exit 0.4s ease}@keyframes show{0%{opacity:0;transform:translateY(120px)}100%{opacity:1;transform:translateY(0px)}}@keyframes exit{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-120px)}}:host([size='sm']){font-size:14px}",DA=class{constructor(t){N(this,t),this.dismiss=K(this,"dyteTranscriptDismiss",7),this.transcript=void 0,this.t=j()}connectedCallback(){this.transcriptChanged(this.transcript)}transcriptChanged(t){t!=null&&t.id&&setTimeout(()=>{this.dismiss.emit(t.id)},1e4)}render(){return d(O,null,d("div",{class:"ctr"},d("p",{class:"message"},d(Sh,{message:`${this.transcript.name}: ${this.transcript.transcript}`}))))}static get watchers(){return{transcript:["transcriptChanged"]}}};DA.style=Xne;var eae=Object.freeze({__proto__:null,dyte_transcript:DA});const P0=(t,e)=>{if(t==null)return;const i=3,s=Math.round(i/2),r=[...Array(i)].map((m,f)=>{let _=f;return _>s-1&&(_=i-_-1),Math.round((_+1)/(s+1)*e)}),{width:n,height:a}=t,o=t.getContext("2d");let c=2;const u=4,l=n*1/r.length,h=l-u;o.clearRect(0,0,n,a),o.fillStyle="rgb(0,0,0,0.0)",o.fillRect(0,0,n,a);const g=getComputedStyle(t).getPropertyValue("color");o.fillStyle=g,o.strokeStyle=g,o.lineCap="round",o.lineWidth=4,o.beginPath();for(const m of r){const f=Math.min(-Math.abs(m*1.2/10*a)+a/2,a/2-2.5),_=Math.max((a/2-f)*2,5);o.moveTo(c+h/2,f),o.lineTo(c+h/2,f+_),c+=l}o.stroke()},tae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-6, 24px);width:-moz-fit-content;width:fit-content}canvas,dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){transform:scale(0.9)}canvas{display:none}canvas.visible{display:block}canvas.bars{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",MA=class{constructor(t){N(this,t),this.variant="bars",this.participant=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.isScreenShare=!1,this.audioEnabled=void 0,this.volume=0}connectedCallback(){this.participantChanged(this.participant)}componentDidLoad(){P0(this.visualizer,0)}disconnectedCallback(){var t,e,i;(t=this.hark)===null||t===void 0||t.stop(),this.audioUpdateListener&&((e=this.participant)===null||e===void 0||e.removeListener("audioUpdate",this.audioUpdateListener)),this.screenShareUpdateListener&&((i=this.participant)===null||i===void 0||i.removeListener("screenShareUpdate",this.screenShareUpdateListener))}participantChanged(t){t!=null&&(this.audioUpdateListener=({audioEnabled:e,audioTrack:i})=>{var s;if((s=this.hark)===null||s===void 0||s.stop(),e&&i!=null){this.audioEnabled=!0;const r=new MediaStream;r.addTrack(i),this.calcVolume(r),P0(this.visualizer,0)}else this.volume=0,this.audioEnabled=!1},this.isScreenShare?(this.screenShareUpdateListener=({screenShareEnabled:e,screenShareTracks:i})=>{this.audioUpdateListener({audioEnabled:e&&i.audio!=null,audioTrack:i.audio})},this.screenShareUpdateListener(t),t.addListener("screenShareUpdate",this.screenShareUpdateListener)):(this.audioUpdateListener(t),t.addListener("audioUpdate",this.audioUpdateListener)))}calcVolume(t){this.hark=B4(t,{play:!1,interval:1e3/10}),this.hark.on("volume_change",e=>{const i=this.volume;let s=Math.round(10**(e/115)*10);s<3&&(s=0);let r=Math.round((i*2+s)/3);i!==r&&(this.volume=r,P0(this.visualizer,this.volume))})}render(){return d(O,null,d("canvas",{width:"24",height:"24",class:{bars:!0,visible:this.audioEnabled},ref:t=>this.visualizer=t,part:"canvas"}),!this.isScreenShare&&!this.audioEnabled&&d("dyte-icon",{icon:this.iconPack.mic_off,part:"mic-off-icon",iconPack:this.iconPack,t:this.t}))}static get watchers(){return{participant:["participantChanged"]}}};MA.style=tae;const iae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-6, 24px);width:var(--dyte-space-10, 40px);align-items:center;padding:var(--dyte-space-1, 4px);border-radius:9999px;background-color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));cursor:pointer}.switch{box-sizing:border-box;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);background-color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px;transition-property:var(--dyte-transition-property, all);transition-duration:200ms}:host(.checked){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}:host(.checked) .switch{transform:translateX(100%)}:host([readonly]),:host([disabled]){cursor:not-allowed;opacity:0.6}",OA=class{constructor(t){N(this,t),this.dyteChange=K(this,"dyteChange",4),this.onClick=()=>{!this.readonly&&!this.disabled&&(this.checked=!this.checked)},this.onKeyPress=e=>{if(!this.readonly)switch(e.key){case"Enter":case" ":this.checked=!this.checked;break}},this.checked=!1,this.readonly=!1,this.disabled=!1,this.iconPack=U,this.t=j()}connectedCallback(){this.checkedChange(this.checked)}checkedChange(t){this.checked=t,this.dyteChange.emit(t)}render(){return d(O,{role:"switch",tabIndex:this.disabled&&0,"aria-readonly":this.readonly,"aria-checked":this.checked,"aria-disabled":this.disabled,class:{checked:this.checked},onClick:this.onClick,onKeyPress:this.onKeyPress},d("div",{class:"switch",part:"switch"}))}static get watchers(){return{checked:["checkedChange"]}}};OA.style=iae;var sae=Object.freeze({__proto__:null,dyte_audio_visualizer:MA,dyte_switch:OA});const rae={joined:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",left:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_join.mp3",message:"https://dyte-uploads.s3.ap-south-1.amazonaws.com/notification_message.mp3"};class nae{constructor(e){this.meeting=e,this.audio=document.createElement("audio"),this.audio.volume=.3}play(e,i=3e3){var s;this.playing||(this.playing=!0,this.audio.src=rae[e],this.audio.volume=.3,(s=this.audio.play())===null||s===void 0||s.catch(r=>{Wp.error(`[dyte-notifications] play() failed
`,{sound:e,duration:i},r)}),setTimeout(()=>{this.playing=!1},i))}async setDevice(e){var i,s,r;kf(this.meeting)||await((r=(s=(i=this.audio)===null||i===void 0?void 0:i.setSinkId)===null||s===void 0?void 0:s.call(i,e))===null||r===void 0?void 0:r.catch(n=>{Wp.error(`[dyte-notifications] setSinkId() error
`,n)}))}}const aae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));display:flex;flex-direction:column;width:var(--dyte-space-72, 288px);padding-top:var(--dyte-space-5, 20px);padding-bottom:var(--dyte-space-5, 20px);padding-left:var(--dyte-space-8, 32px);padding-right:var(--dyte-space-8, 32px)}header{font-size:20px}dyte-spinner{margin-top:var(--dyte-space-10, 40px);margin-bottom:var(--dyte-space-10, 40px);margin-left:auto;margin-right:auto}ul{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-4, 16px);height:var(--dyte-space-48, 192px);padding:var(--dyte-space-0, 0px);overflow-y:auto;list-style-type:none;display:flex;flex-direction:column;gap:var(--dyte-space-2, 8px)}ul li{margin-right:var(--dyte-space-2, 8px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px)}ul li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}ul li dyte-avatar{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,LA=class{constructor(t){N(this,t),this.channel=void 0,this.t=j(),this.iconPack=U,this.members=[]}renderMembers(){return d("ul",{class:"scrollbar"},this.members.map(t=>d("li",null,d("dyte-avatar",{participant:{name:t.name,picture:t.picture},size:"sm"}),d("span",null,t.name))))}render(){return d(O,null,d("header",null,this.t("chat.channel_members")),this.renderMembers())}};LA.style=aae;const oae="header{box-sizing:border-box;height:var(--dyte-space-16, 64px);width:100%;padding:var(--dyte-space-4, 16px);padding-left:var(--dyte-space-12, 48px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}header.searching{justify-content:flex-end}header.searching .channel-details{display:none}header .channel-details{display:flex;flex-grow:1;flex-direction:column;justify-content:center;height:var(--dyte-space-9, 36px);width:var(--dyte-space-1, 4px)}header .channel-details .name{font-weight:500}header .channel-details .members{margin-top:var(--dyte-space-0\\.5, 2px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}header .channel-tools{display:flex;flex-shrink:0;justify-content:flex-end;gap:var(--dyte-space-1, 4px);min-width:var(--dyte-space-24, 96px)}header .channel-tools dyte-tooltip{height:var(--dyte-space-8, 32px);width:var(--dyte-space-10, 40px);display:flex}header .search-input{height:var(--dyte-space-8, 32px);width:var(--dyte-space-48, 192px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header .name{font-size:16px}header .br-primary-btn{background-color:transparent}header .br-primary-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}@media (orientation: landscape) and (min-width: 400px){header{padding-left:var(--dyte-space-4, 16px)}header.searching .channel-details{display:flex}}",NA=class{constructor(t){N(this,t),this.search=K(this,"search",7),this.searchDismissed=K(this,"searchDismissed",7),this.meeting=void 0,this.channel=void 0,this.iconPack=U,this.t=j(),this.showChannelDetailsDialog=!1,this.showSearchBar=!1,this.members=[]}onChannelChanged(){this.$searchInput&&(this.$searchInput.value=""),this.showSearchBar=!1,this.channel.isDirectMessage||this.meeting.chat.getChannelMembers(this.channel.id).then(t=>{this.members=t})}connectedCallback(){this.onChannelChanged()}renderChannelDetails(){return d("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.showChannelDetailsDialog=!1},iconPack:this.iconPack,t:this.t},d("dyte-channel-details",{members:this.members,channel:this.channel}))}render(){return this.channel?d(O,null,this.showChannelDetailsDialog&&this.renderChannelDetails(),d("header",{class:{searching:this.showSearchBar}},d("div",{class:"channel-details"},d("span",{class:"name"},this.channel.displayName),!this.channel.isDirectMessage&&d("span",{class:"members"},this.members.map(t=>t.name).join(", "))),d("div",{class:"channel-tools"},!this.channel.isDirectMessage&&d("dyte-tooltip",{label:this.t("chat.channel_members"),iconPack:this.iconPack,t:this.t,variant:"primary"},d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"secondary",size:"md",onClick:()=>{this.showChannelDetailsDialog=!this.showChannelDetailsDialog},class:"br-primary-btn"},d("dyte-icon",{icon:this.iconPack.people,iconPack:this.iconPack,t:this.t})))))):null}static get watchers(){return{channel:["onChannelChanged"]}}};NA.style=oae;const cae=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex}.container{display:flex;height:100%;width:var(--dyte-space-96, 384px);flex-direction:column;position:absolute;--tw-translate-x:calc(var(--dyte-space-96, 384px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-sm, 1px);border-left-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-right-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}@keyframes fade{0%{opacity:0}100%{opacity:1}}.overlay-container{width:100vw;--tw-translate-x:var(--dyte-space-96, 384px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;animation:fade 0.8s}.overlay-container .sidebar-btn{position:static;padding:var(--dyte-space-4, 16px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.sidebar-btn{position:absolute;right:calc(var(--dyte-space-9, 36px) * -1);top:var(--dyte-space-4, 16px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-7, 28px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: landscape) and (min-width: 400px){.container{position:static;--tw-translate-x:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.sidebar-btn,.overlay-container{display:none}}.search-wrapper{display:flex;align-items:center;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-2, 8px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);height:var(--dyte-space-8, 32px);width:100%}.search .search-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));border-top-right-radius:var(--dyte-border-radius-sm, 4px);border-bottom-right-radius:var(--dyte-border-radius-sm, 4px)}.search input{box-sizing:border-box;width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;font-size:14px;line-height:1.25rem}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input{border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px)}.channel-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);overflow-y:scroll}.channel-container .channel{display:flex;align-items:center;justify-content:space-between;gap:var(--dyte-space-2, 8px);padding:var(--dyte-space-0, 0px);border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-border-opacity))}.channel-container .channel:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .channel:hover .latest-msg-time,.channel-container .channel:hover .latest-msg,.channel-container .channel:hover .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .channel-display{display:flex;gap:var(--dyte-space-2, 8px);align-self:center;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-0, 0px)}.channel-container .channel-display dyte-avatar{height:var(--dyte-space-9, 36px);width:var(--dyte-space-9, 36px);flex-shrink:0;font-size:12px}.channel-container .channel-display dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-shrink:0;padding:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.channel-container .channel-card{width:100%;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-left:var(--dyte-space-1, 4px)}.channel-container .channel-card .channel-name{max-width:var(--dyte-space-60, 240px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:500}.channel-container .channel-card .latest-msg{margin:var(--dyte-space-0, 0px);max-width:var(--dyte-space-56, 224px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px}.channel-container .channel-card .latest-msg.new{font-weight:200;font-style:italic;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.channel-container .channel-card .latest-msg-time{font-size:12px;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.channel-container .channel-meta{width:var(--dyte-space-12, 48px);display:flex;flex-direction:column;align-items:flex-end;justify-content:space-between;gap:var(--dyte-space-1\\.5, 6px);font-size:12px;font-weight:600}.channel-container .new-msgs-count{height:var(--dyte-space-4, 16px);min-width:var(--dyte-space-4, 16px);padding-top:1px;padding-bottom:1px;padding-left:2px;padding-right:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:var(--dyte-border-radius-sm, 4px);text-align:center;font-size:12px}.channel-container .selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.channel-container .selected .latest-msg-time,.channel-container .selected .latest-msg,.channel-container .selected .latest-msg.new{color:rgb(var(--dyte-colors-text-on-brand-700, var(--dyte-colors-text-700, 255 255 255 / 0.64)))}.channel-container .highlight .channel-title span{font-weight:700}.latest-msg p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.latest-msg blockquote{display:none}.recent-message-row{margin-bottom:var(--dyte-space-2, 8px);display:flex;width:100%;flex-direction:row;justify-content:space-between}`,UA=class{constructor(t){N(this,t),this.channelChanged=K(this,"channelChanged",7),this.handleResize=e=>{this.isHidden=!e.matches},this.channelSelected=e=>{this.channelChanged.emit(e),this.onRevealClicked()},this.onSearchInput=e=>{this.searchQuery=e.target.value},this.onRevealClicked=()=>{this.matchMedia.matches||(this.isHidden=!this.isHidden)},this.renderChannelDisplayPic=e=>{const i=e.displayPictureUrl&&e.displayPictureUrl.length!==0;return e.isDirectMessage||i?d("div",{class:"channel-display"},d("dyte-avatar",{participant:{name:e.displayName,picture:e.displayPictureUrl}})):d("div",{class:"channel-display"},d("dyte-icon",{icon:this.iconPack.people,slot:"start"}))},this.renderRecentMessage=e=>{if(!e.latestMessage)return d("p",{class:"latest-msg new"},this.t("chat.start_conversation"));let i=e.isDirectMessage?"":`${e.latestMessage.displayName}: `;if(e.latestMessage.type==="text")return d("p",{class:"latest-msg"},i,d(Sh,{message:e.latestMessage.message}));let s="";return e.latestMessage.type==="image"?s=this.t("image"):e.latestMessage.type==="file"&&(s=this.t("file")),d("p",{class:"latest-msg"},`${i}${s}`)},this.channels=void 0,this.selectedChannelId=void 0,this.iconPack=U,this.t=j(),this.showRecentMessage=!1,this.isHidden=!1,this.searchQuery=""}connectedCallback(){this.matchMedia=window.matchMedia("(orientation: landscape) and (min-width: 400px)"),this.matchMedia.addEventListener("change",this.handleResize),this.isHidden=!this.matchMedia.matches}disconnectedCallback(){this.matchMedia.removeEventListener("change",this.handleResize)}componentDidRender(){this.$el.style.transform=this.isHidden?"translateX(-380px)":"translateX(0)"}getTimeLabel(t){const e=t.time,i=new Date,s=new Date(i);s.setDate(i.getDate()-1);const r=new Date(i);if(r.setDate(i.getDate()-i.getDay()-1),e.toDateString()===i.toDateString())return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e.toDateString()===s.toDateString())return this.t("date.yesteday");if(e>r){const n=["date.sunday","date.monday","date.tuesday","date.wednesday","date.thursday","date.friday","date.saturday"];return this.t(n[e.getDay()])}else return Intl.DateTimeFormat([],{day:"2-digit",month:"2-digit",year:"2-digit"}).format(e)}render(){return d(O,null,d("div",{class:"container",ref:t=>this.$el=t},this.isHidden&&d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},d("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})),d("slot",{name:"header"}),d("div",{class:"search-wrapper"},d("div",{class:"search"},d("input",{type:"search",autocomplete:"off",placeholder:this.t("chat.search_conversations"),onInput:this.onSearchInput}),d("dyte-icon",{icon:this.iconPack.search,iconPack:this.iconPack,t:this.t,class:"search-icon"}))),d("div",{class:"channel-container scrollbar",role:"list"},this.channels.filter(t=>this.searchQuery===""||t.displayName.includes(this.searchQuery)).map(t=>d("div",{class:{channel:!0,selected:t.id===this.selectedChannelId,highlight:!!t.unreadCount},role:"listitem",onClick:()=>{this.channelSelected(t.id)}},this.renderChannelDisplayPic(t),d("div",{class:"channel-card","is-direct-message":t.isDirectMessage},d("div",{class:"recent-message-row"},d("span",{class:"channel-name"},t.displayName),t.latestMessage&&d("span",{class:"latest-msg-time"},this.getTimeLabel(t.latestMessage))),d("div",{class:"recent-message-row"},this.renderRecentMessage(t),t.unreadCount>0&&t.id!==this.selectedChannelId?d("span",{class:"new-msgs-count"},t.unreadCount<99?t.unreadCount:"99+"):null)))))),!this.isHidden&&d("div",{class:"overlay-container"},d("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"icon",variant:"ghost",size:"md",onClick:this.onRevealClicked,class:"sidebar-btn"},d("dyte-icon",{icon:this.isHidden?this.iconPack.chevron_left:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t}))))}};UA.style=cae;const dae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-input{position:relative;margin:var(--dyte-space-2, 8px);z-index:10;box-sizing:border-box;display:flex;flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));box-sizing:border-box;padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::placeholder{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea{border-top-left-radius:var(--dyte-border-radius-md, 8px);border-top-right-radius:var(--dyte-border-radius-md, 8px);font-family:var(--dyte-font-family, sans-serif);outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;min-height:60px;font-size:14px}.chat-buttons{border-bottom-right-radius:var(--dyte-border-radius-md, 8px);border-bottom-left-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons .right{z-index:10}.chat-buttons .right .edit-buttons{display:flex;gap:var(--dyte-space-2, 8px)}.chat-buttons>div{display:flex;align-items:center}dyte-emoji-picker{z-index:0;position:absolute;bottom:var(--dyte-space-32, 128px);border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));animation:0.3s slide-up ease}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}.member-list{margin:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-1, 4px);max-height:var(--dyte-space-28, 112px);min-width:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);padding:var(--dyte-space-0, 0px);position:absolute;bottom:var(--dyte-space-28, 112px);list-style-type:none;overflow-y:auto;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-sm, 4px);--tw-border-spacing-x:var(--dyte-space-2, 8px);--tw-border-spacing-y:var(--dyte-space-2, 8px);border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-style:solid;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.member-list .member{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-4, 16px);cursor:pointer}.member-list .member dyte-avatar{flex-shrink:0;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);font-size:14px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.member-list .member span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.member-list .member:hover,.member-list .member.selected{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.suggested-replies{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-3, 12px);display:flex;flex-wrap:nowrap;gap:var(--dyte-space-2, 8px);list-style-type:none;overflow-x:auto}.suggested-replies dyte-tooltip{flex-shrink:0}.suggested-replies li{padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.75);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));cursor:pointer}.suggested-replies li:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.preview-overlay{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-md, 8px)}.file-preview{position:absolute;top:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);max-width:-moz-fit-content;max-width:fit-content;max-height:var(--dyte-space-20, 80px)}.file-preview:hover dyte-tooltip{display:block}.file-preview dyte-tooltip{position:absolute;top:calc(var(--dyte-space-1, 4px) * -1);left:calc(var(--dyte-space-1, 4px) * -1);display:none;margin-left:calc(var(--dyte-space-1, 4px) * -1);margin-top:calc(var(--dyte-space-1, 4px) * -1)}.file-preview dyte-button{display:flex;height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);align-items:center;justify-content:center;border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));border:1px solid rgb(var(--dyte-colors-text-1000, 255 255 255))}.file-preview dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.preview-image{height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);-o-object-fit:cover;object-fit:cover;max-height:100%;max-width:100%;overflow:clip;border-radius:var(--dyte-border-radius-md, 8px)}.preview-file{padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:var(--dyte-border-radius-md, 8px);max-width:200px}@keyframes scroll-text{0%{transform:translateX(0%)}70%{transform:translateX(-100%)}80%{transform:translateX(0%)}100%{transform:translateX(0%)}}`,zo="@",$A=class{constructor(t){N(this,t),this.onNewMessage=K(this,"dyteNewMessage",7),this.onEditMessage=K(this,"dyteEditMessage",7),this.onEditCancelled=K(this,"dyteEditCancelled",7),this.fileReader=new FileReader,this.fileToUpload=null,this.handleKeyDown=e=>{if(e.key===zo&&[void 0," "].includes(this.$textArea.value.at(-1))&&(this.mentionQuery=zo),e.key==="ArrowDown"&&(this.focusedMemberIndex=Math.min(this.focusedMemberIndex+1,this.getFilteredMembers().length-1)),e.key==="ArrowUp"&&(this.focusedMemberIndex=Math.max(0,this.focusedMemberIndex-1)),(e.key==="Escape"||e.key==="Backspace"&&this.mentionQuery===zo)&&(this.mentionQuery=""),["Enter","Tab"," "].includes(e.key)&&this.mentionQuery!==""){const i=this.getFilteredMembers()[this.focusedMemberIndex];this.onMemberSelect(i),e.preventDefault();return}e.key==="Enter"&&e.shiftKey?this.$textArea.clientHeight<200&&(this.$textArea.style.height=this.$textArea.clientHeight+20+"px"):e.key==="Enter"?(e.preventDefault(),this.prefill.editMessage?this.handleEditMessage():this.handleSendMessage()):e.key==="Backspace"&&(this.$textArea.value.endsWith(`
`)?this.$textArea.style.height=this.$textArea.clientHeight-20+"px":this.$textArea.value===""&&(this.$textArea.style.height="auto"))},this.handleKeyUp=e=>{if(this.mentionQuery!==""){const i=xu(this.$textArea.value.trim()),s=i.substring(0,i.indexOf(zo));this.mentionQuery=`${zo}${xu(s)}`}},this.onPaste=e=>{const i=e.clipboardData||e.originalEvent.clipboardData;Ci(()=>{i&&i.items&&i.items.length>0&&(fA(i.items,this.generateFilePreview),this.$textArea.value="")})},this.generateFilePreview=(e,i)=>{this.fileToUpload={type:e,image:i,file:i},e==="image"?this.fileReader.readAsDataURL(i):e==="file"&&(this.filePreview=i.name)},this.sendFile=()=>{!this.canSendFiles||(this.fileToUpload.type==="image"?this.onNewMessage.emit({type:"image",file:this.fileToUpload.image,image:this.fileToUpload.image}):this.onNewMessage.emit({type:"file",file:this.fileToUpload.file}),this.cleanUpFileUpload())},this.handleSendMessage=()=>{if(!this.canSendTextMessage)return;if(this.fileToUpload!==null){this.sendFile();return}const e=this.$textArea.value.trim();e.length>0&&(this.prefill.replyMessage?this.onNewMessage.emit({type:"text",message:e,replyTo:this.prefill.replyMessage}):this.onNewMessage.emit({type:"text",message:e}),this.cleanup())},this.cleanup=()=>{this.mentionQuery="",this.focusedMemberIndex=0,this.$textArea.value="",this.$textArea.style.height="auto",Yn.setItem(this.storageKey,"")},this.handleEditMessage=()=>{var e;let i=this.$textArea.value.trim();((e=this.prefill.editMessage)===null||e===void 0?void 0:e.message)&&lk.test(this.prefill.editMessage.message)&&(i=`${uk(this.prefill.editMessage.message)}

${i}`),this.onEditMessage.emit({id:this.prefill.editMessage.id,message:i,channelId:this.prefill.editMessage.channelId}),this.cleanup()},this.handleEditCancel=()=>{this.onEditCancelled.emit(),this.cleanup()},this.initializeTextField=e=>{this.$textArea=e;const i=Yn.getItem(this.storageKey)||"";this.$textArea.value=i},this.onMemberSelect=e=>{const i=xu(this.mentionQuery),s=xu(this.$textArea.value.trim()).replace(i,"");this.$textArea.value=xu(s)+`${zo}${e.name} `,this.mentionQuery="",this.focusedMemberIndex=0,Ci(()=>this.$textArea.focus())},this.getFilteredMembers=()=>{const e=this.mentionQuery.replace(zo,"");return this.members.filter(i=>i.name.toLowerCase().includes(e.toLowerCase()))},this.cleanUpFileUpload=()=>{this.filePreview=null,this.fileToUpload=null},this.renderSuggestedReplies=()=>{if(!!this.prefill.suggestedReplies&&this.prefill.suggestedReplies.length!==0)return d("ul",{class:"suggested-replies scrollbar"},this.prefill.suggestedReplies.map(e=>d("dyte-tooltip",{label:this.t("chat.click_to_send")},d("li",{onClick:()=>this.onNewMessage.emit({type:"text",message:e})},e))))},this.renderMenu=()=>{if(this.mentionQuery.length===0)return;const e=this.getFilteredMembers();if(e.length!==0)return d("ul",{class:"member-list scrollbar"},e.map((i,s)=>d("li",{class:{member:!0,selected:s===this.focusedMemberIndex},onClick:()=>this.onMemberSelect(i),ref:r=>{s===this.focusedMemberIndex&&Ci(()=>{r&&r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})}},d("dyte-avatar",{participant:{name:i.name,picture:i.picture},size:"sm"}),d("span",null,i.name))))},this.canSendTextMessage=!1,this.canSendFiles=!1,this.size=void 0,this.iconPack=U,this.t=j(),this.disableEmojiPicker=!1,this.prefill={},this.members=[],this.channelId=void 0,this.emojiPickerActive=!1,this.mentionQuery="",this.focusedMemberIndex=0,this.filePreview=null}connectedCallback(){this.fileReader.onload=t=>{typeof t.target.result=="string"&&(this.filePreview=t.target.result)}}onChannelChanged(){this.mentionQuery="",this.focusedMemberIndex=0;const t=Yn.getItem(this.storageKey)||"";this.$textArea.value=t,this.emojiPickerActive=!1}componentDidRender(){(this.prefill.editMessage||this.prefill.replyMessage)&&Ci(()=>this.$textArea.focus())}get storageKey(){return this.channelId?`dyte-text-message-${this.channelId}`:"dyte-text-message"}uploadFile(t){const e=document.createElement("input");e.type="file",t==="image"&&(e.accept="image/*"),e.onchange=i=>{const{validity:s,files:[r]}=i.target;s.valid&&this.generateFilePreview(t,r)},e.click()}renderFilePreview(){if(typeof this.filePreview=="string")return d("div",{class:"preview-overlay"},d("div",{class:"file-preview"},d("dyte-tooltip",{label:this.t("chat.cancel_upload")},d("dyte-button",{variant:"secondary",kind:"icon",onClick:this.cleanUpFileUpload},d("dyte-icon",{icon:this.iconPack.dismiss}))),this.fileToUpload.type==="image"?d("img",{class:"preview-image",src:this.filePreview}):d("div",{class:"preview-file"},d("span",null,this.filePreview))))}render(){var t;const e={iconPack:this.iconPack,t:this.t,size:this.size};let i="";return!((t=this.prefill.editMessage)===null||t===void 0)&&t.message&&(i=pk(this.prefill.editMessage.message)),d(O,null,this.canSendTextMessage&&this.emojiPickerActive&&d("dyte-emoji-picker",{part:"emoji-picker",onPickerClose:()=>{this.emojiPickerActive=!1},onDyteEmojiClicked:s=>{this.$textArea.value+=s.detail,this.$textArea.focus()},t:this.t}),this.renderSuggestedReplies(),d("slot",{name:"chat-addon"}),d("slot",{name:"quote-block"}),d("div",{class:"chat-input",part:"chat-input"},this.renderMenu(),this.canSendTextMessage&&d("textarea",{class:"scrollbar",part:"textarea",ref:this.initializeTextField,autoFocus:!0,placeholder:this.fileToUpload?"":this.t("chat.message_placeholder"),value:i,onPaste:this.onPaste,maxLength:hk,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onInput:s=>{Yn.setItem(this.storageKey,s.target.value)},disabled:!!this.filePreview}),d("div",{class:"chat-buttons",part:"chat-buttons"},d("div",{class:"left",part:"chat-buttons-left"},!this.prefill.editMessage&&this.canSendFiles&&[d("dyte-tooltip",Object.assign({label:this.t("chat.send_file")},e),d("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("chat.send_file"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.attach}))),d("dyte-tooltip",Object.assign({label:this.t("chat.send_img")},e),d("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("chat.send_img"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.image})))],!this.prefill.editMessage&&this.canSendTextMessage&&!this.disableEmojiPicker&&d("dyte-tooltip",Object.assign({label:this.t("chat.send_emoji")},e),d("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerActive},title:this.t("chat.send_emoji"),iconPack:this.iconPack,t:this.t,onClick:()=>{this.emojiPickerActive=!this.emojiPickerActive}},d("dyte-icon",{icon:this.iconPack.emoji_multiple})))),!!this.filePreview&&this.renderFilePreview(),this.canSendTextMessage&&d("div",{class:"right",part:"chat-buttons-right"},!this.prefill.editMessage&&d("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.send_msg"),delay:2e3},e),d("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.send}))),this.prefill.editMessage&&d("div",{class:"edit-buttons"},d("dyte-tooltip",Object.assign({variant:"secondary",label:this.t("cancel"),delay:2e3},e),d("dyte-button",{kind:"icon",variant:"secondary",onClick:()=>this.handleEditCancel(),title:this.t("cancel"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss}))),d("dyte-tooltip",Object.assign({variant:"primary",label:this.t("chat.update_msg"),delay:2e3},e),d("dyte-button",{kind:"icon",onClick:()=>this.handleEditMessage(),title:this.t("chat.send_msg"),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.checkmark}))))))))}static get watchers(){return{channelId:["onChannelChanged"]}}};$A.style=dae;const lae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));word-break:break-word}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}`,jA=class{constructor(t){N(this,t),this.observingEl=[],this.autoScrollEnabled=!0,this.onScroll=e=>{const i=e.target;Ci(()=>{const{scrollTop:s,clientHeight:r,scrollHeight:n}=i;s+r+10>=n?(this.autoScrollEnabled=!0,this.showLatestMessageButton=!1):this.autoScrollEnabled=!1})},this.scrollToBottom=()=>{uo(this.$chat)},this.observeMessage=e=>{e&&this.observingEl.push(e);try{this.intersectionObserver.observe(e)}catch{}},this.selectedGroup=void 0,this.messages=[],this.selfUserId=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.now=new Date,this.showLatestMessageButton=!1}connectedCallback(){var t;this.lastReadTimestamp=(t=xf.everyone)!==null&&t!==void 0?t:new Date("0001-01-01T00:00:00Z"),this.intersectionObserver=new IntersectionObserver(i=>{!document.hasFocus()||Ci(()=>{for(const s of i)s.isIntersecting&&parseInt(s.target.getAttribute("data-timestamp"))>this.lastReadTimestamp.getTime()&&(xf[this.selectedGroup]=new Date)})});const e=()=>{this.now=new Date,this.timeout=setTimeout(()=>{this.request!=null&&(this.request=requestAnimationFrame(e))},60*1e3)};this.request=requestAnimationFrame(e),this.chatChanged(this.messages)}componentDidLoad(){this.$chat.addEventListener("scroll",this.onScroll)}componentDidRender(){this.autoScrollEnabled?uo(this.$chat):this.autoScrollEnabled==null&&uo(this.$chat,!1)}chatChanged(t){if(this.$chat!=null&&!(this.autoScrollEnabled||this.$chat.clientHeight===this.$chat.scrollHeight)){for(let e=t.length-1;e>=0;e--)if(t[e].message.time>this.lastReadTimestamp&&t[e].message.userId!==this.selfUserId){this.showLatestMessageButton=!0;break}}}selectedBucketChanged(){this.autoScrollEnabled=void 0,this.observingEl.forEach(t=>{this.intersectionObserver.unobserve(t)}),this.observingEl=[]}disconnectedCallback(){this.$chat.removeEventListener("scroll",this.onScroll),this.intersectionObserver.disconnect(),clearTimeout(this.timeout),cancelAnimationFrame(this.request)}render(){var t;let e=null,i=!1;return d(O,null,d("div",{class:"chat-container scrollbar",ref:s=>this.$chat=s,part:"container"},d("div",{class:"spacer",part:"spacer"}),d("div",{class:"chat",part:"chat"},(t=this.messages)===null||t===void 0?void 0:t.map(s=>{if(s.type==="chat"){const{message:r}=s,a=!(r.userId===this.selfUserId)&&!this.autoScrollEnabled&&!i&&r.time>this.lastReadTimestamp;a&&(i=a);const o=!a&&r.userId===(e==null?void 0:e.userId)&&L4(r.time,e==null?void 0:e.time)<2;switch(e=r,r.type){case"text":return d("div",{"is-continued":o,key:s.message.id},a&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-text-message",{message:r,now:this.now,isContinued:o,"data-timestamp":r.time.getTime(),ref:this.observeMessage,iconPack:this.iconPack,t:this.t}));case"image":return d("div",{"is-continued":o,key:s.message.id},a&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-image-message",{message:r,now:this.now,isContinued:o,iconPack:this.iconPack,"data-timestamp":r.time.getTime(),ref:this.observeMessage,t:this.t}));case"file":return d("div",{"is-continued":o,key:s.message.id},a&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-file-message",{message:r,now:this.now,isContinued:o,iconPack:this.iconPack,t:this.t,"data-timestamp":r.time.getTime(),ref:this.observeMessage}))}}return null}))),d("div",{class:"show-new-messages-ctr"},d("dyte-button",{class:{"show-new-messages":!0,active:this.showLatestMessageButton},kind:"icon",part:"show-new-messages",onClick:this.scrollToBottom,iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{messages:["chatChanged"],selectedGroup:["selectedBucketChanged"]}}};jA.style=lae;const uae=":host{display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));flex:1 0 0px}",zA=class{constructor(t){N(this,t),this.editMessageInit=K(this,"editMessageInit",7),this.pageSize=25,this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead=e=>{if(!this.selectedChannelId||e.length===0||this.lastReadMessageIndex!==-1)return;const i=e.at(0).time>e.at(-1).time?e.at(0):e.at(-1);!i.channelIndex||(this.lastReadMessageIndex=parseInt(i.channelIndex,10),this.meeting.chat.markLastReadMessage(this.selectedChannelId,i))},this.getChatMessages=async(e,i,s)=>{const{messages:r}=await this.meeting.chat.getMessages(e,i,s,void 0,this.selectedChannelId);return this.maybeMarkChannelAsRead(r),r},this.createChatNodes=e=>e.map((i,s)=>{var r;const n=i.userId===((r=e[s-1])===null||r===void 0?void 0:r.userId);return this.createChatNode(i,n)}),this.disconnectMeeting=e=>{var i;(i=e==null?void 0:e.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)},this.createChatNode=(e,i)=>{var s,r,n;const a=this.meeting.self.userId===e.userId,o=(s=this.meeting.self.permissions)===null||s===void 0?void 0:s.chatMessage,c=o===void 0?a:o.canEdit==="ALL"||o.canEdit==="SELF"&&a,u=o===void 0?a:o.canDelete==="ALL"||o.canDelete==="SELF"&&a;return d("dyte-chat-message",{message:e,isContinued:i,isUnread:!1,size:this.size,iconPack:this.iconPack,key:e.id,isSelf:a,alignRight:a&&this.meeting.meta.viewType==="CHAT",disableControls:this.meeting.meta.viewType!=="CHAT",senderDisplayPicture:(r=this.meeting.participants.all.toArray().find(l=>l.userId===e.userId))===null||r===void 0?void 0:r.picture,hideAvatar:a&&this.meeting.meta.viewType==="CHAT"||((n=this.selectedChannel)===null||n===void 0?void 0:n.isDirectMessage),canEdit:c&&e.type==="text",canDelete:u,canReply:e.type==="text",onEdit:()=>{e.type==="text"&&this.editMessageInit.emit({payload:e,flags:{isEdit:!0}})},onReply:()=>{e.type==="text"&&this.editMessageInit.emit({payload:e,flags:{isReply:!0}})},onDelete:async()=>{var l;await this.meeting.chat.deleteMessage(e.id,(l=this.selectedChannel)===null||l===void 0?void 0:l.id).catch(()=>{})}})},this.chatUpdateListener=e=>{this.selectedChannelId&&e.message.channelId!==this.selectedChannelId||(e.action==="add"?(this.$paginatedListRef.onNewNode(e.message),this.lastReadMessageIndex=-1,this.maybeMarkChannelAsRead([e.message])):e.action==="delete"?this.$paginatedListRef.onNodeDelete(e.message.id):e.action==="edit"&&this.$paginatedListRef.onNodeUpdate(e.message.id,e.message))},this.meeting=void 0,this.selectedChannel=void 0,this.selectedChannelId=void 0,this.size=void 0,this.iconPack=U,this.t=j()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;e!=null&&this.disconnectMeeting(e),!(t&&!t.chat)&&t!=null&&((i=t.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener))}channelChanged(){this.lastReadMessageIndex=-1}render(){return d(O,null,d("dyte-paginated-list",{ref:t=>this.$paginatedListRef=t,pageSize:this.pageSize,pagesAllowed:3,fetchData:this.getChatMessages,createNodes:this.createChatNodes,selectedItemId:this.selectedChannelId,emptyListLabel:this.t("chat.empty_channel")}))}static get watchers(){return{meeting:["meetingChanged"],selectedChannelId:["channelChanged"]}}};zA.style=uae;const pae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;flex-direction:column;position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}",FA=class{constructor(t){N(this,t),this.pageSize=50,this.searchMessages=async(e,i,s)=>this.meeting.chat.searchMessages(this.query,{channelId:this.channelId,timestamp:e,size:i,reversed:s}),this.nodeRenderer=e=>e.map(i=>d("dyte-chat-message",{key:i.id,message:i,disableControls:!0})),this.meeting=void 0,this.query=void 0,this.channelId=void 0,this.iconPack=U,this.t=j()}render(){return d(O,null,d("dyte-paginated-list",{pageSize:this.pageSize,pagesAllowed:3,fetchData:this.searchMessages,createNodes:this.nodeRenderer,selectedItemId:this.query}))}};FA.style=pae;const hae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;flex-direction:column}.chat-scope-selector{position:relative;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));z-index:10}.chat-scope-selector button{width:100%;border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-4, 16px);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;cursor:pointer;height:var(--dyte-space-12, 48px)}.chat-scope-selector button span{display:flex;align-items:center;justify-content:flex-start}.chat-scope-selector button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-scope-selector .search{position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-0, 0px)}.chat-scope-selector .search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.chat-scope-selector .search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.chat-scope-selector .search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat-scope-selector .participants-container{position:absolute;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));top:var(--dyte-space-12, 48px);animation:0.3s slide-down ease}@keyframes slide-down{from{transform:translateY(-50px)}to{transform:translateY(0%)}}.chat-scope-selector .scope-list{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);list-style-type:none;padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px);overflow:auto;max-height:375px}.chat-scope-selector .scope-list .scope{position:relative;display:flex;flex-direction:row;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px)}.chat-scope-selector .scope-list .scope:hover{cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.chat-scope-selector .scope-list .scope-special{margin-top:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat-scope-selector .scope-list .everyone-icon>dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.chat-scope-selector .scope-list .everyone-icon{display:flex;height:100%;width:100%;align-items:center;justify-content:center;margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px}.unread-count.selector{position:unset;margin-left:var(--dyte-space-2, 8px)}.unread-count{position:absolute;right:var(--dyte-space-3, 12px);box-sizing:border-box;padding:var(--dyte-space-0\\.5, 2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));font-size:12px;color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));display:flex;height:var(--dyte-space-5, 20px);min-width:var(--dyte-space-5, 20px);align-items:center;justify-content:center;border-radius:9999px;z-index:1}dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px)}`,VA=class{constructor(t){N(this,t),this.groupChanged=K(this,"dyteChatGroupChanged",7),this.onScopeClick=e=>{this.showParticipantsPanel=!1,this.groupChanged.emit(e)},this.selfUserId=void 0,this.selectedGroupId=void 0,this.unreadCounts={},this.groups=[],this.iconPack=U,this.t=j(),this.showParticipantsPanel=!1,this.query=""}toggleParticipants(){this.showParticipantsPanel=!this.showParticipantsPanel}getGroups(){return this.groups.filter(t=>t.name.toLowerCase().includes(this.query.toLowerCase()))}getName(){if(!this.selectedGroupId||this.selectedGroupId==="everyone")return this.t("everyone");const t=this.groups.find(e=>e.userId===this.selectedGroupId);return t?t.name:this.t("everyone")}render(){const t=Object.keys(this.unreadCounts).reduce((e,i)=>e+this.unreadCounts[i],0);return d(O,null,d("div",{class:"chat-scope-selector"},this.showParticipantsPanel&&d("div",{class:"participants-container"},d("div",{class:"search",part:"search"},d("dyte-icon",{icon:this.iconPack.search,part:"search-icon"}),d("input",{type:"search",autocomplete:"off",placeholder:"Search",value:this.query,onInput:e=>{this.query=e.target.value},part:"search-input"})),d("ul",{class:"scope-list scrollbar"},this.query===""&&d("li",{class:"scope scope-special",onClick:()=>this.onScopeClick("everyone")},d("div",{class:"everyone-icon"},d("dyte-icon",{icon:this.iconPack.participants})),"Everyone",this.unreadCounts.everyone>0&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,this.unreadCounts.everyone))),this.getGroups().map(e=>{const i=this.unreadCounts[bm([this.selfUserId,e.userId])];return d("li",{class:"scope",onClick:()=>this.onScopeClick(e),key:e.userId},e.name,i>0&&d("div",{class:"unread-count",part:"unread-count"},d("span",null,i)))}))),d("button",{onClick:()=>this.toggleParticipants()},d("span",null,`${this.t("to")} ${this.getName()}`,"  ",t>0&&d("div",{class:"unread-count selector"},d("span",null,t))),d("dyte-icon",{icon:this.showParticipantsPanel?this.iconPack.chevron_up:this.iconPack.chevron_down}))))}};VA.style=hae;const gae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block}",BA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.onDyteDialogClose=(e,i)=>{$[e]=i,this.stateUpdate.emit({[e]:i})},this.cancelJoinStage=async()=>{var e,i,s;((e=this.meeting.stage)===null||e===void 0?void 0:e.status)==="ACCEPTED_TO_JOIN_STAGE"&&await((s=(i=this.meeting)===null||i===void 0?void 0:i.stage)===null||s===void 0?void 0:s.leave()),this.onDyteDialogClose("activeJoinStage",!1)},this.joinStage=async()=>{await this.meeting.stage.join()},this.stageStatusUpdateListener=e=>{var i;((i=this.states)===null||i===void 0?void 0:i.activeJoinStage)===!0&&e==="ON_STAGE"&&this.onDyteDialogClose("activeJoinStage",!1)},this.meeting=void 0,this.config=Re,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j()}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting.stage.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)}meetingChanged(t){if(t==null)return;const{stage:e}=t;e.addListener("stageStatusUpdate",this.stageStatusUpdateListener)}render(){var t,e,i,s;const r={meeting:this.meeting,states:this.states||$,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t},n=this.states||$;if((n==null?void 0:n.image)!=null){const a=n.image,o=()=>{this.stateUpdate.emit({image:null}),$.image=null};return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:o,hideCloseButton:!0,iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-image-viewer",defaults:r,props:{image:a,onClose:o}})))}else{if((n==null?void 0:n.activeSettings)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeSettings",!1),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-settings",defaults:r})));if((n==null?void 0:n.activeDebugger)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeDebugger",!1),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-debugger",defaults:r})));if((n==null?void 0:n.activeLeaveConfirmation)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeLeaveConfirmation",!1),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-leave-meeting",defaults:r})));if(((t=n==null?void 0:n.activePermissionsMessage)===null||t===void 0?void 0:t.enabled)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activePermissionsMessage",{enabled:!1}),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-permissions-message",defaults:r})));if((n==null?void 0:n.activeRemoteAccessManager)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeRemoteAccessManager",!1),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-remote-access-manager",defaults:r})));if(((e=n==null?void 0:n.activeBreakoutRoomsManager)===null||e===void 0?void 0:e.active)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBreakoutRoomsManager",{active:!1,data:void 0}),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-breakout-rooms-manager",defaults:r,props:{mode:this.meeting.connectedMeetings.isActive?"view":"create"}})));if(((i=n==null?void 0:n.activeConfirmationModal)===null||i===void 0?void 0:i.active)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeConfirmationModal",!1),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-confirmation-modal",defaults:r})));if(((s=n==null?void 0:n.activeOverlayModal)===null||s===void 0?void 0:s.active)===!0)return d(O,null,d("dyte-overlay-modal",{meeting:this.meeting,states:this.states,iconPack:this.iconPack,t:this.t}));if(n!=null&&n.activeBroadcastMessageModal)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>this.onDyteDialogClose("activeBroadcastMessageModal",!1),iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-broadcast-message-modal",defaults:r})));if((n==null?void 0:n.activeJoinStage)===!0){const a={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")};return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:this.cancelJoinStage,iconPack:this.iconPack,t:this.t},d("dyte-join-stage",Object.assign({dataConfig:a,onDyteJoinStage:this.joinStage,onDyteLeaveStage:this.cancelJoinStage},r))))}else{if((n==null?void 0:n.activeMuteAllConfirmation)===!0)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeMuteAllConfirmation",!1)},iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-mute-all-confirmation",defaults:r})));if(n!=null&&n.activeChannelCreator)return d(O,null,d("dyte-dialog",{open:!0,onDyteDialogClose:()=>{this.onDyteDialogClose("activeChannelCreator",!1)},iconPack:this.iconPack,t:this.t},d(je,{element:"dyte-channel-creator",defaults:r})))}}return null}static get watchers(){return{meeting:["meetingChanged"]}}};BA.style=gae;const mae="https://cdn.dyte.in/assets/emojis-data.json",fae=async()=>(await fetch(mae)).json(),vae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.emoji-parent{box-sizing:border-box;display:inline-flex;height:var(--dyte-space-64, 256px);max-width:640px;flex-direction:column;padding:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-0, 0px);width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.close-parent{display:flex;flex:1 1 0%;justify-content:flex-end;padding:var(--dyte-space-0, 0px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#emoji-grid{margin-top:var(--dyte-space-2, 8px);box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:wrap;overflow-x:hidden;overflow-y:scroll;height:100%;grid-auto-rows:minmax(min-content, max-content)}#loader{display:flex;height:100%;width:100%;align-items:center;justify-content:center}input{display:block;height:var(--dyte-space-8, 32px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;border-width:var(--dyte-border-width-none, 0);border-style:solid;border-style:none;border-color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}input::-moz-placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input::placeholder{color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}input{border-radius:var(--dyte-border-radius-sm, 4px);outline:2px solid transparent;outline-offset:2px;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}input:focus{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-ring-opacity));--tw-ring-opacity:0.3}.emoji{height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);font-size:20px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}`,HA=class{constructor(t){N(this,t),this.pickerClose=K(this,"pickerClose",7),this.emojiClicked=K(this,"dyteEmojiClicked",7),this.iconPack=U,this.t=j(),this.emojiList=void 0,this.filterVal="",this.filteredEmojis=[]}componentWillLoad(){fae().then(t=>{this.emojiList=t,this.handleInputChange({value:""})})}handleInputChange(t){this.filterVal=t.value;const e=new RegExp(`([^,]*?${this.filterVal}[^,]*):(\\d+)`,"g");this.filteredEmojis=Array.from(this.emojiList.search.matchAll(e)).map(i=>({name:i[1],emoji:this.emojiList.emojis[i[2]]}))}handleEmojiClick(t){this.emojiClicked.emit(t)}mapEmojiList(){var t;return((t=this.emojiList)===null||t===void 0?void 0:t.length)>0?d("div",{id:"loader"},d("dyte-spinner",{iconPack:this.iconPack,t:this.t})):d("div",{id:"emoji-grid",class:"scrollbar max-w-40"},this.filteredEmojis.map(e=>d("dyte-button",{iconPack:this.iconPack,t:this.t,key:`emoji-button-${e.name}`,class:"emoji",variant:"ghost",kind:"icon",title:e.name,onClick:()=>this.handleEmojiClick(e.emoji)},e.emoji)))}render(){return d(O,null,d("div",{class:"close-parent"},d("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:()=>{var t;return(t=this.pickerClose)===null||t===void 0?void 0:t.emit()},"aria-label":this.t("close")},d("dyte-icon",{icon:this.iconPack.dismiss}))),d("div",{class:"emoji-parent"},d("input",{value:this.filterVal,onInput:t=>this.handleInputChange(t.target),placeholder:this.t("search")}),this.mapEmojiList()))}};HA.style=vae;const yae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host::-webkit-scrollbar{width:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}:host::-webkit-scrollbar-thumb{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host(.webinar){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-6, 24px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.webinar) dyte-participant-setup{display:flex;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.webinar) .container dyte-button{margin:var(--dyte-space-3, 12px);flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.webinar) header{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host(.webinar) .summary{padding:var(--dyte-space-4, 16px)}:host(.livestream){box-sizing:border-box;display:block;width:512px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));padding:var(--dyte-space-8, 32px);-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:auto;border-radius:var(--dyte-border-radius-md, 8px);line-height:1.25}:host(.livestream) dyte-participant-setup{display:flex;width:100%;flex:1 1 0%;align-items:center;justify-content:space-around;margin-left:auto;margin-right:auto}:host(.livestream) .container dyte-button{flex-grow:1;padding:var(--dyte-space-1, 4px);width:50%}:host(.livestream) .container dyte-button:nth-child(1){margin-right:var(--dyte-space-1\\.5, 6px)}:host(.livestream) .container dyte-button:nth-child(2){margin-left:var(--dyte-space-1\\.5, 6px)}:host(.livestream) h2{font-size:24px;font-weight:500;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(.livestream) .summary{margin-top:var(--dyte-space-6, 24px);margin-bottom:var(--dyte-space-6, 24px);text-align:left;font-size:14px}.deny-access{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.container{width:100%;max-width:1080px;display:flex;flex:1 1 0%;align-items:center;justify-content:space-around}header{display:flex;align-items:center;justify-content:space-between}`,WA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.joinStage=K(this,"dyteJoinStage",7),this.leaveStage=K(this,"dyteLeaveStage",7),this.meeting=void 0,this.config=Re,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.dataConfig={title:this.t("stage.join_title"),label:{accept:this.t("stage.join_confirm"),reject:this.t("stage.join_cancel")},description:this.t("stage.join_summary")},this.isLoading=!1}render(){var t,e,i,s;const r={meeting:this.meeting,size:this.size,states:this.states||$,config:this.config,iconPack:this.iconPack,t:this.t};return d(O,{class:{livestream:((t=this.meeting)===null||t===void 0?void 0:t.meta.viewType)==="LIVESTREAM",webinar:((e=this.meeting)===null||e===void 0?void 0:e.meta.viewType)==="WEBINAR"}},d("header",null,d("h2",null,this.dataConfig.title)),d(je,{element:"dyte-participant-setup",defaults:r,props:{participant:(i=this.meeting)===null||i===void 0?void 0:i.self,size:"md"},childProps:{participant:(s=this.meeting)===null||s===void 0?void 0:s.self,size:"md"},deepProps:!0}),d("div",{class:"summary"},this.dataConfig.description),d("div",{class:"container"},d("dyte-button",{variant:"secondary",onClick:()=>this.leaveStage.emit(),title:this.dataConfig.label.reject,iconPack:this.iconPack,t:this.t},this.dataConfig.label.reject),d("dyte-button",{onClick:()=>{this.isLoading||(this.isLoading=!0,this.joinStage.emit())},title:this.dataConfig.label.accept,iconPack:this.iconPack,t:this.t},this.isLoading?d("dyte-icon",{icon:this.iconPack.spinner}):this.dataConfig.label.accept)))}};WA.style=yae;const bae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{pointer-events:none;display:block;height:var(--dyte-space-10, 40px);color:rgb(var(--dyte-colors-text-1000, 255 255 255));animation:show 0.4s ease;transition:0.4s;z-index:100}.ctr{box-sizing:border-box;display:inline-flex;height:100%;min-width:var(--dyte-space-40, 160px);align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-shadow:var(--tw-shadow-colored);pointer-events:auto}img{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);border-radius:9999px}img.loaded{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}.message{margin-right:var(--dyte-space-3, 12px);max-width:var(--dyte-space-72, 288px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.message p{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-1, 4px);display:inline-block}.message blockquote{display:none}dyte-icon.icon{margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}dyte-button{margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px)}.right{margin-left:auto;display:flex;align-items:center}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}:host(.exit){animation:exit 0.4s ease}@keyframes show{0%{opacity:0;transform:translateX(-120px)}100%{opacity:1;transform:translateX(0px)}}@keyframes exit{0%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(-120px)}}:host([size='sm']){font-size:14px}",qA=class{constructor(t){N(this,t),this.dismiss=K(this,"dyteNotificationDismiss",7),this.notification=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.imageState="loading"}connectedCallback(){this.notificationChanged(this.notification)}notificationChanged(t){t!=null&&typeof t.duration=="number"&&setTimeout(()=>{this.dismiss.emit(t.id)},t.duration)}render(){return d(O,null,d("div",{class:"ctr"},this.notification.icon!=null&&d("dyte-icon",{class:"icon",icon:this.notification.icon,iconPack:this.iconPack,t:this.t}),this.notification.image!=null&&this.notification.icon==null&&this.imageState!=="errored"&&d("img",{src:this.notification.image,class:{loaded:this.imageState==="loaded"},onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored"}),d("p",{class:"message"},d(Sh,{message:this.notification.message})),d("div",{class:"right"},this.notification.button!=null&&d("dyte-button",{size:"sm",variant:this.notification.button.variant,onClick:()=>this.notification.button.onClick(),iconPack:this.iconPack,t:this.t},this.notification.button.text),d("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.dismiss.emit(this.notification.id),iconPack:this.iconPack,t:this.t}))))}static get watchers(){return{notification:["notificationChanged"]}}};qA.style=bae;const Os=2e3,q1=Object.freeze({notifications:{participant_joined:!0,participant_left:!0,participant_joined_waitlist:!0,chat:!0,polls:!0,webinar:!0,tab_sync:!0},notification_sounds:{participant_joined:!0,participant_left:!0,chat:!0,polls:!0,webinar:!0,participant_joined_waitlist:!0},notification_duration:{participant_joined:2100,participant_left:2100,participant_joined_waitlist:4e3,chat:Os,polls:Os,webinar:Os,tab_sync:Os},participant_joined_sound_notification_limit:10,participant_chat_message_sound_notification_limit:10}),wae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:absolute;top:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);bottom:var(--dyte-space-4, 16px);left:var(--dyte-space-4, 16px);top:auto;display:flex;flex-direction:column;pointer-events:none;z-index:100}dyte-notification{margin-top:var(--dyte-space-2, 8px)}";function _ae(t){const e=Object.assign({},q1);return t==null||(Object.assign(e.notification_sounds,t.notification_sounds),Object.assign(e.notifications,t.notifications),Object.assign(e.notification_duration,t.notification_duration),e.participant_chat_message_sound_notification_limit=t.participant_chat_message_sound_notification_limit,e.participant_joined_sound_notification_limit=t.participant_joined_sound_notification_limit),e}function DT(t){return Object.keys(t).filter(e=>t[e])}const GA=class{constructor(t){N(this,t),this.permissions=q1,this.enabledSounds=DT(q1.notification_sounds),this.addStagePeersListeners=e=>{e.participants.joined.addListener("participantJoined",this.participantJoinedListener),e.meta.addListener("disconnected",this.networkDisconnectedListener),e.meta.addListener("connected",this.networkConnectedListener),e.participants.joined.addListener("participantLeft",this.participantLeftListener)},this.removeStagePeersListeners=e=>{e.participants.joined.removeListener("participantJoined",this.participantJoinedListener),e.meta.removeListener("disconnected",this.networkDisconnectedListener),e.meta.removeListener("connected",this.networkConnectedListener),e.participants.joined.removeListener("participantLeft",this.participantLeftListener)},this.onRemoteUpdate=({payload:e,type:i})=>{if(i===Us.INCOMING_REQUEST_ACCEPTED){let s=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Granted remote control to ${s.name}`,duration:Os})}if(i===Us.OUTGOING_REQUEST_ACCEPTED){let s=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${s.name} has granted remote control.`,duration:Os})}if(i===Us.REQUEST_RECEIVED){let s=this.meeting.participants.joined.get(e.request.remotePeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${s.name} has requested for remote control.`,duration:Os})}if((i===Us.INCOMING_REQUEST_ENDED||i===Us.OUTGOING_REQUEST_ENDED)&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:"Existing remote control has been terminated.",duration:Os}),i===Us.REQUEST_SENT){let s=this.meeting.participants.joined.get(e.request.hostPeerId);this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`Sent remote control request to ${s.name}`,duration:Os})}},this.onDyteNotification=e=>{this.add(e.detail);const i=e.detail.playSound;i!=null&&this.audio.play(i)},this.onRecordingUpdate=e=>{e==="RECORDING"?this.add({id:"recording-started",icon:this.iconPack.recording,message:this.t("recording.started"),duration:Os}):e==="STOPPING"&&this.add({id:"recording-stopped",icon:this.iconPack.stop_recording,message:this.t("recording.stopped"),duration:Os})},this.meeting=void 0,this.states=void 0,this.config=Re,this.t=j(),this.size=void 0,this.iconPack=U,this.notifications=[]}connectedCallback(){typeof document<"u"&&(document==null||document.addEventListener("dyteNotification",this.onDyteNotification)),this.meetingChanged(this.meeting),this.configChanged(this.config),this.statesChanged(this.states)}clearListeners(t){var e,i,s,r,n,a,o,c,u;const l=t.meta.viewType==="LIVESTREAM";(l&&((e=t.stage)===null||e===void 0?void 0:e.status)==="ON_STAGE"||!l)&&this.removeStagePeersListeners(t),this.chatUpdateListener&&((i=t.chat)===null||i===void 0||i.removeListener("chatUpdate",this.chatUpdateListener)),this.pollUpdateListener&&((s=t.polls)===null||s===void 0||s.removeListener("pollsUpdate",this.pollUpdateListener)),this.socketDisconnectedListener&&t.meta.removeListener("socketDisconnected",this.socketDisconnectedListener),this.socketReconnectFailureListener&&t.meta.removeListener("socketReconnectFailure",this.socketReconnectFailureListener),this.socketReconnectedListener&&t.meta.removeListener("socketReconnected",this.socketReconnectedListener),this.socketReconnectingListener&&t.meta.removeListener("socketReconnecting",this.socketReconnectingListener),this.socketFailureListener&&t.meta.removeListener("socketFailure",this.socketFailureListener),this.stageRequestAccepted&&((r=t.stage)===null||r===void 0||r.removeListener("stageRequestApproved",this.stageRequestAccepted)),this.stageRequestRejected&&((n=t.stage)===null||n===void 0||n.removeListener("stageRequestRejected",this.stageRequestRejected)),this.newStageRequests&&((a=t.stage)===null||a===void 0||a.removeListener("newStageRequest",this.newStageRequests)),this.stageStatusUpdateListener&&((o=t.stage)===null||o===void 0||o.removeListener("stageStatusUpdate",this.stageStatusUpdateListener)),(c=t.remote)===null||c===void 0||c.removeListener("remoteUpdate",this.onRemoteUpdate),(u=t.recording)===null||u===void 0||u.removeListener("recordingUpdate",this.onRecordingUpdate),clearTimeout(this.disconnectTimeout)}disconnectedCallback(){var t;typeof document<"u"&&(document==null||document.removeEventListener("dyteNotification",this.onDyteNotification)),this.meeting!=null&&(this.clearListeners(this.meeting),this.waitlistedParticipantJoinedListener&&this.meeting.participants.waitlisted.removeListener("participantJoined",this.waitlistedParticipantJoinedListener),this.activeTabUpdateListener&&((t=this.meeting.meta)===null||t===void 0||t.removeListener("activeTabUpdate",this.activeTabUpdateListener)),this.peerStageStatusListener&&this.meeting.participants.joined.removeListener("stageStatusUpdate",this.peerStageStatusListener))}meetingChanged(t,e){var i,s,r,n,a,o,c,u,l;if(clearTimeout(this.disconnectTimeout),e!==void 0&&this.clearListeners(e),t==null)return;const h=t.meta.viewType==="LIVESTREAM";this.audio=new nae(t);const{notifications:g,notification_duration:m,notification_sounds:f}=this.permissions;if(this.participantJoinedListener=k=>{g.participant_joined&&this.add({id:`${k.id}-joined`,message:`${cr(k.name)} just joined`,image:k.picture,duration:m.participant_joined}),f.participant_joined&&this.canPlayParticipantJoinedSound()&&this.audio.play("joined")},this.participantLeftListener=k=>{g.participant_left&&this.add({id:`${k.id}-left`,message:`${cr(k.name)} left`,image:k.picture,duration:m.participant_left}),f.participant_left&&this.canPlayParticipantJoinedSound()&&this.audio.play("left")},this.waitlistedParticipantJoinedListener=k=>{const y=`${k.id}-joined-waitlist`;this.add({id:y,message:`${cr(k.name)} is requesting to join the meeting`,image:k.picture,duration:m.participant_joined_waitlist,button:{text:"Accept",variant:"secondary",onClick:async()=>{await this.meeting.participants.acceptWaitingRoomRequest(k.id),this.remove(y)}}}),f.participant_joined_waitlist&&this.canPlayParticipantJoinedSound()&&this.audio.play("message")},this.chatUpdateListener=({message:k})=>{const y=mA(k);if(y!=null){if(y.userId===t.self.userId)return;y.type==="text"&&(g.chat&&this.add({id:`message-${Math.random().toString(36)}`,icon:this.iconPack.chat,message:`${y.displayName}: ${y.message}`,duration:m.chat}),f.chat&&this.canPlayChatSound()&&this.audio.play("message"))}},this.pollUpdateListener=({polls:k,newPoll:y})=>{y!==!1&&(g.polls&&this.meeting.self.userId!==k[k.length-1].createdByUserId&&this.add({id:`poll-${Math.random().toString(36)}`,icon:this.iconPack.poll,message:`New poll created by ${k[k.length-1].createdBy}`,duration:m.polls}),f.polls&&this.meeting.self.userId!==k[k.length-1].createdByUserId&&this.canPlayChatSound()&&this.audio.play("message"))},this.deviceUpdateListener=({device:k,preview:y})=>{y||(k.kind==="audiooutput"?(this.audio.setDevice(k.deviceId),this.add({id:`speaker-switched-${k.deviceId}`,message:`Connected to ${k.label}`,icon:this.iconPack.speaker,duration:5e3})):k.kind==="videoinput"?this.add({id:`camera-switched-${k.deviceId}`,message:`Connected to ${k.label}`,icon:this.iconPack.speaker,duration:5e3}):this.add({id:`mic-switched-${k.deviceId}`,message:`Connected to ${k.label}`,icon:this.iconPack.mic_on,duration:5e3}))},this.networkDisconnectedListener=()=>{this.remove("network");let k;k=2e4,this.add({id:"network",icon:this.iconPack.disconnected,message:this.t("network.reconnecting"),duration:k}),this.disconnectTimeout=setTimeout(()=>{this.add({id:"network-lost",icon:this.iconPack.disconnected,message:this.t("network.delay"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var y;return(y=this.meeting)===null||y===void 0?void 0:y.leaveRoom()}}})},k)},this.networkConnectedListener=()=>{this.remove("network");let k;this.remove("network-lost"),k=3e3,this.add({id:"network",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:k}),clearTimeout(this.disconnectTimeout)},this.socketUpdateListener=({event:k,attempt:y})=>{this.remove("socket"),k==="reconnected"?(this.remove("socketReconnecting"),this.add({id:"socket",icon:this.iconPack.wifi,message:this.t("network.restored"),duration:3e3})):k==="disconnected"?this.add({id:"socket",icon:this.iconPack.disconnected,message:this.t("network.lost"),duration:3e3}):k==="reconnecting"?this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.lost_extended")}):k==="reconnectFailure"?y>5&&(this.remove("socketReconnecting"),this.add({id:"socketReconnecting",icon:this.iconPack.disconnected,message:this.t("network.delay_extended"),button:{text:this.t("end"),variant:"danger",onClick:()=>{var b;return(b=this.meeting)===null||b===void 0?void 0:b.leaveRoom()}}})):k==="failed"&&(this.remove("socketReconnecting"),this.add({id:"socketFailed",icon:this.iconPack.disconnected,message:this.t("network.disconnected")}),this.add({id:"leaveMeeting",icon:this.iconPack.warning,message:this.t("network.leaving")}),setTimeout(()=>{var b;(b=this.meeting)===null||b===void 0||b.leaveRoom("disconnected")},1e4))},this.activeTabUpdateListener=k=>{if(!!g.tab_sync)switch(k.type){case"plugin":const y=t.plugins.active.toArray().find(x=>x.id==k.id);y!=null&&this.add({id:"activeTab",message:`Plugin switched to ${y.name}`,duration:m.participant_joined});break;case"screenshare":const b=t.participants.joined.toArray().filter(x=>x.screenShareEnabled).find(x=>x.id==k.id);b!=null&&this.add({id:"spotlight",message:`Now watching ${b.name}'s screen`,duration:m.webinar});break}},this.peerStageStatusListener=k=>{k.stageStatus==="REQUESTED_TO_JOIN_STAGE"&&(this.add({id:`stage-request-${k.id}`,message:`${k.name} has requested to join stage`,duration:m.webinar,button:{text:"Accept",variant:"primary",onClick:async()=>{await this.meeting.stage.grantAccess([k.userId]),this.remove(`stage-request-${k.id}`)}}}),f.webinar&&this.audio.play("joined")),k.stageStatus==="ON_STAGE"&&(this.add({id:`stage-joined-${k.id}`,message:`${k.name} has joined stage`,duration:m.webinar}),f.webinar&&this.audio.play("joined"))},this.stageRequestAccepted=()=>{this.add({id:"stage-request-accepted",message:"Request to join accepted",duration:3e3})},this.stageRequestRejected=()=>{this.add({id:"stage-request-rejected",message:"Request to join rejected",duration:3e3})},this.newStageRequests=({count:k})=>{this.add({id:"new-stage-request",message:`You have ${k} pending request${k===1?"":"s"}`,duration:3e3})},this.stageStatusUpdateListener=k=>{k==="ON_STAGE"?this.addStagePeersListeners(t):this.removeStagePeersListeners(t)},this.socketReconnectedListener=()=>this.socketUpdateListener({event:"reconnected"}),this.socketDisconnectedListener=()=>this.socketUpdateListener({event:"disconnected"}),this.socketReconnectingListener=()=>this.socketUpdateListener({event:"reconnecting"}),this.socketFailureListener=()=>this.socketUpdateListener({event:"failed"}),this.socketReconnectFailureListener=({attempt:k})=>this.socketUpdateListener({event:"reconnectFailure",attempt:k}),!To(t)&&((i=t.chat)===null||i===void 0||i.addListener("chatUpdate",this.chatUpdateListener)),t.self.config.viewType==="CHAT")return;const _=t.self.getCurrentDevices();_.speaker!=null&&this.audio.setDevice(_.speaker.deviceId),h?(s=t.stage)===null||s===void 0||s.on("stageStatusUpdate",this.stageStatusUpdateListener):this.addStagePeersListeners(t),t.participants.joined.on("stageStatusUpdate",this.peerStageStatusListener),this.canAcceptWaitingRequests()&&t.participants.waitlisted.addListener("participantJoined",this.waitlistedParticipantJoinedListener),(r=t.polls)===null||r===void 0||r.addListener("pollsUpdate",this.pollUpdateListener),t.self.addListener("deviceUpdate",this.deviceUpdateListener),t.meta.addListener("socketReconnected",this.socketReconnectedListener),t.meta.addListener("socketDisconnected",this.socketDisconnectedListener),t.meta.addListener("socketReconnecting",this.socketReconnectingListener),t.meta.addListener("socketFailure",this.socketFailureListener),t.meta.addListener("socketReconnectFailure",this.socketReconnectFailureListener),(n=t.remote)===null||n===void 0||n.addListener("remoteUpdate",this.onRemoteUpdate),(a=t.meta)===null||a===void 0||a.addListener("activeTabUpdate",this.activeTabUpdateListener),(o=t.recording)===null||o===void 0||o.addListener("recordingUpdate",this.onRecordingUpdate),(c=t.stage)===null||c===void 0||c.addListener("stageRequestApproved",this.stageRequestAccepted),(u=t.stage)===null||u===void 0||u.addListener("stageRequestRejected",this.stageRequestRejected),t.self.permissions.acceptPresentRequests&&((l=t.stage)===null||l===void 0||l.addListener("newStageRequest",this.newStageRequests))}configChanged(t){t!=null&&(t==null?void 0:t.config)!=null&&(this.permissions=_ae(t.config),this.enabledSounds=DT(this.permissions.notification_sounds))}statesChanged(t){var e;if(t!=null){const i=!(!((e=t==null?void 0:t.prefs)===null||e===void 0)&&e.muteNotificationSounds);for(const s of this.enabledSounds)s in this.permissions.notification_sounds&&(this.permissions.notification_sounds[s]=i)}}apiErrorListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:Os,icon:this.iconPack.warning})}sendNotificationListener({detail:t}){const{trace:e,message:i}=t;this.add({id:e,message:i,duration:Os})}add(t){document.visibilityState==="visible"&&this.notifications.length<5&&(this.notifications=[...this.notifications,t])}remove(t){this.notifications=this.notifications.filter(e=>e.id!==t)}handleDismiss(t){t.stopPropagation();const e=t.detail,i=this.host.shadowRoot.querySelector(`[data-id="${e}"]`);i==null||i.classList.add("exit"),setTimeout(()=>{Ci(()=>{this.remove(e)})},400)}canPlayParticipantJoinedSound(){return this.permissions.participant_joined_sound_notification_limit==null||this.permissions.participant_joined_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_joined_sound_notification_limit}canPlayChatSound(){return this.permissions.participant_chat_message_sound_notification_limit==null||this.permissions.participant_chat_message_sound_notification_limit<=0||this.meeting.participants.count<=this.permissions.participant_chat_message_sound_notification_limit}canAcceptWaitingRequests(){return this.permissions.notifications.participant_joined_waitlist&&this.meeting.self.permissions.acceptWaitingRequests}render(){return d(O,null,this.notifications.map(t=>d("dyte-notification",{size:this.size,key:t.id,"data-id":t.id,notification:t,onDyteNotificationDismiss:e=>this.handleDismiss(e),iconPack:this.iconPack,t:this.t})))}get host(){return Ts(this)}static get watchers(){return{meeting:["meetingChanged"],config:["configChanged"],states:["statesChanged"]}}};GA.style=wae;const kae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0.6);position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);z-index:50}dyte-icon{height:var(--dyte-space-20, 80px)}h2{margin:var(--dyte-space-2, 8px);font-weight:500}p{margin:var(--dyte-space-0, 0px);font-size:16px}",JA=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.meeting=void 0,this.states=void 0,this.iconPack=U,this.t=j()}connectedCallback(){this.states.activeOverlayModal.timeout&&setTimeout(()=>{this.stateUpdate.emit({activeOverlayModal:{active:!1}}),$.activeOverlayModal={active:!1}},this.states.activeOverlayModal.timeout)}componentDidLoad(){}disconnectedCallback(){}render(){return d(O,null,d("dyte-icon",{icon:this.states.activeOverlayModal.icon,iconPack:this.iconPack,t:this.t}),d("h2",null,this.states.activeOverlayModal.title),d("p",null,this.states.activeOverlayModal.description))}};JA.style=kae;var Sae=Object.freeze({__proto__:null,dyte_channel_details:LA,dyte_channel_header:NA,dyte_channel_selector_ui:UA,dyte_chat_composer_ui:$A,dyte_chat_messages_ui:jA,dyte_chat_messages_ui_paginated:zA,dyte_chat_search_results:FA,dyte_chat_selector_ui:VA,dyte_dialog_manager:BA,dyte_emoji_picker:HA,dyte_join_stage:WA,dyte_notification:qA,dyte_notifications:GA,dyte_overlay_modal:JA});const xae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex}:host[size='sm']{margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px)}.indicator{display:flex;flex-direction:row;align-items:center;font-size:14px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);animation:blink 4s linear infinite}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([size='sm']) .indicator span{display:none}@keyframes blink{0%,10%{opacity:0}11%,100%{opacity:1}}",KA=class{constructor(t){N(this,t),this.setIsLivestreaming=e=>{this.isLivestreaming=e==="LIVESTREAMING"},this.meeting=void 0,this.size=void 0,this.t=j(),this.isLivestreaming=void 0,this.iconPack=U}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var t,e;(e=(t=this.meeting)===null||t===void 0?void 0:t.livestream)===null||e===void 0||e.removeListener("livestreamUpdate",this.setIsLivestreaming)}meetingChanged(t){var e,i;t!=null&&(this.setIsLivestreaming((e=this.meeting.livestream)===null||e===void 0?void 0:e.state),(i=this.meeting.livestream)===null||i===void 0||i.on("livestreamUpdate",this.setIsLivestreaming))}render(){if(!(!To(this.meeting)||!this.isLivestreaming))return d(O,null,d("div",{class:"indicator","aria-label":this.t("livestream.indicator"),part:"indicator"},d("dyte-icon",{icon:this.iconPack.start_livestream,size:this.size}),d("span",null,this.t("LIVE"))))}static get watchers(){return{meeting:["meetingChanged"]}}};KA.style=xae;const Eae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.player-container{position:relative;margin:var(--dyte-space-4, 16px);display:flex;flex-grow:1;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px)}video{z-index:0;height:100%;width:100%;border-radius:var(--dyte-border-radius-md, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.loader{position:absolute;z-index:10;height:100%;width:100%;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));display:flex;flex-direction:column;align-items:center;justify-content:center}p{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:16px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.latency-controls{position:absolute;bottom:var(--dyte-space-4, 16px);right:var(--dyte-space-4, 16px);z-index:20;display:flex;flex-direction:row;align-items:center}.sync-live-stream{cursor:pointer;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);font-size:12px}.unmute-popup{position:absolute;z-index:30 !important;display:flex;width:var(--dyte-space-72, 288px);flex-direction:column;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-4, 16px);text-align:center;max-width:70%}.unmute-popup h3{margin:var(--dyte-space-0, 0px);font-size:16px;font-weight:500}.unmute-popup p{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);font-size:14px}",QA=class{constructor(t){N(this,t),this.dyteAPIError=K(this,"dyteAPIError",7),this.showLatencyIndicator=!1,this.LoadPlayer=(e=this.ivsPlayer)=>{this.player&&e&&(e.attachHTMLVideoElement(this.player),e.setAutoplay(!0),e.setVolume(1))},this.livestreamUpdateListener=e=>{var i,s;this.livestreamState=e,e==="LIVESTREAMING"?(this.LoadPlayer(),this.getPlaybackUrl(),!((s=(i=this.meeting.__internals__)===null||i===void 0?void 0:i.browserSpecs)===null||s===void 0)&&s.isIOSMobile()||(this.fetchLatency(),this.updateLatency=setInterval(this.fetchLatency,2e3)),this.meeting.participants.pip.enableSource("livestream-player")):(this.showLatencyIndicator=!1,this.updateLatency&&clearInterval(this.updateLatency),this.meeting.participants.pip.disableSource("livestream-player"))},this.getLoadingState=()=>{let e="",i=!1,s=!1;switch(this.livestreamState){case"IDLE":e=this.t("livestream.idle"),i=!0,s=!1;break;case"STARTING":e=this.t("livestream.starting"),i=!0,s=!0;break;case"STOPPING":e=this.t("livestream.stopping"),i=!0,s=!0;break;case"LIVESTREAMING":this.playerState!==an.PLAYING&&(e=this.t("livestream.starting"),s=!0,i=!0);break;default:i=!1,e=this.t(""),s=!0;break}return{isLoading:i,loadingMessage:e,showIcon:s}},this.getErrorState=()=>{var e,i;let s=!1,r="";return this.livestreamState!=="LIVESTREAMING"?(s=!1,r=this.t(""),{isError:s,errorMessage:r}):(this.isSupported||(s=!0,r=this.t("livestream.error.not_supported")),this.playbackUrl||(s=!0,r=this.t("livestream.error.not_found")),this.playerError&&(s=!0,r=this.t((i=(e=this.playerError)===null||e===void 0?void 0:e.message)!==null&&i!==void 0?i:"livestream.error.unknown")),{isError:s,errorMessage:r})},this.fetchLatency=()=>{this.ivsPlayer&&(this.latency=this.ivsPlayer.getLiveLatency(),this.meeting.__internals__.logger.info("IVS.Player.LivestreamLatency",{livestream:{latency:this.latency}}))},this.meeting=void 0,this.size=void 0,this.t=j(),this.iconPack=U,this.playbackUrl=void 0,this.isSupported=!0,this.playerState=an.IDLE,this.livestreamState="IDLE",this.playerError=void 0,this.latency=0,this.audioPlaybackError=!1}AddPlayerListeners(t=this.ivsPlayer){Object.values(Object.assign(Object.assign({},Gt),an)).forEach(e=>{dX.includes(e)||t==null||t.addEventListener(e,i=>{var s,r,n;(e===an.IDLE||e===an.PLAYING||e===Gt.ERROR||e===an.READY)&&(this.playerState=e),e===Gt.ERROR&&(this.playerError=i),e===an.IDLE&&t.isPaused()&&t.play(),e===Gt.AUDIO_BLOCKED&&(this.audioPlaybackError=!0),this.playerState===an.PLAYING&&!(!((r=(s=this.meeting.__internals__)===null||s===void 0?void 0:s.browserSpecs)===null||r===void 0)&&r.isIOSMobile())?this.showLatencyIndicator=!0:this.showLatencyIndicator=!1,this.meeting.__internals__.logger.info(`IVS.Player.${e}`,i),lX.includes(e)&&((n=this.meeting.__internals__.callStats)===null||n===void 0||n.ivsPlayerEvent(e,i))})})}getPlaybackUrl(t=this.ivsPlayer){this.playbackUrl=this.meeting.livestream.playbackUrl,this.playbackUrl&&t&&(t.load(this.playbackUrl),t.play())}onPlayerRef(t){this.player=t,this.meeting.participants.pip.addSource("livestream-player",this.player,!!this.playbackUrl),this.playbackUrl&&this.meeting.participants.pip.enableSource("livestream-player")}connectedCallback(){this.meetingChanged(this.meeting),window.onDyteLivestreamPlayer=t=>{t?(this.isSupported=!0,this.ivsPlayer=t,this.AddPlayerListeners(t),this.LoadPlayer(t),this.getPlaybackUrl(t)):this.isSupported=!1},this.sendLatencyToCallStats=setInterval(()=>{var t;this.fetchLatency(),(t=this.meeting.__internals__.callStats)===null||t===void 0||t.livestreamLatency(this.latency)},1e4)}disconnectedCallback(){window.onDyteLivestreamPlayer=void 0,this.meeting.livestream.removeListener("livestreamUpdate",this.livestreamUpdateListener),clearInterval(this.sendLatencyToCallStats),this.ivsPlayer.load(""),this.ivsPlayer=void 0,this.player=void 0}async componentDidLoad(){const t=`
    import IVSPlayer from 'https://cdn.jsdelivr.net/npm/amazon-ivs-player@1.16.0/+esm'
    let player = undefined;
    if (IVSPlayer.isPlayerSupported) {
      player = IVSPlayer.create({
        wasmBinary:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.wasm',
        wasmWorker:
          'https://unpkg.com/amazon-ivs-player@1.11.0/dist/assets/amazon-ivs-wasmworker.min.js',
      });
    }
    window.onDyteLivestreamPlayer && window.onDyteLivestreamPlayer(player);
    `,e=document.createElement("script");e.type="module",e.innerHTML=t,document.body.appendChild(e)}meetingChanged(t){t!=null&&(this.livestreamState=this.meeting.livestream.state,this.livestreamState==="LIVESTREAMING"&&(this.LoadPlayer(),this.getPlaybackUrl(),this.meeting.participants.pip.enableSource("livestream-player")),this.meeting.livestream.on("livestreamUpdate",this.livestreamUpdateListener))}render(){if(!To(this.meeting))return;const{isError:t,errorMessage:e}=this.getErrorState(),{isLoading:i,loadingMessage:s,showIcon:r}=this.getLoadingState();return d(O,null,d("div",{class:"player-container"},d("video",{ref:n=>this.onPlayerRef(n),playsInline:!0}),this.audioPlaybackError&&d("div",{class:"unmute-popup"},d("h3",null,this.t("audio_playback.title")),d("p",null,this.t("audio_playback.description")),d("dyte-button",{kind:"wide",onClick:()=>{this.player.muted=!1,this.audioPlaybackError=!1},title:this.t("audio_playback"),iconPack:this.iconPack,t:this.t},this.t("audio_playback"))),this.livestreamState==="LIVESTREAMING"&&this.showLatencyIndicator&&d("div",{class:"latency-controls"}),t&&d("div",{class:"loader"},d("dyte-icon",{icon:this.iconPack.warning,t:this.t}),d("p",null,e)),!t&&i&&d("div",{class:"loader"},r&&d("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t,size:"md"}),d("p",null,s))))}static get watchers(){return{meeting:["meetingChanged"]}}};QA.style=Eae;const Tae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);display:inline-flex;height:var(--dyte-space-10, 40px);-webkit-user-select:none;-moz-user-select:none;user-select:none;align-items:center;font-size:14px}:host([size='sm']){margin-left:var(--dyte-space-1, 4px);margin-right:var(--dyte-space-1, 4px);font-size:12px}dyte-icon{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}:host([size='sm']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}:host([variant='embedded']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));opacity:0.5;margin-top:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-1, 4px);height:var(--dyte-space-5, 20px);border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:12px}:host([variant='embedded']) dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",YA=class{constructor(t){N(this,t),this.disconnectMeeting=e=>{var i;e!=null&&this.countListener!=null&&((i=e.livestream)===null||i===void 0||i.removeListener("viewerCountUpdate",this.countListener))},this.meeting=void 0,this.variant="primary",this.iconPack=U,this.t=j(),this.viewerCount=0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){var i;this.disconnectMeeting(e),t!=null&&(this.countListener=()=>{var s;this.viewerCount=(s=t.livestream)===null||s===void 0?void 0:s.viewerCount},this.countListener(),(i=t.livestream)===null||i===void 0||i.addListener("viewerCountUpdate",this.countListener))}render(){return To(this.meeting)?d(O,{tabIndex:0,role:"log","aria-label":`${this.viewerCount} ${this.t("viewers")}`},d("dyte-icon",{icon:this.iconPack.viewers,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),this.viewerCount," ",this.t("viewers")):null}static get watchers(){return{meeting:["meetingChanged"]}}};YA.style=Tae;var Cae=Object.freeze({__proto__:null,dyte_livestream_indicator:KA,dyte_livestream_player:QA,dyte_viewer_count:YA});const Pae=`:host {
  line-height: initial;
  font-family: var(--dyte-font-family, sans-serif);

  font-feature-settings: normal;
  font-variation-settings: normal;
}

p {
  margin: var(--dyte-space-0, 0px);
  padding: var(--dyte-space-0, 0px);
}


:host {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  aspect-ratio: 16 / 9;
  height: var(--dyte-space-56, 224px);
  overflow: hidden;
  border-radius: var(--dyte-border-radius-lg, 12px);
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));

  transition-property: var(--dyte-transition-property, all);
  transition-duration: 150ms;
  container-type: inline-size;
  container-name: participanttile;
}

@media (prefers-reduced-motion) {
  /* No transitions when disabled */
  :host {
    --dyte-transition-property: none;
  }
}

::slotted(dyte-name-tag) {
  position: absolute;
  left: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
}

:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag) {
  left: var(--dyte-space-2, 8px);
  bottom: var(--dyte-space-2, 8px);
  height: var(--dyte-space-4, 16px);
}

::slotted(dyte-network-indicator) {
  position: absolute;
  right: var(--dyte-space-3, 12px);
  bottom: var(--dyte-space-3, 12px);
}

:host([size='sm']) ::slotted(dyte-network-indicator) {
  right: var(--dyte-space-2, 8px);
  bottom: var(--dyte-space-2, 8px);
}

video {
  display: none;
  position: absolute;
  height: 100%;
  width: 100%;
  border-radius: var(--dyte-border-radius-lg, 12px);
}

video.contain {
  -o-object-fit: contain;
     object-fit: contain;
}

video.cover {
  -o-object-fit: cover;
     object-fit: cover;
}

video.visible {
  display: block;
}

video::-webkit-media-controls {
  display: none !important;
}

.pinned-icon {
  position: absolute;
  left: var(--dyte-space-3, 12px);
  top: var(--dyte-space-3, 12px);
  height: var(--dyte-space-5, 20px);
  width: var(--dyte-space-5, 20px);
  padding: var(--dyte-space-1, 4px);
  border-radius: var(--dyte-border-radius-md, 8px);
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));
}

:host([size='sm']) .pinned-icon {
  top: var(--dyte-space-2, 8px);
  left: var(--dyte-space-2, 8px);
}

:host([variant='gradient']) ::slotted(dyte-audio-visualizer) {
  position: absolute;
  top: var(--dyte-space-2, 8px);
  right: var(--dyte-space-2, 8px);
  border-radius: 9999px;
  --tw-bg-opacity: 1;
  background-color: rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));
  padding: var(--dyte-space-2, 8px);
}

:host([variant='gradient']) ::slotted(dyte-name-tag) {
  bottom: var(--dyte-space-0, 0px);
  left: var(--dyte-space-0, 0px);
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: transparent;
  background-image: linear-gradient(to top, var(--tw-gradient-stops));
  --tw-gradient-from: rgb(var(--dyte-colors-background-1000, 8 8 8));
  --tw-gradient-to: rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  --tw-gradient-to: transparent;
}

video.mirror {
  transform: scaleX(-1);
}

/** Name tag positions */

:host([name-tag-position='bottom-right']) ::slotted(dyte-name-tag) {
  left: auto;
  right: var(--dyte-space-3, 12px);
}

:host([name-tag-position='bottom-center']) ::slotted(dyte-name-tag) {
  left: auto;
  right: auto;
}

:host([name-tag-position='top-left']) ::slotted(dyte-name-tag) {
  top: var(--dyte-space-3, 12px);
  bottom: auto;
}

:host([name-tag-position='top-right']) ::slotted(dyte-name-tag) {
  top: var(--dyte-space-3, 12px);
  right: var(--dyte-space-3, 12px);
  left: auto;
  bottom: auto;
}

:host([name-tag-position='top-center']) ::slotted(dyte-name-tag) {
  left: auto;
  right: auto;
  bottom: auto;
  top: var(--dyte-space-3, 12px);
}

@container participanttile (max-width: 300px) {
  ::slotted(dyte-name-tag) {
    transform-origin: 0 100%;
    transform: scale(0.8)
  }
}

@container participanttile (max-width: 150px) {
  ::slotted(dyte-name-tag) {
    transform-origin: -10% 130%;
    transform: scale(0.6);
    border-radius: 9999px;
  }
}`,ZA=class{constructor(t){N(this,t),this.onVideoUpdate=e=>{this.videoState=e,this.participant!=null&&(e.videoEnabled?this.meeting.participants.pip.enableSource(this.participant.id):this.meeting.participants.pip.disableSource(this.participant.id))},this.onPinned=({isPinned:e})=>{this.isPinned=e},this.isSelf=()=>{var e;return this.isPreview||this.participant.id===((e=this.meeting)===null||e===void 0?void 0:e.self.id)},this.videoState=void 0,this.isPinned=!1,this.nameTagPosition="bottom-left",this.isPreview=!1,this.participant=void 0,this.meeting=void 0,this.states=void 0,this.config=Re,this.variant="solid",this.size=void 0,this.iconPack=U,this.t=j()}onVideoRef(t){this.videoEl=t,!(this.isPreview||this.participant==null)&&(this.meeting.participants.pip.addSource(this.participant.id,this.videoEl,this.participant.videoEnabled),this.participant.videoEnabled&&this.meeting.participants.pip.enableSource(this.participant.id))}participantVideoUpdate(t){t.id===this.participant.id&&this.onVideoUpdate({videoEnabled:t.videoEnabled,videoTrack:t.videoTrack})}connectedCallback(){this.meeting?this.meetingChanged(this.meeting):this.participantsChanged(this.participant)}componentDidLoad(){this.videoStateChanged(this.videoState)}disconnectedCallback(){if(this.playTimeout&&clearTimeout(this.playTimeout),this.participant==null)return;const{self:t}=this.meeting;this.participant.id===t.id?this.participant.removeListener("videoUpdate",this.onVideoUpdate):this.meeting.participants.joined.removeListener("videoUpdate",this.participantVideoUpdate),this.participant.removeListener("pinned",this.onPinned),this.participant.removeListener("unpinned",this.onPinned),this.meeting.participants.pip.removeSource(this.participant.id)}meetingChanged(t){t!=null&&this.participantsChanged(this.participant)}participantsChanged(t){if(t==null||this.meeting==null)return;const{self:e}=this.meeting;this.videoState={videoEnabled:t.videoEnabled,videoTrack:t.videoTrack},this.isPinned=t.isPinned,t.id===e.id?t.addListener("videoUpdate",this.onVideoUpdate):this.meeting.participants.joined.addListener("videoUpdate",this.participantVideoUpdate.bind(this)),t.addListener("pinned",this.onPinned),t.addListener("unpinned",this.onPinned)}videoStateChanged(t){var e;if(t!=null&&this.videoEl!=null)if(t.videoEnabled){!((e=this.meeting)===null||e===void 0)&&e.__internals__.features.hasFeature(wf.LOG_PLAYING_FAILURES)&&(this.playTimeout&&clearTimeout(this.playTimeout),this.playTimeout=setTimeout(()=>{var s;(s=this.meeting)===null||s===void 0||s.__internals__.logger.log("dyte-participant-tile::playing_timeout")},6e3));const i=new MediaStream;if(t.videoTrack==null)return;i.addTrack(t.videoTrack),this.videoEl.srcObject=i}else this.playTimeout&&clearTimeout(this.playTimeout),this.videoEl.srcObject=void 0}isMirrored(){var t;if(this.participant!=null&&this.isSelf()){const e=this.states||$,i=(t=e==null?void 0:e.prefs)===null||t===void 0?void 0:t.mirrorVideo;if(typeof i=="boolean")return i}return!1}render(){var t,e,i,s;return d(O,null,d("video",{ref:r=>this.onVideoRef(r),class:{visible:(t=this.videoState)===null||t===void 0?void 0:t.videoEnabled,mirror:this.isMirrored(),[(s=(i=(e=this.config)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.videoFit)!==null&&s!==void 0?s:"cover"]:!0},onPlaying:()=>{this.playTimeout&&clearTimeout(this.playTimeout)},onPause:r=>{var n,a;this.isSelf()&&((n=this.meeting)===null||n===void 0?void 0:n.__internals__.features.hasFeature(wf.PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE))&&(this.meeting.__internals__.logger.warn(`Video player paused for ${this.participant.id} isSelf: ${this.isSelf()}`),(a=r==null?void 0:r.target)===null||a===void 0||a.play())},autoPlay:!0,playsInline:!0,muted:!0,part:"video"}),this.isPinned&&d("dyte-icon",{class:"pinned-icon",icon:this.iconPack.pin,"aria-label":this.t("pinned"),iconPack:this.iconPack,t:this.t,part:"pinned-icon"}),d("slot",null))}static get watchers(){return{meeting:["meetingChanged"],participant:["participantsChanged"],videoState:["videoStateChanged"]}}};ZA.style=Pae;var Rae=Object.freeze({__proto__:null,dyte_participant_tile:ZA});const Iae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:100%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-4, 16px)}.poll-question{padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);font-size:14px;overflow-wrap:break-word}.poll-answers{display:flex;flex-direction:row;justify-content:space-between;font-size:12px;margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-1, 4px);padding-right:var(--dyte-space-3, 12px)}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option.open-vote:hover{cursor:pointer}.poll-option label{display:flex;flex-direction:row;cursor:inherit}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between;padding:var(--dyte-space-1, 4px)}.poll-option-header[data-disabled='true']:hover{cursor:default}.poll-option-header input{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px);margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-2, 8px);cursor:inherit}.poll-option-header .counter{color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:12px}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}.active .counter{color:rgb(var(--dyte-colors-text-on-brand-900, var(--dyte-colors-text-900, 255 255 255 / 0.88)))}`,XA=class{constructor(t){N(this,t),this.onVote=K(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=U,this.t=j()}vote(t,e){this.poll.voted.includes(this.self)?t.preventDefault():this.onVote.emit({id:this.poll.id,index:e})}render(){const t=this.poll.voted.includes(this.self);return d(O,null,d("div",{class:"ctr"},d("p",{class:"poll-title"},this.t("polls.by")," ",Fs(cr(this.poll.createdBy),20)),d("div",{class:"poll"},d("p",{class:"poll-question"},this.poll.question),d("div",{class:"poll-answers"},d("span",null,this.t("polls.answers")),d("span",null,this.poll.voted.length)),this.poll.options.map((e,i)=>d("div",{class:{active:e.votes.some(s=>s.id===this.self),"open-vote":this.permissions.polls.canVote&&!t,"poll-option":!0}},d("div",{class:"poll-option-header","data-disabled":!this.permissions.polls.canVote},d("label",null,!t&&d("input",{disabled:!this.permissions.polls.canVote,readOnly:t,type:"radio",checked:e.votes.some(s=>s.id===this.self),onClick:s=>this.vote(s,i)}),d("p",null,e.text)),d("span",{class:"counter"},e.count)),d("div",{class:"votes"},e.votes.map(s=>{if(!(this.poll.anonymous&&this.self!==this.poll.createdByUserId))return d("dyte-tooltip",{label:s.name,iconPack:this.iconPack,t:this.t},d("div",{class:"vote"},j4(s.name)))})))))))}};XA.style=Iae;const Aae=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);font-family:var(--dyte-font-family, sans-serif);border-width:var(--dyte-border-width-none, 0);border-style:none;font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}`,eD=class{constructor(t){N(this,t),this.onCreate=K(this,"dyteCreatePoll",7),this.iconPack=U,this.t=j(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}removeOption(t){var e;this.options=this.options.filter((i,s)=>s!==t),((e=this.error)===null||e===void 0?void 0:e.code)===1&&(this.error=void 0)}addOption(){this.options=[...this.options,""]}updateOption(t,e){var i;this.options[e]=t.target.value,((i=this.error)===null||i===void 0?void 0:i.code)===1&&(this.error=void 0)}handleSubmit(){const t={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:this.anonymous?!0:this.hideVotes};if(!t.question){this.error={code:0,message:this.t("polls.errors.question_required")};return}if(this.options.filter(e=>e.trim()==="").length>0){this.error={code:1,message:this.t("polls.errors.empty_option")};return}this.onCreate.emit(t)}render(){return d(O,null,d("div",{class:"create-poll"},d("p",null,this.t("polls.question")),d("textarea",{onInput:()=>{this.error&&this.error.code===0&&(this.error=void 0)},ref:t=>this.question=t,placeholder:this.t("polls.question.placeholder")}),this.options.map((t,e)=>d("div",{class:"option"},d("input",{placeholder:this.t("polls.option.placeholder"),value:t,onInput:i=>this.updateOption(i,e)}),e>1&&d("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:()=>this.removeOption(e),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.subtract,iconPack:this.iconPack,t:this.t})))),d("dyte-button",{class:"add-option",variant:"secondary",onClick:()=>this.addOption(),iconPack:this.iconPack,t:this.t},this.t("polls.option")),d("label",null,d("input",{id:"anonymous",type:"checkbox",onChange:t=>this.anonymous=t.target.checked}),this.t("polls.results.anon")),d("label",null,d("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:this.anonymous?!0:this.hideVotes,onChange:t=>this.hideVotes=t.target.checked}),this.t("polls.results.hide")),d("dyte-button",{kind:"wide",onClick:()=>this.handleSubmit(),iconPack:this.iconPack,t:this.t},this.t("polls.create")),this.error&&d("span",{class:"error-text"},this.error.message)))}};eD.style=Aae;var Dae=Object.freeze({__proto__:null,dyte_poll:XA,dyte_poll_form:eD});const Mae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{font-size:12px}#sync-button{flex-direction:row;border-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-1, 4px);display:flex;height:var(--dyte-space-16, 64px);width:100%;align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='md']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='lg']) #sync-button{flex-direction:row;display:flex;height:var(--dyte-space-8, 32px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}@media (orientation: portrait){:host([size='lg']) #sync-button{flex-direction:column-reverse;display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center}:host([size='sm']) #sync-button{height:var(--dyte-space-10, 40px);width:var(--dyte-space-16, 64px);flex-direction:row}}#sync-button>dyte-icon{max-height:14px}#sync-button dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}#sync-button.active dyte-icon{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}div{align-content:center;line-height:2rem}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-8, 32px)}#sync-button.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-bg-opacity))}",tD=class{constructor(t){N(this,t),this.meeting=void 0,this.iconPack=U,this.t=j(),this.size=void 0,this.canSpotlight=void 0,this.isSpotlighted=void 0}connectedCallback(){this.meetingChanged(this.meeting)}meetingChanged(t){var e,i;t!=null&&(this.canSpotlight=t.self.permissions.canSpotlight,this.isSpotlighted=(i=(e=t.meta)===null||e===void 0?void 0:e.broadcastTabChanges)!==null&&i!==void 0?i:!1)}updateSpotlightState(t){var e;try{(e=this.meeting.meta)===null||e===void 0||e.setBroadcastTabChanges(t),this.isSpotlighted=t}catch(i){console.error(i)}}render(){if(!!this.canSpotlight)return d(O,null,d("dyte-tooltip",{size:"md",iconPack:this.iconPack,t:this.t,label:this.t("remote_access.indicator")},d("div",{id:"sync-button",class:{tab:!0,active:this.isSpotlighted},onClick:()=>this.updateSpotlightState(!this.isSpotlighted)},d("span",{class:"name"},"Sync"),d("dyte-icon",{id:"icon",iconPack:this.iconPack,t:this.t,icon:this.isSpotlighted?this.iconPack.checkmark:this.iconPack.warning,tabIndex:-1,"aria-hidden":!0}))))}static get watchers(){return{meeting:["meetingChanged"]}}};tD.style=Mae;var Oae=Object.freeze({__proto__:null,dyte_spotlight_indicator:tD});const Lae=".message-wrapper{display:flex;gap:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-4, 16px);margin-top:var(--dyte-space-4, 16px)}[is-continued] .message-wrapper{margin-top:var(--dyte-space-0, 0px)}.message-wrapper.align-right{flex-direction:row-reverse}.avatar{display:none}.file-picker{display:none}.message{position:relative;display:flex}.show-on-hover dyte-menu{visibility:hidden}.show-on-hover:hover dyte-menu{visibility:visible}.align-right .message{justify-content:flex-end;margin-left:auto}.align-right .message .head{margin-right:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);flex-direction:row-reverse;gap:var(--dyte-space-4, 16px)}.align-right .message dyte-text-message .bubble,.align-right .message dyte-image-message .bubble,.align-right .message dyte-file-message .bubble{padding-right:var(--dyte-space-5, 20px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .message .actions dyte-icon{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right dyte-menu{left:auto;right:var(--dyte-space-0, 0px)}.head{margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.head .name{font-size:14px;font-weight:600}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}dyte-menu{position:absolute;left:var(--dyte-space-0, 0px);top:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-lg, 12px)}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}[is-continued] dyte-menu{top:var(--dyte-space-2, 8px)}.actions{display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0\\.5, 2px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.body{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}.body.bubble{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);max-width:var(--dyte-space-96, 384px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);overflow-wrap:break-word;font-size:14px;line-height:1.375;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.body.bubble p{margin:var(--dyte-space-0, 0px);word-break:break-word}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-0, 0px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}blockquote{margin:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px);background-color:transparent}.block-quote,blockquote{--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px) !important;border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}.link{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.align-right .block-quote{border-color:rgb(var(--dyte-colors-text-on-brand-600, var(--dyte-colors-text-600, 255 255 255 / 0.52)));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.align-right .link{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .image .actions dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}@media (orientation: landscape) and (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-6, 24px)}.avatar dyte-avatar{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px);font-size:10px}.message{width:75%}}",iD=class{constructor(t){N(this,t),this.edit=K(this,"edit",7),this.reply=K(this,"reply",7),this.delete=K(this,"delete",7),this.renderMessage=()=>{switch(this.message.type){case"text":return d("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-text-message",{message:this.message,now:this.now,isContinued:this.isContinued,"data-timestamp":this.message.time.getTime(),iconPack:this.iconPack,t:this.t,showBubble:!0}));case"image":return d("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-image-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":this.message.time.getTime(),t:this.t,showBubble:!0}));case"file":return d("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&d("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),d("dyte-file-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":this.message.time.getTime(),showBubble:!0}))}},this.onReply=()=>{this.reply.emit(this.message)},this.onDelete=()=>{this.delete.emit(this.message)},this.onEdit=async()=>{this.edit.emit(this.message)},this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.message=void 0,this.isContinued=void 0,this.isUnread=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.isSelf=!1,this.canEdit=!1,this.canDelete=!1,this.canReply=!1,this.disableControls=!1,this.alignRight=!1,this.senderDisplayPicture=void 0,this.hideAvatar=!1,this.now=new Date}renderControls(){if(!this.disableControls)return d("dyte-menu",{placement:this.alignRight?"bottom-end":"bottom-start"},d("button",{slot:"trigger",class:"actions"},d("dyte-icon",{icon:this.iconPack.chevron_down})),d("dyte-menu-list",null,this.canReply&&d("dyte-menu-item",{onClick:this.onReply},d("dyte-icon",{icon:this.iconPack.back,slot:"start"}),this.t("chat.reply")),this.canEdit&&d("dyte-menu-item",{onClick:this.onEdit},d("dyte-icon",{icon:this.iconPack.edit,slot:"start"}),this.t("chat.edit_msg")),this.canDelete&&d("dyte-menu-item",{onClick:this.onDelete},d("dyte-icon",{icon:this.iconPack.delete,slot:"start"}),this.t("chat.delete_msg"))))}renderAvatar(){if(!this.hideAvatar)return this.isContinued?d("div",{class:"avatar"}):d("div",{class:"avatar"},d("dyte-avatar",{size:"sm",participant:{name:this.message.displayName,picture:this.senderDisplayPicture}}))}render(){return d(O,null,d("div",{class:{"message-wrapper":!0,"align-right":this.alignRight},"is-continued":this.isContinued},this.renderAvatar(),d("div",{class:{message:!0,"show-on-hover":!this.isTouchDevice()},"is-continued":this.isContinued},this.renderMessage(),this.renderControls())))}get $el(){return Ts(this)}};iD.style=Lae;const Nae=class{constructor(t){N(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=U,this.t=j(),this.showBubble=!1}render(){const t=wh(this.message.link);return d(O,null,!this.isContinued&&d(_h,{name:this.message.displayName,time:this.message.time,now:this.now}),d("div",{class:{body:!0,bubble:this.showBubble},part:"body"},d("div",{class:"file"},d("div",{class:"file-data"},d("div",{class:"name"},this.message.name),d("div",{class:"file-data-split"},d("div",{class:"ext"},c6(this.message.name)),d("span",{class:"divider"}),d("div",{class:"size"},d6(this.message.size)))),d("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>kh(t,{name:this.message.name,fallbackName:"file"}),part:"button"},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},Uae=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}",sD=class{constructor(t){N(this,t),this.stateUpdate=K(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=U,this.t=j(),this.showBubble=!1,this.status="loading"}render(){return d(O,null,!this.isContinued&&d(_h,{name:this.message.displayName,time:this.message.time,now:this.now}),d("div",{class:{body:!0,bubble:this.showBubble},part:"body"},d("div",{class:{image:!0,loaded:this.status==="loaded"}},d("img",{src:wh(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{this.status==="loaded"&&(this.stateUpdate.emit({image:this.message}),$.image=this.message)}}),this.status==="loading"&&d("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},d("dyte-spinner",{iconPack:this.iconPack,t:this.t})),this.status==="errored"&&d("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},d("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),this.status==="loaded"&&d("div",{class:"actions"},d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),$.image=this.message},iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.full_screen_maximize})),d("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>kh(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};sD.style=Uae;var $ae="[object Symbol]";function jae(t){return typeof t=="symbol"||$l(t)&&bh(t)==$ae}var zae=/\s/;function Fae(t){for(var e=t.length;e--&&zae.test(t.charAt(e)););return e}var Vae=/^\s+/;function Bae(t){return t&&t.slice(0,Fae(t)+1).replace(Vae,"")}var MT=0/0,Hae=/^[-+]0x[0-9a-f]+$/i,Wae=/^0b[01]+$/i,qae=/^0o[0-7]+$/i,Gae=parseInt;function OT(t){if(typeof t=="number")return t;if(jae(t))return MT;if(wn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=wn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Bae(t);var i=Wae.test(t);return i||qae.test(t)?Gae(t.slice(2),i?2:8):Hae.test(t)?MT:+t}var R0=function(){return Gc.Date.now()},Jae="Expected a function",Kae=Math.max,Qae=Math.min;function Yae(t,e,i){var s,r,n,a,o,c,u=0,l=!1,h=!1,g=!0;if(typeof t!="function")throw new TypeError(Jae);e=OT(e)||0,wn(i)&&(l=!!i.leading,h="maxWait"in i,n=h?Kae(OT(i.maxWait)||0,e):n,g="trailing"in i?!!i.trailing:g);function m(M){var L=s,V=r;return s=r=void 0,u=M,a=t.apply(V,L),a}function f(M){return u=M,o=setTimeout(y,e),l?m(M):a}function _(M){var L=M-c,V=M-u,se=e-L;return h?Qae(se,n-V):se}function k(M){var L=M-c,V=M-u;return c===void 0||L>=e||L<0||h&&V>=n}function y(){var M=R0();if(k(M))return b(M);o=setTimeout(y,_(M))}function b(M){return o=void 0,g&&s?m(M):(s=r=void 0,a)}function x(){o!==void 0&&clearTimeout(o),u=0,s=c=r=o=void 0}function C(){return o===void 0?a:b(R0())}function D(){var M=R0(),L=k(M);if(s=arguments,r=this,c=M,L){if(o===void 0)return f(c);if(h)return clearTimeout(o),o=setTimeout(y,e),m(c)}return o===void 0&&(o=setTimeout(y,e)),a}return D.cancel=x,D.flush=C,D}const Zae=`.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))
    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column-reverse;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}.smallest-dom-element{width:1px}#top-scroll{transform:translateY(20vh)}#bottom-scroll{transform:translateY(-20vh)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:10;margin-top:calc(var(--dyte-space-14, 56px) * -1);--tw-translate-y:var(--dyte-space-28, 112px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages-ctr.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}.show-new-messages{pointer-events:auto;border-radius:9999px}.show-new-messages:hover{border-radius:9999px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-ring-opacity));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}dyte-spinner,.empty-list{margin:auto}`,rD=class{constructor(t){N(this,t),this.pagesToRender=[[]],this.currentTime=()=>new Date().getTime(),this.observe=e=>{!e||this.intersectionObserver.observe(e)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.selectedItemId=void 0,this.autoScroll=!0,this.iconPack=U,this.t=j(),this.emptyListLabel=null,this.isLoading=!1,this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.showEmptyListLabel=!1}async onNewNode(t){if(!this.shouldRenderNewNodes){this.hasNewNodesToRender=!0;return}this.addNodeToRender(t,!1),this.rerender()}async onNodeDelete(t){const e=this.pagesToRender.flat().length;this.pagesToRender=this.pagesToRender.map(i=>i.filter(s=>s.id!==t)),e!==this.pagesToRender.flat().length&&this.rerender()}async onNodeUpdate(t,e){let i=!1;this.pagesToRender=this.pagesToRender.map(s=>s.map(r=>r.id===t?(i=!0,e):r)),i&&this.rerender()}onItemChanged(t,e){t!==e&&(this.pagesToRender=[[]],this.loadFirstPage().then(()=>this.rerender()))}connectedCallback(){this.rerender=Yae(this.rerender.bind(this),50,{maxWait:200}),this.intersectionObserver=new IntersectionObserver(t=>{Ci(()=>{for(const e of t)e.target.id==="bottom-scroll"&&(e.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),e.target.id==="top-scroll"&&e.isIntersecting&&this.loadTop()})})}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.loadFirstPage(),this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&this.autoScroll&&uo(this.$paginatedList)}loadFirstPage(){return this.loadPage(this.currentTime(),this.pageSize,!0,t=>{t.length===0&&(this.showEmptyListLabel=!0)})}loadTop(){if(this.pagesToRender.length===0||this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize)return;const e=this.pagesToRender[0][0].timeMs,i=()=>{};this.loadPage(e-1,this.pageSize,!0,i)}loadBottom(){if(this.pagesToRender.length===0){this.shouldRenderNewNodes=!0;return}if(this.pagesToRender.length===1&&this.pagesToRender[0].length<this.pageSize){this.shouldRenderNewNodes=!0;return}const e=this.pagesToRender.at(-1).at(-1).timeMs,i=()=>uo(this.$paginatedList);this.loadPage(e+1,this.pageSize,!1,i)}addNodeToRender(t,e){if(e){const i=this.pagesToRender[0];if(i&&(i==null?void 0:i.length)<this.pageSize)i.unshift(t);else{const s=[t];this.pagesToRender.unshift(s),this.removeLastPageIfNeeded(!1)}}else{const[i]=this.pagesToRender.slice(-1);if(i&&(i==null?void 0:i.length)<this.pageSize)i.push(t);else{const s=[t];this.pagesToRender.push(s),this.removeLastPageIfNeeded(!0)}}}async loadPage(t,e,i,s=()=>{}){this.isLoading=!0;const r=await this.fetchData(t,e,i);if(this.isLoading=!1,!(r!=null&&r.length)){i||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0),s([]);return}r.forEach(n=>this.addNodeToRender(n,i)),this.rerender(),s(r)}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(t){this.pagesToRender.length>this.pagesAllowed&&(t?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){var t;return d(O,null,d("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},d("div",{class:{"show-new-messages-ctr":!0,active:!this.shouldRenderNewNodes}},d("dyte-button",{class:"show-new-messages",kind:"icon",variant:"secondary",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),d("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e}),this.isLoading&&this.pagesToRender.flat().length===0&&d("dyte-spinner",{size:"lg"}),this.pagesToRender.flat().length===0&&this.showEmptyListLabel?d("div",{class:"empty-list"},(t=this.emptyListLabel)!==null&&t!==void 0?t:this.t("list.empty")):d("div",{class:"page-wrapper"},this.pagesToRender.map(e=>this.createNodes(e))),d("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e})))}static get watchers(){return{selectedItemId:["onItemChanged"]}}};rD.style=Zae;const Xae=class{constructor(t){N(this,t),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=U,this.t=j(),this.showBubble=!1}render(){return d(O,null,!this.isContinued&&d(_h,{name:this.message.displayName,time:this.message.time,now:this.now}),d("div",{class:{body:!0,bubble:this.showBubble},part:"body"},d("div",{class:{text:!0,emoji:$4(this.message.message)}},d(Sh,{message:this.message.message}))))}};var eoe=Object.freeze({__proto__:null,dyte_chat_message:iD,dyte_file_message:Nae,dyte_image_message:sD,dyte_paginated_list:rD,dyte_text_message:Xae});function gk({osName:t,browserName:e,media:i}){function s(){return i==="audio"?"Microphone":i==="video"?"Camera":"Screenshare"}if(e==="Chrome")return["Open Chrome browser settings by clicking the three dots at the top right.","Select Settings, Under Privacy and Security, click Site Settings, navigate to Permissions.",`Choose ${s()}, provide the appropriate permission and reload this application.`];if(e==="Safari")return["Open Safari browser settings by clicking on Safari > Preferences at the top left.",`Under Websites, select ${s()} from the devices on the left and pick this webiste.`,"Allow permissions from the pop-up menu and reload this application."];if(e.includes("Opera")){let r=[];return t==="macOS"||t==="iOS"?r.push("To open settings, click Opera in the toolbar (top-left) > Preferences."):r.push("To open settings, click the Opera icon (top-left) > Settings."),r=[...r,"Under Privacy and Security, click Site Settings.",`Select ${s()}, enable permissions and reload this application.`],r}if(e==="Firefox"){let r=[];return t==="macOS"||t==="iOS"?r.push("To open settings, at the top right, click Preferneces"):r.push("To open settings, at the top right, click Options"),r=[...r,"Under Privacy and Security, scroll down to the  Permissions  section",`Select Settings for ${s()}`,"Enter the website URL in the search field, enable permissions and reload this application."],r}if(e.includes("Edge"))return["To open settings, at the top right click Settings & More > Settings.",`Under Site Premissions, click ${s()}.`,"Use the drop-down menu and select the default device, allow permission and reload this application."]}function mk({osName:t,media:e}){function i(){return e==="audio"?"Microphone":e==="video"?"Camera":"Screenshare"}return t==="macOS"?[" To give ${getDevice()} access to your browser, choose Apple menu  > System Settings, then click Privacy & Security.",`From the sidebar select ${i()}`,`If you don\u2019t see  ${i()}, upgrade to macOS Mojave or later.`,"Allow access to your browser,","Reload this application."]:t==="iOS"?[`To give ${i()} access to your browser, go to phone Settings > Privacy.`,`Tap on ${i()}. Allow access for your browser.`,"Reload this application."]:t==="Windows"?[`To give ${i()} access to your browser, go to the Start menu on Windows.`,`Select Settings > Privacy > ${i()}`,"Allow permissions and reload this application."]:t.includes("Android")?[`To give ${i()} access to your browser, go to phone Settings > Apps.`,"Select your browser from the list",`Tap Permissions and allow ${i()} permissions.`,"Reload this application."]:[]}function fk({browserName:t,isMobile:e,osName:i}){if(t==="Chrome")return!e&&i==="macOS"?"Desktop_Chrome.mp4":e?i==="iOS"?"Chrome_ios.mp4":"Android_Chrome.mp4":"";if(t==="Firefox")return!e&&i==="macOs"?"Desktop_Firefox.mp4":!e||i==="iOS"?"":"Android_Firefox.mp4";if(t==="Safari")return e?"iOS Safari.mp4":"Desktop_Safari.mp4";if(t.includes("Edge"))return!e&&i==="macOs"?"Desktop_Edge.mp4":(!e||i==="iOS","");if(t==="Opera")return!e&&i==="macOs"||!e||i==="iOS","";if(t==="Opera")return!e||i==="iOS",""}function vk({osName:t}){if(t==="macOS"||t==="iOS"||t==="Windows"||t.includes("Android"))return""}const toe={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your audio devices, such as microphones and speakers, should work as expected.",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to access your microphone",steps:mk,image:vk},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not have the required permissions to access your microphone",steps:gk,image:fk},COULD_NOT_START:{info:"Could not start device",icon:"dismiss",text:"Access to the microphone may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser.","If using an external device, try switching to another device.","Switch to a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used your microphone yet",icon:"warning",text:'We cannot access the data to troubleshoot unless you try to use the microphone at least once. Please click on the "Allow Permissions" button to fix this. Others will not be able to hear you.',steps:()=>[],image:()=>""}},ioe={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your camera devices should work as expected",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to access your camera",steps:mk,image:vk},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not not have the required permissions to access your camera",steps:gk,image:fk},COULD_NOT_START:{info:"Could not start device",icon:"dismiss",text:"Access to the camera may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser.","If using an external device, try switching to another device.","Switch to a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used your camera yet",icon:"warning",text:'We cannot access the data to troubleshoot unless you try to use the camera at least once. Please click on the "Allow Permissions" button to fix this. Others will not be able to see you.',steps:()=>[],image:()=>""}},soe={ACCEPTED:{info:"Permission granted",icon:"checkmark",text:"Your screen share should work as expected",steps:()=>[],image:()=>""},SYSTEM_DENIED:{info:"Permission denied by system",icon:"dismiss",text:"Your browser does not have the required permissions to share screen",steps:mk,image:vk},DENIED:{info:"Permission denied by browser",icon:"dismiss",text:"We do not have the required permissions to share screen",steps:gk,image:fk},COULD_NOT_START:{info:"Could not start screenshare",icon:"dismiss",text:"Access for screen share may be restricted by a hardware error in the operating system or browser",steps:()=>["Restart your browser.","Update your browser to the latest version.","Try sharing a tab or window instead of the entire screen.","Switch a different browser."],image:()=>""},NOT_REQUESTED:{info:"You have not yet used shared screen yet",icon:"warning",text:"We cannot access the data to troubleshoot unless you screenshare at least once. You can try screensharing fix this.",steps:()=>[],image:()=>""}},roe=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"Participants can't hear me",steps:["Please make sure that your microphone is unmuted. You can do this by clicking on the mic icon from the control bar.","If using an external device, please make sure that you are sitting close to the microphone."],troubleshoot:!1},{index:2,value:"I can't hear participants",steps:["Please ensure that the window or tab is not muted.","Please ensure that the volume level of your audio device is not set to 0.","Please ensure you are connected to the correct speaker device."],troubleshoot:!1},{index:3,value:"My audio is laggy",steps:["Please ensure that you have a stable internet connection.","Please try switching to a different audio device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:4,value:"My audio is unclear",steps:["Please make sure you are using a good-quality microphone.","Please make sure you are in close proximity to the microphone."],troubleshoot:!1},{index:5,value:"Participant's audio is laggy",steps:["Please ensure that you have a stable internet connection.","Please request the participant to use an alternative audio device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:6,value:"The audio from a participant is not clear",steps:["Please ensure that your system's speaker volume is checked and adjusted if necessary.","Please request the participant to move close to the microphone."],troubleshoot:!1}],noe=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"Participants can't see my video",steps:["Please ensure you have turned on your video from the control bar.","If using an external device, please ensure your device is connected and working properly."],troubleshoot:!1},{index:2,value:"Not able to view participnats video",steps:["Please ensure you have a stable internet connection.","If you have a poor network connection, please try moving closer to the Wi-Fi router."],troubleshoot:!1},{index:3,value:"My video is laggy",steps:["Please ensure that you have a stable internet connection.","Please try switching to a different video device."],troubleshoot:!1},{index:4,value:"My video is unclear",steps:["Please ensure you are not using a faulty device.","Please make sure you are in a well-lit area.","Please ensure you have a stable internet connection."],troubleshoot:!1},{index:5,value:"Participant's video is laggy",steps:["Please ensure you have a stable internet connection.","Please request the participant to use an alternative video device.","If your network connection is weak, consider disabling your video to improve the audio bandwidth."],troubleshoot:!1},{index:6,value:"Participant's video is unclear",steps:["Please ensure you have a stable internet connection.","Please ensure the participant is not using a faulty device.","Please make sure the participant is in a well-lit area."],troubleshoot:!1}],aoe=[{index:0,value:"Please select an issue",steps:[],troubleshoot:!1},{index:1,value:"There is a delay in my screen sharing",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1},{index:2,value:"There is a delay in participant's screen share",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1},{index:3,value:"Not able to start or stop screen share",steps:["This error is most likely related to the browser or system you are using. Please ensure that your browser is updated to the latest version.","Please try switching to another browser","Please try sharing a tab or a window incase you are unable to share your entire screen."],troubleshoot:!1},{index:4,value:"Not able to view a participant's screen share",steps:["Please ensure you have a stable internet connection."],troubleshoot:!1}],ooe={audio:toe,video:ioe,screenshare:soe},LT={audio:roe,video:noe,screenshare:aoe},coe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;width:100%;flex-direction:column;align-items:flex-start;justify-content:flex-start}.section{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.title{display:flex;width:-moz-fit-content;width:fit-content;flex-direction:row;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title dyte-icon{margin-right:var(--dyte-space-2, 8px)}.sub-title{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));letter-spacing:0.5px}.text{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px;font-weight:100 !important;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;font-size:12px;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation div{margin-right:var(--dyte-space-2, 8px)}.device{margin-top:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-size:12px}select{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0) !important;border-style:none !important;outline:2px solid transparent !important;outline-offset:2px !important}.dyte-select{width:100%;max-width:100%;font-size:14px}.disabled{color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.report-link{margin-bottom:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-6, 24px);cursor:pointer;font-size:12px;--tw-text-opacity:1 !important;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity)) !important;-webkit-text-decoration-line:underline;text-decoration-line:underline}.report-issue{margin-top:var(--dyte-space-2, 8px)}`,nD=class{constructor(t){N(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.mediaType=void 0,this.issueIndex=0,this.reported=!0}selectIssue(t){this.issueIndex=parseInt(t),this.reported=!1,setTimeout(()=>{var e;(e=this.reportEl)===null||e===void 0||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},100)}reportIssue(){const{value:t}=LT[this.mediaType][this.issueIndex];this.meeting.__internals__.logger.info("dyteTroubleshooting::issue",{issue:t}),this.reported=!0,setTimeout(()=>{this.reported=!1},3e3)}render(){var t,e,i,s,r,n,a;const o=(t=LT[this.mediaType])!==null&&t!==void 0?t:[];return d(O,null,d("div",{class:"text"},this.t("Please select a prompt that best describes your issue")),d("select",{class:`dyte-select ${this.issueIndex===0?"disabled":""}`,onChange:c=>this.selectIssue(c.target.value)},o.map(c=>d("option",{value:c.index},d("span",null,c.value)))),((i=(e=o[this.issueIndex])===null||e===void 0?void 0:e.steps)===null||i===void 0?void 0:i.length)>0&&d("div",{class:"sub-title"},this.t("How to fix this:")),(r=(s=o[this.issueIndex])===null||s===void 0?void 0:s.steps)===null||r===void 0?void 0:r.map(c=>d("div",{class:"recommendation"},d("div",null,"\u2022"),this.t(c))),((a=(n=o[this.issueIndex])===null||n===void 0?void 0:n.steps)===null||a===void 0?void 0:a.length)>0&&(this.reported?d("p",{class:"report-link"},this.t("Your issue has been reported.")):d("div",{class:"report-issue"},d("p",{class:"recommendation",ref:c=>this.reportEl=c},this.t("Still facing the issue?")),d("dyte-button",{size:"sm",variant:"secondary",onClick:()=>this.reportIssue()},this.t("Report Now")))))}};nD.style=coe;const doe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.dyte-select{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.dyte-select:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.dyte-select{display:block;border-radius:var(--dyte-border-radius-sm, 4px);border-width:var(--dyte-border-width-none, 0);border-style:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:var(--dyte-space-3, 12px);font-size:16px;--icon-size:var(--dyte-select-chevron-size, var(--dyte-space-6, 24px));--icon-right-position:var(--dyte-select-chevron-right-position, var(--dyte-space-2, 8px));background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right var(--icon-right-position) center;background-repeat:no-repeat;background-size:var(--icon-size) var(--icon-size);padding-right:calc(var(--icon-right-position) * 5)}:host{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;width:100%}h3{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px}.info{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:14px}.info dyte-icon{margin-right:var(--dyte-space-2, 8px)}.text{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);font-size:14px;font-weight:100 !important;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.title{display:flex;width:-moz-fit-content;width:fit-content;flex-direction:row;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.title dyte-icon{margin-right:var(--dyte-space-2, 8px)}.device-indicator{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:column}.sub-title{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);font-size:14px;font-weight:600;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));letter-spacing:0.5px}.recommendation{margin-bottom:var(--dyte-space-1, 4px);display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;font-size:12px;line-height:1.5;color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.recommendation div{margin-right:var(--dyte-space-2, 8px)}.device{margin-bottom:var(--dyte-space-2, 8px);display:flex;flex-direction:row;font-size:14px}.device .label{width:var(--dyte-space-32, 128px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.device .seperator{margin-right:var(--dyte-space-2, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.ACCEPTED{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}.NOT_REQUESTED{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.NOT_REQUESTED dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}.DENIED,.SYSTEM_DENIED,.COULD_NOT_START{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}video{margin-top:var(--dyte-space-2, 8px);height:var(--dyte-space-36, 144px);width:auto;border-radius:var(--dyte-border-radius-md, 8px)}dyte-button{margin-top:var(--dyte-space-2, 8px)}`,aD=class{constructor(t){N(this,t),this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.issueKey=0,this.permission=void 0,this.devices={},this.mediaType=void 0}connectedCallback(){this.permissionUpdate(this.meeting,this.mediaType)}disconnectedCallback(){const{self:t}=this.meeting;t==null||t.removeListener("mediaPermissionUpdate",this.updatePermission)}permissionUpdate(t,e){var i,s;if(!t||!e)return;const{self:r,troubleshoot:n}=t;this.permission=(s=(i=n[e])===null||i===void 0?void 0:i.mediaPermission)!==null&&s!==void 0?s:"NOT_REQUESTED",this.getDevices(),r==null||r.addListener("mediaPermissionUpdate",this.updatePermission.bind(this)),r==null||r.addListener("deviceUpdate",this.deviceUpdateListener.bind(this))}updatePermission({kind:t,message:e}){t===this.mediaType&&(this.permission=e)}async allowPermission(){var t,e;if(this.mediaType==="audio"){const i=(t=this.meeting.troubleshoot)===null||t===void 0?void 0:t.audio;await(i==null?void 0:i.startTrackAnalysis(!0)),i.stopTrackAnalysis()}if(this.mediaType==="video"){const i=(e=this.meeting.troubleshoot)===null||e===void 0?void 0:e.video;await i.startPreview(),i.stopPreview()}}deviceUpdateListener({device:t,preview:e}){e||(t.kind==="audioinput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Microphone:t})),t.kind==="audiooutput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Speaker:t})),t.kind==="videoinput"&&(this.devices=Object.assign(Object.assign({},this.devices),{Camera:t})))}getDevices(){var t,e;const i=(e=(t=this.meeting)===null||t===void 0?void 0:t.self)===null||e===void 0?void 0:e.getCurrentDevices(),s=i==null?void 0:i.audio,r=i==null?void 0:i.speaker,n=i==null?void 0:i.video;s&&(this.devices=Object.assign(Object.assign({},this.devices),{Microphone:s})),r&&(this.devices=Object.assign(Object.assign({},this.devices),{Speaker:r})),n&&(this.devices=Object.assign(Object.assign({},this.devices),{Camera:n}))}render(){var t;const e=(t=ooe[this.mediaType])===null||t===void 0?void 0:t[this.permission],{browserName:i,osName:s,isMobile:r}=this.meeting.self.device,n=e.steps({browserName:i,osName:s,media:this.mediaType}),a=e.image({browserName:i,isMobile:r,osName:s}),o=this.mediaType==="audio"?["Microphone","Speaker"]:this.mediaType==="video"?["Camera"]:[];return d(O,null,d("h3",null,"Device Permissions"),d("div",{class:`info ${this.permission}`},d("dyte-icon",{size:"sm",icon:this.iconPack[e.icon]}),e.info),d("div",{class:"text"},e.text),this.permission==="ACCEPTED"&&o.length>0&&d("div",{class:"device-indicator"},o.map(c=>{var u;return d("div",{class:"device"},d("div",{class:"label"},"Active ",c),d("div",{class:"seperator"},":"),d("div",{class:"device-name"},(u=this.devices[c])===null||u===void 0?void 0:u.label))}),d("div",{class:"text"},this.t("You can change the active devices from settings."))),n.length>0&&d("div",{class:"sub-title"},this.t("How to fix this:")),n==null?void 0:n.map(c=>d("div",{class:"recommendation"},d("div",null,"\u2022"),this.t(c))),a!==""&&d("video",{src:`https://cdn.dyte.in/assets/permissions/${a}`,autoPlay:!0,muted:!0,loop:!0}),this.mediaType!=="screenshare"&&this.permission==="NOT_REQUESTED"&&d("dyte-button",{onClick:()=>this.allowPermission()},"Allow Device Permission"))}static get watchers(){return{meeting:["permissionUpdate"],mediaType:["permissionUpdate"]}}};aD.style=doe;const loe=":host{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);cursor:pointer}.tooltip-container{position:relative;display:flex;flex-direction:row;align-items:center}.tooltip-container dyte-icon{cursor:pointer;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.tooltip-container dyte-icon:hover+.tooltip{display:flex !important}.tooltip{position:absolute;margin-left:var(--dyte-space-2, 8px);display:none !important;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);font-weight:400;color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));z-index:50;display:flex;min-width:var(--dyte-space-60, 240px);flex-direction:column;--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);left:14px}",oD=class{constructor(t){N(this,t),this.iconPack=U}render(){return d(O,null,d("div",{class:"tooltip-container"},d("dyte-icon",{icon:this.iconPack.info,size:"sm"}),d("div",{class:"tooltip"},d("slot",{name:"tootlip-text"}))))}};oD.style=loe;var uoe=Object.freeze({__proto__:null,dyte_debugger_issues_ui:nD,dyte_debugger_permissions_ui:aD,dyte_information_tooltip:oD});const poe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);box-sizing:border-box;padding:var(--dyte-space-4, 16px);flex-direction:column;align-items:center;justify-content:center;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / 0.5);color:rgb(var(--dyte-colors-text-1000, 255 255 255));visibility:hidden;display:none;z-index:60;-webkit-backdrop-filter:blur(12px) saturate(180%);backdrop-filter:blur(12px) saturate(180%)}#dialog{position:relative;max-height:100%;max-width:100%}#dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);z-index:50}::slotted(*){max-height:100%;max-width:100%}:host([open]){visibility:visible;display:flex}:host([open='false']){visibility:hidden;display:none}",cD=class{constructor(t){N(this,t),this.onClose=K(this,"dyteDialogClose",7),this.close=()=>{this.open=!1,this.onClose.emit()},this.keydownListener=e=>{!this.disableEscapeKey&&e.key==="Escape"&&this.open&&this.close()},this.hideCloseButton=!1,this.disableEscapeKey=!1,this.meeting=void 0,this.config=Re,this.states=void 0,this.size=void 0,this.iconPack=U,this.t=j(),this.open=!0}connectedCallback(){document.addEventListener("keydown",this.keydownListener)}disconnectedCallback(){document.removeEventListener("keydown",this.keydownListener)}render(){return this.open?d(O,null,d("div",{id:"dialog",part:"container"},d("slot",null),!this.hideCloseButton&&d("dyte-button",{part:"close-button",id:"dismiss-btn",kind:"icon",variant:"ghost",onClick:()=>this.close(),iconPack:this.iconPack,t:this.t},d("dyte-icon",{icon:this.iconPack.dismiss,iconPack:this.iconPack,t:this.t})))):null}};cD.style=poe;var hoe=Object.freeze({__proto__:null,dyte_dialog:cD});const goe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;flex-direction:column;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));height:100%;width:auto}svg,img{height:100%;width:auto}.brand-color{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}",dD=class{constructor(t){N(this,t),this.logoUrl=void 0,this.config=Re,this.meeting=void 0,this.t=j()}connectedCallback(){this.configChanged(this.config),this.meetingChanged(this.meeting)}configChanged(t){var e;if(t!=null){const i=(e=t==null?void 0:t.designTokens)===null||e===void 0?void 0:e.logo;i!=null&&this.logoUrl==null&&(this.logoUrl=i)}}meetingChanged(t){var e,i,s,r;if(t!=null){const n=(r=(s=(i=(e=t.self)===null||e===void 0?void 0:e.config)===null||i===void 0?void 0:i.header)===null||s===void 0?void 0:s.elements)===null||r===void 0?void 0:r.logo;n!=null&&this.logoUrl==null&&(this.logoUrl=n)}}render(){if(!this.logoUrl||this.logoUrl==="")return null;const t=this.logoUrl,e=this.t("logo");return d(O,{class:"loaded"},d("img",{src:t,alt:e}))}static get watchers(){return{config:["configChanged"],meeting:["meetingChanged"]}}};dD.style=goe;var moe=Object.freeze({__proto__:null,dyte_logo:dD});function xh(t){return t.split("-")[0]}function Uv(t){return t.split("-")[1]}function Eh(t){return["top","bottom"].includes(xh(t))?"x":"y"}function yk(t){return t==="y"?"height":"width"}function NT(t,e,i){let{reference:s,floating:r}=t;const n=s.x+s.width/2-r.width/2,a=s.y+s.height/2-r.height/2,o=Eh(e),c=yk(o),u=s[c]/2-r[c]/2,l=xh(e),h=o==="x";let g;switch(l){case"top":g={x:n,y:s.y-r.height};break;case"bottom":g={x:n,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:a};break;case"left":g={x:s.x-r.width,y:a};break;default:g={x:s.x,y:s.y}}switch(Uv(e)){case"start":g[o]-=u*(i&&h?-1:1);break;case"end":g[o]+=u*(i&&h?-1:1);break}return g}const foe=async(t,e,i)=>{const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a}=i,o=n.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:l,y:h}=NT(u,s,c),g=s,m={},f=0;for(let _=0;_<o.length;_++){const{name:k,fn:y}=o[_],{x:b,y:x,data:C,reset:D}=await y({x:l,y:h,initialPlacement:s,placement:g,strategy:r,middlewareData:m,rects:u,platform:a,elements:{reference:t,floating:e}});if(l=b!=null?b:l,h=x!=null?x:h,m={...m,[k]:{...m[k],...C}},D&&f<=50){f++,typeof D=="object"&&(D.placement&&(g=D.placement),D.rects&&(u=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):D.rects),{x:l,y:h}=NT(u,g,c)),_=-1;continue}}return{x:l,y:h,placement:g,strategy:r,middlewareData:m}};function voe(t){return{top:0,right:0,bottom:0,left:0,...t}}function lD(t){return typeof t!="number"?voe(t):{top:t,right:t,bottom:t,left:t}}function If(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function uD(t,e){var i;e===void 0&&(e={});const{x:s,y:r,platform:n,rects:a,elements:o,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:h="floating",altBoundary:g=!1,padding:m=0}=e,f=lD(m),k=o[g?h==="floating"?"reference":"floating":h],y=If(await n.getClippingRect({element:(i=await(n.isElement==null?void 0:n.isElement(k)))==null||i?k:k.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(o.floating)),boundary:u,rootBoundary:l,strategy:c})),b=h==="floating"?{...a.floating,x:s,y:r}:a.reference,x=await(n.getOffsetParent==null?void 0:n.getOffsetParent(o.floating)),C=await(n.isElement==null?void 0:n.isElement(x))?await(n.getScale==null?void 0:n.getScale(x))||{x:1,y:1}:{x:1,y:1},D=If(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:x,strategy:c}):b);return{top:(y.top-D.top+f.top)/C.y,bottom:(D.bottom-y.bottom+f.bottom)/C.y,left:(y.left-D.left+f.left)/C.x,right:(D.right-y.right+f.right)/C.x}}const yoe=Math.min,boe=Math.max;function G1(t,e,i){return boe(t,yoe(e,i))}const woe=t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:s=0}=t!=null?t:{},{x:r,y:n,placement:a,rects:o,platform:c}=e;if(i==null)return{};const u=lD(s),l={x:r,y:n},h=Eh(a),g=yk(h),m=await c.getDimensions(i),f=h==="y"?"top":"left",_=h==="y"?"bottom":"right",k=o.reference[g]+o.reference[h]-l[h]-o.floating[g],y=l[h]-o.reference[h],b=await(c.getOffsetParent==null?void 0:c.getOffsetParent(i));let x=b?h==="y"?b.clientHeight||0:b.clientWidth||0:0;x===0&&(x=o.floating[g]);const C=k/2-y/2,D=u[f],M=x-m[g]-u[_],L=x/2-m[g]/2+C,V=G1(D,L,M),Q=Uv(a)!=null&&L!=V&&o.reference[g]/2-(L<D?u[f]:u[_])-m[g]/2<0?L<D?D-L:M-L:0;return{[h]:l[h]-Q,data:{[h]:V,centerOffset:L-V}}}}),_oe={left:"right",right:"left",bottom:"top",top:"bottom"};function Af(t){return t.replace(/left|right|bottom|top/g,e=>_oe[e])}function koe(t,e,i){i===void 0&&(i=!1);const s=Uv(t),r=Eh(t),n=yk(r);let a=r==="x"?s===(i?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(a=Af(a)),{main:a,cross:Af(a)}}const Soe={start:"end",end:"start"};function UT(t){return t.replace(/start|end/g,e=>Soe[e])}function xoe(t){const e=Af(t);return[UT(t),e,UT(e)]}const pD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i;const{placement:s,middlewareData:r,rects:n,initialPlacement:a,platform:o,elements:c}=e,{mainAxis:u=!0,crossAxis:l=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",flipAlignment:m=!0,...f}=t,_=xh(s),y=h||(_===a||!m?[Af(a)]:xoe(a)),b=[a,...y],x=await uD(e,f),C=[];let D=((i=r.flip)==null?void 0:i.overflows)||[];if(u&&C.push(x[_]),l){const{main:se,cross:Q}=koe(s,n,await(o.isRTL==null?void 0:o.isRTL(c.floating)));C.push(x[se],x[Q])}if(D=[...D,{placement:s,overflows:C}],!C.every(se=>se<=0)){var M,L;const se=((M=(L=r.flip)==null?void 0:L.index)!=null?M:0)+1,Q=b[se];if(Q)return{data:{index:se,overflows:D},reset:{placement:Q}};let te="bottom";switch(g){case"bestFit":{var V;const Ae=(V=D.map(ze=>[ze,ze.overflows.filter(Xe=>Xe>0).reduce((Xe,xt)=>Xe+xt,0)]).sort((ze,Xe)=>ze[1]-Xe[1])[0])==null?void 0:V[0].placement;Ae&&(te=Ae);break}case"initialPlacement":te=a;break}if(s!==te)return{reset:{placement:te}}}return{}}}};async function Eoe(t,e){const{placement:i,platform:s,elements:r}=t,n=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=xh(i),o=Uv(i),c=Eh(i)==="x",u=["left","top"].includes(a)?-1:1,l=n&&c?-1:1,h=typeof e=="function"?e(t):e;let{mainAxis:g,crossAxis:m,alignmentAxis:f}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return o&&typeof f=="number"&&(m=o==="end"?f*-1:f),c?{x:m*l,y:g*u}:{x:g*u,y:m*l}}const hD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:i,y:s}=e,r=await Eoe(e,t);return{x:i+r.x,y:s+r.y,data:r}}}};function Toe(t){return t==="x"?"y":"x"}const gD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:s,placement:r}=e,{mainAxis:n=!0,crossAxis:a=!1,limiter:o={fn:k=>{let{x:y,y:b}=k;return{x:y,y:b}}},...c}=t,u={x:i,y:s},l=await uD(e,c),h=Eh(xh(r)),g=Toe(h);let m=u[h],f=u[g];if(n){const k=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+l[k],x=m-l[y];m=G1(b,m,x)}if(a){const k=g==="y"?"top":"left",y=g==="y"?"bottom":"right",b=f+l[k],x=f-l[y];f=G1(b,f,x)}const _=o.fn({...e,[h]:m,[g]:f});return{..._,data:{x:_.x-i,y:_.y-s}}}}};function nr(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _n(t){return nr(t).getComputedStyle(t)}function fo(t){return fD(t)?(t.nodeName||"").toLowerCase():""}let bg;function mD(){if(bg)return bg;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(bg=t.brands.map(e=>e.brand+"/"+e.version).join(" "),bg):navigator.userAgent}function ca(t){return t instanceof nr(t).HTMLElement}function vo(t){return t instanceof nr(t).Element}function fD(t){return t instanceof nr(t).Node}function $T(t){if(typeof ShadowRoot>"u")return!1;const e=nr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $v(t){const{overflow:e,overflowX:i,overflowY:s,display:r}=_n(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(r)}function Coe(t){return["table","td","th"].includes(fo(t))}function bk(t){const e=/firefox/i.test(mD()),i=_n(t),s=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(s?s!=="none":!1)||e&&i.willChange==="filter"||e&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(r=>i.willChange.includes(r))||["paint","layout","strict","content"].some(r=>{const n=i.contain;return n!=null?n.includes(r):!1})}function vD(){return!/^((?!chrome|android).)*safari/i.test(mD())}function wk(t){return["html","body","#document"].includes(fo(t))}const jT=Math.min,pp=Math.max,Df=Math.round;function yD(t){const e=_n(t);let i=parseFloat(e.width),s=parseFloat(e.height);const r=t.offsetWidth,n=t.offsetHeight,a=Df(i)!==r||Df(s)!==n;return a&&(i=r,s=n),{width:i,height:s,fallback:a}}function bD(t){return vo(t)?t:t.contextElement}const wD={x:1,y:1};function ll(t){const e=bD(t);if(!ca(e))return wD;const i=e.getBoundingClientRect(),{width:s,height:r,fallback:n}=yD(e);let a=(n?Df(i.width):i.width)/s,o=(n?Df(i.height):i.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}function qp(t,e,i,s){var r,n;e===void 0&&(e=!1),i===void 0&&(i=!1);const a=t.getBoundingClientRect(),o=bD(t);let c=wD;e&&(s?vo(s)&&(c=ll(s)):c=ll(t));const u=o?nr(o):window,l=!vD()&&i;let h=(a.left+(l&&((r=u.visualViewport)==null?void 0:r.offsetLeft)||0))/c.x,g=(a.top+(l&&((n=u.visualViewport)==null?void 0:n.offsetTop)||0))/c.y,m=a.width/c.x,f=a.height/c.y;if(o){const _=nr(o),k=s&&vo(s)?nr(s):s;let y=_.frameElement;for(;y&&s&&k!==_;){const b=ll(y),x=y.getBoundingClientRect(),C=getComputedStyle(y);x.x+=(y.clientLeft+parseFloat(C.paddingLeft))*b.x,x.y+=(y.clientTop+parseFloat(C.paddingTop))*b.y,h*=b.x,g*=b.y,m*=b.x,f*=b.y,h+=x.x,g+=x.y,y=nr(y).frameElement}}return{width:m,height:f,top:g,right:h+m,bottom:g+f,left:h,x:h,y:g}}function Co(t){return((fD(t)?t.ownerDocument:t.document)||window.document).documentElement}function jv(t){return vo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function _D(t){return qp(Co(t)).left+jv(t).scrollLeft}function Poe(t,e,i){const s=ca(e),r=Co(e),n=qp(t,!0,i==="fixed",e);let a={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(s||!s&&i!=="fixed")if((fo(e)!=="body"||$v(r))&&(a=jv(e)),ca(e)){const c=qp(e,!0);o.x=c.x+e.clientLeft,o.y=c.y+e.clientTop}else r&&(o.x=_D(r));return{x:n.left+a.scrollLeft-o.x,y:n.top+a.scrollTop-o.y,width:n.width,height:n.height}}function Gp(t){if(fo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||($T(t)?t.host:null)||Co(t);return $T(e)?e.host:e}function zT(t){return!ca(t)||_n(t).position==="fixed"?null:t.offsetParent}function Roe(t){let e=Gp(t);for(;ca(e)&&!wk(e);){if(bk(e))return e;e=Gp(e)}return null}function FT(t){const e=nr(t);let i=zT(t);for(;i&&Coe(i)&&_n(i).position==="static";)i=zT(i);return i&&(fo(i)==="html"||fo(i)==="body"&&_n(i).position==="static"&&!bk(i))?e:i||Roe(t)||e}function Ioe(t){return yD(t)}function Aoe(t){let{rect:e,offsetParent:i,strategy:s}=t;const r=ca(i),n=Co(i);if(i===n)return e;let a={scrollLeft:0,scrollTop:0},o={x:1,y:1};const c={x:0,y:0};if((r||!r&&s!=="fixed")&&((fo(i)!=="body"||$v(n))&&(a=jv(i)),ca(i))){const u=qp(i);o=ll(i),c.x=u.x+i.clientLeft,c.y=u.y+i.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+c.x,y:e.y*o.y-a.scrollTop*o.y+c.y}}function Doe(t,e){const i=nr(t),s=Co(t),r=i.visualViewport;let n=s.clientWidth,a=s.clientHeight,o=0,c=0;if(r){n=r.width,a=r.height;const u=vD();(u||!u&&e==="fixed")&&(o=r.offsetLeft,c=r.offsetTop)}return{width:n,height:a,x:o,y:c}}function Moe(t){var e;const i=Co(t),s=jv(t),r=(e=t.ownerDocument)==null?void 0:e.body,n=pp(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=pp(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let o=-s.scrollLeft+_D(t);const c=-s.scrollTop;return _n(r||i).direction==="rtl"&&(o+=pp(i.clientWidth,r?r.clientWidth:0)-n),{width:n,height:a,x:o,y:c}}function kD(t){const e=Gp(t);return wk(e)?t.ownerDocument.body:ca(e)&&$v(e)?e:kD(e)}function SD(t,e){var i;e===void 0&&(e=[]);const s=kD(t),r=s===((i=t.ownerDocument)==null?void 0:i.body),n=nr(s);return r?e.concat(n,n.visualViewport||[],$v(s)?s:[]):e.concat(s,SD(s))}function Ooe(t,e){const i=qp(t,!0,e==="fixed"),s=i.top+t.clientTop,r=i.left+t.clientLeft,n=ca(t)?ll(t):{x:1,y:1},a=t.clientWidth*n.x,o=t.clientHeight*n.y,c=r*n.x,u=s*n.y;return{top:u,left:c,right:c+a,bottom:u+o,x:c,y:u,width:a,height:o}}function VT(t,e,i){return e==="viewport"?If(Doe(t,i)):vo(e)?Ooe(e,i):If(Moe(Co(t)))}function Loe(t,e){const i=e.get(t);if(i)return i;let s=SD(t).filter(o=>vo(o)&&fo(o)!=="body"),r=null;const n=_n(t).position==="fixed";let a=n?Gp(t):t;for(;vo(a)&&!wk(a);){const o=_n(a),c=bk(a);(n?!c&&!r:!c&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position))?s=s.filter(l=>l!==a):r=o,a=Gp(a)}return e.set(t,s),s}function Noe(t){let{element:e,boundary:i,rootBoundary:s,strategy:r}=t;const a=[...i==="clippingAncestors"?Loe(e,this._c):[].concat(i),s],o=a[0],c=a.reduce((u,l)=>{const h=VT(e,l,r);return u.top=pp(h.top,u.top),u.right=jT(h.right,u.right),u.bottom=jT(h.bottom,u.bottom),u.left=pp(h.left,u.left),u},VT(e,o,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const Uoe={getClippingRect:Noe,convertOffsetParentRelativeRectToViewportRelativeRect:Aoe,isElement:vo,getDimensions:Ioe,getOffsetParent:FT,getDocumentElement:Co,getScale:ll,async getElementRects(t){let{reference:e,floating:i,strategy:s}=t;const r=this.getOffsetParent||FT,n=this.getDimensions;return{reference:Poe(e,await r(i),s),floating:{x:0,y:0,...await n(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>_n(t).direction==="rtl"},xD=(t,e,i)=>{const s=new Map,r={platform:Uoe,...i},n={...r.platform,_c:s};return foe(t,e,{...r,platform:n})},$oe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20;display:none}",ED=class{constructor(e){N(this,e),this.clickedThis=!1,this.handleOutsideClick=()=>{this.clickedThis||(this.menuListEl.style.display="none"),this.clickedThis=!1},this.size=void 0,this.placement="bottom-end",this.iconPack=U,this.t=j()}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick),this.update()}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick)}update(){xD(this.triggerEl,this.menuListEl,{placement:this.placement,middleware:[hD(10),pD(),gD({padding:5})]}).then(({x:e,y:i})=>{Object.assign(this.menuListEl.style,{left:`${e}px`,top:`${i}px`})})}render(){return d(O,null,d("span",{id:"trigger",ref:e=>this.triggerEl=e,onClick:()=>{this.clickedThis=!0,this.menuListEl.style.display!=="block"?(this.menuListEl.style.display="block",this.update()):this.menuListEl.style.display="none"}},d("slot",{name:"trigger"})),d("span",{part:"menu-list",id:"menu-list",ref:e=>this.menuListEl=e},d("slot",null)))}};ED.style=$oe;const joe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;align-items:center;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px}::slotted([slot='start']){margin-right:var(--dyte-space-2, 8px)}::slotted([slot='end']){margin-left:var(--dyte-space-2, 8px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host(.red){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}",TD=class{constructor(t){N(this,t),this.size=void 0,this.iconPack=U,this.t=j()}render(){return d(O,null,d("slot",{name:"start"}),d("slot",null),d("slot",{name:"end"}))}};TD.style=joe;const zoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;width:-moz-max-content;width:max-content;flex-direction:column;padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}",CD=class{constructor(t){N(this,t),this.iconPack=U,this.t=j()}render(){return d(O,null,d("slot",null))}};CD.style=zoe;var Foe=Object.freeze({__proto__:null,dyte_menu:ED,dyte_menu_item:TD,dyte_menu_list:CD});const Voe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:flex;height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px);align-items:center;justify-content:center;font-size:28px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)));border-radius:9999px}dyte-icon{height:50%;width:50%}.image-ctr{display:flex;height:100%;width:100%;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}img{height:var(--dyte-space-0, 0px);width:var(--dyte-space-0, 0px);-o-object-fit:cover;object-fit:cover}img.loaded{height:100%;width:100%}.initials{display:flex;height:100%;width:100%;align-items:center;justify-content:center;text-transform:uppercase}.image{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.image img{display:none;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.image img.loaded{display:block}:host([variant='hexagon']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%);clip-path:polygon(50% 0, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%)}:host([variant='square']){border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);clip-path:polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)}:host([size='sm']){height:var(--dyte-space-14, 56px);width:var(--dyte-space-14, 56px);font-size:12px}:host([size='md']){height:var(--dyte-space-28, 112px);width:var(--dyte-space-28, 112px)}:host([size='lg']){height:var(--dyte-space-32, 128px);width:var(--dyte-space-32, 128px)}",PD=class{constructor(t){N(this,t),this.getAvatar=()=>{var e;const i=cr(((e=this.participant)===null||e===void 0?void 0:e.name)||"");let s;if(this.participant!=null&&"picture"in this.participant&&(s=this.participant.picture),s&&s.length>0&&this.imageState!=="errored")return d("div",{class:"image-ctr"},this.imageState==="loading"&&d("dyte-spinner",{iconPack:this.iconPack,t:this.t}),d("img",{src:s,class:{loaded:this.imageState==="loaded"},loading:"lazy",title:i,onLoad:()=>this.imageState="loaded",onError:()=>this.imageState="errored",part:"image"}));const r=j4(i);return d("div",{class:"initials",title:i,part:"initials"},r)},this.participant=void 0,this.variant="circular",this.size=void 0,this.iconPack=U,this.t=j(),this.imageState="loading"}render(){return d(O,null,this.getAvatar(),d("slot",null))}};PD.style=Voe;var Boe=Object.freeze({__proto__:null,dyte_avatar:PD});const Hoe=`:host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(
    --dyte-controlbar-button-background-color,
    rgb(var(--dyte-colors-background-1000, 8 8 8))
  );--icon-size:var(--dyte-controlbar-button-icon-size, var(--dyte-space-7, 28px));--button-spacing:var(--dyte-controlbar-button-spacing, var(--dyte-space-1, 4px));position:relative;box-sizing:border-box;display:inline-flex;outline:2px solid transparent !important;outline-offset:2px !important;margin-left:var(--dyte-space-0\\.5, 2px);margin-right:var(--dyte-space-0\\.5, 2px);height:100%;width:auto;min-width:var(--dyte-space-20, 80px);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-md, 8px);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;color:rgb(var(--dyte-colors-text-1000, 255 255 255));border:var(--dyte-border-width-md, 2px) solid transparent;background-color:var(--background-color)}button{padding:var(--dyte-space-1, 4px)}:host(.red-icon) #icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([disabled]){color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}button{box-sizing:border-box;display:inline-flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;color:inherit;outline:2px solid transparent;outline-offset:2px}.label{text-align:center;font-size:12px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}#warning-indicator{position:absolute;top:var(--dyte-space-1, 4px);right:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}:host([size='sm']) #warning-indicator{right:var(--dyte-space-0, 0px);top:var(--dyte-space-0, 0px);height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}#icon{margin-bottom:var(--button-spacing);width:var(--icon-size);height:var(--icon-size)}:host([size='sm']),:host([variant='horizontal']){--button-spacing:0px}:host(.leave:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-danger, 255 45 45))}:host(.active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-400, 53 110 253) / var(--tw-text-opacity));border:var(--dyte-border-width-md, 2px) solid rgb(var(--dyte-colors-brand-400, 53 110 253))}:host(.active-livestream){--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}:host([size='sm']){margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);min-width:var(--dyte-space-14, 56px)}:host([size='sm']) .label{display:none}:host([variant='horizontal']){margin:var(--dyte-space-0, 0px);height:var(--dyte-space-12, 48px);width:100%;padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px)}:host([variant='horizontal']) button{flex-direction:row;justify-content:flex-start}:host([variant='horizontal']) #icon{margin-right:var(--dyte-space-3, 12px);width:var(--dyte-space-6, 24px)}:host([variant='horizontal']) .label{display:block;font-size:14px;line-height:1.25rem}:host([variant='horizontal']) #warning-indicator{right:auto;left:var(--dyte-space-4, 16px)}:host([brand-icon]) dyte-icon#icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}@media only screen and (max-device-height: 480px) and (orientation: landscape){:host{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px)}:host .label{display:none}:slotted(dyte-icon){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}}`,RD=class{constructor(t){N(this,t),this.variant="button",this.showWarning=!1,this.size=void 0,this.label=void 0,this.icon=void 0,this.isLoading=void 0,this.disabled=!1,this.iconPack=U,this.t=j(),this.brandIcon=!1}render(){return d(O,null,d("button",{"aria-label":this.label,part:"button"},this.isLoading?d("dyte-spinner",{id:"icon",part:"spinner",iconPack:this.iconPack,t:this.t}):d("dyte-icon",{id:"icon",icon:this.icon,tabIndex:-1,"aria-hidden":!0,part:"icon",iconPack:this.iconPack,t:this.t}),d("span",{class:"label",part:"label"},this.label),this.showWarning&&d("dyte-icon",{id:"warning-indicator",icon:this.iconPack.warning,part:"warning-indicator",iconPack:this.iconPack,t:this.t})))}};RD.style=Hoe;var Woe=Object.freeze({__proto__:null,dyte_controlbar_button:RD});const qoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--background-color:var(--dyte-tooltip-background-color, rgb(var(--dyte-colors-background-600, 60 60 60)));--color:var(--dyte-tooltip-color, rgb(var(--dyte-colors-text-1000, 255 255 255)));display:inline-flex}#trigger{display:block;width:100%;flex:1 1 0%}.tooltip{max-width:var(--dyte-space-64, 256px);position:fixed;z-index:20;display:none;width:-moz-max-content;width:max-content;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1, 4px);padding-bottom:var(--dyte-space-1, 4px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);font-size:12px}.tooltip,#arrow{position:absolute;background-color:var(--background-color);color:var(--color)}#arrow{position:absolute;height:var(--dyte-space-2, 8px);width:var(--dyte-space-2, 8px);transform:rotate(45deg)}:host([variant='primary']){--background-color:rgb(var(--dyte-colors-brand-500, 33 96 253));--color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host([kind='block']){display:block}",ID=class{constructor(t){N(this,t),this.dyteOpenChange=K(this,"dyteOpenChange",7),this.showMenu=()=>{this.disabled||(this.isInFocus=!0,setTimeout(()=>{this.isInFocus&&(this.tooltipEl.style.display="block",this.update(),this.dyteOpenChange.emit(!0),this.size==="sm"&&setTimeout(()=>{this.isInFocus&&this.hideMenu()},1e3))},this.delay))},this.hideMenu=()=>{this.open||this.disabled||(this.isInFocus=!1,this.tooltipEl.style.display="none",this.dyteOpenChange.emit(!1))},this.label="",this.variant="secondary",this.disabled=!1,this.open=!1,this.kind="inline",this.size=void 0,this.placement="top",this.delay=0,this.iconPack=U,this.t=j(),this.isInFocus=!1}componentDidLoad(){this.triggerEl.addEventListener("focusin",this.showMenu),this.triggerEl.addEventListener("mouseenter",this.showMenu),this.triggerEl.addEventListener("focusout",this.hideMenu),this.triggerEl.addEventListener("mouseleave",this.hideMenu),Ci(()=>{this.openChanged(this.open)})}openChanged(t){t?this.showMenu():this.hideMenu()}update(){xD(this.triggerEl,this.tooltipEl,{placement:this.placement,middleware:[hD(8),pD(),gD({padding:5}),woe({element:this.arrowEl})]}).then(({x:t,y:e,placement:i,middlewareData:s})=>{Object.assign(this.tooltipEl.style,{left:`${t}px`,top:`${e}px`});const{x:r,y:n}=s.arrow,a={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(this.arrowEl.style,{left:r!=null?`${r}px`:"",top:n!=null?`${n}px`:"",right:"",bottom:"",[a]:"-4px"})})}render(){return d(O,null,d("span",{part:"trigger",id:"trigger",ref:t=>this.triggerEl=t},d("slot",null)),d("div",{part:"tooltip",class:"tooltip",id:"tooltip",role:"tooltip",ref:t=>this.tooltipEl=t},d("div",{id:"arrow",ref:t=>this.arrowEl=t,part:"arrow"}),this.label,d("slot",{name:"tooltip"})))}static get watchers(){return{open:["openChanged"]}}};ID.style=qoe;var Goe=Object.freeze({__proto__:null,dyte_tooltip:ID});const Joe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{box-sizing:border-box;display:block;height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px);--dyte-spinner-color:currentColor}.spinner{height:100%;width:100%}@keyframes spin{to{transform:rotate(360deg)}}.spinner{animation:spin 1s linear infinite;border-radius:9999px;background-color:transparent;animation-duration:1.3s}:host([size='md']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']){height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}",AD=class{constructor(t){N(this,t),this.iconPack=U,this.size="md",this.t=j()}render(){return d(O,null,d("dyte-icon",{class:"spinner",icon:this.iconPack.spinner,iconPack:this.iconPack,t:this.t}))}};AD.style=Joe;var Koe=Object.freeze({__proto__:null,dyte_spinner:AD});const Qoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{--icon-size:var(--dyte-button-icon-size, var(--dyte-space-5, 20px));--transition-property:var(--dyte-transition-property, all);--transition-duration:100ms;display:inline-flex;height:var(--dyte-space-8, 32px);cursor:pointer;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--dyte-border-radius-sm, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration)}button{box-sizing:border-box;background-color:transparent;color:inherit;border:var(--dyte-border-width-sm, 1px) solid transparent;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);display:inline-flex;flex-grow:1;justify-content:center;vertical-align:baseline;gap:var(--dyte-space-1, 4px);transition-property:var(--transition-property);transition-duration:var(--transition-duration);outline:none;height:inherit;border-radius:inherit;fill:inherit;cursor:inherit;font-weight:inherit;font-family:inherit;font-size:inherit;line-height:inherit}.start,.content,.end{align-self:center}::slotted(dyte-icon),::slotted(dyte-spinner){height:var(--icon-size);width:var(--icon-size)}:host([variant='primary']){color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}:host(:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-600, 13 81 253) / var(--tw-bg-opacity))}button:focus-visible{border-color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host(:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-700, 2 70 253) / var(--tw-bg-opacity))}:host([disabled]){cursor:not-allowed;opacity:0.6}:host([variant='secondary']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='secondary']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([variant='secondary']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([variant='danger']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='danger']:hover){background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.7)}:host([variant='danger']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-bg-opacity))}:host([variant='ghost']){background-color:transparent;color:inherit}:host([variant='ghost'].active){--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}:host([variant='ghost']:hover){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}:host([variant='ghost']:active){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([kind='icon']){--icon-size:var(--dyte-space-5, 20px);width:var(--dyte-space-8, 32px)}:host([kind='icon']) button{padding-left:var(--dyte-space-0, 0px);padding-right:var(--dyte-space-0, 0px)}:host([kind='wide']){width:100%}:host([size='lg']){--icon-size:var(--dyte-space-5, 20px);height:var(--dyte-space-10, 40px);font-size:16px}:host([size='lg'][kind='icon']){--icon-size:var(--dyte-space-6, 24px);height:var(--dyte-space-10, 40px);width:var(--dyte-space-10, 40px)}:host([size='sm']){--icon-size:var(--dyte-space-4, 16px);height:var(--dyte-space-6, 24px);font-size:12px}:host([size='sm'][kind='icon']){height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}",DD=class{constructor(t){N(this,t),this.size=void 0,this.variant="primary",this.kind="button",this.reverse=!1,this.disabled=!1,this.iconPack=U,this.t=j()}render(){return d(O,null,d("button",{part:"button"},d("span",{class:"start"},d("slot",{name:"start"})),d("span",{class:"content",part:"content"},d("slot",null)),d("span",{class:"end"},d("slot",{name:"end"}))))}};DD.style=Qoe;var Yoe=Object.freeze({__proto__:null,dyte_button:DD});const Zoe=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{display:block;height:var(--dyte-space-10, 40px);outline:2px solid transparent;outline-offset:2px}:host .icon-wrapper{display:flex;height:100%;width:100%;flex-direction:column;align-items:center}:host svg{height:100%;width:100%;outline:2px solid transparent;outline-offset:2px}:host([size='xl']){box-sizing:border-box;display:block;height:var(--dyte-space-16, 64px) !important;width:var(--dyte-space-16, 64px) !important;--dyte-spinner-color:currentColor}:host([size='md']){box-sizing:border-box;display:block;height:var(--dyte-space-6, 24px) !important;width:var(--dyte-space-6, 24px) !important;--dyte-spinner-color:currentColor}:host([size='sm']){box-sizing:border-box;display:block;height:var(--dyte-space-4, 16px) !important;width:var(--dyte-space-4, 16px) !important;--dyte-spinner-color:currentColor}",Xoe=t=>{try{return JSON.parse(t)}catch{return t}},MD=class{constructor(t){N(this,t),this.icon=void 0,this.iconPack=U,this.t=j(),this.size="lg"}render(){return d(O,null,d("div",{class:"icon-wrapper",innerHTML:Xoe(this.icon),part:"wrapper"}))}};MD.style=Zoe;var ece=Object.freeze({__proto__:null,dyte_icon:MD});(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();XZ();const tce=Ul("dyte-audio-visualizer"),ice=Ul("dyte-avatar"),sce=Ul("dyte-name-tag"),rce=Ul("dyte-participant-tile"),nce=Ul("dyte-participants-audio"),ace=Ul("dyte-simple-grid");var OD=typeof global=="object"&&global&&global.Object===Object&&global,oce=typeof self=="object"&&self&&self.Object===Object&&self,Vl=OD||oce||Function("return this")(),Mf=Vl.Symbol,LD=Object.prototype,cce=LD.hasOwnProperty,dce=LD.toString,Eu=Mf?Mf.toStringTag:void 0;function lce(t){var e=cce.call(t,Eu),i=t[Eu];try{t[Eu]=void 0;var s=!0}catch{}var r=dce.call(t);return s&&(e?t[Eu]=i:delete t[Eu]),r}var uce=Object.prototype,pce=uce.toString;function hce(t){return pce.call(t)}var gce="[object Null]",mce="[object Undefined]",BT=Mf?Mf.toStringTag:void 0;function zv(t){return t==null?t===void 0?mce:gce:BT&&BT in Object(t)?lce(t):hce(t)}function Jc(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Th(t){return t!=null&&typeof t=="object"}var HT;(function(t){t.BUFFERING="Buffering",t.ENDED="Ended",t.IDLE="Idle",t.PLAYING="Playing",t.READY="Ready"})(HT||(HT={}));var Li;(function(t){t.INITIALIZED="PlayerInitialized",t.QUALITY_CHANGED="PlayerQualityChanged",t.DURATION_CHANGED="PlayerDurationChanged",t.VOLUME_CHANGED="PlayerVolumeChanged",t.MUTED_CHANGED="PlayerMutedChanged",t.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",t.REBUFFERING="PlayerRebuffering",t.AUDIO_BLOCKED="PlayerAudioBlocked",t.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",t.ERROR="PlayerError",t.RECOVERABLE_ERROR="PlayerRecoverableError",t.ANALYTICS_EVENT="PlayerAnalyticsEvent",t.TIME_UPDATE="PlayerTimeUpdate",t.BUFFER_UPDATE="PlayerBufferUpdate",t.SEEK_COMPLETED="PlayerSeekCompleted",t.SESSION_DATA="PlayerSessionData",t.STATE_CHANGED="PlayerStateChanged",t.WORKER_ERROR="PlayerWorkerError",t.METADATA="PlayerMetadata",t.TEXT_CUE="PlayerTextCue",t.TEXT_METADATA_CUE="PlayerTextMetadataCue",t.AD_CUE="PlayerAdCue",t.STREAM_SOURCE_CUE="PlayerStreamSourceCue",t.NETWORK_UNAVAILABLE="PlayerNetworkUnavailable",t.SEGMENT_DISCONTINUITY="PlayerSegmentDiscontinuity",t.SEGMENT_METADATA="PlayerSegmentMetadata",t.PLAYER_METADATA="PlayerMetadata"})(Li||(Li={}));Li.TIME_UPDATE,Li.BUFFER_UPDATE,Li.TEXT_METADATA_CUE,Li.PLAYER_METADATA;Li.REBUFFERING,Li.AUDIO_BLOCKED,Li.PLAYBACK_BLOCKED,Li.ERROR,Li.RECOVERABLE_ERROR,Li.WORKER_ERROR,Li.NETWORK_UNAVAILABLE,Li.ANALYTICS_EVENT,Li.PLAYBACK_RATE_CHANGED,Li.QUALITY_CHANGED,Li.INITIALIZED;const fce=[0,.5,1,1.5,2,3,4,5,6,7,8,9,10,12,14,16,20,24,28,32,36,40,44,48,52,56,60,64,72,80,96],vce={darkest:{background:{1e3:"#080808",900:"#1A1A1A",800:"#1E1E1E",700:"#2C2C2C",600:"#393939"},text:"#FFFFFF"},dark:{background:{1e3:"#252525",900:"#2F2F2F",800:"#323232",700:"#3E3E3E",600:"#4A4A4A"},text:"#F5F5F5","video-bg":"#1C1C1C"},light:{background:{1e3:"#FFFFFF",900:"#F5F5F5",800:"#EBEBEB",700:"#E0E0E0",600:"#D6D6D6"},text:"#111111","text-on-brand":"#ffffff","video-bg":"#DADADA"}},WT={none:{none:0,sm:0,md:0,lg:0},thin:{none:0,sm:1,md:2,lg:4},fat:{none:0,sm:2,md:4,lg:8}},qT={sharp:{none:0,sm:0,md:0,lg:0},rounded:{none:0,sm:4,md:8,lg:12},"extra-rounded":{none:0,sm:8,md:16,lg:24},circular:{none:9999,sm:9999,md:9999,lg:9999}};function I0(t){t=t.trim();let e="0",i="0",s="0";return t.length==4?(e="0x"+t[1]+t[1],i="0x"+t[2]+t[2],s="0x"+t[3]+t[3]):t.length>6&&(e="0x"+t[1]+t[2],i="0x"+t[3]+t[4],s="0x"+t[5]+t[6]),[+e,+i,+s]}const yce=t=>{const e=[400,500,700],i=[];if(document.querySelector("link[data-dyte-font]")==null){const r=document.createElement("link");r.rel="preconnect",r.setAttribute("data-dyte-font","true"),r.href="https://fonts.googleapis.com";const n=r.cloneNode(!0);n.href="https://fonts.gstatic.com",n.crossOrigin="",i.push(r,n)}const s=document.createElement("link");s.rel="stylesheet",s.setAttribute("data-dyte-font",t),s.href=encodeURI(`https://fonts.googleapis.com/css2?family=${t}:wght@${e.join(";")}&display=swap`),i.push(s),document.head.append(...i)},bce=(t,e)=>{fce.forEach(i=>{t.style.setProperty(`--dyte-space-${i}`,`${i*e}px`)})},wce=(t,e)=>{if(e in WT){const i=WT[e];Object.keys(i).forEach(s=>{t.style.setProperty(`--dyte-border-width-${s}`,`${i[s]}px`)})}},_ce=(t,e)=>{if(e in qT){const i=qT[e];Object.keys(i).forEach(s=>{t.style.setProperty(`--dyte-border-radius-${s}`,`${i[s]}px`)})}},GT=(t,e)=>{Object.keys(e).forEach(i=>{const s=e[i];if(typeof s=="string")if(i==="text"||i==="text-on-brand"){const r=I0(s).join(" ");t.style.setProperty(`--dyte-colors-${i}-1000`,`${r}`),t.style.setProperty(`--dyte-colors-${i}-900`,`${r} / 0.88`),t.style.setProperty(`--dyte-colors-${i}-800`,`${r} / 0.76`),t.style.setProperty(`--dyte-colors-${i}-700`,`${r} / 0.64`),t.style.setProperty(`--dyte-colors-${i}-600`,`${r} / 0.52`)}else{const r=I0(s).join(" ");t.style.setProperty(`--dyte-colors-${i}`,r)}else typeof s=="object"&&Object.keys(s).forEach(r=>{const n=s[r],a=I0(n).join(" ");t.style.setProperty(`--dyte-colors-${i}-${r}`,a)})})},kce=(t,{spacingBase:e,borderRadius:i,borderWidth:s,colors:r,fontFamily:n,googleFont:a,theme:o})=>{if(typeof t!="object")throw new Error("[dyte-ui-kit] (provideDyteDesignSystem): Passed element is not a valid HTML Element");if(typeof a=="string"&&(yce(a),t.style.setProperty("--dyte-font-family",a)),typeof n=="string"&&t.style.setProperty("--dyte-font-family",n),typeof e=="number"&&bce(t,e),typeof s=="string"&&wce(t,s),typeof i=="string"&&_ce(t,i),typeof o=="string"){const c=vce[o];c!=null&&GT(t,c)}typeof r=="object"&&GT(t,r)};function Sce(){this.__data__=[],this.size=0}function Fv(t,e){return t===e||t!==t&&e!==e}function Vv(t,e){for(var i=t.length;i--;)if(Fv(t[i][0],e))return i;return-1}var xce=Array.prototype,Ece=xce.splice;function Tce(t){var e=this.__data__,i=Vv(e,t);if(i<0)return!1;var s=e.length-1;return i==s?e.pop():Ece.call(e,i,1),--this.size,!0}function Cce(t){var e=this.__data__,i=Vv(e,t);return i<0?void 0:e[i][1]}function Pce(t){return Vv(this.__data__,t)>-1}function Rce(t,e){var i=this.__data__,s=Vv(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this}function ma(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}ma.prototype.clear=Sce;ma.prototype.delete=Tce;ma.prototype.get=Cce;ma.prototype.has=Pce;ma.prototype.set=Rce;function Ice(){this.__data__=new ma,this.size=0}function Ace(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function Dce(t){return this.__data__.get(t)}function Mce(t){return this.__data__.has(t)}var Oce="[object AsyncFunction]",Lce="[object Function]",Nce="[object GeneratorFunction]",Uce="[object Proxy]";function _k(t){if(!Jc(t))return!1;var e=zv(t);return e==Lce||e==Nce||e==Oce||e==Uce}var A0=Vl["__core-js_shared__"],JT=function(){var t=/[^.]+$/.exec(A0&&A0.keys&&A0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $ce(t){return!!JT&&JT in t}var jce=Function.prototype,zce=jce.toString;function Fce(t){if(t!=null){try{return zce.call(t)}catch{}try{return t+""}catch{}}return""}var Vce=/[\\^$.*+?()[\]{}|]/g,Bce=/^\[object .+?Constructor\]$/,Hce=Function.prototype,Wce=Object.prototype,qce=Hce.toString,Gce=Wce.hasOwnProperty,Jce=RegExp("^"+qce.call(Gce).replace(Vce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kce(t){if(!Jc(t)||$ce(t))return!1;var e=_k(t)?Jce:Bce;return e.test(Fce(t))}function Qce(t,e){return t==null?void 0:t[e]}function kk(t,e){var i=Qce(t,e);return Kce(i)?i:void 0}var ND=kk(Vl,"Map"),Jp=kk(Object,"create");function Yce(){this.__data__=Jp?Jp(null):{},this.size=0}function Zce(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Xce="__lodash_hash_undefined__",ede=Object.prototype,tde=ede.hasOwnProperty;function ide(t){var e=this.__data__;if(Jp){var i=e[t];return i===Xce?void 0:i}return tde.call(e,t)?e[t]:void 0}var sde=Object.prototype,rde=sde.hasOwnProperty;function nde(t){var e=this.__data__;return Jp?e[t]!==void 0:rde.call(e,t)}var ade="__lodash_hash_undefined__";function ode(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Jp&&e===void 0?ade:e,this}function Nc(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Nc.prototype.clear=Yce;Nc.prototype.delete=Zce;Nc.prototype.get=ide;Nc.prototype.has=nde;Nc.prototype.set=ode;function cde(){this.size=0,this.__data__={hash:new Nc,map:new(ND||ma),string:new Nc}}function dde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Bv(t,e){var i=t.__data__;return dde(e)?i[typeof e=="string"?"string":"hash"]:i.map}function lde(t){var e=Bv(this,t).delete(t);return this.size-=e?1:0,e}function ude(t){return Bv(this,t).get(t)}function pde(t){return Bv(this,t).has(t)}function hde(t,e){var i=Bv(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this}function Bl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Bl.prototype.clear=cde;Bl.prototype.delete=lde;Bl.prototype.get=ude;Bl.prototype.has=pde;Bl.prototype.set=hde;var gde=200;function mde(t,e){var i=this.__data__;if(i instanceof ma){var s=i.__data__;if(!ND||s.length<gde-1)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new Bl(s)}return i.set(t,e),this.size=i.size,this}function Hl(t){var e=this.__data__=new ma(t);this.size=e.size}Hl.prototype.clear=Ice;Hl.prototype.delete=Ace;Hl.prototype.get=Dce;Hl.prototype.has=Mce;Hl.prototype.set=mde;var Of=function(){try{var t=kk(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Sk(t,e,i){e=="__proto__"&&Of?Of(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function J1(t,e,i){(i!==void 0&&!Fv(t[e],i)||i===void 0&&!(e in t))&&Sk(t,e,i)}function fde(t){return function(e,i,s){for(var r=-1,n=Object(e),a=s(e),o=a.length;o--;){var c=a[t?o:++r];if(i(n[c],c,n)===!1)break}return e}}var vde=fde(),UD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,KT=UD&&typeof module=="object"&&module&&!module.nodeType&&module,yde=KT&&KT.exports===UD,QT=yde?Vl.Buffer:void 0,YT=QT?QT.allocUnsafe:void 0;function bde(t,e){if(e)return t.slice();var i=t.length,s=YT?YT(i):new t.constructor(i);return t.copy(s),s}var ZT=Vl.Uint8Array;function wde(t){var e=new t.constructor(t.byteLength);return new ZT(e).set(new ZT(t)),e}function _de(t,e){var i=e?wde(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function kde(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}var XT=Object.create,Sde=function(){function t(){}return function(e){if(!Jc(e))return{};if(XT)return XT(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function xde(t,e){return function(i){return t(e(i))}}var $D=xde(Object.getPrototypeOf,Object),Ede=Object.prototype;function jD(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||Ede;return t===i}function Tde(t){return typeof t.constructor=="function"&&!jD(t)?Sde($D(t)):{}}var Cde="[object Arguments]";function eC(t){return Th(t)&&zv(t)==Cde}var zD=Object.prototype,Pde=zD.hasOwnProperty,Rde=zD.propertyIsEnumerable,K1=eC(function(){return arguments}())?eC:function(t){return Th(t)&&Pde.call(t,"callee")&&!Rde.call(t,"callee")},Q1=Array.isArray,Ide=9007199254740991;function FD(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ide}function xk(t){return t!=null&&FD(t.length)&&!_k(t)}function Ade(t){return Th(t)&&xk(t)}function Dde(){return!1}var VD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tC=VD&&typeof module=="object"&&module&&!module.nodeType&&module,Mde=tC&&tC.exports===VD,iC=Mde?Vl.Buffer:void 0,Ode=iC?iC.isBuffer:void 0,BD=Ode||Dde,Lde="[object Object]",Nde=Function.prototype,Ude=Object.prototype,HD=Nde.toString,$de=Ude.hasOwnProperty,jde=HD.call(Object);function zde(t){if(!Th(t)||zv(t)!=Lde)return!1;var e=$D(t);if(e===null)return!0;var i=$de.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&HD.call(i)==jde}var Fde="[object Arguments]",Vde="[object Array]",Bde="[object Boolean]",Hde="[object Date]",Wde="[object Error]",qde="[object Function]",Gde="[object Map]",Jde="[object Number]",Kde="[object Object]",Qde="[object RegExp]",Yde="[object Set]",Zde="[object String]",Xde="[object WeakMap]",ele="[object ArrayBuffer]",tle="[object DataView]",ile="[object Float32Array]",sle="[object Float64Array]",rle="[object Int8Array]",nle="[object Int16Array]",ale="[object Int32Array]",ole="[object Uint8Array]",cle="[object Uint8ClampedArray]",dle="[object Uint16Array]",lle="[object Uint32Array]",yt={};yt[ile]=yt[sle]=yt[rle]=yt[nle]=yt[ale]=yt[ole]=yt[cle]=yt[dle]=yt[lle]=!0;yt[Fde]=yt[Vde]=yt[ele]=yt[Bde]=yt[tle]=yt[Hde]=yt[Wde]=yt[qde]=yt[Gde]=yt[Jde]=yt[Kde]=yt[Qde]=yt[Yde]=yt[Zde]=yt[Xde]=!1;function ule(t){return Th(t)&&FD(t.length)&&!!yt[zv(t)]}function ple(t){return function(e){return t(e)}}var WD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hp=WD&&typeof module=="object"&&module&&!module.nodeType&&module,hle=hp&&hp.exports===WD,D0=hle&&OD.process,sC=function(){try{var t=hp&&hp.require&&hp.require("util").types;return t||D0&&D0.binding&&D0.binding("util")}catch{}}(),rC=sC&&sC.isTypedArray,qD=rC?ple(rC):ule;function Y1(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var gle=Object.prototype,mle=gle.hasOwnProperty;function fle(t,e,i){var s=t[e];(!(mle.call(t,e)&&Fv(s,i))||i===void 0&&!(e in t))&&Sk(t,e,i)}function vle(t,e,i,s){var r=!i;i||(i={});for(var n=-1,a=e.length;++n<a;){var o=e[n],c=s?s(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),r?Sk(i,o,c):fle(i,o,c)}return i}function yle(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}var ble=9007199254740991,wle=/^(?:0|[1-9]\d*)$/;function GD(t,e){var i=typeof t;return e=e==null?ble:e,!!e&&(i=="number"||i!="symbol"&&wle.test(t))&&t>-1&&t%1==0&&t<e}var _le=Object.prototype,kle=_le.hasOwnProperty;function Sle(t,e){var i=Q1(t),s=!i&&K1(t),r=!i&&!s&&BD(t),n=!i&&!s&&!r&&qD(t),a=i||s||r||n,o=a?yle(t.length,String):[],c=o.length;for(var u in t)(e||kle.call(t,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||GD(u,c)))&&o.push(u);return o}function xle(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var Ele=Object.prototype,Tle=Ele.hasOwnProperty;function Cle(t){if(!Jc(t))return xle(t);var e=jD(t),i=[];for(var s in t)s=="constructor"&&(e||!Tle.call(t,s))||i.push(s);return i}function JD(t){return xk(t)?Sle(t,!0):Cle(t)}function Ple(t){return vle(t,JD(t))}function Rle(t,e,i,s,r,n,a){var o=Y1(t,i),c=Y1(e,i),u=a.get(c);if(u){J1(t,i,u);return}var l=n?n(o,c,i+"",t,e,a):void 0,h=l===void 0;if(h){var g=Q1(c),m=!g&&BD(c),f=!g&&!m&&qD(c);l=c,g||m||f?Q1(o)?l=o:Ade(o)?l=kde(o):m?(h=!1,l=bde(c,!0)):f?(h=!1,l=_de(c,!0)):l=[]:zde(c)||K1(c)?(l=o,K1(o)?l=Ple(o):(!Jc(o)||_k(o))&&(l=Tde(c))):h=!1}h&&(a.set(c,l),r(l,c,s,n,a),a.delete(c)),J1(t,i,l)}function KD(t,e,i,s,r){t!==e&&vde(e,function(n,a){if(r||(r=new Hl),Jc(n))Rle(t,e,a,i,KD,s,r);else{var o=s?s(Y1(t,a),n,a+"",t,e,r):void 0;o===void 0&&(o=n),J1(t,a,o)}},JD)}function QD(t){return t}function Ile(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var nC=Math.max;function Ale(t,e,i){return e=nC(e===void 0?t.length-1:e,0),function(){for(var s=arguments,r=-1,n=nC(s.length-e,0),a=Array(n);++r<n;)a[r]=s[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=s[r];return o[e]=i(a),Ile(t,this,o)}}function Dle(t){return function(){return t}}var Mle=Of?function(t,e){return Of(t,"toString",{configurable:!0,enumerable:!1,value:Dle(e),writable:!0})}:QD,Ole=800,Lle=16,Nle=Date.now;function Ule(t){var e=0,i=0;return function(){var s=Nle(),r=Lle-(s-i);if(i=s,r>0){if(++e>=Ole)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var $le=Ule(Mle);function jle(t,e){return $le(Ale(t,e,QD),t+"")}function zle(t,e,i){if(!Jc(i))return!1;var s=typeof e;return(s=="number"?xk(i)&&GD(e,i.length):s=="string"&&e in i)?Fv(i[e],t):!1}function Fle(t){return jle(function(e,i){var s=-1,r=i.length,n=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(r--,n):void 0,a&&zle(i[0],i[1],a)&&(n=r<3?void 0:n,r=1),e=Object(e);++s<r;){var o=i[s];o&&t(e,o,s,n)}return e})}Fle(function(t,e,i){KD(t,e,i)});const aC={get:(t,e,i)=>(...s)=>{try{return Reflect.get(t,e,i).apply(t,s)}catch{return null}}};let oC;try{oC=new Proxy(localStorage,aC)}catch{oC=new Proxy({},aC)}var is={exports:{}},Vle="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ble=Vle,Hle=Ble;function YD(){}function ZD(){}ZD.resetWarningCache=YD;var Wle=function(){function t(s,r,n,a,o,c){if(c!==Hle){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ZD,resetWarningCache:YD};return i.PropTypes=i,i};is.exports=Wle();function qle(t,e){if(t==null)return{};var i=Gle(t,e),s,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,s)||(i[s]=t[s]))}return i}function Gle(t,e){if(t==null)return{};var i={},s=Object.keys(t),r,n;for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}var Ek=Dt.exports.forwardRef(function(t,e){var i=t.color,s=i===void 0?"currentColor":i,r=t.size,n=r===void 0?24:r,a=qle(t,["color","size"]);return pn("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[Be("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),Be("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),Be("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),Be("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})});Ek.propTypes={color:is.exports.string,size:is.exports.oneOfType([is.exports.string,is.exports.number])};Ek.displayName="Mic";const Jle=Ek;function Kle(t,e){if(t==null)return{};var i=Qle(t,e),s,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,s)||(i[s]=t[s]))}return i}function Qle(t,e){if(t==null)return{};var i={},s=Object.keys(t),r,n;for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}var Tk=Dt.exports.forwardRef(function(t,e){var i=t.color,s=i===void 0?"currentColor":i,r=t.size,n=r===void 0?24:r,a=Kle(t,["color","size"]);return pn("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[Be("polygon",{points:"23 7 16 12 23 17 23 7"}),Be("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})});Tk.propTypes={color:is.exports.string,size:is.exports.oneOfType([is.exports.string,is.exports.number])};Tk.displayName="Video";const Yle=Tk;function Zle(t,e){if(t==null)return{};var i=Xle(t,e),s,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,s)||(i[s]=t[s]))}return i}function Xle(t,e){if(t==null)return{};var i={},s=Object.keys(t),r,n;for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}var Ck=Dt.exports.forwardRef(function(t,e){var i=t.color,s=i===void 0?"currentColor":i,r=t.size,n=r===void 0?24:r,a=Zle(t,["color","size"]);return pn("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[Be("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Be("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})});Ck.propTypes={color:is.exports.string,size:is.exports.oneOfType([is.exports.string,is.exports.number])};Ck.displayName="X";const eue=Ck;function XD(t){var e,i,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(i=XD(t[e]))&&(s&&(s+=" "),s+=i);else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function Lf(){for(var t,e,i=0,s="";i<arguments.length;)(t=arguments[i++])&&(e=XD(t))&&(s&&(s+=" "),s+=e);return s}const tue=Object.freeze(Object.defineProperty({__proto__:null,clsx:Lf,default:Lf},Symbol.toStringTag,{value:"Module"}));var Kp={exports:{}},eM={};const iue=fM(tue);var Bt={},En={};Object.defineProperty(En,"__esModule",{value:!0});En.dontSetMe=oue;En.findInArray=sue;En.int=aue;En.isFunction=rue;En.isNum=nue;function sue(t,e){for(let i=0,s=t.length;i<s;i++)if(e.apply(e,[t[i],i,t]))return t[i]}function rue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function nue(t){return typeof t=="number"&&!isNaN(t)}function aue(t){return parseInt(t,10)}function oue(t,e,i){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(i," - do not set this, set it on the child."))}var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.browserPrefixToKey=iM;Kc.browserPrefixToStyle=cue;Kc.default=void 0;Kc.getPrefix=tM;const M0=["Moz","Webkit","O","ms"];function tM(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const i=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!i||e in i)return"";for(let s=0;s<M0.length;s++)if(iM(e,M0[s])in i)return M0[s];return""}function iM(t,e){return e?"".concat(e).concat(due(t)):t}function cue(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function due(t){let e="",i=!0;for(let s=0;s<t.length;s++)i?(e+=t[s].toUpperCase(),i=!1):t[s]==="-"?i=!0:e+=t[s];return e}Kc.default=tM();Object.defineProperty(Bt,"__esModule",{value:!0});Bt.addClassName=nM;Bt.addEvent=pue;Bt.addUserSelectStyles=Sue;Bt.createCSSTransform=bue;Bt.createSVGTransform=wue;Bt.getTouch=_ue;Bt.getTouchIdentifier=kue;Bt.getTranslation=Pk;Bt.innerHeight=fue;Bt.innerWidth=vue;Bt.matchesSelector=rM;Bt.matchesSelectorAndParentsTo=uue;Bt.offsetXYFromParent=yue;Bt.outerHeight=gue;Bt.outerWidth=mue;Bt.removeClassName=aM;Bt.removeEvent=hue;Bt.removeUserSelectStyles=xue;var Bs=En,cC=lue(Kc);function sM(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(sM=function(s){return s?i:e})(t)}function lue(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var i=sM(e);if(i&&i.has(t))return i.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)){var a=r?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(s,n,a):s[n]=t[n]}return s.default=t,i&&i.set(t,s),s}let wg="";function rM(t,e){return wg||(wg=(0,Bs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(i){return(0,Bs.isFunction)(t[i])})),(0,Bs.isFunction)(t[wg])?t[wg](e):!1}function uue(t,e,i){let s=t;do{if(rM(s,e))return!0;if(s===i)return!1;s=s.parentNode}while(s);return!1}function pue(t,e,i,s){if(!t)return;const r={capture:!0,...s};t.addEventListener?t.addEventListener(e,i,r):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function hue(t,e,i,s){if(!t)return;const r={capture:!0,...s};t.removeEventListener?t.removeEventListener(e,i,r):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null}function gue(t){let e=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Bs.int)(i.borderTopWidth),e+=(0,Bs.int)(i.borderBottomWidth),e}function mue(t){let e=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Bs.int)(i.borderLeftWidth),e+=(0,Bs.int)(i.borderRightWidth),e}function fue(t){let e=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Bs.int)(i.paddingTop),e-=(0,Bs.int)(i.paddingBottom),e}function vue(t){let e=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Bs.int)(i.paddingLeft),e-=(0,Bs.int)(i.paddingRight),e}function yue(t,e,i){const r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),n=(t.clientX+e.scrollLeft-r.left)/i,a=(t.clientY+e.scrollTop-r.top)/i;return{x:n,y:a}}function bue(t,e){const i=Pk(t,e,"px");return{[(0,cC.browserPrefixToKey)("transform",cC.default)]:i}}function wue(t,e){return Pk(t,e,"")}function Pk(t,e,i){let{x:s,y:r}=t,n="translate(".concat(s).concat(i,",").concat(r).concat(i,")");if(e){const a="".concat(typeof e.x=="string"?e.x:e.x+i),o="".concat(typeof e.y=="string"?e.y:e.y+i);n="translate(".concat(a,", ").concat(o,")")+n}return n}function _ue(t,e){return t.targetTouches&&(0,Bs.findInArray)(t.targetTouches,i=>e===i.identifier)||t.changedTouches&&(0,Bs.findInArray)(t.changedTouches,i=>e===i.identifier)}function kue(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Sue(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&nM(t.body,"react-draggable-transparent-selection")}function xue(t){if(!!t)try{if(t.body&&aM(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function nM(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function aM(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.canDragX=Cue;Tn.canDragY=Pue;Tn.createCoreData=Iue;Tn.createDraggableData=Aue;Tn.getBoundPosition=Eue;Tn.getControlPosition=Rue;Tn.snapToGrid=Tue;var Rs=En,Jd=Bt;function Eue(t,e,i){if(!t.props.bounds)return[e,i];let{bounds:s}=t.props;s=typeof s=="string"?s:Due(s);const r=Rk(t);if(typeof s=="string"){const{ownerDocument:n}=r,a=n.defaultView;let o;if(s==="parent"?o=r.parentNode:o=n.querySelector(s),!(o instanceof a.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const c=o,u=a.getComputedStyle(r),l=a.getComputedStyle(c);s={left:-r.offsetLeft+(0,Rs.int)(l.paddingLeft)+(0,Rs.int)(u.marginLeft),top:-r.offsetTop+(0,Rs.int)(l.paddingTop)+(0,Rs.int)(u.marginTop),right:(0,Jd.innerWidth)(c)-(0,Jd.outerWidth)(r)-r.offsetLeft+(0,Rs.int)(l.paddingRight)-(0,Rs.int)(u.marginRight),bottom:(0,Jd.innerHeight)(c)-(0,Jd.outerHeight)(r)-r.offsetTop+(0,Rs.int)(l.paddingBottom)-(0,Rs.int)(u.marginBottom)}}return(0,Rs.isNum)(s.right)&&(e=Math.min(e,s.right)),(0,Rs.isNum)(s.bottom)&&(i=Math.min(i,s.bottom)),(0,Rs.isNum)(s.left)&&(e=Math.max(e,s.left)),(0,Rs.isNum)(s.top)&&(i=Math.max(i,s.top)),[e,i]}function Tue(t,e,i){const s=Math.round(e/t[0])*t[0],r=Math.round(i/t[1])*t[1];return[s,r]}function Cue(t){return t.props.axis==="both"||t.props.axis==="x"}function Pue(t){return t.props.axis==="both"||t.props.axis==="y"}function Rue(t,e,i){const s=typeof e=="number"?(0,Jd.getTouch)(t,e):null;if(typeof e=="number"&&!s)return null;const r=Rk(i),n=i.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,Jd.offsetXYFromParent)(s||t,n,i.props.scale)}function Iue(t,e,i){const s=!(0,Rs.isNum)(t.lastX),r=Rk(t);return s?{node:r,deltaX:0,deltaY:0,lastX:e,lastY:i,x:e,y:i}:{node:r,deltaX:e-t.lastX,deltaY:i-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:i}}function Aue(t,e){const i=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/i,y:t.state.y+e.deltaY/i,deltaX:e.deltaX/i,deltaY:e.deltaY/i,lastX:t.state.x,lastY:t.state.y}}function Due(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Rk(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Hv={},Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.default=Mue;function Mue(){}Object.defineProperty(Hv,"__esModule",{value:!0});Hv.default=void 0;var O0=Lue(Dt.exports),us=Ik(is.exports),Oue=Ik(Nf.exports),Vi=Bt,Ta=Tn,L0=En,Tu=Ik(Wv);function Ik(t){return t&&t.__esModule?t:{default:t}}function oM(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,i=new WeakMap;return(oM=function(s){return s?i:e})(t)}function Lue(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var i=oM(e);if(i&&i.has(t))return i.get(t);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)){var a=r?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(s,n,a):s[n]=t[n]}return s.default=t,i&&i.set(t,s),s}function Xi(t,e,i){return e=Nue(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Nue(t){var e=Uue(t,"string");return typeof e=="symbol"?e:String(e)}function Uue(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Er={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ca=Er.mouse;class qv extends O0.Component{constructor(){super(...arguments),Xi(this,"dragging",!1),Xi(this,"lastX",NaN),Xi(this,"lastY",NaN),Xi(this,"touchIdentifier",null),Xi(this,"mounted",!1),Xi(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const i=this.findDOMNode();if(!i||!i.ownerDocument||!i.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:s}=i;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,Vi.matchesSelectorAndParentsTo)(e.target,this.props.handle,i)||this.props.cancel&&(0,Vi.matchesSelectorAndParentsTo)(e.target,this.props.cancel,i))return;e.type==="touchstart"&&e.preventDefault();const r=(0,Vi.getTouchIdentifier)(e);this.touchIdentifier=r;const n=(0,Ta.getControlPosition)(e,r,this);if(n==null)return;const{x:a,y:o}=n,c=(0,Ta.createCoreData)(this,a,o);(0,Tu.default)("DraggableCore: handleDragStart: %j",c),(0,Tu.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Vi.addUserSelectStyles)(s),this.dragging=!0,this.lastX=a,this.lastY=o,(0,Vi.addEvent)(s,Ca.move,this.handleDrag),(0,Vi.addEvent)(s,Ca.stop,this.handleDragStop))}),Xi(this,"handleDrag",e=>{const i=(0,Ta.getControlPosition)(e,this.touchIdentifier,this);if(i==null)return;let{x:s,y:r}=i;if(Array.isArray(this.props.grid)){let o=s-this.lastX,c=r-this.lastY;if([o,c]=(0,Ta.snapToGrid)(this.props.grid,o,c),!o&&!c)return;s=this.lastX+o,r=this.lastY+c}const n=(0,Ta.createCoreData)(this,s,r);if((0,Tu.default)("DraggableCore: handleDrag: %j",n),this.props.onDrag(e,n)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=s,this.lastY=r}),Xi(this,"handleDragStop",e=>{if(!this.dragging)return;const i=(0,Ta.getControlPosition)(e,this.touchIdentifier,this);if(i==null)return;let{x:s,y:r}=i;if(Array.isArray(this.props.grid)){let c=s-this.lastX||0,u=r-this.lastY||0;[c,u]=(0,Ta.snapToGrid)(this.props.grid,c,u),s=this.lastX+c,r=this.lastY+u}const n=(0,Ta.createCoreData)(this,s,r);if(this.props.onStop(e,n)===!1||this.mounted===!1)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,Vi.removeUserSelectStyles)(o.ownerDocument),(0,Tu.default)("DraggableCore: handleDragStop: %j",n),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,Tu.default)("DraggableCore: Removing handlers"),(0,Vi.removeEvent)(o.ownerDocument,Ca.move,this.handleDrag),(0,Vi.removeEvent)(o.ownerDocument,Ca.stop,this.handleDragStop))}),Xi(this,"onMouseDown",e=>(Ca=Er.mouse,this.handleDragStart(e))),Xi(this,"onMouseUp",e=>(Ca=Er.mouse,this.handleDragStop(e))),Xi(this,"onTouchStart",e=>(Ca=Er.touch,this.handleDragStart(e))),Xi(this,"onTouchEnd",e=>(Ca=Er.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Vi.addEvent)(e,Er.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:i}=e;(0,Vi.removeEvent)(i,Er.mouse.move,this.handleDrag),(0,Vi.removeEvent)(i,Er.touch.move,this.handleDrag),(0,Vi.removeEvent)(i,Er.mouse.stop,this.handleDragStop),(0,Vi.removeEvent)(i,Er.touch.stop,this.handleDragStop),(0,Vi.removeEvent)(e,Er.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Vi.removeUserSelectStyles)(i)}}findDOMNode(){var e,i;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(i=this.props)===null||i===void 0||(i=i.nodeRef)===null||i===void 0?void 0:i.current:Oue.default.findDOMNode(this)}render(){return O0.cloneElement(O0.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}Hv.default=qv;Xi(qv,"displayName","DraggableCore");Xi(qv,"propTypes",{allowAnyClick:us.default.bool,children:us.default.node.isRequired,disabled:us.default.bool,enableUserSelectHack:us.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:us.default.arrayOf(us.default.number),handle:us.default.string,cancel:us.default.string,nodeRef:us.default.object,onStart:us.default.func,onDrag:us.default.func,onStop:us.default.func,onMouseDown:us.default.func,scale:us.default.number,className:L0.dontSetMe,style:L0.dontSetMe,transform:L0.dontSetMe});Xi(qv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=g(Dt.exports),i=l(is.exports),s=l(Nf.exports),r=l(iue),n=Bt,a=Tn,o=En,c=l(Hv),u=l(Wv);function l(b){return b&&b.__esModule?b:{default:b}}function h(b){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(h=function(D){return D?C:x})(b)}function g(b,x){if(!x&&b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var C=h(x);if(C&&C.has(b))return C.get(b);var D={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in b)if(L!=="default"&&Object.prototype.hasOwnProperty.call(b,L)){var V=M?Object.getOwnPropertyDescriptor(b,L):null;V&&(V.get||V.set)?Object.defineProperty(D,L,V):D[L]=b[L]}return D.default=b,C&&C.set(b,D),D}function m(){return m=Object.assign?Object.assign.bind():function(b){for(var x=1;x<arguments.length;x++){var C=arguments[x];for(var D in C)Object.prototype.hasOwnProperty.call(C,D)&&(b[D]=C[D])}return b},m.apply(this,arguments)}function f(b,x,C){return x=_(x),x in b?Object.defineProperty(b,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[x]=C,b}function _(b){var x=k(b,"string");return typeof x=="symbol"?x:String(x)}function k(b,x){if(typeof b!="object"||b===null)return b;var C=b[Symbol.toPrimitive];if(C!==void 0){var D=C.call(b,x||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(b)}class y extends e.Component{static getDerivedStateFromProps(x,C){let{position:D}=x,{prevPropsPosition:M}=C;return D&&(!M||D.x!==M.x||D.y!==M.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:D,prevPropsPosition:M}),{x:D.x,y:D.y,prevPropsPosition:{...D}}):null}constructor(x){super(x),f(this,"onDragStart",(C,D)=>{if((0,u.default)("Draggable: onDragStart: %j",D),this.props.onStart(C,(0,a.createDraggableData)(this,D))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(C,D)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",D);const M=(0,a.createDraggableData)(this,D),L={x:M.x,y:M.y,slackX:0,slackY:0};if(this.props.bounds){const{x:se,y:Q}=L;L.x+=this.state.slackX,L.y+=this.state.slackY;const[te,Ae]=(0,a.getBoundPosition)(this,L.x,L.y);L.x=te,L.y=Ae,L.slackX=this.state.slackX+(se-L.x),L.slackY=this.state.slackY+(Q-L.y),M.x=L.x,M.y=L.y,M.deltaX=L.x-this.state.x,M.deltaY=L.y-this.state.y}if(this.props.onDrag(C,M)===!1)return!1;this.setState(L)}),f(this,"onDragStop",(C,D)=>{if(!this.state.dragging||this.props.onStop(C,(0,a.createDraggableData)(this,D))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",D);const L={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:se,y:Q}=this.props.position;L.x=se,L.y=Q}this.setState(L)}),this.state={dragging:!1,dragged:!1,x:x.position?x.position.x:x.defaultPosition.x,y:x.position?x.position.y:x.defaultPosition.y,prevPropsPosition:{...x.position},slackX:0,slackY:0,isElementSVG:!1},x.position&&!(x.onDrag||x.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var x,C;return(x=(C=this.props)===null||C===void 0||(C=C.nodeRef)===null||C===void 0?void 0:C.current)!==null&&x!==void 0?x:s.default.findDOMNode(this)}render(){const{axis:x,bounds:C,children:D,defaultPosition:M,defaultClassName:L,defaultClassNameDragging:V,defaultClassNameDragged:se,position:Q,positionOffset:te,scale:Ae,...ze}=this.props;let Xe={},xt=null;const cs=!Boolean(Q)||this.state.dragging,z=Q||M,W={x:(0,a.canDragX)(this)&&cs?this.state.x:z.x,y:(0,a.canDragY)(this)&&cs?this.state.y:z.y};this.state.isElementSVG?xt=(0,n.createSVGTransform)(W,te):Xe=(0,n.createCSSTransform)(W,te);const Y=(0,r.default)(D.props.className||"",L,{[V]:this.state.dragging,[se]:this.state.dragged});return e.createElement(c.default,m({},ze,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(D),{className:Y,style:{...D.props.style,...Xe},transform:xt}))}}t.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...c.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),f(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(eM);const{default:cM,DraggableCore:$ue}=eM;Kp.exports=cM;Kp.exports.default=cM;Kp.exports.DraggableCore=$ue;function jue(){const{meeting:t}=Y_(),e=hf(i=>i.participants.active);return pn("div",{className:"relative flex place-items-center justify-center flex-1 overflow-hidden -m-4",children:[e.size===0&&Be("p",{className:"text-2xl",children:"People haven't joined yet."}),e.size>0&&Be(ace,{participants:e.toArray(),meeting:t,aspectRatio:"1:1",gap:18})]})}function zue(){const{meeting:t}=Y_(),e=hf(o=>o.participants.joined),{videoEnabled:i,audioEnabled:s}=hf(o=>({videoEnabled:o.self.videoEnabled,audioEnabled:o.self.audioEnabled})),r=()=>{t.self.videoEnabled?t.self.disableVideo():t.self.enableVideo()},n=()=>{t.self.audioEnabled?t.self.disableAudio():t.self.enableAudio()},a=()=>{t.leaveRoom()};return Be("div",{className:"z-20 flex w-full max-w-xs sm:w-min pt-4",children:pn("div",{className:"w-full p-4 gap-4 bg-neutral-800 shadow-2xl shadow-black rounded-2xl md:rounded-3xl flex flex-col",children:[pn("div",{className:"text-sm",children:[Be("h1",{children:t.meta.meetingTitle}),pn("div",{className:"text-stone-400",children:[e.size+1," People Active"]})]}),pn("div",{className:"flex items-center justify-evenly gap-10",children:[Be("button",{className:Lf("p-3 flex items-center justify-center rounded-full",s?"bg-white text-black":"bg-neutral-700 text-white"),onClick:n,children:Be(Jle,{})}),Be("button",{className:Lf("p-3 flex items-center justify-center rounded-full",i?"bg-white text-black":"bg-neutral-700 text-white"),onClick:r,children:Be(Yle,{})}),Be("button",{className:"bg-red-500 text-white p-3 flex items-center justify-center rounded-full",onClick:a,children:Be(eue,{})})]})]})})}function Fue(){const{meeting:t}=Y_(),e=hf(i=>i.self.roomJoined);return Dt.exports.useEffect(()=>{kce(document.body,{colors:{"video-bg":"#333333"}})},[]),e?pn("div",{className:"h-full w-full p-4 flex flex-col bg-black text-white overflow-hidden",children:[Be(nce,{meeting:t}),Be(jue,{}),Be(Kp.exports,{bounds:"parent",children:pn(rce,{participant:t.self,meeting:t,className:"z-10 absolute bottom-44 right-4 sm:bottom-4 shadow-black shadow-2xl aspect-square w-52 h-auto cursor-move duration-0",children:[Be(ice,{participant:t.self,size:"md"}),Be(sce,{participant:t.self,size:"md",children:Be(tce,{participant:t.self,size:"md",slot:"start"})})]},t.self.id)}),Be(Kp.exports,{bounds:"parent",children:Be(zue,{})})]}):Be("div",{className:"bg-black text-white w-full h-full flex place-items-center justify-center",children:Be("p",{className:"text-2xl",children:"You are not in the meeting."})})}function Vue(){const[t,e]=XY();return Dt.exports.useEffect(()=>{const s=new URL(window.location.href).searchParams.get("authToken");if(!s){alert("An authToken wasn't passed, please pass an authToken in the URL query to join a meeting.");return}e({authToken:s,defaults:{video:!1,audio:!1}}).then(r=>r==null?void 0:r.joinRoom())},[]),Object.assign(window,{meeting:t}),Be(ZY,{value:t,fallback:Be("div",{children:"Loading..."}),children:Be(Fue,{})})}N0.createRoot(document.getElementById("root")).render(Be(Vue,{}));
